var __wxLibrary={fileName: 'WAGame.js', envType: 'Service', contextType: 'Game:Uncertain', execStart: Date.now()}
;var __WAGameStartTime__ = Date.now();(function(global){;var __libVersionInfo__ = {"updateTime":"2021.7.21 10:19:55","version":"2.18.1","features":{"pruneWxConfigByPage":true,"injectGameContextPlugin":true,"lazyCodeLoading2":true,"injectAppSeparatedPlugin":true,"nativeTrans":true,"gameLive":true}};;var __Function__ = global.Function; var Function = __Function__;var BabelRuntimeHelpers={},regeneratorRuntime;(()=>{var e={1964:(e,t,n)=>{"use strict";function i(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.r(t),n.d(t,{default:()=>i})},6470:(e,t,n)=>{"use strict";function i(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}n.r(t),n.d(t,{default:()=>r})},1217:(e,t,n)=>{"use strict";function i(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.r(t),n.d(t,{default:()=>i})},6647:(e,t,n)=>{"use strict";function i(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}n.r(t),n.d(t,{default:()=>i})},1466:(e,t,n)=>{"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.r(t),n.d(t,{default:()=>o})},5238:(e,t,n)=>{"use strict";function i(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.r(t),n.d(t,{default:()=>i})},929:(e,t,n)=>{"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,{default:()=>i})},5551:(e,t,n)=>{var i={"./applyDecoratedDescriptor":1964,"./asyncToGenerator":6470,"./initializerDefineProperty":1217,"./initializerWarningHelper":6647,"./objectSpread2":1466,"./objectWithoutProperties":5238,"./typeof":929};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=5551},5396:e=>{var t=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof _?t:_,o=Object.create(r.prototype),a=new x(i||[]);return o._invoke=function(e,t,n){var i=d;return function(r,o){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw o;return O()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var c=u(e,t,n);if("normal"===c.type){if(i=n.done?f:h,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=f,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",g={};function _(){}function m(){}function y(){}var v={};v[o]=function(){return this};var A=Object.getPrototypeOf,b=A&&A(A(D([])));b&&b!==n&&i.call(b,o)&&(v=b);var w=y.prototype=_.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,o,a,s){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var r;this._invoke=function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}}function S(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=u(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:O}}function O(){return{value:t,done:!0}}return m.prototype=w.constructor=y,y.constructor=m,m.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(T.prototype),T.prototype[a]=function(){return this},e.AsyncIterator=T,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new T(l(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),c(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=D,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:D(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},7162:(e,t,n)=>{n(5396)},9401:(e,t,n)=>{"use strict";n.r(t);n(7162);const i=n(5551);i.keys().forEach((e=>{BabelRuntimeHelpers[e.substr(2)]=i(e)}))},5482:(e,t,n)=>{"use strict";n.r(t);n(634),n(6882),n(7072),n(4870),n(5735),n(3108),n(9731),n(9992),n(3430),n(7694),n(3985),n(5388),n(2994),n(3498),n(9509),n(7846),n(6635),n(5883),n(1804),n(2775),n(2586),n(3045),n(7890),n(3439),n(1515),n(7368),n(7950),n(103),n(977),n(5734),n(5940),n(8319),n(5794),n(8827),n(1715),n(1382),n(1982),n(3229),n(4074),n(4696),n(3675),n(6920),n(3161),n(723),n(6618),n(9527),n(315),n(6886),n(4962),n(6481),n(8990),n(884),n(5431),n(5704);["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((e=>{const t=globalThis[e];t&&t.name!==e&&Object.defineProperty(t,"name",{value:e})}))},305:(e,t,n)=>{var i=n(816),r=n(3718),o=n(6541),a=n(5353),s=o.data,c=o.normalize,l="USE_FUNCTION_CONSTRUCTOR",u="AsyncIteratorPrototype",d=function(e,t){if(r(e))for(var n=0;n<e.length;n++)s[c(e[n])]=t};e.exports=function(e){"object"==typeof e&&(d(e.useNative,o.NATIVE),d(e.usePolyfill,o.POLYFILL),d(e.useFeatureDetection,null),i(e,l)&&(a.USE_FUNCTION_CONSTRUCTOR=!!e.USE_FUNCTION_CONSTRUCTOR),i(e,u)&&(a.USE_FUNCTION_CONSTRUCTOR=e.AsyncIteratorPrototype))}},3819:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},8505:(e,t,n)=>{var i=n(5052);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},9736:(e,t,n)=>{var i=n(95),r=n(2391),o=n(1787),a=i("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:r(null)}),e.exports=function(e){s[a][e]=!0}},6637:(e,t,n)=>{"use strict";var i=n(966).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},7728:e=>{e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},1176:(e,t,n)=>{var i=n(5052);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},3339:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},9918:(e,t,n)=>{"use strict";var i,r=n(3339),o=n(7400),a=n(9859),s=n(5052),c=n(816),l=n(1589),u=n(5762),d=n(7487),h=n(1787).f,p=n(7567),f=n(6540),g=n(95),_=n(1441),m=a.Int8Array,y=m&&m.prototype,v=a.Uint8ClampedArray,A=v&&v.prototype,b=m&&p(m),w=y&&p(y),E=Object.prototype,T=E.isPrototypeOf,S=g("toStringTag"),C=_("TYPED_ARRAY_TAG"),I=r&&!!f&&"Opera"!==l(a.opera),x=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},O={BigInt64Array:8,BigUint64Array:8},P=function(e){if(!s(e))return!1;var t=l(e);return c(D,t)||c(O,t)};for(i in D)a[i]||(I=!1);if((!I||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},I))for(i in D)a[i]&&f(a[i],b);if((!I||!w||w===E)&&(w=b.prototype,I))for(i in D)a[i]&&f(a[i].prototype,w);if(I&&p(A)!==w&&f(A,w),o&&!c(w,S))for(i in x=!0,h(w,S,{get:function(){return s(this)?this[C]:void 0}}),D)a[i]&&u(a[i],C,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:x&&C,aTypedArray:function(e){if(P(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(f){if(T.call(b,e))return e}else for(var t in D)if(c(D,i)){var n=a[t];if(n&&(e===n||T.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var i in D){var r=a[i];if(r&&c(r.prototype,e))try{delete r.prototype[e]}catch(e){}}w[e]&&!n||d(w,e,n?t:I&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var i,r;if(o){if(f){if(n)for(i in D)if((r=a[i])&&c(r,e))try{delete r[e]}catch(e){}if(b[e]&&!n)return;try{return d(b,e,n?t:I&&b[e]||t)}catch(e){}}for(i in D)!(r=a[i])||r[e]&&!n||d(r,e,t)}},isView:function(e){if(!s(e))return!1;var t=l(e);return"DataView"===t||c(D,t)||c(O,t)},isTypedArray:P,TypedArray:b,TypedArrayPrototype:w}},3816:(e,t,n)=>{"use strict";var i=n(9859),r=n(7400),o=n(3339),a=n(5762),s=n(8787),c=n(4229),l=n(7728),u=n(6051),d=n(4237),h=n(7331),p=n(6201),f=n(7567),g=n(6540),_=n(8151).f,m=n(1787).f,y=n(7065),v=n(4555),A=n(6407),b=A.get,w=A.set,E="ArrayBuffer",T="DataView",S="Wrong index",C=i.ArrayBuffer,I=C,x=i.DataView,D=x&&x.prototype,O=Object.prototype,P=i.RangeError,R=p.pack,k=p.unpack,N=function(e){return[255&e]},M=function(e){return[255&e,e>>8&255]},L=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},B=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},F=function(e){return R(e,23,4)},U=function(e){return R(e,52,8)},W=function(e,t){m(e.prototype,t,{get:function(){return b(this)[t]}})},j=function(e,t,n,i){var r=h(n),o=b(e);if(r+t>o.byteLength)throw P(S);var a=b(o.buffer).bytes,s=r+o.byteOffset,c=a.slice(s,s+t);return i?c:c.reverse()},G=function(e,t,n,i,r,o){var a=h(n),s=b(e);if(a+t>s.byteLength)throw P(S);for(var c=b(s.buffer).bytes,l=a+s.byteOffset,u=i(+r),d=0;d<t;d++)c[l+d]=u[o?d:t-d-1]};if(o){if(!c((function(){C(1)}))||!c((function(){new C(-1)}))||c((function(){return new C,new C(1.5),new C(NaN),C.name!=E}))){for(var V,H=(I=function(e){return l(this,I),new C(h(e))}).prototype=C.prototype,z=_(C),Z=0;z.length>Z;)(V=z[Z++])in I||a(I,V,C[V]);H.constructor=I}g&&f(D)!==O&&g(D,O);var Y=new x(new I(2)),$=D.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||s(D,{setInt8:function(e,t){$.call(this,e,t<<24>>24)},setUint8:function(e,t){$.call(this,e,t<<24>>24)}},{unsafe:!0})}else I=function(e){l(this,I,E);var t=h(e);w(this,{bytes:y.call(new Array(t),0),byteLength:t}),r||(this.byteLength=t)},x=function(e,t,n){l(this,x,T),l(e,I,T);var i=b(e).byteLength,o=u(t);if(o<0||o>i)throw P("Wrong offset");if(o+(n=void 0===n?i-o:d(n))>i)throw P("Wrong length");w(this,{buffer:e,byteLength:n,byteOffset:o}),r||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},r&&(W(I,"byteLength"),W(x,"buffer"),W(x,"byteLength"),W(x,"byteOffset")),s(x.prototype,{getInt8:function(e){return j(this,1,e)[0]<<24>>24},getUint8:function(e){return j(this,1,e)[0]},getInt16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return B(j(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return B(j(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return k(j(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return k(j(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){G(this,1,e,N,t)},setUint8:function(e,t){G(this,1,e,N,t)},setInt16:function(e,t){G(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){G(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){G(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){G(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){G(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){G(this,8,e,U,t,arguments.length>2?arguments[2]:void 0)}});v(I,E),v(x,T),e.exports={ArrayBuffer:I,DataView:x}},7065:(e,t,n)=>{"use strict";var i=n(2991),r=n(3231),o=n(4237);e.exports=function(e){for(var t=i(this),n=o(t.length),a=arguments.length,s=r(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,l=void 0===c?n:r(c,n);l>s;)t[s++]=e;return t}},9540:(e,t,n)=>{var i=n(905),r=n(4237),o=n(3231),a=function(e){return function(t,n,a){var s,c=i(t),l=r(c.length),u=o(a,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9996:(e,t,n)=>{var i=n(7636),r=n(9337),o=n(2991),a=n(4237),s=n(7501),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,g,_,m){for(var y,v,A=o(f),b=r(A),w=i(g,_,3),E=a(b.length),T=0,S=m||s,C=t?S(f,E):n||h?S(f,0):void 0;E>T;T++)if((p||T in b)&&(v=w(y=b[T],T,A),e))if(t)C[T]=v;else if(v)switch(e){case 3:return!0;case 5:return y;case 6:return T;case 2:c.call(C,y)}else switch(e){case 4:return!1;case 7:c.call(C,y)}return d?-1:l||u?u:C}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},6038:(e,t,n)=>{"use strict";var i=n(4229);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},3143:(e,t,n)=>{var i=n(3819),r=n(2991),o=n(9337),a=n(4237),s=function(e){return function(t,n,s,c){i(n);var l=r(t),u=o(l),d=a(l.length),h=e?d-1:0,p=e?-1:1;if(s<2)for(;;){if(h in u){c=u[h],h+=p;break}if(h+=p,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=p)h in u&&(c=n(c,u[h],h,l));return c}};e.exports={left:s(!1),right:s(!0)}},3867:e=>{var t=Math.floor,n=function(e,o){var a=e.length,s=t(a/2);return a<8?i(e,o):r(n(e.slice(0,s),o),n(e.slice(s),o),o)},i=function(e,t){for(var n,i,r=e.length,o=1;o<r;){for(i=o,n=e[o];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==o++&&(e[i]=n)}return e},r=function(e,t,n){for(var i=e.length,r=t.length,o=0,a=0,s=[];o<i||a<r;)o<i&&a<r?s.push(n(e[o],t[a])<=0?e[o++]:t[a++]):s.push(o<i?e[o++]:t[a++]);return s};e.exports=n},7501:(e,t,n)=>{var i=n(5052),r=n(3718),o=n(95)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?i(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},4575:(e,t,n)=>{var i=n(95)("iterator"),r=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){r=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},7079:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},1589:(e,t,n)=>{var i=n(1601),r=n(7079),o=n(95)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=i?r:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},7081:(e,t,n)=>{var i=n(816),r=n(4826),o=n(7933),a=n(1787);e.exports=function(e,t){for(var n=r(t),s=a.f,c=o.f,l=0;l<n.length;l++){var u=n[l];i(e,u)||s(e,u,c(t,u))}}},7528:(e,t,n)=>{var i=n(4229);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3723:(e,t,n)=>{"use strict";var i=n(693).IteratorPrototype,r=n(2391),o=n(5358),a=n(4555),s=n(5495),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=r(i,{next:o(1,n)}),a(e,l,!1,!0),s[l]=c,e}},5762:(e,t,n)=>{var i=n(7400),r=n(1787),o=n(5358);e.exports=i?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},5358:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2324:(e,t,n)=>{"use strict";var i=n(2066),r=n(1787),o=n(5358);e.exports=function(e,t,n){var a=i(t);a in e?r.f(e,a,o(0,n)):e[a]=n}},7675:(e,t,n)=>{"use strict";var i=n(3103),r=n(3723),o=n(7567),a=n(6540),s=n(4555),c=n(5762),l=n(7487),u=n(95),d=n(4231),h=n(5495),p=n(693),f=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,_=u("iterator"),m="keys",y="values",v="entries",A=function(){return this};e.exports=function(e,t,n,u,p,b,w){r(n,t,u);var E,T,S,C=function(e){if(e===p&&P)return P;if(!g&&e in D)return D[e];switch(e){case m:case y:case v:return function(){return new n(this,e)}}return function(){return new n(this)}},I=t+" Iterator",x=!1,D=e.prototype,O=D[_]||D["@@iterator"]||p&&D[p],P=!g&&O||C(p),R="Array"==t&&D.entries||O;if(R&&(E=o(R.call(new e)),f!==Object.prototype&&E.next&&(d||o(E)===f||(a?a(E,f):"function"!=typeof E[_]&&c(E,_,A)),s(E,I,!0,!0),d&&(h[I]=A))),p==y&&O&&O.name!==y&&(x=!0,P=function(){return O.call(this)}),d&&!w||D[_]===P||c(D,_,P),h[t]=P,p)if(T={values:C(y),keys:b?P:C(m),entries:C(v)},w)for(S in T)(g||x||!(S in D))&&l(D,S,T[S]);else i({target:t,proto:!0,forced:g||x},T);return T}},8423:(e,t,n)=>{var i=n(9276),r=n(816),o=n(5391),a=n(1787).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});r(t,e)||a(t,e,{value:o.f(e)})}},7400:(e,t,n)=>{var i=n(4229);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2635:(e,t,n)=>{var i=n(9859),r=n(5052),o=i.document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},5694:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2671:(e,t,n)=>{var i=n(598).match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},8639:e=>{e.exports="object"==typeof window},8506:(e,t,n)=>{var i=n(598);e.exports=/MSIE|Trident/.test(i)},2023:(e,t,n)=>{var i=n(598);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(i)},8801:(e,t,n)=>{var i=n(7079),r=n(9859);e.exports="process"==i(r.process)},263:(e,t,n)=>{var i=n(598);e.exports=/web0s(?!.*chrome)/i.test(i)},598:(e,t,n)=>{var i=n(1333);e.exports=i("navigator","userAgent")||""},6358:(e,t,n)=>{var i,r,o=n(9859),a=n(598),s=o.process,c=s&&s.versions,l=c&&c.v8;l?r=(i=l.split("."))[0]<4?1:i[0]+i[1]:a&&(!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/))&&(r=i[1]),e.exports=r&&+r},9811:(e,t,n)=>{var i=n(598).match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},3837:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(e,t,n)=>{var i=n(9859),r=n(7933).f,o=n(5762),a=n(7487),s=n(2079),c=n(7081),l=n(6541);e.exports=function(e,t){var n,u,d,h,p,f=e.target,g=e.global,_=e.stat;if(n=g?i:_?i[f]||s(f,{}):(i[f]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(p=r(n,u))&&p.value:n[u],!l(g?u:f+(_?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),a(n,u,h,e)}}},4229:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4954:(e,t,n)=>{"use strict";n(7950);var i=n(7487),r=n(3466),o=n(4229),a=n(95),s=n(5762),c=a("species"),l=RegExp.prototype;e.exports=function(e,t,n,u){var d=a(e),h=!o((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),p=h&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!h||!p||n){var f=/./[d],g=t(d,""[e],(function(e,t,n,i,o){var a=t.exec;return a===r||a===l.exec?h&&!o?{done:!0,value:f.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(l,d,g[1])}u&&s(l[d],"sham",!0)}},4990:(e,t,n)=>{"use strict";var i=n(3718),r=n(4237),o=n(7636),a=function(e,t,n,s,c,l,u,d){for(var h,p=c,f=0,g=!!u&&o(u,d,3);f<s;){if(f in n){if(h=g?g(n[f],f,t):n[f],l>0&&i(h))p=a(e,t,h,r(h.length),p,l-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[p]=h}p++}f++}return p};e.exports=a},7636:(e,t,n)=>{var i=n(3819);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},1333:(e,t,n)=>{var i=n(9276),r=n(9859),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(i[e])||o(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},8830:(e,t,n)=>{var i=n(1589),r=n(5495),o=n(95)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||r[i(e)]}},17:(e,t,n)=>{var i=n(2991),r=Math.floor,o="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,l,u){var d=n+e.length,h=c.length,p=s;return void 0!==l&&(l=i(l),p=a),o.call(u,p,(function(i,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":a=l[o.slice(1,-1)];break;default:var s=+o;if(0===s)return i;if(s>h){var u=r(s/10);return 0===u?i:u<=h?void 0===c[u-1]?o.charAt(1):c[u-1]+o.charAt(1):i}a=c[s-1]}return void 0===a?"":a}))}},9859:(e,t,n)=>{var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},816:(e,t,n)=>{var i=n(2991),r={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return r.call(i(e),t)}},5977:e=>{e.exports={}},4665:(e,t,n)=>{var i=n(9859);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},3777:(e,t,n)=>{var i=n(1333);e.exports=i("document","documentElement")},4394:(e,t,n)=>{var i=n(7400),r=n(4229),o=n(2635);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},6201:e=>{var t=Math.abs,n=Math.pow,i=Math.floor,r=Math.log,o=Math.LN2;e.exports={pack:function(e,a,s){var c,l,u,d=new Array(s),h=8*s-a-1,p=(1<<h)-1,f=p>>1,g=23===a?n(2,-24)-n(2,-77):0,_=e<0||0===e&&1/e<0?1:0,m=0;for((e=t(e))!=e||e===1/0?(l=e!=e?1:0,c=p):(c=i(r(e)/o),e*(u=n(2,-c))<1&&(c--,u*=2),(e+=c+f>=1?g/u:g*n(2,1-f))*u>=2&&(c++,u/=2),c+f>=p?(l=0,c=p):c+f>=1?(l=(e*u-1)*n(2,a),c+=f):(l=e*n(2,f-1)*n(2,a),c=0));a>=8;d[m++]=255&l,l/=256,a-=8);for(c=c<<a|l,h+=a;h>0;d[m++]=255&c,c/=256,h-=8);return d[--m]|=128*_,d},unpack:function(e,t){var i,r=e.length,o=8*r-t-1,a=(1<<o)-1,s=a>>1,c=o-7,l=r-1,u=e[l--],d=127&u;for(u>>=7;c>0;d=256*d+e[l],l--,c-=8);for(i=d&(1<<-c)-1,d>>=-c,c+=t;c>0;i=256*i+e[l],l--,c-=8);if(0===d)d=1-s;else{if(d===a)return i?NaN:u?-1/0:1/0;i+=n(2,t),d-=s}return(u?-1:1)*i*n(2,d-t)}}},9337:(e,t,n)=>{var i=n(4229),r=n(7079),o="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?o.call(e,""):Object(e)}:Object},835:(e,t,n)=>{var i=n(5052),r=n(6540);e.exports=function(e,t,n){var o,a;return r&&"function"==typeof(o=t.constructor)&&o!==n&&i(a=o.prototype)&&a!==n.prototype&&r(e,a),e}},8511:(e,t,n)=>{var i=n(5353),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return r.call(e)}),e.exports=i.inspectSource},6407:(e,t,n)=>{var i,r,o,a=n(8694),s=n(9859),c=n(5052),l=n(5762),u=n(816),d=n(5353),h=n(4399),p=n(5977),f="Object already initialized",g=s.WeakMap;if(a||d.state){var _=d.state||(d.state=new g),m=_.get,y=_.has,v=_.set;i=function(e,t){if(y.call(_,e))throw new TypeError(f);return t.facade=e,v.call(_,e,t),t},r=function(e){return m.call(_,e)||{}},o=function(e){return y.call(_,e)}}else{var A=h("state");p[A]=!0,i=function(e,t){if(u(e,A))throw new TypeError(f);return t.facade=e,l(e,A,t),t},r=function(e){return u(e,A)?e[A]:{}},o=function(e){return u(e,A)}}e.exports={set:i,get:r,has:o,enforce:function(e){return o(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},1943:(e,t,n)=>{var i=n(95),r=n(5495),o=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},3718:(e,t,n)=>{var i=n(7079);e.exports=Array.isArray||function(e){return"Array"==i(e)}},6541:(e,t,n)=>{var i=n(4229),r=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==l||n!=c&&("function"==typeof t?i(t):!!t)},a=o.normalize=function(e){return String(e).replace(r,".").toLowerCase()},s=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},5052:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},4231:e=>{e.exports=!1},8311:(e,t,n)=>{var i=n(5052),r=n(7079),o=n(95)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},9003:(e,t,n)=>{var i=n(1176),r=n(1943),o=n(4237),a=n(7636),s=n(8830),c=n(7281),l=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var u,d,h,p,f,g,_,m=n&&n.that,y=!(!n||!n.AS_ENTRIES),v=!(!n||!n.IS_ITERATOR),A=!(!n||!n.INTERRUPTED),b=a(t,m,1+y+A),w=function(e){return u&&c(u),new l(!0,e)},E=function(e){return y?(i(e),A?b(e[0],e[1],w):b(e[0],e[1])):A?b(e,w):b(e)};if(v)u=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(r(d)){for(h=0,p=o(e.length);p>h;h++)if((f=E(e[h]))&&f instanceof l)return f;return new l(!1)}u=d.call(e)}for(g=u.next;!(_=g.call(u)).done;){try{f=E(_.value)}catch(e){throw c(u),e}if("object"==typeof f&&f&&f instanceof l)return f}return new l(!1)}},7281:(e,t,n)=>{var i=n(1176);e.exports=function(e){var t=e.return;if(void 0!==t)return i(t.call(e)).value}},693:(e,t,n)=>{"use strict";var i,r,o,a=n(4229),s=n(7567),c=n(5762),l=n(816),u=n(95),d=n(4231),h=u("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(r=s(s(o)))!==Object.prototype&&(i=r):p=!0);var f=null==i||a((function(){var e={};return i[h].call(e)!==e}));f&&(i={}),d&&!f||l(i,h)||c(i,h,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},5495:e=>{e.exports={}},9037:e=>{var t=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:t(1+e)}},4794:(e,t,n)=>{var i,r,o,a,s,c,l,u,d=n(9859),h=n(7933).f,p=n(5795).set,f=n(2023),g=n(263),_=n(8801),m=d.MutationObserver||d.WebKitMutationObserver,y=d.document,v=d.process,A=d.Promise,b=h(d,"queueMicrotask"),w=b&&b.value;w||(i=function(){var e,t;for(_&&(e=v.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?a():o=void 0,e}}o=void 0,e&&e.enter()},f||_||g||!m||!y?A&&A.resolve?((l=A.resolve(void 0)).constructor=A,u=l.then,a=function(){u.call(l,i)}):a=_?function(){v.nextTick(i)}:function(){p.call(d,i)}:(s=!0,c=y.createTextNode(""),new m(i).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=w||function(e){var t={fn:e,next:void 0};o&&(o.next=t),r||(r=t,a()),o=t}},4226:(e,t,n)=>{var i=n(9859);e.exports=i.Promise},3839:(e,t,n)=>{var i=n(6358),r=n(4229);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},8694:(e,t,n)=>{var i=n(9859),r=n(8511),o=i.WeakMap;e.exports="function"==typeof o&&/native code/.test(r(o))},6485:(e,t,n)=>{"use strict";var i=n(3819),r=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new r(e)}},2391:(e,t,n)=>{var i,r=n(1176),o=n(219),a=n(3837),s=n(5977),c=n(3777),l=n(2635),u=n(4399),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"</"+"script>"},f=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;f=i?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete f.prototype[a[n]];return f()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=r(e),n=new h,h.prototype=null,n[d]=e):n=f(),void 0===t?n:o(n,t)}},219:(e,t,n)=>{var i=n(7400),r=n(1787),o=n(1176),a=n(5632);e.exports=i?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),s=i.length,c=0;s>c;)r.f(e,n=i[c++],t[n]);return e}},1787:(e,t,n)=>{var i=n(7400),r=n(4394),o=n(1176),a=n(2066),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},7933:(e,t,n)=>{var i=n(7400),r=n(9195),o=n(5358),a=n(905),s=n(2066),c=n(816),l=n(4394),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=a(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return o(!r.f.call(e,t),e[t])}},8151:(e,t,n)=>{var i=n(140),r=n(3837).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},894:(e,t)=>{t.f=Object.getOwnPropertySymbols},7567:(e,t,n)=>{var i=n(816),r=n(2991),o=n(4399),a=n(7528),s=o("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=r(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},140:(e,t,n)=>{var i=n(816),r=n(905),o=n(9540).indexOf,a=n(5977);e.exports=function(e,t){var n,s=r(e),c=0,l=[];for(n in s)!i(a,n)&&i(s,n)&&l.push(n);for(;t.length>c;)i(s,n=t[c++])&&(~o(l,n)||l.push(n));return l}},5632:(e,t,n)=>{var i=n(140),r=n(3837);e.exports=Object.keys||function(e){return i(e,r)}},9195:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},5020:(e,t,n)=>{"use strict";var i=n(4231),r=n(9859),o=n(4229),a=n(9811);e.exports=i||!o((function(){if(!(a&&a<535)){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete r[e]}}))},6540:(e,t,n)=>{var i=n(1176),r=n(8505);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return i(n),r(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},7664:(e,t,n)=>{var i=n(7400),r=n(5632),o=n(905),a=n(9195).f,s=function(e){return function(t){for(var n,s=o(t),c=r(s),l=c.length,u=0,d=[];l>u;)n=c[u++],i&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}};e.exports={entries:s(!0),values:s(!1)}},4826:(e,t,n)=>{var i=n(1333),r=n(8151),o=n(894),a=n(1176);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},9276:(e,t,n)=>{var i=n(9859);e.exports=i},4624:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},7757:(e,t,n)=>{var i=n(1176),r=n(5052),o=n(6485);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},8787:(e,t,n)=>{var i=n(7487);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},7487:(e,t,n)=>{var i=n(9859),r=n(5762),o=n(816),a=n(2079),s=n(8511),c=n(6407),l=c.get,u=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c,l=!!s&&!!s.unsafe,h=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||r(n,"name",t),(c=u(n)).source||(c.source=d.join("string"==typeof t?t:""))),e!==i?(l?!p&&e[t]&&(h=!0):delete e[t],h?e[t]=n:r(e,t,n)):h?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},8115:(e,t,n)=>{var i=n(7079),r=n(3466);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},3466:(e,t,n)=>{"use strict";var i,r,o=n(895),a=n(5650),s=n(3036),c=n(2391),l=n(6407).get,u=n(2926),d=n(461),h=RegExp.prototype.exec,p=s("native-string-replace",String.prototype.replace),f=h,g=(i=/a/,r=/b*/g,h.call(i,"a"),h.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),_=a.UNSUPPORTED_Y||a.BROKEN_CARET,m=void 0!==/()??/.exec("")[1];(g||m||_||u||d)&&(f=function(e){var t,n,i,r,a,s,u,d=this,y=l(d),v=y.raw;if(v)return v.lastIndex=d.lastIndex,t=f.call(v,e),d.lastIndex=v.lastIndex,t;var A=y.groups,b=_&&d.sticky,w=o.call(d),E=d.source,T=0,S=e;if(b&&(-1===(w=w.replace("y","")).indexOf("g")&&(w+="g"),S=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(E="(?: "+E+")",S=" "+S,T++),n=new RegExp("^(?:"+E+")",w)),m&&(n=new RegExp("^"+E+"$(?!\\s)",w)),g&&(i=d.lastIndex),r=h.call(b?n:d,S),b?r?(r.input=r.input.slice(T),r[0]=r[0].slice(T),r.index=d.lastIndex,d.lastIndex+=r[0].length):d.lastIndex=0:g&&r&&(d.lastIndex=d.global?r.index+r[0].length:i),m&&r&&r.length>1&&p.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r&&A)for(r.groups=s=c(null),a=0;a<A.length;a++)s[(u=A[a])[0]]=r[u[1]];return r}),e.exports=f},895:(e,t,n)=>{"use strict";var i=n(1176);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},5650:(e,t,n)=>{var i=n(4229),r=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=i((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},2926:(e,t,n)=>{var i=n(4229);e.exports=i((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},461:(e,t,n)=>{var i=n(4229);e.exports=i((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},8885:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},2079:(e,t,n)=>{var i=n(9859),r=n(5762);e.exports=function(e,t){try{r(i,e,t)}catch(n){i[e]=t}return t}},1832:(e,t,n)=>{"use strict";var i=n(1333),r=n(1787),o=n(95),a=n(7400),s=o("species");e.exports=function(e){var t=i(e),n=r.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},4555:(e,t,n)=>{var i=n(1787).f,r=n(816),o=n(95)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},4399:(e,t,n)=>{var i=n(3036),r=n(1441),o=i("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},5353:(e,t,n)=>{var i=n(9859),r=n(2079),o="__core-js_shared__",a=i[o]||r(o,{});e.exports=a},3036:(e,t,n)=>{var i=n(4231),r=n(5353);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.1",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},7942:(e,t,n)=>{var i=n(1176),r=n(3819),o=n(95)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||null==(n=i(a)[o])?t:r(n)}},966:(e,t,n)=>{var i=n(6051),r=n(8885),o=function(e){return function(t,n){var o,a,s=String(r(t)),c=i(n),l=s.length;return c<0||c>=l?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},7456:(e,t,n)=>{var i=n(598);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(i)},6650:(e,t,n)=>{var i=n(4237),r=n(3124),o=n(8885),a=Math.ceil,s=function(e){return function(t,n,s){var c,l,u=String(o(t)),d=u.length,h=void 0===s?" ":String(s),p=i(n);return p<=d||""==h?u:(c=p-d,(l=r.call(h,a(c/h.length))).length>c&&(l=l.slice(0,c)),e?u+l:l+u)}};e.exports={start:s(!1),end:s(!0)}},3124:(e,t,n)=>{"use strict";var i=n(6051),r=n(8885);e.exports=function(e){var t=String(r(this)),n="",o=i(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},9445:(e,t,n)=>{var i=n(4229),r=n(1647);e.exports=function(e){return i((function(){return!!r[e]()||"​᠎"!="​᠎"[e]()||r[e].name!==e}))}},1017:(e,t,n)=>{var i=n(8885),r="["+n(1647)+"]",o=RegExp("^"+r+r+"*"),a=RegExp(r+r+"*$"),s=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},5795:(e,t,n)=>{var i,r,o,a=n(9859),s=n(4229),c=n(7636),l=n(3777),u=n(2635),d=n(2023),h=n(8801),p=a.location,f=a.setImmediate,g=a.clearImmediate,_=a.process,m=a.MessageChannel,y=a.Dispatch,v=0,A={},b="onreadystatechange",w=function(e){if(A.hasOwnProperty(e)){var t=A[e];delete A[e],t()}},E=function(e){return function(){w(e)}},T=function(e){w(e.data)},S=function(e){a.postMessage(e+"",p.protocol+"//"+p.host)};f&&g||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return A[++v]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(v),v},g=function(e){delete A[e]},h?i=function(e){_.nextTick(E(e))}:y&&y.now?i=function(e){y.now(E(e))}:m&&!d?(o=(r=new m).port2,r.port1.onmessage=T,i=c(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&p&&"file:"!==p.protocol&&!s(S)?(i=S,a.addEventListener("message",T,!1)):i=b in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),w(e)}}:function(e){setTimeout(E(e),0)}),e.exports={set:f,clear:g}},3231:(e,t,n)=>{var i=n(6051),r=Math.max,o=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):o(n,t)}},7331:(e,t,n)=>{var i=n(6051),r=n(4237);e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw RangeError("Wrong length or index");return n}},905:(e,t,n)=>{var i=n(9337),r=n(8885);e.exports=function(e){return i(r(e))}},6051:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},4237:(e,t,n)=>{var i=n(6051),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},2991:(e,t,n)=>{var i=n(8885);e.exports=function(e){return Object(i(e))}},4262:(e,t,n)=>{var i=n(2002);e.exports=function(e,t){var n=i(e);if(n%t)throw RangeError("Wrong offset");return n}},2002:(e,t,n)=>{var i=n(6051);e.exports=function(e){var t=i(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},2066:(e,t,n)=>{var i=n(5052);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},1601:(e,t,n)=>{var i={};i[n(95)("toStringTag")]="z",e.exports="[object z]"===String(i)},2574:(e,t,n)=>{"use strict";var i=n(3103),r=n(9859),o=n(7400),a=n(8200),s=n(9918),c=n(3816),l=n(7728),u=n(5358),d=n(5762),h=n(4237),p=n(7331),f=n(4262),g=n(2066),_=n(816),m=n(1589),y=n(5052),v=n(2391),A=n(6540),b=n(8151).f,w=n(5215),E=n(9996).forEach,T=n(1832),S=n(1787),C=n(7933),I=n(6407),x=n(835),D=I.get,O=I.set,P=S.f,R=C.f,k=Math.round,N=r.RangeError,M=c.ArrayBuffer,L=c.DataView,B=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,U=s.TypedArray,W=s.TypedArrayPrototype,j=s.aTypedArrayConstructor,G=s.isTypedArray,V="BYTES_PER_ELEMENT",H="Wrong length",z=function(e,t){for(var n=0,i=t.length,r=new(j(e))(i);i>n;)r[n]=t[n++];return r},Z=function(e,t){P(e,t,{get:function(){return D(this)[t]}})},Y=function(e){var t;return e instanceof M||"ArrayBuffer"==(t=m(e))||"SharedArrayBuffer"==t},$=function(e,t){return G(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},q=function(e,t){return $(e,t=g(t,!0))?u(2,e[t]):R(e,t)},Q=function(e,t,n){return!($(e,t=g(t,!0))&&y(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?P(e,t,n):(e[t]=n.value,e)};o?(B||(C.f=q,S.f=Q,Z(W,"buffer"),Z(W,"byteOffset"),Z(W,"byteLength"),Z(W,"length")),i({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:q,defineProperty:Q}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,u="set"+e,g=r[s],_=g,m=_&&_.prototype,S={},C=function(e,t){P(e,t,{get:function(){return function(e,t){var n=D(e);return n.view[c](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var r=D(e);n&&(i=(i=k(i))<0?0:i>255?255:255&i),r.view[u](t*o+r.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};B?a&&(_=t((function(e,t,n,i){return l(e,_,s),x(y(t)?Y(t)?void 0!==i?new g(t,f(n,o),i):void 0!==n?new g(t,f(n,o)):new g(t):G(t)?z(_,t):w.call(_,t):new g(p(t)),e,_)})),A&&A(_,U),E(b(g),(function(e){e in _||d(_,e,g[e])})),_.prototype=m):(_=t((function(e,t,n,i){l(e,_,s);var r,a,c,u=0,d=0;if(y(t)){if(!Y(t))return G(t)?z(_,t):w.call(_,t);r=t,d=f(n,o);var g=t.byteLength;if(void 0===i){if(g%o)throw N(H);if((a=g-d)<0)throw N(H)}else if((a=h(i)*o)+d>g)throw N(H);c=a/o}else c=p(t),r=new M(a=c*o);for(O(e,{buffer:r,byteOffset:d,byteLength:a,length:c,view:new L(r)});u<c;)C(e,u++)})),A&&A(_,U),m=_.prototype=v(W)),m.constructor!==_&&d(m,"constructor",_),F&&d(m,F,s),S[s]=_,i({global:!0,forced:_!=g,sham:!B},S),V in _||d(_,V,o),V in m||d(m,V,o),T(s)}):e.exports=function(){}},8200:(e,t,n)=>{var i=n(9859),r=n(4229),o=n(4575),a=n(9918).NATIVE_ARRAY_BUFFER_VIEWS,s=i.ArrayBuffer,c=i.Int8Array;e.exports=!a||!r((function(){c(1)}))||!r((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||r((function(){return 1!==new c(new s(2),1,void 0).length}))},5215:(e,t,n)=>{var i=n(2991),r=n(4237),o=n(8830),a=n(1943),s=n(7636),c=n(9918).aTypedArrayConstructor;e.exports=function(e){var t,n,l,u,d,h,p=i(e),f=arguments.length,g=f>1?arguments[1]:void 0,_=void 0!==g,m=o(p);if(null!=m&&!a(m))for(h=(d=m.call(p)).next,p=[];!(u=h.call(d)).done;)p.push(u.value);for(_&&f>2&&(g=s(g,arguments[2],2)),n=r(p.length),l=new(c(this))(n),t=0;n>t;t++)l[t]=_?g(p[t],t):p[t];return l}},1441:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},6969:(e,t,n)=>{var i=n(3839);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5391:(e,t,n)=>{var i=n(95);t.f=i},95:(e,t,n)=>{var i=n(9859),r=n(3036),o=n(816),a=n(1441),s=n(3839),c=n(6969),l=r("wks"),u=i.Symbol,d=c?u:u&&u.withoutSetter||a;e.exports=function(e){return o(l,e)&&(s||"string"==typeof l[e])||(s&&o(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},1647:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},5738:(e,t,n)=>{"use strict";var i=n(3103),r=n(7567),o=n(6540),a=n(2391),s=n(5762),c=n(5358),l=n(9003),u=function(e,t){var n=this;if(!(n instanceof u))return new u(e,t);o&&(n=o(new Error(void 0),r(n))),void 0!==t&&s(n,"message",String(t));var i=[];return l(e,i.push,{that:i}),s(n,"errors",i),n};u.prototype=a(Error.prototype,{constructor:c(5,u),message:c(5,""),name:c(5,"AggregateError")}),i({global:!0},{AggregateError:u})},5388:(e,t,n)=>{"use strict";var i=n(3103),r=n(9859),o=n(3816),a=n(1832),s="ArrayBuffer",c=o.ArrayBuffer;i({global:!0,forced:r.ArrayBuffer!==c},{ArrayBuffer:c}),a(s)},2994:(e,t,n)=>{"use strict";var i=n(3103),r=n(4229),o=n(3816),a=n(1176),s=n(3231),c=n(4237),l=n(7942),u=o.ArrayBuffer,d=o.DataView,h=u.prototype.slice;i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:r((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==h&&void 0===t)return h.call(a(this),e);for(var n=a(this).byteLength,i=s(e,n),r=s(void 0===t?n:t,n),o=new(l(this,u))(c(r-i)),p=new d(this),f=new d(o),g=0;i<r;)f.setUint8(g++,p.getUint8(i++));return o}})},4870:(e,t,n)=>{"use strict";var i=n(3103),r=n(4990),o=n(2991),a=n(4237),s=n(3819),c=n(7501);i({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),i=a(n.length);return s(e),(t=c(n,0)).length=r(t,n,n,i,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},7072:(e,t,n)=>{"use strict";var i=n(3103),r=n(4990),o=n(2991),a=n(4237),s=n(6051),c=n(7501);i({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t.length),i=c(t,0);return i.length=r(i,t,t,n,0,void 0===e?1:s(e)),i}})},5735:(e,t,n)=>{"use strict";var i=n(905),r=n(9736),o=n(5495),a=n(6407),s=n(7675),c="Array Iterator",l=a.set,u=a.getterFor(c);e.exports=s(Array,"Array",(function(e,t){l(this,{type:c,target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},9731:(e,t,n)=>{"use strict";var i=n(3103),r=n(3143).right,o=n(6038),a=n(6358),s=n(8801);i({target:"Array",proto:!0,forced:!o("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},3108:(e,t,n)=>{"use strict";var i=n(3103),r=n(3143).left,o=n(6038),a=n(6358),s=n(8801);i({target:"Array",proto:!0,forced:!o("reduce")||!s&&a>79&&a<83},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},9992:(e,t,n)=>{"use strict";var i=n(3103),r=n(3718),o=[].reverse,a=[1,2];i({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),o.call(this)}})},3430:(e,t,n)=>{"use strict";var i=n(3103),r=n(3819),o=n(2991),a=n(4237),s=n(4229),c=n(3867),l=n(6038),u=n(2671),d=n(8506),h=n(6358),p=n(9811),f=[],g=f.sort,_=s((function(){f.sort(void 0)})),m=s((function(){f.sort(null)})),y=l("sort"),v=!s((function(){if(h)return h<70;if(!(u&&u>3)){if(d)return!0;if(p)return p<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)f.push({k:t+i,v:n})}for(f.sort((function(e,t){return t.v-e.v})),i=0;i<f.length;i++)t=f[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));i({target:"Array",proto:!0,forced:_||!m||!y||!v},{sort:function(e){void 0!==e&&r(e);var t=o(this);if(v)return void 0===e?g.call(t):g.call(t,e);var n,i,s=[],l=a(t.length);for(i=0;i<l;i++)i in t&&s.push(t[i]);for(n=(s=c(s,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:String(t)>String(n)?1:-1}}(e))).length,i=0;i<n;)t[i]=s[i++];for(;i<l;)delete t[i++];return t}})},3985:(e,t,n)=>{n(9736)("flatMap")},7694:(e,t,n)=>{n(9736)("flat")},4173:(e,t,n)=>{n(3103)({global:!0},{globalThis:n(9859)})},3498:(e,t,n)=>{var i=n(3103),r=n(9037),o=Math.acosh,a=Math.log,s=Math.sqrt,c=Math.LN2;i({target:"Math",stat:!0,forced:!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?a(e)+c:r(e-1+s(e-1)*s(e+1))}})},9509:(e,t,n)=>{var i=n(3103),r=Math.hypot,o=Math.abs,a=Math.sqrt;i({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,i,r=0,s=0,c=arguments.length,l=0;s<c;)l<(n=o(arguments[s++]))?(r=r*(i=l/n)*i+1,l=n):r+=n>0?(i=n/l)*i:n;return l===1/0?1/0:l*a(r)}})},7846:(e,t,n)=>{"use strict";var i=n(3103),r=n(7400),o=n(5020),a=n(2991),s=n(3819),c=n(1787);r&&i({target:"Object",proto:!0,forced:o},{__defineGetter__:function(e,t){c.f(a(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},6635:(e,t,n)=>{"use strict";var i=n(3103),r=n(7400),o=n(5020),a=n(2991),s=n(3819),c=n(1787);r&&i({target:"Object",proto:!0,forced:o},{__defineSetter__:function(e,t){c.f(a(this),e,{set:s(t),enumerable:!0,configurable:!0})}})},5883:(e,t,n)=>{var i=n(3103),r=n(7664).entries;i({target:"Object",stat:!0},{entries:function(e){return r(e)}})},1804:(e,t,n)=>{var i=n(3103),r=n(9003),o=n(2324);i({target:"Object",stat:!0},{fromEntries:function(e){var t={};return r(e,(function(e,n){o(t,e,n)}),{AS_ENTRIES:!0}),t}})},2775:(e,t,n)=>{var i=n(3103),r=n(7400),o=n(4826),a=n(905),s=n(7933),c=n(2324);i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){for(var t,n,i=a(e),r=s.f,l=o(i),u={},d=0;l.length>d;)void 0!==(n=r(i,t=l[d++]))&&c(u,t,n);return u}})},2586:(e,t,n)=>{"use strict";var i=n(3103),r=n(7400),o=n(5020),a=n(2991),s=n(2066),c=n(7567),l=n(7933).f;r&&i({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(e){var t,n=a(this),i=s(e,!0);do{if(t=l(n,i))return t.get}while(n=c(n))}})},3045:(e,t,n)=>{"use strict";var i=n(3103),r=n(7400),o=n(5020),a=n(2991),s=n(2066),c=n(7567),l=n(7933).f;r&&i({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(e){var t,n=a(this),i=s(e,!0);do{if(t=l(n,i))return t.set}while(n=c(n))}})},7890:(e,t,n)=>{var i=n(3103),r=n(7664).values;i({target:"Object",stat:!0},{values:function(e){return r(e)}})},7919:(e,t,n)=>{"use strict";var i=n(3103),r=n(3819),o=n(6485),a=n(4624),s=n(9003);i({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=o.f(t),i=n.resolve,c=n.reject,l=a((function(){var n=r(t.resolve),o=[],a=0,c=1;s(e,(function(e){var r=a++,s=!1;o.push(void 0),c++,n.call(t,e).then((function(e){s||(s=!0,o[r]={status:"fulfilled",value:e},--c||i(o))}),(function(e){s||(s=!0,o[r]={status:"rejected",reason:e},--c||i(o))}))})),--c||i(o)}));return l.error&&c(l.value),n.promise}})},7178:(e,t,n)=>{"use strict";var i=n(3103),r=n(3819),o=n(1333),a=n(6485),s=n(4624),c=n(9003),l="No one promise resolved";i({target:"Promise",stat:!0},{any:function(e){var t=this,n=a.f(t),i=n.resolve,u=n.reject,d=s((function(){var n=r(t.resolve),a=[],s=0,d=1,h=!1;c(e,(function(e){var r=s++,c=!1;a.push(void 0),d++,n.call(t,e).then((function(e){c||h||(h=!0,i(e))}),(function(e){c||h||(c=!0,a[r]=e,--d||u(new(o("AggregateError"))(a,l)))}))})),--d||u(new(o("AggregateError"))(a,l))}));return d.error&&u(d.value),n.promise}})},1515:(e,t,n)=>{"use strict";var i=n(3103),r=n(4231),o=n(4226),a=n(4229),s=n(1333),c=n(7942),l=n(7757),u=n(7487);if(i({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),!r&&"function"==typeof o){var d=s("Promise").prototype.finally;o.prototype.finally!==d&&u(o.prototype,"finally",d,{unsafe:!0})}},3439:(e,t,n)=>{"use strict";var i,r,o,a,s=n(3103),c=n(4231),l=n(9859),u=n(1333),d=n(4226),h=n(7487),p=n(8787),f=n(6540),g=n(4555),_=n(1832),m=n(5052),y=n(3819),v=n(7728),A=n(8511),b=n(9003),w=n(4575),E=n(7942),T=n(5795).set,S=n(4794),C=n(7757),I=n(4665),x=n(6485),D=n(4624),O=n(6407),P=n(6541),R=n(95),k=n(8639),N=n(8801),M=n(6358),L=R("species"),B="Promise",F=O.get,U=O.set,W=O.getterFor(B),j=d&&d.prototype,G=d,V=j,H=l.TypeError,z=l.document,Z=l.process,Y=x.f,$=Y,q=!!(z&&z.createEvent&&l.dispatchEvent),Q="function"==typeof PromiseRejectionEvent,J="unhandledrejection",X=!1,K=P(B,(function(){var e=A(G)!==String(G);if(!e&&66===M)return!0;if(c&&!V.finally)return!0;if(M>=51&&/native code/.test(G))return!1;var t=new G((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(t.constructor={})[L]=n,!(X=t.then((function(){}))instanceof n)||!e&&k&&!Q})),ee=K||!w((function(e){G.all(e).catch((function(){}))})),te=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},ne=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;S((function(){for(var i=e.value,r=1==e.state,o=0;n.length>o;){var a,s,c,l=n[o++],u=r?l.ok:l.fail,d=l.resolve,h=l.reject,p=l.domain;try{u?(r||(2===e.rejection&&ae(e),e.rejection=1),!0===u?a=i:(p&&p.enter(),a=u(i),p&&(p.exit(),c=!0)),a===l.promise?h(H("Promise-chain cycle")):(s=te(a))?s.call(a,d,h):d(a)):h(i)}catch(e){p&&!c&&p.exit(),h(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&re(e)}))}},ie=function(e,t,n){var i,r;q?((i=z.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),l.dispatchEvent(i)):i={promise:t,reason:n},!Q&&(r=l["on"+e])?r(i):e===J&&I("Unhandled promise rejection",n)},re=function(e){T.call(l,(function(){var t,n=e.facade,i=e.value;if(oe(e)&&(t=D((function(){N?Z.emit("unhandledRejection",i,n):ie(J,n,i)})),e.rejection=N||oe(e)?2:1,t.error))throw t.value}))},oe=function(e){return 1!==e.rejection&&!e.parent},ae=function(e){T.call(l,(function(){var t=e.facade;N?Z.emit("rejectionHandled",t):ie("rejectionhandled",t,e.value)}))},se=function(e,t,n){return function(i){e(t,i,n)}},ce=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ne(e,!0))},le=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw H("Promise can't be resolved itself");var i=te(t);i?S((function(){var n={done:!1};try{i.call(t,se(le,n,e),se(ce,n,e))}catch(t){ce(n,t,e)}})):(e.value=t,e.state=1,ne(e,!1))}catch(t){ce({done:!1},t,e)}}};if(K&&(V=(G=function(e){v(this,G,B),y(e),i.call(this);var t=F(this);try{e(se(le,t),se(ce,t))}catch(e){ce(t,e)}}).prototype,(i=function(e){U(this,{type:B,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(V,{then:function(e,t){var n=W(this),i=Y(E(this,G));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=N?Z.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&ne(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i,t=F(e);this.promise=e,this.resolve=se(le,t),this.reject=se(ce,t)},x.f=Y=function(e){return e===G||e===o?new r(e):$(e)},!c&&"function"==typeof d&&j!==Object.prototype)){a=j.then,X||(h(j,"then",(function(e,t){var n=this;return new G((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),h(j,"catch",V.catch,{unsafe:!0}));try{delete j.constructor}catch(e){}f&&f(j,V)}s({global:!0,wrap:!0,forced:K},{Promise:G}),g(G,B,!1,!0),_(B),o=u(B),s({target:B,stat:!0,forced:K},{reject:function(e){var t=Y(this);return t.reject.call(void 0,e),t.promise}}),s({target:B,stat:!0,forced:c||K},{resolve:function(e){return C(c&&this===o?G:this,e)}}),s({target:B,stat:!0,forced:ee},{all:function(e){var t=this,n=Y(t),i=n.resolve,r=n.reject,o=D((function(){var n=y(t.resolve),o=[],a=0,s=1;b(e,(function(e){var c=a++,l=!1;o.push(void 0),s++,n.call(t,e).then((function(e){l||(l=!0,o[c]=e,--s||i(o))}),r)})),--s||i(o)}));return o.error&&r(o.value),n.promise},race:function(e){var t=this,n=Y(t),i=n.reject,r=D((function(){var r=y(t.resolve);b(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}})},7368:(e,t,n)=>{var i=n(7400),r=n(9859),o=n(6541),a=n(835),s=n(5762),c=n(1787).f,l=n(8151).f,u=n(8311),d=n(895),h=n(5650),p=n(7487),f=n(4229),g=n(816),_=n(6407).enforce,m=n(1832),y=n(95),v=n(2926),A=n(461),b=y("match"),w=r.RegExp,E=w.prototype,T=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,S=/a/g,C=/a/g,I=new w(S)!==S,x=h.UNSUPPORTED_Y,D=i&&(!I||x||v||A||f((function(){return C[b]=!1,w(S)!=S||w(C)==C||"/a/i"!=w(S,"i")})));if(o("RegExp",D)){for(var O=function(e,t){var n,i,r,o,c,l,h=this instanceof O,p=u(e),f=void 0===t,m=[],y=e;if(!h&&p&&f&&e.constructor===O)return e;if((p||e instanceof O)&&(e=e.source,f&&(t="flags"in y?y.flags:d.call(y))),e=void 0===e?"":String(e),t=void 0===t?"":String(t),y=e,v&&"dotAll"in S&&(i=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,x&&"sticky"in S&&(r=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),A&&(e=(o=function(e){for(var t,n=e.length,i=0,r="",o=[],a={},s=!1,c=!1,l=0,u="";i<=n;i++){if("\\"===(t=e.charAt(i)))t+=e.charAt(++i);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:T.test(e.slice(i+1))&&(i+=2,c=!0),r+=t,l++;continue;case">"===t&&c:if(""===u||g(a,u))throw new SyntaxError("Invalid capture group name");a[u]=!0,o.push([u,l]),c=!1,u="";continue}c?u+=t:r+=t}return[r,o]}(e))[0],m=o[1]),c=a(w(e,t),h?this:E,O),(i||r||m.length)&&(l=_(c),i&&(l.dotAll=!0,l.raw=O(function(e){for(var t,n=e.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(t=e.charAt(i))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),r+=t):r+="[\\s\\S]":r+=t+e.charAt(++i);return r}(e),n)),r&&(l.sticky=!0),m.length&&(l.groups=m)),e!==y)try{s(c,"source",""===y?"(?:)":y)}catch(e){}return c},P=function(e){e in O||c(O,e,{configurable:!0,get:function(){return w[e]},set:function(t){w[e]=t}})},R=l(w),k=0;R.length>k;)P(R[k++]);E.constructor=O,O.prototype=E,p(r,"RegExp",O)}m("RegExp")},7950:(e,t,n)=>{"use strict";var i=n(3103),r=n(3466);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},103:(e,t,n)=>{var i=n(7400),r=n(1787),o=n(895),a=n(4229);i&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get.call({dotAll:!0,sticky:!0})}))&&r.f(RegExp.prototype,"flags",{configurable:!0,get:o})},3887:(e,t,n)=>{"use strict";var i=n(3103),r=n(3723),o=n(8885),a=n(4237),s=n(3819),c=n(1176),l=n(7079),u=n(8311),d=n(895),h=n(5762),p=n(4229),f=n(95),g=n(7942),_=n(6637),m=n(6407),y=n(4231),v=f("matchAll"),A="RegExp String",b="RegExp String Iterator",w=m.set,E=m.getterFor(b),T=RegExp.prototype,S=T.exec,C="".matchAll,I=!!C&&!p((function(){"a".matchAll(/./)})),x=r((function(e,t,n,i){w(this,{type:b,regexp:e,string:t,global:n,unicode:i,done:!1})}),A,(function(){var e=E(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,i=function(e,t){var n,i=e.exec;if("function"==typeof i){if("object"!=typeof(n=i.call(e,t)))throw TypeError("Incorrect exec result");return n}return S.call(e,t)}(t,n);return null===i?{value:void 0,done:e.done=!0}:e.global?(""==String(i[0])&&(t.lastIndex=_(n,a(t.lastIndex),e.unicode)),{value:i,done:!1}):(e.done=!0,{value:i,done:!1})})),D=function(e){var t,n,i,r,o,s,l=c(this),u=String(e);return t=g(l,RegExp),void 0===(n=l.flags)&&l instanceof RegExp&&!("flags"in T)&&(n=d.call(l)),i=void 0===n?"":String(n),r=new t(t===RegExp?l.source:l,i),o=!!~i.indexOf("g"),s=!!~i.indexOf("u"),r.lastIndex=a(l.lastIndex),new x(r,u,o,s)};i({target:"String",proto:!0,forced:I},{matchAll:function(e){var t,n,i,r=o(this);if(null!=e){if(u(e)&&!~String(o("flags"in T?e.flags:d.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(I)return C.apply(r,arguments);if(void 0===(n=e[v])&&y&&"RegExp"==l(e)&&(n=D),null!=n)return s(n).call(e,r)}else if(I)return C.apply(r,arguments);return t=String(r),i=new RegExp(e,"g"),y?D.call(i,t):i[v](t)}}),y||v in T||h(T,v,D)},977:(e,t,n)=>{"use strict";var i=n(3103),r=n(6650).end;i({target:"String",proto:!0,forced:n(7456)},{padEnd:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5734:(e,t,n)=>{"use strict";var i=n(3103),r=n(6650).start;i({target:"String",proto:!0,forced:n(7456)},{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},1639:(e,t,n)=>{"use strict";var i=n(3103),r=n(8885),o=n(8311),a=n(895),s=n(17),c=n(95),l=n(4231),u=c("replace"),d=RegExp.prototype,h=Math.max,p=function(e,t,n){return n>e.length?-1:""===t?n:e.indexOf(t,n)};i({target:"String",proto:!0},{replaceAll:function(e,t){var n,i,c,f,g,_,m,y,v=r(this),A=0,b=0,w="";if(null!=e){if((n=o(e))&&!~String(r("flags"in d?e.flags:a.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(i=e[u]))return i.call(e,v,t);if(l&&n)return String(v).replace(e,t)}for(c=String(v),f=String(e),(g="function"==typeof t)||(t=String(t)),_=f.length,m=h(1,_),A=p(c,f,0);-1!==A;)y=g?String(t(f,A,c)):s(f,c,A,[],void 0,t),w+=c.slice(b,A)+y,b=A+_,A=p(c,f,A+m);return b<c.length&&(w+=c.slice(b)),w}})},5940:(e,t,n)=>{"use strict";var i=n(4954),r=n(4229),o=n(1176),a=n(4237),s=n(6051),c=n(8885),l=n(6637),u=n(17),d=n(8115),h=n(95)("replace"),p=Math.max,f=Math.min,g="$0"==="a".replace(/./,"$0"),_=!!/./[h]&&""===/./[h]("a","$0");i("replace",(function(e,t,n){var i=_?"$":"$0";return[function(e,n){var i=c(this),r=null==e?void 0:e[h];return void 0!==r?r.call(e,i,n):t.call(String(i),e,n)},function(e,r){if("string"==typeof r&&-1===r.indexOf(i)&&-1===r.indexOf("$<")){var c=n(t,this,e,r);if(c.done)return c.value}var h=o(this),g=String(e),_="function"==typeof r;_||(r=String(r));var m=h.global;if(m){var y=h.unicode;h.lastIndex=0}for(var v=[];;){var A=d(h,g);if(null===A)break;if(v.push(A),!m)break;""===String(A[0])&&(h.lastIndex=l(g,a(h.lastIndex),y))}for(var b,w="",E=0,T=0;T<v.length;T++){A=v[T];for(var S=String(A[0]),C=p(f(s(A.index),g.length),0),I=[],x=1;x<A.length;x++)I.push(void 0===(b=A[x])?b:String(b));var D=A.groups;if(_){var O=[S].concat(I,C,g);void 0!==D&&O.push(D);var P=String(r.apply(void 0,O))}else P=u(S,g,C,I,D,r);C>=E&&(w+=g.slice(E,C)+P,E=C+S.length)}return w+g.slice(E)}]}),!!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!g||_)},8319:(e,t,n)=>{"use strict";var i=n(4954),r=n(8311),o=n(1176),a=n(8885),s=n(7942),c=n(6637),l=n(4237),u=n(8115),d=n(3466),h=n(5650),p=n(4229),f=h.UNSUPPORTED_Y,g=[].push,_=Math.min,m=4294967295;i("split",(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(a(this)),o=void 0===n?m:n>>>0;if(0===o)return[];if(void 0===e)return[i];if(!r(e))return t.call(i,e,o);for(var s,c,l,u=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,f=new RegExp(e.source,h+"g");(s=d.call(f,i))&&!((c=f.lastIndex)>p&&(u.push(i.slice(p,s.index)),s.length>1&&s.index<i.length&&g.apply(u,s.slice(1)),l=s[0].length,p=c,u.length>=o));)f.lastIndex===s.index&&f.lastIndex++;return p===i.length?!l&&f.test("")||u.push(""):u.push(i.slice(p)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=a(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,r,n):i.call(String(r),t,n)},function(e,r){var a=n(i,this,e,r,i!==t);if(a.done)return a.value;var d=o(this),h=String(e),p=s(d,RegExp),g=d.unicode,y=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(f?"g":"y"),v=new p(f?"^(?:"+d.source+")":d,y),A=void 0===r?m:r>>>0;if(0===A)return[];if(0===h.length)return null===u(v,h)?[h]:[];for(var b=0,w=0,E=[];w<h.length;){v.lastIndex=f?0:w;var T,S=u(v,f?h.slice(w):h);if(null===S||(T=_(l(v.lastIndex+(f?w:0)),h.length))===b)w=c(h,w,g);else{if(E.push(h.slice(b,w)),E.length===A)return E;for(var C=1;C<=S.length-1;C++)if(E.push(S[C]),E.length===A)return E;w=b=T}}return E.push(h.slice(b)),E}]}),!!p((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),f)},8827:(e,t,n)=>{"use strict";var i=n(3103),r=n(1017).end,o=n(9445)("trimEnd"),a=o?function(){return r(this)}:"".trimEnd;i({target:"String",proto:!0,forced:o},{trimEnd:a,trimRight:a})},1715:(e,t,n)=>{"use strict";var i=n(3103),r=n(1017).start,o=n(9445)("trimStart"),a=o?function(){return r(this)}:"".trimStart;i({target:"String",proto:!0,forced:o},{trimStart:a,trimLeft:a})},5794:(e,t,n)=>{"use strict";var i=n(3103),r=n(1017).trim;i({target:"String",proto:!0,forced:n(9445)("trim")},{trim:function(){return r(this)}})},6882:(e,t,n)=>{n(8423)("asyncIterator")},634:(e,t,n)=>{"use strict";var i=n(3103),r=n(7400),o=n(9859),a=n(816),s=n(5052),c=n(1787).f,l=n(7081),u=o.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};l(h,u);var p=h.prototype=u.prototype;p.constructor=h;var f=p.toString,g="Symbol(test)"==String(u("test")),_=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=f.call(e);if(a(d,e))return"";var n=g?t.slice(7,-1):t.replace(_,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:h})}},1382:(e,t,n)=>{n(2574)("Float32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},1982:(e,t,n)=>{n(2574)("Float64",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},6618:(e,t,n)=>{"use strict";var i=n(8200);(0,n(9918).exportTypedArrayStaticMethod)("from",n(5215),i)},4074:(e,t,n)=>{n(2574)("Int16",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},4696:(e,t,n)=>{n(2574)("Int32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},3229:(e,t,n)=>{n(2574)("Int8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},9527:(e,t,n)=>{"use strict";var i=n(9918),r=n(8200),o=i.aTypedArrayConstructor;(0,i.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(o(this))(t);t>e;)n[e]=arguments[e++];return n}),r)},315:(e,t,n)=>{"use strict";var i=n(9918),r=n(9859),o=n(4229),a=n(3819),s=n(4237),c=n(3867),l=n(2671),u=n(8506),d=n(6358),h=n(9811),p=i.aTypedArray,f=i.exportTypedArrayMethod,g=r.Uint16Array,_=g&&g.prototype.sort,m=!!_&&!o((function(){var e=new g(2);e.sort(null),e.sort({})})),y=!!_&&!o((function(){if(d)return d<74;if(l)return l<67;if(u)return!0;if(h)return h<602;var e,t,n=new g(516),i=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,i[e]=e-2*t+3;for(n.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==i[e])return!0}));f("sort",(function(e){var t=this;if(void 0!==e&&a(e),y)return _.call(t,e);p(t);var n,i=s(t.length),r=Array(i);for(n=0;n<i;n++)r[n]=t[n];for(r=c(t,function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e)),n=0;n<i;n++)t[n]=r[n];return t}),!y||m)},3161:(e,t,n)=>{n(2574)("Uint16",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},723:(e,t,n)=>{n(2574)("Uint32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},3675:(e,t,n)=>{n(2574)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},6920:(e,t,n)=>{n(2574)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}),!0)},4962:(e,t,n)=>{n(5738)},6481:(e,t,n)=>{n(4173)},8990:(e,t,n)=>{n(7919)},884:(e,t,n)=>{n(7178)},5431:(e,t,n)=>{n(3887)},5704:(e,t,n)=>{n(1639)},6886:(e,t,n)=>{var i=n(9859),r=n(5694),o=n(5735),a=n(5762),s=n(95),c=s("iterator"),l=s("toStringTag"),u=o.values;for(var d in r){var h=i[d],p=h&&h.prototype;if(p){if(p[c]!==u)try{a(p,c,u)}catch(e){p[c]=u}if(p[l]||a(p,l,d),r[d])for(var f in o)if(p[f]!==o[f])try{a(p,f,o[f])}catch(e){p[f]=o[f]}}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{let e=!1;if(n.g.__wxConfig&&"string"==typeof n.g.__wxConfig.platform)"ios"===n.g.__wxConfig.platform.toLowerCase()&&(e=!0);else if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent){const t=navigator.userAgent.toLowerCase();(t.indexOf("iphone")>=0||t.indexOf("ipad")>=0)&&(e=!0)}const t=[];e&&(n.g.Promise=void 0,t.push("Promise")),n(305)({usePolyfill:t,useNative:["WeakMap"]}),n(5482),n(9401)})()})();var __wxTest__=!1,wxRunOnDebug=function(e){e()},__wxConfig,Foundation;(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};(()=>{e.d(t,{default:()=>D});class n{constructor(){this.listeners={}}emit(e,t){if(this.listeners[e]&&this.listeners[e].length>0){let n=!1;return this.listeners[e].forEach((function(e){0!==e.count&&e.cb(t),e.count>0&&e.count--,0===e.count&&(n=!0)})),n&&(this.listeners[e]=this.listeners[e].filter((e=>0!==e.count))),!0}return!1}many(e,t,n){if(!t)return this;const i={count:n,cb:t};return this.listeners[e]?this.listeners[e].push(i):this.listeners[e]=[i],this}on(e,t){this.many(e,t,-1)}once(e,t){this.many(e,t,1)}off(e,t){for(let n=0;n<this.listeners[e].length;n++){const i=this.listeners[e][n];if(i.cb===t)return void(i.count=0)}}}const i=e.g.__wxLibrary,r=e.g.__wxConfig,o=i.envType,a=i.contextType,s="Service"===o,c="WebView"===o,l="Worker"===o,u="Widget"===o,d=c||s&&0===a.indexOf("App:"),h=s&&0===a.indexOf("Game:"),p=l&&"function"==typeof e.g.workerInvokeJsApi,f=!!r.isIsolateContext,g=s&&(f&&a.indexOf("Uncertain")>=0||a.indexOf("MainContext")>=0),_=s&&a.indexOf("SubContext")>=0,m=g||_,y=c||g,v="wxlib"===r.workerContentType,A={platform:function(){let e=r.platform;if(!e&&c){const t=window.navigator.userAgent.toLowerCase();t.indexOf("devtools")>=0?e="devtools":t.indexOf("miniprogramenv/windows")>=0?e="windows":t.indexOf("miniprogramenv/mac")>=0?e="mac":t.indexOf("miniprogramenv/mina")>=0?e="mina":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?e="ios":t.indexOf("android")>=0&&(e="android")}return(e||"unknown").toLowerCase()}(),SDKVersion:"undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version,isIsolateContext:m,isGame:h,isApp:d,isMainContext:g,isSubContext:_,isSafeEnv:y,isService:s,isWebView:c,isWorker:l,isWidget:u,isSupportWorkerAPI:p,typeStr:o,isWXLibWorker:v},b=new n,w={},E="configReady",T="libraryReady";function S(e,t){e in w?t(w[e]):x.once("lifeCycle:"+e,t)}function C(e,t){return!(e in w)&&(w[e]=t,x.emit("lifeCycle:"+e,t))}const I=e.g,x={EventEmitter:n,on:b.on.bind(b),emit:b.emit.bind(b),once:b.once.bind(b),onConfigReady:S.bind(null,E),emitConfigReady:C.bind(null,E),get isConfigReady(){return E in w},onLibraryReady:S.bind(null,T),emitLibraryReady:C.bind(null,T),get isLibraryReady(){return T in w},onBridgeReady(e){void 0!==WeixinJSBridge?e():"object"==typeof document&&document.addEventListener("WeixinJSBridgeReady",e,!1)},env:A,global:I};"undefined"!=typeof __Function__&&(Function=function(){return"return this"===arguments[arguments.length-1]?function(){return I}:new __Function__(...arguments)},Function.prototype=__Function__.prototype);e.g.__wxLibrary.onEnd=function(){x.emitLibraryReady({})};const D=x})(),Foundation=t.default})();var nativeTrans=function(e){"use strict";var t="webViewCreated",n="nativeTransFail",i="nativeTransReady";console;if("object"!=typeof e.ntrans)return e.__nativeTransEnabled__=!1,{enabled:!1,EVT_WV_CREATED:t,EVT_NTRANS_FAIL:n};e.__nativeTransEnabled__=!0;var r=e.ntrans,o=r.id,a=o===r.serviceId,s={};function c(e){a?e(r.serviceId):Foundation.onConfigReady((function(){e(r.serviceId)}))}function l(e,t){var n=s[e]=s[e]||{connectedTime:0,dataQueue:[],initTime:Date.now()};return"number"==typeof t&&(n.id=t),s[e]}function u(e,t){return{event:e,param:t,id:o,sendTime:Date.now()}}return c((function(){delete e.ntrans})),{enabled:!0,publishToTargetWithQueue:function(e,t,n){var i=l(e),o=u(t,n);i.connectedTime?r.postMessage(i.id,o):Date.now()-i.initTime>3e5?i.dataQueue=[]:i.dataQueue.push(o)},packMessage:u,broadcastMessage:function(e,t){r.broadcastMessage(e,t)},onMessage:function(e,t){t!==o&&(r.setMessageListener(),o=t),r.setMessageListener(t,(function(t){"function"==typeof e&&e(t.event,t.param,t.id,t.sendTime)}))},registerTarget:function(e,t){var n=l(e,t);n.connectedTime=Date.now(),r.postMessage(n.id,u(i)),n.dataQueue.forEach((function(e){e.sendTime=Date.now(),r.postMessage(n.id,e)})),n.dataQueue=[]},onceServiceConfirmed:c,revertTargets:function(){for(var e in s)s[e].dataQueue.forEach((function(t){WeixinJSBridge.publish(t.event,t.param,[e])})),s[e].dataQueue=[];s={}},isService:a,get id(){return o},SERVICE_TAG:"AppService",EVT_NTRANS_READY:i,EVT_WV_CREATED:t,EVT_NTRANS_FAIL:n,version:r.version,addGroup:r.addGroup.bind(r)}}(this),WeixinJSBridge=function(e){"use strict";"function"==typeof logxx&&logxx("jsbridge start");var t="undefined"!=typeof __devtoolssubcontext&&__devtoolssubcontext;if(e.navigator&&e.navigator.userAgent){var n=e.navigator.userAgent;(n.indexOf("appservice")>-1||n.indexOf("wechatdevtools")>-1)&&(t=!0)}if(t&&!Foundation.env.isWorker||e.useGlobalJSBridge){var i=e.WeixinJSBridge;return delete e.WeixinJSBridge,i}if(e.OSUseGlobalJSBridge)return i=e.WeixinJSBridge;var r=e.__wxConfig||{},o=r.isWK,a={},s=0,c={},l={},u="custom_event_",d={},h=e.webkit,p=e.WeixinJSCore;"object"==typeof p&&"function"!=typeof p.publishHandler&&(p.publishHandler=function(){}),Foundation.env.isWorker&&Foundation.env.isSupportWorkerAPI&&(p={invokeHandler:e.workerInvokeJsApi},s=1<<25),delete e.webkit,e.WeixinJSCore={invokeHandler:function(){},publishHandler:function(){},setTimerHandler:function(){},clearTimerHandler:function(){}};var f=JSON.parse,g=JSON.stringify,_=function(e,t){if(void 0!==e&&"function"==typeof a[t]&&""!==e&&null!==e){if("string"==typeof e)try{e=f(e),e=WeixinNativeBuffer.unpack(e)}catch(t){e={}}var n=a[t];delete a[t],"function"==typeof n&&n(e)}},m=function(e,t,n,i=!1){var r=t;i||(t=WeixinNativeBuffer.pack(t),r=g(t||{}));var c=++s;a[c]=n,function(e,t,n){if(p)r=p.invokeHandler(e,t,n),_(r,n);else{var i={event:e,paramsString:t,callbackId:n};if(o){var r=prompt("webgame_invoke",g(i));_(r,n)}else h.messageHandlers.invokeHandler.postMessage(i)}}(e,r,c)},y=function(e,t){t=WeixinNativeBuffer.unpack(t);var n=a[e];delete a[e],"function"==typeof n&&n(t)},v=function(e,t){c[e]=t},A=function(e,t,n){!function(e,t,n){p?p.publishHandler(e,g(t),g(n)):h.messageHandlers.publishHandler.postMessage({event:e,paramsString:g(t),webviewIds:g(n)})}(u+e,t,n)},b=function(e,t){d[u+e]=t},w=function(e,t,n,i){var r,o;t=WeixinNativeBuffer.unpack(t),-1!=e.indexOf(u)?r=d[e]:(r=c[e],o=l[e]),"function"==typeof r&&r(t,n,i),o&&o.forEach((e=>e(t,n,i)))};return e.WeixinJSBridge={get invokeCallbackHandler(){return y},get subscribeHandler(){return w}},r&&r.clientDebug&&(e.WeixinJSBridge={on:v,publish:A,invoke:m,subscribe:b,get invokeCallbackHandler(){return y},get subscribeHandler(){return w}}),{on:v,publish:A,invoke:m,subscribe:b,loadJsFiles:function(e,t){m("loadJsFiles",{paths:e},t)},addEventListener:function(e,t){l[e]?l[e].add(t):l[e]=new Set([t])},removeEventListener:function(e,t){l[e]&&(t?l[e].delete(t):delete l[e])},get invokeCallbackHandler(){return y},get subscribeHandler(){return w}}}(this);Foundation.onBridgeReady((function(){var e,t=String.prototype.replace,n=WeixinJSBridge.publish,i=[];WeixinJSBridge.publish=function(r,o,a){var s;Foundation.isConfigReady||nativeTrans.enabled?(a=function(e){if(Array.isArray(e)){var t=e.filter((function(e){return null!=e}));if(0===e.length||0!==t.length)return t}}(a||[]))&&(s=r||"",r=t.call(s,/["'\\]/g,""),e&&e(r,o,a)||n.call(WeixinJSBridge,r,o,a)):i.push([r,o,a])},Foundation.onConfigReady((function(){i.forEach((function(e){WeixinJSBridge.publish.apply(WeixinJSBridge,e)})),i=[]})),WeixinJSBridge.setCustomPublishHandler=function(t){e=t}})),function(e){"use strict";var t=JSON.parse,n=JSON.stringify,i=Object.defineProperty,r=Foundation.env.isSubContext,o=Foundation.env.isSafeEnv,a={},s=(Foundation.env.isWXLibWorker,["env","appLaunchInfo","ext","wxAppInfo","debug","entryPagePath","envVersion","tabBar","pages","page","accountInfo","global","platform","system","appType","networkTimeout","navigateToMiniProgramAppIdList","plugins","extAppid","host","prerender"]);function c(e,t,n,r){i(e,n,{configurable:!0,enumerable:!0,get:function(){if(n in t)return t[n];try{(new Error).stack,"object"==typeof Reporter&&"function"==typeof Reporter.reportKeyValue&&Reporter.reportKeyValue({key:"DeprecatedAPI",value:"__wxConfig."+n,force:!0})}catch(e){}try{return"function"!=typeof r?r:r()}catch(e){return}},set:function(e){t[n]=e}})}function l(e){return t(n(e))}var u=!0===(__wxConfig=void 0!==e.__wxConfig?o?Object.assign({},e.__wxConfig):l(e.__wxConfig):{}).preload,d=!1,h=[],p=[],f=Foundation.env.typeStr;Foundation.env.isSubContext&&(f="SubContext");function g(e,t){try{Date.now();e(t);Date.now()}catch(e){e.message,e.stack,"object"==typeof Reporter&&"function"==typeof Reporter.errorReport&&Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:"at wxConfig.onReady callback"})}}var _=function(e){p.push(e)},m=function(e){d?void 0!==__wxConfig&&g(e,__wxConfig):"function"==typeof e&&h.push(e)},y=function(t){t.tabBar&&t.tabBar.list&&t.tabBar.list.forEach((function(e){delete e.iconData,delete e.selectedIconData})),delete t.permission;var n=t.subPackages||t.subpackages;return n&&n.length>0&&(n.forEach((function(e){delete e.pages})),t.subPackages=t.subpackages=n),d&&(__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(r||(__wxConfig._preloadRule=__wxConfig.preloadRule||{},__wxConfig._page=__wxConfig.page||{},delete __wxConfig.preloadRule,delete __wxConfig.page),__wxConfig.updatePage=function(e,t){__wxConfig.page=__wxConfig.page||{},__wxConfig.page[e]=__wxConfig.page[e+".html"]=t,a[e+".html"]=l(t)},__wxConfig.updatePreloadRule=function(e,t){__wxConfig.preloadRule=__wxConfig.preloadRule||{},__wxConfig.preloadRule[e]=t}),e.__wxConfig.page=e.__wxConfig.page||{},__wxConfig.page=__wxConfig.page||{}),t},v=function(e){return e.onReady=m,e.beforeReady=_,r||(e.preload=u),e.isReady=d,e.isSubContext=r,e.envTag=f,e.isSafeContext=o,e.sdkVersion=e.SDKVersion=Foundation.env.SDKVersion,e.twoPhaseInject=!0,e.platform=Foundation.env.platform,e.brand||"ios"!==e.platform||(e.brand="iPhone"),"number"==typeof e.pixelRatio?e.devicePixelRatio=e.pixelRatio:"number"==typeof e.devicePixelRatio&&(e.pixelRatio=e.devicePixelRatio),e},A=function(){void 0===e.__wxConfig||d||(d=!0,Object.assign(__wxConfig,o?e.__wxConfig:l(e.__wxConfig)),__wxConfig=v(__wxConfig),__wxConfig=y(__wxConfig),function(e){if(!p.length)return e();var t=!1;setTimeout((function(){t||(console.warn("beforeReady timeout"),t=!0,e())}),3e3),Promise.all(p).catch((function(e){console.warn("beforeReady error",e)})).then((function(){t||(t=!0,e())})),p=[]}((function(){__wxConfig.onReadyStart=Date.now(),h.forEach((function(e){g(e,__wxConfig)})),__wxConfig.onReadyEnd=Date.now(),h=[],function(){if(!o){var t=e.__wxConfig,n={},i={};a=t.page||{},__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(a={});try{c(i,n,"deprecated",!0),s.forEach((function(e){if(e in t){var r=t[e];switch(e){case"page":c(i,n,e,a);break;case"env":c(i,n,e,(function(){return console.warn("DeprecationWarning: __wxConfig.env is deprecated, please use wx.env instead."),{USER_DATA_PATH:r.USER_DATA_PATH}}));break;case"accountInfo":c(i,n,e,{appId:r.appId,icon:r.icon,nickname:r.nickname});break;case"appLaunchInfo":c(i,n,e,(function(){return console.warn("DeprecationWarning: __wxConfig.appLaunchInfo is deprecated, please use wx.getLaunchOptionsSync() instead."),wx&&"function"==typeof wx.getLaunchOptionsSync?wx.getLaunchOptionsSync():{}}));break;case"wxAppInfo":c(i,n,e,{maxRequestConcurrent:r.maxRequestConcurrent,maxUploadConcurrent:r.maxUploadConcurrent,maxDownloadConcurrent:r.maxDownloadConcurrent,maxWorkerConcurrent:r.maxWorkerConcurrent,maxWebsocketConnect:r.maxWebsocketConnect});break;default:c(i,n,e,r)}}})),e.__wxConfig=i}catch(n){e.__wxConfig=t}}}()})))};function b(){Foundation.emitConfigReady(__wxConfig)}__wxConfig=v(__wxConfig),__wxConfig=y(__wxConfig),Foundation.onConfigReady((function(){A()})),r?__wxConfig.__readyHandler=b:u?Foundation.onBridgeReady((function(){WeixinJSBridge.on("onWxConfigReady",b)})):Foundation.onLibraryReady(b)}(this),function(e){"use strict";function t(e){Foundation.emit("unhandledRejection",e)||console.error("Uncaught (in promise)",e.reason)}var n,i,r=(n=[],i=[],{set:function(e,t){n.push(e),i.push(t)},get:function(e){var t=n.indexOf(e);if(-1!==t)return i[t]},delete:function(e){var t=n.indexOf(e);-1!==t&&(n.splice(t,1),i.splice(t,1))}});"object"==typeof e&&"function"==typeof e.addEventListener?(e.addEventListener("unhandledrejection",(function(e){t({reason:e.reason,promise:e.promise}),e.preventDefault()})),e.addEventListener("error",(function(e){var t;t=e.error||e.message,Foundation.emit("error",t)||console.error("Uncaught",t),e.preventDefault()}))):void 0===e.onunhandledrejection&&Object.defineProperty(e,"onunhandledrejection",{value:function(e){e=e||{},Object.prototype.hasOwnProperty.call(e,"type")?function(e){var n=r.get(e.promise);if(n)n.event=e;else{var i={event:e};setTimeout((function(){0===i.event.type&&t(i.event),r.delete(i.event.promise)}),0),r.set(e.promise,i)}}({type:e.type,reason:e.reason,promise:e.promise}):t({reason:e.reason,promise:e.promise})}})}(this);var NativeBuffer=function(e){var t=e.WeixinNativeBuffer,n=e.getNativeBufferId,i=e.setNativeBuffer,r=e.getNativeBuffer,o=__wxConfig||{},a=!1;"android"===o.platform||"windows"===o.platform||"mina"===o.platform?a="function"==typeof n&&"function"==typeof i&&"function"==typeof r&&o.nativeBufferEnabled:"ios"!==o.platform&&"mac"!==o.platform||(a=null!=t);var s=function(e){var r={};return a?r.id=function(e){var r=e.__proto__;e.__proto__=ArrayBuffer.prototype;var o=-1;return t?o=t.new(e):"function"==typeof n&&"function"==typeof i&&(o=n(),i(o,e)),e.__proto__=r,o}(e):r.base64=h(e),r},c=function(e){var n;if(null!=e)return a&&void 0!==e.id?(n=e.id,t?t.get(n):"function"==typeof r?r(n):void 0):void 0!==e.base64?p(e.base64):void 0},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=u||function(e){for(var t,n,i=String(e),r="",o=0,a=l;i.charAt(0|o)||(a="=",o%1);r+=a.charAt(63&t>>8-o%1*8)){if((n=i.charCodeAt(o+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|n}return r},d=d||function(e){var t=String(e).replace(/=+$/,""),n="";if(t.length%4==1)throw new Error('"atob" failed');for(var i,r,o=0,a=0;r=t.charAt(a++);~r&&(i=o%4?64*i+r:r,o++%4)?n+=String.fromCharCode(255&i>>(-2*o&6)):0)r=l.indexOf(r);return n},h=function(e){for(var t="",n=new Uint8Array(e),i=n.byteLength,r=0;r<i;r++)t+=String.fromCharCode(n[r]);return u(t)},p=function(e){for(var t=d(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer},f=function(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]};return delete e.WeixinNativeBuffer,delete e.getNativeBufferId,delete e.setNativeBuffer,delete e.getNativeBuffer,{new:s,get:c,useCompatibleMode:function(e){t&&t.useCompatibleMode(e)},pack:function(e){if(null==e)return e;var t=[];for(var n in e){var i=e[n];if(void 0!==i&&"ArrayBuffer"===f(i)&&void 0!==i.byteLength)(o=s(i)).key=n,t.push(o)}if(t.length>0){for(var r=0;r<t.length;r++){var o;delete e[(o=t[r]).key]}e.__nativeBuffers__=t}return e},unpack:function(e){if(null==e||null==e.__nativeBuffers__)return e;var t=e.__nativeBuffers__;delete e.__nativeBuffers__;for(var n=0;n<t.length;n++){var i=t[n];if(null!=i){var r=c(i);void 0!==r&&"ArrayBuffer"===f(r)&&(e[i.key]=r)}}return e},packWithBase64:function(e){if(null==e)return e;var t=[];for(var n in e){var i=e[n];if(void 0!==i&&"ArrayBuffer"===f(i)&&void 0!==i.byteLength)(o={base64:h(i)}).key=n,t.push(o)}if(t.length>0){for(var r=0;r<t.length;r++){var o;delete e[(o=t[r]).key]}e.__nativeBuffers__=t}return e}}}(this),WeixinNativeBuffer=NativeBuffer;NativeBuffer=null;var wxConsole=["log","info","warn","error","debug","time","timeEnd","group","groupEnd"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxPerfConsole=["log","info","warn","error","time","timeEnd","trace","profile","profileSync"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxNativeConsole;(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>h});const n=BabelRuntimeHelpers.objectSpread2;var i=e.n(n);const{onConfigReady:r,env:o}=Foundation;let a=["log","info","warn","error","debug","createLogger"].reduce((function(e,t){return e[t]=function(){},e}),{});function s(e,t){this.num=e,this.type=t}const c={ALL:new s(Number.MIN_VALUE,"ALL"),DEBUG:new s(5e3,"DEBUG"),LOG:new s(1e4,"LOG"),INFO:new s(2e4,"INFO"),WARN:new s(3e4,"WARN"),ERROR:new s(4e4,"ERROR"),OFF:new s(Number.MAX_VALUE,"OFF")},l=(e,t)=>({debug:e(c.DEBUG,t),log:e(c.LOG,t),info:e(c.INFO,t),warn:e(c.WARN,t),error:e(c.ERROR,t)});let u=c.INFO;const d=()=>{const e=__wxConfig.platform;let t=[];const n=function(t){const n=("0"+(t.getMonth()+1)).slice(-2),i=("0"+t.getDate()).slice(-2),r=("0"+t.getHours()).slice(-2),o=("0"+t.getMinutes()).slice(-2),a=("0"+t.getSeconds()).slice(-2),s=("00"+t.getMilliseconds()).slice(-3),c=t.getFullYear()+"-"+n+"-"+i,l=r+":"+o+":"+a+"."+s;if("ios"===e){return c+" "+l+"000"+(t.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-")}return c+" "+(t.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+l},o=function(e,n){const i=e.type;return function(...r){if(n&&Array.prototype.unshift.call(r,"["+n+"]"),wxConsole[i.toLowerCase()].call(wxConsole,...r),e.num>=u.num){const e=new Date,n=Array.prototype.slice.call(r).map((e=>{switch(typeof e){case"bigint":case"boolean":case"function":case"number":return e.toString();case"string":return e;case"symbol":return e.toString();case"undefined":return"undefined";case"object":{let t;try{t=JSON.stringify(e)}catch(e){t="[对象含有循环引用]"}return t}default:return}})).join(" ");t&&t.length>1024&&t.shift(),t.push({date:e,type:i,content:n})}}};r((function(){setTimeout((function i(){var r;(setTimeout(i,3e3),0!==t.length)&&(r=t,"ios"===e?WeixinJSBridge.invoke("systemLog",{dataArray:r.map((function(e){return{message:"\n"+n(e.date)+" ["+e.type[0].toUpperCase()+"][wxapplib]] "+e.content}}))}):"android"===e&&WeixinJSBridge.invoke("systemLog",{message:["\n"].concat(r.map((function(e){return"["+e.type[0].toUpperCase()+"]["+n(e.date)+"][wxapplib]] "+e.content}))).join("\n")}),t=[])}),3e3)}));return i()(i()({},l(o)),{},{createLogger:function(e){return l(o,"string"==typeof e?e:"default")},__mergeSubContextLogs:e=>{Array.isArray(e)&&e.forEach((e=>{const{level:t,logs:n,category:i}=e;o(t,i)(n)}))},__isFromMainContext:!0})};if(o.isWorker||o.isWidget){const e=function(){return wxConsole};a=Object.assign({createLogger:e},wxConsole)}else a=o.isSubContext&&o.isIsolateContext?(()=>{let e=[];const t=(t,n)=>(...i)=>{e.push({level:t,logs:i,category:n})},n=()=>{setTimeout((()=>{const t=wxNativeConsole.__isFromMainContext?wxNativeConsole.__mergeSubContextLogs:null;t?(t(e),e=[]):n()}),1e3)};return r(n),i()(i()({},l(t)),{},{createLogger:e=>l(t,"string"==typeof e?e:"default"),__isFromMainContext:!1})})():d();const h=a;wxNativeConsole=t.default})();var WeixinWorker=function(e){var t=["request","createSocketTask","operateSocketTask","onSocketTaskStateChange","createRequestTask","createRequestTaskAsync","operateRequestTask","onRequestTaskStateChange","createDownloadTask","createDownloadTaskAsync","operateDownloadTask","onDownloadTaskStateChange","createUploadTask","createUploadTaskAsync","operateUploadTask","onUploadTaskStateChange","getNetworkType","createAudioInstance","createAudioInstanceAsync","operateAudio","destroyAudioInstance","getAudioState","setAudioState","onAudioStateChange","uploadFile","downloadFile","saveFile","getFileInfo","getSavedFileInfo","getSavedFileList","removeSavedFile","readFile","writeFile","mkdir","readdir","rmdir","access","unlink","stat","copyFile","rename","fs_appendFile","fs_appendFileSync","fs_copyFile","fs_copyFileSync","fs_rename","fs_renameSync","getABTestConfig","reportKeyValue","reportIDKey"],n=!1;if(e.navigator&&e.navigator.userAgent){var i=e.navigator.userAgent;(i.indexOf("appservice")>-1||i.indexOf("wechatdevtools")>-1)&&(n=!0)}var r=e.WeAppWorker,o=e.WeixinWorker,a=[],s=[],c=[],l=[],u=[],d={},h=function(e){return d[e]},p=function(e,t){d[e]=t},f=function(e){e=WeixinNativeBuffer.unpack(e),s.forEach((function(t){"function"==typeof t&&t(e)}))},g=function(e,t){t=WeixinNativeBuffer.unpack(t),a.forEach((function(n){"function"==typeof n&&n(e,t)}))},_=function(e,t){c.forEach((function(n){"function"==typeof n&&n(e,t)}))},m=function(e){l.forEach((function(t){"function"==typeof t&&t(e)}))};Foundation.on("error",m),Foundation.on("unhandledRejection",(function(e){u.forEach((function(t){"function"==typeof t&&t(e)}))}));var y={get appServiceMsgHandler(){return f},get workerMsgHandler(){return g},get workerCreatedHandler(){return _},get errorHandler(){return m},get __workerId__(){return o.__workerId__}},v={create:function(e,n){var i,a,s=!(!(n=n||{}).useExperimentalWorker||!r);if(s?(a=r,i=JSON.stringify(n)):(a=o,i={APIList:t}),"function"==typeof a.create){var c=a.create.call(a,e,i);return p(c,a),{workerId:c,useWKWorker:s}}},createWXLibWorker:function(e,n){var i={APIList:t};n.APIList&&(i.APIList=t.concat(n.APIList)),n.type&&(i.type=n.type);var r=o;if("function"==typeof r.createWXLibWorker){var a=r.createWXLibWorker.call(r,e,JSON.stringify(i));return p(a,r),{workerId:a}}},terminate:function(e){var t=h(e);if("function"==typeof t.terminate)return function(e){delete d[e]}(e),t.terminate.call(t,e)},postMsgToAppService:function(e,t){try{!1!==t&&(e="android"===__wxConfig.platform&&(__wxConfig.clientVersion>=671088640&&__wxConfig.clientVersion<671088697||__wxConfig.clientVersion>=671088704&&__wxConfig.clientVersion<41943120||__wxConfig.clientVersion>=671088736&&__wxConfig.clientVersion<671088896)?WeixinNativeBuffer.packWithBase64(e):WeixinNativeBuffer.pack(e),e=JSON.stringify(e)),o.postMsgToAppService(e)}catch(e){console.error(e)}},postMsgToWorker:function(e,t,n){var i=h(e);try{!1!==n&&(t="android"===__wxConfig.platform&&(__wxConfig.clientVersion>=671088640&&__wxConfig.clientVersion<671088697||__wxConfig.clientVersion>=671088704&&__wxConfig.clientVersion<41943120||__wxConfig.clientVersion>=671088736&&__wxConfig.clientVersion<671088896)?WeixinNativeBuffer.packWithBase64(t):WeixinNativeBuffer.pack(t),t=JSON.stringify(t)),i.postMsgToWorker(e,t)}catch(e){console.error(e)}},onWorkerMsg:function(e){a.push(e)},onWorkerCreated:function(e){c.push(e)},onAppServiceMsg:function(e){s.push(e)},onError:function(e){l.push(e)},onUnhandledRejection:function(e){u.push(e)},get WebAssembly(){return o.WebAssembly}};return n&&(v.appServiceMsgHandler=y.appServiceMsgHandler,v.workerMsgHandler=y.workerMsgHandler,v.errorHandler=y.errorHandler,v.__workerId__=y.__workerId__),e.WeixinWorker=y,e.WeAppWorker=y,v}(this),__wxModule__;(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>n});BabelRuntimeHelpers.typeof;const n={requirePlugin:function(e){!function(){if(void 0===__wxConfig||void 0===__wxConfig.plugins&&void 0===__wxConfig.gamePlugins)throw new Error("This application has not registered any plugins yet.")}(),function(e){if("string"!=typeof e)throw new Error("requirePlugin args must be a string.")}(e);var t=function(e){var t="__plugin__/".concat(e.pluginId);return e.path&&(t+="/".concat(e.path)),t}(function(e){var t=e.match(/([^/]*)\/?(.*)/);if(!t||t.length<2)throw new Error('Plugin "'.concat(e,'" has not registered.'));var n=t[1],i=t[2],r=(__wxConfig.plugins||__wxConfig.gamePlugins)[n];if(void 0===r)throw new Error('Plugin "'.concat(e,'" has not registered.'));return{pluginId:r.provider,version:"0",path:i}}(e)),n=requireMiniProgramFile(t);if(void 0===n)throw new Error('Plugin "'.concat(t,'" is not defined.'));return n}};__wxModule__=t.default})();var definePlugin=__wxModule__.definePlugin,requirePlugin=__wxModule__.requirePlugin;!function(e){var t={},n={};define=function(e,n){if(t[e]&&t[e].factory){var i=t[e],r=n.toString();i.factoryString||(i.factoryString=i.factory.toString()),r!==i.factoryString&&(t[e]={status:1,factory:n,factoryString:r})}else t[e]={status:1,factory:n}};var i=function(e){if(e&&__wxConfig.subPackages)for(var t=0,n=__wxConfig.subPackages.length;t<n;t++)if(0===e.indexOf(__wxConfig.subPackages[t].root))return __wxConfig.subPackages[t]},r=function(e){for(var t=[],n=e.split("/"),i=0,r=n.length;i<r;++i){var o=n[i];if(""!=o&&"."!=o)if(".."==o){if(0==t.length){t=null;break}t.pop()}else i+1<r&&".."==n[i+1]?i++:t.push(o)}return t},o=function(e){var n=r(e+"/index.js").join("/");return t[n]?n:(n=r(e).join("/"),/\.js$/.test(n)||(n+=".js"),t[n]?n:"")},a=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"];var s=function(e){var n=function(e){var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"}(e),a=function(a,s){if("string"!=typeof a)throw new Error("require args must be a string");var c=r(n+"/"+a);if("/__wx__/private-api"===a&&(c=r(a)),!c)throw new Error("can not find module : "+a);try{var l=c.join("/");l=function(e,n,i){var a=e;if(/\.js$/.test(a)||(a+=".js"),"string"==typeof a&&t[a])return a;var s=r(n);if(!s)throw new Error("can not find module : "+i);for(var c,l=e.substring(s.join("/").length);s.length;){var u=s.join("/")+"/miniprogram_npm"+l;if(c=o(u))break;s.pop()}return c||(l="/"===l[0]?l:"/"+l,c=o(u="miniprogram_npm"+l)),c||e}(l,n,a);var u=function(e){return"functional-pages"===r(e)[0]};if(u(l)!==u(e)&&Reporter.thirdErrorReport({error:new Error('should not require across "functional-pages" folder'),extend:'at require("'+a+'") in '+e}),"devtools"===__wxConfig.platform&&__wxConfig.subPackages&&void 0===s){var d=i(l),h=i(e);if(d&&d!==h)throw new Error("should not require "+a+" in "+e+" without a callback, because they are in diffrent subPackages")}return require(l,void 0,s)}catch(e){throw e}};return a.async=function(e){return new Promise((function(t,n){try{a(e,(function(e){t(e)}))}catch(e){n(e)}}))},a};require=function(i,r,o){if(void 0===r&&(r=!0),"string"!=typeof i)throw new Error("require args must be a string");var c=t[i];if(!c){var l=-1===i.indexOf("/")?i+"/index.js":i;/\.js$/.test(l="miniprogram_npm/"+l)||(l+=".js"),c=t[l]}if(i.endsWith(".js")||(i+=".js"),!c&&"devtools"!==__wxConfig.platform&&void 0!==__subContextEngine__){var u="/"+i.substr(0,i.length-3)+".appservice.js",d={__wxRoute:e.__wxRoute,__wxAppCurrentFile__:e.__wxAppCurrentFile__,__wxRouteBegin:e.__wxRouteBegin};__subContextEngine__.loadJsFiles([u]),function(t){e.__wxRoute=t.__wxRoute,e.__wxAppCurrentFile__=t.__wxAppCurrentFile__,e.__wxRouteBegin=t.__wxRouteBegin}(d),c=t[i]}if("function"!=typeof o){if(!c)throw new Error('module "'+i+'" is not defined');var h={exports:{}},p=c.factory;if(!r||n[i])return delete c.exports,c.status=1,n[i]=!0,p&&p(s(i),h,h.exports),h.exports;if(1===c.status){c.exports=h.exports,c.status=2;var f=void 0;try{p&&(f=p(s(i),h,h.exports))}catch(e){throw c.status=1,e}c.exports=void 0!==h.exports?h.exports:f}return c.exports}c?setTimeout((function(){o(require(i))})):function(e,t){var n="__APP__"===e;"/"!==e.slice(-1)&&(e+="/"),"devtools"===__wxConfig.platform?(wxNativeConsole.info("[WebNode] injectSubPackages: "+e),WeixinJSBridge.invoke("injectSubPackages",{subPackages:[e]},t)):(wxNativeConsole.info("[WebNode] loadSubpackage: "+e),__appServiceSDK__.loadSubpackage({name:e,success:function(){var i=__wxConfig.subPackages.find((function(t){return t.root===e})),r=Object.keys(i.plugins||{}).map((function(e){var t=i.plugins[e].provider,n="__plugin__/"+t;return{plugin_id:t,prefix_path:a.includes(t)?null:n}}));__subContextEngine__.injectEntryFile(n?"":e,r),t()}}))}(function(e){var t=__wxConfig&&__wxConfig.subPackages;t||(t=[]);for(var n=0;n<t.length;++n){var i=t[n].root||"";if(i&&"/"!==i.slice(-1)&&(i+="/"),e.slice(0,i.length)===i)return i}return"__APP__"}(i),(function(){o(require(i))}))},requireOnce=function(e){return require(e,!1)},e.__modules__=t}(this);var requireMiniProgramFile=require,defineMiniProgramFile=define,JSContext,Protect,__cloudSDK__,__subContextEngine__,Safeway;(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>W});const n=Object.prototype.toString,i=Object.getPrototypeOf,r=Object.getOwnPropertyNames,o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=e=>n.call(e).split(" ")[1].split("]")[0],c=["constructor","__proto__","__defineGetter__","__defineSetter__"],l="undefined"!=typeof WeakMap?new WeakMap:{},u="undefined"!=typeof WeakMap?new WeakMap:{},d=function(e,t=!1){const n=s(e);return"String"===n||"Number"===n||"Boolean"===n?e.valueOf():"Object"===n?new _(e):"Array"===n?function(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n];t.push(d(i))}return t}(e):"Function"===n?function(e,t=!1){let n=u.get(e);return void 0!==n||(n=function(...n){for(let e=0;e<n.length;e++){const t=n[e];n[e]=d(t)}const i=t?l.get(this):void 0,r=e.call(i,...n);return d(r)},u.set(e,n)),n}(e,t):"Undefined"!==n&&"Null"===n?null:void 0},h=function(e){return function(){const t=l.get(this);if(void 0===t)return;if(null===t)return null;const n=t[e];return d(n,!0)}},p=function(e){return function(t){const n=l.get(this);if(void 0!==n)return null===n?null:void(n[e]=d(t))}},f=e=>{for(let t=0;t<c.length;t++){if(c[t]===e)return!0}return!1},g=function(){const e=(e=>{const t=[];for(let n=e;n;n=i(n))r(n).forEach((e=>{const i=o(n,e);void 0!==i&&(i.name=e,t.push(i))}));return t})(l.get(this));for(let t=0;t<e.length;t++){const n=e[t],i=n.name;f(i)||(i in this||(delete n.value,delete n.writable,a(this,i,Object.assign(n,{get:h(i),set:p(i)}))))}};class _{constructor(e){l.set(this,e),g.call(this)}}const m=_,y={},v={},A=[];let b,w,E,T,S,C,I=0;const x=[],D=(e,t,n)=>{if(void 0===t||void 0===e||e!==b)return;const i=void 0!==n?n:++I;return v[i]=t,A.push(i),x.forEach((e=>{"function"==typeof e&&e(i)})),i},O=(e,t,n,i)=>{if(void 0===e||e!==b)return;const r=(e=>{const t=A.length;for(let n=0;n<t;n++){const t=A[n];if(v[t]===e)return t}})(t);if(void 0===r)return;const o=y[n];"function"==typeof o&&o(i,r)},P={},R=(e,t,n,i=!1)=>{if(void 0===e||e!==b)return;i||(t=t.valueOf(),n=new m(n));const r=P[t];return"function"==typeof r?r(n):void 0},k={__init__:e=>{void 0===b&&void 0!==e&&(b=e,b.register=D,b.subscribeHandler=O,b.syncMethodHandler=R,w=b.alloc,E=b.create,T=b.destroy,S=b.evaluateScriptFile,C=b.loadJsFiles,delete b.alloc,delete b.create,delete b.destroy,delete b.evaluateScriptFile,delete b.loadJsFiles)},publish:(e,t={},n)=>{const i=s(t);if("Object"!==i&&"Undefined"!==i)throw new Error("params should be an object.");n.forEach((n=>{const i=v[n];i&&i.subscribeHandler(b,e,t)}))},subscribe:(e,t)=>{y[e]=t},onRegister:e=>{x.push(e)},evaluateScriptFile:(e,t,n)=>S(e,t,n),batchLoadJsFiles:(e,t)=>{if(void 0===C||"function"!=typeof C)return"failed: loadJsFiles not supported";try{return C(e,JSON.stringify(t)),"success"}catch(e){return"failed: "+e}},alloc:(e,t)=>"function"==typeof w?w.call(b,e,t):-9999,create:(e,t)=>"function"==typeof E?E.call(b,e,t):-9999,destroy:(e,t)=>"function"==typeof T?T(e,t):-9999,isAsync:()=>b&&!0===b.async,supportAlloc:()=>"function"==typeof w,registerSyncMethod:(e,t)=>{P[e]=t}},N={};let M;const L={subscribeHandler:(e,t,n={})=>{if(void 0===e||e!==M)return;t=t.valueOf();const i=N[t];"function"==typeof i&&i(n)}};const B={__init__:(e,t)=>{void 0===M&&void 0!==e&&(M=e,M.register(e,L,t))},publish:(e,t={})=>{const n=s(t);if("Object"!==n&&"Undefined"!==n)throw new Error("params should be an object.");const i=e.valueOf(),r=t||{};M&&"function"==typeof M.subscribeHandler&&M.subscribeHandler(M,L,i,r)},subscribe:(e,t)=>{N[e]=t},invokeMainContextMethodSync:(e,t={},n=!1)=>{const i=s(t);if("Object"!==i&&"Undefined"!==i)throw new Error("params should be an object.");const r=e.valueOf();let o;return o=n?t||{}:void 0===t?{}:t,M.syncMethodHandler(M,r,o,n)}},F={alloc:()=>-9999,create:()=>-9999,destroy:()=>-9999,publish:()=>{},subscribe:()=>{},supportAlloc:()=>{}};let U;if(void 0===e.g)throw new Error("js-context: global is undefined");if(void 0!==e.g.WeixinJSContext){U=Object.getPrototypeOf(e.g.WeixinJSContext)===Object.prototype?k:B,U.__init__(WeixinJSContext,e.g.WeixinJSContextId)}else U=F;delete U.__init__,delete e.g.WeixinJSContext,delete e.g.WeixinJSContextId;const W=U;JSContext=t.default})(),(()=>{const e=["shouldShowSplashAd","onSplashAdShow","onSplashAdHide","onSplashAdClose","onSplashAdWillLayout","onSplashAdButtonClicked","showSplashAd","closeSplashAd","showSplashAdMenu","insertTextView","updateTextView","removeTextView","insertImageView","updateImageView","removeImageView","animateCoverView","onTextViewClick","onImageViewClick","insertVideoPlayer","removeVideoPlayer","updateVideoPlayer","operateVideoPlayer","onVideoProgress","onVideoTimeUpdate","onVideoWaiting","splashAdFirstStepViewLayoutStateChange","splashAdAllViewLayoutStateChange","getInstallState","getDeviceInfo","getOAID","private_addContact","launchApplication","navigateToMiniProgram","openADCanvas","private_openUrl","adOperateWXData","operateWXData","reportIDKey","reportKeyValue","adDataReport","getSystemInfo","accessSync","getPermissionBytes","readFileSync","statSync","reportRealtimeAction","measureText","openChannelsActivity","openChannelsLive","openChannelsUserProfile","openChannelsRewardedVideoAd"];try{WeixinWorker.createWXLibWorker("WASplashadWorker.js",{APIList:e,type:"ad"})}catch(e){}})(),(()=>{var e={184:(e,t,n)=>{"use strict";n.r(t),n.d(t,{reportDeprecatedAPI:()=>i});const i=e=>{Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=__wxConfig},582:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PLATFORM:()=>r,IS_DEVTOOLS:()=>o,IS_ANDROID:()=>a,IS_IOS:()=>s,IS_WINDOWS:()=>c,IS_MAC:()=>l,IS_MINA:()=>u,IS_PC:()=>d,debugEnabled:()=>h,HOST:()=>p,IS_HOST_SDK:()=>f,IS_HOST_WMPF:()=>g,IS_HOST_WECHAT:()=>_,IS_USE_NATIVE_MAP:()=>m,WK_RENDERER_H5:()=>y});var i=n(665);const r=i.Z.platform,o="devtools"===i.Z.platform,a="android"===i.Z.platform,s="ios"===i.Z.platform,c="windows"===i.Z.platform,l="mac"===i.Z.platform,u="mina"===i.Z.platform,d=c||l;function h(){if(i.Z&&"debug"in i.Z&&void 0!==i.Z.debug)return!!i.Z.debug}const p=i.Z.host||{},f="SDK"===p.env,g="WMPF"===p.env,_="WeChat"===p.env,m=p.forceUseNativeMap||!1,y="object"==typeof window&&window&&window.__wkrenderer_h5},538:(e,t,n)=>{const{reportDeprecatedAPI:i}=n(184),{IS_IOS:r}=n(582);e.exports={hijack:function(e=!0,t=!0){if(void 0!==n.g.Function){const e={};function i(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return t?e:{}}}i.prototype=n.g.Function.prototype,n.g.Function.prototype.constructor=i,n.g.Function=i}const o=globalThis;if("undefined"!=typeof eval&&(r&&n.g.__isAppServiceRemoteDebugMode__||(eval=void 0)),"undefined"!=typeof setTimeout&&e){const e=setTimeout;setTimeout=function(t,n=0){if("function"!=typeof t)throw new TypeError(`setTimeout expects a function as first argument but got ${typeof t}.`);const i=__errorTracer__.surroundThirdByTryCatch(t,"at setTimeout callback function"),r=[].slice.call(arguments,2);return e((function(){i.apply(o,r)}),n)};const t=setInterval;setInterval=function(e,n){if("function"!=typeof e)throw new TypeError(`setInterval expects a function as first argument but got ${typeof e}.`);const i=__errorTracer__.surroundThirdByTryCatch(e,"at setInterval callback function"),r=[].slice.call(arguments,2);return t((function(){i.apply(o,r)}),n)}}},hijackWasm:function(){if("undefined"!=typeof WebAssembly){["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((e=>{if(void 0===WebAssembly[e])return;const t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:()=>(i("globalWa"),t),set:t=>{Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}))}}}},585:()=>{if("undefined"==typeof navigator){try{new Function("\n      var GeneratorFunctionProto = Object.getPrototypeOf(function* () {});\n      Object.defineProperty(GeneratorFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}try{new Function("\n      var AsyncFunctionProto = Object.getPrototypeOf(async function () {});\n      Object.defineProperty(AsyncFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}try{new Function("\n      var AsyncGeneratorFunctionProto = Object.getPrototypeOf(async function* () {});\n      Object.defineProperty(AsyncGeneratorFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";n.r(i),n.d(i,{doNotWriteGlobalObjs:()=>l,doNotWriteObj:()=>u,globalEsObjs:()=>t,hijack:()=>d.hijack,hijackWasm:()=>d.hijackWasm,overwriteSetPrototypeOf:()=>c});n(585);var e=n(665);const t=["Array","ArrayBuffer","AsyncFunction","Atomics","Boolean","DataView","Date","EvalError","Float32Array","Float64Array","Function","Generator","GeneratorFunction","Infinity","Int16Array","Int32Array","Int8Array","InternalError","Intl","Intl.Collator","Intl.DateTimeFormat","Intl.NumberFormat","Iterator","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","TypedArray","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","null","parseFloat","parseInt","undefined","unescape","uneval"];"NodeJS"!==e.Z.JSEngineName&&t.push("Error");const r=globalThis,o=n.g.Object.setPrototypeOf,a=(e,t,n,i)=>{if(!e||!t||-1!==t.indexOf("constructor"))return;let r;try{r=e[t]}catch(e){return}if(!r)return;let s=Object.getOwnPropertyDescriptor(e,t);if(!i&&!s&&"__proto__"!==t)return;s=s||{enumerable:!!i,configurable:!0};const c=typeof r;if(r&&("function"===c||"object"===c)&&(s.configurable&&Object.defineProperty(e,t,{get:()=>r,set(s){if("object"==typeof this||"function"==typeof this){if(this!==e)return a(this,t,n,!0),void(this[t]=s);if(r!==s)if(i)try{r=s,"__proto__"===t&&o(this,s)}catch(e){}else console.error(`[non-writable] modification of global variable '${n}' is not allowed when using plugins at app.json.`),"object"==typeof Reporter&&(Reporter.reportKeyValue({key:"GlobalReadOnly",value:n}),Reporter.reportIDKey({key:"global_objs_readonly"}))}},enumerable:s.enumerable,configurable:!!i&&s.configurable}),!i&&"__proto__"!==t)){const e=Object.getOwnPropertyNames(r);"object"==typeof r&&a(r,"__proto__",`${n}.__proto__`,!1);for(let t=0;t<e.length;++t){const i=e[t];a(r,i,`${n}.${i}`,!1)}}},s=t.concat(["getApp","getCurrentPages","define","require","Reporter","Protect","requirePlugin","definePlugin"]),c=function(){Object.defineProperty(r.Object,"setPrototypeOf",{value:(e,t)=>(e.__proto__=t,e),configurable:!0})},l=function(){try{new Date;for(let e=0;e<s.length;++e){const t=s[e];if(r[t]){new Date;a(r,t,t,!1),new Date}}new Date}catch(e){}},u=(e,t,n)=>a(e,t,n,!1);var d=n(538)})(),Protect=i})(),(()=>{var e={781:e=>{"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),i=0,r=2,o=!0;for(;r<arguments.length;)n[i++]=arguments[r++];return new Promise((function(r,a){n[i]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];r.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))}},26:(e,t)=>{"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),r=new Array(123),o=0;o<64;)r[i[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,n){for(var r,o=null,a=[],s=0,c=0;t<n;){var l=e[t++];switch(c){case 0:a[s++]=i[l>>2],r=(3&l)<<4,c=1;break;case 1:a[s++]=i[r|l>>4],r=(15&l)<<2,c=2;break;case 2:a[s++]=i[r|l>>6],a[s++]=i[63&l],c=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=i[r],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var a="invalid encoding";n.decode=function(e,t,n){for(var i,o=n,s=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&s>1)break;if(void 0===(l=r[l]))throw Error(a);switch(s){case 0:i=l,s=1;break;case 1:t[n++]=i<<2|(48&l)>>4,i=l,s=2;break;case 2:t[n++]=(15&i)<<4|(60&l)>>2,i=l,s=3;break;case 3:t[n++]=(3&i)<<6|l,s=0}}if(1===s)throw Error(a);return n-o},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},570:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},298:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3]}function o(e,i,r){t[0]=e,i[r]=n[3],i[r+1]=n[2],i[r+2]=n[1],i[r+3]=n[0]}function a(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function s(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?r:o,e.writeFloatBE=i?o:r,e.readFloatLE=i?a:s,e.readFloatBE=i?s:a}():function(){function t(e,t,n,i){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,n,i);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,n,i);else{var o=Math.floor(Math.log(t)/Math.LN2);e((r<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,i)}}function a(e,t,n){var i=e(t,n),r=2*(i>>31)+1,o=i>>>23&255,a=8388607&i;return 255===o?a?NaN:r*(1/0):0===o?1401298464324817e-60*r*a:r*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,i),e.readFloatLE=a.bind(null,r),e.readFloatBE=a.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3],i[r+4]=n[4],i[r+5]=n[5],i[r+6]=n[6],i[r+7]=n[7]}function o(e,i,r){t[0]=e,i[r]=n[7],i[r+1]=n[6],i[r+2]=n[5],i[r+3]=n[4],i[r+4]=n[3],i[r+5]=n[2],i[r+6]=n[1],i[r+7]=n[0]}function a(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function s(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?r:o,e.writeDoubleBE=i?o:r,e.readDoubleLE=i?a:s,e.readDoubleBE=i?s:a}():function(){function t(e,t,n,i,r,o){var a=i<0?1:0;if(a&&(i=-i),0===i)e(0,r,o+t),e(1/i>0?0:2147483648,r,o+n);else if(isNaN(i))e(0,r,o+t),e(2146959360,r,o+n);else if(i>17976931348623157e292)e(0,r,o+t),e((a<<31|2146435072)>>>0,r,o+n);else{var s;if(i<22250738585072014e-324)e((s=i/5e-324)>>>0,r,o+t),e((a<<31|s/4294967296)>>>0,r,o+n);else{var c=Math.floor(Math.log(i)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=i*Math.pow(2,-c))>>>0,r,o+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,r,o+n)}}}function a(e,t,n,i,r){var o=e(i,r+t),a=e(i,r+n),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+o;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=a.bind(null,r,0,4),e.readDoubleBE=a.bind(null,o,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function i(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},116:e=>{"use strict";function t(e){try{var t=eval("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}e.exports=t},804:e=>{"use strict";e.exports=function(e,t,n){var i=n||8192,r=i>>>1,o=null,a=i;return function(n){if(n<1||n>r)return e(n);a+n>i&&(o=e(i),a=0);var s=t.call(o,a,a+=n);return 7&a&&(a=1+(7|a)),s}}},958:(e,t)=>{"use strict";var n=t;n.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var i,r=null,o=[],a=0;t<n;)(i=e[t++])<128?o[a++]=i:i>191&&i<224?o[a++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(i>>10),o[a++]=56320+(1023&i)):o[a++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),a=0);return r?(a&&r.push(String.fromCharCode.apply(String,o.slice(0,a))),r.join("")):String.fromCharCode.apply(String,o.slice(0,a))},n.write=function(e,t,n){for(var i,r,o=n,a=0;a<e.length;++a)(i=e.charCodeAt(a))<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=e.charCodeAt(a+1)))?(i=65536+((1023&i)<<10)+(1023&r),++a,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-o}},882:(e,t,n)=>{"use strict";var i=n(737),r=i.Reader,o=i.Writer,a=i.util,s=i.roots.default||(i.roots.default={});s.HTTPRequest=function(){function e(e){if(this.header=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.method="",e.prototype.header=a.emptyArray,e.prototype.body=a.newBuffer([]),e.prototype.callId="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(10).string(e.method),null!=e.header&&e.header.length)for(var n=0;n<e.header.length;++n)s.HTTPHeader.encode(e.header[n],t.uint32(18).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(26).bytes(e.body),null!=e.callId&&Object.hasOwnProperty.call(e,"callId")&&t.uint32(34).string(e.callId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new s.HTTPRequest;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:i.method=e.string();break;case 2:i.header&&i.header.length||(i.header=[]),i.header.push(s.HTTPHeader.decode(e,e.uint32()));break;case 3:i.body=e.bytes();break;case 4:i.callId=e.string();break;default:e.skipType(7&o)}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.method&&e.hasOwnProperty("method")&&!a.isString(e.method))return"method: string expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var n=s.HTTPHeader.verify(e.header[t]);if(n)return"header."+n}}return null!=e.body&&e.hasOwnProperty("body")&&!(e.body&&"number"==typeof e.body.length||a.isString(e.body))?"body: buffer expected":null!=e.callId&&e.hasOwnProperty("callId")&&!a.isString(e.callId)?"callId: string expected":null},e.fromObject=function(e){if(e instanceof s.HTTPRequest)return e;var t=new s.HTTPRequest;if(null!=e.method&&(t.method=String(e.method)),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPRequest.header: array expected");t.header=[];for(var n=0;n<e.header.length;++n){if("object"!=typeof e.header[n])throw TypeError(".HTTPRequest.header: object expected");t.header[n]=s.HTTPHeader.fromObject(e.header[n])}}return null!=e.body&&("string"==typeof e.body?a.base64.decode(e.body,t.body=a.newBuffer(a.base64.length(e.body)),0):e.body.length&&(t.body=e.body)),null!=e.callId&&(t.callId=String(e.callId)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.header=[]),t.defaults&&(n.method="",t.bytes===String?n.body="":(n.body=[],t.bytes!==Array&&(n.body=a.newBuffer(n.body))),n.callId=""),null!=e.method&&e.hasOwnProperty("method")&&(n.method=e.method),e.header&&e.header.length){n.header=[];for(var i=0;i<e.header.length;++i)n.header[i]=s.HTTPHeader.toObject(e.header[i],t)}return null!=e.body&&e.hasOwnProperty("body")&&(n.body=t.bytes===String?a.base64.encode(e.body,0,e.body.length):t.bytes===Array?Array.prototype.slice.call(e.body):e.body),null!=e.callId&&e.hasOwnProperty("callId")&&(n.callId=e.callId),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),s.HTTPResponse=function(){function e(e){if(this.header=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.statusCode=0,e.prototype.header=a.emptyArray,e.prototype.bodyBuffer=a.newBuffer([]),e.prototype.bodyString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.statusCode&&Object.hasOwnProperty.call(e,"statusCode")&&t.uint32(8).uint32(e.statusCode),null!=e.header&&e.header.length)for(var n=0;n<e.header.length;++n)s.HTTPHeader.encode(e.header[n],t.uint32(18).fork()).ldelim();return null!=e.bodyBuffer&&Object.hasOwnProperty.call(e,"bodyBuffer")&&t.uint32(26).bytes(e.bodyBuffer),null!=e.bodyString&&Object.hasOwnProperty.call(e,"bodyString")&&t.uint32(34).string(e.bodyString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new s.HTTPResponse;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:i.statusCode=e.uint32();break;case 2:i.header&&i.header.length||(i.header=[]),i.header.push(s.HTTPHeader.decode(e,e.uint32()));break;case 3:i.bodyBuffer=e.bytes();break;case 4:i.bodyString=e.string();break;default:e.skipType(7&o)}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.statusCode&&e.hasOwnProperty("statusCode")&&!a.isInteger(e.statusCode))return"statusCode: integer expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var n=s.HTTPHeader.verify(e.header[t]);if(n)return"header."+n}}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&!(e.bodyBuffer&&"number"==typeof e.bodyBuffer.length||a.isString(e.bodyBuffer))?"bodyBuffer: buffer expected":null!=e.bodyString&&e.hasOwnProperty("bodyString")&&!a.isString(e.bodyString)?"bodyString: string expected":null},e.fromObject=function(e){if(e instanceof s.HTTPResponse)return e;var t=new s.HTTPResponse;if(null!=e.statusCode&&(t.statusCode=e.statusCode>>>0),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPResponse.header: array expected");t.header=[];for(var n=0;n<e.header.length;++n){if("object"!=typeof e.header[n])throw TypeError(".HTTPResponse.header: object expected");t.header[n]=s.HTTPHeader.fromObject(e.header[n])}}return null!=e.bodyBuffer&&("string"==typeof e.bodyBuffer?a.base64.decode(e.bodyBuffer,t.bodyBuffer=a.newBuffer(a.base64.length(e.bodyBuffer)),0):e.bodyBuffer.length&&(t.bodyBuffer=e.bodyBuffer)),null!=e.bodyString&&(t.bodyString=String(e.bodyString)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.header=[]),t.defaults&&(n.statusCode=0,t.bytes===String?n.bodyBuffer="":(n.bodyBuffer=[],t.bytes!==Array&&(n.bodyBuffer=a.newBuffer(n.bodyBuffer))),n.bodyString=""),null!=e.statusCode&&e.hasOwnProperty("statusCode")&&(n.statusCode=e.statusCode),e.header&&e.header.length){n.header=[];for(var i=0;i<e.header.length;++i)n.header[i]=s.HTTPHeader.toObject(e.header[i],t)}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&(n.bodyBuffer=t.bytes===String?a.base64.encode(e.bodyBuffer,0,e.bodyBuffer.length):t.bytes===Array?Array.prototype.slice.call(e.bodyBuffer):e.bodyBuffer),null!=e.bodyString&&e.hasOwnProperty("bodyString")&&(n.bodyString=e.bodyString),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),s.HTTPHeader=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new s.HTTPHeader;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:i.key=e.string();break;case 2:i.value=e.string();break;default:e.skipType(7&o)}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!a.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!a.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof s.HTTPHeader)return e;var t=new s.HTTPHeader;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",n.value=""),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(n.value=e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),e.exports=s},795:(e,t,n)=>{e.exports=function(e){var t=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o=!1;function a(){o=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,r=e.length;n<r;++n)t[n]=e[n],i[e.charCodeAt(n)]=n;i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63}function s(e){var t,n,s,c,l,u;o||a();var d=e.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");l="="===e[d-2]?2:"="===e[d-1]?1:0,u=new r(3*d/4-l),s=l>0?d-4:d;var h=0;for(t=0,n=0;t<s;t+=4,n+=3)c=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],u[h++]=c>>16&255,u[h++]=c>>8&255,u[h++]=255&c;return 2===l?(c=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,u[h++]=255&c):1===l&&(c=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,u[h++]=c>>8&255,u[h++]=255&c),u}function c(e){return t[e>>18&63]+t[e>>12&63]+t[e>>6&63]+t[63&e]}function l(e,t,n){for(var i,r=[],o=t;o<n;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],r.push(c(i));return r.join("")}function u(e){var n;o||a();for(var i=e.length,r=i%3,s="",c=[],u=16383,d=0,h=i-r;d<h;d+=u)c.push(l(e,d,d+u>h?h:d+u));return 1===r?(n=e[i-1],s+=t[n>>2],s+=t[n<<4&63],s+="=="):2===r&&(n=(e[i-2]<<8)+e[i-1],s+=t[n>>10],s+=t[n>>4&63],s+=t[n<<2&63],s+="="),c.push(s),c.join("")}function d(e,t,n,i,r){var o,a,s=8*r-i-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?r-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)}function h(e,t,n,i,r,o){var a,s,c,l=8*o-r-1,u=(1<<l)-1,d=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,r),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;e[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;e[n+p]=255&a,p+=f,a/=256,l-=8);e[n+p-f]|=128*g}var p={}.toString,f=Array.isArray||function(e){return"[object Array]"==p.call(e)},g=50;v.TYPED_ARRAY_SUPPORT=void 0===n.g.TYPED_ARRAY_SUPPORT||n.g.TYPED_ARRAY_SUPPORT;var _=m();function m(){return v.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function y(e,t){if(m()<t)throw new RangeError("Invalid typed array length");return v.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=v.prototype:(null===e&&(e=new v(t)),e.length=t),e}function v(e,t,n){if(!(v.TYPED_ARRAY_SUPPORT||this instanceof v))return new v(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return E(this,e)}return A(this,e,t,n)}function A(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?C(e,t,n,i):"string"==typeof t?T(e,t,n):I(e,t)}function b(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function w(e,t,n,i){return b(t),t<=0?y(e,t):void 0!==n?"string"==typeof i?y(e,t).fill(n,i):y(e,t).fill(n):y(e,t)}function E(e,t){if(b(t),e=y(e,t<0?0:0|x(t)),!v.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function T(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!v.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|P(t,n),r=(e=y(e,i)).write(t,n);return r!==i&&(e=e.slice(0,r)),e}function S(e,t){var n=t.length<0?0:0|x(t.length);e=y(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function C(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),v.TYPED_ARRAY_SUPPORT?(e=t).__proto__=v.prototype:e=S(e,t),e}function I(e,t){if(O(t)){var n=0|x(t.length);return 0===(e=y(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||he(t.length)?y(e,0):S(e,t);if("Buffer"===t.type&&f(t.data))return S(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function x(e){if(e>=m())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m().toString(16)+" bytes");return 0|e}function D(e){return+e!=e&&(e=0),v.alloc(+e)}function O(e){return!(null==e||!e._isBuffer)}function P(e,t){if(O(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return se(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ue(e).length;default:if(i)return se(e).length;t=(""+t).toLowerCase(),i=!0}}function R(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return $(this,t,n);case"utf8":case"utf-8":return V(this,t,n);case"ascii":return Z(this,t,n);case"latin1":case"binary":return Y(this,t,n);case"base64":return G(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function k(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function N(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=v.from(t,i)),O(t))return 0===t.length?-1:M(e,t,n,i,r);if("number"==typeof t)return t&=255,v.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):M(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function M(e,t,n,i,r){var o,a=1,s=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){var u=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,h=0;h<c;h++)if(l(e,o+h)!==l(t,h)){d=!1;break}if(d)return o}return-1}function L(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function B(e,t,n,i){return de(se(t,e.length-n),e,n,i)}function F(e,t,n,i){return de(ce(t),e,n,i)}function U(e,t,n,i){return F(e,t,n,i)}function W(e,t,n,i){return de(ue(t),e,n,i)}function j(e,t,n,i){return de(le(t,e.length-n),e,n,i)}function G(e,t,n){return 0===t&&n===e.length?u(e):u(e.slice(t,n))}function V(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,a,s,c,l=e[r],u=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[r+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[r+1],a=e[r+2],128==(192&o)&&128==(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[r+1],a=e[r+2],s=e[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=d}return z(i)}v.poolSize=8192,v._augment=function(e){return e.__proto__=v.prototype,e},v.from=function(e,t,n){return A(null,e,t,n)},v.TYPED_ARRAY_SUPPORT&&(v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array),v.alloc=function(e,t,n){return w(null,e,t,n)},v.allocUnsafe=function(e){return E(null,e)},v.allocUnsafeSlow=function(e){return E(null,e)},v.isBuffer=pe,v.compare=function(e,t){if(!O(e)||!O(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},v.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(e,t){if(!f(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return v.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=v.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!O(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},v.byteLength=P,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)k(this,t,t+1);return this},v.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)k(this,t,t+3),k(this,t+1,t+2);return this},v.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)k(this,t,t+7),k(this,t+1,t+6),k(this,t+2,t+5),k(this,t+3,t+4);return this},v.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?V(this,0,e):R.apply(this,arguments)},v.prototype.equals=function(e){if(!O(e))throw new TypeError("Argument must be a Buffer");return this===e||0===v.compare(this,e)},v.prototype.inspect=function(){var e="",t=g;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},v.prototype.compare=function(e,t,n,i,r){if(!O(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(i,r),l=e.slice(t,n),u=0;u<s;++u)if(c[u]!==l[u]){o=c[u],a=l[u];break}return o<a?-1:a<o?1:0},v.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},v.prototype.indexOf=function(e,t,n){return N(this,e,t,n,!0)},v.prototype.lastIndexOf=function(e,t,n){return N(this,e,t,n,!1)},v.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return L(this,e,t,n);case"utf8":case"utf-8":return B(this,e,t,n);case"ascii":return F(this,e,t,n);case"latin1":case"binary":return U(this,e,t,n);case"base64":return W(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;function z(e){var t=e.length;if(t<=H)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=H));return n}function Z(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function Y(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function $(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=ae(e[o]);return r}function q(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function Q(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function J(e,t,n,i,r,o){if(!O(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function X(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function K(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function ee(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function te(e,t,n,i,r){return r||ee(e,t,n,4,34028234663852886e22,-34028234663852886e22),h(e,t,n,i,23,4),n+4}function ne(e,t,n,i,r){return r||ee(e,t,n,8,17976931348623157e292,-17976931348623157e292),h(e,t,n,i,52,8),n+8}v.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),v.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=v.prototype;else{var r=t-e;n=new v(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+e]}return n},v.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Q(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},v.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Q(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},v.prototype.readUInt8=function(e,t){return t||Q(e,1,this.length),this[e]},v.prototype.readUInt16LE=function(e,t){return t||Q(e,2,this.length),this[e]|this[e+1]<<8},v.prototype.readUInt16BE=function(e,t){return t||Q(e,2,this.length),this[e]<<8|this[e+1]},v.prototype.readUInt32LE=function(e,t){return t||Q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},v.prototype.readUInt32BE=function(e,t){return t||Q(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},v.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Q(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},v.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Q(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},v.prototype.readInt8=function(e,t){return t||Q(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},v.prototype.readInt16LE=function(e,t){t||Q(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},v.prototype.readInt16BE=function(e,t){t||Q(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},v.prototype.readInt32LE=function(e,t){return t||Q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},v.prototype.readInt32BE=function(e,t){return t||Q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},v.prototype.readFloatLE=function(e,t){return t||Q(e,4,this.length),d(this,e,!0,23,4)},v.prototype.readFloatBE=function(e,t){return t||Q(e,4,this.length),d(this,e,!1,23,4)},v.prototype.readDoubleLE=function(e,t){return t||Q(e,8,this.length),d(this,e,!0,52,8)},v.prototype.readDoubleBE=function(e,t){return t||Q(e,8,this.length),d(this,e,!1,52,8)},v.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||J(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},v.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||J(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},v.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,1,255,0),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},v.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):X(this,e,t,!0),t+2},v.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):X(this,e,t,!1),t+2},v.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):K(this,e,t,!0),t+4},v.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):K(this,e,t,!1),t+4},v.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);J(this,e,t,n,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},v.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);J(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},v.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,1,127,-128),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},v.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):X(this,e,t,!0),t+2},v.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):X(this,e,t,!1),t+2},v.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,4,2147483647,-2147483648),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):K(this,e,t,!0),t+4},v.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):K(this,e,t,!1),t+4},v.prototype.writeFloatLE=function(e,t,n){return te(this,e,t,!0,n)},v.prototype.writeFloatBE=function(e,t,n){return te(this,e,t,!1,n)},v.prototype.writeDoubleLE=function(e,t,n){return ne(this,e,t,!0,n)},v.prototype.writeDoubleBE=function(e,t,n){return ne(this,e,t,!1,n)},v.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,o=i-n;if(this===e&&n<t&&t<i)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(o<1e3||!v.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},v.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!v.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=O(e)?e:se(new v(e,i).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var ie=/[^+\/0-9A-Za-z-_]/g;function re(e){if((e=oe(e).replace(ie,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function oe(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function ae(e){return e<16?"0"+e.toString(16):e.toString(16)}function se(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],a=0;a<i;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function ce(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function le(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)i=(n=e.charCodeAt(a))>>8,r=n%256,o.push(r),o.push(i);return o}function ue(e){return s(re(e))}function de(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function he(e){return e!=e}function pe(e){return null!=e&&(!!e._isBuffer||fe(e)||ge(e))}function fe(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function ge(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&fe(e.slice(0,0))}var _e=Object.freeze({INSPECT_MAX_BYTES:g,kMaxLength:_,Buffer:v,SlowBuffer:D,isBuffer:pe});function me(e,t){return e(t={exports:{}},t.exports),t.exports}var ye=Map,ve=be,Ae=null;function be(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function we(e){return!0===(e&&e.__isLong__)}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=we;var Ee={},Te={};function Se(e,t){var n,i,r;return t?(r=0<=(e>>>=0)&&e<256)&&(i=Te[e])?i:(n=Ie(e,(0|e)<0?-1:0,!0),r&&(Te[e]=n),n):(r=-128<=(e|=0)&&e<128)&&(i=Ee[e])?i:(n=Ie(e,e<0?-1:0,!1),r&&(Ee[e]=n),n)}function Ce(e,t){if(isNaN(e))return t?Fe:Be;if(t){if(e<0)return Fe;if(e>=Ne)return Ve}else{if(e<=-Me)return He;if(e+1>=Me)return Ge}return e<0?Ce(-e,t).neg():Ie(e%ke|0,e/ke|0,t)}function Ie(e,t,n){return new be(e,t,n)}be.fromInt=Se,be.fromNumber=Ce,be.fromBits=Ie;var xe=Math.pow;function De(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return Be;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return De(e.substring(1),t,n).neg();for(var r=Ce(xe(n,8)),o=Be,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+s),n);if(s<8){var l=Ce(xe(n,s));o=o.mul(l).add(Ce(c))}else o=(o=o.mul(r)).add(Ce(c))}return o.unsigned=t,o}function Oe(e,t){return"number"==typeof e?Ce(e,t):"string"==typeof e?De(e,t):Ie(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}be.fromString=De,be.fromValue=Oe;var Pe=65536,Re=1<<24,ke=Pe*Pe,Ne=ke*ke,Me=Ne/2,Le=Se(Re),Be=Se(0);be.ZERO=Be;var Fe=Se(0,!0);be.UZERO=Fe;var Ue=Se(1);be.ONE=Ue;var We=Se(1,!0);be.UONE=We;var je=Se(-1);be.NEG_ONE=je;var Ge=Ie(-1,2147483647,!1);be.MAX_VALUE=Ge;var Ve=Ie(-1,-1,!0);be.MAX_UNSIGNED_VALUE=Ve;var He=Ie(0,-2147483648,!1);be.MIN_VALUE=He;var ze=be.prototype;ze.toInt=function(){return this.unsigned?this.low>>>0:this.low},ze.toNumber=function(){return this.unsigned?(this.high>>>0)*ke+(this.low>>>0):this.high*ke+(this.low>>>0)},ze.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(He)){var t=Ce(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=Ce(xe(e,6),this.unsigned),o=this,a="";;){var s=o.div(r),c=(o.sub(s.mul(r)).toInt()>>>0).toString(e);if((o=s).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},ze.getHighBits=function(){return this.high},ze.getHighBitsUnsigned=function(){return this.high>>>0},ze.getLowBits=function(){return this.low},ze.getLowBitsUnsigned=function(){return this.low>>>0},ze.getNumBitsAbs=function(){if(this.isNegative())return this.eq(He)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},ze.isZero=function(){return 0===this.high&&0===this.low},ze.eqz=ze.isZero,ze.isNegative=function(){return!this.unsigned&&this.high<0},ze.isPositive=function(){return this.unsigned||this.high>=0},ze.isOdd=function(){return 1==(1&this.low)},ze.isEven=function(){return 0==(1&this.low)},ze.equals=function(e){return we(e)||(e=Oe(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},ze.eq=ze.equals,ze.notEquals=function(e){return!this.eq(e)},ze.neq=ze.notEquals,ze.ne=ze.notEquals,ze.lessThan=function(e){return this.comp(e)<0},ze.lt=ze.lessThan,ze.lessThanOrEqual=function(e){return this.comp(e)<=0},ze.lte=ze.lessThanOrEqual,ze.le=ze.lessThanOrEqual,ze.greaterThan=function(e){return this.comp(e)>0},ze.gt=ze.greaterThan,ze.greaterThanOrEqual=function(e){return this.comp(e)>=0},ze.gte=ze.greaterThanOrEqual,ze.ge=ze.greaterThanOrEqual,ze.compare=function(e){if(we(e)||(e=Oe(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},ze.comp=ze.compare,ze.negate=function(){return!this.unsigned&&this.eq(He)?He:this.not().add(Ue)},ze.neg=ze.negate,ze.add=function(e){we(e)||(e=Oe(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,r=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=0,l=0,u=0,d=0;return u+=(d+=r+(65535&e.low))>>>16,l+=(u+=i+s)>>>16,c+=(l+=n+a)>>>16,c+=t+o,Ie((u&=65535)<<16|(d&=65535),(c&=65535)<<16|(l&=65535),this.unsigned)},ze.subtract=function(e){return we(e)||(e=Oe(e)),this.add(e.neg())},ze.sub=ze.subtract,ze.multiply=function(e){if(this.isZero())return Be;if(we(e)||(e=Oe(e)),Ae)return Ie(Ae.mul(this.low,this.high,e.low,e.high),Ae.get_high(),this.unsigned);if(e.isZero())return Be;if(this.eq(He))return e.isOdd()?He:Be;if(e.eq(He))return this.isOdd()?He:Be;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Le)&&e.lt(Le))return Ce(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,r=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=65535&e.low,l=0,u=0,d=0,h=0;return d+=(h+=r*c)>>>16,u+=(d+=i*c)>>>16,d&=65535,u+=(d+=r*s)>>>16,l+=(u+=n*c)>>>16,u&=65535,l+=(u+=i*s)>>>16,u&=65535,l+=(u+=r*a)>>>16,l+=t*c+n*s+i*a+r*o,Ie((d&=65535)<<16|(h&=65535),(l&=65535)<<16|(u&=65535),this.unsigned)},ze.mul=ze.multiply,ze.divide=function(e){if(we(e)||(e=Oe(e)),e.isZero())throw Error("division by zero");var t,n,i;if(Ae)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?Ie((this.unsigned?Ae.div_u:Ae.div_s)(this.low,this.high,e.low,e.high),Ae.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Fe:Be;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Fe;if(e.gt(this.shru(1)))return We;i=Fe}else{if(this.eq(He))return e.eq(Ue)||e.eq(je)?He:e.eq(He)?Ue:(t=this.shr(1).div(e).shl(1)).eq(Be)?e.isNegative()?Ue:je:(n=this.sub(e.mul(t)),i=t.add(n.div(e)));if(e.eq(He))return this.unsigned?Fe:Be;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Be}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var r=Math.ceil(Math.log(t)/Math.LN2),o=r<=48?1:xe(2,r-48),a=Ce(t),s=a.mul(e);s.isNegative()||s.gt(n);)s=(a=Ce(t-=o,this.unsigned)).mul(e);a.isZero()&&(a=Ue),i=i.add(a),n=n.sub(s)}return i},ze.div=ze.divide,ze.modulo=function(e){return we(e)||(e=Oe(e)),Ae?Ie((this.unsigned?Ae.rem_u:Ae.rem_s)(this.low,this.high,e.low,e.high),Ae.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},ze.mod=ze.modulo,ze.rem=ze.modulo,ze.not=function(){return Ie(~this.low,~this.high,this.unsigned)},ze.and=function(e){return we(e)||(e=Oe(e)),Ie(this.low&e.low,this.high&e.high,this.unsigned)},ze.or=function(e){return we(e)||(e=Oe(e)),Ie(this.low|e.low,this.high|e.high,this.unsigned)},ze.xor=function(e){return we(e)||(e=Oe(e)),Ie(this.low^e.low,this.high^e.high,this.unsigned)},ze.shiftLeft=function(e){return we(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?Ie(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Ie(0,this.low<<e-32,this.unsigned)},ze.shl=ze.shiftLeft,ze.shiftRight=function(e){return we(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?Ie(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Ie(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},ze.shr=ze.shiftRight,ze.shiftRightUnsigned=function(e){if(we(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?Ie(this.low>>>e|t<<32-e,t>>>e,this.unsigned):Ie(32===e?t:t>>>e-32,0,this.unsigned)},ze.shru=ze.shiftRightUnsigned,ze.shr_u=ze.shiftRightUnsigned,ze.toSigned=function(){return this.unsigned?Ie(this.low,this.high,!1):this},ze.toUnsigned=function(){return this.unsigned?this:Ie(this.low,this.high,!0)},ze.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},ze.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},ze.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},be.fromBytes=function(e,t,n){return n?be.fromBytesLE(e,t):be.fromBytesBE(e,t)},be.fromBytesLE=function(e,t){return new be(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},be.fromBytesBE=function(e,t){return new be(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},ve.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},ve.fromExtendedJSON=function(e,t){var n=ve.fromString(e.$numberLong);return t&&t.relaxed?n.toNumber():n},Object.defineProperty(ve.prototype,"_bsontype",{value:"Long"});var Ze=ve;function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qe(e,t,n){return t&&$e(e.prototype,t),n&&$e(e,n),e}var Qe=function(){function e(t){Ye(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return qe(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:{$numberDouble:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,n){return n&&n.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),e}();Object.defineProperty(Qe.prototype,"_bsontype",{value:"Double"});var Je=Qe;function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tt(e,t,n){return t&&et(e.prototype,t),n&&et(e,n),e}function nt(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?it(e):t}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var st=function(e){function t(e,n){var i;return Ke(this,t),i=Ze.isLong(e)?nt(this,rt(t).call(this,e.low,e.high,!0)):nt(this,rt(t).call(this,e,n,!0)),nt(i)}return ot(t,e),tt(t,[{key:"toJSON",value:function(){return{$timestamp:this.toString()}}},{key:"toExtendedJSON",value:function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}}],[{key:"fromInt",value:function(e){return new t(Ze.fromInt(e,!0))}},{key:"fromNumber",value:function(e){return new t(Ze.fromNumber(e,!0))}},{key:"fromBits",value:function(e,n){return new t(e,n)}},{key:"fromString",value:function(e,n){return new t(Ze.fromString(e,n,!0))}},{key:"fromExtendedJSON",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),t}(Ze);Object.defineProperty(st.prototype,"_bsontype",{value:"Timestamp"}),st.MAX_VALUE=st.MAX_UNSIGNED_VALUE;var ct=st,lt={};function ut(e){return e.toString().replace("function(","function (")}function dt(e){for(var t=new Uint8Array(e),n=0;n<e;++n)t[n]=Math.floor(256*Math.random());return t}var ht=dt;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)ht=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{ht=lt.randomBytes}catch(e){}null==ht&&(ht=dt)}var pt={normalizedFunctionString:ut,randomBytes:ht};function ft(){throw new Error("setTimeout has not been defined")}function gt(){throw new Error("clearTimeout has not been defined")}var _t=ft,mt=gt;function yt(e){if(_t===setTimeout)return setTimeout(e,0);if((_t===ft||!_t)&&setTimeout)return _t=setTimeout,setTimeout(e,0);try{return _t(e,0)}catch(t){try{return _t.call(null,e,0)}catch(t){return _t.call(this,e,0)}}}function vt(e){if(mt===clearTimeout)return clearTimeout(e);if((mt===gt||!mt)&&clearTimeout)return mt=clearTimeout,clearTimeout(e);try{return mt(e)}catch(t){try{return mt.call(null,e)}catch(t){return mt.call(this,e)}}}"function"==typeof n.g.setTimeout&&(_t=setTimeout),"function"==typeof n.g.clearTimeout&&(mt=clearTimeout);var At=[],bt=!1,wt,Et=-1;function Tt(){bt&&wt&&(bt=!1,wt.length?At=wt.concat(At):Et=-1,At.length&&St())}function St(){if(!bt){var e=yt(Tt);bt=!0;for(var t=At.length;t;){for(wt=At,At=[];++Et<t;)wt&&wt[Et].run();Et=-1,t=At.length}wt=null,bt=!1,vt(e)}}function Ct(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];At.push(new It(e,t)),1!==At.length||bt||yt(St)}function It(e,t){this.fun=e,this.array=t}It.prototype.run=function(){this.fun.apply(null,this.array)};var xt="browser",Dt="browser",Ot=!0,Pt={},Rt=[],kt="",Nt={},Mt={},Lt={};function Bt(){}var Ft=Bt,Ut=Bt,Wt=Bt,jt=Bt,Gt=Bt,Vt=Bt,Ht=Bt;function zt(e){throw new Error("process.binding is not supported")}function Zt(){return"/"}function Yt(e){throw new Error("process.chdir is not supported")}function $t(){return 0}var qt=n.g.performance||{},Qt=qt.now||qt.mozNow||qt.msNow||qt.oNow||qt.webkitNow||function(){return(new Date).getTime()};function Jt(e){var t=.001*Qt.call(qt),n=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(n-=e[0],(i-=e[1])<0&&(n--,i+=1e9)),[n,i]}var Xt=new Date;function Kt(){return(new Date-Xt)/1e3}var en={nextTick:Ct,title:xt,browser:Ot,env:Pt,argv:Rt,version:kt,versions:Nt,on:Ft,addListener:Ut,once:Wt,off:jt,removeListener:Gt,removeAllListeners:Vt,emit:Ht,binding:zt,cwd:Zt,chdir:Yt,umask:$t,hrtime:Jt,platform:Dt,release:Mt,config:Lt,uptime:Kt},tn;tn="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var nn=tn;function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var on=/%[sdj%]/g;function an(e){if(!Cn(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(dn(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,r=i.length,o=String(e).replace(on,(function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}})),a=i[n];n<r;a=i[++n])En(a)||!On(a)?o+=" "+a:o+=" "+dn(a);return o}function sn(e,t){if(xn(n.g.process))return function(){return sn(e,t).apply(this,arguments)};var i=!1;return function(){return i||(console.error(t),i=!0),e.apply(this,arguments)}}var cn={},ln;function un(e){if(xn(ln)&&(ln=en.env.NODE_DEBUG||""),e=e.toUpperCase(),!cn[e])if(new RegExp("\\b"+e+"\\b","i").test(ln)){cn[e]=function(){var t=an.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else cn[e]=function(){};return cn[e]}function dn(e,t){var n={seen:[],stylize:pn};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),wn(t)?n.showHidden=t:t&&jn(n,t),xn(n.showHidden)&&(n.showHidden=!1),xn(n.depth)&&(n.depth=2),xn(n.colors)&&(n.colors=!1),xn(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=hn),gn(n,e,n.depth)}function hn(e,t){var n=dn.styles[t];return n?"["+dn.colors[n][0]+"m"+e+"["+dn.colors[n][1]+"m":e}function pn(e,t){return e}function fn(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function gn(e,t,n){if(e.customInspect&&t&&kn(t.inspect)&&t.inspect!==dn&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return Cn(i)||(i=gn(e,i,n)),i}var r=_n(e,t);if(r)return r;var o=Object.keys(t),a=fn(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Rn(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return mn(t);if(0===o.length){if(kn(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(Dn(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Pn(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Rn(t))return mn(t)}var c,l="",u=!1,d=["{","}"];(bn(t)&&(u=!0,d=["[","]"]),kn(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return Dn(t)&&(l=" "+RegExp.prototype.toString.call(t)),Pn(t)&&(l=" "+Date.prototype.toUTCString.call(t)),Rn(t)&&(l=" "+mn(t)),0!==o.length||u&&0!=t.length?n<0?Dn(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=u?yn(e,t,n,a,o):o.map((function(i){return vn(e,t,n,a,i,u)})),e.seen.pop(),An(c,l,d)):d[0]+l+d[1]}function _n(e,t){if(xn(t))return e.stylize("undefined","undefined");if(Cn(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return Sn(t)?e.stylize(""+t,"number"):wn(t)?e.stylize(""+t,"boolean"):En(t)?e.stylize("null","null"):void 0}function mn(e){return"["+Error.prototype.toString.call(e)+"]"}function yn(e,t,n,i,r){for(var o=[],a=0,s=t.length;a<s;++a)Gn(t,String(a))?o.push(vn(e,t,n,i,String(a),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(vn(e,t,n,i,r,!0))})),o}function vn(e,t,n,i,r,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),Gn(i,r)||(a="["+r+"]"),s||(e.seen.indexOf(c.value)<0?(s=En(n)?gn(e,c.value,null):gn(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),xn(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function An(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function bn(e){return Array.isArray(e)}function wn(e){return"boolean"==typeof e}function En(e){return null===e}function Tn(e){return null==e}function Sn(e){return"number"==typeof e}function Cn(e){return"string"==typeof e}function In(e){return"symbol"===rn(e)}function xn(e){return void 0===e}function Dn(e){return On(e)&&"[object RegExp]"===Ln(e)}function On(e){return"object"===rn(e)&&null!==e}function Pn(e){return On(e)&&"[object Date]"===Ln(e)}function Rn(e){return On(e)&&("[object Error]"===Ln(e)||e instanceof Error)}function kn(e){return"function"==typeof e}function Nn(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===rn(e)||void 0===e}function Mn(e){return Buffer.isBuffer(e)}function Ln(e){return Object.prototype.toString.call(e)}function Bn(e){return e<10?"0"+e.toString(10):e.toString(10)}dn.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},dn.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Fn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Un(){var e=new Date,t=[Bn(e.getHours()),Bn(e.getMinutes()),Bn(e.getSeconds())].join(":");return[e.getDate(),Fn[e.getMonth()],t].join(" ")}function Wn(){console.log("%s - %s",Un(),an.apply(null,arguments))}function jn(e,t){if(!t||!On(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function Gn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Vn={inherits:nn,_extend:jn,log:Wn,isBuffer:Mn,isPrimitive:Nn,isFunction:kn,isError:Rn,isDate:Pn,isObject:On,isRegExp:Dn,isUndefined:xn,isSymbol:In,isString:Cn,isNumber:Sn,isNullOrUndefined:Tn,isNull:En,isBoolean:wn,isArray:bn,inspect:dn,deprecate:sn,format:an,debuglog:un};function Hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zn(e,t,n){return t&&zn(e.prototype,t),n&&zn(e,n),e}var Yn=_e.Buffer,$n=pt.randomBytes,qn=Vn.deprecate,Qn=$n(5),Jn=new RegExp("^[0-9a-fA-F]{24}$"),Xn=!1;try{Yn&&Yn.from&&(Xn=!0)}catch(e){Xn=!1}for(var Kn=[],ei=0;ei<256;ei++)Kn[ei]=(ei<=15?"0":"")+ei.toString(16);for(var ti=[],ni=0;ni<10;)ti[48+ni]=ni++;for(;ni<16;)ti[55+ni]=ti[87+ni]=ni++;var ii=Yn;function ri(e){return e.toString("hex")}function oi(e,t){var n=e[t];return new TypeError('ObjectId string "'.concat(e,'" contains invalid character "').concat(n,'" with character code (').concat(e.charCodeAt(t),"). All character codes for a non-hex string must be less than 256."))}var ai=function(){function e(t){if(Hn(this,e),t instanceof e)return t;if(null==t||"number"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var n=e.isValid(t);if(!n&&null!=t)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(n&&"string"==typeof t&&24===t.length&&Xn)return new e(Yn.from(t,"hex"));if(n&&"string"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t,e.cacheHexString&&(this.__id=this.toString("hex"))}return Zn(e,[{key:"toHexString",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof ii)return t=ri(this.id),e.cacheHexString&&(this.__id=t),t;for(var n=0;n<this.id.length;n++){var i=Kn[this.id.charCodeAt(n)];if("string"!=typeof i)throw oi(this.id,n);t+=i}return e.cacheHexString&&(this.__id=t),t}},{key:"toString",value:function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()}},{key:"toJSON",value:function(){return this.toHexString()}},{key:"equals",value:function(t){return t instanceof e?this.toString()===t.toString():"string"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof ii?t===this.id.toString("binary"):"string"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:"getTimestamp",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:"toExtendedJSON",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}}],[{key:"getInc",value:function(){return e.index=(e.index+1)%16777215}},{key:"generate",value:function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var n=e.getInc(),i=Yn.alloc(12);return i[3]=255&t,i[2]=t>>8&255,i[1]=t>>16&255,i[0]=t>>24&255,i[4]=Qn[0],i[5]=Qn[1],i[6]=Qn[2],i[7]=Qn[3],i[8]=Qn[4],i[11]=255&n,i[10]=n>>8&255,i[9]=n>>16&255,i}},{key:"createPk",value:function(){return new e}},{key:"createFromTime",value:function(t){var n=Yn.from([0,0,0,0,0,0,0,0,0,0,0,0]);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,new e(n)}},{key:"createFromHexString",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(Xn)return new e(Yn.from(t,"hex"));for(var n=new ii(12),i=0,r=0;r<24;)n[i++]=ti[t.charCodeAt(r++)]<<4|ti[t.charCodeAt(r++)];return new e(n)}},{key:"isValid",value:function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&Jn.test(t):t instanceof e||(t instanceof ii&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&Jn.test(t.id)))))}},{key:"fromExtendedJSON",value:function(t){return new e(t.$oid)}}]),e}();ai.get_inc=qn((function(){return ai.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ai.prototype.get_inc=qn((function(){return ai.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ai.prototype.getInc=qn((function(){return ai.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ai.prototype.generate=qn((function(e){return ai.generate(e)}),"Please use the static `ObjectId.generate(time)` instead"),Object.defineProperty(ai.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),ai.prototype[Vn.inspect.custom||"inspect"]=ai.prototype.toString,ai.index=~~(16777215*Math.random()),Object.defineProperty(ai.prototype,"_bsontype",{value:"ObjectID"});var si=ai;function ci(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function li(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ui(e,t,n){return t&&li(e.prototype,t),n&&li(e,n),e}function di(e){return e.split("").sort().join("")}var hi=function(){function e(t,n){ci(this,e),this.pattern=t||"",this.options=n?di(n):"";for(var i=0;i<this.options.length;i++)if("i"!==this.options[i]&&"m"!==this.options[i]&&"x"!==this.options[i]&&"l"!==this.options[i]&&"s"!==this.options[i]&&"u"!==this.options[i])throw new Error("The regular expression option [".concat(this.options[i],"] is not supported"))}return ui(e,[{key:"toExtendedJSON",value:function(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:"parseOptions",value:function(e){return e?e.split("").sort().join(""):""}},{key:"fromExtendedJSON",value:function(t){return t.$regex?"BSONRegExp"===t.$regex._bsontype?t:new e(t.$regex,e.parseOptions(t.$options)):new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options))}}]),e}();Object.defineProperty(hi.prototype,"_bsontype",{value:"BSONRegExp"});var pi=hi;function fi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _i(e,t,n){return t&&gi(e.prototype,t),n&&gi(e,n),e}var mi=function(){function e(t){fi(this,e),this.value=t}return _i(e,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"inspect",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(){return{$symbol:this.value}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$symbol)}}]),e}();Object.defineProperty(mi.prototype,"_bsontype",{value:"Symbol"});var yi=mi;function vi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ai(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bi(e,t,n){return t&&Ai(e.prototype,t),n&&Ai(e,n),e}var wi=function(){function e(t){vi(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return bi(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,n){return n&&n.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),e}();Object.defineProperty(wi.prototype,"_bsontype",{value:"Int32"});var Ei=wi;function Ti(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Si(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ci(e,t,n){return t&&Si(e.prototype,t),n&&Si(e,n),e}var Ii=function(){function e(t,n){Ti(this,e),this.code=t,this.scope=n}return Ci(e,[{key:"toJSON",value:function(){return{scope:this.scope,code:this.code}}},{key:"toExtendedJSON",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$code,t.$scope)}}]),e}();Object.defineProperty(Ii.prototype,"_bsontype",{value:"Code"});var xi=Ii,Di=_e.Buffer,Oi=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Pi=/^(\+|-)?(Infinity|inf)$/i,Ri=/^(\+|-)?NaN$/i,ki=6111,Ni=-6176,Mi=6176,Li=34,Bi=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Fi=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Ui=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Wi=/^([-+])?(\d+)?$/;function ji(e){return!isNaN(parseInt(e,10))}function Gi(e){var t=Ze.fromNumber(1e9),n=Ze.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:n};for(var i=0;i<=3;i++)n=(n=n.shiftLeft(32)).add(new Ze(e.parts[i],0)),e.parts[i]=n.div(t).low,n=n.modulo(t);return{quotient:e,rem:n}}function Vi(e,t){if(!e&&!t)return{high:Ze.fromNumber(0),low:Ze.fromNumber(0)};var n=e.shiftRightUnsigned(32),i=new Ze(e.getLowBits(),0),r=t.shiftRightUnsigned(32),o=new Ze(t.getLowBits(),0),a=n.multiply(r),s=n.multiply(o),c=i.multiply(r),l=i.multiply(o);return a=a.add(s.shiftRightUnsigned(32)),s=new Ze(s.getLowBits(),0).add(c).add(l.shiftRightUnsigned(32)),{high:a=a.add(s.shiftRightUnsigned(32)),low:l=s.shiftLeft(32).add(new Ze(l.getLowBits(),0))}}function Hi(e,t){var n=e.high>>>0,i=t.high>>>0;return n<i||n===i&&e.low>>>0<t.low>>>0}function zi(e,t){throw new TypeError('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}function Zi(e){this.bytes=e}Zi.fromString=function(e){var t,n=!1,i=!1,r=!1,o=0,a=0,s=0,c=0,l=0,u=[0],d=0,h=0,p=0,f=0,g=0,_=0,m=[0,0],y=[0,0],v=0;if(e.length>=7e3)throw new TypeError(e+" not a valid Decimal128 string");var A=e.match(Oi),b=e.match(Pi),w=e.match(Ri);if(!A&&!b&&!w||0===e.length)throw new TypeError(e+" not a valid Decimal128 string");if(A){var E=A[2],T=A[4],S=A[5],C=A[6];T&&void 0===C&&zi(e,"missing exponent power"),T&&void 0===E&&zi(e,"missing exponent base"),void 0===T&&(S||C)&&zi(e,"missing e before exponent")}if("+"!==e[v]&&"-"!==e[v]||(n="-"===e[v++]),!ji(e[v])&&"."!==e[v]){if("i"===e[v]||"I"===e[v])return new Zi(Di.from(n?Fi:Ui));if("N"===e[v])return new Zi(Di.from(Bi))}for(;ji(e[v])||"."===e[v];)"."!==e[v]?(d<34&&("0"!==e[v]||r)&&(r||(l=a),r=!0,u[h++]=parseInt(e[v],10),d+=1),r&&(s+=1),i&&(c+=1),a+=1,v+=1):(i&&zi(e,"contains multiple periods"),i=!0,v+=1);if(i&&!a)throw new TypeError(e+" not a valid Decimal128 string");if("e"===e[v]||"E"===e[v]){var I=e.substr(++v).match(Wi);if(!I||!I[2])return new Zi(Di.from(Bi));g=parseInt(I[0],10),v+=I[0].length}if(e[v])return new Zi(Di.from(Bi));if(p=0,d){if(f=d-1,1!==(o=s))for(;"0"===e[l+o-1];)o-=1}else p=0,f=0,u[0]=0,s=1,d=1,o=0;for(g<=c&&c-g>16384?g=Ni:g-=c;g>ki;){if((f+=1)-p>Li){if(u.join("").match(/^0+$/)){g=ki;break}zi(e,"overflow")}g-=1}for(;g<Ni||d<s;){if(0===f&&o<d){g=Ni,o=0;break}if(d<s?s-=1:f-=1,g<ki)g+=1;else{if(u.join("").match(/^0+$/)){g=ki;break}zi(e,"overflow")}}if(f-p+1<o){var x=a;i&&(l+=1,x+=1),n&&(l+=1,x+=1);var D=parseInt(e[l+f+1],10),O=0;if(D>=5&&(O=1,5===D))for(O=u[f]%2==1,_=l+f+2;_<x;_++)if(parseInt(e[_],10)){O=1;break}if(O)for(var P=f;P>=0;P--)if(++u[P]>9&&(u[P]=0,0===P)){if(!(g<ki))return new Zi(Di.from(n?Fi:Ui));g+=1,u[P]=1}}if(m=Ze.fromNumber(0),y=Ze.fromNumber(0),0===o)m=Ze.fromNumber(0),y=Ze.fromNumber(0);else if(f-p<17){var R=p;for(y=Ze.fromNumber(u[R++]),m=new Ze(0,0);R<=f;R++)y=(y=y.multiply(Ze.fromNumber(10))).add(Ze.fromNumber(u[R]))}else{var k=p;for(m=Ze.fromNumber(u[k++]);k<=f-17;k++)m=(m=m.multiply(Ze.fromNumber(10))).add(Ze.fromNumber(u[k]));for(y=Ze.fromNumber(u[k++]);k<=f;k++)y=(y=y.multiply(Ze.fromNumber(10))).add(Ze.fromNumber(u[k]))}var N=Vi(m,Ze.fromString("100000000000000000"));N.low=N.low.add(y),Hi(N.low,y)&&(N.high=N.high.add(Ze.fromNumber(1))),t=g+Mi;var M={low:Ze.fromNumber(0),high:Ze.fromNumber(0)};N.high.shiftRightUnsigned(49).and(Ze.fromNumber(1)).equals(Ze.fromNumber(1))?(M.high=M.high.or(Ze.fromNumber(3).shiftLeft(61)),M.high=M.high.or(Ze.fromNumber(t).and(Ze.fromNumber(16383).shiftLeft(47))),M.high=M.high.or(N.high.and(Ze.fromNumber(0x7fffffffffff)))):(M.high=M.high.or(Ze.fromNumber(16383&t).shiftLeft(49)),M.high=M.high.or(N.high.and(Ze.fromNumber(562949953421311)))),M.low=N.low,n&&(M.high=M.high.or(Ze.fromString("9223372036854775808")));var L=Di.alloc(16);return v=0,L[v++]=255&M.low.low,L[v++]=M.low.low>>8&255,L[v++]=M.low.low>>16&255,L[v++]=M.low.low>>24&255,L[v++]=255&M.low.high,L[v++]=M.low.high>>8&255,L[v++]=M.low.high>>16&255,L[v++]=M.low.high>>24&255,L[v++]=255&M.high.low,L[v++]=M.high.low>>8&255,L[v++]=M.high.low>>16&255,L[v++]=M.high.low>>24&255,L[v++]=255&M.high.high,L[v++]=M.high.high>>8&255,L[v++]=M.high.high>>16&255,L[v++]=M.high.high>>24&255,new Zi(L)};var Yi=31,$i=16383,qi=30,Qi=31;Zi.prototype.toString=function(){for(var e,t,n,i,r,o,a=0,s=new Array(36),c=0;c<s.length;c++)s[c]=0;var l,u,d,h,p,f=0,g=!1,_={parts:new Array(4)},m=[];f=0;var y=this.bytes;if(i=y[f++]|y[f++]<<8|y[f++]<<16|y[f++]<<24,n=y[f++]|y[f++]<<8|y[f++]<<16|y[f++]<<24,t=y[f++]|y[f++]<<8|y[f++]<<16|y[f++]<<24,e=y[f++]|y[f++]<<8|y[f++]<<16|y[f++]<<24,f=0,{low:new Ze(i,n),high:new Ze(t,e)}.high.lessThan(Ze.ZERO)&&m.push("-"),(r=e>>26&Yi)>>3==3){if(r===qi)return m.join("")+"Infinity";if(r===Qi)return"NaN";o=e>>15&$i,d=8+(e>>14&1)}else d=e>>14&7,o=e>>17&$i;if(l=o-Mi,_.parts[0]=(16383&e)+((15&d)<<14),_.parts[1]=t,_.parts[2]=n,_.parts[3]=i,0===_.parts[0]&&0===_.parts[1]&&0===_.parts[2]&&0===_.parts[3])g=!0;else for(p=3;p>=0;p--){var v=0,A=Gi(_);if(_=A.quotient,v=A.rem.low)for(h=8;h>=0;h--)s[9*p+h]=v%10,v=Math.floor(v/10)}if(g)a=1,s[f]=0;else for(a=36;!s[f];)a-=1,f+=1;if((u=a-1+l)>=34||u<=-7||l>0){if(a>34)return m.push(0),l>0?m.push("E+"+l):l<0&&m.push("E"+l),m.join("");m.push(s[f++]),(a-=1)&&m.push(".");for(var b=0;b<a;b++)m.push(s[f++]);m.push("E"),u>0?m.push("+"+u):m.push(u)}else if(l>=0)for(var w=0;w<a;w++)m.push(s[f++]);else{var E=a+l;if(E>0)for(var T=0;T<E;T++)m.push(s[f++]);else m.push("0");for(m.push(".");E++<0;)m.push("0");for(var S=0;S<a-Math.max(E-1,0);S++)m.push(s[f++])}return m.join("")},Zi.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},Zi.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},Zi.fromExtendedJSON=function(e){return Zi.fromString(e.$numberDecimal)},Object.defineProperty(Zi.prototype,"_bsontype",{value:"Decimal128"});var Ji=Zi;function Xi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ki(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function er(e,t,n){return t&&Ki(e.prototype,t),n&&Ki(e,n),e}var tr=function(){function e(){Xi(this,e)}return er(e,[{key:"toExtendedJSON",value:function(){return{$minKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),e}();Object.defineProperty(tr.prototype,"_bsontype",{value:"MinKey"});var nr=tr;function ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function or(e,t,n){return t&&rr(e.prototype,t),n&&rr(e,n),e}var ar=function(){function e(){ir(this,e)}return or(e,[{key:"toExtendedJSON",value:function(){return{$maxKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),e}();Object.defineProperty(ar.prototype,"_bsontype",{value:"MaxKey"});var sr=ar;function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ur(e,t,n){return t&&lr(e.prototype,t),n&&lr(e,n),e}var dr=function(){function e(t,n,i,r){cr(this,e);var o=t.split(".");2===o.length&&(i=o.shift(),t=o.shift()),this.collection=t,this.oid=n,this.db=i,this.fields=r||{}}return ur(e,[{key:"toJSON",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:"toExtendedJSON",value:function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}}],[{key:"fromExtendedJSON",value:function(t){var n=Object.assign({},t);return["$ref","$id","$db"].forEach((function(e){return delete n[e]})),new e(t.$ref,t.$id,t.$db,n)}}]),e}();Object.defineProperty(dr.prototype,"_bsontype",{value:"DBRef"}),Object.defineProperty(dr.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1});var hr=dr;function pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gr(e,t,n){return t&&fr(e.prototype,t),n&&fr(e,n),e}var _r=_e.Buffer,mr=function(){function e(t,n){if(pr(this,e),!(null==t||"string"==typeof t||_r.isBuffer(t)||t instanceof Uint8Array||Array.isArray(t)))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");if(this.sub_type=null==n?yr:n,this.position=0,null==t||t instanceof Number)void 0!==_r?this.buffer=_r.alloc(e.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if("string"==typeof t)if(void 0!==_r)this.buffer=_r.from(t);else{if("undefined"==typeof Uint8Array&&!Array.isArray(t))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=Ar(t)}else this.buffer=t;this.position=t.length}}return gr(e,[{key:"put",value:function(t){if(null!=t.length&&"number"!=typeof t&&1!==t.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof t&&t<0||t>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var n=null;if(n="string"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=n;else if(void 0!==_r&&_r.isBuffer(this.buffer)){var i=_r.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(i,0,0,this.buffer.length),this.buffer=i,this.buffer[this.position++]=n}else{var r=null;r=vr(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var o=0;o<this.buffer.length;o++)r[o]=this.buffer[o];this.buffer=r,this.buffer[this.position++]=n}}},{key:"write",value:function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if(void 0!==_r&&_r.isBuffer(this.buffer))n=_r.alloc(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if(vr(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var i=0;i<this.position;i++)n[i]=this.buffer[i]}this.buffer=n}if(void 0!==_r&&_r.isBuffer(e)&&_r.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==_r&&"string"==typeof e&&_r.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if(vr(e)||Array.isArray(e)&&"string"!=typeof e){for(var r=0;r<e.length;r++)this.buffer[t++]=e[r];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var o=0;o<e.length;o++)this.buffer[t++]=e.charCodeAt(o);this.position=t>this.position?t:this.position}}},{key:"read",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var n="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),i=0;i<t;i++)n[i]=this.buffer[e++];return n}},{key:"value",value:function(e){if((e=null!=e&&e)&&void 0!==_r&&_r.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==_r&&_r.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=vr(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return br(this.buffer,0,this.position)}},{key:"length",value:function(){return this.position}},{key:"toJSON",value:function(){return null!=this.buffer?this.buffer.toString("base64"):""}},{key:"toString",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""}},{key:"toExtendedJSON",value:function(e){e=e||{};var t=_r.isBuffer(this.buffer)?this.buffer.toString("base64"):_r.from(this.buffer).toString("base64"),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===n.length?"0"+n:n}:{$binary:{base64:t,subType:1===n.length?"0"+n:n}}}}],[{key:"fromExtendedJSON",value:function(t,n){var i,r;return(n=n||{}).legacy?(r=t.$type?parseInt(t.$type,16):0,i=_r.from(t.$binary,"base64")):(r=t.$binary.subType?parseInt(t.$binary.subType,16):0,i=_r.from(t.$binary.base64,"base64")),new e(i,r)}}]),e}(),yr=0;function vr(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function Ar(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function br(e,t,n){for(var i="",r=t;r<n;r++)i+=String.fromCharCode(e[r]);return i}mr.BUFFER_SIZE=256,mr.SUBTYPE_DEFAULT=0,mr.SUBTYPE_FUNCTION=1,mr.SUBTYPE_BYTE_ARRAY=2,mr.SUBTYPE_UUID_OLD=3,mr.SUBTYPE_UUID=4,mr.SUBTYPE_MD5=5,mr.SUBTYPE_USER_DEFINED=128,Object.defineProperty(mr.prototype,"_bsontype",{value:"Binary"});var wr=mr,Er={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,BSON_INT64_MAX:Math.pow(2,63)-1,BSON_INT64_MIN:-Math.pow(2,63),JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992,BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_DBPOINTER:12,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128};function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Sr={$oid:si,$binary:wr,$symbol:yi,$numberInt:Ei,$numberDecimal:Ji,$numberDouble:Je,$numberLong:Ze,$minKey:nr,$maxKey:sr,$regex:pi,$regularExpression:pi,$timestamp:ct};function Cr(e,t,n,i){if("number"==typeof n){if(i.relaxed||i.legacy)return n;if(Math.floor(n)===n){if(n>=Dr&&n<=xr)return new Ei(n);if(n>=Pr&&n<=Or)return new Ze.fromNumber(n)}return new Je(n)}if(null==n||"object"!==Tr(n))return n;if(n.$undefined)return null;for(var r=Object.keys(n).filter((function(e){return e.startsWith("$")&&null!=n[e]})),o=0;o<r.length;o++){var a=Sr[r[o]];if(a)return a.fromExtendedJSON(n,i)}if(null!=n.$date){var s=n.$date,c=new Date;return i.legacy?"number"==typeof s?c.setTime(s):"string"==typeof s&&c.setTime(Date.parse(s)):"string"==typeof s?c.setTime(Date.parse(s)):Ze.isLong(s)?c.setTime(s.toNumber()):"number"==typeof s&&i.relaxed&&c.setTime(s),c}if(null!=n.$code){var l=Object.assign({},n);return n.$scope&&(l.$scope=Cr(e,null,n.$scope)),xi.fromExtendedJSON(n)}if(null!=n.$ref||null!=n.$dbPointer){var u=n.$ref?n:n.$dbPointer;if(u instanceof hr)return u;var d=Object.keys(u).filter((function(e){return e.startsWith("$")})),h=!0;if(d.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(h=!1)})),h)return hr.fromExtendedJSON(u)}return n}function Ir(e,t){var n=this;return"boolean"==typeof(t=Object.assign({},{relaxed:!0,legacy:!1},t)).relaxed&&(t.strict=!t.relaxed),"boolean"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,i){return Cr(n,e,i,t)}))}var xr=2147483647,Dr=-2147483648,Or=0x8000000000000000,Pr=-0x8000000000000000;function Rr(e,t,n,i){null!=n&&"object"===Tr(n)&&(i=n,n=0),null==t||"object"!==Tr(t)||Array.isArray(t)||(i=t,t=null,n=0),i=Object.assign({},{relaxed:!0,legacy:!1},i);var r=Array.isArray(e)?Mr(e,i):Ur(e,i);return JSON.stringify(r,t,n)}function kr(e,t){return t=t||{},JSON.parse(Rr(e,t))}function Nr(e,t){return t=t||{},Ir(JSON.stringify(e),t)}function Mr(e,t){return e.map((function(e){return Br(e,t)}))}function Lr(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function Br(e,t){if(Array.isArray(e))return Mr(e,t);if(void 0===e)return null;if(e instanceof Date){var n=e.getTime(),i=n>-1&&n<2534023188e5;return t.legacy?t.relaxed&&i?{$date:e.getTime()}:{$date:Lr(e)}:t.relaxed&&i?{$date:Lr(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var r=e>=Pr&&e<=Or;if(e>=Dr&&e<=xr)return{$numberInt:e.toString()};if(r)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var o=e.flags;return void 0===o&&(o=e.toString().match(/[gimuy]*$/)[0]),new pi(e.source,o).toExtendedJSON(t)}return null!=e&&"object"===Tr(e)?Ur(e,t):e}var Fr={Binary:function(e){return new wr(e.value(),e.subtype)},Code:function(e){return new xi(e.code,e.scope)},DBRef:function(e){return new hr(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new Ji(e.bytes)},Double:function(e){return new Je(e.value)},Int32:function(e){return new Ei(e.value)},Long:function(e){return Ze.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new sr},MinKey:function(){return new nr},ObjectID:function(e){return new si(e)},ObjectId:function(e){return new si(e)},BSONRegExp:function(e){return new pi(e.pattern,e.options)},Symbol:function(e){return new yi(e.value)},Timestamp:function(e){return ct.fromBits(e.low,e.high)}};function Ur(e,t){if(null==e||"object"!==Tr(e))throw new Error("not an object instance");var n=e._bsontype;if(void 0===n){var i={};for(var r in e)i[r]=Br(e[r],t);return i}if("string"==typeof n){var o=e;if("function"!=typeof o.toExtendedJSON){var a=Fr[n];if(!a)throw new TypeError("Unrecognized or invalid _bsontype: "+n);o=a(o)}return"Code"===n&&o.scope?o=new xi(o.code,Br(o.scope,t)):"DBRef"===n&&o.oid&&(o=new hr(o.collection,Br(o.oid,t),o.db,o.fields)),o.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+Tr(n))}var Wr={parse:Ir,deserialize:Nr,serialize:kr,stringify:Rr},jr=128,Gr=192,Vr=224,Hr=240,zr=248,Zr=192,Yr=224,$r=240,qr=128;function Qr(e,t,n){for(var i=0,r=t;r<n;r+=1){var o=e[r];if(i){if((o&Gr)!==qr)return!1;i-=1}else if(o&jr)if((o&Vr)===Zr)i=1;else if((o&Hr)===Yr)i=2;else{if((o&zr)!==$r)return!1;i=3}}return!i}var Jr=Qr,Xr={validateUtf8:Jr},Kr=_e.Buffer,eo=Xr.validateUtf8,to=Ze.fromNumber(Er.JS_INT_MAX),no=Ze.fromNumber(Er.JS_INT_MIN),io={};function ro(e,t,n){var i=(t=null==t?{}:t)&&t.index?t.index:0,r=e[i]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24;if(r<5)throw new Error("bson size must be >= 5, is ".concat(r));if(t.allowObjectSmallerThanBufferSize&&e.length<r)throw new Error("buffer length ".concat(e.length," must be >= bson size ").concat(r));if(!t.allowObjectSmallerThanBufferSize&&e.length!==r)throw new Error("buffer length ".concat(e.length," must === bson size ").concat(r));if(r+i>e.length)throw new Error("(bson size ".concat(r," + options.index ").concat(i," must be <= buffer length ").concat(Kr.byteLength(e),")"));if(0!==e[i+r-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return oo(e,i,t,n)}function oo(e,t,n,i){var r=null!=n.evalFunctions&&n.evalFunctions,o=null!=n.cacheFunctions&&n.cacheFunctions,a=null!=n.cacheFunctionsCrc32&&n.cacheFunctionsCrc32;if(!a)var s=null;var c=null==n.fieldsAsRaw?null:n.fieldsAsRaw,l=null!=n.raw&&n.raw,u="boolean"==typeof n.bsonRegExp&&n.bsonRegExp,d=null!=n.promoteBuffers&&n.promoteBuffers,h=null==n.promoteLongs||n.promoteLongs,p=null==n.promoteValues||n.promoteValues,f=t;if(e.length<5)throw new Error("corrupt bson message < 5 bytes long");var g=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(g<5||g>e.length)throw new Error("corrupt bson message");for(var _=i?[]:{},m=0;;){var y=e[t++];if(0===y)break;for(var v=t;0!==e[v]&&v<e.length;)v++;if(v>=Kr.byteLength(e))throw new Error("Bad BSON Document: illegal CString");var A=i?m++:e.toString("utf8",t,v);if(t=v+1,y===Er.BSON_DATA_STRING){var b=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(b<=0||b>e.length-t||0!==e[t+b-1])throw new Error("bad string length in bson");if(!eo(e,t,t+b-1))throw new Error("Invalid UTF-8 string in BSON document");var w=e.toString("utf8",t,t+b-1);_[A]=w,t+=b}else if(y===Er.BSON_DATA_OID){var E=Kr.alloc(12);e.copy(E,0,t,t+12),_[A]=new si(E),t+=12}else if(y===Er.BSON_DATA_INT&&!1===p)_[A]=new Ei(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(y===Er.BSON_DATA_INT)_[A]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(y===Er.BSON_DATA_NUMBER&&!1===p)_[A]=new Je(e.readDoubleLE(t)),t+=8;else if(y===Er.BSON_DATA_NUMBER)_[A]=e.readDoubleLE(t),t+=8;else if(y===Er.BSON_DATA_DATE){var T=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,S=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;_[A]=new Date(new Ze(T,S).toNumber())}else if(y===Er.BSON_DATA_BOOLEAN){if(0!==e[t]&&1!==e[t])throw new Error("illegal boolean type value");_[A]=1===e[t++]}else if(y===Er.BSON_DATA_OBJECT){var C=t,I=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(I<=0||I>e.length-t)throw new Error("bad embedded document length in bson");_[A]=l?e.slice(t,t+I):oo(e,C,n,!1),t+=I}else if(y===Er.BSON_DATA_ARRAY){var x=t,D=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,O=n,P=t+D;if(c&&c[A]){for(var R in O={},n)O[R]=n[R];O.raw=!0}if(_[A]=oo(e,x,O,!0),0!==e[(t+=D)-1])throw new Error("invalid array terminator byte");if(t!==P)throw new Error("corrupted array bson")}else if(y===Er.BSON_DATA_UNDEFINED)_[A]=void 0;else if(y===Er.BSON_DATA_NULL)_[A]=null;else if(y===Er.BSON_DATA_LONG){var k=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,N=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,M=new Ze(k,N);_[A]=h&&!0===p&&M.lessThanOrEqual(to)&&M.greaterThanOrEqual(no)?M.toNumber():M}else if(y===Er.BSON_DATA_DECIMAL128){var L=Kr.alloc(16);e.copy(L,0,t,t+16),t+=16;var B=new Ji(L);_[A]=B.toObject?B.toObject():B}else if(y===Er.BSON_DATA_BINARY){var F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,U=F,W=e[t++];if(F<0)throw new Error("Negative binary type element size found");if(F>Kr.byteLength(e))throw new Error("Binary type size larger than document size");if(null!=e.slice){if(W===wr.SUBTYPE_BYTE_ARRAY){if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(F>U-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(F<U-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}_[A]=d&&p?e.slice(t,t+F):new wr(e.slice(t,t+F),W)}else{var j="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(F)):new Array(F);if(W===wr.SUBTYPE_BYTE_ARRAY){if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(F>U-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(F<U-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(v=0;v<F;v++)j[v]=e[t+v];_[A]=d&&p?j:new wr(j,W)}t+=F}else if(y===Er.BSON_DATA_REGEXP&&!1===u){for(v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error("Bad BSON Document: illegal CString");var G=e.toString("utf8",t,v);for(v=t=v+1;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error("Bad BSON Document: illegal CString");var V=e.toString("utf8",t,v);t=v+1;var H=new Array(V.length);for(v=0;v<V.length;v++)switch(V[v]){case"m":H[v]="m";break;case"s":H[v]="g";break;case"i":H[v]="i"}_[A]=new RegExp(G,H.join(""))}else if(y===Er.BSON_DATA_REGEXP&&!0===u){for(v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error("Bad BSON Document: illegal CString");var z=e.toString("utf8",t,v);for(v=t=v+1;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error("Bad BSON Document: illegal CString");var Z=e.toString("utf8",t,v);t=v+1,_[A]=new pi(z,Z)}else if(y===Er.BSON_DATA_SYMBOL){var Y=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Y<=0||Y>e.length-t||0!==e[t+Y-1])throw new Error("bad string length in bson");_[A]=e.toString("utf8",t,t+Y-1),t+=Y}else if(y===Er.BSON_DATA_TIMESTAMP){var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;_[A]=new ct($,q)}else if(y===Er.BSON_DATA_MIN_KEY)_[A]=new nr;else if(y===Er.BSON_DATA_MAX_KEY)_[A]=new sr;else if(y===Er.BSON_DATA_CODE){var Q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Q<=0||Q>e.length-t||0!==e[t+Q-1])throw new Error("bad string length in bson");var J=e.toString("utf8",t,t+Q-1);if(r)if(o){var X=a?s(J):J;_[A]=ao(io,X,J,_)}else _[A]=so(J);else _[A]=new xi(J);t+=Q}else if(y===Er.BSON_DATA_CODE_W_SCOPE){var K=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(K<13)throw new Error("code_w_scope total size shorter minimum expected length");var ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ee<=0||ee>e.length-t||0!==e[t+ee-1])throw new Error("bad string length in bson");var te=e.toString("utf8",t,t+ee-1),ne=t+=ee,ie=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,re=oo(e,ne,n,!1);if(t+=ie,K<8+ie+ee)throw new Error("code_w_scope total size is to short, truncating scope");if(K>8+ie+ee)throw new Error("code_w_scope total size is to long, clips outer document");if(r){if(o){var oe=a?s(te):te;_[A]=ao(io,oe,te,_)}else _[A]=so(te);_[A].scope=re}else _[A]=new xi(te,re)}else{if(y!==Er.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+y.toString(16)+' for fieldname "'+A+'", are you using the latest BSON parser?');var ae=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ae<=0||ae>e.length-t||0!==e[t+ae-1])throw new Error("bad string length in bson");if(!eo(e,t,t+ae-1))throw new Error("Invalid UTF-8 string in BSON document");var se=e.toString("utf8",t,t+ae-1);t+=ae;var ce=Kr.alloc(12);e.copy(ce,0,t,t+12);var le=new si(ce);t+=12,_[A]=new hr(se,le)}}if(g!==t-f){if(i)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}var ue=Object.keys(_).filter((function(e){return e.startsWith("$")})),de=!0;if(ue.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(de=!1)})),!de)return _;if(null!=_.$id&&null!=_.$ref){var he=Object.assign({},_);return delete he.$ref,delete he.$id,delete he.$db,new hr(_.$ref,_.$id,_.$db||null,he)}return _}function ao(e,t,n,i){var r=null;return null==e[t]&&(eval("value = "+n),e[t]=r),e[t].bind(i)}function so(e){var t=null;return eval("value = "+e),t}var co=ro;function lo(e,t,n,i,r){var o,a,s="big"===n,c=8*r-i-1,l=(1<<c)-1,u=l>>1,d=-7,h=s?0:r-1,p=s?1:-1,f=e[t+h];for(h+=p,o=f&(1<<-d)-1,f>>=-d,d+=c;d>0;o=256*o+e[t+h],h+=p,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=i;d>0;a=256*a+e[t+h],h+=p,d-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=u}return(f?-1:1)*a*Math.pow(2,o-i)}function uo(e,t,n,i,r,o){var a,s,c,l="big"===i,u=8*o-r-1,d=(1<<u)-1,h=d>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=l?o-1:0,g=l?-1:1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+h>=1?p/c:p*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=d?(s=0,a=d):a+h>=1?(s=(t*c-1)*Math.pow(2,r),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),a=0)),isNaN(t)&&(s=0);r>=8;)e[n+f]=255&s,f+=g,s/=256,r-=8;for(a=a<<r|s,isNaN(t)&&(a+=8),u+=r;u>0;)e[n+f]=255&a,f+=g,a/=256,u-=8;e[n+f-g]|=128*_}var ho={readIEEE754:lo,writeIEEE754:uo};function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fo=_e.Buffer,go=ho.writeIEEE754,_o=pt.normalizedFunctionString,mo=/\x00/,yo=new Set(["$db","$ref","$id","$clusterTime"]),vo=function(e){return"object"===po(e)&&"[object Date]"===Object.prototype.toString.call(e)},Ao=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)};function bo(e,t,n,i,r){e[i++]=Er.BSON_DATA_STRING;var o=r?e.write(t,i,"ascii"):e.write(t,i,"utf8");e[(i=i+o+1)-1]=0;var a=e.write(n,i+4,"utf8");return e[i+3]=a+1>>24&255,e[i+2]=a+1>>16&255,e[i+1]=a+1>>8&255,e[i]=a+1&255,i=i+4+a,e[i++]=0,i}function wo(e,t,n,i,r){if(Math.floor(n)===n&&n>=Er.JS_INT_MIN&&n<=Er.JS_INT_MAX)if(n>=Er.BSON_INT32_MIN&&n<=Er.BSON_INT32_MAX)e[i++]=Er.BSON_DATA_INT,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=n>>16&255,e[i++]=n>>24&255;else if(n>=Er.JS_INT_MIN&&n<=Er.JS_INT_MAX){e[i++]=Er.BSON_DATA_NUMBER,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,go(e,n,i,"little",52,8),i+=8}else{e[i++]=Er.BSON_DATA_LONG,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var o=Ze.fromNumber(n),a=o.getLowBits(),s=o.getHighBits();e[i++]=255&a,e[i++]=a>>8&255,e[i++]=a>>16&255,e[i++]=a>>24&255,e[i++]=255&s,e[i++]=s>>8&255,e[i++]=s>>16&255,e[i++]=s>>24&255}else e[i++]=Er.BSON_DATA_NUMBER,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,go(e,n,i,"little",52,8),i+=8;return i}function Eo(e,t,n,i,r){return e[i++]=Er.BSON_DATA_NULL,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,i}function To(e,t,n,i,r){return e[i++]=Er.BSON_DATA_BOOLEAN,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,e[i++]=n?1:0,i}function So(e,t,n,i,r){e[i++]=Er.BSON_DATA_DATE,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var o=Ze.fromNumber(n.getTime()),a=o.getLowBits(),s=o.getHighBits();return e[i++]=255&a,e[i++]=a>>8&255,e[i++]=a>>16&255,e[i++]=a>>24&255,e[i++]=255&s,e[i++]=s>>8&255,e[i++]=s>>16&255,e[i++]=s>>24&255,i}function Co(e,t,n,i,r){if(e[i++]=Er.BSON_DATA_REGEXP,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,n.source&&null!=n.source.match(mo))throw Error("value "+n.source+" must not contain null bytes");return i+=e.write(n.source,i,"utf8"),e[i++]=0,n.ignoreCase&&(e[i++]=105),n.global&&(e[i++]=115),n.multiline&&(e[i++]=109),e[i++]=0,i}function Io(e,t,n,i,r){if(e[i++]=Er.BSON_DATA_REGEXP,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,null!=n.pattern.match(mo))throw Error("pattern "+n.pattern+" must not contain null bytes");return i+=e.write(n.pattern,i,"utf8"),e[i++]=0,i+=e.write(n.options.split("").sort().join(""),i,"utf8"),e[i++]=0,i}function xo(e,t,n,i,r){return null===n?e[i++]=Er.BSON_DATA_NULL:"MinKey"===n._bsontype?e[i++]=Er.BSON_DATA_MIN_KEY:e[i++]=Er.BSON_DATA_MAX_KEY,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,i}function Do(e,t,n,i,r){if(e[i++]=Er.BSON_DATA_OID,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,"string"==typeof n.id)e.write(n.id,i,"binary");else{if(!n.id||!n.id.copy)throw new TypeError("object ["+JSON.stringify(n)+"] is not a valid ObjectId");n.id.copy(e,i,0,12)}return i+12}function Oo(e,t,n,i,r){e[i++]=Er.BSON_DATA_BINARY,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var o=n.length;return e[i++]=255&o,e[i++]=o>>8&255,e[i++]=o>>16&255,e[i++]=o>>24&255,e[i++]=Er.BSON_BINARY_SUBTYPE_DEFAULT,n.copy(e,i,0,o),i+=o}function Po(e,t,n,i,r,o,a,s,c,l){for(var u=0;u<l.length;u++)if(l[u]===n)throw new Error("cyclic dependency detected");l.push(n),e[i++]=Array.isArray(n)?Er.BSON_DATA_ARRAY:Er.BSON_DATA_OBJECT,i+=c?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var d=jo(e,n,r,i,o+1,a,s,l);return l.pop(),d}function Ro(e,t,n,i,r){return e[i++]=Er.BSON_DATA_DECIMAL128,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,n.bytes.copy(e,i,0,16),i+16}function ko(e,t,n,i,r){e[i++]="Long"===n._bsontype?Er.BSON_DATA_LONG:Er.BSON_DATA_TIMESTAMP,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var o=n.getLowBits(),a=n.getHighBits();return e[i++]=255&o,e[i++]=o>>8&255,e[i++]=o>>16&255,e[i++]=o>>24&255,e[i++]=255&a,e[i++]=a>>8&255,e[i++]=a>>16&255,e[i++]=a>>24&255,i}function No(e,t,n,i,r){return e[i++]=Er.BSON_DATA_INT,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=n>>16&255,e[i++]=n>>24&255,i}function Mo(e,t,n,i,r){return e[i++]=Er.BSON_DATA_NUMBER,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,go(e,n.value,i,"little",52,8),i+=8}function Lo(e,t,n,i,r,o,a){e[i++]=Er.BSON_DATA_CODE,i+=a?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var s=_o(n),c=e.write(s,i+4,"utf8")+1;return e[i]=255&c,e[i+1]=c>>8&255,e[i+2]=c>>16&255,e[i+3]=c>>24&255,i=i+4+c-1,e[i++]=0,i}function Bo(e,t,n,i,r,o,a,s,c){if(n.scope&&"object"===po(n.scope)){e[i++]=Er.BSON_DATA_CODE_W_SCOPE,i+=c?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var l=i,u="string"==typeof n.code?n.code:n.code.toString();i+=4;var d=e.write(u,i+4,"utf8")+1;e[i]=255&d,e[i+1]=d>>8&255,e[i+2]=d>>16&255,e[i+3]=d>>24&255,e[i+4+d-1]=0,i=i+d+4;var h=jo(e,n.scope,r,i,o+1,a,s);i=h-1;var p=h-l;e[l++]=255&p,e[l++]=p>>8&255,e[l++]=p>>16&255,e[l++]=p>>24&255,e[i++]=0}else{e[i++]=Er.BSON_DATA_CODE,i+=c?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var f=n.code.toString(),g=e.write(f,i+4,"utf8")+1;e[i]=255&g,e[i+1]=g>>8&255,e[i+2]=g>>16&255,e[i+3]=g>>24&255,i=i+4+g-1,e[i++]=0}return i}function Fo(e,t,n,i,r){e[i++]=Er.BSON_DATA_BINARY,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var o=n.value(!0),a=n.position;return n.sub_type===wr.SUBTYPE_BYTE_ARRAY&&(a+=4),e[i++]=255&a,e[i++]=a>>8&255,e[i++]=a>>16&255,e[i++]=a>>24&255,e[i++]=n.sub_type,n.sub_type===wr.SUBTYPE_BYTE_ARRAY&&(a-=4,e[i++]=255&a,e[i++]=a>>8&255,e[i++]=a>>16&255,e[i++]=a>>24&255),o.copy(e,i,0,n.position),i+=n.position}function Uo(e,t,n,i,r){e[i++]=Er.BSON_DATA_SYMBOL,i+=r?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var o=e.write(n.value,i+4,"utf8")+1;return e[i]=255&o,e[i+1]=o>>8&255,e[i+2]=o>>16&255,e[i+3]=o>>24&255,i=i+4+o-1,e[i++]=0,i}function Wo(e,t,n,i,r,o,a){e[i++]=Er.BSON_DATA_OBJECT,i+=a?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0;var s,c=i,l={$ref:n.collection||n.namespace,$id:n.oid};null!=n.db&&(l.$db=n.db);var u=(s=jo(e,l=Object.assign(l,n.fields),!1,i,r+1,o))-c;return e[c++]=255&u,e[c++]=u>>8&255,e[c++]=u>>16&255,e[c++]=u>>24&255,s}function jo(e,t,n,i,r,o,a,s){i=i||0,(s=s||[]).push(t);var c=i+4;if(Array.isArray(t))for(var l=0;l<t.length;l++){var u=""+l,d=t[l];if(d&&d.toBSON){if("function"!=typeof d.toBSON)throw new TypeError("toBSON is not a function");d=d.toBSON()}var h=po(d);if("string"===h)c=bo(e,u,d,c,!0);else if("number"===h)c=wo(e,u,d,c,!0);else if("boolean"===h)c=To(e,u,d,c,!0);else if(d instanceof Date||vo(d))c=So(e,u,d,c,!0);else if(void 0===d)c=Eo(e,u,d,c,!0);else if(null===d)c=Eo(e,u,d,c,!0);else if("ObjectId"===d._bsontype||"ObjectID"===d._bsontype)c=Do(e,u,d,c,!0);else if(fo.isBuffer(d))c=Oo(e,u,d,c,!0);else if(d instanceof RegExp||Ao(d))c=Co(e,u,d,c,!0);else if("object"===h&&null==d._bsontype)c=Po(e,u,d,c,n,r,o,a,!0,s);else if("object"===h&&"Decimal128"===d._bsontype)c=Ro(e,u,d,c,!0);else if("Long"===d._bsontype||"Timestamp"===d._bsontype)c=ko(e,u,d,c,!0);else if("Double"===d._bsontype)c=Mo(e,u,d,c,!0);else if("function"==typeof d&&o)c=Lo(e,u,d,c,n,r,o,!0);else if("Code"===d._bsontype)c=Bo(e,u,d,c,n,r,o,a,!0);else if("Binary"===d._bsontype)c=Fo(e,u,d,c,!0);else if("Symbol"===d._bsontype)c=Uo(e,u,d,c,!0);else if("DBRef"===d._bsontype)c=Wo(e,u,d,c,r,o,!0);else if("BSONRegExp"===d._bsontype)c=Io(e,u,d,c,!0);else if("Int32"===d._bsontype)c=No(e,u,d,c,!0);else if("MinKey"===d._bsontype||"MaxKey"===d._bsontype)c=xo(e,u,d,c,!0);else if(void 0!==d._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+d._bsontype)}else if(t instanceof ye)for(var p=t.entries(),f=!1;!f;){var g=p.next();if(!(f=g.done)){var _=g.value[0],m=g.value[1],y=po(m);if("string"==typeof _&&!yo.has(_)){if(null!=_.match(mo))throw Error("key "+_+" must not contain null bytes");if(n){if("$"===_[0])throw Error("key "+_+" must not start with '$'");if(~_.indexOf("."))throw Error("key "+_+" must not contain '.'")}}if("string"===y)c=bo(e,_,m,c);else if("number"===y)c=wo(e,_,m,c);else if("boolean"===y)c=To(e,_,m,c);else if(m instanceof Date||vo(m))c=So(e,_,m,c);else if(null===m||void 0===m&&!1===a)c=Eo(e,_,m,c);else if("ObjectId"===m._bsontype||"ObjectID"===m._bsontype)c=Do(e,_,m,c);else if(fo.isBuffer(m))c=Oo(e,_,m,c);else if(m instanceof RegExp||Ao(m))c=Co(e,_,m,c);else if("object"===y&&null==m._bsontype)c=Po(e,_,m,c,n,r,o,a,!1,s);else if("object"===y&&"Decimal128"===m._bsontype)c=Ro(e,_,m,c);else if("Long"===m._bsontype||"Timestamp"===m._bsontype)c=ko(e,_,m,c);else if("Double"===m._bsontype)c=Mo(e,_,m,c);else if("Code"===m._bsontype)c=Bo(e,_,m,c,n,r,o,a);else if("function"==typeof m&&o)c=Lo(e,_,m,c,n,r,o);else if("Binary"===m._bsontype)c=Fo(e,_,m,c);else if("Symbol"===m._bsontype)c=Uo(e,_,m,c);else if("DBRef"===m._bsontype)c=Wo(e,_,m,c,r,o);else if("BSONRegExp"===m._bsontype)c=Io(e,_,m,c);else if("Int32"===m._bsontype)c=No(e,_,m,c);else if("MinKey"===m._bsontype||"MaxKey"===m._bsontype)c=xo(e,_,m,c);else if(void 0!==m._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+m._bsontype)}}else{if(t.toBSON){if("function"!=typeof t.toBSON)throw new TypeError("toBSON is not a function");if(null!=(t=t.toBSON())&&"object"!==po(t))throw new TypeError("toBSON function did not return an object")}for(var v in t){var A=t[v];if(A&&A.toBSON){if("function"!=typeof A.toBSON)throw new TypeError("toBSON is not a function");A=A.toBSON()}var b=po(A);if("string"==typeof v&&!yo.has(v)){if(null!=v.match(mo))throw Error("key "+v+" must not contain null bytes");if(n){if("$"===v[0])throw Error("key "+v+" must not start with '$'");if(~v.indexOf("."))throw Error("key "+v+" must not contain '.'")}}if("string"===b)c=bo(e,v,A,c);else if("number"===b)c=wo(e,v,A,c);else if("boolean"===b)c=To(e,v,A,c);else if(A instanceof Date||vo(A))c=So(e,v,A,c);else if(void 0===A)!1===a&&(c=Eo(e,v,A,c));else if(null===A)c=Eo(e,v,A,c);else if("ObjectId"===A._bsontype||"ObjectID"===A._bsontype)c=Do(e,v,A,c);else if(fo.isBuffer(A))c=Oo(e,v,A,c);else if(A instanceof RegExp||Ao(A))c=Co(e,v,A,c);else if("object"===b&&null==A._bsontype)c=Po(e,v,A,c,n,r,o,a,!1,s);else if("object"===b&&"Decimal128"===A._bsontype)c=Ro(e,v,A,c);else if("Long"===A._bsontype||"Timestamp"===A._bsontype)c=ko(e,v,A,c);else if("Double"===A._bsontype)c=Mo(e,v,A,c);else if("Code"===A._bsontype)c=Bo(e,v,A,c,n,r,o,a);else if("function"==typeof A&&o)c=Lo(e,v,A,c,n,r,o);else if("Binary"===A._bsontype)c=Fo(e,v,A,c);else if("Symbol"===A._bsontype)c=Uo(e,v,A,c);else if("DBRef"===A._bsontype)c=Wo(e,v,A,c,r,o);else if("BSONRegExp"===A._bsontype)c=Io(e,v,A,c);else if("Int32"===A._bsontype)c=No(e,v,A,c);else if("MinKey"===A._bsontype||"MaxKey"===A._bsontype)c=xo(e,v,A,c);else if(void 0!==A._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+A._bsontype)}}s.pop(),e[c++]=0;var w=c-i;return e[i++]=255&w,e[i++]=w>>8&255,e[i++]=w>>16&255,e[i++]=w>>24&255,c}var Go=jo;function Vo(e){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ho=_e.Buffer,zo=pt.normalizedFunctionString;function Zo(e){return"object"===Vo(e)&&"[object Date]"===Object.prototype.toString.call(e)}function Yo(e,t,n){var i=5;if(Array.isArray(e))for(var r=0;r<e.length;r++)i+=$o(r.toString(),e[r],t,!0,n);else for(var o in e.toBSON&&(e=e.toBSON()),e)i+=$o(o,e[o],t,!1,n);return i}function $o(e,t,n,i,r){switch(t&&t.toBSON&&(t=t.toBSON()),Vo(t)){case"string":return 1+Ho.byteLength(e,"utf8")+1+4+Ho.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=Er.JS_INT_MIN&&t<=Er.JS_INT_MAX&&t>=Er.BSON_INT32_MIN&&t<=Er.BSON_INT32_MAX?(null!=e?Ho.byteLength(e,"utf8")+1:0)+5:(null!=e?Ho.byteLength(e,"utf8")+1:0)+9;case"undefined":return i||!r?(null!=e?Ho.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(null!=e?Ho.byteLength(e,"utf8")+1:0)+2;case"object":if(null==t||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?Ho.byteLength(e,"utf8")+1:0)+1;if("ObjectId"===t._bsontype||"ObjectID"===t._bsontype)return(null!=e?Ho.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||Zo(t))return(null!=e?Ho.byteLength(e,"utf8")+1:0)+9;if(void 0!==Ho&&Ho.isBuffer(t))return(null!=e?Ho.byteLength(e,"utf8")+1:0)+6+t.length;if("Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?Ho.byteLength(e,"utf8")+1:0)+9;if("Decimal128"===t._bsontype)return(null!=e?Ho.byteLength(e,"utf8")+1:0)+17;if("Code"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Ho.byteLength(e,"utf8")+1:0)+1+4+4+Ho.byteLength(t.code.toString(),"utf8")+1+Yo(t.scope,n,r):(null!=e?Ho.byteLength(e,"utf8")+1:0)+1+4+Ho.byteLength(t.code.toString(),"utf8")+1;if("Binary"===t._bsontype)return t.sub_type===wr.SUBTYPE_BYTE_ARRAY?(null!=e?Ho.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(null!=e?Ho.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if("Symbol"===t._bsontype)return(null!=e?Ho.byteLength(e,"utf8")+1:0)+Ho.byteLength(t.value,"utf8")+4+1+1;if("DBRef"===t._bsontype){var o=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(o.$db=t.db),(null!=e?Ho.byteLength(e,"utf8")+1:0)+1+Yo(o,n,r)}return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)?(null!=e?Ho.byteLength(e,"utf8")+1:0)+1+Ho.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:"BSONRegExp"===t._bsontype?(null!=e?Ho.byteLength(e,"utf8")+1:0)+1+Ho.byteLength(t.pattern,"utf8")+1+Ho.byteLength(t.options,"utf8")+1:(null!=e?Ho.byteLength(e,"utf8")+1:0)+Yo(t,n,r)+1;case"function":if(t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)||"[object RegExp]"===String.call(t))return(null!=e?Ho.byteLength(e,"utf8")+1:0)+1+Ho.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(n&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Ho.byteLength(e,"utf8")+1:0)+1+4+4+Ho.byteLength(zo(t),"utf8")+1+Yo(t.scope,n,r);if(n)return(null!=e?Ho.byteLength(e,"utf8")+1:0)+1+4+Ho.byteLength(zo(t),"utf8")+1}return 0}var qo=Yo,Qo=_e.Buffer,Jo=function(e){if(e instanceof Qo)return e;if(e instanceof Uint8Array)return Qo.from(e.buffer);throw new TypeError("Must use either Buffer or Uint8Array")},Xo=_e.Buffer,Ko=17825792,ea=Xo.alloc(Ko);function ta(e){ea.length<e&&(ea=Xo.alloc(e))}function na(e,t){var n="boolean"==typeof(t=t||{}).checkKeys&&t.checkKeys,i="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,r="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,o="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:Ko;ea.length<o&&(ea=Xo.alloc(o));var a=Go(ea,e,n,0,0,i,r,[]),s=Xo.alloc(a);return ea.copy(s,0,0,s.length),s}function ia(e,t,n){var i="boolean"==typeof(n=n||{}).checkKeys&&n.checkKeys,r="boolean"==typeof n.serializeFunctions&&n.serializeFunctions,o="boolean"!=typeof n.ignoreUndefined||n.ignoreUndefined,a="number"==typeof n.index?n.index:0,s=Go(ea,e,i,0,0,r,o);return ea.copy(t,a,0,s),a+s-1}function ra(e,t){return e=Jo(e),co(e,t)}function oa(e,t){var n="boolean"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,i="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return qo(e,n,i)}function aa(e,t,n,i,r,o){o=Object.assign({allowObjectSmallerThanBufferSize:!0},o),e=Jo(e);for(var a=t,s=0;s<n;s++){var c=e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]<<24;o.index=a,i[r+s]=co(e,o),a+=c}return a}var sa={BSON_INT32_MAX:Er.BSON_INT32_MAX,BSON_INT32_MIN:Er.BSON_INT32_MIN,BSON_INT64_MAX:Er.BSON_INT64_MAX,BSON_INT64_MIN:Er.BSON_INT64_MIN,JS_INT_MAX:Er.JS_INT_MAX,JS_INT_MIN:Er.JS_INT_MIN,BSON_DATA_NUMBER:Er.BSON_DATA_NUMBER,BSON_DATA_STRING:Er.BSON_DATA_STRING,BSON_DATA_OBJECT:Er.BSON_DATA_OBJECT,BSON_DATA_ARRAY:Er.BSON_DATA_ARRAY,BSON_DATA_BINARY:Er.BSON_DATA_BINARY,BSON_DATA_UNDEFINED:Er.BSON_DATA_UNDEFINED,BSON_DATA_OID:Er.BSON_DATA_OID,BSON_DATA_BOOLEAN:Er.BSON_DATA_BOOLEAN,BSON_DATA_DATE:Er.BSON_DATA_DATE,BSON_DATA_NULL:Er.BSON_DATA_NULL,BSON_DATA_REGEXP:Er.BSON_DATA_REGEXP,BSON_DATA_DBPOINTER:Er.BSON_DATA_DBPOINTER,BSON_DATA_CODE:Er.BSON_DATA_CODE,BSON_DATA_SYMBOL:Er.BSON_DATA_SYMBOL,BSON_DATA_CODE_W_SCOPE:Er.BSON_DATA_CODE_W_SCOPE,BSON_DATA_INT:Er.BSON_DATA_INT,BSON_DATA_TIMESTAMP:Er.BSON_DATA_TIMESTAMP,BSON_DATA_LONG:Er.BSON_DATA_LONG,BSON_DATA_DECIMAL128:Er.BSON_DATA_DECIMAL128,BSON_DATA_MIN_KEY:Er.BSON_DATA_MIN_KEY,BSON_DATA_MAX_KEY:Er.BSON_DATA_MAX_KEY,BSON_BINARY_SUBTYPE_DEFAULT:Er.BSON_BINARY_SUBTYPE_DEFAULT,BSON_BINARY_SUBTYPE_FUNCTION:Er.BSON_BINARY_SUBTYPE_FUNCTION,BSON_BINARY_SUBTYPE_BYTE_ARRAY:Er.BSON_BINARY_SUBTYPE_BYTE_ARRAY,BSON_BINARY_SUBTYPE_UUID:Er.BSON_BINARY_SUBTYPE_UUID,BSON_BINARY_SUBTYPE_MD5:Er.BSON_BINARY_SUBTYPE_MD5,BSON_BINARY_SUBTYPE_USER_DEFINED:Er.BSON_BINARY_SUBTYPE_USER_DEFINED,Code:xi,Map:ye,BSONSymbol:yi,DBRef:hr,Binary:wr,ObjectId:si,Long:Ze,Timestamp:ct,Double:Je,Int32:Ei,MinKey:nr,MaxKey:sr,BSONRegExp:pi,Decimal128:Ji,serialize:na,serializeWithBufferAndIndex:ia,deserialize:ra,calculateObjectSize:oa,deserializeStream:aa,setInternalBufferSize:ta,ObjectID:si,EJSON:Wr},ca=sa.BSON_INT32_MAX,la=sa.BSON_INT32_MIN,ua=sa.BSON_INT64_MAX,da=sa.BSON_INT64_MIN,ha=sa.JS_INT_MAX,pa=sa.JS_INT_MIN,fa=sa.BSON_DATA_NUMBER,ga=sa.BSON_DATA_STRING,_a=sa.BSON_DATA_OBJECT,ma=sa.BSON_DATA_ARRAY,ya=sa.BSON_DATA_BINARY,va=sa.BSON_DATA_UNDEFINED,Aa=sa.BSON_DATA_OID,ba=sa.BSON_DATA_BOOLEAN,wa=sa.BSON_DATA_DATE,Ea=sa.BSON_DATA_NULL,Ta=sa.BSON_DATA_REGEXP,Sa=sa.BSON_DATA_DBPOINTER,Ca=sa.BSON_DATA_CODE,Ia=sa.BSON_DATA_SYMBOL,xa=sa.BSON_DATA_CODE_W_SCOPE,Da=sa.BSON_DATA_INT,Oa=sa.BSON_DATA_TIMESTAMP,Pa=sa.BSON_DATA_LONG,Ra=sa.BSON_DATA_DECIMAL128,ka=sa.BSON_DATA_MIN_KEY,Na=sa.BSON_DATA_MAX_KEY,Ma=sa.BSON_BINARY_SUBTYPE_DEFAULT,La=sa.BSON_BINARY_SUBTYPE_FUNCTION,Ba=sa.BSON_BINARY_SUBTYPE_BYTE_ARRAY,Fa=sa.BSON_BINARY_SUBTYPE_UUID,Ua=sa.BSON_BINARY_SUBTYPE_MD5,Wa=sa.BSON_BINARY_SUBTYPE_USER_DEFINED,ja=sa.Code,Ga=sa.BSONSymbol,Va=sa.DBRef,Ha=sa.Binary,za=sa.ObjectId,Za=sa.Long,Ya=sa.Timestamp,$a=sa.Double,qa=sa.Int32,Qa=sa.MinKey,Ja=sa.MaxKey,Xa=sa.BSONRegExp,Ka=sa.Decimal128,es=sa.serialize,ts=sa.serializeWithBufferAndIndex,ns=sa.deserialize,is=sa.calculateObjectSize,rs=sa.deserializeStream,os=sa.setInternalBufferSize,as=sa.ObjectID,ss=sa.EJSON;return e.default=sa,e.BSON_INT32_MAX=ca,e.BSON_INT32_MIN=la,e.BSON_INT64_MAX=ua,e.BSON_INT64_MIN=da,e.JS_INT_MAX=ha,e.JS_INT_MIN=pa,e.BSON_DATA_NUMBER=fa,e.BSON_DATA_STRING=ga,e.BSON_DATA_OBJECT=_a,e.BSON_DATA_ARRAY=ma,e.BSON_DATA_BINARY=ya,e.BSON_DATA_UNDEFINED=va,e.BSON_DATA_OID=Aa,e.BSON_DATA_BOOLEAN=ba,e.BSON_DATA_DATE=wa,e.BSON_DATA_NULL=Ea,e.BSON_DATA_REGEXP=Ta,e.BSON_DATA_DBPOINTER=Sa,e.BSON_DATA_CODE=Ca,e.BSON_DATA_SYMBOL=Ia,e.BSON_DATA_CODE_W_SCOPE=xa,e.BSON_DATA_INT=Da,e.BSON_DATA_TIMESTAMP=Oa,e.BSON_DATA_LONG=Pa,e.BSON_DATA_DECIMAL128=Ra,e.BSON_DATA_MIN_KEY=ka,e.BSON_DATA_MAX_KEY=Na,e.BSON_BINARY_SUBTYPE_DEFAULT=Ma,e.BSON_BINARY_SUBTYPE_FUNCTION=La,e.BSON_BINARY_SUBTYPE_BYTE_ARRAY=Ba,e.BSON_BINARY_SUBTYPE_UUID=Fa,e.BSON_BINARY_SUBTYPE_MD5=Ua,e.BSON_BINARY_SUBTYPE_USER_DEFINED=Wa,e.Code=ja,e.BSONSymbol=Ga,e.DBRef=Va,e.Binary=Ha,e.ObjectId=za,e.Long=Za,e.Timestamp=Ya,e.Double=$a,e.Int32=qa,e.MinKey=Qa,e.MaxKey=Ja,e.BSONRegExp=Xa,e.Decimal128=Ka,e.serialize=es,e.serializeWithBufferAndIndex=ts,e.deserialize=ns,e.calculateObjectSize=is,e.deserializeStream=rs,e.setInternalBufferSize=os,e.ObjectID=as,e.EJSON=ss,e}({})},96:e=>{var t={};!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){var n=t[a][1][e];return r(n||e)}),l,l.exports,e,t,n,i)}return n[a].exports}for(var o=void 0,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,n,i){t.uncompress=e("./index").uncompress,t.compress=e("./index").compress},{"./index":2}],2:[function(e,t,n){"use strict";function i(){return"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node}function r(e){return e instanceof Uint8Array&&(!i()||!Buffer.isBuffer(e))}function o(e){return e instanceof ArrayBuffer}function a(e){return!!i()&&Buffer.isBuffer(e)}var s=e("./snappy_decompressor").SnappyDecompressor,c=e("./snappy_compressor").SnappyCompressor,l="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";n.uncompress=function(e){if(!r(e)&&!o(e)&&!a(e))throw new TypeError(l);var t=!1,n=!1;r(e)?t=!0:o(e)&&(n=!0,e=new Uint8Array(e));var i,c,u=new s(e),d=u.readUncompressedLength();if(-1===d)throw new Error("Invalid Snappy bitstream");if(t){if(i=new Uint8Array(d),!u.uncompressToBuffer(i))throw new Error("Invalid Snappy bitstream")}else if(n){if(i=new ArrayBuffer(d),c=new Uint8Array(i),!u.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream")}else if(i=Buffer.alloc(d),!u.uncompressToBuffer(i))throw new Error("Invalid Snappy bitstream");return i},n.compress=function(e){if(!r(e)&&!o(e)&&!a(e))throw new TypeError(l);var t=!1,n=!1;r(e)?t=!0:o(e)&&(n=!0,e=new Uint8Array(e));var i,s,u,d=new c(e),h=d.maxCompressedLength();return t?(i=new Uint8Array(h),u=d.compressToBuffer(i)):n?(i=new ArrayBuffer(h),s=new Uint8Array(i),u=d.compressToBuffer(s)):(i=Buffer.alloc(h),u=d.compressToBuffer(i)),i.slice(0,u)}},{"./snappy_compressor":3,"./snappy_decompressor":4}],3:[function(e,t,n){"use strict";function i(e,t){return 506832829*e>>>t}function r(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function o(e,t,n){return e[t]===e[n]&&e[t+1]===e[n+1]&&e[t+2]===e[n+2]&&e[t+3]===e[n+3]}function a(e,t,n,i,r){return n<=60?(i[r]=n-1<<2,r+=1):n<256?(i[r]=240,i[r+1]=n-1,r+=2):(i[r]=244,i[r+1]=n-1&255,i[r+2]=n-1>>>8,r+=3),function(e,t,n,i,r){var o;for(o=0;o<r;o++)n[i+o]=e[t+o]}(e,t,i,r,n),r+n}function s(e,t,n,i){return i<12&&n<2048?(e[t]=1+(i-4<<2)+(n>>>8<<5),e[t+1]=255&n,t+2):(e[t]=2+(i-1<<2),e[t+1]=255&n,e[t+2]=n>>>8,t+3)}function c(e,t,n,i){for(;i>=68;)t=s(e,t,n,64),i-=64;return i>64&&(t=s(e,t,n,60),i-=60),s(e,t,n,i)}function l(e,t,n,s,l){for(var u=1;1<<u<=n&&u<=d;)u+=1;var p=32-(u-=1);void 0===h[u]&&(h[u]=new Uint16Array(1<<u));var f,g=h[u];for(f=0;f<g.length;f++)g[f]=0;var _,m,y,v,A,b,w,E,T,S,C=t+n,I=t,x=t,D=!0;if(n>=15)for(_=C-15,y=i(r(e,t+=1),p);D;){b=32,v=t;do{if(m=y,w=b>>>5,b+=1,v=(t=v)+w,t>_){D=!1;break}y=i(r(e,v),p),A=I+g[m],g[m]=t-I}while(!o(e,t,A));if(!D)break;l=a(e,x,t-x,s,l);do{for(E=t,T=4;t+T<C&&e[t+T]===e[A+T];)T+=1;if(t+=T,l=c(s,l,E-A,T),x=t,t>=_){D=!1;break}g[i(r(e,t-1),p)]=t-1-I,A=I+g[S=i(r(e,t),p)],g[S]=t-I}while(o(e,t,A));if(!D)break;y=i(r(e,t+=1),p)}return x<C&&(l=a(e,x,C-x,s,l)),l}function u(e){this.array=e}var d=14,h=new Array(d+1);u.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)},u.prototype.compressToBuffer=function(e){var t,n=this.array,i=n.length,r=0,o=0;for(o=function(e,t,n){do{t[n]=127&e,(e>>>=7)>0&&(t[n]+=128),n+=1}while(e>0);return n}(i,e,o);r<i;)o=l(n,r,t=Math.min(i-r,65536),e,o),r+=t;return o},n.SnappyCompressor=u},{}],4:[function(e,t,n){"use strict";function i(e,t,n,i,r){var o;for(o=0;o<r;o++)n[i+o]=e[t+o]}function r(e,t,n,i){var r;for(r=0;r<i;r++)e[t+r]=e[t-n+r]}function o(e){this.array=e,this.pos=0}var a=[0,255,65535,16777215,4294967295];o.prototype.readUncompressedLength=function(){for(var e,t,n=0,i=0;i<32&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,(t=127&e)<<i>>>i!==t)return-1;if(n|=t<<i,e<128)return n;i+=7}return-1},o.prototype.uncompressToBuffer=function(e){for(var t,n,o,s,c=this.array,l=c.length,u=this.pos,d=0;u<c.length;)if(t=c[u],u+=1,0==(3&t)){if((n=1+(t>>>2))>60){if(u+3>=l)return!1;o=n-60,n=1+((n=c[u]+(c[u+1]<<8)+(c[u+2]<<16)+(c[u+3]<<24))&a[o]),u+=o}if(u+n>l)return!1;i(c,u,e,d,n),u+=n,d+=n}else{switch(3&t){case 1:n=4+(t>>>2&7),s=c[u]+(t>>>5<<8),u+=1;break;case 2:if(u+1>=l)return!1;n=1+(t>>>2),s=c[u]+(c[u+1]<<8),u+=2;break;case 3:if(u+3>=l)return!1;n=1+(t>>>2),s=c[u]+(c[u+1]<<8)+(c[u+2]<<16)+(c[u+3]<<24),u+=4}if(0===s||s>d)return!1;r(e,d,s,n),d+=n}return!0},n.SnappyDecompressor=o},{}]},{},[1]),e.exports=t},737:(e,t,n)=>{"use strict";e.exports=n(536)},536:(e,t,n)=>{"use strict";var i=t;function r(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=n(123),i.BufferWriter=n(673),i.Reader=n(799),i.BufferReader=n(38),i.util=n(165),i.rpc=n(963),i.roots=n(9),i.configure=r,r()},799:(e,t,n)=>{"use strict";e.exports=c;var i,r=n(165),o=r.LongBits,a=r.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return r.Buffer?function(e){return(c.create=function(e){return r.Buffer.isBuffer(e)?new i(e):u(e)})(e)}:u};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){i=e,c.create=d(),i._configure();var t=r.Long?"toLong":"toNumber";r.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},38:(e,t,n)=>{"use strict";e.exports=o;var i=n(799);(o.prototype=Object.create(i.prototype)).constructor=o;var r=n(165);function o(e){i.call(this,e)}o._configure=function(){r.Buffer&&(o.prototype._slice=r.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},9:e=>{"use strict";e.exports={}},963:(e,t,n)=>{"use strict";t.Service=n(548)},548:(e,t,n)=>{"use strict";e.exports=r;var i=n(165);function r(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(r.prototype=Object.create(i.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,n,r,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return i.asPromise(e,s,t,n,r,o);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return s.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof r))try{n=r[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",n,t),a(null,n)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},697:(e,t,n)=>{"use strict";e.exports=r;var i=n(165);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(i.isString(e)){if(!i.Long)return r.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;r.fromHash=function(e){return e===a?o:new r((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},165:function(e,t,n){"use strict";var i=t;function r(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;++r)void 0!==e[i[r]]&&n||(e[i[r]]=t[i[r]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}i.asPromise=n(781),i.base64=n(26),i.EventEmitter=n(570),i.float=n(298),i.inquire=n(116),i.utf8=n(958),i.pool=n(804),i.LongBits=n(697),i.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),i.global=i.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"==typeof e||e instanceof String},i.isObject=function(e){return e&&"object"==typeof e},i.isset=i.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"==typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var n=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},i.merge=r,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=o,i.ProtocolError=o("ProtocolError"),i.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},i.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}},123:(e,t,n)=>{"use strict";e.exports=d;var i,r=n(165),o=r.LongBits,a=r.base64,s=r.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return r.Buffer?function(){return(d.create=function(){return new i})()}:function(){return new d}};function p(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function _(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=h(),d.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(d.alloc=r.pool(d.alloc,r.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(_,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(_,4,t.lo)._push(_,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var m=r.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(r.isString(e)){var n=d.alloc(t=a.length(e));a.decode(e,n,0),e=n}return this.uint32(t)._push(m,t,e)},d.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){i=e,d.create=h(),i._configure()}},673:(e,t,n)=>{"use strict";e.exports=o;var i=n(123);(o.prototype=Object.create(i.prototype)).constructor=o;var r=n(165);function o(){i.call(this)}function a(e,t,n){e.length<40?r.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=r._Buffer_allocUnsafe,o.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}},o.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=r.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},o._configure()}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";n.r(i),n.d(i,{DefaultCloud:()=>Fu,InstanceCloud:()=>Uu,getCloudAPI:()=>Bu,getCloudInstance:()=>Lu,getServiceMarketAPI:()=>dd});var e={};n.r(e),n.d(e,{GeoLineString:()=>fa,GeoMultiLineString:()=>_a,GeoMultiPoint:()=>ha,GeoMultiPolygon:()=>Aa,GeoPoint:()=>ua,GeoPolygon:()=>ya,LineString:()=>pa,MultiLineString:()=>ga,MultiPoint:()=>da,MultiPolygon:()=>va,Point:()=>la,Polygon:()=>ma,__safe_props__:()=>wa});var t={};n.r(t),n.d(t,{AggregateOperatorMap:()=>Yl,AggregateSerializer:()=>Ql,Decoder:()=>cu,OperatorMap:()=>Zl,ProjectionSerializer:()=>su,QuerySerializer:()=>Xl,UpdateSerializer:()=>ru,aggregateOperatorToString:()=>ql,decodeInternalDataType:()=>$a,encode:()=>Kl,encodeInternalDataType:()=>Ya,extractQueryOptions:()=>qa,flattenObject:()=>Ha,flattenQueryObject:()=>Va,getProjectionDefinition:()=>Ja,isConversionRequired:()=>Za,mergeConditionAfterEncode:()=>za,operatorToString:()=>$l});const r=BabelRuntimeHelpers.objectSpread2;var o=n.n(r);const a=BabelRuntimeHelpers.asyncToGenerator;var s=n.n(a);const c=function(){this.__data__=[],this.size=0};const l=function(e,t){return e===t||e!=e&&t!=t};const u=function(e,t){for(var n=e.length;n--;)if(l(e[n][0],t))return n;return-1};var d=Array.prototype.splice;const h=function(e){var t=this.__data__,n=u(t,e);return!(n<0)&&(n==t.length-1?t.pop():d.call(t,n,1),--this.size,!0)};const p=function(e){var t=this.__data__,n=u(t,e);return n<0?void 0:t[n][1]};const f=function(e){return u(this.__data__,e)>-1};const g=function(e,t){var n=this.__data__,i=u(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};function _(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}_.prototype.clear=c,_.prototype.delete=h,_.prototype.get=p,_.prototype.has=f,_.prototype.set=g;const m=_;const y=function(){this.__data__=new m,this.size=0};const v=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const A=function(e){return this.__data__.get(e)};const b=function(e){return this.__data__.has(e)};const w="object"==typeof global&&global&&global.Object===Object&&global;var E="object"==typeof self&&self&&self.Object===Object&&self;const T=w||E||Function("return this")();const S=T.Symbol;var C=Object.prototype,I=C.hasOwnProperty,x=C.toString,D=S?S.toStringTag:void 0;const O=function(e){var t=I.call(e,D),n=e[D];try{e[D]=void 0;var i=!0}catch(e){}var r=x.call(e);return i&&(t?e[D]=n:delete e[D]),r};var P=Object.prototype.toString;const R=function(e){return P.call(e)};var k=S?S.toStringTag:void 0;const N=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":k&&k in Object(e)?O(e):R(e)};const M=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const L=function(e){if(!M(e))return!1;var t=N(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const B=T["__core-js_shared__"];var F,U=(F=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"";const W=function(e){return!!U&&U in e};var j=Function.prototype.toString;const G=function(e){if(null!=e){try{return j.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var V=/^\[object .+?Constructor\]$/,H=Function.prototype,z=Object.prototype,Z=H.toString,Y=z.hasOwnProperty,$=RegExp("^"+Z.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const q=function(e){return!(!M(e)||W(e))&&(L(e)?$:V).test(G(e))};const Q=function(e,t){return null==e?void 0:e[t]};const J=function(e,t){var n=Q(e,t);return q(n)?n:void 0};const X=J(T,"Map");const K=J(Object,"create");const ee=function(){this.__data__=K?K(null):{},this.size=0};const te=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var ne=Object.prototype.hasOwnProperty;const ie=function(e){var t=this.__data__;if(K){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ne.call(t,e)?t[e]:void 0};var re=Object.prototype.hasOwnProperty;const oe=function(e){var t=this.__data__;return K?void 0!==t[e]:re.call(t,e)};const ae=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=K&&void 0===t?"__lodash_hash_undefined__":t,this};function se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}se.prototype.clear=ee,se.prototype.delete=te,se.prototype.get=ie,se.prototype.has=oe,se.prototype.set=ae;const ce=se;const le=function(){this.size=0,this.__data__={hash:new ce,map:new(X||m),string:new ce}};const ue=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const de=function(e,t){var n=e.__data__;return ue(t)?n["string"==typeof t?"string":"hash"]:n.map};const he=function(e){var t=de(this,e).delete(e);return this.size-=t?1:0,t};const pe=function(e){return de(this,e).get(e)};const fe=function(e){return de(this,e).has(e)};const ge=function(e,t){var n=de(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};function _e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}_e.prototype.clear=le,_e.prototype.delete=he,_e.prototype.get=pe,_e.prototype.has=fe,_e.prototype.set=ge;const me=_e;const ye=function(e,t){var n=this.__data__;if(n instanceof m){var i=n.__data__;if(!X||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new me(i)}return n.set(e,t),this.size=n.size,this};function ve(e){var t=this.__data__=new m(e);this.size=t.size}ve.prototype.clear=y,ve.prototype.delete=v,ve.prototype.get=A,ve.prototype.has=b,ve.prototype.set=ye;const Ae=ve;const be=function(){try{var e=J(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();const we=function(e,t,n){"__proto__"==t&&be?be(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};const Ee=function(e,t,n){(void 0!==n&&!l(e[t],n)||void 0===n&&!(t in e))&&we(e,t,n)};const Te=function(e){return function(t,n,i){for(var r=-1,o=Object(t),a=i(t),s=a.length;s--;){var c=a[e?s:++r];if(!1===n(o[c],c,o))break}return t}}();var Se="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ce=Se&&"object"==typeof module&&module&&!module.nodeType&&module,Ie=Ce&&Ce.exports===Se?T.Buffer:void 0,xe=Ie?Ie.allocUnsafe:void 0;const De=function(e,t){if(t)return e.slice();var n=e.length,i=xe?xe(n):new e.constructor(n);return e.copy(i),i};const Oe=T.Uint8Array;const Pe=function(e){var t=new e.constructor(e.byteLength);return new Oe(t).set(new Oe(e)),t};const Re=function(e,t){var n=t?Pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const ke=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t};var Ne=Object.create;const Me=function(){function e(){}return function(t){if(!M(t))return{};if(Ne)return Ne(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Le=function(e,t){return function(n){return e(t(n))}};const Be=Le(Object.getPrototypeOf,Object);var Fe=Object.prototype;const Ue=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Fe)};const We=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:Me(Be(e))};const je=function(e){return null!=e&&"object"==typeof e};const Ge=function(e){return je(e)&&"[object Arguments]"==N(e)};var Ve=Object.prototype,He=Ve.hasOwnProperty,ze=Ve.propertyIsEnumerable;const Ze=Ge(function(){return arguments}())?Ge:function(e){return je(e)&&He.call(e,"callee")&&!ze.call(e,"callee")};const Ye=Array.isArray;const $e=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};const qe=function(e){return null!=e&&$e(e.length)&&!L(e)};const Qe=function(e){return je(e)&&qe(e)};const Je=function(){return!1};var Xe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ke=Xe&&"object"==typeof module&&module&&!module.nodeType&&module,et=Ke&&Ke.exports===Xe?T.Buffer:void 0;const tt=(et?et.isBuffer:void 0)||Je;var nt=Function.prototype,it=Object.prototype,rt=nt.toString,ot=it.hasOwnProperty,at=rt.call(Object);const st=function(e){if(!je(e)||"[object Object]"!=N(e))return!1;var t=Be(e);if(null===t)return!0;var n=ot.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&rt.call(n)==at};var ct={};ct["[object Float32Array]"]=ct["[object Float64Array]"]=ct["[object Int8Array]"]=ct["[object Int16Array]"]=ct["[object Int32Array]"]=ct["[object Uint8Array]"]=ct["[object Uint8ClampedArray]"]=ct["[object Uint16Array]"]=ct["[object Uint32Array]"]=!0,ct["[object Arguments]"]=ct["[object Array]"]=ct["[object ArrayBuffer]"]=ct["[object Boolean]"]=ct["[object DataView]"]=ct["[object Date]"]=ct["[object Error]"]=ct["[object Function]"]=ct["[object Map]"]=ct["[object Number]"]=ct["[object Object]"]=ct["[object RegExp]"]=ct["[object Set]"]=ct["[object String]"]=ct["[object WeakMap]"]=!1;const lt=function(e){return je(e)&&$e(e.length)&&!!ct[N(e)]};const ut=function(e){return function(t){return e(t)}};var dt="object"==typeof exports&&exports&&!exports.nodeType&&exports,ht=dt&&"object"==typeof module&&module&&!module.nodeType&&module,pt=ht&&ht.exports===dt&&w.process;const ft=function(){try{var e=ht&&ht.require&&ht.require("util").types;return e||pt&&pt.binding&&pt.binding("util")}catch(e){}}();var gt=ft&&ft.isTypedArray;const _t=gt?ut(gt):lt;const mt=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var yt=Object.prototype.hasOwnProperty;const vt=function(e,t,n){var i=e[t];yt.call(e,t)&&l(i,n)&&(void 0!==n||t in e)||we(e,t,n)};const At=function(e,t,n,i){var r=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=i?i(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),r?we(n,s,c):vt(n,s,c)}return n};const bt=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i};var wt=/^(?:0|[1-9]\d*)$/;const Et=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&wt.test(e))&&e>-1&&e%1==0&&e<t};var Tt=Object.prototype.hasOwnProperty;const St=function(e,t){var n=Ye(e),i=!n&&Ze(e),r=!n&&!i&&tt(e),o=!n&&!i&&!r&&_t(e),a=n||i||r||o,s=a?bt(e.length,String):[],c=s.length;for(var l in e)!t&&!Tt.call(e,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Et(l,c))||s.push(l);return s};const Ct=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var It=Object.prototype.hasOwnProperty;const xt=function(e){if(!M(e))return Ct(e);var t=Ue(e),n=[];for(var i in e)("constructor"!=i||!t&&It.call(e,i))&&n.push(i);return n};const Dt=function(e){return qe(e)?St(e,!0):xt(e)};const Ot=function(e){return At(e,Dt(e))};const Pt=function(e,t,n,i,r,o,a){var s=mt(e,n),c=mt(t,n),l=a.get(c);if(l)Ee(e,n,l);else{var u=o?o(s,c,n+"",e,t,a):void 0,d=void 0===u;if(d){var h=Ye(c),p=!h&&tt(c),f=!h&&!p&&_t(c);u=c,h||p||f?Ye(s)?u=s:Qe(s)?u=ke(s):p?(d=!1,u=De(c,!0)):f?(d=!1,u=Re(c,!0)):u=[]:st(c)||Ze(c)?(u=s,Ze(s)?u=Ot(s):M(s)&&!L(s)||(u=We(c))):d=!1}d&&(a.set(c,u),r(u,c,i,o,a),a.delete(c)),Ee(e,n,u)}};const Rt=function e(t,n,i,r,o){t!==n&&Te(n,(function(a,s){if(o||(o=new Ae),M(a))Pt(t,n,s,i,e,r,o);else{var c=r?r(mt(t,s),a,s+"",t,n,o):void 0;void 0===c&&(c=a),Ee(t,s,c)}}),Dt)};const kt=function(e){return e};const Nt=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Mt=Math.max;const Lt=function(e,t,n){return t=Mt(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,o=Mt(i.length-t,0),a=Array(o);++r<o;)a[r]=i[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=i[r];return s[t]=n(a),Nt(e,this,s)}};const Bt=function(e){return function(){return e}};const Ft=be?function(e,t){return be(e,"toString",{configurable:!0,enumerable:!1,value:Bt(t),writable:!0})}:kt;var Ut=Date.now;const Wt=function(e){var t=0,n=0;return function(){var i=Ut(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ft);const jt=function(e,t){return Wt(Lt(e,t,kt),e+"")};const Gt=function(e,t,n){if(!M(n))return!1;var i=typeof t;return!!("number"==i?qe(n)&&Et(t,n.length):"string"==i&&t in n)&&l(n[t],e)};const Vt=function(e){return jt((function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(r--,o):void 0,a&&Gt(n[0],n[1],a)&&(o=r<3?void 0:o,r=1),t=Object(t);++i<r;){var s=n[i];s&&e(t,s,i,o)}return t}))}((function(e,t,n){Rt(e,t,n)})),Ht=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),zt=e=>"object"===Ht(e),Zt=e=>"string"===Ht(e),Yt=e=>"number"===Ht(e),$t=e=>"function"==typeof e,qt=e=>Array.isArray(e),Qt=e=>"date"===Ht(e),Jt=e=>"regexp"===Ht(e),Xt=e=>e&&"symbol"===Ht(e._internalType),Kt={"-1":"",UNKNOWN_ERROR:-1,"-401001":"api permission denied",SDK_API_PERMISSION_DENIED:-401001,"-401002":"api parameter error",SDK_API_PARAMETER_ERROR:-401002,"-401003":"api parameter type error",SDK_API_PARAMETER_TYPE_ERROR:-401003,"-402001":"circular reference detected",SDK_DATABASE_CIRCULAR_REFERENCE:-402001,"-402002":"realtime listener init watch fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:-402002,"-402003":"realtime listener reconnect ws fail",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL:-402003,"-402004":"realtime listener rebuild watch fail",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:-402004,"-402005":"realtime listener close watch fail",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:-402005,"-402006":"realtime listener receive server error msg",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:-402006,"-402007":"realtime listener receive invalid server data",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:-402007,"-402008":"realtime listener websocket connection error",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:-402008,"-402009":"realtime listener websocket connection closed",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:-402009,"-402010":"realtime listener check last fail",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:-402010,"-402011":"realtime listener unexpected fatal error",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:-402011,"-402012":"realtime listener init ws fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL:-402012,"-403001":"max upload file size exceeded",SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE:-403001,"-403002":"internal server error: empty upload url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL:-403002,"-403003":"internal server error: empty download url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL:-403003,"-404001":"empty call result",SDK_FUNCTIONS_EMPTY_CALL_RESULT:-404001,"-404002":"empty event id",SDK_FUNCTIONS_EMPTY_EVENT_ID:-404002,"-404003":"empty poll url",SDK_FUNCTIONS_EMPTY_POLL_URL:-404003,"-404004":"empty poll result json",SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON:-404004,"-404005":"exceed max poll retry",SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY:-404005,"-404006":"empty poll result base resp",SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP:-404006,"-404007":"poll result base resp ret abnormal",SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-404007,"-404008":"poll result status code error",SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR:-404008,"-404009":"poll error",SDK_FUNCTIONS_POLL_ERROR:-404009,"-404010":"result expired",SDK_FUNCTIONS_POLL_RESULT_EXPIRED:-404010,"-404011":"cloud function execution error",SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR:-404011,"-404012":"polling exceed max timeout retry",SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY:-404012,"-404013":"polling exceed max system error retry",SDK_FUNCTIONS_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-404013,"-405001":"empty call result",SDK_CONTAINER_EMPTY_CALL_RESULT:-405001,"-405002":"empty event id",SDK_CONTAINER_EMPTY_EVENT_ID:-405002,"-405003":"empty poll url",SDK_CONTAINER_EMPTY_POLL_URL:-405003,"-405004":"empty poll result json",SDK_CONTAINER_EMPTY_POLL_RESULT_JSON:-405004,"-405005":"exceed max poll retry",SDK_CONTAINER_EXCEED_MAX_POLL_RETRY:-405005,"-405006":"empty poll result base resp",SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP:-405006,"-405007":"poll result base resp ret abnormal",SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-405007,"-405008":"poll result status code error",SDK_CONTAINER_POLL_RESULT_STATUS_CODE_ERROR:-405008,"-405009":"poll error",SDK_CONTAINER_POLL_ERROR:-405009,"-405010":"result expired",SDK_CONTAINER_POLL_RESULT_EXPIRED:-405010,"-405012":"polling exceed max timeout retry",SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY:-405012,"-405013":"polling exceed max system error retry",SDK_CONTAINER_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-405013,"-405014":"cannot download result (cdn)",SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL:-405014,"-601001":"system error",WX_SYSTEM_ERROR:-601001,"-601002":"system args error",WX_SYSTEM_ARGS_ERROR:-601002,"-601003":"system network error",WX_SYSTEM_NETWORK_ERROR:-601003,"-601004":"api permission denied",WX_API_PERMISSION_DENIED:-601004,"-601005":"invalid cloudID",WX_INVALID_CLOUDID:-601005,"-601006":"cloudID expired",WX_CLOUDID_EXPIRED:-601006,"-601007":"cloudID and calling user does not match",WX_CLOUDID_USER_NOT_MATCH:-601007,"-601008":"server-side request timedout",WX_SERVER_REQUEST_TIMEOUT:-601008,"-601009":"missing mobile phone",WX_MISSING_MOBILE_PHONE:-601009,"-601010":"no write permission",WX_NO_WRITE_PERMISSION:-601010,"-601011":"no privilege permission",WX_NO_PRIVILEGE_PERMISSION:-601011,"-601012":"unauthorized env",WX_UNAUTHORIZED_ENV:-601012,"-601013":"no multiend permission",WX_NO_MULTIEND_PERMISSION:-601013,"-601015":"access denied (cloudfunction cloudbase_auth returns empty errCode)",WX_CLOUDBASE_AUTH_RETURN_EMPTY_ERRCODE:-601015,"-601016":"missing env auth info",WX_MISSING_ENV_AUTH_INFO:-601016,"-601017":"access denied (cloudbase_auth returns non-zero errCode)",WX_CLOUDBASE_AUTH_RETURN_NON_ZERO_ERRCODE:-601017,"-602018":"unauthorized API",WX_UNAUTHORIZED_API:-601018,"-602001":"database query result size exceed limit (1MB)",WX_DATABASE_QUERY_SIZE_EXCEED_LIMIT:-602001,"-604001":"cloudfunction result size exceed limit (1MB)",WX_CLOUDFUNCTION_RESULT_SIZE_EXCEED_LIMIT:-604001,"-501001":"resource system error",TCB_RESOURCE_SYSTEM_ERROR:-501001,"-501002":"resource server timeout",TCB_RESOURCE_SERVER_TIMEOUT:-501002,"-501003":"exceed request limit",TCB_EXCEED_REQUEST_LIMIT:-501003,"-501004":"exceed concurrent request limit",TCB_EXCEED_CONCURRENT_REQUEST_LIMIT:-501004,"-501005":"invalid env",TCB_INVALID_ENV:-501005,"-501006":"invalid common parameters",TCB_INVALID_COMMON_PARAM:-501006,"-501007":"invalid parameters",TCB_INVALID_PARAM:-501007,"-501008":"invalid request source",TCB_INVALID_REQUEST_SOURCE:-501008,"-501009":"resource not initialized",TCB_RESOURCE_NOT_INITIALIZED:-501009,"-501010":"tencentcloud key signature verification fail",TCB_KEY_SIGNATURE_VERIFICATION_FAIL:-501010,"-501011":"invalid env status",TCB_INVALID_ENV_STATUS:-501011,"-501012":"invalid api name",TCB_INVALID_API_NAME:-501012,"-501013":"request data size exceeds limit (5M)",TCB_REQ_DATA_EXCEED_LIMIT_5M:-501013,"-501014":"upload file size exceeds limit (5M)",TCB_UPLOAD_FILE_SIZE_EXCEED_LIMIT_5M:-501014,"-501023":"permission denied",TCB_PERMISSION_DENIED:-501023,"-502001":"database request fail",TCB_DB_REQUEST_FAIL:-502001,"-502002":"database invalid command",TCB_DB_INVALID_COMMAND:-502002,"-502003":"database permission denied",TCB_DB_PERMISSION_DENIED:-502003,"-502004":"database exceed collection limit",TCB_DB_EXCEED_COLLECTION_LIMIT:-502004,"-502005":"database collection not exists",TCB_DB_COLLECTION_NOT_EXISTS:-502005,"-503001":"storage request fail",TCB_STORAGE_REQUEST_FAIL:-503001,"-503002":"storage permission denied",TCB_STORAGE_PERMISSION_DENIED:-503002,"-503003":"storage file not exists",TCB_STORAGE_FILE_NOT_EXISTS:-503003,"-503004":"storage invalid sign parameter",TCB_STORAGE_INVALID_SIGN_PARAM:-503004,"-504001":"functions request fail",TCB_FUNCTIONS_REQUEST_FAIL:-504001,"-504002":"functions execute fail",TCB_FUNCTIONS_EXEC_FAIL:-504002};class en extends Error{constructor(e){super(e.errMsg),this.errCode=-1,this.errMsg=void 0,this.requestID=void 0,Object.defineProperties(this,{message:{get(){return`errCode: ${this.errCode} ${Kt[this.errCode]||""} | errMsg: `+this.errMsg},set(e){this.errMsg=e}}}),this.errCode=e.errCode||-1,this.errMsg=e.errMsg}get message(){return`errCode: ${this.errCode} | errMsg: `+this.errMsg}set message(e){this.errMsg=e}}function tn(e){return e&&e instanceof Error&&Zt(e.errMsg)}function nn(e,t){return rn(e,t)}function rn(e,t){if(e){if(tn(e))return e;const n=`${t}:fail `;let i;if(e instanceof Error)e.message=`${n}${e.message}`,e.stack=e.stack?e.stack.slice(0,7)+n+e.stack.slice(7):e.stack,i=e,i.errCode=-1;else if("string"==typeof e)i=new Error(`${n}${e}`),i.errCode=-1;else{const n=e.errMsg||"";i=new Error(`${t}:fail ${e.errCode} ${Kt[e.errCode]||""}. ${n}`),i.errCode=e.errCode||-1}return i.errMsg=i.message+"",i}const n=new Error(`${t}:fail`);return n.errCode=-1,n.errMsg=n.message+"",n}class on extends Error{constructor(e,t){super(e),this.type="timeout",this.payload=void 0,this.generic=!0,this.payload=t}}const an=e=>"timeout"===e.type;class sn extends Error{constructor(e,t){super(e),this.type="cancelled",this.payload=void 0,this.generic=!0,this.payload=t}}const cn=e=>"cancelled"===e.type;let ln;const un={surroundThirdByTryCatch:(e,t)=>function(...n){return mn((()=>{try{return e.apply(e,n)}catch(n){throw console.error(JSON.stringify(n)+`; ${t}\n`+n.stack),console.error(e.toString()),n}}),t)},reportIDKey:(...e)=>{},reportIDKeyDirectly:(...e)=>{},reportKeyValue:(...e)=>{}};let dn=!1,hn=10;function pn(){try{return dn?Reporter:(hn<=0||(hn--,Reporter.surroundThirdByTryCatch,ln=Reporter,dn=!0),ln)}catch(e){return ln=un,ln}}const fn=(e,t)=>pn().surroundThirdByTryCatch(e,t),gn=e=>pn().reportIDKeyDirectly(e),_n=e=>pn().reportKeyValue(e);function mn(e,t=""){try{return e()}catch(e){if(tn(e))return e.errMsg+=t,e;const n=(e?e.toString():"")+t;return new en({errMsg:n})}}function yn(e,t=""){return function(...n){return mn((()=>e.apply(e,n)),t)}}function vn(e){const t=e.param;t&&(t.success&&$t(t.success)&&(t.success=fn(t.success,`at api ${e.apiName} success callback function`)),t.fail&&$t(t.fail)&&(t.fail=fn(t.fail,`at api ${e.apiName} fail callback function`)),t.complete&&$t(t.complete)&&(t.complete=fn(t.complete,`at api ${e.apiName} complete callback function`)))}function An(e,t,n){if(t.complete&&$t(t.complete)){yn(t.complete,`at api ${e} complete callback function;`)(n)}}function bn(e,t,n){!function(e,t,n){t.success&&$t(t.success)&&yn(t.success,`at api ${e} success callback function;`)(n)}(e,t,n),An(e,t,n)}function wn(e,t,n){!function(e,t,n){t.fail&&$t(t.fail)&&yn(t.fail,`at api ${e} fail callback function;`)(n)}(e,t,n),An(e,t,n)}function En(e){return e&&(e.success||e.fail||e.complete)}function Tn(e,t,n="parameter",i=en){const r=function(e,t,n="parameter"){const i=function e(t,n,i){const r=Ht(t),o=Ht(n);if("string"===o)return r!==n?`${i} should be ${n} instead of ${r};`:"";{if(r!==o)return`${i} should be ${o} instead of ${r}; `;let a="";switch(r){case"object":for(const r in n)a+=e(t[r],n[r],`${i}.${r}`);break;case"array":for(let r=0;r<n.length;r++)a+=e(t[r],n[r],`${i}[${r}]`)}return a}}(e,t,n);return{passed:!i,reason:i}}(e,t,n);if(!r.passed)throw new i({errCode:Kt.SDK_API_PARAMETER_TYPE_ERROR,errMsg:r.reason})}function Sn(e,t,n,i=en){if(null==e)throw new i({errCode:Kt.SDK_API_PARAMETER_ERROR,errMsg:`parameter ${t} of function ${n} must be provided`})}function Cn({name:e,input:t,max:n,maxWording:i="",ErrorClass:r=en}){if(t.length>n)throw new r({errCode:Kt.SDK_API_PARAMETER_ERROR,errMsg:`${e} size must be less than ${i||n}`})}function In({target:e,name:t,ErrorClass:n=en}){if(0===Object.keys(e).length)throw new n({errCode:Kt.SDK_API_PARAMETER_ERROR,errMsg:`${t} must not be empty`})}function xn(e,t=!1){if(t)return function(e){switch(Ht(e)){case"object":return o()({},e);case"array":return e.slice();case"number":return e instanceof Number?new Number(e):e;case"string":return e instanceof String?new String(e):e;case"boolean":return e instanceof Boolean?new Boolean(e):e;case"date":return new e.constructor(+e);case"map":return new Map(e);case"set":return new Set(e);default:return e}}(e);if((e=>{if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t})(e))return o()({},e);switch(Ht(e)){case"object":return e;case"array":return e.slice();default:return e}}const Dn=new WeakMap;let On;function Pn(){var e;return null!==(e=On)&&void 0!==e?e:void 0!==__appServiceSDK__?__appServiceSDK__:void 0}const Rn=e=>{if(!e)return Pn();const t=Dn.get(e);return t&&t||Pn()};const kn=function(){return T.Date.now()};var Nn=/\s/;const Mn=function(e){for(var t=e.length;t--&&Nn.test(e.charAt(t)););return t};var Ln=/^\s+/;const Bn=function(e){return e?e.slice(0,Mn(e)+1).replace(Ln,""):e};const Fn=function(e){return"symbol"==typeof e||je(e)&&"[object Symbol]"==N(e)};var Un=/^[-+]0x[0-9a-f]+$/i,Wn=/^0b[01]+$/i,jn=/^0o[0-7]+$/i,Gn=parseInt;const Vn=function(e){if("number"==typeof e)return e;if(Fn(e))return NaN;if(M(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=M(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Bn(e);var n=Wn.test(e);return n||jn.test(e)?Gn(e.slice(2),n?2:8):Un.test(e)?NaN:+e};var Hn=Math.max,zn=Math.min;const Zn=function(e,t,n){var i,r,o,a,s,c,l=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,o=r;return i=r=void 0,l=t,a=e.apply(o,n)}function f(e){return l=e,s=setTimeout(_,t),u?p(e):a}function g(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function _(){var e=kn();if(g(e))return m(e);s=setTimeout(_,function(e){var n=t-(e-c);return d?zn(n,o-(e-l)):n}(e))}function m(e){return s=void 0,h&&i?p(e):(i=r=void 0,a)}function y(){var e=kn(),n=g(e);if(i=arguments,r=this,c=e,n){if(void 0===s)return f(c);if(d)return clearTimeout(s),s=setTimeout(_,t),p(c)}return void 0===s&&(s=setTimeout(_,t)),a}return t=Vn(t)||0,M(n)&&(u=!!n.leading,o=(d="maxWait"in n)?Hn(Vn(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,i=c=r=s=void 0},y.flush=function(){return void 0===s?a:m(kn())},y};let Yn=!1,$n=[],qn="unknown";const Qn=()=>{for(const e of $n)try{e()}catch(e){0}$n=[]},Jn=e=>{setTimeout((()=>{try{if(!(e=>!(e.tunnelStartTime&&e.tunnelEndTime&&e.tunnelEndTime<e.tunnelStartTime||!(e.apiStartTime&&e.apiEndTime&&e.apiEndTime>e.apiStartTime)))(e))return;if(!Yn&&$n.length<100)return void $n.push(Jn.bind(null,e));const t=e.apiEndTime-e.apiStartTime,n=e.tunnelEndTime?e.tunnelEndTime-e.tunnelStartTime:0,i=[0,e.apiName,t,n,(e.pollStartTime&&e.pollEndTime&&e.pollEndTime>e.pollStartTime?e.pollEndTime-e.pollStartTime:0)||0,qn,e.tunnelTimeNoCSNetCost?t-e.tunnelTimeNoCSNetCost:0,e.tunnelTimeNoCSNetCost?n-e.tunnelTimeNoCSNetCost:0,e.funcExecTime?e.funcExecTime:0];_n({key:"CloudReport",value:i.join(","),force:!0})}catch(e){}}))},Xn=(e,t,n,i)=>{gn({id:e,key:t,force:n,immediately:i})};let Kn;let ei=[];const ti=(e,t,n)=>{ei.push({log_id:e,version:t,user_log_list:n}),Kn&&ni()},ni=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return M(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Zn(e,t,{leading:i,maxWait:t,trailing:r})}((()=>{Rn()._requestSkipCheckDomain({url:`https://servicewechat.com/wxa-qbase/report?token=${Kn}`,method:"POST",header:{},enableHttp2:!0,data:JSON.stringify({report_info_list:ei})}),ei=[]}),3e4),ii=(e,t)=>{const n=$t(e);function i(...i){if(t.samplePicker&&!t.samplePicker.next())return n?e.apply(this,i):e;const o=Date.now();let a=!0;try{if(t.condition&&t.condition.emptyKey&&t.timing[t.startKey])return n?e.apply(this,i):e;let s;if(n){const t=e.apply(this,i);if("promise"!==Ht(t))return a=!1,t;s=t}else s=e;return s.then((()=>r(o))).catch((()=>r(o))),s}catch(e){throw a=!1,e}finally{a||r(o)}}function r(e){t.timing[t.startKey]=e,t.timing[t.endKey]=Date.now(),t.autoReport&&Jn(o()(o()({},t.timing),{},{apiName:t.autoReport}))}return n?i:i()},ri=(oi=10,ai=!0,function*(){const e=()=>parseInt(Math.round(2*Math.random()*oi),10);let t=ai?0:e();for(;;)t>0?(t--,yield!1):(t=e(),yield!0)})();var oi,ai;function si(e){return`${e}:ok`}function ci(e,t){return JSON.stringify(e,((e,n)=>{if(t&&t.has(n))return t.get(n);switch(Ht(n)){case"arraybuffer":return{type:"Buffer",data:[...new Uint8Array(n)]}}return n}))}function li(e){return ui(JSON.parse(e))}function ui(e){switch(Ht(e)){case"object":return di(e);case"array":return e.map(ui);default:return e}}function di(e){const t=e,n=hi(t);if(t!==n)return n;for(const e in t){const n=t[e];switch(Ht(n)){case"object":{const i=hi(n);t[e]=i!==n?i:di(t[e]);break}case"array":{const i=ui(n);i!==n&&(t[e]=i);break}default:continue}}return t}function hi(e){for(const t in e)switch(t){case"type":switch(e.type){case"Buffer":if(qt(e.data)&&Yt(e.data[0]))try{return new Uint8Array(e.data).buffer}catch(t){return e}}}return e}const pi=Symbol.for("CLOUD_ID"),fi=Symbol("CDN");function gi(e){const t=[];for(const n in e)zt(e[n])&&e[n]._internalType===pi&&t.push({key:n,cloudID:e[n].cloudID});return t}const _i=(e=0)=>new Promise((t=>setTimeout(t,e)));let mi,yi=!1;const vi=[],Ai=()=>new Promise(((e,t)=>{if(mi)e(mi);else{0;try{Rn().wx.getNetworkType({success:t=>{mi={networkType:t.networkType,isConnected:"none"!==t.networkType},e(mi),yi||(Rn().wx.onNetworkStatusChange((e=>{if(mi.networkType=e.networkType,mi.isConnected=e.isConnected,e.isConnected&&vi.length)for(;vi.length;)try{vi.shift()()}catch(e){}})),yi=!0)},fail:t})}catch(e){t(e)}}}));let bi,wi=!1;const Ei=new Set;function Ti(e){Rn().wx.onAppShow&&(wi||(!function(){const e=Rn().wx;e.onAppShow&&e.onAppHide&&(e.onAppShow((()=>{bi="visible";for(const e of Ei)try{e("show")}catch(e){0}})),e.onAppHide((()=>{bi="hidden";for(const e of Ei)try{e("hide")}catch(e){0}})))}(),wi=!0),Ei.size>50&&Ei.clear(),Ei.add(e))}function Si(e){Ei.delete(e)}let Ci;function Ii(){if(Ci)return Ci;const e=Rn().wx;return Ci=e.getSystemInfoSync(),Ci}function xi(e){try{return JSON.parse(e)}catch(t){return e}}const Di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Oi(e){let t="";const n=new Uint8Array(e),i=n.byteLength;for(let e=0;e<i;e++)t+=String.fromCharCode(n[e]);return function(e){const t=String(e);let n="";for(let e,i,r=0,o=Di;t.charAt(0|r)||(o="=",r%1);n+=o.charAt(63&e>>8-r%1*8)){if(i=t.charCodeAt(r+=3/4),i>255)throw new Error('"btoa" failed');e=e<<8|i}return n}(t)}function Pi(e){const t=function(e){const t=String(e).replace(/=+$/,"");let n="";if(t.length%4==1)throw new Error('"atob" failed');for(let e,i,r=0,o=0;i=t.charAt(o++);~i&&(e=r%4?64*e+i:i,r++%4)?n+=String.fromCharCode(255&e>>(-2*r&6)):0)i=Di.indexOf(i);return n}(e),n=t.length,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=t.charCodeAt(e);return i.buffer}function Ri(e){return Ni(new Uint8Array(e))}function ki(e){return function(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&e.charCodeAt(n)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(t)}(e).buffer}const Ni=function(){let e=new Array(128),t=String.fromCodePoint||String.fromCharCode,n=[];return function(i){var r,o,a=i.length;n.length=0;for(var s=0;s<a;)(o=i[s++])<=127?r=o:o<=223?r=(31&o)<<6|63&i[s++]:o<=239?r=(15&o)<<12|(63&i[s++])<<6|63&i[s++]:String.fromCodePoint?r=(7&o)<<18|(63&i[s++])<<12|(63&i[s++])<<6|63&i[s++]:(r=63,s+=3),n.push(e[r]||(e[r]=t(r)));return n.join("")}}();let Mi;try{__wxConfig.platform,Mi=o()({},__wxConfig),__wxConfig.onReady((()=>{Mi=Object.assign(Mi,__wxConfig)}))}catch(e){Mi={platform:"ios",appLaunchInfo:{mode:""},onReady:e=>{setTimeout((()=>{e()}))}}}const Li=Mi,Bi=()=>"devtools"===Mi.platform,Fi=2e4,Ui=e=>{const t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},Wi=e=>e.join("->");function ji(e){return function(){var t=s()((function*(t){const n=o()({},t.data),i=gi(n).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(i.length)for(const e of i)delete n[e.key_name];const r=ci(n,yield t.cdnMapPromise);Cn({input:r,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});const a=`${+new Date}-${Math.random()}`;t.context.tunnelStartTime=+new Date;const{result:c,requestID:l}=yield function(e,t,n,i){return u.apply(this,arguments)}(t,r,i,a);return t.context.tunnelEndTime=+new Date,{errMsg:si(Qi),result:c,requestID:l};function u(){return(u=s()((function*(t,n,i,r){return new Promise(((o,a)=>{const s=[Ui("start")],{resolve:c,reject:l}=p(s,o,a);d({param:t,functionName:t.name,data:n,cloudIDList:i,callID:r,action:Yi.CALL,scene:$i.INITIATE_CALL,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,trace:s,resolve:c,reject:l})}))}))).apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return(h=s()((function*(n){const{functionName:r,data:a,callID:c,action:l,scene:u,tryCount:h,trace:p,systemErrorRetry:f,timeoutErrorRetry:g,resolve:_,reject:m}=n,y=l===Yi.CALL&&Bi()?t.localDebugNoTimeout:void 0,v=ci({function_name:r,data:l===Yi.CALL?a:void 0,action:l,scene:u,call_id:c,cloudid_list:l===Yi.CALL?i:[],local_debug_no_timeout:y});let A=!1,b=!1;const w=()=>{clearTimeout(T),b=!0},E=+new Date,T=y?void 0:setTimeout(s()((function*(){const t=e.appConfig.clientPollTimeout||Fi;if(!(+new Date-E>t&&(yield _i(),b))){if(!Bi()&&+new Date-E>e.appConfig.maxStartRetryGap)return p.push(Ui("timeout, exceed max retry gap")),m(rn({errCode:Kt.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${c}) (trace: ${Wi(p)})`},Qi));A=!0,n.timeoutErrorRetry>0?(p.push(Ui("timeout, retry")),d(o()(o()({},n),{},{scene:$i.TIMEOUT_RETRY,tryCount:h-1,timeoutErrorRetry:g-1}))):(p.push(Ui("timeout, abort")),m(rn({errCode:Kt.SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${c}) (trace: ${Wi(p)})`},Qi)))}})),e.appConfig.clientPollTimeout||Fi);e.request(o()(o()({},t.config),{},{apiName:"tcbapi_slowcallfunction_v2",serviceName:e.name,serializedReqData:v,env:t.config&&t.config.env||e.env})).then((function(e){try{if(A)return;w(),(e=>{const n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&(n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time),n.baseresponse.stat.func_exec_cost_time&&(t.context.funcExecTime=n.baseresponse.stat.func_exec_cost_time))})(e);const i=e.data;if(!i)return p.push(Ui("empty resp")),m(rn({errCode:Kt.SDK_FUNCTIONS_EMPTY_CALL_RESULT},Qi));if(!i.baseresponse||0!==i.baseresponse.errcode)return i.baseresponse?0!==i.baseresponse.errcode?m(rn({errCode:Kt.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${i.baseresponse.errcode} errmsg ${i.baseresponse.errmsg} (callId: ${c})`},Qi)):m(rn({errCode:Kt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(i.baseresponse)} (callId: ${c})`},Qi)):m(rn({errCode:Kt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP},Qi));if(0!==i.status){if(1===i.status){if(0!==i.service_errcode){if(i.service_errcode===Kt.TCB_FUNCTIONS_EXEC_FAIL){let e=i.service_errmsg||"";try{const t=e.split("\n");let n=[];for(let e=0;e<t.length;e++)t[e].startsWith("Error: ")&&n.push([t[e],e]);if(n.length%2==1){let i=n[Math.floor(n.length/2)][1];e=t.slice(i).join("\n")}}catch(e){}const t=rn({errCode:Kt.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`云函数执行错误\n云端堆栈信息(error stack)(${i.func_request_id?`requestId ${i.func_request_id}, `:""}callid ${c}):\n${e}`},Qi);return t.stack=`Error: ${t.message}`,t.requestID=i.func_request_id,m(t)}{const e=rn({errCode:Kt.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`\n云函数调用失败(${i.func_request_id?`requestId ${i.func_request_id}, `:""}callid ${c}):\n${i.service_errcode} ${i.service_errmsg}`},Qi);return e.stack=`Error: ${e.message}`,e.requestID=i.func_request_id,m(e)}}{let e=i.data;try{e=li(e)}catch(t){try{e=JSON.parse(e)}catch(e){}}return _({result:e,requestID:i.func_request_id})}}return p.push(Ui("poll result expired")),m(rn({errCode:Kt.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${c}) (trace: ${Wi(p)})`},Qi))}if(!(h>=0))return p.push(Ui("too many polls, abort")),m(rn({errCode:Kt.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${c}) (trace: ${Wi(p)})`},Qi));p.push(Ui("normal poll")),d(o()(o()({},n),{},{action:Yi.POLL,scene:$i.NORMAL_POLL_RETRY,tryCount:h-1}))}catch(e){m(rn({errCode:Kt.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${c})`},Qi))}})).catch((e=>{A||(w(),e&&e.operateWXDataFail&&f>0?(p.push(Ui(`system error (${e}), retry`)),d(o()(o()({},n),{},{scene:$i.SYSTEM_ERROR_RETRY,tryCount:h-1,systemErrorRetry:f-1}))):(p.push(Ui(`system error (${e}), abort`)),m(rn(`${e} (callId: ${c}) (trace: ${Wi(p)})`,Qi))))}))}))).apply(this,arguments)}function p(e,t,n){const i=t=>{e.push(Ui(`app ${t}`))};Ti(i);return{resolve:e=>{Si(i),t(e)},reject:e=>{Si(i),n(e)}}}}));return function(e){return t.apply(this,arguments)}}()}function Gi(e){const t=new WeakMap,n=[];if(e&&(JSON.stringify(e,((e,i)=>i&&i._internalType===fi?void n.push(new Promise(((e,n)=>{const r={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},o=i;switch(Ht(o.target)){case"object":if(!o.target.filePath)throw new Error("filePath must be provided");r.filePath=o.target.filePath;break;default:r.fileData=o.target}e(Vi(r).then((e=>{t.set(i,e.fileUrl)})))}))):i)),n.length))return Promise.all(n).then((()=>t))}function Vi(e){return new Promise(((t,n)=>{const i=o()(o()({},e),{},{appType:e.appType||301,fileType:e.fileType||20303,fileKey:e.fileKey||`file_${Math.random()}`});Rn().uploadToCommonCDN(o()(o()({},i),{},{success:t,fail:n}))}))}const Hi=e=>o()(o()({},e),{},{errMsg:void 0}),zi=e=>{try{Bi()&&"undefined"!=typeof __global&&__global.networkLog&&__global.networkLog(o()(o()({},e),{},{domain:"cloud",method:"POST",timestampMs:e.timestampMs||+new Date,callFramesIgnoreLength:e.hasOwnProperty("callFramesIgnoreLength")?e.callFramesIgnoreLength:1}))}catch(e){}},Zi=(e,t)=>{try{if(Bi()&&"undefined"!=typeof __global&&__global.networkLog){const n=t(),i=`${Math.random()}-${+new Date}`,r=n.console||!1,o=n.resultGetter||Hi;zi({reqId:i,type:"requestWillBeSent",url:n.url,headers:n.headers||{},body:n.reqBody,console:r,callFramesIgnoreLength:2,timestampMs:n.timestampMs}),e.then(function(){var e=s()((function*(e){try{yield((e=0)=>new Promise((t=>setTimeout(t,e))))(),zi({reqId:i,type:"loadingFinished",body:JSON.stringify(o(e),null,2),console:r,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}));return function(t){return e.apply(this,arguments)}}()).catch((e=>{try{zi({reqId:i,type:"loadingFailed",errorCode:e&&e.errCode||-1,errorMsg:zt(e)?e.errMsg||JSON.stringify(e):e.toString(),console:r,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}))}}catch(e){0}};let Yi,$i,qi;!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(Yi||(Yi={})),function(e){e[e.INITIATE_CALL=1]="INITIATE_CALL",e[e.NORMAL_POLL_RETRY=2]="NORMAL_POLL_RETRY",e[e.SYSTEM_ERROR_RETRY=3]="SYSTEM_ERROR_RETRY",e[e.TIMEOUT_RETRY=4]="TIMEOUT_RETRY"}($i||($i={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(qi||(qi={}));const Qi="cloud.callFunction",Ji="cloud.callFunction_real_v2";function Xi(e){let t,n;function i(){return t||(t=function(e){return function(){var t=s()((function*(t){const n=o()({},t.data),i=gi(n).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(i.length)for(const e of i)delete n[e.key_name];const r=ci(n,yield t.cdnMapPromise);Cn({input:r,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});const a=ci({function_name:t.name,data:r,cloudid_list:i});t.context.tunnelStartTime=+new Date;const c=yield e.request(o()(o()({},t.config),{},{apiName:"tcbapi_slowcallfunction",serviceName:e.name,serializedReqData:a,env:t.config&&t.config.env||e.env}));t.context.tunnelEndTime=+new Date;const l=c.data;if(!l)throw nn({errCode:Kt.SDK_FUNCTIONS_EMPTY_CALL_RESULT,errMsg:Kt[Kt.SDK_FUNCTIONS_EMPTY_CALL_RESULT]},Qi);if(l.event_id,!l.poll_url)throw nn({errCode:Kt.SDK_FUNCTIONS_EMPTY_POLL_URL,errMsg:Kt[Kt.SDK_FUNCTIONS_EMPTY_POLL_URL]},Qi);l.poll_url.indexOf("?")>-1?l.poll_url+="&devtools_ignore=true&skip_domain_check=true":l.poll_url+="?devtools_ignore=true&skip_domain_check=true",t.context.pollStartTime=+new Date;const{result:u,requestID:d}=yield function(e){return h.apply(this,arguments)}(l.poll_url);return t.context.pollEndTime=+new Date,{errMsg:si(Qi),result:u,requestID:d};function h(){return(h=s()((function*(t){return new Promise(((n,i)=>{p(t,e.appConfig.maxPollRetry||50,n,i)}))}))).apply(this,arguments)}function p(e,t,n,i){return f.apply(this,arguments)}function f(){return(f=s()((function*(t,n,i,r){Rn(e.identifiers)._requestSkipCheckDomain({url:t,success:e=>{try{if(200!==e.statusCode)return r(nn({errCode:Kt.SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR,errMsg:`polling status code ${e.statusCode}`},Qi));{const o=e.data;if(!o)return r(nn({errCode:Kt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON,errMsg:Kt[Kt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON]},Qi));if(o.base_resp&&0===o.base_resp.ret){if(0!==o.status){if(1===o.status){if(0!==o.service_errcode){const e=nn({errCode:Kt.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`requestID ${o.func_req_id}, cloud function service error code ${o.service_errcode||"unknown"}, error message ${o.service_errmsg||"unknown"}`},Qi);return e.requestID=o.func_req_id,r(e)}{let e=o.content;try{e=li(e)}catch(t){try{e=JSON.parse(e)}catch(e){}}return i({result:e,requestID:o.func_req_id})}}return r(nn({errCode:Kt.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching"},Qi))}if(!(n>=0))return r(nn({errCode:Kt.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:Kt[Kt.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY]},Qi));p(t,n-1,i,r)}else{if(!o.base_resp)return r(nn({errCode:Kt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:Kt[Kt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP]},Qi));if(0!==o.base_resp.ret)return r(nn({errCode:Kt.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.ret ${o.base_resp.ret}`},Qi))}}}catch(e){r(nn({errCode:Kt.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e}`},Qi))}},fail:e=>{r(nn(e,Qi))}})}))).apply(this,arguments)}}));return function(e){return t.apply(this,arguments)}}()}(e)),t}function r(){return n||(n=ji(e)),n}return function(e){const t=+new Date;Tn(e,"object");const n=xn(e);return n.data||(n.data={}),n.context={tunnelTimeNoCSNetCost:0},n.context.apiStartTime=t,En(n)?function(e){vn({apiName:Qi,param:e}),c(e).then((t=>{bn(Qi,e,t)})).catch((t=>{wn(Qi,e,t)}))}(n):c(n)};function a(e){Tn(e,{name:"string"}),e.data&&Tn(e.data,"object"),e.config&&e.config.env&&Tn(e.config.env,"string")}function c(e){return l.apply(this,arguments)}function l(){return(l=s()((function*(t){try{a(t);{let o;if(t.cdnMapPromise=Gi(t.data),o=n()?i()(t):r()(t),Bi()){const n=Date.now();Zi(o,(()=>{var i;return{url:`wx.cloud.callFunction.${t.name}`,headers:{Env:e.isInstance?e.env:(null===(i=t.config)||void 0===i?void 0:i.env)||e.env},reqBody:ci(t.data),timestampMs:n,console:e.debug}}))}return yield o}}catch(e){throw nn(e,Qi)}finally{Jn(o()(o()({},t.context),{},{apiEndTime:+new Date,apiName:n()?Qi:Ji}))}function n(){return 1===t.version}}))).apply(this,arguments)}}function Ki(e){return{callFunction:Xi(e)}}const er="functions";function tr(e){e.registerService(function(e){const t={name:er,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(er)},appConfig:{get maxReqDataSize(){return e.appConfig.call_function_max_req_data_size},get maxPollRetry(){return e.appConfig.call_function_poll_max_retry},get maxStartRetryGap(){return e.appConfig.call_function_valid_start_retry_gap},get clientPollTimeout(){return e.appConfig.call_function_client_poll_timeout}}};return{name:er,context:t,getAPIs:Ki.bind(null,t)}}(e))}var nr=n(882);"undefined"!=typeof Float64Array?Float64Array:Float32Array;function ir(e){return"number"==typeof e}function rr(e){return e instanceof Uint8Array}function or(e,t,n){var i=t?t.byteLength:n||65536;if(4095&i||i<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return t=t||new e(new ArrayBuffer(i))}function ar(e,t,n,i,r){var o=e.length-t,a=o<r?o:r;return e.set(n.subarray(i,i+a),t),a}var sr=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}}),e})(),cr=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"SecurityError"}}),e})(),lr=(()=>{var e,t,n=!1;function i(n,i){var r=e[(t[n]+t[i])%255];return 0!==n&&0!==i||(r=0),r}var r,o,a,s;function c(){function c(n){var i,r,o;for(r=o=function(n){var i=e[255-t[n]];return 0===n&&(i=0),i}(n),i=0;i<4;i++)o^=r=255&(r<<1|r>>>7);return o^=99}n||function(){e=[],t=[];var i,r,o=1;for(i=0;i<255;i++)e[i]=o,r=128&o,o<<=1,o&=255,128===r&&(o^=27),o^=e[i],t[e[i]]=i;e[255]=e[0],t[0]=0,n=!0}(),r=[],o=[],a=[[],[],[],[]],s=[[],[],[],[]];for(var l=0;l<256;l++){var u=c(l);r[l]=u,o[u]=l,a[0][l]=i(2,u)<<24|u<<16|u<<8|i(3,u),s[0][u]=i(14,l)<<24|i(9,l)<<16|i(13,l)<<8|i(11,l);for(var d=1;d<4;d++)a[d][l]=a[d-1][l]>>>8|a[d-1][l]<<24,s[d][u]=s[d-1][u]>>>8|s[d-1][u]<<24}}var l=function(e,t){c();var n=new Uint32Array(t);n.set(r,512),n.set(o,768);for(var i=0;i<4;i++)n.set(a[i],4096+1024*i>>2),n.set(s[i],8192+1024*i>>2);var l=function(e,t,n){"use asm";var i=0,r=0,o=0,a=0,s=0,c=0,l=0,u=0,d=0,h=0,p=0,f=0,g=0,_=0,m=0,y=0,v=0,A=0,b=0,w=0,E=0;var T=new e.Uint32Array(n),S=new e.Uint8Array(n);function C(e,t,n,s,c,l,u,d){e=e|0;t=t|0;n=n|0;s=s|0;c=c|0;l=l|0;u=u|0;d=d|0;var h=0,p=0,f=0,g=0,_=0,m=0,y=0,v=0;h=n|0x400,p=n|0x800,f=n|0xc00;c=c^T[(e|0)>>2],l=l^T[(e|4)>>2],u=u^T[(e|8)>>2],d=d^T[(e|12)>>2];for(v=16;(v|0)<=s<<4;v=v+16|0){g=T[(n|c>>22&1020)>>2]^T[(h|l>>14&1020)>>2]^T[(p|u>>6&1020)>>2]^T[(f|d<<2&1020)>>2]^T[(e|v|0)>>2],_=T[(n|l>>22&1020)>>2]^T[(h|u>>14&1020)>>2]^T[(p|d>>6&1020)>>2]^T[(f|c<<2&1020)>>2]^T[(e|v|4)>>2],m=T[(n|u>>22&1020)>>2]^T[(h|d>>14&1020)>>2]^T[(p|c>>6&1020)>>2]^T[(f|l<<2&1020)>>2]^T[(e|v|8)>>2],y=T[(n|d>>22&1020)>>2]^T[(h|c>>14&1020)>>2]^T[(p|l>>6&1020)>>2]^T[(f|u<<2&1020)>>2]^T[(e|v|12)>>2];c=g,l=_,u=m,d=y}i=T[(t|c>>22&1020)>>2]<<24^T[(t|l>>14&1020)>>2]<<16^T[(t|u>>6&1020)>>2]<<8^T[(t|d<<2&1020)>>2]^T[(e|v|0)>>2],r=T[(t|l>>22&1020)>>2]<<24^T[(t|u>>14&1020)>>2]<<16^T[(t|d>>6&1020)>>2]<<8^T[(t|c<<2&1020)>>2]^T[(e|v|4)>>2],o=T[(t|u>>22&1020)>>2]<<24^T[(t|d>>14&1020)>>2]<<16^T[(t|c>>6&1020)>>2]<<8^T[(t|l<<2&1020)>>2]^T[(e|v|8)>>2],a=T[(t|d>>22&1020)>>2]<<24^T[(t|c>>14&1020)>>2]<<16^T[(t|l>>6&1020)>>2]<<8^T[(t|u<<2&1020)>>2]^T[(e|v|12)>>2]}function I(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;C(0x0000,0x0800,0x1000,E,e,t,n,i)}function x(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0;C(0x0400,0x0c00,0x2000,E,e,i,n,t);o=r,r=a,a=o}function D(e,t,n,d){e=e|0;t=t|0;n=n|0;d=d|0;C(0x0000,0x0800,0x1000,E,s^e,c^t,l^n,u^d);s=i,c=r,l=o,u=a}function O(e,t,n,d){e=e|0;t=t|0;n=n|0;d=d|0;var h=0;C(0x0400,0x0c00,0x2000,E,e,d,n,t);h=r,r=a,a=h;i=i^s,r=r^c,o=o^l,a=a^u;s=e,c=t,l=n,u=d}function P(e,t,n,d){e=e|0;t=t|0;n=n|0;d=d|0;C(0x0000,0x0800,0x1000,E,s,c,l,u);s=i=i^e,c=r=r^t,l=o=o^n,u=a=a^d}function R(e,t,n,d){e=e|0;t=t|0;n=n|0;d=d|0;C(0x0000,0x0800,0x1000,E,s,c,l,u);i=i^e,r=r^t,o=o^n,a=a^d;s=e,c=t,l=n,u=d}function k(e,t,n,d){e=e|0;t=t|0;n=n|0;d=d|0;C(0x0000,0x0800,0x1000,E,s,c,l,u);s=i,c=r,l=o,u=a;i=i^e,r=r^t,o=o^n,a=a^d}function N(e,t,n,s){e=e|0;t=t|0;n=n|0;s=s|0;C(0x0000,0x0800,0x1000,E,d,h,p,f);f=~y&f|y&f+1;p=~m&p|m&p+((f|0)==0);h=~_&h|_&h+((p|0)==0);d=~g&d|g&d+((h|0)==0);i=i^e;r=r^t;o=o^n;a=a^s}function M(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,a=0,d=0,h=0,p=0,f=0,g=0,_=0,m=0;e=e^s,t=t^c,n=n^l,i=i^u;r=v|0,o=A|0,a=b|0,d=w|0;for(;(_|0)<128;_=_+1|0){if(r>>>31){h=h^e,p=p^t,f=f^n,g=g^i}r=r<<1|o>>>31,o=o<<1|a>>>31,a=a<<1|d>>>31,d=d<<1;m=i&1;i=i>>>1|n<<31,n=n>>>1|t<<31,t=t>>>1|e<<31,e=e>>>1;if(m)e=e^0xe1000000}s=h,c=p,l=f,u=g}function L(e){e=e|0;E=e}function B(e,t,n,s){e=e|0;t=t|0;n=n|0;s=s|0;i=e,r=t,o=n,a=s}function F(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;s=e,c=t,l=n,u=i}function U(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;d=e,h=t,p=n,f=i}function W(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;g=e,_=t,m=n,y=i}function j(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;f=~y&f|y&i,p=~m&p|m&n,h=~_&h|_&t,d=~g&d|g&e}function G(e){e=e|0;if(e&15)return-1;S[e|0]=i>>>24,S[e|1]=i>>>16&255,S[e|2]=i>>>8&255,S[e|3]=i&255,S[e|4]=r>>>24,S[e|5]=r>>>16&255,S[e|6]=r>>>8&255,S[e|7]=r&255,S[e|8]=o>>>24,S[e|9]=o>>>16&255,S[e|10]=o>>>8&255,S[e|11]=o&255,S[e|12]=a>>>24,S[e|13]=a>>>16&255,S[e|14]=a>>>8&255,S[e|15]=a&255;return 16}function V(e){e=e|0;if(e&15)return-1;S[e|0]=s>>>24,S[e|1]=s>>>16&255,S[e|2]=s>>>8&255,S[e|3]=s&255,S[e|4]=c>>>24,S[e|5]=c>>>16&255,S[e|6]=c>>>8&255,S[e|7]=c&255,S[e|8]=l>>>24,S[e|9]=l>>>16&255,S[e|10]=l>>>8&255,S[e|11]=l&255,S[e|12]=u>>>24,S[e|13]=u>>>16&255,S[e|14]=u>>>8&255,S[e|15]=u&255;return 16}function H(){I(0,0,0,0);v=i,A=r,b=o,w=a}function z(e,t,n){e=e|0;t=t|0;n=n|0;var s=0;if(t&15)return-1;while((n|0)>=16){Y[e&7](S[t|0]<<24|S[t|1]<<16|S[t|2]<<8|S[t|3],S[t|4]<<24|S[t|5]<<16|S[t|6]<<8|S[t|7],S[t|8]<<24|S[t|9]<<16|S[t|10]<<8|S[t|11],S[t|12]<<24|S[t|13]<<16|S[t|14]<<8|S[t|15]);S[t|0]=i>>>24,S[t|1]=i>>>16&255,S[t|2]=i>>>8&255,S[t|3]=i&255,S[t|4]=r>>>24,S[t|5]=r>>>16&255,S[t|6]=r>>>8&255,S[t|7]=r&255,S[t|8]=o>>>24,S[t|9]=o>>>16&255,S[t|10]=o>>>8&255,S[t|11]=o&255,S[t|12]=a>>>24,S[t|13]=a>>>16&255,S[t|14]=a>>>8&255,S[t|15]=a&255;s=s+16|0,t=t+16|0,n=n-16|0}return s|0}function Z(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;if(t&15)return-1;while((n|0)>=16){$[e&1](S[t|0]<<24|S[t|1]<<16|S[t|2]<<8|S[t|3],S[t|4]<<24|S[t|5]<<16|S[t|6]<<8|S[t|7],S[t|8]<<24|S[t|9]<<16|S[t|10]<<8|S[t|11],S[t|12]<<24|S[t|13]<<16|S[t|14]<<8|S[t|15]);i=i+16|0,t=t+16|0,n=n-16|0}return i|0}var Y=[I,x,D,O,P,R,k,N];var $=[D,M];return{set_rounds:L,set_state:B,set_iv:F,set_nonce:U,set_mask:W,set_counter:j,get_state:G,get_iv:V,gcm_init:H,cipher:z,mac:Z}}({Uint8Array:Uint8Array,Uint32Array:Uint32Array},e,t);return l.set_key=function(e,t,i,o,a,c,u,d,h){var p=n.subarray(0,60),f=n.subarray(256,316);p.set([t,i,o,a,c,u,d,h]);for(var g=e,_=1;g<4*e+28;g++){var m=p[g-1];(g%e==0||8===e&&g%e==4)&&(m=r[m>>>24]<<24^r[m>>>16&255]<<16^r[m>>>8&255]<<8^r[255&m]),g%e==0&&(m=m<<8^m>>>24^_<<24,_=_<<1^(128&_?27:0)),p[g]=p[g-e]^m}for(var y=0;y<g;y+=4)for(var v=0;v<4;v++){m=p[g-(4+y)+(4-v)%4];f[y+v]=y<4||y>=g-4?m:s[0][r[m>>>24]]^s[1][r[m>>>16&255]]^s[2][r[m>>>8&255]]^s[3][r[255&m]]}l.set_rounds(e+5)},l};return l.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},l.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},l.MAC={CBC:0,GCM:1},l.HEAP_DATA=16384,l})(),ur=new Uint8Array(1048576),dr=(()=>lr(null,ur.buffer))();class hr{constructor(e,t,n,i,r){this.nonce=null,this.counter=0,this.counterSize=0,this.heap=or(Uint8Array,i).subarray(lr.HEAP_DATA),this.asm=r||lr(null,this.heap.buffer),this.mode=null,this.key=null,this.AES_reset(e,t,n)}AES_set_key(e){if(void 0!==e){if(!rr(e))throw new TypeError("unexpected key type");var t=e.length;if(16!==t&&24!==t&&32!==t)throw new sr("illegal key size");var n=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_key(t>>2,n.getUint32(0),n.getUint32(4),n.getUint32(8),n.getUint32(12),t>16?n.getUint32(16):0,t>16?n.getUint32(20):0,t>24?n.getUint32(24):0,t>24?n.getUint32(28):0),this.key=e}else if(!this.key)throw new Error("key is required")}AES_CTR_set_options(e,t,n){if(void 0!==n){if(n<8||n>48)throw new sr("illegal counter size");this.counterSize=n;var i=Math.pow(2,n)-1;this.asm.set_mask(0,0,i/4294967296|0,0|i)}else this.counterSize=n=48,this.asm.set_mask(0,0,65535,4294967295);if(void 0===e)throw new Error("nonce is required");if(!rr(e))throw new TypeError("unexpected nonce type");var r=e.length;if(!r||r>16)throw new sr("illegal nonce size");this.nonce=e;var o=new DataView(new ArrayBuffer(16));if(new Uint8Array(o.buffer).set(e),this.asm.set_nonce(o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)),void 0!==t){if(!ir(t))throw new TypeError("unexpected counter type");if(t<0||t>=Math.pow(2,n))throw new sr("illegal counter value");this.counter=t,this.asm.set_counter(0,0,t/4294967296|0,0|t)}else this.counter=0}AES_set_iv(e){if(void 0!==e){if(!rr(e))throw new TypeError("unexpected iv type");if(16!==e.length)throw new sr("illegal iv size");var t=new DataView(e.buffer,e.byteOffset,e.byteLength);this.iv=e,this.asm.set_iv(t.getUint32(0),t.getUint32(4),t.getUint32(8),t.getUint32(12))}else this.iv=null,this.asm.set_iv(0,0,0,0)}AES_set_padding(e){this.padding=void 0===e||!!e}AES_reset(e,t,n){return this.result=null,this.pos=0,this.len=0,this.AES_set_key(e),this.AES_set_iv(t),this.AES_set_padding(n),this}AES_Encrypt_process(e){if(!rr(e))throw new TypeError("data isn't of expected type");for(var t=this.asm,n=this.heap,i=lr.ENC[this.mode],r=lr.HEAP_DATA,o=this.pos,a=this.len,s=0,c=e.length||0,l=0,u=0,d=new Uint8Array(a+c&-16);c>0;)a+=u=ar(n,o+a,e,s,c),s+=u,c-=u,(u=t.cipher(i,r+o,a))&&d.set(n.subarray(o,o+u),l),l+=u,u<a?(o+=u,a-=u):(o=0,a=0);return this.result=d,this.pos=o,this.len=a,this}AES_Encrypt_finish(e){var t=null,n=0;void 0!==e&&(n=(t=this.AES_Encrypt_process(e).result).length);var i=this.asm,r=this.heap,o=lr.ENC[this.mode],a=lr.HEAP_DATA,s=this.pos,c=this.len,l=16-c%16,u=c;if(this.hasOwnProperty("padding")){if(this.padding){for(var d=0;d<l;++d)r[s+c+d]=l;u=c+=l}else if(c%16)throw new sr("data length must be a multiple of the block size")}else c+=l;var h=new Uint8Array(n+u);return n&&h.set(t),c&&i.cipher(o,a+s,c),u&&h.set(r.subarray(s,s+u),n),this.result=h,this.pos=0,this.len=0,this}AES_Decrypt_process(e){if(!rr(e))throw new TypeError("data isn't of expected type");var t=this.asm,n=this.heap,i=lr.DEC[this.mode],r=lr.HEAP_DATA,o=this.pos,a=this.len,s=0,c=e.length||0,l=0,u=a+c&-16,d=0,h=0;this.padding&&(u-=d=a+c-u||16);for(var p=new Uint8Array(u);c>0;)a+=h=ar(n,o+a,e,s,c),s+=h,c-=h,(h=t.cipher(i,r+o,a-(c?0:d)))&&p.set(n.subarray(o,o+h),l),l+=h,h<a?(o+=h,a-=h):(o=0,a=0);return this.result=p,this.pos=o,this.len=a,this}AES_Decrypt_finish(e){var t=null,n=0;void 0!==e&&(n=(t=this.AES_Decrypt_process(e).result).length);var i=this.asm,r=this.heap,o=lr.DEC[this.mode],a=lr.HEAP_DATA,s=this.pos,c=this.len,l=c;if(c>0){if(c%16){if(this.hasOwnProperty("padding"))throw new sr("data length must be a multiple of the block size");c+=16-c%16}if(i.cipher(o,a+s,c),this.hasOwnProperty("padding")&&this.padding){var u=r[s+l-1];if(u<1||u>16||u>l)throw new cr("bad padding");for(var d=0,h=u;h>1;h--)d|=u^r[s+l-h];if(d)throw new cr("bad padding");l-=u}}var p=new Uint8Array(n+l);return n>0&&p.set(t),l>0&&p.set(r.subarray(s,s+l),n),this.result=p,this.pos=0,this.len=0,this}}var pr=(()=>{class e extends hr{constructor(e,t=null,n=!0,i,r){super(e,t,n,i,r),this.mode="CBC",this.BLOCK_SIZE=16}encrypt(e){return this.AES_Encrypt_finish(e)}decrypt(e){return this.AES_Decrypt_finish(e)}}return e.encrypt=fr,e.decrypt=gr,e})();function fr(e,t,n,i){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new pr(t,i,n,ur,dr).encrypt(e).result}function gr(e,t,n,i){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new pr(t,i,n,ur,dr).decrypt(e).result}"undefined"!=typeof console&&console;var _r=Date.now,mr=(Math.random,"undefined"!=typeof performance?performance:void 0),yr="undefined"!=typeof crypto?crypto:"undefined"!=typeof msCrypto?msCrypto:void 0;void 0!==yr&&yr.getRandomValues;if(void 0!==mr)(function(){return 1e3*mr.now()|0});else{var vr=1e3*_r()|0;(function(){return 1e3*_r()-vr|0})}Uint32Array,Math;var Ar="undefined"!=typeof console?console:void 0;"undefined"==typeof location||!location.protocol.search(/https:|file:|chrome:|chrome-extension:|moz-extension:/)||void 0===Ar||Ar.warn("asmCrypto seems to be load from an insecure origin; this may cause to MitM-attack vulnerability. Consider using secure transport protocol.");new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);const br="cloud.callContainer";function wr(e){return function(){var i=s()((function*(i){let r=e.serviceEndpoint.getEndpointSync("container"),a=new WeakMap;if(i.cdnMapPromise||!r){const t=yield Promise.all([i.cdnMapPromise,Er(e.serviceEndpoint.getEndpoint("container"),i.stats,"getServiceEndpoint")]);t[0]&&(a=t[0]),r=t[1]}else i.stats.getServiceEndpoint=0;return i.shouldSerialize&&(i.data=ci(i.data,a)),r.http?function(t,i){return new Promise(((r,a)=>{var s;i.stats.tsCallContainerImplStart=Date.now();const c=Rn(e.identifiers),l={"X-WX-ENCRYPTION-VERSION":2,"X-WX-ENCRYPTION-TIMESTAMP":t.timestamp+"","X-WX-COMPRESSION":"snappy","X-WX-USER-TIMEOUT":i.timeout||"","X-WX-LIB-BUILD-TS":1626833913113,"X-WX-RESPONSE-CONTENT-ACCEPT-ENCODING":"PB, JSON","Content-Type":"application/octet-stream"},u=`${Math.random()}_${Date.now()}`,d=o()(o()({},i.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(s=i.config)||void 0===s?void 0:s.env)||e.env,"X-WX-SERVICE":i.service,"X-WX-CONTAINER-PATH":i.path,"X-WX-CALL-ID":u});e.appid&&(d["X-WX-RESOURCE-APPID"]=e.appid);const h=i.stats;h.callid=u;let p=Date.now();const f=[];for(const e in d)void 0!==d[e]&&null!==d[e]&&f.push({key:e.toLowerCase(),value:d[e]+""});let g,_,m=!1;if(i.data){const e=Ht(i.data);"object"===e?g=JSON.stringify(i.data):"arraybuffer"!==e?g=i.data+"":(g=i.data,m=!0)}else g=void 0;p=Date.now(),m?(_=nr.HTTPRequest.encode({method:i.method||"GET",header:f,body:new Uint8Array(g),callId:u}).finish(),h.encodePb=Date.now()-p,l["X-WX-REQUEST-CONTENT-ENCODING"]="PB"):(_=new Uint8Array(ki(JSON.stringify({method:i.method||"GET",header:f,body:g,call_id:u}))),h.stringToBuffer=Date.now()-p,l["X-WX-REQUEST-CONTENT-ENCODING"]="JSON"),p=Date.now();const y=n(96),v=y.compress(_);h.compress=Date.now()-p,p=Date.now(),h.loadAsmcrypto=Date.now()-p,p=Date.now();const A=new Uint8Array(c.wx.base64ToArrayBuffer(t.key)),b=pr.encrypt(v,A,void 0,A);h.encrypt=Date.now()-p,p=Date.now();let w=!0;!t.localDNSTrusted&&t.vip&&(w=!1,l.host="servicewechat.com",h.ip=t.vip);let E=w?t.url:`http://${t.vip}/wxa-qbase/container_service?token=${t.token}`;i.rdm?E=`https://wxardm.weixin.qq.com/wxa-qbase/container_service?token=${t.token}`:i.ecdn&&(E=`https://cloudbase.servicewechat.com/wxa-qbase/container_service?token=${t.token}`),i.verbose&&console.log(`[cloud.callContainer] url ${E}`),w&&t.domain&&(i.stats.domain=t.domain),h.requestBodyBytes=b.byteLength,h.requestStartTs=Date.now(),c._requestSkipCheckDomain({url:E,method:"POST",header:l,data:b.buffer,dataType:"arraybuffer",responseType:"arraybuffer",timeout:i.timeout,enableHttp2:w,success:e=>{try{for(const t in e.header)if("x-nws-log-uuid"===t.toLowerCase()&&(i.verbose&&console.log(`[cloud.callContainer] x-nws-log-uuid ${e.header[t]}`),i.stats.ecdnId=e.header[t]),"x-edge-timing"===t.toLowerCase()&&(i.stats.ecdnEdgeTiming=e.header[t]),"x-wx-system-error"===t.toLowerCase()){const n=Number(e.header[t]);return void a({errCode:n,errMsg:`${br}:fail system error. code: ${n}`})}if(h.profile=e.profile,h.httpRequest=Date.now()-p,200===e.statusCode){let t=e.data;h.responseBodyBytes=t.byteLength,p=Date.now();let n=pr.decrypt(new Uint8Array(t),A,void 0,A);h.decrypt=Date.now()-p;let o,s,c="pb";for(const t in e.header)if("x-wx-compression"===t.toLowerCase()&&"snappy"===e.header[t]&&(p=Date.now(),n=y.uncompress(n),h.uncompress=Date.now()-p),"x-wx-response-content-encoding"===t.toLowerCase()&&"json"===e.header[t].toLowerCase()&&(c="json"),"x-wx-server-timing"===t.toLowerCase()){const n=(e.header[t]||"").split(",");n.length>=2&&(h.serverStartTs=Number(n[0]),h.serverEndTs=Number(n[1]))}if(p=Date.now(),"json"===c){const e=JSON.parse(Ri(n));o={statusCode:e.status_code,header:e.header,bodyBuffer:e.body_buffer,bodyString:e.body_string},h.decodeJson=Date.now()-p}else o=nr.HTTPResponse.decode(n),h.decodePb=Date.now()-p;if(p=Date.now(),"json"===i.dataType){const e=o.bodyString||(o.bodyBuffer?Ri(o.bodyBuffer):"{}");try{s=JSON.parse(e)}catch(t){return void a({errCode:-1,errMsg:`${br}:fail parse response body as JSON failed: ${t}. input: ${e}`})}}else s="text"===i.responseType?o.bodyString||(o.bodyBuffer?Ri(o.bodyBuffer):""):"arraybuffer"===i.responseType&&o.bodyString?ki(o.bodyString):o.bodyString||o.bodyBuffer;h.decodeBody=Date.now()-p,r({statusCode:o.statusCode,header:o.header.reduce(((e,t)=>(e[t.key+""]=t.value+"",e)),{}),data:s,stats:h,callID:u,errMsg:`${br}:ok`})}else{let t=-1;for(const n in e.header)"x-wx-system-error"===n.toLowerCase()&&(t=Number(e.header[n]));a({errCode:t,errMsg:`${br}:fail system error, status ${e.statusCode}. code: ${t}`})}}catch(e){a({errCode:-1,errMsg:`${br}:fail error while processing internal response ${e}`})}},fail:e=>{a(o()(o()({},e),{},{errMsg:e.errMsg.replace(/^request/,br)}))}})}))}(r,i):function(e,n){return t.apply(this,arguments)}(r.url,i)}));return function(e){return i.apply(this,arguments)}}();function t(){return(t=s()((function*(t,n){return new Promise(((i,r)=>{var a;const s=Rn(e.identifiers),c=o()(o()({},n.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(a=n.config)||void 0===a?void 0:a.env)||e.env,"X-WX-SERVICE":n.service,"X-WX-CONTAINER-PATH":n.path,"X-WX-CALL-ID":`${Math.random()}_${Date.now()}`,"X-WX-USER-TIMEOUT":n.timeout});e.appid&&(c["X-WX-RESOURCE-APPID"]=e.appid),s._requestSkipCheckDomain({url:t,method:n.method,header:c,data:n.data,dataType:n.dataType,responseType:n.responseType,timeout:n.timeout,success:e=>{i(o()(o()({},e),{},{errMsg:`${br}:ok`}))},fail:e=>{r(o()(o()({},e),{},{errMsg:e.errMsg.replace(/^request/,br)}))}})}))}))).apply(this,arguments)}}function Er(e,t,n){const i=Date.now();return e.then((()=>t[n]=Date.now()-i)).catch((()=>t[n]=Date.now()-i)),e}let Tr,Sr,Cr,Ir;!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(Tr||(Tr={})),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Timeout=2]="Timeout"}(Sr||(Sr={})),function(e){e[e.RAW=0]="RAW",e[e.BASE64=1]="BASE64",e[e.CDN_URL=2]="CDN_URL"}(Cr||(Cr={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(Ir||(Ir={}));const xr=e=>{const t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},Dr=e=>e.join("->"),Or=2e4,Pr=1e5,Rr="cloud.callContainer";const kr="cloud.callContainer";function Nr(e){let t,n;function i(){return t||(t=wr(e)),t}function r(){return n||(n=function(e){return function(){var t=s()((function*(t){var n,i;if(t.shouldSerialize){const e=yield t.cdnMapPromise;t.data=ci(t.data,e)}let r=Cr.RAW;const a=(null===(n=t.method)||void 0===n?void 0:n.toUpperCase())||"GET";if(t.data&&/^(POST|PUT|PATCH)$/.test(a)){const e=Ht(t.data);if("object"===e)if(t.isReqHeaderContentTypeJSON)t.data=JSON.stringify(t.data);else if(t.isReqHeaderContentTypeURLEncoded){let e="";for(const n in t.data)e+=`${e.length?"&":""}${encodeURIComponent(n)}=${encodeURIComponent(t.data[n])}`;t.data=e}else t.data=JSON.stringify(t.data);else{if("arraybuffer"!==e&&"string"!==e)throw new Error(`input data type is not supported: ${e}`);{let n=!1;if("string"===e)n=t.data.length>Pr;else if(t.data.byteLength>Pr)n=!0;else{const e=Oi(t.data);e.length>Pr?n=!0:(t.data=e,r=Cr.BASE64)}if(n)throw new Error("input data size too large (> 100KB)")}}}else if("GET"===a&&t.data&&zt(t.data)){for(const e in t.data){const n=`&${e}=${t.data[e]}`;t.path+=`${t.path.includes("?")?"&":"?"}${n}`}t.data=void 0}else t.data=void 0;const c=`${+new Date}-${Math.random()}`;t.header=o()(o()({},t.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(i=t.config)||void 0===i?void 0:i.env)||e.env,"X-WX-CONTAINER-PATH":t.path}),t.service&&(t.header["X-WX-SERVICE"]=t.service);for(const e in t.header)null!==t.header[e]&&void 0!==t.header[e]&&(t.header[e]+="");t.context.tunnelStartTime=+new Date;const{result:l}=yield function(e,t,n,i){return u.apply(this,arguments)}(t,t.data,r,c);return t.context.tunnelEndTime=+new Date,o()(o()({},l),{},{errMsg:si(Rr),callID:c});function u(){return(u=s()((function*(t,n,i,r){let o,a=!1;t.hasOwnProperty("timeout")&&(o=new Promise(((e,n)=>{setTimeout((()=>{a=!0,n(`timeout (options.timeout == ${t.timeout})`)}),t.timeout)})));const s=new Promise(((s,c)=>{const l=[xr("start")],{resolve:u,reject:h}=p(l,s,c);d({param:t,data:n,dataType:i,callID:r,action:Tr.CALL,retryType:Sr.None,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,userTimeout:{get reached(){return!!o&&a}},trace:l,resolve:u,reject:h})}));return o?Promise.race([s,o]):s}))).apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return(h=s()((function*(n){const{data:i,dataType:r,callID:a,action:c,retryType:l,tryCount:u,trace:h,systemErrorRetry:p,timeoutErrorRetry:f,userTimeout:g,resolve:_,reject:m}=n,y=[];for(const e in t.header)y.push({k:e,v:t.header[e]});const v=ci(c===Tr.CALL?{method:t.method||"GET",headers:y,data:c===Tr.CALL?i:void 0,data_type:r,action:c,retryType:l,call_id:a,user_timeout:t.timeout}:{call_id:a,action:c,retryType:l});let A=!1,b=!1;const w=()=>{clearTimeout(T),b=!0},E=+new Date,T=setTimeout(s()((function*(){const t=e.appConfig.clientPollTimeout||Or;if(!(+new Date-E>t&&(yield _i(),b)||g.reached)){if(!Bi()&&+new Date-E>e.appConfig.maxStartRetryGap)return h.push(xr("timeout, exceed max retry gap")),m(rn({errCode:Kt.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${a}) (trace: ${Dr(h)})`},Rr));A=!0,n.timeoutErrorRetry>0?(h.push(xr("timeout, retry")),d(o()(o()({},n),{},{retryType:Sr.Timeout,tryCount:u-1,timeoutErrorRetry:f-1}))):(h.push(xr("timeout, abort")),m(rn({errCode:Kt.SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${a}) (trace: ${Dr(h)})`},Rr)))}})),e.appConfig.clientPollTimeout||Or),S=e=>{const n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time)};function C(){return(C=s()((function*(i){try{if(A||g.reached)return;w(),S(i);const r=i.data;if(!r)return h.push(xr("empty resp")),m(rn({errCode:Kt.SDK_CONTAINER_EMPTY_CALL_RESULT},Rr));if(!r.baseresponse||0!==r.baseresponse.errcode)return r.baseresponse?0!==r.baseresponse.errcode?m(rn({errCode:Kt.SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${r.baseresponse.errcode} errmsg ${r.baseresponse.errmsg} (callId: ${a})`},Rr)):m(rn({errCode:Kt.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(r.baseresponse)} (callId: ${a})`},Rr)):m(rn({errCode:Kt.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP},Rr));if(0!==r.status){if(1===r.status){let n;if(r.data_type===Cr.BASE64)n=Pi(r.data),"json"===t.dataType?n=xi(Ri(n)):"arraybuffer"!==t.responseType&&(n=Ri(n));else if(r.data_type===Cr.CDN_URL)try{const i=Rn(e.identifiers);n=(yield new Promise(((e,n)=>{i._requestSkipCheckDomain({url:r.data,dataType:t.dataType,responseType:t.responseType,success:t=>{200!==t.statusCode?n(`download response status code ${t.statusCode}`):e(t)},fail:e=>{n(e)}})}))).data}catch(e){return m(rn({errCode:Kt.SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL,errMsg:`error: ${e} \n (callId: ${a}) (trace: ${Dr(h)})`},Rr))}else n=r.data,"arraybuffer"===t.responseType?n=ki(n):"json"===t.dataType&&(n=xi(n));return _({result:{data:n,statusCode:r.http_code,header:r.headers.reduce(((e,t)=>(e[t.k]=t.v,e)),{})}})}return h.push(xr("poll result expired")),m(rn({errCode:Kt.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${a}) (trace: ${Dr(h)})`},Rr))}if(!(u>=0))return h.push(xr("too many polls, abort")),m(rn({errCode:Kt.SDK_CONTAINER_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${a}) (trace: ${Dr(h)})`},Rr));h.push(xr("normal poll")),d(o()(o()({},n),{},{action:Tr.POLL,retryType:Sr.None,tryCount:u-1}))}catch(e){m(rn({errCode:Kt.SDK_CONTAINER_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${a})`},Rr))}}))).apply(this,arguments)}g.reached||e.request(o()(o()({},t.config),{},{apiName:"tcbapi_call_container",serviceName:e.name,serializedReqData:v,env:t.config&&t.config.env||e.env})).then((function(e){return C.apply(this,arguments)})).catch((e=>{A||g.reached||(w(),e&&e.operateWXDataFail&&p>0?(h.push(xr(`system error (${e}), retry`)),d(o()(o()({},n),{},{retryType:Sr.Error,tryCount:u-1,systemErrorRetry:p-1}))):(h.push(xr(`system error (${e}), abort`)),m(rn(`${e} (callId: ${a}) (trace: ${Dr(h)})`,Rr))))}))}))).apply(this,arguments)}function p(e,t,n){const i=t=>{e.push(xr(`app ${t}`))};return Ti(i),{resolve:e=>{Si(i),t(e)},reject:e=>{Si(i),n(e)}}}}));return function(e){return t.apply(this,arguments)}}()}(e)),n}return function(e){const t=+new Date;Tn(e,"object");const n=xn(e);return n.data||(n.data={}),n.dataType||(n.dataType="json"),n.context={tunnelTimeNoCSNetCost:0},n.context.apiStartTime=t,n.stats={apiStartTime:t},En(n)?function(e){vn({apiName:kr,param:e}),c(e).then((t=>{bn(kr,e,t)})).catch((t=>{wn(kr,e,t)}))}(n):c(n)};function a(t){var n;if(t.path||(t.path="/"),t.service,e.isInstance){if(!e.env)throw new Error("envId must be provided")}else if(null!==(n=t.config)&&void 0!==n&&n.env)Tn(t.config.env,"string");else if(!e.env)throw new Error("envId must be provided")}function c(e){return l.apply(this,arguments)}function l(){return(l=s()((function*(t){let n=!1;try{a(t),t.header||(t.header={}),t.dataType||(t.dataType="json"),t.responseType||(t.responseType="text");let o=!1;for(const e in t.header)"content-type"===e.toLowerCase()&&(o=!0,t.header[e].includes("application/json")&&(t.isReqHeaderContentTypeJSON=!0),"application/x-www-form-urlencoded"===t.header[e]&&(t.isReqHeaderContentTypeURLEncoded=!0));if(o||(t.header["content-type"]="application/json",t.isReqHeaderContentTypeJSON=!0),/post|put|patch/i.test(t.method||"")&&t.data&&t.isReqHeaderContentTypeJSON){const e=Ht(t.data);t.shouldSerialize="string"!==e}t.cdnMapPromise=t.shouldSerialize?Gi(t.data):void 0;const s=Date.now();let c,l;n=u(t),t.stats.tsBeforeCallContainerImpl=Date.now(),c=n?i()(t):r()(t);const h=t.service||t.header["X-WX-SERVICE"];l=h?`wx.cloud.callContainer.${t.service}${t.path}`:`wx.cloud.callContainer${t.path}`,Zi(c,(()=>{var n;return{url:l,headers:{Env:e.isInstance?e.env:(null===(n=t.config)||void 0===n?void 0:n.env)||e.env},reqBody:ci(t.data),timestampMs:s,console:e.debug}}));const p=yield c;return d(t,n),p}catch(e){throw nn(e,kr)}}))).apply(this,arguments)}function u(e){return 1===e.apiVersion}function d(e,t){e.stats.apiEndTime=Date.now(),Jn(o()(o()({},e.context),{},{apiEndTime:e.stats.apiEndTime,apiName:kr}));const n=Boolean(e.stats.profile),i=e.stats.profile||{},r=e.stats.serverEndTs-e.stats.serverStartTs,a=e.stats.httpRequest<=6e4?e.stats.httpRequest:6e4,s=e.stats.apiEndTime;let c=s-e.context.apiStartTime;c>9e4&&(c=9e4);let l=e.path||"";l=l.split("?")[0].replace(/\/\d+\//g,"/*/").replace(/\/\d+$/g,"/*"),ti(22601,9,[e.stats.callid,e.context.apiStartTime,s,e.stats.serverStartTs,e.stats.serverEndTs,e.stats.requestBodyBytes,e.stats.responseBodyBytes,e.stats.getServiceEndpoint,e.stats.queryDNS,e.stats.compress,e.stats.loadAsmcrypto,e.stats.encrypt,a,e.stats.decrypt,e.stats.uncompress,e.stats.decodePb,e.stats.decodeBody,e.stats.ip,i.redirectStart,n?i.redirectEnd-i.redirectStart:void 0,i.fetchStart,i.domainLookupStart,n?i.domainLookupEnd-i.domainLookupStart:void 0,i.connectStart,n?i.connectEnd-i.connectStart:void 0,i.SSLconnectionStart,n?i.SSLconnectionEnd-i.SSLconnectionStart:void 0,i.requestStart,n?i.requestEnd-i.requestStart:void 0,i.responseStart,n?i.responseEnd-i.responseStart:void 0,i.rtt,i.estimate_nettype,i.httpRttEstimate,i.transportRttEstimate,i.downstreamThroughputKbpsEstimate,i.throughputKbps,i.peerIP,i.port,n?i.socketReused?1:0:void 0,i.sendBytesCount,i.receivedBytedCount,t?i.protocol:"im",Ii().system,c,r>0?r:0,a?c-a:void 0,l,Ii().platform,e.stats.requestStartTs,1626833913113,e.stats.ecdnId,e.stats.ecdnEdgeTiming,e.stats.domain,e.stats.stringToBuffer,e.stats.encodePb,e.stats.tsBeforeCallContainerImpl,e.stats.tsCallContainerImplStart,e.stats.decodeJson].join(","))}}function Mr(e){return{callContainer:Nr(e)}}const Lr="container";function Br(e){e.registerService(function(e){const t={name:Lr,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,get debug(){return e.debug},get appid(){return e.isInstance?e.instanceOptions.resourceAppid:void 0},get env(){return e.getEnvForService(Lr)},appConfig:{get maxPollRetry(){return e.appConfig.call_container_poll_max_retry},get clientPollTimeout(){return e.appConfig.call_container_client_poll_timeout},get maxStartRetryGap(){return e.appConfig.call_container_valid_start_retry_gap}}};return{name:Lr,context:t,getAPIs:Mr.bind(null,t)}}(e))}const Fr={},Ur={env:"",platform:""},Wr=()=>Ur;if(void 0!==__wxConfig)Ur.env="miniprogram",Ur.platform=__wxConfig.platform;else if(Ur.env="web",window.__wxjs_environment&&"miniprogram"===window.__wxjs_environment)Ur.platform="miniprogram";else{const e=window.navigator.userAgent.toLowerCase();/MicroMessenger/i.test(e)&&(Ur.platform="wxweb")}const jr="cloud.uploadFile";function Gr(e){return function(e){if(En(e=xn(e)))return function(e){const n={aborted:!1},i=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(n),r={apiStartTime:+new Date};return t(o()(o()({},e),{},{context:n,timing:r,uploadTaskAgent:i})).then((t=>{bn(jr,e,t)})).catch((t=>{wn(jr,e,t)})),i}(e);{const n={apiStartTime:+new Date};return t(o()(o()({},e),{},{timing:n}))}};function t(e){return new Promise(function(){var t=s()((function*(t,r){try{if(function(e){Tn(e,{cloudPath:"string"}),"miniprogram"===Wr().env?Tn(e,{filePath:"string"}):Sn(e,"file","uploadFile")}(e),e.filePath&&function(e){i.apply(this,arguments)}(e.filePath),e.context&&(e.context.abort=function(){r(nn({errMsg:"abort"},jr))},e.context.aborted))return r(nn({errMsg:"abort"},jr));t(yield function(e){return n.apply(this,arguments)}(e))}catch(e){r(nn(e,jr))}finally{Jn(o()(o()({},e.timing),{},{apiEndTime:+new Date,apiName:"cloud.uploadFile_v2"}))}}));return function(e,n){return t.apply(this,arguments)}}())}function n(){return(n=s()((function*(t){const n=Rn(e.identifiers),i=yield r(t);return new Promise(((e,r)=>{if(t.context&&t.context.aborted)return r(nn({errMsg:"abort"},jr));let a,s;if("web"===Wr().env){const e=new FormData;e.append("key",t.cloudPath),e.append("signature",i.authorization),e.append("x-cos-security-token",i.token),e.append("x-cos-meta-fileid",i.cos_file_id),e.append("file",t.file),a={url:i.url,timeout:t.timeout,filePath:"",header:t.header,name:"",formData:e}}else a={url:i.url,timeout:t.timeout,filePath:t.filePath,header:t.header,name:"file",formData:{key:t.cloudPath,signature:i.authorization,"x-cos-security-token":i.token,"x-cos-meta-fileid":i.cos_file_id}};s=n._uploadFileSkipCheckDomain(o()(o()({},a),{},{success:t=>{try{if(t.statusCode>=200&&t.statusCode<300)e({errMsg:si(jr),fileID:i.file_id,statusCode:t.statusCode});else{const e=new en({errMsg:`status ${t.statusCode}, error: ${t.data};`});r(e)}}catch(e){const n=new en({errMsg:`Error : ${t.data};`});r(n)}},fail:e=>{r(e)}})),s&&(s.onProgressUpdate((function(){t.uploadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&$t(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(n._uploadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=s.abort.bind(s)))}))}))).apply(this,arguments)}function i(){return(i=s()((function*(t){return new Promise(((n,i)=>{wx.getFileInfo?wx.getFileInfo({filePath:t,success:t=>{t.size>e.appConfig.uploadMaxFileSize?i(new en({errCode:Kt.SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE,errMsg:`exceed max upload file size: ${e.appConfig.uploadMaxFileSize/1024/1024} MB`})):n()},fail:()=>{n()}}):n()}))}))).apply(this,arguments)}function r(e){return a.apply(this,arguments)}function a(){return(a=s()((function*(t){const n=JSON.stringify({path:t.cloudPath}),i=+new Date,r=(yield e.request({apiName:"tcbapi_cos_uploadfile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=i,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=r.baseresponse.stat.qbase_cost_time),!r.url)throw new en({errCode:Kt.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL,errMsg:Kt[Kt.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL]});return r}))).apply(this,arguments)}}const Vr="cloud.downloadFile";function Hr(e){return function(e){if(En(e=xn(e)))return function(e){const n={aborted:!1},i=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(n),r={apiStartTime:+new Date};return t(o()(o()({},e),{},{context:n,timing:r,downloadTaskAgent:i})).then((t=>{bn(Vr,e,t)})).catch((t=>{wn(Vr,e,t)})),i}(e);{const n={apiStartTime:+new Date};return t(o()(o()({},e),{},{timing:n}))}};function t(e){return n.apply(this,arguments)}function n(){return(n=s()((function*(e){return new Promise(function(){var t=s()((function*(t,n){try{if(i(e),e.context&&(e.context.abort=function(){n(nn({errMsg:"abort"},Vr))},e.context.aborted))return n(nn({errMsg:"abort"},Vr));t(yield r(e))}catch(e){n(nn(e,Vr))}finally{Jn(o()(o()({},e.timing),{},{apiEndTime:+new Date,apiName:Vr}))}}));return function(e,n){return t.apply(this,arguments)}}())}))).apply(this,arguments)}function i(e){Tn(e,{fileID:"string"}),e.config&&e.config.env&&Tn(e.config.env,"string")}function r(e){return a.apply(this,arguments)}function a(){return(a=s()((function*(t){const n=Rn(e.identifiers),i=yield c(t);return new Promise(((e,r)=>{if(t.context&&t.context.aborted)return r(nn({errMsg:"abort"},Vr));const o=n._downloadFileSkipCheckDomain({url:i,success:t=>{e(t)},fail:e=>{r(e)}});o&&(o.onProgressUpdate((function(){t.downloadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&$t(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(n._downloadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=o.abort.bind(o)))}))}))).apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return(l=s()((function*(t){const n=JSON.stringify({fileid:t.fileID}),i=+new Date,r=(yield e.request({apiName:"tcbapi_downloadfile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=i,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=r.baseresponse.stat.qbase_cost_time),!r.download_url)throw new en({errCode:Kt.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL,errMsg:Kt[Kt.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL]});return r.download_url.indexOf("?")>-1?r.download_url+="&skip_domain_check=true":r.download_url+="?skip_domain_check=true",r.download_url}))).apply(this,arguments)}}const zr="cloud.getTempFileURL";function Zr(e){return function(e){const t=xn(e);if(t.timing={apiStartTime:+new Date},En(t))return function(e){n(e).then((t=>{bn(zr,e,t)})).catch((t=>{wn(zr,e,t)}))}(t);return n(t)};function t(t){if(Tn(t,{fileList:"array"}),t.config&&t.config.env&&Tn(t.config.env,"string"),e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new en({errCode:Kt.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function n(e){return i.apply(this,arguments)}function i(){return(i=s()((function*(e){try{if(t(e),!e.fileList.length)return{errMsg:si(zr),fileList:[]};return yield r(e)}catch(e){throw nn(e,zr)}finally{Jn(o()(o()({},e.timing),{},{apiEndTime:+new Date,apiName:zr}))}}))).apply(this,arguments)}function r(e){return a.apply(this,arguments)}function a(){return(a=s()((function*(t){const n={file_list:t.fileList.map((e=>Zt(e)?{fileid:e}:{fileid:e.fileID,max_age:e.maxAge}))},i=JSON.stringify(n);t.timing.tunnelStartTime=+new Date;const r=yield e.request({apiName:"tcbapi_gettempfileurl",serviceName:e.name,serializedReqData:i,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;const o=r.data;return t.timing.tunnelTimeNoCSNetCost=o.baseresponse.stat.qbase_cost_time,{errMsg:si(zr),fileList:o.download_list.map((e=>({fileID:e.fileid,tempFileURL:e.download_url,maxAge:e.max_age,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}const Yr="cloud.deleteFile";function $r(e){return function(e){const t=xn(e);if(t.timing={apiStartTime:+new Date},En(t))return function(e){n(e).then((t=>{bn(Yr,e,t)})).catch((t=>{wn(Yr,e,t)}))}(t);return n(t)};function t(t){Tn(t,{fileList:"array"}),t.config&&t.config.env&&Tn(t.config.env,"string");for(let e=0,n=t.fileList.length;e<n;e++)Tn(t.fileList[e],"string",`parameter.fileList[${e}]`);if(e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new en({errCode:Kt.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function n(e){return i.apply(this,arguments)}function i(){return(i=s()((function*(e){try{if(t(e),!e.fileList.length)return{errMsg:si(Yr),fileList:[]};return yield r(e)}catch(e){throw nn(e,Yr)}finally{Jn(o()(o()({},e.timing),{},{apiEndTime:+new Date,apiName:Yr}))}}))).apply(this,arguments)}function r(e){return a.apply(this,arguments)}function a(){return(a=s()((function*(t){const n={fileid_list:t.fileList},i=JSON.stringify(n);t.timing.tunnelStartTime=+new Date;const r=yield e.request({apiName:"tcbapi_deletefile",serviceName:e.name,serializedReqData:i,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;const o=r.data;return t.timing.tunnelTimeNoCSNetCost=o.baseresponse.stat.qbase_cost_time,{errMsg:si(Yr),fileList:o.delete_list.map((e=>({fileID:e.fileid,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}function qr(e){return{uploadFile:Gr(e),downloadFile:Hr(e),getTempFileURL:Zr(e),deleteFile:$r(e)}}const Qr="storage";function Jr(e){e.registerService(function(e){const t={name:Qr,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get env(){return e.getEnvForService(Qr)},get debug(){return e.debug},appConfig:{get uploadMaxFileSize(){return e.appConfig.upload_max_file_size},get getTempFileURLMaxReq(){return e.appConfig.get_temp_file_url_max_requests}}};return{name:Qr,context:t,getAPIs:qr.bind(null,t)}}(e))}const Xr=Symbol.for("UNSET_FIELD_NAME"),Kr=Symbol.for("AGGREGATE"),eo=Symbol.for("AGGREGATE_PIPELINE"),to=Symbol.for("AGGREGATE_PIPELINE_STAGE"),no=Symbol.for("UPDATE_COMMAND"),io=Symbol.for("QUERY_COMMAND"),ro=Symbol.for("LOGIC_COMMAND"),oo=Symbol.for("AGGREGATE_COMMAND"),ao=Symbol.for("PROJECT_COMMAND"),so=Symbol.for("GEO_POINT"),co=Symbol.for("GEO_LINESTRING"),lo=Symbol.for("GEO_POLYGON"),uo=Symbol.for("GEO_MULTIPOINT"),ho=Symbol.for("GEO_MULTILINESTRING"),po=Symbol.for("GEO_MULTIPOLYGON"),fo=Symbol.for("SERVER_DATE"),go=Symbol.for("REGEXP");let _o;!function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"}(_o||(_o={}));const mo=[_o.AND,_o.OR,_o.NOT,_o.NOR],yo=new Set(mo);class vo{constructor(e,t,n){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=ro,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||Xr}_setFieldName(e){const t=this.operands.map((t=>t===_o.AND||t===_o.OR?t._setFieldName(e):t));return new vo(this.operator,t,e)}and(...e){Sn(arguments[0],"expressions","and");const t=qt(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new vo(_o.AND,t,this.fieldName)}or(...e){Sn(arguments[0],"expressions","or");const t=qt(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new vo(_o.OR,t,this.fieldName)}nor(...e){Sn(arguments[0],"expressions","nor");const t=qt(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new vo(_o.NOR,t,this.fieldName)}not(e){return Sn(e,"expression","not"),new vo(_o.NOT,[e],this.fieldName)}toJSON(){}}function Ao(e){return e&&e instanceof vo&&e._internalType===ro}let bo;!function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects",e.EXISTS="exists",e.MOD="mod",e.ALL="all",e.ELEM_MATCH="elemMatch",e.SIZE="size",e.EXPR="expr"}(bo||(bo={}));const wo=[bo.EQ,bo.NEQ,bo.GT,bo.GTE,bo.LT,bo.LTE,bo.IN,bo.NIN,bo.GEO_NEAR,bo.GEO_WITHIN,bo.GEO_INTERSECTS,bo.EXISTS,bo.MOD,bo.ALL,bo.ELEM_MATCH,bo.SIZE],Eo=new Set(wo);new Set([...Eo,...yo]);class To extends vo{constructor(e,t,n){super(e,t,n),this.operator=void 0,this.__safe_props__=void 0,this.operator=e,this._internalType=io}_setFieldName(e){return new To(this.operator,this.operands,e)}eq(e){const t=new To(bo.EQ,[e],this.fieldName);return this.and(t)}neq(e){const t=new To(bo.NEQ,[e],this.fieldName);return this.and(t)}gt(e){const t=new To(bo.GT,[e],this.fieldName);return this.and(t)}gte(e){const t=new To(bo.GTE,[e],this.fieldName);return this.and(t)}lt(e){const t=new To(bo.LT,[e],this.fieldName);return this.and(t)}lte(e){const t=new To(bo.LTE,[e],this.fieldName);return this.and(t)}in(e){Tn(e,"array");const t=new To(bo.IN,e,this.fieldName);return this.and(t)}nin(e){Tn(e,"array");const t=new To(bo.NIN,e,this.fieldName);return this.and(t)}geoNear(e){const t=new To(bo.GEO_NEAR,[e],this.fieldName);return this.and(t)}geoWithin(e){const t=new To(bo.GEO_WITHIN,[e],this.fieldName);return this.and(t)}geoIntersects(e){const t=new To(bo.GEO_INTERSECTS,[e],this.fieldName);return this.and(t)}exists(e){const t=new To(bo.EXISTS,[e],this.fieldName);return this.and(t)}mod(e,t){const n=new To(bo.MOD,[e,t],this.fieldName);return this.and(n)}all(e){const t=new To(bo.ALL,e,this.fieldName);return this.and(t)}elemMatch(e){const t=new To(bo.ELEM_MATCH,[e],this.fieldName);return this.and(t)}size(e){const t=new To(bo.SIZE,[e],this.fieldName);return this.and(t)}}function So(e){return e&&e instanceof To&&e._internalType===io}let Co;!function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.MIN="min",e.MAX="max",e.RENAME="rename",e.BIT="bit",e.PUSH="push",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.PULL="pull",e.PULL_ALL="pullAll"}(Co||(Co={}));new Set([Co.SET,Co.REMOVE,Co.INC,Co.MUL,Co.MIN,Co.MAX,Co.RENAME,Co.BIT,Co.PUSH,Co.POP,Co.SHIFT,Co.UNSHIFT,Co.ADD_TO_SET,Co.PULL,Co.PULL_ALL]);class Io{constructor(e,t,n){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=no,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||Xr}_setFieldName(e){return new Io(this.operator,this.operands,e)}toJSON(){}}function xo(e){return e&&e instanceof Io&&e._internalType===no}let Do;!function(e){e.ABS="abs",e.ADD="add",e.ADDTOSET="addToSet",e.ALLELEMENTSTRUE="allElementsTrue",e.AND="and",e.ANYELEMENTTRUE="anyElementTrue",e.ARRAYELEMAT="arrayElemAt",e.ARRAYTOOBJECT="arrayToObject",e.AVG="avg",e.CEIL="ceil",e.CMP="cmp",e.CONCAT="concat",e.CONCATARRAYS="concatArrays",e.COND="cond",e.CONVERT="convert",e.DATEFROMPARTS="dateFromParts",e.DATETOPARTS="dateToParts",e.DATEFROMSTRING="dateFromString",e.DATETOSTRING="dateToString",e.DAYOFMONTH="dayOfMonth",e.DAYOFWEEK="dayOfWeek",e.DAYOFYEAR="dayOfYear",e.DIVIDE="divide",e.EQ="eq",e.EXP="exp",e.FILTER="filter",e.FIRST="first",e.FLOOR="floor",e.GT="gt",e.GTE="gte",e.HOUR="hour",e.IFNULL="ifNull",e.IN="in",e.INDEXOFARRAY="indexOfArray",e.INDEXOFBYTES="indexOfBytes",e.INDEXOFCP="indexOfCP",e.ISARRAY="isArray",e.ISODAYOFWEEK="isoDayOfWeek",e.ISOWEEK="isoWeek",e.ISOWEEKYEAR="isoWeekYear",e.LAST="last",e.LET="let",e.LITERAL="literal",e.LN="ln",e.LOG="log",e.LOG10="log10",e.LT="lt",e.LTE="lte",e.LTRIM="ltrim",e.MAP="map",e.MAX="max",e.MERGEOBJECTS="mergeObjects",e.META="meta",e.MIN="min",e.MILLISECOND="millisecond",e.MINUTE="minute",e.MOD="mod",e.MONTH="month",e.MULTIPLY="multiply",e.NEQ="ne",e.NOT="not",e.OBJECTTOARRAY="objectToArray",e.OR="or",e.POW="pow",e.PUSH="push",e.RANGE="range",e.REDUCE="reduce",e.REVERSEARRAY="reverseArray",e.RTRIM="rtrim",e.SECOND="second",e.SETDIFFERENCE="setDifference",e.SETEQUALS="setEquals",e.SETINTERSECTION="setIntersection",e.SETISSUBSET="setIsSubset",e.SETUNION="setUnion",e.SIZE="size",e.SLICE="slice",e.SPLIT="split",e.SQRT="sqrt",e.STDDEVPOP="stdDevPop",e.STDDEVSAMP="stdDevSamp",e.STRCASECMP="strcasecmp",e.STRLENBYTES="strLenBytes",e.STRLENCP="strLenCP",e.SUBSTR="substr",e.SUBSTRBYTES="substrBytes",e.SUBSTRCP="substrCP",e.SUBTRACT="subtract",e.SUM="sum",e.SWITCH="switch",e.TOBOOL="toBool",e.TODATE="toDate",e.TODECIMAL="toDecimal",e.TODOUBLE="toDouble",e.TOINT="toInt",e.TOLONG="toLong",e.TOOBJECTID="toObjectId",e.TOSTRING="toString",e.TOLOWER="toLower",e.TOUPPER="toUpper",e.TRIM="trim",e.TRUNC="trunc",e.TYPE="type",e.WEEK="week",e.YEAR="year",e.ZIP="zip"}(Do||(Do={}));Do.ABS,Do.ADD,Do.ADDTOSET,Do.ALLELEMENTSTRUE,Do.AND,Do.ANYELEMENTTRUE,Do.ARRAYELEMAT,Do.ARRAYTOOBJECT,Do.AVG,Do.CEIL,Do.CMP,Do.CONCAT,Do.CONCATARRAYS,Do.COND,Do.CONVERT,Do.DATEFROMPARTS,Do.DATETOPARTS,Do.DATEFROMSTRING,Do.DATETOSTRING,Do.DAYOFMONTH,Do.DAYOFWEEK,Do.DAYOFYEAR,Do.DIVIDE,Do.EQ,Do.EXP,Do.FILTER,Do.FIRST,Do.FLOOR,Do.GT,Do.GTE,Do.HOUR,Do.IFNULL,Do.IN,Do.INDEXOFARRAY,Do.INDEXOFBYTES,Do.INDEXOFCP,Do.ISARRAY,Do.ISODAYOFWEEK,Do.ISOWEEK,Do.ISOWEEKYEAR,Do.LAST,Do.LET,Do.LITERAL,Do.LN,Do.LOG,Do.LOG10,Do.LT,Do.LTE,Do.LTRIM,Do.MAP,Do.MAX,Do.MERGEOBJECTS,Do.META,Do.MIN,Do.MILLISECOND,Do.MINUTE,Do.MOD,Do.MONTH,Do.MULTIPLY,Do.NEQ,Do.NOT,Do.OBJECTTOARRAY,Do.OR,Do.POW,Do.PUSH,Do.RANGE,Do.REDUCE,Do.REVERSEARRAY,Do.RTRIM,Do.SECOND,Do.SETDIFFERENCE,Do.SETEQUALS,Do.SETINTERSECTION,Do.SETISSUBSET,Do.SETUNION,Do.SIZE,Do.SLICE,Do.SPLIT,Do.SQRT,Do.STDDEVPOP,Do.STDDEVSAMP,Do.STRCASECMP,Do.STRLENBYTES,Do.STRLENCP,Do.SUBSTR,Do.SUBSTRBYTES,Do.SUBSTRCP,Do.SUBTRACT,Do.SUM,Do.SWITCH,Do.TOBOOL,Do.TODATE,Do.TODECIMAL,Do.TODOUBLE,Do.TOINT,Do.TOLONG,Do.TOOBJECTID,Do.TOSTRING,Do.TOLOWER,Do.TOUPPER,Do.TRIM,Do.TRUNC,Do.TYPE,Do.WEEK,Do.YEAR,Do.ZIP;class Oo{constructor(e,t,n){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=oo,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||Xr}_setFieldName(e){return new Oo(this.operator,this.operands,e)}}function Po(e){return e&&e instanceof Oo&&e._internalType===oo}let Ro;!function(e){e.SLICE="slice"}(Ro||(Ro={}));new Set([Ro.SLICE]);class ko{constructor(e,t,n){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this.__safe_props__=void 0,this._internalType=ao,this.operator=e,this.operands=t,this.fieldName=n||Xr}_setFieldName(e){return new ko(this.operator,this.operands,e)}}function No(e){return e&&e instanceof ko&&e._internalType===ao}let Mo,Lo,Bo;function Fo(e){return Uo.apply(this,arguments)}function Uo(){return(Uo=s()((function*(e){const{env:t,collectionName:n,data:i,instanceContext:r,timing:o}=e,a=JSON.stringify(i);Cn({input:a,max:r.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(r.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});const s={collection_name:n,data:a},c=JSON.stringify(s);o.tunnelStartTime=+new Date;const l=yield r.serviceContext.request({apiName:"tcbapi_db_adddocument",serviceName:r.serviceContext.name,serializedReqData:c,requireDataNotEmpty:!0,env:t||r.serviceContext.env});o.tunnelEndTime=+new Date;const u=l.data;return o.tunnelTimeNoCSNetCost=u.baseresponse.stat.qbase_cost_time,{_id:u._id_type===Lo.NUMBER?u._id_number:u._id}}))).apply(this,arguments)}function Wo(e){return jo.apply(this,arguments)}function jo(){return(jo=s()((function*(e){const{collectionName:t,query:i,options:r,instanceContext:o,timing:a,env:s}=e,c=Bi()?e.explain:void 0,l=r&&r.multi,u=JSON.stringify({collection_name:t,query:JSON.stringify(i),multi:l,query_type:l?Mo.WHERE:Mo.DOC,explain:c});a.tunnelStartTime=+new Date;const d=yield o.serviceContext.request({apiName:"tcbapi_db_deletedocument",serviceName:o.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:s||o.serviceContext.env});if(a.tunnelEndTime=+new Date,c){const{EJSON:e}=n(795);return e.deserialize(d.data)}const h=d.data;return a.tunnelTimeNoCSNetCost=h.baseresponse.stat.qbase_cost_time,{removed:h.deleted}}))).apply(this,arguments)}function Go(e){return Vo.apply(this,arguments)}function Vo(){return(Vo=s()((function*(e){const{env:t,collectionName:i,query:r,options:o={},instanceContext:a,timing:s,queryType:c}=e,l=Bi()?e.explain:void 0,u={collection_name:i,query:JSON.stringify(r),query_type:c,explain:l};o.offset&&(u.offset=o.offset),o.limit&&(u.limit=o.limit),o.order&&(u.order=o.order),o.projection&&(u.projection=JSON.stringify(o.projection));const d=JSON.stringify(u);s.tunnelStartTime=+new Date;const h=yield a.serviceContext.request({apiName:"tcbapi_db_querydocument",serviceName:a.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:t||a.serviceContext.env});if(s.tunnelEndTime=+new Date,l){const{EJSON:e}=n(795);return e.deserialize(h.data)}const p=h.data;s.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time;let f=p.data_list?JSON.parse(p.data_list):[];return f=a.engine.Decoder.decode(f),{list:f,offset:p.offset,limit:p.limit,total:p.total}}))).apply(this,arguments)}function Ho(e){return zo.apply(this,arguments)}function zo(){return(zo=s()((function*(e){const{env:t,collectionName:i,query:r,data:o,options:a={},instanceContext:s,timing:c,queryType:l}=e,u=Bi()?e.explain:void 0,d=JSON.stringify(o);Cn({input:d,max:s.serviceContext.appConfig.docSizeLimit,name:"update expression",maxWording:`${(s.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});const h={collection_name:i,query:JSON.stringify(r),data:d,query_type:l,explain:u};h.multi=!1!==a.multi,h.merge=!1!==a.merge,a.upsert&&(h.upsert=a.upsert);const p=JSON.stringify(h);c.tunnelStartTime=+new Date;const f=yield s.serviceContext.request({apiName:"tcbapi_db_updatedocument",serviceName:s.serviceContext.name,serializedReqData:p,requireDataNotEmpty:!0,env:t||s.serviceContext.env});if(c.tunnelEndTime=+new Date,u){const{EJSON:e}=n(795);return e.deserialize(f.data)}const g=f.data;return c.tunnelTimeNoCSNetCost=g.baseresponse.stat.qbase_cost_time,{updated:g.updated}}))).apply(this,arguments)}function Zo(e){return Yo.apply(this,arguments)}function Yo(){return(Yo=s()((function*(e){const{env:t,collectionName:n,_id:i,data:r,options:o={},instanceContext:a,timing:s}=e,c=JSON.stringify(r);Cn({input:c,max:a.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(a.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});const l=Yt(i),u={collection_name:n,_id_type:l?Lo.NUMBER:Lo.STRING,data:c};l?u._id_number=i:u._id=i;const d=JSON.stringify(u);s.tunnelStartTime=+new Date;const h=yield a.serviceContext.request({apiName:"tcbapi_db_setdocument",serviceName:a.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:t||a.serviceContext.env});s.tunnelEndTime=+new Date;const p=h.data;return s.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,{_id:p._id_type===Lo.NUMBER?p._id_number:p._id,updated:p._id?0:1,created:p._id?1:0}}))).apply(this,arguments)}function $o(e){return qo.apply(this,arguments)}function qo(){return(qo=s()((function*(e){const{env:t,collectionName:i,query:r,instanceContext:o,timing:a}=e,s=Bi()?e.explain:void 0,c={collection_name:i,query:JSON.stringify(r),query_type:Mo.WHERE,explain:s},l=JSON.stringify(c);a.tunnelStartTime=+new Date;const u=yield o.serviceContext.request({apiName:"tcbapi_db_countdocument",serviceName:o.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||o.serviceContext.env});if(a.tunnelEndTime=+new Date,s){const{EJSON:e}=n(795);return e.deserialize(u.data)}const d=u.data;return a.tunnelTimeNoCSNetCost=d.baseresponse.stat.qbase_cost_time,{total:d.total}}))).apply(this,arguments)}function Qo(e){return Jo.apply(this,arguments)}function Jo(){return(Jo=s()((function*(e){const{env:t,collectionName:i,stages:r,instanceContext:o,timing:a}=e,s=Bi()?e.explain:void 0,c={collection_name:i,stages:r.map((e=>{for(const t in e)return{stage_key:t,stage_value:JSON.stringify(e[t])};throw new Error(`empty encoded stage (${JSON.stringify(e)})`)})),explain:s},l=JSON.stringify(c);a.tunnelStartTime=+new Date;const u=yield o.serviceContext.request({apiName:"tcbapi_db_aggregate",serviceName:o.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||o.serviceContext.env});if(a.tunnelEndTime=+new Date,s){const{EJSON:e}=n(795);return e.deserialize(u.data)}const d=u.data;a.tunnelTimeNoCSNetCost=d.baseresponse.stat.qbase_cost_time;{const{EJSON:e}=n(795);return{list:JSON.parse(d.list).map((t=>e.parse(t)))}}}))).apply(this,arguments)}function Xo(){return(Xo=s()((function*(e,t){const n=(yield e.request({apiName:"tcbapi_db_get_realtime_connection",env:t||e.env,serviceName:e.name,serializedReqData:JSON.stringify({}),requireDataNotEmpty:!0})).data;return{envId:n.env_id,secretVersion:n.secret_version,signStr:n.sign_str,wsUrl:n.ws_url}}))).apply(this,arguments)}!function(e){e[e.WHERE=0]="WHERE",e[e.DOC=1]="DOC"}(Mo||(Mo={})),function(e){e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(Lo||(Lo={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(Bo||(Bo={}));const Ko=e=>{class t extends ta{constructor(e,t){super(t),this.collection=void 0,this._internalType=Kr,this.collection=e}pushStage(e,n){return new t(this.collection,[...this._stages,new ea(e,n)])}end(t={}){const n="collection.aggregate",i={apiStartTime:+new Date},r=()=>Qo({env:e.database.config.env,collectionName:this.collection.collectionName,stages:e.engine.AggregateSerializer.encodeStages(this._stages),instanceContext:e,timing:i,explain:t.explain});const a=En(t),c=new Promise(function(){var e=s()((function*(e,a){try{const a=yield r();if(t.explain&&Bi())return e(a);e({list:a.list,errMsg:si(n)})}catch(e){a(nn(e,n))}finally{Jn(o()(o()({},i),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!a)return c;c.then((e=>{bn(n,t,e)})).catch((e=>{wn(n,t,e)}))}}return t};class ea{constructor(e,t){this.stage=void 0,this.val=void 0,this._internalType=to,this.stage=e,this.val=t}}class ta{constructor(e){this._stages=void 0,this._internalType=eo,this.__safe_props__=void 0,this._stages=e}pushStage(e,t){return new ta([...this._stages,new ea(e,t)])}addFields(e){return this.pushStage("addFields",e)}bucket(e){return this.pushStage("bucket",e)}bucketAuto(e){return this.pushStage("bucketAuto",e)}collStats(e){return this.pushStage("collStats",e)}count(e){return this.pushStage("count",e)}facet(e){return this.pushStage("facet",e)}geoNear(e){return this.pushStage("geoNear",e)}graphLookup(e){return this.pushStage("graphLookup",e)}group(e){return this.pushStage("group",e)}indexStats(){return this.pushStage("indexStats",{})}limit(e){return this.pushStage("limit",e)}lookup(e){return this.pushStage("lookup",e)}match(e){return this.pushStage("match",e)}out(e){return this.pushStage("out",e)}project(e){return this.pushStage("project",e)}redact(e){return this.pushStage("redact",e)}replaceRoot(e){return this.pushStage("replaceRoot",e)}sample(e){return this.pushStage("sample",e)}skip(e){return this.pushStage("skip",e)}sort(e){return this.pushStage("sort",e)}sortByCount(e){return this.pushStage("sortByCount",e)}unwind(e){return this.pushStage("unwind",e)}end(){}}class na extends ta{constructor(e,t=!1){super(e),this._sealed=void 0,this._sealed=t}pushStage(e,t){if(this._sealed)throw new Error("pushing new stage is not allowed after calling 'done()'");return new na([...this._stages,new ea(e,t)])}done(){return new na(this._stages,!0)}}const ia=e=>e&&e._internalType===eo,ra=e=>e&&e._internalType===to,oa=new Set(["each","position","slice","sort"]),aa={eq:e=>new To(bo.EQ,[e]),neq:e=>new To(bo.NEQ,[e]),lt:e=>new To(bo.LT,[e]),lte:e=>new To(bo.LTE,[e]),gt:e=>new To(bo.GT,[e]),gte:e=>new To(bo.GTE,[e]),in:e=>new To(bo.IN,e),nin:e=>new To(bo.NIN,e),geoNear:e=>new To(bo.GEO_NEAR,[e]),geoWithin:e=>new To(bo.GEO_WITHIN,[e]),geoIntersects:e=>new To(bo.GEO_INTERSECTS,[e]),and(...e){const t=qt(arguments[0])?arguments[0]:Array.from(arguments);return new vo(_o.AND,t)},or(...e){const t=qt(arguments[0])?arguments[0]:Array.from(arguments);return new vo(_o.OR,t)},nor(...e){const t=qt(arguments[0])?arguments[0]:Array.from(arguments);return new vo(_o.NOR,t)},not:e=>new vo(_o.NOT,[e]),exists:e=>new To(bo.EXISTS,[e]),mod:(e,t)=>new To(bo.MOD,[e,t]),all:e=>new To(bo.ALL,e),elemMatch:e=>new To(bo.ELEM_MATCH,[e]),size:e=>new To(bo.SIZE,[e]),expr:e=>new To(bo.EXPR,[e]),set:e=>new Io(Co.SET,[e]),remove:()=>new Io(Co.REMOVE,[]),inc:e=>new Io(Co.INC,[e]),mul:e=>new Io(Co.MUL,[e]),min:e=>new Io(Co.MIN,[e]),max:e=>new Io(Co.MAX,[e]),rename:e=>new Io(Co.RENAME,[e]),bit:e=>new Io(Co.BIT,[e]),push(e){let t={};if(qt(e))t.each=e;else if(zt(e)&&qt(e.each)){const n=Object.keys(e);if(1===n.length)t=e;else{let i=!1;for(const e of n)if(!oa.has(e)){i=!0;break}t=i?[e]:e}}else t.each=[e];return new Io(Co.PUSH,[t])},pop:()=>new Io(Co.POP,[]),shift:()=>new Io(Co.SHIFT,[]),unshift(...e){const t=qt(arguments[0])?arguments[0]:Array.from(arguments);return new Io(Co.UNSHIFT,t)},addToSet:e=>new Io(Co.ADD_TO_SET,[e]),pull:e=>new Io(Co.PULL,[e]),pullAll:e=>new Io(Co.PULL_ALL,[e]),project:{slice:e=>new ko(Ro.SLICE,[e])},aggregate:{pipeline:()=>new na([]),abs:e=>new Oo(Do.ABS,[e]),add:e=>new Oo(Do.ADD,[e]),addToSet:e=>new Oo(Do.ADDTOSET,[e]),allElementsTrue:e=>new Oo(Do.ALLELEMENTSTRUE,[e]),and:e=>new Oo(Do.AND,[e]),anyElementTrue:e=>new Oo(Do.ANYELEMENTTRUE,[e]),arrayElemAt:e=>new Oo(Do.ARRAYELEMAT,[e]),arrayToObject:e=>new Oo(Do.ARRAYTOOBJECT,[e]),avg:e=>new Oo(Do.AVG,[e]),ceil:e=>new Oo(Do.CEIL,[e]),cmp:e=>new Oo(Do.CMP,[e]),concat:e=>new Oo(Do.CONCAT,[e]),concatArrays:e=>new Oo(Do.CONCATARRAYS,[e]),cond:e=>new Oo(Do.COND,[e]),convert:e=>new Oo(Do.CONVERT,[e]),dateFromParts:e=>new Oo(Do.DATEFROMPARTS,[e]),dateToParts:e=>new Oo(Do.DATETOPARTS,[e]),dateFromString:e=>new Oo(Do.DATEFROMSTRING,[e]),dateToString:e=>new Oo(Do.DATETOSTRING,[e]),dayOfMonth:e=>new Oo(Do.DAYOFMONTH,[e]),dayOfWeek:e=>new Oo(Do.DAYOFWEEK,[e]),dayOfYear:e=>new Oo(Do.DAYOFYEAR,[e]),divide:e=>new Oo(Do.DIVIDE,[e]),eq:e=>new Oo(Do.EQ,[e]),exp:e=>new Oo(Do.EXP,[e]),filter:e=>new Oo(Do.FILTER,[e]),first:e=>new Oo(Do.FIRST,[e]),floor:e=>new Oo(Do.FLOOR,[e]),gt:e=>new Oo(Do.GT,[e]),gte:e=>new Oo(Do.GTE,[e]),hour:e=>new Oo(Do.HOUR,[e]),ifNull:e=>new Oo(Do.IFNULL,[e]),in:e=>new Oo(Do.IN,[e]),indexOfArray:e=>new Oo(Do.INDEXOFARRAY,[e]),indexOfBytes:e=>new Oo(Do.INDEXOFBYTES,[e]),indexOfCP:e=>new Oo(Do.INDEXOFCP,[e]),isArray:e=>new Oo(Do.ISARRAY,[e]),isoDayOfWeek:e=>new Oo(Do.ISODAYOFWEEK,[e]),isoWeek:e=>new Oo(Do.ISOWEEK,[e]),isoWeekYear:e=>new Oo(Do.ISOWEEKYEAR,[e]),last:e=>new Oo(Do.LAST,[e]),let:e=>new Oo(Do.LET,[e]),literal:e=>new Oo(Do.LITERAL,[e]),ln:e=>new Oo(Do.LN,[e]),log:e=>new Oo(Do.LOG,[e]),log10:e=>new Oo(Do.LOG10,[e]),lt:e=>new Oo(Do.LT,[e]),lte:e=>new Oo(Do.LTE,[e]),ltrim:e=>new Oo(Do.LTRIM,[e]),map:e=>new Oo(Do.MAP,[e]),max:e=>new Oo(Do.MAX,[e]),mergeObjects:e=>new Oo(Do.MERGEOBJECTS,[e]),meta:e=>new Oo(Do.META,[e]),min:e=>new Oo(Do.MIN,[e]),millisecond:e=>new Oo(Do.MILLISECOND,[e]),minute:e=>new Oo(Do.MINUTE,[e]),mod:e=>new Oo(Do.MOD,[e]),month:e=>new Oo(Do.MONTH,[e]),multiply:e=>new Oo(Do.MULTIPLY,[e]),neq:e=>new Oo(Do.NEQ,[e]),not:e=>new Oo(Do.NOT,[e]),objectToArray:e=>new Oo(Do.OBJECTTOARRAY,[e]),or:e=>new Oo(Do.OR,[e]),pow:e=>new Oo(Do.POW,[e]),push:e=>new Oo(Do.PUSH,[e]),range:e=>new Oo(Do.RANGE,[e]),reduce:e=>new Oo(Do.REDUCE,[e]),reverseArray:e=>new Oo(Do.REVERSEARRAY,[e]),rtrim:e=>new Oo(Do.RTRIM,[e]),second:e=>new Oo(Do.SECOND,[e]),setDifference:e=>new Oo(Do.SETDIFFERENCE,[e]),setEquals:e=>new Oo(Do.SETEQUALS,[e]),setIntersection:e=>new Oo(Do.SETINTERSECTION,[e]),setIsSubset:e=>new Oo(Do.SETISSUBSET,[e]),setUnion:e=>new Oo(Do.SETUNION,[e]),size:e=>new Oo(Do.SIZE,[e]),slice:e=>new Oo(Do.SLICE,[e]),split:e=>new Oo(Do.SPLIT,[e]),sqrt:e=>new Oo(Do.SQRT,[e]),stdDevPop:e=>new Oo(Do.STDDEVPOP,[e]),stdDevSamp:e=>new Oo(Do.STDDEVSAMP,[e]),strcasecmp:e=>new Oo(Do.STRCASECMP,[e]),strLenBytes:e=>new Oo(Do.STRLENBYTES,[e]),strLenCP:e=>new Oo(Do.STRLENCP,[e]),substr:e=>new Oo(Do.SUBSTR,[e]),substrBytes:e=>new Oo(Do.SUBSTRBYTES,[e]),substrCP:e=>new Oo(Do.SUBSTRCP,[e]),subtract:e=>new Oo(Do.SUBTRACT,[e]),sum:e=>new Oo(Do.SUM,[e]),switch:e=>new Oo(Do.SWITCH,[e]),toBool:e=>new Oo(Do.TOBOOL,[e]),toDate:e=>new Oo(Do.TODATE,[e]),toDecimal:e=>new Oo(Do.TODECIMAL,[e]),toDouble:e=>new Oo(Do.TODOUBLE,[e]),toInt:e=>new Oo(Do.TOINT,[e]),toLong:e=>new Oo(Do.TOLONG,[e]),toObjectId:e=>new Oo(Do.TOOBJECTID,[e]),toString:e=>new Oo(Do.TOSTRING,[e]),toLower:e=>new Oo(Do.TOLOWER,[e]),toUpper:e=>new Oo(Do.TOUPPER,[e]),trim:e=>new Oo(Do.TRIM,[e]),trunc:e=>new Oo(Do.TRUNC,[e]),type:e=>new Oo(Do.TYPE,[e]),week:e=>new Oo(Do.WEEK,[e]),year:e=>new Oo(Do.YEAR,[e]),zip:e=>new Oo(Do.ZIP,[e])}};function sa(e){return new ca(e)}class ca{constructor(e={offset:0}){this.options=void 0,Tn(e,"object","serverDate.options"),this.options=e}get _internalType(){return fo}toJSON(){return{$date:this.options}}}function la(e,t){return Da(e)?Ea(e):new ua(e,t)}class ua{constructor(e,t){this.longitude=void 0,this.latitude=void 0,this._internalType=so,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}});const n=e,i=t;Object.defineProperties(this,{longitude:{enumerable:!0,configurable:!1,get:()=>n,set(e){if(Tn(e,"number","longitude"),e>180||e<-180)throw new en({errMsg:"longitude should be a number ranges from -180 to 180"})}},latitude:{enumerable:!0,configurable:!1,get:()=>i,set(e){if(Tn(e,"number","latitude"),e>90||e<-90)throw new en({errMsg:"latitude should be a number ranges from -90 to 90"})}}}),this.longitude=n,this.latitude=i}toJSON(){return{type:"Point",coordinates:[(e=this).longitude,e.latitude]};var e}toString(){return JSON.stringify(this.toJSON())}}function da(e){return Oa(e)?Ta(e):new ha(e)}class ha{constructor(e){this.points=void 0,this._internalType=uo,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"MultiPoint",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function pa(e){return Pa(e)?Sa(e):new fa(e)}class fa{constructor(e){this.points=void 0,this._internalType=co,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"LineString",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function ga(e){return Ra(e)?Ca(e):new _a(e)}class _a{constructor(e){this.lines=void 0,this._internalType=ho,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"MultiLineString",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function ma(e){return ka(e)?Ia(e):new ya(e)}class ya{constructor(e){this.lines=void 0,this._internalType=lo,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"Polygon",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function va(e){return Na(e)?xa(e):new Aa(e)}class Aa{constructor(e){this.polygons=void 0,this._internalType=po,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.polygons=e}toJSON(){return{type:"MultiPolygon",coordinates:this.polygons.map((e=>e.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))))}}toString(){return JSON.stringify(this.toJSON())}}let ba;const wa=ba;function Ea(e){return la(e.coordinates[0],e.coordinates[1])}function Ta(e){return da(e.coordinates.map((e=>la(e[0],e[1]))))}function Sa(e){return pa(e.coordinates.map((e=>la(e[0],e[1]))))}function Ca(e){return ga(e.coordinates.map((e=>pa(e.map((e=>la(e[0],e[1])))))))}function Ia(e){return ma(e.coordinates.map((e=>pa(e.map((e=>la(e[0],e[1])))))))}function xa(e){return va(e.coordinates.map((e=>ma(e.map((e=>pa(e.map((e=>la(e[0],e[1]))))))))))}function Da(e){return zt(e)&&Ma(e.coordinates)}function Oa(e){return zt(e)&&La(e.coordinates)}function Pa(e){return zt(e)&&Ba(e.coordinates)}function Ra(e){return zt(e)&&Fa(e.coordinates)}function ka(e){return zt(e)&&Ua(e.coordinates)}function Na(e){return zt(e)&&(t=e.coordinates,qt(t)&&t.every(Ua));var t}function Ma(e){return qt(e)&&Yt(e[0])&&Yt(e[1])}function La(e){return qt(e)&&e.every(Ma)}function Ba(e){return La(e)}function Fa(e){return qt(e)&&e.every(Ba)}function Ua(e){return Fa(e)}function Wa(e){return ja(e,[e])}function ja(e,t){if(!Xt(e)){if(Qt(e))return{$date:+e};if(Jt(e))return{$regex:e.source,$options:e.flags};if(qt(e))return e.map((e=>{if(t.indexOf(e)>-1)throw new en({errCode:Kt.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});return ja(e,[...t,e])}));if(zt(e)){const n=o()({},e);for(const e in n){if(t.indexOf(n[e])>-1)throw new en({errCode:Kt.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});n[e]=ja(n[e],[...t,n[e]])}return n}return e}switch(e._internalType){case so:case uo:case co:case ho:case lo:case po:return e.toJSON();case fo:return{$date:e.options};case go:return{$regex:e.regexp,$options:e.options};default:return e.toJSON?e.toJSON():e}}function Ga(e,t,n,i){const r=o()({},e);for(const o in e){if(/^\$/.test(o))continue;const a=e[o];if(a&&(zt(a)&&!t(a))){if(i.indexOf(a)>-1)throw new en({errCode:Kt.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});const e=Ga(a,t,[...n,o],[...i,a]);r[o]=e;let s=!1;for(const t in e)/^\$/.test(t)?s=!0:(r[`${o}.${t}`]=e[t],delete r[o][t]);s||delete r[o]}}return r}function Va(e){return Ga(e,Za,[],[e])}function Ha(e){return Ga(e,(e=>!1),[],[e])}function za(e,t,n){t[n]||delete e[n];for(const i in t)e[i]?qt(e[i])?e[i].push(t[i]):zt(e[i])?zt(t[i])?Object.assign(e[i],t[i]):(console.warn(`unmergable condition, query is object but condition is ${Ht(t)}, can only overwrite`,t,n),e[i]=t[i]):(console.warn(`to-merge query is of type ${Ht(e)}, can only overwrite`,e,t,n),e[i]=t[i]):e[i]=t[i]}function Za(e){return Xt(e)||Qt(e)||Jt(e)}function Ya(e){return Wa(e)}function $a(e){return function(e){const t=o()({},e);for(const e in t)switch(e){case"$date":switch(Ht(t[e])){case"number":return new Date(t[e]);case"object":return sa(t[e])}break;case"type":switch(t.coordinates,t.type){case"Point":if(Da(t))return Ea(t);break;case"MultiPoint":if(Oa(t))return Ta(t);break;case"LineString":if(Pa(t))return Sa(t);break;case"MultiLineString":if(Ra(t))return Ca(t);break;case"Polygon":if(ka(t))return Ia(t);break;case"MultiPolygon":if(Na(t))return xa(t)}}return e}(e)}function qa(e,t){return{limit:e._query.limit,offset:e._query.offset,order:Qa(e._query.order||[]),projection:t.engine.ProjectionSerializer.encode(e._field)}}function Qa(e){return e.map((e=>({field:e.fieldPath,direction:e.order===Ll.DESC?Bo.DESC:Bo.ASC})))}function Ja(e){const t=Ha(e);for(const e in t)!0===t[e]||1===t[e]?t[e]=1:!1===t[e]||0===t[e]?t[e]=0:delete t[e];return t}let Xa,Ka;!function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED"}(Xa||(Xa={})),function(e){e.CONNECTION_START="connectionStart",e.CONNECTION_SUCCESS="connectionSuccess",e.CONNECTION_FAIL="connectionFail",e.DISCONNECT="disconnect"}(Ka||(Ka={}));const es={[Xa.DISCONNECTED]:{transitions:[{accept:Ka.CONNECTION_START,to:Xa.CONNECTING}]},[Xa.CONNECTING]:{transitions:[{accept:Ka.CONNECTION_SUCCESS,to:Xa.CONNECTED},{accept:Ka.CONNECTION_FAIL,to:Xa.DISCONNECTED},{accept:Ka.DISCONNECT,to:Xa.DISCONNECTED}]},[Xa.CONNECTED]:{transitions:[{accept:Ka.DISCONNECT,to:Xa.DISCONNECTED},{accept:Ka.CONNECTION_FAIL,to:Xa.DISCONNECTED}]}};var ts=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ns=/^\w*$/;const is=function(e,t){if(Ye(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Fn(e))||(ns.test(e)||!ts.test(e)||null!=t&&e in Object(t))};function rs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(rs.Cache||me),n}rs.Cache=me;const os=rs;var as=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ss=/\\(\\)?/g;const cs=function(e){var t=os(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(as,(function(e,n,i,r){t.push(i?r.replace(ss,"$1"):n||e)})),t}));const ls=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r};var us=S?S.prototype:void 0,ds=us?us.toString:void 0;const hs=function e(t){if("string"==typeof t)return t;if(Ye(t))return ls(t,e)+"";if(Fn(t))return ds?ds.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};const ps=function(e){return null==e?"":hs(e)};const fs=function(e,t){return Ye(e)?e:is(e,t)?[e]:cs(ps(e))};const gs=function(e){if("string"==typeof e||Fn(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};const _s=function(e,t,n,i){if(!M(e))return e;for(var r=-1,o=(t=fs(t,e)).length,a=o-1,s=e;null!=s&&++r<o;){var c=gs(t[r]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(r!=a){var u=s[c];void 0===(l=i?i(u,c,s):void 0)&&(l=M(u)?u:Et(t[r+1])?[]:{})}vt(s,c,l),s=s[c]}return e};const ms=function(e,t,n){return null==e?e:_s(e,t,n)};const ys=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};const vs=function(e,t){for(var n=0,i=(t=fs(t,e)).length;null!=e&&n<i;)e=e[gs(t[n++])];return n&&n==i?e:void 0};const As=function(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o};const bs=function(e,t){return t.length<2?e:vs(e,As(t,0,-1))};const ws=function(e,t){return t=fs(t,e),null==(e=bs(e,t))||delete e[gs(ys(t))]};const Es=function(e,t){return null==e||ws(e,t)};const Ts=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e};const Ss=Le(Object.keys,Object);var Cs=Object.prototype.hasOwnProperty;const Is=function(e){if(!Ue(e))return Ss(e);var t=[];for(var n in Object(e))Cs.call(e,n)&&"constructor"!=n&&t.push(n);return t};const xs=function(e){return qe(e)?St(e):Is(e)};const Ds=function(e,t){return e&&At(t,xs(t),e)};const Os=function(e,t){return e&&At(t,Dt(t),e)};const Ps=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o};const Rs=function(){return[]};var ks=Object.prototype.propertyIsEnumerable,Ns=Object.getOwnPropertySymbols;const Ms=Ns?function(e){return null==e?[]:(e=Object(e),Ps(Ns(e),(function(t){return ks.call(e,t)})))}:Rs;const Ls=function(e,t){return At(e,Ms(e),t)};const Bs=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e};const Fs=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Bs(t,Ms(e)),e=Be(e);return t}:Rs;const Us=function(e,t){return At(e,Fs(e),t)};const Ws=function(e,t,n){var i=t(e);return Ye(e)?i:Bs(i,n(e))};const js=function(e){return Ws(e,xs,Ms)};const Gs=function(e){return Ws(e,Dt,Fs)};const Vs=J(T,"DataView");const Hs=J(T,"Promise");const zs=J(T,"Set");const Zs=J(T,"WeakMap");var Ys="[object Map]",$s="[object Promise]",qs="[object Set]",Qs="[object WeakMap]",Js="[object DataView]",Xs=G(Vs),Ks=G(X),ec=G(Hs),tc=G(zs),nc=G(Zs),ic=N;(Vs&&ic(new Vs(new ArrayBuffer(1)))!=Js||X&&ic(new X)!=Ys||Hs&&ic(Hs.resolve())!=$s||zs&&ic(new zs)!=qs||Zs&&ic(new Zs)!=Qs)&&(ic=function(e){var t=N(e),n="[object Object]"==t?e.constructor:void 0,i=n?G(n):"";if(i)switch(i){case Xs:return Js;case Ks:return Ys;case ec:return $s;case tc:return qs;case nc:return Qs}return t});const rc=ic;var oc=Object.prototype.hasOwnProperty;const ac=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&oc.call(e,"index")&&(n.index=e.index,n.input=e.input),n};const sc=function(e,t){var n=t?Pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var cc=/\w*$/;const lc=function(e){var t=new e.constructor(e.source,cc.exec(e));return t.lastIndex=e.lastIndex,t};var uc=S?S.prototype:void 0,dc=uc?uc.valueOf:void 0;const hc=function(e){return dc?Object(dc.call(e)):{}};const pc=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return Pe(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return sc(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Re(e,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return lc(e);case"[object Set]":return new i;case"[object Symbol]":return hc(e)}};const fc=function(e){return je(e)&&"[object Map]"==rc(e)};var gc=ft&&ft.isMap;const _c=gc?ut(gc):fc;const mc=function(e){return je(e)&&"[object Set]"==rc(e)};var yc=ft&&ft.isSet;const vc=yc?ut(yc):mc;var Ac="[object Arguments]",bc="[object Function]",wc="[object Object]",Ec={};Ec[Ac]=Ec["[object Array]"]=Ec["[object ArrayBuffer]"]=Ec["[object DataView]"]=Ec["[object Boolean]"]=Ec["[object Date]"]=Ec["[object Float32Array]"]=Ec["[object Float64Array]"]=Ec["[object Int8Array]"]=Ec["[object Int16Array]"]=Ec["[object Int32Array]"]=Ec["[object Map]"]=Ec["[object Number]"]=Ec["[object Object]"]=Ec["[object RegExp]"]=Ec["[object Set]"]=Ec["[object String]"]=Ec["[object Symbol]"]=Ec["[object Uint8Array]"]=Ec["[object Uint8ClampedArray]"]=Ec["[object Uint16Array]"]=Ec["[object Uint32Array]"]=!0,Ec["[object Error]"]=Ec[bc]=Ec["[object WeakMap]"]=!1;const Tc=function e(t,n,i,r,o,a){var s,c=1&n,l=2&n,u=4&n;if(i&&(s=o?i(t,r,o,a):i(t)),void 0!==s)return s;if(!M(t))return t;var d=Ye(t);if(d){if(s=ac(t),!c)return ke(t,s)}else{var h=rc(t),p=h==bc||"[object GeneratorFunction]"==h;if(tt(t))return De(t,c);if(h==wc||h==Ac||p&&!o){if(s=l||p?{}:We(t),!c)return l?Us(t,Os(s,t)):Ls(t,Ds(s,t))}else{if(!Ec[h])return o?t:{};s=pc(t,h,c)}}a||(a=new Ae);var f=a.get(t);if(f)return f;a.set(t,s),vc(t)?t.forEach((function(r){s.add(e(r,n,i,r,t,a))})):_c(t)&&t.forEach((function(r,o){s.set(o,e(r,n,i,o,t,a))}));var g=d?void 0:(u?l?Gs:js:l?Dt:xs)(t);return Ts(g||t,(function(r,o){g&&(r=t[o=r]),vt(s,o,e(r,n,i,o,t,a))})),s};const Sc=function(e){return Tc(e,5)};let Cc,Ic;!function(e){e.UNINIT="UNINIT",e.CLOSED="CLOSED",e.INIT_LOGGING_IN="INIT_LOGGING_IN",e.INIT_LOGGED_IN="INIT_LOGGED_IN",e.INIT_LOGIN_FAIL="INIT_LOGIN_FAIL",e.INIT_WATCH_PENDING="INIT_WATCH_PENDING",e.INIT_WATCH_FAIL="INIT_WATCH_FAIL",e.INIT_WATCH_SUCCESS="INIT_WATCH_SUCCESS",e.PAUSED="PAUSED",e.ABNORMAL_WATCH_STATUS="ABNORMAL_WATCH_STATUS",e.REBUILD_LOGGING_IN="REBUILD_LOGGING_IN",e.REBUILD_LOGGED_IN="REBUILD_LOGGED_IN",e.REBUILD_LOGIN_FAIL="REBUILD_LOGIN_FAIL",e.REBUILD_WATCH_PENDING="REBUILD_WATCH_PENDING",e.REBUILD_WATCH_FAIL="REBUILD_WATCH_FAIL",e.REBUILD_WATCH_SUCCESS="REBUILD_WATCH_SUCCESS"}(Cc||(Cc={})),function(e){e.CLOSE="close",e.LOGIN_START="loginStart",e.LOGIN_FAIL="loginFail",e.LOGIN_SUCCESS="loginSuccess",e.INIT_WATCH_START="initWatchStart",e.INIT_WATCH_FAIL="initWatchFail",e.INIT_WATCH_SUCCESS="initWatchSuccess",e.WS_DISCONNECTED="wsDisconnected",e.WS_CONNECTED="wsConnected",e.REBUILD_WATCH_START="rebuildWatchStart",e.REBUILD_WATCH_FAIL="rebuildWatchFail",e.REBUILD_WATCH_SUCCESS="rebuildWatchSuccess",e.NEED_REBUILD_WATCH="needRebuildWatch"}(Ic||(Ic={}));const xc={accept:Ic.CLOSE,to:Cc.CLOSED},Dc={accept:Ic.WS_DISCONNECTED,to:Cc.CLOSED},Oc={accept:Ic.WS_DISCONNECTED,to:Cc.PAUSED},Pc={[Cc.UNINIT]:{transitions:[{accept:Ic.LOGIN_START,to:Cc.INIT_LOGGING_IN},Dc,xc]},[Cc.CLOSED]:{transitions:[xc]},[Cc.INIT_LOGGING_IN]:{transitions:[{accept:Ic.LOGIN_FAIL,to:Cc.INIT_LOGIN_FAIL},{accept:Ic.LOGIN_SUCCESS,to:Cc.INIT_LOGGED_IN},Dc,xc]},[Cc.INIT_LOGIN_FAIL]:{transitions:[{accept:Ic.LOGIN_START,to:Cc.INIT_LOGGING_IN},Dc,xc]},[Cc.INIT_LOGGED_IN]:{transitions:[{accept:Ic.INIT_WATCH_START,to:Cc.INIT_WATCH_PENDING},Dc,xc]},[Cc.INIT_WATCH_PENDING]:{transitions:[{accept:Ic.INIT_WATCH_FAIL,to:Cc.INIT_WATCH_FAIL},{accept:Ic.INIT_WATCH_SUCCESS,to:Cc.INIT_WATCH_SUCCESS},Dc,xc]},[Cc.INIT_WATCH_FAIL]:{transitions:[{accept:Ic.LOGIN_START,to:Cc.INIT_LOGGING_IN},Dc,xc]},[Cc.INIT_WATCH_SUCCESS]:{transitions:[{accept:Ic.WS_DISCONNECTED,to:Cc.PAUSED},{accept:Ic.NEED_REBUILD_WATCH,to:Cc.ABNORMAL_WATCH_STATUS},Oc,xc]},[Cc.PAUSED]:{transitions:[{accept:Ic.LOGIN_START,to:Cc.REBUILD_LOGGING_IN},Oc,xc]},[Cc.ABNORMAL_WATCH_STATUS]:{transitions:[{accept:Ic.LOGIN_START,to:Cc.REBUILD_LOGGING_IN},Oc,xc]},[Cc.REBUILD_LOGGING_IN]:{transitions:[{accept:Ic.LOGIN_FAIL,to:Cc.REBUILD_LOGIN_FAIL},{accept:Ic.LOGIN_SUCCESS,to:Cc.REBUILD_LOGGED_IN},Oc,xc]},[Cc.REBUILD_LOGIN_FAIL]:{transitions:[{accept:Ic.LOGIN_START,to:Cc.REBUILD_LOGGING_IN},Oc,xc]},[Cc.REBUILD_LOGGED_IN]:{transitions:[{accept:Ic.REBUILD_WATCH_START,to:Cc.REBUILD_WATCH_PENDING},Oc,xc]},[Cc.REBUILD_WATCH_PENDING]:{transitions:[{accept:Ic.REBUILD_WATCH_FAIL,to:Cc.REBUILD_WATCH_FAIL},{accept:Ic.REBUILD_WATCH_SUCCESS,to:Cc.REBUILD_WATCH_SUCCESS},Oc,xc]},[Cc.REBUILD_WATCH_FAIL]:{transitions:[{accept:Ic.LOGIN_START,to:Cc.REBUILD_LOGGING_IN},Oc,xc]},[Cc.REBUILD_WATCH_SUCCESS]:{transitions:[{accept:Ic.NEED_REBUILD_WATCH,to:Cc.ABNORMAL_WATCH_STATUS},Oc,xc]}};class Rc{constructor(e){this.currentState=void 0,this.states=void 0,this.listeners=new Set,this.history=void 0,this.currentState=e.initialState,this.states=new Map;for(const t in e.states)this.states.set(t,{name:t,transitions:new Map(e.states[t].transitions.map((({accept:e,to:t})=>[e,t])))});this.history={options:{enable:!1,limit:100},transitions:[]},e.history&&("boolean"==typeof e.history?e.history&&(this.history.options.enable=!0):Boolean(e.history.enable)&&(void 0===e.history.limit||null===e.history.limit?this.history.options={enable:!0,limit:100}:e.history.limit>0&&(this.history.options={enable:!0,limit:e.history.limit}))),this.history.options.enable&&this.history.transitions.push({state:this.currentState})}transition(e,t){if(t&&(t instanceof Set?!t.has(this.currentState):t!==this.currentState))throw new kc(`current state (${this.currentState}) != expected from state (${t instanceof Set?JSON.stringify([...t]):t})`,"unexpectedFromState");const n="string"==typeof e?{type:e}:e,i=this.states.get(this.currentState),r=i.transitions.get(n.type);if(!r)throw new kc(`current state (${this.currentState}) does not accept "${n.type}"`,"unexpectedInput");this.currentState=r,this.history.options.enable&&(this.history.transitions.push({event:n.type,state:this.currentState}),this.history.transitions.length>this.history.options.limit&&(this.history.transitions.length===this.history.options.limit+1?this.history.transitions.shift():this.history.transitions.splice(0,this.history.transitions.length-this.history.options.limit))),this.listeners.forEach((e=>{try{e({event:n,from:i.name,to:this.currentState})}catch(e){console.error("FSM listener exec error: ",e)}}))}canAccept(e){return this.states.get(this.currentState).transitions.has(e)}subscribe(e){this.listeners.add(e)}unsubscribe(e){this.listeners.delete(e)}getHistoryRepresentation(e){if(!this.history.options.enable)return"";return`states: ${(e.limit?this.history.transitions.slice(-e.limit):this.history.transitions).map((({state:e,event:t})=>`${t?`-(${t})->`:""}${e}`)).join("")}`}}class kc extends Error{constructor(e,t,n){super(e),this.type="transition",this.subtype=void 0,this.payload=void 0,this.generic=!0,this.subtype=t,this.payload=n}}function Nc(e=""){return`${e?`${e}_`:""}${+new Date}_${Math.random()}`}const Mc=1128,Lc=1,Bc=2,Fc=3,Uc=4,Wc=5,jc=6,Gc=7,Vc=8,Hc=9,zc=10,Zc=11,Yc=12,$c=13,qc=14,Qc=15,Jc=16,Xc=17,Kc=18,el=30,tl=31,nl=32,il=33,rl=34,ol=35,al=36,sl=37,cl=38,ll=39,ul=40,dl=50,hl=51,pl=52,fl=53,gl=54,_l=55,ml=56,yl=57,vl=58,Al=59,bl=60;class wl{constructor(e){this.close=void 0,this.onChange=void 0,this.onError=void 0,this.close=e.close,this.onChange=e.onChange,this.onError=e.onError,e.debug&&Object.defineProperty(this,"virtualClient",{get:()=>e.virtualClient})}}class El{constructor(e){this.id=void 0,this.docChanges=void 0,this.docs=void 0,this.type=void 0,this.EJSON=void 0,this.requestId=void 0,this.watchId=void 0;const{id:t,docChanges:n,docs:i,type:r,EJSON:o,requestId:a,watchId:s}=e;Object.defineProperties(this,{id:{get:()=>t,enumerable:!0},docChanges:{get:()=>n,enumerable:!0},docs:{get:()=>i,enumerable:!0},type:{get:()=>r,enumerable:!0}}),this.requestId=a,this.watchId=s}}class Tl extends Error{constructor(e){super(`Watch Error ${JSON.stringify(e.msgData)} (requestid: ${e.requestId})`),this.isRealtimeErrorMessageError=!0,this.payload=void 0,this.payload=e}}const Sl=e=>e&&e.isRealtimeErrorMessageError,Cl=new Set([Cc.REBUILD_LOGGING_IN,Cc.INIT_LOGGING_IN]),Il=e=>{0};class xl{constructor(e){var t=this;this.watchId=void 0,this._parentFSM=void 0,this._fsm=void 0,this.envId=void 0,this.collectionName=void 0,this.query=void 0,this.limit=void 0,this.orderBy=void 0,this.queryType=void 0,this.send=void 0,this.login=void 0,this.isWSConnected=void 0,this.getWaitExpectedTimeoutLength=void 0,this.getEJSON=void 0,this.getServiceContext=void 0,this.onWatchStart=void 0,this.onWatchClose=void 0,this.timing=void 0,this.closeWatchInvoked=!1,this.userOnErrorInvoked=!1,this.debug=void 0,this.wsclient=void 0,this.listener=void 0,this._availableRetries=void 0,this._ackTimeoutId=void 0,this._loginInvalidated=!1,this._errors=[],this._parentFSMListener=void 0,this._FSMListener=void 0,this._wsDisconnectionTS=void 0,this.sessionInfo=void 0,this._waitExpectedTimeoutId=void 0,this._snapshotHistory=[],this._login=function(){var e=s()((function*(e){t._fsm.transition(Ic.LOGIN_START);try{const n=yield t.login(t.envId,e||t._loginInvalidated,t.timing);t.envId||(t.envId=n.envId),t._fsm.transition(Ic.LOGIN_SUCCESS,Cl),t._loginInvalidated=!1}catch(e){t._errors.push(e),t._loginInvalidated=!0;try{t._fsm.transition(Ic.LOGIN_FAIL,Cl)}catch(e){console.warn("[realtime]",e)}}}));return function(t){return e.apply(this,arguments)}}(),this.initWatch=s()((function*(){const e=Date.now(),n=Nc();try{t._fsm.transition(Ic.INIT_WATCH_START,Cc.INIT_LOGGED_IN);const i=t.envId,r={watchId:t.watchId,requestId:n,msgType:"INIT_WATCH",msgData:{envId:i,collName:t.collectionName,query:t.query,limit:t.limit,orderBy:t.orderBy,queryType:t.queryType}},o=yield t.send({msg:r,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus();const{events:a,currEvent:s}=o.msgData;if(t.sessionInfo={queryID:o.msgData.queryID,currentEventId:s-1,currentDocs:[],currentEventTS:Date.now()},a.length>0){for(const e of a)e.ID=s;t.handleServerEvents(o)}else{t.sessionInfo.currentEventId=s;const e=new El({id:s,docChanges:[],docs:[],type:"init",EJSON:t.getEJSON(),requestId:o.requestId,watchId:t.watchId});fn((()=>t.listener.onChange(e)))(),t.scheduleSendACK(),t.debug&&t._snapshotHistory.push(e)}t.onWatchStart(t,t.sessionInfo.queryID),t._availableRetries.INIT_WATCH=2,t._wsDisconnectionTS=void 0,Xn(Mc,Wc,!0),Jn({apiName:"_realtime.initWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(Ic.INIT_WATCH_SUCCESS)}catch(i){Jn({apiName:"_realtime.initWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(i,{operationName:"INIT_WATCH",requestId:n})}})),this.rebuildWatch=s()((function*(){const e=Date.now(),n=Nc();try{t._fsm.transition(Ic.REBUILD_WATCH_START,Cc.REBUILD_LOGGED_IN);const i=t.envId;if(!t.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");if(t._wsDisconnectionTS&&Date.now()-t._wsDisconnectionTS>.9*t.getServiceContext().appConfig.realtimeQueryEventCacheTimeout)throw new on("query event cache timeout, ws has been disconnected for too long, PLEASE RECONNECT manually",{subtype:"queryEventCacheClientTimeout",retryable:!1});const r={watchId:t.watchId,requestId:n,msgType:"REBUILD_WATCH",msgData:{envId:i,collName:t.collectionName,queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}},o=yield t.send({msg:r,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus(),yield t.handleServerEvents(o),t._availableRetries.REBUILD_WATCH=2,t._wsDisconnectionTS=void 0,Xn(Mc,Gc,!0),Jn({apiName:"_realtime.rebuildWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(Ic.REBUILD_WATCH_SUCCESS)}catch(i){Jn({apiName:"_realtime.rebuildWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(i,{operationName:"REBUILD_WATCH",requestId:n})}})),this.handleWatchEstablishmentError=function(){var e=s()((function*(e,n){const i="INIT_WATCH"===n.operationName,r=r=>{const o=`${r||e} (${i?"initWatch":"rebuildWatch"} requestId ${n.requestId})`;if(t.closeWithError(new en({errCode:i?Kt.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:Kt.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:o})),Xn(Mc,i?jc:Vc,!0),!Sl(e)){if(an(e)){switch(e.payload.subtype){case"totalConnectionTimeout":Xn(Mc,i?gl:_l,!0);break;case"queryEventCacheClientTimeout":i||Xn(Mc,ml,!0)}return}return cn(e)?void Xn(Mc,i?yl:vl,!0):void Xn(Mc,i?Al:bl,!0)}switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":Xn(Mc,i?dl:hl,!0);break;default:Xn(Mc,i?pl:fl,!0)}};t._errors.push(e),t.handleCommonError(e,{onSignError:()=>{t._loginInvalidated=!0,t._fsm.transition(t.initialized?Ic.REBUILD_WATCH_FAIL:Ic.INIT_WATCH_FAIL)},onTimeoutError:e=>{e.payload&&!e.payload.retryable?r(e):t._fsm.transition(t.initialized?Ic.REBUILD_WATCH_FAIL:Ic.INIT_WATCH_FAIL)},onNotRetryableError:r,onCancelledError:e=>{t._fsm.transition(t.initialized?Ic.REBUILD_WATCH_FAIL:Ic.INIT_WATCH_FAIL)},onUnknownError:()=>{t._fsm.transition(t.initialized?Ic.REBUILD_WATCH_FAIL:Ic.INIT_WATCH_FAIL)}})}));return function(t,n){return e.apply(this,arguments)}}(),this.closeWatch=s()((function*(){t.closeWatchInvoked=!0;const e=t.sessionInfo?t.sessionInfo.queryID:"";if(t._fsm.currentState!==Cc.CLOSED)try{t._fsm.transition(Ic.CLOSE),yield t.sendCloseWatch()}catch(e){console.warn(`[realtime] non-fatal error while closing watch: ${e}`)}finally{t.sessionInfo=void 0,t.onWatchClose(t,e),t._cleanup()}})),this.sendCloseWatch=s()((function*(){const e={watchId:t.watchId,requestId:Nc(),msgType:"CLOSE_WATCH",msgData:null};yield t.send({msg:e})})),this.scheduleSendACK=()=>{this.clearACKSchedule(),this._ackTimeoutId=setTimeout((()=>{this._waitExpectedTimeoutId?this.scheduleSendACK():this.sendACK()}),1e4)},this.clearACKSchedule=()=>{this._ackTimeoutId&&clearTimeout(this._ackTimeoutId)},this.sendACK=s()((function*(){try{if(t._fsm.currentState!==Cc.INIT_WATCH_SUCCESS&&t._fsm.currentState!==Cc.REBUILD_WATCH_SUCCESS)return void t.scheduleSendACK();if(!t.sessionInfo)return void console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)");const e={watchId:t.watchId,requestId:Nc(),msgType:"CHECK_LAST",msgData:{queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}};yield t.send({msg:e}),t.scheduleSendACK()}catch(e){if(Sl(e)){const n=e.payload;switch(n.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return t._loginInvalidated=!0,void(t._fsm.currentState!==Cc.INIT_WATCH_SUCCESS&&t._fsm.currentState!==Cc.REBUILD_WATCH_SUCCESS||t._fsm.transition(Ic.NEED_REBUILD_WATCH));case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return void t.closeWithError(new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:n.msgData.code}))}}t._availableRetries.CHECK_LAST&&t._availableRetries.CHECK_LAST>0?(t._availableRetries.CHECK_LAST--,t.scheduleSendACK()):t.closeWithError(new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:e}))}})),this.handleCommonError=(e,t)=>{if(Sl(e)){switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":default:return void t.onNotRetryableError(e)}}else{if(an(e))return void t.onTimeoutError(e);if(cn(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId=`watchid_${+new Date}_${Math.random()}`,this._parentFSM=e.parentFSM,this.envId=e.envId,this.collectionName=e.collectionName,this.query=e.query,this.limit=e.limit,this.orderBy=e.orderBy,this.queryType=e.queryType,this.send=e.send,this.login=e.login,this.isWSConnected=e.isWSConnected,this.getWaitExpectedTimeoutLength=e.getWaitExpectedTimeoutLength,this.getEJSON=e.getEJSON,this.getServiceContext=e.getServiceContext,this.onWatchStart=e.onWatchStart,this.onWatchClose=e.onWatchClose,this.timing=e.timing,this.debug=e.debug,this._availableRetries={INIT_WATCH:2,REBUILD_WATCH:2,CHECK_LAST:2},this._fsm=new Rc({initialState:Cc.UNINIT,states:Pc,history:!0}),this._subscribeParentFSMEvents(),this._subscribeFSMEvents(),this.listener=new wl({close:this.closeWatch,onChange:e.onChange,onError:e.onError,debug:this.debug,virtualClient:this}),this._parentFSM.currentState===Xa.CONNECTED&&this._login(),e.debug&&(this.wsclient=e.wsclient)}get initialized(){return Boolean(this.sessionInfo)}_cleanup(){this._parentFSM.unsubscribe(this._parentFSMListener)}_subscribeParentFSMEvents(){this._parentFSMListener=e=>{const{event:t,from:n,to:i}=e;if(this._fsm.currentState!==Cc.CLOSED)if(t.type===Ka.DISCONNECT||t.type===Ka.CONNECTION_FAIL)switch(this._fsm.currentState){case Cc.UNINIT:case Cc.INIT_LOGGING_IN:case Cc.INIT_LOGIN_FAIL:case Cc.INIT_LOGGED_IN:case Cc.INIT_WATCH_PENDING:case Cc.INIT_WATCH_FAIL:this.closeWithError(t.error||new Error("websocket connection fail"),!1);break;default:t.type===Ka.DISCONNECT?(this._wsDisconnectionTS||(this._wsDisconnectionTS=Date.now()),this._fsm.transition(Ic.WS_DISCONNECTED)):this.closeWithError(t.error||new Error("websocket connection fail"),!1)}else if(t.type===Ka.CONNECTION_SUCCESS)switch(this._fsm.currentState){case Cc.UNINIT:case Cc.PAUSED:this._login();break;case Cc.CLOSED:break;default:console.warn(`[realtime] current state should not be ${this._fsm.currentState} (parent event ${t})`)}},this._parentFSM.subscribe(this._parentFSMListener)}_subscribeFSMEvents(){this._FSMListener=e=>{const{event:t,from:n,to:i}=e;switch(t.type){case Ic.WS_CONNECTED:this._login().catch(Il);break;case Ic.LOGIN_SUCCESS:n===Cc.INIT_LOGGING_IN?this.initWatch().catch(Il):n===Cc.REBUILD_LOGGING_IN?this.rebuildWatch().catch(Il):this.closeWithError(new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${n}`}));break;case Ic.LOGIN_FAIL:n===Cc.INIT_LOGGING_IN?this.useRetryTicket("INIT_WATCH")?this._login().catch(Il):this.closeWithError(new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):n===Cc.REBUILD_LOGGING_IN?this.useRetryTicket("REBUILD_WATCH")?this._login().catch(Il):this.closeWithError(new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):this.closeWithError(new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${n}`}));break;case Ic.INIT_WATCH_SUCCESS:this._availableRetries.INIT_WATCH=2,this._errors=[];break;case Ic.INIT_WATCH_FAIL:this.useRetryTicket("INIT_WATCH")?this._login().catch(Il):this.closeWithError(new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case Ic.REBUILD_WATCH_SUCCESS:this._availableRetries.REBUILD_WATCH=2,this._errors=[];break;case Ic.REBUILD_WATCH_FAIL:this.useRetryTicket("REBUILD_WATCH")?this._login().catch(Il):this.closeWithError(new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case Ic.NEED_REBUILD_WATCH:this._login().catch(Il)}},this._fsm.subscribe(this._FSMListener)}useRetryTicket(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,!0)}assertAsyncTaskStatus(){if(this.closeWatchInvoked)throw new sn("closeWatch",{subtype:"closeWatch"});switch(this._fsm.currentState){case Cc.PAUSED:throw new sn("pause",{subtype:"pause"});case Cc.CLOSED:throw new sn("close",{subtype:"close"})}}handleServerEvents(e){var t=this;return s()((function*(){try{t.scheduleSendACK(),yield t._handleServerEvents(e),t._postHandleServerEventsValidityCheck(e)}catch(e){throw Xn(Mc,il,!0),e}}))()}_handleServerEvents(e){var t=this;return s()((function*(){const{requestId:n}=e,{events:i}=e.msgData;if(!i.length||!t.sessionInfo)return;const r=t.sessionInfo;let o;try{o=i.map(Dl)}catch(e){return void t.closeWithError(new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:e}))}let a=[...r.currentDocs],s=!1;for(let i=0,c=o.length;i<c;i++){const l=o[i];if(r.currentEventId>=l.id)!o[i-1]||l.id>o[i-1].id?Xn(Mc,rl,!0):(console.error(`[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ${n})`),Xn(Mc,ol,!0));else if(r.currentEventId===l.id-1){switch(l.dataType){case"update":if(!l.doc)switch(l.queueType){case"update":case"dequeue":{const e=a.find((e=>e._id===l.docId));if(e){const t=Sc(e);if(l.updatedFields)for(const e in l.updatedFields)ms(t,e,l.updatedFields[e]);if(l.removedFields)for(const e of l.removedFields)Es(t,e);l.doc=t}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated."),Xn(Mc,al,!0);break}case"enqueue":{const n=new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId ${e.requestId})`});throw t.closeWithError(n),n}}break;case"limit":if(!l.doc)switch(l.queueType){case"dequeue":{const e=a.find((e=>e._id===l.docId));e?l.doc=e:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType dequeue queueType event where no doc is associated.");break}}break;case"replace":if(!l.doc){const n=new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="replace" (requestId ${e.requestId})`});throw t.closeWithError(n),n}break;case"remove":{const e=a.find((e=>e._id===l.docId));e?l.doc=e:(console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated."),Xn(Mc,sl,!0));break}}switch(l.queueType){case"init":s?a.push(l.doc):(s=!0,a=[l.doc]);break;case"enqueue":a.push(l.doc);break;case"dequeue":{const e=a.findIndex((e=>e._id===l.docId));e>-1?a.splice(e,1):(console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated."),Xn(Mc,cl,!0));break}case"update":{const e=a.findIndex((e=>e._id===l.docId));e>-1?a[e]=l.doc:(console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated."),Xn(Mc,ll,!0));break}}if(i===c-1||o[i+1]&&o[i+1].id!==l.id){const e=[...a],r=o.slice(0,i+1).filter((e=>e.id===l.id));t.sessionInfo.currentEventId=l.id,t.sessionInfo.currentDocs=a,t.sessionInfo.currentEventTS=Date.now();const s=new El({id:l.id,type:"init"===r[0].queueType?"init":void 0,docChanges:t.getEJSON().deserialize(r),docs:t.getEJSON().deserialize(e),EJSON:t.getEJSON(),requestId:n,watchId:t.watchId});fn((()=>t.listener.onChange(s)))(),t.debug&&t._snapshotHistory.push(s)}}else Xn(Mc,ul,!0),t._fsm.transition(Ic.NEED_REBUILD_WATCH)}}))()}_postHandleServerEventsValidityCheck(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn(`[realtime listener] internal non-fatal error: client eventId ${this.sessionInfo.currentEventId} does not match with server event id after server event handling ${e.msgData.currEvent} (requestId ${e.requestId})`)):console.error(`[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur. (requestId ${e.requestId})`)}clearWaitExpectedEvent(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)}onMessage(e){switch(this._fsm.currentState){case Cc.INIT_WATCH_SUCCESS:case Cc.REBUILD_WATCH_SUCCESS:break;case Cc.PAUSED:if("ERROR"!==e.msgType)return;break;default:return void console.warn(`[realtime listener] internal non-fatal error: unexpected message received while state is ${this._fsm.currentState}`)}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":0,this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((()=>{this._fsm.transition(Ic.NEED_REBUILD_WATCH)}),this.getWaitExpectedTimeoutLength()));break;case"ERROR":this.closeWithError(new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:`${e.msgData.code} - ${e.msgData.message}`}));break;default:0}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")}closeWithError(e,t=!0){if(this._fsm.currentState!==Cc.CLOSED&&this._fsm.transition(Ic.CLOSE),this.userOnErrorInvoked)return;const n=this._fsm.getHistoryRepresentation({limit:20});tn(e)?(e.errMsg+=`\nhistory ${n}`,e.history=n):e&&((e=new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`${e} \nhistory ${n}`})).history=n),this.clearACKSchedule(),fn((()=>this.listener.onError(e)))(),this.userOnErrorInvoked=!0,this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),t&&this.sendCloseWatch().catch(Il),this.sessionInfo=void 0}}function Dl(e){const t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=e.removedFields?JSON.parse(e.removedFields):JSON.parse(e.RemovedFields))),t}const Ol={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3004:{code:3004,name:"Client Reconnect on Server Upgrade",description:"The client is terminating the connection in response to server upgrade"},3050:{code:3050,name:"Server Close Unauthenticated Idle Connection",description:"The server is terminating the connection because the connection is idle and not authenticated"},3051:{code:3051,name:"Server Upgrade",description:"The server is terminating the connection because it is upgrading"},3052:{code:3052,name:"Server Requires Authentication",description:"The server is terminating the connection because it has not received authentication message as the connection's first message"}};let Pl;!function(e){e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.ReconnectOnServerUpgrade=3004]="ReconnectOnServerUpgrade",e[e.UnauthenticatedIdleConnection=3050]="UnauthenticatedIdleConnection",e[e.ServerUpgrade=3051]="ServerUpgrade",e[e.AuthenticationRequired=3052]="AuthenticationRequired"}(Pl||(Pl={}));const Rl=(e,t)=>{const n=Ol[e],i=n?`${n.name}, code ${e}, reason ${t||n.description}`:`code ${e}`;return new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:i})},kl=1;class Nl{constructor(e){var t=this;this._fsm=void 0,this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._totalConnectionTimeoutId=void 0,this._serviceContext=void 0,this._ws=void 0,this._lastPingSendTS=void 0,this._pingFailed=0,this._pongMissed=0,this._pingTimeoutId=void 0,this._pongTimeoutId=void 0,this._logins=new Map,this._signatures=new Map,this._wsResponseWait=new Map,this._rttObserved=[],this._closedWatches=new Set,this._EJSON=void 0,this._defaultEnvId=void 0,this._connectionEnvId=void 0,this.initWebSocketConnection=function(){var e=s()((function*(e,n=t._maxReconnect){let i;if(t._EJSON||(i=function(){return Ml.apply(this,arguments)}().then((e=>t._EJSON=e))),t._fsm.currentState!==Xa.DISCONNECTED)return;t._fsm.transition(Ka.CONNECTION_START),t._logins=new Map,t._wsResponseWait=new Map;let r=!1;const o=[];let a=!1;if(!t._totalConnectionTimeoutId&&t._totalConnectionTimeout&&t._totalConnectionTimeout!==1/0){const e=t._totalConnectionTimeout;t._totalConnectionTimeoutId=setTimeout((()=>{a=!0,t._totalConnectionTimeoutId=void 0;const n=new on(`reconnect timeout (reach totalConnectionTimeout ${e}s)`,{subtype:"totalConnectionTimeout",retryable:!1});Xn(Mc,Xc,!0),t._fsm.transition({type:Ka.CONNECTION_FAIL,error:n})}),1e3*e)}for(let n=t._maxReconnect;n>=0;n--)try{if(!(yield Ai()).isConnected){if(!e)return void t._fsm.transition({type:Ka.CONNECTION_FAIL,error:new Error("network offline")});if(yield new Promise((e=>{mi&&mi.isConnected?e():vi.push(e)})),0===t._virtualWSClient.size)return void t.clearTotalReconnectTimeout();Bi()&&(yield _i(100))}if(a)return;0;const n=yield t.getSignature(t._connectionEnvId);if(a)return;0;const o=Date.now();if(yield new Promise(((e,i)=>{t._ws=Rn(t._context.identifiers)._socketSkipCheckDomainFactory().connectSocket({url:n.wsUrl,header:{"content-type":"application/json"},perMessageDeflate:!0,success:e,fail:i})})),a)return;if(Jn({apiName:"_realtime.connectSocket",apiStartTime:o,apiEndTime:Date.now()}),yield t.initWebSocketEvent(),a)return;if(i&&(yield i,a))return;r=!0;break}catch(e){if(o.unshift(e),e.errCode===Kt.TCB_PERMISSION_DENIED)break;const{isConnected:n}=yield Ai();if(a)return;if(n&&(yield _i(t._reconnectInterval),a))return;if(Bi()&&(yield _i(0),a))return}if(r)return t.clearTotalReconnectTimeout(),Xn(Mc,e?Fc:Lc,!0),void t._fsm.transition(Ka.CONNECTION_SUCCESS);t.clearTotalReconnectTimeout(),Xn(Mc,e?Uc:Bc,!0),e?t._fsm.transition({type:Ka.CONNECTION_FAIL,error:new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(o.map((e=>e+"")))}`})}):t._fsm.transition({type:Ka.CONNECTION_FAIL,error:new en({errCode:Kt.SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(o.map((e=>e+"")))}`})})}));return function(t){return e.apply(this,arguments)}}(),this.initWebSocketEvent=()=>new Promise(((e,t)=>{if(!this._ws)throw new Error("can not initWebSocketEvent, ws not exists");let n=!1;this._ws.onOpen((t=>{this._context.debug&&console.warn("[realtime] ws event: open",t),n=!0,e()}));let i=null;this._ws.onError((e=>{i=e,this._logins=new Map,n?(this._context.debug&&console.error("[realtime] ws event: error",e),this.clearHeartbeat(),Xn(Mc,zc,!0)):(this._context.debug&&console.error("[realtime] ws open failed with ws event: error",e),t(e),Xn(Mc,Hc,!0))})),this._ws.onClose((e=>{this._logins=new Map,this.clearHeartbeat();const t=i||Rl(e.code);switch(e.code){case Pl.ReconnectOnServerUpgrade:case Pl.ReconnectWebSocket:case Pl.NoRealtimeListeners:this._fsm.transition({type:Ka.DISCONNECT,error:t});break;case Pl.HeartbeatPingError:case Pl.HeartbeatPongTimeoutError:case Pl.NormalClosure:case Pl.AbnormalClosure:this._maxReconnect>0?(this._fsm.transition({type:Ka.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:Ka.CONNECTION_FAIL,error:t}),e.code===Pl.HeartbeatPingError?Xn(Mc,Yc,!0):e.code===Pl.HeartbeatPongTimeoutError?Xn(Mc,$c,!0):Xn(Mc,qc,!0);break;case Pl.UnauthenticatedIdleConnection:this._fsm.transition({type:Ka.CONNECTION_FAIL,error:Rl(e.code,e.reason)}),Xn(Mc,Qc,!0);break;case Pl.ServerUpgrade:this._fsm.transition({type:Ka.DISCONNECT,error:t}),this.initWebSocketConnection(!0),Xn(Mc,Kc,!0);break;default:this._maxReconnect>0?(this._fsm.transition({type:Ka.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:Ka.CONNECTION_FAIL,error:Rl(e.code,e.reason)}),Xn(Mc,Jc,!0)}Xn(Mc,Zc,!0)}));const r={timing:{},startKey:"apiStartTime",endKey:"apiEndTime",samplePicker:ri,autoReport:"_realtime.onSocketMessage"};this._ws.onMessage(ii(this.onSocketMessage,r)),this.heartbeat()})),this.isWSConnected=()=>Boolean(this._ws&&this._ws.readyState===kl),this.onSocketMessage=e=>{const t=e.data;let n;this.heartbeat();try{n=JSON.parse(t)}catch(e){throw new Error(`[realtime] onMessage parse res.data error: ${e}`)}this._context.debug&&console.log(`[realtime] onMessage ${n.msgType} (${(new Date).toLocaleString()})`,n);const i=this._wsResponseWait.get(n.requestId);if(i){try{"ERROR"===n.msgType?i.reject(new Tl(n)):i.resolve(n)}catch(e){this._context.debug&&console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",e)}finally{this._wsResponseWait.delete(n.requestId)}if(i.skipOnMessage)return}if("PONG"===n.msgType){if(this._lastPingSendTS){const e=Date.now()-this._lastPingSendTS;if(e>1e4)return void(this._context.debug&&console.warn(`[realtime] untrusted rtt observed: ${e}`));this._rttObserved.length>=3&&this._rttObserved.splice(0,this._rttObserved.length-3+1),this._rttObserved.push(e)}return}let r=n.watchId&&this._watchIdClientMap.get(n.watchId);if(r)r.onMessage(n);else switch(n.watchId?this._closedWatches.has(n.watchId)?Xn(Mc,el,!0):Xn(Mc,tl,!0):Xn(Mc,nl,!0),n.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":r=this._queryIdClientMap.get(n.msgData.queryID),r&&r.onMessage(n)}},this.login=function(){var e=s()((function*(e,n,i){if(e=e||t._context.env||t._defaultEnvId,!n)if(e){const n=t._logins.get(e);if(n){if(n.loggedIn&&n.loginResult)return n.loginResult;if(n.loggingInPromise)return n.loggingInPromise}}else{const e=t._logins.get("");if(e&&e.loggingInPromise)return e.loggingInPromise}const r=new Promise(function(){var r=s()((function*(r,o){try{const a=yield i?ii(t.getSignature(e,n),{timing:i,startKey:"tunnelStartTime",endKey:"tunnelEndTime",condition:{emptyKey:!0}}):t.getSignature(e,n),s=(()=>{const e=Rn().wx;let t,n,i;if(e&&e.version){t=e.version.version,n=e.version.updateTime;const r=e.version.updateTime.match(/^(\d+)\.(\d+)\.(\d+)/);return i=r?`${r[1]}-${r[2]}-${r[3]}`:"unknown",{version:t,updateTime:n,updateDateInDashes:i}}return{version:"unknown",updateTime:"unknown",updateDateInDashes:"unknown"}})(),c={watchId:void 0,requestId:Nc(),msgType:"LOGIN",msgData:{envId:a.envId,signStr:a.signStr,secretVersion:a.secretVersion,referrer:"mp",sdkVersion:s.version,dataVersion:s.updateDateInDashes}},l=yield t.send({msg:c,waitResponse:!0,skipOnMessage:!0,timeout:5e3});l.msgData.code?o(new Error(`${l.msgData.code} ${l.msgData.message}`)):r({envId:a.envId})}catch(e){o(e)}}));return function(e,t){return r.apply(this,arguments)}}());let o=e&&t._logins.get(e);const a=Date.now();o?(o.loggedIn=!1,o.loggingInPromise=r,o.loginStartTS=a):(o={loggedIn:!1,loggingInPromise:r,loginStartTS:a},t._logins.set(e||"",o));try{const n=yield r,i=t._logins.get(e||"");if(i&&i===o&&i.loginStartTS===a)return o.loggedIn=!0,o.loggingInPromise=void 0,o.loginStartTS=void 0,o.loginResult=n,n;if(i){if(i.loggedIn&&i.loginResult)return i.loginResult;if(i.loggingInPromise)return i.loggingInPromise;throw new Error("ws unexpected login info")}throw new Error("ws login info reset")}catch(e){throw o.loggedIn=!1,o.loggingInPromise=void 0,o.loginStartTS=void 0,o.loginResult=void 0,e}}));return function(t,n,i){return e.apply(this,arguments)}}(),this.getSignature=function(){var e=s()((function*(e,n){if(e=e||t._context.env||t._defaultEnvId,!n&&e&&t._signatures.has(e)){const n=t._signatures.get(e);if(Date.now()<n.expireTS)return n}else 0;const i=Date.now()+6e4,r=yield function(e,t){return Xo.apply(this,arguments)}(t._context,e);if(Date.now()-i>6e4)return t.getSignature(e,n);const a=o()(o()({},r),{},{expireTS:i});return t._signatures.set(a.envId,a),e||(t._defaultEnvId=a.envId),a}));return function(t,n){return e.apply(this,arguments)}}(),this.getWaitExpectedTimeoutLength=()=>this._rttObserved.length?this._rttObserved.reduce(((e,t)=>e+t))/this._rttObserved.length*1.5:5e3,this.ping=s()((function*(){const e={watchId:void 0,requestId:Nc(),msgType:"PING",msgData:null};yield t.send({msg:e}),t._context.debug&&console.log("ping sent")})),this.send=e=>new Promise(function(){var n=s()((function*(n,i){if(t._fsm.currentState!==Xa.CONNECTED)return i(new Error("websocket not connected"));let r,o=!1,a=!1;const c=e=>{o=!0,r&&clearTimeout(r),n(e)},l=e=>{a=!0,r&&clearTimeout(r),i(e)};e.timeout&&(r=setTimeout(s()((function*(){o&&a||(yield _i(0),o&&a||l(new on("wsclient.send timedout")))})),e.timeout));try{if(t._context.debug&&console.log(`[realtime] ws send ${e.msg.msgType} (${(new Date).toLocaleString()}): `,e),!t._ws)return void l(new Error("invalid state: ws connection not exists, can not send message"));if(t._ws.readyState!==kl)return void l(new Error(`ws readyState invalid: ${t._ws.readyState}, can not send message`));e.waitResponse&&t._wsResponseWait.set(e.msg.requestId,{resolve:c,reject:l,skipOnMessage:e.skipOnMessage}),t._ws.send({data:JSON.stringify(e.msg),success:t=>{e.waitResponse||c(t)},fail:n=>{l(n),e.waitResponse&&t._wsResponseWait.delete(e.msg.requestId)}})}catch(e){l(e)}}));return function(e,t){return n.apply(this,arguments)}}()),this.onWatchStart=(e,t)=>{this._queryIdClientMap.set(t,e)},this.onWatchClose=(e,t)=>{t&&this._queryIdClientMap.delete(t),this._watchIdClientMap.delete(e.watchId),this._virtualWSClient.delete(e),this._closedWatches.add(e.watchId),this._virtualWSClient.size||this.close(Pl.NoRealtimeListeners)},this.getEJSON=()=>this._EJSON,this._fsm=new Rc({initialState:Xa.DISCONNECTED,states:es}),this._serviceContext=e.serviceContext}get _context(){return this._serviceContext}get _maxReconnect(){return this._context.appConfig.realtimeMaxReconnect}get _reconnectInterval(){return this._context.appConfig.realtimeReconnectInterval}get _totalConnectionTimeout(){return this._context.appConfig.realtimeTotalConnectionTimeout}heartbeat(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout(s()((function*(){try{if(!t._ws||t._ws.readyState!==kl)return;t._lastPingSendTS=Date.now(),yield t.ping(),t._pingFailed=0,t._pongTimeoutId=setTimeout((()=>{t._context.debug&&console.error("pong timed out"),t._pongMissed<2?(t._pongMissed++,t.heartbeat(!0)):t.close(Pl.HeartbeatPongTimeoutError)}),t._context.appConfig.realtimePongWaitTimeout)}catch(e){t._pingFailed<2?(t._pingFailed++,t.heartbeat()):t.close(Pl.HeartbeatPingError)}})),e?0:this._context.appConfig.realtimePingInterval)}clearHeartbeat(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)}clearTotalReconnectTimeout(){this._totalConnectionTimeoutId&&clearTimeout(this._totalConnectionTimeoutId)}close(e){this.clearHeartbeat(),this._ws&&(this._ws.close({code:e,reason:Ol[e].name}),this._ws=void 0)}watch(e){const t={apiStartTime:Date.now()};let n=!1;const i=()=>{Jn(o()(o()({},t),{},{apiName:e.reportAPIName}))},r=e.onChange,a=e.onError;this._fsm.currentState===Xa.DISCONNECTED&&(this._connectionEnvId=e.envId,this.initWebSocketConnection(!1));const s=new xl(o()(o()({},e),{},{parentFSM:this._fsm,send:this.send,login:this.login,isWSConnected:this.isWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,getEJSON:this.getEJSON,getServiceContext:()=>this._context,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,timing:t,debug:this._context.debug,wsclient:this,onChange:l,onError:u}));this._virtualWSClient.add(s),this._watchIdClientMap.set(s.watchId,s);const c=s.listener;return c;function l(...e){n||(n=!0,t.apiEndTime=Date.now(),i()),d(),fn((()=>c.onChange.apply(this,e)))()}function u(...e){n||(n=!0,t.apiEndTime=Date.now(),i()),d(),fn((()=>c.onError.apply(this,e)))()}function d(){c.onChange===l&&(c.onChange=r),c.onError===u&&(c.onError=a)}}}function Ml(){return(Ml=s()((function*(){const e=Date.now(),t=n(795);return Jn({apiName:"_realtime.importBSON",apiStartTime:e,apiEndTime:Date.now()}),t.EJSON}))).apply(this,arguments)}let Ll;!function(e){e.ASC="asc",e.DESC="desc"}(Ll||(Ll={}));const Bl=e=>{class t{constructor(t,i){if(this.collectionName=void 0,this._query=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(Tn(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Nl({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(o()(o()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:this.collectionName,query:JSON.stringify(e.engine.QuerySerializer.encode(this._query.where||{})),limit:this._query.limit,orderBy:this._query.order?this._query.order.reduce(((e,t)=>(e[t.fieldPath]=t.order,e)),{}):void 0,queryType:Mo.WHERE,reportAPIName:"cloud.db.collection.watch"}))),!t)throw new en({errCode:Kt.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"collectionName must be provided"});this.collectionName=t,this._query=new n(i),Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field=i&&i.field||{}}field(e){return Sn(e,"object","field"),new t(this.collectionName,o()(o()({},this._query.getProperties()),{},{field:e}))}where(e){return Sn(e,"condition","where"),this._query.where?new t(this.collectionName,o()(o()({},this._query.getProperties()),{},{where:aa.and(this._query.where,e)})):new t(this.collectionName,o()(o()({},this._query.getProperties()),{},{where:e}))}orderBy(e,n){return Sn(e,"fieldPath","orderBy"),Sn(n,"order","orderBy"),new t(this.collectionName,o()(o()({},this._query.getProperties()),{},{order:[...this._query.order||[],{fieldPath:e,order:n}]}))}limit(e){return Sn(e,"max","limit"),new t(this.collectionName,o()(o()({},this._query.getProperties()),{},{limit:e}))}skip(e){return Sn(e,"offset","skip"),new t(this.collectionName,o()(o()({},this._query.getProperties()),{},{offset:e}))}get(t){const n="collection.get",i={apiStartTime:+new Date},r=()=>Go({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:Mo.WHERE,options:qa(this,e),instanceContext:e,timing:i,explain:null==t?void 0:t.explain});const a=En(t),c=new Promise(function(){var e=s()((function*(e,a){try{const a=yield r();if(null!=t&&t.explain&&Bi())return void e(a);e({data:a.list,errMsg:si(n)})}catch(e){a(nn(e,n))}finally{Jn(o()(o()({},i),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!a)return c;c.then((e=>{bn(n,t,e)})).catch((e=>{wn(n,t,e)}))}update(t){const n="collection.update",i={apiStartTime:+new Date},r=()=>{if(Sn(t,"options","update"),Tn(t,{data:"object"}),!this._query.where)throw new en({errCode:-1,errMsg:"query condition must be provided"})},a=()=>Ho({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),data:e.engine.UpdateSerializer.encode(t.data),queryType:Mo.WHERE,options:{multi:!1!==t.multi,merge:!0},instanceContext:e,timing:i,explain:t.explain});const c=En(t),l=new Promise(function(){var e=s()((function*(e,s){try{r();const s=yield a();if(null!=t&&t.explain&&Bi())return e(s);e({stats:{updated:s.updated},errMsg:si(n)})}catch(e){s(nn(e,n))}finally{Jn(o()(o()({},i),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!c)return l;l.then((e=>{bn(n,t,e)})).catch((e=>{wn(n,t,e)}))}remove(t){const n="collection.remove",i={apiStartTime:+new Date},r=()=>{if(!this._query.where||0===Object.keys(this._query.where).length)throw new en({errCode:-1,errMsg:"query condition must be provided and not be empty"})},a=()=>Wo({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:Mo.WHERE,options:{multi:!0},instanceContext:e,timing:i,explain:null==t?void 0:t.explain});const c=En(t),l=new Promise(function(){var e=s()((function*(e,s){try{r();const s=yield a();if(null!=t&&t.explain&&Bi())return e(s);e({stats:{removed:s.removed||0},errMsg:si(n)})}catch(e){s(nn(e,n))}finally{Jn(o()(o()({},i),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!c)return l;l.then((e=>{bn(n,t,e)})).catch((e=>{wn(n,t,e)}))}count(t){const n="collection.count",i={apiStartTime:+new Date},r=()=>$o({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:Mo.WHERE,instanceContext:e,timing:i,explain:null==t?void 0:t.explain});const a=En(t),c=new Promise(function(){var e=s()((function*(e,a){try{const a=yield r();if(null!=t&&t.explain&&Bi())return e(a);e({total:a.total,errMsg:si(n)})}catch(e){a(nn(e,n))}finally{Jn(o()(o()({},i),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!a)return c;c.then((e=>{bn(n,t,e)})).catch((e=>{wn(n,t,e)}))}toJSON(){}}class n{constructor(e){this.where=void 0,this.offset=void 0,this.limit=void 0,this.order=void 0,this.field=void 0,this.where=e&&e.where,this.offset=e&&e.offset,this.limit=e&&e.limit,this.order=e&&e.order,this.field=e&&e.field}getProperties(){return{where:this.where,offset:this.offset,limit:this.limit,order:this.order,field:this.field}}}return t},Fl="document.get",Ul="document.update",Wl="document.set",jl="document.remove",Gl=e=>class{constructor(t,n){if(this._id=void 0,this.collection=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(Tn(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Nl({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(o()(o()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:this.collection.collectionName,query:JSON.stringify({_id:this._id}),queryType:Mo.DOC,reportAPIName:"cloud.db.document.watch"}))),this.collection=t,this._id=n,null==n)throw new en({errCode:Kt.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"docId must not be null or undefined"});Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field={}}field(e){return Sn(e,"object","field"),Tn(e,"object","field"),this._field=e,this}get(t){var n=this;const i={apiStartTime:+new Date},r=()=>Go({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),options:{projection:e.engine.ProjectionSerializer.encode(this._field)},queryType:Mo.DOC,instanceContext:e,timing:i});const a=En(t),c=new Promise(function(){var e=s()((function*(e,t){try{const t=n._id,a=yield r();if(!a.list||!a.list.length)throw new Error(`cannot find document with _id ${t}, please make sure that the document exists and you have the corresponding access permission`);e({data:a.list[0],errMsg:si(Fl)})}catch(e){t(nn(e,Fl))}finally{Jn(o()(o()({},i),{},{apiEndTime:+new Date,apiName:"cloud.db.document.get"}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!a)return c;c.then((e=>{bn(Fl,t,e)})).catch((e=>{wn(Fl,t,e)}))}set(t){const n={apiStartTime:+new Date},i=()=>Zo({env:e.database.config.env,collectionName:this.collection.collectionName,_id:this._id,data:e.engine.encodeInternalDataType(t.data),options:{},instanceContext:e,timing:n});const r=En(t),a=new Promise(function(){var e=s()((function*(e,r){try{Tn(t,{data:"object"}),In({name:"options.data",target:t.data});const r=yield i();e({_id:r._id,errMsg:si(Wl),stats:{updated:r.updated,created:r.created}})}catch(e){r(nn(e,Wl))}finally{Jn(o()(o()({},n),{},{apiEndTime:+new Date,apiName:"cloud.db.document.set"}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!r)return a;a.then((e=>{bn(Wl,t,e)})).catch((e=>{wn(Wl,t,e)}))}update(t){const n={apiStartTime:+new Date},i=()=>Ho({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),data:e.engine.UpdateSerializer.encode(t.data),queryType:Mo.DOC,options:{multi:!1,merge:!1},instanceContext:e,timing:n});const r=En(t),a=new Promise(function(){var e=s()((function*(e,r){try{Tn(t,{data:"object"}),In({name:"options.data",target:t.data});e({stats:{updated:(yield i()).updated},errMsg:si(Ul)})}catch(e){r(nn(e,Ul))}finally{Jn(o()(o()({},n),{},{apiEndTime:+new Date,apiName:"cloud.db.document.update"}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!r)return a;a.then((e=>{bn(Ul,t,e)})).catch((e=>{wn(Ul,t,e)}))}remove(t){var n=this;const i={apiStartTime:+new Date},r=()=>Wo({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),queryType:Mo.DOC,options:{},instanceContext:e,timing:i});const a=En(t),c=new Promise(function(){var e=s()((function*(e,t){try{const t=n._id,a=yield r();if(0===a.removed)throw new Error(`cannot remove document with _id ${t}, please make sure that the document exists and you have the corresponding Write permission`);e({stats:{removed:a.removed||0},errMsg:si(jl)})}catch(e){t(nn(e,jl))}finally{Jn(o()(o()({},i),{},{apiEndTime:+new Date,apiName:"cloud.db.document.remove"}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!a)return c;c.then((e=>{bn(jl,t,e)})).catch((e=>{wn(jl,t,e)}))}toJSON(){}},Vl=e=>{const t=Bl(e),n=Gl(e),i=Ko(e);return class extends t{constructor(e){super(e),this.collectionName=void 0,this.__safe_props__=void 0,this.collectionName=e}doc(e){if(null==e)throw nn({errCode:-1,errMsg:"docId must not be empty"},"collection.doc");return new n(this,e)}add(t){const n="collection.add",i={apiStartTime:+new Date},r=()=>Fo({env:e.database.config.env,collectionName:this.collectionName,data:e.engine.encodeInternalDataType(t.data),instanceContext:e,timing:i});const a=En(t),c=new Promise(function(){var e=s()((function*(e,a){try{Tn(t,{data:"object"});e({_id:(yield r())._id,errMsg:si(n)})}catch(e){a(nn(e,n))}finally{Jn(o()(o()({},i),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!a)return c;c.then((e=>{bn(n,t,e)})).catch((e=>{wn(n,t,e)}))}aggregate(){return new i(this,[])}}},Hl=function(e){return new zl(e)};class zl{constructor(e){this.regexp=void 0,this.options=void 0,Tn(e,{regexp:"string"},"RegExp options"),e.options&&Tn(e.options,"string"),this.regexp=e.regexp,this.options=e.options||""}get _internalType(){return go}toJSON(){return{$regex:this.regexp,$options:this.options}}}const Zl={},Yl={};for(const e in bo)Zl[bo[e]]=`$${bo[e]}`;for(const e in _o)Zl[_o[e]]=`$${_o[e]}`;for(const e in Co)Zl[Co[e]]=`$${Co[e]}`;for(const e in Do)Yl[Do[e]]=`$${Do[e]}`;function $l(e){return Zl[e]||`$${e.toLowerCase()}`}function ql(e){return Yl[e]||`$${e.toLowerCase()}`}Zl[bo.NEQ]="$ne",Zl[Co.REMOVE]="$unset",Zl[Co.SHIFT]="$pop",Zl[Co.UNSHIFT]="$push",Zl[bo.GEO_NEAR]="$nearSphere",Zl[bo.GEO_WITHIN]="$geoWithin",Zl[bo.GEO_INTERSECTS]="$geoIntersects";class Ql{static encodeStages(e){return(new Jl).encodeStages(e)}static encode(e){return(new Jl).encodeAny(e)}}class Jl{encodeStages(e){return e.map((e=>this.encodePipelineStage(e)))}encodeAny(e){return Za(e)?ia(e)?this.encodePipeline(e):ra(e)?this.encodePipelineStage(e):Po(e)?this.encodeAggregateCommand(e):Ya(e):zt(e)?this.encodeObject(e):qt(e)?e.map((e=>this.encodeAny(e))):e}encodeObject(e){const t={};for(const n in e)t[n]=this.encodeAny(e[n]);return t}encodePipeline(e){return e._stages.map((e=>this.encodeAny(e)))}encodePipelineStage(e){const t=`$${e.stage}`;switch(e.stage){case"match":return{[t]:Xl.encode(e.val)};default:return{[t]:this.encodeAny(e.val)}}}encodeAggregateCommand(e){return{[ql(e.operator)]:this.encodeAny(e.operands[0])}}}class Xl{constructor(){}static encode(e){return Kl(e)}}const Kl=e=>Ao(e)?tu(e):So(e)?nu(e):ia(e)||Po(e)||ra(e)?Ql.encode(e):zt(e)?eu(e):Ya(e),eu=e=>{const t=Va(e),n=[],i={[_o.OR]:0,[_o.NOR]:0,[_o.AND]:0,[_o.NOT]:0};for(const e in t){const r=t[e];if(Ao(r))switch(r.operator){case _o.OR:case _o.NOR:case _o.AND:i[r.operator]++,n.push({[$l(r.operator)]:r.operands.map((t=>Kl({[e]:t})))});break;case _o.NOT:{const t=r.operands[0];if(Ao(t))switch(t.operator){case _o.AND:i[_o.OR]++,n.push(tu(new vo(_o.OR,t.operands.map((t=>({[e]:new vo(_o.NOT,[t])}))))));break;case _o.OR:i[_o.NOR]++,n.push(tu(new vo(_o.NOR,t.operands.map((t=>({[e]:t}))))));break;case _o.NOR:i[_o.OR]++,n.push(tu(new vo(_o.OR,t.operands.map((t=>({[e]:t}))))));break;case _o.NOT:n.push(Kl({[e]:t.operands[0]}))}else n.push({[e]:tu(r)});break}}else So(r)?n.push({[e]:nu(r)}):n.push({[e]:Ya(r)})}return iu(n)},tu=e=>{switch(e.operator){case _o.AND:if(e.operands.every((e=>So(e)))){const t={};for(const n of e.operands)Object.assign(t,nu(n));return t}return{[$l(e.operator)]:e.operands.map(Kl)};case _o.OR:case _o.NOR:return{[$l(e.operator)]:e.operands.map(Kl)};case _o.NOT:{const t=$l(e.operator),n=e.operands[0];return{[t]:Kl(n)}}default:return{[$l(e.operator)]:e.operands.map(Kl)}}},nu=e=>{const t=$l(e.operator);switch(e.operator){case bo.EQ:case bo.NEQ:case bo.LT:case bo.LTE:case bo.GT:case bo.GTE:case bo.EXISTS:case bo.SIZE:return{[t]:Ya(e.operands[0])};case bo.IN:case bo.NIN:case bo.MOD:return{[t]:Ya(e.operands)};case bo.ALL:return{[t]:e.operands.map(Kl)};case bo.ELEM_MATCH:case bo.EXPR:return{[t]:Kl(e.operands[0])};case bo.GEO_NEAR:return{[t]:{$geometry:Ya(e.operands[0].geometry),$maxDistance:e.operands[0].maxDistance,$minDistance:e.operands[0].minDistance}};case bo.GEO_WITHIN:{const n={};return e.operands[0].geometry&&(n.$geometry=Ya(e.operands[0].geometry)),e.operands[0].centerSphere&&(n.$centerSphere=Ya(e.operands[0].centerSphere)),{[t]:n}}case bo.GEO_INTERSECTS:return{[t]:{$geometry:Ya(e.operands[0].geometry)}};default:return{[t]:e.operands.length>1?e.operands.map(Kl):Kl(e.operands[0])}}},iu=e=>{const t={$and:0,$or:0,$nor:0};for(const n of e)n.$and&&t.$and++,n.$or&&t.$or++,n.$nor&&t.$nor++;const n=t.$and>1||t.$or>1||t.$nor>1;let i=!1;const r={};for(const t of e)for(const e in t){const o=t[e];n?i?r.$and.push(t):"$and"===e||"$or"===e||"$nor"===e?(i=!0,r.$and=[t]):r[e]=o:r[e]=o}return r};class ru{constructor(){}static encode(e){return ou(e)}}const ou=e=>au(e),au=e=>{const t=Va(e),n={};for(const e in t){const i=t[e];if(xo(i)){const t=$l(i.operator);switch(n[t]||(n[t]={}),i.operator){case Co.SET:case Co.INC:case Co.MUL:case Co.MIN:case Co.MAX:case Co.RENAME:case Co.BIT:n[t][e]=Ya(i.operands[0]);break;case Co.REMOVE:n[t][e]="";break;case Co.PUSH:{let r;r=1===i.operands.length&&zt(i.operands[0])?{$each:i.operands[0].each.map(Ya),$position:i.operands[0].position,$slice:i.operands[0].slice,$sort:i.operands[0].sort}:{$each:i.operands.map(Ya)},n[t][e]=r;break}case Co.UNSHIFT:{const r={$each:i.operands.map(Ya),$position:0};n[t][e]=r;break}case Co.POP:n[t][e]=1;break;case Co.SHIFT:n[t][e]=-1;break;case Co.ADD_TO_SET:n[t][e]=zt(i.operands[0])&&i.operands[0].each?{$each:i.operands[0].each}:i.operands[0];break;case Co.PULL:n[t][e]=Xl.encode(i.operands[0]);break;case Co.PULL_ALL:default:n[t][e]=Ya(i.operands[0])}}else n.$set||(n.$set={}),n.$set[e]=Ya(i)}return n};class su{constructor(){}static encode(e){return(new su).encodeProjection(e)}encodeProjection(e){return No(e)?this.encodeProjectionCommand(e):"object"===Ht(e)?this.encodeProjectionObject(e):e}encodeProjectionCommand(e){const t=$l(e.operator);switch(e.operator){case Ro.SLICE:default:return{[t]:e.operands[0]}}}encodeProjectionObject(e){const t=Va(e);for(const e in t)!0===t[e]||1===t[e]?t[e]=1:!1===t[e]||0===t[e]?t[e]=0:No(t[e])?t[e]=this.encodeProjectionCommand(t[e]):delete t[e];return t}}class cu{constructor(){}static decode(e){return(new cu).decodeData(e)}decodeData(e){switch(Ht(e)){case"object":return this.decodeObject(e);case"array":return e.map((e=>{if(zt(e)){const t=$a(e);return t!==e?t:this.decodeObject(e)}return e}));default:return e}}decodeObject(e){const t=o()({},e);for(const e in t){const n=t[e];switch(Ht(n)){case"object":{const i=$a(n);t[e]=i!==n?i:this.decodeObject(t[e]);break}case"array":{const i=this.decodeData(n);i!==n&&(t[e]=i);break}default:continue}}return t}}let lu;!function(e){e[e.DEFAULT=0]="DEFAULT"}(lu||(lu={}));const uu=function(e,t){return new(hu(e.identifiers||{}))({context:e,config:t})};function du(e){return e.debug}const hu=n=>{let i,r;return class{constructor(o){this.identifiers=void 0,this.config=void 0,this.command=void 0,this.Geo=void 0,this.serverDate=void 0,this.RegExp=void 0,this.__safe_props__=void 0;const{config:a,context:s}=o;this.identifiers=n,this.config=a||{},i={database:this,serviceContext:s,engine:t},r=Vl(i),a&&a.env&&Tn(a.env,"string"),this.command=aa,this.Geo=e,this.serverDate=sa,this.RegExp=Hl,a&&a.hasOwnProperty("debug")&&Object.defineProperties(this,{debug:{value:!0},QuerySerializer:{enumerable:!1,configurable:!1,get(){return du((e=i).database)?e.engine.QuerySerializer:void 0;var e},set(){}},UpdateSerializer:{enumerable:!1,configurable:!1,get(){return du((e=i).database)?e.engine.UpdateSerializer:void 0;var e},set(){}},ProjectionSerializer:{enumerable:!1,configurable:!1,get(){return du((e=i).database)?e.engine.ProjectionSerializer:void 0;var e},set(){}},AggregateSerializer:{enumerable:!1,configurable:!1,get(){return du((e=i).database)?e.engine.AggregateSerializer:void 0;var e},set(){}},Decoder:{enumerable:!1,configurable:!1,get(){return du((e=i).database)?e.engine.Decoder:void 0;var e},set(){}}})}collection(e){return new r(e)}toJSON(){}}};function pu(e){return{database:uu.bind(null,e)}}const fu="database";function gu(e){e.registerService(function(e){const t={name:fu,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(fu)},appConfig:{get docSizeLimit(){return e.appConfig.db_doc_size_limit},get realtimePingInterval(){return e.appConfig.db_realtime_ping_interval},get realtimePongWaitTimeout(){return e.appConfig.db_realtime_pong_wait_timeout},get realtimeMaxReconnect(){return e.config.database.realtime.maxReconnect},get realtimeReconnectInterval(){return e.config.database.realtime.reconnectInterval},get realtimeTotalConnectionTimeout(){return e.config.database.realtime.totalConnectionTimeout},get realtimeQueryEventCacheTimeout(){return e.appConfig.db_realtime_query_event_cache_timeout}}};return{name:fu,context:t,getAPIs:pu.bind(null,t)}}(e))}function _u(e){class t{constructor(e){this.cloudID=void 0,this._internalType=pi,this.cloudID=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toJSON(){return this.cloudID}toString(){return this.cloudID}}return function(e){return new t(e)}}function mu(e){class t{constructor(e){this.target=void 0,this._internalType=fi,this.target=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toString(){return JSON.stringify({target:this.target})}}return function(e){return new t(e)}}function yu(e){return{CloudID:_u(),CDN:mu()}}const vu="utils";function Au(e){e.registerService(function(e){const t={name:vu,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug}};return{name:vu,context:t,getAPIs:yu.bind(null,t)}}(e))}const bu=new class{constructor(){this._running=0,this._onIdleCallbacks=[],this._idleTriggerTimer=void 0}get running(){return this._running}incrementRunning(e=1){this._running+=e,this._idleTriggerTimer&&clearTimeout(this._idleTriggerTimer)}decrementRunning(e=1){this._running-=e,this._running<0&&(this._running=0),this._running<=0&&this._onIdleCallbacks.length&&(this._idleTriggerTimer=setTimeout((()=>{if(this._idleTriggerTimer=null,this._onIdleCallbacks.length){const e=this._onIdleCallbacks.shift();e&&e()}}),50))}onceIdle(e){this._running>0?this._onIdleCallbacks.push(e):e()}};function wu(e,t={}){if(t.fireOnIdle&&bu.running>0)return new Promise(((n,i)=>{bu.onceIdle(s()((function*(){try{const i=yield wu(e,t);n(i)}catch(e){i(e)}})))}));if(t.onFire)try{t.onFire()}catch(e){}return new Promise(((n,i)=>{var r,a,s,c,l;bu.incrementRunning();Rn((e.cloud||t.cloud||{}).identifiers)._operateWXData({appid:null===(r=e.cloud)||void 0===r||null===(a=r.instanceOptions)||void 0===a?void 0:a.resourceAppid,accessToken:null===(s=e.cloud)||void 0===s||null===(c=s.authStorage)||void 0===c?void 0:c.getItem("access_token"),webRequest:null===(l=e.cloud)||void 0===l?void 0:l.webRequest,apiName:e.apiName||"qbase_commapi",reqData:e.data,requestInQueue:!1,success:e=>{let r=o()(o()({},e),{},{data:e.rawData});if(e.rawData)try{const t=JSON.parse(e.rawData);if(t.baseresponse&&0!==t.baseresponse.errcode){const e=new en({errCode:t.baseresponse.errcode,errMsg:t.baseresponse.errmsg});return void i(e)}r=o()(o()({},e),{},{data:t})}catch(e){const t=new en({errMsg:e&&e.toString()});return void i(t)}else if(t&&t.requireDataNotEmpty){const t=new en({errCode:e.errCode,errMsg:`error empty internal server response, ${e.errMsg}`});return void i(t)}n(r)},fail:e=>{if(e&&e.errMsg)if(e.errMsg.includes("invalid scope")){const t="invalid scope 没有权限，请先开通云服务";(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}else{const t=e.errMsg.replace(/^operateWXData:fail /,"");(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}i(e)},complete:function(){e.complete&&e.complete.apply(null,arguments),bu.decrementRunning()}})}))}const Eu=wu,Tu={REALTIME_DB_MAX_RECONNECT:5,REALTIME_DB_WS_RECONNECT_INTERVAL:5e3,REALTIME_DB_TOTAL_CONNECTION_TIMEOUT:1/0},Su={db_doc_size_limit:524288,db_realtime_ping_interval:15e3,db_realtime_pong_wait_timeout:15e3,db_realtime_query_event_cache_timeout:18e4,upload_max_file_size:20971520,get_temp_file_url_max_requests:50,call_function_poll_max_retry:10,call_function_max_req_data_size:5242880,call_function_client_poll_timeout:15e3,call_function_valid_start_retry_gap:6e4,call_container_poll_max_retry:10,call_container_client_poll_timeout:15e3,call_container_valid_start_retry_gap:6e4,call_container_max_req_data_size:5242880},Cu={},Iu={},xu={},Du=`${Math.random()}_${Date.now()}`;let Ou="servicewechat.com";class Pu{constructor(){this._tunnelRequest=void 0,this._meta=void 0}setMetaData(e){this._meta=e}setTunnelRequest(e){this._tunnelRequest=e}getEndpointSync(e){const t=Cu[e];if("container"===e){if(null!=t&&t.url&&null!=t&&t.expiresTs&&Date.now()<t.expiresTs)return t;this.getEndpoint(e)}}getEndpoint(e){var t=this;return s()((function*(){const n=Cu[e];return"container"===e?null!=n&&n.url&&null!=n&&n.expiresTs&&Date.now()<n.expiresTs?n:t.refreshContainerServiceEndpoint():null}))()}refreshContainerServiceEndpoint(){var e=this;return s()((function*(){return Iu.container||(xu.servicewechatGetIP||(xu.servicewechatGetIP=!0,Rn().wx.onNetworkStatusChange((e=>{e.isConnected&&Ru()}))),clearTimeout(xu.container),Iu.container=new Promise(function(){var t=s()((function*(t,n){const i=[];for(let n=0;n<3;n++)try{const n=Date.now(),o=Ii(),a=(e._tunnelRequest?yield e._tunnelRequest({apiName:"tcbapi_get_service_info",serializedReqData:JSON.stringify({client_random:Du,system:o.system,wx_app_version:o.version})}):yield Eu({apiName:"qbase_commapi",data:{qbase_api_name:"tcbapi_get_service_info",qbase_req:JSON.stringify({client_random:Du,system:o.system,wx_app_version:o.version}),qbase_options:{},qbase_meta:e._meta,cli_req_id:`${+new Date}_${Math.random()}`}})).data;if(Date.now()-n>1e3*a.expires_in){i.push(`result already expired (startTs ${n} resultTs ${Date.now()})`);continue}const s=Date.now()+1e3*a.expires_in-(Date.now()-n),c=a.domain||"servicewechat.com";return Cu.container={url:`https://${c}/wxa-qbase/container_service?token=${a.token}`,domain:c,token:a.token,http:a.http,key:a.key,timestamp:a.timestamp,ip:a.ip,vip:a.vip,ips:a.ips?new Set(a.ips):void 0,expiresTs:s,encryptedClientRandom:a.encrypted_client_random,protocol:a.protocol},t(Cu.container),delete Iu.container,Ru(),r=a.token,Kn=r,Ou=!a.vip||a.ips||Cu.container.localDNSTrusted?Cu.container.domain||"servicewechat.com":a.vip,Nu(),clearTimeout(xu.container),void(xu.container=setTimeout((()=>{e.refreshContainerServiceEndpoint()}),.8*(s-Date.now())))}catch(e){i.push(e+"")}var r;n(`get container service endpoints errors: ${i.join("\n")}`),delete Iu.container}));return function(e,n){return t.apply(this,arguments)}}())),Iu.container}))()}}function Ru(){if(!Cu.container)return;const e=Cu.container.domain||"servicewechat.com",t=Cu.container.encryptedClientRandom;Rn()._requestSkipCheckDomain({url:`https://${e}/wxa-qbase/verify_server?client_random=${Du}&token=${Cu.container.token}`,method:"POST",dataType:"json",data:JSON.stringify({client_random:Du}),success:e=>{Cu.container&&(200===e.statusCode&&e.data.encrypted_client_random===t?Cu.container.localDNSTrusted=!0:Cu.container.localDNSTrusted=!1)},fail:e=>{Cu.container&&(console.warn(`check servicewechat connection fail ${e}`),Cu.container.localDNSTrusted=!1)}})}let ku=!1;function Nu(){return Mu.apply(this,arguments)}function Mu(){return(Mu=s()((function*(){if(ku)return;const e=Rn(),t=()=>new Promise((t=>{const n=Date.now(),i=!/^\d+/.test(Ou);e._requestSkipCheckDomain({url:`${i?"https":"http"}://${Ou}/wxa-qbase/keepalive`,header:i?{}:{host:"servicewechat.com"},method:"GET",dataType:"text",enableHttp2:i,success:()=>{t(),ti(22990,1,["privateHttpKeepAlive",Ou,n,Date.now(),Date.now()-n].join(","))},fail:()=>{t()}})})),n=()=>{setTimeout(s()((function*(){yield t(),n()})),2e4)};return ku=!0,n(),t()}))).apply(this,arguments)}const Lu=(e={})=>{const{sdk:t}=e,n=e.identifiers||{};t&&((e,t)=>{Dn.set(e,t)})(n,t);return new Fu(n,!1)},Bu=(e={})=>Lu(e).exportAPI;class Fu{constructor(e,t){var n=this;this.inited=!1,this.isInstance=void 0,this.services={},this.apiServiceMap={},this.meta=void 0,this.config=void 0,this.identifiers=void 0,this.debug=!1,this.request=void 0,this.exportAPI=void 0,this.appConfig=void 0,this.apiPermissions=void 0,this.runtimeInfo=void 0,this.serviceEndpoint=void 0,this.authStorage=void 0,this.testSpeed=s()((function*(){let e=+new Date,t=e;return wu(function(e){const t=e.cloud;return{apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:{env:e.env},qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`},cloud:t}}({cloud:n,apiName:"tcbapi_testspeed",serializedReqData:null}),{fireOnIdle:!0,onFire:()=>{e=+new Date,t=e}}).then((n=>{Jn({apiName:"cloud.testspeed",apiEndTime:+new Date,apiStartTime:e,tunnelEndTime:+new Date,tunnelStartTime:t,tunnelTimeNoCSNetCost:n.data.baseresponse.stat.qbase_cost_time})})).catch((e=>{0}))})),this.identifiers=e,this.isInstance=t,this.runtimeInfo=Wr(),this.serviceEndpoint=new Pu,this.request=function(e){const{cloud:t}=e;return function(e){const n=t.isInstance?o()(o()({},t.instanceOptions),{},{appid:t.instanceOptions.resourceAppid,env:t.instanceOptions.resourceEnv}):o()(o()({},e),{},{env:e.env});return wu({apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:n,qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`},cloud:t})}}({cloud:this});const i=this;var r;this.exportAPI={init:this.init.bind(this)},this.isInstance||(this.exportAPI.Cloud=function(t){return new Uu(e,i,t).exportAPI}),tr(r=this),Jr(r),gu(r),Au(r),Br(r),this.meta={session_id:Date.now()+""},this.serviceEndpoint.setMetaData(this.getMetaData()),this.serviceEndpoint.setTunnelRequest(this.request),this.config={database:Wu()},this.appConfig=o()({},Su),this.apiPermissions={};try{Li.onReady((()=>{setTimeout((()=>{(()=>{if(!Yn)try{const e=Rn();e.wx.getNetworkType({success:e=>{qn=e.networkType},complete:()=>{Yn=!0,Qn()}}),e.wx.onNetworkStatusChange((e=>{Yn||(Yn=!0,Qn()),qn=e.networkType}))}catch(e){}})()}),2e3)}))}catch(e){}}getMetaData(){var e;if(!this.meta.sdk_version){const e=Rn(this.identifiers);if(e){const t=e.wx;t&&t.version&&("miniprogram"===this.runtimeInfo.env?this.meta.sdk_version=`wx-miniprogram-sdk/${t.version.version} (${Date.parse(`${t.version.updateTime} GMT+0800`)})`:this.meta.sdk_version=`wx-web-sdk/undefined (${Date.parse("undefined GMT+0800")})`)}}return this.meta.filter_user_info="singlePage"===(null===(e=Li.appLaunchInfo)||void 0===e?void 0:e.mode),this.meta}getConfig(){return this.config}getEnvForService(e){if(this.isInstance)return this.instanceOptions.resourceEnv;const t=this.config;if(t.env)switch(Ht(t.env)){case"string":return t.env;case"object":return t.env[e];default:return}}checkAPIPermission(e){return!this.apiPermissions.hasOwnProperty(e)||1===this.apiPermissions[e]}init(e={}){return this.inited=!0,this.initConfig(e),Promise.all([this.sendInitRequest().then((()=>{this.testSpeed()}))]).then((()=>{}))}initConfig(e){this.config=JSON.parse(JSON.stringify(e)),this.config.database?this.config.database=Vt(this.config.database,Wu()):this.config.database=Wu()}sendInitRequest(){const e="string"==typeof this.config.env?this.config.env:void 0,t=JSON.stringify({trace_user:!1!==this.config.traceUser,env:e,region:this.config.region}),n=+new Date,i=n;return this.request(o()(o()({},this.config),{},{apiName:"tcbapi_init",serializedReqData:t,env:e})).then((e=>{const t=+new Date,r=e.data;this.appConfig=o()(o()({},this.appConfig),r.config);const a=r.tcb_api_list||[];for(let e=0,t=a.length;e<t;e++)this.apiPermissions[a[e].apiname]=a[e].status;Jn({apiName:"cloud.init",apiEndTime:+new Date,apiStartTime:n,tunnelEndTime:t,tunnelStartTime:i,tunnelTimeNoCSNetCost:r.baseresponse.stat.qbase_cost_time})})).catch((e=>{console.error("cloud init error: ",e)}))}registerService(e){this.services[e.name]=e;const t=e.getAPIs();for(const n in t)if(this.apiServiceMap[n]=e.name,"function"==typeof t[n])this.registerFunction(n,!0,t[n]);else{const{initRequired:e,fn:i}=t[n];this.registerFunction(n,e,i)}}registerFunction(e,t,n){const i=this;this.exportAPI[e]=t?function(){if(!i.inited)throw new en({errMsg:"Cloud API isn't enabled, please call wx.cloud.init first\n请先调用 wx.cloud.init() 完成初始化后再调用其他云 API。"});if(!i.checkAPIPermission(e))throw new en({errCode:Kt.SDK_API_PERMISSION_DENIED,errMsg:Kt[Kt.SDK_API_PERMISSION_DENIED]});return n.apply(i,arguments)}:n}toJSON(){}}class Uu extends Fu{constructor(e,t,n){if(super(e,!0),this.defaultInstance=void 0,this.instanceOptions=void 0,this.webRequest=void 0,this._webCurrentRefreshTokenPromise=void 0,"web"===this.runtimeInfo.env){if(!n.identityless&&!n.appid)throw new Error("appid must be provided");if(!n.resourceAppid)throw new Error("resourceAppid must be provided")}if(!n.resourceEnv)throw new Error("resourceEnv must be provided");if(n.config||(n.config={}),this.defaultInstance=t,this.instanceOptions=JSON.parse(JSON.stringify(n)),this.meta=t.meta,this.apiPermissions=t.apiPermissions,this.instanceOptions.config.database=Vt(Wu(),this.instanceOptions.config.database||{}),"web"===this.runtimeInfo.env){if(this.exportAPI.init=this.webInit.bind(this),this.webRequest=(0,Fr.getBoundAuthRequest)(this),this.registerService((0,Fr.createWebService)(this)),!this.instanceOptions.identityless&&(this.authStorage=this.defaultInstance.authStorage,!this.authStorage))throw new Error("authStorage not found")}else this.exportAPI.init=this.miniprogramInit.bind(this);this.instanceOptions.resourceAppid&&(this.exportAPI.refreshAuth=this.refreshAuth.bind(this))}miniprogramInit(){var e=()=>super.init,t=this;return s()((function*(){if(!t.inited){if(t.instanceOptions.resourceAppid){const n=(yield t.refreshAuth()).data.env_auth_info;return 0===n.errCode?(e().call(t),{errCode:n.errCode,errMsg:n.errMsg,expireTime:1e3*n.expire_time}):{errCode:n.errCode,errMsg:n.errMsg}}e().call(t)}}))()}webInit(){var e=()=>super.init,t=this;return s()((function*(){if(!t.inited){if(!t.instanceOptions.identityless){const n=(yield t.refreshAuth()).data.env_auth_info;return 0===n.errCode?(t.sendInitRequest().then((()=>{t.testSpeed()})),e().call(t),{errCode:n.errCode,errMsg:n.errMsg,expireTime:1e3*n.expire_time}):{errCode:n.errCode,errMsg:n.errMsg}}t.inited=!0}}))()}webRefreshToken(){var e=this;return s()((function*(){return e._webCurrentRefreshTokenPromise||(e._webCurrentRefreshTokenPromise=new Promise(function(){var t=s()((function*(t,n){try{const n=(yield e.webRequest({url:"/refresh_token",method:"POST",json:{appid:e.instanceOptions.appid,refresh_token:e.authStorage.getItem("refreshToken")}})).data;e.authStorage.setItem("appid",n.access_token),t()}catch(e){n(e)}finally{e._webCurrentRefreshTokenPromise=void 0}}));return function(e,n){return t.apply(this,arguments)}}())),e._webCurrentRefreshTokenPromise}))()}refreshAuth(){const e=JSON.stringify({resource_appid:this.instanceOptions.resourceAppid,resource_env:this.instanceOptions.resourceEnv}),t=+new Date,n=t,i=this.request({apiName:"tcbapi_getenvauth",serializedReqData:e});return i.then((e=>{const i=+new Date;Jn({apiName:"cloud.refreshAuth",apiEndTime:+new Date,apiStartTime:t,tunnelEndTime:i,tunnelStartTime:n})})),i}}function Wu(){return{realtime:{maxReconnect:Tu.REALTIME_DB_MAX_RECONNECT,reconnectInterval:Tu.REALTIME_DB_WS_RECONNECT_INTERVAL,totalConnectionTimeout:Tu.REALTIME_DB_TOTAL_CONNECTION_TIMEOUT}}}const ju=Symbol("CDN");class Gu{constructor(e){this.symbol=ju,this.options=void 0,this.options=e}}function Vu(e,t){return new Promise(((n,i)=>{(t||Rn()).uploadToCommonCDN(o()(o()({},e),{},{success:n,fail:i}))}))}function Hu(e,t){return new Promise(((n,i)=>{(t||Rn())._operateWXData(o()(o()({},e),{},{success:n,fail:i}))}))}const zu=function(){var e=s()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");const t=new WeakMap,n=[];e.data&&JSON.stringify(e.data,((i,r)=>r&&r.symbol===ju?void n.push(new Promise(((n,i)=>{const o={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},a=r;switch(s=a.options,Object.prototype.toString.call(s).slice(8,-1)){case"Object":if(!a.options.filePath)throw new Error("filePath must be provided");o.filePath=a.options.filePath;break;default:o.fileData=a.options}var s;n(Vu(o,e.sdk).then((e=>{t.set(r,e.fileUrl)})))}))):r)),yield Promise.all(n);const i=JSON.stringify(e.data,((e,n)=>n&&n.symbol===ju&&t.has(n)?t.get(n):n)),{rawData:r}=yield Hu({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:e.service,api_name:e.api,data:i,client_msg_id:`${Math.random()}_${Date.now()}`,version:1}},e.sdk);let o,a,s;try{const e=JSON.parse(r);if(o=e.request_id,0===e.errcode)a=JSON.parse(e.data);else{const t=`invokeService:fail ${e.errcode} ${e.errmsg} (requestId: ${o})`;s=new Error(t),s.errCode=e.errcode,s.errMsg=t,s.requestId=o}}catch(e){const t=`invokeService:fail inner protocol parse failed (requestId: ${o||"empty"})`;s=new Error(t),s.errCode=-1,s.errMsg=t,s.requestId=o}if(s)throw s;return{errMsg:"invokeService:ok",data:a,requestId:o}}catch(e){let t="invokeService:fail ";if(e&&e.errMsg&&e.err_code){t+=e.errMsg;const n=new Error(t+`(err_code ${e.err_code})`);throw n.errCode=e.err_code,n}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}}));return function(t){return e.apply(this,arguments)}}();let Zu,Yu,$u;!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e[e.PreResp=3]="PreResp",e[e.FinalResp=4]="FinalResp"}(Zu||(Zu={})),function(e){e[e.None=0]="None",e[e.SysErr=1]="SysErr",e[e.Timeout=2]="Timeout"}(Yu||(Yu={})),function(e){e[e.Sync=0]="Sync",e[e.LongAsync=2]="LongAsync"}($u||($u={}));const qu={SM_EXCEED_MAX_TIMEOUT_POLL_RETRY:100,SM_EMPTY_CALL_RESULT:101,SM_EXCEED_MAX_POLL_RETRY:102,SM_PROVIDER_EXECUTION_ERROR:103,SM_POLL_RESULT_EXPIRED:104,SM_EMPTY_POLL_RESULT_BASE_RESP:105,SM_POLL_RESULT_BASE_RESP_RET_ABNORMAL:106,SM_UNKNOWN_SCENE:107,SM_SYSTEM_ERROR:108},Qu="exceed max timeout retry",Ju="empty call result",Xu="exceed max poll retry",Ku="invokeService",ed=2e4;var td;!function(e){e[e.InvalidRequestId=14]="InvalidRequestId"}(td||(td={}));const nd=e=>{const t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},id=e=>e.join("->"),rd=function(){var e=s()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");const n=new WeakMap,i=[];e.data&&JSON.stringify(e.data,((t,r)=>r&&r.symbol===ju?void i.push(new Promise(((t,i)=>{const o={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},a=r;switch(s=a.options,Object.prototype.toString.call(s).slice(8,-1)){case"Object":if(!a.options.filePath)throw new Error("filePath must be provided");o.filePath=a.options.filePath;break;default:o.fileData=a.options}var s;t(Vu(o,e.sdk).then((e=>{n.set(r,e.fileUrl)})))}))):r)),yield Promise.all(i);const r=JSON.stringify(e.data,((e,t)=>t&&t.symbol===ju&&n.has(t)?n.get(t):t)),o=`${Math.random()}_${Date.now()}`;if(e.async){const t={service_id:e.service,api_name:e.api,data:r,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:o,scene:Zu.CALL,retry_reason:Yu.None,req_type:$u.LongAsync},n=yield Hu({apiName:"webapi_servicemarket_jsapi_comm",reqData:t},e.sdk),i=JSON.parse(n.rawData);if(i.scene===Zu.FinalResp&&0===i.errcode)return{errMsg:"invokeService:ok",requestId:i.request_id};{const e=nn({errCode:qu.SM_SYSTEM_ERROR,errMsg:`requestID ${i.request_id}, error message ${i.errmsg||"unknown"} (callid ${o})`},Ku);throw e.requestID=i.request_id,e}}{const{result:n,requestID:i}=yield function(e,n,i){return t.apply(this,arguments)}(e,r,o);return{errMsg:"invokeService:ok",data:n,requestId:i}}}catch(e){let t="invokeService:fail ";if(e&&e.errMsg&&e.err_code){t+=e.errMsg;const n=new Error(t+`(err_code ${e.err_code})`);throw n.errCode=e.err_code,n}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}function t(){return(t=s()((function*(e,t,i){return new Promise(((o,a)=>{const s=[nd("start")],{resolve:c,reject:l}=r(s,o,a);n({param:e,data:t,callID:i,scene:Zu.CALL,retryReason:Yu.None,tryCount:50,systemErrorRetry:2,timeoutErrorRetry:2,trace:s,resolve:c,reject:l})}))}))).apply(this,arguments)}function n(e){return i.apply(this,arguments)}function i(){return(i=s()((function*(t){const{param:i,data:r,callID:a,scene:c,retryReason:l,tryCount:u,trace:d,systemErrorRetry:h,timeoutErrorRetry:p,resolve:f,reject:g}=t,_={service_id:i.service,api_name:i.api,data:c===Zu.CALL?r:void 0,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:a,scene:c,retry_reason:l};let m=!1,y=!1;const v=()=>{clearTimeout(b),y=!0},A=+new Date,b=setTimeout(s()((function*(){if(!(+new Date-A>2e4&&(yield _i(),y))){if(!Bi()&&+new Date-A>60)return d.push(nd("timeout, exceed max retry gap")),g(nn({errCode:qu.SM_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${a}) (trace: ${id(d)})`},Ku));m=!0,t.timeoutErrorRetry>0?(d.push(nd("timeout, retry")),n(o()(o()({},t),{},{scene:c,retryReason:Yu.Timeout,tryCount:u-1,timeoutErrorRetry:p-1}))):(d.push(nd("timeout, abort")),g(nn({errCode:qu.SM_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`${Qu} (callId: ${a}) (trace: ${id(d)})`},Ku)))}})),ed);try{new Date;const i=yield Hu({apiName:"webapi_servicemarket_jsapi_comm",reqData:_},e.sdk);try{if(new Date,m)return;v(),i.rawData;const e=JSON.parse(i.rawData);if(!e)return d.push(nd("empty resp")),g(nn({errCode:qu.SM_EMPTY_CALL_RESULT,errMsg:Ju},Ku));if(e.scene!==Zu.PreResp){if(e.scene===Zu.FinalResp){if(0!==e.errcode){const t=nn({errCode:qu.SM_PROVIDER_EXECUTION_ERROR,errMsg:`requestID ${e.request_id}, error message ${e.provider_errmsg||"unknown"} (callid ${a})`},Ku);return t.requestID=e.request_id,g(t)}{let t=e.data;try{t=JSON.parse(t)}catch(e){}return f({result:t,requestID:e.request_id})}}return d.push(nd("unexpected scene")),g(nn({errCode:qu.SM_UNKNOWN_SCENE,errMsg:`unknown scene ${e.scene} (callId: ${a}) (trace: ${id(d)})`},Ku))}if(!(u>=0))return d.push(nd("too many polls, abort")),g(nn({errCode:qu.SM_EXCEED_MAX_POLL_RETRY,errMsg:`${Xu} (callId: ${a}) (trace: ${id(d)})`},Ku));d.push(nd("normal poll")),n(o()(o()({},t),{},{scene:Zu.POLL,retryReason:Yu.None,tryCount:u-1}))}catch(e){g(nn({errCode:qu.SM_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${a})`},Ku))}}catch(e){if(new Date,m)return;v();const i=e instanceof Error?e:JSON.stringify(e);e&&e.operateWXDataFail&&h>0?(d.push(nd(`system error (${i}), retry`)),n(o()(o()({},t),{},{scene:c,retryReason:Yu.SysErr,tryCount:u-1,systemErrorRetry:h-1}))):(d.push(nd(`system error (${i}), abort`)),g(nn(`${i} (callId: ${a}) (trace: ${id(d)})`,Ku)))}}))).apply(this,arguments)}function r(e,t,n){const i=t=>{e.push(nd(`app ${t}`))};Ti(i);return{resolve:e=>{Si(i),t(e)},reject:e=>{Si(i),n(e)}}}}));return function(t){return e.apply(this,arguments)}}();function od(e){return ad.apply(this,arguments)}function ad(){return(ad=s()((function*(e){const t=yield Hu({apiName:"webapi_servicemarket_jsapi_retrieve",reqData:{request_id:e.requestId}},e.sdk),n=JSON.parse(t.rawData);if(0===n.errcode)return n.provider_errmsg?{errCode:0,errMsg:"getAsyncResult:fail provider execution error",status:n.status,providerErrMsg:n.provider_errmsg,requestId:n.request_id}:{errCode:0,errMsg:"getAsyncResult:ok",data:JSON.parse(n.data),status:n.status,requestId:n.request_id};{const e=new Error(`getAsyncResult:fail requestID ${n.request_id}, error message ${n.errmsg||"unknown"}`);throw e.errCode=n.errcode,e.errMsg=n.errmsg,e}}))).apply(this,arguments)}const sd="invokeService",cd="getAsyncResult",ld=e=>{(Bi()&&!e.async?zu(e):rd(e)).then((t=>{bn(sd,e,t)})).catch((t=>{wn(sd,e,t)}))},ud=e=>{od(e).then((t=>{bn(cd,e,t)})).catch((t=>{wn(cd,e,t)}))};function dd(e={}){const{sdk:t}=e;return{invokeService:e=>(e=>En(e)?ld(e):Bi()&&!e.async?zu(e):rd(e))(o()(o()({},e),{},{sdk:t})),getAsyncResult:e=>(e=>En(e)?ud(e):od(e))(o()(o()({},e),{},{sdk:t})),CDN:Gu}}})(),__cloudSDK__=i})(),(()=>{var e={146:(e,t,n)=>{var i=n(61),r=n(76);function o(e){e=(0,r.B)(e),(0,i.N0)()?("function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),console.error("Uncaught FrameworkError","\n",e.message,"\n",e.stack)):(0,i.sK)(e,"")}function a(e={}){(0,i.N0)()?("function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),console.error("Uncaught (in promise) FrameworkError","\n",e.reason)):(0,i.sK)(e.reason,"",e.promise||null)}void 0!==WeixinJSBridge&&(WeixinJSBridge.on("onError",o),WeixinJSBridge.on("unhandledRejection",a)),Foundation.on("error",o),Foundation.on("unhandledRejection",a)},676:(e,t,n)=>{n.d(t,{OJ:()=>o,yQ:()=>i,YZ:()=>r});function i(){if(n.g.PerfDog)return n.g.PerfDog}function r(){if(n.g.NativeGlobal&&n.g.NativeGlobal.Profiler)return n.g.NativeGlobal.Profiler}const o=new class{constructor(){this.callbacks=new Map}sendPackage(e,t){const n=this.callbacks.get(e);n&&Array.isArray(n)&&n.forEach((n=>{n(e,t)}))}registerCallback(e,t){if(this.callbacks.get(e)){this.callbacks.get(e).push(t)}else{const n=[t];this.callbacks.set(e,n)}}};n.g.LanDebug=o},495:(e,t,n)=>{var i=n(176);__wxConfig.onReady((()=>{"undefined"!=typeof __wxSourceMap&&(__wxSourceMap.get=function(e){if(__wxSourceMap[e])return __wxSourceMap[e];const t=(0,i.M)();for(let n=0;n<t.length;n++){const i=t[n].contextGlobal.__wxSourceMap;if("object"==typeof i&&i[e]){let t;try{t=JSON.parse(JSON.stringify(i[e]))}catch(e){console.error("[SourceMap] clone soucemap failed.")}return t}}})}))},647:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(356),r=n.n(i),o=n(61);const a={},s={},c={},l={},u={},d={},h=wxNativeConsole.createLogger("SubContext");let p,f=0;JSContext.subscribe("subContextMessage",((e,t)=>{const n=c[t];n&&n.__onMessageHandler(e)})),JSContext.subscribe("subContextReady",((e,t)=>{(0,o.G$)()||(0,o.oi)()?c[t].__onReadyHandler(t,e):p&&(p.__onReadyHandler(t,e),p=void 0)})),JSContext.subscribe("subContextLibVarReady",((e,t)=>{c[t].__onLibVarReadyHandler(e)}));const g=function(e){const t=JSContext.create(e);return t<=0&&setTimeout((()=>{}),0),a[this.__guid__]=t,t},_=function(e){const t=(0,o.G$)()||JSContext.isAsync()?JSContext.alloc(e):JSContext.alloc();return t<=0&&setTimeout((()=>{}),0),((0,o.G$)()||(0,o.oi)())&&(c[t]=this),a[this.__guid__]=t,t},m=function(e,t){Object.defineProperty(this,e,{value:t,writable:!1,configurable:!1})},y=function(){if(void 0!==s[this.__guid__]){d[this.__guid__].forEach((e=>{this.postMessage(e)})),d[this.__guid__]=[]}};const v=class{constructor({name:e,secure:t=!0,env:n={},entry:i=[],injectAfterAlloc:r=!0}){m.call(this,"__name__",e),m.call(this,"__guid__",f++),m.call(this,"__secure__",t),m.call(this,"__entry__",i),m.call(this,"__injectAfterAlloc__",r),this.contextGlobal=globalThis,this.alreadyLoadedJsFiles=new Set,this.setExportEnv(n),u[this.__guid__]=[],d[this.__guid__]=[]}init(){var e=this;if(p=this,!JSContext.supportAlloc())return g.call(this,this.__entry__);if(_.call(this,this.__name__),this.__injectAfterAlloc__){if(((0,o.G$)()||JSContext.isAsync())&&(0,o.N0)())return r()((function*(){for(let t=0,n=e.__entry__.length;t<n;t++)yield e.evaluateScriptFile(e.__entry__[t])}))();this.__entry__.forEach((e=>this.evaluateScriptFile(e)))}}unShiftEntries(e){h.log("unShiftEntries",e),this.__entry__.unshift(...e)}onMessage(e){if(this.__onMsgCallback=e,"function"==typeof this.__onMsgCallback){u[this.__guid__].forEach((e=>{this.__onMsgCallback(e)})),u[this.__guid__]=[]}}postMessage(e){const t=s[this.__guid__];if(void 0!==t)JSContext.publish("mainContextMessage",e,[t]);else{d[this.__guid__].push(e)}}onInitReady(e){this.__onInitReadyCallbacks=this.__onInitReadyCallbacks||[],this.__onInitReadyCallbacks.push(e)}setExportEnv(e){e.contextName=this.__name__,e.contextSecure=this.__secure__,l[this.__guid__]=e}setEntry(e){this.__entry__.splice(0,this.__entry__.length),this.__entry__.push(...e)}getEntry(){return this.__entry__}refreshExportEnv(e){return new Promise((t=>{if(!e)throw Error("refreshExportEnv: missing arguments.");this.setExportEnv(e);const n=l[this.__guid__],i=s[this.__guid__];JSContext.publish("subContextEnvReady",n,[i],!0),JSContext.subscribe("subContextRefreshEnvReady",((e,n)=>{i===n&&t()}))}))}refreshWxConfig(e,t){const n=s[this.__guid__];JSContext.publish("subContextRefreshWxConfig",{key:e,value:t},[n])}dynamicExportGlobal(e={name:"",value:"",needCondom:!0},t){const n=()=>{const n=s[this.__guid__];JSContext.publish("exportGlobalRequire",e,[n]),t&&t()};void 0!==a[this.__guid__]?n():this.onInitReady(n)}evaluateScriptFile(e){h.log(`evaluateScriptFile, scriptFilePath=${e}`),h.log("evaluateScriptFile, clientIds",a),h.log(`evaluateScriptFile, __guid__=${this.__guid__}`,typeof this.__guid__);const t=a[this.__guid__];if(h.log(`evaluateScriptFile, clientId=${t}, __guid__=${this.__guid__}, ${a[this.__guid__]}`,a),void 0!==t){if(((0,o.G$)()||JSContext.isAsync())&&(0,o.N0)())return h.log("evaluateScriptFile, (isDevtools || JSContext.isAsync) && isIsolatedContext"),new Promise((n=>{const i=JSContext.evaluateScriptFile(t,e,(()=>n(i)));if(h.log(`JSContext.evaluateScriptFile ret=${i}`),1!==i)throw new Error(`SubContext evaluateScriptFile "${e}" failed: error code ${i}`)}));const n=JSContext.evaluateScriptFile(t,e);if(h.log(`JSContext.evaluateScriptFile ret=${n}`),1!==n)throw new Error(`SubContext evaluateScriptFile "${e}" failed: error code ${n}`);this.alreadyLoadedJsFiles.add(e)}}loadJsFiles(e){e=e.map((e=>"/"===e[0]?e:"/"+e));const t=a&&a[this.__guid__],n=e.filter((e=>this.alreadyLoadedJsFiles.has(e)));if(n.length>0&&wxNativeConsole.info("[SubContext] loadJsFiles ignored loaded: "+n.join(",")),0!==(e=e.filter((e=>!this.alreadyLoadedJsFiles.has(e)))).length){if(void 0!==t&&JSContext&&JSContext.batchLoadJsFiles)try{const n=Date.now();wxNativeConsole.info("[SubContext] loadJsFiles: "+e.join(",")),JSContext.batchLoadJsFiles(t,e),wxNativeConsole.info("[SubContext] loadJsFiles done, cost "+(Date.now()-n)),e.forEach((e=>this.alreadyLoadedJsFiles.add(e)))}catch(t){throw new Error(`SubContext loadJsFiles "${e}" failed: error ${t}`)}}else wxNativeConsole.info("[SubContext] loadJsFiles have no files to load, return")}destroy(){const e=a[this.__guid__],t=s[this.__guid__];e>0&&(JSContext.publish("subContextDestroy",{},[t]),JSContext.destroy(e)),delete c[t],delete a[this.__guid__],delete s[this.__guid__],delete l[this.__guid__],delete u[this.__guid__],delete d[this.__guid__],delete this.__guid__,delete this.contextGlobal}__onMessageHandler(e){if("function"==typeof this.__onMsgCallback)this.__onMsgCallback(e);else{u[this.__guid__].push(e)}}__onReadyHandler(e,t){c[e]=this,s[this.__guid__]=e,this.contextGlobal=t.contextGlobal;const n=l[this.__guid__];n&&JSContext.publish("subContextEnvReady",n,[e],!0),this.__onInitReadyCallbacks&&(this.__onInitReadyCallbacks.forEach((e=>{e(t)})),delete this.__onInitReadyCallbacks),delete this.__onReadyHandler,y.call(this)}}},176:(e,t,n)=>{n.d(t,{z:()=>r,M:()=>o});const i=[],r=function(e){i.push(e)},o=function(){return i}},61:(e,t,n)=>{n.d(t,{xJ:()=>o,N0:()=>s,F:()=>c,QT:()=>l,sK:()=>u,Hw:()=>d,G$:()=>h,gn:()=>p,cF:()=>f,NG:()=>g,Qj:()=>_,c6:()=>m,oi:()=>y});var i=n(356),r=n.n(i);const o=globalThis;function a(e){e===o&&h()||(Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){let n;try{n=e[t]}catch(e){}"object"!=typeof n&&"function"!=typeof n||Object.isFrozen(n)||a(n)})))}const s=function(){return void 0!==__wxConfig&&__wxConfig.isIsolateContext},c=function(){const e=o;Protect.globalEsObjs.concat(["console"]).forEach((function(t){e[t]&&(a(e[t]),Object.defineProperty(e,t,{value:e[t],configurable:!1,writable:!1}))}))},l=function(){var e=r()((function*(e,t){Reporter.reportIDKey({key:t});try{yield e()}catch(e){Reporter.reportIDKey({key:`${t}_fail`,force:!0});const n=t.indexOf("initGame")>=0?"gameSDKScriptError":"appServiceSDKScriptError";Reporter.errorReport({key:n,error:e,extend:""})}}));return function(t,n){return e.apply(this,arguments)}}(),u=function(e,t,n){void 0!==n?Reporter.thirdErrorReport({error:e,isUnhandledRejection:!0,promise:n,extend:t}):Reporter.thirdErrorReport({error:e,isUnhandledRejection:!1,extend:t})},d=function(e,t){return function(){try{return t.apply(t,arguments)}catch(t){Reporter.errorReport({key:e,error:t,extend:""})}}},h=function(){return"devtools"===__wxConfig.platform},p=function(){return"ios"===__wxConfig.platform},f=e=>{let t;if(WeixinJSBridge.invoke("accessSync",{path:e},(e=>{/:fail/.test(e.errMsg)&&(t=e.errMsg)})),t)throw new Error(t)},g=e=>{let t,n;if(WeixinJSBridge.invoke("readFileSync",{filePath:e,encoding:"utf-8"},(e=>{/:fail/.test(e.errMsg)?n=e.errMsg:t=e.data})),n)throw new Error(n);return t},_=(e="",t=[])=>{if(e&&"string"==typeof e&&!/^index/.test(e)){const n=e.replace(/(^\/+)|(\/+$)/g,"").split("/"),i=t.find((t=>{if(t.independent){const i=t.root||"",r=t.alias||"",o=i.replace(/(^\/+)|(\/+$)/g,"").split("/");if(n.length>=o.length){const e=o.every(((e,t)=>e===n[t]));if(e)return e}if(r&&0===e.indexOf(r))return!0}return!1}));if(i)return i}return!1},m=e=>{const t=[1001,1011,1007,1008,1074,1088,1044,1010,1096,1014,1043,1107,1155].indexOf(e)>=0;return t},y=()=>JSContext.isAsync()},290:(e,t,n)=>{n.d(t,{E:()=>E,F:()=>T});var i=n(503),r=n.n(i),o=n(647),a=n(676),s=n(61),c=n(594);const l="undefined"!=typeof __AppServiceRemoteDebugger__,u=l?__AppServiceRemoteDebugger__(__wxConfig.platform,c.M,c.O,s.NG,n.g.WeixinJSBridge):null;let d={};l&&u&&(d=(0,s.gn)()?u.runtime.getSubContextGlobals():{},d.BaseConsole&&u.runtime.setupConsole(console,d.BaseConsole));const h="app-service.js",p="appservice.app.js",f="common.app.js",g="appservice.js",_=new o.Z({name:"app",secure:!1,entry:[h],injectAfterAlloc:!1}),m=new Set;__wxConfig.onReady((()=>{"develop"!==__wxConfig.envVersion&&"trial"!==__wxConfig.envVersion||(m.add("wx0354ba48aadc0ab2"),m.add("wxfa43a4a7041a84de"))}));const y=e=>wxNativeConsole.info("[injectEntryFile] "+e),v=new Set,A=(e,t)=>{if(v.has(e))return;l&&u&&(0,s.gn)()&&u.runtime.registerScript(e);let n=-1,i=-1;if(v.add(e),y(`isLazyLoad: ${__wxConfig.isLazyLoad}`),y(`moduleName: ${e}`),y(`separatedPlugins: ${JSON.stringify(t)}`),__wxConfig.isLazyLoad){console.info("Lazy code loading is enabled. Only injecting required components.");const r=[];t.forEach((t=>{let n=(e+t.prefix_path+"/").replace(/\/\/$/,"/");t.prefix_path||(n+=`__extended__/${t.plugin_id}/`,m.add(t.plugin_id));try{y(`accessSync path: ${n+f}`),(0,s.cF)(n+f),r.push(n+f,n+p),t.prefix_path||((e,t)=>{const n=(0,s.NG)(t);if(!n)return;let i;try{i=JSON.parse(n)}catch(e){i={}}(__wxConfig.subPackages||[]).forEach((t=>{"/"+t.root===e&&t.useExtendedLib&&i.allExtendedComponents&&(t.allExtendedComponents=i.allExtendedComponents)})),_.refreshWxConfig("subPackages",__wxConfig.subPackages)})(e,n+"plugin.json")}catch(e){r.push(n+g)}})),r.push(e+f,e+p),y(`using separated plugins: ${JSON.stringify(r)}`),n=Date.now(),_.loadJsFiles(r),i=Date.now()}else{const r=t.map((t=>{let n=(e+t.prefix_path+"/").replace(/\/\/$/,"/");return t.prefix_path||(n+=`__extended__/${t.plugin_id}/`,m.add(t.plugin_id)),n+g}));r.push(e+h),y(`using separated plugins: ${JSON.stringify(r)}`),n=Date.now(),r.forEach((e=>{e="/"===e[0]?e:"/"+e,_.alreadyLoadedJsFiles.has(e)||(_.evaluateScriptFile(e),_.alreadyLoadedJsFiles.add(e))})),i=Date.now()}_.refreshWxConfig("extendedLibList",Array.from(m)),n>0&&i>0&&(y("time cost: "+(i-n)),b.send({type:"evaluateScript",moduleName:e,startTime:n,endTime:i}))},b=function(){let e;return{setReceiver(t){e=t},send(t){"function"==typeof e&&e(t)}}}(),w=(0,s.Hw)("appServiceSDKScriptError",((e,t)=>{let n=t.moduleName;const i="__APP__"===n,r=t.separatedPlugins||[];"string"!=typeof n&&console.error("SubContext onSubPackageReady error: moduleName is empty"),n.endsWith("/")||(n=`${n}/`),__wxConfig.onReady((()=>{(0,s.gn)()&&l?(n=i?"":n,u.runtime.isInitialInject()?(u.runtime.startBufferBridgeMessages(),u.runtime.runAfterAttached((()=>{A(n,r),u.runtime.dispatchBridgeMessages()}))):A(n,r)):A(i?"":n,r)}))})),E=function(){var e;let t={};l&&u&&(t=r()({__isAppServiceRemoteDebugMode__:!0,__remoteDebug__:u.__remoteDebug__},d));const i=new Safeway(_),o=(null===(e=__libVersionInfo__)||void 0===e?void 0:e.version)||"9.9.9",s=r()(r()({wxLibVersion:o,__Function__:__Function__,console:Object.assign({group:()=>{},groupEnd:()=>{}},console),setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,safeway:i,__wxConfig:__wxConfig,Reporter:Reporter,BaseConsole:__appServiceConsole__.BaseConsole,NativeGlobal:n.g.NativeGlobal,WeixinCanvas:n.g.WeixinCanvas,WeixinArrayBuffer:n.g.WeixinArrayBuffer,wxNativeConsole:wxNativeConsole,getWxSourceMap(){if("undefined"!=typeof __wxSourceMap)return __wxSourceMap},Canvas:n.g.Canvas,Image:n.g.Image,ImageData:n.g.ImageData,Path2D:n.g.Path2D,SkiaCanvasExternalTexture:n.g.SkiaCanvasExternalTexture,skiacanvasLoadNewFont:n.g.skiacanvasLoadNewFont,SkiaCanvas:NativeGlobal.SkiaCanvas,SkiaCanvasRequestAnimationFrame:NativeGlobal.SkiaCanvasRequestAnimationFrame,SkiaCanvasCancelAnimationFrame:NativeGlobal.SkiaCanvasCancelAnimationFrame,SkiaImageData:NativeGlobal.SkiaImageData,HTMLCanvasView:NativeGlobal.HTMLCanvasView,HTMLCanvasElement:NativeGlobal.HTMLCanvasElement,SkiaImage:NativeGlobal.SkiaImages,SkiaPath2D:NativeGlobal.SkiaPath2D,SkiaCanvasLoadNewFont:NativeGlobal.SkiaCanvasLoadNewFont,originConsole:console},t),{},{performanceChannel:b,debuggerMessager:c.O,__sclEngine__:__sclEngine__,LanDebug:a.OJ,getPerfDog:a.yQ,getProfiler:a.YZ});i.onSubpackageReady(w),_.setExportEnv(s),_.init()},T=function(){return _};JSContext&&JSContext.registerSyncMethod&&JSContext.registerSyncMethod("injectEntryFile",(e=>{A(e.moduleName,e.separatedPlugins)}))},594:(e,t,n)=>{n.d(t,{M:()=>o,O:()=>r});const i=[],r="undefined"!=typeof DebuggerConnection?DebuggerConnection:{};r.registerCallback=e=>{"function"==typeof e&&i.push(e)},r.onCustomMessage=(e,t)=>{i.forEach((n=>{try{n(e,t)}catch(e){}}))};const o="undefined"!=typeof JSThread?JSThread:null},309:(e,t,n)=>{n.d(t,{M:()=>u,e:()=>d});var i=n(647),r=n(61),o=n(676),a=n(594);n.g.LanDebug=o.OJ,n.g.getPerfDog=o.yQ,n.g.__debuggerMessager__=a.O;const s=new i.Z({name:"game",secure:!1,entry:["game.js"]}),c=wxNativeConsole.createLogger("initGameContext");function l(){__appServiceSDK__.getABTestConfig({experimentId:(0,r.gn)()?"clicfg_appbrand_ios_game_split_multi_plugincode":"clicfg_appbrand_game_split_multi_plugincode",experimentType:"Expt",success(e){c.log(`testConfig result=${e.testConfig}`),e&&1===Number(e.testConfig)&&function(){const e=__wxConfig.plugins||__wxConfig.gamePlugins;if(c.log("plugins",e),e){const t=Object.keys(e).filter((t=>{const{contexts:n}=e[t];return c.log("contexts",n),!n||n.some((e=>"gameContext"===e.type))})).map((t=>e[t]));c.log("gameContextPlugins",t),s.unShiftEntries(t.map((e=>{const{provider:t}=e,n=`__plugin__/${t}/plugin.js`;return c.log(`evaluate game plugin script file: ${n}`),n})))}}()},fail(e){c.error("getABTestConfig fail",e)}})}const u=function(e){return e.__wxConfig=__wxConfig,s.setExportEnv(e),c.log("__appServiceSDK__",__appServiceSDK__),(0,r.G$)()||JSContext.isAsync()||l(),s.init()},d=function(){return s}},945:(e,t,n)=>{n.d(t,{J:()=>s,r:()=>c});var i=n(647),r=n(61);const o=new i.Z({name:"gameOpenData",secure:!0,entry:["subContext.js"]}),a=wxNativeConsole.createLogger("initOpenDataContext");const s=e=>(e.__wxConfig=__wxConfig,o.setExportEnv(e),(0,r.G$)()||JSContext.isAsync()||function(){const e=__wxConfig.plugins||__wxConfig.gamePlugins;if(a.log("plugins",e),e){const t=Object.keys(e).filter((t=>{const{contexts:n}=e[t];return a.log("contexts",n),!!n&&n.some((e=>"openDataContext"===e.type))})).map((t=>e[t]));a.log("gameContextPlugins",t),o.unShiftEntries(t.map((e=>{const{provider:t}=e,n=`__plugin__/${t}/plugin.js`;return a.log(`evaluate opendata plugin script file: ${n}`),n})))}}(),o.init()),c=function(){return o}},813:(e,t,n)=>{n.d(t,{dr:()=>g,qo:()=>_,hS:()=>y,K0:()=>m});var i=n(356),r=n.n(i),o=n(503),a=n.n(o),s=n(647),c=n(176),l=n(61),u=n(309),d=n(945);const h={},p={isolatedContext:{},gameContext:{},gameOpenDataContext:{},unknown:{}},f=e=>`__plugin__/${e}/plugin.js`,g=(e={provider:"",secure:!0,env:null,isPreload:!1})=>{const{env:t,provider:n,secure:i,isPreload:o}=e;if(!1===(0,l.N0)())throw new Error("isn't isolateContext mode!");const u=h[n];let d;if(u)return d=u.contextGlobal.__require,!0===u.__isCompleted||!1===u.__isCompleted&&(u.dynamicExportGlobal({name:"pluginEnv",value:t}),p.isolatedContext[n]=d),d;const g=`gamePlugin_${n}`,_=f(n),m=new s.Z({name:g,secure:i,entry:[_]}),y=e=>(e.__wxConfig=__wxConfig,m.setExportEnv(a()(a()({},e),{},{pluginEnv:t})),m.init());return((0,l.G$)()||JSContext.isAsync())&&!0===o?r()((function*(){return yield(0,l.QT)(r()((function*(){(0,c.z)(m),yield y(__appServiceSDK__.getIsolatedGamePluginContextEnv(e)),d=m.contextGlobal.__require,m.__isCompleted=!1,h[n]=m})),"initGamePluginContext"),d}))():((0,l.QT)((()=>{(0,c.z)(m),y(__appServiceSDK__.getIsolatedGamePluginContextEnv(e)),d=m.contextGlobal.__require,m.__isCompleted=!0,h[n]=m}),"initGamePluginContext"),p.isolatedContext[n]=d,d)},_=(e,t,n)=>{const i=wxNativeConsole.createLogger("injectGamePlugin"),{__name__:o}=e,a=f(t),s="game"===o?"gameContext":"gameOpenData"===o?"gameOpenDataContext":"unknown";return i.log(`invoke, provider=${t}, isPreload=${n}, contextName=${o}, entry=${a}, contextType=${s}`),i.log(`invoke, provider=${t}, isPreload=${n}, contextName=${o}, entry=${a}, contextType=${s}`),((0,l.G$)()||JSContext.isAsync())&&!0===n?(i.log("(isDevtools || JSContext.isAsync) && isPreload"),r()((function*(){return yield e.evaluateScriptFile(a),p[s][t]=e.contextGlobal.__require,{provider:t,requireFunc:e.contextGlobal.__require,contextType:s}}))()):(i.log("will evaluateScriptFile"),e.evaluateScriptFile(a),p[s][t]=e.contextGlobal.__require,{provider:t,requireFunc:e.contextGlobal.__require,contextType:s})},m=function(){var e=r()((function*(){const e=(()=>{const e=__wxConfig.gamePlugins||__wxConfig.plugins||{},t=[];return Object.keys(e).forEach((n=>{e[n].contexts?e[n].contexts.forEach((i=>{t.push(a()(a()({},e[n]),{},{context:i,contexts:null}))})):t.push(a()(a()({},e[n]),{},{context:{type:"gameContext"},contexts:null}))})),t})(),t=(e,t)=>e.getEntry().unshift(t);return Promise.all(e.map((e=>{const{provider:n,context:i}=e;switch(i.type){case"isolatedContext":return g(a()(a()({},e),{},{isPreload:!0}));case"gameContext":return t((0,u.e)(),f(n));case"openDataContext":return t((0,d.r)(),f(n));default:throw new Error(`pluginConf error: invalid context name: ${i.type}`)}})))}));return function(){return e.apply(this,arguments)}}(),y=()=>p},228:(e,t,n)=>{var i=n(176);JSContext&&JSContext.registerSyncMethod&&JSContext.registerSyncMethod("loadJsFiles",(e=>{const t=(0,i.M)().find((t=>t.__name__===e.contextName));t?t.loadJsFiles(e.paths):wxNativeConsole.warn(`[MainContext] context name with ${e.contextName} not found, loadJsFiles fail`)}))},76:(e,t,n)=>{n.d(t,{B:()=>i});const i=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.replace(/"/g,'\\"').replace(/'/g,'"').replace(/\n/g,"\\n"))}catch(t){return{message:e,stack:""}}}},356:e=>{e.exports=BabelRuntimeHelpers.asyncToGenerator},503:e=>{e.exports=BabelRuntimeHelpers.objectSpread2}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{n.r(i),n.d(i,{initAppRelatedContexts:()=>d,initGameRelatedContexts:()=>h,getAppContext:()=>r.F,getGameContext:()=>o.e,createGameOpenDataContext:()=>_,getGameOpenDataContext:()=>a.r,createIsolatedGamePlugin:()=>s.dr,injectGamePlugin:()=>s.qo,getGamePlugins:()=>s.hS,isIsolateContext:()=>c.N0,initGameJS:()=>f,initFunctionalPage:()=>p,getPool:()=>l.M,isValidGameIndependentSubpackagePath:()=>c.Qj,loadJsFiles:()=>m});var e=n(356),t=n.n(e),r=(n(146),n(290)),o=n(309),a=n(945),s=n(813),c=n(61),l=n(176);n(228),n(495);const u=Object.keys,d=function(e){(0,c.N0)();const t=u(e);for(let n=0;n<t.length;n++){const i=t[n];c.xJ[i]=e[i]}(0,c.N0)()&&(0,c.QT)((function(){Protect.hijack(),(0,c.F)(),(0,l.z)((0,r.F)()),(0,r.E)(e)}),"initAppIsolatedContext"),__wxConfig.onReady((()=>{!(0,c.N0)()&&__wxConfig.plugins&&(Protect.overwriteSetPrototypeOf(),Protect.doNotWriteGlobalObjs())}))},h=()=>{__wxConfig.onReady(t()((function*(){const e=__appServiceSDK__.getGameRelatedContextsExports();((0,c.G$)()||JSContext.isAsync())&&(0,c.N0)()&&(yield(0,s.K0)()),(0,c.N0)();const t=e.game.FunctionalPage,n=__wxConfig.appLaunchInfo,i=t.parseCompletePath(n.path);if(i.isFunctionalPage&&t.VALID_SCENE.includes(n.scene))p(e);else if((0,c.c6)(n.scene)){const t=(0,c.Qj)(n.path,__wxConfig.subPackages);if(t){const n=(0,o.e)();let i=t.root;i.endsWith(".js")||(i.endsWith("/")||(i=`${i}/`),i=`${i}game.js`),wxNativeConsole.info("[Independent subPackagePath]",i),n.setEntry([i]),g(e,(e=>{e&&(console.error(e),console.error("then load main package"),wxNativeConsole.error("run game independent subpackage fail",e),n.evaluateScriptFile("game.js"),Reporter.reportIDKey({key:"loadGameIndependentSubPackageFail"}))}))}else g(e)}else g(e)})))};function p(e){(e=e||__appServiceSDK__.getGameRelatedContextsExports()).game.FunctionalPage.initFunctionalPage()}function f(e){e=e||__appServiceSDK__.getGameRelatedContextsExports();(0,l.M)().length>0||g(e)}function g(e,n){e=e||__appServiceSDK__.getGameRelatedContextsExports(),(0,c.N0)()&&(0,c.QT)(t()((function*(){let t;(0,c.F)(),(0,l.z)((0,o.e)());try{yield(0,o.M)(e.game)}catch(e){t=e}"function"==typeof n&&n(t)})),"initGameIsolatedContext")}function _(e){e=e||__appServiceSDK__.getGameRelatedContextsExports(),(0,c.QT)(t()((function*(){(0,l.z)((0,a.r)());try{yield(0,a.J)(e.gameOpenData)}catch(e){}})),"initGameOpenDataContext")}const m=()=>{}})(),__subContextEngine__=i})(),(()=>{"use strict";var e=(e,t,n)=>{n.d(t,{default:()=>J});let i=null;const r=()=>null!==i;let o=[];WeixinJSBridge.subscribe("batchGetPluginPermissionBytes",(e=>{i=e.data.pluginPermissionBytes,o.forEach((e=>e())),o=[]}));const a=e=>e.split("/",1)[0];function s(e,t){if(delete t.permissionBytes,void 0===t.pluginId)return t;const n=((e,t)=>{e=a(e);let n=i&&i[e]&&i[e][t];return null==n?n=[0,0,0]:"object"!=typeof n&&(n=[n,n,n]),n})(t.pluginId,e);return t.permissionBytes=n,t.privateData=JSON.stringify({pluginId:t.pluginId}),t}function c(e,t,n,i){n=parseInt(n,10),u(e,t,(e=>{i(e[0]===n)}))}function l(e,t,n,i){n=parseInt(n,10),u(e,t,(e=>{i(e[0]!==n)}))}function u(e,t,n){var s;s=()=>{e=a(e);let r=i&&i[e]&&i[e][t];null==r?r=[0,0,0]:"object"!=typeof r&&(r=[r,r,r]),n(r)},r()?s():o.push(s)}const d=BabelRuntimeHelpers.objectSpread2;var h=n.n(d);const p=Function.prototype.call,f=p.bind(String.prototype.indexOf),g=p.bind(String.prototype.slice),_=p.bind(Array.prototype.sort),m=p.bind(Number.prototype.toString),y=p.bind(Object.prototype.toString),v=Object.keys,A=Array.isArray||function(e){return"[object Array]"===y(e)},b=e=>{if("string"==typeof e)return e;if("number"==typeof e){let t=m(e,10);const n=f(t,".");return n>0&&(t=g(t,0,n+5)),t}if("boolean"==typeof e)return!0===e?"true":"false";if(A(e)){let t="";for(let n=0;n<e.length;n++)t+=b(e[n])+";";return`[${t}]`}if("object"==typeof e){let t="";const n=v(e);_(n);for(let i=0;i<n.length;++i)t+=n[i]+":"+b(e[n[i]])+";";return`{${t}}`}return""},w=({apiName:e,args:t,argsList:n,seq:i})=>{let r=e;for(let e=0;e<n.length;e++)r+="|"+b(t[n[e]]);return r+=i,r},E=JSON.parse('{"i":{"createRequestTask":["__skipDomainCheck__","url"],"installDownloadTask":["downloadId"],"downloadAppInternal":["appUrl"],"addDownloadTaskStraight":["taskName","taskUrl","fileMd5"],"getInstallState":["packageName","packageNameArray"],"setClipboardData":["data"],"getClipboardData":[],"navigateBackApplication":[]}}'),T=Math.floor,S=Math.random,C=function(){var e,t,n=Function.prototype.call.bind(String.prototype.charAt),i=Function.prototype.call.bind(String.prototype.indexOf),r=(e=Function.prototype.call.bind(String.fromCharCode),t=String,function(...n){return e(t,...n)});return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,o){o.r(t),o.d(t,"memory",(function(){return h})),o.d(t,"sha1",(function(){return p})),o.d(t,"setSalt",(function(){return f})),o.d(t,"main",(function(){return g})),o.d(t,"__wbindgen_malloc",(function(){return _})),o.d(t,"__wbindgen_realloc",(function(){return m})),o.d(t,"__wbindgen_free",(function(){return y})),o.d(t,"__wbindgen_start",(function(){return v}));var a=new ArrayBuffer(8),s=new Int32Array(a);new Float32Array(a),new Float64Array(a);var c,l=new ArrayBuffer(1114112),u=(c=new Uint8Array(l),function(e,t){var o,a;if("undefined"==typeof Buffer)for(o=function(e){for(var t,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0;l<e.length;)t=i(s,n(e,l++))<<18|i(s,n(e,l++))<<12|(o=i(s,n(e,l++)))<<6|(a=i(s,n(e,l++))),c+=64===o?r(t>>16&255):64===a?r(t>>16&255,t>>8&255):r(t>>16&255,t>>8&255,255&t);return c}(t),a=0;a<o.length;a++)c[e+a]=o.charCodeAt(a);else for(o=Buffer.from(t,"base64"),a=0;a<o.length;a++)c[e+a]=o[a]});u(1048576,"VHJpZWQgdG8gc2hyaW5rIHRvIGEgbGFyZ2VyIGNhcGFjaXR5c3JjL2xpYmFsbG9jL3Jhd192ZWMucnMAAAAQACQAAAAkABAAFwAAAF0CAAAJAAAAaW50ZXJuYWwgZXJyb3I6IGVudGVyZWQgdW5yZWFjaGFibGUgY29kZVQAEAAoAAAAJAAQABcAAAAKAgAAJwAAADAAAAAxAAAAMgAAADMAAAA0AAAANQAAADYAAAA3AAAAOAAAADkAAABhAAAAYgAAAGMAAABkAAAAZQAAAGYAAABzcmMvbGliY29yZS9zbGljZS9tb2QucnNhc3NlcnRpb24gZmFpbGVkOiBgKGxlZnQgPT0gcmlnaHQpYAogIGxlZnQ6IGBgLAogcmlnaHQ6IGBgOiDsABAALQAAABkBEAAMAAAAJQEQAAMAAABkZXN0aW5hdGlvbiBhbmQgc291cmNlIHNsaWNlcyBoYXZlIGRpZmZlcmVudCBsZW5ndGhzQAEQADQAAADUABAAGAAAAFoIAAAJAAAAY2Fubm90IGFjY2VzcyBhIFRMUyB2YWx1ZSBkdXJpbmcgb3IgYWZ0ZXIgaXQgaXMgZGVzdHJveWVkYWxyZWFkeSBib3Jyb3dlZGFscmVhZHkgbXV0YWJseSBib3Jyb3dlZAAAAAUAAAAAAAAAAQAAAAYAAAAHAAAAAAAAAAEAAAAIAAAACQAAAAAAAAABAAAACgAAACACEAAAAAAAIAIQAAAAAAAMAAAAMAAAADEAAAAyAAAAMwAAADQAAAA1AAAANgAAADcAAAA4AAAAOQAAAGEAAABiAAAAYwAAAGQAAABlAAAAZgAAAA0AAAAIAAAABAAAAA4AAAAPAAAAEAAAAAgAAAAEAAAAEQAAABIAAAAAAAAAAQAAABMAAABydXN0LWNyeXB0by9zcmMvY3J5cHRvdXRpbC5ycwAAAKgCEAAdAAAALAAAAAUAAABhc3NlcnRpb24gZmFpbGVkOiBkc3QubGVuKCkgPT0gNKgCEAAdAAAAQQAAAAUAAABhc3NlcnRpb24gZmFpbGVkOiBkc3QubGVuKCkgKiA0ID09IGlucHV0LmxlbigpAACoAhAAHQAAAFIAAAAFAAAAYXNzZXJ0aW9uIGZhaWxlZDogZHN0LmxlbigpID49IHNyYy5sZW4oKagCEAAdAAAAowAAAAkAAABOdW1lcmljIG92ZXJmbG93IG9jY3VyZWQuAAAAAAAAAHJ1c3QtY3J5cHRvL3NyYy9jcnlwdG91dGlsLnJzAAAAoAMQAB0AAABNAQAACQAAAKgCEAAdAAAAMQEAAAEAAABhc3NlcnRpb24gZmFpbGVkOiBpZHggPj0gc2VsZi5idWZmZXJfaWR4YXNzZXJ0aW9uIGZhaWxlZDogc2VsZi5idWZmZXJfaWR4ID09IDY0cnVzdC1jcnlwdG8vc3JjL3NoYTEucnMAAC8EEAAXAAAAhAAAAA4AAAB1bmtub3duIGljb3Nhcm91bmQgaW5kZXhAAAAAYXNzZXJ0aW9uIGZhaWxlZDogYChsZWZ0ID09IHJpZ2h0KWAKICBsZWZ0OiBgYCwKIHJpZ2h0OiBgYAAAdAQQAC0AAAChBBAADAAAAK0EEAABAAAALwQQABcAAABdAQAABQAAAC8EEAAXAAAAZAEAAAUAAABhc3NlcnRpb24gZmFpbGVkOiAoIXN0LmNvbXB1dGVkKRUAAAAXAAAABAAAAAQAAAAYAAAAGQAAABoAAAAbAAAAAAAAAAEAAAAcAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZXNyYy9saWJjb3JlL29wdGlvbi5yczQFEAArAAAAXwUQABUAAAB6AQAAFQAAAEFjY2Vzc0Vycm9yAB0AAAAQAAAABAAAAB4AAAAfAAAAIAAAAAwAAAAEAAAAIQAAACIAAAAEAAAABAAAACMAAAAkAAAAJQ=="),u(1050080,"L3J1c3RjLzQ1NjBlYTc4OGNiNzYwZjBhMzQxMjcxNTZjNzhlMjU1Mjk0OWY3MzQvc3JjL2xpYmNvcmUvZm10L21vZC5ycwAA4AUQAEYAAABjAQAAEwAAACYAAAAAAAAAAQAAACcAAABzcmMvbGliYWxsb2MvcmF3X3ZlYy5yc2NhcGFjaXR5IG92ZXJmbG93XwYQABEAAABIBhAAFwAAAAkDAAAFAAAAYSBmb3JtYXR0aW5nIHRyYWl0IGltcGxlbWVudGF0aW9uIHJldHVybmVkIGFuIGVycm9yQm9ycm93RXJyb3JCb3Jyb3dNdXRFcnJvciwAAAAAAAAAAQAAAC0AAABpbmRleCBvdXQgb2YgYm91bmRzOiB0aGUgbGVuIGlzICBidXQgdGhlIGluZGV4IGlzIAAA5AYQACAAAAAEBxAAEgAAAGNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWVzcmMvbGliY29yZS9vcHRpb24ucnMoBxAAKwAAAFMHEAAVAAAAegEAABUAAAC7BhAAAAAAAFMHEAAVAAAApgQAAAUAAAA6IAAAuwYQAAAAAACYBxAAAgAAAHNyYy9saWJjb3JlL3Jlc3VsdC5ycwAAAKwHEAAVAAAAjQQAAAUAAABzcmMvbGliY29yZS9zbGljZS9tb2QucnNpbmRleCAgb3V0IG9mIHJhbmdlIGZvciBzbGljZSBvZiBsZW5ndGgg7AcQAAYAAADyBxAAIgAAANQHEAAYAAAAGQoAAAUAAABzbGljZSBpbmRleCBzdGFydHMgYXQgIGJ1dCBlbmRzIGF0IAA0CBAAFgAAAEoIEAANAAAA1AcQABgAAAAfCgAABQAAADB4MDAwMTAyMDMwNDA1MDYwNzA4MDkxMDExMTIxMzE0MTUxNjE3MTgxOTIwMjEyMjIzMjQyNTI2MjcyODI5MzAzMTMyMzMzNDM1MzYzNzM4Mzk0MDQxNDI0MzQ0NDU0NjQ3NDg0OTUwNTE1MjUzNTQ1NTU2NTc1ODU5NjA2MTYyNjM2NDY1NjY2NzY4Njk3MDcxNzI3Mzc0NzU3Njc3Nzg3OTgwODE4MjgzODQ4NTg2ODc4ODg5OTA5MTkyOTM5NDk1OTY5Nzk4OTl9IH0="),u(1050960,"c3JjL2xpYmNvcmUvZm10L21vZC5ycwAAUAkQABYAAABWBAAAKAAAAFAJEAAWAAAAYgQAABEAAABFcnJvcg==");var d=function(e,t,n){var i=new e.Int8Array(n),r=(new e.Int16Array(n),new e.Int32Array(n)),o=new e.Uint8Array(n),a=(new e.Uint16Array(n),new e.Uint32Array(n)),c=(new e.Float32Array(n),new e.Float64Array(n),e.Math.imul),l=(e.Math.fround,e.Math.abs,e.Math.clz32),u=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,t.abort),d=(e.NaN,e.Infinity,1048576),h=0;function p(e){var t=0,n=0,i=0,o=0,s=0,c=0,u=0,d=0,h=0,p=0,f=0,g=0;e:{t:{n:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(o=-8&(e=e+11|0),!(d=r[262772]))break n;s=0-o|0,u=0,(e>>>=8)&&(u=31,o>>>0>16777215||(u=62+((o>>>(6-(e=l(e))&31)&1)-(e<<1)|0)|0));i:{r:{if(e=r[1051356+(u<<2)>>2]){for(i=o<<(31==(0|u)?0:25-(u>>>1)&31);;){if(!((n=-8&r[e+4>>2])>>>0<o>>>0||(n=n-o|0)>>>0>=s>>>0||(c=e,s=n,n))){s=0;break r}if(n=r[e+20>>2],e=r[16+((i>>>29&4)+e|0)>>2],t=n&&(0|n)!=(0|e)?n:t,i<<=1,!e)break}if(t){e=t;break r}if(c)break i}if(c=0,!(e=d&(0-(e=2<<(31&u))|e)))break n;if(!(e=r[1051356+(we(e&0-e)<<2)>>2]))break n}for(;c=(t=(n=(t=-8&r[e+4>>2])-o|0)>>>0<s>>>0&t>>>0>=o>>>0)?e:c,s=t?n:s,e=(t=r[e+16>>2])||r[e+20>>2];);if(!c)break n}if(s>>>0>=(e=r[262871])-o>>>0&&e>>>0>=o>>>0)break n;E(c);i:if(s>>>0>=16){if(r[c+4>>2]=3|o,r[4+(i=o+c|0)>>2]=1|s,r[s+i>>2]=s,s>>>0>=256){b(i,s);break i}n=1051092+((e=s>>>3)<<3)|0,t=r[262771],e=1<<(31&e),u=r[n+8>>2],t&e||(r[262771]=e|t,u=n),e=u,r[n+8>>2]=i,r[e+12>>2]=i,r[i+12>>2]=n,r[i+8>>2]=e}else e=o+s|0,r[c+4>>2]=3|e,r[4+(e=e+c|0)>>2]=1|r[e+4>>2];return c+8|0}i:{r:{if(!(3&(n=(i=r[262771])>>>(t=31&(e=(o=e>>>0<11?16:e+11&-8)>>>3))))){if(o>>>0<=a[262871])break n;if(n)break r;if(!(e=r[262772]))break n;for(t=r[1051356+(we(e&0-e)<<2)>>2],s=(-8&r[t+4>>2])-o|0,i=t;;){if(!(e=r[t+16>>2])&&!(e=r[t+20>>2]))break i;s=(n=(t=(-8&r[e+4>>2])-o|0)>>>0<s>>>0)?t:s,i=n?e:i,t=e}}s=(c=r[16+(e=1051084+((n=e+(1&(-1^n))|0)<<3)|0)>>2])+8|0,(0|(t=r[c+8>>2]))==(0|(e=e+8|0))?(f=1051084,g=Ee(-2,n)&i,r[f>>2]=g):(r[t+12>>2]=e,r[e+8>>2]=t),e=n<<3,r[c+4>>2]=3|e,r[4+(e=e+c|0)>>2]=1|r[e+4>>2];break t}return c=we(0-(e=(0-(e=2<<t)|e)&n<<t)&e),d=r[16+(e=1051084+(c<<3)|0)>>2],(0|(t=r[d+8>>2]))==(0|(e=e+8|0))?(f=1051084,g=Ee(-2,c)&i,r[f>>2]=g):(r[t+12>>2]=e,r[e+8>>2]=t),r[d+4>>2]=3|o,c=(e=c<<3)-o|0,r[4+(n=o+d|0)>>2]=1|c,r[e+d>>2]=c,(e=r[262871])&&(s=r[262873],i=1051092+((e>>>=3)<<3)|0,t=r[262771],e=1<<(31&e),u=r[i+8>>2],t&e||(r[262771]=e|t,u=i),e=u,r[i+8>>2]=s,r[e+12>>2]=s,r[s+12>>2]=i,r[s+8>>2]=e),r[262873]=n,r[262871]=c,d+8|0}return E(i),s>>>0>=16?(r[i+4>>2]=3|o,r[4+(n=o+i|0)>>2]=1|s,r[n+s>>2]=s,(e=r[262871])&&(d=r[262873],c=1051092+((e>>>=3)<<3)|0,t=r[262771],e=1<<(31&e),u=r[c+8>>2],t&e||(r[262771]=e|t,u=c),e=u,r[c+8>>2]=d,r[e+12>>2]=d,r[d+12>>2]=c,r[d+8>>2]=e),r[262873]=n,r[262871]=s):(e=o+s|0,r[i+4>>2]=3|e,r[4+(e=e+i|0)>>2]=1|r[e+4>>2]),i+8|0}n:{i:{r:{o:{if((n=r[262871])>>>0<o>>>0){if((e=r[262872])>>>0>o>>>0)break e;if(s=0,-1==(0|(e=Se((t=o+65583|0)>>>16))))break t;if(!(h=e<<16))break t;if(t=(d=-65536&t)+r[262875]|0,r[262875]=t,e=r[262876],r[262876]=e>>>0>t>>>0?e:t,!(p=r[262874]))break o;for(e=1051508;;){if((0|h)==((n=r[e>>2])+(t=r[e+4>>2])|0))break r;if(!(e=r[e+8>>2]))break}break i}return c=r[262873],(t=n-o|0)>>>0<=15?(r[262873]=0,r[262871]=0,r[c+4>>2]=3|n,o=4+(e=n+c|0)|0,s=1|r[e+4>>2]):(r[262871]=t,e=o+c|0,r[262873]=e,r[e+4>>2]=1|t,r[n+c>>2]=t,s=3|o,o=c+4|0),r[o>>2]=s,c+8|0}for((e=r[262882])>>>0<=h>>>0&&e||(r[262882]=h),r[262883]=4095,r[262877]=h,e=0,r[262880]=0,r[262878]=d;t=8+(n=e+1051084|0)|0,r[n+16>>2]=t,r[n+20>>2]=t,256!=(0|(e=e+8|0)););r[262874]=h,e=d+-40|0,r[262872]=e,r[h+4>>2]=1|e,r[4+(e+h|0)>>2]=40,r[262881]=2097152;break n}if(!(r[e+12>>2]|h>>>0<=p>>>0|n>>>0>p>>>0)){r[e+4>>2]=t+d,n=(c=r[262874])+15&-8,r[262874]=n+-8,e=8+((t=d+r[262872]|0)+(c-n|0)|0)|0,r[262872]=e,r[n+-4>>2]=1|e,r[4+(t+c|0)>>2]=40,r[262881]=2097152;break n}}e=r[262882],r[262882]=e>>>0<h>>>0?e:h,i=d+h|0,e=1051508;i:{for(;;){if((0|i)!=r[e>>2]){if(e=r[e+8>>2])continue;break i}break}if(!r[e+12>>2]){r[e>>2]=h,r[e+4>>2]=d+r[e+4>>2],r[h+4>>2]=3|o,s=o+h|0,o=(i-h|0)-o|0;r:{o:{if((0|i)!=r[262874]){if(r[262873]==(0|i))break o;if(1==(3&(c=r[i+4>>2]))&&((n=-8&c)>>>0>=256?E(i):(0|(t=r[i+12>>2]))==(0|(e=r[i+8>>2]))?(f=1051084,g=r[262771]&Ee(-2,c>>>3),r[f>>2]=g):(r[e+12>>2]=t,r[t+8>>2]=e),o=n+o|0,i=n+i|0),r[i+4>>2]=-2&r[i+4>>2],r[s+4>>2]=1|o,r[o+s>>2]=o,o>>>0>=256){b(s,o);break r}n=1051092+((e=o>>>3)<<3)|0,t=r[262771],e=1<<(31&e),i=r[n+8>>2],t&e||(r[262771]=e|t,i=n),e=i,r[n+8>>2]=s,r[e+12>>2]=s,r[s+12>>2]=n,r[s+8>>2]=e;break r}r[262874]=s,e=r[262872]+o|0,r[262872]=e,r[s+4>>2]=1|e;break r}r[262873]=s,e=r[262871]+o|0,r[262871]=e,r[s+4>>2]=1|e,r[e+s>>2]=e}return h+8|0}}for(e=1051508;!((t=r[e>>2])>>>0<=p>>>0&&(i=t+r[e+4>>2]|0)>>>0>p>>>0);)e=r[e+8>>2];for(r[262874]=h,e=d+-40|0,r[262872]=e,r[h+4>>2]=1|e,r[4+(e+h|0)>>2]=40,r[262881]=2097152,r[(u=(e=(i+-32&-8)-8|0)>>>0<p+16>>>0?p:e)+4>>2]=27,c=r[262877],n=r[262878],t=r[262880],r[(e=u+16|0)>>2]=r[262879],r[e+4>>2]=t,r[u+8>>2]=c,r[u+12>>2]=n,r[262880]=0,r[262878]=d,r[262877]=h,r[262879]=u+8,e=u+28|0;r[e>>2]=7,i>>>0>(e=e+4|0)>>>0;);(0|u)!=(0|p)&&(r[u+4>>2]=-2&r[u+4>>2],e=u-p|0,r[p+4>>2]=1|e,r[u>>2]=e,e>>>0>=256?b(p,e):(n=1051092+((e>>>=3)<<3)|0,t=r[262771],e=1<<(31&e),i=r[n+8>>2],t&e||(r[262771]=e|t,i=n),e=i,r[n+8>>2]=p,r[e+12>>2]=p,r[p+12>>2]=n,r[p+8>>2]=e))}if(!((e=r[262872])>>>0<=o>>>0))break e}return s}return t=e-o|0,r[262872]=t,e=(n=r[262874])+o|0,r[262874]=e,r[e+4>>2]=1|t,r[n+4>>2]=3|o,n+8|0}function f(e,t,n){var a,s=0,c=0,l=0,h=0,p=0,f=0,g=0;d=a=d+-64|0,r[a+36>>2]=t,s=r[n+20>>2],r[a+52>>2]=s,i[a+56|0]=3,c=r[n+16>>2],r[a+44>>2]=c+(s<<3),r[a+8>>2]=0,r[a+12>>2]=32,r[a+32>>2]=e,r[a+24>>2]=0,r[a+16>>2]=0,r[a+48>>2]=c,r[a+40>>2]=c;e:{t:{n:{i:{if(!(l=r[n+8>>2])){if(p=r[n>>2],!(l=s>>>0>(f=r[n+4>>2])>>>0?f:s))break i;if(s=1,Te[r[t+12>>2]](e,r[p>>2],r[p+4>>2]))break e;for(n=p+12|0,h=1;;){if(Te[r[c+4>>2]](r[c>>2],a+8|0))break e;if(h>>>0>=l>>>0)break i;if(e=n+-4|0,t=r[n>>2],n=n+8|0,c=c+8|0,h=h+1|0,Te[r[r[a+36>>2]+12>>2]](r[a+32>>2],r[e>>2],t))break}break e}if(p=r[n>>2],f=r[n+4>>2],g=(n=r[n+12>>2])>>>0>f>>>0?f:n){if(s=1,Te[r[t+12>>2]](e,r[p>>2],r[p+4>>2]))break e;for(n=p+12|0,c=l+16|0,h=1;;){r[a+12>>2]=r[c+-8>>2],i[a+56|0]=o[c+16|0],r[a+8>>2]=r[c+-4>>2],t=0,s=0;r:{o:switch(r[c+8>>2]-1|0){default:e=r[c+12>>2],s=1;break r;case 0:if((l=r[c+12>>2])>>>0<(s=r[a+52>>2])>>>0){if(s=0,l=r[a+48>>2]+(l<<3)|0,41!=r[l+4>>2])break r;e=r[r[l>>2]>>2],s=1;break r}O(1051e3,l,s),u();case 1:break o;case 2:break r}(0|(l=r[a+40>>2]))!=r[a+44>>2]&&(r[a+40>>2]=l+8,41==r[l+4>>2]&&(e=r[r[l>>2]>>2],s=1))}r[a+20>>2]=e,r[a+16>>2]=s;r:{o:{a:{s:{c:{l:switch(r[c>>2]-1|0){case 1:if((0|(e=r[a+40>>2]))!=r[a+44>>2])break c;break r;case 2:break r;case 0:break l;default:break a}if((e=r[c+4>>2])>>>0>=(s=r[a+52>>2])>>>0)break s;if(e=r[a+48>>2]+(e<<3)|0,41!=r[e+4>>2])break r;s=r[r[e>>2]>>2];break o}if(r[a+40>>2]=e+8,41!=r[e+4>>2])break r;s=r[r[e>>2]>>2];break o}O(1051e3,e,s),u()}s=r[c+4>>2]}t=1}if(r[a+28>>2]=s,r[a+24>>2]=t,1==r[c+-16>>2]){if((e=r[c+-12>>2])>>>0>=(t=r[a+52>>2])>>>0)break t;s=r[a+48>>2]+(e<<3)|0}else{if((0|(s=r[a+40>>2]))==r[a+44>>2])break n;r[a+40>>2]=s+8}if(Te[r[s+4>>2]](r[s>>2],a+8|0)){s=1;break e}if(h>>>0>=g>>>0)break i;if(e=n+-4|0,t=r[n>>2],n=n+8|0,c=c+36|0,s=1,h=h+1|0,Te[r[r[a+36>>2]+12>>2]](r[a+32>>2],r[e>>2],t))break}break e}}if(f>>>0>h>>>0&&(s=1,e=(h<<3)+p|0,Te[r[r[a+36>>2]+12>>2]](r[a+32>>2],r[e>>2],r[e+4>>2])))break e;s=0;break e}M(1050472),u()}O(1050984,e,t),u()}return d=a- -64|0,s}function g(e,t,n){var a=0,s=0,c=0,l=0,u=0,d=0,h=0,p=0,f=0,g=0,_=0,m=0;a=r[e+16>>2];e:{t:{n:{i:{if(1!=(0|(g=r[e+8>>2]))){if(a)break i;a=0|Te[r[r[e+28>>2]+12>>2]](r[e+24>>2],t,n);break t}if(!a)break n}i:if(n){for(u=t+n|0,p=r[e+20>>2]+1|0,_=a=t;;){c=a+1|0;r:{o:{if((0|(s=i[0|a]))<=-1){if((0|c)!=(0|u)?(h=63&o[a+1|0],a=c=a+2|0):(h=0,a=u),d=(f=31&s)<<6|h,(m=255&s)>>>0<=223)break o;if((0|a)!=(0|u)?(d=63&o[0|a],s=c=a+1|0):(d=0,s=u),d=(h=h<<6|d)|f<<12,m>>>0<240)break o;if((0|s)!=(0|u)?(a=s+1|0,s=63&o[0|s]):(a=c,s=0),1114112!=(0|(s=s|f<<18&1835008|h<<6)))break r;break i}d=255&s}s=d,a=c}if(p=p+-1|0){if(l=(l-_|0)+a|0,_=a,(0|a)!=(0|u))continue;break i}break}1114112!=(0|s)&&(s=l,c=n,!(!l|(0|n)==(0|l))&&(a=0,i[t+l|0]<-64|l>>>0>=n>>>0)||(a=t),n=a?s:c,t=a||t)}else n=0;if(!g)break e}if(c=0,n)for(s=n,a=t;c=(128==(192&o[0|a]))+c|0,a=a+1|0,s=s+-1|0;);if(n-c>>>0>=(u=r[e+12>>2])>>>0)break e;if(l=0,c=0,n)for(s=n,a=t;c=(128==(192&o[0|a]))+c|0,a=a+1|0,s=s+-1|0;);s=u+(c-n|0)|0;n:{i:{r:switch((3==(0|(a=o[e+48|0]))?0:a)-1|0){case 1:break i;case 0:case 2:break r;default:break n}l=s,s=0;break n}l=s>>>1,s=s+1>>>1}a=l+1|0;n:{for(;;){if(!(a=a+-1|0))break n;if(Te[r[r[e+28>>2]+16>>2]](r[e+24>>2],r[e+4>>2]))break}return 1}if(c=r[e+4>>2],a=1,!Te[r[r[e+28>>2]+12>>2]](r[e+24>>2],t,n)){for(a=s+1|0,t=r[e+28>>2],e=r[e+24>>2];;){if(!(a=a+-1|0))return 0;if(Te[r[t+16>>2]](e,c))break}return 1}}return a}return 0|Te[r[r[e+28>>2]+12>>2]](r[e+24>>2],t,n)}function _(e){var t=0,n=0,i=0,o=0,a=0,s=0,c=0;n=(t=e+-8|0)+(e=-8&(o=r[e+-4>>2]))|0;e:{t:{n:{i:if(!(1&o)){if(!(3&o))break n;if(e=(o=r[t>>2])+e|0,(0|(t=t-o|0))==r[262873]){if(3!=(3&r[n+4>>2]))break i;return r[262871]=e,r[n+4>>2]=-2&r[n+4>>2],r[t+4>>2]=1|e,void(r[e+t>>2]=e)}o>>>0>=256?E(t):(0|(i=r[t+8>>2]))==(0|(a=r[t+12>>2]))?(s=1051084,c=r[262771]&Ee(-2,o>>>3),r[s>>2]=c):(r[i+12>>2]=a,r[a+8>>2]=i)}if(2&(o=r[n+4>>2]))r[n+4>>2]=-2&o,r[t+4>>2]=1|e,r[e+t>>2]=e;else{i:{if(r[262874]!=(0|n)){if((0|n)!=r[262873])break i;return r[262873]=t,e=r[262871]+e|0,r[262871]=e,r[t+4>>2]=1|e,void(r[e+t>>2]=e)}if(r[262874]=t,e=r[262872]+e|0,r[262872]=e,r[t+4>>2]=1|e,(0|t)==r[262873]&&(r[262871]=0,r[262873]=0),(n=r[262881])>>>0>=e>>>0)break n;if(!(e=r[262874]))break n;r:if(!((o=r[262872])>>>0<41))for(t=1051508;;){if((i=r[t>>2])+r[t+4>>2]>>>0>e>>>0&&i>>>0<=e>>>0)break r;if(!(t=r[t+8>>2]))break}if(i=4095,e=r[262879]){for(t=0;t=t+1|0,e=r[e+8>>2];);i=t>>>0>4095?t:4095}if(r[262883]=i,o>>>0<=n>>>0)break n;return void(r[262881]=-1)}if(e=(i=-8&o)+e|0,i>>>0>=256?E(n):(0|(i=r[n+12>>2]))==(0|(n=r[n+8>>2]))?(s=1051084,c=r[262771]&Ee(-2,o>>>3),r[s>>2]=c):(r[n+12>>2]=i,r[i+8>>2]=n),r[t+4>>2]=1|e,r[e+t>>2]=e,r[262873]==(0|t)){r[262871]=e;break n}}if(e>>>0<256)break t;if(b(t,e),e=r[262883]+-1|0,r[262883]=e,!e){if(e=r[262879])break e;return void(r[262883]=4095)}}return}return e=1051092+((n=e>>>3)<<3)|0,o=r[262771],n=1<<(31&n),i=r[e+8>>2],o&n||(r[262771]=n|o,i=e),n=i,r[e+8>>2]=t,r[n+12>>2]=t,r[t+12>>2]=e,void(r[t+8>>2]=n)}for(t=0;t=t+1|0,e=r[e+8>>2];);r[262883]=t>>>0>4095?t:4095}function m(e,t,n,a,s){var c,l,u=0,d=0,h=0,p=0;if(c=(u=1&(l=r[e>>2]))?43:1114112,p=s+u|0,4&l){if(n)for(h=n,u=t;d=(128==(192&o[0|u]))+d|0,u=u+1|0,h=h+-1|0;);p=(n+p|0)-d|0}else t=0;e:{t:{if(1!=r[e+8>>2]){if(B(e,c,t,n))break t;break e}if((u=r[e+12>>2])>>>0<=p>>>0){if(B(e,c,t,n))break t;break e}n:{if(!(8&l)){d=u-p|0,u=0;i:{r:{o:switch((3==(0|(h=o[e+48|0]))?1:h)-1|0){case 1:break r;case 0:case 2:break o;default:break i}u=d,d=0;break i}u=d>>>1,d=d+1>>>1}for(u=u+1|0;;){if(!(u=u+-1|0))break n;if(Te[r[r[e+28>>2]+16>>2]](r[e+24>>2],r[e+4>>2]))break}return 1}if(i[e+48|0]=1,r[e+4>>2]=48,B(e,c,t,n))break t;d=u-p|0,u=0;i:{r:{o:switch((3==(0|(t=o[e+48|0]))?1:t)-1|0){case 1:break r;case 0:case 2:break o;default:break i}u=d,d=0;break i}u=d>>>1,d=d+1>>>1}u=u+1|0;i:{for(;;){if(!(u=u+-1|0))break i;if(Te[r[r[e+28>>2]+16>>2]](r[e+24>>2],r[e+4>>2]))break}return 1}if(t=r[e+4>>2],Te[r[r[e+28>>2]+12>>2]](r[e+24>>2],a,s))break t;for(d=d+1|0,n=r[e+28>>2],e=r[e+24>>2];;){if(!(d=d+-1|0))return 0;if(Te[r[n+16>>2]](e,t))break}break t}if(u=r[e+4>>2],!B(e,c,t,n)&&!Te[r[r[e+28>>2]+12>>2]](r[e+24>>2],a,s))for(d=d+1|0,t=r[e+28>>2],e=r[e+24>>2];;){if(!(d=d+-1|0))return 0;if(Te[r[t+16>>2]](e,u))break}}return 1}return 0|Te[r[r[e+28>>2]+12>>2]](r[e+24>>2],a,s)}function y(e,t,n,i){var o,a=0,s=0,c=0,l=0,h=0,p=0;d=o=d-32|0;e:{t:{n:{i:{r:{if((i&=255)>>>0<=3)switch(i-1|0){case 2:break t;case 1:break n;case 0:break i;default:break r}X(1049688,24,1049672),u()}c=Ee(a=r[t>>2],5),s=r[t+12>>2],i=r[t+8>>2],t=r[t+4>>2],l=Ee(c=1518500249+((c+r[n>>2]|0)+((s^i)&t^s)|0)|0,30),r[e+12>>2]=l,s=1518500249+(((s+(i^a&((t=Ee(t,30))^i))|0)+r[n+4>>2]|0)+Ee(c,5)|0)|0,h=e,p=Ee(s,30),r[h+8>>2]=p,a=1518500249+(((i+r[n+8>>2]|0)+(t^c&((i=Ee(a,30))^t))|0)+Ee(s,5)|0)|0,r[e+4>>2]=a,h=e,p=1518500249+(((t+r[n+12>>2]|0)+(i^s&(i^l))|0)+Ee(a,5)|0)|0,r[h>>2]=p;break e}s=r[4+(a=t+8|0)>>2],r[(i=o+8|0)>>2]=r[a>>2],r[i+4>>2]=s,i=r[t+4>>2],r[o>>2]=r[t>>2],r[o+4>>2]=i,r[o+28>>2]=r[n+12>>2]+1859775393,r[o+24>>2]=r[n+8>>2]+1859775393,r[o+20>>2]=r[n+4>>2]+1859775393,r[o+16>>2]=r[n>>2]+1859775393,C(e,o,o+16|0);break e}c=Ee(a=r[t>>2],5),s=r[t+12>>2],i=r[t+8>>2],t=r[t+4>>2],l=Ee(c=((c+r[n>>2]|0)+((s^i)&t^i&s)|0)-1894007588|0,30),r[e+12>>2]=l,s=(((s+(a&((t=Ee(t,30))^i)^t&i)|0)+r[n+4>>2]|0)+Ee(c,5)|0)-1894007588|0,h=e,p=Ee(s,30),r[h+8>>2]=p,a=(((i+r[n+8>>2]|0)+(c&((i=Ee(a,30))^t)^t&i)|0)+Ee(s,5)|0)-1894007588|0,r[e+4>>2]=a,h=e,p=(((t+r[n+12>>2]|0)+(s&(i^l)^i&l)|0)+Ee(a,5)|0)-1894007588|0,r[h>>2]=p;break e}s=r[4+(a=t+8|0)>>2],r[(i=o+8|0)>>2]=r[a>>2],r[i+4>>2]=s,i=r[t+4>>2],r[o>>2]=r[t>>2],r[o+4>>2]=i,r[o+28>>2]=r[n+12>>2]+-899497514,r[o+24>>2]=r[n+8>>2]+-899497514,r[o+20>>2]=r[n+4>>2]+-899497514,r[o+16>>2]=r[n>>2]+-899497514,C(e,o,o+16|0)}d=o+32|0}function v(e,t){var n=0,i=0,o=0,a=0,s=0,c=0;n=e+t|0;e:{t:{n:if(!(1&(i=r[e+4>>2]))){if(!(3&i))break t;if(t=(i=r[e>>2])+t|0,(0|(e=e-i|0))==r[262873]){if(3!=(3&r[n+4>>2]))break n;return r[262871]=t,r[n+4>>2]=-2&r[n+4>>2],r[e+4>>2]=1|t,void(r[n>>2]=t)}i>>>0>=256?E(e):(0|(o=r[e+8>>2]))==(0|(a=r[e+12>>2]))?(s=1051084,c=r[262771]&Ee(-2,i>>>3),r[s>>2]=c):(r[o+12>>2]=a,r[a+8>>2]=o)}if(2&(i=r[n+4>>2])){r[n+4>>2]=-2&i,r[e+4>>2]=1|t,r[e+t>>2]=t;break e}n:{if(r[262874]!=(0|n)){if((0|n)!=r[262873])break n;return r[262873]=e,t=r[262871]+t|0,r[262871]=t,r[e+4>>2]=1|t,void(r[e+t>>2]=t)}if(r[262874]=e,t=r[262872]+t|0,r[262872]=t,r[e+4>>2]=1|t,r[262873]!=(0|e))break t;return r[262871]=0,void(r[262873]=0)}if(t=(o=-8&i)+t|0,o>>>0>=256?E(n):(0|(o=r[n+12>>2]))==(0|(n=r[n+8>>2]))?(s=1051084,c=r[262771]&Ee(-2,i>>>3),r[s>>2]=c):(r[n+12>>2]=o,r[o+8>>2]=n),r[e+4>>2]=1|t,r[e+t>>2]=t,r[262873]!=(0|e))break e;r[262871]=t}return}t>>>0>=256?b(e,t):(t=1051092+((n=t>>>3)<<3)|0,i=r[262771],n=1<<(31&n),o=r[t+8>>2],i&n||(r[262771]=n|i,o=t),n=o,r[t+8>>2]=e,r[n+12>>2]=e,r[e+12>>2]=t,r[e+8>>2]=n)}function A(e,t){var n=0,i=0,o=0,a=0,s=0;return-65587-(e=e>>>0>16?e:16)>>>0<=t>>>0||(n=p(12+((o=t>>>0<11?16:t+11&-8)+e|0)|0))&&(t=n+-8|0,(i=e+-1|0)&n?(i=(-8&(s=r[(a=n+-4|0)>>2]))-(n=(e=(n=(n+i&0-e)-8|0)-t>>>0>16?n:e+n|0)-t|0)|0,3&s?(r[e+4>>2]=i|1&r[e+4>>2]|2,r[4+(i=e+i|0)>>2]=1|r[i+4>>2],r[a>>2]=n|1&r[a>>2]|2,r[e+4>>2]=1|r[e+4>>2],v(t,n)):(t=r[t>>2],r[e+4>>2]=i,r[e>>2]=t+n)):e=t,3&(t=r[e+4>>2])&&((n=-8&t)>>>0<=o+16>>>0||(r[e+4>>2]=o|1&t|2,t=e+o|0,o=n-o|0,r[t+4>>2]=3|o,r[4+(n=e+n|0)>>2]=1|r[n+4>>2],v(t,o))),i=e+8|0),i}function b(e,t){var n=0,i=0,o=0,a=0;r[e+16>>2]=0,r[e+20>>2]=0,a=e,i=0,(n=t>>>8)&&(i=31,t>>>0>16777215||(i=62+((t>>>(6-(n=l(n))&31)&1)-(n<<1)|0)|0)),o=i,r[a+28>>2]=o,a=1051356+(o<<2)|0;e:{t:{n:{i:{if((i=1<<(31&o))&(n=r[262772])){if(n=r[a>>2],(-8&r[n+4>>2])!=(0|t))break i;i=n;break n}r[262772]=n|i,r[a>>2]=e,r[e+24>>2]=a;break e}for(o=t<<(31==(0|o)?0:25-(o>>>1)&31);;){if(!(i=r[(a=16+((o>>>29&4)+n|0)|0)>>2]))break t;if(o<<=1,(-8&r[(n=i)+4>>2])==(0|t))break}}return t=r[i+8>>2],r[t+12>>2]=e,r[i+8>>2]=e,r[e+24>>2]=0,r[e+12>>2]=i,void(r[e+8>>2]=t)}r[a>>2]=e,r[e+24>>2]=n}r[e+12>>2]=e,r[e+8>>2]=e}function w(e,t,n){var a,s=0,c=0;d=a=d-80|0,o[e+96|0]||(r[a+76>>2]=e+8,function(e,t){var n;if(d=n=d-16|0,U(n+8|0,e,1),r[n+12>>2])return i[r[n+8>>2]]=128,64-r[e>>2]>>>0<8&&(k(e,64),L(n,e),S(r[t>>2],r[n>>2],r[n+4>>2])),k(e,56),void(d=n+16|0);O(1049536,0,0),u()}(s=e+28|0,a+76|0),U(a- -64|0,s,4),F(r[a+64>>2],r[a+68>>2],r[e+4>>2]),U(a+56|0,s,4),F(r[a+56>>2],r[a+60>>2],r[e>>2]),c=r[a+76>>2],L(a+48|0,s),S(c,r[a+48>>2],r[a+52>>2]),i[e+96|0]=1),G(a+40|0,t,n,0,4),F(r[a+40>>2],r[a+44>>2],r[e+8>>2]),G(a+32|0,t,n,4,8),F(r[a+32>>2],r[a+36>>2],r[e+12>>2]),G(a+24|0,t,n,8,12),F(r[a+24>>2],r[a+28>>2],r[e+16>>2]),G(a+16|0,t,n,12,16),F(r[a+16>>2],r[a+20>>2],r[e+20>>2]),G(a+8|0,t,n,16,20),F(r[a+8>>2],r[a+12>>2],r[e+24>>2]),d=a+80|0}function E(e){var t,n=0,i=0,o=0,a=0,s=0,c=0;t=r[e+24>>2];e:{t:{if((0|e)==(0|(n=r[e+12>>2]))){if(o=r[(n=e+20|0)>>2],i=r[(o?20:16)+e>>2])break t;n=0;break e}i=r[e+8>>2],r[i+12>>2]=n,r[n+8>>2]=i;break e}for(o=o?n:e+16|0;a=o,(i=r[(o=(n=i)+20|0)>>2])||(o=n+16|0,i=r[n+16>>2]),i;);r[a>>2]=0}e:if(t){i=1051356+(r[e+28>>2]<<2)|0;t:{if((0|e)==r[i>>2]){if(r[i>>2]=n,n)break t;return s=1051088,c=r[262772]&Ee(-2,r[e+28>>2]),void(r[s>>2]=c)}if(r[(r[t+16>>2]==(0|e)?16:20)+t>>2]=n,!n)break e}r[n+24>>2]=t,(i=r[e+16>>2])&&(r[n+16>>2]=i,r[i+24>>2]=n),(e=r[e+20>>2])&&(r[n+20>>2]=e,r[e+24>>2]=n)}}function T(e,t,n,i){var o,a,s=0,c=0,l=0;d=o=d+-64|0,c=1,s=r[i+12>>2],l=r[i+8>>2],a=r[i+4>>2],i=r[i>>2];e:{t:{if(1==r[262884]){if(c=r[262885]+1|0,r[262885]=c,c>>>0>2)break t}else r[262884]=1,r[262885]=1;if(ee(o+48|0,i,a,l,s),s=r[4+(i=o+56|0)>>2],r[(l=o+36|0)>>2]=r[i>>2],r[l+4>>2]=s,r[o+24>>2]=n,r[o+20>>2]=1049892,r[o+16>>2]=1,n=r[o+52>>2],r[o+28>>2]=r[o+48>>2],r[o+32>>2]=n,!((0|(n=r[262768]))<=-1)&&(n=n+1|0,r[262768]=n,(i=r[262770])&&(n=r[262769],Te[r[t+16>>2]](o+8|0,e),s=r[o+12>>2],r[o+16>>2]=r[o+8>>2],r[o+20>>2]=s,Te[r[i+12>>2]](n,o+16|0),n=r[262768]),r[262768]=n+-1,c>>>0<=1))break e}u()}d=n=d-16|0,r[n+12>>2]=t,r[n+8>>2]=e,u()}function S(e,t,n){var i;if(d=i=d-96|0,r[i+4>>2]=n,64==(0|n))return J(i+32|0,64),function(e,t){var n=0,i=0;for(i=16;i;)n=o[0|t]|o[t+1|0]<<8|o[t+2|0]<<16|o[t+3|0]<<24,r[e>>2]=n<<24|n<<8&16711680|n>>>8&65280|n>>>24,i=i+-1|0,t=t+4|0,e=e+4|0}(i+32|0,t),function(e,t){var n,i=0,o=0,a=0,s=0,c=0,l=0,u=0,h=0,p=0,f=0,g=0,_=0,m=0,v=0,A=0,b=0,w=0,E=0,T=0,S=0,C=0,I=0,x=0,D=0,O=0;d=n=d+-64|0,p=r[t>>2],c=r[t+4>>2],l=r[t+8>>2],u=r[t+12>>2],m=r[e>>2],f=r[e+8>>2],h=r[e+4>>2],r[n+44>>2]=r[e+12>>2],r[n+36>>2]=h,r[n+40>>2]=f,r[n+32>>2]=m,r[n+60>>2]=u,r[n+56>>2]=l,r[n+52>>2]=c,r[n+48>>2]=p+r[e+16>>2],y(n,n+32|0,n+48|0,0),v=r[t+16>>2],g=r[t+20>>2],T=r[t+24>>2],A=r[t+28>>2],a=r[4+(h=n+8|0)>>2],r[(o=f=n+40|0)>>2]=r[h>>2],r[o+4>>2]=a,o=r[n+4>>2],r[n+32>>2]=r[n>>2],r[n+36>>2]=o,r[n+60>>2]=A,r[n+56>>2]=T,r[n+52>>2]=g,D=n,O=Ee(m,30)+v|0,r[D+48>>2]=O,y(n+16|0,n+32|0,n+48|0,0),s=r[n+16>>2],m=r[n+20>>2],o=r[n+24>>2],a=r[t+32>>2],b=r[t+36>>2],w=r[t+40>>2],E=r[t+44>>2],r[n+44>>2]=r[n+28>>2],r[n+36>>2]=m,r[n+40>>2]=o,r[n+32>>2]=s,r[n+60>>2]=E,r[n+56>>2]=w,r[n+52>>2]=b,D=n,O=Ee(r[n>>2],30)+a|0,r[D+48>>2]=O,y(n+16|0,n+32|0,n+48|0,0),_=r[4+(o=m=n+24|0)>>2],S=r[o>>2],r[h>>2]=S,r[h+4>>2]=_,i=r[n+20>>2],C=r[n+16>>2],r[n>>2]=C,r[n+4>>2]=i,I=r[t+48>>2],o=r[t+52>>2],x=r[t+56>>2],t=r[t+60>>2],r[f>>2]=S,r[f+4>>2]=_,r[n+32>>2]=C,r[n+36>>2]=i,r[n+60>>2]=t,r[n+56>>2]=x,r[n+52>>2]=o,D=n,O=Ee(s,30)+I|0,r[D+48>>2]=O,y(n+16|0,n+32|0,n+48|0,0),_=r[n+16>>2],s=r[n+20>>2],i=r[n+24>>2],r[n+44>>2]=r[n+28>>2],r[n+36>>2]=s,r[n+40>>2]=i,r[n+32>>2]=_,i=Ee(r[n>>2],30),p=Ee(o^a^p^l,1),r[n+48>>2]=i+p,s=Ee(p^E^u^g,1),r[n+60>>2]=s,l=Ee(t^w^l^v,1),r[n+56>>2]=l,u=Ee(x^b^c^u,1),r[n+52>>2]=u,y(n+16|0,n+32|0,n+48|0,0),c=r[m+4>>2],S=r[m>>2],r[h>>2]=S,r[h+4>>2]=c,i=r[n+20>>2],C=r[n+16>>2],r[n>>2]=C,r[n+4>>2]=i,r[f>>2]=S,r[f+4>>2]=c,r[n+32>>2]=C,r[n+36>>2]=i,i=Ee(_,30),v=Ee(u^I^v^T,1),r[n+48>>2]=i+v,T=Ee(s^x^a^T,1),r[n+56>>2]=T,c=Ee(v^t^A^b,1),r[n+60>>2]=c,g=Ee(l^o^g^A,1),r[n+52>>2]=g,y(n+16|0,n+32|0,n+48|0,1),_=r[n+16>>2],A=r[n+20>>2],i=r[n+24>>2],r[n+44>>2]=r[n+28>>2],r[n+36>>2]=A,r[n+40>>2]=i,r[n+32>>2]=_,i=Ee(r[n>>2],30),a=Ee(g^p^a^w,1),r[n+48>>2]=i+a,w=Ee(c^l^w^I,1),r[n+56>>2]=w,A=Ee(a^s^o^E,1),r[n+60>>2]=A,b=Ee(T^u^E^b,1),r[n+52>>2]=b,y(n+16|0,n+32|0,n+48|0,1),E=r[m+4>>2],S=r[m>>2],r[h>>2]=S,r[h+4>>2]=E,i=r[n+20>>2],C=r[n+16>>2],r[n>>2]=C,r[n+4>>2]=i,r[f>>2]=S,r[f+4>>2]=E,r[n+32>>2]=C,r[n+36>>2]=i,i=Ee(_,30),E=Ee(b^v^x^I,1),r[n+48>>2]=i+E,x=Ee(A^T^p^x,1),r[n+56>>2]=x,I=Ee(E^c^t^u,1),r[n+60>>2]=I,t=Ee(w^g^t^o,1),r[n+52>>2]=t,y(n+16|0,n+32|0,n+48|0,1),_=r[n+16>>2],o=r[n+20>>2],i=r[n+24>>2],r[n+44>>2]=r[n+28>>2],r[n+36>>2]=o,r[n+40>>2]=i,r[n+32>>2]=_,i=Ee(r[n>>2],30),o=Ee(t^a^p^l,1),r[n+48>>2]=i+o,p=Ee(o^A^s^g,1),r[n+60>>2]=p,l=Ee(I^w^l^v,1),r[n+56>>2]=l,s=Ee(x^b^s^u,1),r[n+52>>2]=s,y(n+16|0,n+32|0,n+48|0,1),u=r[m+4>>2],S=r[m>>2],r[h>>2]=S,r[h+4>>2]=u,i=r[n+20>>2],C=r[n+16>>2],r[n>>2]=C,r[n+4>>2]=i,r[f>>2]=S,r[f+4>>2]=u,r[n+32>>2]=C,r[n+36>>2]=i,i=Ee(_,30),u=Ee(s^E^v^T,1),r[n+48>>2]=i+u,v=Ee(p^x^a^T,1),r[n+56>>2]=v,T=Ee(u^I^c^b,1),r[n+60>>2]=T,c=Ee(l^t^c^g,1),r[n+52>>2]=c,y(n+16|0,n+32|0,n+48|0,1),_=r[n+16>>2],g=r[n+20>>2],i=r[n+24>>2],r[n+44>>2]=r[n+28>>2],r[n+36>>2]=g,r[n+40>>2]=i,r[n+32>>2]=_,i=Ee(r[n>>2],30),a=Ee(c^o^a^w,1),r[n+48>>2]=i+a,w=Ee(T^l^E^w,1),r[n+56>>2]=w,g=Ee(a^p^t^A,1),r[n+60>>2]=g,b=Ee(v^s^A^b,1),r[n+52>>2]=b,y(n+16|0,n+32|0,n+48|0,2),A=r[m+4>>2],S=r[m>>2],r[h>>2]=S,r[h+4>>2]=A,i=r[n+20>>2],C=r[n+16>>2],r[n>>2]=C,r[n+4>>2]=i,r[f>>2]=S,r[f+4>>2]=A,r[n+32>>2]=C,r[n+36>>2]=i,i=Ee(_,30),E=Ee(b^u^x^E,1),r[n+48>>2]=i+E,x=Ee(g^v^o^x,1),r[n+56>>2]=x,A=Ee(E^T^s^I,1),r[n+60>>2]=A,t=Ee(w^c^t^I,1),r[n+52>>2]=t,y(n+16|0,n+32|0,n+48|0,2),_=r[n+16>>2],I=r[n+20>>2],i=r[n+24>>2],r[n+44>>2]=r[n+28>>2],r[n+36>>2]=I,r[n+40>>2]=i,r[n+32>>2]=_,i=Ee(r[n>>2],30),o=Ee(t^a^o^l,1),r[n+48>>2]=i+o,I=Ee(o^g^c^p,1),r[n+60>>2]=I,l=Ee(A^w^u^l,1),r[n+56>>2]=l,p=Ee(x^b^s^p,1),r[n+52>>2]=p,y(n+16|0,n+32|0,n+48|0,2),s=r[m+4>>2],S=r[m>>2],r[h>>2]=S,r[h+4>>2]=s,i=r[n+20>>2],C=r[n+16>>2],r[n>>2]=C,r[n+4>>2]=i,r[f>>2]=S,r[f+4>>2]=s,r[n+32>>2]=C,r[n+36>>2]=i,i=Ee(_,30),s=Ee(p^E^u^v,1),r[n+48>>2]=i+s,u=Ee(I^x^a^v,1),r[n+56>>2]=u,v=Ee(s^A^T^b,1),r[n+60>>2]=v,T=Ee(l^t^c^T,1),r[n+52>>2]=T,y(n+16|0,n+32|0,n+48|0,2),_=r[n+16>>2],c=r[n+20>>2],i=r[n+24>>2],r[n+44>>2]=r[n+28>>2],r[n+36>>2]=c,r[n+40>>2]=i,r[n+32>>2]=_,i=Ee(r[n>>2],30),a=Ee(T^o^a^w,1),r[n+48>>2]=i+a,w=Ee(v^l^E^w,1),r[n+56>>2]=w,c=Ee(a^I^t^g,1),r[n+60>>2]=c,b=Ee(u^p^g^b,1),r[n+52>>2]=b,y(n+16|0,n+32|0,n+48|0,2),g=r[m+4>>2],S=r[m>>2],r[h>>2]=S,r[h+4>>2]=g,i=r[n+20>>2],C=r[n+16>>2],r[n>>2]=C,r[n+4>>2]=i,r[f>>2]=S,r[f+4>>2]=g,r[n+32>>2]=C,r[n+36>>2]=i,i=Ee(_,30),E=Ee(b^s^x^E,1),r[n+48>>2]=i+E,x=Ee(c^u^o^x,1),r[n+56>>2]=x,g=Ee(E^v^p^A,1),r[n+60>>2]=g,t=Ee(w^T^t^A,1),r[n+52>>2]=t,y(n+16|0,n+32|0,n+48|0,3),A=r[n+16>>2],_=r[n+20>>2],i=r[n+24>>2],r[n+44>>2]=r[n+28>>2],r[n+36>>2]=_,r[n+40>>2]=i,r[n+32>>2]=A,i=Ee(r[n>>2],30),o=Ee(t^a^o^l,1),r[n+48>>2]=i+o,_=Ee(o^c^T^I,1),r[n+60>>2]=_,l=Ee(g^w^s^l,1),r[n+56>>2]=l,I=Ee(x^b^p^I,1),r[n+52>>2]=I,y(n+16|0,n+32|0,n+48|0,3),p=r[m+4>>2],S=r[m>>2],r[h>>2]=S,r[h+4>>2]=p,i=r[n+20>>2],C=r[n+16>>2],r[n>>2]=C,r[n+4>>2]=i,r[f>>2]=S,r[f+4>>2]=p,r[n+32>>2]=C,r[n+36>>2]=i,i=Ee(A,30),p=Ee(I^E^s^u,1),r[n+48>>2]=i+p,s=Ee(_^x^a^u,1),r[n+56>>2]=s,u=Ee(p^g^v^b,1),r[n+60>>2]=u,v=Ee(l^t^v^T,1),r[n+52>>2]=v,y(n+16|0,n+32|0,n+48|0,3),T=r[n+16>>2],A=r[n+20>>2],i=r[n+24>>2],r[n+44>>2]=r[n+28>>2],r[n+36>>2]=A,r[n+40>>2]=i,r[n+32>>2]=T,i=Ee(r[n>>2],30),a=Ee(v^o^a^w,1),r[n+48>>2]=i+a,w=Ee(u^l^E^w,1),r[n+56>>2]=w,l=Ee(a^_^t^c,1),r[n+60>>2]=l,b=Ee(s^I^c^b,1),r[n+52>>2]=b,y(n+16|0,n+32|0,n+48|0,3),a=r[m+4>>2],m=r[m>>2],r[h>>2]=m,r[h+4>>2]=a,h=r[n+20>>2],c=r[n+16>>2],r[n>>2]=c,r[n+4>>2]=h,r[f>>2]=m,r[f+4>>2]=a,r[n+32>>2]=c,r[n+36>>2]=h,f=Ee(b^p^x^E,1),D=n,O=Ee(f^u^g^I,1),r[D+60>>2]=O,D=n,O=Ee(l^s^o^x,1),r[D+56>>2]=O,D=n,O=Ee(w^v^t^g,1),r[D+52>>2]=O,D=n,O=Ee(T,30)+f|0,r[D+48>>2]=O,y(n+16|0,n+32|0,n+48|0,3),t=r[n+28>>2],f=r[n+24>>2],h=r[n+20>>2],r[e>>2]=r[e>>2]+r[n+16>>2],r[e+4>>2]=h+r[e+4>>2],r[e+8>>2]=f+r[e+8>>2],r[e+12>>2]=t+r[e+12>>2],D=e,O=r[e+16>>2]+Ee(r[n>>2],30)|0,r[D+16>>2]=O,d=n- -64|0}(e,i+32|0),void(d=i+96|0);r[i+20>>2]=1,r[i+52>>2]=2,r[i+36>>2]=3,r[i+40>>2]=0,r[i+32>>2]=1049776,r[i+12>>2]=1,r[i+24>>2]=i+4,r[i+28>>2]=1049712,r[i+48>>2]=i+8,r[i+16>>2]=i+28,r[i+8>>2]=i+24,function(e){var t,n,i,o;d=t=d-48|0,ee(t+32|0,r[262450],r[262451],r[262452],r[262453]),o=r[4+(n=t+40|0)>>2],r[(i=t+20|0)>>2]=r[n>>2],r[i+4>>2]=o,r[t+8>>2]=e,r[t+4>>2]=1049892,r[t>>2]=1,e=r[t+36>>2],r[t+12>>2]=r[t+32>>2],r[t+16>>2]=e,D(t),u()}(i+32|0),u()}function C(e,t,n){var i,o,a=0,s=0,c=0,l=0,u=0;i=(((s=r[t+12>>2])^(a=r[t+8>>2])^(c=r[t+4>>2]))+Ee(t=r[t>>2],5)|0)+r[n>>2]|0,o=Ee(i,30),r[e+12>>2]=o,s=((s+(a^(c=Ee(c,30))^t)|0)+r[n+4>>2]|0)+Ee(i,5)|0,l=e,u=Ee(s,30),r[l+8>>2]=u,a=((a=a+r[n+8>>2]|0)+((t=Ee(t,30))^c^i)|0)+Ee(s,5)|0,r[e+4>>2]=a,l=e,u=((c+r[n+12>>2]|0)+(s^t^o)|0)+Ee(a,5)|0,r[l>>2]=u}function I(e,t){var n=0,i=0;e:{t:{if((n=r[e+4>>2])-(i=r[e+8>>2])>>>0<t>>>0){if((t=t+i|0)>>>0<i>>>0)break e;if((0|(t=(i=n<<1)>>>0>t>>>0?i:t))<0)break e;if(!(n=n?re(r[e>>2],n,1,t):ce(t,1)))break t;r[e+4>>2]=t,r[e>>2]=n}return}pe(t,1),u()}ge(),u()}function x(e,t,n,i){var o;d=o=d+-64|0,r[o+12>>2]=t,r[o+8>>2]=e,r[o+20>>2]=i,r[o+16>>2]=n,r[o+44>>2]=2,r[o+60>>2]=43,r[o+28>>2]=2,r[o+32>>2]=0,r[o+24>>2]=1050524,r[o+52>>2]=42,r[o+40>>2]=o+48,r[o+56>>2]=o+16,r[o+48>>2]=o+8,V(o+24|0,1050564),u()}function D(e){var t,n,i,o,a=0,s=0;d=t=d-48|0,n=ae(e+12|0),i=ae(r[e+8>>2]),s=r[n+4>>2],r[(a=t+8|0)>>2]=r[n>>2],r[a+4>>2]=s,s=r[t+12>>2],a=r[t+8>>2],o=r[n+8>>2],r[t+28>>2]=r[n+12>>2],r[t+24>>2]=o,r[t+16>>2]=a,r[t+20>>2]=s,r[t+36>>2]=0,r[t+32>>2]=i,T(t+32|0,1050008,r[e+8>>2],t+16|0),u()}function O(e,t,n){var i;d=i=d-48|0,r[i+4>>2]=n,r[i>>2]=t,r[i+28>>2]=2,r[i+44>>2]=40,r[i+12>>2]=2,r[i+16>>2]=0,r[i+8>>2]=1050392,r[i+36>>2]=40,r[i+24>>2]=i+32,r[i+40>>2]=i,r[i+32>>2]=i+4,V(i+8|0,e),u()}function P(e,t){var n;d=n=d-48|0,r[n+4>>2]=t,r[n>>2]=e,r[n+28>>2]=2,r[n+44>>2]=40,r[n+12>>2]=2,r[n+16>>2]=0,r[n+8>>2]=1050644,r[n+36>>2]=40,r[n+24>>2]=n+32,r[n+40>>2]=n+4,r[n+32>>2]=n,V(n+8|0,1050660),u()}function R(e,t){var n;d=n=d-48|0,r[n+4>>2]=t,r[n>>2]=e,r[n+28>>2]=2,r[n+44>>2]=40,r[n+12>>2]=2,r[n+16>>2]=0,r[n+8>>2]=1050712,r[n+36>>2]=40,r[n+24>>2]=n+32,r[n+40>>2]=n+4,r[n+32>>2]=n,V(n+8|0,1050728),u()}function k(e,t){var n,i;if(d=n=d-16|0,(i=r[e>>2])>>>0<=t>>>0)return G(n+8|0,e+4|0,64,i,t),J(r[n+8>>2],r[n+12>>2]),r[e>>2]=t,void(d=n+16|0);X(1049568,40,1049552),u()}function N(e){var t;for(d=t=d-32|0,r[t+24>>2]=e;W(t+16|0,t+24|0),1&i[t+16|0];);le(t+8|0,r[e>>2],r[e+4>>2]),e=r[t+12>>2],r[t+24>>2]=r[t+8>>2],r[t+28>>2]=e,te(t+24|0),d=t+32|0}function M(e){var t,n,i,o,a,s;d=t=d-48|0,n=r[e+8>>2],i=r[e+12>>2],o=r[e+16>>2],a=r[e+20>>2],s=r[e>>2],e=r[e+4>>2],r[t+16>>2]=4,r[t+20>>2]=0,r[t+4>>2]=1,r[t+8>>2]=0,r[t+24>>2]=s,r[t+28>>2]=e,r[t>>2]=t+24,r[t+40>>2]=o,r[t+44>>2]=a,r[t+32>>2]=n,r[t+36>>2]=i,V(t,t+32|0),u()}function L(e,t){var n;if(d=n=d-16|0,64==r[t>>2])return r[t>>2]=0,q(n+8|0,t+4|0,64,64),t=r[n+12>>2],r[e>>2]=r[n+8>>2],r[e+4>>2]=t,void(d=n+16|0);X(1049608,39,1049552),u()}function B(e,t,n,i){var o=0;if(1114112==(0|t)||(o=1,!Te[r[r[e+28>>2]+16>>2]](r[e+24>>2],t))){if(!n)return 0;o=0|Te[r[r[e+28>>2]+12>>2]](r[e+24>>2],n,i)}return o}function F(e,t,n){if(4==(0|t))return t=n<<8&16711680|n<<24|n>>>8&65280|n>>>24,i[0|e]=t,i[e+1|0]=t>>>8,i[e+2|0]=t>>>16,void(i[e+3|0]=t>>>24);X(1049304,32,1049288),u()}function U(e,t,n){var i,o=0;d=i=d-16|0,o=(o=n)+(n=r[t>>2])|0,r[t>>2]=o,G(i+8|0,t+4|0,64,n,o),t=r[i+12>>2],r[e>>2]=r[i+8>>2],r[e+4>>2]=t,d=i+16|0}function W(e,t){var n=0,a=0;t=r[t>>2],a=0,(0|(n=r[t+8>>2]))!=r[t+12>>2]&&(r[t+8>>2]=n+1,t=o[0|n],a=1),n=a,i[e+1|0]=t,i[0|e]=n}function j(e,t,n){var o;d=o=d-16|0,r[o+8>>2]=0,r[o>>2]=1,r[o+4>>2]=0,de(o,n-t>>>2),function(e,t,n){var o,a=0,s=0,c=0;for(d=o=d-16|0;(0|e)!=(0|t);)a=e+4|0,(e=r[e>>2])>>>0>=128?(r[o+12>>2]=0,s=n,c=o+12|0,e>>>0<=2047?(i[o+13|0]=63&e|128,i[o+12|0]=e>>>6&31|192,e=2):e>>>0<=65535?(i[o+14|0]=63&e|128,i[o+13|0]=e>>>6&63|128,i[o+12|0]=e>>>12&15|224,e=3):(i[o+15|0]=63&e|128,i[o+12|0]=e>>>18|240,i[o+14|0]=e>>>6&63|128,i[o+13|0]=e>>>12&63|128,e=4),se(s,c,e),e=a):(r[n+8>>2]==r[n+4>>2]&&de(n,1),i[r[n>>2]+r[n+8>>2]|0]=e,r[n+8>>2]=r[n+8>>2]+1,e=a);d=o+16|0}(t,n,o),r[e+8>>2]=r[o+8>>2],t=r[o+4>>2],r[e>>2]=r[o>>2],r[e+4>>2]=t,d=o+16|0}function G(e,t,n,i,o){e:{if(o>>>0>=i>>>0){if(n>>>0<o>>>0)break e;return r[e+4>>2]=o-i,void(r[e>>2]=t+i)}R(i,o),u()}P(o,n),u()}function V(e,t){var n,i,o,a,s;d=n=d-32|0,o=r[t>>2],a=r[t+4>>2],s=r[t+12>>2],r[(i=n+20|0)>>2]=r[t+8>>2],r[i+4>>2]=s,r[n+12>>2]=o,r[n+16>>2]=a,r[n+8>>2]=e,r[n+4>>2]=1050324,r[n>>2]=1,D(n),u()}function H(e){var t,n;e|=0,d=t=d-16|0,function(e){var t,n=0;d=t=d-32|0,r[4+(n=t+8|0)>>2]=0,r[n>>2]=1,r[t+24>>2]=0,n=r[t+12>>2],r[t+16>>2]=r[t+8>>2],r[t+20>>2]=n,se(t+16|0,1049136,0),r[e+8>>2]=r[t+24>>2],n=r[t+20>>2],r[e>>2]=r[t+16>>2],r[e+4>>2]=n,d=t+32|0}(t),r[e>>2]=0,n=r[t+4>>2],r[e+4>>2]=r[t>>2],r[e+8>>2]=n,r[e+12>>2]=r[t+8>>2],d=t+16|0}function z(e,t,n,i,o){e:{if(n>>>0>=t>>>0){if(o>>>0>=n>>>0)break e;P(n,o),u()}R(t,n),u()}r[e+4>>2]=n-t,r[e>>2]=t+i}function Z(e,t,n){var i;d=i=d-32|0,ie(i+16|0,t,n,n),$(i+8|0,i+16|0),t=r[i+12>>2],r[e>>2]=r[i+8>>2],r[e+4>>2]=t,d=i+32|0}function Y(e,t,n){var r=0;if(n)for(r=e;i[0|r]=o[0|t],r=r+1|0,t=t+1|0,n=n+-1|0;);return e}function $(e,t){var n,i;d=n=d-16|0,(0|(i=r[t+8>>2]))!=r[t+4>>2]&&function(e,t){var n=0;e:{t:{n:{if((n=r[e+4>>2])>>>0>=t>>>0){if(t){if((0|t)==(0|n))break e;if(n=re(r[e>>2],n,1,t))break n;pe(t,1),u()}te(e),r[e>>2]=1,t=0;break t}M(1048636),u()}r[e>>2]=n}r[e+4>>2]=t}}(t,i),function(e,t,n){var i;d=i=d-16|0,r[i+12>>2]=n,r[i+8>>2]=t,r[e>>2]=r[i+8>>2],r[e+4>>2]=r[i+12>>2],d=i+16|0}(n+8|0,r[t>>2],r[t+4>>2]),t=r[n+12>>2],r[e>>2]=r[n+8>>2],r[e+4>>2]=t,d=n+16|0}function q(e,t,n,i){var o;d=o=d-16|0,z(o+8|0,0,i,t,n),t=r[o+12>>2],r[e>>2]=r[o+8>>2],r[e+4>>2]=t,d=o+16|0}function Q(e,t,n){var i;return t|=0,n|=0,I(e=r[(e|=0)>>2],n),i=r[e+8>>2],r[e+8>>2]=i+n,Y(r[e>>2]+i|0,t,n),0}function J(e,t){if(t)for(;i[0|e]=0,e=e+1|0,t=t+-1|0;);}function X(e,t,n){var i;d=i=d-16|0,r[i+12>>2]=t,r[i+8>>2]=e,T(i+8|0,1049204,0,n),u()}function K(e,t,n,i){i>>>0>=t>>>0?Y(n,e,t):(X(1049416,40,1049400),u())}function ee(e,t,n,i,o){r[e+12>>2]=o,r[e+8>>2]=i,r[e+4>>2]=n,r[e>>2]=t}function te(e){r[e+4>>2]&&_(r[e>>2])}function ne(e){r[4+(e|=0)>>2]=0,r[e+8>>2]=0,r[e>>2]=4,r[(e=e+12|0)>>2]=0,r[e+4>>2]=0}function ie(e,t,n,i){r[e+8>>2]=n,r[e+4>>2]=i,r[e>>2]=t}function re(e,t,n,i){return function(e,t,n,i){e:{if(8<n>>>0){if(n=8<n>>>0?A(n,i):p(i))break e;return 0}return function(e,t){var n=0,i=0,o=0,a=0,s=0,c=0,l=0,u=0,d=0,h=0;t:if(!(t>>>0>4294901708)){n=t>>>0<11?16:t+11&-8,i=-8&(c=r[(s=e+-4|0)>>2]);n:{i:{r:{o:{a:{s:{if(3&c){if(a=i+(l=e+-8|0)|0,i>>>0>=n>>>0)break s;if((0|a)==r[262874])break a;if((0|a)==r[262873])break o;if(2&(c=r[a+4>>2]))break n;if((i=i+(u=-8&c)|0)>>>0>=n>>>0)break r;break n}if(n>>>0<256|i>>>0<(4|n)>>>0|i-n>>>0>=131073)break n;break i}if((t=i-n|0)>>>0<16)break i;r[s>>2]=n|1&c|2,r[4+(o=n+l|0)>>2]=3|t,r[a+4>>2]=1|r[a+4>>2],v(o,t);break i}if((i=i+r[262872]|0)>>>0<=n>>>0)break n;r[s>>2]=n|1&c|2,o=i-n|0,r[4+(t=n+l|0)>>2]=1|o,r[262872]=o,r[262874]=t;break i}if((i=i+r[262871]|0)>>>0<n>>>0)break n;(t=i-n|0)>>>0<=15?(r[s>>2]=i|1&c|2,r[4+(t=i+l|0)>>2]=1|r[t+4>>2],t=0):(r[s>>2]=n|1&c|2,r[4+(o=n+l|0)>>2]=1|t,r[(n=i+l|0)>>2]=t,r[n+4>>2]=-2&r[n+4>>2]),r[262873]=o,r[262871]=t;break i}t=i-n|0,u>>>0>=256?E(a):(0|(o=r[a+12>>2]))==(0|(a=r[a+8>>2]))?(d=1051084,h=r[262771]&Ee(-2,c>>>3),r[d>>2]=h):(r[a+12>>2]=o,r[o+8>>2]=a),t>>>0>=16?(r[s>>2]=n|1&r[s>>2]|2,r[4+(o=n+l|0)>>2]=3|t,r[4+(n=i+l|0)>>2]=1|r[n+4>>2],v(o,t)):(r[s>>2]=i|1&r[s>>2]|2,r[4+(t=i+l|0)>>2]=1|r[t+4>>2])}o=e;break t}if(n=p(t))return t=Y(n,e,(o=(-8&(o=r[s>>2]))-(3&o?4:8)|0)>>>0>t>>>0?t:o),_(e),t}return o}(e,i)}return t=Y(n,e,t>>>0>i>>>0?i:t),_(e),t}(e,t,n,i)}function oe(e,t){r[e+4>>2]=r[t+8>>2],r[e>>2]=r[t>>2]}function ae(e){return e||(M(1049972),u()),e}function se(e,t,n){!function(e,t,n){var i,o;d=i=d-16|0,de(e,n=n-t|0),o=r[e+8>>2],r[e+8>>2]=n+o,oe(i+8|0,e),function(e,t,n,i){var o;if(d=o=d-112|0,r[o+24>>2]=t,r[o+28>>2]=i,(0|t)==(0|i))return Y(e,n,t),void(d=o+112|0);r[o+80>>2]=o+24,r[o+84>>2]=o+28,r[o+104>>2]=4,r[o+108>>2]=0,r[o+92>>2]=1,r[o+96>>2]=0,r[o+88>>2]=1048948,le(o+16|0,o+80|0,1),e=r[o+20>>2],t=r[o+16>>2],le(o+8|0,o+84|0,1),r[o+76>>2]=2,r[o+52>>2]=3,r[o+56>>2]=t,r[o+60>>2]=e,r[o+36>>2]=3,r[o+40>>2]=0,r[o+32>>2]=1048872,e=r[o+12>>2],r[o+64>>2]=r[o+8>>2],r[o+68>>2]=e,r[o+72>>2]=o+88,r[o+48>>2]=o+56,V(o+32|0,1048956),u()}(r[i+8>>2]+o|0,r[i+12>>2]-o|0,t,n),d=i+16|0}(e,t,t+n|0)}function ce(e,t){return 8<t>>>0?A(t,e):p(e)}function le(e,t,n){r[e+4>>2]=n,r[e>>2]=t}function ue(e,t,n){S(r[r[e>>2]>>2],t,n)}function de(e,t){!function(e,t,n){var i;d=i=d-16|0,function(e,t,n,i){var o,a=0;d=o=d-48|0,r[t+4>>2]-n>>>0>=i>>>0||(function(e,t,n,i){var o,a;d=o=d-16|0,a=e,(i=n+i|0)>>>0<n>>>0?(le(o+8|0,i,0),n=r[o+8>>2],r[e+8>>2]=r[o+12>>2],t=1):(n=(t=r[t+4>>2]<<1)>>>0>i>>>0?t:i,t=0),r[a>>2]=t,r[e+4>>2]=n,d=o+16|0}(o+32|0,t,n,i),a=1,n=r[o+36>>2],1!=r[o+32>>2]?(0|n)<=-1?(le(o+8|0,o,0),t=r[o+12>>2],r[e+4>>2]=r[o+8>>2],r[e+8>>2]=t):(i=o+16|0,a=r[t+4>>2],r[i>>2]=a,r[i+4>>2]=0!=(0|a),(i=(i=r[o+20>>2])?re(r[t>>2],r[o+16>>2],i,n):ce(n,1))||(pe(n,1),u()),r[t+4>>2]=n,r[t>>2]=i,a=0):(le(o,n,r[o+40>>2]),t=r[o+4>>2],r[e+4>>2]=r[o>>2],r[e+8>>2]=t)),r[e>>2]=a,d=o+48|0}(i,e,t,n);e:{if(1==r[i>>2]){if(!r[i+8>>2])break e;M(1048700),u()}return void(d=i+16|0)}ge(),u()}(e,r[e+8>>2],t)}function he(e,t){return t|=0,0|function(e,t){var n,r=0,a=0,s=0,l=0,u=0,p=0,f=0,g=0,_=0;if(d=n=d-48|0,a=39,e>>>0<1e4)r=e;else for(;r=be(e,l),_=s=h,f=(u=(n+9|0)+a|0)-4|0,s=e-Ae(r,s)|0,p=o[0|(p=1050746+((g=((65535&s)>>>0)/100|0)<<1)|0)]|o[p+1|0]<<8,i[0|f]=p,i[f+1|0]=p>>>8,u=u+-2|0,s=1050746+((s-c(g,100)&65535)<<1)|0,s=o[0|s]|o[s+1|0]<<8,i[0|u]=s,i[u+1|0]=s>>>8,a=a+-4|0,s=!l&e>>>0>99999999|l>>>0>0,e=r,l=_,s;);return(0|r)>99&&(l=(a=a+-2|0)+(n+9|0)|0,e=1050746+(((e=r)-c(r=((65535&e)>>>0)/100|0,100)&65535)<<1)|0,e=o[0|e]|o[e+1|0]<<8,i[0|l]=e,i[l+1|0]=e>>>8),(0|r)>=10?(e=(a=a+-2|0)+(n+9|0)|0,r=o[0|(r=1050746+(r<<1)|0)]|o[r+1|0]<<8,i[0|e]=r,i[e+1|0]=r>>>8):i[(a=a+-1|0)+(n+9|0)|0]=r+48,e=m(t,1050299,0,(n+9|0)+a|0,39-a|0),d=n+48|0,e}(r[(e|=0)>>2],t)}function pe(e,t){var n;n=e,e=r[262767],Te[e||22](n,t),u()}function fe(e,t,n){return g(n,e,t)}function ge(){M(1050224),u()}function _e(e){return h=1468863706,-1546811115}function me(e){}function ye(){}function ve(e,t){var n,i;n=0|e,i=0|t,s[0]=n,s[1]=i}function Ae(e,t){var n,i=0,r=0;return n=c(i=e>>>16,0),e=65535&(r=(r=c(i,1e4))+((i=c(65535&e,1e4))>>>16)|0),h=((n+c(t,1e4)|0)+(r>>>16)|0)+(e>>>16)|0,65535&i|e<<16}function be(e,t){var n=0,i=0,r=0,o=0,a=0,s=0,u=0;if(!t)return ve((t=e)-c(e=(e>>>0)/1e4|0,1e4)|0,0),h=0,e;if(r=0-(a=51-l(t)|0)|0,n=31&(i=63&a),32<=i>>>0?(i=0,o=t>>>n):(i=t>>>n,o=((1<<n)-1&t)<<32-n|e>>>n),n=31&(r&=63),32<=r>>>0?(t=e<<n,e=0):(t=(1<<n)-1&e>>>32-n|t<<n,e<<=n),a)for(;r=i<<1|o>>>31,o=(i=o<<1|t>>>31)-(n=1e4&(s=(o=0-(r+(9999<i>>>0)|0)|0)>>31))|0,i=r-(i>>>0<n>>>0)|0,t=t<<1|e>>>31,e=u|e<<1,u=s&=1,a=a+-1|0;);return ve(o,i),h=t<<1|e>>>31,s|e<<1}function we(e){return e?31-l(e+-1^e)|0:32}function Ee(e,t){var n=0;return(-1>>>(n=31&t)&e)<<n|((n=e)&-1<<(e=0-t&31))>>>e}var Te=[null,function(e,t){return t|=0,e=r[(e|=0)>>2],(16&o[0|t])>>>4?0|function(e,t){var n,o=0,a=0;for(d=n=d-128|0,o=r[e>>2],e=0;a=15&o,i[127+(e+n|0)|0]=a>>>0<10?48|a:a+87|0,e=e+-1|0,o>>>=4;);return(o=e+128|0)>>>0>=129&&(R(o,128),u()),e=m(t,1050744,2,128+(e+n|0)|0,0-e|0),d=n+128|0,e}(e,t):(32&o[0|t])>>>5?0|function(e,t){var n,o=0,a=0;for(d=n=d-128|0,o=r[e>>2],e=0;a=15&o,i[127+(e+n|0)|0]=a>>>0<10?48|a:a+55|0,e=e+-1|0,o>>>=4;);return(o=e+128|0)>>>0>=129&&(R(o,128),u()),e=m(t,1050744,2,128+(e+n|0)|0,0-e|0),d=n+128|0,e}(e,t):0|he(e,t)},function(e,t){e|=0;var n,i,o=0,a=0,s=0;return d=n=d-32|0,i=r[28+(t|=0)>>2],t=r[t+24>>2],s=r[4+(a=e+16|0)>>2],r[(o=n+24|0)>>2]=r[a>>2],r[o+4>>2]=s,s=r[4+(a=e+8|0)>>2],r[(o=n+16|0)>>2]=r[a>>2],r[o+4>>2]=s,o=r[e+4>>2],r[n+8>>2]=r[e>>2],r[n+12>>2]=o,e=f(t,i,n+8|0),d=n+32|0,0|e},function(e,t){return t|=0,0|fe(r[(e|=0)>>2],r[e+4>>2],t)},function(e,t){var n;return t|=0,d=n=d-16|0,oe(n+8|0,r[(e|=0)>>2]),e=fe(r[n+8>>2],r[n+12>>2],t),d=n+16|0,0|e},me,function(e,t){return e|=0,d=e=d-16|0,function(e,t){var n;n=0|Te[r[r[t+28>>2]+12>>2]](r[t+24>>2],1049996,11),i[e+5|0]=0,i[e+4|0]=n,r[e>>2]=t}(e+8|0,t|=0),t=function(e){var t=0,n=0,a=0;return t=o[e+4|0],o[e+5|0]&&(n=255&t,a=e,t=1,n||(t=r[e>>2],n=r[r[t+28>>2]+12>>2],e=r[t+24>>2],t=4&o[0|t]?0|Te[n](e,1050946,1):0|Te[n](e,1050947,2)),i[a+4|0]=t),0!=(255&t)}(e+8|0),d=e+16|0,0|t},me,function(e,t){return 0|Te[r[r[28+(t|=0)>>2]+12>>2]](r[t+24>>2],1050299,11)},me,function(e,t){return 0|Te[r[r[28+(t|=0)>>2]+12>>2]](r[t+24>>2],1050310,14)},H,function(){return 0|(r[262757]?1051024:function(){var e,t,n=0,i=0,o=0;return d=e=d-32|0,H(e),o=r[262759],r[(n=e+24|0)>>2]=r[262758],r[n+4>>2]=o,o=r[262756],n=r[262757],i=r[e+4>>2],r[262756]=r[e>>2],r[262757]=i,t=r[4+(i=e+8|0)>>2],r[262758]=r[i>>2],r[262759]=t,r[e+16>>2]=o,r[e+20>>2]=n,r[e+20>>2]&&te(e+16|4),d=e+32|0,1051024}())},me,function(e,t){e|=0;var n=0,i=0,o=0;n=r[(t|=0)>>2],r[t>>2]=0;e:{if(i=e,n){if(o=r[t+4>>2],!(t=ce(8,4)))break e;r[t+4>>2]=o,r[t>>2]=n,n=1049224}else t=1,n=1049240;return r[i+4>>2]=n,void(r[e>>2]=t)}pe(8,4),u()},function(e,t){var n;e|=0,n=r[(t|=0)>>2],r[e+4>>2]=n?1049224:1049240,r[e>>2]=n?t:1},me,function(e){return h=286299353,1890621284},me,function(e){return h=1757840133,-801715452},ne,function(){return 0|(r[262762]?1051048:function(){var e,t,n=0,i=0,o=0;return d=e=d-48|0,ne(e),r[e+40>>2]=r[262766],n=r[262765],r[(i=e+32|0)>>2]=r[262764],r[i+4>>2]=n,n=r[262762],i=r[262763],o=r[e+4>>2],r[262762]=r[e>>2],r[262763]=o,t=r[4+(o=e+8|0)>>2],r[262764]=r[o>>2],r[262765]=t,r[262766]=r[e+16>>2],r[e+24>>2]=n,r[e+28>>2]=i,n&&r[4+(n=e+24|0)>>2]&&_(r[n>>2]),d=e+48|0,1051048}())},function(e,t){},me,Q,function(e,t){t|=0;var n,o=0;d=n=d-16|0,o=e=r[(e|=0)>>2];e:{t:{n:{if(t>>>0>=128){if(r[n+12>>2]=0,t>>>0<2048)break n;if(t>>>0<65536){i[n+14|0]=63&t|128,i[n+13|0]=t>>>6&63|128,i[n+12|0]=t>>>12&15|224,t=3;break t}i[n+15|0]=63&t|128,i[n+12|0]=t>>>18|240,i[n+14|0]=t>>>6&63|128,i[n+13|0]=t>>>12&63|128,t=4;break t}(0|(o=r[e+8>>2]))==r[e+4>>2]&&(I(e,1),o=r[e+8>>2]),i[o+r[e>>2]|0]=t,r[e+8>>2]=r[e+8>>2]+1;break e}i[n+13|0]=63&t|128,i[n+12|0]=t>>>6&31|192,t=2}I(o,t),o=r[e+8>>2],r[e+8>>2]=o+t,Y(o+r[e>>2]|0,n+12|0,t)}return d=n+16|0,0},function(e,t){e|=0,t|=0;var n,i=0,o=0;return d=n=d-32|0,r[n+4>>2]=r[e>>2],o=r[4+(i=t+16|0)>>2],r[(e=n+24|0)>>2]=r[i>>2],r[e+4>>2]=o,o=r[4+(i=t+8|0)>>2],r[(e=n+16|0)>>2]=r[i>>2],r[e+4>>2]=o,e=r[t+4>>2],r[n+8>>2]=r[t>>2],r[n+12>>2]=e,e=f(n+4|0,1049868,n+8|0),d=n+32|0,0|e},me,_e,function(e){var t;!(t=r[4+(e|=0)>>2])|!r[e+8>>2]||_(t)},function(e,t){e|=0;var n,i=0,o=0,a=0,s=0;d=n=d+-64|0,(i=r[4+(t|=0)>>2])||(i=r[t>>2],r[n+32>>2]=0,r[n+24>>2]=1,r[n+28>>2]=0,r[n+36>>2]=n+24,a=r[4+(o=i+16|0)>>2],r[(s=n+56|0)>>2]=r[o>>2],r[s+4>>2]=a,a=r[4+(o=i+8|0)>>2],r[(s=n+48|0)>>2]=r[o>>2],r[s+4>>2]=a,o=r[i+4>>2],r[n+40>>2]=r[i>>2],r[n+44>>2]=o,f(n+36|0,1049868,n+40|0),r[(o=n+16|0)>>2]=r[n+32>>2],i=r[n+28>>2],r[n+8>>2]=r[n+24>>2],r[n+12>>2]=i,!(i=r[t+4>>2])|!r[t+8>>2]||_(i),a=r[n+12>>2],r[(i=t+4|0)>>2]=r[n+8>>2],r[i+4>>2]=a,r[i+8>>2]=r[o>>2],i=r[i>>2]),r[t+4>>2]=1,o=r[t+12>>2],a=r[(t=t+8|0)>>2],r[t>>2]=0,r[t+4>>2]=0,(t=ce(12,4))||(pe(12,4),u()),r[t+8>>2]=o,r[t+4>>2]=a,r[t>>2]=i,r[e+4>>2]=1050028,r[e>>2]=t,d=n- -64|0},function(e,t){e|=0;var n,i,o=0,a=0,s=0,c=0;d=n=d+-64|0,i=4+(t|=0)|0,r[t+4>>2]||(a=r[t>>2],r[n+32>>2]=0,r[n+24>>2]=1,r[n+28>>2]=0,r[n+36>>2]=n+24,c=r[4+(o=a+16|0)>>2],r[(s=n+56|0)>>2]=r[o>>2],r[s+4>>2]=c,c=r[4+(o=a+8|0)>>2],r[(s=n+48|0)>>2]=r[o>>2],r[s+4>>2]=c,o=r[a+4>>2],r[n+40>>2]=r[a>>2],r[n+44>>2]=o,f(n+36|0,1049868,n+40|0),r[(a=n+16|0)>>2]=r[n+32>>2],o=r[n+28>>2],r[n+8>>2]=r[n+24>>2],r[n+12>>2]=o,!(o=r[t+4>>2])|!r[t+8>>2]||_(o),t=r[n+12>>2],r[i>>2]=r[n+8>>2],r[i+4>>2]=t,r[i+8>>2]=r[a>>2]),r[e+4>>2]=1050028,r[e>>2]=i,d=n- -64|0},te,function(e){return h=-679582923,428379921},me,Q,function(e,t){return t|=0,function(e,t){var n,o=0;d=n=d-16|0,o=e;e:{t:{n:{if(t>>>0>=128){if(r[n+12>>2]=0,t>>>0<2048)break n;if(t>>>0<65536){i[n+14|0]=63&t|128,i[n+13|0]=t>>>6&63|128,i[n+12|0]=t>>>12&15|224,t=3;break t}i[n+15|0]=63&t|128,i[n+12|0]=t>>>18|240,i[n+14|0]=t>>>6&63|128,i[n+13|0]=t>>>12&63|128,t=4;break t}(0|(o=r[e+8>>2]))==r[e+4>>2]&&(I(e,1),o=r[e+8>>2]),i[o+r[e>>2]|0]=t,r[e+8>>2]=r[e+8>>2]+1;break e}i[n+13|0]=63&t|128,i[n+12|0]=t>>>6&31|192,t=2}I(o,t),o=r[e+8>>2],r[e+8>>2]=o+t,Y(o+r[e>>2]|0,n+12|0,t)}d=n+16|0}(r[(e|=0)>>2],t),0},function(e,t){e|=0,t|=0;var n,i=0,o=0;return d=n=d-32|0,r[n+4>>2]=r[e>>2],o=r[4+(i=t+16|0)>>2],r[(e=n+24|0)>>2]=r[i>>2],r[e+4>>2]=o,o=r[4+(i=t+8|0)>>2],r[(e=n+16|0)>>2]=r[i>>2],r[e+4>>2]=o,e=r[t+4>>2],r[n+8>>2]=r[t>>2],r[n+12>>2]=e,e=f(n+4|0,1050044,n+8|0),d=n+32|0,0|e},me,function(e,t){return 0|Te[r[r[28+(t|=0)>>2]+12>>2]](r[t+24>>2],1051016,5)},he,he,function(e,t){return 0|g(t|=0,r[(e|=0)>>2],r[e+4>>2])},function(e,t){return t|=0,0|Te[r[r[4+(e|=0)>>2]+12>>2]](r[e>>2],t)},me,_e];function Se(t){t|=0;var s=0|n.byteLength/65536,l=s+t|0;if(s<l&&l<65536){var u=new ArrayBuffer(c(l,65536)),d=new e.Int8Array(u);d.set(i),i=d,i=new e.Int8Array(u),new e.Int16Array(u),r=new e.Int32Array(u),o=new e.Uint8Array(u),new e.Uint16Array(u),a=new e.Uint32Array(u),new e.Float32Array(u),new e.Float64Array(u),n=u}return s}return{memory:Object.create(Object.prototype,{grow:{value:Se},buffer:{get:function(){return n}}}),sha1:function(e,t,n){var i;e|=0,d=i=d-80|0,Z(i+24|0,t|=0,n|=0),function(e,t,n){var i;d=i=d-16|0,r[i+12>>2]=n,r[i+8>>2]=t,function(e,t){var n;d=n=d-32|0,function(e,t){var n,i,a=0;d=n=d-176|0,(i=0|Te[r[262284]]())?(function(e){var t;r[e+8>>2]=1732584193,r[e+12>>2]=-271733879,r[e>>2]=0,r[e+4>>2]=0,r[e+24>>2]=-1009589776,r[(t=e+16|0)>>2]=-1732584194,r[t+4>>2]=271733878,J(e+28|0,69)}(n+8|0),(0|(a=r[i>>2]+1|0))<=0&&(x(1049045,24,n+128|0,1049088),u()),r[i>>2]=a,r[n+164>>2]=3,r[n+148>>2]=2,r[n+132>>2]=2,r[n+136>>2]=0,r[n+128>>2]=1049120,r[n+172>>2]=i,r[n+168>>2]=i+4,r[n+160>>2]=t,r[n+156>>2]=4,r[n+144>>2]=n+152,r[n+152>>2]=n+168,function(e,t){var n,i,o=0,a=0,s=0,c=0;if(d=n=d-48|0,c=r[t>>2],a=(i=r[t+4>>2])<<3)for(o=c+4|0;s=r[o>>2]+s|0,o=o+8|0,a=a+-8|0;);e:{t:{n:{i:{if(r[t+20>>2]){if(i||(O(1050152,0,0),u()),!r[c+4>>2]&&s>>>0<=15||!((o=s+s|0)>>>0>=s>>>0)){a=1,o=0,s=n+8|0;break i}}else o=s;if((0|o)<=-1)break n;if(s=n+8|0,o){if(!(a=ce(o,1)))break t}else a=1,o=0}if(r[n+16>>2]=0,r[n+12>>2]=o,r[n+8>>2]=a,r[n+20>>2]=n+8,a=r[4+(o=t+16|0)>>2],r[(c=n+40|0)>>2]=r[o>>2],r[c+4>>2]=a,a=r[4+(o=t+8|0)>>2],r[(c=n+32|0)>>2]=r[o>>2],r[c+4>>2]=a,o=r[t+4>>2],r[n+24>>2]=r[t>>2],r[n+28>>2]=o,f(n+20|0,1050044,n+24|0))break e;return t=r[s+4>>2],r[e>>2]=r[s>>2],r[e+4>>2]=t,r[e+8>>2]=r[s+8>>2],void(d=n+48|0)}ge(),u()}pe(o,1),u()}x(1050248,51,n+24|0,1050168),u()}(n+112|0,n+128|0),oe(n,n+112|0),function(e,t,n){var i,a,s;d=i=d-16|0,o[e+96|0]&&(X(1049832,32,1049816),u()),a=e,s=function(e,t,n){var i,o,a=0;if(i=1+(a=(n>>>29)+t|0)|0,o=a,!((0|(n=(a=(n<<=3)+e|0)>>>0<n>>>0?i:o))==(0|t)&a>>>0<e>>>0|n>>>0<t>>>0))return h=n,a;(function(){var e;d=e=d-48|0,r[e+12>>2]=25,r[e+8>>2]=1049472,r[e+36>>2]=1,r[e+20>>2]=1,r[e+24>>2]=0,r[e+16>>2]=1050496,r[e+44>>2]=42,r[e+32>>2]=e+40,r[e+40>>2]=e+8,V(e+16|0,1050504),u()})(),u()}(r[e>>2],r[e+4>>2],n),r[a>>2]=s,r[e+4>>2]=h,r[i+12>>2]=e+8,function(e,t,n,i){var o,a=0,s=0,c=0;d=o=d+-64|0,r[o+60>>2]=i;e:{if(i=r[e>>2]){if((a=64-i|0)>>>0>n>>>0){G(o+32|0,e+4|0,64,i,n+i|0),K(t,n,r[o+32>>2],r[o+36>>2]);break e}q(o+48|0,t,n,a),i=r[o+52>>2],s=r[o+48>>2],G(o+40|0,c=e+4|0,64,r[e>>2],64),K(s,i,r[o+40>>2],r[o+44>>2]),r[e>>2]=0,ue(o+60|0,c,64)}for(i=n-a|0;!(i>>>0<=63);)z(o+8|0,s=a,a=a- -64|0,t,n),ue(o+60|0,r[o+8>>2],r[o+12>>2]),i=i+-64|0;z(o+24|0,a,n,t,n),t=r[o+28>>2],n=r[o+24>>2],G(o+16|0,e+4|0,64,0,i),K(n,t,r[o+16>>2],r[o+20>>2]),n=i}r[e>>2]=r[e>>2]+n,d=o- -64|0}(e+28|0,t,n,i+12|0),d=i+16|0}(n+8|0,r[n>>2],r[n+4>>2]),te(n+112|0),t=r[n+172>>2],r[t>>2]=r[t>>2]+-1,function(e,t){var n,i,a=0;d=n=d-48|0,function(e,t){var n;d=n=d-16|0,r[n+8>>2]=0,r[n>>2]=1,r[n+4>>2]=0,function(e,t){var n,i=0;de(e,t),n=r[e>>2],t&&(J(n+(i=r[e+8>>2])|0,t),r[e+8>>2]=t+i)}(n,t),r[e+8>>2]=r[n+8>>2],t=r[n+4>>2],r[e>>2]=r[n>>2],r[e+4>>2]=t,d=n+16|0}(n+16|0,20),oe(n+8|0,n+16|0),w(t,r[n+8>>2],r[n+12>>2]),r[(t=n+40|0)>>2]=r[n+24>>2],a=r[n+20>>2],r[n+32>>2]=r[n+16>>2],r[n+36>>2]=a,a=r[n+36>>2],i=r[t>>2],t=r[n+32>>2],r[n+44>>2]=i+t,r[n+40>>2]=t,r[n+36>>2]=a,r[n+32>>2]=t,function(e,t){var n,i=0,a=0,s=0;d=n=d+-64|0,a=r[4+(i=t+8|0)>>2],s=n+8|0,i=r[i>>2],r[s>>2]=i,r[s+4>>2]=a,a=r[t+4>>2],r[n>>2]=r[t>>2],r[n+4>>2]=a;e:{t:{if(r[n+12>>2]!=(0|i)){if(r[n+8>>2]=i+1,function(e,t){var n;d=n=d-16|0,r[n+12>>2]=r[1048724+((15&t)<<2)>>2],r[n+8>>2]=r[1048724+((240&t)>>>2)>>2],j(e,n+8|0,n+16|0),d=n+16|0}(n+16|0,o[0|i]),r[n+16>>2])break t}else r[n+16>>2]=0;if(r[e+8>>2]=0,r[e>>2]=1,r[e+4>>2]=0,N(n),!r[n+16>>2])break e;te(n+16|0);break e}r[(t=n+40|0)>>2]=r[n+24>>2],i=r[n+20>>2],r[n+32>>2]=r[n+16>>2],r[n+36>>2]=i,a=r[4+(i=n+8|0)>>2],r[(s=n+56|0)>>2]=r[i>>2],r[s+4>>2]=a,i=r[n+4>>2],r[n+48>>2]=r[n>>2],r[n+52>>2]=i,function(e,t){var n,i,a,s=0;d=n=d-16|0,a=r[4+(i=t+8|0)>>2],r[(s=n+8|0)>>2]=r[i>>2],r[s+4>>2]=a,s=r[t+4>>2],r[n>>2]=r[t>>2],r[n+4>>2]=s,function(e,t){var n,i,a,s=0;for(d=n=d+-64|0,a=r[4+(s=e+8|0)>>2],r[(i=n+24|0)>>2]=r[s>>2],r[i+4>>2]=a,s=r[e+4>>2],r[n+16>>2]=r[e>>2],r[n+20>>2]=s,e=n+56|0;(0|(s=r[n+24>>2]))!=r[n+28>>2];)r[n+24>>2]=s+1,s=o[0|s],r[n+52>>2]=r[1049140+((15&s)<<2)>>2],r[n+48>>2]=r[1049140+(s>>>2&60)>>2],j(n+32|0,n+48|0,e),r[e>>2]=r[n+40>>2],s=r[n+36>>2],r[n+48>>2]=r[n+32>>2],r[n+52>>2]=s,oe(n+8|0,n+48|0),se(t,r[n+8>>2],r[n+12>>2]),te(n+48|0);N(n+16|0),d=n- -64|0}(n,e),d=n+16|0}(n+32|0,n+48|0),r[e+8>>2]=r[t>>2],t=r[n+36>>2],r[e>>2]=r[n+32>>2],r[e+4>>2]=t}d=n- -64|0}(e,n+32|0),d=n+48|0}(e,n+8|0)):r[e>>2]=0,d=n+176|0}(n+8|0,t),r[n+8>>2]||(x(1048972,57,n+24|0,1049072),u()),t=r[n+12>>2],r[e>>2]=r[n+8>>2],r[e+4>>2]=t,r[e+8>>2]=r[n+16>>2],d=n+32|0}(e,i+8|0),d=i+16|0}(i+32|0,t=r[i+24>>2],n=r[i+28>>2]),n&&_(t),r[(t=i+56|0)>>2]=r[i+40>>2],n=r[i+36>>2],r[i+48>>2]=r[i+32>>2],r[i+52>>2]=n,oe(i+16|0,i+48|0),r[i+72>>2]=r[t>>2],t=r[i+52>>2],r[i+64>>2]=r[i+48>>2],r[i+68>>2]=t,$(i+8|0,i- -64|0),t=r[i+12>>2],r[e>>2]=r[i+8>>2],r[e+4>>2]=t,d=i+80|0},setSalt:function(e,t){var n;d=n=d-48|0,Z(n+8|0,e|=0,t|=0),e=r[n+12>>2],ie(n+16|0,r[n+8>>2],e,e),r[n+40>>2]=r[n+24>>2],e=r[n+20>>2],r[n+32>>2]=r[n+16>>2],r[n+36>>2]=e,function(e){var t,n;d=t=d-16|0,r[t+8>>2]=r[e+8>>2],n=r[e+4>>2],r[t>>2]=r[e>>2],r[t+4>>2]=n,function(e){var t,n;d=t=d-32|0,r[t+16>>2]=r[e+8>>2],n=r[e+4>>2],r[t+8>>2]=r[e>>2],r[t+12>>2]=n,function(e){var t,n,i=0,o=0;return d=n=d-32|0,(t=0|Te[r[262284]]())?(r[(i=n+16|0)>>2]=r[e+8>>2],o=r[e+4>>2],r[n+8>>2]=r[e>>2],r[n+12>>2]=o,r[t>>2]&&(x(1049029,16,n+24|0,1049104),u()),r[t>>2]=-1,te(t+4|0),r[t+12>>2]=r[i>>2],e=r[n+12>>2],r[t+4>>2]=r[n+8>>2],r[t+8>>2]=e,r[t>>2]=r[t>>2]+1,e=0):(te(e),e=1),d=n+32|0,e}(t+8|0)&&(x(1048972,57,t+24|0,1049072),u()),d=t+32|0}(t),d=t+16|0}(n+32|0),d=n+48|0},main:ye,__wbindgen_malloc:function(e){if(!((e|=0)>>>0>4294967292)){if(!e)return 4;if(e=ce(e,(e>>>0<4294967293)<<2))return 0|e}u()},__wbindgen_realloc:function(e,t,n){if(e|=0,!((t|=0)>>>0>4294967292)&&(e=re(e,t,4,n|=0)))return 0|e;u()},__wbindgen_free:function(e,t){(t|=0)&&_(e|=0)},__wbindgen_start:ye}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},{abort:function(){throw new Error("abort")}},l),h=d.memory,p=d.sha1,f=d.setSalt,g=d.main,_=d.__wbindgen_malloc,m=d.__wbindgen_realloc,y=d.__wbindgen_free,v=d.__wbindgen_start},function(e,t,n){function i(){}function r(){}n.r(t),i.prototype.encode=function(e){for(var t=[],n=e.length,i=0;i<n;){var r=e.codePointAt(i),o=0,a=0;for(r<=127?(o=0,a=0):r<=2047?(o=6,a=192):r<=65535?(o=12,a=224):r<=2097151&&(o=18,a=240),t.push(a|r>>o),o-=6;o>=0;)t.push(128|r>>o&63),o-=6;i+=r>=65536?2:1}return t},r.prototype.decode=function(e){if(void 0===e)return"";for(var t="",n=0;n<e.length;){var i=e[n],r=0,o=0;if(i<=127?(r=0,o=255&i):i<=223?(r=1,o=31&i):i<=239?(r=2,o=15&i):i<=244&&(r=3,o=7&i),e.length-n-r>0)for(var a=0;a<r;)o=o<<6|63&(i=e[n+a+1]),a+=1;else o=65533,r=e.length-n;t+=String.fromCodePoint(o),n+=r+1}return t},n.d(t,"sha1",(function(){return p})),n.d(t,"setSalt",(function(){return f})),n.d(t,"main",(function(){return g})),n.d(t,"memory",(function(){return m}));var o=0,a=new i("utf-8"),s="function"==typeof a.encodeInto?function(e,t){return a.encodeInto(e,t)}:function(e,t){var n=a.encode(e);return t.set(n),{read:e.length,written:n.length}},c=null;function l(){return null!==c&&c.buffer===_.memory.buffer||(c=new Uint8Array(_.memory.buffer)),c}function u(e){for(var t=e.length,n=_.__wbindgen_malloc(t),i=l(),r=0;r<t;r++){var a=e.charCodeAt(r);if(a>127)break;i[n+r]=a}if(r!==t){0!==r&&(e=e.slice(r)),n=_.__wbindgen_realloc(n,t,t=r+3*e.length);var c=l().subarray(n+r,n+t);r+=s(e,c).written}return o=r,n}var d=null,h=new r("utf-8",{ignoreBOM:!0,fatal:!0});function p(e){_.sha1(8,u(e),o);var t,n,i=(null!==d&&d.buffer===_.memory.buffer||(d=new Int32Array(_.memory.buffer)),d),r=(t=i[2],n=i[3],h.decode(l().subarray(t,t+n))).slice();return _.__wbindgen_free(i[2],1*i[3]),r}function f(e){_.setSalt(u(e),o)}function g(){_.main()}h.decode();var _=n(0),m=_.memory;_.__wbindgen_start()}])}();(()=>{const e=(({bits:e,PRNG:t=S})=>{const n=T(e/16);let i="";for(let e=0;e<n;++e)i+="0123456789abcdef"[T(16*t())];return i})({bits:256});C.setSalt(e)})();const I=e=>E.i[e];let x=0;const D=(e,t)=>{const n=h()({},t);if(void 0!==n.apiSignature)return n;if(void 0===I(e))return n;const i=w({apiName:e,args:n,argsList:E.i[e],seq:x});return n.apiSignature=C.sha1(i),n.apiSigningSeq=x,n.apiSignature,x+=1,n},O=0,P=1,R=2,k=3,N={[P]:"sign error",[R]:"sign seq error",[k]:"sign missing"},M=new Set,L=Function.prototype.call,B=L.bind(Set.prototype.has),F=L.bind(Set.prototype.add);function U(e,t,n,i){const r=`api sign failed: ${N[e]}; apiName: ${t}; args: ${JSON.stringify(n)}; signature: ${i}`;throw new Error(r)}const W=Object.create(null);function j(){return{invoke(e,t,n,i){if(((e,t)=>{if(void 0===I(e))return O;null!==t.apiSigningSeq&&void 0!==t.apiSigningSeq&&null!==t.apiSignature&&void 0!==t.apiSignature||U(k,e,t,"not checked"),t.apiSigningSeq=parseInt(t.apiSigningSeq,10),B(M,t.apiSigningSeq)&&U(R,e,t,"not checked"),F(M,t.apiSigningSeq);const n=w({apiName:e,args:t,argsList:E.i[e],seq:t.apiSigningSeq}),i=C.sha1(n);i!==t.apiSignature&&U(P,e,t,i)})(e,t),void 0===t.pluginId)return WeixinJSBridge.invoke(e,t,n,i);if(r()){const r=s(e,t);return WeixinJSBridge.invoke(e,r,n,i)}return function(e,t,n){delete t.permissionBytes,void 0===t.pluginId&&n(t),u(t.pluginId,e,(e=>{t.permissionBytes=e,t.privateData=JSON.stringify({pluginId:t.pluginId}),n(t)}))}(t,(t=>{WeixinJSBridge.invoke(e,t,n,i)}))},on:(e,t)=>W[e]instanceof Array?(W[e].push(t),null):(W[e]=null,WeixinJSBridge.on(e,t)),publish:(e,t,n)=>WeixinJSBridge.publish(e,t,n),subscribe:(e,t)=>WeixinJSBridge.subscribe(e,t)}}let G=!1;const V=[],H=function(e){V.push(e),G||(this.bridge.on("onSubPackageReady",(e=>{V.forEach((t=>{"function"==typeof t&&t(void 0,e)}))})),G=!0)};function z(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}const Z=(e,{stringify:t=JSON.stringify,parse:n=JSON.parse,arrayBufferProto:i=ArrayBuffer.prototype}={})=>{if(!e)return e;const r=typeof e;if("function"===r)throw new Error("[Safeway] not allow to pass function.");if("object"!==r)return e.valueOf();const o=Object.keys(e),a={};for(let t=0;t<o.length;t++){const n=o[t],r=e[n];void 0!==r&&"ArrayBuffer"===z(r)&&void 0!==r.byteLength&&(Object.setPrototypeOf(r,i),a[n]=r)}let s;try{s=n(t(e))}catch(e){throw new Error(`[Safeway] data clone error ${e.toString()}`)}const c=Object.keys(a);for(let e=0;e<c.length;e++){const t=c[e];s[t]=a[t]}return s};function Y(e,t){return function(...n){const i=[];for(let t=0;t<n.length;t++)i[t]=Z(n[t],{parse:e.contextGlobal.jsonParse,stringify:e.contextGlobal.jsonStringify,arrayBufferProto:e.contextGlobal.arrayBufferProto});t.apply(this,i)}}function $(e,t,{cloneArgs:n=!0}={}){return function(...i){const r=[];for(let t=0;t<i.length;t++)"function"==typeof i[t]?r[t]=new Y(e,i[t]):r[t]=n?Z(i[t],{parse:JSON.parse,stringify:JSON.stringify,arrayBufferProto:ArrayBuffer.prototype}):i[t];const o=t.apply(this,r);return Z(o,{parse:e.contextGlobal.jsonParse,stringify:e.contextGlobal.jsonStringify,arrayBufferProto:e.contextGlobal.arrayBufferProto})}}function q(e,t,n,i=!0){const r=Object.keys(e);for(let o=0;o<r.length;o++){const a=r[o],s=e[a];if("function"!=typeof s)throw new Error(`Export value of Safeway must be a function, key ${a} func ${typeof s}`);n&&void 0!==__subContextEngine__&&__subContextEngine__.isIsolateContext()?t[a]=new $(n,s,{cloneArgs:i}):t[a]=s}}function Q(e){const t=j(),n={create:(e,t)=>WeixinWorker.create(e,t),onWorkerMsg:e=>WeixinWorker.onWorkerMsg(e),postMsgToWorker:(e,t,n)=>WeixinWorker.postMsgToWorker(e,t,n),terminate:e=>WeixinWorker.terminate(e)},i={makeApiSign:D},r={ifIs:c,ifIsNot:l};q(t,t,e,{cloneArgs:!1}),q(n,n,e),q(r,r,e),this.bridge=t,this.worker=n,this.apiSign=i,this.pluginPermissionBytes=r;q({onSubpackageReady:H},this,e)}const J=class{constructor(e){Q.call(this,e)}static splitOnBridgeListener(e){return function(e){return null===W[e]?(console.error("`splitOnBridgeListener` should be called before any listeners attached to it. Ignored."),null):(W[e]=[],WeixinJSBridge.on(e,((...t)=>{const n=W[e];for(const e of n)if(!1===e(...t))break})),t=>{W[e].unshift(t)})}(e)}}},t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},n={};e(0,n,t),Safeway=n.default})();var __safeway__=new Safeway,__sclEngine__,__errorTracer__,Reporter;(()=>{var e={821:(e,t,n)=>{"use strict";n.r(t),n.d(t,{exparser:()=>o,onThemeChange:()=>m,onViewportResize:()=>y,timestamp:()=>A,timestampMs:()=>b,getEngineConfig:()=>w,getWindowWidth:()=>E,getWindowHeight:()=>T,getTheme:()=>S,getDevicePixelRatio:()=>C,getSafeArea:()=>I,invoke:()=>x,subscribe:()=>D,timeoutCallback:()=>O});var i=n(995),r=n(404);i.globalOptions.publicProperties=!0,i.globalOptions.renderingMode="full",i.globalOptions.classPrefix="",i.globalOptions.templateEngine=r.GlassEaselTemplate;const o=i,a=WeixinJSBridge,s=[],c=[];let l=0,u=0,d=0,h=null,p=null;const f={};["onViewDidResize","onAppRouteResized","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onTextViewDrag","onImageViewLoad","onScrollViewScroll","onThemeChange"].forEach((e=>{f[e]=Safeway.splitOnBridgeListener(e)}));const g=e=>e?{left:e.left,top:e.top,right:Math.max(l-e.right,0),bottom:Math.max(u-e.bottom,0)}:e,_=e=>{l=e.size.framesetWidth||e.size.screenWidth,u=e.size.framesetHeight||e.size.screenHeight,a.invoke("getSystemInfo",{},(e=>{p=g(e.safeArea),s.forEach((t=>{t(e)}))}))};f.onViewDidResize(_),f.onAppRouteResized(_),f.onThemeChange((e=>{h!==e.theme&&n.g.__wxConfig.darkmode&&(h=e.theme,i.triggerRender((()=>{c.forEach((e=>e({theme:h})))})))}));const m=function(e){c.push(e)},y=function(e){s.push(e)},v=function(){d&&l&&u||a.invoke("getSystemInfo",{},(e=>{d=e.pixelRatio,l&&u||(l=e.framesetWidth||e.screenWidth,u=e.framesetHeight||e.screenHeight),p=g(e.safeArea)}))},A=function(){return Math.floor(Date.now()/1e3)},b=function(){return Date.now()%1e3},w=function(){return{relativeToParentContent:!1}},E=function(){return v(),l},T=function(){return v(),u},S=function(){return function(){if(!h){const e=n.g.__wxConfig,{darkmode:t}=e;h=t?e.theme:"light"}}(),h||"light"},C=function(){return d},I=function(){return p},x=function(e,t,n){a.invoke(e,t,(e=>{n&&n.exec(e)}))},D=function(e,t){f[e]((e=>{if(!t)return;return t.exec(e)}))},O=function(e,t){t&&setTimeout((e=>{t.exec(e)}),e)}},57:(e,t,n)=>{"use strict";n.d(t,{W:()=>i,J:()=>r});const i=[],r=[]},404:(e,t,n)=>{e.exports=(()=>{"use strict";var e={674:(e,t,i)=>{i.r(t),i.d(t,{GlassEaselTemplate:()=>S});var r,o=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];if(!0===n)return!0;if(!n)continue;if(o(n))return!0}return!1},a=function(e,t,i,r,a,s,c){if("object"==typeof e){var l=[],u=function(e,t){var i=e;return n(995).safeCallback("Template Function",i,null,t)},d=function(n){if(void 0===l[n]){var r=(0,e.I[n])(t,i,d,u);l[n]=void 0===r?null:r}return l[n]},h=!0===r||e.L(r,a,d);if(c||!0===h||h&&o(h)){var p=e.F(t,i,d,u),f=null;if(e.M){var g=e.M;f=[];for(var _=0;_<g.length;_+=1){var m=g[_];if("number"==typeof m)if(0===_){if(!s[m]){f=null;break}f.push.apply(f,s[m])}else{var y=d(m);f.push("number"==typeof y?y:y.toString())}else f.push(m)}}return[p,h,f]}}else if(c)return[e,void 0,null];return null},s=function(e,t,i,r){if("object"==typeof e){var o=[],a=function(e,t){var i=e;return n(995).safeCallback("Template Function",i,null,t)},s=function(n){if(void 0===o[n]){var r=(0,e.I[n])(t,i,s,a);o[n]=void 0===r?null:r}return o[n]},c=e.F(t,i,s,a),l=null;if(e.M){var u=e.M;l=[];for(var d=0;d<u.length;d+=1){var h=u[d];if("number"==typeof h)if(0===d){if(!r[h]){l=null;break}l.push.apply(l,r[h])}else{var p=s(h);l.push("number"==typeof p?p:p.toString())}else l.push(h)}}return[c,l]}return[e,null]},c=function(e){return null==e?"":e.toString()};!function(e){e[e.ATTR=0]="ATTR"}(r||(r={}));var l,u=function(e){return e.indexOf("-")<=0?e:e.replace(/-[a-z]/g,(function(e){return e[1].toUpperCase()}))},d=function(e,t,i,o,a,s,l){var d=n(995),h=d.dataUtils.deepCopy(i);if(e instanceof d.VirtualNode&&"slot"===e.is&&"name"===t)return d.Element.setSlotName(e,c(h)),!1;if("id"===t)return e.id=c(h),!1;if("slot"===t)return e.slot=c(h),!1;if("class"===t){if(s)e.hasExternalClass("class")?e.setExternalClass("class",c(h)):e.class=c(h);else e.class=c(h);return!1}if(s){var p=u(t);if(d.Component.hasPublicProperty(e,p))return a.scheduleReplace([p],h,null),!0;if("model:"===t.slice(0,6)){o||console.warn('Cannot apply reverse binding to property "'+t+'" because the binding expression is not a valid lvalue');var f=p.slice(6);if(d.Component.hasPublicProperty(e,f))return a.scheduleReplace([f],h,null),l.push([f,o]),!0}}if("style"===t)return e.setNodeStyle(c(h),r.ATTR),!1;if(/^data:/.test(t)){var g=t.slice(5);return e.dataset[g]=h,!1}if(/^data-/.test(t)){g=u(t.slice(5).toLowerCase());return e.dataset[g]=h,!1}var _=/^(capture-)?(mut-)?(bind|catch):?(.+)$/.exec(t);if(_){var m=c(h);return e.addListener(_[4],(function(t){var n,i=e.ownerShadowRoot.getHostNode();if("object"==typeof i){var r=d.Element.getMethodCaller(i)||i,o=r[m];"function"==typeof o&&(n=o.call(r,t))}return n})),!1}return/^mark:/.test(t)?(e.setMark(t.slice(5),h),!1):s&&e.hasExternalClass(t)?(e.setExternalClass(t,c(h)),!1):e instanceof d.NativeNode&&("boolean"==typeof h?!0===h?e.setAttribute(t,""):e.removeAttribute(t):e.setAttribute(t,c(h)),!1)},h=function(e,t,i,r,o,c,l){var u;e.dataset=e.dataset||{};var h=!1,p=[],f=n(995),g=e instanceof f.Component,_=g?f.Component.getDataProxy(e):null;for(var m in t)if(Object.prototype.hasOwnProperty.call(t,m)){var y=t[m],v=void 0,A=null;if(l){var b=a(y,i,r,c,l,o,!1);if(!b)continue;v=b[0],A=b[2]}else v=(u=s(y,i,r,o))[0],A=u[1];d(e,m,v,A,_,g,p)&&(h=!0)}if(h&&_.doUpdates(null,!0),g)for(var w=function(t){var n=p[t],i=n[0],r=n[1];e.setPropertyChangeListener(i,(function(t){var n=e.ownerShadowRoot.getHostNode(),i=f.Component.getDataProxy(n);i.scheduleReplace(r,t,null),i.doUpdates(null,!1)}))},E=0;E<p.length;E+=1)w(E)},p=function(e,t,i,r){e.dataset=e.dataset||{};var o=[],a=n(995),c=e instanceof a.Component,l=c?a.Component.getDataProxy(e):null,u=s(i,r,null,null),h=u[0],p=u[1];if(d(e,t,h,p,l,c,o)&&l.doUpdates(null,!0),c)for(var f=function(t){var n=o[t],i=n[0],r=n[1];e.setPropertyChangeListener(i,(function(t){var n=e.ownerShadowRoot.getHostNode(),i=a.Component.getDataProxy(n);i.scheduleReplace(r,t,null),i.doUpdates(null,!1)}))},g=0;g<o.length;g+=1)f(g)},f=function(e,t,n){for(var i=function(e){for(var t={},n=0;n<e.length;n+=1){var i=e[n];i?Object.prototype.hasOwnProperty.call(t,i)?e[n]=void 0:t[c(i)]=n:Number.isNaN(i)&&(e[n]=void 0)}return t}(e),r=function(e){for(var t={},n=[],i=0;i<e.length;i+=1){var r=e[i];r?Object.prototype.hasOwnProperty.call(t,r)?(e[i]=void 0,n.push(i)):t[c(r)]=i:(Number.isNaN(r)&&(e[i]=void 0),n.push(i))}return[t,n]}(t),o=r[0],a=r[1],s=[],l=new Array(e.length),u=new Array(e.length),d=[],h=[],p=0,f=0,g=0;g<e.length;g+=1){var _=e[g];if(_)if(Object.prototype.hasOwnProperty.call(o,_)){var m=o[c(_)];s.push(t[m]),l[g]=n[m],u[g]=g!==m}else d.push(g-f),f+=1,s.push(null),l[g]=null;else if(p<a.length){m=a[p];s.push(t[m]),l[g]=n[m],p+=1,u[g]=g!==m}else d.push(g-f),f+=1,s.push(null),l[g]=null}for(var y=0,v=[],A=0;A<t.length;){for(var b=t[A],w=s[y];null===w;)w=s[y+=1];y>=s.length?(h.push({oldIndex:i[c(b)],index:A,pos:-1}),y+=1,A+=1):w===b?(v.push(y),y+=1,A+=1):b?(w?o[c(w)]===A+1?h.push({oldIndex:i[c(b)],index:A,pos:y}):(w=s[y+=1])===b?(v.push(y),y+=1):(y-=1,h.push({oldIndex:i[c(b)],index:A,pos:y})):h.push({oldIndex:i[c(b)],index:A,pos:y}),A+=1):y+=1}var E=0;for(g=0;g<h.length;g+=1){var T=h[g].pos;if(-1===T)break;for(;E<v.length&&T>v[E];)E+=1;E>=v.length?h[g].pos=-1:h[g].pos=v[E]}return{children:l,indexChanged:u,removes:d,inserts:h}};!function(e){e[e.PURE=0]="PURE",e[e.IF=1]="IF",e[e.FOR=2]="FOR",e[e.TEMPLATE_IS=3]="TEMPLATE_IS",e[e.SHADOW_ROOT=4]="SHADOW_ROOT",e[e.SLOT=5]="SLOT",e[e.INCLUDE=6]="INCLUDE",e[e.BLOCK_SLOT=7]="BLOCK_SLOT"}(l||(l={}));var g=function(e,t,n,i,r,o,a){if(n)for(var l=0;l<n.length;l+=1){var u=n[l];if(null!=u)if(void 0===u.S){var d=_(e,u,i,r,o,null,a);t.appendChild(d)}else{var h=s(u.S,i,r,o)[0];d=a.createTextNode(c(h));t.appendChild(d)}}},_=function(e,t,i,r,o,a,u){var d=null;if(void 0!==t.V){var p=t;if(p.V===l.IF){var f="wx:if",_=u.createVirtualNode(f);_.__templateArgs={},(N=n(995)).Element.setInheritSlots(_);for(var m=p.B,y=0;y<m.length;y+=1){var v=m[y];if(s(v.B,i,r,o)[0]){g(e,_,v.C,i,r,o,u),_.__templateArgs.key=y;break}}return _}if(p.V===l.FOR){f="wx:for";var A=u.createVirtualNode(f);A.__templateArgs={},(N=n(995)).Element.setInheritSlots(A);var b=A.__templateArgs.keyList=[],w=p.K,E=function(t,n,a){"*this"===w?b.push(t):b.push(null==t?void 0:t[w]);var s=u.createVirtualNode("wx:for-item");N.Element.setInheritSlots(s),r.push(t),r.push(n),o.push(a),o.push(null),g(e,s,p.C,i,r,o,u),o.pop(),o.pop(),r.pop(),r.pop(),A.appendChild(s)},T=s(p.L,i,r,o),S=T[0],C=T[1];if(S instanceof Array)for(y=0;y<S.length;y+=1)C&&C.push(y),E(S[y],y,C),C&&C.pop();else if("object"==typeof S)for(var I in S)Object.prototype.hasOwnProperty.call(S,I)&&(C&&C.push(I),E(S[I],I,C),C&&C.pop());else if("string"==typeof S)for(y=0;y<S.length;y+=1)C&&C.push(y),E(S[y],y,C),C&&C.pop();else if("number"==typeof S)for(y=0;y<S;y+=1)C&&C.push(y),E(y,y,C),C&&C.pop();return A}if(p.V===l.TEMPLATE_IS){var x=u.createVirtualNode("template");x.__templateArgs={},(N=n(995)).Element.setInheritSlots(x);var D=s(p.N,i,r,o)[0],O=x.__templateArgs.key=c(D),P=e(O);if(P){var R=s(p.D,i,r,o)[0];g(e,x,P.C,R,[],[],u)}return x}if(p.V===l.INCLUDE){var k=u.createVirtualNode("include");return(N=n(995)).Element.setInheritSlots(k),k}if(p.V===l.SHADOW_ROOT){var N=n(995);d=u=N.ShadowRoot.create(a)}else if(p.V===l.SLOT){var M=d=u.createVirtualNode("slot"),L=s(p.N,i,r,o)[0];(N=n(995)).Element.setSlotName(M,c(L))}else if(p.V===l.BLOCK_SLOT){M=d=u.createVirtualNode("virtual");var B=s(p.N,i,r,o)[0];M.slot=c(B)}else if(p.V===l.PURE){M=d=u.createVirtualNode("virtual");(N=n(995)).Element.setInheritSlots(M)}}else{var F=(U=t).T;d=u.tagNameUsed(F)||F.indexOf("-")>=0?u.createComponent(F,void 0,U.G):u.createNativeNode(F)}if(d instanceof(N=n(995)).Element){var U,W=t.SD;if(void 0!==W){d.__templateArgs||(d.__templateArgs={});var j=s(W,i,r,o)[0];d.__templateArgs.scopeData=j}if((U=t).EA)for(var G in U.EA)d.setAttribute(G,U.EA[G]);var V=U.A;V&&h(d,V,i,r,o);var H=t.C;H&&g(e,d,H,i,r,o,u)}return d},m=function(e,t,n,i,r,o,s,l,u){if(n)for(var d=0;d<n.length;d+=1){var h=n[d];if(null!=h)if(void 0===h.S)y(e.childNodes[d],t,h,i,r,o,s,l,u);else{var p=a(h.S,i,r,o,s,l,!1);if(p){var f=p[0];e.childNodes[d].textContent=c(f)}}}},y=function(e,t,i,r,o,s,u,d,p){if(void 0!==i.V){var v=i;if(v.V===l.IF){for(var A=function(i,a){var s=p.createVirtualNode("wx:if");s.__templateArgs={},n(995).Element.setInheritSlots(s),s.__templateArgs.key=i,a&&g(t,s,a,r,o,d,p),e.parentNode.replaceChild(s,e)},b=v.B,w=0;w<b.length;w+=1){var E=b[w];if(a(E.B,r,o,s,u,d,!0)[0])return void(e.__templateArgs.key===w?y(e,t,E,r,o,s,u,d,p):A(w,E.C))}return void(-1!==e.__templateArgs.key&&A(-1))}if(v.V===l.FOR){var T=e.__templateArgs.keyList,S=e.__templateArgs.keyList=[],C=v.K,I=function(e){"*this"===C?S.push(e):S.push(null==e?void 0:e[C])},x=function(e,n,i,a,c,l){o.push(e),o.push(n),u.push(i),u.push(!!c||void 0),d.push(a),d.push(null);var h=v.C;m(l,t,h,r,o,s,u,d,p),d.pop(),d.pop(),u.pop(),u.pop(),o.pop(),o.pop()},D=a(v.L,r,o,s,u,d,!0),O=D[0],P=D[1],R=D[2],k=!1,N=[];if(O instanceof Array)for(w=0;w<O.length;w+=1)I(O[w]),N.push({item:O[w],index:w});else if("object"==typeof O)for(var M in k=!0,O)I(O[M]),N.push({item:O[M],index:M});else if("string"==typeof O)for(w=0;w<O.length;w+=1)I(O[w]),N.push({item:O[w],index:w});else if("number"==typeof O)for(w=0;w<O;w+=1)I(w),N.push({item:w,index:w});var L=f(T,S,N),B=L.children,F=L.indexChanged,U=L.inserts,W=L.removes;for(w=0;w<B.length;w+=1){var j=B[w];if(j){var G=void 0;!0===P?G=!0:P&&(G=P[j.index]),R&&R.push(j.index),x(j.item,j.index,G,R,k||F[w],e.childNodes[w]),R&&R.pop()}}return void function(e,t,n,i,r,o){for(var a=n.childNodes,s=[],c=0;c<t.length;c+=1){var l=t[c];s.push({node:void 0!==l.oldIndex?a[l.oldIndex]:null,before:l.pos>=0?a[l.pos]:void 0,index:l.index})}for(c=0;c<e.length;c+=1){var u=a[p=e[c]];n.removeChild(u)}for(c=0;c<s.length;c+=1){var d=s[c],h=d.before,p=d.index;if(null===(u=s[c].node)){var f=i[p],g=f.item,_=f.index;r&&r.push(_),u=o(g,_,r),r&&r.pop()}n.insertBefore(u,h)}}(W,U,e,N,R,(function(e,i,a){var s=p.createVirtualNode("wx:for-item");return n(995).Element.setInheritSlots(s),o.push(e),o.push(i),d.push(a),d.push(null),g(t,s,v.C,r,o,d,p),d.pop(),d.pop(),o.pop(),o.pop(),s}))}if(v.V===l.TEMPLATE_IS){if((q=a(v.N,r,o,s,u,d,!1))&&e.__templateArgs.key!==q[0]){var V=_(t,v,r,o,d,null,p);e.parentNode.replaceChild(V,e)}else{var H=e.__templateArgs.key,z=t(H),Z=a(v.D,r,o,s,u,d,!0),Y=Z[0],$=Z[1];m(e,t,z.C,Y,[],$,[],[],p)}return}if(v.V===l.SLOT){if(q=a(v.N,r,o,s,u,d,!1))(Q=n(995)).Element.setSlotName(e,c(q[0]))}else{if(v.V===l.INCLUDE)return;var q;v.V===l.BLOCK_SLOT&&(q=a(v.N,r,o,s,u,d,!1))&&(e.slot=c(q[0]))}}var Q=n(995);if(e instanceof Q.Element){var J=i.A;J&&h(e,J,r,o,d,s,u),(B=i.C)&&m(e,t,B,r,o,s,u,d,p)}},v=function(){return{P:"",C:[{V:l.SLOT,N:"",C:[]}]}},A=function(){function e(e,t,i,r){if(this.data=t,this.innerData=i,"string"==typeof e.template){var o=n(995);this.genObjectGroup=o.precompileTemplate(e.template).content[""]}else{var a=e.template||{content:v};this.genObjectGroup=a.content}this.updateMode=""}return e.create=function(t,n,i,r){return new e(t,n,i,r)},e.prototype.createInstance=function(e,t){var i=new b;i.template=this;var r=i.template.genObjectGroup("");i.genObject={V:l.SHADOW_ROOT,C:r.C},i.bindingMap=r.BM;var o=n(995);i.data=o.dataUtils.deepCopy(this.data),i.idMap=Object.create(null);var a=Object.create(null);a[""]=null;var s=w(e,i.genObject,i.data,i.idMap,a);if(null===a[""]&&s.childNodes.length>0){var c=document.createElement("virtual");s.appendChild(c),a[""]=c}return i.shadowRoot=s,i.slots=a,i.listeners=[],i},e}(),b=function(){function e(){}return e.prototype.updateValues=function(e,t,n,i,r,o){if(!this.bindingMapInstance){var a={};for(var l in this.bindingMap)if(Object.prototype.hasOwnProperty.call(this.bindingMap,l)){for(var u=this.bindingMap[l],d=new Array(u.length),h=0;h<u.length;h+=1){for(var p=u[h],f=e.shadowRoot,g=this.genObject,_=null,m=0;m<p.length;m+=1){var y=p[m];if("number"!=typeof y){_=y;break}f=f.childNodes[y],g=g.C[y]}var v=null===_?g.S:g.A[_];_&&("id"===_||_.indexOf(":")>=0)?d[h]=[f,"illegal-update:"+_,v]:d[h]=[f,_,v]}a[l]=d}this.bindingMapInstance=a}var A=this.bindingMapInstance;for(h=0;h<n.length;h+=1){var b=A[n[h][0]];if(void 0!==b)for(m=0;m<b.length;m+=1){var w=b[m],E=w[0],T=(_=w[1],v=w[2],s(v,t,null,null)[0]);null!==_?"boolean"==typeof T?!0===T?E.setAttribute(_,""):E.removeAttribute(_):E.setAttribute(_,c(T)):E.textContent=c(T)}}},e}(),w=function(e,t,i,r,o){var a,u=!1;if(void 0!==t.V){var d=t;if(d.V===l.SHADOW_ROOT&&(a=document.createDocumentFragment(),u=!0),d.V===l.SLOT)return o[""]=document.createElement("virtual")}else{var h=t,p=h.T;a=document.createElement(p);var f=h.A,g=function(t){if(!Object.prototype.hasOwnProperty.call(f,t))return"continue";var o=f[t],l=s(o,i,null,null)[0];if("id"===t)r[c(l)]=a;else{var u=t.split(":",2),d=u[0],h=u[1];if(h){if("bind"===d){var p=c(l);n(995).addListenerToElement(a,h,(function(t){var n;if("object"==typeof e){var i=e[p];"function"==typeof i&&(n=i.call(e,t))}return n}))}}else"boolean"==typeof l?!0===l?a.setAttribute(t,""):a.removeAttribute(t):a.setAttribute(d,c(l))}};for(var _ in f)g(_)}var m=t.C;if(1===m.length&&m[0].V===l.SLOT)u||(o[""]=a);else for(var y=0;y<m.length;y+=1){var v=m[y];if(void 0===v.S){var A=w(e,v,i,r,o);a.appendChild(A)}else{var b=s(v.S,i,null,null)[0];A=document.createTextNode(c(b));a.appendChild(A)}}return a},E=function(){return{P:"",C:[{V:l.SLOT,N:"",C:[]}]}},T=function(e,t,i){for(var r=e.childNodes,o=0;o<r.length;o+=1){var a=r[o];a instanceof n(995).Element&&(a.__id&&(t[a.__id]=a),void 0!==a.__slotName&&(i[a.__slotName]=a),T(a,t,i))}},S=function(){function e(e,t,i,r){if(this.data=t,this.innerData=i,"string"==typeof e.template){var o=n(995);this.genObjectGroup=o.precompileTemplate(e.template).content[""],this.updateMode=""}else{var a=e.template||{content:E};this.genObjectGroup=a.content,this.updateMode=a.updateMode||""}}return e.create=function(t,n,i,r){return"native"===r.renderingMode?new A(t,n,i,r):new e(t,n,i,r)},e.prototype.createInstance=function(e,t){var i=new C;i.template=this;var r=i.template.genObjectGroup("");i.genObject={V:l.SHADOW_ROOT,C:r.C},""!==this.updateMode&&"bindingMap"!==this.updateMode||(i.bindingMap=r.BM,"bindingMap"===this.updateMode&&(i.forceBindingMapUpdate=!0));var o=n(995);return i.data=o.dataUtils.deepCopy(this.data),i.idMap=Object.create(null),i.slots=Object.create(null),i.shadowRoot=_(i.template.genObjectGroup,i.genObject,this.innerData,[],[],e,null),T(i.shadowRoot,i.idMap,i.slots),i.listeners=[],i},e}(),C=function(){function e(){}return e.prototype.updateValues=function(e,t,n,i,r,o){if(this.forceBindingMapUpdate)this.tryBindingMapUpdate(e,t,n);else if(!(n.length<=1&&this.bindingMap&&this.tryBindingMapUpdate(e,t,n))){for(var a=Object.create(null),s=0;s<n.length;s+=1)for(var c=n[s],l=a,u=0;u<c.length;u+=1){var d=c[u];if(!0===l[d])break;if(u===c.length-1){l[d]=!0;break}l[d]||(l[d]=Object.create(null)),l=l[d]}y(this.shadowRoot,this.template.genObjectGroup,this.genObject,t,[],a,[],[],e.shadowRoot)}},e.prototype.tryBindingMapUpdate=function(e,t,n){if(!this.bindingMapInstance){var i={};for(var r in this.bindingMap)if(Object.prototype.hasOwnProperty.call(this.bindingMap,r)){for(var o=this.bindingMap[r],a=new Array(o.length),l=0;l<o.length;l+=1){for(var u=o[l],d=e.shadowRoot,h=this.genObject,f=null,g=0;g<u.length;g+=1){var _=u[g];if("number"!=typeof _){f=_;break}d=d.childNodes[_],h=h.C[_]}var m=null===f?h.S:h.A[f];a[l]=[d,f,m]}i[r]=a}this.bindingMapInstance=i}var y=this.bindingMapInstance;for(l=0;l<n.length;l+=1){if(1!==(v=n[l]).length)return!1;if(void 0===(A=y[v[0]]))return!1}for(l=0;l<n.length;l+=1){var v,A=y[(v=n[l])[0]];for(g=0;g<A.length;g+=1){var b=A[g],w=b[0];f=b[1],m=b[2];if(null!==f)p(w,f,m,t);else{var E=s(m,t,null,null)[0];w.textContent=c(E)}}}return!0},e}()}},t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}return i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(674)})()},995:e=>{var t=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,n,i){var r=i(1),o=i(3),a=i(5),s=i(6),c=i(7),l=i(8),u=i(9),d=i(15),h=i(12),p=i(17),f=i(18),g=i(19),_=i(16),m=i(10),y=i(20),v=i(14),A=i(21),b=i(4),w=i(13),E=i(22);n.FreeTmpl=E,n.precompileTemplate=E.precompiler?E.precompiler.compile:null,n.precompiler=E.precompiler?E.precompiler:null,n.HtmlLLParser=E.htmlParser?E.htmlParser:null,n.LLParser=r,n.dataPath=c,n.dataUtils=a,n.Event=s,n.Element=u,n.TextNode=h,n.NativeNode=p,n.VirtualNode=f,n.ShadowRoot=g,n.Behavior=l,n.Component=d,n.Observer=m,n.DataGroup=_,n.ElementIterator=y,n.FakeDomElement=v,n.registerBehavior=l.create,n.registerElement=d.register,n.createElement=d.create,n.createTextNode=h.create,n.createVirtualNode=f.create,n.appendChild=u.appendChild,n.insertBefore=u.insertBefore,n.removeChild=u.removeChild,n.replaceChild=u.replaceChild,n.addListenerToElement=s.addListenerToElement,n.removeListenerFromElement=s.removeListenerFromElement,n.triggerEvent=s.triggerEvent,n.triggerRender=A.triggerRender,n.safeCallback=o.safeCallback,n.addGlobalErrorListener=o.addGlobalErrorListener,n.removeGlobalErrorListener=o.removeGlobalErrorListener,n.addGlobalWarningListener=o.addGlobalWarningListener,n.removeGlobalWarningListener=o.removeGlobalWarningListener,n.globalOptions=b,n.globalState=w,d._setDefaultTemplateEngine(E);var T=n.updateDefaultComponent=function(){delete d._list[""],d.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})};T(),n.initBackend=function(){T()};var S=function(e){var n="";if(e instanceof t.Element&&(e.id&&(n+=' id="'+e.id+'"'),e.slot&&(n+=' slot="'+e.slot+'"'),e.__slotName&&(n+=' name="'+e.__slotName+'"'),e.classList&&(n+=' class="'+e.class+'"'),"dom"===b.documentBackend&&e.$$&&e.$$.getAttribute("style")&&(n+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof t.VirtualNode)return n;if(e instanceof t.Component)return d.listPublicProperties(e).forEach((function(t){n+=" "+t+"="+JSON.stringify(e[t])})),n;for(var i=e.attributes,r=0;r<i.length;r++)n+=" "+i[r].name+'="'+i[r].value+'"';return n},C=n.dumpElementToString=function(e,n,i){var r=null;"dom"===b.documentBackend&&(r=window);var o=0,a="";for(o=i=i||0;o;o--)a+="  ";var s="";if(e instanceof t.Element)s+=a+"<"+("dom"===b.documentBackend&&e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+S(e)+">",s+=e instanceof t.VirtualNode?" [Exp-Virtual]":e instanceof t.NativeNode?" [Exp-Native]":" [Exp-Component]",s+="\n"+C(n?e.__wxSlotChildren:e.childNodes,n,i+1);else if(e instanceof t.TextNode)s+=a+e.textContent+" [Exp-Text]\n";else if(r&&r.HTMLElement&&e instanceof r.HTMLElement)s+=a+"<"+e.tagName.toLowerCase()+S(e)+"> [DOM-Element]",s+="\n"+C(n&&e.__wxSlotChildren||e.childNodes,n,i+1);else if(r&&r.Text&&e instanceof r.Text)s+=a+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(o=0;o<e.length;o++)s+=C(e[o],n,i);else s=a+"[unknown node]\n";return s};n.dumpElement=function(e,t){console.log(C(e,t))}},function(e,t,n){var i=null,r=function(){},o=r.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return i.llparser_create_descriptor(e,1)},s=function(e,t){var n=i.llparser_create_descriptor(e,0),r=!1;"^"===t[0]&&(r=!0);for(var o=r?1:0;o<t.length;o++){var a=t.charCodeAt(o);if("-"===t[o+1]){var s=t.charCodeAt(o+2);a<=s?(i.llparser_descriptor_add_range(n,a,s),o+=2):i.llparser_descriptor_add_char(n,a)}else i.llparser_descriptor_add_char(n,a)}return r&&i.llparser_descriptor_revert(n),n};r.create=function(e,t,o){i||(i=n(2));var c=new r;o=o||16384;var l=c._llp=i.llparser_create(o,128,128),u={},d={},h="";for(h in u.ALL=i.llparser_create_descriptor(l,0),i.llparser_descriptor_set_all(u.ALL),u.NULL=i.llparser_create_descriptor(l,0),i.llparser_descriptor_set_nil(u.NULL),e)u[h]=a(l);for(h in e)for(var p=e[h],f=u[h],g=0;g<p.length;g++){for(var _=p[g].id,m=p[g].states,y=[],v=0;v<m.length;v++){var A=m[v];u[A]||(u[A]=s(l,A)),y.push(u[A])}var b=0;"_raw"===_?b=1:"_jump"===_?b=65536:"_blank"===_&&(b=65537);var w=i.llparser_add_rule(l,b,f,y.length,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7]);0===b&&(d[w]=t[_])}return i.llparser_prepare(l),c._inputPtr=i.llparser_get_input_buffer(l),c._resultPtr=i.llparser_get_result(l),c._stateIdMap=u,c._ruleCbMap=d,c._charCountLimit=o,c};r.prototype.parse=function(e,t){var n=Date.now();(function(e,t,n,i){for(var r=i>e.length?e.length:i,o=0;o<r;o++)t[n+o]=e.charCodeAt(o);t[n+r]=0})(t,new Uint16Array(i.memory.buffer),this._inputPtr>>1,this._charCountLimit),o.copyIn=o.copyIn+Date.now()-n,n=Date.now();var r=i.llparser_parse(this._llp,this._stateIdMap[e]);if(o.parse=o.parse+Date.now()-n,n=Date.now(),r)throw new Error("Parsing failed at character position "+(r-1)+' near "'+t.slice(r-20,r)+'"');var a=function(e,t,n,i,r){for(var o=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,c=r.pos,l=!1,u=!1,d=!1;;){var h=t[c],p=t[c+1];if(p<0?(u=!0,p=-p-1):u=!1,h>=0){d=!0;var f=n.slice(h,p);s.c.push(f),l=u}else{if(-1===h&&0===p)break;d=!1;var g=-h,_=p,m={i:s.c.length-(l?1:0),r:g,n:u,cc:_,c:[]};if(l){var y=s.c.length-1,v=s.c[y];m.c.push(v),s.c[y]=m}else s.c.push(m);o.push(s),s=m,l=!1}if(!d||!l)for(;s.c.length===s.cc;){l=s.n;var A=o.pop();if(A.c[s.i]=i[s.r].call(e,s.c),s=A,l)break}c+=2}return a.c[0]}(this,new Int32Array(i.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return o.constructOut=o.constructOut+Date.now()-n,a},r.prototype.destroy=function(){i.llparser_destroy(this._llp)},e.exports=r},function(e,t){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(t){return e[t]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(e,t,n){return m.llparser_create(e,t,n)}function r(e){m.llparser_destroy(e)}function o(e,t){return m.llparser_create_descriptor(e,t)}function a(e){m.llparser_descriptor_set_all(e)}function s(e){m.llparser_descriptor_set_nil(e)}function c(e,t){m.llparser_descriptor_add_char(e,t)}function l(e,t,n){m.llparser_descriptor_add_range(e,t,n)}function u(e){m.llparser_descriptor_revert(e)}function d(e,t,n,i,r,o,a,s,c,l,u,d){return m.llparser_add_rule(e,t,n,i,r,o,a,s,c,l,u,d)}function h(e){m.llparser_prepare(e)}function p(e,t){return m.llparser_parse(e,t)}function f(e){return m.llparser_get_input_buffer(e)}function g(e){return m.llparser_get_result(e)}function _(){m.wasm_main()}n.r(t),n.d(t,"llparser_create",(function(){return i})),n.d(t,"llparser_destroy",(function(){return r})),n.d(t,"llparser_create_descriptor",(function(){return o})),n.d(t,"llparser_descriptor_set_all",(function(){return a})),n.d(t,"llparser_descriptor_set_nil",(function(){return s})),n.d(t,"llparser_descriptor_add_char",(function(){return c})),n.d(t,"llparser_descriptor_add_range",(function(){return l})),n.d(t,"llparser_descriptor_revert",(function(){return u})),n.d(t,"llparser_add_rule",(function(){return d})),n.d(t,"llparser_prepare",(function(){return h})),n.d(t,"llparser_parse",(function(){return p})),n.d(t,"llparser_get_input_buffer",(function(){return f})),n.d(t,"llparser_get_result",(function(){return g})),n.d(t,"wasm_main",(function(){return _})),n.d(t,"memory",(function(){return y}));var m=n(1),y=m.memory;m.__wbindgen_start()},function(e,t,n){"use strict";n.r(t),n.d(t,"memory",(function(){return o})),n.d(t,"rust_calloc",(function(){return a})),n.d(t,"rust_free",(function(){return s})),n.d(t,"llparser_create",(function(){return c})),n.d(t,"llparser_destroy",(function(){return l})),n.d(t,"llparser_create_descriptor",(function(){return u})),n.d(t,"llparser_descriptor_set_all",(function(){return d})),n.d(t,"llparser_descriptor_set_nil",(function(){return h})),n.d(t,"llparser_descriptor_add_char",(function(){return p})),n.d(t,"llparser_descriptor_add_range",(function(){return f})),n.d(t,"llparser_descriptor_revert",(function(){return g})),n.d(t,"llparser_add_rule",(function(){return _})),n.d(t,"llparser_prepare",(function(){return m})),n.d(t,"llparser_parse",(function(){return y})),n.d(t,"llparser_get_input_buffer",(function(){return v})),n.d(t,"llparser_get_result",(function(){return A})),n.d(t,"wasm_main",(function(){return b})),n.d(t,"__wbindgen_start",(function(){return w}));var i=new ArrayBuffer(1114112),r=function(e,t,n){function i(e){var t=0,n=0,i=0,r=0,o=0,c=0,l=0;n=(t=e+-8|0)+(e=-8&(r=f[e+-4>>2]))|0;e:{t:{n:{i:{r:if(!(1&r)){if(!(3&r))break i;if(e=(r=f[t>>2])+e|0,(0|(t=t-r|0))==f[262246]){if(3!=(3&f[n+4>>2]))break r;return f[262244]=e,f[n+4>>2]=-2&f[n+4>>2],f[t+4>>2]=1|e,void(f[e+t>>2]=e)}r>>>0>=256?s(t):(0|(i=f[t+8>>2]))==(0|(o=f[t+12>>2]))?(c=1048576,l=f[262144]&d(r>>>3),f[c>>2]=l):(f[i+12>>2]=o,f[o+8>>2]=i)}if(2&(r=f[n+4>>2]))f[n+4>>2]=-2&r,f[t+4>>2]=1|e,f[e+t>>2]=e;else{r:{if(f[262247]!=(0|n)){if((0|n)!=f[262246])break r;return f[262246]=t,e=f[262244]+e|0,f[262244]=e,f[t+4>>2]=1|e,void(f[e+t>>2]=e)}if(f[262247]=t,e=f[262245]+e|0,f[262245]=e,f[t+4>>2]=1|e,(0|t)==f[262246]&&(f[262244]=0,f[262246]=0),(n=f[262254])>>>0>=e>>>0)break i;if(!(e=f[262247]))break i;o:if(!((r=f[262245])>>>0<41))for(t=1049e3;;){if((i=f[t>>2])+f[t+4>>2]>>>0>e>>>0&&i>>>0<=e>>>0)break o;if(!(t=f[t+8>>2]))break}if(i=4095,e=f[262252]){for(t=0;t=t+1|0,e=f[e+8>>2];);i=t>>>0>4095?t:4095}if(f[262256]=i,r>>>0<=n>>>0)break i;return void(f[262254]=-1)}if(e=(i=-8&r)+e|0,i>>>0>=256?s(n):(0|(i=f[n+12>>2]))==(0|(n=f[n+8>>2]))?(c=1048576,l=f[262144]&d(r>>>3),f[c>>2]=l):(f[n+12>>2]=i,f[i+8>>2]=n),f[t+4>>2]=1|e,f[e+t>>2]=e,f[262246]==(0|t)){f[262244]=e;break i}}if(e>>>0<256)break n;if(a(t,e),e=f[262256]+-1|0,f[262256]=e,!e){if(e=f[262252])break t;e=4095;break e}}return}return e=1048584+((n=e>>>3)<<3)|0,r=f[262144],n=1<<(31&n),i=f[e+8>>2],r&n||(f[262144]=n|r,i=e),n=i,f[e+8>>2]=t,f[n+12>>2]=t,f[t+12>>2]=e,void(f[t+8>>2]=n)}for(t=0;t=t+1|0,e=f[e+8>>2];);e=t>>>0>4095?t:4095}f[262256]=e}function r(e,t,n,i,o){var a;if(A=a=A-48|0,f[a+44>>2]=e,f[a+40>>2]=t,f[a+36>>2]=n,f[a+32>>2]=i,f[a+28>>2]=o,f[f[a+40>>2]>>2]!=f[a+36>>2])for(f[f[a+40>>2]>>2]=f[a+36>>2],f[a+24>>2]=f[f[a+40>>2]+136>>2],f[a+20>>2]=1&(0!=f[a+28>>2]^-1^-1);f[a+24>>2];){for(f[a+20>>2]||(f[a+28>>2]=f[a+24>>2]),f[a+16>>2]=f[f[f[a+24>>2]>>2]+8>>2],1==f[f[a+16>>2]+4>>2]&&r(f[a+44>>2],f[a+16>>2],f[a+36>>2],f[a+32>>2],f[a+28>>2]),f[a+12>>2]=0;!(f[a+12>>2]>=128);)g[f[a+12>>2]+(f[a+16>>2]+8|0)|0]&&(m[f[a+28>>2]>>2]>=m[f[a+32>>2]+(f[a+12>>2]<<2)>>2]&&f[f[a+32>>2]+(f[a+12>>2]<<2)>>2]||(f[f[a+32>>2]+(f[a+12>>2]<<2)>>2]=f[f[a+28>>2]>>2])),f[a+12>>2]=f[a+12>>2]+1;f[a+24>>2]=f[f[a+24>>2]+4>>2]}A=a+48|0}function o(e,t,n,i){var r;for(f[44+(r=A-48|0)>>2]=e,f[r+40>>2]=t,f[r+36>>2]=n,f[r+32>>2]=i,f[r+28>>2]=f[f[r+40>>2]+136>>2];f[r+28>>2];){if(f[r+24>>2]=f[f[f[r+28>>2]>>2]+8>>2],f[r+24>>2]==f[r+40>>2])for(f[r+20>>2]=f[f[f[r+28>>2]>>2]+12>>2],f[r+16>>2]=0;!(f[r+16>>2]>=128);){e:{if(1!=f[f[r+20>>2]+4>>2]){if(!g[f[r+16>>2]+(f[r+20>>2]+8|0)|0])break e}else if(f[r+12>>2]=f[f[r+44>>2]+32>>2]+((f[r+20>>2]-f[f[r+44>>2]+24>>2]|0)/140<<9),!f[f[r+12>>2]+(f[r+16>>2]<<2)>>2])break e;m[f[r+28>>2]>>2]>=m[f[r+32>>2]+(f[r+16>>2]<<2)>>2]&&f[f[r+32>>2]+(f[r+16>>2]<<2)>>2]||(f[f[r+32>>2]+(f[r+16>>2]<<2)>>2]=f[f[r+28>>2]>>2])}f[r+16>>2]=f[r+16>>2]+1}f[r+28>>2]=f[f[r+28>>2]+4>>2]}}function a(e,t){var n=0,i=0,r=0,o=0;f[e+16>>2]=0,f[e+20>>2]=0,r=e,n=0,(i=t>>>8)&&(n=31,t>>>0>16777215||(n=62+((t>>>(6-(i=v(i))&31)&1)-(i<<1)|0)|0)),f[r+28>>2]=n,r=1048848+(n<<2)|0;e:{t:{n:{i:{if((o=f[262145])&(i=1<<(31&n))){if(i=f[r>>2],(-8&f[i+4>>2])!=(0|t))break i;n=i;break n}f[262145]=i|o,f[r>>2]=e,f[e+24>>2]=r;break e}for(r=t<<(31==(0|n)?0:25-(n>>>1)&31);;){if(!(n=f[(o=16+((r>>>29&4)+i|0)|0)>>2]))break t;if(r<<=1,i=n,(-8&f[n+4>>2])==(0|t))break}}return t=f[n+8>>2],f[t+12>>2]=e,f[n+8>>2]=e,f[e+24>>2]=0,f[e+12>>2]=n,void(f[e+8>>2]=t)}f[o>>2]=e,f[e+24>>2]=i}f[e+12>>2]=e,f[e+8>>2]=e}function s(e){var t,n=0,i=0,r=0,o=0,a=0,s=0;t=f[e+24>>2];e:{t:{if((0|e)==(0|(n=f[e+12>>2]))){if(r=f[(n=e+20|0)>>2],i=f[(r?20:16)+e>>2])break t;n=0;break e}i=f[e+8>>2],f[i+12>>2]=n,f[n+8>>2]=i;break e}for(r=r?n:e+16|0;o=r,(i=f[(r=(n=i)+20|0)>>2])||(r=n+16|0,i=f[n+16>>2]),i;);f[o>>2]=0}e:if(t){i=1048848+(f[e+28>>2]<<2)|0;t:{if((0|e)==f[i>>2]){if(f[i>>2]=n,n)break t;return a=1048580,s=f[262145]&d(f[e+28>>2]),void(f[a>>2]=s)}if(f[(f[t+16>>2]==(0|e)?16:20)+t>>2]=n,!n)break e}f[n+24>>2]=t,(i=f[e+16>>2])&&(f[n+16>>2]=i,f[i+24>>2]=n),(e=f[e+20>>2])&&(f[n+20>>2]=e,f[e+24>>2]=n)}}function c(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,n=0,i=0,r=0,o=0,c=0,l=0,p=0,g=0,_=0,y=0;e:{t:{n:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(r=-8&(e=e+11|0),!(p=f[262145]))break n;n=0-r|0,l=0,(e>>>=8)&&(l=31,r>>>0>16777215||(l=62+((r>>>(6-(e=v(e))&31)&1)-(e<<1)|0)|0));i:{r:{if(e=f[1048848+(l<<2)>>2]){for(o=r<<(31==(0|l)?0:25-(l>>>1)&31);;){if(!((c=-8&f[e+4>>2])>>>0<r>>>0||(c=c-r|0)>>>0>=n>>>0||(i=e,n=c))){n=0;break r}if(c=f[e+20>>2],e=f[16+((o>>>29&4)+e|0)>>2],t=c&&(0|c)!=(0|e)?c:t,o<<=1,!e)break}if(t){e=t;break r}if(i)break i}if(i=0,!(e=(0-(e=2<<(31&l))|e)&p))break n;if(!(e=f[1048848+(u(e&0-e)<<2)>>2]))break n}for(;i=(c=(o=(t=-8&f[e+4>>2])-r|0)>>>0<n>>>0&t>>>0>=r>>>0)?e:i,n=c?o:n,e=(t=f[e+16>>2])||f[e+20>>2];);if(!i)break n}if(n>>>0>=(e=f[262244])-r>>>0&&e>>>0>=r>>>0)break n;s(i);i:if(n>>>0>=16){if(f[i+4>>2]=3|r,f[4+(t=i+r|0)>>2]=1|n,f[t+n>>2]=n,n>>>0>=256){a(t,n);break i}e=1048584+((n>>>=3)<<3)|0,o=f[262144],n=1<<(31&n),l=f[e+8>>2],o&n||(f[262144]=n|o,l=e),n=l,f[e+8>>2]=t,f[n+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=n}else e=n+r|0,f[i+4>>2]=3|e,f[4+(e=e+i|0)>>2]=1|f[e+4>>2];return i+8|0}i:{r:{if(!(3&(e=(t=f[262144])>>>(i=31&(n=(r=e>>>0<11?16:e+11&-8)>>>3))))){if(r>>>0<=m[262244])break n;if(e)break r;if(!(e=f[262145]))break n;for(t=f[1048848+(u(e&0-e)<<2)>>2],n=(-8&f[t+4>>2])-r|0,o=t;;){if(!(e=f[t+16>>2])&&!(e=f[t+20>>2]))break i;n=(t=(i=(-8&f[e+4>>2])-r|0)>>>0<n>>>0)?i:n,o=t?e:o,t=e}}n=(e=f[1048592+(c=(i=n+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(o=f[e+8>>2]))==(0|(c=c+1048584|0))?(_=1048576,y=d(i)&t,f[_>>2]=y):(f[o+12>>2]=c,f[c+8>>2]=o),t=i<<3,f[e+4>>2]=3|t,f[4+(e=e+t|0)>>2]=1|f[e+4>>2];break t}return i=u(0-(e=(n=e<<i)&(0-(e=2<<i)|e))&e),e=f[1048592+(o=i<<3)>>2],(0|(n=f[e+8>>2]))==(0|(o=o+1048584|0))?(_=1048576,y=d(i)&t,f[_>>2]=y):(f[n+12>>2]=o,f[o+8>>2]=n),o=e+8|0,f[e+4>>2]=3|r,n=(t=i<<3)-r|0,f[4+(c=e+r|0)>>2]=1|n,f[e+t>>2]=n,(e=f[262244])&&(e=1048584+((i=e>>>3)<<3)|0,t=f[262246],r=f[262144],i=1<<(31&i),l=f[e+8>>2],r&i||(f[262144]=i|r,l=e),i=l,f[e+8>>2]=t,f[i+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=i),f[262246]=c,f[262244]=n,o}return s(o),n>>>0>=16?(f[o+4>>2]=3|r,f[4+(c=r+o|0)>>2]=1|n,f[n+c>>2]=n,(e=f[262244])&&(e=1048584+((i=e>>>3)<<3)|0,t=f[262246],r=f[262144],i=1<<(31&i),l=f[e+8>>2],r&i||(f[262144]=i|r,l=e),i=l,f[e+8>>2]=t,f[i+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=i),f[262246]=c,f[262244]=n):(e=n+r|0,f[o+4>>2]=3|e,f[4+(e=e+o|0)>>2]=1|f[e+4>>2]),o+8|0}n:{i:{r:{o:{if((t=f[262244])>>>0<r>>>0){if((e=f[262245])>>>0>r>>>0)break e;if(n=0,-1==(0|(t=h((e=r+65583|0)>>>16))))break t;if(!(i=t<<16))break t;if(e=(o=-65536&e)+f[262248]|0,f[262248]=e,t=f[262249],f[262249]=t>>>0>e>>>0?t:e,!(n=f[262247]))break o;for(e=1049e3;;){if((0|i)==((t=f[e>>2])+(c=f[e+4>>2])|0))break r;if(!(e=f[e+8>>2]))break}break i}return e=f[262246],(i=t-r|0)>>>0<=15?(f[262246]=0,f[262244]=0,f[e+4>>2]=3|t,r=4+(t=e+t|0)|0,n=1|f[t+4>>2]):(f[262244]=i,n=e+r|0,f[262246]=n,f[n+4>>2]=1|i,f[e+t>>2]=i,n=3|r,r=e+4|0),f[r>>2]=n,e+8|0}for((e=f[262255])>>>0<=i>>>0&&e||(f[262255]=i),e=0,f[262256]=4095,f[262251]=o,f[262250]=i,f[262253]=0;t=e+1048584|0,f[e+1048592>>2]=t,f[e+1048596>>2]=t,256!=(0|(e=e+8|0)););f[262247]=i,e=o+-40|0,f[262245]=e,f[i+4>>2]=1|e,f[4+(e+i|0)>>2]=40,f[262254]=2097152;break n}if(!(f[e+12>>2]|i>>>0<=n>>>0|t>>>0>n>>>0)){f[e+4>>2]=o+c,t=(e=f[262247])+15&-8,f[262247]=t+-8,n=8+((i=o+f[262245]|0)+(e-t|0)|0)|0,f[262245]=n,f[t+-4>>2]=1|n,f[4+(e+i|0)>>2]=40,f[262254]=2097152;break n}}e=f[262255],f[262255]=e>>>0<i>>>0?e:i,t=i+o|0,e=1049e3;i:{for(;;){if((0|t)!=f[e>>2]){if(e=f[e+8>>2])continue;break i}break}if(!f[e+12>>2]){f[e>>2]=i,f[e+4>>2]=o+f[e+4>>2],f[i+4>>2]=3|r,o=i+r|0,r=(t-i|0)-r|0;r:{o:{if((0|t)!=f[262247]){if(f[262246]==(0|t))break o;if(1==(3&(e=f[t+4>>2]))&&((n=-8&e)>>>0>=256?s(t):(0|(c=f[t+12>>2]))==(0|(l=f[t+8>>2]))?(_=1048576,y=f[262144]&d(e>>>3),f[_>>2]=y):(f[l+12>>2]=c,f[c+8>>2]=l),r=n+r|0,t=t+n|0),f[t+4>>2]=-2&f[t+4>>2],f[o+4>>2]=1|r,f[r+o>>2]=r,r>>>0>=256){a(o,r);break r}e=1048584+((t=r>>>3)<<3)|0,n=f[262144],t=1<<(31&t),l=f[e+8>>2],n&t||(f[262144]=t|n,l=e),n=l,f[e+8>>2]=o,f[n+12>>2]=o,f[o+12>>2]=e,f[o+8>>2]=n;break r}f[262247]=o,e=f[262245]+r|0,f[262245]=e,f[o+4>>2]=1|e;break r}f[262246]=o,e=f[262244]+r|0,f[262244]=e,f[o+4>>2]=1|e,f[e+o>>2]=e}return i+8|0}}for(e=1049e3;!((t=f[e>>2])>>>0<=n>>>0&&(c=t+f[e+4>>2]|0)>>>0>n>>>0);)e=f[e+8>>2];for(f[262247]=i,e=o+-40|0,f[262245]=e,f[i+4>>2]=1|e,f[4+(e+i|0)>>2]=40,f[262254]=2097152,f[(t=(e=(c+-32&-8)-8|0)>>>0<n+16>>>0?n:e)+4>>2]=27,e=f[262250],l=f[262251],g=f[262253],f[(p=t+16|0)>>2]=f[262252],f[p+4>>2]=g,f[t+8>>2]=e,f[t+12>>2]=l,f[262251]=o,f[262250]=i,f[262252]=t+8,f[262253]=0,e=t+28|0;f[e>>2]=7,c>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|n)&&(f[t+4>>2]=-2&f[t+4>>2],e=t-n|0,f[n+4>>2]=1|e,f[t>>2]=e,e>>>0>=256?a(n,e):(e=1048584+((t=e>>>3)<<3)|0,i=f[262144],t=1<<(31&t),l=f[e+8>>2],i&t||(f[262144]=t|i,l=e),t=l,f[e+8>>2]=n,f[t+12>>2]=n,f[n+12>>2]=e,f[n+8>>2]=t))}if(n=0,!((e=f[262245])>>>0<=r>>>0))break e}return n}return t=e-r|0,f[262245]=t,i=(e=f[262247])+r|0,f[262247]=i,f[i+4>>2]=1|t,f[e+4>>2]=3|r,e+8|0}(e))|!(3&g[t+-4|0])||function(e,t){if(t)for(;p[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(y(e|=0,t|=0))}function l(){}function u(e){return e?31-v(e+-1^e)|0:32}function d(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function h(t){t|=0;var i=0|n.byteLength/65536,r=i+t|0;if(i<r&&r<65536){var o=new ArrayBuffer(y(r,65536)),a=new e.Int8Array(o);a.set(p),p=a,p=new e.Int8Array(o),new e.Int16Array(o),f=new e.Int32Array(o),g=new e.Uint8Array(o),_=new e.Uint16Array(o),m=new e.Uint32Array(o),new e.Float32Array(o),new e.Float64Array(o),n=o}return i}var p=new e.Int8Array(n),f=(new e.Int16Array(n),new e.Int32Array(n)),g=new e.Uint8Array(n),_=new e.Uint16Array(n),m=new e.Uint32Array(n),y=(new e.Float32Array(n),new e.Float64Array(n),e.Math.imul),v=(e.Math.fround,e.Math.abs,e.Math.clz32),A=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);return{memory:Object.create(Object.prototype,{grow:{value:h},buffer:{get:function(){return n}}}),rust_calloc:c,rust_free:function(e){i(e|=0)},llparser_create:function(e,t,n){return 0|function(e,t,n){var i,r,o;return A=i=A-32|0,f[i+28>>2]=e,f[i+24>>2]=t,f[i+20>>2]=n,e=i,t=f[i+28>>2]?f[i+28>>2]:256,f[e+28>>2]=t,e=i,t=f[i+24>>2]?f[i+24>>2]:256,f[e+24>>2]=t,e=i,t=f[i+20>>2]?f[i+20>>2]:256,f[e+20>>2]=t,r=i,o=c(((((((y(f[i+24>>2],140)+52|0)+y(f[i+20>>2],44)|0)+(f[i+24>>2]<<9)|0)+(f[i+24>>2]<<9)|0)+y(f[i+20>>2],f[i+24>>2]<<3)|0)+(f[i+28>>2]<<1)|0)+(f[i+28>>2]<<3)|0,1),f[r+16>>2]=o,f[f[i+16>>2]+12>>2]=f[i+28>>2],f[f[i+16>>2]+16>>2]=f[i+24>>2],f[f[i+16>>2]+20>>2]=f[i+20>>2],f[f[i+16>>2]+4>>2]=0,f[f[i+16>>2]>>2]=0,f[f[i+16>>2]+8>>2]=0,f[i+12>>2]=f[i+16>>2]+52,f[f[i+16>>2]+24>>2]=f[i+12>>2],f[i+12>>2]=f[i+12>>2]+y(f[i+24>>2],140),f[f[i+16>>2]+28>>2]=f[i+12>>2],f[i+12>>2]=f[i+12>>2]+y(f[i+20>>2],44),f[f[i+16>>2]+32>>2]=f[i+12>>2],f[i+12>>2]=f[i+12>>2]+(f[i+24>>2]<<9),f[f[i+16>>2]+36>>2]=f[i+12>>2],f[i+12>>2]=f[i+12>>2]+(f[i+24>>2]<<9),f[f[i+16>>2]+40>>2]=f[i+12>>2],f[i+12>>2]=f[i+12>>2]+y(f[i+20>>2],f[i+24>>2]<<3),f[f[i+16>>2]+44>>2]=f[i+12>>2],f[i+12>>2]=f[i+12>>2]+(f[i+28>>2]<<1),f[f[i+16>>2]+48>>2]=f[i+12>>2],A=i+32|0,f[i+16>>2]}(e|=0,t|=0,n|=0)},llparser_destroy:function(e){!function(e){var t;A=t=A-16|0,f[t+12>>2]=e,i(f[t+12>>2]),A=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var n,i;return f[12+(n=A-16|0)>>2]=e,f[n+8>>2]=t,t=f[f[n+12>>2]+24>>2],i=f[n+12>>2],e=f[i+4>>2],f[i+4>>2]=e+1,f[n+4>>2]=t+y(e,140),f[f[n+4>>2]+4>>2]=f[n+8>>2]?1:0,f[n+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+4>>2]=-1,p[f[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+4>>2]=-2,p[f[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var n;f[12+(n=A-16|0)>>2]=e,f[n+8>>2]=t,p[f[n+8>>2]+(f[n+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,n){!function(e,t,n){var i;for(f[12+(i=A-16|0)>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,f[i>>2]=f[i+8>>2];!(f[i>>2]>f[i+4>>2]);)p[f[i>>2]+(f[i+12>>2]+8|0)|0]=1,f[i>>2]=f[i>>2]+1}(e|=0,t|=0,n|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(f[12+(t=A-16|0)>>2]=e,f[t+8>>2]=1;!(f[t+8>>2]>=127);)p[f[t+8>>2]+(f[t+12>>2]+8|0)|0]=1&(0!=g[f[t+8>>2]+(f[t+12>>2]+8|0)|0]^-1),f[t+8>>2]=f[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,n,i,r,o,a,s,c,l,u,d){return 0|function(e,t,n,i,r,o,a,s,c,l,u,d){var h;return A=h=A+-64|0,f[h+60>>2]=e,f[h+56>>2]=t,f[h+52>>2]=n,f[h+48>>2]=i,f[h+44>>2]=r,f[h+40>>2]=o,f[h+36>>2]=a,f[h+32>>2]=s,f[h+28>>2]=c,f[h+24>>2]=l,f[h+20>>2]=u,f[h+16>>2]=d,t=f[f[h+60>>2]+28>>2],n=f[h+60>>2],e=f[n>>2],f[n>>2]=e+1,f[h+12>>2]=t+y(e,44),f[f[h+12>>2]>>2]=f[h+52>>2],f[f[h+12>>2]+4>>2]=f[h+48>>2],f[h+48>>2]>0&&(f[f[h+12>>2]+8>>2]=f[h+44>>2]),f[h+48>>2]>1&&(f[f[h+12>>2]+12>>2]=f[h+40>>2]),f[h+48>>2]>2&&(f[f[h+12>>2]+16>>2]=f[h+36>>2]),f[h+48>>2]>3&&(f[f[h+12>>2]+20>>2]=f[h+32>>2]),f[h+48>>2]>4&&(f[f[h+12>>2]+24>>2]=f[h+28>>2]),f[h+48>>2]>5&&(f[f[h+12>>2]+28>>2]=f[h+24>>2]),f[h+48>>2]>6&&(f[f[h+12>>2]+32>>2]=f[h+20>>2]),f[h+48>>2]>7&&(f[f[h+12>>2]+36>>2]=f[h+16>>2]),f[f[h+12>>2]+40>>2]=f[h+56>>2],f[h+48>>2]>0&&function(e,t,n){var i;f[28+(i=A-32|0)>>2]=e,f[i+24>>2]=t,f[i+20>>2]=n,f[i+16>>2]=(f[i+20>>2]-f[f[i+28>>2]+24>>2]|0)/140,1==f[f[i+20>>2]+4>>2]&&(t=f[f[i+28>>2]+40>>2],n=f[i+28>>2],e=f[n+8>>2],f[n+8>>2]=e+1,f[i+12>>2]=t+(e<<3),f[f[i+12>>2]>>2]=f[i+24>>2],f[f[i+12>>2]+4>>2]=f[f[i+20>>2]+136>>2],f[f[i+20>>2]+136>>2]=f[i+12>>2])}(f[h+60>>2],f[h+12>>2],f[h+52>>2]),A=h- -64|0,f[h+12>>2]}(e|=0,t|=0,n|=0,i|=0,r|=0,o|=0,a|=0,s|=0,c|=0,l|=0,u|=0,d|=0)},llparser_prepare:function(e){!function(e){var t;for(A=t=A-32|0,f[t+28>>2]=e,f[t+24>>2]=0;!(f[t+24>>2]>=f[f[t+28>>2]+4>>2]);)f[t+20>>2]=f[f[t+28>>2]+24>>2]+y(f[t+24>>2],140),1==f[f[t+20>>2]+4>>2]&&r(f[t+28>>2],f[t+20>>2],f[t+20>>2],f[f[t+28>>2]+32>>2]+(f[t+24>>2]<<9)|0,0),f[t+24>>2]=f[t+24>>2]+1;for(f[t+16>>2]=0;!(f[t+16>>2]>=f[f[t+28>>2]+4>>2]);)f[t+12>>2]=f[f[t+28>>2]+24>>2]+y(f[t+16>>2],140),1==f[f[t+12>>2]+4>>2]&&(f[f[t+12>>2]>>2]=0,o(f[t+28>>2],f[t+12>>2],f[t+12>>2],f[f[t+28>>2]+36>>2]+(f[t+16>>2]<<9)|0)),f[t+16>>2]=f[t+16>>2]+1;A=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var n,i,r;return A=n=A-32|0,f[n+24>>2]=e,f[n+20>>2]=t,f[n+16>>2]=0,f[n+12>>2]=0,i=n,r=function e(t,n,i,r,o,a,s){var c,l=0,u=0;A=c=A-96|0,f[c+88>>2]=t,f[c+84>>2]=n,f[c+80>>2]=i,f[c+76>>2]=r,f[c+72>>2]=o,f[c+68>>2]=a,f[c+64>>2]=s,f[c+60>>2]=_[f[c+80>>2]+(f[f[c+76>>2]>>2]<<1)>>1],m[c+60>>2]>=128&&(f[c+60>>2]=1);e:if(f[f[c+72>>2]>>2]>(f[c+64>>2]-4|0))f[c+92>>2]=-1;else if(1==f[f[c+84>>2]+4>>2])if(f[c+56>>2]=f[f[c+76>>2]>>2],f[c+52>>2]=f[f[c+72>>2]>>2],f[c+48>>2]=0,f[c+44>>2]=0,f[c+40>>2]=f[f[c+88>>2]+32>>2]+((f[c+84>>2]-f[f[c+88>>2]+24>>2]|0)/140<<9),f[c+36>>2]=0,!f[f[c+40>>2]+(f[c+60>>2]<<2)>>2]|m[c+60>>2]<=0|m[c+60>>2]>=127?!f[c+60>>2]|!f[f[c+40>>2]+508>>2]?f[f[c+40>>2]>>2]&&(f[c+36>>2]=f[f[c+40>>2]>>2]):f[c+36>>2]=f[f[c+40>>2]+508>>2]:f[c+36>>2]=f[f[c+40>>2]+(f[c+60>>2]<<2)>>2],f[c+36>>2]){for(f[c+68>>2]||f[f[c+36>>2]+40>>2]||(f[c+48>>2]=f[f[c+72>>2]>>2],t=f[c+72>>2],f[t>>2]=f[t>>2]+2),f[c+32>>2]=0;f[c+32>>2]<f[f[c+36>>2]+4>>2];){if(f[c+28>>2]=f[c+68>>2],f[c+68>>2]||!f[f[c+36>>2]+40>>2]|f[f[c+36>>2]+40>>2]==(f[c+32>>2]+65536|0)||(f[c+28>>2]=1),l=c,u=e(f[c+88>>2],f[(f[c+36>>2]+8|0)+(f[c+32>>2]<<2)>>2],f[c+80>>2],f[c+76>>2],f[c+72>>2],f[c+28>>2],f[c+64>>2]),f[l+24>>2]=u,f[c+24>>2]<0){f[c+92>>2]=-1;break e}f[c+68>>2]|f[f[c+36>>2]+40>>2]!=(f[c+32>>2]+65536|0)||(f[c+44>>2]=f[c+24>>2]),f[c+32>>2]=f[c+32>>2]+1}for(f[c+68>>2]||(f[f[c+36>>2]+40>>2]?1==f[f[c+36>>2]+40>>2]&&(n=f[c+56>>2],i=f[f[c+88>>2]+48>>2],r=f[c+72>>2],t=f[r>>2],f[r>>2]=t+1,f[i+(t<<2)>>2]=n,f[c+44>>2]=f[f[c+72>>2]>>2],n=f[f[c+76>>2]>>2],i=f[f[c+88>>2]+48>>2],r=f[c+72>>2],t=f[r>>2],f[r>>2]=t+1,f[i+(t<<2)>>2]=n):(f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]<<2)>>2]=0-f[c+36>>2],f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]+1<<2)>>2]=f[f[c+36>>2]+4>>2],f[c+44>>2]=f[c+48>>2]+1));;){if(f[f[c+72>>2]>>2]>(f[c+64>>2]-4|0)){f[c+92>>2]=-1;break e}if(f[c+20>>2]=f[f[c+88>>2]+36>>2]+((f[c+84>>2]-f[f[c+88>>2]+24>>2]|0)/140<<9),f[c+16>>2]=0,f[c+60>>2]=_[f[c+80>>2]+(f[f[c+76>>2]>>2]<<1)>>1],m[c+60>>2]>=128&&(f[c+60>>2]=1),!f[f[c+20>>2]+(f[c+60>>2]<<2)>>2]|m[c+60>>2]<=0|m[c+60>>2]>=127?!f[c+60>>2]|!f[f[c+20>>2]+508>>2]||(f[c+16>>2]=f[f[c+20>>2]+508>>2]):f[c+16>>2]=f[f[c+20>>2]+(f[c+60>>2]<<2)>>2],!f[c+16>>2])break;for(f[c+68>>2]||(f[f[c+16>>2]+40>>2]?65536!=f[f[c+16>>2]+40>>2]&&(f[f[c+72>>2]>>2]=f[c+52>>2]):(f[f[f[c+88>>2]+48>>2]+(f[c+44>>2]<<2)>>2]=(0-f[f[f[c+88>>2]+48>>2]+(f[c+44>>2]<<2)>>2]|0)-1,f[c+48>>2]=f[f[c+72>>2]>>2],t=f[c+72>>2],f[t>>2]=f[t>>2]+2)),f[c+12>>2]=1;f[c+12>>2]<f[f[c+16>>2]+4>>2];){if(f[c+8>>2]=f[c+68>>2],f[c+68>>2]||!f[f[c+16>>2]+40>>2]|f[f[c+16>>2]+40>>2]==(f[c+12>>2]+65536|0)||(f[c+8>>2]=1),l=c,u=e(f[c+88>>2],f[(f[c+16>>2]+8|0)+(f[c+12>>2]<<2)>>2],f[c+80>>2],f[c+76>>2],f[c+72>>2],f[c+8>>2],f[c+64>>2]),f[l+4>>2]=u,f[c+4>>2]<0){f[c+92>>2]=-1;break e}f[c+68>>2]|f[f[c+16>>2]+40>>2]!=(f[c+12>>2]+65536|0)||(f[c+44>>2]=f[c+4>>2]),f[c+12>>2]=f[c+12>>2]+1}f[c+68>>2]||(f[f[c+16>>2]+40>>2]?1==f[f[c+16>>2]+40>>2]&&(n=f[c+56>>2],i=f[f[c+88>>2]+48>>2],r=f[c+72>>2],t=f[r>>2],f[r>>2]=t+1,f[i+(t<<2)>>2]=n,f[c+44>>2]=f[f[c+72>>2]>>2],n=f[f[c+76>>2]>>2],i=f[f[c+88>>2]+48>>2],r=f[c+72>>2],t=f[r>>2],f[r>>2]=t+1,f[i+(t<<2)>>2]=n):(f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]<<2)>>2]=0-f[c+16>>2],f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]+1<<2)>>2]=f[f[c+16>>2]+4>>2],f[c+44>>2]=f[c+48>>2]+1))}f[c+92>>2]=f[c+44>>2]}else f[c+92>>2]=-1;else{if(f[c+60>>2]&&(-1==f[f[c+84>>2]+4>>2]&&(t=f[c+76>>2],f[t>>2]=f[t>>2]+1),!f[f[c+84>>2]+4>>2])){if(!g[f[c+60>>2]+(f[c+84>>2]+8|0)|0]){f[c+92>>2]=-1;break e}t=f[c+76>>2],f[t>>2]=f[t>>2]+1}f[c+68>>2]||(n=f[f[c+76>>2]>>2],i=f[f[c+84>>2]+4>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n-(-2==(0|i)?0:1),n=f[f[c+76>>2]>>2],i=f[f[c+88>>2]+48>>2],r=f[c+72>>2],t=f[r>>2],f[r>>2]=t+1,f[i+(t<<2)>>2]=n),f[c+92>>2]=f[f[c+72>>2]>>2]-1}return A=c+96|0,f[c+92>>2]}(f[n+24>>2],f[n+20>>2],f[f[n+24>>2]+44>>2],n+12|0,n+16|0,0,f[f[n+24>>2]+12>>2]<<1),f[i+8>>2]=r,e=f[f[n+24>>2]+48>>2],t=f[n+16>>2],f[n+16>>2]=t+1,f[e+(t<<2)>>2]=-1,e=f[f[n+24>>2]+48>>2],t=f[n+16>>2],f[n+16>>2]=t+1,f[e+(t<<2)>>2]=0,_[f[f[n+24>>2]+44>>2]+(f[n+12>>2]<<1)>>1]|f[n+8>>2]<0?f[n+28>>2]=f[n+12>>2]+1:f[n+28>>2]=0,A=n+32|0,f[n+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+48>>2]},wasm_main:l,__wbindgen_start:l}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,i),o=r.memory,a=r.rust_calloc,s=r.rust_free,c=r.llparser_create,l=r.llparser_destroy,u=r.llparser_create_descriptor,d=r.llparser_descriptor_set_all,h=r.llparser_descriptor_set_nil,p=r.llparser_descriptor_add_char,f=r.llparser_descriptor_add_range,g=r.llparser_descriptor_revert,_=r.llparser_add_rule,m=r.llparser_prepare,y=r.llparser_parse,v=r.llparser_get_input_buffer,A=r.llparser_get_result,b=r.wasm_main,w=r.__wbindgen_start}])},function(e,t,n){var i=n(4),r=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};r.create=function(e){return new r(e)},r.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},r.prototype.remove=function(e){var t=this._arr,n=0;if("function"==typeof e)for(n=0;n<t.length;n++){var i=t[n].func;if(i===e)return t.splice(n,1),this.empty=!t.length,i}else for(n=0;n<t.length;n++)if(t[n].id===e){var r=t[n].func;return t.splice(n,1),this.empty=!t.length,r}return null},r.prototype.call=function(e,t,n){for(var i=this._arr,r=!1,o=0;o<i.length;o++){!1===a(this._type,i[o].func,e,t,n)&&(r=!0)}if(r)return!1};var o=function(e,t){if(!t.type||!1!==s.call(null,[e,t])){if(i.throwGlobalError)throw e;console.error(e.stack)}},a=r.safeCallback=function(e,t,n,i,r){try{return t.apply(n,i)}catch(s){var a="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";n&&n.is&&(a+=n.is),a+="#"+(t.name||"(anonymous)"),r&&r.triggerLifeTime("error",[s]),o(s,{message:a,type:e,element:n,method:t,args:i})}},s=r.create();r.addGlobalErrorListener=function(e){return s.add(e)},r.removeGlobalErrorListener=function(e){return s.remove(e)};var c=null;r.addGlobalWarningListener=function(e){return(c=r.create()).add(e)},r.removeGlobalWarningListener=function(e){if(c){var t=c.remove(e);return c.empty&&(c=null),t}return null},r.hasGlobalWarningListeners=function(){return!!c},r.triggerWarning=function(e){var t="[Exparser] [Warning] [Component] "+e;c.call(null,[t],null)},e.exports=r},function(e,t){var n={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,styleScope:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"undefined"!=typeof window&&"undefined"!=typeof document?"dom":"none",hasDOMBackend:!("undefined"==typeof window||"undefined"==typeof document),customContext:null};e.exports=n},function(e,t){var n=Object.prototype.hasOwnProperty,i=function(e,t){var r=typeof e;if("object"===r&&null!==e){var o=t?t.get(e):void 0;if(void 0!==o)return o;if(e instanceof Array){o=[],t&&t.set(e,o);for(var a=0;a<e.length;a++)o[a]=i(e[a],t)}else for(var s in o={},t&&t.set(e,o),e)n.call(e,s)&&(o[s]=i(e[s],t));return o}if("symbol"!==r)return e};t.deepCopy=function(e,t){var n=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return i(e,n)}},function(e,t,n){var i=n(3),r=(Object.prototype.hasOwnProperty,function(){});r.prototype=Object.create(Object.prototype,{constructor:{value:r,writable:!0,configurable:!0}});var o=null;r._setElementSystem=function(e){o=e,r._setElementSystem=null};var a=null;r._setComponent=function(e){a=e,r._setComponent=null};var s=Date.now();r.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},r.getInitTimeStamp=function(e){return s},r.create=function(e,t,n){var i=(n=n||{}).originalEvent,o=n.extraFields||{},a=Date.now()-s,c=new r;for(var l in c.currentTarget=null,c.type=e,c.timeStamp=a,c.mark=null,c.detail=t,c.bubbles=!!n.bubbles,c.composed=!!n.composed,c.__originalEvent=i,c.__hasCapture=!!n.capturePhase,c.__stopped=!1,c.__dispatched=!1,o)c[l]=o[l];return c},r.prototype.preventDefault=function(){this.__originalEvent&&this.__originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.__stopped=!0},r.prototype.isStopped=function(){return!!this.__stopped},r.prototype.markMutated=function(){this.__mutatedMarked=!0},r.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var c=function(e,t,n,i){for(var r=e,a=e instanceof o?e.collectMarks():{},s=[],c=[],l=e;l;){if(r!==l&&(s.push(e),e=l,c.push(a),a=e instanceof o?e.collectMarks():{}),r=l.parentNode,!1===i(l,e,a))return;if(l.__wxHost){if(n)break;e=s.pop()||l.__wxHost,a=c.pop()||(e instanceof o?e.collectMarks():{}),r=l=l.__wxHost}else{var u=!0;l instanceof o&&(u=!1),l=u||n?l.parentNode:l.__wxSlotParent}}};r.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&((e=e.__wxElement).shadowRoot instanceof o&&(e=e.shadowRoot)),t.target=e instanceof o?e.__methodCaller:e;var n=function(e,n,i){if(!(n&&n.length&&t.mutatedMarked())){var r=t.currentTarget=i instanceof o?i.__methodCaller:i,s=e.call(r,[t],i instanceof a?i:void 0);n&&n.length&&t.markMutated(),!1===s&&(t.__originalEvent&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},i=t.type,r=!t.composed;if(t.__hasCapture){var s=[];c(e,0,r,(function(e,t,n){return e.__wxCaptureEvents&&e.__wxCaptureEvents[i]&&s.push([e,t,n]),!0}));for(var l=s.length-1;l>=0;l--){var u=s[l],d=u[0],h=u[1];t.target=h instanceof o?h.__methodCaller:h,t.mark=u[2];var p=d.__wxCaptureMutated&&d.__wxCaptureMutated[i];if(n(d.__wxCaptureEvents[i],p,d),t.__stopped)break}}if(t.target=e instanceof o?e.__methodCaller:e,!t.__stopped){var f=!t.bubbles;c(e,0,r,(function(e,r,a){t.target=r instanceof o?r.__methodCaller:r,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[i];return e.__wxEvents&&e.__wxEvents[i]&&n(e.__wxEvents[i],s,e),!f&&!t.__stopped}))}}},r.triggerEvent=function(e,t,n,i){var o=r.create(t,n,i);r.dispatchEvent(e,o)},r.addListenerToElement=function(e,t,n,r){var o=r&&r.mutated;if(o){var s=n;n=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var c=void 0;return r&&(r.useCapture||r.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=i.create("Event Listener")),c=e.__wxCaptureEvents[t].add(n),o&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(c))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=i.create("Event Listener")),c=e.__wxEvents[t].add(n),o&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(c))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,n,r]),c},r.removeListenerFromElement=function(e,t,n,i){var r=null;if(i&&(i.useCapture||i.capture))e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(r=e.__wxCaptureEvents[t].remove(n)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(o=e.__wxCaptureMutated[t].indexOf(n))&&e.__wxCaptureMutated[t].splice(o,1);else if(e.__wxEvents&&e.__wxEvents[t]&&(r=e.__wxEvents[t].remove(n)),e.__wxMutated&&e.__wxMutated[t]){var o;-1!==(o=e.__wxMutated[t].indexOf(n))&&e.__wxMutated[t].splice(o,1)}r&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,r,i])},e.exports=r},function(e,t,n){var i=n(1),r=" \n\r\t\f",o=null;t.parseMultiPaths=function(e){return o||(o=i.create({MULTIPLE_PATHS:[{id:"arrayConcat",states:["MULTIPLE_PATHS",",","SINGLE_PATH"]},{id:"array",states:["SINGLE_PATH"]}],SINGLE_PATH:[{id:"arrayConcat",states:["SINGLE_PATH",".","VAR_NAME"]},{id:"arrayConcat",states:["SINGLE_PATH","[","INT","]"]},{id:"array",states:["VAR_NAME"]},{id:"_jump",states:["SINGLE_PATH",r]}],VAR_NAME:[{id:"_blank",states:[r,"VAR_NAME"]},{id:"_jump",states:["VAR_NAME",r]},{id:"_raw",states:["*","*"]},{id:"_raw",states:["_a-zA-Z$","VAR_NAME_AFTER"]}],VAR_NAME_AFTER:[{id:"_raw",states:["_a-zA-Z0-9$","VAR_NAME_AFTER"]},{id:"_raw",states:["NULL"]}],INT:[{id:"_blank",states:[r,"INT"]},{id:"_jump",states:["INT",r]},{id:"toNumber",states:["0-9","INT_AFTER"]}],INT_AFTER:[{id:"_raw",states:["0-9","INT_AFTER"]},{id:"_raw",states:["NULL"]}]},{arrayConcat:function(e){return e[0].push(e[2]),e[0]},array:function(e){return e},toNumber:function(e){return parseInt(e[0]+e[1],10)}})),o.parse("MULTIPLE_PATHS",e)},t.parseSinglePath=function(e){for(var t=e.length,n=[],i="",r=0,o=!1,a=!1,s=0;s<t;s++){var c=e[s];if("\\"===c)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1]||"\\"===e[s+1])?(i+=e[s+1],s++):i+="\\";else if("."===c)i&&(n.push(i),i="");else if("["===c){if(i&&(n.push(i),i=""),0===n.length)throw new Error("The path string should not start with []: "+e);a=!0,o=!1}else if("]"===c){if(!o)throw new Error("There should be digits inside [] in the path string: "+e);a=!1,n.push(r),r=0}else if(a){if(c<"0"||c>"9")throw new Error("Only digits (0-9) can be put inside [] in the path string: "+e);o=!0,r=10*r+c.charCodeAt(0)-48}else i+=c}if(i&&n.push(i),0===t)throw new Error("The path string should not be empty");return n}},function(e,t,n){var i=n(3),r=n(4),o=n(7),a=["created","ready","cacheAttached","attached","moved","detached","route","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],c=function(){},l=o.parseMultiPaths,u=function(){};u.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(null===t||t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0};var d=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},h=function(e){var t={};for(var n in e)t[n]=e[n];return t},p=function(e,t){for(var n in t)hasOwnProperty.call(e,n)?(i.hasGlobalWarningListeners()&&"_"===n.charAt(0)&&i.triggerWarning('data field "'+n+'" from different behaviors is overriding or merging.'),"object"!=typeof e[n]||"object"!=typeof t[n]||null===t[n]||t[n]instanceof Array?e[n]=t[n]:(e[n]instanceof Array?e[n]=d(e[n]):e[n]=h(e[n]),p(e[n],t[n]))):e[n]=t[n]};u.create=function(e){var t=new u;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:r.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:r.lazyRegistration)||u.prepare(t),e.is&&(u._list[e.is]=t),t},u.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.ancestors,r="",o=0;for(o=0;o<(t.behaviors||[]).length;o++){var d=t.behaviors[o],h=d;for(r in"string"==typeof h&&(h=u._list[d],i.hasGlobalWarningListeners()&&(h instanceof u||i.triggerWarning('behavior "'+d+'" is not found (when preparing behavior "'+e.is+'").'))),h._unprepared&&u.prepare(h),"object"==typeof h.data&&(null===e.data?e.data=h.data:p(e.data,h.data)),h.generics){var f=h.generics[r];"object"!=typeof f&&(f={}),e.generics[r]={default:f.default}}for(r in h.properties)i.hasGlobalWarningListeners()&&"_"===r.charAt(0)&&void 0!==e.properties[r]&&i.triggerWarning('property "'+r+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.properties[r]=h.properties[r];for(r in h.relations)e.relations[r]=h.relations[r];for(r in h.methods)i.hasGlobalWarningListeners()&&"_"===r.charAt(0)&&e.methods[r]&&i.triggerWarning('method "'+r+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.methods[r]=h.methods[r];for(var g=0;g<h.ancestors.length;g++)n.indexOf(h.ancestors[g])<0&&n.push(h.ancestors[g])}for(r in"object"==typeof t.data&&(null===e.data?e.data=t.data:p(e.data,t.data)),t.properties){i.hasGlobalWarningListeners()&&"_"===r.charAt(0)&&void 0!==e.properties[r]&&i.triggerWarning('property "'+r+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").');var _=t.properties[r];s.indexOf(_)>=0?_={type:_}:s.indexOf(_.type)<0&&_.optionalTypes&&_.optionalTypes.length>0&&(_.type=_.optionalTypes[0]),i.hasGlobalWarningListeners()&&s.indexOf(_.type)<0&&i.triggerWarning('the type of property "'+r+'" is illegal (when preparing behavior "'+e.is+'").'),void 0===_.value&&(_.type===String?_.value="":_.type===Number?_.value=0:_.type===Boolean?_.value=!1:_.type===Array?_.value=[]:_.value=null),e.properties[r]={type:_.type,optionalTypes:_.optionalTypes,value:_.value,filter:_.filter,observer:_.observer,public:!!(void 0===_.public?e.options.publicProperties:_.public),availability:_.availability,observeAssignments:!!_.observeAssignments}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(r in t.lifetimes)e.lifetimes[r]=t.lifetimes[r];for(o=0;o<a.length;o++)void 0===e.lifetimes[a[o]]&&(e.lifetimes[a[o]]=t[a[o]]);for(r in t.listeners)e.listeners[r]=t.listeners[r];var m=t.observers;if(m instanceof Array)for(o=0;o<m.length;o++){var y=m[o];e.observers.push({paths:l(y.fields||"**"),observer:y.observer})}else for(r in m)e.observers.push({paths:l(r),observer:m[r]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(r in t.pageLifetimes)e.pageLifetimes[r]=t.pageLifetimes[r];for(r in t.relations){var v=t.relations[r];e.relations[r]={target:v.target||r,type:v.type,linked:v.linked||c,linkChanged:v.linkChanged||c,unlinked:v.unlinked||c,linkFailed:v.linkFailed||c}}for(r in t.methods)"function"==typeof t.methods[r]&&(i.hasGlobalWarningListeners()&&"_"===r.charAt(0)&&e.methods[r]&&i.triggerWarning('method "'+r+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.methods[r]=t.methods[r]);n.push(e)}},u._list=Object.create(null),u.prototype.hasBehavior=function(e){this._unprepared&&u.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof u){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===u._list[e])return!0;return!1},u.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var i=this.ancestors[n];for(var r in i.listeners)Object.prototype.hasOwnProperty.call(e,r)?e[r].push(i.listeners[r]):e[r]=[i.listeners[r]]}return e},u.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,n=0;n<t.length;n++)for(var i=this.ancestors[n].observers,r=0;r<i.length;r++){var o=i[r];e.addObserver(o.observer,o.paths)}},u.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=i.create("Lifetime Method")}));for(var n=0;n<t.length;n++){var r=t[n];for(var o in r.lifetimes)r.lifetimes[o]&&(e[o]||(e[o]=i.create("Lifetime Method")),e[o].add(r.lifetimes[o]))}return e},u.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var r=t[n];for(var o in r.pageLifetimes)r.pageLifetimes[o]&&(e[o]||(e[o]=i.create("Page Lifetime Method")),e[o].add(r.pageLifetimes[o]))}return e},u.callDefinitionFilter=function(e){var t=e.definitionFilter,n=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?u._list[t]:t)&&t.definitionFilter&&(n.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,n)}:null},e.exports=u},function(e,t,n){var i=n(3),r=n(6),o=n(10),a=n(11),s=n(12),c=n(14),l=n(4),u=n(13),d=function(e){h(this,e||null)};d.prototype=Object.create(Object.prototype,{constructor:{value:d,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var n=this.ownerShadowRoot.__wxHost;n.__idCacheDirty=!0,this.__domElement&&n.__componentOptions.writeIdToDOM&&("dom"===l.documentBackend?this.__domElement.id=t:"custom"===l.documentBackend&&this.__domElement.setId(t))}l.writeExtraInfoToAttr&&this.__domElement&&"dom"===l.documentBackend&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){if(e=String(e),this.__slot!==e){if(this.__inheritSlots)return void(i.hasGlobalWarningListeners()&&i.triggerWarning('slots-inherited nodes do not support "slot" attribute.'));this.__slot=e,b(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})}},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return D.call(this,e)},configurable:!0}}),r._setElementSystem(d),a._setElementSystem(d);var h=d.initialize=function(e,t,n){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=u.backendExtractedDefault,e.__domElement=t,e.__autoDestroy=!0,e.$$=t,t&&(t.__wxElement=e)};d._clone=function(e,t,n,i){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var r in t.__marks)e.__marks[r]=t.__marks[r];for(var o in e.__attributes=Object.create(null),t.__attributes)e.__attributes[o]=t.__attributes[o];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=i,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=u.backendExtractedDefault,e.__domElement=n,e.$$=n,n&&(n.__wxElement=e)},d.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},d.prototype.destroy=function(){"custom"!==l.documentBackend||this.__virtual||(this.__domElement.release(),this.__domElement=null)};var p=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof d){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&o._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof d&&t(e.shadowRoot);for(var n=e.childNodes,i=0;i<n.length;i++)t(n[i])}};t(e)}},f=function(e){if(e.__attached){var t=function(e){if(e instanceof d){for(var n=e.childNodes,i=0;i<n.length;i++)t(n[i]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__attached=!1,e.__autoDestroy&&e.destroy(),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&o._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}else e.__autoDestroy&&e.destroy()};t(e)}},g=function(e){if(!e.__attached)return p(e);var t=function(e){if(e instanceof d){for(var n=e.childNodes,i=0;i<n.length;i++)t(n[i]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)},_=function(e,t,n){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var i,r=[n];i="add"===t?{type:"childList",target:e,addedNodes:r}:"remove"===t?{type:"childList",target:e,removedNodes:r}:{type:"childList",target:e,addedNodes:r,removedNodes:r},o._callObservers(e,"__childObservers",i)}},m=function(e,t){if(e instanceof d&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var n=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var i=e.childNodes,r=0;r<i.length;r++){var o=i[r];o instanceof d&&n(o)}};n(e)}};d._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var n=e.__idCache=Object.create(null),i=function(e){e.__id&&(n[e.__id]||(n[e.__id]=e));for(var t=e.childNodes,r=0;r<t.length;r++)t[r]instanceof d&&i(t[r])};i(t)}};var y=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t,n=e.__wxHost,r=Object.create(null);t=void 0!==n.__singleSlot?{"":n.__singleSlot}:n.__slots;var o=function(e){void 0!==e.__slotName&&(r[e.__slotName]?i.hasGlobalWarningListeners()&&i.triggerWarning('slot "'+e.__slotName+'" duplication is found under a single shadow root. The first one was accepted.'):r[e.__slotName]=e);for(var t=e.childNodes,n=0;n<t.length;n++)t[n]instanceof d&&o(t[n])};o(e),void 0!==n.__singleSlot?n.__singleSlot!==r[""]&&(r[""]&&(r[""].__wxSlotChildren=n.childNodes),v(n,r,t,!0),n.__singleSlot&&(n.__singleSlot.__wxSlotChildren=[]),n.__singleSlot=r[""]||null):(v(n,r,t,!1),n.__slots=r)}},v=function(e,t,n,i){var r=e.childNodes,o=0;if(i){var a=t[""];if(a)for(;o<r.length;o++)w(a,r[o],null,!1,!1,!1,-1);else if(a=n[""])for(;o<r.length;o++)w(a,null,r[o],!0,!1,!1,o)}else{var s=function(e){for(var i=0;i<e.length;i++){var r=e[i],o=r.__slot||"",a=t[o];a?w(a,r,null,!1,!0,!0):(a=n[o])&&w(a,null,r,!0,!0,!0),r.__inheritSlots&&s(r.childNodes)}};s(r)}},A=function(e,t,n,i){for(var r=function(e,t,i){var o=e.childNodes,a=0;for(t&&(a=o.indexOf(t)+(i?0:1));a<o.length;a++){var s=o[a];if(s.__slot===n)return s;if(s.__inheritSlots){var c=r(s,null,!1);if(c)return c}}return null};t!==e;t=t.parentNode){var o=r(t.parentNode,t,i);if(o)return o;i=!1}return null},b=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var n=e.__slot||"",r=t.__slots[n];if(r){var o=A(t,e,n,!1);w(r,e,o,!1,!0,!0)}else i.hasGlobalWarningListeners()&&i.triggerWarning('slot "'+n+'" is not found.'),(r=e.__wxSlotParent)&&w(r,null,e,!0,!0,!0)}},w=function(e,t,n,i,r,o,a){if(i&&(n.__wxSlotParent=null),r&&(a=e.__wxSlotChildren.indexOf(n)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&o){var c=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(c,1),s===e&&c<a&&a--}}var u=!1;(t&&t.__backendExtracted||n&&n.__backendExtracted)&&(u=!0),"dom"===l.documentBackend?u||function(e,t,n,i,r){var o=e;if(o instanceof d){for(;o.__virtual;){var a=o.__wxSlotParent;if(!a){o=null;break}if(t&&!n){var s=a.__wxSlotChildren.indexOf(o);n=a.__wxSlotChildren[s+1]}o=a}o instanceof d&&(o=o.__domElement)}if(o){var c=i,l=null,u=null;if(t)if(t.__virtual){var h=document.createDocumentFragment(),p=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?p(n):h.appendChild(n.__domElement)}};p(t),l=h}else l=t.__domElement;if(n)if(n.__virtual){var f=e,g=0;if(i){var _=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?_(n):o.removeChild(n.__domElement)}};_(n),c=!1,g=r+1}else f=n.__wxSlotParent,g=n===t?r:f.__wxSlotChildren.indexOf(n);if(t){var m=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];if(!n.__virtual)return n;var i=m(n,0);if(i)return i}};n=null;for(var y=f;!(n=m(y,g))&&y.__virtual;y=y.__wxSlotParent)g=y.__wxSlotParent.__wxSlotChildren.indexOf(y)+1;n&&(u=n.__domElement)}}else u=n.__domElement;c?l?o.replaceChild(l,u):o.removeChild(u):l&&(u?o.insertBefore(l,u):o.appendChild(l))}else if(t&&t.__wxSlotParent){var v=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)v(e.__wxSlotChildren[t]);else{var n=e.__domElement;n&&n.parentNode&&n.parentNode.removeChild(n)}};v(t)}}(e,t,n,i,a):"custom"===l.documentBackend&&function(e,t,n,i,r){var o=e;if(o instanceof d){for(;o.__virtual;){var a=o.__wxSlotParent;if(!a){o=null;break}if(t&&!n){var s=a.__wxSlotChildren.indexOf(o);n=a.__wxSlotChildren[s+1]}o=a}o instanceof d&&(o=o.__domElement)}if(o)if(!t||n||t.__virtual){var c=l.customContext.createElement("fragment",""),u=0,h=-1;if(t){var p=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];p(n)}else c.appendChild(e.__domElement)};p(t)}if(n){var f=e,g=0,_=null;if(i){var m=function(e){if(e.__virtual){for(var t=0,n=0;n<e.__wxSlotChildren.length;n++)t+=m(e.__wxSlotChildren[n]);return t}return _||(_=e),1};u=m(n),g=r+1}else f=n.__wxSlotParent,g=n===t?r:f.__wxSlotChildren.indexOf(n);if(t&&!_)for(var y=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];if(!n.__virtual)return n;var i=y(n,0);if(i)return i}return null},v=f;!(_=y(v,g))&&v.__virtual;v=v.__wxSlotParent)g=v.__wxSlotParent.__wxSlotChildren.indexOf(v)+1;_&&(h=o.findChildPosition(_.__domElement))}o.splice(h,u,c),c.release()}else o.appendChild(t.__domElement);else if(t&&t.__wxSlotParent){for(var A=t.__wxSlotParent;A.__virtual&&(A=A.__wxSlotParent););if(A){var b=null,w=function(e){if(e.__virtual){for(var t=0,n=0;n<e.__wxSlotChildren.length;n++)t+=w(e.__wxSlotChildren[n]);return t}return b||(b=e),1};A.__domElement.splice(A.__domElement.findChildPosition(b.__domElement),w(t),null)}}}(e,t,n,i,a),l.writeExtraInfoToAttr&&"dom"===l.documentBackend&&(i&&n instanceof d&&n.__domElement&&n.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof d&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),r&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,i?1:0,t):e.__wxSlotChildren.splice(a,i?1:0))},E=function(e,t){for(var n=e.childNodes,i=0;i<n.length;i++){var r=n[i];t(e,r),r.__inheritSlots&&E(r,t)}},T=d.insertChildToElement=function(e,t,n,r){if(void 0!==e.__slotName)return!1;var a=n>=0?e.childNodes[n]:null;r&&t===a&&(r=!1);var s=null,c=e,l=e;if(t){s=t.parentNode,t.parentNode=e;var u=e.__subtreeObserversCount;if(s){var d=s.childNodes.indexOf(t);s.childNodes.splice(d,1),s===e&&d<n&&n--,u-=s.__subtreeObserversCount}u&&o._updateSubtreeCaches(t,u)}for(var h=e;h&&h.__inheritSlots;)h=h.parentNode;for(var v=!h||!h.__slots,b=!v||e.__inheritSlots,T=s;T&&T.__inheritSlots;)T=T.parentNode;var S=!T||!T.__slots,C=!S||s&&s.__inheritSlots;if(v)void 0!==e.__singleSlot&&(c=l=e.__singleSlot,i.hasGlobalWarningListeners()&&(c||i.triggerWarning("slot is not found."))),c?w(c,t,a,r,b,C,n):t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,C,!1),t&&!S&&t.__inheritSlots&&E(t,(function(e,t){w(e,t,null,!1,!0,!0,-1)}));else{var I="";if(t&&(I=t.__slot||"",c=h.__slots[I]||null,i.hasGlobalWarningListeners()&&(c||i.triggerWarning('slot "'+I+'" is not found.'))),a&&(l=h.__slots[a.__slot||""]||null),a&&l&&r&&w(l,null,a,r,!0,!1),t)if(c){var x=a?A(h,a,I,!r):A(h,e,I,!1);w(c,t,x,!1,!0,C)}else t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,C,!1);a&&r&&a.__inheritSlots&&E(a,(function(e,t){w(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&E(t,(function(t,n){var o=n.__slot||"",s=h.__slots[o]||null;if(s){var c=a?A(h,a,o,!r):A(h,e,o,!1);w(s,n,c,!1,!0,!0)}else i.hasGlobalWarningListeners()&&i.triggerWarning('slot "'+o+'" is not found.'),n.__wxSlotParent&&w(n.__wxSlotParent,null,n,!0,!0,!1)}))}return r&&(e.__subtreeObserversCount&&o._updateSubtreeCaches(a,-e.__subtreeObserversCount),a.parentNode=null),-1===n&&(n=e.childNodes.length),t?e.childNodes.splice(n,r?1:0,t):e.childNodes.splice(n,r?1:0),e.ownerShadowRoot&&(r&&m(a,e.ownerShadowRoot),t&&m(t,e.ownerShadowRoot),y(e.ownerShadowRoot)),r&&(f(a),_(e,"remove",a)),t&&(s?g(t):p(t),s===e?_(e,"move",t):(s&&_(s,"remove",t),_(e,"add",t))),!0},S=function(e,t,n,i){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var r=i?n:t,o=-1;return n&&(o=e.childNodes.indexOf(n))<0?null:T(e,t,o,i)?r:null};d._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],w(t,e,null,!1,!1,0),e.__hostAssociated=!0,y(e)},d.appendChild=function(e,t){return S(e,t,null,!1)},d.insertBefore=function(e,t,n){return S(e,t,n,!1)},d.removeChild=function(e,t){return S(e,null,t,!0)},d.replaceChild=function(e,t,n){return S(e,t,n,!0)},d.prototype.appendChild=function(e){return S(this,e,null,!1)},d.prototype.insertBefore=function(e,t){return S(this,e,t,!1)},d.prototype.removeChild=function(e){return S(this,null,e,!0)},d.prototype.replaceChild=function(e,t){return S(this,e,t,!0)};var C=function(e){var t=!0,n=!0;if(e instanceof d?(e.__backendExtracted=!0,e.$$=e.__domElement=null,n=!1):e instanceof s&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,n=!1),t&&e.__wxSlotChildren)for(var i=0;i<e.__wxSlotChildren.length;i++){var r=e.__wxSlotChildren[i];C(r)}else if(n&&e.childNodes)for(var o=0;o<e.childNodes.length;o++)C(e.childNodes[o])};d.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return C(e),t};var I=function(e,t){if(!t){var n=c.toElement(e.__domElement);return e.$$=e.__domElement=n,n}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var i=c.toElement(e.__domElement);e.$$=e.__domElement=i,t.parentNode.replaceChild(i,t)}return null},x=function(e,t,n){var i=e instanceof d&&e.__virtual,r=t?t.childNodes[n]:void 0,o=!0,a=!0,c=null;if(e instanceof d)e.__backendExtracted=!1,i||(c=I(e,r)),a=!1;else if(e instanceof s)e.__backendExtracted=!1,c=function(e,t){if(!t){var n=document.createTextNode(e.textContent);return e.$$=e.__domElement=n,n}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var i=document.createTextNode(e.textContent);e.$$=e.__domElement=i,t.parentNode.replaceChild(i,t)}return null}(e,r),o=!1,a=!1;else{var l=document.createDocumentFragment();if(l.__wxSlotChildren=e.__wxSlotChildren,r&&r.childNodes)for(;r.childNodes.length;)l.appendChild(r.childNodes[0]);c=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,r),e=l}c?(t.appendChild(c),r=c):r=t?t.childNodes[n]:void 0;var u=0;if(o&&e.__wxSlotChildren)for(var h=0;h<e.__wxSlotChildren.length;h++){var p=e.__wxSlotChildren[h];if(i)n=x(p,t,n);else if(p.asShadowRoot){for(var f=0;f<p.asShadowRoot.childNodes.length;f++)u=x(p.asShadowRoot.childNodes[f],r,u);e.shadowRoot=r,r.__wxHost=e,e.__wxSlotChildren[0]=r,r.__wxSlotParent=e,e.__singleSlot===p&&(e.__singleSlot=r)}else u=x(p,r,u)}else if(a&&e.childNodes)for(var g=0;g<e.childNodes.length;g++)u=x(e.childNodes[g],r,u);if(i)return n;for(;r.childNodes.length>u;)r.removeChild(r.childNodes[u]);return n+1};d.injectBackend=function(e,t){if(e.__backendExtracted){var n=document.createDocumentFragment();n.appendChild(t),x(e,n,0)}},d.prototype.triggerEvent=function(e,t,n){r.triggerEvent(this,e,t,n)},d.prototype.dispatchEvent=function(e){r.dispatchEvent(this,e)},d.prototype.addListener=function(e,t,n){r.addListenerToElement(this,e,t,n)},d.prototype.removeListener=function(e,t,n){r.removeListenerFromElement(this,e,t,n)},d.setMethodCaller=function(e,t){e.__methodCaller=t},d.getMethodCaller=function(e){return e.__methodCaller},d.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},d.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]!==t&&(this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute&&this.__domElement.setAttribute(e,t))},d.prototype.setStyle=function(e){this.__domElement&&"custom"===l.documentBackend&&this.__domElement.setStyle(e)},d.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&"dom"===l.documentBackend&&this.__domElement.removeAttribute(e))},d.prototype.getBoundingClientRect=function(){return this.__domElement?this.__domElement.getBoundingClientRect():{left:0,top:0,width:0,height:0}},d.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},d.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var n in t.__marks)hasOwnProperty.call(e,n)||(e[n]=t.__marks[n]);return e};var D=d.prototype.setNodeStyle=function(e,t){if(this.__styleSegments[t||0]!==e){this.__styleSegments[t||0]=e;var n=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var i=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof i)return void("dom"===l.documentBackend?this.__domElement.setAttribute("style",i.call(this,n)):"custom"===l.documentBackend&&this.__domElement.setStyle(i.call(this,n)))}this.__domElement&&("dom"===l.documentBackend?this.__domElement.setAttribute("style",n):"custom"===l.documentBackend&&this.__domElement.setStyle(n)),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})}};d.replaceDocumentElement=function(e,t,n){e.__attached||("dom"===l.documentBackend?t.parentNode.replaceChild(e.__domElement,t):"custom"===l.documentBackend&&t.replaceChild(e.__domElement,n),p(e))},d.pretendAttached=function(e){e.__attached||p(e)},d.pretendDetached=function(e){e.__attached&&f(e)},d.isAttached=function(e){return e.__attached},d.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,y(e.ownerShadowRoot))},d.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},d.getInheritSlots=function(e){return e.__inheritSlots};var O=function(e,t){var n=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!n)return null;var i=n[1].slice(1),r=n[2].split(".");return r.shift(),i||r.length?{id:i,classes:r,relation:t||""}:null},P=d.parseSelector=function(e){for(var t=String(e||"").split(","),n=[],i=!1,r=0;r<t.length;r++){for(var o=t[r].split(/( |\t|>+)/g),a=[],s="",c=0;c<o.length;c++){var l=o[c];if(l&&" "!==l&&"\t"!==l)if(">"!==l[0]){var u=O(l,s);if(s="",!u)break;a.push(u)}else{if(""!==s)break;s=l,">>>"===l&&(i=!0)}}c===o.length&&a.length&&n.push(a)}return n.length?{crossShadow:i,union:n}:null},R=function(e,t,n,i,r){if(t===e)return!1;var o=n[i],a=!0;o.id&&o.id!==t.__id&&(a=!1);for(var s=o.classes,c=0;a&&c<s.length;c++)t.classList.contains(s[c])||(a=!1);if(!a&&">"===r)return!1;var l=t;if(a&&0===i){if(null===e)return!0;for(l=l.parentNode;l;l=l.parentNode)if(l===e)return!0;if(">>>"!==r)return!1;l=t,a=!1}var u=a?o.relation:r;do{l.parentNode?l=l.parentNode:">>>"===u?l=l.__wxHost:">>>"===r?(a=!1,l=l.__wxHost):l=null,l===e&&(l=null)}while(l&&l.__virtual);if(!l)return!1;if(a){if(R(e,l,n,i-1,u))return!0;if(">>>"!==r)return!1}return R(e,l,n,i,r)},k=function(e,t,n){if(n.__virtual)return!1;for(var i=e.union,r=0;r<i.length;r++){var o=i[r];if(R(t,n,o,o.length-1,">"))return!0}return!1},N=function(e,t,n,i,r){if(k(t,n,i)&&(e.push(i),r))return!0;if(i.shadowRoot&&t.crossShadow&&((i.ownerShadowRoot?i.ownerShadowRoot.__wxHost.__componentOptions.domain:l.domain)===i.__componentOptions.domain&&N(e,t,n,i.shadowRoot,r)&&r))return!0;for(var o=i.childNodes,a=0;a<o.length;a++)if(o[a]instanceof d&&N(e,t,n,o[a],r)&&r)return!0;return!1};d.prototype.querySelector=function(e){var t="object"==typeof e?e:P(e);if(!t)return null;var n=[];return N(n,t,this,this,!0),n[0]||null},d.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:P(e),n=[];return t?(N(n,t,this,this,!1),n):[]},d.matchSelector=function(e,t){var n="object"==typeof e?e:P(e);return!!n&&k(n,null,t)},d.prototype.matchSelector=function(e,t){var n="object"==typeof e?e:P(e);return!!n&&k(n,this,t)},e.exports=d},function(e,t,n){var i=n(3),r=function(){};r.prototype=Object.create(Object.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),r.create=function(e){var t=new r;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},r.prototype.observe=function(e,t){var n=0,r=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=i.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(r),subtree:t.subtree?e:null}),n++),t.childList&&(e.__childObservers||(e.__childObservers=i.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(r),subtree:t.subtree?e:null}),n++),t.characterData&&(e.__textObservers||(e.__textObservers=i.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(r),subtree:t.subtree?e:null}),n++),t.subtree&&o(e,n),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=i.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(r),subtree:null}))},r.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var n=e[t];n.funcArr.remove(n.id),n.subtree&&o(n.subtree,-1)}this._binded=[]};var o=r._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var n=e.childNodes;if(n)for(var i=0;i<n.length;i++)o(n[i],t)};r._callObservers=function(e,t,n){do{e[t]&&e[t].call(e,[n]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},r._callSingleObserver=function(e,t,n){e[t]&&e[t].call(e,[n])},e.exports=r},function(e,t,n){var i=n(4),r=function(){},o=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,a=null;r._setElementSystem=function(e){a=e,r._setElementSystem=null};var s=Object.prototype.hasOwnProperty;r.create=function(e,t){var n=new r;for(var i in n._prefix="",n._addOriginalClass=!1,n._alias=t,n._resolvedAlias={},t)n._resolvedAlias[i]="";return n._rawNames=[],n._elem=e,n._owner=null,n._prevGenNames="",n};var c=function(e){var t="",n=e._rawNames,i=e._prefix,r=e._owner?e._owner._resolvedAlias:null,o=e._addOriginalClass;i&&(i+="--");for(var a=0;a<n.length;a++){var c=n[a];if(a&&(t+=" "),r&&s.call(r,c))t+=r[c];else if("~"===c[0])t+=c.slice(1);else if("^"===c[0]){c=c.slice(1);for(var l=e._owner||null;"^"===c[0];)c=c.slice(1),l=l?l._owner:null;var u=l?l._prefix:"";u&&(u+="--"),t+=u+c}else o&&(t+=c+" "),t+=i+c}return t},l=function(e){var t=e._elem.__domElement;if(t){var n=c(e);if("dom"===i.documentBackend)n?t.setAttribute("class",n):t.removeAttribute("class");else if("custom"===i.documentBackend){if(e._prevGenNames===n)return;e._prevGenNames=n,t.setClass(n)}}},u=function(e){var t=e.classList;t instanceof r&&(t._alias&&d(t),l(t));for(var n=e.childNodes,i=0;i<n.length;i++)n[i]instanceof a&&u(n[i])},d=function(e){var t=e._owner;if(!t)return!1;var n=!1;for(var i in e._alias){var r=e._alias[i],o=[];if(r)for(var c=0;c<r.length;c++){var l=r[c];if(s.call(t._alias,l)){var d=t._resolvedAlias[l];o.push(d)}else{var h=e._prefix&&l?e._prefix+"--"+l:l;o.push(h)}}var p=o.join(" ");e._resolvedAlias[i]!==p&&(n=!0,e._resolvedAlias[i]=p)}n&&e._elem.shadowRoot instanceof a&&u(e._elem.shadowRoot)};r.prototype.toggle=function(e,t){var n=this._rawNames.indexOf(e);void 0===t&&(t=n<0),t?n<0&&(this._rawNames.push(e),l(this)):n>=0&&(this._rawNames.splice(n,1),l(this))},r.prototype.contains=function(e){for(var t=this._rawNames,n=0;n<t.length;n++){var i=t[n];if("~"===i[0]){if(i.slice(1)===e)return!0}else if("^"===i[0]){for(var r=1;"^"===i[r];)r++;if(i.slice(r)===e)return!0}else if(i===e)return!0}return!1},r.prototype._setOwnerOptions=function(e,t,n){var i=this._prefix;this._prefix=t,i!==t&&(this._addOriginalClass=n,this._owner=e,this._alias&&d(this),l(this))},r.prototype._setAlias=function(e,t){var n=this._owner,i=String(t).match(o);this._alias[e]=i;var r=[];if(i)for(var a=0;a<i.length;a++){var c=i[a];n&&s.call(n._alias,c)?r.push(n._resolvedAlias[c]):r.push(this._prefix?this._prefix+"--"+c:c)}this._resolvedAlias[e]=r.join(" "),u(this._elem.shadowRoot)},r.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(o)||[],l(this)},r.prototype.getClassNames=function(){return c(this)},r.prototype.getPrefix=function(){return this._prefix},r.prototype.getAddOriginalClass=function(){return this._addOriginalClass},e.exports=r},function(e,t,n){var i=n(10),r=n(4),o=n(13),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t){var n=new a;n.__slot="";var i=null;return o.backendExtractedDefault||"dom"!==r.documentBackend?"custom"===r.documentBackend?((i=r.customContext.createElement("text","")).setText(e||""),i.textContent=e,i.__wxElement=n):n.__textContent=e:(i=document.createTextNode(e||"")).__wxElement=n,n.$$=n.__domElement=i,n.__backendExtracted=o.backendExtractedDefault,n.__subtreeObserversCount=0,n.__autoDestroy=!0,n.parentNode=null,n.ownerShadowRoot=t,n};a.create=function(e){return s(e,null)},a.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},a.prototype.destroy=function(){"custom"===r.documentBackend&&(this.__domElement.release(),this.__domElement=null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){if(e=String(e),this.__domElement){if(this.__domElement.textContent===e)return;this.__domElement.textContent=e,"custom"===r.documentBackend&&this.__domElement.setText(e)}else{if(this.__textContent===e)return;this.__textContent=e}(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),e.exports=a},function(e,t){t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},function(e,t){var n=function(e){this.tagName=e,this.id="",this.attrs={}};n.toElement=function(e){var t=document.createElement(e.tagName);for(var n in e.id&&(t.id=e.id),e.attrs)t.setAttribute(n,e.attrs[n]);return t},n.fromElement=function(e){var t=new n(e.tagName);t.id=e.id;for(var i=e.attributes,r=0;r<i.length;r++)t.attrs[i[r].name]=i[r].value;return t},n.prototype.cloneNode=function(){var e=new n;for(var t in e.id=this.id,this.attrs)e.attrs[t]=this.attrs[t];return e},n.prototype.removeAttribute=function(e,t){delete this.attrs[e]},n.prototype.setAttribute=function(e,t){this.attrs[e]=t},n.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=n},function(e,t,n){var i=n(3),r=n(5),o=n(16),a=n(6),s=n(8),c=n(9),l=n(17),u=n(10),d=n(11),h=n(14),p=n(4),f=n(13),g=n(7),_=a.addListenerToElement,m=g.parseSinglePath,y=r.deepCopy,v=function(){};v.prototype=Object.create(c.prototype,{constructor:{value:v,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace([n],e[n]);t.doUpdates()},configurable:!0},$:{get:function(){return c._updateIdMap(this),this.__idCache},set:function(){}}});var A=function(){};A.prototype=Object.create(Object.prototype),a._setComponent(v);var b=null;v._setDefaultTemplateEngine=function(e){b=e,v._setDefaultTemplateEngine=null};var w=function(e,t,n){if(n)for(var r=0;r<n.length;r++)if(s.matchTypeWithValue(n[r],e))return e;return t===String?null==e?(i.hasGlobalWarningListeners()&&i.triggerWarning("property received type-uncompatible value: expected <String> but get null value. Used empty string instead."),""):(i.hasGlobalWarningListeners()&&"object"==typeof e&&i.triggerWarning("property received type-uncompatible value: expected <String> but got object-typed value. Forcely converted."),String(e)):t===Number?isFinite(e)?Number(e):(i.hasGlobalWarningListeners()&&("number"==typeof e?i.triggerWarning("property received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead."):i.triggerWarning("property received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.")),0):t===Boolean?!!e:t===Array?e instanceof Array?e:(i.hasGlobalWarningListeners()&&i.triggerWarning("property received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead."),[]):t===Object?"object"==typeof e?e:(i.hasGlobalWarningListeners()&&i.triggerWarning("property received type-uncompatible value: expected <Object> but got non-object value. Used null instead."),null):void 0===e?null:e};o.setPropUpdater((function(e,t,n,r){var o=e[0],a=this.__propData[o];if(n=w(n,t.type,t.optionalTypes),!(!t.availability||function(e,t,n,r){var o=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,r?void 0:n];return!!i.safeCallback("Availablity Controller",t,e.__methodCaller,o,e)}(this,t.availability,n,r)))return i.hasGlobalWarningListeners()&&i.triggerWarning('the new value for property "'+o+'" in component "'+(this.is||"")+'" is currently not available. The value is not changed.'),a;if(t.filter){var s=i.safeCallback("Property Filter",t.filter,this.__methodCaller,r?[]:[n,a,e],this);void 0!==s&&(n=s)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[o]&&function(e,t,n){if("dom"===p.documentBackend){var i=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),r=typeof n;"boolean"===r?n?e.__domElement.setAttribute(i,""):e.__domElement.removeAttribute(i):"object"===r?e.__domElement.setAttribute(i,JSON.stringify(n)):e.__domElement.setAttribute(i,n)}}(this,o,n),n})),o.setPropObserver((function(e,t,n,r,o,a){if(r.observeAssignments||e!==t){var s=n[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&i.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),r.observer&&i.safeCallback("Property Observer",r.observer,this.__methodCaller,o?[]:[e,t,n],this),r.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&u._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var E=function(e,t,n){t.__relationLinks||(t.__relationLinks={});for(var i=t.__relationLinks[n]=[],r=0;r<e.length;r++)i.push(null)},T=function(e,t,n,r,o){for(var a=v.prototype.hasBehavior,c="parent"===r,l="shadowHost"===r,u=0;u<e.length;u++){var d,h=e[u];if(d="object"!=typeof h.target?s._list[h.target]:h.target){var p=t[u],f=null;if(!o)for(var g=l?n.ownerShadowRoot&&n.ownerShadowRoot.__wxHost:n.parentNode;g;g=l?g.ownerShadowRoot&&g.ownerShadowRoot.__wxHost:g.parentNode)if(!g.__virtual){if(a.call(g,d)){var _;_=c?g.__relationMap.child:l?g.__relationMap.shadowContent:g.__relationMap.descendant;for(var m=0;m<_.length;m++){var y,A=_[m];if((y="object"!=typeof A.target?s._list[A.target]:A.target)&&a.call(n,y)){f={parent:g,relation:A};break}}}if(c||f)break}t[u]=f,!p||f&&p.parent===f.parent||(i.safeCallback("Relation Unlinked Callback",p.relation.unlinked,p.parent.__methodCaller,[n.__methodCaller],p.parent),i.safeCallback("Relation Unlinked Callback",h.unlinked,n.__methodCaller,[p.parent.__methodCaller],n)),!f||p&&p.parent===f.parent||(i.safeCallback("Relation Linked Callback",f.relation.linked,f.parent.__methodCaller,[n.__methodCaller],f.parent),i.safeCallback("Relation Linked Callback",h.linked,n.__methodCaller,[f.parent.__methodCaller],n)),p&&f&&p.parent===f.parent&&(i.safeCallback("Relation Link Changed Callback",f.relation.linkChanged,f.parent.__methodCaller,[n.__methodCaller],f.parent),i.safeCallback("Relation Link Changed Callback",h.linkChanged,n.__methodCaller,[f.parent.__methodCaller],n)),o||f||i.safeCallback("Relation Link Failed Callback",h.linkFailed,n.__methodCaller,[],n)}}},S=function(e,t,n){if(e instanceof c){var i=0,r=null;if(e instanceof v){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,n||[]),r=e.childNodes,i=0;i<r.length;i++)S(r[i],t,n);e=e.shadowRoot}for(r=e.childNodes,i=0;i<r.length;i++)S(r[i],t,n)}};v._list={},v.register=function(e){var t=e.options||{},n=s.create(e),i=void 0!==t.classPrefix?t.classPrefix:p.classPrefix;null!=i||(i=n.is||"");var r=new A;return r._unprepared=n,r.is=e.is||"",r.behavior=n,r.protoFunc=null,r.props=null,r.template=null,r.innerEvents=null,r.generics=n.generics,r.initiator=n.initiator||null,r.options={availability:t.availability||p.availability,domain:t.domain||p.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:p.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:p.allowInWriteOnly),classPrefix:i,styleScope:t.styleScope||p.styleScope,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:p.addGlobalClass),templateEngine:t.templateEngine||p.templateEngine||b,renderingMode:t.renderingMode||p.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:p.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:p.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:p.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:p.writeIdToDOM),separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:p.separateInnerData),innerDataExclude:t.innerDataExclude||p.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:p.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:p.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:p.virtualHost)},n._unprepared||v.prepare(r),void 0!==e.is&&(v._list[n.is]=r),r},v.isPrepared=function(e){return!e._unprepared},v.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.options,r={};t._unprepared&&s.prepare(t),n.writeOnly&&(r.data={value:null});var a=e.props={};Object.keys(t.properties).forEach((function(e){var i=t.properties[e];a[e]={type:i.type,optionalTypes:i.optionalTypes,value:i.value,filter:"function"==typeof i.filter?i.filter:null==i.filter?null:t.methods[i.filter],observer:"function"==typeof i.observer?i.observer:null==i.observer?null:t.methods[i.observer],public:i.public,availability:i.availability,observeAssignments:i.observeAssignments},n.writeFieldsToNode&&(r[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var n=this.__dataProxy;n.scheduleReplace([e],t),n.doUpdates()}})}));var c=function(){};e.protoFunc=c;var l=c.prototype=Object.create(v.prototype,r);if(l.is=e.is,l.__componentOptions=n,l.__using=t.using,e.dataGroupObserverTree=o._createObserverTree(a),t._addObserversToDataProxy(e.dataGroupObserverTree),l.__behavior=t,n.writeFieldsToNode)for(var u in t.methods)l[u]=t.methods[u];l.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),l.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var d=t.relations,h=l.__relationMap={};for(var p in d){var f=d[p],g=f.type;h[g]?h[g].push(f):h[g]=[f]}var _=[];h.parent&&_.push((function(e){T(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),h.ancestor&&_.push((function(e){T(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),h.shadowHost&&_.push((function(e){T(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<_.length;t++)_[t].call(this,e)};var m={},y={},A=t.data,b="";for(b in A)y[b]=A[b];for(b in a){var w=a[b];i.hasGlobalWarningListeners()&&void 0!==y[b]&&i.triggerWarning('data field "'+b+'" is overwritten by property with the same name.'),y[b]=w.value,m[b]=w.public}var E=y,S=n.separateInnerData,C=n.innerDataExclude;if(C){for(var I in E={},y)C.test(I)||(E[I]=y[I]);S||(y=E)}var x=n.templateEngine;e.template=x.create(t,y,E,n),l.__propPublic=m;var D=t._getAllListeners(),O=e.innerEvents=[];for(var P in D){for(var R=D[P],k=P.indexOf("."),N=P.slice(k+1),M=k<1?"":P.slice(0,k),L=[],B=0;B<R.length;B++){var F=R[B];"function"!=typeof F&&(F=null==F?null:t.methods[F]),L.push(F)}O.push({id:M,name:N,funcs:L})}}};var C=1,I=Object.prototype.hasOwnProperty,x=function(e,t){return function(n){return e.call(t.__methodCaller,n,t)}},D=v._advancedCreate=function(e,t,n,r,a){var s=t;s._unprepared&&v.prepare(s);var l=s.options;!l.availability||function(e,t,n){var r=[t?t.__wxHost.__componentOptions.domain:void 0];return!!i.safeCallback("Availablity Controller",n,e,r)}(s,n,l.availability)||(i.hasGlobalWarningListeners()&&i.triggerWarning('the component "'+(s.is||"")+'" is currently not available. The default component is used instead.'),s=v._list[""]);var u=new(0,s.protoFunc),g=s.generics;u.__generics=g?function(e,t,n){var r={};for(var o in e){var a=e[o],s=t[o];"object"!=typeof s&&(s=v._list[s]),"object"!=typeof s&&null!=a.default&&(s=v._list[a.default]),i.hasGlobalWarningListeners()&&(s||i.triggerWarning('generic "'+o+'" is not instantiated. The default component is used instead.')),s&&(r[o]=s)}if(i.hasGlobalWarningListeners())for(var c in t)void 0===e[c]&&i.triggerWarning('generic "'+c+'" is not defined. It will be ignored.');return r}(g,r||{}):{};var m=null,A=p.documentBackend;if(l.virtualHost){m=null;"dom"===p.documentBackend&&(m=void 0),c.initialize(u,m,n),u.__virtual=!0}else"dom"===A?(m=f.backendExtractedDefault?new h(e):document.createElement(e),c.initialize(u,m,n)):"custom"===A?(m=p.customContext.createElement("empty",e),c.initialize(u,m,n)):c.initialize(u,null,n);var b=0,w=u.__externalClassAlias={};if(s.behavior.externalClasses){var T=s.behavior.externalClasses;for(b=0;b<T.length;b++)w[T[b]]=null}if(u.classList=d.create(u,w),n){var S=n.__wxHost;m&&"custom"===A&&S.__componentOptions.styleScope&&m.setStyleScope(S.__componentOptions.styleScope),u.classList._setOwnerOptions(S.classList,S.__componentOptions.classPrefix,S.__componentOptions.addGlobalClass),p.writeExtraInfoToAttr&&m&&m.setAttribute("exparser:info-class-prefix",S.__componentOptions.classPrefix&&S.__componentOptions.classPrefix+"--")}"dom"===A&&p.writeExtraInfoToAttr&&m&&(u.__componentInstanceId=C++,m.setAttribute("exparser:info-component-id",u.__componentInstanceId));var I=u.__templateInstance=s.template.createInstance(u,a);u.__propData=I.data;var D=l.separateInnerData;u.__innerData=D?y(u.__propData):null;var O=l.innerDataExclude;if(D&&O){var P={};for(var R in u.__innerData)O.test(R)||(P[R]=u.__innerData[R]);u.__innerData=P}u.__dataProxy=o._advancedCreate(u,u.__propData,u.__innerData,O,s.dataGroupObserverTree,(function(e,t,n,i){u.__templateInstance.updateValues(u,D?u.__innerData:u.__propData,e,t,n,i)})),I.beforeMergeValues&&u.__dataProxy.setBeforeMergeCb((function(e,t,n){u.__templateInstance.beforeMergeValues(e,t,n)})),I.beforeUpdateValues&&u.__dataProxy.setBeforeUpdateCb((function(e){u.__templateInstance.beforeUpdateValues(u,D?u.__innerData:u.__propData,e)})),l.writeOnly&&u.__dataProxy.setHidingValue(!0),u.__idCacheDirty=!1,u.__idCache=I.idMap,null===I.slots[""]&&(I.slots[""]=m),s.options.multipleSlots?u.__slots=I.slots:(u.__singleSlot=I.slots[""]||null,u.__singleSlot&&(u.__singleSlot.__wxSlotChildren=u.childNodes)),I.shadowRoot instanceof c?(u.shadowRoot=I.shadowRoot,c._attachShadowRoot(I.shadowRoot)):m instanceof h?(u.shadowRoot=m,m.__wxHost=u,u.__domElement.asShadowRoot=I.shadowRoot,u.__wxSlotChildren=[m],m.__wxSlotParent=u):(u.shadowRoot=m,m.__wxHost=u,""!==p.documentBackend&&u.__domElement.appendChild(I.shadowRoot),u.__wxSlotChildren=[m],m.__wxSlotParent=u);for(var k=I.listeners,N=0;N<k.length;N++){var M=k[N];_(M.target,M.name,x(M.func,u))}var L=s.innerEvents;for(b=0;b<L.length;b++){var B=L[b],F=B.id?"this"===B.id?u:u.__idCache[B.id]:u.shadowRoot;if(F)for(var U=B.name,W=B.funcs,j=0;j<W.length;j++)_(F,U,x(W[j],u))}var G=u.__relationMap;return G.parent&&(E(G.parent,u,"parent"),u.__relationHandler=s.relationHandler),G.ancestor&&(E(G.ancestor,u,"ancestor"),u.__relationHandler=s.relationHandler),G.shadowHost&&(E(G.shadowHost,u,"shadowHost"),u.__relationHandler=s.relationHandler),u.__propertyChangeListeners=null,"custom"===A&&m&&m.associateComponent(u),s.initiator&&i.safeCallback("Component Initiator",s.initiator,u.__methodCaller,[],u),u.__lifeTimeFuncs.created.call(u.__methodCaller,[],u),u};v.createWithGenerics=function(e,t,n,r){return"object"==typeof e?D(e.is,e,null,n,r):e?e.indexOf("-")<0&&!t?l.create(e):(i.hasGlobalWarningListeners()&&(t||I.call(v._list,e)||"virtual"===e||i.triggerWarning('component "'+e+'" is not found. The default component is used instead.')),D(e.toLowerCase(),t||I.call(v._list,e)&&v._list[e]||v._list[""],null,n,r)):D("virtual",v._list[""],null,n,r)},v.create=function(e,t,n){return v.createWithGenerics(e,t,null,n)},v.listProperties=function(e){var t=[];for(var n in e.__propPublic)void 0!==e.__propPublic[n]&&t.push(n);return t},v.listPublicProperties=function(e){var t=[];for(var n in e.__propPublic)!0===e.__propPublic[n]&&t.push(n);return t},v.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},v.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},v.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},v.getMethod=function(e,t){return e.__behavior.methods[t]},v.getComponentOptions=function(e){return e.__componentOptions},v.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},v.prototype.triggerPageLifeTime=function(e,t){S(this,e,t)},v.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},v.prototype.getRootBehavior=function(){return this.__behavior},v.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var n=this.__relationMap[t.type],i=0;i<n.length&&n[i]!==t;i++);return this.__relationLinks[t.type][i]?[this.__relationLinks[t.type][i].parent]:[]}return function(e,t){var n=[],i=t.type,r="child"===i,o="shadowContent"===i,a=function(i){for(var s=i.childNodes,l=0;l<s.length;l++){var u=s[l];if(u instanceof c)if(u.__virtual)a(u);else{var d;if(u.__relationLinks)if(d=r?u.__relationLinks.parent:o?u.__relationLinks.shadowHost:u.__relationLinks.ancestor)for(var h=0;h<d.length;h++){var p=d[h];if(p&&p.parent===e&&p.relation===t){n.push(u);break}}o&&u instanceof v&&a(u.shadowRoot),r||a(u)}}};return a(o?e.shadowRoot:e),n}(this,t)},v.prototype.hasExternalClass=function(e){return I.call(this.__externalClassAlias,e)},v.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},v.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},v.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},v.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},v.getInnerData=function(e){return e.__innerData},v.getDataProxy=function(e){return e.__dataProxy},v.replaceWholeData=function(e,t,n){e.__propData=t,e.__dataProxy.replaceWholeData(t,n)},v.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},v.prototype.setData=function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace(m(n),e[n]);t.doUpdates()},e.exports=v},function(e,t,n){var i=n(3),r=n(5),o=null,a=null,s=Object.prototype.hasOwnProperty,c=r.deepCopy,l=function(e,t,n,i,r,o){this._data=t,this._innerData=n,this._innerDataExclude=i,this._comp=e,this._updateCb=o,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=r._propFields,this._observers=r._observers,this._observerTree=r._observerTree,this._relatedObserverTreeObj=r,this._observerStatus=[]};l._advancedCreate=function(e,t,n,i,r,o){return new l(e,t,n,i,r,o)};var u=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};l._createObserverTree=function(e){return new u(e)},l.create=function(e,t,n){var i=new u({});return new l({__methodCaller:e},t,null,null,i,n)},l.setPropUpdater=function(e){o=e},l.setPropObserver=function(e){a=e},l.prototype.replaceWholeData=function(e,t){this._data=e},l.prototype.setHidingValue=function(e){this._hidingValue=!!e},l.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},l.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var d=function(e,t,n){for(var r=e,o=0;o<t.length;o++){var a=t[o];if("**"===a)return i.hasGlobalWarningListeners()&&o!==t.length-1&&i.triggerWarning('"**" can only be used at the end of a path descriptor.'),r["**"]||(r["**"]=[]),void r["**"].push(n);r[a]||(r[a]={}),r=r[a]}r["~"]||(r["~"]=[]),r["~"].push(n)},h=function(e,t,n){for(var i=0;i<t.length;i++)d(e,t[i],n)},p=function(e,t,n){for(var i=e,r=0,o="";r<t.length&&"**"!==(o=t[r]);r++){if(!i)return;i=i[o]}var a="**"===o?i["**"]:i["~"];if(a)for(r=0;r<a.length;r++)if(a[r]===n){a.splice(r,1);break}},f=function(e,t,n){for(var i=0;i<t.length;i++)p(e,t[i],n)};u.prototype.addObserver=function(e,t){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},h(this._observerTree,t,n),n},u.prototype.removeObserver=function(e){var t=this._observers[e];f(this._observerTree,t.pathObj,e),this._observers[e]=null},u.prototype.moveObserver=function(e,t){var n=this._observers[e];f(this._observerTree,n.pathObj,e),n.pathObj=t,h(this._observerTree,t,e)},l.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var g=function(e,t,n){for(var r=[],o=n.pathObj,a=0;a<o.length;a++){for(var s=o[a],c=t,l=0;l<s.length;l++){var u=s[l];if("**"===u)break;if("object"!=typeof c){c=void 0;break}c=c[u]}r[a]=c}i.safeCallback("Data Observer",n.func,e.__methodCaller,r,e)},_=function(e,t){var n=null,i=0;for(var r in e)if("~"!==r)if("**"!==r)_(e[r],t);else for(n=e["**"],i=0;i<n.length;i++)t[n[i]]=!0;else for(n=e["~"],i=0;i<n.length;i++)t[n[i]]=!0},m=function(e,t,n){for(var i=e,r=0;r<n.length;r++){if(i["**"])for(var o=i["**"],a=0;a<o.length;a++){t[o[a]]=!0}var c=n[r];if("number"==typeof c){if(!s.call(i,c)){i=null;break}}else if(!/^[_a-zA-Z]/.test(c)||!s.call(i,c)){i=null;break}i=i[c]}i&&_(i,t)},y=function(e,t,n,i,r){for(var o=0;o<e.length;o++){var a=e[o],s=t[o];s&&s&&(t[o]=!1,g(n,r?void 0:i,a))}};l.prototype.scheduleReplace=function(e,t,n){this._changes.push([e,t,n])},l.prototype.setChanges=function(e){this._changes=e},l.prototype.getChanges=function(){return this._changes},l.prototype.doUpdates=function(e,t){var n=this._propFields,i=this._comp,r=this._hidingValue,l=this._innerDataExclude,u=!!this._doingUpdates,d=this._relatedObserverTreeObj._observerIdInc,h=null,p=null,f=null;d?(u||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),h=this._doingUpdates.changedPaths,p=this._doingUpdates.changedValues,f=this._doingUpdates.combinedChanges):(h=[],p=[],f=[]);var g=this._changes;this._changes=[];var _=[];this._beforeMergeCb&&this._beforeMergeCb(g,_,e);for(var v=0;v<g.length;v++){var A=g[v],b=A[0],w=A[1],E=w,T=void 0,S=b[0],C=!!l&&l.test(S),I=n[S];if(I&&1===b.length)T=this._data[S],w=o.call(this._comp,b,I,w,this._hidingValue),C||(this._innerData?(E=c(w),_[v]||(this._innerData[S]=E)):E=w,A[1]=E),C&&!this._innerData||(this._data[S]=w);else{var x=this._data,D=S,O=null,P=1;if(!C||this._innerData){for(;P<b.length;P++)"number"==typeof(O=b[P])&&isFinite(O)?s.call(x,D)&&x[D]instanceof Array||(x[D]=[]):(!s.call(x,D)||null===x[D]||"object"!=typeof x[D]||x[D]instanceof Array)&&(x[D]={}),x=x[D],D=O;x[D]=w}if(this._innerData&&(x=this._innerData,D=S,!C)){for(P=1;P<b.length;P++)"number"==typeof(O=b[P])&&isFinite(O)?s.call(x,D)&&x[D]instanceof Array||(x[D]=[]):(!s.call(x,D)||null===x[D]||"object"!=typeof x[D]||x[D]instanceof Array)&&(x[D]={}),x=x[D],D=O;E=c(w),_[v]||(x[D]=E),A[1]=E}}m(this._observerTree,this._observerStatus,b),C||(h.push(b),p.push([E,T,w]),f.push(A)),d&&(this._doingUpdates.changesTotal+=1)}if(!u){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),d){var R=0;do{R=this._doingUpdates.changesTotal,y(this._observers,this._observerStatus,i,this._data,r)}while(R!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(h,p,f,e);for(var k=0;k<p.length;k++){var N=p[k];if(N){var M=h[k],L=n[M[0]];L&&a.call(i,N[2],N[1],M,L,r,t)}}}},e.exports=l},function(e,t,n){var i=n(9),r=n(11),o=n(14),a=n(4),s=n(13),c=function(){};c.prototype=Object.create(i.prototype,{constructor:{value:c,writable:!0,configurable:!0}});var l=c._advancedCreate=function(e,t){var n=new c;n.is=e.toLowerCase();var l=null;if("dom"===a.documentBackend?l=s.backendExtractedDefault?new o(e):document.createElement(e):"custom"===a.documentBackend&&(l=a.customContext.createElement("image"===e?e:"empty",e)),i.initialize(n,l,t),n.classList=r.create(n,null),"custom"===a.documentBackend&&l.associateComponent(n),t){var u=t.__wxHost;l&&"custom"===a.documentBackend&&u.__componentOptions.styleScope&&l.setStyleScope(u.__componentOptions.styleScope),n.classList._setOwnerOptions(u.classList,u.__componentOptions.classPrefix,u.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&l&&l.setAttribute("exparser:info-class-prefix",u.__componentOptions.classPrefix&&u.__componentOptions.classPrefix+"--")}return n};c.create=function(e){return l(e,null)};var u=c._advancedClone=function(e,t){var n=new c;n.is=e.is;var l=null;if(e.__domElement&&("dom"===a.documentBackend?l=e.__domElement instanceof o?s.backendExtractedDefault?e.__domElement.cloneNode():o.toElement(e.__domElement):s.backendExtractedDefault?o.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1):"custom"===a.documentBackend&&(l=e.__domElement.cloneNode())),i._clone(n,e,l,t),n.classList=r.create(n,null),"custom"===a.documentBackend&&l.associateComponent(n),t){var u=t.__wxHost;n.classList._setOwnerOptions(u.classList,u.__componentOptions.classPrefix,u.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&l&&l.setAttribute("exparser:info-class-prefix",u.__componentOptions.classPrefix&&u.__componentOptions.classPrefix+"--")}return n};c.cloneNode=function(e){return u(e,null)},e.exports=c},function(e,t,n){var i=n(9),r=n(4),o=function(e,t){a(this,e,t)};o.prototype=Object.create(i.prototype);var a=o.initialize=function(e,t,n){e.is=t||"";var o=null;"dom"!==r.documentBackend&&"custom"!==r.documentBackend||(o=void 0),i.initialize(e,o,n),e.__virtual=!0};o._advancedCreate=function(e,t){return new o(e,t)},o.create=function(e){return new o(e,null)},e.exports=o},function(e,t,n){var i=n(9),r=n(15),o=n(18),a=n(17),s=n(12),c=Object.prototype.hasOwnProperty,l=function(e){o.initialize(this,"shadow",this),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};l.prototype=Object.create(o.prototype),l.create=function(e){var t=new l(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var n in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[n]||(t.__childrenPropsFilter[n]=e.ownerShadowRoot.__childrenPropsFilter[n]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};l.prototype.createTextNode=function(e){return s._advancedCreate(e,this)},l.prototype.createNativeNode=function(e){return a._advancedCreate(e,this)},l.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},l.prototype.createVirtualNode=function(e){return o._advancedCreate(e,this)},l.prototype.createComponent=function(e,t,n,i){var o=null;o=void 0===t?e:t;var a=this.__wxHost;return"object"!=typeof o&&(c.call(a.__using,o)?o=a.__using[o]:c.call(a.__generics,o)&&(o=a.__generics[o]),"object"!=typeof o&&(o=r._list[o]||r._list[""])),n&&(n=function(e,t){var n={};for(var i in e){var o=e[i];"object"!=typeof o&&(c.call(t.__using,o)?o=t.__using[o]:c.call(t.__generics,o)&&(o=t.__generics[o]||r._list[""]),n[i]=o)}return n}(n,a)),"object"==typeof e&&(e=o.is),a.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",n=0;n<8;n++){var i=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[i]}return t}()),a.__componentOptions.writeOnly&&!o.options.allowInWriteOnly&&(o=r._list[""]),r._advancedCreate(e,o,this,n,i)},l.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!c.call(t.__using,e)||!!c.call(t.__generics,e)},l.prototype.getHostNode=function(){return this.__wxHost},l.prototype.getElementById=function(e){return i._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},e.exports=l},function(e,t,n){var i=n(9),r=n(12),o=function(){};o.create=function(e,t,n){var a=new o;if(!(e instanceof i||e instanceof r))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=n||i;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,n,i,r){if(i<0&&e instanceof t&&!1===r(e))return!1;var o=n&&e.__wxSlotChildren||e.childNodes;if(o)for(var s=0;s<o.length;s++)if(!1===a(o[s],t,n,i,r))return!1;return!(i>0&&e instanceof t&&!1===r(e))};o.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,n,i){for(;e;e=n&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===i(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=o},function(e,t,n){var i=n(4),r=n(3),o=!1,a=[],s=function(e){var t=a;a=[],o=!0,i.customContext.render((function(){o=!1,a.length&&(i.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(s):setTimeout(s,16));for(var e=0;e<t.length;e++)"function"==typeof t[e]&&r.safeCallback("render",t[e],null,[])}))};t.triggerRender=function(e){"custom"===i.documentBackend&&(a.push(e||null),o||1!==a.length||(i.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(s):setTimeout(s,16)))}},function(e,t,n){(function(t){var i=n(4),r=n(3),o=n(9),a=n(17),s=n(12),c=n(19),l=n(15),u=n(24),d=n(25),h=function(){};h.prototype=Object.create(Object.prototype,{constructor:{value:h,writable:!0,configurable:!0}});var p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var f=null;h.precompiler=f,h.htmlParser=null;var g=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},_=Object.prototype.hasOwnProperty,m=function(e,t){if(null!==e&&"object"==typeof e&&_.call(e,t))return e[t]},y=function(e,t,n,i){if(_.call(t,n)){var o=t[n];if("function"==typeof o)return r.safeCallback("Template Method",o,e,i)}},v={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},A=function(e,t,n){e.classList.toggle(t,!!n)},b=function(e,t,n){e[t]=n},w=function(e,t,n){var i=e.__dataProxy;i.scheduleReplace([t],n),i.doUpdates()},E=function(e,t,n){e.class=n},T=function(e,t,n){"dom"===i.documentBackend?e.setAttribute("style",n):"custom"===i.documentBackend&&e.setStyle(n)},S=function(e,t,n){e.setAttribute("class",n)},C=function(e,t,n){e.textContent=n},I=function(e,t,n){e.dataset||(e.dataset={}),e.dataset[t]=n},x={$:function(e,t,n){!0===n?e.setAttribute(t,""):!1===n||null==n?e.removeAttribute(t):e.setAttribute(t,n)},":":b,c:A,s:function(e,t,n){var i=e.style;i&&(i[t]=n)},d:I},D=function(e,t,n){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};h.create=function(e,n,i,o){var a=void 0===e.template?D:e.template,s=a;"function"!=typeof a&&(void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node?s=h.precompileAndGetCreator(a):(r.hasGlobalWarningListeners()&&r.triggerWarning("Non-precompiled template is not usable in this environment. Empty template is used instead."),s=D));var c=Object.create(h.prototype);return c._initValuesJSON=JSON.stringify(i),c._dataJSON=n!==i?JSON.stringify(n):null,c._tagTreeRoot=O(s,i,e.methods,o),c._renderingMode=o.renderingMode,c};var O=function(e,t,n,r){var o="native"===r.renderingMode,s=o,c=!1,l=Object.create(null);o&&!i.hasDOMBackend&&(e=D);var u={},h=e(m,y,n),p=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(3!==r.t){var l=r.n,h=!(o||"string"==typeof l&&l.indexOf("-")<0);"slot"===l&&""===r.sn&&(c=!0),r.n=l;var f=r.st;f&&f.e&&(f.o=T,s&&(f.v=f.e(t,u,null)));var _=r.cl;_&&_.e&&(_.o=o?S:E,s&&(_.v=_.e(t,u,null)));var m=null;h||(r.p=m=o?document.createElement(r.n):a.create(r.n),f&&void 0!==f.v&&("dom"===i.documentBackend?m.setAttribute("style",f.v):"custom"===i.documentBackend&&m.__domElement.setStyle(f.v)),o&&_&&void 0!==_.v&&m.setAttribute("class",_.v));for(var y=r.a,v=0;v<y.length;v++){var I=y[v];if(I.d)o||d[I.n].register(I.n,I,r);else{o||("bind"===I.n.slice(0,4)?(I.evCatch=!1,I.ev=g(I.n.slice(4)),":"===I.ev[0]&&(I.ev=I.ev.slice(1))):"catch"===I.n.slice(0,5)&&(I.evCatch=!0,I.ev=g(I.n.slice(5)),":"===I.ev[0]&&(I.ev=I.ev.slice(1))));var D=I.o;if(h)D?I.o="&"===D?x[":"]:x[D]:(I.o=x[":"],I.n=g(I.n)),I.o===b&&(I.o=w),s&&I.e&&(I.v=I.e(t,u,null));else if(!I.ev){var O=x;I.o=D?"&"===D?O[":"]:O[D]:O.$,s?(I.e&&(I.v=I.e(t,u,null)),(I.o!==A||o)&&I.o(m,I.n,I.v)):I.e||I.o(m,I.n,I.v)}}}p(r.c),o&&(1!==r.c.length||void 0===r.c[0].sn||r.c[0].compressed||(r.sn=r.c[0].sn,r.compressed=!0,r.c.pop()))}else r.e&&(r.o=C,r.c=s?r.e(t,u,null):"")}};return p(h,l,!0),o&&(c||h.push(v),1!==h.length||""!==h[0].sn||h[0].compressed||h.pop()),h},P=function(e,t){return function(n){if(this[e](n),t)return!1}},R=function(e,t,n,r,a,s,c,h){for(var p=null,f=0,g=null,_=0;_<e.length;_++){var m=c,y=e[_];if(3===y.t)p=y.e?t.createTextNode(y.e(r,a,null)):t.createTextNode(y.c),y.e&&u.addBindings(s,m,y.b,p,y),o.appendChild(n,p);else{var v=y.cl,E=y.st,T=y.a,S=!1;for(f=0;f<T.length;f++)if((g=T[f]).d){var C=d[g.n].create(g.n,g,y,r,a,s,m,h,t,R,n);if(d[g.n].requireBlock){p=C,o.appendChild(n,p),S=!0;break}}if(S)continue;if(y.v)p=t.createVirtualNode(y.n);else if(y.p){for(p=t.cloneNativeNode(y.p),f=0;f<T.length;f++)(g=T[f]).d||(g.ev?h(p,g.ev,g.v,g.evCatch):g.o===b?p.__domElement&&(g.o(p.__domElement,g.n,g.e(r,a,null)),u.addBindings(s,m,g.b,p.__domElement,g)):(g.e&&g.o(p,g.n,g.e(r,a,null)),(g.e||g.o===A||g.o===I)&&u.addBindings(s,m,g.b,p,g)));E&&E.e&&("dom"===i.documentBackend?p.setAttribute("style",E.e(r,a,null)):"custom"===i.documentBackend&&p.__domElement.setStyle(E.e(r,a,null)),u.addBindings(s,m,E.b,p,E))}else{if(y.cpf){var x={},D=t.__wxHost;for(var O in y.cpf)!function(e){var t=y.cpf[e];x[e]=D.__behavior.methods[t]}(O);t.__childrenPropsFilter=x}for(p=t.createComponent(y.n,void 0,y.g,void 0),f=0;f<T.length;f++)if(!(g=T[f]).d){var P=g.v;g.o===w&&l.hasPublicProperty(p,g.n)?(g.e&&(P=g.e(r,a,null),u.addBindings(s,m,g.b,p,g)),g.e?w(p,g.n,P):p.__behavior.properties[g.n].type===Boolean?w(p,g.n,!0):w(p,g.n,P)):g.ev?h(p,g.ev,P,g.evCatch):g.o!==w&&(g.e&&(P=g.e(r,a,null),u.addBindings(s,m,g.b,p,g)),g.o(p,g.n,P))}E&&(E.e?("dom"===i.documentBackend?p.__domElement.setAttribute("style",E.e(r,a,null)):"custom"===i.documentBackend&&p.__domElement.setStyle(E.e(r,a,null)),u.addBindings(s,m,E.b,p.__domElement,E)):"dom"===i.documentBackend?p.__domElement.setAttribute("style",E.v):"custom"===i.documentBackend&&p.__domElement.setStyle(E.v))}y.id&&(p.id=y.id),v&&(v.e?p.class=v.e(r,a,null):p.class=v.v,v.o&&u.addBindings(s,m,v.b,p,v)),y.sl&&(p.slot=y.sl),void 0!==y.sn&&o.setSlotName(p,y.sn),o.appendChild(n,p),R(y.c,t,p,r,a,s,m,h)}}},k=function(e,t,n){for(var i=e.childNodes,r=0;r<i.length;r++){var o=i[r];o instanceof s||(o.__id&&(t[o.__id]=o),void 0!==o.__slotName&&(n[o.__slotName]=o),k(o,t,n))}},N=function(e,t,n,i,r,o){for(var a=null,s=0,c=null,l=0;l<e.length;l++){var d=e[l];if(void 0===d.n)a=document.createTextNode(d.c),d.e&&u.addBindings(r,o,d.b,a,d),t.appendChild(a);else{var h=d.cl,p=d.st,f=d.a;for(a=d.v?document.createElement("virtual"):document.importNode?document.importNode(d.p,!1):d.p.cloneNode(!1),s=0;s<f.length;s++)(c=f[s]).e&&u.addBindings(r,o,c.b,a,c);t.appendChild(a),d.id&&(n[d.id]=a),h&&h.e&&u.addBindings(r,o,h.b,a,h),p&&p.e&&u.addBindings(r,o,p.b,a,p),void 0!==d.sn&&(i[d.sn]=a),N(d.c,a,n,i,r,o)}}};h.prototype.createInstance=function(e){var t=Object.create(p.prototype),n=JSON.parse(this._initValuesJSON),r=null===this._dataJSON?n:JSON.parse(this._dataJSON),o=Object.create(null),a=Object.create(null),s=[],l=u.create("",null,null,null,null,[],(function(e,t){})),d=null;if("native"===this._renderingMode)"dom"===i.documentBackend&&(d=document.createDocumentFragment()),N(this._tagTreeRoot,d,o,a,l,{}),a[""]||(a[""]=null);else{if(d=c.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(d.__childrenPropsFilter)for(var h in e.ownerShadowRoot.__childrenPropsFilter)d.__childrenPropsFilter[h]||(d.__childrenPropsFilter[h]=e.ownerShadowRoot.__childrenPropsFilter[h]);else d.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;R(this._tagTreeRoot,d,d,n,{},l,{},(function(e,t,n,i){d.__wxHost?e.addListener(t,P(n,i).bind(d.__wxHost)):s.push({target:e,name:t,func:P(n,i)})})),k(d,o,a)}return t.data=r,t.shadowRoot=d,t.idMap=o,t.slots=a,t.listeners=s,t._topScope=l,t},p.prototype.updateValues=function(e,t,n){for(var i=o.getMethodCaller(e),r=0;r<n.length;r++){var a=n[r];u.updateBinding(this._topScope,a,t,{},i)}},e.exports=h}).call(t,n(23))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(){f&&h&&(f=!1,h.length?p=h.concat(p):g=-1,p.length&&a())}function a(){if(!f){var e=r(o);f=!0;for(var t=p.length;t;){for(h=p,p=[];++g<t;)h&&h[g].run();g=-1,t=p.length}h=null,f=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,u,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var h,p=[],f=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||f||r(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){var n={create:function(e,t,n,r,o,a,s){for(var c={inc:1,name:e,exp:r,lp:o,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},l=0;l<a.length;l++){var u=a[l];null===u[0]?i(t,u,null,c):i(n[u[0]],u,null,c)}return c},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return i(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var n in e)t[n]={inc:1,linked:e[n],scopes:{},targets:{},children:null,__scopeBinded:[]},i(e[n],[null],null,t[n]);return t}},i=n.addBinding=function(e,t,n,i){for(var r=e,o=1;o<t.length;o++){var a=t[o];r.children||(r.children=Object.create(null));var s=r.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),r=s[a]}var c=e.inc++;return n?r.targets[c]=[n,i]:(r.scopes[c]=i,i.__scopeBinded.push([r,c])),c};n.addBindings=function(e,t,n,r,o){for(var a=0;a<n.length;a++){var s=n[a];s[0]?i(t[s[0]],s,r,o):i(e,s,r,o)}},n.updateLvaluePath=function(e,t){e.lp=t},n.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,n=0;n<t.length;n++){var i=t[n];delete i[0].scopes[i[1]]}};var r=function(e,t,n,i,r){if(e.linked)o(e,t,n,i,r);else{var a=i[e.name];i[e.name]=e.exp(n,i,r),o(e,t,n,i,r),i[e.name]=a}},o=n.updateBinding=function(e,t,n,i,o){for(var a=e,s=0,c=0;c<t.length;c++){for(s in a.scopes)r(a.scopes[s],t,n,i,o);var l=t[c];if(!a.children)return;var u=a.children;if(!u[l])return;a=u[l]}var d=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(n,i,o))}for(s in e.scopes)r(e.scopes[s],[],n,i,o);for(s in e.children)d(e.children[s])};d(a)};e.exports=n},function(e,t,n){e.exports={if:n(26),elif:n(26),else:n(26),for:n(28),key:n(29),"for-index":n(30),"for-item":n(31),alias:n(32)}},function(e,t,n){var i=n(24),r=n(27).RUNTIME_NAMES;r.TOP_SCOPE,r.SUB_SCOPE,r.CALLER,e.exports={requireBlock:!0,register:function(e,t,n){},create:function(e,t,n,r,o,a,s,c,l,u,d){var h=l.createVirtualNode("wx:"+e);h.__wxIfCondValue=!0,h.__wxIfNextNode=null,h.__wxIfHasTrueCond=!0;var p=null;"if"!==e&&("wx:if"!==(p=d.childNodes[d.childNodes.length-1]).is&&"wx:elif"!==p.is?p=null:p.__wxIfNextNode=h),n.id&&(h.id=n.id);var f=h.__wxIfUpdateNode=function(){var e=h.__wxIfCondValue;if(p&&p.__wxIfHasTrueCond&&(e=!1),e&&!h.childNodes.length){var t=i.proxyTopScope(a),d=i.proxySubScopes(s);h.__wxTopScope=t,h.__wxSubScopes=d,u(n.c,l,h,r,o,t,d,c)}else if(!e&&h.childNodes.length){for(var f in i.removeBindingsForScope(h.__wxTopScope),h.__wxSubScopes)i.removeBindingsForScope(h.__wxSubScopes[f]);for(;h.childNodes.length;)h.removeChild(h.childNodes[0])}h.__wxIfNextNode&&h.__wxIfNextNode.__wxIfUpdateNode()},g=function(e){h.__wxIfCondValue=!!e,h.__wxIfHasTrueCond=h.__wxIfCondValue||p&&p.__wxIfHasTrueCond,f()};return"else"===e?g(!0):(i.addBindings(a,s,t.b,h,{e:t.d,o:function(e,t,n){g(n)}}),g(t.d(r,o,null))),h}}},function(e,t){t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var n=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},i=t.STRING_ESCAPE_MAP={},r="";for(var o in n)i[n[o]]=o,r+=n[o];t.STRING_ESCAPE_REGEXP=new RegExp("["+r+"]","g")},function(e,t,n){var i=(n(18),n(24)),r=n(27).RUNTIME_NAMES;r.TOP_SCOPE,r.SUB_SCOPE,r.CALLER,e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],register:function(e,t,n){},create:function(e,t,n,r,o,a,s,c,l,u){var d=n._wxForIndex||"index",h=n._wxForItem||"item",p=n._wxKey,f=l.createVirtualNode("wx:for:list");n.id&&(f.id=n.id),i.create("",a,s,(function(e,n,i){var r=t.d(e,n,null);return v(r,e,n,i),r}),t.l,t.b);var g=function(e,t,r,o,p){var g=l.createVirtualNode("wx:for:item"),_=i.proxyTopScope(a),m=i.proxySubScopes(s);g.__wxTopScope=_,g.__wxSubScopes=m,g.__wxForToRemove=!1,g.__wxForKeyStr="";var y=i.create(d,_,m,null,null,[]),v=i.create(h,_,m,null,[r],[]);return m[d]=y,m[h]=v,t[d]=r,t[h]=o,u(n.c,l,g,e,t,_,m,c),void 0===p?f.appendChild(g):f.insertBefore(g,p),g},_=function(e,t,n,o,a,s){var c=e.__wxSubScopes[h];i.updateLvaluePath(c,[o]),a&&(s?f.insertBefore(e,s):f.appendChild(e));var l=e.__wxSubScopes[d];n[d]=o,i.updateBinding(l,[],r,n,t)},m=function(e,t,n,r,o,a){r[h]=o,i.updateBinding(e.__wxSubScopes[h],t,n,r,a)},y=function(e){for(var t in i.removeBindingsForScope(e.__wxTopScope),f.__wxSubScopes)i.removeBindingsForScope(e.__wxSubScopes[t]);f.removeChild(e)},v=function(e,t,n,i){var r="",o=e;"object"==typeof e&&null!==e||(o=[]);var a={};for(r in n)a[r]=n[r];var s=0;if(p){var c=[],l=e instanceof Array,u=[];if(!l){var d=o;for(r in o=[],d)o.push(d[r]),u.push(r)}for(s=0;s<o.length;s++)c.push(String(o[s][p]));if(0===o.length)for(;f.childNodes.length;)y(f.childNodes[0]);else{var h=Object.create(null),v=Object.create(null),A=f.childNodes,b=null,w="";for(s=0;s<A.length;s++)h[w=(b=A[s]).__wxForKeyStr]>=0?(y(b),s--):(h[w]=s,v[w]=b,b.__wxForToRemove=!0);var E=-1,T=0,S=1,C=[];for((T=h[o[0][p]])>=0||(T=-1),A[T]&&(A[T].__wxForToRemove=!1),s=1;s<o.length;s++)(S=h[o[s][p]])>=0&&(E<T&&(T<S||E>S)&&(C.push(A[T]),E=T),A[T=S]&&(A[T].__wxForToRemove=!1));for(E<T&&C.push(A[T]),s=0;s<A.length;s++)(b=A[s]).__wxForToRemove&&(y(b),s--);var I=C.shift(),x=0;for(s=0;s<o.length;s++){var D=o[s],O=v[D[p]];if(v[D[p]]=null,O){var P=!0;if(O===I){for(;A[x]!==I;)x++;x++,I=C.shift(),P=!1}_(b=O,i,a,l?s:u[s],P,A[x]),P&&A[x]===b&&x++,m(b,[],t,a,o[s],i)}else b=g(t,a,l?s:u[s],o[s],A[x]),x++,b.__wxForKeyStr=String(D[p])}}}else{for(;f.childNodes.length;)y(f.childNodes[0]);if(e instanceof Array)for(s=0;s<o.length;s++)g(t,a,s,o[s]);else for(r in o)g(t,a,r,o[r])}};return v(t.d(r,o,null),r,o,null),f}}},function(e,t){e.exports={attachedToBlock:!0,register:function(e,t,n){n._wxKey=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,n){n._wxForIndex=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,n){n._wxForItem=t.d},create:function(){}}},function(e,t,n){var i=n(24),r=n(27).RUNTIME_NAMES;r.TOP_SCOPE,r.SUB_SCOPE,r.CALLER,e.exports={requireBlock:!0,register:function(e,t,n){},create:function(e,t,n,r,o,a,s,c,l,u){var d=t.s[0],h=i.create(d,a,s,t.d,t.l,t.b),p={},f="";for(f in s)p[f]=s[f];p[d]=h;var g={};for(f in o)g[f]=o[f];g[d]=t.d(r,o,null);var _=l.createVirtualNode("wx:alias");return n.id&&(_.id=n.id),u(n.c,l,_,r,g,a,p,c),_}}}]);e.exports=t},446:(e,t,n)=>{var i=n(821);e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){var i=null;"undefined"!=typeof NativeGlobal&&void 0!==NativeGlobal.WebAssembly?i=NativeGlobal.WebAssembly:"undefined"!=typeof WebAssembly&&(i=WebAssembly),t.wasm_initialize=function(e,r){var o=e.bin,a=new i.Memory({initial:16}),s={js:{mem:a},"./exparser_scl_backend_bg.js":n(3)},c=function(e){for(var n in e.instance.exports)t[n]=e.instance.exports[n];t.memory||(t.memory=a),t.wasm_initialize=null,r(t)},l=i.instantiate(o,s);"function"==typeof l.then?l.then(c):c(l)}},function(e,t,n){"use strict";function i(){}function r(){}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),i.prototype.encode=function(e){for(var t=[],n=e.length,i=0;i<n;){var r=e.codePointAt(i),o=0,a=0;for(r<=127?(o=0,a=0):r<=2047?(o=6,a=192):r<=65535?(o=12,a=224):r<=2097151&&(o=18,a=240),t.push(a|r>>o),o-=6;o>=0;)t.push(128|r>>o&63),o-=6;i+=r>=65536?2:1}return t},r.prototype.decode=function(e){if(void 0===e)return"";for(var t="",n=0;n<e.length;){var i=e[n],r=0,o=0;if(i<=127?(r=0,o=255&i):i<=223?(r=1,o=31&i):i<=239?(r=2,o=15&i):i<=244&&(r=3,o=7&i),e.length-n-r>0)for(var a=0;a<r;)o=o<<6|63&(i=e[n+a+1]),a+=1;else o=65533,r=e.length-n;t+=String.fromCodePoint(o),n+=r+1}return t}},function(e,t,n){"use strict";n.r(t),n.d(t,"setErrorListener",(function(){return r})),n.d(t,"consoleErrorReport",(function(){return o}));var i=null,r=function(e){i=e},o=function(e){if(i){var t=e.split("\nStack:\n",2)[0].trim();i(new Error(t))}else console.error(e)}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"wasm_main",(function(){return x})),n.d(t,"compileStyleSheetToJson",(function(){return N})),n.d(t,"compileStyleSheetToBincode",(function(){return M})),n.d(t,"BoundingClientRect",(function(){return L})),n.d(t,"Callback",(function(){return B})),n.d(t,"Context",(function(){return F})),n.d(t,"Element",(function(){return U})),n.d(t,"Listener",(function(){return W})),n.d(t,"ScrollPosition",(function(){return j})),n.d(t,"StyleSheetGroup",(function(){return G})),n.d(t,"__wbg_instanceof_ExparserElement_74ace43f429ed53b",(function(){return V})),n.d(t,"__wbg_invoke_e595dd16845dff2f",(function(){return H})),n.d(t,"__wbindgen_object_drop_ref",(function(){return z})),n.d(t,"__wbg_subscribe_76e57ecbbf87c182",(function(){return Z})),n.d(t,"__wbg_setTimeout_73cd22a52998d9f8",(function(){return Y})),n.d(t,"__wbg_timeoutCallback_5a0fccae410eec7e",(function(){return $})),n.d(t,"__wbg_triggerRender_8291f7e41c9ba309",(function(){return q})),n.d(t,"__wbg_triggerEvent_fe8e7714c046228c",(function(){return Q})),n.d(t,"__wbindgen_json_parse",(function(){return J})),n.d(t,"__wbindgen_json_serialize",(function(){return X})),n.d(t,"__wbg_getTheme_6ee867e661a1fe00",(function(){return K})),n.d(t,"__wbg_getWindowWidth_5d3459d21d0fb732",(function(){return ee})),n.d(t,"__wbg_getWindowHeight_5055bbf1cbab7ad7",(function(){return te})),n.d(t,"__wbg_getDevicePixelRatio_bad18211fbb2a2d3",(function(){return ne})),n.d(t,"__wbg_getSafeArea_e02a51c464e82ae4",(function(){return ie})),n.d(t,"__wbg_getEngineConfig_d071336fb0f35c81",(function(){return re})),n.d(t,"__wbindgen_object_clone_ref",(function(){return oe})),n.d(t,"__wbg_new_59cb74e423758ede",(function(){return ae})),n.d(t,"__wbg_stack_558ba5917b466edd",(function(){return se})),n.d(t,"__wbg_error_4bb6c2a97407129a",(function(){return ce})),n.d(t,"__wbindgen_string_new",(function(){return le})),n.d(t,"__wbg_debug_733679f61d937b18",(function(){return ue})),n.d(t,"__wbg_error_c81c8d172df3cb18",(function(){return de})),n.d(t,"__wbg_info_23f7f04053448bbc",(function(){return he})),n.d(t,"__wbg_log_8485ead621ceded9",(function(){return pe})),n.d(t,"__wbg_warn_eb158fa0859088bf",(function(){return fe})),n.d(t,"__wbindgen_debug_string",(function(){return ge})),n.d(t,"__wbindgen_throw",(function(){return _e}));var r=n(1),o=n(2),a=n(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=new Array(32).fill(void 0);function h(e){return d[e]}d.push(void 0,null,!0,!1);var p=d.length;function f(e){var t=h(e);return function(e){e<36||(d[e]=p,p=e)}(e),t}var g=new(void 0===r.a?(0,e.require)("util").TextDecoder:r.a)("utf-8",{ignoreBOM:!0,fatal:!0});g.decode();var _=null;function m(){return null!==_&&_.buffer===a.memory.buffer||(_=new Uint8Array(a.memory.buffer)),_}function y(e,t){return g.decode(m().subarray(e,e+t))}function v(e){p===d.length&&d.push(d.length+1);var t=p;return p=d[t],d[t]=e,t}var A=0,b=new(void 0===r.b?(0,e.require)("util").TextEncoder:r.b)("utf-8"),w="function"==typeof b.encodeInto?function(e,t){return b.encodeInto(e,t)}:function(e,t){var n=b.encode(e);return t.set(n),{read:e.length,written:n.length}};function E(e,t,n){if(void 0===n){var i=b.encode(e),r=t(i.length);return m().subarray(r,r+i.length).set(i),A=i.length,r}for(var o=e.length,a=t(o),s=m(),c=0;c<o;c++){var l=e.charCodeAt(c);if(l>127)break;s[a+c]=l}if(c!==o){0!==c&&(e=e.slice(c)),a=n(a,o,o=c+3*e.length);var u=m().subarray(a+c,a+o);c+=w(e,u).written}return A=c,a}var T=null;function S(){return null!==T&&T.buffer===a.memory.buffer||(T=new Int32Array(a.memory.buffer)),T}function C(e){return function(){try{return e.apply(this,arguments)}catch(e){a.__wbindgen_exn_store(v(e))}}}function I(e){return function(){throw new Error("".concat(e," is not defined"))}}function x(){a.wasm_main()}function D(e){return null==e}function O(e,t){var n=t(1*e.length);return m().set(e,n/1),A=e.length,n}var P=32;function R(e){if(1==P)throw new Error("out of js stack");return d[--P]=e,P}function k(e,t){if(!(e instanceof t))throw new Error("expected instance of ".concat(t.name));return e.ptr}function N(e,t){try{var n=a.__wbindgen_add_to_stack_pointer(-16),i=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=A,o=E(t,a.__wbindgen_malloc,a.__wbindgen_realloc),s=A;a.compileStyleSheetToJson(n,i,r,o,s);var c=S()[n/4+0],l=S()[n/4+1];return y(c,l)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(c,l)}}function M(e,t){try{var n=a.__wbindgen_add_to_stack_pointer(-16),i=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=A,o=E(t,a.__wbindgen_malloc,a.__wbindgen_realloc),s=A;a.compileStyleSheetToBincode(n,i,r,o,s);var c=S()[n/4+0],l=S()[n/4+1],u=(d=c,h=l,m().subarray(d/1,d/1+h)).slice();return a.__wbindgen_free(c,1*l),u}finally{a.__wbindgen_add_to_stack_pointer(16)}var d,h}var L=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_boundingclientrect_free(e)}},{key:"left",get:function(){return a.__wbg_get_boundingclientrect_left(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_left(this.ptr,e)}},{key:"top",get:function(){return a.__wbg_get_boundingclientrect_top(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_top(this.ptr,e)}},{key:"width",get:function(){return a.__wbg_get_boundingclientrect_width(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_width(this.ptr,e)}},{key:"height",get:function(){return a.__wbg_get_boundingclientrect_height(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_height(this.ptr,e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),B=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_callback_free(e)}},{key:"exec",value:function(e){try{var t=this.__destroy_into_raw();a.callback_exec(t,R(e))}finally{d[P++]=void 0}}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),F=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_context_free(e)}},{key:"getWindowWidth",value:function(){return a.context_getWindowWidth(this.ptr)}},{key:"getWindowHeight",value:function(){return a.context_getWindowHeight(this.ptr)}},{key:"getDevicePixelRatio",value:function(){return a.context_getDevicePixelRatio(this.ptr)}},{key:"getTheme",value:function(){try{var e=a.__wbindgen_add_to_stack_pointer(-16);a.context_getTheme(e,this.ptr);var t=S()[e/4+0],n=S()[e/4+1];return y(t,n)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(t,n)}}},{key:"appendStyleSheet",value:function(e){var t=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;return a.context_appendStyleSheet(this.ptr,t,n)>>>0}},{key:"appendStyleSheetJson",value:function(e,t){var n=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A,r=D(t)?0:E(t,a.__wbindgen_malloc,a.__wbindgen_realloc),o=A;return a.context_appendStyleSheetJson(this.ptr,n,i,r,o)>>>0}},{key:"appendStyleSheetBincode",value:function(e,t){var n=O(e,a.__wbindgen_malloc),i=A,r=D(t)?0:E(t,a.__wbindgen_malloc,a.__wbindgen_realloc),o=A;return a.context_appendStyleSheetBincode(this.ptr,n,i,r,o)>>>0}},{key:"replaceStyleSheet",value:function(e,t){var n=E(t,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A;a.context_replaceStyleSheet(this.ptr,e,n,i)}},{key:"replaceStyleSheetJson",value:function(e,t,n){var i=E(t,a.__wbindgen_malloc,a.__wbindgen_realloc),r=A,o=D(n)?0:E(n,a.__wbindgen_malloc,a.__wbindgen_realloc),s=A;a.context_replaceStyleSheetJson(this.ptr,e,i,r,o,s)}},{key:"replaceStyleSheetBincode",value:function(e,t,n){var i=O(t,a.__wbindgen_malloc),r=A,o=D(n)?0:E(n,a.__wbindgen_malloc,a.__wbindgen_realloc),s=A;a.context_replaceStyleSheetBincode(this.ptr,e,i,r,o,s)}},{key:"clearStyleSheets",value:function(){a.context_clearStyleSheets(this.ptr)}},{key:"render",value:function(e){try{a.context_render(this.ptr,R(e))}finally{d[P++]=void 0}}},{key:"bindRootNode",value:function(e){k(e,U),a.context_bindRootNode(this.ptr,e.ptr)}},{key:"getRootNode",value:function(){var e=a.context_getRootNode(this.ptr);return 0===e?void 0:U.__wrap(e)}},{key:"createElement",value:function(e,t){var n=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A,r=E(t,a.__wbindgen_malloc,a.__wbindgen_realloc),o=A,s=a.context_createElement(this.ptr,n,i,r,o);return U.__wrap(s)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"create",value:function(){var t=a.context_create();return e.__wrap(t)}},{key:"getNodeUnderPoint",value:function(e,t){var n=a.context_getNodeUnderPoint(e,t);return U.__wrap(n)}},{key:"getExparserElementByViewId",value:function(e){return f(a.context_getExparserElementByViewId(e))}}]),e}(),U=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_element_free(e)}},{key:"release",value:function(){var e=this.__destroy_into_raw();a.element_release(e)}},{key:"associateComponent",value:function(e){a.element_associateComponent(this.ptr,v(e))}},{key:"cloneNode",value:function(){var t=a.element_cloneNode(this.ptr);return e.__wrap(t)}},{key:"equal",value:function(t){return k(t,e),0!==a.element_equal(this.ptr,t.ptr)}},{key:"getParentNode",value:function(){var t=a.element_getParentNode(this.ptr);return 0===t?void 0:e.__wrap(t)}},{key:"getChildNode",value:function(t){var n=a.element_getChildNode(this.ptr,t);return 0===n?void 0:e.__wrap(n)}},{key:"appendChild",value:function(t){k(t,e),a.element_appendChild(this.ptr,t.ptr)}},{key:"insertChild",value:function(t,n){k(t,e),a.element_insertChild(this.ptr,t.ptr,n)}},{key:"removeChild",value:function(e){a.element_removeChild(this.ptr,e)}},{key:"replaceChild",value:function(t,n){k(t,e),a.element_replaceChild(this.ptr,t.ptr,n)}},{key:"splice",value:function(t,n,i){k(i,e),a.element_splice(this.ptr,t,n,i.ptr)}},{key:"findChildPosition",value:function(t){return k(t,e),a.element_findChildPosition(this.ptr,t.ptr)}},{key:"length",value:function(){return a.element_length(this.ptr)>>>0}},{key:"getBoundingClientRect",value:function(){var e=a.element_getBoundingClientRect(this.ptr);return 0===e?void 0:L.__wrap(e)}},{key:"getScrollPosition",value:function(){var e=a.element_getScrollPosition(this.ptr);return j.__wrap(e)}},{key:"setScrollPosition",value:function(e,t,n){a.element_setScrollPosition(this.ptr,!D(e),D(e)?0:e,!D(t),D(t)?0:t,!D(n),D(n)?0:n)}},{key:"setId",value:function(e){var t=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;a.element_setId(this.ptr,t,n)}},{key:"setClass",value:function(e){var t=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;a.element_setClass(this.ptr,t,n)}},{key:"setStyle",value:function(e){var t=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;a.element_setStyle(this.ptr,t,n)}},{key:"setStyleScope",value:function(e){var t=D(e)?0:E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;a.element_setStyleScope(this.ptr,t,n)}},{key:"setAttribute",value:function(e,t){var n=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A,r=E(t,a.__wbindgen_malloc,a.__wbindgen_realloc),o=A;a.element_setAttribute(this.ptr,n,i,r,o)}},{key:"getAttribute",value:function(e){try{var t=a.__wbindgen_add_to_stack_pointer(-16),n=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A;a.element_getAttribute(t,this.ptr,n,i);var r=S()[t/4+0],o=S()[t/4+1];return y(r,o)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(r,o)}}},{key:"setText",value:function(e){var t=E(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;a.element_setText(this.ptr,t,n)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),W=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_listener_free(e)}},{key:"exec",value:function(e){try{return 0!==a.listener_exec(this.ptr,R(e))}finally{d[P++]=void 0}}},{key:"release",value:function(){var e=this.__destroy_into_raw();a.__wbg_callback_free(e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),j=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_scrollposition_free(e)}},{key:"scrollLeft",get:function(){return a.__wbg_get_boundingclientrect_left(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_left(this.ptr,e)}},{key:"scrollTop",get:function(){return a.__wbg_get_boundingclientrect_top(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_top(this.ptr,e)}},{key:"scrollWidth",get:function(){return a.__wbg_get_boundingclientrect_width(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_width(this.ptr,e)}},{key:"scrollHeight",get:function(){return a.__wbg_get_boundingclientrect_height(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_height(this.ptr,e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),G=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_stylesheetgroup_free(e)}}]),e}(),V=function(e){return h(e)instanceof i.exparser.Element},H=C((function(e,t,n,r){i.invoke(y(e,t),f(n),0===r?void 0:B.__wrap(r))})),z=function(e){f(e)},Z=C((function(e,t,n){i.subscribe(y(e,t),0===n?void 0:W.__wrap(n))})),Y=function(e,t){return setTimeout(h(e),t>>>0)},$=function(e,t){i.timeoutCallback(e>>>0,B.__wrap(t))},q="function"==typeof i.exparser.triggerRender?i.exparser.triggerRender:I("__exparserSclEngine__.exparser.triggerRender"),Q=function(e,t,n,r,o){i.exparser.triggerEvent(h(e),y(t,n),f(r),f(o))},J=function(e,t){return v(JSON.parse(y(e,t)))},X=function(e,t){var n=h(t),i=E(JSON.stringify(void 0===n?null:n),a.__wbindgen_malloc,a.__wbindgen_realloc),r=A;S()[e/4+1]=r,S()[e/4+0]=i},K=function(e){var t=E(i.getTheme(),a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;S()[e/4+1]=n,S()[e/4+0]=t},ee="function"==typeof i.getWindowWidth?i.getWindowWidth:I("__exparserSclEngine__.getWindowWidth"),te="function"==typeof i.getWindowHeight?i.getWindowHeight:I("__exparserSclEngine__.getWindowHeight"),ne="function"==typeof i.getDevicePixelRatio?i.getDevicePixelRatio:I("__exparserSclEngine__.getDevicePixelRatio"),ie=function(){return v(i.getSafeArea())},re=function(){return v(i.getEngineConfig())},oe=function(e){return v(h(e))},ae=function(){return v(new Error)},se=function(e,t){var n=E(h(t).stack,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A;S()[e/4+1]=i,S()[e/4+0]=n},ce=function(e,t){try{Object(o.consoleErrorReport)(y(e,t))}finally{a.__wbindgen_free(e,t)}},le=function(e,t){return v(y(e,t))},ue=function(e){console.debug(h(e))},de=function(e){Object(o.consoleErrorReport)(h(e))},he=function(e){console.info(h(e))},pe=function(e){console.log(h(e))},fe=function(e){console.warn(h(e))},ge=function(e,t){var n=E(function e(t){var n=u(t);if("number"==n||"boolean"==n||null==t)return"".concat(t);if("string"==n)return'"'.concat(t,'"');if("symbol"==n){var i=t.description;return null==i?"Symbol":"Symbol(".concat(i,")")}if("function"==n){var r=t.name;return"string"==typeof r&&r.length>0?"Function(".concat(r,")"):"Function"}if(Array.isArray(t)){var o=t.length,a="[";o>0&&(a+=e(t[0]));for(var s=1;s<o;s++)a+=", "+e(t[s]);return a+"]"}var c,l=/\[object ([^\]]+)\]/.exec(toString.call(t));if(!(l.length>1))return toString.call(t);if("Object"==(c=l[1]))try{return"Object("+JSON.stringify(t)+")"}catch(e){return"Object"}return t instanceof Error?"".concat(t.name,": ").concat(t.message,"\n").concat(t.stack):c}(h(t)),a.__wbindgen_malloc,a.__wbindgen_realloc),i=A;S()[e/4+1]=i,S()[e/4+0]=n},_e=function(e,t){throw new Error(y(e,t))}}.call(this,n(5)(e))},function(e,t,n){var i=n(2),r=n(0);e.exports=n(3);var o=function(){e.exports.memory=r.memory,"function"==typeof r.__wbindgen_start?r.__wbindgen_start():"function"==typeof r.wasm_main&&r.wasm_main()},a=null;e.exports.wasm_initialize=function(e,t){void 0===t&&(t=e,e=void 0),r.wasm_initialize?a?a.push(t):(a=[t],r.wasm_initialize(e,(function(){o();var e=a;a=null,e.forEach((function(e){e()}))}))):t&&setTimeout(t,0)},r.wasm_initialize||o(),e.exports.setErrorListener=i.setErrorListener},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}])},668:(e,t,n)=>{n(57).J.push("AftQA21wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLW1hc2ttcC1idWJibGUtYWN0aW9uLXNoZWV0LS1tZW51bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tY2VsbG1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGxfX2hvdmVybXAtYnViYmxlLWFjdGlvbi1zaGVldC0tY2VsbC1pbWdtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1jZWxsLWRlc2NtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1mb290bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uc2FmZS1hcmVhLWluc2V0LWJvdHRvbW1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWJ1dHRvbl9fYmVmb3JlbXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uX19jb250ZW50bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uX19ob3Zlcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNvbnRlbnRtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1jb250ZW50bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tbWVudW1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGxfX2hvdmVybXAtYnViYmxlLWFjdGlvbi1zaGVldC0tY2VsbC1kZXNjbXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9ubXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uX19iZWZvcmVtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1idXR0b25fX2NvbnRlbnRtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1idXR0b25fX2hvdmVy+8ADFi4ODAEKAAAAAAMBABwAABAcBQIDAC8CAAAAAC4CAAAAAC0CAAAAADACAAAAAAAAWA4MAQocABwAAwEcHAAAEEYOJgMAIgPt7e3/AgIALwIAAAAALgIAAAAAKAIAAApDJwgAAIA/MwIAAMBBNAIAAMBBMgIAAMBBMQIAAMBBAQMACAEADQYAAAAWDgwBCjgAOAADATgcAAAQBAECAgAAAFgODAEKVABUAAMBVCoAABBGDCYDACcCAABgQigCAABgQjMCAABAQTQCAABAQTICAABAQTECAABAQSID/////0UCAABAQUYCAABAQUcCAABAQUgCAABAQQAAIxgWARR+AH4AAwF+KgEKqACoAAMBqCMAACAHASID7Ozs/wAAHw4MAQrLAMsAAwHLIAAAEA0CJwIAAABCKAIAAABCAAAoDgwBCusA6wADAeshAAAQFgQWAgAAIEETAwAAAIAYAgA3AgAAAEEAACIUEgEQ+wwBAPsMAQAFAfsMARwAABAKAgICACcIAACAPwAAKxQSARD7KAEA+ygBAAUB+ygBHgAAEBMDAgIANAkB+0YBFgAAIgP/////AABHFBIBEPtcAQD7XAEABQH7XAEmAAAQLwcCAwAvAgAAAAAtAgAAAAAuAgAAAAAoAgAAgD8iAwAAABpJAQoBAwAAgD8AAAA/AABSFBIBEPuCAQD7ggEABQH7ggEnAAAQOgsmAwAzAgAAAAA0AgAAAAAyAgAAgEExAgAAgEEYAgAWAgAAiEEXAgAAYEIeAwATAwAAAOYoAgAAYEIAAB8UEgEQ+6kBAPupAQAFAfupASUAABAHASID7Ozs/wAAHxQSARD7zgEA+84BAAUB+84BHwAAEAcBJwMAAMhCAQAfFBIBEPvtAQD77QEABQH77QEfAAAQBwEnBAAAyEIBAR8UEgEQ+wwCAPsMAgAFAfsMAhwAABAHASIDERER/wECHxQSARD7KAIA+ygCAAUB+ygCKgAAEAcBIgMfHx//AQIvJCIBIPtSAgD7UgIABQH7UgIqARD7fAIA+3wCAAUB+3wCIwAAIAcBIgM3Nzf/AQIfFBIBEPufAgD7nwIABQH7nwIhAAAQBwETA////4ABAh8UEgEQ+8ACAPvAAgAFAfvAAh4AABAHASIDHx8f/wECHxQSARD73gIA+94CAAUB+94CJgAAEAcBIgP///8NAQIfFBIBEPsEAwD7BAMABQH7BAMnAAAQBwETA////8wBAh8UEgEQ+ysDAPsrAwAFAfsrAyUAABAHASIDNzc3/wECKAMMAAAJAQcAAAQBAgEADAAACQEHAAAEAQICAAwAAAkBBwAABAEJAgA=")},574:(e,t,n)=>{n(57).J.push("AfvjAW1wLWRpYWxvZy0tcm9vdG1wLWRpYWxvZy0tbWFza21wLWRpYWxvZy0tbWFza19faW5tcC1kaWFsb2ctLWNvbnRhaW5lcm1wLWRpYWxvZy0tY29udGVudG1wLWRpYWxvZy0tY29udGVudF9faW5tcC1kaWFsb2ctLWhlYWRtcC1kaWFsb2ctLXRpdGxlbXAtZGlhbG9nLS1ib2R5bXAtZGlhbG9nLS1mb290bXAtZGlhbG9nLS1mb290bXAtZGlhbG9nLS1mb290X19hZnRlcm1wLWRpYWxvZy0tYnV0dG9ubXAtZGlhbG9nLS1idXR0b25fX2FjdGl2ZW1wLWRpYWxvZy0tYnV0dG9uX19hZnRlcm1wLWRpYWxvZy0tYnV0dG9uX19maXJzdC1jaGlsZF9fYWZ0ZXJtcC1kaWFsb2ctLWJ1dHRvbl9fZGVmYXVsdG1wLWRpYWxvZy0tY29udGVudG1wLWRpYWxvZy0tYm9keW1wLWRpYWxvZy0tYnV0dG9ubXAtZGlhbG9nLS1idXR0b25fX2RlZmF1bHRtcC1kaWFsb2ctLWJ1dHRvbl9fYWN0aXZlbXAtZGlhbG9nLS1mb290X19hZnRlcm1wLWRpYWxvZy0tYnV0dG9uX19hZnRlcvvqAxc5DgwBCgAAAAADAQAPAAAQJwkoBAAAyEInAwAAyEIBAwAWAgAAgEEDAgAEAgAIAwAKAgAVAEB6RAAASw4MAQoPAA8AAwEPDwAAEDkLAgMALwIAAAAALgIAAAAALQIAAAAAMAIAAAAAIgMAAACZFAAAAABKAwECAEsCAchMAwEDAE0CAQAAABgODAEKHgAeAAMBHhMAABAGARQAAIA/AAA3DgwBCjEAMQADATEUAAAQJQgCAwAvAgAAAAAuAgAAAAAtAgAAAAAwAgAAAAABAwANAQAKAgAAAF0ODAEKRQBFAAMBRRIAABBLECID/////xgCAEUCAAAAQUYCAAAAQUcCAAAAQUgCAAAAQQMCAAQCAAEDAAgDACcCAACgQxQAAAAASgMBAgBLAgHITAMBAwBNAgEAAAAYDgwBClcAVwADAVcWAAAQBgEUAACAPwAAMQ4MAQptAG0AAwFtDwAAEB8FNwIAAABCNQIAAMBBOAIAAAAANgIAAMBBKAIAAMBBAAAcDgwBCnwAfAADAXwQAAAQCgIZAgAWAgAAiEEAACsODAEKjACMAAMBjA8AABAZBDECAADAQTICAADAQRYCAACIQRMDAAAAgAAAFg4MAQqbAJsAAwGbDwAAEAQBAQMAAAAoDgwBCqoAqgADAaoPAAAQFgQCAgAoAgAAYEIXAgAAYEIWAgAAiEEAAEEODAEKuQC5AAMBuRYAABAvBwIDAC0CAAAAAC8CAAAAAC4CAAAAACgCAACAPyIDAAAAGkkBCgEDAACAPwAAAD8AACcODAEKzwDPAAMBzxEAABAVBQECAA4AAIA/EwNXa5X/GQIAAgIAAAAZDgwBCuAA4AADAeAZAAAQBwEiA+zs7P8AAEEODAEK+QD5AAMB+RgAABAvBwIDAC0CAAAAAC8CAACAPycCAACAPzACAAAAACIDAAAAGkkBCgEDAAAAPwAAgD8AABwUEgEQ+xEBAPsRAQAFAfsRASUAABAEAQEBAAAAHxQSARD7NgEA+zYBAAUB+zYBGgAAEAcBEwMAAADmAAAlFBIBEPtQAQD7UAEABQH7UAESAAAQDQIiAx4eHv8TA/////8BACUUEgEQ+2IBAPtiAQAFAftiAQ8AABANAiIDHh4e/xMD////gAEAHxQSARD7cQEA+3EBAAUB+3EBEQAAEAcBEwN9kKn/AQAfFBIBEPuCAQD7ggEABQH7ggEaAAAQBwETA////5kBAB8UEgEQ+5wBAPucAQAFAfucARkAABAHASIDNzc3/wEAMCUjAhD7tQEA+7UBAAUB+7UBFgAAEPvLAQD7ywEABQH7ywEYAAAQBwEiA////w0BAA4BDAAACQEHAAAEAQkCAA==")},81:(e,t,n)=>{n(57).J.push("Aft3Am1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tY29udGVudHNhZmUtYXJlYS1pbnNldC1ib3R0b21tcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWhlYWRtcC1oYWxmLXNjcmVlbi1kaWFsb2ctLXRpdGxlbXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1ib2R5bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1mb290bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25tcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbm1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9uX19hY3RpdmVtcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbl9fcHJpbWFyeW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9uX19wcmltYXJ5bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25fX2FjdGl2ZW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0taGVhZG1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYm9keW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9ubXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25tcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbl9fYWN0aXZlbXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25fX3ByaW1hcnltcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbl9fcHJpbWFyeW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9uX19hY3RpdmX7dwIPOw4MAQoAAAAAAwEAHgAAECkHOAkBHhYAABgCADMCAADAQTQCAADAQTICAADAQTECAADAQScIAACAPwAAJQ4MAQo0ADQAAwE0GwAAEBMDNwIAAABBLAIAAEBCEwMAAADmAAAcDgwBCk8ATwADAU8cAAAQCgIZAgAWAgAAiEEAACsODAEKawBrAAMBaxsAABAZBDECAADAQTICAADAQRYCAACIQRMDAAAA5gAAKA4MAQqGAIYAAwGGGwAAEBYFAQMAAgIANwIAAMBBFgIAAIhBDQEAAABnDgwBCqEAoQADAaEdAAAQVRAoAgAAIEInAgAA8EIXAgAAIEJFAgAAgEBGAgAAgEBHAgAAgEBIAgAAgEAiA/Ly8v8BAgATAwauVv8ZAgACAgAfAgAAgD8YAgA1AgAAAEE2AgAAAEEAABsQDgEMvgC+AAUCvh3bJQAAIAcBIgPm5ub/AAAlFBIBEPsAAQD7AAEABQH7AAEmAAAQDQIiAwfBYP8TA/////8AACMYFgEU+yYBAPsmAQAJAvsmASb7TAElAAAgBwEiAwauVv8AAB8UEgEQ+3EBAPtxAQAFAftxARsAABAHARMD////zAEAHxQSARD7jAEA+4wBAAUB+4wBGwAAEAcBEwP////MAQAlFBIBEPunAQD7pwEABQH7pwEdAAAQDQIiA////xQTA9bW1v8BACMYFgEU+8QBAPvEAQAJAvvEAR374QElAAAgBwEiA////yABACUUEgEQ+wYCAPsGAgAFAfsGAiYAABANAiIDB8Fg/xMD/////wEAIxgWART7LAIA+ywCAAkC+ywCJvtSAiUAACAHASIDBq5WmQEADgEMAAAJAQcAAAQBCQIA")},741:(e,t,n)=>{n(57).J.push("AfsIAW1wLWhhbGYtc2NyZWVuLXBvcHVwLS1yb290bXAtaGFsZi1zY3JlZW4tcG9wdXAtLW1hc2ttcC1oYWxmLXNjcmVlbi1wb3B1cC0tbWFza19faW5tcC1oYWxmLXNjcmVlbi1wb3B1cC0tY29udGFpbmVybXAtaGFsZi1zY3JlZW4tcG9wdXAtLWNvbnRhaW5lcl9faW5tcC1oYWxmLXNjcmVlbi1wb3B1cC0tY29udGVudG1wLWhhbGYtc2NyZWVuLXBvcHVwLS1jb250ZW50bXAtaGFsZi1zY3JlZW4tcG9wdXAtLWNvbnRlbnRtcC1oYWxmLXNjcmVlbi1wb3B1cC0tY29udGVudPu9AQkwDgwBCgAAAAADAQAaAAAQHgYoBAAAyEInAwAAyEIWAgAAgEEDAgAEAgAVAEB6RAAASw4MAQoaABoAAwEaGgAAEDkLAgMALwIAAAAALgIAAAAALQIAAAAAMAIAAAAAIgMAAACZFAAAAABKAwECAEsCAchMAwEDAE0CAQAAABgODAEKNAA0AAMBNB4AABAGARQAAIA/AABYDgwBClIAUgADAVIfAAAQRg0CAwBKAwEBAEsCAchMAwEBAE0CAQAnCAAAgD8vCAAAgD8tAgAAAAAuAgAAAABJAQwBAgIAAAAACAAAAAABAwAIAQANAQAAACIODAEKcQBxAAMBcSMAABAQAUkBDAECAgAAAAAIAACAvwAAVQ4MAQqUAJQAAwGUHQAAEEMNJgMAJwMAAMhCIgP/////EwMAAAD/RQIAAEBBRgIAAEBBRwIAAEBBSAIAAEBBAgIAOAIAAEDBNAIAAEBBAwIABAIAAAAZDgwBCrEAsQADAbEdAAAQBwEnAwAAyEIBABkODAEKzgDOAAMBzh0AABAHAScEAADIQgEBHw4MAQrrAOsAAwHrHQAAEA0CIgMZGRn/EwP/////AQIoAwwAAAkBBwAABAECAQAMAAAJAQcAAAQBAgIADAAACQEHAAAEAQkCAA==")},161:(e,t,n)=>{n(57).J.push("AftpBG1wLWhvcml6b25hbC1idWJibGUtLXJvb3RtcC1ob3Jpem9uYWwtYnViYmxlLS1tYXNrbXAtaG9yaXpvbmFsLWJ1YmJsZS0tbWFza19faW5tcC1ob3Jpem9uYWwtYnViYmxlLS1jb250ZW50bXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2xvc2UtY29udGFpbmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2xvc2UtY29udGFpbmVyX19pbm1wLWhvcml6b25hbC1idWJibGUtLWNsb3NlLWJ0bm1wLWhvcml6b25hbC1idWJibGUtLWNsb3NlLWJ0bi1pbWdtcC1ob3Jpem9uYWwtYnViYmxlLS1jbG9zZS1idG5fX2hvdmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY29udGVudC1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLW1lbnUtY29udGFpbmVyX19pbm1wLWhvcml6b25hbC1idWJibGUtLW1lbnVtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWJlZm9yZW1wLWhvcml6b25hbC1idWJibGUtLW1lbnUtaW5uZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWFmdGVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2VsbG1wLWhvcml6b25hbC1idWJibGUtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLWNlbGxfX2hvdmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2VsbC1pbWdtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsLWRlc2NtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsLWltZy1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsLWltZy1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsX19ob3Zlcm1wLWhvcml6b25hbC1idWJibGUtLWNlbGwtZGVzY21wLWhvcml6b25hbC1idWJibGUtLW1lbnUtaW5uZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWlubmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2xvc2UtY29udGFpbmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tbWVudS1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1jb250ZW50LWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLWNsb3NlLWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLW1lbnUtY29udGFpbmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY29udGVudC1jb250YWluZXL7WQUeMA4MAQoAAAAAAwEAGQAAEB4GKAQAAMhCJwMAAMhCFgIAAIBBAwIABAIAFQBAekQAAEsODAEKGQAZAAMBGRkAABA5CwIDAC8CAAAAAC4CAAAAAC0CAAAAADACAAAAACIDAAAA2RQAAAAASgMBAgBLAgHITAMBAwBNAgEAAAAYDgwBCjIAMgADATIdAAAQBgEUAACAPwAAIg4MAQpPAE8AAwFPHAAAEBADAQMAKAQAAMhCJwMAAMhCAAA9DgwBCmsAawADAWskAAAQKwcCAgAoBAAAyEJKAwEBAEsCAchMAwEBAE0CAQBJAQwBAggAAIC/AgAAAAAAACIODAEKjwCPAAMBjygAABAQAUkBDAECCAAAAAACAAAAAAAAbQ4MAQq3ALcAAwG3HgAAEFsRJgMAAgMALQIAAJhCMAIAABRCKAIAAABCJwIAAABCMwIAAIBANAIAAIBAMgIAAIBAMQIAAIBARQIAAIBBRgIAAIBBRwIAAIBBSAIAAIBBAwIABAIAIgM+PD//AAAfDgwBCtUA1QADAdUiAAAQDQIoAgAAwEEnAgAAwEEAABkODAEK9wD3AAMB9yUAABAHASIDNzc3/wAAHxQSARD7HAEA+xwBAAUB+xwBJgAAEAcBKAQAAMhCAABAFBIBEPtCAQD7QgEABQH7QgEjAAAQKAYoBAAAyEJKAwEBAEsCAchMAwEBAE0CAQBJAQwBAggAAIA/AgAAAAAAACgUEgEQ+2UBAPtlAQAFAftlAScAABAQAUkBDAECCAAAAAACAAAAAAAAJRQSARD7jAEA+4wBAAUB+4wBGQAAEA0DKAgAAIA/AQMACAEAAAAeFBIBEPulAQD7pQEABQH7pQEgAAAQBgEOAACAPwAALRQSARD7xQEA+8UBAAUB+8UBHwAAEBUFDgAAAAAoCAAAgD8BAwAIAwANBAAAAB4UEgEQ++QBAPvkAQAFAfvkAR8AABAGAQ4AAEBAAAAcFBIBEPsDAgD7AwIABQH7AwIZAAAQBAECAgAAAF4UEgEQ+xwCAPscAgAFAfscAicAABBGDCYDACcCAABgQigCAABgQjMCAABAQTQCAABAQTICAABAQTECAABAQSID/////0UCAABAQUYCAABAQUcCAABAQUgCAABAQQAALyQiASD7QwIA+0MCAAUB+0MCJwEQ+2oCAPtqAgAFAftqAiAAACAHASID7Ozs/wAAJRQSARD7igIA+4oCAAUB+4oCHQAAEA0CJwIAAABCKAIAAABCAAA0FBIBEPunAgD7pwIABQH7pwIeAAAQHAUWAgAAIEETA////4AYAgA3AgAAAEEoAgAAYEEAAB8UEgEQ+8UCAPvFAgAFAfvFAicAABAHASIDHx8f/wAALyQiASD77AIA++wCAAUB++wCJwEQ+xMDAPsTAwAFAfsTAyAAACAHASIDNzc3/wAAHxQSARD7MwMA+zMDAAUB+zMDHgAAEAcBEwP///+AAAAoFBIBEPtRAwD7UQMABQH7UQMfAAAQEAMmAwAzAgAAiEI0AgAAwEEBACgUEgEQ+3ADAPtwAwAFAftwAx8AABAQAyYDADMCAAAwQjQCAADAQQEBNSUjAhD7jwMA+48DAAUB+48DJAAAEPuzAwD7swMABQH7swMjAAAQDAIOAACAPxACAAAAAAECHxQSARD71gMA+9YDAAUB+9YDJgAAEAcBJwIAAK9DAQI1JSMCEPv8AwD7/AMABQH7/AMkAAAQ+yAEAPsgBAAFAfsgBCMAABAMAicCAAAeQw4AAAAAAQMkFBIBEPtDBAD7QwQABQH7QwQmAAAQDAIOAACAPxACAAAAAAEDPQQOAAALAQkAAAYBBwAAr0MOAAALAQkAAAYBCAAAr0MOAAALAQkAAAYBBADAJkQOAAALAQkAAAYBBQDAJkQ=")},521:(e,t,n)=>{n(57).J.push("AUhhZC1za2lwLWNhcmQtLXJvb3RhZC1za2lwLWNhcmQtLWljb25hZC1za2lwLWNhcmQtLXRpdGxlYWQtc2tpcC1jYXJkLS1zdWK1BDYODAEKAAAAAAMBABIAABAkCCgEAADIQicDAADIQgEDAAgDAAoCAA0BACIDAAAAmRUAQHpEAAAlDgwBChIAEgADARISAAAQEwMnAgCAu0MoAgAAcEM4AgAAwEEAACgODAEKJAAkAAMBJBMAABAWBBMD/////xYCAACIQTgCAAAAQRgCAAAALQ4MAQo3ADcAAwE3EQAAEBsFFM3MTD8TA/////8WAgAAYEE4AgAAwEAYAgAAAAEA")},431:(e,t,n)=>{n(57).J.push("AftzAWF1dGhvcml6ZS0tcm9vdGF1dGhvcml6ZS0tbWFza2F1dGhvcml6ZS0tbWFzay1pbmF1dGhvcml6ZS0tY29udGFpbmVyYXV0aG9yaXplLS1jb250ZW50YXV0aG9yaXplLS1jb250ZW50LWluYXV0aG9yaXplLS1oZWFkYXV0aG9yaXplLS1pY29uYXV0aG9yaXplLS10aXRsZWF1dGhvcml6ZS0tYm9keWF1dGhvcml6ZS0tYXBwbHktaW5mb2F1dGhvcml6ZS0tYnV0dG9uc2F1dGhvcml6ZS0tYnV0dG9uYXV0aG9yaXplLS1jYW5jZWxhdXRob3JpemUtLWNvbmZpcm1hdXRob3JpemUtLWNvbnRhaW5lcmF1dGhvcml6ZS0tY29udGFpbmVyYXV0aG9yaXplLS1jb250ZW50YXV0aG9yaXplLS10aXRsZWF1dGhvcml6ZS0tYXBwbHktaW5mb2F1dGhvcml6ZS0tY2FuY2Vs++4DFTkODAEKAAAAAAMBAA8AABAnCSgEAADIQicDAADIQgEDABYCAACAQQMCAAQCAAgDAAoCABUAQHpEAAA8DgwBCg8ADwADAQ8PAAAQKggnCAAAgD8oCAAAgD8iAwAAAP8UAAAAAEoDAQIASwIByEwDAQEATQIBAAAAGA4MAQoeAB4AAwEeEgAAEAYBFM3MzD4AAD0ODAEKMAAwAAMBMBQAABArBwMCAAQCACgIAACAPwIDAC0IAAAAPzACAABAwUkBDAECCAAAAL8CAAAAAAAAfA4MAQpEAEQAAwFEEgAAEGoUAQMACAMASgMBAQBLAgHITAMBAQBNAgEAMwIAAAAANAIAAAAAMgIAAMBBMQIAAMBBJwgAAIA/KAIAAHpDRQIAAEBBRgIAAEBBRwIAAEBBSAIAAEBBIgP/////AgMALwgAAIA/LQIAAAAAAAAiDgwBClYAVgADAVYVAAAQEAFJAQwBAgIAAAAACAAAgL8AAB8ODAEKawBrAAMBaw8AABANAygCAACAQgEDAAoCAAAAHw4MAQp6AHoAAwF6DwAAEA0CJwIAAMBBKAIAAMBBAAA+DgwBCokAiQADAYkQAAAQLAg1AgAAAEEUZmZmPxMDAAAA/xYCAABwQRkCACgCAACoQRcCAACoQQ4AAIA/AAAhDgwBCpkAmQADAZkPAAAQDwMOAACAPwgDADcCAACAQAAAMw4MAQqoAKgAAwGoFQAAECEGFGZmZj8WAgAAiEETAwAAAP8ZAgAoAmZmvkEXAmZmvkEAAEAODAEKvQC9AAMBvRIAABAuCicIAACAPygCAAAgQgIDADACAACcQi0CAAAAABYCAACIQRkCAAEDAAgBAA0BAAAAWA4MAQrPAM8AAwHPEQAAEEYMJwIAAPBCKAIAACBCFwIAACBCGAIANwIAAAAAOAIAAAAANgIAAABBNQIAAABBRQIAAIBARgIAAIBARwIAAIBASAIAAIBAAAAfDgwBCuAA4AADAeARAAAQDQIiA/Ly8v8TAwfBYP8AAB8ODAEK8QDxAAMB8RIAABANAiIDBMFg/xMD/////wAAHxQSARD7AwEA+wMBAAUB+wMBFAAAEAcBJwMAAMhCAQAfFBIBEPsXAQD7FwEABQH7FwEUAAAQBwEnBAAAyEIBAR8UEgEQ+ysBAPsrAQAFAfsrARIAABAHASIDLCws/wECJBQSARD7PQEA+z0BAAUB+z0BEAAAEAwCFM3MTD8TA/////8BAiQUEgEQ+00BAPtNAQAFAftNARUAABAMAhTNzEw/EwP/////AQIlFBIBEPtiAQD7YgEABQH7YgERAAAQDQIiA////xQTA/////8BAigDDAAACQEHAAAEAQIBAAwAAAkBBwAABAECAgAMAAAJAQcAAAQBCQIA")},172:(e,t,n)=>{n(57).J.push("AedmcmFtZXNldC0taGlkZGVuZnJhbWVzZXQtLXJvb3RmcmFtZXNldC0tdGFic2ZyYW1lc2V0LS1wYW5lbHNmcmFtZXNldC0tbGVmdC1wYW5lbGZyYW1lc2V0LS1sZWZ0LXBhZ2VmcmFtZXNldC0tcmlnaHQtcGFuZWxmcmFtZXNldC0tcmlnaHQtcGxhY2Vob2xkZXJmcmFtZXNldC0tcmlnaHQtcGFnZWZyYW1lc2V0LS1yaWdodC1wYWdlLWluZnJhbWVzZXQtLWxlZnQtcGFuZWxmcmFtZXNldC0tcmlnaHQtcGFuZWz72AEMFg4MAQoAAAAAAwEAEAAAEAQBBwIAAAAcDgwBChAAEAADARAOAAAQCgIBAwAoBAAAyEIAAB8ODAEKHgAeAAMBHg4AABANAycCAABwQgMCAAQCAAAAGw4MAQosACwAAwEsEAAAEAkCDgAAgD8BAwAAADEODAEKPAA8AAMBPBQAABAfBScCAADPQzcCAAAAADgCAAAAADYCAACAPzUCAACAPwAALg4MAQpQAFAAAwFQEwAAEBwFAgMALQIAAAAALwIAAAAAJwgAAIA/KAgAAIA/AAAYDgwBCmMAYwADAWMVAAAQBgEOAACAPwAAMQ4MAQp4AHgAAwF4GwAAEB8EAgMALQgAAAA/LwgAAAA/SQEMAQIIAAAAvwgAAAC/AABRDgwBCpMAkwADAZMUAAAQPwoCAwAtAgAAAAAvAgAAAAAnCAAAgD8oCAAAgD9JAQwBAggAAIA/AgAAAABKAwEBAEsEAfuQAUwDAQQATQIBAAAAIg4MAQqnAKcAAwGnFwAAEBABSQEMAQICAAAAAAIAAAAAAAAWDgwBCr4AvgADAb4UAAAQBAEnAQABAC4ODAEK0gDSAAMB0hUAABAcBQIDAC0CAAAAAC8CAAAAACcIAACAPygIAACAPwEAEAEOAAALAQkAAAYBBQBAJ0Q=")},78:(e,t,n)=>{n(57).J.push("AftcAWdhbWUtcmFua2xpc3QtLXJvb3RnYW1lLXJhbmtsaXN0LS1jb250ZW50Z2FtZS1yYW5rbGlzdC0tbGluZWdhbWUtcmFua2xpc3QtLWhlYWRnYW1lLXJhbmtsaXN0LS1jbG9zZWdhbWUtcmFua2xpc3QtLXRpdGxlZ2FtZS1yYW5rbGlzdC0tYm9keWdhbWUtcmFua2xpc3QtLWl0ZW1nYW1lLXJhbmtsaXN0LS1pY29uZ2FtZS1yYW5rbGlzdC0tbmFtZWdhbWUtcmFua2xpc3QtLXNjb3JlZ2FtZS1yYW5rbGlzdC0tYnV0dG9uc2dhbWUtcmFua2xpc3QtLWJ1dHRvbmdhbWUtcmFua2xpc3QtLWJ0bi1pY29uZ2FtZS1yYW5rbGlzdC0tZGlzYWJsZWRnYW1lLXJhbmtsaXN0LS1jb250ZW50Z2FtZS1yYW5rbGlzdC0tY29udGVudPtbAxFODgwBCgAAAAADAQATAAAQPA0oBAAAyEInAwAAyEIBAwAWAgAAgEEDAgAEAgAIAwAKAgANBQAVAEB6RCcIAACAPygIAACAPyIDAAAAgAAAMQ4MAQoTABMAAwETFgAAEB8FRQIAAIBARgIAAIBARwIAAIBASAIAAIBAIgP/////AAAfDgwBCikAKQADASkTAAAQDQIoAgAAgD8iAwAAAA0AADoODAEKPAA8AAMBPBMAABAoCCgCAAA0QgEDAAoCAA0EADMCAAAAADQCAAAAADICAACgQTECAACgQQAAJA4MAQpPAE8AAwFPFAAAEBIDJwIAAIBBKAIAAIBBFAAAAD8AADcODAEKYwBjAAMBYxQAABAlBxMDAAAA5hYCAABgQRkCACgCAACgQRcCAACgQScIzcxMPxgCAAAAKw4MAQp3AHcAAwF3EwAAEBkEMwIAAAAANAIAAAAAMgIAAIBBMQIAAIBBAAAiDgwBCooAigADAYoTAAAQEAQoAgAAjEIBAwAIAQAKAgAAADcODAEKnQCdAAMBnRMAABAlBicCAAAgQigCAAAgQkUCAACAQEYCAACAQEcCAACAQEgCAACAQAAAVQ4MAQqwALAAAwGwEwAAEEMNJwgAAAA/NwIAAEBBOAIAAEBBNgIAAEBBNQIAAEBBFgIAAIhBKAIAAMBBFwIAAMBBAwIABAIAGwIAHAIAEwMAAADmAAAzDgwBCsMAwwADAcMUAAAQIQYOAACAPxYCAABgQSgCAACgQRcCAACgQRMDAAAAgBgDAAAAQw4MAQrXANcAAwHXFgAAEDEKKAIAADBCAQMACAEACgIADQUAIgP39/f/MwIAAAAANAIAAAAAMgjNzEw+MQjNzEw+AABGDgwBCu0A7QADAe0VAAAQNAonAgAAwEEoAgAAwEFFAgAAQEFGAgAAQEFHAgAAQEFIAgAAQEEBAwAKAgANAQAiA+rq6v8AACUUEgEQ+wIBAPsCAQAFAfsCARcAABANAicCAADAQCgCAABAQQAAHhQSARD7GQEA+xkBAAUB+xkBFwAAEAYBFAAAAD8AAB8UEgEQ+zABAPswAQAFAfswARYAABAHAScDAACqQgEAHxQSARD7RgEA+0YBAAUB+0YBFgAAEAcBJwQAAKpCAQEbAgwAAAkBBwAABAECAQAMAAAJAQcAAAQBAgIA")},261:(e,t,n)=>{n(57).J.push("AZhuYXZpZ2F0ZS10by1tcC0tYm9keW5hdmlnYXRlLXRvLW1wLS1ib2R5LXBsYWNlaG9sZGVybmF2aWdhdGUtdG8tbXAtLWxvZ29uYXZpZ2F0ZS10by1tcC0tbmFtZW5hdmlnYXRlLXRvLW1wLS1kZXNjbmF2aWdhdGUtdG8tbXAtLW5hbWVuYXZpZ2F0ZS10by1tcC0tZGVzY/syAQcoDgwBCgAAAAADAQAUAAAQFgUBAwAzAgAAwEE0AgAAQEEIAwAKAgAAABkODAEKFAAUAAMBFCAAABAHATMCAACAQQAAQw4MAQo0ADQAAwE0FAAAEDEJKAIAAEBCJwIAAEBCOAIAAABBRQIAAMBBRgIAAMBBRwIAAMBBSAIAAMBBAwIABAIAAAA9DgwBCkgASAADAUgUAAAQKwgQAQABAgATAwAAAOYWAgAAiEEXAgAAsEE3AgAAAEEoAgAAsEEnCAAAgD8AADcODAEKXABcAAMBXBQAABAlBxABAAECABMDAAAATRYCAABgQRcCAACgQSgCAACgQScIAACAPwAAGQ4MAQpwAHAAAwFwFAAAEAcBEwP////mAQAZDgwBCoQAhAADAYQUAAAQBwETA////00BAA4BDAAACQEHAAAEAQkCAA==")},426:(e,t,n)=>{n(57).J.push("AfuuAXNoYXJlLWltYWdlLS1tYXNrc2hhcmUtaW1hZ2UtLW1hc2tfX2luc2hhcmUtaW1hZ2UtLWNvbnRhaW5lcnNoYXJlLWltYWdlLS1sYW5kc2NhcGUtY29udGFpbmVyc2hhcmUtaW1hZ2UtLWNvbnRhaW5lcl9faW5zaGFyZS1pbWFnZS0tbGFuZHNjYXBlLWNvbnRhaW5lcl9faW5zaGFyZS1pbWFnZS0tY29udGFpbmVyc2FmZS1hcmVhLWluc2V0LWxlZnRzYWZlLWFyZWEtaW5zZXQtYm90dG9tc2FmZS1hcmVhLWluc2V0LXJpZ2h0c2hhcmUtaW1hZ2UtLWxhbmRzY2FwZS1jb250YWluZXJzaGFyZS1pbWFnZS0tc2Nyb2xsZXItY29udGFpbmVyc2hhcmUtaW1hZ2UtLXNjcm9sbGVyc2hhcmUtaW1hZ2UtLWltZ3NoYXJlLWltYWdlLS1pbWctd3JhcHBlcnNoYXJlLWltYWdlLS1jb250YWluZXJzaGFyZS1pbWFnZS0tc2Nyb2xsZXJzaGFyZS1pbWFnZS0taW1nLXdyYXBwZXL7zAINSw4MAQoAAAAAAwEAEQAAEDkLAgMALwIAAAAALgIAAAAALQIAAAAAMAIAAAAAIgMAAADZFAAAAABKAwECAEsCAchMAwEDAE0CAQAAABgODAEKEQARAAMBERUAABAGARQAAIA/AAA+GRcCCiYAJgADASYWAAAKPAA8AAMBPCAAABAhCBQAAAAASgMBAgBLAgHITAMBAwBNAgEAAQMACAEADQEAAAAjGRcCClwAXAADAVwaAAAKdgB2AAMBdiQAABAGARQAAIA/AAA6DgwBCpoAmgADAZoWAAAQKAcmAwACAwAvAgAAAAAtCQGwFAAAMAkBxBYAAC4JAdoVAAA0AgAAQkMAAB8ODAEK7wDvAAMB7yAAABANAicIAACAPygIAACAPwAAWBQSARD7DwEA+w8BAAUB+w8BHwAAEEAMJwgAAIA/MwIAAAAANAIAAAAAMgIAAAAAMQIAAAAANwIAAAAAOAIAAAAANgIAAAAANQIAAAAAAQMACAMADQEAAABVFBIBEPsuAQD7LgEABQH7LgEVAAAQPQonCAAAgD8sCAAAgD8zAgAAAAA0AgAAAAAyAgAAAAAxAgAAAAA3AgAAAAA4AgAAAAA2AgAAAAA1AgAAAAAAADcUEgEQ+0MBAPtDAQAFAftDARAAABAfBkUCAABAQUYCAABAQUcCAABAQUgCAABAQQMCAAQCAAAAPxQSARD7UwEA+1MBAAUB+1MBGAAAECcHJgMAMwIAADBCNAIAAABCMQIAAABCMgIAAABCJwgAAIA/DwAAAAAAACUUEgEQ+2sBAPtrAQAFAftrARYAABANAjQCAAAAADACAAAAAAEAHxQSARD7gQEA+4EBAAUB+4EBFQAAEAcBJwgAAIA/AQA6FBIBEPuWAQD7lgEABQH7lgEYAAAQIgYmAwAzAgAAwEE0AgAAwEExAgAAAAAyAgAAAAAnCAAAgD8BAA4BDAAACQEHAAAEAQICAA==")},13:(e,t,n)=>{n(57).J.push("ATN0b2FzdC0tcm9vdHRvYXN0LS1jb250ZW50dG9hc3QtLWxvYWRpbmd0b2FzdC0tdGl0bGXLBCgODAEKAAAAAAMBAAsAABAWBScDAADIQigEAADIQgEDAAoCAA0BAAAAVQ4MAQoLAAsAAwELDgAAEEMMKAIAADBCMwIAAAAANAIAAAAAMgIAAKBBMQIAAKBBRQIAAABBRgIAAABBRwIAAABBSAIAAABBIgNMTEz/CgIAAQMAAAAlDgwBChkAGQADARkOAAAQEwMnAgAAgEEoAgAAgEE2AgAAgEAAACQODAEKJwAnAAMBJwwAABASAxRmZmY/FgIAAGBBEwP/////AAABAA==")},164:(e,t,n)=>{n(57).J.push("AftGBHVzZXItcHJvZmlsZS0tcm9vdHVzZXItcHJvZmlsZS0taGlkZXVzZXItcHJvZmlsZS0tbWFza3VzZXItcHJvZmlsZS0tbWFzay1pbnVzZXItcHJvZmlsZS0tY29udGFpbmVydXNlci1wcm9maWxlLS1jb250ZW50dXNlci1wcm9maWxlLS1jb250ZW50LWludXNlci1wcm9maWxlLS1oZWFkdXNlci1wcm9maWxlLS1ib2R5dXNlci1wcm9maWxlLS1idXR0b25zdXNlci1wcm9maWxlLS1pY29udXNlci1wcm9maWxlLS10aXRsZXVzZXItcHJvZmlsZS0tYXBwbHktaW5mb3VzZXItcHJvZmlsZS0tc3BsaXQtbGluZXVzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZHVzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZF9fcGx1c3VzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZF9fdGV4dHVzZXItcHJvZmlsZS0taW5mby1pdGVtdXNlci1wcm9maWxlLS1pbmZvLWl0ZW1fX2xlZnR1c2VyLXByb2ZpbGUtLWluZm8taXRlbV9fYXZhdGFydXNlci1wcm9maWxlLS1pbmZvLWl0ZW1fX2Rlc2NfX3dycHVzZXItcHJvZmlsZS0taW5mby1pdGVtX19uaWNrbmFtZXVzZXItcHJvZmlsZS0taW5mby1pdGVtX19kZXNjdXNlci1wcm9maWxlLS1pbmZvLWl0ZW1fX3JpZ2h0dXNlci1wcm9maWxlLS1pY29uLWNoZWNrZWR1c2VyLXByb2ZpbGUtLWV4Y2VlZC10aXB1c2VyLXByb2ZpbGUtLXVzZS1vdGhlci1hdmF0YXJ1c2VyLXByb2ZpbGUtLWJ1dHRvbnVzZXItcHJvZmlsZS0tY2FuY2VsdXNlci1wcm9maWxlLS1jb25maXJtdXNlci1wcm9maWxlLS1leGNlZWQtdGlwdXNlci1wcm9maWxlLS1jb250YWluZXJ1c2VyLXByb2ZpbGUtLWNvbnRhaW5lcnVzZXItcHJvZmlsZS0taGVhZHVzZXItcHJvZmlsZS0tYnV0dG9uc3VzZXItcHJvZmlsZS0tY29udGVudHVzZXItcHJvZmlsZS0tdGl0bGV1c2VyLXByb2ZpbGUtLWluZm8taXRlbV9fbmlja25hbWV1c2VyLXByb2ZpbGUtLWluZm8taXRlbV9fZGVzY3VzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZF9fdGV4dHVzZXItcHJvZmlsZS0tYXBwbHktaW5mb3VzZXItcHJvZmlsZS0tdXNlLW90aGVyLWF2YXRhcnVzZXItcHJvZmlsZS0tY2FuY2VsdXNlci1wcm9maWxlLS1leGNlZWQtdGlwdXNlci1wcm9maWxlLS1zcGxpdC1saW5l+0kILTkODAEKAAAAAAMBABIAABAnCSgEAADIQicDAADIQgEDABYCAABgQQMCAAQCAAgDAAoCABUAQHpEAAAZDgwBChIAEgADARISAAAQBwEoAgAAAAAAADwODAEKJAAkAAMBJBIAABAqCCcIAACAPygIAACAPyIDAAAA/xQAAAAASgMBAgBLAgHITAMBAQBNAgEAAAAYDgwBCjYANgADATYVAAAQBgEUAAAAPwAAPQ4MAQpLAEsAAwFLFwAAECsHAwIABAIAKAgAAIA/AgMALQgAAAA/MAIAAEDBSQEMAQIIAAAAvwIAAAAAAAB/DgwBCmIAYgADAWIVAAAQbRUBAwAnCAAAgD8mAwAzAgAAAAA0AgAAAAAyAgAAwEExAgAAwEEIAwBKAwEBAEsCAchMAwEBAE0CAQA0AgAAQEFFAgAAQEFGAgAAQEFHAgAAQEFIAgAAQEEiA/////8CAwAvCAAAgD8tAgAAAAAAACIODAEKdwB3AAMBdxgAABAQAUkBDAECAgAAAAAIAACAvwAAKw4MAQqPAI8AAwGPEgAAEBkFNwIAAABCOAIAAIBBKAIAAMBBAQMACgIAAAAhDgwBCqEAoQADAaESAAAQDwMOAACAPwgDADQCAABCQwAARg4MAQqzALMAAwGzFQAAEDQLNQIAAMBBJwgAAIA/KAIAACBCAgMAMAIAAMRCLQIAAAAAFgIAAIhBGQIAAQMACAEADQEAAAA3DgwBCsgAyAADAcgSAAAQJQYnAgAAwEEoAgAAwEFFCAAAAD9GCAAAAD9HCAAAAD9ICAAAAD8AAD4ODAEK2gDaAAMB2hMAABAsCDUCAAAgQRRmZmY/EwMAAAD/FgIAAHBBGQIAKAIAAKhBFwIAAKhBDgAAgD8AAEUODAEK7QDtAAMB7RgAABAzCScIAACAPygCAABAQhRmZmY/FgIAAIhBEwMAAAD/GQIAFwJmZr5BNwIAAABBOAIAAIBBAAArFBIBEPsFAQD7BQEABQH7BQEYAAAQEwMnCAAAgD8oAgAAgD8iAwAAAA0AACUUEgEQ+x0BAPsdAQAFAfsdARsAABANAygCAACAQgEDAAoCAAAAMRQSARD7OAEA+zgBAAUB+zgBIQAAEBkEJwIAAMBBKAIAAMBBNQIAAABBNgIAAIBBAAA2FBIBEPtZAQD7WQEABQH7WQEhAAAQHgUOAACAPygCAADAQRcCAADAQRYCAACIQRMDAAAA5gAAKBQSARD7egEA+3oBAAUB+3oBFwAAEBAEKAIAAIBCAQMACgIADQQAAAAqFBIBEPuRAQD7kQEABQH7kQEdAAAQEgQoCAAAgD8BAwAKAgAOAACAPwAARhQSARD7rgEA+64BAAUB+64BHwAAEC4IAQUANgIAAABBJwIAACBCKAIAACBCRQIAAIBARgIAAIBARwIAAIBASAIAAIBAAAAtFBIBEPvNAQD7zQEABQH7zQEiAAAQFQUBAwAoCAAAgD8IAwANAQAOAACAPwAAMRQSARD77wEA++8BAAUB++8BIQAAEBkEKAIAAMBBFwIAAMBBEwMAAADmFgIAAIhBAAA8FBIBEPsQAgD7EAIABQH7EAIdAAAQJAY3AgAAAEAoAgAAoEEXAgAAoEEWAgAAYEETAwAAAP8UmpmZPgAAOhQSARD7LQIA+y0CAAUB+y0CHgAAECIIJwIAAMBBKAIAAMBBAwIABAIANgIAAABBAQMACgIADQEAAAAlFBIBEPtLAgD7SwIABQH7SwIaAAAQDQInAgAAwEEoAgAAwEEAAD0UEgEQ+2UCAPtlAgAFAftlAhgAABAlBicIAACAPygCAACgQRcCAACgQTcCAAAAQRYCAABgQRMDAAAATQAAPRQSARD7fQIA+30CAAUB+30CHgAAECUGJwgAAIA/KAIAAKBBFwIAAKBBNwIAAABBFgIAAGBBEwNZa5X/AABeFBIBEPubAgD7mwIABQH7mwIUAAAQRgwnAgAA8EIoAgAAIEIXAgAAIEIYAgA3AgAAAAA4AgAAAAA2AgAAAEE1AgAAAEFFAgAAgEBGAgAAgEBHAgAAgEBIAgAAgEAAACUUEgEQ+68CAPuvAgAFAfuvAhQAABANAiIDAAAADRMDB8Fg/wAAJRQSARD7wwIA+8MCAAUB+8MCFQAAEA0CIgMHwWD/EwP/////AAAfFBIBEPvYAgD72AIABQH72AIYAAAQBwETAwAAAE0AAB8UEgEQ+/ACAPvwAgAFAfvwAhcAABAHAScDAADIQgEAHxQSARD7BwMA+wcDAAUB+wcDFwAAEAcBJwQAAMhCAQEfFBIBEPseAwD7HgMABQH7HgMSAAAQBwE3AgAAwEEBAR8UEgEQ+zADAPswAwAFAfswAxUAABAHATACAABUQgEBHxQSARD7RQMA+0UDAAUB+0UDFQAAEAcBIgMeHh7/AQIkFBIBEPtaAwD7WgMABQH7WgMTAAAQDAIUzcxMPxMD/////wECHxQSARD7bQMA+20DAAUB+20DIQAAEAcBEwP////MAQIfFBIBEPuOAwD7jgMABQH7jgMdAAAQBwETA////00BAh8UEgEQ+6sDAPurAwAFAfurAyEAABAHARMD////zAECJBQSARD7zAMA+8wDAAUB+8wDGAAAEAwCFM3MTD8TA/////8BAh8UEgEQ++QDAPvkAwAFAfvkAx4AABAHARMDfZCp/wECJRQSARD7AgQA+wIEAAUB+wIEFAAAEA0CIgP///8UEwP/////AQIfFBIBEPsWBAD7FgQABQH7FgQYAAAQBwETA////00BAh8UEgEQ+y4EAPsuBAAFAfsuBBgAABAHASID////DQECKAMMAAAJAQcAAAQBAgEADAAACQEHAAAEAQICAAwAAAkBBwAABAEJAgA=")},300:(e,t,n)=>{n(57).J.push("AUB2ZXJpZnktdGlwLS1yb290dmVyaWZ5LXRpcC0tY29udGVudHZlcmlmeS10aXAtLWNkdmVyaWZ5LXRpcC0tbXNnzAQfDgwBCgAAAAADAQAQAAAQDQInAwAAyEIoBAAAyEIAAEYODAEKEAAQAAMBEBMAABA0CRYCAAAwQRcCAACAQRMD/////0UCAAAgQUYCAAAgQUcCAAAgQUgCAAAgQSIDAAAAMwIDAAAAKw4MAQojACMAAwEjDgAAEBkGJwIAAKBCKAIAAKBBAQMACAEACgIADQEAAAA3DgwBCjEAMQADATEPAAAQJQYnAgAA8EIoAgAAIEIzAgAAQEA0AgAAQEAyAgAAwEAxAgAAwEAAAAEA")},605:(e,t,n)=>{n(57).J.push("AfsMAndlcnVuLS1yb290d2VydW4tLW1hc2t3ZXJ1bi0tbWFzay1pbndlcnVuLS1jb250YWluZXJ3ZXJ1bi0tY29udGVudHdlcnVuLS1jb250ZW50LWlud2VydW4tLW5vdGUtY29udGVudHdlcnVuLS1ub3RlLWNvbnRlbnQtaW53ZXJ1bi0tbm90ZS1iYWNrd2VydW4tLW5vdGUtYmFjay13cnB3ZXJ1bi0tbm90ZS10aXRsZXdlcnVuLS1ub3RlLWRldGFpbHdlcnVuLS1ub3RlLWd1aWRld2VydW4tLW5vdGUtZ3VpZGUtd3JhcHdlcnVuLS1oZWFkd2VydW4tLXRpdGxld2VydW4tLWluZm93ZXJ1bi0taW5mby13cnB3ZXJ1bi0tYm9keXdlcnVuLS1zcG9ydC1saXN0d2VydW4tLXNwb3J0LWl0ZW13ZXJ1bi0tYnV0dG9uc3dlcnVuLS1idXR0b253ZXJ1bi0tY2FuY2Vsd2VydW4tLWNvbmZpcm13ZXJ1bi0tY29udGFpbmVyd2VydW4tLWNvbnRhaW5lcndlcnVuLS1jb250ZW50d2VydW4tLW5vdGUtY29udGVudHdlcnVuLS10aXRsZXdlcnVuLS1ub3RlLXRpdGxld2VydW4tLW5vdGUtZGV0YWlsd2VydW4tLXNwb3J0LWxpc3R3ZXJ1bi0tY2FuY2Vs+5sGIjkODAEKAAAAAAMBAAsAABAnCSgEAADIQicDAADIQgEDABYCAACAQQMCAAQCAAgDAAoCABUAQHpEAAA8DgwBCgsACwADAQsLAAAQKggnCAAAgD8oCAAAgD8iAwAAAP8UAAAAAEoDAQIASwIByEwDAQEATQIBAAAAGA4MAQoWABYAAwEWDgAAEAYBFM3MzD4AAD0ODAEKJAAkAAMBJBAAABArBwMCAAQCACgIAACAPwIDAC0IAAAAPzACAABAwUkBDAECCAAAAL8CAAAAAAAAZA4MAQo0ADQAAwE0DgAAEFIQAQMACAMASgMBAQBLAgHITAMBAQBNAgEAJwgAAIA/KAIAALNDRQIAAEBBRgIAAEBBRwIAAEBBSAIAAEBBIgP/////AgMALwgAAIA/LQIAAAAAAAAiDgwBCkIAQgADAUIRAAAQEAFJAQwBAgIAAAAACAAAgL8AAGQODAEKUwBTAAMBUxMAABBSEAIDADACAAAAAC0IAACAPycIAACAPygCAACpQyID/////0UCAABAQUYCAABAQUcCAABAQUgCAABAQQEDAAgDAEoDAQEASwIByEwDAQQATQIBAAAAIg4MAQpmAGYAAwFmFgAAEBABSQEMAQIIAACAvwIAAAAAAAAiDgwBCnwAfAADAXwQAAAQEAMBBQAnAgAAMEEoAgAAwEEAADcODAEKjACMAAMBjBQAABAlCAIDAC0CAAAAAC8CAAAAACcCAAAkQigCAACAQgEDAA0BAAoCAAAAPA4MAQqgAKAAAwGgEQAAECoIFGZmZj8WAgAAcEEnCAAAgD8oAgAAqEEXAgAAqEETAwAAAP8YAgAZAgAAAEkODAEKsQCxAAMBsRIAABA3CRYCAABgQSgCAAA4QjcCAABAQTYCAAAAADgCAACgQTUCAAAAADECAADAQTICAADAQRMDAAAA5gAAHw4MAQrDAMMAAwHDEQAAEA0CJwIAAIxDKAIAAOxCAAAlDgwBCtQA1AADAdQWAAAQEwQoAgAA7EInCAAAgD8BAwANAQAAAB8ODAEK6gDqAAMB6gsAABANAygCAACAQgEDAAoCAAAAPg4MAQr1APUAAwH1DAAAECwINQIAAMBBFGZmZj8TAwAAAP8WAgAAcEEZAgAoAgAAqEEXAgAAqEEOAACAPwAAKBQSARD7AQEA+wEBAAUB+wEBCwAAEBADAQUAJwIAAKBBKAIAAKBBAABSFBIBEPsMAQD7DAEABQH7DAEPAAAQOgsCAwAuAgAAAAAvAgAAAAAzAgAAIEE0AgAAIEEyAgAAIEExAgAAIEEnAgAAQEIoCAAAgD8BAwAKAgAAACEUEgEQ+xsBAPsbAQAFAfsbAQsAABAJAg4AAIA/CAMAAABDFBIBEPsmAQD7JgEABQH7JgERAAAQKwgBAwA3AgAAgEA2AgAAAAA4AgAAAAA1AgAAoEEIAwATAwAAAIAWAgAAYEEAACsUEgEQ+zcBAPs3AQAFAfs3AREAABATAzgCAAAAQSgCAACgQRcCAACgQQAARhQSARD7SAEA+0gBAAUB+0gBDgAAEC4KJwgAAIA/KAIAACBCAgMAMAIAAJxCLQIAAAAAFgIAAIhBGQIAAQMACAEADQEAAABeFBIBEPtWAQD7VgEABQH7VgENAAAQRgwnAgAA8EIoAgAAIEIXAgAAIEIYAgA3AgAAAAA4AgAAAAA2AgAAAEE1AgAAAEFFAgAAgEBGAgAAgEBHAgAAgEBIAgAAgEAAACUUEgEQ+2MBAPtjAQAFAftjAQ0AABANAiID8vLy/xMDB8Fg/wAAJRQSARD7cAEA+3ABAAUB+3ABDgAAEA0CIgMEwWD/EwP/////AAAfFBIBEPt+AQD7fgEABQH7fgEQAAAQBwEnAwAAyEIBAB8UEgEQ+44BAPuOAQAFAfuOARAAABAHAScEAADIQgEBHxQSARD7ngEA+54BAAUB+54BDgAAEAcBIgMsLCz/AQIfFBIBEPusAQD7rAEABQH7rAETAAAQBwEiAywsLP8BAiQUEgEQ+78BAPu/AQAFAfu/AQwAABAMAhTNzEw/EwP/////AQIkFBIBEPvLAQD7ywEABQH7ywERAAAQDAIUzcxMPxMD/////wECJBQSARD73AEA+9wBAAUB+9wBEgAAEAwCFM3MTD8TA/////8BAh8UEgEQ++4BAPvuAQAFAfvuAREAABAHARMD////gAECJRQSARD7/wEA+/8BAAUB+/8BDQAAEA0CIgP///8UEwP/////AQIoAwwAAAkBBwAABAECAQAMAAAJAQcAAAQBAgIADAAACQEHAAAEAQkCAA==")},730:(e,t,n)=>{n(57).J.push("AYhfX3d4X3NjbF9fcm9vdF9ub2RlX193eF9zY2xfX2xheWVycm9vdHJvb3QtaW5jb250ZW50cm9vdGNvbnRlbnRjb250ZW50LWlucm9vdGNvbnRlbnRjb250ZW50LWludGl0bGVib2R5YnV0dG9uc2J1dHRvbm9rb2staG92ZXJkZW55LWhvdmVy+2MDEhkODAEKAAAAAAMBABMAABAHAScDAADIQgAAGA4MAQoTABMAAwETDwAAEAYBFQBAekQAAEUODAEKIgAiAAMBIgQAABAzCygEAADIQgEDACIDICAgvwMCAAQCABYCAACAQRTNzMw9SgMBAgBLAgHITAMBBABNAgEAAAAYDgwBCiYAJgADASYHAAAQBgEUAACAPwAAUg4MAQotAC0AAwEtBwAAEEAMIgP4+Pj/EwNERET/RQIAACBBRgIAACBBRwIAACBBSAIAACBBSgMBAQBLAgHITAMBBABNAgEANAIAACBBGAIAAAAWDgwBCjQANAADATQEAAAQBAEIBAABACgODAEKOAA4AAMBOAcAABAWAigCAACbQ0kBDAECAgAAAAACAACbQwEAIg4MAQo/AD8AAwE/CgAAEBABSQEMAQICAAAAAAIAACBBAQAWDgwBCkkASQADAUkEAAAQBAEIAgABAS4ODAEKTQBNAAMBTQcAABAcAygEAADIQicCAADNQ0kBDAECAgAAzUMCAAAAAAEBIg4MAQpUAFQAAwFUCgAAEBABSQEMAQICAAAgQQIAAAAAAQEiDgwBCl4AXgADAV4FAAAQEAMZAgAWBwAAwD8XBwAAAEAAADYODAEKYwBjAAMBYwQAABAkBg4AAIA/FgeamZk/NwIAAEhCOAIAAEhCNgIAAAAANQIAAAAAAAAoDgwBCmcAZwADAWcHAAAQFgUWB5qZmT8BAwAIAQANAQA0AgAASEIAAKMODAEKbgBuAAMBbgYAABCRGicCAADwQjMHAAAAPzQHAAAAPzIHzczMPTEHzczMPSID/////zcCAAAAADgCAAAAADYCAACgQTUCAACgQUUCAACAQEYCAACAQEcCAACAQEgCAACAQDkCAACAPzwCAACAPz8CAACAP0ICAACAPzoBAD0BAEABAEMBADsDzMzM/z4DzMzM/0EDzMzM/0QDzMzM/wAAVQ4MAQp0AHQAAwF0AgAAEEMNIgMA/9L/OQIAAIA/PAIAAIA/PwIAAIA/QgIAAIA/OgEAPQEAQAEAQwEAOwMAzKr/PgMAzKr/QQMAzKr/RAMAzKr/AAAZDgwBCnYAdgADAXYIAAAQBwEiAwDMqv8AABkODAEKfgB+AAMBfgoAABAHASIDzMzM/wAAGwIMAAAJAQcAAAQBAgEADAAACQEHAAAEAQICAA==")}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";n.r(i),n.d(i,{exparser:()=>e.exparser,getExparserElementByViewId:()=>F,getMainRoot:()=>N,initScl:()=>B,onViewportResize:()=>M,triggerRender:()=>U});var e=n(821),t=(n(730),n(995));const r=[];e.onThemeChange((e=>{r.forEach((t=>t(e)))})),t.registerBehavior({is:"wx-theme",data:{theme:"light"},created(){this._onThemeChange({theme:e.getTheme()})},attached(){this.__onThemeChange=this._onThemeChange.bind(this),r.push(this.__onThemeChange)},detached(){r.splice(r.indexOf(this.__onThemeChange),1)},methods:{_onThemeChange({theme:e}){this.setData({theme:e})}}});var o=function(e){return null==e?Object.create(null):e},a=function(e,t){return!0===e||(e?e[t]:void 0)};n(668);e.exparser.registerElement({is:"mp-bubble-action-sheet",behaviors:["wx-theme"],options:{multipleSlots:!0,classPrefix:"mp-bubble-action-sheet",writeIdToDOM:!0},template:{content:(s={},c={P:"",C:[{T:"mp-half-screen-popup",A:{show:{L:function(e,t,n){return e.show},F:function(e,t,n,i){return e.show}},mask:{L:function(e,t,n){return e.mask},F:function(e,t,n,i){return e.mask}},"mask-closable":{L:function(e,t,n){return e.maskClosable},F:function(e,t,n,i){return e.maskClosable}},"bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{class:"mask",slot:"mask"},C:[{V:5,N:"mask",C:[]}]},{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:"menu"},C:[{V:1,B:[{B:{L:function(e,t,n){return!!e.theme||void 0},F:function(e,t,n,i){return"light"===e.theme}},C:[{V:2,L:{M:["actions"],L:function(e,t,n){return e.actions},F:function(e,t,n,i){return e.actions}},K:"index",C:[{T:"wx-view",A:{class:"cell","hover-class":"cell__hover","data-index":{L:function(e,t,n){return t[1]},F:function(e,t,n,i){return t[1]}},"bind:tap":"buttonTap"},C:[{T:"wx-view",A:{class:"cell-img-container"},C:[{T:"wx-image",A:{class:"cell-img",src:{L:function(e,t,n){return a(t[0],"imageSrc")},F:function(e,t,n,i){return o(t[0]).imageSrc}}},C:[]}]},{T:"wx-view",A:{class:"cell-desc"},C:[{S:{L:function(e,t,n){return a(t[0],"text")},F:function(e,t,n,i){return o(t[0]).text}}}]}]}]}]},{B:{L:function(e,t,n){return!!e.theme||void 0},F:function(e,t,n,i){return"dark"===e.theme}},C:[{V:2,L:{M:["actions"],L:function(e,t,n){return e.actions},F:function(e,t,n,i){return e.actions}},K:"index",C:[{T:"wx-view",A:{class:"cell","hover-class":"cell__hover","data-index":{L:function(e,t,n){return t[1]},F:function(e,t,n,i){return t[1]}},"bind:tap":"buttonTap"},C:[{T:"wx-view",A:{class:"cell-img-container"},C:[{T:"wx-image",A:{class:"cell-img",src:{L:function(e,t,n){return a(t[0],"imageDarkSrc")},F:function(e,t,n,i){return o(t[0]).imageDarkSrc}}},C:[]}]},{T:"wx-view",A:{class:"cell-desc"},C:[{S:{L:function(e,t,n){return a(t[0],"text")},F:function(e,t,n,i){return o(t[0]).text}}}]}]}]}]}]}]},{T:"wx-view",A:{class:"foot"},C:[{T:"wx-view",A:{class:"button","hover-class":"button__hover","bind:tap":"handleClose"},C:[{T:"wx-view",A:{class:"button__before"},C:[]},{T:"wx-view",A:{class:"button__content"},C:[{S:{L:function(e,t,n){return e.cancelText},F:function(e,t,n,i){return e.cancelText}}}]}]}]}]}]}],BM:{maskClosable:[[0,"mask-closable"]],mask:[[0,"mask"]],show:[[0,"show"]],cancelText:[[0,1,1,0,1,0]]}},s[""]=function(){return c},function(e){var t=s[e];return t?t():null})},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},cancelText:{type:String,value:"取消"},actions:{type:Array,value:[]}},methods:{buttonTap(e){const{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.actions[t]},{})},handleClose(){this.triggerEvent("close",{},{})},handleClosed(){this.triggerEvent("closed",{},{})},stopEvent(){}}});var s,c;n(574);t.registerElement({is:"mp-dialog",options:{multipleSlots:!0,classPrefix:"mp-dialog",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.mask},F:function(e,t,n,i){return e.mask}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,i){return"mask "+(e.show?"mask__in":"")}},"bind:tap":"handleClose"},C:[]}]}]},{T:"wx-view",A:{class:"container","bind:tap":"handleClose"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,i){return"content "+(e.show?"content__in":"")}},"catch:tap":"stopEvent"},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-view",A:{class:"title"},C:[{V:5,N:"title",C:[]}]}]},{T:"wx-view",A:{class:"body"},C:[{V:5,N:"body",C:[]}]},{T:"wx-view",A:{class:"foot"},C:[{V:1,B:[{B:{L:function(e,t,n){return!(!e.innerButtons&&!a(e.innerButtons,"length"))||void 0},F:function(e,t,n,i){return e.innerButtons&&o(e.innerButtons).length}},C:[{V:2,L:{M:["innerButtons"],L:function(e,t,n){return e.innerButtons},F:function(e,t,n,i){return e.innerButtons}},K:"index",C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!a(t[0],"className")||void 0},F:function(e,t,n,i){return"button "+o(t[0]).className}},"hover-class":"button__active","data-index":{L:function(e,t,n){return t[1]},F:function(e,t,n,i){return t[1]}},"bind:tap":"buttonTap"},C:[{S:{L:function(e,t,n){return!!a(t[0],"text")||void 0},F:function(e,t,n,i){return"\n                  "+o(t[0]).text+"\n                  "}}},{V:1,B:[{B:{L:function(e,t,n){return!!t[1]||void 0},F:function(e,t,n,i){return t[1]>0}},C:[{T:"wx-view",A:{class:"button__after"},C:[]}]}]}]}]}]}]},{V:5,N:"footer",C:[]},{T:"wx-view",A:{class:"foot__after"},C:[]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{title:{type:String,value:""},maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},buttons:{type:Array,value:[]}},data:{innerButtons:[]},attached(){this.attached=!0},observers:{buttons(e){const t=e.length;this.setData({innerButtons:e.map(((e,n)=>{const i=e.type||(t>=1&&0===n?"default":"primary");return{className:(e.className||"")+" button__"+i,text:e.text}}))})},show(e){this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((()=>{this.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((()=>{this.triggerEvent("closed",{},{})}),200))}},methods:{buttonTap(e){const{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.buttons[t]},{})},handleClose(){this.data.maskClosable&&this.triggerEvent("close",{},{})},stopEvent(){}}});n(81);t.registerElement({is:"mp-half-screen-dialog",options:{multipleSlots:!0,classPrefix:"mp-half-screen-dialog",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"mp-half-screen-popup",A:{show:{L:function(e,t,n){return e.show},F:function(e,t,n,i){return e.show}},mask:{L:function(e,t,n){return e.mask},F:function(e,t,n,i){return e.mask}},"mask-closable":{L:function(e,t,n){return e.maskClosable},F:function(e,t,n,i){return e.maskClosable}},"bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-view",A:{class:"title"},C:[{V:5,N:"title",C:[]}]}]},{T:"wx-view",A:{class:"body"},C:[{V:5,N:"body",C:[]}]},{T:"wx-view",A:{class:"foot"},C:[{V:1,B:[{B:{L:function(e,t,n){return!(!e.innerButtons&&!a(e.innerButtons,"length"))||void 0},F:function(e,t,n,i){return e.innerButtons&&o(e.innerButtons).length}},C:[{V:2,L:{M:["innerButtons"],L:function(e,t,n){return e.innerButtons},F:function(e,t,n,i){return e.innerButtons}},K:"index",C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!a(t[0],"className")||void 0},F:function(e,t,n,i){return"button "+o(t[0]).className}},"hover-class":"button__active","data-index":{L:function(e,t,n){return t[1]},F:function(e,t,n,i){return t[1]}},"bind:tap":"buttonTap"},C:[{S:{L:function(e,t,n){return!!a(t[0],"text")||void 0},F:function(e,t,n,i){return"\n                "+o(t[0]).text+"\n              "}}}]}]}]}]},{V:5,N:"footer",C:[]}]}]}]}],BM:{maskClosable:[[0,"mask-closable"]],mask:[[0,"mask"]],show:[[0,"show"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{title:{type:String,value:""},maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},buttons:{type:Array,value:[]}},data:{innerShow:!1,innerButtons:[]},observers:{buttons(e){const t=e.length;this.setData({innerButtons:e.map(((e,n)=>{const i=e.type||(t>=1&&0===n?"default":"primary");return{className:(e.className||"")+" button__"+i,text:e.text}}))})}},methods:{buttonTap(e){const{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.buttons[t]},{})},handleClose(){this.triggerEvent("close",{},{})},handleClosed(){this.triggerEvent("closed",{},{})},stopEvent(){}}});n(741);t.registerElement({is:"mp-half-screen-popup",options:{multipleSlots:!0,classPrefix:"mp-half-screen-popup",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.mask},F:function(e,t,n,i){return e.mask}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,i){return"mask "+(e.show?"mask__in":"")}},"bind:tap":"handleClose"},C:[]}]}]},{V:5,N:"mask",C:[]},{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,i){return"container "+(e.show?"container__in":"")}},"bind:tap":"handleClose"},C:[{T:"wx-view",A:{class:"content","catch:tap":"stopEvent"},C:[{V:5,N:"",C:[]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1}},attached(){this.attached=!0},observers:{show(e){this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((()=>{this.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((()=>{this.triggerEvent("closed",{},{})}),200))}},methods:{handleClose(){this.data.maskClosable&&this.triggerEvent("close",{},{})},stopEvent(){}}});n(161);t.registerElement({is:"mp-horizonal-bubble",options:{multipleSlots:!0,classPrefix:"mp-horizonal-bubble",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.mask},F:function(e,t,n,i){return e.mask}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,i){return"mask "+(e.show?"mask__in":"")}}},C:[]}]}]},{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,i){return"close-container "+(e.show?"close-container__in":"")}}},C:[{T:"wx-view",A:{class:"close-btn","hover-class":"close-btn__hover","bind:tap":"handleClose"},C:[{T:"wx-image",A:{class:"close-btn-img",src:{L:function(e,t,n){return e.closeBtn},F:function(e,t,n,i){return e.closeBtn}}},C:[]}]}]},{T:"wx-view",A:{class:"content-container"},C:[{V:5,N:"content",C:[]}]},{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,i){return"menu-container "+(e.show?"menu-container__in":"")}}},C:[{T:"wx-view",A:{class:"menu"},C:[{T:"wx-view",A:{class:"menu-before"},C:[]},{T:"wx-view",A:{class:"menu-inner"},C:[{V:2,L:{M:["actions"],L:function(e,t,n){return e.actions},F:function(e,t,n,i){return e.actions}},K:"index",C:[{T:"wx-view",A:{class:"cell","hover-class":"cell__hover","data-index":{L:function(e,t,n){return t[1]},F:function(e,t,n,i){return t[1]}},"bind:tap":"buttonTap"},C:[{T:"wx-view",A:{class:"cell-img-container"},C:[{T:"wx-image",A:{class:"cell-img",src:{L:function(e,t,n){return a(t[0],"imageDarkSrc")},F:function(e,t,n,i){return o(t[0]).imageDarkSrc}}},C:[]}]},{T:"wx-view",A:{class:"cell-desc"},C:[{S:{L:function(e,t,n){return a(t[0],"text")},F:function(e,t,n,i){return o(t[0]).text}}}]}]}]}]},{T:"wx-view",A:{class:"menu-after"},C:[]}]}]}]}]}],BM:{closeBtn:[[0,1,0,0,0,"src"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},cancelText:{type:String,value:"取消"},actions:{type:Array,value:[]}},attached(){this.attached=!0,t.triggerRender((()=>{this.setData({closeBtn:"https://res.wx.qq.com/op_res/hlMx1wXYJya8ib3DpW10m6aLCGf7RoluABX1QvNEAxVIyhhGuY0iI62dzv56y5rq9nBrd-H44CqoH5dM9JTr0g"})}))},observers:{show(e){this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((()=>{this.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((()=>{this.triggerEvent("closed",{},{})}),200))}},methods:{buttonTap(e){const{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.actions[t]},{})},handleClose(){this.triggerEvent("close",{},{})},stopEvent(){}}}),t.registerElement({is:"wx-view",template:{content:function(){var e={},t={P:"",C:[{V:5,N:"",C:[]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{hoverClass:String},listeners:{"this.touchstart":function(){this.hoverStart()},"this.touchend":function(){this.hoverEnd()},"this.canceltap":function(){this.hoverEnd()}},methods:{hoverStart(){this.data.hoverClass&&(this.classList.toggle(this.data.hoverClass,!0),t.triggerRender())},hoverEnd(){this.data.hoverClass&&(this.classList.toggle(this.data.hoverClass,!1),t.triggerRender())}}}),t.registerElement({is:"wx-image",template:{content:function(){var e={},t={P:"",C:[{T:"image",A:{src:{L:function(e,t,n){return e.src},F:function(e,t,n,i){return e.src}},style:"width: 100%; height: 100%;"},C:[]}],BM:{src:[[0,"src"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{src:{type:String,public:!0}}}),t.registerElement({is:"wx-adaptive-image",template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{id:"wrapper",style:"width: 100%; height: 100%; display: flex; flex-direction: column; flex-shrink: 0; align-items: center;"},C:[{T:"image",A:{src:{L:function(e,t,n){return e.src},F:function(e,t,n,i){return e.src}},style:{L:function(e,t,n){return!(!e.imgStyleWidth&&!e.imgStyleHeight)||void 0},F:function(e,t,n,i){return"width: "+e.imgStyleWidth+"px; height: "+e.imgStyleHeight+"px;"}}},C:[]}]}],BM:{src:[[0,0,"src"]],imgStyleHeight:[[0,0,"style"]],imgStyleWidth:[[0,0,"style"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{src:{type:String,public:!0},srcWidth:{type:Number,public:!0,value:0,observer:"_onSrcSizeChange"},srcHeight:{type:Number,public:!0,value:0,observer:"_onSrcSizeChange"}},data:{imgStyleWidth:0,imgStyleHeight:0},attached(){this.attached=!0,this._onSrcSizeChange()},detached(){this.attached=!1},methods:{_onSrcSizeChange(){if(!this.attached)return;const e=this.$$.getBoundingClientRect(),t=Math.min(e.width,this.data.srcWidth),n=t*this.data.srcHeight/this.data.srcWidth;this.setData({imgStyleWidth:t,imgStyleHeight:n})}}}),t.registerElement({is:"wx-scroll-view",template:{content:function(){var e={},t={P:"",C:[{T:"scrollview",A:{"scroll-x":{L:function(e,t,n){return!!e.scrollX||void 0},F:function(e,t,n,i){return e.scrollX?"1":""}},"scroll-y":{L:function(e,t,n){return!!e.scrollY||void 0},F:function(e,t,n,i){return e.scrollY?"1":""}},style:"width: 100%; height: 100%"},C:[{T:"view",A:{},C:[{V:5,N:"",C:[]}]}]}],BM:{scrollX:[[0,"scroll-x"]],scrollY:[[0,"scroll-y"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{scrollX:{type:Boolean,public:!0,value:!1},scrollY:{type:Boolean,public:!0,value:!1}}}),t.registerElement({is:"example",template:{content:function(){var e={},t={P:"",C:[{V:1,B:[{B:{L:function(e,t,n){return!!e.hidden||void 0},F:function(e,t,n,i){return!e.hidden}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.contentIn||void 0},F:function(e,t,n,i){return"root "+(e.contentIn?"root-in":"")}}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.contentIn||void 0},F:function(e,t,n,i){return"content "+(e.contentIn?"content-in":"")}}},C:[{T:"wx-view",A:{class:"title"},C:[{S:"\n          弹框标题\n        "}]},{T:"wx-view",A:{class:"body"},C:[{S:"\n          小程序需要访问你的用户信息\n        "}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button ok","hover-class":"ok-hover","bind:tap":"hide"},C:[{S:"允许"}]},{T:"wx-view",A:{class:"button deny","hover-class":"deny-hover","bind:tap":"hide"},C:[{S:"拒绝"}]}]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},attached(){t.triggerRender((()=>{this.setData({contentIn:!0})}))},methods:{hide(){this.triggerEvent("destroy")}}}),t.registerElement({is:"drag",template:{content:function(){var e={},t={P:"",C:[{T:"view",A:{id:"inner",draggable:"1",class:"button ok","bind:tap":"hide","bind:dragstart":"dragStart","bind:dragmove":"dragMove","bind:dragend":"dragEnd",style:{L:function(e,t,n){return!(!e.dx&&!e.dy)||void 0},F:function(e,t,n,i){return"width: 200px; height: 100px; padding: 20px; -wx-engine-touch-event: none; transform: translate("+e.dx+"px, "+e.dy+"px)"}}},C:[{T:"view",A:{"bind:touchstart":"hoverStart","bind:touchend":"hoverEnd",style:"background: yellow; width: 150px; height: 40px;"},C:[{S:"\n        可拖动按钮\n      "}]}]}],BM:{dx:[[0,"style"]],dy:[[0,"style"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},attached(){},data:{dx:0,dy:0},methods:{hide(){this.triggerEvent("destroy")},dragStart(){console.warn("dragStart")},dragMove(){console.warn("dragMove")},dragEnd(e){console.warn("dragEnd"),this.setData({dx:e.detail.draggedLeft-e.detail.originalLeft,dy:e.detail.draggedTop-e.detail.originalTop})},hoverStart(){console.warn("hoverStart"),this.$.inner.classList.toggle("ok-hover",!0),t.triggerRender()},hoverEnd(){console.warn("hoverEnd"),this.$.inner.classList.toggle("ok-hover",!1),t.triggerRender()}}}),t.registerElement({is:"scroll",template:{content:function(){var e={},t={P:"",C:[{T:"scrollview",A:{"scroll-y":"1",style:"height: 200px; width: 50%; background: yellow"},C:[{T:"wx-view",A:{},C:[{V:2,L:{M:["list"],L:function(e,t,n){return e.list},F:function(e,t,n,i){return e.list}},K:null,C:[{T:"wx-view",A:{style:"height: 40px; background: rgba(0, 255, 0, 0.1)"},C:[{S:{L:function(e,t,n){return!!t[1]||void 0},F:function(e,t,n,i){return"AAA "+t[1]}}}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},data:{list:[1,2,3,4,5,6,7,8,9,10]},attached(){},methods:{hide(){this.triggerEvent("destroy")}}});const l=t.registerElement({template:{content:function(){var e={},t={P:"",C:[{V:5,N:"",C:[]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},methods:{append(e,n){const i=this.shadowRoot.createComponent(e);return i.classList.toggle("__wx_scl__layer",!0),i.addListener("destroy",(e=>{e.target===i&&this.remove(i)})),n&&i.setData(n),this.shadowRoot.appendChild(i),t.triggerRender(),i},remove(e){e.is,this.shadowRoot.removeChild(e)}}}),u=BabelRuntimeHelpers.objectSpread2;var d=n.n(u);n(605);const h="http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFSnFBqI0TCnqPr9BWu0PoOWibkNvL6TVxte3E8icyiaVGJqkWEGytEVb9A/0?wx_fmt=png",p="http://mmbiz.qpic.cn/sz_mmbiz_jpg/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFiawcLL2BcFTKggEbIdxtwdK6pmOgfVhErWicRib2huw7Z5zadjVtJVQJQ/0?wx_fmt=jpeg",f="http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFLT4OSfr939t6n2t2uLIvhprQIEsnS4F73XToyIDQYaKCmw4tAv212w/0?wx_fmt=png";t.registerElement({is:"werun",options:{classPrefix:"werun",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,i){return"mask "+(e.enter?"mask-in":"")}}},C:[]},{T:"wx-view",A:{class:"container"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,i){return"content "+(e.enter?"content-in":"")}},style:{L:function(e,t,n){return!!e.contentHeight||void 0},F:function(e,t,n,i){return"height: "+e.contentHeight+"px"}}},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return e.title},F:function(e,t,n,i){return e.title}}}]},{T:"wx-view",A:{class:"info-wrp","bind:tap":"showNote"},C:[{T:"wx-image",A:{class:"info",src:{L:function(e,t,n){return e.iconInfo},F:function(e,t,n,i){return e.iconInfo}}},C:[]}]}]},{T:"wx-view",A:{class:"body"},C:[{T:"wx-view",A:{class:"sport-list"},C:[{V:2,L:{M:["sport_name"],L:function(e,t,n){return e.sport_name},F:function(e,t,n,i){return e.sport_name}},K:null,C:[{T:"wx-view",A:{class:"sport-item"},C:[{S:{L:function(e,t,n){return!!t[0]||void 0},F:function(e,t,n,i){return"・ "+t[0]}}}]}]}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button cancel","bind:tap":"handleCancel"},C:[{S:"取消"}]},{T:"wx-view",A:{class:"button confirm","bind:tap":"handleConfirm"},C:[{S:"确定"}]}]}]},{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.noteEnter||void 0},F:function(e,t,n,i){return"note-content "+(e.noteEnter?"note-content-in":"")}},style:{L:function(e,t,n){return!!e.noteContentHeight||void 0},F:function(e,t,n,i){return"height: "+e.noteContentHeight+"px"}}},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-view",A:{class:"note-title"},C:[{S:{L:function(e,t,n){return e.note_title},F:function(e,t,n,i){return e.note_title}}}]},{T:"wx-view",A:{class:"note-back-wrp","bind:tap":"hideNote"},C:[{T:"wx-image",A:{class:"note-back",src:{L:function(e,t,n){return e.iconBack},F:function(e,t,n,i){return e.iconBack}}},C:[]}]}]},{T:"wx-view",A:{class:"body"},C:[{T:"wx-view",A:{class:"note-detail"},C:[{S:{L:function(e,t,n){return e.note_detail},F:function(e,t,n,i){return e.note_detail}}}]},{T:"wx-view",A:{class:"note-guide-wrap"},C:[{T:"wx-image",A:{class:"note-guide",src:{L:function(e,t,n){return e.iconGuide},F:function(e,t,n,i){return e.iconGuide}}},C:[]}]}]}]}]}]}],BM:{noteContentHeight:[[0,1,1,"style"]],title:[[0,1,0,0,0,0]],noteEnter:[[0,1,1,"class"]],note_detail:[[0,1,1,1,0,0]],note_title:[[0,1,1,0,0,0]],enter:[[0,0,"class"],[0,1,0,"class"]],iconGuide:[[0,1,1,1,1,0,"src"]],iconBack:[[0,1,1,0,1,0,"src"]],iconInfo:[[0,1,0,0,1,0,"src"]],contentHeight:[[0,1,0,"style"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{title:{type:String,value:"将本次健身数据分享到微信运动"},sport_name:{type:Array,value:[]},note_detail:{type:String,value:"分享后，朋友将可以在微信运动排行榜上看到你的身体情况。"},note_title:{type:String,value:"数据分享说明"},theme:{type:String,value:"light"},input:{type:String,value:""}},data:{enter:!1,noteEnter:!1,dark:!1,duration:300,contentHeight:358,noteContentHeight:338,clickMoreCount:0,iconInfo:f,iconBack:h,iconGuide:p},observers:{dark(e){const t=e?"http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFicwaUzmY9aicOlBBB48mlqnBBZpiaApuc0A0JictujwKmRMFhznZ4icRxIQ/0?wx_fmt=png":f,n=e?"http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFGTakK9zJelrNNu9dwibzP7pibT397icnFKwvccOcicGst5z6Ja0btqpELA/0?wx_fmt=png":h,i=e?"http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFmG4UmtBrK7zrJZ2oFicwTBXY81xn0GprVhSp5rMYEicXjYJEBRV9IQMg/0?wx_fmt=png":p;this.setData({iconInfo:t,iconBack:n,iconGuide:i})},theme(e){this.setData({dark:"dark"===e})},input(e){if(!e)return;const t=JSON.parse(e),n=358-28*(5-t.sport_name.length),i=Math.max(n,338);this.setData(d()(d()({},t),{},{contentHeight:n,noteContentHeight:i}))}},attached(){t.triggerRender((()=>{this.setData({enter:!0})}))},methods:{showNote(){this.data.clickMoreCount++,t.triggerRender((()=>{this.setData({noteEnter:!0})}))},hideNote(){t.triggerRender((()=>{this.setData({noteEnter:!1})}))},handleCancel(){this.triggerEvent("cancel",{clickMoreCount:this.data.clickMoreCount}),this.destory()},handleConfirm(){this.triggerEvent("confirm",{clickMoreCount:this.data.clickMoreCount}),this.destory()},destory(){this.setData({enter:!1}),setTimeout((()=>{this.triggerEvent("destroy")}),this.data.duration)}}});n(431);t.registerElement({is:"authorize",options:{classPrefix:"authorize",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.overlay},F:function(e,t,n,i){return e.overlay}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,i){return"mask "+(e.enter?"mask-in":"")}}},C:[]}]}]},{T:"wx-view",A:{class:"container"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,i){return"content "+(e.enter?"content-in":"")}}},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-image",A:{class:"icon",src:{L:function(e,t,n){return e.icon},F:function(e,t,n,i){return e.icon}}},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return!!e.nickname||void 0},F:function(e,t,n,i){return e.nickname+" 申请"}}}]}]},{T:"wx-view",A:{class:"body"},C:[{T:"wx-view",A:{class:"apply-info"},C:[{S:{L:function(e,t,n){return e.apply},F:function(e,t,n,i){return e.apply}}}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button cancel","bind:tap":"handleCancel"},C:[{S:"拒绝"}]},{T:"wx-view",A:{class:"button confirm","bind:tap":"handleConfirm"},C:[{S:"允许"}]}]}]}]}]}],BM:{nickname:[[0,1,0,0,1,0]],apply:[[0,1,0,1,0,0]],icon:[[0,1,0,0,0,"src"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{nickname:{type:String,value:""},icon:{type:String,value:""},overlay:{type:Boolean,value:!0},apply:{type:String,value:""},input:{type:String,value:""}},data:{enter:!1,duration:300},observers:{input(e){if(!e)return;const t=JSON.parse(e);this.setData(t)}},attached(){t.triggerRender((()=>{this.setData({enter:!0})}))},methods:{handleCancel(){this.triggerEvent("cancel"),this.destory()},handleConfirm(){this.triggerEvent("confirm"),this.destory()},destory(){this.setData({enter:!1}),setTimeout((()=>{this.triggerEvent("destroy")}),this.data.duration)}}});n(261);t.registerElement({is:"navigateToMp",options:{classPrefix:"navigate-to-mp",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{V:1,B:[{B:{L:function(e,t,n){return!!e.type||void 0},F:function(e,t,n,i){return 1===e.type}},C:[{T:"mp-dialog",A:{show:{L:function(e,t,n){return e.show},F:function(e,t,n,i){return e.show}},buttons:{L:function(e,t,n){return e.buttons},F:function(e,t,n,i){return e.buttons}},"bind:close":"handleClose","bind:closed":"handleClosed","bind:buttontap":"handleTapButton","mask-closable":{L:function(e,t,n){},F:function(e,t,n,i){return!1}}},C:[{T:"wx-view",A:{class:"title",slot:"title"},C:[{S:{L:function(e,t,n){return e.title},F:function(e,t,n,i){return e.title}}}]},{V:7,N:"body",C:[{V:1,B:[{B:{L:function(e,t,n){return!(!e.logo&&!e.name)||void 0},F:function(e,t,n,i){return e.logo||e.name}},C:[{T:"wx-view",A:{class:"body"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.logo},F:function(e,t,n,i){return e.logo}},C:[{T:"wx-image",A:{class:"logo",src:{L:function(e,t,n){return e.logo},F:function(e,t,n,i){return e.logo}}},C:[]}]}]},{V:1,B:[{B:{L:function(e,t,n){return e.name},F:function(e,t,n,i){return e.name}},C:[{T:"wx-view",A:{class:"name"},C:[{S:{L:function(e,t,n){return e.name},F:function(e,t,n,i){return e.name}}}]}]}]},{T:"wx-view",A:{class:"desc"},C:[{S:{L:function(e,t,n){return e.desc},F:function(e,t,n,i){return e.desc}}}]}]}]},{B:1,C:[{T:"wx-view",A:{class:"body-placeholder"},C:[]}]}]}]}]}]},{B:{L:function(e,t,n){return!!e.type||void 0},F:function(e,t,n,i){return 2===e.type}},C:[{T:"mp-half-screen-dialog",A:{show:{L:function(e,t,n){return e.show},F:function(e,t,n,i){return e.show}},buttons:{L:function(e,t,n){return e.buttons},F:function(e,t,n,i){return e.buttons}},"bind:close":"handleClose","bind:closed":"handleClosed","bind:buttontap":"handleTapButton","mask-closable":{L:function(e,t,n){},F:function(e,t,n,i){return!1}}},C:[{T:"wx-view",A:{class:"title",slot:"title"},C:[{S:{L:function(e,t,n){return e.title},F:function(e,t,n,i){return e.title}}}]},{V:7,N:"body",C:[{V:1,B:[{B:{L:function(e,t,n){return!(!e.logo&&!e.name)||void 0},F:function(e,t,n,i){return e.logo||e.name}},C:[{T:"wx-view",A:{class:"body"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.logo},F:function(e,t,n,i){return e.logo}},C:[{T:"wx-image",A:{class:"logo",src:{L:function(e,t,n){return e.logo},F:function(e,t,n,i){return e.logo}}},C:[]}]}]},{V:1,B:[{B:{L:function(e,t,n){return e.name},F:function(e,t,n,i){return e.name}},C:[{T:"wx-view",A:{class:"name"},C:[{S:{L:function(e,t,n){return e.name},F:function(e,t,n,i){return e.name}}}]}]}]},{T:"wx-view",A:{class:"desc"},C:[{S:{L:function(e,t,n){return e.desc},F:function(e,t,n,i){return e.desc}}}]}]}]},{B:1,C:[{T:"wx-view",A:{class:"body-placeholder"},C:[]}]}]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{type:{type:Number},title:{type:String,value:"即将打开以下小程序"},logo:{type:String,value:""},name:{type:String,value:""},desc:{type:String,value:""},confirmText:{type:String,value:"允许"},cancelText:{type:String,value:"取消"},maskClosable:{type:Boolean,value:!1}},observers:{confirmText(e){this.setData({buttons:this.getButtons(e,this.data.cancelText)})},cancelText(e){this.setData({buttons:this.getButtons(this.data.confirmText,e)})}},data:{show:!1,buttons:[]},attached(){t.triggerRender((()=>{this.setData({buttons:this.getButtons(this.data.confirmText,this.data.cancelText),show:!0})}))},methods:{getButtons:(e,t)=>[{type:"default",text:t},{type:"primary",text:e}],handleTapButton(e){1===e.detail.index?this.handleConfirm():this.handleCancel()},handleClose(){this.handleCancel()},handleCancel(){this.triggerEvent("cancel"),this.triggerDestroy()},handleConfirm(){this.triggerEvent("confirm"),this.triggerDestroy()},handleClosed(){this.triggerEvent("destroy")},triggerDestroy(){this.setData({show:!1})}}});n(172);const g=e=>e.split("?",2)[0],_=e=>".html"===e.slice(-5)?e.slice(0,-5):e,m=(e,t)=>("/"!==(e=_(e))[0]&&(e="/"+e),_(e)===_(g(t)));t.registerElement({is:"frameset",options:{classPrefix:"frameset",virtualHost:!0},template:{content:function(){var e={},t={P:"",C:[{T:"virtuallayout",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.hasTabs},F:function(e,t,n,i){return e.hasTabs}},C:[{T:"tabbar",A:{class:"tabs",direction:"vertical"},C:[]}]}]},{T:"virtuallayout",A:{class:"panels"},C:[{T:"virtuallayout",A:{class:"left-panel"},C:[{V:2,L:{M:["tabs"],L:function(e,t,n){return e.tabs},F:function(e,t,n,i){return e.tabs}},K:"i",C:[{V:2,L:{M:[0,"pages"],L:function(e,t,n){return a(t[0],"pages")},F:function(e,t,n,i){return o(t[0]).pages}},K:"i",C:[{T:"frame",A:{class:{L:function(e,t,n){return!!a(t[0],"hidden")||void 0},F:function(e,t,n,i){return"left-page "+(o(t[0]).hidden?"hidden":"")}},"back-button":{L:function(e,t,n){return!!t[3]||void 0},F:function(e,t,n,i){return t[3]>0?"true":""}},url:{L:function(e,t,n){return a(t[2],"url")},F:function(e,t,n,i){return o(t[2]).url}},"margin-left":"1","margin-right":"1","data-side":{L:function(e,t,n){},F:function(e,t,n,i){return"left"}},"bind:navigateBack":"navigateBack","bind:resize":"triggerPageOnResize"},C:[]}]}]}]},{T:"virtuallayout",A:{class:"right-panel"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.placeholderImage},F:function(e,t,n,i){return e.placeholderImage}},C:[{T:"image",A:{src:{L:function(e,t,n){return e.placeholderImage},F:function(e,t,n,i){return e.placeholderImage}},class:"right-placeholder"},C:[]}]}]},{V:2,L:{M:["mainPages"],L:function(e,t,n){return e.mainPages},F:function(e,t,n,i){return e.mainPages}},K:"i",C:[{T:"frame",A:{class:{L:function(e,t,n){return!!a(t[0],"aniIn")||void 0},F:function(e,t,n,i){return"right-page "+(o(t[0]).aniIn?"right-page-in":"")}},"back-button":"true",url:{L:function(e,t,n){return a(t[0],"url")},F:function(e,t,n,i){return o(t[0]).url}},"data-side":{L:function(e,t,n){},F:function(e,t,n,i){return"right"}},"bind:navigateBack":"navigateBack","bind:resize":"triggerPageOnResize"},C:[]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},lifetimes:{route({method:e,url:t,args:n}){this[e](t,n)}},data:{hasTabs:!1,tabs:[],mainPages:[]},created(){this.globalShowStatus=!0,this.shownTabDepths=[],this.shownMainPagesDepth=-1,this.pageLifeTimeCallback=()=>{}},observers:{"hasTabs, tabs.**, mainPages.**":function(){this.triggerShowHideEvents()}},methods:{normalizeUrl:e=>("/"!==e[0]&&(e="/"+e),(e=>{const t=e.indexOf("?");return-1===t?e+".html":e.slice(0,t)+".html"+e.slice(t)})(e)),appLaunch(e,{tabBarConfig:t,entryPagePath:n}){const i=t&&t.list&&t.list.length>0&&!t.custom,r=this.normalizeUrl(e);let o=null;if(i)t.list.forEach((e=>{m(e.pagePath,r)&&(o=r)}));else{if(!m(n,r))return;o=this.normalizeUrl(_(n))}null===o?this.setData({hasTabs:i,tabs:[{i:0,hidden:!1,pages:[{i:0,url:this.normalizeUrl(_(n))}]}],mainPages:[{i:0,url:r,aniIn:!0}]}):this.setData({hasTabs:i,tabs:[{i:0,hidden:!1,pages:[{i:0,url:o}]}],mainPages:[]})},reLaunch(e){e=this.normalizeUrl(e),this.setData({tabs:[{i:0,hidden:!1,pages:[{i:0,url:e}]}],mainPages:[]})},switchTab(e){e=this.normalizeUrl(e);let t=!1;this.data.tabs.forEach((n=>{g(n.pages[0].url)===g(e)?(n.hidden=!1,t=!0):n.hidden=!0})),t||this.data.tabs.push({i:this.data.tabs.length,hidden:!1,pages:[{i:0,url:e}]}),this.setData({tabs:this.data.tabs,mainPages:[]})},navigateBack(e){let t="right";e&&(t=e.currentTarget.dataset.side),"left"===t?(this.data.tabs.forEach((e=>{!e.hidden&&e.pages.length>1&&e.pages.pop()})),this.setData({tabs:this.data.tabs})):(this.aniOut(),setTimeout((()=>{this.setData({mainPages:this.data.mainPages.slice(0,-1)})}),500))},navigateTo(e){e=this.normalizeUrl(e);const t=this.data.mainPages.length;this.setData({mainPages:this.data.mainPages.concat([{i:t,url:e}])}),this.aniIn()},redirectTo(e){e=this.normalizeUrl(e);const t=this.data.mainPages.length-1;this.setData({mainPages:this.data.mainPages.slice(0,-1).concat([{i:t,url:e}])}),this.aniIn()},aniIn(){const e=this.data.mainPages.length-1;t.triggerRender((()=>{this.setData({[`mainPages[${e}].aniIn`]:!0})}))},aniOut(){const e=this.data.mainPages.length-1;this.setData({[`mainPages[${e}].aniIn`]:!1})},setPlaceholderImage(e){this.setData({placeholderImage:e})},triggerShowHideEvents(){const e=this.data.tabs.map((({pages:e,hidden:t})=>t||!this.globalShowStatus?-1:e.length-1)),t=this.globalShowStatus?this.data.mainPages.length-1:-1;if(e.forEach(((e,t)=>{const n=this.shownTabDepths[t]||0;if(n<e&&n>=0){const e=this.$.tabList.childNodes[t].querySelector(".left-page")[n].$$.getAttribute("-view-id");this.pageLifeTimeCallback(e,"Hide")}else if(e<n&&e>=0){const n=this.$.tabList.childNodes[t].querySelector(".left-page")[e].$$.getAttribute("-view-id");this.pageLifeTimeCallback(n,"Show")}})),this.shownMainPagesDepth<t&&this.shownMainPagesDepth>=0){const e=this.$.pageList.childNodes[this.shownMainPagesDepth].querySelector(".right-page").$$.getAttribute("-view-id");this.pageLifeTimeCallback(e,"Hide")}else if(t<this.shownMainPagesDepth&&t>=0){const e=this.$.pageList.childNodes[t].querySelector(".right-page").$$.getAttribute("-view-id");this.pageLifeTimeCallback(e,"Show")}this.shownTabDepths=e,this.shownMainPagesDepth=t},setGlobalShowStatus(e){this.globalShowStatus!==e&&(this.globalShowStatus=e,this.triggerShowHideEvents())},triggerPageOnResize(e){const{viewId:t,size:n}=e.detail;this.pageLifeTimeCallback(t,"Resize",{size:n})},setPageLifeTimeCallback(e){this.pageLifeTimeCallback=e}}});n(78);let y=3;t.registerElement({is:"game-ranklist",options:{classPrefix:"game-ranklist",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-image",A:{class:"close",src:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png","bind:tap":"close"},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return e.title},F:function(e,t,n,i){return e.title}}}]},{T:"wx-view",A:{class:"close"},C:[]}]},{T:"wx-view",A:{class:"line"},C:[]},{T:"wx-view",A:{class:"body"},C:[{V:2,L:{M:["show"],L:function(e,t,n){return e.show},F:function(e,t,n,i){return e.show}},K:"index",C:[{T:"wx-view",A:{},C:[{T:"wx-view",A:{class:"item"},C:[{T:"wx-image",A:{class:"icon",src:{L:function(e,t,n){return a(t[0],"head_img_url")},F:function(e,t,n,i){return o(t[0]).head_img_url}}},C:[]},{T:"wx-view",A:{class:"name"},C:[{S:{L:function(e,t,n){return a(t[0],"user_name")},F:function(e,t,n,i){return o(t[0]).user_name}}}]},{T:"wx-view",A:{class:"score"},C:[{S:{L:function(e,t,n){return a(t[0],"score_desc")},F:function(e,t,n,i){return o(t[0]).score_desc}}}]}]},{T:"wx-view",A:{class:"line"},C:[]}]}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button","bind:tap":"left"},C:[{T:"wx-image",A:{class:{L:function(e,t,n){return!!e.canl||void 0},F:function(e,t,n,i){return"btn-icon "+(e.canl?"":"disabled")}},src:"https://res.wx.qq.com/a/fed_upload/d71d0af9-0fb5-4fd6-aa3c-f9ff1494435e/left.png"},C:[]}]},{T:"wx-view",A:{class:"button","bind:tap":"right"},C:[{T:"wx-image",A:{class:{L:function(e,t,n){return!!e.canr||void 0},F:function(e,t,n,i){return"btn-icon "+(e.canr?"":"disabled")}},src:"https://res.wx.qq.com/a/fed_upload/dfbbd68d-9cfc-4ddc-a77a-3f049f3757f5/right.png"},C:[]}]}]}]}]}],BM:{canl:[[0,0,3,0,0,"class"]],title:[[0,0,0,1,0]],canr:[[0,0,3,1,0,"class"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{title:{type:String,value:""},list:{type:Array,value:[]}},data:{page:0,canl:!1,canr:!1,show:[],all:[]},observers:{list(e){y="portrait"===n.g.__wxConfig.deviceOrientation?5:3,Array.isArray(e)&&this.setData({page:0,all:e,canr:e.length>y,show:e.slice(0,y)})}},methods:{left(){if(!this.data.canl)return;const e=this.data.page-1;this.setData({page:e,canl:e>0,canr:this.data.all.length>y*(e+1),show:this.data.all.slice(y*e,y*(e+1))})},right(){if(!this.data.canr)return;const e=this.data.page+1;this.setData({page:e,canl:e>0,canr:this.data.all.length>y*(e+1),show:this.data.all.slice(y*e,y*(e+1))})},close(){this.triggerEvent("destroy")}}});n(426);const v=[];e.onViewportResize((e=>{v.forEach((t=>t(e)))}));t.registerElement({is:"share-image",behaviors:["wx-theme"],options:{multipleSlots:!0,classPrefix:"share-image",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{V:1,B:[{B:{L:function(e,t,n){return!!e.orientation||void 0},F:function(e,t,n,i){return"portrait"===e.orientation}},C:[{T:"mp-bubble-action-sheet",A:{actions:{L:function(e,t,n){return e.actionsArr},F:function(e,t,n,i){return e.actionsArr}},show:{L:function(e,t,n){return e.show},F:function(e,t,n,i){return e.show}},mask:{L:function(e,t,n){},F:function(e,t,n,i){return!1}},"bind:buttontap":"onButtonTap","bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,i){return"mask "+(e.show?"mask__in":"")}},slot:"mask"},C:[]},{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,i){return"container "+(e.show?"container__in":"")}},slot:"mask"},C:[{T:"wx-view",A:{class:"scroller-container"},C:[{T:"scrollview",A:{class:"scroller","scroll-y":"1"},C:[{T:"wx-view",A:{class:"img-wrapper"},C:[{T:"wx-adaptive-image",A:{class:"img",src:{L:function(e,t,n){return e.imgPath},F:function(e,t,n,i){return e.imgPath}},srcHeight:{L:function(e,t,n){return e.height},F:function(e,t,n,i){return e.height}},srcWidth:{L:function(e,t,n){return e.width},F:function(e,t,n,i){return e.width}}},C:[]}]}]}]}]}]}]},{B:1,C:[{T:"mp-horizonal-bubble",A:{actions:{L:function(e,t,n){return e.actionsArr},F:function(e,t,n,i){return e.actionsArr}},show:{L:function(e,t,n){return e.show},F:function(e,t,n,i){return e.show}},"bind:buttontap":"onButtonTap","bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{slot:"content"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,i){return"landscape-container "+(e.show?"container__in":"")}}},C:[{T:"wx-view",A:{class:"scroller-container"},C:[{T:"scrollview",A:{class:"scroller","scroll-y":"1"},C:[{T:"wx-view",A:{class:"img-wrapper"},C:[{T:"wx-adaptive-image",A:{class:"img",src:{L:function(e,t,n){return e.imgPath},F:function(e,t,n,i){return e.imgPath}},srcHeight:{L:function(e,t,n){return e.height},F:function(e,t,n,i){return e.height}},srcWidth:{L:function(e,t,n){return e.width},F:function(e,t,n,i){return e.width}}},C:[]}]}]}]}]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{imgPath:{type:String,public:!0,value:""},height:{type:Number,public:!0,value:0},width:{type:Number,public:!0,value:0},actions:{type:String,public:!0,value:"[]"}},data:{show:!1,actionsArr:[],imgHeight:0,imgWidth:0,orientation:"portrait"},observers:{actions(){this.getActions(this.data.actions)}},created(){this.onViewportResize()},attached(){t.triggerRender((()=>{this.setData({show:!0})})),this._onViewportResize=this.onViewportResize.bind(this),v.push(this._onViewportResize);try{t.dumpElementToString(this,1)}catch(e){e.stack}},detached(){v.splice(v.indexOf(this._onViewportResize),1)},methods:{onViewportResize(){const t=e.getWindowWidth(),n=e.getWindowHeight();this.updateOrientation(t,n)},updateOrientation(e,t){this.setData({orientation:e<=t?"portrait":"landscape"})},getActions(e){const t=JSON.parse(e);this.setData({actionsArr:t})},onButtonTap(e){const{item:t}=e.detail;this.triggerEvent(t.action),this.triggerDestroy()},handleClose(){this.data.show&&(this.triggerEvent("cancel"),this.triggerDestroy())},handleClosed(){this.triggerEvent("destroy")},triggerDestroy(){this.setData({show:!1})}}});n(13);t.registerElement({is:"toast",options:{classPrefix:"toast",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{T:"wx-view",A:{class:"content"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.loading},F:function(e,t,n,i){return e.loading}},C:[{T:"wx-image",A:{src:"https://res.wx.qq.com/op_res/4gTGxmOnjTG1Pmsfj7JwUaZHfOb677UMxDEVI8p20yTosmcwujlY9-UEvMZm0ePGFGKS_PoQJNEN_S9YFfGTWA",class:"loading"},C:[]}]}]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return e.title},F:function(e,t,n,i){return e.title}}}]}]}]}],BM:{title:[[0,0,1,0]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{loading:{type:Boolean,value:!1},title:{type:String}},methods:{close(){this.triggerEvent("destroy")}}});n(164);const A=e.exparser,b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAABEElEQVR4Ae3aQQqCQACF4Yp2XaQDdP8T1L6LtC4FXf8RWhLfQIzwYBw/X250tzMIECBAgAABAgQIbFzgOuzvOf3G402MwyZ2seFNAIqbAwhQCESsQYBCIGINAhQCEWsQoBCIWIMAhUDEGgQoBCLWIEAhELEGAQqBiDUIUAhErEGAQiBiDQIUAhHvI5/jb7zIOw8nO00nfAzzfT75ivOl1n4XaHzj+Y8jr98zKG77MfI5vs0HK86/+IuteDnLL+3jheVN11/RMyiMAQEKgYg1CFAIRKxBgEIgYg0CFAIRaxCgEIhYgwCFQMQaBCgEItYgQCEQsQYBCoGINQhQCESsQYBCQEyAAAECBAgQIEDgE4EXsiEOYoSfPhkAAAAASUVORK5CYII=",w=[];e.onViewportResize((e=>{w.forEach((t=>t(e)))}));A.registerElement({is:"user-profile",options:{classPrefix:"user-profile",writeIdToDOM:!0},behaviors:["wx-theme"],template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.hide||void 0},F:function(e,t,n,i){return"root "+(e.hide?"hide":"")}}},C:[{V:1,B:[{B:{L:function(e,t,n){return e.overlay},F:function(e,t,n,i){return e.overlay}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,i){return"mask "+(e.enter?"mask-in":"")}}},C:[]}]}]},{T:"wx-view",A:{class:"container"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,i){return"content "+(e.enter?"content-in":"")}}},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-image",A:{class:"icon",src:{L:function(e,t,n){return e.appIcon},F:function(e,t,n,i){return e.appIcon}}},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return!!e.appName||void 0},F:function(e,t,n,i){return e.appName+" 申请"}}}]}]},{T:"wx-view",A:{class:"body",style:{L:function(e,t,n){return!!e.paddingBottom||void 0},F:function(e,t,n,i){return"padding-bottom: "+e.paddingBottom+"px"}}},C:[{T:"wx-view",A:{class:"apply-info"},C:[{S:"使用你的头像、昵称、性别及地区，用于个人信息展示。"}]},{T:"wx-view",A:{class:"info-list"},C:[{T:"wx-scroll-view",A:{"scroll-y":{L:function(e,t,n){},F:function(e,t,n,i){return!0}},style:{L:function(e,t,n){return!!e.scrollHeight||void 0},F:function(e,t,n,i){return"height: "+e.scrollHeight+"px;"}}},C:[{V:2,L:{M:["infoList"],L:function(e,t,n){return e.infoList},F:function(e,t,n,i){return e.infoList}},K:"id",C:[{T:"wx-view",A:{"bind:tap":"handleChoose","data-id":{L:function(e,t,n){return a(t[0],"id")},F:function(e,t,n,i){return o(t[0]).id}},style:"flex-shrink: 0;"},C:[{T:"wx-view",A:{class:"split-line"},C:[]},{T:"wx-view",A:{class:"info-item",id:{L:function(e,t,n){return!!a(t[0],"id")||void 0},F:function(e,t,n,i){return"item_"+o(t[0]).id}}},C:[{T:"wx-view",A:{class:"info-item__left"},C:[{T:"wx-image",A:{class:"info-item__avatar",src:{L:function(e,t,n){return a(t[0],"avatar")},F:function(e,t,n,i){return o(t[0]).avatar}}},C:[]},{T:"wx-view",A:{class:"info-item__desc__wrp"},C:[{T:"wx-view",A:{class:"info-item__nickname"},C:[{S:{L:function(e,t,n){return a(t[0],"nickname")},F:function(e,t,n,i){return o(t[0]).nickname}}}]},{V:1,B:[{B:{L:function(e,t,n){return a(t[0],"desc")},F:function(e,t,n,i){return o(t[0]).desc}},C:[{T:"wx-view",A:{class:"info-item__desc"},C:[{S:{L:function(e,t,n){return a(t[0],"desc")},F:function(e,t,n,i){return o(t[0]).desc}}}]}]}]}]}]},{V:1,B:[{B:{L:function(e,t,n){return!(!e.selected&&!a(t[0],"id"))||void 0},F:function(e,t,n,i){return e.selected===o(t[0]).id}},C:[{T:"wx-view",A:{class:"info-item__right"},C:[{T:"wx-image",A:{class:"icon-checked",src:{L:function(e,t,n){return e.iconChecked},F:function(e,t,n,i){return e.iconChecked}}},C:[]}]}]}]}]}]}]},{T:"wx-view",A:{class:"split-line"},C:[]}]},{V:1,B:[{B:{L:function(e,t,n){return!!(e.showType||e.exceed||e.isBanModifyAvatar)||void 0},F:function(e,t,n,i){return 1===e.showType&&!e.exceed&&!e.isBanModifyAvatar}},C:[{T:"wx-view",A:{class:"use-other-avatar","bind:tap":"handleCreate"},C:[{S:"使用其它头像和昵称"}]}]}]},{V:1,B:[{B:{L:function(e,t,n){return!!(e.showType||e.exceed||e.isBanModifyAvatar)||void 0},F:function(e,t,n,i){return 2===e.showType&&!e.exceed&&!e.isBanModifyAvatar}},C:[{T:"wx-view",A:{class:"info-item-add","bind:tap":"handleCreate"},C:[{T:"wx-image",A:{class:"info-item-add__plus",src:{L:function(e,t,n){return e.iconPlus},F:function(e,t,n,i){return e.iconPlus}}},C:[]},{T:"wx-view",A:{class:"info-item-add__text"},C:[{S:"使用其它头像和昵称"}]}]},{T:"wx-view",A:{class:"split-line"},C:[]}]}]},{V:1,B:[{B:{L:function(e,t,n){return e.exceed},F:function(e,t,n,i){return e.exceed}},C:[{T:"wx-view",A:{class:"exceed-tip"},C:[{S:"数量已达上限，无法新增"}]}]}]}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button cancel","bind:tap":"handleCancel","hover-class":"hand-over"},C:[{S:"取消"}]},{T:"wx-view",A:{class:"button confirm","bind:tap":"handleConfirm","hover-class":"hand-over"},C:[{S:"允许"}]}]}]}]}]}],BM:{scrollHeight:[[0,1,0,1,1,0,"style"]],appName:[[0,1,0,0,1,0]],appIcon:[[0,1,0,0,0,"src"]],hide:[[0,"class"]],paddingBottom:[[0,1,0,1,"style"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},data:{overlay:!0,enter:!1,hide:!1,duration:200,appName:"",appIcon:"",infoList:[],input:"",iconChecked:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAACT0lEQVR4Ae3asUoDMRgH8ORaqgh26CYOujk4uUlBBRFXVxcXfQJfQOqDWHyBIiI4SEEEKW4OPoduWqtt4n3IQSntXa6XpEn6D7TXHl+OfD+SI5cLYygQgAAEIAABCEAAAhCAAAQgAAEIQAACPgs0ZCPK036eJ9j32OXn040fIVqlcunkq371qpJPLk2VC7oaQzi/QjwyyTZFX7SXOmdbKm2dix6U4EjJVhIUzvlHVI4OsnpS8D1oHA4hxVhVOZDrCdikY9BAk3AY4/2I8+PuTvNmEkxyPtghlomz22wlCGnHIIF04RBccEA6cYID0o0TFJAJnGCATOEEAWQSx3sg0zheA9nA8RbIFo6XQDZxvAOyjeMV0CxwlIGqnbPaT1/cSckve3vNB6pos8wKh3LMfBYjnN6vaMcrKLQC981YdGQTaZY4mUAjOBRPxRrSrHEo2dQFswEbrHLO1ihwqCwyJm4Xnk4Ph85p/+kCDiWVCvRZv36jdVtavx0RMIrkCg7lnHkPoiB6A0BvAqSUNfo/VLQPN5dwKE8lIAq0geQaTi4g00gu4uQGMoXkKs5UQLqRXMaZGkgXkus4hYCKIvmAUxhoWiRfcLQA5UXyCUcbkCqSbzhagTKReHTOmbgY3oJCdeK56v9GAsV35f917H0rz6RVm5Qy4x5zCbdxqMHageiiakju4xgDykbyA8co0GQkf3Aoh9T1IAooUmj/X6Uit+ORfB+P5ff488JLcr/r6A25SK6oCwEIQAACEIAABCAAAQhAAAIQgAAEIACBuRD4AzKlWWPvanSJAAAAAElFTkSuQmCC",iconPlus:b,scrollHeight:66,screenHeight:812,screenWidth:375,showType:1,selected:0,limit:4,exceed:!1,isBanModifyAvatar:!1,paddingBottom:194},observers:{input(e){if(!e)return;const t=JSON.parse(e);this.setData(t)},infoList(e=[]){console.log("[user-profile]: infoListChanged");const t=e.length,n=this.data.limit;this.setData({exceed:t>=n}),this.didChangeScrollHeight()}},created(){console.log("[user-profile]: created"),this.onViewportResize()},attached(){console.log("[user-profile]: attached"),A.triggerRender((()=>{this.setData({enter:!0})})),this._onViewportResize=this.onViewportResize.bind(this),w.push(this._onViewportResize)},detached(){w.splice(w.indexOf(this._onViewportResize),1)},methods:{_onThemeChange({theme:e}){console.log("[user-profile] _onThemeChange: ",e),"dark"===e?this.setData({iconPlus:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAABT0lEQVR4Ae3aMQ6CQBRFUcdYuAxKF+XyXBSly7BDTMaQ3EzyJiLQXBt4fJjBkw/NcDr5U0ABBRRQQAEFFFCgIVAaxw45NE3TY574VicfSyn3Q24Ek56RjRAQCCCMAlEEWSCAMApEEWSBAMIoEEWQBQIIo0AUQRYIIIwCUQRZIIAwCkQRZIEAwigQRZAFAgijQBRBFgggjAJRBFkggDAKRBFkgQDCKBBFkAUCCGPXwmFd1OO1/87DPOC1Dvqat8+6v9mmZ3Hy0jn7d8Wz8/TVp32g9p6zedM+Yk2W5WBvB43LJZvtDfPIuz5iPf+k6x3UM9Dac/x4Ya3gQdf7DgrwAgkUBELZDhIoCISyHSRQEAhlO0igIBDKdpBAQSCU7SCBgkAo20ECBYFQtoMECgKhbAcJFARC2Q4SKAiEsh0kUBCwrIACCiiggAIKKKDALwJvdcMTni08WagAAAAASUVORK5CYII="}):this.setData({iconPlus:b})},didChangeScrollHeight(){const{screenHeight:e,screenWidth:t}=this.data;let n=65*this.data.infoList.length+1;const i=e>t,r=i?.75*e:.9*e,o=i?194:118,a=i?361:277;a+n>r&&(n=r-a),console.log("[user-profile]: screenHeight",e,"scrollHeight: ",n),this.setData({scrollHeight:n,paddingBottom:o})},onViewportResize(){console.log("[user-profile]: onViewportResize");const t=e.getWindowHeight(),n=e.getWindowWidth();this.setData({screenHeight:t,screenWidth:n}),this.didChangeScrollHeight()},handleCancel(){this.triggerEvent("cancel"),this.destory()},handleConfirm(){const e=this.data.selected;this.triggerEvent("confirm",{selected:e}),this.destory()},handleCreate(){this.data.exceed||(this.setData({hide:!0}),this.triggerEvent("create"))},handleChoose(e){const t=e.currentTarget.dataset.id;t!==this.data.selected&&this.setData({selected:t})},destory(){this.setData({enter:!1}),setTimeout((()=>{this.triggerEvent("destroy")}),this.data.duration)}}});n(300);const E=e=>e<10?`0${e}`:`${e}`;const T=n(821).exparser;let S=!1,C=null;T.registerElement({is:"verify-tip",options:{classPrefix:"verify-tip",writeIdToDOM:!0,virtualHost:!0},template:{content:function(){var e={},t={P:"",C:[{T:"virtuallayout",A:{class:"root"},C:[{T:"wx-view",A:{class:"content",style:{L:function(e,t,n){return!(!e.top&&!e.right)||void 0},F:function(e,t,n,i){return"top:"+e.top+"px;right:"+e.right+"px"}},"bind:tap":"tap"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.showSeconds},F:function(e,t,n,i){return e.showSeconds}},C:[{T:"wx-view",A:{class:"cd"},C:[{T:"wx-view",A:{style:"margin-right:4px"},C:[{S:{L:function(e,t,n){return a(e.urlInfo,"name")},F:function(e,t,n,i){return o(e.urlInfo).name}}}]},{T:"wx-view",A:{style:{L:function(e,t,n){return!!e.remainSeconds||void 0},F:function(e,t,n,i){return"overflow-wrap:normal;color:"+(e.remainSeconds<300?"#fa5151":"#fff")}}},C:[{S:{L:function(e,t,n){return e.remainStr},F:function(e,t,n,i){return e.remainStr}}}]}]}]},{B:1,C:[{T:"wx-view",A:{class:"msg"},C:[{S:{L:function(e,t,n){return!(!e.miniAlertLongMsg&&!a(e.urlInfo,"name"))||void 0},F:function(e,t,n,i){return"\n        "+e.miniAlertLongMsg+o(e.urlInfo).name+"›\n      "}}}]}]}]},{T:"wx-view",A:{},C:[]}]}]}],BM:{right:[[0,0,"style"]],top:[[0,0,"style"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{top:{type:Number,value:20},right:{type:Number,value:100},info:{type:String,value:"{}"}},data:{showSeconds:S,miniAlertLongMsg:"尚未实名认证",remainStr:"00:00",remainSeconds:-1,urlInfo:{name:"去实名"}},observers:{info(e){this.setData(JSON.parse(e))},remainSeconds(e){e<0&&(e=0);const t=e%60,n=Math.floor(e/60);this.setData({remainStr:E(n)+":"+E(t)})}},attached(){this.setData({showSeconds:S}),S||setTimeout((()=>{S=!0,this.setData({showSeconds:!0})}),1e4),C=setInterval((()=>{let{remainSeconds:e}=this.data;e&&(e--,this.setData({remainSeconds:e}),e||this.triggerEvent("stop"))}),1e3)},methods:{tap(){this.triggerEvent("click")},destroy(){clearInterval(C),this.triggerEvent("destroy")}}});n(521);t.registerElement({is:"ad-skip-card",options:{classPrefix:"ad-skip-card",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root","bind:tap":"close"},C:[{T:"wx-image",A:{class:"icon",src:"https://res.wx.qq.com/t/fed_upload/d3b06ed8-7ff2-4477-ae39-c37621d06f20/Frame%20348.png"},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return!!e.amount||void 0},F:function(e,t,n,i){return"恭喜获得 广告跳过卡x"+e.amount}}}]},{T:"wx-view",A:{class:"sub"},C:[{S:"在小游戏中使用可跳过对应视频广告"}]},{T:"wx-view",A:{class:"sub"},C:[{S:"点击任意处关闭"}]}]}],BM:{amount:[[0,1,0]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{amount:{type:Number,value:1}},methods:{close(){this.triggerEvent("destroy")}}});var I=n(57);const x=n(446);let D=null,O=null,P=[],R=!1;const k=e=>{P?(P.push(e),1===P.length&&(x.setErrorListener((e=>{Reporter.errorReport({key:"exparserScriptError",error:e})})),WeixinJSBridge.invoke("loadWAFile",{filename:"WASclBackend.wasm"},(e=>{let t=e.arrayBuffer;R&&(t=e.arrayBuffer[__wxConfig.minaVmToken]||t),x.wasm_initialize({bin:t},(()=>{const e=P;P=null,e.forEach((e=>e()))}))})))):e()},N=()=>O,M=t=>{e.onViewportResize(t)},L=globalThis.atob||function(e){const t=String(e).replace(/[=]+$/,"");let n="";if(t.length%4==1)throw new Error('"atob" failed');for(let e,i,r=0,o=0;i=t.charAt(o++);~i&&(e=r%4?64*e+i:i,r++%4)?n+=String.fromCharCode(255&e>>(-2*r&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return n},B=e=>{const t=()=>{e({mainRoot:O})};if(D)return void setTimeout(t,0);k((()=>{try{M((()=>{n(995).triggerRender()}));const i=x.Context.create();D=i.createElement("empty","virtuallayout"),i.bindRootNode(D),D.setClass("__wx_scl__root_node");var e=n(995);e.globalOptions.documentBackend="custom",e.globalOptions.customContext=i,e.initBackend(),I.W.length&&i.appendStyleSheet(I.W.join("")),I.J.length&&I.J.forEach((e=>i.appendStyleSheetBincode((e=>{const t=L(e),n=t.length,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=t.charCodeAt(e);return i})(e))));const r=i.createElement("empty","virtuallayout");D.appendChild(r),r.release(),O=e.createElement("virtuallayout",l),O.classList.toggle("__wx_scl__main_root",!0),e.Element.replaceDocumentElement(O,D,0),setTimeout(t,0)}catch(e){e.stack}}))},F=e=>n(995).globalOptions.customContext.constructor.getExparserElementByViewId(e),U=()=>{n(995).triggerRender()};void 0!==__wxConfig&&"ios"!==__wxConfig.platform&&"function"==typeof __wxConfig.onReady?(R="mina"===__wxConfig.platform,__wxConfig.onReady((()=>{setTimeout((()=>{__wxConfig.platform,k((()=>{}))}),3e3)}))):__wxConfig.platform})(),__sclEngine__=i})(),(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{callSystemFunction:()=>c,wrapSystemFunction:()=>l,callMiniProgramOrPluginFunction:()=>u,callThirdPartyFunction:()=>d,wrapMiniProgramOrPluginFunction:()=>h,wrapThirdPartyFunction:()=>p,surroundThirdByTryCatch:()=>f});const n=/[ (@]*https?:\/\/([^/]*)\/+(.*?):(\d+):(\d+)/,i=[];function r(e){if(!e||e.__wxOriginalStack__)return!1;const t=e.stack;if(void 0===t)return!1;let n=t,r=i.length-1,a=0;for(;a>=0&&r>=0;){let e=n.length,t=0;for(const i in o){if(!o[i])continue;const r=n.indexOf(o[i],a);r<0||e<=r||(e=r,t=o[i].length)}if(e>=n.length)break;const s=`at <${i[r--].description}>`;n=n.slice(0,e)+s+n.slice(e+t),a=e+s.length}return Object.defineProperties(e,{__wxOriginalStack__:{value:t,writable:!0,configurable:!0},stack:{value:n,writable:!0,enumerable:!0,configurable:!0}}),!0}const o={wrapSystemFunction:null,wrapMiniProgramOrPluginFunction:null};function a(e){const t=((new Error).stack||"").match(/.+/gm);let i="",r=0;t&&t.forEach((e=>{if(n.test(e)&&(r+=1,2===r)){const t=e.match(/^(\s*)at /),n=t?t[1].length:0;return i=e.slice(n),!1}return!0})),o[e]=i}function s(){let e="";for(let t=i.length-1;t>=0;t--)i[t].pluginAppId&&(e=i[t].pluginAppId);return e}function c(e,t,n,c,u,d=!1){let h;null===o.wrapSystemFunction&&(o.wrapSystemFunction="",l("","",a)("wrapSystemFunction")),i.push({description:t});try{h=n.apply(c,u)}catch(t){if(r(t)){if("AppServiceSdkKnownError"===t.type)throw i.pop(),t;if("ThirdScriptError"===t.type){const e=s();Reporter.thirdErrorReport({error:t,source:e,triggerErrorCallback:!d})}else Reporter.errorReport({key:e,error:t,triggerErrorCallback:!d})}if(d)throw i.pop(),t}return i.pop(),h}function l(e,t,n,i=!1){return function(...r){return c(e,t,n,this,r,i)}}function u(e,t,n,s,c,l=!1){let u;null===o.wrapMiniProgramOrPluginFunction&&(o.wrapMiniProgramOrPluginFunction="",h("","",a)("wrapMiniProgramOrPluginFunction")),i.push({description:t,pluginAppId:e});try{u=n.apply(s,c)}catch(t){if(r(t)&&Reporter.thirdErrorReport({error:t,source:e||"",triggerErrorCallback:!l}),l)throw i.pop(),t}return i.pop(),u}function d(e,t,n,i,r=!1){return u(s(),e,t,n,i,r)}function h(e,t,n,i=!1){return function(...r){return u(e,t,n,this,r,i)}}function p(e,t,n=!1){return function(...i){return u(s(),e,t,this,i,n)}}function f(e,t){const n=(t||"").match(/^\s*(?:at )?([\s\S]*)$/),i=n?n[1]:"",r=e||function(){};return function(...e){return u(s(),i,r,r,e,!1)}}__errorTracer__=t})(),(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};(()=>{e.d(t,{default:()=>z});const n={APP:0,WIDGET:1,GAME:2,GAME_SUBCONTEXT:3},i={login:1,login_cancel:2,login_fail:3,request_fail:4,connectSocket_fail:5,closeSocket_fail:6,sendSocketMessage_fail:7,uploadFile_fail:8,downloadFile_fail:9,redirectTo_fail:10,navigateTo_fail:11,navigateBack_fail:12,appServiceSDKScriptError:13,webviewSDKScriptError:14,jsEnginScriptError:15,thirdScriptError:16,webviewScriptError:17,exparserScriptError:18,widgetEnginScriptError:113,widgetThirdScriptError:114,gameSDKScriptError:135,gameSubContextSDKScriptError:136,gameThirdScriptError:137,gameSubContextThirdScriptError:138,startRecord:19,startRecord_fail:20,getLocation:21,getLocation_fail:22,chooseLocation:23,chooseLocation_fail:24,openAddress:25,openAddress_fail:26,openLocation:27,openLocation_fail:28,makePhoneCall:29,makePhoneCall_fail:30,operateWXData:31,operateWXData_fail:32,checkLogin:33,checkLogin_fail:34,refreshSession:35,refreshSession_fail:36,chooseVideo:37,chooseVideo_fail:38,chooseImage:39,chooseImage_fail:40,verifyPaymentPassword:41,verifyPaymentPassword_fail:42,requestPayment:43,requestPayment_fail:44,bindPaymentCard:45,bindPaymentCard_fail:46,requestPaymentToBank:47,requestPaymentToBank_fail:48,openDocument:49,openDocument_fail:50,chooseContact:51,chooseContact_fail:52,operateMusicPlayer:53,operateMusicPlayer_fail:54,getMusicPlayerState_fail:55,playVoice_fail:56,setNavigationBarTitle_fail:57,switchTab_fail:58,getImageInfo_fail:59,enableCompass_fail:60,enableAccelerometer_fail:61,getStorage_fail:62,setStorage_fail:63,clearStorage_fail:64,removeStorage_fail:65,getStorageInfo_fail:66,getStorageSync_fail:67,setStorageSync_fail:68,addCard_fail:69,openCard_fail:70,openSetting_fail:71,reLaunch_fail:72,getClipboardData_fail:73,setClipboardData_fail:74,showShareMenu_fail:75,hideShareMenu_fail:76,showToast_fail:77,hideToast_fail:78,openBluetoothAdapter_fail:79,closeBluetoothAdapter_fail:80,getBluetoothAdapterState_fail:81,startBluetoothDevicesDiscovery_fail:82,stopBluetoothDevicesDiscovery_fail:83,getBluetoothDevices_fail:84,getConnectedBluetoothDevices_fail:85,createBLEConnection_fail:86,closeBLEConnection_fail:87,getBLEDeviceServices_fail:88,getBLEDeviceCharacteristics_fail:89,notifyBLECharacteristicValueChanged_fail:90,readBLECharacteristicValue_fail:91,checkIsSupportFacialRecognition_fail:92,startFacialRecognitionVerify_fail:93,startFacialRecognitionVerifyAndUploadVideo_fail:94,startBeaconDiscovery_fail:95,stopBeaconDiscovery_fail:96,getBeacons_fail:97,getSetting_fail:98,setScreenBrightness_fail:99,getScreenBrightness_fail:100,vibrateShort_fail:101,vibrateLong_fail:102,shareAppMessage:103,shareAppMessage_fail:104,shareAppMessage_cancel:105,shareAppMessageDirectly:106,shareAppMessageDirectly_fail:107,shareAppMessageDirectly_cancel:108,sendBizRedPacket_fail:109,addPhoneContact_fail:110,saveImageToPhotosAlbum_fail:111,saveVideoToPhotosAlbum_fail:112,setTopBarText_fail:115,setNavigationBarRightButton_fail:116,setEnableDebug_fail:117,captureScreen_fail:118,setKeepScreenOn_fail:119,createRequestTask:120,createRequestTask_fail:121,createDownloadTask:122,createDownloadTask_fail:123,createUploadTask:124,createUploadTask_fail:125,checkIsSupportSoterAuthentication_fail:126,startSoterAuthentication_fail:127,navigateToMiniProgram_fail:128,navigateBackMiniProgram_fail:129,openDeliveryList_fail:130,setNavigationBarColor_fail:131,setStatusBarStyle_fail:132,getFileInfo_fail:133,global_objs_readonly:134,writeBLECharacteristicValue_fail:206,adData_error:140,adExposureReport_fail:141,adClickReport_fail:142,adNavigateToMiniProgram_fail:143,adOpenUrl_fail:144,initGameIsolatedContext:145,initGameIsolatedContext_fail:146,initGameOpenDataContext:147,initGameOpenDataContext_fail:148,initAppIsolatedContext:149,initAppIsolatedContext_fail:150,adFollowReport_fail:151,adAddContact_fail:152,adDownloadAppInternal_fail:153,adGetInstallState_fail:154,adQueryDownloadTask_fail:155,adAddDownloadTaskStraight_fail:156,adPauseDownloadTask_fail:157,adResumeDownloadTask_fail:158,adInstallDownloadTask_fail:159,pluginDisplayInPage:160,functionalPageSuccess:161,functionalPageFail:162,functionalPageReject:163,insertInputToWebLayer_fail:166,insertVideoToWebLayer_fail:167,insertInputToWebLayer_succ:168,insertVideoToWebLayer_succ:169,insertMapToWebLayer_fail:171,insertMapToWebLayer_succ:172,insertLiveToWebLayer_fail:178,insertLiveToWebLayer_succ:179,insertCanvas2dToWebLayer_fail:180,insertCanvas2dToWebLayer_succ:181,insertWebGLToWebLayer_fail:187,insertWebGLToWebLayer_succ:186,insertVideo2ToWebLayer_fail:182,insertVideo2ToWebLayer_succ:183,insertCameraToWebLayer_fail:184,insertCameraToWebLayer_succ:185,insertTextareaToWebLayer_fail:189,insertTextareaToWebLayer_succ:188,audioInstancesCountReach1024:170,bindUDP:173,sendUDPMessage:174,receiveUDPMessage:175,UDPError:176,sendUDPMessageToInvalidAddress:177,clientLibVersionNotMatch:205,subContextLibVersionNotMatch:207,oaAddContact_fail:201,oaReportBehavior_fail:202,oaGetContactData_fail:203,demoEnterHomePage:210,demoConfigRepeat:211,getUserInteractiveStorage:212,modifyFriendInteractiveStorage:213,modifyFriendInteractiveStorageShowModal:214,modifyFriendInteractiveStorageConfirm:215,modifyFriendInteractiveStorageCancel:216,disableLivePlayer:220,disableLivePusher:221,disableVideo:222,asyncApiCost:226,asyncApiCount:227,requestSubscribeMessageWithNative:230,requestSubscribeMessageWithNativeSuccess:231,requestSubscribeMessageWithNativeFail:232,tradeServiceGetPermissionBytesSuccess:235,tradeServiceGetPermissionBytesFail:236,tradeServiceCanUse:237,tradeServiceCanNotUse:238,tradeServiceTapCard:239,midasLaunchFeatureFail:240,createNormalWorker:241,createWKWorker:242,onWorkerWebViewTerminate:244,loadGameIndependentSubPackageFail:243,requestPaymentCheckTicketCount:245,requestPaymentCheckTicketFail:246,requestPaymentCheckTicketTimeout:247,useLaunchExptInfo:249,useOriginLaunchExptInfo:250,useContactExptInfo:251},r={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267,MiniGameOpenDataMonitor:23536},o={webview2AppService:1,appService2Webview:2,funcReady:3,firstGetData:4,firstRenderTime:5,reRenderTime:6,forceUpdateRenderTime:7,appRoute2newPage:8,newPage2pageReady:9,thirdScriptRunTime:10,pageframe:11,WAWebview:12,WAWidget:13,widgetCanvasReady:14,widgetFirstDataPush:15},a={apiCallback:1,pageInvoke:2,widgetInvoke:3},s={appServiceSDKScriptError:1,webviewSDKScriptError:2,jsEnginScriptError:3,thirdScriptError:4,webviewScriptError:5,exparserScriptError:6,widgetEnginScriptError:7,widgetThirdScriptError:8,gameSDKScriptError:10,gameSubContextSDKScriptError:12,gameThirdScriptError:13,gameSubContextThirdScriptError:14},c={[n.APP]:"thirdScriptError",[n.WIDGET]:"widgetThirdScriptError",[n.GAME]:"gameThirdScriptError",[n.GAME_SUBCONTEXT]:"gameSubContextThirdScriptError"},l=__wxConfig,u=(l.platform,"devtools"===l.platform),d=(l.platform,"ios"===l.platform);l.platform,l.platform,l.platform;const h=l.host||{},p=(h.env,h.env,h.env,h.forceUseNativeMap,"object"==typeof window&&window&&window.__wkrenderer_h5,Object.prototype.toString);function f(e){return p.call(e).slice(8,-1)}const g=e=>"Number"===f(e);Number.isNaN,Number.isFinite,Array.isArray;let _=[],m=[],y=[],v=0,A=0,b=0,w=0,E=0;const T={},S={},C={};function I(e){void 0!==WeixinJSBridge?e():"undefined"!=typeof document&&document.addEventListener("WeixinJSBridgeReady",e,!1)}function x(...e){I((()=>{WeixinJSBridge.invoke(...e)}))}function D(){!_||_.length<=0||(x("reportKeyValue",{dataArray:_.slice(0,500)}),_=_.slice(500))}function O(){!m||m.length<=0||(x("reportIDKey",{dataArray:m.slice(0,500)}),m=m.slice(500))}function P(){!y||y.length<=0||(x("systemLog",{dataArray:y}),y=[])}let R=()=>{},k=()=>{},N=()=>{},M=()=>{},L="",B={},F=-1,U=0,W=n.APP,j="";"function"==typeof l.onReady&&l.onReady((()=>{void 0!==l.appType&&(F=l.appType),"object"==typeof l.appLaunchInfo&&(U=l.appLaunchInfo.scene),setTimeout((()=>{WeixinJSBridge.invoke("getNetworkType",{},(e=>{e&&e.networkType&&(j=e.networkType)}))}),0),"function"==typeof WeixinJSBridge.addEventListener&&WeixinJSBridge.addEventListener("onNetworkStatusChange",(e=>{j=e.networkType}))}));const G={surroundThirdByTryCatch:__errorTracer__.surroundThirdByTryCatch,slowReport:({key:e,cost:t,extend:n,force:i})=>{const r=a[e],o=Date.now();if(!r)return;if(!i&&o-E<500)return;if(Object.keys(C).length>50)return;if(C[n]||(C[n]=0),C[n]++,C[n]>3)return;E=o;const s=`${t},${encodeURIComponent(n)},${r},${G.getAppType()}`;G.reportKeyValue({key:"Slow",value:s})},speedReport:({key:e,data:t,timeMark:n,force:i})=>{const r=o[e],a=Date.now();let s=0;const c=n.nativeTime;if(!r)return;if(!i&&a-(T[r]||0)<500)return;if(!n.startTime||!n.endTime)return;if((1===r||2===r)&&!c)return;t&&(s=JSON.stringify(t).length),T[r]=a;const l=`${r},${n.startTime},${c},${c},${n.endTime},${s},${G.getAppType()}`;G.reportKeyValue({key:"Speed",value:l})},reportQualityData(e,t,n,i=[]){x("reportKeyValue",{version:2,dataArray:[{key:r[e],value:[n-t,U,t,n,...i].join(",")}]})},reportKeyValue:({key:e,value:t,immediately:n=!1,number:i=!1})=>{if(i||r[e]){for(n?_.unshift({key:i?e:r[e],value:t}):_.push({key:i?e:r[e],value:t});_.length>5e3;)_.pop();(Date.now()-v>5e3||n)&&(v=Date.now(),D())}},reportIDKey:({id:e,key:t,value:n=1})=>{if(i[t]){for(m.push({id:e||(d?"356":"358"),key:i[t],value:n});m.length>5e3;)m.pop();Date.now()-A>5e3&&(A=Date.now(),O())}},reportIDKeyDirectly:({id:e,key:t,immediately:n=!1})=>{if(t&&"356"!==e&&"358"!==e){for(m.push({id:e,key:t,value:1});m.length>5e3;)m.pop();(Date.now()-A>5e3||n)&&(A=Date.now(),O())}},thirdErrorReport:({key:e=W,error:t,triggerErrorCallback:n=!0,isUnhandledRejection:i=!1,promise:r,source:o=""})=>{G.errorReport({key:c[e],error:t,triggerErrorCallback:n,isThirdScriptError:!0,isUnhandledRejection:i,promise:r,source:o})},errorReport:({key:e,error:t,isThirdScriptError:i=!1,triggerErrorCallback:r=!0,isUnhandledRejection:o=!1,promise:a,source:c=""})=>{if(!s[e])return;if(null==t)return;let d,h;"function"==typeof __wxSourceMapRetrace__&&(t=__wxSourceMapRetrace__(t)),"object"==typeof t&&(t.message||t.stack)?(d=t.message,h=t.stack):(d=function(e){try{return JSON.stringify(e)}catch(e){return e.message,""}}(t),h=f(t));const p=i?"MiniProgramError":`SystemError (${e})`,g=d;let _="";t.name&&0!==h.indexOf(t.name)&&(_="\n"+t.name+": "+g);const m=`${p}\n${g}${_}\n${h}`;if(u){const e=new Error(`${p}\n${g}`);"object"==typeof t&&void 0!==t.name&&Object.defineProperty(e,"name",{value:t.name}),"object"==typeof t&&void 0!==t.stack&&Object.defineProperty(e,"stack",{value:t.stack}),console.error(e)}else o?console.error("(in promise) "+m):console.error(m);if(m.indexOf("subContext.js")>=0)return;if("undefined"!=typeof window&&void 0!==window.__webviewId__?function(...e){I((()=>{WeixinJSBridge.publish(...e)}))}("WEBVIEW_ERROR_MSG",{data:{msg:m},options:{timestamp:Date.now()}}):r&&(G.triggerErrorMessage(m,o,t,a),i&&G.triggerThirdErrorMessage(m,o,t,a)),Object.keys(S).length>50)return;if(o&&"Error"!==f(t))return;let y="",v="";W!==n.APP&&W!==n.GAME||(y=L,v=function(e){let t="";return Object.keys(e).forEach(((n,i)=>{0!==i&&(t+="&");try{t+=`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`}catch(e){}})),t}(B));const A=c.match(/wx[0-9a-f]{16}/)?function(e){const t=l&&l.appContactInfo&&l.appContactInfo.call_plugin_info;if(!t||!Array.isArray(t))return 0;const n=t.find((t=>t.plugin_id===e));return n&&void 0!==n.inner_version?n.inner_version:0}(c):0;if(4===l.appType)try{j=__appServiceSDK__.getGameRelatedContextsExports().game._getCurrentNetworkType()}catch(e){}const b=[s[e],t.name,...[g,h,"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.version||"",G.getAppType(),y,v,"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.updateTime||"","",o?1:0,c,A,j].map((e=>{let t;try{t=encodeURIComponent(e)}catch(n){t=e}return t}))].join(",");S[b]||(S[b]=0),S[b]++,i&&S[b]>3||S[b]>3||(G.reportIDKey({key:e}),G.reportKeyValue({key:"Error",value:b}),O(),D(),P())},log:(e,t)=>{e&&"string"==typeof e&&(!t&&Date.now()-b<50||(b=Date.now(),y.push(e+""),y.length>=50&&P()))},submit:()=>{Date.now()-w<50||(w=Date.now(),O(),D(),P())},registerErrorListener:e=>{"function"==typeof e&&(R=e)},registerThirdErrorListener:e=>{"function"==typeof e&&(k=e)},registerUnhandledRejectionListener:e=>{"function"==typeof e&&(N=e)},registerThirdUnhandledRejectionListener:e=>{"function"==typeof e&&(M=e)},triggerErrorMessage:(e,t=!1,n,i)=>{setTimeout((()=>{try{t?N(n,i):R(e)}catch(e){console.error(e.message,"at onError callback function")}}),0)},triggerThirdErrorMessage:(e,t=!1,n,i)=>{setTimeout((()=>{try{t?M(n,i):k(e)}catch(e){console.error(e.message,"at onError callback function")}}),0)},setAsWidget:()=>{W=n.WIDGET},setAsGame:()=>{W=n.GAME},setAsGameSubContext:()=>{W=n.GAME_SUBCONTEXT},getAppType:()=>-1===F?0:F+1e3},V={};function H(e){Object.defineProperty(V,e,{get(){return t=G[e],function(...e){try{return t.apply(t,e)}catch(e){return void console.error("reporter error:"+e.message,e.stack)}};var t},configurable:!0,enumerable:!0})}Object.keys(G).forEach((e=>{H(e)})),Object.defineProperty(V,"__route__",{set(e){L=e}}),Object.defineProperty(V,"__method__",{set(){}}),Object.defineProperty(V,"__query__",{set(e){B=e}}),V.RunType=n,"undefined"!=typeof window&&Object.defineProperty(window,"onbeforeunload",{configurable:!0,enumerable:!0,writable:!0,value(){G.submit()}});const z=V})(),Reporter=t.default})();var wgfx=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1).__importStar(n(2));t.default=i},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return r})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return u})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return h})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return g})),n.d(t,"__spread",(function(){return _})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return A})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return T})),n.d(t,"__classPrivateFieldGet",(function(){return S})),n.d(t,"__classPrivateFieldSet",(function(){return C}));var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof y?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function A(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:y(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumPixelType=t.EnumAction=t.EnumColorMask=t.EnumBlendOp=t.EnumBlendFactor=t.EnumStencilOp=t.EnumCompareFunc=t.EnumFaceWinding=t.EnumCullMode=t.EnumUniformType=t.EnumVertexStep=t.EnumVertexFormat=t.EnumWrap=t.EnumFilter=t.EnumPrimitiveType=t.EnumPixelFormat=t.EnumShaderStage=t.EnumCubeFace=t.EnumImageType=t.EnumIndexType=t.EnumBufferType=t.EnumUsage=t.EnumFeature=void 0,function(e){e[e.INSTANCING=0]="INSTANCING",e[e.TEXTURE_COMPRESSION_DXT=1]="TEXTURE_COMPRESSION_DXT",e[e.TEXTURE_COMPRESSION_PVRTC=2]="TEXTURE_COMPRESSION_PVRTC",e[e.TEXTURE_COMPRESSION_ATC=3]="TEXTURE_COMPRESSION_ATC",e[e.TEXTURE_COMPRESSION_ETC2=4]="TEXTURE_COMPRESSION_ETC2",e[e.TEXTURE_FLOAT=5]="TEXTURE_FLOAT",e[e.TEXTURE_HALF_FLOAT=6]="TEXTURE_HALF_FLOAT",e[e.ORIGIN_BOTTOM_LEFT=7]="ORIGIN_BOTTOM_LEFT",e[e.ORIGIN_TOP_LEFT=8]="ORIGIN_TOP_LEFT",e[e.MSAA_RENDER_TARGETS=9]="MSAA_RENDER_TARGETS",e[e.PACKED_VERTEX_FORMAT_10_2=10]="PACKED_VERTEX_FORMAT_10_2",e[e.MULTIPLE_RENDER_TARGET=11]="MULTIPLE_RENDER_TARGET",e[e.IMAGETYPE_3D=12]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=13]="IMAGETYPE_ARRAY"}(t.EnumFeature||(t.EnumFeature={})),function(e){e[e.IMMUTABLE=1]="IMMUTABLE",e[e.DYNAMIC=2]="DYNAMIC",e[e.STREAM=3]="STREAM"}(t.EnumUsage||(t.EnumUsage={})),function(e){e[e.VERTEXBUFFER=1]="VERTEXBUFFER",e[e.INDEXBUFFER=2]="INDEXBUFFER"}(t.EnumBufferType||(t.EnumBufferType={})),function(e){e[e.NONE=1]="NONE",e[e.UINT16=2]="UINT16",e[e.UINT32=3]="UINT32"}(t.EnumIndexType||(t.EnumIndexType={})),function(e){e[e.IMAGETYPE_2D=1]="IMAGETYPE_2D",e[e.IMAGETYPE_CUBE=2]="IMAGETYPE_CUBE",e[e.IMAGETYPE_3D=3]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=4]="IMAGETYPE_ARRAY"}(t.EnumImageType||(t.EnumImageType={})),function(e){e[e.POS_X=0]="POS_X",e[e.NEG_X=1]="NEG_X",e[e.POS_Y=2]="POS_Y",e[e.NEG_Y=3]="NEG_Y",e[e.POS_Z=4]="POS_Z",e[e.NEG_Z=5]="NEG_Z",e[e.NUM=6]="NUM"}(t.EnumCubeFace||(t.EnumCubeFace={})),function(e){e[e.VS=0]="VS",e[e.FS=1]="FS"}(t.EnumShaderStage||(t.EnumShaderStage={})),function(e){e[e.NONE=1]="NONE",e[e.RGBA8=2]="RGBA8",e[e.RGB8=3]="RGB8",e[e.RGBA4=4]="RGBA4",e[e.R5G6B5=5]="R5G6B5",e[e.R5G5B5A1=6]="R5G5B5A1",e[e.R10G10B10A2=7]="R10G10B10A2",e[e.RGBA32F=8]="RGBA32F",e[e.RGBA16F=9]="RGBA16F",e[e.R32F=10]="R32F",e[e.R16F=11]="R16F",e[e.L8=12]="L8",e[e.DXT1=13]="DXT1",e[e.DXT3=14]="DXT3",e[e.DXT5=15]="DXT5",e[e.DEPTH=16]="DEPTH",e[e.DEPTHSTENCIL=17]="DEPTHSTENCIL",e[e.PVRTC2_RGB=18]="PVRTC2_RGB",e[e.PVRTC4_RGB=19]="PVRTC4_RGB",e[e.PVRTC2_RGBA=20]="PVRTC2_RGBA",e[e.PVRTC4_RGBA=21]="PVRTC4_RGBA",e[e.ETC2_RGB8=22]="ETC2_RGB8",e[e.ETC2_SRGB8=23]="ETC2_SRGB8",e[e.ETC1_RGB8=24]="ETC1_RGB8",e[e.PIXELFORMAT_PVR_CCZ=25]="PIXELFORMAT_PVR_CCZ",e[e.PIXELFORMAT_PVR_GZ=26]="PIXELFORMAT_PVR_GZ",e[e.PIXELFORMAT_ETC2_RGBA8=27]="PIXELFORMAT_ETC2_RGBA8",e[e.ASTC=28]="ASTC"}(t.EnumPixelFormat||(t.EnumPixelFormat={})),function(e){e[e.POINTS=1]="POINTS",e[e.LINES=2]="LINES",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP"}(t.EnumPrimitiveType||(t.EnumPrimitiveType={})),function(e){e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR"}(t.EnumFilter||(t.EnumFilter={})),function(e){e[e.REPEAT=1]="REPEAT",e[e.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=3]="MIRRORED_REPEAT"}(t.EnumWrap||(t.EnumWrap={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.BYTE4=5]="BYTE4",e[e.BYTE4N=6]="BYTE4N",e[e.UBYTE4=7]="UBYTE4",e[e.UBYTE4N=8]="UBYTE4N",e[e.SHORT2=9]="SHORT2",e[e.SHORT2N=10]="SHORT2N",e[e.SHORT4=11]="SHORT4",e[e.SHORT4N=12]="SHORT4N",e[e.UINT10_N2=13]="UINT10_N2"}(t.EnumVertexFormat||(t.EnumVertexFormat={})),function(e){e[e.PER_VERTEX=1]="PER_VERTEX",e[e.PER_INSTANCE=2]="PER_INSTANCE"}(t.EnumVertexStep||(t.EnumVertexStep={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.MAT4=5]="MAT4"}(t.EnumUniformType||(t.EnumUniformType={})),function(e){e[e.NONE=1]="NONE",e[e.FRONT=2]="FRONT",e[e.BACK=3]="BACK"}(t.EnumCullMode||(t.EnumCullMode={})),function(e){e[e.CCW=1]="CCW",e[e.CW=2]="CW"}(t.EnumFaceWinding||(t.EnumFaceWinding={})),function(e){e[e.NEVER=1]="NEVER",e[e.LESS=2]="LESS",e[e.EQUAL=3]="EQUAL",e[e.LESS_EQUAL=4]="LESS_EQUAL",e[e.GREATER=5]="GREATER",e[e.NOT_EQUAL=6]="NOT_EQUAL",e[e.GREATER_EQUAL=7]="GREATER_EQUAL",e[e.ALWAYS=8]="ALWAYS"}(t.EnumCompareFunc||(t.EnumCompareFunc={})),function(e){e[e.KEEP=1]="KEEP",e[e.ZERO=2]="ZERO",e[e.REPLACE=3]="REPLACE",e[e.INCR_CLAMP=4]="INCR_CLAMP",e[e.DECR_CLAMP=5]="DECR_CLAMP",e[e.INVERT=6]="INVERT",e[e.INCR_WRAP=7]="INCR_WRAP",e[e.DECR_WRAP=8]="DECR_WRAP"}(t.EnumStencilOp||(t.EnumStencilOp={})),function(e){e[e.ZERO=1]="ZERO",e[e.ONE=2]="ONE",e[e.SRC_COLOR=3]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=4]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=5]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=6]="ONE_MINUS_SRC_ALPHA",e[e.DST_COLOR=7]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=8]="ONE_MINUS_DST_COLOR",e[e.DST_ALPHA=9]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=10]="ONE_MINUS_DST_ALPHA",e[e.SRC_ALPHA_SATURATED=11]="SRC_ALPHA_SATURATED",e[e.BLEND_COLOR=12]="BLEND_COLOR",e[e.ONE_MINUS_BLEND_COLOR=13]="ONE_MINUS_BLEND_COLOR",e[e.BLEND_ALPHA=14]="BLEND_ALPHA",e[e.ONE_MINUS_BLEND_ALPHA=15]="ONE_MINUS_BLEND_ALPHA"}(t.EnumBlendFactor||(t.EnumBlendFactor={})),function(e){e[e.ADD=1]="ADD",e[e.SUBTRACT=2]="SUBTRACT",e[e.REVERSE_SUBTRACT=3]="REVERSE_SUBTRACT"}(t.EnumBlendOp||(t.EnumBlendOp={})),function(e){e[e.NONE=16]="NONE",e[e.R=1]="R",e[e.G=2]="G",e[e.B=4]="B",e[e.A=8]="A",e[e.RGB=7]="RGB",e[e.RGBA=15]="RGBA"}(t.EnumColorMask||(t.EnumColorMask={})),function(e){e[e.CLEAR=1]="CLEAR",e[e.LOAD=2]="LOAD",e[e.DONTCARE=3]="DONTCARE"}(t.EnumAction||(t.EnumAction={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1"}(t.EnumPixelType||(t.EnumPixelType={}))}]).default,wxGA=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([,function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return r})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return u})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return h})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return g})),n.d(t,"__spread",(function(){return _})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return A})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return T})),n.d(t,"__classPrivateFieldGet",(function(){return S})),n.d(t,"__classPrivateFieldSet",(function(){return C}));var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof y?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function A(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:y(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumPixelType=t.EnumAction=t.EnumColorMask=t.EnumBlendOp=t.EnumBlendFactor=t.EnumStencilOp=t.EnumCompareFunc=t.EnumFaceWinding=t.EnumCullMode=t.EnumUniformType=t.EnumVertexStep=t.EnumVertexFormat=t.EnumWrap=t.EnumFilter=t.EnumPrimitiveType=t.EnumPixelFormat=t.EnumShaderStage=t.EnumCubeFace=t.EnumImageType=t.EnumIndexType=t.EnumBufferType=t.EnumUsage=t.EnumFeature=void 0,function(e){e[e.INSTANCING=0]="INSTANCING",e[e.TEXTURE_COMPRESSION_DXT=1]="TEXTURE_COMPRESSION_DXT",e[e.TEXTURE_COMPRESSION_PVRTC=2]="TEXTURE_COMPRESSION_PVRTC",e[e.TEXTURE_COMPRESSION_ATC=3]="TEXTURE_COMPRESSION_ATC",e[e.TEXTURE_COMPRESSION_ETC2=4]="TEXTURE_COMPRESSION_ETC2",e[e.TEXTURE_FLOAT=5]="TEXTURE_FLOAT",e[e.TEXTURE_HALF_FLOAT=6]="TEXTURE_HALF_FLOAT",e[e.ORIGIN_BOTTOM_LEFT=7]="ORIGIN_BOTTOM_LEFT",e[e.ORIGIN_TOP_LEFT=8]="ORIGIN_TOP_LEFT",e[e.MSAA_RENDER_TARGETS=9]="MSAA_RENDER_TARGETS",e[e.PACKED_VERTEX_FORMAT_10_2=10]="PACKED_VERTEX_FORMAT_10_2",e[e.MULTIPLE_RENDER_TARGET=11]="MULTIPLE_RENDER_TARGET",e[e.IMAGETYPE_3D=12]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=13]="IMAGETYPE_ARRAY"}(t.EnumFeature||(t.EnumFeature={})),function(e){e[e.IMMUTABLE=1]="IMMUTABLE",e[e.DYNAMIC=2]="DYNAMIC",e[e.STREAM=3]="STREAM"}(t.EnumUsage||(t.EnumUsage={})),function(e){e[e.VERTEXBUFFER=1]="VERTEXBUFFER",e[e.INDEXBUFFER=2]="INDEXBUFFER"}(t.EnumBufferType||(t.EnumBufferType={})),function(e){e[e.NONE=1]="NONE",e[e.UINT16=2]="UINT16",e[e.UINT32=3]="UINT32"}(t.EnumIndexType||(t.EnumIndexType={})),function(e){e[e.IMAGETYPE_2D=1]="IMAGETYPE_2D",e[e.IMAGETYPE_CUBE=2]="IMAGETYPE_CUBE",e[e.IMAGETYPE_3D=3]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=4]="IMAGETYPE_ARRAY"}(t.EnumImageType||(t.EnumImageType={})),function(e){e[e.POS_X=0]="POS_X",e[e.NEG_X=1]="NEG_X",e[e.POS_Y=2]="POS_Y",e[e.NEG_Y=3]="NEG_Y",e[e.POS_Z=4]="POS_Z",e[e.NEG_Z=5]="NEG_Z",e[e.NUM=6]="NUM"}(t.EnumCubeFace||(t.EnumCubeFace={})),function(e){e[e.VS=0]="VS",e[e.FS=1]="FS"}(t.EnumShaderStage||(t.EnumShaderStage={})),function(e){e[e.NONE=1]="NONE",e[e.RGBA8=2]="RGBA8",e[e.RGB8=3]="RGB8",e[e.RGBA4=4]="RGBA4",e[e.R5G6B5=5]="R5G6B5",e[e.R5G5B5A1=6]="R5G5B5A1",e[e.R10G10B10A2=7]="R10G10B10A2",e[e.RGBA32F=8]="RGBA32F",e[e.RGBA16F=9]="RGBA16F",e[e.R32F=10]="R32F",e[e.R16F=11]="R16F",e[e.L8=12]="L8",e[e.DXT1=13]="DXT1",e[e.DXT3=14]="DXT3",e[e.DXT5=15]="DXT5",e[e.DEPTH=16]="DEPTH",e[e.DEPTHSTENCIL=17]="DEPTHSTENCIL",e[e.PVRTC2_RGB=18]="PVRTC2_RGB",e[e.PVRTC4_RGB=19]="PVRTC4_RGB",e[e.PVRTC2_RGBA=20]="PVRTC2_RGBA",e[e.PVRTC4_RGBA=21]="PVRTC4_RGBA",e[e.ETC2_RGB8=22]="ETC2_RGB8",e[e.ETC2_SRGB8=23]="ETC2_SRGB8",e[e.ETC1_RGB8=24]="ETC1_RGB8",e[e.PIXELFORMAT_PVR_CCZ=25]="PIXELFORMAT_PVR_CCZ",e[e.PIXELFORMAT_PVR_GZ=26]="PIXELFORMAT_PVR_GZ",e[e.PIXELFORMAT_ETC2_RGBA8=27]="PIXELFORMAT_ETC2_RGBA8",e[e.ASTC=28]="ASTC"}(t.EnumPixelFormat||(t.EnumPixelFormat={})),function(e){e[e.POINTS=1]="POINTS",e[e.LINES=2]="LINES",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP"}(t.EnumPrimitiveType||(t.EnumPrimitiveType={})),function(e){e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR"}(t.EnumFilter||(t.EnumFilter={})),function(e){e[e.REPEAT=1]="REPEAT",e[e.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=3]="MIRRORED_REPEAT"}(t.EnumWrap||(t.EnumWrap={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.BYTE4=5]="BYTE4",e[e.BYTE4N=6]="BYTE4N",e[e.UBYTE4=7]="UBYTE4",e[e.UBYTE4N=8]="UBYTE4N",e[e.SHORT2=9]="SHORT2",e[e.SHORT2N=10]="SHORT2N",e[e.SHORT4=11]="SHORT4",e[e.SHORT4N=12]="SHORT4N",e[e.UINT10_N2=13]="UINT10_N2"}(t.EnumVertexFormat||(t.EnumVertexFormat={})),function(e){e[e.PER_VERTEX=1]="PER_VERTEX",e[e.PER_INSTANCE=2]="PER_INSTANCE"}(t.EnumVertexStep||(t.EnumVertexStep={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.MAT4=5]="MAT4"}(t.EnumUniformType||(t.EnumUniformType={})),function(e){e[e.NONE=1]="NONE",e[e.FRONT=2]="FRONT",e[e.BACK=3]="BACK"}(t.EnumCullMode||(t.EnumCullMode={})),function(e){e[e.CCW=1]="CCW",e[e.CW=2]="CW"}(t.EnumFaceWinding||(t.EnumFaceWinding={})),function(e){e[e.NEVER=1]="NEVER",e[e.LESS=2]="LESS",e[e.EQUAL=3]="EQUAL",e[e.LESS_EQUAL=4]="LESS_EQUAL",e[e.GREATER=5]="GREATER",e[e.NOT_EQUAL=6]="NOT_EQUAL",e[e.GREATER_EQUAL=7]="GREATER_EQUAL",e[e.ALWAYS=8]="ALWAYS"}(t.EnumCompareFunc||(t.EnumCompareFunc={})),function(e){e[e.KEEP=1]="KEEP",e[e.ZERO=2]="ZERO",e[e.REPLACE=3]="REPLACE",e[e.INCR_CLAMP=4]="INCR_CLAMP",e[e.DECR_CLAMP=5]="DECR_CLAMP",e[e.INVERT=6]="INVERT",e[e.INCR_WRAP=7]="INCR_WRAP",e[e.DECR_WRAP=8]="DECR_WRAP"}(t.EnumStencilOp||(t.EnumStencilOp={})),function(e){e[e.ZERO=1]="ZERO",e[e.ONE=2]="ONE",e[e.SRC_COLOR=3]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=4]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=5]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=6]="ONE_MINUS_SRC_ALPHA",e[e.DST_COLOR=7]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=8]="ONE_MINUS_DST_COLOR",e[e.DST_ALPHA=9]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=10]="ONE_MINUS_DST_ALPHA",e[e.SRC_ALPHA_SATURATED=11]="SRC_ALPHA_SATURATED",e[e.BLEND_COLOR=12]="BLEND_COLOR",e[e.ONE_MINUS_BLEND_COLOR=13]="ONE_MINUS_BLEND_COLOR",e[e.BLEND_ALPHA=14]="BLEND_ALPHA",e[e.ONE_MINUS_BLEND_ALPHA=15]="ONE_MINUS_BLEND_ALPHA"}(t.EnumBlendFactor||(t.EnumBlendFactor={})),function(e){e[e.ADD=1]="ADD",e[e.SUBTRACT=2]="SUBTRACT",e[e.REVERSE_SUBTRACT=3]="REVERSE_SUBTRACT"}(t.EnumBlendOp||(t.EnumBlendOp={})),function(e){e[e.NONE=16]="NONE",e[e.R=1]="R",e[e.G=2]="G",e[e.B=4]="B",e[e.A=8]="A",e[e.RGB=7]="RGB",e[e.RGBA=15]="RGBA"}(t.EnumColorMask||(t.EnumColorMask={})),function(e){e[e.CLEAR=1]="CLEAR",e[e.LOAD=2]="LOAD",e[e.DONTCARE=3]="DONTCARE"}(t.EnumAction||(t.EnumAction={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1"}(t.EnumPixelType||(t.EnumPixelType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(4),o=n(6),a=i.__importDefault(n(30)),s=i.__importDefault(n(79)),c=i.__importDefault(n(80)),l=i.__importStar(n(78)),u=new(function(){function e(){this.enumComponentType=o.enumComponentType,this.enumModelType=o.enumModelType,this.isNativeValueNative=!1,this.isEngineNative=!1,this.isPhysicsNative=!1,this.isWeakRefNative=!1,this.isCreateNativeUUMap=!1,this.isCreateNativeSUMap=!1,this.isCreateNativeULUMap=!1,this.hasNewWeakRef=!1,this.heatProtect=60,this._inited=!1}return e.prototype.heatProtectPromiseFactory=function(){return new Promise((function(e){e(60)}))},e.prototype.init=function(){var e=this;if(!this._inited){if("undefined"!=typeof NativeGlobal&&NativeGlobal.GameAccelerator)this.worker=new NativeGlobal.GameAccelerator,this.isEngineNative=!!this.worker.getEngine,this.isPhysicsNative=!!NativeGlobal.Phys3D,this.isRenderNative=!!this.worker.getRenderer,this.isNativeValueNative=!!this.worker.createNativeValue,this.isWeakRefNative=!!this.worker.createWeakRef,this.hasNewWeakRef=!!this.worker.createNewWeakRef,this.gaVersion=this.worker.getVersion?this.worker.getVersion():{version:"0"},this.isCreateNativeUUMap=!!this.worker.createNativeUUMap,this.isCreateNativeSUMap=!!this.worker.createNativeSUMap,this.isCreateNativeULUMap=!!this.worker.createNativeULUMap;else{this.worker=r.wxMockGA,this.isEngineNative=this.isPhysicsNative=this.isRenderNative=!1;try{var t=l.default("ga-logic");t&&"function"==typeof t.getEngine&&"function"==typeof t.getVersion&&(console.log("ga-logic process id:"+l.pid),this.worker.getEngine=function(){return t.getEngine()},this.worker.getVersion=function(){return t.getVersion()},this.isEngineNative=!0)}catch(e){}this.gaVersion=this.worker.getVersion()}var n=parseInt(this.gaVersion.version),i=NaN===n||n<100?0:n;this.gaVersion.versionNumber=i,this.config={isNativeValueNative:this.isNativeValueNative,isEngineNative:this.isEngineNative,isPhysicsNative:this.isPhysicsNative,isRenderNative:this.isRenderNative,isWeakRefNative:this.isWeakRefNative,gaVersion:this.gaVersion},setTimeout((function(){"undefined"!=typeof NativeGlobal&&NativeGlobal.GameAccelerator,e.isRenderNative,e.isEngineNative&&e.config.gaVersion.versionNumber,e.isNativeValueNative}),100),this._inited=!0}},e.prototype.createWeakRef=function(e){return(this.isWeakRefNative?this.worker:r.wxMockGA).createWeakRef(e)},e.prototype.createAutoRef=function(e){return(this.isWeakRefNative?this.worker:r.wxMockGA).createAutoRef(e)},e.prototype.createNewWeakRef=function(e){if(!e._wr_entry_)throw new Error("createNewWeakRef Error: is not a WeakRefSentry");return(this.isWeakRefNative?this.worker:r.wxMockGA).createNewWeakRef(e)},e.prototype.createNewWeakRefSentry=function(){var e=(this.isWeakRefNative?this.worker:r.wxMockGA).createNewWeakRefSentry();return e._wr_entry_=!0,e},e.prototype.NativeGlobalStartProfile=function(){return NativeGlobal.startProfile()},e.prototype.NativeGlobalStopProfile=function(){return NativeGlobal.stopProfile()},e.prototype.getNativeGlobalProfileResult=function(){return NativeGlobal.getProfileResult()},e.prototype.LogicAcceleratorStartProfile=function(){return this.worker.startProfile()},e.prototype.LogicAcceleratorStopProfile=function(){return this.worker.stopProfile()},e.prototype.getLogicAcceleratorProfileResult=function(){return this.worker.getProfileResult()},e.prototype.createNativeValue=function(e){var t=(this.isNativeValueNative?this.worker:r.wxMockGA).createNativeValue(e);return new s.default(t)},e.prototype.getRenderer=function(e){var t=this.isRenderNative?this.worker:r.wxMockGA,n=this.isRenderNative?e.gfx:e,i=t.getRenderer(n);return new c.default(i,this.config)},e.prototype.getEngine=function(){var e=(this.isEngineNative?this.worker:r.wxMockGA).getEngine();return new a.default(e,this.config)},e.prototype.getGAVersion=function(){return this.gaVersion},e.prototype.createNativeUUMap=function(){return(this.isCreateNativeUUMap?this.worker:r.wxMockGA).createNativeUUMap()},e.prototype.createNativeSUMap=function(){return(this.isCreateNativeSUMap?this.worker:r.wxMockGA).createNativeSUMap()},e.prototype.createNativeULUMap=function(){return(this.isCreateNativeULUMap?this.worker:r.wxMockGA).createNativeULUMap()},e}());__wxConfig.onReady((function(){!0===__wxConfig.engine&&u.init()})),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wxMockGA=void 0;var i=n(1),r=i.__importDefault(n(5)),o=n(13),a=i.__importDefault(n(14)),s=function(){function e(){this.key1toKey2=new Map,this.key2toValue=new Map}return e.prototype.set=function(e,t,n){this.key1toKey2.set(e,t),this.key2toValue.set(t,n)},e.prototype.get=function(e,t){if(this.key1toKey2.get(e)===t)return this.key2toValue.get(t)},e.prototype.del=function(e,t){this.key1toKey2.delete(e),this.key2toValue.delete(t)},e}(),c=function(){function e(){this.map=new Map}return e.prototype.set=function(e,t){this.map.set(e,t)},e.prototype.get=function(e){return this.map.get(e)},e.prototype.del=function(e){this.map.delete(e)},e}(),l=function(){function e(){}return e.prototype.createNativeValue=function(e){return new o.NativeValueNative(this._gfx,e)},e.prototype.getRenderer=function(e){return this._gfx=e,new a.default(e)},e.prototype.getEngine=function(){return new r.default},e.prototype.getVersion=function(){return{version:"mock"}},e.prototype.createWeakRef=function(e){return"function"==typeof WeakRef?new WeakRef(e):{deref:function(){return e}}},e.prototype.createAutoRef=function(e){if("function"==typeof WeakRef)var t=new WeakRef(e);return{makeRef:function(){return"function"==typeof WeakRef?t.deref():e}}},e.prototype.createNewWeakRef=function(e){return"function"==typeof WeakRef?new WeakRef(e):{deref:function(){return e}}},e.prototype.createNewWeakRefSentry=function(){return{__mockGA__:!0}},e.prototype.createNativeUUMap=function(){return new c},e.prototype.createNativeSUMap=function(){return new c},e.prototype.createNativeULUMap=function(){return new s},e.prototype.startProfile=function(){},e.prototype.stopProfile=function(){},e.prototype.getProfileResult=function(){return{}},e}(),u=new l;t.wxMockGA=u,t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(6),o=i.__importDefault(n(7)),a=i.__importDefault(n(9)),s=i.__importDefault(n(10)),c=i.__importDefault(n(11)),l=i.__importDefault(n(12)),u=n(8),d=1024,h=function(){function e(){this.dirtyEntities=new ArrayBuffer(d),this.entityCommands=new ArrayBuffer(d),this.cullingResult=new ArrayBuffer(d)}return e.prototype.createEntity=function(e,t){if(t&&t>0){var n=0;return n=e===r.enumEntityType.Entity3D?4*r.ENTITY3D_SIZE:4*r.ENTITY2D_SIZE,new l.default(n,t)}return new c.default(e)},e.prototype.createComponent=function(e,t,n){if(e===r.enumComponentType.Cullable&&t&&t>0){var i=4*r.CULLABLECOMPONENT_SIZE;return new l.default(i,t)}return new o.default(e,t,n)},e.prototype.createDataModel=function(e,t){return new s.default(e,t)},e.prototype.createDataBuffer=function(e){return new a.default(e)},e.prototype.createAnimatorControllerStateModel=function(e){return{id:u.requestAccelerateObjectID(),buffer:new ArrayBuffer(5*e*4+12)}},e.prototype.refreshWorldTransform=function(){},e.prototype.frustumCulling=function(e,t,n,i,r,o,a,s,c,l,u,d,h,p){return{hash:0,objects:new ArrayBuffer(0),distances:new ArrayBuffer(0)}},e.prototype.orthoCulling=function(e,t,n,i,r,o,a,s,c,l,u,d,h,p,f,g){return{hash:0,objects:new ArrayBuffer(0),distances:new ArrayBuffer(0)}},e.prototype.addDirtyEntity=function(){},e.prototype.frameStart=function(){},e}();t.default=h},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CULLABLECOMPONENT_SIZE=t.CULLABLECOMPONENT_OFFSET=t.ENTITY3D_SIZE=t.ENTITY3D_OFFSET=t.ENTITY2D_SIZE=t.ENTITY2D_OFFSET=t.POOLINDEX_AND=t.POOLID_AND=t.componentType2SharedBufferSize=t.enumEntityType=t.enumEntityCommandType=t.enumModelType=t.enumComponentType=void 0,function(e){e[e.Undefined=0]="Undefined",e[e.Cullable=1]="Cullable",e[e.Animator=2]="Animator",e[e.SkinnedSkeleton=3]="SkinnedSkeleton"}(i=t.enumComponentType||(t.enumComponentType={})),function(e){e[e.Undefined=0]="Undefined",e[e.AnimationClipModel=1]="AnimationClipModel",e[e.SkeletonBoneInverseModel=2]="SkeletonBoneInverseModel"}(t.enumModelType||(t.enumModelType={})),function(e){e[e.SetRootEntity=1]="SetRootEntity",e[e.AddChild=2]="AddChild",e[e.AddChildAtIndex=3]="AddChildAtIndex",e[e.RemoveFromParent=4]="RemoveFromParent",e[e.DisperseSubTree=5]="DisperseSubTree",e[e.BindToBone=6]="BindToBone",e[e.BindToBones=7]="BindToBones",e[e.UnBindFromBone=8]="UnBindFromBone",e[e.UnBindFromBones=9]="UnBindFromBones",e[e.EntityCommandActive=10]="EntityCommandActive",e[e.EntityCommandInActive=11]="EntityCommandInActive"}(t.enumEntityCommandType||(t.enumEntityCommandType={})),function(e){e[e.Entity2D=0]="Entity2D",e[e.Entity3D=1]="Entity3D"}(t.enumEntityType||(t.enumEntityType={})),t.componentType2SharedBufferSize={},t.componentType2SharedBufferSize[i.Cullable]=24,t.componentType2SharedBufferSize[i.Animator]=4,t.componentType2SharedBufferSize[i.SkinnedSkeleton]=72,t.POOLID_AND=4294963200,t.POOLINDEX_AND=4095,t.ENTITY2D_OFFSET={},t.ENTITY2D_OFFSET.OFFSET_ROTATION=0,t.ENTITY2D_OFFSET.OFFSET_POSITION=1,t.ENTITY2D_OFFSET.OFFSET_SCALE=3,t.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX=5,t.ENTITY2D_SIZE=14,t.ENTITY3D_OFFSET={},t.ENTITY3D_OFFSET.DF_ROTATIONTYPE=1,t.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE=0,t.ENTITY3D_OFFSET.OFFSET_ROTATION=1,t.ENTITY3D_OFFSET.OFFSET_POSITION=5,t.ENTITY3D_OFFSET.OFFSET_SCALE=8,t.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX=11,t.ENTITY3D_SIZE=27,t.CULLABLECOMPONENT_OFFSET={},t.CULLABLECOMPONENT_OFFSET.DF_ACTIVE=1,t.CULLABLECOMPONENT_OFFSET.OFFSET_ACTIVE=0,t.CULLABLECOMPONENT_OFFSET.OFFSET_CULLMASK=1,t.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_CENTER=2,t.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_RADIUS=5,t.CULLABLECOMPONENT_OFFSET.OFFSET_ENTITYID=6,t.CULLABLECOMPONENT_SIZE=7},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(8),o=function(e,t,n){switch(this.size=0,this.id=r.requestAccelerateObjectID(),e){case i.enumComponentType.Cullable:this.size=i.componentType2SharedBufferSize[e];break;case i.enumComponentType.Animator:this.size=i.componentType2SharedBufferSize[e]*t*n;break;case i.enumComponentType.SkinnedSkeleton:this.size=i.componentType2SharedBufferSize[e]*t}this.buffer=new ArrayBuffer(this.size)};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=t.requestAcceleratePoolID=t.requestAccelerateObjectID=void 0;var i=0;t.requestAccelerateObjectID=function(){return i++};var r=4096;t.requestAcceleratePoolID=function(){var e=r;return r+=4096,e},t.applyMixins=function(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n))}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(8),o=function(e){this.id=r.requestAccelerateObjectID(),e===i.enumEntityType.Entity3D?this.size=108:this.size=56,this.buffer=new ArrayBuffer(this.size)};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),r=function(e,t){this.id=i.requestAcceleratePoolID(),this.size=e*t,this.buffer=new ArrayBuffer(this.size)};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NativeValueNative=void 0;var i=!1;void 0!==__wxConfig&&__wxConfig.jitMode&&(i=!0);var r=function(e,t){i?(this.nativeBuffer=new Float32Array(t/4),this.data=this.nativeBuffer.buffer):(this.nativeBuffer=e.createNativeBuffer(t),this.data=this.nativeBuffer.data),this._f32View=new Float32Array(this.data)};t.NativeValueNative=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(15)),o=i.__importDefault(n(16)),a=n(25),s=i.__importDefault(n(26)),c=n(17),l=n(27),u=n(23),d=n(28),h=n(29),p=function(){function e(e){this._decoder=new s.default;var t=new o.default(e);this._executor=t,this._decoder._setCommandExecutor(t),this._gfx=e}return e.prototype.createCommandBuffer=function(e){return new r.default(this)},e.prototype.createRect=function(e,t,n,i){return new a.RectNative(e,t,n,i)},e.prototype.createRenderDraw=function(){return new c.RenderDrawNative},e.prototype.createVertexLayout=function(e){var t=JSON.parse(e);return new u.VertexLayoutNative(t,this._gfx)},e.prototype.createView=function(e,t,n,i){return new l.RenderViewNative(e,t,n,i)},e.prototype._executeCommandBuffer=function(e){this._decoder.decodeAndExecCommandBuffer(e),this._executor.endFrame()},e.prototype.executeCommandBuffer=function(e){},e.prototype.createBatchableVertexBuffer=function(e,t){return new d.BatchableVertexBufferNative(e,t)},e.prototype.createBatchableIndexBuffer=function(e){return new h.BatchableIndexBufferNative(e)},e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this._array=[],this._renderer=e}return e.prototype.extend=function(t){return new e(this._renderer)},e.prototype.putRenderDraw=function(e){this._array.push(e)},e.prototype.batchPutRenderDraw=function(e){this._array=this._array.concat(e)},e.prototype.putSubCommandBuffer=function(e){this._array.push(e)},e.prototype.reset=function(){this._array.length=0},e.prototype.execute=function(){this._renderer._executeCommandBuffer(this)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),r=n(23),o=function(){function e(e){this.renderDraw2Bindings=new WeakMap,this.pipelineMap={},this._renderDrawList=[],this._batchedRenderDrawList=[],this.gfx=e}return e.prototype.drawRenderDraw=function(e){this._renderDrawList.push(e)},e.prototype.endFrame=function(){for(var e=0,t=r.createdVertexLayout;e<t.length;e++){t[e]._getBatcher().reset()}for(var n=0,i=this._renderDrawList;n<i.length;n++){var o=i[n];this.doRenderDrawBatch(o)}this._flushRenderDrawBatch();for(var a=0,s=r.createdVertexLayout;a<s.length;a++){s[a]._getBatcher().uploadBuffer()}for(var c=0,l=this._batchedRenderDrawList;c<l.length;c++){o=l[c];this.doDrawRenderDraw(o)}this.lastView&&(this.gfx.endPass(),this.lastView=null),this.gfx.commit(),this._renderDrawList.length=0,this._batchedRenderDrawList.length=0},e.prototype.doRenderDrawBatch=function(e){if(!e.batchable)return this._flushRenderDrawBatch(),void this._batchedRenderDrawList.push(e);this._startBatchedRenderDraw&&!this._compareMaterial(this._startBatchedRenderDraw,e)&&this._flushRenderDrawBatch();var t=e.vertexBuffers[0],n=e.indexBuffer;if(e.renderDataDirty){t._cloneBuffer();for(var i=t._positionViews,r=t._worldPositionViews,o=e._worldTransformMatrix,a=0;a<i.length;a++){var s=i[a],c=r[a];o.transformPoint(s,c)}}var l=e.vertexLayout._getBatcher(),u=l._ibCount;this._startBatchedRenderDraw||(this._startBatchedRenderDraw=e,this._vertexBatcher=l,this._startIBCount=u),l.batchMesh(t,n,e.baseElement,e.numElements)},e.prototype._flushRenderDrawBatch=function(){if(this._startBatchedRenderDraw){var e=new i.RenderDrawNative;Object.assign(e,this._startBatchedRenderDraw),e.indexBuffer=this._vertexBatcher._indexBuffer,e.vertexBuffers=[this._vertexBatcher._vertexBuffer],e.batchable=!1,e.baseElement=this._startIBCount,e.numElements=this._vertexBatcher._ibCount-this._startIBCount,this._batchedRenderDrawList.push(e),this._startBatchedRenderDraw=null,this._vertexBatcher=null}},e.prototype._compareMaterial=function(e,t){var n=e.raster===t.raster&&e.rgba===t.rgba&&e.shader===t.shader&&e.vertexLayout===t.vertexLayout&&e.view===t.view&&e.stencilDepth===t.stencilDepth&&e.stencilOpTest===t.stencilOpTest&&e.blend===t.blend,i=e.images.length,r=e.nativeValues.length;if(!(n=n&&i==t.images.length&&r==t.nativeValues.length))return n;for(var o=0;o<i;o++)n=n&&e.images[o]===t.images[o];for(o=0;o<r;o++)n=n&&e.nativeValues[o]===t.nativeValues[o];return n},e.prototype.doDrawRenderDraw=function(e){var t=e.view;this.lastView!==t&&(this.lastView&&this.gfx.endPass(),t._isDefaultView?"undefined"==typeof __IDE?this.gfx.beginDefaultPass(t._passAction,t._viewport._width,t._viewport._height):"undefined"!=typeof __gameContextWindow&&void 0!==__gameContextWindow.__IDE&&void 0!==__gameContextWindow.__IDE.realCanvas?this.gfx.beginDefaultPass(t._passAction,__gameContextWindow.__IDE.realCanvas.width,__gameContextWindow.__IDE.realCanvas.height):this.gfx.beginDefaultPass(t._passAction,t._viewport._width,t._viewport._height):this.gfx.beginPass(t._pass,t._passAction),this.gfx.applyViewport(t._viewport._x,t._viewport._y,t._viewport._width,t._viewport._height,!1),this.gfx.applyScissorRect(t._scissor._x,t._scissor._y,t._scissor._width,t._scissor._height,!1),this.lastView=e.view),this.gfx.applyPipeline(this.getPipeline(e)),this.gfx.applyBindings(this.getBindings(e));for(var n=0;n<e.nativeValues.length;n++){var i=e.nativeValues[n].nativeBuffer;this.gfx.applyUniforms(wgfx.EnumShaderStage.VS,n,i)}this.gfx.draw(e.baseElement,e.numElements,1)},e.prototype.getBindings=function(e){return this.gfx.makeBindings({vertex_buffers:e.vertexBuffers,index_buffer:e.indexBuffer,vs_images:e.images})},e.prototype.getPipeline=function(e){var t=e._hashForPipeline;if(!this.pipelineMap[t]){var n=this.gfx.makePipeline({layout:e.vertexLayout._config.layout,shader:e.shader,index_type:e._getIndexType(),primitive_type:e._getPrimitiveType(),depth_stencil:{stencil_front:{fail_op:e._getStencilFrontFailOp(),depth_fail_op:e._getStencilFrontDepthFailOp(),pass_op:e._getStencilFrontPassOp(),compare_func:e._getStencilFrontCompareFunc()},stencil_back:{fail_op:e._getStencilBackFailOp(),depth_fail_op:e._getStencilBackDepthFailOp(),pass_op:e._getStencilBackPassOp(),compare_func:e._getStencilBackCompareFunc()},depth_compare_func:e._getDepthCompareFunc(),depth_write_enabled:e._getDepthWriteEnable(),stencil_enabled:e._getStencilEnable(),stencil_read_mask:e._getStencilRead(),stencil_write_mask:e._getStencilWrite(),stencil_ref:e._getStencilRef()},blend:{enabled:e._getBlendEnable(),src_factor_rgb:e._getBlendSrcFactorRGB(),dst_factor_rgb:e._getBlendDstFactorRGB(),op_rgb:e._getBlendOpRGB(),src_factor_alpha:e._getBlendSrcFactorAlpha(),dst_factor_alpha:e._getBlendDstFactorAlpha(),op_alpha:e._getBlendOpAlpha(),color_write_mask:e._getBlendColorMask(),color_format:e._getColorFormat(),depth_format:e._getDepthFormat()},rasterizer:{cull_mode:e._getCullMode(),face_winding:e._getFaceWinding()}});this.pipelineMap[t]=n}return this.pipelineMap[t]},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDrawNative=void 0;var i=n(1),r=i.__importDefault(n(18)),o=i.__importDefault(n(19)),a=i.__importDefault(n(21));var s=function(){function e(){this.blend=0,this.rgba=0,this.stencilOpTest=0,this.stencilDepth=0,this.raster=0,this._hashForPipeline=""}return e.prototype.applyUpdate=function(){var e=[this.blend,this.rgba,this.stencilDepth,this.stencilOpTest,this.raster,this.vertexLayout._id,this.shader.id];this._hashForPipeline=e.join("_"),this.worldTransform&&this.batchable&&(this._worldTransformMatrix=new a.default(this.worldTransform._f32View))},e.prototype._getBlendEnable=function(){return!!r.default.WRITE_GET(this.blend,r.default.BLEND_ENABLE_MASK,r.default.BLEND_ENABLE_SHIFT)},e.prototype._getBlendOpAlpha=function(){return r.default.WRITE_GET(this.blend,r.default.BLEND_OP_ALPHA_MASK,r.default.BLEND_OP_ALPHA_SHIFT)},e.prototype._getBlendDstFactorAlpha=function(){return r.default.WRITE_GET(this.blend,r.default.BLEND_DST_FACTOR_ALPHA_MASK,r.default.BLEND_DST_FACTOR_ALPHA_SHIFT)},e.prototype._getBlendSrcFactorAlpha=function(){return r.default.WRITE_GET(this.blend,r.default.BLEND_SRC_FACTOR_ALPHA_MASK,r.default.BLEND_SRC_FACTOR_ALPHA_SHIFT)},e.prototype._getBlendOpRGB=function(){return r.default.WRITE_GET(this.blend,r.default.BLEND_OP_RGB_MASK,r.default.BLEND_OP_RGB_SHIFT)},e.prototype._getBlendDstFactorRGB=function(){return r.default.WRITE_GET(this.blend,r.default.BLEND_DST_FACTOR_RGB_MASK,r.default.BLEND_DST_FACTOR_RGB_SHIFT)},e.prototype._getBlendSrcFactorRGB=function(){return r.default.WRITE_GET(this.blend,r.default.BLEND_SRC_FACTOR_RGB_MASK,r.default.BLEND_SRC_FACTOR_RGB_SHIFT)},e.prototype._getBlendColorMask=function(){return r.default.WRITE_GET(this.blend,r.default.COLOR_WRITE_MASK,r.default.COLOR_WRITE_SHIFT)},e.prototype._getBlendRGBA=function(){var e=o.default.fromHex(this.rgba);return[e.r/255,e.g/255,e.b/255,e.a/255]},e.prototype._getStencilFrontFailOp=function(){return r.default.WRITE_GET(this.stencilOpTest,r.default.STENCIL_FRONT_FAIL_OP_MASK,r.default.STENCIL_FRONT_FAIL_OP_SHIFT)},e.prototype._getStencilFrontDepthFailOp=function(){return r.default.WRITE_GET(this.stencilOpTest,r.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,r.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)},e.prototype._getStencilFrontPassOp=function(){return r.default.WRITE_GET(this.stencilOpTest,r.default.STENCIL_FRONT_PASS_OP_MASK,r.default.STENCIL_FRONT_PASS_OP_SHIFT)},e.prototype._getStencilFrontCompareFunc=function(){return r.default.WRITE_GET(this.stencilOpTest,r.default.STENCIL_FRONT_COMPARE_FUN_MASK,r.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)},e.prototype._getStencilBackFailOp=function(){return r.default.WRITE_GET(this.stencilOpTest,r.default.STENCIL_BACK_FAIL_OP_MASK,r.default.STENCIL_BACK_FAIL_OP_SHIFT)},e.prototype._getStencilBackDepthFailOp=function(){return r.default.WRITE_GET(this.stencilOpTest,r.default.STENCIL_BACK_DEPTH_FAIL_OP_MASK,r.default.STENCIL_BACK_DEPTH_FAIL_OP_SHIFT)},e.prototype._getStencilBackPassOp=function(){return r.default.WRITE_GET(this.stencilOpTest,r.default.STENCIL_BACK_PASS_OP_MASK,r.default.STENCIL_BACK_PASS_OP_SHIFT)},e.prototype._getStencilBackCompareFunc=function(){return r.default.WRITE_GET(this.stencilOpTest,r.default.STENCIL_BACK_COMPARE_FUN_MASK,r.default.STENCIL_BACK_COMPARE_FUN_SHIFT)},e.prototype._getStencilRef=function(){return r.default.WRITE_GET(this.stencilDepth,r.default.STENCIL_REF_MASK,r.default.STENCIL_REF_SHIFT)},e.prototype._getStencilWrite=function(){return r.default.WRITE_GET(this.stencilDepth,r.default.STENCIL_WRITE_MASK,r.default.STENCIL_WRITE_SHIFT)},e.prototype._getStencilRead=function(){return r.default.WRITE_GET(this.stencilDepth,r.default.STENCIL_READ_MASK,r.default.STENCIL_READ_SHIFT)},e.prototype._getDepthCompareFunc=function(){return r.default.WRITE_GET(this.stencilDepth,r.default.DEPTH_COMPARE_FUNC_MASK,r.default.DEPTH_COMPARE_FUNC_SHIFT)},e.prototype._getDepthWriteEnable=function(){return!!r.default.WRITE_GET(this.stencilDepth,r.default.DEPTH_WRITE_ENABLE_FUNC_MASK,r.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT)},e.prototype._getStencilEnable=function(){return!!r.default.WRITE_GET(this.stencilDepth,r.default.STENCIL_ENABLE_FUNC_MASK,r.default.STENCIL_ENABLE_FUNC_SHIFT)},e.prototype._getColorAttachCount=function(){return r.default.WRITE_GET(this.raster,r.default.COLOR_ATTACHMENT_COUNT_MASK,r.default.COLOR_ATTACHMENT_COUNT_SHIFT)},e.prototype._getColorFormat=function(){return r.default.WRITE_GET(this.raster,r.default.COLOR_FORMAT_MASK,r.default.COLOR_FORMAT_SHIFT)},e.prototype._getDepthFormat=function(){return r.default.WRITE_GET(this.raster,r.default.DEPTH_FORMAT_MASK,r.default.DEPTH_FORMAT_SHIFT)},e.prototype._getCullMode=function(){return r.default.WRITE_GET(this.raster,r.default.CULL_MODE_MASK,r.default.CULL_MODE_SHIFT)},e.prototype._getFaceWinding=function(){return r.default.WRITE_GET(this.raster,r.default.FACE_WINDING_MASK,r.default.FACE_WINDING_SHIFT)},e.prototype._getSampleCount=function(){return r.default.WRITE_GET(this.raster,r.default.SAMPLE_COUNT_MASK,r.default.SAMPLE_COUNT_SHIFT)},e.prototype._getPrimitiveType=function(){return r.default.WRITE_GET(this.raster,r.default.PRIMITIVE_TYPE_MASK,r.default.PRIMITIVE_TYPE_SHIFT)},e.prototype._getIndexType=function(){return r.default.WRITE_GET(this.raster,r.default.INDEX_TYPE_MASK,r.default.INDEX_TYPE_SHIFT)},e.prototype._getAlphaToCoverageEnable=function(){return r.default.WRITE_GET(this.raster,r.default.ALPHA_TO_COVERAGE_ENABLE_MASK,r.default.ALPHA_TO_COVERAGE_ENABLE_SHIFT)},e}();t.RenderDrawNative=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={WRITE_GET:function(e,t,n){return(e&t)>>n},WRITE_SET:function(e,t,n){return e<<n&t},WRITE_SET_SAFE:function(e,t,n){return e<<n>>>0&t},COLOR_WRITE_SHIFT:0,COLOR_WRITE_MASK:15,BLEND_SRC_FACTOR_RGB_SHIFT:4,BLEND_SRC_FACTOR_RGB_MASK:240,BLEND_DST_FACTOR_RGB_SHIFT:8,BLEND_DST_FACTOR_RGB_MASK:3840,BLEND_OP_RGB_SHIFT:12,BLEND_OP_RGB_MASK:61440,BLEND_SRC_FACTOR_ALPHA_SHIFT:16,BLEND_SRC_FACTOR_ALPHA_MASK:983040,BLEND_DST_FACTOR_ALPHA_SHIFT:20,BLEND_DST_FACTOR_ALPHA_MASK:15728640,BLEND_OP_ALPHA_SHIFT:24,BLEND_OP_ALPHA_MASK:251658240,BLEND_ENABLE_SHIFT:28,BLEND_ENABLE_MASK:4026531840,BLEND_RGBA_R_SHIFT:0,BLEND_RGBA_R_MASK:255,BLEND_RGBA_G_SHIFT:8,BLEND_RGBA_G_MASK:65280,BLEND_RGBA_B_SHIFT:16,BLEND_RGBA_B_MASK:16711680,BLEND_RGBA_A_SHIFT:24,BLEND_RGBA_A_MASK:4278190080,STENCIL_FRONT_FAIL_OP_SHIFT:0,STENCIL_FRONT_FAIL_OP_MASK:15,STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT:4,STENCIL_FRONT_DEPTH_FAIL_OP_MASK:240,STENCIL_FRONT_PASS_OP_SHIFT:8,STENCIL_FRONT_PASS_OP_MASK:3840,STENCIL_FRONT_COMPARE_FUN_SHIFT:12,STENCIL_FRONT_COMPARE_FUN_MASK:61440,STENCIL_BACK_FAIL_OP_SHIFT:16,STENCIL_BACK_FAIL_OP_MASK:983040,STENCIL_BACK_DEPTH_FAIL_OP_SHIFT:20,STENCIL_BACK_DEPTH_FAIL_OP_MASK:15728640,STENCIL_BACK_PASS_OP_SHIFT:24,STENCIL_BACK_PASS_OP_MASK:251658240,STENCIL_BACK_COMPARE_FUN_SHIFT:28,STENCIL_BACK_COMPARE_FUN_MASK:4026531840,STENCIL_REF_SHIFT:0,STENCIL_REF_MASK:255,STENCIL_WRITE_SHIFT:8,STENCIL_WRITE_MASK:65280,STENCIL_READ_SHIFT:16,STENCIL_READ_MASK:16711680,DEPTH_COMPARE_FUNC_SHIFT:24,DEPTH_COMPARE_FUNC_MASK:251658240,DEPTH_WRITE_ENABLE_FUNC_SHIFT:28,DEPTH_WRITE_ENABLE_FUNC_MASK:805306368,STENCIL_ENABLE_FUNC_SHIFT:30,STENCIL_ENABLE_FUNC_MASK:3221225472,COLOR_ATTACHMENT_COUNT_SHIFT:0,COLOR_ATTACHMENT_COUNT_MASK:15,COLOR_FORMAT_SHIFT:4,COLOR_FORMAT_MASK:1008,DEPTH_FORMAT_SHIFT:10,DEPTH_FORMAT_MASK:64512,BLEND_PART_MASK:65535,CULL_MODE_SHIFT:16,CULL_MODE_MASK:196608,FACE_WINDING_SHIFT:18,FACE_WINDING_MASK:786432,SAMPLE_COUNT_SHIFT:20,SAMPLE_COUNT_MASK:15728640,PRIMITIVE_TYPE_SHIFT:24,PRIMITIVE_TYPE_MASK:117440512,INDEX_TYPE_SHIFT:27,INDEX_TYPE_MASK:939524096,ALPHA_TO_COVERAGE_ENABLE_SHIFT:30,ALPHA_TO_COVERAGE_ENABLE_MASK:3221225472,RASTER_PART_MASK:4294901760}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlendType=void 0;var i,r=n(20);!function(e){e[e.Alpha=0]="Alpha",e[e.RGB=1]="RGB",e[e.RGBA=2]="RGBA",e[e.None=3]="None"}(i=t.BlendType||(t.BlendType={}));var o=function(){function e(e,t,n,i){e=e||0,t=t||0,n=n||0,i="number"==typeof i?i:255,this._value32=(i<<24>>>0)+(n<<16)+(t<<8)+e}return Object.defineProperty(e.prototype,"r",{get:function(){return 255&this._value32},set:function(e){e=r.mathClamp(e,0,255),this._value32=(4294967040&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return(65280&this._value32)>>>8},set:function(e){e=r.mathClamp(e,0,255)<<8,this._value32=(4294902015&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return(16711680&this._value32)>>>16},set:function(e){e=r.mathClamp(e,0,255)<<16,this._value32=(4278255615&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return(4278190080&this._value32)>>>24},set:function(e){e=r.mathClamp(e,0,255)<<24,this._value32=(16777215&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){return new e(255,255,255,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BLACK",{get:function(){return new e(0,0,0,255)},enumerable:!1,configurable:!0}),e.fromHex=function(t){var n=new e(0,0,0,0);return n._value32=t,n},e.fromFloatArray=function(t){return new e(Math.ceil(255*(t[0]||0)),Math.ceil(255*(t[1]||0)),Math.ceil(255*(t[2]||0)),t.length>=4?Math.ceil(255*(t[3]||0)):255)},e.prototype.clone=function(){var t=new e(0,0,0,0);return t._value32=this._value32,t},e.prototype.equals=function(e){return e._value32===this._value32},e.prototype.set=function(e){this._value32=e._value32},e.prototype.setRGBA=function(e,t,n,i){this._value32=(i<<24>>>0)+(n<<16)+(t<<8)+e},e.prototype.setValue32=function(e){this._value32=e},e.prototype.toNormalizedArray=function(){return[this.r/255,this.g/255,this.b/255,this.a/255]},e.prototype.toRGBAString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a/255+")"},e.prototype.mix=function(t,n){return n?(n.r=this.r*t.r/255,n.g=this.g*t.g/255,n.b=this.b*t.b/255,n.a=this.a*t.a/255,n):new e(this.r*t.r/255,this.g*t.g/255,this.b*t.b/255,this.a*t.a/255)},e.blendColorHex=function(e,t,n){var r;switch(void 0===n&&(n=i.None),n){case i.Alpha:r=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(16777215&e);break;case i.RGB:r=(4278190080&e)+(((16711680&e)>>>16)*((16711680&t)>>>16)/255<<16)+(((65280&e)>>>8)*((65280&t)>>>8)/255<<8)+(255&e)*(255&t)/255;break;case i.RGBA:r=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(((16711680&e)>>>16)*((16711680&t)>>>16)/255<<16)+(((65280&e)>>>8)*((65280&t)>>>8)/255<<8)+(255&e)*(255&t)/255;break;case i.None:default:r=e}return r},e.getValue32FromRGBA=function(e,t,n,i){return(i<<24>>>0)+(n<<16)+(t<<8)+e},e.randomMix=function(e,t){var n=255&e,i=(65280&e)>>>8,r=(16711680&e)>>>16,o=(4278190080&e)>>>24,a=255&t,s=(65280&t)>>>8,c=(16711680&t)>>>16,l=(4278190080&t)>>>24,u=Math.random(),d=Math.abs(n-a)*u+Math.min(n,a),h=Math.abs(i-s)*u+Math.min(i,s),p=Math.abs(r-c)*u+Math.min(r,c),f=Math.abs(o-l)*u+Math.min(o,l);return this.getValue32FromRGBA(d,h,p,f)},e.BlendType=i,e}();t.default=o},function(e,t,n){"use strict";function i(e,t){return 0===e?1===t?Math.PI/2:-Math.PI/2:e>0?Math.atan(t/e):e<0?t>0?Math.atan(t/e)+Math.PI:Math.atan(t/e)-Math.PI:0}function r(e){return!(e&e-1)}function o(e,t){return Math.abs(e-t)<1e-6}function a(e,t,n){return(e=e>t?e:t)<n?e:n}Object.defineProperty(t,"__esModule",{value:!0}),t.m4Helper=t.m3Helper=t.quatHelper=t.v4Helper=t.v3Helper=t.v2Helper=t.mathHelper=t.mathClamp=t.nearEqual=t.isPowOf2=t.arcTanAngle=void 0,t.arcTanAngle=i,t.isPowOf2=r,t.nearEqual=o,t.mathClamp=a,t.mathHelper={arcTanAngle:i,isPowOf2:r,nearEqual:o,mathClamp:a},t.v2Helper={equal:function(e,t,n,i){return o(e[t],n[i])&&o(e[t+1],n[i+1])},add:function(e,t,n,i,r,o){r[o]=e[t]+n[i],r[o+1]=e[t+1]+n[i+1]},sub:function(e,t,n,i,r,o){r[o]=e[t]-n[i],r[o+1]=e[t+1]-n[i+1]},length:function(e,t){var n=e[t],i=e[t+1];return Math.sqrt(n*n+i*i)},normalize:function(e,n,i,r){var o=t.v2Helper.length(e,n);0===o?(i[r]=0,i[r+1]=0):(i[r]=e[n]/o,i[r+1]=e[n+1]/o)},scale:function(e,t,n,i,r){i[r]=e[t]*n,i[r+1]=e[t+1]*n},lerp:function(e,t,n,i,r,o,a){var s=1-r;o[a]=e[t]*s+n[i]*r,o[a+1]=e[t+1]*s+n[i+1]*r},dot:function(e,t,n,i){return e[t]*n[i]+e[t+1]*n[i+1]},isZero:function(e,t){return o(e[t],0)&&o(e[t+1],0)},getAngle:function(e,t){var n=180*Math.atan2(e[t+1],e[t])/Math.PI;return(360+Math.round(n))%360},distance:function(e,t,n,i){var r=e[t]-n[i],o=e[t+1]-n[i+1];return Math.sqrt(r*r+o*o)},copy:function(e,t,n,i){n[i+0]=e[t+0],n[i+1]=e[t+1]}},t.v3Helper={equal:function(e,t,n,i){return o(e[t],n[i])&&o(e[t+1],n[i+1])&&o(e[t+2],n[i+2])},add:function(e,t,n,i,r,o){r[o]=e[t]+n[i],r[o+1]=e[t+1]+n[i+1],r[o+2]=e[t+2]+n[i+2]},sub:function(e,t,n,i,r,o){r[o]=e[t]-n[i],r[o+1]=e[t+1]-n[i+1],r[o+2]=e[t+2]-n[i+2]},length:function(e,t){var n=e[t],i=e[t+1],r=e[t+2];return Math.sqrt(n*n+i*i+r*r)},normalize:function(e,n,i,r){var o=t.v3Helper.length(e,n);0===o?(i[r]=0,i[r+1]=0,i[r+2]=0):(i[r]=e[n]/o,i[r+1]=e[n+1]/o,i[r+2]=e[n+2]/o)},scale:function(e,t,n,i,r){i[r]=e[t]*n,i[r+1]=e[t+1]*n,i[r+2]=e[t+2]*n},lerp:function(e,t,n,i,r,o,a){var s=1-r;o[a]=e[t]*s+n[i]*r,o[a+1]=e[t+1]*s+n[i+1]*r,o[a+2]=e[t+2]*s+n[i+2]*r},dot:function(e,t,n,i){return e[t]*n[i]+e[t+1]*n[i+1]+e[t+2]*n[i+2]},isZero:function(e,t){return o(e[t],0)&&o(e[t+1],0)&&o(e[t+2],0)},cross:function(e,t,n,i,r,o){r[o]=e[t+1]*n[i+2]-n[i+1]*e[t+2],r[o+1]=e[t+2]*n[i]-n[i+2]*e[t],r[o+2]=e[t]*n[i+1]-n[i]*e[t+1]},distance:function(e,t,n,i){var r=e[t]-n[i],o=e[t+1]-n[i+1],a=e[t+2]-n[i+2];return Math.sqrt(r*r+o*o+a*a)},angleTo:function(e,n,r,o,a,c){var l=s;t.v3Helper.sub(r,o,e,n,l,0),t.v3Helper.normalize(l,0,l,0),a[c]=Math.asin(l[1]),a[c+1]=i(-l[2],-l[0]),a[c+2]=0},copy:function(e,t,n,i){n[i+0]=e[t+0],n[i+1]=e[t+1],n[i+2]=e[t+2]}},t.v4Helper={equal:function(e,t,n,i){return o(e[t],n[i])&&o(e[t+1],n[i+1])&&o(e[t+2],n[i+2])&&o(e[t+3],n[i+3])},add:function(e,t,n,i,r,o){r[o]=e[t]+n[i],r[o+1]=e[t+1]+n[i+1],r[o+2]=e[t+2]+n[i+2],r[o+3]=e[t+3]+n[i+3]},sub:function(e,t,n,i,r,o){r[o]=e[t]-n[i],r[o+1]=e[t+1]-n[i+1],r[o+2]=e[t+2]-n[i+2],r[o+3]=e[t+3]-n[i+3]},scale:function(e,t,n,i,r){i[r]=e[t]*n,i[r+1]=e[t+1]*n,i[r+2]=e[t+2]*n,i[r+3]=e[t+3]*n},lerp:function(e,t,n,i,r,o,a){var s=1-r;o[a]=e[t]*s+n[i]*r,o[a+1]=e[t+1]*s+n[i+1]*r,o[a+2]=e[t+2]*s+n[i+2]*r,o[a+3]=e[t+3]*s+n[i+3]*r},dot:function(e,t,n,i){return e[t]*n[i]+e[t+1]*n[i+1]+e[t+2]*n[i+2]+e[t+3]*n[i+3]},isZero:function(e,t){return o(e[t],0)&&o(e[t+1],0)&&o(e[t+2],0)&&o(e[t+3],0)},copy:function(e,t,n,i){4===e.length?n.set(e,i):(n[i+0]=e[t+0],n[i+1]=e[t+1],n[i+2]=e[t+2],n[i+3]=e[t+3])}},t.quatHelper={multiply:function(e,t,n,i,r,o){var a=e[t+0],s=e[t+1],c=e[t+2],l=e[t+3],u=n[i+0],d=n[i+1],h=n[i+2],p=n[i+3],f=s*h-c*d,g=c*u-a*h,_=a*d-s*u,m=a*u+s*d+c*h;r[o]=a*p+u*l+f,r[o+1]=s*p+d*l+g,r[o+2]=c*p+h*l+_,r[o+3]=l*p-m},invert:function(e,t,n,i){var r=e[t+0],o=e[t+1],a=e[t+2],s=e[t+3],c=r*r+o*o+a*a+s*s,l=c?1/c:0;n[i]=-r*l,n[i+1]=-o*l,n[i+2]=-a*l,n[i+3]=s*l},toMatrix4:function(e,t,n,i){var r=e[t],o=e[t+1],a=e[t+2],s=e[t+3],c=r+r,l=o+o,u=a+a,h=r*c,p=o*c,f=o*l,g=a*c,_=a*l,m=a*u,y=s*c,v=s*l,A=s*u;n.set(d,i),n[i]=1-f-m,n[i+1]=p+A,n[i+2]=g-v,n[i+4]=p-A,n[i+5]=1-h-m,n[i+6]=_+y,n[i+8]=g+v,n[i+9]=_-y,n[i+10]=1-h-f},fromMatrix4:function(e,t,n,i){var r,o,a=e,s=t,c=u,l=a[s+0]+a[s+5]+a[s+10];l>0?(r=Math.sqrt(l+1),c[3]=.5*r,r=.5/r,c[0]=(a[s+6]-a[s+9])*r,c[1]=(a[s+8]-a[s+2])*r,c[2]=(a[s+1]-a[s+4])*r):a[s+0]>=a[s+5]&&a[s+0]>=a[s+10]?(o=.5/(r=Math.sqrt(1+a[s+0]-a[s+5]-a[s+10])),c[0]=.5*r,c[1]=(a[s+1]+a[s+4])*o,c[2]=(a[s+2]+a[s+8])*o,c[3]=(a[s+6]-a[s+9])*o):a[s+5]>a[s+10]?(o=.5/(r=Math.sqrt(1+a[s+5]-a[s+0]-a[s+10])),c[0]=(a[s+4]+a[s+1])*o,c[1]=.5*r,c[2]=(a[s+9]+a[s+6])*o,c[3]=(a[s+8]-a[s+2])*o):(o=.5/(r=Math.sqrt(1+a[s+10]-a[s+0]-a[s+5])),c[0]=(a[s+8]+a[s+2])*o,c[1]=(a[s+9]+a[s+6])*o,c[2]=.5*r,c[3]=(a[s+1]-a[s+4])*o),n.set(c,i)},fromEulerAngles:function(e,n,i,r){t.quatHelper.fromYawRawPitch(e[n+1],e[n],e[n+2],i,r)},fromYawRawPitch:function(e,t,n,i,r){var o=.5*n,a=.5*t,s=.5*e,c=Math.sin(o),l=Math.cos(o),u=Math.sin(a),d=Math.cos(a),h=Math.sin(s),p=Math.cos(s);i[r]=p*u*l+h*d*c,i[r+1]=h*d*l-p*u*c,i[r+2]=p*d*c-h*u*l,i[r+3]=p*d*l+h*u*c},toEulerAngles:function(e,n,i,r){t.quatHelper.toYawRawPitch(e,n,i,r)},toYawRawPitch:function(e,n,r,o){t.quatHelper.transformDirection(e,n,f,0,s,0),t.quatHelper.transformDirection(e,n,g,0,c,0);var a=c;t.v3Helper.angleTo(_,0,s,0,l,0);var u=l;u[0]===Math.PI/2?(u[1]=i(a[2],a[0]),u[2]=0):u[0]===-Math.PI/2?(u[1]=i(-a[2],-a[0]),u[2]=0):(t.m4Helper.yRotation(-u[1],m,0),t.m4Helper.xRotation(-u[0],y,0),t.m4Helper.transformPoint(m,0,c,0,c,0),t.m4Helper.transformPoint(y,0,c,0,c,0),u[2]=i(a[1],-a[0])),u[1]<=-Math.PI&&(u[1]=Math.PI),u[2]<=-Math.PI&&(u[2]=Math.PI),u[1]>=Math.PI&&u[2]>=Math.PI&&(u[1]=0,u[2]=0,u[0]=Math.PI-u[0]),r.set(u,o)},slerp:function(e,t,n,i,r,o,a){var s,c,l,u,d,h=e[t+0],p=e[t+1],f=e[t+2],g=e[t+3],_=n[i+0],m=n[i+1],y=n[i+2],v=n[i+3];return(c=h*_+p*m+f*y+g*v)<0&&(c=-c,_=-_,m=-m,y=-y,v=-v),1-c>1e-6?(s=Math.acos(c),l=Math.sin(s),u=Math.sin((1-r)*s)/l,d=Math.sin(r*s)/l):(u=1-r,d=r),o[a]=u*h+d*_,o[a+1]=u*p+d*m,o[a+2]=u*f+d*y,o[a+3]=u*g+d*v,o},transformDirection:function(e,t,n,i,r,o){var a=n[i],s=n[i+1],c=n[i+2],l=e[t],u=e[t+1],d=e[t+2],h=e[t+3],p=h*a+u*c-d*s,f=h*s+d*a-l*c,g=h*c+l*s-u*a,_=-l*a-u*s-d*c;r[o]=p*h+_*-l+f*-d-g*-u,r[o+1]=f*h+_*-u+g*-l-p*-d,r[o+2]=g*h+_*-d+p*-u-f*-l}},t.m3Helper={translate:function(e,t,n,i,r,o){var a=e[t+0],s=e[t+1],c=e[t+2],l=e[t+3+0],u=e[t+3+1],d=e[t+3+2],h=e[t+6+0],p=e[t+6+1],f=e[t+6+2];9===e.length?r.set(e,o):r===e&&o===t||(r[o]=a,r[o+1]=s,r[o+2]=c,r[o+3]=l,r[o+4]=u,r[o+5]=d),r[o+6]=a*n+l*i+h,r[o+7]=s*n+u*i+p,r[o+8]=c*n+d*i+f},scale:function(e,t,n,i,r,o){r[o+0]=n*e[t+0],r[o+1]=n*e[t+1],r[o+3]=i*e[t+3],r[o+4]=i*e[t+4],r===e&&o===t||(r[o+6]=e[t+6],r[o+7]=e[t+7],r[o+8]=e[t+8])},rotate:function(e,t,n,i,r){var o=e[t+0],a=e[t+1],s=e[t+2],c=e[t+3],l=e[t+4],u=e[t+5],d=Math.cos(n),h=Math.sin(n);i[r+0]=d*o-h*c,i[r+1]=d*a-h*l,i[r+2]=d*s-h*u,i[r+3]=d*c+h*o,i[r+4]=d*l+h*a,i[r+5]=d*u+h*s,i===e&&r===t||(i[r+6]=e[t+6],i[r+7]=e[t+7],i[r+8]=e[t+8])},inverse:function(e,t,n,i){var r=e[t+0+0],o=e[t+0+1],a=e[t+0+2],s=e[t+3+0],c=e[t+3+1],l=e[t+3+2],u=e[t+6+0],d=e[t+6+1],h=e[t+6+2],p=c*h-l*d,f=o*h-a*d,g=o*l-a*c,_=1/(r*p-s*f+u*g);n[i+0]=_*p,n[i+1]=-_*f,n[i+2]=_*g,n[i+3]=-_*(s*h-l*u),n[i+4]=_*(r*h-a*u),n[i+5]=-_*(r*l-a*s),n[i+6]=_*(s*d-c*u),n[i+7]=-_*(r*d-o*u),n[i+8]=_*(r*c-o*s)},multiply:function(e,t,n,i,r,o){var a=e[t+0+0],s=e[t+0+1],c=e[t+0+2],l=e[t+3+0],u=e[t+3+1],d=e[t+3+2],h=e[t+6+0],p=e[t+6+1],f=e[t+6+2],g=n[i+0+0],_=n[i+0+1],m=n[i+0+2],y=n[i+3+0],v=n[i+3+1],A=n[i+3+2],b=n[i+6+0],w=n[i+6+1],E=n[i+6+2];r[o+0]=g*a+_*l+m*h,r[o+1]=g*s+_*u+m*p,r[o+2]=g*c+_*d+m*f,r[o+3]=y*a+v*l+A*h,r[o+4]=y*s+v*u+A*p,r[o+5]=y*c+v*d+A*f,r[o+6]=b*a+w*l+E*h,r[o+7]=b*s+w*u+E*p,r[o+8]=b*c+w*d+E*f},transformPoint:function(e,t,n,i,r,o){var a=n[i+0],s=n[i+1],c=a*e[t+0+2]+s*e[t+3+2]+e[t+6+2];r[o+0]=(a*e[t+0+0]+s*e[t+3+0]+e[t+6+0])/c,r[o+1]=(a*e[t+0+1]+s*e[t+3+1]+e[t+6+1])/c},decomposeScale:function(e,t,n,i){var r=e[t+0],o=e[t+1],a=e[t+3],s=e[t+4];n[i]=Math.sqrt(r*r+o*o),n[i+1]=Math.sqrt(a*a+s*s)},copy:function(e,t,n,i){if(9===e.length)n.set(e,i);else for(var r=0;r<9;r++)n[i+r]=e[t+r]}},t.m4Helper={lookAt:function(e,n,i,r,o,a,u,h){var p=s,f=c,g=l;t.v3Helper.sub(e,n,i,r,p,0),t.v3Helper.normalize(p,0,p,0),t.v3Helper.cross(o,a,p,0,f,0),t.v3Helper.normalize(f,0,f,0),t.v3Helper.cross(p,0,f,0,g,0),t.v3Helper.normalize(g,0,g,0),u.set(d,h),u[h]=f[0],u[h+1]=f[1],u[h+2]=f[2],u[h+4]=g[0],u[h+5]=g[1],u[h+6]=g[2],u[h+8]=p[0],u[h+9]=p[1],u[h+10]=p[2],u[h+12]=e[n],u[h+13]=e[n+1],u[h+14]=e[n+2]},perspective:function(e,t,n,i,r,o){var a=Math.tan(.5*Math.PI-.5*e),s=1/(n-i);r.set(h,o),r[o]=a/t,r[o+5]=a,r[o+10]=(n+i)*s,r[o+14]=n*i*s*2},orthographic:function(e,t,n,i,r,o,a,s){a.set(p,s),a[s]=2/(t-e),a[s+5]=2/(i-n),a[s+10]=2/(r-o),a[s+12]=(e+t)/(e-t),a[s+13]=(n+i)/(n-i),a[s+14]=(r+o)/(r-o)},xRotation:function(e,t,n){var i=Math.cos(e),r=Math.sin(e);t.set(d,n),t[n+5]=i,t[n+6]=r,t[n+9]=-r,t[n+10]=i},yRotation:function(e,t,n){var i=Math.cos(e),r=Math.sin(e);t.set(d,n),t[n]=i,t[n+2]=-r,t[n+8]=r,t[n+10]=i},zRotation:function(e,t,n){var i=Math.cos(e),r=Math.sin(e);t.set(d,n),t[n]=i,t[n+1]=r,t[n+4]=-r,t[n+5]=i},axisRotation:function(e,t,n,i,r){var o=e[t],a=e[t+1],s=e[t+2],c=Math.sqrt(o*o+a*a+s*s),l=(o/=c)*o,u=(a/=c)*a,h=(s/=c)*s,p=Math.cos(n),f=Math.sin(n),g=1-p;return i.set(d,r),i[r]=l+(1-l)*p,i[r+1]=o*a*g+s*f,i[r+2]=o*s*g-a*f,i[r+4]=o*a*g-s*f,i[r+5]=u+(1-u)*p,i[r+6]=a*s*g+o*f,i[r+8]=o*s*g+a*f,i[r+9]=a*s*g-o*f,i[r+10]=h+(1-h)*p,i},composeTRS:function(e,t,n,i,r,o,a,s){16===n.length?a.set(n,s):(a[s+3]=0,a[s+7]=0,a[s+11]=0,a[s+15]=0);var c=r[o],l=r[o+1],u=r[o+2];a[s+0]=n[i+0]*c,a[s+1]=n[i+1]*c,a[s+2]=n[i+2]*c,a[s+4]=n[i+4]*l,a[s+5]=n[i+5]*l,a[s+6]=n[i+6]*l,a[s+8]=n[i+8]*u,a[s+9]=n[i+9]*u,a[s+10]=n[i+10]*u,a[s+12]=e[t],a[s+13]=e[t+1],a[s+14]=e[t+2]},composeTQS:function(e,n,i,r,o,a,s,c){t.quatHelper.toMatrix4(i,r,m,0),t.m4Helper.composeTRS(e,n,m,0,o,a,s,c)},translate:function(e,t,n,i,r,o,a){var s=e[t+0],c=e[t+1],l=e[t+2],u=e[t+3],d=e[t+4+0],h=e[t+4+1],p=e[t+4+2],f=e[t+4+3],g=e[t+8+0],_=e[t+8+1],m=e[t+8+2],y=e[t+8+3],v=e[t+12+0],A=e[t+12+1],b=e[t+12+2],w=e[t+12+3];16===e.length?o.set(e,a):o===e&&a===t||(o[a]=s,o[a+1]=c,o[a+2]=l,o[a+3]=u,o[a+4]=d,o[a+5]=h,o[a+6]=p,o[a+7]=f,o[a+8]=g,o[a+9]=_,o[a+10]=m,o[a+11]=y),o[a+12]=s*n+d*i+g*r+v,o[a+13]=c*n+h*i+_*r+A,o[a+14]=l*n+p*i+m*r+b,o[a+15]=u*n+f*i+y*r+w},scale:function(e,t,n,i,r,o,a){o[a+0]=n*e[t+0+0],o[a+1]=n*e[t+0+1],o[a+2]=n*e[t+0+2],o[a+3]=n*e[t+0+3],o[a+4]=i*e[t+4+0],o[a+5]=i*e[t+4+1],o[a+6]=i*e[t+4+2],o[a+7]=i*e[t+4+3],o[a+8]=r*e[t+8+0],o[a+9]=r*e[t+8+1],o[a+10]=r*e[t+8+2],o[a+11]=r*e[t+8+3],o===e&&a===t||(o[a+12]=e[t+12],o[a+13]=e[t+13],o[a+14]=e[t+14],o[a+15]=e[t+15])},xRotate:function(e,t,n,i,r){16===e.length?i.set(e,r):i===e&&r===t||(i[r+0]=e[t+0],i[r+1]=e[t+1],i[r+2]=e[t+2],i[r+3]=e[t+3],i[r+12]=e[t+12],i[r+13]=e[t+13],i[r+14]=e[t+14],i[r+15]=e[t+15]);var o=e[t+4],a=e[t+5],s=e[t+6],c=e[t+7],l=e[t+8],u=e[t+9],d=e[t+10],h=e[t+11],p=Math.cos(n),f=Math.sin(n);i[r+4]=p*o+f*l,i[r+5]=p*a+f*u,i[r+6]=p*s+f*d,i[r+7]=p*c+f*h,i[r+8]=p*l-f*o,i[r+9]=p*u-f*a,i[r+10]=p*d-f*s,i[r+11]=p*h-f*c},yRotate:function(e,t,n,i,r){16===e.length?i.set(e,r):i===e&&r===t||(i[r+4]=e[t+4],i[r+5]=e[t+5],i[r+6]=e[t+6],i[r+7]=e[t+7],i[r+12]=e[t+12],i[r+13]=e[t+13],i[r+14]=e[t+14],i[r+15]=e[t+15]);var o=e[t+0+0],a=e[t+0+1],s=e[t+0+2],c=e[t+0+3],l=e[t+8+0],u=e[t+8+1],d=e[t+8+2],h=e[t+8+3],p=Math.cos(n),f=Math.sin(n);i[r+0]=p*o-f*l,i[r+1]=p*a-f*u,i[r+2]=p*s-f*d,i[r+3]=p*c-f*h,i[r+8]=p*l+f*o,i[r+9]=p*u+f*a,i[r+10]=p*d+f*s,i[r+11]=p*h+f*c},zRotate:function(e,t,n,i,r){16===e.length?i.set(e,r):i===e&&r===t||(i[r+8]=e[t+8],i[r+9]=e[t+9],i[r+10]=e[t+10],i[r+11]=e[t+11],i[r+12]=e[t+12],i[r+13]=e[t+13],i[r+14]=e[t+14],i[r+15]=e[t+15]);var o=e[t+0+0],a=e[t+0+1],s=e[t+0+2],c=e[t+0+3],l=e[t+4+0],u=e[t+4+1],d=e[t+4+2],h=e[t+4+3],p=Math.cos(n),f=Math.sin(n);i[r+0]=p*o+f*l,i[r+1]=p*a+f*u,i[r+2]=p*s+f*d,i[r+3]=p*c+f*h,i[r+4]=p*l-f*o,i[r+5]=p*u-f*a,i[r+6]=p*d-f*s,i[r+7]=p*h-f*c},axisRotate:function(e,t,n,i,r,o,a){var s=n[i],c=n[i+1],l=n[i+2],u=Math.sqrt(s*s+c*c+l*l),d=(s/=u)*s,h=(c/=u)*c,p=(l/=u)*l,f=Math.cos(r),g=Math.sin(r),_=1-f,m=d+(1-d)*f,y=s*c*_+l*g,v=s*l*_-c*g,A=s*c*_-l*g,b=h+(1-h)*f,w=c*l*_+s*g,E=s*l*_+c*g,T=c*l*_-s*g,S=p+(1-p)*f,C=e[t+0],I=e[t+1],x=e[t+2],D=e[t+3],O=e[t+4],P=e[t+5],R=e[t+6],k=e[t+7],N=e[t+8],M=e[t+9],L=e[t+10],B=e[t+11];o[a+0]=m*C+y*O+v*N,o[a+1]=m*I+y*P+v*M,o[a+2]=m*x+y*R+v*L,o[a+3]=m*D+y*k+v*B,o[a+4]=A*C+b*O+w*N,o[a+5]=A*I+b*P+w*M,o[a+6]=A*x+b*R+w*L,o[a+7]=A*D+b*k+w*B,o[a+8]=E*C+T*O+S*N,o[a+9]=E*I+T*P+S*M,o[a+10]=E*x+T*R+S*L,o[a+11]=E*D+T*k+S*B,o===e&&a===t||(o[a+12]=e[t+12],o[a+13]=e[t+13],o[a+14]=e[t+14],o[a+15]=e[t+15])},multiply:function(e,t,n,i,r,o){var a=n[i+0+0],s=n[i+0+1],c=n[i+0+2],l=n[i+0+3],u=n[i+4+0],d=n[i+4+1],h=n[i+4+2],p=n[i+4+3],f=n[i+8+0],g=n[i+8+1],_=n[i+8+2],m=n[i+8+3],y=n[i+12+0],v=n[i+12+1],A=n[i+12+2],b=n[i+12+3],w=e[t+0+0],E=e[t+0+1],T=e[t+0+2],S=e[t+0+3],C=e[t+4+0],I=e[t+4+1],x=e[t+4+2],D=e[t+4+3],O=e[t+8+0],P=e[t+8+1],R=e[t+8+2],k=e[t+8+3],N=e[t+12+0],M=e[t+12+1],L=e[t+12+2],B=e[t+12+3];r[o+0]=a*w+s*C+c*O+l*N,r[o+1]=a*E+s*I+c*P+l*M,r[o+2]=a*T+s*x+c*R+l*L,r[o+3]=a*S+s*D+c*k+l*B,r[o+4]=u*w+d*C+h*O+p*N,r[o+5]=u*E+d*I+h*P+p*M,r[o+6]=u*T+d*x+h*R+p*L,r[o+7]=u*S+d*D+h*k+p*B,r[o+8]=f*w+g*C+_*O+m*N,r[o+9]=f*E+g*I+_*P+m*M,r[o+10]=f*T+g*x+_*R+m*L,r[o+11]=f*S+g*D+_*k+m*B,r[o+12]=y*w+v*C+A*O+b*N,r[o+13]=y*E+v*I+A*P+b*M,r[o+14]=y*T+v*x+A*R+b*L,r[o+15]=y*S+v*D+A*k+b*B},transformVector:function(e,t,n,i,r,o){for(var a=0,s=0,c=0;c<4;++c){s=t+c,r[a=o+c]=0;for(var l=0;l<4;++l)r[a]+=n[i+l]*e[s+4*l]}},transformDirection:function(e,t,n,i,r,o){var a=n[i+0],s=n[i+1],c=n[i+2];r[o+0]=a*e[t+0+0]+s*e[t+4+0]+c*e[t+8+0],r[o+1]=a*e[t+0+1]+s*e[t+4+1]+c*e[t+8+1],r[o+2]=a*e[t+0+2]+s*e[t+4+2]+c*e[t+8+2]},transformPoint:function(e,t,n,i,r,o){var a=n[i+0],s=n[i+1],c=n[i+2],l=a*e[t+0+3]+s*e[t+4+3]+c*e[t+8+3]+e[t+12+3];r[o+0]=(a*e[t+0+0]+s*e[t+4+0]+c*e[t+8+0]+e[t+12+0])/l,r[o+1]=(a*e[t+0+1]+s*e[t+4+1]+c*e[t+8+1]+e[t+12+1])/l,r[o+2]=(a*e[t+0+2]+s*e[t+4+2]+c*e[t+8+2]+e[t+12+2])/l},decomposeTransRotMatScale:function(e,n,i,r,o,a,u,h){i[r+0]=e[n+12],i[r+1]=e[n+13],i[r+2]=e[n+14];var p=e[n+0],f=e[n+1],g=e[n+2],_=e[n+4],m=e[n+5],y=e[n+6],v=e[n+8],A=e[n+9],b=e[n+10],w=u[h+0]=Math.sqrt(p*p+f*f+g*g),E=u[h+1]=Math.sqrt(_*_+m*m+y*y),T=u[h+2]=Math.sqrt(v*v+A*A+b*b);if(o.set(d,a),0===w||0===E||0===T)return!1;var S=s;S[0]=v/T,S[1]=A/T,S[2]=b/T;var C=c;C[0]=p/w,C[1]=f/w,C[2]=g/w;var I=l;t.v3Helper.cross(S,0,C,0,I,0);var x=C;return t.v3Helper.cross(I,0,S,0,x,0),o.set(x,a),o.set(I,a+4),o.set(S,a+8),o[a+0]*p+o[a+1]*f+o[a+2]*g<0&&(u[h+0]=-w),o[a+4]*_+o[a+5]*m+o[a+6]*y<0&&(u[h+1]=-E),o[a+8]*v+o[a+9]*A+o[a+10]*b<0&&(u[h+2]=-T),!0},inverse:function(e,t,n,i){var r=e[t+0+0],o=e[t+0+1],a=e[t+0+2],s=e[t+0+3],c=e[t+4+0],l=e[t+4+1],u=e[t+4+2],d=e[t+4+3],h=e[t+8+0],p=e[t+8+1],f=e[t+8+2],g=e[t+8+3],_=e[t+12+0],m=e[t+12+1],y=e[t+12+2],v=e[t+12+3],A=f*v,b=y*g,w=u*v,E=y*d,T=u*g,S=f*d,C=a*v,I=y*s,x=a*g,D=f*s,O=a*d,P=u*s,R=h*m,k=_*p,N=c*m,M=_*l,L=c*p,B=h*l,F=r*m,U=_*o,W=r*p,j=h*o,G=r*l,V=c*o,H=A*l+E*p+T*m-(b*l+w*p+S*m),z=b*o+C*p+D*m-(A*o+I*p+x*m),Z=w*o+I*l+O*m-(E*o+C*l+P*m),Y=S*o+x*l+P*p-(T*o+D*l+O*p),$=1/(r*H+c*z+h*Z+_*Y);n[i+0]=$*H,n[i+1]=$*z,n[i+2]=$*Z,n[i+3]=$*Y,n[i+4]=$*(b*c+w*h+S*_-(A*c+E*h+T*_)),n[i+5]=$*(A*r+I*h+x*_-(b*r+C*h+D*_)),n[i+6]=$*(E*r+C*c+P*_-(w*r+I*c+O*_)),n[i+7]=$*(T*r+D*c+O*h-(S*r+x*c+P*h)),n[i+8]=$*(R*d+M*g+L*v-(k*d+N*g+B*v)),n[i+9]=$*(k*s+F*g+j*v-(R*s+U*g+W*v)),n[i+10]=$*(N*s+U*d+G*v-(M*s+F*d+V*v)),n[i+11]=$*(B*s+W*d+V*g-(L*s+j*d+G*g)),n[i+12]=$*(N*f+B*y+k*u-(L*y+R*u+M*f)),n[i+13]=$*(W*y+R*a+U*f-(F*f+j*y+k*a)),n[i+14]=$*(F*u+V*y+M*a-(G*y+N*a+U*u)),n[i+15]=$*(G*f+L*a+j*u-(W*u+V*f+B*a))},transpose:function(e,t,n,i){n[i+0]=e[t+0],n[i+1]=e[t+4],n[i+2]=e[t+8],n[i+3]=e[t+12],n[i+4]=e[t+1],n[i+5]=e[t+5],n[i+6]=e[t+9],n[i+7]=e[t+13],n[i+8]=e[t+2],n[i+9]=e[t+6],n[i+10]=e[t+10],n[i+11]=e[t+14],n[i+12]=e[t+3],n[i+13]=e[t+7],n[i+14]=e[t+11],n[i+15]=e[t+15]},composeRST3toRST4:function(e,t,n,i){n.set(d,i),n[i+0]=e[t+0],n[i+1]=e[t+1],n[i+4]=e[t+3],n[i+5]=e[t+4],n[i+10]=1,n[i+12]=e[t+6],n[i+13]=e[t+7],n[i+15]=e[t+8]},copy:function(e,t,n,i){if(16===e.length)n.set(e,i);else for(var r=0;r<16;r++)n[i+r]=e[t+r]}};var s=new Float32Array(3),c=new Float32Array(3),l=new Float32Array(3),u=new Float32Array(4),d=new Float32Array(16);d.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var h=new Float32Array(16).fill(0);h[11]=-1;var p=new Float32Array(16).fill(0);p[15]=1;var f=new Float32Array([0,0,-1]),g=new Float32Array([0,1,0]),_=new Float32Array([0,0,0]),m=new Float32Array(16),y=new Float32Array(16)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1).__importDefault(n(22)),r=n(20),o=new Float32Array(9);o.set([1,0,0,0,1,0,0,0,1],0);var a=function(){function e(e,t){this._raw=e||new Float32Array(9),this._offset=t||0}return Object.defineProperty(e,"IDENTITY",{get:function(){var t=new e;return t._raw.set(o),t},enumerable:!1,configurable:!0}),e.createFromArray=function(t){if(9!==t.length)throw new Error("create Matrix Error:array length is wrong");return new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){if(void 0===n&&(n=0),t.length-n<9)throw new Error("create Matrix Error:array length is wrong");return new e(t,n)},Object.defineProperty(e.prototype,"raw",{get:function(){return this.__raw||(this.__raw=new Float32Array(this._raw.buffer,4*this._offset,9)),this.__raw},enumerable:!1,configurable:!0}),e.prototype.toArray=function(){for(var e=new Array(9),t=0;t<9;t++)e[t]=this._raw[this._offset+t];return e},e.prototype.translate=function(t,n,i){return i=i||new e,r.m3Helper.translate(this._raw,this._offset,t,n,i._raw,i._offset),i},e.prototype.scale=function(t,n,i){return i=i||new e,r.m3Helper.scale(this._raw,this._offset,t,n,i._raw,i._offset),i},e.prototype.rotate=function(t,n){return n=n||new e,r.m3Helper.rotate(this._raw,this._offset,t,n._raw,n._offset),n},e.prototype.inverse=function(t){return t=t||new e,r.m3Helper.inverse(this._raw,this._offset,t._raw,t._offset),t},e.prototype.multiply=function(t,n){return n=n||new e,r.m3Helper.multiply(this._raw,this._offset,t._raw,t._offset,n._raw,n._offset),n},e.prototype.transformPoint=function(e,t){return t=t||i.default.ZERO,r.m3Helper.transformPoint(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),r=function(){function e(e,t){this._raw=e||new Float32Array(2),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ZERO",{get:function(){return new e(new Float32Array([0,0]))},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,n){var i=new Float32Array(2);return i[0]=t||0,i[1]=n||0,new e(i)},e.createFromArray=function(t){return 2!==t.length&&(t=new Array(2).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){return void 0===n&&(n=0),t.length-n<2&&(t=new Float32Array(2).fill(0),n=0),new e(t,n)},e.prototype.toArray=function(){return[this._raw[this._offset],this._raw[this._offset+1]]},e.prototype.equal=function(e){return i.v2Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){if(2===e._raw.length)this._raw.set(e._raw,this._offset);else for(var t=0;t<2;t++)this._raw[this._offset+t]=e._raw[e._offset+t]},e.prototype.setValue=function(e,t){return this._raw[this._offset]=e,this._raw[this._offset+1]=t,this},e.prototype.add=function(t,n){return n=n||new e,i.v2Helper.add(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.sub=function(t,n){return n=n||new e,i.v2Helper.sub(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.normalize=function(t){return t=t||new e,i.v2Helper.normalize(this._raw,this._offset,o._raw,o._offset),t.set(o),t},e.prototype.scale=function(t,n){return n=n||new e,i.v2Helper.scale(this._raw,this._offset,t,o._raw,o._offset),n.set(o),n},e.prototype.lerp=function(t,n,r){return r=r||new e,i.v2Helper.lerp(this._raw,this._offset,t._raw,t._offset,n,o._raw,o._offset),r.set(o),r},e.prototype.dot=function(e){return i.v2Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.length=function(){return i.v2Helper.length(this._raw,this._offset)},e.prototype.clone=function(){return e.createFromNumber(this._raw[this._offset+0],this._raw[this._offset+1])},e.prototype.isZero=function(){return i.v2Helper.isZero(this._raw,this._offset)},e.prototype.getAngle=function(){return i.v2Helper.getAngle(this._raw,this._offset)},e}();t.default=r;var o=new r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VertexLayoutNative=t.createdVertexLayout=void 0;var i=n(1),r=n(2),o=i.__importDefault(n(24)),a=0;var s={};s[r.EnumVertexFormat.BYTE4]=4,s[r.EnumVertexFormat.BYTE4N]=4,s[r.EnumVertexFormat.FLOAT]=4,s[r.EnumVertexFormat.FLOAT2]=8,s[r.EnumVertexFormat.FLOAT3]=12,s[r.EnumVertexFormat.FLOAT4]=16,s[r.EnumVertexFormat.SHORT2]=4,s[r.EnumVertexFormat.SHORT2N]=4,s[r.EnumVertexFormat.SHORT4]=8,s[r.EnumVertexFormat.SHORT4N]=8,s[r.EnumVertexFormat.UBYTE4]=4,s[r.EnumVertexFormat.UBYTE4N]=4,t.createdVertexLayout=[];var c=function(){function e(e,n){this._id=a++,this._gfx=n,this._config=e,this._calStride(),this._batcher=new o.default(this._gfx),t.createdVertexLayout.push(this)}return e.prototype._calStride=function(){for(var e=0,t=0,n=this._config.layout.attrs;t<n.length;t++){var i=n[t];e+=s[i.format]}this._stride=e},e.prototype._getBatcher=function(){return this._batcher},e}();t.VertexLayoutNative=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=2048e3,r=1228800,o=function(){function e(e){this._vbOffset=0,this._ibCount=0,this._iBase=0,this._inited=!1,this._gfx=e}return e.prototype.init=function(){var e={type:wgfx.EnumBufferType.VERTEXBUFFER,usage:wgfx.EnumUsage.DYNAMIC,size:i};this._vertexBuffer=this._gfx.makeBuffer(e);var t={type:wgfx.EnumBufferType.INDEXBUFFER,usage:wgfx.EnumUsage.DYNAMIC,size:r};this._indexBuffer=this._gfx.makeBuffer(t),this._vbView=new Uint8Array(i),this._ibView=new Uint16Array(614400),this._inited=!0},e.prototype.reset=function(){this._vbOffset=0,this._ibCount=0,this._iBase=0},e.prototype.batchMesh=function(e,t,n,i){void 0===i&&(i=t._dataView.length),this._inited||this.init(),this._vbView.set(e._finalBufferView,this._vbOffset),this._vbOffset+=e._finalBufferView.byteLength;for(var r=this._ibCount,o=t._dataView,a=this._iBase,s=n,c=i;s<c;s++)this._ibView[r+s]=a+o[s];this._iBase+=e._count,this._ibCount+=i},e.prototype.uploadBuffer=function(){this._inited&&(this._gfx.updateBuffer(this._vertexBuffer,0,this._vbView,0,this._vbOffset),this._gfx.updateBuffer(this._indexBuffer,0,this._ibView,0,2*this._ibCount))},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RectNative=void 0;var i=function(e,t,n,i){this._x=e,this._y=t,this._width=n,this._height=i};t.RectNative=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1).__importDefault(n(15)),r=function(){function e(){this.bufferStack=[]}return e.prototype._setCommandExecutor=function(e){this._executor=e},e.prototype.decodeAndExecCommandBuffer=function(e){this.bufferStack.push(e);for(var t=0,n=e._array;t<n.length;t++){var r=n[t];if(r instanceof i.default){if(this.bufferStack.indexOf(r)>-1)return void console.warn("execute command buffer error: has infinite loop");this.decodeAndExecCommandBuffer(r)}else this.drawRenderDraw(r)}this.bufferStack.pop()},e.prototype.drawRenderDraw=function(e){this._executor.drawRenderDraw(e)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderViewNative=void 0;var i=function(e,t,n,i){this._pass=e,this._passAction=t,this._viewport=n,this._scissor=i,this._isDefaultView=0===this._pass.id};t.RenderViewNative=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchableVertexBufferNative=void 0;var i=n(1).__importDefault(n(22)),r=function(){function e(e,t){if(this._count=e,e){var n=e*t._stride;this.data=new ArrayBuffer(n),this._finalBuffer=new ArrayBuffer(n),this._dataView=new Uint8Array(this.data),this._finalBufferView=new Uint8Array(this._finalBuffer),this._calPositionOffset(t)}else this.data=null}return e.prototype._cloneBuffer=function(){this._finalBufferView.set(this._dataView)},e.prototype._calPositionOffset=function(e){for(var t=0,n=e._config.layout.attrs;t<n.length;t++){var r=n[t];"a_position"==r.name&&(this._positionOffset=r.offset)}this._positionViews=[],this._worldPositionViews=[];for(var o=0;o<this._count;o++){var a=new i.default(new Float32Array(this.data,o*e._stride+this._positionOffset,2));this._positionViews.push(a);var s=new i.default(new Float32Array(this._finalBuffer,o*e._stride+this._positionOffset,2));this._worldPositionViews.push(s)}},e}();t.BatchableVertexBufferNative=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchableIndexBufferNative=void 0;var i=function(e,t){this._count=e,this._dataView=new Uint16Array(e),this.data=this._dataView.buffer};t.BatchableIndexBufferNative=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(5)),o=n(31),a=n(65),s=n(33),c=n(6),l=i.__importDefault(n(48)),u=i.__importDefault(n(49)),d=i.__importDefault(n(76)),h=i.__importDefault(n(77)),p=function(){function e(e,t){if(this.config=t,this.isEngineNative=t.isEngineNative,this.isPhysicsNative=t.isPhysicsNative,this.gaVersion=t.gaVersion,this.isEngineNative){this.worker=e;var n=new o.AccelerateManager(this.worker,t);this.manager=n,this.createEntity3D=n.createEntity3D.bind(n),this.createEntity2D=n.createEntity2D.bind(n),this._createCullableComponent=n.createCullableComponent.bind(n),this._createAnimatorComponent=n.createAnimatorComponent.bind(n),this._createSkinnedSkeletonComponent=n.createSkinnedSkeletonComponent.bind(n),this.createEntity2DGroup=n.createEntity2DGroup.bind(n),this.createEntity3DGroup=n.createEntity3DGroup.bind(n),this.createDataBuffer=n.createDataBuffer.bind(n),this.createDataModel=n.createDataModel.bind(n),this.createAnimationClipBinding=n.createAnimationClipBinding.bind(n),this.createAnimatorController=n.createAnimatorController.bind(n),this.createAnimatorControllerStateModel=n.createAnimatorControllerStateModel.bind(n),this.entityAddChild=n.entityAddChild.bind(n),this.entityAddChildAtIndex=n.entityAddChildAtIndex.bind(n),this.entityRemoveFromParent=n.entityRemoveFromParent.bind(n),this.entityDestroy=n.entityDestroy.bind(n),this.entityClear=n.entityClear.bind(n),this.entitySetActive=n.entitySetActive.bind(n),this.entitySetLocalMatrixDirty=n.entitySetLocalMatrixDirty.bind(n),this.entitiesSetLocalMatrixDirty=n.entitiesSetLocalMatrixDirty.bind(n),this.entitiesSetLocalMatrixDirtyById=n.entitiesSetLocalMatrixDirtyById.bind(n),this.entityGroupAddChild=n.entityGroupAddChild.bind(n),this.entityGroupAddChildAtIndex=n.entityGroupAddChildAtIndex.bind(n),this.entityGroupRemoveFromParent=n.entityGroupRemoveFromParent.bind(n),this.entityGroupDestroy=n.entityGroupDestroy.bind(n),this.entityGroupClear=n.entityGroupClear.bind(n),this.entityGroupSetActive=n.entityGroupSetActive.bind(n),this.entityGroupSetLocalMatrixDirty=n.entityGroupSetLocalMatrixDirty.bind(n),this.entityGroupSetLocalMatrixDirtyAll=n.entityGroupSetLocalMatrixDirtyAll.bind(n),this.componentBindEntity=n.componentBindEntity.bind(n),this.componentUnbindEntity=n.componentUnbindEntity.bind(n),this.setRootEntity=n.setRootEntity.bind(n),this.updateAnimator=n.updateAnimator.bind(n),this.updateAnimators=n.updateAnimators.bind(n),this.updateAnimatorControllers=n.updateAnimatorControllers.bind(n),this.updateSkinningMatrix=n.updateSkinningMatrix.bind(n),this.updateSkinningMatrices=n.updateSkinningMatrices.bind(n),this.bindEntitiesToBones=n.bindEntitiesToBones.bind(n),this.unbindEntitiesFromBones=n.unbindEntitiesFromBones.bind(n),this.bindEntitiesToBonesWithIndex=n.bindEntitiesToBonesWithIndex.bind(n),this.unbindEntitiesFromBonesWithIndex=n.unbindEntitiesFromBonesWithIndex.bind(n),this.refreshWorldTransform=n.refreshWorldTransform.bind(n),this.frameStart=n.frameStart.bind(n),this.cullWithCameraPerspective=n.cullWithCameraPerspective.bind(n),this.cullWithCameraOrthographic=n.cullWithCameraOrthographic.bind(n),this.worker.cullingResult&&(this.initCullingArrayBuffer=n.initCullingArrayBuffer.bind(n),this.cullWithCameraPerspectiveByArrayBuffer=n.cullWithCameraPerspectiveV2.bind(n),this.cullWithCameraOrthographicByArrayBuffer=n.cullWithCameraOrthographicV2.bind(n))}else{this.mockWorker=e;var i=this._getMockAccelerateWorker();this.createEntity3D=i.createEntity3D.bind(i),this.createEntity2D=i.createEntity2D.bind(i),this._createCullableComponent=i.createCullableComponent.bind(i),this._createAnimatorComponent=i.createAnimatorComponent.bind(i),this._createSkinnedSkeletonComponent=i.createSkinnedSkeletonComponent.bind(i),this.createEntity2DGroup=i.createEntity2DGroup.bind(i),this.createEntity3DGroup=i.createEntity3DGroup.bind(i),this.createDataModel=i.createDataModel.bind(i),this.createDataBuffer=i.createDataBuffer.bind(i),this.createAnimationClipBinding=i.createAnimationClipBinding.bind(i),this.createAnimatorController=i.createAnimatorController.bind(i),this.createAnimatorControllerStateModel=i.createAnimatorControllerStateModel.bind(i),this.entityAddChild=i.entityAddChild.bind(i),this.entityAddChildAtIndex=i.entityAddChildAtIndex.bind(i),this.entityRemoveFromParent=i.entityRemoveFromParent.bind(i),this.entityDestroy=i.entityDestroy.bind(i),this.entityClear=i.entityClear.bind(i),this.entitySetActive=i.entitySetActive.bind(i),this.entitySetLocalMatrixDirty=i.entitySetLocalMatrixDirty.bind(i),this.entitiesSetLocalMatrixDirty=i.entitiesSetLocalMatrixDirty.bind(i),this.entitiesSetLocalMatrixDirtyById=i.entitiesSetLocalMatrixDirtyById.bind(i),this.entityGroupAddChild=i.entityGroupAddChild.bind(i),this.entityGroupAddChildAtIndex=i.entityGroupAddChildAtIndex.bind(i),this.entityGroupRemoveFromParent=i.entityGroupRemoveFromParent.bind(i),this.entityGroupDestroy=i.entityGroupDestroy.bind(i),this.entityGroupClear=i.entityGroupClear.bind(i),this.entityGroupSetActive=i.entityGroupSetActive.bind(i),this.entityGroupSetLocalMatrixDirty=i.entityGroupSetLocalMatrixDirty.bind(i),this.entityGroupSetLocalMatrixDirtyAll=i.entityGroupSetLocalMatrixDirtyAll.bind(i),this.componentBindEntity=i.componentBindEntity.bind(i),this.componentUnbindEntity=i.componentUnbindEntity.bind(i),this.setRootEntity=i.setRootEntity.bind(i),this.cullWithCameraPerspective=i.cullWithCameraPerspective.bind(i),this.cullWithCameraOrthographic=i.cullWithCameraOrthographic.bind(i),this.updateAnimator=i.updateAnimator.bind(i),this.updateAnimators=i.updateAnimators.bind(i),this.updateAnimatorControllers=i.updateAnimatorControllers.bind(i),this.updateSkinningMatrix=i.updateSkinningMatrix.bind(i),this.updateSkinningMatrices=i.updateSkinningMatrices.bind(i),this.bindEntitiesToBones=i.bindEntitiesToBones.bind(i),this.unbindEntitiesFromBones=i.unbindEntitiesFromBones.bind(i),this.bindEntitiesToBonesWithIndex=i.bindEntitiesToBonesWithIndex.bind(i),this.unbindEntitiesFromBonesWithIndex=i.unbindEntitiesFromBonesWithIndex.bind(i),this.refreshWorldTransform=i.refreshWorldTransform.bind(i),this.frameStart=i.frameStart.bind(i)}if(this.isPhysicsNative){(r=NativeGlobal.Phys3D)&&(this.phys3D=new d.default(r,this,this.isEngineNative))}else{var r=void 0;try{r=h.default().Phys3D}catch(e){}r&&(this.phys3D=new d.default(r,this,this.isEngineNative))}}return e.prototype.createComponent=function(e){if(!s.componentType2Ctor[e])return console.warn("can not support dataModel ["+e+"]"),null;switch(e){case c.enumComponentType.Cullable:return this._createCullableComponent();case c.enumComponentType.Animator:return this._createAnimatorComponent();case c.enumComponentType.SkinnedSkeleton:return this._createSkinnedSkeletonComponent()}return null},e.prototype.composeRawBufferEntity2D=function(e,t,n){var i=new ArrayBuffer(4*l.default.ENTITY2D_SIZE),r=new Float32Array(i);return r[l.default.OFFSET_ROTATION]=e,r[l.default.OFFSET_POSITION]=t[0],r[l.default.OFFSET_POSITION+1]=t[1],r[l.default.OFFSET_SCALE]=n[0],r[l.default.OFFSET_SCALE+1]=n[1],r},e.prototype.composeRawBufferEntity3D=function(e,t,n,i){var r=new ArrayBuffer(4*(u.default.ENTITY3D_SIZE-16)),o=new Uint32Array(r),a=new Float32Array(r);return o[u.default.OFFSET_ROTATIONTYPE]=e?0:1,a.set(t,u.default.OFFSET_ROTATION),a.set(n,u.default.OFFSET_POSITION),a.set(i,u.default.OFFSET_SCALE),a},e.prototype.composeRawBufferEntity3DWhole=function(e,t,n,i){var r=new ArrayBuffer(4*u.default.ENTITY3D_SIZE),o=new Uint32Array(r),a=new Float32Array(r);return o[u.default.OFFSET_ROTATIONTYPE]=e?0:1,a.set(t,u.default.OFFSET_ROTATION),a.set(n,u.default.OFFSET_POSITION),a.set(i,u.default.OFFSET_SCALE),a},e.prototype.composeRawBufferEntity2DGroup=function(e){for(var t=new ArrayBuffer(4*l.default.ENTITY2D_SIZE*e.length),n=new Float32Array(t),i=0;i<e.length;i++){var r=e[i];n[i*l.default.ENTITY2D_SIZE+l.default.OFFSET_ROTATION]=r.rotation,n[i*l.default.ENTITY2D_SIZE+l.default.OFFSET_POSITION]=r.position[0],n[i*l.default.ENTITY2D_SIZE+l.default.OFFSET_POSITION+1]=r.position[1],n[i*l.default.ENTITY2D_SIZE+l.default.OFFSET_SCALE]=r.scale[0],n[i*l.default.ENTITY2D_SIZE+l.default.OFFSET_SCALE+1]=r.scale[1]}return n},e.prototype.composeRawBufferEntity3DGroup=function(e){for(var t=new ArrayBuffer(4*u.default.ENTITY3D_SIZE*e.length),n=new Uint32Array(t),i=new Float32Array(t),r=0;r<e.length;r++){var o=e[r];n[u.default.OFFSET_ROTATIONTYPE]=o.useEuler?0:1,i.set(o.rotation,r*u.default.ENTITY3D_SIZE+u.default.OFFSET_ROTATION),i.set(o.position,r*u.default.ENTITY3D_SIZE+u.default.OFFSET_POSITION),i.set(o.scale,r*u.default.ENTITY3D_SIZE+u.default.OFFSET_SCALE)}return i},e.prototype.getAccObjNumber=function(){return{entity2D:this.manager.poolManager._entity2DPoolUsedLength}},e.prototype._getMockAccelerateWorker=function(){return this.logicManager||(this.mockWorker||(this.mockWorker=new r.default),this.logicManager=new a.LogicManager(this.mockWorker,this.config)),this.logicManager},e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccelerateManager=void 0;var i=n(1),r=n(32),o=n(33),a=i.__importStar(n(35)),s=i.__importStar(n(34)),c=i.__importDefault(n(37)),l=i.__importStar(n(47)),u=n(39),d=n(6),h=i.__importStar(n(48)),p=i.__importStar(n(49)),f=n(50),g=i.__importDefault(n(51)),_=i.__importDefault(n(52)),m=i.__importStar(n(53)),y=i.__importStar(n(55)),v=i.__importDefault(n(56)),A=i.__importDefault(n(57)),b=i.__importDefault(n(58)),w=n(60),E=n(62),T=i.__importDefault(n(63)),S=n(64),C=function(){function e(e,t){this.worker=e,this.config=t,this.poolManager=new b.default(this.worker),this.dirtyEntitiesCommand=new y.default(this.worker.dirtyEntities),this.entityCommand=new m.default(e.entityCommands),this.animatorCommand=new v.default,this.animatorControllerCommand=new T.default,this.skinningMatrixCommand=new A.default,h.staticInitEntity2D(this),p.staticInitEntity3D(this),f.staticInitEntityGroup(this),s.staticInitAnimatorComponent(this),a.staticInitCullableComponent(this),r.staticInitNativeObject(this.worker),w.staticInitAnimatorController(this),S.staticInitAnimationClipBinding(this),E.staticInitAnimatorControllerLayerBlend(this.worker),u.staticInitAccelerateModel(this.worker),l.staticInitAccelerateDataBuffer(this.worker),m.staticInitAccelerateEntityCommand(this.worker),y.staticInitAccelerateDirtiesCommand(this.worker)}return e.prototype.createEntity3D=function(){var e=this.poolManager.getEntity3D(),t=new p.default(e,this.poolManager.entity3DPools);return t.isUsing=!0,this.entitySetActive(t,!0),t},e.prototype.createEntity2D=function(){var e=this.poolManager.getEntity2D(),t=new h.default(e,this.poolManager.entity2DPools);return t.isUsing=!0,this.entitySetActive(t,!0),t},e.prototype.createEntity2DGroup=function(e){var t=this.worker.createEntity(d.enumEntityType.Entity2D,e);return new g.default(t,e)},e.prototype.createEntity3DGroup=function(e){var t=this.worker.createEntity(d.enumEntityType.Entity3D,e);return new _.default(t,e)},e.prototype.createCullableComponent=function(){var e=this.poolManager.getCullableComponent(),t=new a.default(e,this.poolManager.cullableComponentPools);return t.isUsing=!0,t.setActive(!0),t},e.prototype.createCullableComponentSingle=function(){var e=this.poolManager.getCullableComponentSingle(),t=new a.default(e,this.poolManager.cullableComponentPools);return t.setActive(!0),t},e.prototype.createAnimatorComponent=function(){return new s.default},e.prototype.createSkinnedSkeletonComponent=function(){return new c.default},e.prototype.createDataModel=function(e){var t=o.dataModel2Ctor[e];return t?new t:(console.warn("can not support dataModel ["+e+"]"),null)},e.prototype.createDataBuffer=function(e){var t=this.worker.createDataBuffer(e);return new l.default(t)},e.prototype.createAnimationClipBinding=function(e,t,n,i,r,o,a,s){return new S.AnimationClipBinding(e,t,n,i,r,o,a,s)},e.prototype.createAnimatorControllerStateModel=function(e){return new E.AnimatorControllerState(e)},e.prototype.createAnimatorController=function(e){return new w.AnimatorController(e)},e.prototype.entityAddChild=function(e,t){this.entityCommand.addChild(e.id,t.id)},e.prototype.entityAddChildAtIndex=function(e,t,n){this.entityCommand.addChildAtIndex(e.id,t.id,n)},e.prototype.entityRemoveFromParent=function(e){this.entityCommand.removeFromParent(e.id)},e.prototype.entityDestroy=function(e){this.entityCommand.removeFromParent(e.id),e instanceof h.default?this.poolManager.disposeEntity2D(e):e instanceof p.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityClear=function(e){this.entityCommand.disperseSubTree(e.id)},e.prototype.entitySetActive=function(e,t){t?this.entityCommand.entityCommandActive(e.id):this.entityCommand.entityCommandInActive(e.id)},e.prototype.entitySetLocalMatrixDirty=function(e){this.dirtyEntitiesCommand.addDirtyEntity(e)},e.prototype.entitiesSetLocalMatrixDirty=function(e,t){this.dirtyEntitiesCommand.addDirtyEntities(e,t)},e.prototype.entitiesSetLocalMatrixDirtyById=function(e,t){this.dirtyEntitiesCommand.addDirtyEntitiesById(e,t)},e.prototype.componentBindEntity=function(e,t){e.bindEntityNative(t)},e.prototype.componentUnbindEntity=function(e){this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntity=function(e){this.entityCommand.setRootEntity(e.id)},e.prototype.entityGroupAddChild=function(e,t,n,i){this.entityCommand.addChild(e.id,t.id)},e.prototype.entityGroupAddChildAtIndex=function(e,t,n,i,r){this.entityCommand.addChildAtIndex(e.id,t.id,n)},e.prototype.entityGroupRemoveFromParent=function(e,t){this.entityCommand.removeFromParent(e.id)},e.prototype.entityGroupDestroy=function(e,t){this.entityCommand.removeFromParent(e.id),e instanceof h.default?this.poolManager.disposeEntity2D(e):e instanceof p.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityGroupClear=function(e,t){this.entityCommand.disperseSubTree(e.id)},e.prototype.entityGroupSetActive=function(e,t,n){t?this.entityCommand.entityCommandActive(e.id):this.entityCommand.entityCommandInActive(e.id)},e.prototype.entityGroupSetLocalMatrixDirty=function(e,t){this.dirtyEntitiesCommand.addDirtyEntity(e)},e.prototype.entityGroupSetLocalMatrixDirtyAll=function(e){this.dirtyEntitiesCommand.addDirtyEntityGroupAll(e)},e.prototype.componentBindEntityGroup=function(e,t,n,i){e.bindEntityNative(t)},e.prototype.componentUnbindEntityGroup=function(e,t){e.unbindEntityNative(),this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntityGroup=function(e,t){this.entityCommand.setRootEntity(e.id)},e.prototype.componentUnbindEntitySingle=function(e){e.unbindEntityNative(),this.poolManager.disposeCullableComponentSingle(e)},e.prototype.refreshWorldTransform=function(){this.worker.refreshWorldTransform()},e.prototype.cullWithCameraPerspective=function(e,t,n,i,r,o,a,s,c,l,u,d,h,p){var f=this.worker.frustumCulling(e,t,n,i,r,o,a,s,c,l,u,d,h,p);return f?{hash:f.hash,objects:new Uint32Array(f.objects),distances:new Float32Array(f.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.cullWithCameraOrthographic=function(e,t,n,i,r,o,a,s,c,l,u,d,h,p,f,g){var _=this.worker.orthoCulling(e,t,n,i,r,o,a,s,c,l,u,d,h,p,f,g);return _?{hash:_.hash,objects:new Uint32Array(_.objects),distances:new Float32Array(_.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.initCullingArrayBuffer=function(){var e=this.worker.cullingResult;return{u32View:new Uint32Array(e),f32View:new Float32Array(e)}},e.prototype.cullWithCameraPerspectiveV2=function(e,t,n,i,r,o,a,s,c,l,u,d,h,p){return!!this.worker.frustumCullingV2(e,t,n,i,r,o,a,s,c,l,u,d,h,p)},e.prototype.cullWithCameraOrthographicV2=function(e,t,n,i,r,o,a,s,c,l,u,d,h,p,f,g){return!!this.worker.orthoCullingV2(e,t,n,i,r,o,a,s,c,l,u,d,h,p,f,g)},e.prototype.updateAnimator=function(e){this.worker.updateAnimator(e.id)},e.prototype.updateAnimators=function(e,t){this.animatorCommand.updateAnimators(e,t),this.worker.updateAnimators(this.animatorCommand.buffer)},e.prototype.updateAnimatorControllers=function(e,t){this.animatorControllerCommand.updateAnimatorControllers(e,t),this.worker.updateAnimatorControllers(this.animatorControllerCommand.buffer)},e.prototype.updateSkinningMatrix=function(e){this.worker.updateSkinningMatrix(e.id)},e.prototype.updateSkinningMatrices=function(e,t){this.skinningMatrixCommand.updateSkinningMatrices(e,t),this.worker.updateSkinningMatrices(this.skinningMatrixCommand.buffer)},e.prototype.bindEntitiesToBones=function(e,t){this.entityCommand.bindToBones(e,t)},e.prototype.unbindEntitiesFromBones=function(e){this.entityCommand.unBindFromBones(e)},e.prototype.bindEntitiesToBonesWithIndex=function(e,t,n,i){this.entityCommand.bindToBones(e,t)},e.prototype.unbindEntitiesFromBonesWithIndex=function(e,t){this.entityCommand.unBindFromBones(e)},e.prototype.frameStart=function(){this.worker.frameStart()},e.prototype.setEntityName=function(e,t){this.worker.setEntityName(e,t)},e}();t.AccelerateManager=C},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitNativeObject=void 0,t.staticInitNativeObject=function(e){i=e};var r=function(){function e(){}return e.prototype._init=function(e){this._fastInit(e),this._initU32View()},e.prototype._fastInit=function(e){this._nativeObj=e;var t=e.id,n=e.buffer,i=n.byteLength;this._id=t,this._bufferLength=i,this._byteOffset=0,this._buffer=n,this._f32view=new Float32Array(n,0,i/4),this.id=this._id},e.prototype._initU32View=function(){this._u32view=new Uint32Array(this._buffer,this._byteOffset,this._bufferLength/4)},e.prototype._createNativeComponent=function(e,t,n){var r=i.createComponent(e,t,n);return r.id<0||!r.buffer?null:(this._init(r),r)},e.prototype._initPropertyView=function(e,t){return new Float32Array(this._buffer,this._byteOffset+4*e,t)},e.prototype.setRawBuffer=function(e){this._f32view.set(e)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataModel2CtorMock=t.dataModel2Ctor=t.componentType2Ctor=void 0;var i=n(1),r=i.__importDefault(n(34)),o=i.__importDefault(n(35)),a=i.__importDefault(n(37)),s=n(6),c=i.__importDefault(n(38)),l=i.__importDefault(n(40)),u=i.__importDefault(n(41)),d=i.__importDefault(n(43));t.componentType2Ctor={},t.componentType2Ctor[s.enumComponentType.Undefined]=null,t.componentType2Ctor[s.enumComponentType.Cullable]=o.default,t.componentType2Ctor[s.enumComponentType.SkinnedSkeleton]=a.default,t.componentType2Ctor[s.enumComponentType.Animator]=r.default,t.dataModel2Ctor={},t.dataModel2Ctor[s.enumModelType.SkeletonBoneInverseModel]=l.default,t.dataModel2Ctor[s.enumModelType.AnimationClipModel]=c.default,t.dataModel2CtorMock={},t.dataModel2CtorMock[s.enumModelType.SkeletonBoneInverseModel]=d.default,t.dataModel2CtorMock[s.enumModelType.AnimationClipModel]=u.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAnimatorComponent=void 0;var i=n(1),r=i.__importDefault(n(32)),o=n(6),a=!1,s=!1;t.staticInitAnimatorComponent=function(e){var t=e.config.gaVersion.versionNumber;a=t>=120,s=t<120};var c=function(e){function t(){var t=e.call(this)||this;return t._offsetEntityIds=0,t._animationClipCount=0,t._nodeCount=0,t}return i.__extends(t,e),t.prototype.bindAnimations=function(e,t,n){this._animationClipCount=e.length;var i=t.length;for(var r in t)i+=t[r].length;if(this._nodeCount=i,this._createNativeComponent(o.enumComponentType.Animator,e.length,i),this._nativeObj){for(r=0;r<e.length;r++)this._u32view[3*r]=e[r].id;this._offsetEntityIds=3*e.length;var a,c=0;for(r=0;r<t.length;r++){for(var l=0;l<t[r].length;l++)null!=t[r][l]?(this._u32view[this._offsetEntityIds+c+l]=t[r][l].id,a||(a=t[r][l].id)):this._u32view[this._offsetEntityIds+c+l]=4294967295,this._u32view[this._offsetEntityIds+c+l]=null!=t[r][l]?t[r][l].id:4294967295;c+=t[r].length}s&&4294967295===this._u32view[this._offsetEntityIds]&&(null!=n&&n.id?this._u32view[this._offsetEntityIds]=n.id:a&&(this._u32view[this._offsetEntityIds]=a))}},t.prototype.setClipParams=function(e,t,n){if(this._nativeObj){var i=3*e;a?this._f32view[i+1]=t:this._u32view[i+1]=Math.round(t),this._f32view[i+2]=n}},t.prototype.getAnimationClipCount=function(){return this._animationClipCount},t.prototype.getNodeCount=function(){return this._nodeCount},t.prototype.getAnimationParamater=function(e){var t=3*e;return{animationClipId:this._u32view[t],frameIndex:this._f32view[t+1],percentage:this._f32view[t+2]}},t.prototype.getEntity=function(e){return this._u32view[this._offsetEntityIds+e]},t}(r.default);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitCullableComponent=void 0;var i,r=n(1),o=n(6),a=r.__importDefault(n(36));t.staticInitCullableComponent=function(e){i=e};var s=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.entityOffset=i._poolIndex*o.CULLABLECOMPONENT_SIZE,i._activeOffset=i.entityOffset+o.CULLABLECOMPONENT_OFFSET.OFFSET_ACTIVE,i._cullmaskOffset=i.entityOffset+o.CULLABLECOMPONENT_OFFSET.OFFSET_CULLMASK,i._boundingBallCenterOffset=i.entityOffset+o.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_CENTER,i._boundingBallRadiusOffset=i.entityOffset+o.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_RADIUS,i._entityIdOffset=i.entityOffset+o.CULLABLECOMPONENT_OFFSET.OFFSET_ENTITYID,i}return r.__extends(t,e),t.prototype.getActive=function(){return 0!=(this._nativePool._u32view[this._activeOffset]&o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE)},t.prototype.setActive=function(e){e?this._nativePool._u32view[this._activeOffset]|=o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE:this._nativePool._u32view[this._activeOffset]&=~o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE},t.prototype.getCullMask=function(){return this._nativePool._u32view[this._cullmaskOffset]},t.prototype.setCullMask=function(e){this._nativePool._u32view[this._cullmaskOffset]=e},t.prototype.bindEntityNative=function(e){this._nativePool._u32view[this._entityIdOffset]=e.id},t.prototype.unbindEntityNative=function(){this._nativePool._u32view[this._entityIdOffset]=0},t.prototype.getBoundingBallCenter=function(){return this._boundingBallCenter||(this._boundingBallCenter=new Float32Array(this._nativePool._buffer,4*this._boundingBallCenterOffset,3)),this._boundingBallCenter},t.prototype.setBoundingBallCenter=function(e,t){void 0===t&&(t=0),e[t]===this._nativePool._f32view[this._boundingBallCenterOffset]&&e[t+1]===this._nativePool._f32view[this._boundingBallCenterOffset+1]&&e[t+2]===this._nativePool._f32view[this._boundingBallCenterOffset]+3||(3===e.length?this._nativePool._f32view.set(e,this._boundingBallCenterOffset):(this._nativePool._f32view[this._boundingBallCenterOffset]=e[t],this._nativePool._f32view[this._boundingBallCenterOffset+1]=e[t+1],this._nativePool._f32view[this._boundingBallCenterOffset+2]=e[t+2]))},t.prototype.getBoundingBallRadius=function(){return this._nativePool._f32view[this._boundingBallRadiusOffset]},t.prototype.setBoundingBallRadius=function(e){this._nativePool._f32view[this._boundingBallRadiusOffset]=e},Object.defineProperty(t.prototype,"active",{get:function(){return 0!=(this._nativePool._u32view[this._activeOffset]&o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE)},set:function(e){e?this._nativePool._u32view[this._activeOffset]|=o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE:this._nativePool._u32view[this._activeOffset]&=~o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE},enumerable:!1,configurable:!0}),t.prototype.bindEntity=function(e){i.componentBindEntity(this,e)},t.prototype.unbindEntity=function(){i.componentUnbindEntity(this)},t}(a.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=function(){function e(e,t){this._nativeId=e,this._poolId=e&i.POOLID_AND,this._poolIndex=e&i.POOLINDEX_AND,this._nativePool=t[this._poolId],this.float32View=this._nativePool._f32view,this.uint32View=this._nativePool._u32view,this.id=this._nativeId,this.poolId=this._poolId,this.poolIndex=this._poolIndex}return e.prototype.setRawBuffer=function(e){this._nativePool._f32view.set(e,this.entityOffset)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(32)),o=n(6),a=function(e){function t(){var t=e.call(this)||this;return t._boneNum=0,t}return i.__extends(t,e),t.prototype.setBoneMatrix=function(e,t,n,i){if(n.length===t&&i.length===t){if(this._boneNum=t,this._createNativeComponent(o.enumComponentType.SkinnedSkeleton,t),this._nativeObj){for(var r=[],a=0;a<t;a++)r.push(i[a].id);this._u32view[0]=e.id,this._u32view.set(n,1);var s=1+t;this._u32view.set(r,s),this._boneOffsetMatrices=new Float32Array(this._buffer,this._byteOffset+4*(1+2*t),16*t)}}else console.warn("setBoneMatrix Error")},t.prototype.getBoneNum=function(){return this._boneNum},t.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},t}(r.default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(39)),o=n(6),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.setAnimationClip=function(e){this._createNativeModel(o.enumModelType.AnimationClipModel,e)},t}(r.default);t.default=a},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateModel=void 0,t.staticInitAccelerateModel=function(e){i=e};var r=function(){function e(){}return e.prototype._createNativeModel=function(e,t){var n=i.createDataModel(e,t);this._nativeObj=n,this._id=n?n.id:0,this.id=this._id},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(39)),o=n(6),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.setBoneInverseMatrix=function(e){var t=new Float32Array(e.length);t.set(e),this._createNativeModel(o.enumModelType.SkeletonBoneInverseModel,t.buffer)},t}(r.default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(42),r=function(){function e(e){this.contentoffset=0,this.frameRate=0,this.frameLength=0,this.totalSampleGroup=0,this.nodes={},this.nodesLength=0,this._id=e,this.id=this._id}return e.prototype.setAnimationClip=function(e){this._f32View=new Float32Array(e),this._u32View=new Uint32Array(e),this.contentoffset=this._u32View[0],this.frameRate=this._f32View[1],this.frameLength=this._u32View[2],this.totalSampleGroup=this._u32View[3],this.nodes={},this._initAnimationClipNodes(),this.nodesLength=Object.keys(this.nodes).length},e.prototype._initAnimationClipNodes=function(){if(this._f32View&&this._u32View){this.contentoffset=this._u32View[0],this.frameRate=this._f32View[1],this.frameLength=this._u32View[2],this.totalSampleGroup=this._u32View[3];for(var e=0,t=0;t<this.totalSampleGroup;t++){for(var n=this._u32View[4+3*t+0],r=this._u32View[4+3*t+1],o=this._u32View[4+3*t+2],a=this.nodes[n]||new i.TransformCurve(this.frameRate,this.frameLength,i.CurveMode.Hermite),s=0;s<o;s++){var c=this._u32View[4+3*this.totalSampleGroup+4*e+0],l=this._f32View[4+3*this.totalSampleGroup+4*e+1],u=this._f32View[4+3*this.totalSampleGroup+4*e+2],d=this._f32View[4+3*this.totalSampleGroup+4*e+3];c>=this.frameLength&&console.error("Index out of range: ",c,this.frameLength),e++,a.addKeyFrame({index:c,value:l,inTangent:u,outTangent:d},r)}this.nodes[n]=a}this.nodesLength=Object.keys(this.nodes).length}},e.prototype.evaluate=function(e){for(;e>this.frameLength-1;)e-=this.frameLength-1;var t=e,n=Object.create(null);for(var i in this.nodes)n[i]=this.nodes[i].evaluate(t);return n},e}();t.default=r},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TransformCurve=t.TransformCurveRotationMode=t.TransformCurveType=t.Curve=t.CurveMode=void 0,function(e){e[e.Hermite=0]="Hermite"}(i=t.CurveMode||(t.CurveMode={}));var r,o,a=function(){function e(e,t,n,r){void 0===r&&(r=i.Hermite),this.keyFrames=e,this.fps=t,this.frameCount=n,this.mode=r}return e.prototype.evaluate=function(e,t){return void 0===t&&(t=!1),this.mode===i.Hermite?this._evaluate(e,t):null},Object.defineProperty(e.prototype,"keyCount",{get:function(){return this.keyFrames.length},enumerable:!1,configurable:!0}),e.prototype.addKeyFraem=function(e){var t=this._findKeyIndex(e.index);this.keyFrames.splice(t,0,e)},e.prototype._evaluate=function(e,t){if(!this.keyFrames.length)return null;var n=this._findKeyIndex(e);if(this.keyFrames[n]&&this.keyFrames[n].index===e)return this.keyFrames[n].value;if(0===n||n===this.keyFrames.length){if(t){if(this.mode===i.Hermite){var r=this.keyFrames[this.keyFrames.length-1],o=this.keyFrames[0],a=(this.frameCount-1-r.index+e)/this.fps;return(2*(l=(c=(s=(0===n?e-r.index+e:e-o.index)/(o.index-r.index))*s)*s)-3*c+1)*r.value+(l-2*c+s)*a*r.outTangent+(-2*l+3*c)*o.value+(l-c)*a*o.inTangent}return null}return this.mode===i.Hermite?this.keyFrames[0===n?0:this.keyFrames.length-1].value:null}if(this.mode===i.Hermite){r=this.keyFrames[n-1],a=((o=this.keyFrames[n]).index-r.index)/this.fps;var s,c,l=(c=(s=(e-r.index)/(o.index-r.index))*s)*s;return Number.isFinite(r.outTangent)&&Number.isFinite(o.inTangent)?(2*l-3*c+1)*r.value+(l-2*c+s)*a*r.outTangent+(-2*l+3*c)*o.value+(l-c)*a*o.inTangent:r.value}return null},e.prototype._findKeyIndex=function(e){for(var t=0,n=this.keyFrames.length,i=Math.floor((t+n)/2);t<n;)i=Math.floor((t+n)/2),this.keyFrames[i].index>=e?n=i:t=i+1;return t},e}();t.Curve=a,function(e){e[e.TranslateX=1]="TranslateX",e[e.TranslateY=2]="TranslateY",e[e.TranslateZ=3]="TranslateZ",e[e.ScaleX=4]="ScaleX",e[e.ScaleY=5]="ScaleY",e[e.ScaleZ=6]="ScaleZ",e[e.QuaternionX=7]="QuaternionX",e[e.QuaternionY=8]="QuaternionY",e[e.QuaternionZ=9]="QuaternionZ",e[e.QuaternionW=10]="QuaternionW",e[e.EulerX=11]="EulerX",e[e.EulerY=12]="EulerY",e[e.EulerZ=13]="EulerZ"}(r=t.TransformCurveType||(t.TransformCurveType={})),function(e){e[e.None=0]="None",e[e.Euler=1]="Euler",e[e.Quaternion=2]="Quaternion"}(o=t.TransformCurveRotationMode||(t.TransformCurveRotationMode={}));var s=function(){function e(e,t,n){void 0===n&&(n=i.Hermite),this.fps=e,this.frameLength=t,this.mode=n,this._rotationMode=o.None,this._translateX=new a([],e,t,n),this._translateY=new a([],e,t,n),this._translateZ=new a([],e,t,n),this._scaleX=new a([],e,t,n),this._scaleY=new a([],e,t,n),this._scaleZ=new a([],e,t,n),this._rotationX=new a([],e,t,n),this._rotationY=new a([],e,t,n),this._rotationZ=new a([],e,t,n),this._rotationW=new a([],e,t,n)}return Object.defineProperty(e.prototype,"rotationMode",{get:function(){return this._rotationMode},enumerable:!1,configurable:!0}),e.prototype.addKeyFrame=function(e,t){switch(t){case r.TranslateX:this._translateX.addKeyFraem(e);break;case r.TranslateY:this._translateY.addKeyFraem(e);break;case r.TranslateZ:this._translateZ.addKeyFraem(e);break;case r.ScaleX:this._scaleX.addKeyFraem(e);break;case r.ScaleY:this._scaleY.addKeyFraem(e);break;case r.ScaleZ:this._scaleZ.addKeyFraem(e);break;case r.QuaternionX:case r.EulerX:this._rotationX.addKeyFraem(e);break;case r.QuaternionY:case r.EulerY:this._rotationY.addKeyFraem(e);break;case r.QuaternionZ:case r.EulerZ:this._rotationZ.addKeyFraem(e);break;case r.QuaternionW:this._rotationW.addKeyFraem(e)}},e.prototype.evaluate=function(e){var t=Object.create(null);if(t.tx=this._translateX.evaluate(e),t.ty=this._translateY.evaluate(e),t.tz=this._translateZ.evaluate(e),t.sx=this._scaleX.evaluate(e),t.sy=this._scaleY.evaluate(e),t.sz=this._scaleZ.evaluate(e),t.rx=this._rotationX.evaluate(e),t.ry=this._rotationY.evaluate(e),t.rz=this._rotationZ.evaluate(e),t.rw=this._rotationW.evaluate(e),t.rw)if(null===t.rx||null===t.ry||null===t.rz)t.rx=t.ry=t.rz=t.rw=null,t.use_quaternion=!1;else{var n=Math.sqrt(t.rx*t.rx+t.ry*t.ry+t.rz*t.rz+t.rw*t.rw);t.rx/=n,t.ry/=n,t.rz/=n,t.rw/=n,t.use_quaternion=!0}else t.use_quaternion=!1;return t},e.TransformCurveRotationMode=o,e.TransformCurveType=r,e}();t.TransformCurve=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1).__importDefault(n(44)),r=function(){function e(e){this.boneNum=0,this.inverseMatrixs=[],this._id=e,this.id=this._id}return e.prototype.setBoneInverseMatrix=function(e){var t=new Float32Array(e.length);t.set(e);var n=t.buffer;this.inverseMatrixs=[];for(var r=this.boneNum=n.byteLength/64,o=0;o<r;o++)this.inverseMatrixs.push(i.default.createFromTypedArray(new Float32Array(n,64*o,16)))},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(20),o=i.__importDefault(n(45)),a=i.__importDefault(n(46)),s=new Float32Array(16);s.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var c=function(){function e(e,t){this._raw=e||new Float32Array(16),this._offset=t||0}return Object.defineProperty(e,"IDENTITY",{get:function(){var t=new e;return t._raw.set(s),t},enumerable:!1,configurable:!0}),e.lookAt=function(t,n,i,o){return o=o||new e,r.m4Helper.lookAt(t._raw,t._offset,n._raw,n._offset,i._raw,i._offset,o._raw,o._offset),o},e.perspective=function(t,n,i,o,a){return a=a||new e,r.m4Helper.perspective(t,n,i,o,a._raw,a._offset),a},e.orthographic=function(t,n,i,o,a,s,c){return c=c||new e,r.m4Helper.orthographic(t,n,i,o,a,s,c._raw,c._offset),c},e.fromQuaternion=function(t,n){return n=n||new e,r.quatHelper.toMatrix4(t._raw,t._offset,n._raw,n._offset),n},e.createFromArray=function(t){if(16!==t.length)throw new Error("create Matrix Error:array length is wrong");return new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){if(void 0===n&&(n=0),t.length-n<16)throw new Error("create Matrix Error:array length is wrong");return new e(t,n)},e.createRotationX=function(t,n){return n=n||new e,r.m4Helper.xRotation(t,n._raw,n._offset),n},e.createRotationY=function(t,n){return n=n||new e,r.m4Helper.yRotation(t,n._raw,n._offset),n},e.createRotationZ=function(t,n){return n=n||new e,r.m4Helper.zRotation(t,n._raw,n._offset),n},e.createRotationAxis=function(t,n,i){return i=i||new e,r.m4Helper.axisRotation(t._raw,t._offset,n,i._raw,i._offset),i},e.composeTRS=function(t,n,i,o){return o=o||new e,r.m4Helper.composeTRS(t._raw,t._offset,n._raw,n._offset,i._raw,i._offset,o._raw,o._offset),o},e.composeTQS=function(t,n,i,r){return r=e.fromQuaternion(n,r),e.composeTRS(t,r,i,r),r},e.composeFromRST3=function(t,n){return n=n||new e,r.m4Helper.composeRST3toRST4(t._raw,t._offset,n._raw,n._offset),n},e.prototype.toArray=function(){for(var e=new Array(16),t=0;t<16;t++)e[t]=this._raw[this._offset+t];return e},e.prototype.translate=function(t,n,i,o){return o=o||new e,r.m4Helper.translate(this._raw,this._offset,t,n,i,o._raw,o._offset),o},e.prototype.scale=function(t,n,i,o){return o=o||new e,r.m4Helper.scale(this._raw,this._offset,t,n,i,o._raw,o._offset),o},e.prototype.xRotate=function(t,n){return n=n||new e,r.m4Helper.xRotate(this._raw,this._offset,t,n._raw,n._offset),n},e.prototype.yRotate=function(t,n){return n=n||new e,r.m4Helper.yRotate(this._raw,this._offset,t,n._raw,n._offset),n},e.prototype.zRotate=function(t,n){return n=n||new e,r.m4Helper.zRotate(this._raw,this._offset,t,n._raw,n._offset),n},e.prototype.axisRotate=function(t,n,i){return i=i||new e,r.m4Helper.axisRotate(this._raw,this._offset,t._raw,t._offset,n,i._raw,i._offset),i},e.prototype.rotateByQuaternion=function(t,n){n=n||new e;var i=l;return e.fromQuaternion(t,i),this.multiply(i,n),n},e.prototype.inverse=function(t){return t=t||new e,r.m4Helper.inverse(this._raw,this._offset,t._raw,t._offset),t},e.prototype.transpose=function(t){return t=t||new e,r.m4Helper.transpose(this._raw,this._offset,t._raw,t._offset),t},e.prototype.multiply=function(t,n){return n=n||new e,r.m4Helper.multiply(this._raw,this._offset,t._raw,t._offset,n._raw,n._offset),n},e.prototype.transformVector=function(e,t){return t=t||new a.default,r.m4Helper.transformVector(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e.prototype.transformDirection=function(e,t){return t=t||o.default.ZERO,r.m4Helper.transformDirection(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e.prototype.transformPoint=function(e,t){return t=t||o.default.ZERO,r.m4Helper.transformPoint(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e.prototype.set=function(e){return r.m4Helper.copy(e._raw,e._offset,this._raw,this._offset),this},e.prototype.clone=function(){var t=new e;return r.m4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.decomposeTransRotMatScale=function(e,t,n){return r.m4Helper.decomposeTransRotMatScale(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset,n._raw,n._offset)},e.prototype.setValue=function(e,t,n){return this._raw[this._offset+4*t+n]=e,this},e.prototype.getValue=function(e,t){return this._raw[this._offset+4*e+t]},e.prototype.setColumn=function(e,t){var n=this._offset+4*t;return this._raw[n]=e.x,this._raw[n+1]=e.y,this._raw[n+2]=e.z,this._raw[n+3]=e.w,this},e.prototype.getColumn=function(e,t){t=t||new a.default;var n=this._offset+4*e;return t.setValue(this._raw[n],this._raw[n+1],this._raw[n+2],this._raw[n+3]),t},e.prototype.setRow=function(e,t){var n=this._offset+t;return this._raw[n]=e.x,this._raw[n+4]=e.y,this._raw[n+8]=e.z,this._raw[n+12]=e.w,this},e.prototype.getRow=function(e,t){t=t||new a.default;var n=this._offset+e;return t.setValue(this._raw[n],this._raw[n+4],this._raw[n+8],this._raw[n+12]),t},e}();t.default=c;var l=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),r=function(){function e(e,t){this._raw=e||new Float32Array(3),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ZERO",{get:function(){return new e(new Float32Array([0,0,0]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ONE",{get:function(){return new e(new Float32Array([1,1,1]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Up",{get:function(){return new e(new Float32Array([0,1,0]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ForwardRH",{get:function(){return new e(new Float32Array([0,0,-1]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ForwardLH",{get:function(){return new e(new Float32Array([0,0,1]))},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,n,i){var r=new Float32Array(3);return r[0]=t,r[1]=n,r[2]=i,new e(r)},e.createFromArray=function(t){return 3!==t.length&&(t=new Array(3).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){return void 0===n&&(n=0),t.length-n<3&&(t=new Float32Array(3).fill(0),n=0),new e(t,n)},e.transformQuat=function(t,n,r){return r=r||e.ZERO,i.quatHelper.transformDirection(n._raw,n._offset,t._raw,t._offset,o._raw,o._offset),r.set(o),r},e.transformCoordinate=function(e,t,n){return n=t.transformPoint(e,n)},e.prototype.toArray=function(){var e=this._raw;return[e[this._offset],e[this._offset+1],e[this._offset+2]]},e.prototype.equal=function(e){return i.v3Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){i.v3Helper.copy(e._raw,e._offset,this._raw,this._offset)},e.prototype.setValue=function(e,t,n){var i=this._raw;return i[this._offset]=e,i[this._offset+1]=t,i[this._offset+2]=n,this},e.prototype.add=function(t,n){return n=n||new e,i.v3Helper.add(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.sub=function(t,n){return n=n||new e,i.v3Helper.sub(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.cross=function(t,n){return n=n||new e,i.v3Helper.cross(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.normalize=function(t){return t=t||new e,i.v3Helper.normalize(this._raw,this._offset,o._raw,o._offset),t.set(o),t},e.prototype.scale=function(t,n){return n=n||new e,i.v3Helper.scale(this._raw,this._offset,t,o._raw,o._offset),n.set(o),n},e.prototype.scaleXYZ=function(t,n,i,r){r=r||new e;var o=this._raw;return r.setValue(o[this._offset]*t,o[this._offset+1]*n,o[this._offset+2]*i),r},e.prototype.lerp=function(t,n,r){return r=r||new e,i.v3Helper.lerp(this._raw,this._offset,t._raw,t._offset,n,o._raw,o._offset),r.set(o),r},e.prototype.dot=function(e){return i.v3Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.length=function(){return i.v3Helper.length(this._raw,this._offset)},e.prototype.clone=function(){var t=new e;return i.v3Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.isZero=function(){return i.v3Helper.isZero(this._raw,this._offset)},e.prototype.distanceTo=function(e){return i.v3Helper.distance(this._raw,this._offset,e._raw,e._offset)},e.prototype.angleTo=function(t,n){return n=n||e.ZERO,i.v3Helper.angleTo(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.setFromMatrixColumn=function(e,t){return this.fromArray(e._raw,4*t)},e.prototype.fromArray=function(e,t){void 0===t&&(t=0);var n=this._raw;return n[this._offset]=e[t],n[this._offset+1]=e[t+1],n[this._offset+2]=e[t+2],this},e.prototype.setFromMatrixScale=function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length(),r=this._raw;return r[this._offset]=t,r[this._offset+1]=n,r[this._offset+2]=i,this},e.prototype.setFromMatrixPosition=function(e){var t=e._raw,n=this._raw;return n[this._offset]=t[e._offset+12],n[this._offset+1]=t[e._offset+13],n[this._offset+2]=t[e._offset+14],this},e.prototype.applyMatrix4=function(t){return e.transformCoordinate(this,t,this)},e.prototype.transformDirection=function(e){var t=this._raw,n=t[this._offset],i=t[this._offset+1],r=t[this._offset+2],o=e._raw;return t[this._offset]=o[e._offset]*n+o[e._offset+4]*i+o[e._offset+8]*r,t[this._offset+1]=o[e._offset+1]*n+o[e._offset+5]*i+o[e._offset+9]*r,t[this._offset+2]=o[e._offset+2]*n+o[e._offset+6]*i+o[e._offset+10]*r,this.normalize()},e}();t.default=r;var o=new r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),r=function(){function e(e,t){this._raw=e||new Float32Array(4),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){this._raw[this._offset+3]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ZERO",{get:function(){var t=new Float32Array(4);return t.fill(0),new e(t)},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,n,i,r){var o=new Float32Array(4);return o[0]=t,o[1]=n,o[2]=i,o[3]=r,new e(o)},e.createFromArray=function(t){return 4!==t.length&&(t=new Array(4).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){return void 0===n&&(n=0),t.length-n<4&&(t=new Float32Array(4).fill(0),n=0),new e(t)},e.prototype.toArray=function(){var e=this._raw;return[e[this._offset+0],e[this._offset+1],e[this._offset+2],e[this._offset+3]]},e.prototype.equal=function(e){return i.v4Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){i.v4Helper.copy(e._raw,e._offset,this._raw,this._offset)},e.prototype.setValue=function(e,t,n,i){var r=this._raw;return r[this._offset+0]=e,r[this._offset+1]=t,r[this._offset+2]=n,r[this._offset+3]=i,this},e.prototype.add=function(t,n){return n=n||new e,i.v4Helper.add(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.sub=function(t,n){return n=n||new e,i.v4Helper.sub(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.scale=function(t,n){return n=n||new e,i.v4Helper.scale(this._raw,this._offset,t,o._raw,o._offset),n.set(o),n},e.prototype.lerp=function(t,n,r){return r=r||new e,i.v4Helper.lerp(this._raw,this._offset,t._raw,t._offset,n,o._raw,o._offset),r.set(o),r},e.prototype.dot=function(e){return i.v4Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.isZero=function(){return i.v4Helper.isZero(this._raw,this._offset)},e.prototype.clone=function(){var t=new e;return i.v4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e}();t.default=r;var o=new r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateDataBuffer=void 0;var i=n(1),r=i.__importDefault(n(32));t.staticInitAccelerateDataBuffer=function(e){e};var o=function(e){function t(t){var n=e.call(this)||this;return n._init(t),n}return i.__extends(t,e),Object.defineProperty(t.prototype,"dataLength",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset+4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrayBuffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t}(r.default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitEntity2D=void 0;var i,r=n(1),o=n(6),a=r.__importDefault(n(36));t.staticInitEntity2D=function(e){i=e};var s=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.entityOffset=i._poolIndex*o.ENTITY2D_SIZE,i.localRotationOffset=i.entityOffset+o.ENTITY2D_OFFSET.OFFSET_ROTATION,i.localPositionOffset=i.entityOffset+o.ENTITY2D_OFFSET.OFFSET_POSITION,i.localScaleOffset=i.entityOffset+o.ENTITY2D_OFFSET.OFFSET_SCALE,i.worldMatrixOffset=i.entityOffset+o.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX,i}return r.__extends(t,e),Object.defineProperty(t.prototype,"localPositionView",{get:function(){return this._localPositionView||(this._localPositionView=new Float32Array(this._nativePool._buffer,4*this.localPositionOffset,2)),this._localPositionView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localRotationView",{get:function(){return this._localRotationView||(this._localRotationView=new Float32Array(this._nativePool._buffer,4*this.localRotationOffset,1)),this._localRotationView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScaleView",{get:function(){return this._localScaleView||(this._localScaleView=new Float32Array(this._nativePool._buffer,4*this.localScaleOffset,2)),this._localScaleView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrixView",{get:function(){return this._worldMatrixView||(this._worldMatrixView=new Float32Array(this._nativePool._buffer,4*this.worldMatrixOffset,9)),this._worldMatrixView},enumerable:!1,configurable:!0}),t.prototype.addChild=function(e){i.entityAddChild(this,e)},t.prototype.addChildAtIndex=function(e,t){i.entityAddChildAtIndex(this,e,t)},t.prototype.removeFromParent=function(){i.entityRemoveFromParent(this)},t.prototype.destroy=function(){i.entityRemoveFromParent(this)},t.prototype.clear=function(){i.entityClear(this)},t.prototype.setLocalMatrixDirty=function(){i.entitySetLocalMatrixDirty(this)},Object.defineProperty(t.prototype,"active",{set:function(e){i.entitySetActive(this,e)},enumerable:!1,configurable:!0}),t.OFFSET_ROTATION=o.ENTITY2D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=o.ENTITY2D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=o.ENTITY2D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=o.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX,t.ENTITY2D_SIZE=o.ENTITY2D_SIZE,t}(a.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitEntity3D=void 0;var i,r=n(1),o=n(6),a=r.__importDefault(n(36));t.staticInitEntity3D=function(e){i=e};var s=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.entityOffset=i._poolIndex*o.ENTITY3D_SIZE,i.localRotationTypeOffset=i.entityOffset+o.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE,i.localQuaternionOffset=i.entityOffset+o.ENTITY3D_OFFSET.OFFSET_ROTATION,i.localPositionOffset=i.entityOffset+o.ENTITY3D_OFFSET.OFFSET_POSITION,i.localScaleOffset=i.entityOffset+o.ENTITY3D_OFFSET.OFFSET_SCALE,i.worldMatrixOffset=i.entityOffset+o.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX,i}return r.__extends(t,e),t.prototype.setUsingEuler=function(e){e?this._nativePool._u32view[this.localRotationTypeOffset]&=~o.ENTITY3D_OFFSET.DF_ROTATIONTYPE:this._nativePool._u32view[this.localRotationTypeOffset]|=o.ENTITY3D_OFFSET.DF_ROTATIONTYPE},t.prototype.isUsingEuler=function(){return 0==(this._nativePool._u32view[this.localRotationTypeOffset]&o.ENTITY3D_OFFSET.DF_ROTATIONTYPE)},Object.defineProperty(t.prototype,"localPositionView",{get:function(){return this._localPositionView||(this._localPositionView=new Float32Array(this._nativePool._buffer,4*this.localPositionOffset,3)),this._localPositionView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localQuaternionView",{get:function(){return this._localQuaternionView||(this._localQuaternionView=new Float32Array(this._nativePool._buffer,4*this.localQuaternionOffset,4)),this._localQuaternionView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScaleView",{get:function(){return this._localScaleView||(this._localScaleView=new Float32Array(this._nativePool._buffer,4*this.localScaleOffset,3)),this._localScaleView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrixView",{get:function(){return this._worldMatrixView||(this._worldMatrixView=new Float32Array(this._nativePool._buffer,4*this.worldMatrixOffset,16)),this._worldMatrixView},enumerable:!1,configurable:!0}),t.prototype.addChild=function(e){i.entityAddChild(this,e)},t.prototype.addChildAtIndex=function(e,t){i.entityAddChildAtIndex(this,e,t)},t.prototype.removeFromParent=function(){i.entityRemoveFromParent(this)},t.prototype.destroy=function(){i.entityRemoveFromParent(this)},t.prototype.clear=function(){i.entityClear(this)},t.prototype.setLocalMatrixDirty=function(){i.entitySetLocalMatrixDirty(this)},Object.defineProperty(t.prototype,"active",{set:function(e){i.entitySetActive(this,e)},enumerable:!1,configurable:!0}),t.prototype.setEntityDebugName=function(e){i.setEntityName(this.id,e)},t.OFFSET_ROTATIONTYPE=o.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE,t.OFFSET_ROTATION=o.ENTITY3D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=o.ENTITY3D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=o.ENTITY3D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=o.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX,t.DF_ROTATIONTYPE=o.ENTITY3D_OFFSET.DF_ROTATIONTYPE,t.ENTITY3D_SIZE=o.ENTITY3D_SIZE,t}(a.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitEntityGroup=void 0;var i,r=n(1),o=r.__importDefault(n(32));t.staticInitEntityGroup=function(e){i=e};var a=function(e){function t(t,n){var i=e.call(this)||this;return i._init(t),i.entityLength=n,i}return r.__extends(t,e),t.prototype.getEntityIdByIndex=function(e){return this._id+e},t.prototype.getEntityOffsetByIndex=function(e){return e*this.objectSize},t.prototype.setRawBuffer=function(e,t){void 0===t&&(t=0),this._f32view.set(e,t)},t.prototype.setLocalMatrixDirtyAll=function(){i.entityGroupSetLocalMatrixDirtyAll(this)},t}(o.default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(6),o=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.objectSize=r.ENTITY2D_SIZE,i}return i.__extends(t,e),t.OFFSET_ROTATION=r.ENTITY2D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=r.ENTITY2D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=r.ENTITY2D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=r.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX,t}(i.__importDefault(n(50)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(6),o=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.objectSize=r.ENTITY3D_SIZE,i}return i.__extends(t,e),t.OFFSET_ROTATIONTYPE=r.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE,t.OFFSET_ROTATION=r.ENTITY3D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=r.ENTITY3D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=r.ENTITY3D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=r.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX,t}(i.__importDefault(n(50)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateEntityCommand=void 0;var i,r=n(1),o=r.__importStar(n(54)),a=n(6);t.staticInitAccelerateEntityCommand=function(e){i=e};var s=function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype._checkBufferSize=function(e){o.SIZE_UINT32+this._u32view[o.OFFSET_COMMANDLENGTH]+e>this._bufferSize&&i.refreshWorldTransform()},t.prototype.setRootEntity=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.SetRootEntity,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.addChild=function(e,t){var n=3*o.SIZE_UINT32;this._checkBufferSize(n);var i=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[i]=a.enumEntityCommandType.AddChild,this._u32view[i+1]=e,this._u32view[i+2]=t,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+n)},t.prototype.addChildAtIndex=function(e,t,n){var i=4*o.SIZE_UINT32;this._checkBufferSize(i);var r=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[r]=a.enumEntityCommandType.AddChildAtIndex,this._u32view[r+1]=e,this._u32view[r+2]=t,this._u32view[r+3]=n,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+i)},t.prototype.removeFromParent=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.RemoveFromParent,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.disperseSubTree=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.DisperseSubTree,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.bindToBone=function(e,t){var n=3*o.SIZE_UINT32;this._checkBufferSize(n);var i=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[i]=a.enumEntityCommandType.BindToBone,this._u32view[i+1]=e,this._u32view[i+2]=t,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+n)},t.prototype.unBindFromBone=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.UnBindFromBone,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.entityCommandActive=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.EntityCommandActive,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.entityCommandInActive=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.EntityCommandInActive,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.bindToBones=function(e,t){var n=e.length,i=(2+2*n)*o.SIZE_UINT32;this._checkBufferSize(i);var r=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[r]=a.enumEntityCommandType.BindToBones,this._u32view[r+1]=n;for(var s=0;s<n;s++){var c=e[s],l=t[s];this._u32view[r+2+s]=c.id,this._u32view[r+2+n+s]=l.id}this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+i)},t.prototype.unBindFromBones=function(e){var t=e.length,n=(2+t)*o.SIZE_UINT32;this._checkBufferSize(n);var i=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[i]=a.enumEntityCommandType.UnBindFromBones,this._u32view[i+1]=t;for(var r=0;r<t;r++){var s=e[r];this._u32view[i+2+r]=s.id}this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+n)},t}(o.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OFFSET_COMMANDLENGTH=t.SIZE_UINT32=void 0;t.SIZE_UINT32=4,t.OFFSET_COMMANDLENGTH=0;var i=function(){function e(e){this._bufferSize=0,e?(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength):(this.buffer=new ArrayBuffer(1024),this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=1024)}return e.prototype._checkBufferSize=function(e){},e.prototype.setCommandSize=function(e){this._u32view[t.OFFSET_COMMANDLENGTH]=e},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateDirtiesCommand=void 0;var i,r=n(1),o=r.__importStar(n(54));t.staticInitAccelerateDirtiesCommand=function(e){i=e};var a=function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype._checkBufferSize=function(e){this._u32view[o.OFFSET_COMMANDLENGTH]+e+1>this._u32view.length&&i.refreshWorldTransform()},t.prototype.addDirtyEntity=function(e){this._checkBufferSize(1),this._u32view[this._u32view[o.OFFSET_COMMANDLENGTH]+1]=e.id,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+1)},t.prototype.addDirtyEntityId=function(e){this._checkBufferSize(1),this._u32view[this._u32view[o.OFFSET_COMMANDLENGTH]+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+1)},t.prototype.addDirtyEntities=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var n=this._u32view[o.OFFSET_COMMANDLENGTH]+1,i=t-(this._u32view.length-1),r=0;r<i;r++)this._u32view[n+r]=e[r].id;var a=t-i;for(r=i;r<a;r++)this.addDirtyEntityId(e[r].id)}else{for(i=t,n=this._u32view[o.OFFSET_COMMANDLENGTH]+1,r=0;r<i;r++)this._u32view[n+r]=e[r].id;this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+i)}},t.prototype.addDirtyEntitiesById=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var n=this._u32view[o.OFFSET_COMMANDLENGTH]+1,i=t-(this._u32view.length-1),r=0;r<i;r++)this._u32view[n+r]=e[r];var a=t-i;for(r=i;r<a;r++)this.addDirtyEntityId(e[r])}else{for(i=t,n=this._u32view[o.OFFSET_COMMANDLENGTH]+1,r=0;r<i;r++)this._u32view[n+r]=e[r];this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+i)}},t.prototype.addDirtyEntityGroupAll=function(e){if(this._checkBufferSize(e.entityLength),e.entityLength>this._u32view.length){for(var t=this._u32view[o.OFFSET_COMMANDLENGTH]+1,n=e.entityLength-(this._u32view.length-1),i=0;i<n;i++)this._u32view[t+i]=e.getEntityIdByIndex(i);var r=e.entityLength-n;for(i=n;i<r;i++)this.addDirtyEntityId(e.getEntityIdByIndex(i))}else{for(n=e.entityLength,t=this._u32view[o.OFFSET_COMMANDLENGTH]+1,i=0;i<n;i++)this._u32view[t+i]=e.getEntityIdByIndex(i);this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+n)}},t}(o.default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(54)),o=function(e){function t(){return e.call(this)||this}return i.__extends(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimators=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;this.setCommandSize(t)},t}(r.default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(54)),o=function(e){function t(){return e.call(this)||this}return i.__extends(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateSkinningMatrices=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;this.setCommandSize(t)},t}(r.default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scaleNumberArray=t.NativePools=void 0;var i=n(1),r=n(6),o=i.__importDefault(n(59)),a=4e3,s=function(){};t.NativePools=s;var c=new Float32Array(new ArrayBuffer(4*r.ENTITY2D_SIZE));c.set([0,0,0,1,1],0);var l=new Uint32Array(new ArrayBuffer(4*r.ENTITY3D_SIZE)),u=new Float32Array(l.buffer);l[0]=1,u.set([0,0,0,1],1),u.set([0,0,0],5),u.set([1,1,1],8);var d=new Uint32Array(new ArrayBuffer(4*r.CULLABLECOMPONENT_SIZE)),h=new Float32Array(d.buffer),p=function(){function e(e){this._index=0,this._size=null!=e?e:500,this._array=new Array(this._size)}return e.prototype.push=function(e){this._index>=this._size&&(this._size*=2,this._array.length=this._size),this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},e}();t.scaleNumberArray=p;var f=function(){function e(e){this.worker=e,this.entity2DPools={},this._entity2DPoolIndex=0,this._entity2DPoolUsedLength=0,this._entity2DPoolLength=0,this._entity2DDisposedIds=new p,this.entity3DPools={},this._entity3DPoolIndex=0,this._entity3DPoolUsedLength=0,this._entity3DPoolLength=0,this._entity3DDisposedIds=new p,this.cullableComponentPools={},this._cullableComponentPoolIndex=0,this._cullableComponentPoolUsedLength=0,this._cullableComponentPoolLength=0,this._cullableComponentDisposedIds=new p}return e.prototype._enlargeEntity2DPool=function(e){var t=this.worker.createEntity(r.enumEntityType.Entity2D,e),n=new o.default(t);this._entity2DPoolIndex=n.id,this.entity2DPools[n.id]=n,this._entity2DPoolLength+=e},e.prototype._enlargeEntity3DPool=function(e){var t=this.worker.createEntity(r.enumEntityType.Entity3D,e),n=new o.default(t);this._entity3DPoolIndex=n.id,this.entity3DPools[n.id]=n,this._entity3DPoolLength+=e},e.prototype._enlargeCullableComponentPool=function(e){var t=this.worker.createComponent(r.enumComponentType.Cullable,e),n=new o.default(t);this._cullableComponentPoolIndex=n.id,this.cullableComponentPools[n.id]=n,this._cullableComponentPoolLength+=e},e.prototype.getEntity2D=function(){if(this._entity2DDisposedIds.size()>0)return this._entity2DPoolUsedLength++,this._entity2DDisposedIds.pop();this._entity2DPoolUsedLength>=this._entity2DPoolLength&&this._enlargeEntity2DPool(a);var e=this._entity2DPoolIndex;return this._entity2DPoolIndex+=1,this._entity2DPoolUsedLength++,e},e.prototype.disposeEntity2D=function(e){e.isUsing&&(this._entity2DDisposedIds.push(e.id),this._entity2DPoolUsedLength--,e.setRawBuffer(c),e.isUsing=!1)},e.prototype.getEntity3D=function(){if(this._entity3DDisposedIds.size()>0)return this._entity3DPoolUsedLength++,this._entity3DDisposedIds.pop();this._entity3DPoolUsedLength>=this._entity3DPoolLength&&this._enlargeEntity3DPool(a);var e=this._entity3DPoolIndex;return this._entity3DPoolIndex+=1,this._entity3DPoolUsedLength++,e},e.prototype.disposeEntity3D=function(e){e.isUsing&&(this._entity3DDisposedIds.push(e.id),this._entity3DPoolUsedLength--,e.setRawBuffer(u),e.isUsing=!1)},e.prototype.getCullableComponent=function(){if(this._cullableComponentDisposedIds.size()>0)return this._cullableComponentPoolUsedLength++,this._cullableComponentDisposedIds.pop();this._cullableComponentPoolUsedLength>=this._cullableComponentPoolLength&&this._enlargeCullableComponentPool(a);var e=this._cullableComponentPoolIndex;return this._cullableComponentPoolIndex+=1,this._cullableComponentPoolUsedLength++,e},e.prototype.disposeCullableComponent=function(e){e.isUsing&&(this._cullableComponentDisposedIds.push(e.id),this._cullableComponentPoolUsedLength--,e.setRawBuffer(h),e.isUsing=!1)},e.prototype.getCullableComponentSingle=function(){return this._enlargeCullableComponentPool(1),this._cullableComponentPoolIndex},e.prototype.disposeCullableComponentSingle=function(e){this.cullableComponentPools[e.id]=null},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=function(e){function t(t){var n=e.call(this)||this;return n._init(t),n}return i.__extends(t,e),t}(i.__importDefault(n(32)).default);t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatorControllerMock=t.AnimatorController=t.AnimatorControllerModelMock=t.staticInitAnimatorController=void 0;var i,r=n(1),o=n(8),a=r.__importDefault(n(45)),s=r.__importDefault(n(61)),c=r.__importDefault(n(46));t.staticInitAnimatorController=function(e){i=e};var l,u=new a.default,d=new s.default,h=new s.default,p=new c.default,f=new c.default,g=function(){function e(e){this.layerCount=e,this.id=o.requestAccelerateObjectID(),this.masks=[],this.buffer=new ArrayBuffer(4+12*e),this.uint32=new Uint32Array(this.buffer);for(var t=0;t<e;t++)this.masks.push(null)}return e.prototype.setMaskAtIndex=function(e,t,n,i){if(this.masks[e]=[],t)for(var r=new Float32Array(t,n,2*i),o=new Uint32Array(t,n,2*i),a=0;a<i;a++)this.masks[e].push({entity:o[2*a],weight:r[2*a+1]})},e}();t.AnimatorControllerModelMock=g,function(e){e[e.Override=0]="Override",e[e.Additive=1]="Additive"}(l||(l={}));var _=function(){this.tx=[0,0],this.ty=[0,0],this.tz=[0,0],this.sx=[0,0],this.sy=[0,0],this.sz=[0,0],this.use_quaternion=!0,this.r_weight=0,this.rx=0,this.ry=0,this.rz=0,this.rw=0},m=function(){function e(e){this.layerCount=e,this.nativeObject=i.worker.createAnimatorControllerModel(e),this._uint32View=new Uint32Array(this.nativeObject.buffer),this._f32View=new Float32Array(this.nativeObject.buffer);for(var t=0;t<e;t++)this._uint32View[1+3*t]=1,this._f32View[1+3*t+1]=0,this._f32View[1+3*t+2]=4294967295}return Object.defineProperty(e.prototype,"id",{get:function(){return this.nativeObject.id},enumerable:!1,configurable:!0}),e.prototype.setAnimationClipBinding=function(e){this._uint32View[0]=e?e.id:4294967295},e.prototype.setLayerBlendType=function(e,t){this._uint32View[1+3*e]=t},e.prototype.setLayerWeight=function(e,t){this._f32View[1+3*e+1]=t},e.prototype.setLayerBlend=function(e,t){this._uint32View[1+3*e+2]=t?t.id:4294967295},e.prototype.setLayerMask=function(e,t){this.nativeObject.setMaskAtIndex(e,t.buffer,t.offset,t.length)},e.prototype.update=function(){this.nativeObject.update()},e}();function y(e,t,n,i){var r=!1;return e.use_quaternion?null!==e.rx&&null!==e.ry&&null!==e.rz&&null!==e.rw?(r=!0,i[0]=e.rx,i[1]=e.ry,i[2]=e.rz,i[3]=e.rw):r=!1:null!==e.rx&&null!==e.ry&&null!==e.rz?(r=!0,u.setValue(e.rx,e.ry,e.rz),s.default.fromEulerAngles(u,d),i[0]=d.x,i[1]=d.y,i[2]=d.z,i[3]=d.w):t&&n?(r=!0,u.setValue(null===e.rx?n.getEuler()[0]:e.rx,null===e.ry?n.getEuler()[1]:e.ry,null===e.rz?n.getEuler()[2]:e.rz),s.default.fromEulerAngles(u,d),i[0]=d.x,i[1]=d.y,i[2]=d.z,i[3]=d.w):r=!1,r}t.AnimatorController=m;var v=function(){function e(e){this.layerCount=e,this.binding=null,this._blendMap=new Map,this.nativeObject=new g(e),this._uint32View=new Uint32Array(this.nativeObject.buffer),this._f32View=new Float32Array(this.nativeObject.buffer);for(var t=0;t<e;t++)this._uint32View[1+3*t]=1,this._f32View[1+3*t+1]=0,this._f32View[1+3*t+2]=4294967295}return Object.defineProperty(e.prototype,"id",{get:function(){return this.nativeObject.id},enumerable:!1,configurable:!0}),e.prototype.setAnimationClipBinding=function(e){this._uint32View[0]=e?e.id:4294967295,this.binding=e},e.prototype.setLayerBlendType=function(e,t){this._uint32View[1+3*e]=t},e.prototype.setLayerWeight=function(e,t){this._f32View[1+3*e+1]=t},e.prototype.setLayerBlend=function(e,t){this._uint32View[1+3*e+2]=t?t.id:4294967295,t&&this._blendMap.set(t.id,t)},e.prototype.setLayerMask=function(e,t){this.nativeObject.setMaskAtIndex(e,t.buffer,t.offset,t.length)},e.prototype.update=function(){var e=this;if(this.binding){for(var t=[],n=this.binding.defaultValues,i=function(i){var o=new Map,a=r._uint32View[1+3*i];if(a!==l.Override&&a!==l.Additive)return t.push(o),"continue";var s=a===l.Additive,c=r._uint32View[1+3*i+2],u=r._blendMap.get(c);if(!u)return t.push(o),"continue";for(var d=[];u;)u.weight&&d.push(u),u=u.nextState;for(var h=function(e){var t=r._blendState(d[e],s,r.nativeObject.masks[i]),n=d[e].weight;t.forEach((function(e,t){if(!o.has(t)){var i=new _;i.tx[1]=NaN,i.ty[1]=NaN,i.tz[1]=NaN,i.sx[1]=NaN,i.sy[1]=NaN,i.sz[1]=NaN,i.r_weight=NaN,o.set(t,i)}var r=o.get(t);if(isNaN(e.tx[1])||0===e.tx[1]||(isNaN(r.tx[1])&&(r.tx[1]=0),r.tx[0]+=e.tx[0]*n,r.tx[1]+=e.tx[1]*n),isNaN(e.ty[1])||0===e.ty[1]||(isNaN(r.ty[1])&&(r.ty[1]=0),r.ty[0]+=e.ty[0]*n,r.ty[1]+=e.ty[1]*n),isNaN(e.tz[1])||0===e.tz[1]||(isNaN(r.tz[1])&&(r.tz[1]=0),r.tz[0]+=e.tz[0]*n,r.tz[1]+=e.tz[1]*n),isNaN(e.sx[1])||0===e.sx[1]||(isNaN(r.sx[1])&&(r.sx[1]=0),r.sx[0]+=e.sx[0]*n,r.sx[1]+=e.sx[1]*n),isNaN(e.sy[1])||0===e.sy[1]||(isNaN(r.sy[1])&&(r.sy[1]=0),r.sy[0]+=e.sy[0]*n,r.sy[1]+=e.sy[1]*n),isNaN(e.sz[1])||0===e.sz[1]||(isNaN(r.sz[1])&&(r.sz[1]=0),r.sz[0]+=e.sz[0]*n,r.sz[1]+=e.sz[1]*n),!isNaN(e.r_weight)&&0!==e.r_weight){isNaN(r.r_weight)&&(r.r_weight=0);var a=p;a.setValue(r.rx,r.ry,r.rz,r.rw);var s=f;s.setValue(e.rx,e.ry,e.rz,e.rw),a.add(s.scale(a.dot(s)<0?-e.r_weight*n:e.r_weight*n,s),a),r.rx=a.x,r.ry=a.y,r.rz=a.z,r.rw=a.w,r.r_weight+=e.r_weight*n}}))},g=0;g<d.length;g++)h(g);s?o.forEach((function(e,t){if(!isNaN(e.r_weight)){var n=p;n.setValue(e.rx*e.r_weight,e.ry*e.r_weight,e.rz*e.r_weight,e.rw);var i=n.dot(n);i>0&&n.scale(1/Math.sqrt(i),n),e.rx=n.x,e.ry=n.y,e.rz=n.z,e.rw=n.w}})):o.forEach((function(t,i){var r=e.binding.entities.get(i),o=n.get(r);if(!isNaN(t.tx[1])&&t.tx[1]<1&&(t.tx[0]+=(1-t.tx[1])*o.position[0]),!isNaN(t.ty[1])&&t.ty[1]<1&&(t.ty[0]+=(1-t.ty[1])*o.position[1]),!isNaN(t.tz[1])&&t.tz[1]<1&&(t.tz[0]+=(1-t.tz[1])*o.position[2]),!isNaN(t.sx[1])&&t.sx[1]<1&&(t.sx[0]+=(1-t.sx[1])*o.scale[0]),!isNaN(t.sy[1])&&t.sy[1]<1&&(t.sy[0]+=(1-t.sy[1])*o.scale[1]),!isNaN(t.sz[1])&&t.sz[1]<1&&(t.sz[0]+=(1-t.sz[1])*o.scale[2]),!isNaN(t.r_weight)&&t.r_weight<1){var a=o.getQuaternion(),s=p;s.setValue(t.rx,t.ry,t.rz,t.rw),(c=f).setValue(a[0],a[1],a[2],a[3]),s.add(c.scale(s.dot(c)<0?-(1-t.r_weight):1-t.r_weight,c),s),t.rx=s.x,t.ry=s.y,t.rz=s.z,t.rw=s.w}if(!isNaN(t.r_weight)){var c;(c=p).setValue(t.rx,t.ry,t.rz,t.rw);var l=c.dot(c);l>0&&c.scale(1/Math.sqrt(l),c),t.rx=c.x,t.ry=c.y,t.rz=c.z,t.rw=c.w}})),t.push(o)},r=this,o=0;o<this.layerCount;o++)i(o);var a=new Map,s=function(i){var r=c._uint32View[1+3*i]===l.Additive,o=c._f32View[1+3*i+1];t[i].forEach((function(t,s){if(!a.has(s)){var c=new _;c.tx[1]=NaN,c.ty[1]=NaN,c.tz[1]=NaN,c.sx[1]=NaN,c.sy[1]=NaN,c.sz[1]=NaN,c.r_weight=NaN,a.set(s,c)}var l=a.get(s);if(r){if(0===i){var u=n.get(e.binding.entities.get(s));if(isNaN(t.tx[1])||(isNaN(l.tx[1])&&(l.tx[1]=0),l.tx[0]=u.position[0]+t.tx[0]*o),isNaN(t.ty[1])||(isNaN(l.ty[1])&&(l.ty[1]=0),l.ty[0]=u.position[1]+t.ty[0]*o),isNaN(t.tz[1])||(isNaN(l.tz[1])&&(l.tz[1]=0),l.tz[0]=u.position[2]+t.tz[0]*o),isNaN(t.sx[1])||(isNaN(l.sx[1])&&(l.sx[1]=0),l.sx[0]=u.scale[0]*(1-o)+t.sx[0]*o),isNaN(t.sy[1])||(isNaN(l.sy[1])&&(l.sy[1]=0),l.sy[0]=u.scale[1]*(1-o)*t.sy[0]*o),isNaN(t.sz[1])||(isNaN(l.sz[1])&&(l.sz[1]=0),l.sz[0]=u.scale[2]*(1-o)*t.sz[0]*o),!isNaN(t.r_weight)){isNaN(l.r_weight)&&(l.r_weight=0);var g=u.getQuaternion(),m=p;m.setValue(g[0],g[1],g[2],g[3]),(v=d).setValue(m.x,m.y,m.z,m.w),(T=f).setValue(t.rx*o,t.ry*o,t.rz*o,t.rw),(S=T.dot(T))>=0&&T.scale(1/Math.sqrt(S),T),(y=h).setValue(T.x,T.y,T.z,T.w),y.multiply(v,y),l.rx=y.x,l.ry=y.y,l.rz=y.z,l.rw=y.w}}else if(isNaN(t.tx[1])||(isNaN(l.tx[1])&&(l.tx[1]=0),l.tx[0]+=t.tx[0]*o),isNaN(t.ty[1])||(isNaN(l.ty[1])&&(l.ty[1]=0),l.ty[0]+=t.ty[0]*o),isNaN(t.tz[1])||(isNaN(l.tz[1])&&(l.tz[1]=0),l.tz[0]+=t.tz[0]*o),isNaN(t.sx[1])||(isNaN(l.sx[1])&&(l.sx[1]=0),l.sx[0]+=t.sx[0]*o),isNaN(t.sy[1])||(isNaN(l.sy[1])&&(l.sy[1]=0),l.sy[0]+=t.sy[0]*o),isNaN(t.sz[1])||(isNaN(l.sz[1])&&(l.sz[1]=0),l.sz[0]+=t.sz[0]*o),!isNaN(t.r_weight)){if(isNaN(l.r_weight)){l.r_weight=0;g=(u=n.get(e.binding.entities.get(s))).getQuaternion();l.rx=g[0],l.ry=g[1],l.rz=g[2],l.rw=g[3]}var y,v;(T=f).setValue(t.rx*o,t.ry*o,t.rz*o,t.rw),(S=T.dot(T))>=0&&T.scale(1/Math.sqrt(S),T),(y=h).setValue(T.x,T.y,T.z,T.w),(v=d).setValue(l.rx,l.ry,l.rz,l.rw),y.multiply(v,y),l.rx=y.x,l.ry=y.y,l.rz=y.z,l.rw=y.w}}else if(o<1){u=n.get(e.binding.entities.get(s));if(isNaN(t.tx[1])||(isNaN(l.tx[1])&&(l.tx[1]=0),l.tx[0]=u.position[0]*(1-o)+t.tx[0]*o),isNaN(t.ty[1])||(isNaN(l.ty[1])&&(l.ty[1]=0),l.ty[0]=u.position[1]*(1-o)+t.ty[0]*o),isNaN(t.tz[1])||(isNaN(l.tz[1])&&(l.tz[1]=0),l.tz[0]=u.position[2]*(1-o)+t.tz[0]*o),isNaN(t.sx[1])||(isNaN(l.sx[1])&&(l.sx[1]=0),l.sx[0]=u.scale[0]*(1-o)+t.sx[0]*o),isNaN(t.sy[1])||(isNaN(l.sy[1])&&(l.sy[1]=0),l.sy[0]=u.scale[1]*(1-o)+t.sy[0]*o),isNaN(t.sz[1])||(isNaN(l.sz[1])&&(l.sz[1]=0),l.sz[0]=u.scale[2]*(1-o)+t.sz[0]*o),!isNaN(t.r_weight)){isNaN(l.r_weight)&&(l.r_weight=0);g=u.getQuaternion();var A=p;A.setValue(g[0],g[1],g[2],g[3]);var b=f;b.setValue(t.rx,t.ry,t.rz,t.rw);var w=b.dot(A)>=0?1:-1,E=b.scale(w).sub(A).scale(o).add(A);(S=E.dot(E))>=0&&E.scale(1/Math.sqrt(S),E),l.rx=E.x,l.ry=E.y,l.rz=E.z,l.rw=E.w}}else{var T,S;if(isNaN(t.tx[1])||(isNaN(l.tx[1])&&(l.tx[1]=0),l.tx[0]=t.tx[0]*o),isNaN(t.ty[1])||(isNaN(l.ty[1])&&(l.ty[1]=0),l.ty[0]=t.ty[0]*o),isNaN(t.tz[1])||(isNaN(l.tz[1])&&(l.tz[1]=0),l.tz[0]=t.tz[0]*o),isNaN(t.sx[1])||(isNaN(l.sx[1])&&(l.sx[1]=0),l.sx[0]=t.sx[0]*o),isNaN(t.sy[1])||(isNaN(l.sy[1])&&(l.sy[1]=0),l.sy[0]=t.sy[0]*o),isNaN(t.sz[1])||(isNaN(l.sz[1])&&(l.sz[1]=0),l.sz[0]=t.sz[0]*o),!isNaN(t.r_weight))isNaN(l.r_weight)&&(l.r_weight=0),(T=f).setValue(t.rx*o,t.ry*o,t.rz*o,t.rw),(S=T.dot(T))>=0&&T.scale(1/Math.sqrt(S),T),l.rx=T.x,l.ry=T.y,l.rz=T.z,l.rw=T.w}}))},c=this;for(o=0;o<t.length;o++)s(o);a.forEach((function(t,n){var i=e.binding.entities.get(n);isNaN(t.tx[1])||(i.localPositionView[0]=t.tx[0]),isNaN(t.ty[1])||(i.localPositionView[1]=t.ty[0]),isNaN(t.tz[1])||(i.localPositionView[2]=t.tz[0]),isNaN(t.sx[1])||(i.localScaleView[0]=t.sx[0]),isNaN(t.sy[1])||(i.localScaleView[1]=t.sy[0]),isNaN(t.sz[1])||(i.localScaleView[2]=t.sz[0]),isNaN(t.r_weight)||(i.localQuaternionView.set([t.rx,t.ry,t.rz,t.rw]),i.setUsingEuler(!1)),i.setLocalMatrixDirty()}))}},e.prototype._blendState=function(e,t,n){var i=new Map;if(!this.binding)return i;for(var r=this.binding.defaultValues,o=e.count,a=e.useDefault,s=0;s<o;s++){var c={clip:e.clipsMap.get(e._uint32View[3+5*s]),frameIndex:e._f32View[3+5*s+1],weight:e._f32View[3+5*s+2],additiveReferenceClip:e.clipsMap.get(e._uint32View[3+5*s+3]),additiveFrameIndex:e._f32View[3+5*s+4]};if(c.weight&&c.clip&&this.binding.clipBinding.has(c.clip)){var l=c.clip.evaluate(c.frameIndex),u=c.weight,g={};if(t){var m=c.additiveReferenceClip?c.additiveReferenceClip:c.clip,v=c.additiveReferenceClip?c.additiveFrameIndex:0;this.binding.clipBinding.has(m)||(m=c.clip,v=0);var A=m.evaluate(v);for(var b in A){var w=this.binding.clipBinding.get(m);if(w[+b])(T=this.binding.entities.get(w[+b].id))&&(g[T.id]=A[b])}}for(var E in l){var T;if(T=this.binding.clipBinding.get(c.clip)[+E]){var S=1;if(n.length){for(var C=NaN,I=0;I<n.length;I++)if(n[I]&&n[I].entity===T.id){C=n[I].weight;break}if(!isNaN(C)){if(0===C)continue;S=C}}var x=r.get(T);if(x){var D=u*S,O=[0,0,0,0],P=y(l[E],0!==a,x,O);if(t){var R=g[T.id];if(!R)continue;var k=[0,0,0,0],N=y(R,0!==a,x,k);if(null!==l[E].tx&&null!==R.tx&&(l[E].tx-=R.tx),null!==l[E].ty&&null!==R.ty&&(l[E].ty-=R.ty),null!==l[E].tz&&null!==R.tz&&(l[E].tz-=R.tz),null!==l[E].sx&&null!==R.sx&&(l[E].sx-=R.sx),null!==l[E].sy&&null!==R.sy&&(l[E].sy-=R.sy),null!==l[E].sz&&null!==R.sz&&(l[E].sz-=R.sz),P&&N){var M=d;M.setValue(k[0],k[1],k[2],k[3]);var L=h;L.setValue(O[0],O[1],O[2],O[3]),L.multiply(M.invert(M),L),O[0]=l[E].rx=L.x,O[1]=l[E].ry=L.y,O[2]=l[E].rz=L.z,O[3]=l[E].rw=L.w}}if(!i.has(T.id)){var B=new _;B.tx[1]=NaN,B.ty[1]=NaN,B.tz[1]=NaN,B.sx[1]=NaN,B.sy[1]=NaN,B.sz[1]=NaN,B.r_weight=NaN,i.set(T.id,B)}var F=i.get(T.id);if(null!==l[E].tx&&(isNaN(F.tx[1])&&(F.tx[1]=0),F.tx[0]+=l[E].tx*D,F.tx[1]+=D),null!==l[E].ty&&(isNaN(F.ty[1])&&(F.ty[1]=0),F.ty[0]+=l[E].ty*D,F.ty[1]+=D),null!==l[E].tz&&(isNaN(F.tz[1])&&(F.tz[1]=0),F.tz[0]+=l[E].tz*D,F.tz[1]+=D),null!==l[E].sx&&(isNaN(F.sx[1])&&(F.sx[1]=0),F.sx[0]+=l[E].sx*D,F.sx[1]+=D),null!==l[E].sy&&(isNaN(F.sy[1])&&(F.sy[1]=0),F.sy[0]+=l[E].sy*D,F.sy[1]+=D),null!==l[E].sz&&(isNaN(F.sz[1])&&(F.sz[1]=0),F.sz[0]+=l[E].sz*D,F.sz[1]+=D),P){isNaN(F.r_weight)&&(F.r_weight=0),F.r_weight+=D;var U=p;U.setValue(F.rx,F.ry,F.rz,F.rw);var W=f;W.setValue(O[0],O[1],O[2],O[3]),U.add(W.scale(U.dot(W)<0?-D:D,W),U),F.rx=U.x,F.ry=U.y,F.rz=U.z,F.rw=U.w}}}}}}return t||0===a||r.forEach((function(e,t){if(n.length)for(var r=0;r<n.length;r++)if(n[r]&&n[r].entity===t.id){if(n[r]&&0===n[r].weight)return;break}i.has(t.id)||i.set(t.id,new _)})),i},e}();t.AnimatorControllerMock=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(44)),o=i.__importDefault(n(45)),a=n(20),s=function(){function e(e,t){this._raw=e||new Float32Array(4),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){this._raw[this._offset+3]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT",{get:function(){return e.createFromNumber(0,0,0,1)},enumerable:!1,configurable:!0}),e.fromEulerAngles=function(t,n){return n=n||e.DEFAULT,a.quatHelper.fromEulerAngles(t._raw,t._offset,u._raw,u._offset),n.set(u),n},e.createFromMatrix4=function(t,n){return n=n||new e,a.quatHelper.fromMatrix4(t._raw,t._offset,u._raw,u._offset),n.set(u),n},e.createFromAxisAngle=function(t,n,i){return i=i||new e,r.default.createRotationAxis(t,n,c),e.createFromMatrix4(c,i),i},e.lookRotation=function(t,n,i){return i=i||new e,r.default.lookAt(o.default.ZERO,t,n,c),e.createFromMatrix4(c,i),i},e.createFromNumber=function(t,n,i,r){var o=new Float32Array(4);return o[0]=t,o[1]=n,o[2]=i,o[3]=r,new e(o)},e.createFromArray=function(t){return 4!==t.length&&(t=new Array(4).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){return void 0===n&&(n=0),t.length-n<4&&(t=new Float32Array(4).fill(0)),new e(t,n)},e.prototype.set=function(e){a.v4Helper.copy(e._raw,e._offset,this._raw,this._offset)},e.prototype.setValue=function(e,t,n,i){var r=this._raw;return r[this._offset+0]=e,r[this._offset+1]=t,r[this._offset+2]=n,r[this._offset+3]=i,this},e.prototype.slerp=function(t,n,i){return i=i||new e,a.quatHelper.slerp(this._raw,this._offset,t._raw,t._offset,n,u._raw,u._offset),i.set(u),i},e.prototype.invert=function(t){return t=t||new e,a.quatHelper.invert(this._raw,this._offset,u._raw,u._offset),t.set(u),t},e.prototype.add=function(t,n){return n=n||e.DEFAULT,a.v4Helper.add(this._raw,this._offset,t._raw,t._offset,u._raw,u._offset),n.set(u),n},e.prototype.sub=function(t,n){return n=n||e.DEFAULT,a.v4Helper.sub(this._raw,this._offset,t._raw,t._offset,u._raw,u._offset),n.set(u),n},e.prototype.multiply=function(t,n){return n=n||e.DEFAULT,a.quatHelper.multiply(this._raw,this._offset,t._raw,t._offset,u._raw,u._offset),n.set(u),n},e.prototype.clone=function(){var t=new e;return a.v4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.isZero=function(){return a.v4Helper.isZero(this._raw,this._offset)},e.prototype.isDefault=function(){return a.v4Helper.equal(this._raw,this._offset,l._raw,l._offset)},e.prototype.toEulerAngles=function(e){return e=e||o.default.ZERO,a.quatHelper.toEulerAngles(this._raw,this._offset,d._raw,d._offset),e.set(d),e},e.prototype.equal=function(e){return a.v4Helper.equal(this._raw,this._offset,e._raw,e._offset)},e}();t.default=s;var c=new r.default,l=s.DEFAULT,u=new s,d=new o.default},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatorControllerStateMock=t.AnimatorControllerState=t.staticInitAnimatorControllerLayerBlend=void 0,t.staticInitAnimatorControllerLayerBlend=function(e){i=e};var r=function(){function e(e){this.count=e,this._index=0,this._native=i.createAnimatorControllerStateModel(e),this._f32View=new Float32Array(this._native.buffer),this._uint32View=new Uint32Array(this._native.buffer);for(var t=0;t<e;t++)this._uint32View[5*t+3]=4294967295,this._f32View[5*t+3+1]=0,this._f32View[5*t+3+2]=0,this._uint32View[5*t+3+3]=4294967295,this._f32View[5*t+3+4]=0}return Object.defineProperty(e.prototype,"id",{get:function(){return this._native.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._f32View[0]},set:function(e){this._f32View[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useDefault",{get:function(){return this._f32View[1]},set:function(e){this._f32View[1]=e},enumerable:!1,configurable:!0}),e.prototype.resetBlendInfo=function(){for(var e=0;e<this.count;e++)this._f32View[5*e+3+1]=0,this._f32View[5*e+3+2]=0;this._index=0},e.prototype.setNextState=function(e){this._uint32View[2]=e?e.id:4294967295},e.prototype.setBlendInfo=function(e,t,n,i,r){return!(this._index>=this.count)&&(this._uint32View[5*this._index+3]=e.id,this._f32View[5*this._index+3+1]=t,this._f32View[5*this._index+3+2]=n,this._uint32View[5*this._index+3+3]=i?i.id:this._uint32View[5*this._index+3],this._f32View[5*this._index+3+4]=r,this._index++,!0)},e}();t.AnimatorControllerState=r;var o=function(){function e(e){this.count=e,this.clipsMap=new Map,this._index=0,this._native=i.createAnimatorControllerStateModel(e),this._f32View=new Float32Array(this._native.buffer),this._uint32View=new Uint32Array(this._native.buffer);for(var t=0;t<e;t++)this._uint32View[5*t+3]=4294967295,this._f32View[5*t+3+1]=0,this._f32View[5*t+3+2]=0,this._uint32View[5*t+3+3]=4294967295,this._f32View[5*t+3+4]=0}return Object.defineProperty(e.prototype,"id",{get:function(){return this._native.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._f32View[0]},set:function(e){this._f32View[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useDefault",{get:function(){return this._f32View[1]},set:function(e){this._f32View[1]=e},enumerable:!1,configurable:!0}),e.prototype.resetBlendInfo=function(){for(var e=0;e<this.count;e++)this._f32View[5*e+3+1]=0,this._f32View[5*e+3+2]=0;this._index=0,this.clipsMap.clear()},e.prototype.setNextState=function(e){this.nextState=e,this._uint32View[2]=e?e.id:4294967295},e.prototype.setBlendInfo=function(e,t,n,i,r){return!(this._index>=this.count)&&(this.clipsMap.set(e.id,e),this._uint32View[5*this._index+3]=e.id,this._f32View[5*this._index+3+1]=t,this._f32View[5*this._index+3+2]=n,this._uint32View[5*this._index+3+3]=i?i.id:this._uint32View[5*this._index+3],this._f32View[5*this._index+3+4]=r,i&&this.clipsMap.set(i.id,i),this._index++,!0)},e}();t.AnimatorControllerStateMock=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(54)),o=function(e){function t(){return e.call(this)||this}return i.__extends(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimatorControllers=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;this.setCommandSize(t)},t}(r.default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationClipBindingMock=t.AnimationClipBinding=t.staticInitAnimationClipBinding=t.Entity3DValue=void 0;var i,r,o,a,s=n(1),c=n(8),l=s.__importDefault(n(61)),u=s.__importDefault(n(45)),d=new l.default,h=new u.default,p=function(){function e(e){this.position=[e.localPositionView[0],e.localPositionView[1],e.localPositionView[2]],this.scale=[e.localScaleView[0],e.localScaleView[1],e.localScaleView[2]],e.isUsingEuler()?(this._euler=[e.localQuaternionView[0],e.localQuaternionView[1],e.localQuaternionView[2]],this.useQuaternion=!1,this._quaternionInitialized=!1,this._eulerInitialized=!0):(this.useQuaternion=!0,this._quaternionInitialized=!0,this._quaternion=[e.localQuaternionView[0],e.localQuaternionView[1],e.localQuaternionView[2],e.localQuaternionView[3]],this._eulerInitialized=!1)}return e.prototype.getEuler=function(){return this._eulerInitialized||(this._eulerInitialized=!0,d.setValue(this._quaternion[0],this._quaternion[1],this._quaternion[2],this._quaternion[3]),d.toEulerAngles(h),this._euler=[h.x,h.y,h.z]),this._euler},e.prototype.getQuaternion=function(){return this._quaternionInitialized||(this._quaternionInitialized=!0,h.setValue(this._euler[0],this._euler[1],this._euler[2]),l.default.fromEulerAngles(h,d),this._quaternion=[d.x,d.y,d.z,d.w]),this._quaternion},e.prototype.syncValue=function(e){e.localPositionView.set(this.position),e.localScaleView.set(this.scale),this.useQuaternion?(e.localQuaternionView.set(this._quaternion),e.setUsingEuler(!1)):(e.localQuaternionView.set(this._euler),e.setUsingEuler(!0)),e.setLocalMatrixDirty()},e}();t.Entity3DValue=p,t.staticInitAnimationClipBinding=function(e){i=e},function(e){e[e.Ignore=0]="Ignore",e[e.Refresh=1]="Refresh"}(r||(r={})),function(e){e[e.Keep=0]="Keep",e[e.Refresh=1]="Refresh",e[e.WriteBack=2]="WriteBack"}(o||(o={})),function(e){e[e.Keep=0]="Keep",e[e.Clear=1]="Clear",e[e.WriteBack=2]="WriteBack"}(a||(a={}));var f=function(){function e(e,t,n,r,o,a,s,c){for(var l=Math.min(r.length-o,a),u=Math.min(e.length-t,n),d=new ArrayBuffer(4*(l+u)),h=new Uint32Array(d),p=0,f=t;f<u;f++)h[p++]=e[f]?e[f].id:4294967295;for(f=o;f<l;f++)h[p++]=null===r[f]?4294967295:"number"==typeof r[f]?r[f]:r[f].id;this.nativeObject=i.worker.createAnimationClipBinding(d,0,u,l,s,c.id)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.nativeObject.id},enumerable:!1,configurable:!0}),e.prototype.updateBinding=function(e,t,n,i,r,o,a,s,c,l){for(var u=Math.min(i.length-r,o),d=Math.min(e.length-t,n),h=new ArrayBuffer(4*(u+d)),p=new Uint32Array(h),f=0,g=t;g<d;g++)p[f++]=e[g]?e[g].id:4294967295;for(g=r;g<u;g++)p[f++]=null===i[g]?4294967295:"number"==typeof i[g]?i[g]:i[g].id;return this.nativeObject.updateBinding(h,0,d,u,a,s,c,l.id)},e.prototype.writeDefaultValues=function(){this.nativeObject.writeDefaultValues()},e}();t.AnimationClipBinding=f;var g=function(){function e(e,t,n,i,o,a,s,l){this.clipBinding=new Map,this.defaultValues=new Map,this.id=c.requestAccelerateObjectID(),this._root=null,this.clipModels=new Map,this.entities=new Map;var u=[];if(this._updateBinding(e,t,n,i,o,a,u)&&s===r.Refresh)for(var d=0,h=u;d<h.length;d++){var f=h[d];this.defaultValues.set(f,new p(f))}}return e.prototype.updateBinding=function(e,t,n,i,s,c,l,u,d,h){var f=this,g=[];if(!this._updateBinding(e,t,n,i,s,c,g))return!1;var _=this.defaultValues;this.defaultValues=new Map;var m,y,v=l;v&a.WriteBack?(y=!0,m=v&~a.WriteBack):(y=!1,m=v);var A,b,w=u;w&o.WriteBack?(b=!0,A=w&~o.WriteBack):(b=!1,A=w);for(var E=d,T=new Set,S=new Set,C=new Set,I=0,x=g;I<x.length;I++){var D=x[I];_.has(D)?T.add(D):S.add(D)}return _.forEach((function(e,t){g.indexOf(t)<0&&C.add(t)})),y&&C.forEach((function(e){_.get(e).syncValue(e)})),m===a.Keep&&C.forEach((function(e){var t=_.get(e);f.defaultValues.set(e,t)})),A===o.Refresh&&T.forEach((function(e){f.defaultValues.set(e,new p(e))})),b&&T.forEach((function(e){_.get(e).syncValue(e)})),A===o.Keep&&T.forEach((function(e){var t=_.get(e);f.defaultValues.set(e,t)})),E===r.Refresh&&S.forEach((function(e){f.defaultValues.set(e,new p(e))})),!0},e.prototype.writeDefaultValues=function(){this.defaultValues.forEach((function(e,t){e.syncValue(t)}))},e.prototype.getRoot=function(){return this._root},e.prototype._getRoot=function(){if(!this.clipBinding.size)return null;var e=null;return this.clipBinding.forEach((function(t,n){!e&&t.length&&(e=t[0])})),e},e.prototype._updateBinding=function(e,t,n,i,r,o,a){n=Math.min(e.length-t,n),o=Math.min(i.length-r,o);for(var s=0,c=new Map,l=t;l<n;l++){var u=e[l],d=[],h=i[s++];if("number"!=typeof h)return!1;if(s>=o)return!1;for(var p=0;p<h;p++){if(s>=o)return!1;if("number"==typeof(_=i[r+s]))return!1;_?(a.push(_),d.push(_)):d.push(null),s++}c.set(u,d)}this.clipBinding=c,this.entities.clear();for(var f=0,g=a;f<g.length;f++){var _=g[f];this.entities.set(_.id,_)}return this._root=this._getRoot(),!0},e}();t.AnimationClipBindingMock=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogicManager=void 0;var i=n(1),r=n(32),o=i.__importDefault(n(44)),a=i.__importDefault(n(61)),s=i.__importDefault(n(45)),c=n(6),l=n(33),u=i.__importDefault(n(66)),d=i.__importStar(n(48)),h=i.__importStar(n(49)),p=i.__importDefault(n(67)),f=i.__importDefault(n(69)),g=i.__importStar(n(50)),_=i.__importDefault(n(51)),m=i.__importDefault(n(52)),y=i.__importDefault(n(70)),v=i.__importDefault(n(72)),A=i.__importDefault(n(73)),b=i.__importDefault(n(74)),w=i.__importStar(n(35)),E=i.__importDefault(n(75)),T=i.__importDefault(n(47)),S=n(8),C=i.__importDefault(n(58)),I=i.__importDefault(n(46)),x=n(64),D=n(60),O=n(62),P=function(){function e(e,t){this.config=t,this.entity2mock=new WeakMap,this.entityGroup2mock=new WeakMap,this.cullableComponent2mock=new WeakMap,this._entitySystem=null,this._modelMap={},this._dataBufferMap={},this.worker=e,this.poolManager=new C.default(this.worker),d.staticInitEntity2D(this),h.staticInitEntity3D(this),g.staticInitEntityGroup(this),w.staticInitCullableComponent(this),r.staticInitNativeObject(this.worker),D.staticInitAnimatorController(this),x.staticInitAnimationClipBinding(this),O.staticInitAnimatorControllerLayerBlend(this.worker)}return e.prototype.createEntity3D=function(){var e=this.poolManager.getEntity3D(),t=new h.default(e,this.poolManager.entity3DPools);t.isUsing=!0,this.entitySetActive(t,!0);var n=new f.default(t.float32View,t.uint32View,t.entityOffset);return this.entity2mock.set(t,n),t},e.prototype.createEntity2D=function(){var e=this.poolManager.getEntity2D(),t=new d.default(e,this.poolManager.entity2DPools);t.isUsing=!0,this.entitySetActive(t,!0);var n=new p.default(t.float32View,t.uint32View,t.entityOffset);return this.entity2mock.set(t,n),t},e.prototype.createEntity2DGroup=function(e){var t=this.worker.createEntity(c.enumEntityType.Entity2D,e),n=new _.default(t,e),i=new y.default(n);return this.entityGroup2mock.set(n,i),n},e.prototype.createEntity3DGroup=function(e){var t=this.worker.createEntity(c.enumEntityType.Entity3D,e),n=new m.default(t,e),i=new v.default(n);return this.entityGroup2mock.set(n,i),n},e.prototype.createCullableComponent=function(){var e=this.poolManager.getCullableComponent(),t=new w.default(e,this.poolManager.cullableComponentPools);t.isUsing=!0,t.setActive(!0);var n=new E.default(t);return this.cullableComponent2mock.set(t,n),t},e.prototype.createAnimatorComponent=function(){return new A.default},e.prototype.createSkinnedSkeletonComponent=function(){return new b.default},e.prototype.createDataModel=function(e){var t=l.dataModel2CtorMock[e];if(!t)return console.warn("can not support dataModel ["+e+"]"),null;var n=S.requestAccelerateObjectID(),i=new t(n);return this._modelMap[n]=i,i},e.prototype.createDataBuffer=function(e){var t=S.requestAccelerateObjectID(),n={buffer:new ArrayBuffer(e),id:t,byteSize:e},i=new T.default(n);return this._dataBufferMap[t]=i,i},e.prototype.createAnimationClipBinding=function(e,t,n,i,r,o,a,s){return new x.AnimationClipBindingMock(e,t,n,i,r,o,a,s)},e.prototype.createAnimatorController=function(e){return new D.AnimatorControllerMock(e)},e.prototype.createAnimatorControllerStateModel=function(e){return new O.AnimatorControllerStateMock(e)},e.prototype.entityAddChild=function(e,t){var n=this.entity2mock.get(e),i=this.entity2mock.get(t);n&&i&&n.addChild(i)},e.prototype.entityAddChildAtIndex=function(e,t,n){var i=this.entity2mock.get(e),r=this.entity2mock.get(t);i&&r&&i.addChildAtIndex(r,n)},e.prototype.entityRemoveFromParent=function(e){var t=this.entity2mock.get(e);t&&t.removeFromParent()},e.prototype.entityDestroy=function(e){var t=this.entity2mock.get(e);t&&t.destroy(),e instanceof d.default?this.poolManager.disposeEntity2D(e):e instanceof h.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityClear=function(e){var t=this.entity2mock.get(e);t&&t.clear()},e.prototype.entitySetActive=function(e,t){var n=this.entity2mock.get(e);n&&(n.active=t)},e.prototype.entitySetLocalMatrixDirty=function(e){var t=this.entity2mock.get(e);t&&t.setLocalMatrixDirty()},e.prototype.entitiesSetLocalMatrixDirty=function(e,t){for(var n=0;n<t;n++){var i=e[n],r=this.entity2mock.get(i);r&&r.setLocalMatrixDirty()}},e.prototype.entitiesSetLocalMatrixDirtyById=function(e,t){},e.prototype.componentBindEntity=function(e,t){var n=this.cullableComponent2mock.get(e),i=this.entity2mock.get(t);n&&i&&n.bindEntity(i)},e.prototype.componentUnbindEntity=function(e){var t=this.cullableComponent2mock.get(e);t&&t.unbindEntity(),this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntity=function(e){var t=this.entity2mock.get(e);t&&(t instanceof f.default?this._getEntitySystem().setEntityRoot3D(t):this._getEntitySystem().setEntityRoot2D(t))},e.prototype.entityGroupAddChild=function(e,t,n,i){var r,o;e instanceof g.default?r=this.entityGroup2mock.get(e).entitis[n]:r=this.entity2mock.get(e);t instanceof g.default?o=this.entityGroup2mock.get(t).entitis[i]:o=this.entity2mock.get(t);r&&o&&r.addChild(o)},e.prototype.entityGroupAddChildAtIndex=function(e,t,n,i,r){var o,a;e instanceof g.default?o=this.entityGroup2mock.get(e).entitis[i]:o=this.entity2mock.get(e);t instanceof g.default?a=this.entityGroup2mock.get(t).entitis[r]:a=this.entity2mock.get(t);o&&a&&o.addChildAtIndex(a,n)},e.prototype.entityGroupRemoveFromParent=function(e,t){var n;e instanceof g.default?n=this.entityGroup2mock.get(e).entitis[t]:n=this.entity2mock.get(e);n&&n.removeFromParent()},e.prototype.entityGroupDestroy=function(e,t){var n;e instanceof g.default?n=this.entityGroup2mock.get(e).entitis[t]:n=this.entity2mock.get(e);n&&n.destroy(),e instanceof d.default?this.poolManager.disposeEntity2D(e):e instanceof h.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityGroupClear=function(e,t){var n;e instanceof g.default?n=this.entityGroup2mock.get(e).entitis[t]:n=this.entity2mock.get(e);n&&n.clear()},e.prototype.entityGroupSetActive=function(e,t,n){var i;e instanceof g.default?i=this.entityGroup2mock.get(e).entitis[n]:i=this.entity2mock.get(e);i&&(i.active=t)},e.prototype.entityGroupSetLocalMatrixDirty=function(e,t){var n;e instanceof g.default?n=this.entityGroup2mock.get(e).entitis[t]:n=this.entity2mock.get(e);n&&n.setLocalMatrixDirty()},e.prototype.entityGroupSetLocalMatrixDirtyAll=function(e){var t=this.entityGroup2mock.get(e);t&&t.setLocalMatrixDirtyAll()},e.prototype.componentBindEntityWithIndex=function(e,t,n,i){var r,o=this.cullableComponent2mock.get(e);t instanceof g.default?r=this.entityGroup2mock.get(t).entitis[i]:r=this.entity2mock.get(t);o&&r&&o.bindEntity(r)},e.prototype.componentUnbindEntityWithIndex=function(e,t){var n=this.cullableComponent2mock.get(e);n&&n.unbindEntity(),this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntityGroup=function(e,t){var n;(void 0===t&&(t=0),e instanceof g.default)?n=this.entityGroup2mock.get(e).entitis[t]:n=this.entity2mock.get(e);n&&(n instanceof f.default?this._getEntitySystem().setEntityRoot3D(n):this._getEntitySystem().setEntityRoot2D(n))},e.prototype.refreshWorldTransform=function(){this._getEntitySystem().refreshWorldTransform()},e.prototype.cullWithCameraPerspective=function(e,t,n,i,r,o,a,c,l,u,d,h,p,f){var g=this._getEntitySystem().root3D,_=[],m=[],y=s.default.createFromNumber(t,n,i),v=s.default.createFromNumber(r,o,a),A=s.default.createFromNumber(c,l,u),b=p*Math.tan(d/2),w=b*h,E=y.sub(v).normalize(),T=A.cross(E).normalize(),S=E.cross(T),C=y,I=C.sub(E.scale(p)),x=C.sub(E.scale(f)),D=[];D[0]={},D[0].point=I,D[0].normal=E.scale(-1),D[0].distance=D[0].point.dot(D[0].normal.scale(-1)),D[1]={},D[1].point=x,D[1].normal=E,D[1].distance=D[1].point.dot(D[1].normal.scale(-1)),D[2]={},D[2].point=I.add(S.scale(b)),D[2].normal=D[2].point.sub(C).normalize().cross(T),D[2].distance=D[2].point.dot(D[2].normal.scale(-1)),D[3]={},D[3].point=I.sub(S.scale(b)),D[3].normal=T.cross(D[3].point.sub(C).normalize()),D[3].distance=D[3].point.dot(D[3].normal.scale(-1)),D[4]={},D[4].point=I.sub(T.scale(w)),D[4].normal=D[4].point.sub(C).normalize().cross(S),D[4].distance=D[4].point.dot(D[4].normal.scale(-1)),D[5]={},D[5].point=I.add(T.scale(w)),D[5].normal=S.cross(D[5].point.sub(C).normalize()),D[5].distance=D[5].point.dot(D[5].normal.scale(-1)),g&&g.travelChild((function(t){for(var n=0,i=t._cullableComps;n<i.length;n++){var r=i[n];if(!r||!r.active||r.entity!==t||!t.active)return!0;if(!(e&r.cullMask))return!0;var o=!1,a=t.worldMatrix,c=a._raw,l=a._offset,u=s.default.createFromNumber(c[l+0+0],c[l+0+1],c[l+0+2]).length(),d=s.default.createFromNumber(c[l+4+0],c[l+4+1],c[l+4+2]).length(),h=s.default.createFromNumber(c[l+8+0],c[l+8+1],c[l+8+2]).length(),p=u>d?u:d;p=p>h?p:h;for(var f=a.transformPoint(s.default.createFromTypedArray(r.boundingBallCenter)),g=r.boundingBallRadius*p,y=0;y<6;y++){if(D[y].normal.dot(f)+D[y].distance<-g){o=!0;break}}o||(_.push(r._componetModel.id),m.push(0))}}));var O={objects:new Uint32Array(_).buffer,hash:Math.ceil(1e6*Math.random()),distances:new Float32Array(m).buffer};return O?{hash:O.hash,objects:new Uint32Array(O.objects),distances:new Float32Array(O.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.cullWithCameraOrthographic=function(e,t,n,i,r,o,a,c,l,u,d,h,p,f,g,_){var m=this._getEntitySystem().root3D,y=[],v=[],A=s.default.createFromNumber(t,n,i),b=s.default.createFromNumber(r,o,a),w=s.default.createFromNumber(c,l,u),E=A.sub(b).normalize(),T=w.cross(E).normalize(),S=E.cross(T),C=A,I=C.sub(E.scale(g)),x=C.sub(E.scale(_)),D=[];D[0]={},D[0].point=I,D[0].normal=E.scale(-1),D[0].distance=D[0].point.dot(D[0].normal.scale(-1)),D[1]={},D[1].point=x,D[1].normal=E,D[1].distance=D[1].point.dot(D[1].normal.scale(-1)),D[2]={},D[2].point=I.add(S.scale(f)),D[2].normal=S.scale(-1),D[2].distance=D[2].point.dot(D[2].normal.scale(-1)),D[3]={},D[3].point=I.add(S.scale(p)),D[3].normal=S,D[3].distance=D[3].point.dot(D[3].normal.scale(-1)),D[4]={},D[4].point=I.add(T.scale(d)),D[4].normal=T,D[4].distance=D[4].point.dot(D[4].normal.scale(-1)),D[5]={},D[5].point=I.add(T.scale(h)),D[5].normal=T.scale(-1),D[5].distance=D[5].point.dot(D[5].normal.scale(-1)),m&&m.travelChild((function(t){for(var n=0,i=t._cullableComps;n<i.length;n++){var r=i[n];if(!r||!r.active||r.entity!==t||!t.active)return!0;if(!(e&r.cullMask))return!0;var o=!1,a=t.worldMatrix,c=a._raw,l=a._offset,u=s.default.createFromNumber(c[l+0+0],c[l+0+1],c[l+0+2]).length(),d=s.default.createFromNumber(c[l+4+0],c[l+4+1],c[l+4+2]).length(),h=s.default.createFromNumber(c[l+8+0],c[l+8+1],c[l+8+2]).length(),p=u>d?u:d;p=p>h?p:h;for(var f=a.transformPoint(s.default.createFromTypedArray(r.boundingBallCenter)),g=r.boundingBallRadius*p,_=0;_<6;_++){if(D[_].normal.dot(f)+D[_].distance<-g){o=!0;break}}o||(y.push(r._componetModel.id),v.push(0))}}));var O={objects:new Uint32Array(y).buffer,hash:Math.ceil(1e6*Math.random()),distances:new Float32Array(v).buffer};return O?{hash:O.hash,objects:new Uint32Array(O.objects),distances:new Float32Array(O.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.SyncValuesToEntity3D=function(e,t){null!==e.tx&&(t.float32View[t.localPositionOffset]=e.tx),null!==e.ty&&(t.float32View[t.localPositionOffset+1]=e.ty),null!==e.tz&&(t.float32View[t.localPositionOffset+2]=e.tz),null!==e.sx&&(t.float32View[t.localScaleOffset+0]=e.sx),null!==e.sy&&(t.float32View[t.localScaleOffset+1]=e.sy),null!==e.sz&&(t.float32View[t.localScaleOffset+2]=e.sz),null!==e.rw?(t.setUsingEuler(!1),t.float32View[t.localQuaternionOffset+0]=e.rx,t.float32View[t.localQuaternionOffset+1]=e.ry,t.float32View[t.localQuaternionOffset+2]=e.rz,t.float32View[t.localQuaternionOffset+3]=e.rw):null!==e.rx||null!==e.ry||e.rz,this.entitySetLocalMatrixDirty(t)},e.prototype.updateAnimator=function(e){if(this._updateAnimator(e),e){var t=this.entity2mock.get(e.culEntity3DTreeNode);t&&this.computeRootWorldMatrixRecursive(t)}},e.prototype.updateAnimatorController=function(e){if(e&&e.binding&&e.binding.getRoot()){e.update();var t=this.entity2mock.get(e.binding.getRoot());t&&this.computeRootWorldMatrixRecursive(t)}},e.prototype.computeRootWorldMatrixRecursive=function(e){var t=e.parent;t?this.computeRootWorldMatrixRecursive(t):e!=this._getEntitySystem().root3D&&e._computeWorldMatrixRecursive(!1)},e.prototype._updateAnimator=function(e){if(e){for(var t=[],n=0,r=0;r<e.animationClipCount;r++){var o=e.getAnimationParamater(r);if(void 0!==o.percentage){var s=i.__assign({},o);s.nodeIndex=n,t.push(s)}n+=this._modelMap[o.animationClipId].nodesLength}if(0!==t.length){var c=this._modelMap[t[0].animationClipId];if(void 0!==c)if(1===t.length){var l=c.evaluate(t[0].frameIndex);for(var r in l){if(g=e.getEntity(Number(r)+t[0].nodeIndex)){var u=l[r];delete(m=i.__assign({},l[r])).use_quaternion,this.SyncValuesToEntity3D(u,g)}}}else{var d={},h=e,p=t;for(r=0;r<p.length;r++)if(this._modelMap[p[r].animationClipId]){l=this._modelMap[p[r].animationClipId].evaluate(p[r].frameIndex);for(var f in l){var g;if(g=h.getEntity(Number(f)+p[r].nodeIndex)){var _=g.id,m=i.__assign({},l[f]),y=i.__assign({},l[f]);for(var v in delete m.use_quaternion,delete y.use_quaternion,m)null!==m[v]&&(y[v]=p[r].percentage);d[_]||(d[_]={entity:g,transforms:[],percentages:[]}),d[_].transforms.push(m),d[_].percentages.push(y)}}}else console.log("Fail to get native animation-clip resource.");var A={},b={};for(var _ in d){A[_]={tx:[],ty:[],tz:[],sx:[],sy:[],sz:[],rx:[],ry:[],rz:[],rw:[]};var w=d[_].transforms.length;for(r=0;r<w;r++){m=d[_].transforms[r],y=d[_].percentages[r];for(var E in y)null!==y[E]&&A[_][E].push({value:m[E],percentage:y[E]})}}for(var _ in A){b[_]={tx:null,ty:null,tz:null,sx:null,sy:null,sz:null,rx:null,ry:null,rz:null,rw:null,use_quaternion:!0};var T=A[_];for(var E in T)if(T[E].length&&["tx","ty","tz","sx","sy","sz"].indexOf(E)>=0){null===b[_][E]&&(b[_][E]=0);for(var S=0;S<T[E].length;S++){var C=T[E][S];b[_][E]+=C.value*C.percentage}}if(T.rx.length&&T.rx.length===T.ry.length&&T.rx.length===T.rz.length&&T.rx.length===T.rw.length)if(2!==T.rx.length){for(var x=new I.default,D=0;D<T.rx.length;D++){var O=T.rx[D].percentage,P=I.default.createFromNumber(T.rx[D].value,T.ry[D].value,T.rz[D].value,T.rw[D].value);x.add(x.dot(P)<0?P.scale(-O):P.scale(O),x)}x.scale(1/Math.sqrt(x.dot(x)),x),b[_].rx=x.x,b[_].ry=x.y,b[_].rz=x.z,b[_].rw=x.w}else{var R=new a.default;R.setValue(T.rx[0].value,T.ry[0].value,T.rz[0].value,T.rw[0].value);var k=new a.default;k.setValue(T.rx[1].value,T.ry[1].value,T.rz[1].value,T.rw[1].value),R.slerp(k,T.rx[1].percentage/(T.rx[0].percentage+T.rx[1].percentage),R),b[_].rx=R.x,b[_].ry=R.y,b[_].rz=R.z,b[_].rw=R.w}}for(var _ in b)this.SyncValuesToEntity3D(b[_],d[_].entity)}else console.log("AnimationClipModel not found")}}},e.prototype.updateAnimators=function(e){for(var t=0;t<e.length;t++)this.updateAnimator(e[t])},e.prototype.updateAnimatorControllers=function(e,t){for(var n=0;n<t;n++)this.updateAnimatorController(e[n])},e.prototype.updateSkinningMatrix=function(e){if(e)for(var t=this._modelMap[e.getBoneInverseModelId()],n=0;n<e.getBoneNum();n++){var i=e.getBoneIndices(n),r=e.getBoneEntity(n),a=o.default.createFromTypedArray(r.float32View,r.worldMatrixOffset),s=t.inverseMatrixs[i];a.multiply(s,e.outputBoneInverseMatrixs[n])}},e.prototype.updateSkinningMatrices=function(e){for(var t=0;t<e.length;t++)this.updateSkinningMatrix(e[t])},e.prototype.bindEntitiesToBones=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=t[n],o=this.entity2mock.get(i),a=this.entity2mock.get(r);o&&a&&(o._linkBoneEntity=a,a._linkEntity=o)}},e.prototype.unbindEntitiesFromBones=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=this.entity2mock.get(n);i&&i._linkBoneEntity&&(i._linkBoneEntity._linkEntity=null,i._linkEntity=null)}},e.prototype.bindEntitiesToBonesWithIndex=function(e,t,n,i){for(var r=0;r<e.length;r++){var o=e[r],a=t[r],s=this.entity2mock.get(o),c=this.entity2mock.get(a);s&&c&&(s._linkBoneEntity=c,c._linkEntity=s)}},e.prototype.unbindEntitiesFromBonesWithIndex=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=this.entity2mock.get(i);r&&r._linkBoneEntity&&(r._linkBoneEntity._linkEntity=null,r._linkEntity=null)}},e.prototype._getEntitySystem=function(){return this._entitySystem||(this._entitySystem=new u.default(this)),this._entitySystem},e.prototype.frameStart=function(){},e.prototype.setEntityName=function(e,t){},e}();t.LogicManager=P},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.root3D=null,this.root3Ds=[],this.root2Ds=[],this._manager=e}return e.prototype.refreshWorldTransform=function(){this.root3D._computeWorldMatrixRecursive(!0),this.root2Ds.forEach((function(e){e._computeWorldMatrixRecursive(!0)}))},e.prototype.setEntityRoot3D=function(e){this.root3D=e,this.root3Ds.push(e)},e.prototype.setEntityRoot2D=function(e){this.root2Ds.push(e)},e.prototype.entityAddChild=function(e,t){e.addChild(t)},e.prototype.entityAddChildAtIndex=function(e,t,n){e.addChildAtIndex(t,n)},e.prototype.entityRemoveFromParent=function(e){e.parent&&e.parent.removeChild(e)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(21)),o=i.__importDefault(n(22)),a=i.__importDefault(n(48)),s=function(e){function t(t,n,i){var o=e.call(this)||this;return o._localMatrix=r.default.IDENTITY,o._raw=t,o._rawU32=n,o._offset=i,o.localRotationOffset=o._offset+a.default.OFFSET_ROTATION,o.localPositionOffset=o._offset+a.default.OFFSET_POSITION,o.localScaleOffset=o._offset+a.default.OFFSET_SCALE,o.worldMatrixOffset=o._offset+a.default.OFFSET_WORLDMATRIX,o}return i.__extends(t,e),Object.defineProperty(t.prototype,"localPosition",{get:function(){return this._localPosition||(this._localPosition=o.default.createFromTypedArray(this._raw,this.localPositionOffset)),this._localPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localRotation",{get:function(){return this._raw[this.localRotationOffset]},set:function(e){this._raw[this.localRotationOffset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScale",{get:function(){return this._localScale||(this._localScale=o.default.createFromTypedArray(this._raw,this.localScaleOffset)),this._localScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrix",{get:function(){return this._worldMatrix||(this._worldMatrix=r.default.createFromTypedArray(this._raw,this.worldMatrixOffset)),this._worldMatrix},enumerable:!1,configurable:!0}),t.prototype._computeWorldMatrixRecursive=function(e){var t=this._culLocalTransform(),n=e||t;if(n){var i=this.parent;i?i.worldMatrix.multiply(this._localMatrix,this.worldMatrix):this.worldMatrix._raw.set(this._localMatrix._raw,this.worldMatrix._offset)}this._isWorldMatrixDirty=!0;for(var r=0,o=this.children;r<o.length;r++){var a=o[r];a.active&&a._computeWorldMatrixRecursive(n)}},t.prototype._culLocalTransform=function(){var e=this._isLocalMatrixDirty;if(e){var t=this.localPosition,n=this.localRotation,i=this.localScale;r.default.IDENTITY.translate(t.x,t.y,this._localMatrix).rotate(n,this._localMatrix).scale(i.x,i.y,this._localMatrix),this._isLocalMatrixDirty=!1}return e},t}(i.__importDefault(n(68)).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.children=[],this.parent=null,this.components=[],this.id=0,this.active=!0,this._isLocalMatrixDirty=!1,this._isWorldMatrixDirty=!1}return e.prototype.setLocalMatrixDirty=function(){this._isLocalMatrixDirty=!0},e.prototype._computeWorldMatrixRecursive=function(e){},e.prototype.bindComponet=function(e){this.components.push(e),e.entity=this,e._onAdd()},e.prototype.unbindComponent=function(e){var t=this.components.indexOf(e);(e.entity||-1!==t)&&(this.components.splice(t,1),e.entity=null,e._onDestroy())},e.prototype.getComponent=function(e){var t=this.getAllComponents(e);return t.length?t[0]:void 0},e.prototype.getAllComponents=function(e){return this.components.filter((function(t){return t instanceof e}))||[]},e.prototype.travelChild=function(e){e(this);for(var t=0;t<this.children.length;t++)this.children[t].travelChild(e)},e.prototype.addChild=function(e){this.addChildAtIndex(e,this.children.length)},e.prototype.addChildAtIndex=function(e,t){e.parent&&e.parent.removeChild(e),-1===this.children.indexOf(e)&&(t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),e.parent=this)},e.prototype.removeChild=function(e){var t=this.children.indexOf(e);t>-1&&this.children.splice(t,1)},e.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},e.prototype.destroy=function(){for(var e=0,t=this.components;e<t.length;e++){var n=t[e];n._onDestroy(),n.entity=null}this.components=[],this.parent&&this.parent.removeChild(this),this.parent=null},e.prototype.clear=function(){for(var e=0,t=this.components;e<t.length;e++){var n=t[e];n._onDestroy(),n.entity=null}this.components=[],this.parent&&this.parent.removeChild(this),this.parent=null;for(var i=0,r=this.children;i<r.length;i++){r[i].clear()}},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(44)),o=i.__importDefault(n(61)),a=i.__importDefault(n(45)),s=i.__importDefault(n(68)),c=i.__importDefault(n(49)),l=function(e){function t(t,n,i){var o=e.call(this)||this;return o._localMatrix=r.default.IDENTITY,o._cullableComps=[],o._linkEntity=null,o._linkBoneEntity=null,o._raw=t,o._rawU32=n,o._offset=i,o.localRotationTypeOffset=o._offset+c.default.OFFSET_ROTATIONTYPE,o.localQuaternionOffset=o._offset+c.default.OFFSET_ROTATION,o.localPositionOffset=o._offset+c.default.OFFSET_POSITION,o.localScaleOffset=o._offset+c.default.OFFSET_SCALE,o.worldMatrixOffset=o._offset+c.default.OFFSET_WORLDMATRIX,o}return i.__extends(t,e),Object.defineProperty(t.prototype,"localPosition",{get:function(){return this._localPosition||(this._localPosition=a.default.createFromTypedArray(this._raw,this.localPositionOffset)),this._localPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localQuaternion",{get:function(){return this._localQuaternion||(this._localQuaternion=new o.default(this._raw,this.localQuaternionOffset)),this._localQuaternion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScale",{get:function(){return this._localScale||(this._localScale=a.default.createFromTypedArray(this._raw,this.localScaleOffset)),this._localScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrix",{get:function(){return this._worldMatrix||(this._worldMatrix=r.default.createFromTypedArray(this._raw,this.worldMatrixOffset)),this._worldMatrix},enumerable:!1,configurable:!0}),t.prototype._refreshWorldTransform=function(){var e=this.parent;e&&e._refreshWorldTransform();this._culLocalTransform();e?e.worldMatrix.multiply(this._localMatrix,this.worldMatrix):this.worldMatrix._raw.set(this._localMatrix._raw,this.worldMatrix._offset),this._isWorldMatrixDirty=!0},t.prototype._computeWorldMatrixRecursive=function(e){var t=this._culLocalTransform(),n=e||t;if(n){var i=this.parent;i?i.worldMatrix.multiply(this._localMatrix,this.worldMatrix):this.worldMatrix._raw.set(this._localMatrix._raw,this.worldMatrix._offset),this._linkEntity&&this._SyncTransform(),this._isWorldMatrixDirty=!0}for(var r=0,o=this.children;r<o.length;r++){var a=o[r];a.active&&a._computeWorldMatrixRecursive(n)}},t.prototype._culLocalTransform=function(){var e=this._isLocalMatrixDirty;if(e){if(this.isUsingEuler());else{var t=this.localPosition,n=this.localQuaternion,i=this.localScale;r.default.composeTQS(t,n,i,this._localMatrix)}this._isLocalMatrixDirty=!1}return e},t.prototype._SyncTransform=function(){var e=this.worldMatrix,t=a.default.ZERO,n=a.default.ZERO,i=r.default.IDENTITY;if(e.decomposeTransRotMatScale(t,i,n),this._linkEntity){this._linkEntity.localPosition.set(t),this._linkEntity.localScale.set(n);var s=o.default.createFromMatrix4(i);this._linkEntity.isUsingEuler()||this._linkEntity.localQuaternion.set(s),this._linkEntity._isLocalMatrixDirty=!0}},t.prototype.setUsingEuler=function(e){e?this._rawU32[this.localRotationTypeOffset]&=~c.default.DF_ROTATIONTYPE:this._rawU32[this.localRotationTypeOffset]|=c.default.DF_ROTATIONTYPE},t.prototype.isUsingEuler=function(){return 0==(this._rawU32[this.localRotationTypeOffset]&c.default.DF_ROTATIONTYPE)},t}(s.default);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(67)),o=function(e){function t(t){var n=e.call(this,t)||this;n.entitis=[];for(var i=0;i<t.entityLength;i++){var o=new r.default(t._f32view,t._u32view,i*t.objectSize);n.entitis.push(o)}return n}return i.__extends(t,e),t}(i.__importDefault(n(71)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.entitis=[]}return e.prototype.setLocalMatrixDirtyAll=function(){for(var e=0;e<this.entitis.length;e++){this.entitis.length[e].setLocalMatrixDirty()}},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(69)),o=function(e){function t(t){var n=e.call(this,t)||this;n.entitis=[];for(var i=0;i<t.entityLength;i++){var o=new r.default(t._f32view,t._u32view,i*t.objectSize);n.entitis.push(o)}return n}return i.__extends(t,e),t}(i.__importDefault(n(71)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._animationClipCount=0,this._nodeCount=0,this._animationClipModels=[],this._frameIndexs=[],this._blendWeight=[],this._entityIds={}}return e.prototype._getNeedMemorySize=function(){return 4*this.nodeCount*this.animationClipCount},Object.defineProperty(e.prototype,"animationClipCount",{get:function(){return this._animationClipCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodeCount",{get:function(){return this._nodeCount},enumerable:!1,configurable:!0}),e.prototype.getAnimationParamater=function(e){return{animationClipId:this._animationClipModels[e].id,frameIndex:this._frameIndexs[e],percentage:this._blendWeight[e]}},e.prototype.bindAnimations=function(e,t,n){this._entityIds={},this._animationClipModels=e,this._frameIndexs=new Array(e.length),this._blendWeight=new Array(e.length);var i=t.length;for(var r in t)i+=t[r].length;this._animationClipCount=e.length,this._nodeCount=i;var o,a=0;for(r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)t[r][s]&&(this._entityIds[a+s]=t[r][s],o||(o=t[r][s]));a+=t[r].length}null!=n&&n.id?this.culEntity3DTreeNode=n:o&&(this.culEntity3DTreeNode=o)},e.prototype.setClipParams=function(e,t,n){this._frameIndexs[e]=t,this._blendWeight[e]=n},e.prototype.getEntity=function(e){return this._entityIds[e]},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1).__importDefault(n(44)),r=function(){function e(){this._boneInverseModelId=0,this._boneNum=0}return e.prototype._getNeedMemorySize=function(){return 18*this._boneNum*4},e.prototype.setBoneMatrix=function(e,t,n,r){if(n.length===t&&r.length===t){this._boneInverseModelId=e.id,this._boneNum=t,this.boneIndices=n,this.boneEntities=r;var o=new ArrayBuffer(this._getNeedMemorySize());this.outputBoneInverseMatrixs=new Array(t);for(var a=0;a<t;a++){var s=new Float32Array(o,2*t*4+64*a,16);this.outputBoneInverseMatrixs[a]=i.default.createFromTypedArray(s)}this._boneOffsetMatrices=new Float32Array(o,2*this._boneNum*4,16*this._boneNum)}else console.warn("setBoneMatrix Error")},e.prototype.getBoneNum=function(){return this._boneNum},e.prototype.getBoneInverseModelId=function(){return this._boneInverseModelId},e.prototype.getBoneIndices=function(e){return this.boneIndices[e]},e.prototype.getBoneEntity=function(e){return this.boneEntities[e]},e.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.entity=null,this._componetModel=e}return e.prototype.destroy=function(){if(this.entity){var e=this.entity,t=e.components.indexOf(this);t>-1&&(e.components.splice(t,1),this._onDestroy())}},e.prototype._onAdd=function(){this.entity._cullableComps.push(this)},e.prototype._onDestroy=function(){if(this.entity){var e=this.entity._cullableComps,t=e.indexOf(this);-1!==t&&e.splice(t,1)}},Object.defineProperty(e.prototype,"active",{get:function(){return this._componetModel.getActive()},set:function(e){this._componetModel.setActive(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cullMask",{get:function(){return this._componetModel.getCullMask()},set:function(e){this._componetModel.setCullMask(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundingBallCenter",{get:function(){return this._componetModel.getBoundingBallCenter()},set:function(e){this._componetModel.setBoundingBallCenter(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundingBallRadius",{get:function(){return this._componetModel.getBoundingBallRadius()},set:function(e){this._componetModel.setBoundingBallRadius(e)},enumerable:!1,configurable:!0}),e.prototype.bindEntity=function(e){this.entity=e,this.entity.bindComponet(this)},e.prototype.unbindEntity=function(){this.entity.unbindComponent(this)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(44)),o=i.__importDefault(n(45)),a=i.__importDefault(n(61)),s=function(e,t){Object.defineProperty(e,t,{get:function(){return this._phys3D[t]},set:function(){}})};function c(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n}var l=function(){function e(e,t,n){this._reverseBindMap=new WeakMap,this._bindMap=new WeakMap,this._colliderToEntityMap=new WeakMap,this._ccReverseBindMap=new WeakMap,this._ccbindMap=new WeakMap,this._colliderSet=new Set,this._phys3D=e,this._ga=t,this._isNative=n,this._isNative||(this._mock=t._getMockAccelerateWorker())}return e.prototype.clear=function(){this._reverseBindMap=new WeakMap,this._bindMap=new WeakMap,this._colliderToEntityMap=new WeakMap,this._ccReverseBindMap=new WeakMap,this._ccbindMap=new WeakMap,this._colliderSet.clear()},e.prototype.bindRigidbodyToEntity=function(e,t,n){if(this._isNative)e.AttachToEntity(t._nativePool._nativeObj,t._nativeId);else{var i=this._mock.entity2mock.get(t);this._bindMap.set(e,i),this._reverseBindMap.set(i,e)}},e.prototype.bindColliderToEntity=function(e,t){if(!this._isNative){var n=this._mock.entity2mock.get(t);this._colliderToEntityMap.set(e,n),this._colliderSet.add(e)}},e.prototype.bindCCToEntity=function(e,t){if(this._isNative)e.AttachToEntity(t._nativePool._nativeObj,t._nativeId);else{var n=this._mock.entity2mock.get(t);this._ccbindMap.set(e,n),this._ccReverseBindMap.set(n,e),this._alignCCWithEntity(e,n)}},e.prototype.unbindCCT=function(e){if(!this._isNative){var t=this._ccbindMap.get(e);t&&this._ccReverseBindMap.delete(t),this._ccbindMap.delete(e)}},e.prototype._alignCCWithEntity=function(e,t){var n=t.worldMatrix,i=o.default.ZERO,s=o.default.ZERO,c=r.default.IDENTITY;n.decomposeTransRotMatScale(i,c,s);a.default.createFromMatrix4(c);e.position=new this._phys3D.RawVec3f(i.x,i.y,i.z)},e.prototype._alignRigidbodyWithEntity=function(e,t){var n=t.worldMatrix,i=o.default.ZERO,s=o.default.ZERO,c=r.default.IDENTITY;n.decomposeTransRotMatScale(i,c,s);var l=a.default.createFromMatrix4(c);e.position=new this._phys3D.RawVec3f(i.x,i.y,i.z),e.rotation=new this._phys3D.RawQuaternion(l.x,l.y,l.z,l.w)},e.prototype.alignRigidbodyWithEntity=function(e,t){var n=this._mock.entity2mock.get(t);this._alignRigidbodyWithEntity(e,n)},e.prototype.unbindRigidbody=function(e){if(this._isNative)e.Detach();else{var t=this._bindMap.get(e);t&&this._reverseBindMap.delete(t),this._bindMap.delete(e)}},e.prototype.unbindCollider=function(e){this._isNative||(this._colliderSet.delete(e),this._colliderToEntityMap.delete(e))},e.prototype._syncForward=function(){this.syncEntityScaleToPhysic(),this.recursivelySyncForwardEntity(this._mock._getEntitySystem().root3D)},e.prototype.syncEntityScaleToPhysic=function(){var e=this;this._colliderSet.forEach((function(t){var n=e._colliderToEntityMap.get(t);if(n._isWorldMatrixDirty){var i=n.worldMatrix,a=o.default.ZERO,s=o.default.ZERO,l=r.default.IDENTITY;i.decomposeTransRotMatScale(a,l,s);var u=t.scale;c(u.x,s.x)&&c(u.y,s.y)&&c(u.z,s.z)||(t.scale=new e._phys3D.RawVec3f(s.x,s.y,s.z))}}))},e.prototype.recursivelySyncForwardEntity=function(e){var t=this;if(e._isWorldMatrixDirty){var n=this._ccReverseBindMap.get(e),i=this._reverseBindMap.get(e);n&&this._alignCCWithEntity(n,e),i&&this._alignRigidbodyWithEntity(i,e),e._isWorldMatrixDirty=!1}e.children.forEach((function(e){t.recursivelySyncForwardEntity(e)}))},e.prototype._syncBack=function(){this.recursivelySyncBackEntity(this._mock._getEntitySystem().root3D,!1)},e.prototype.recursivelySyncCCBackEntity=function(e,t){var n=this;if(void 0===t&&(t=!1),!this._isNative){var i=this._mock.entity2mock.get(e),s=this._ccReverseBindMap.get(i);if(s){var c=s.position,l=(s.center,i.parent?i.parent.worldMatrix:r.default.IDENTITY),u=o.default.createFromNumber(c.x,c.y,c.z),d=i.localQuaternion,h=r.default.composeTQS(u,d,i.localScale),p=l.inverse().multiply(h),f=r.default.IDENTITY;p.decomposeTransRotMatScale(i.localPosition,f,o.default.ONE);var g=a.default.createFromMatrix4(f);i.localQuaternion.set(g),i.worldMatrix.set(h),r.default.composeTQS(i.localPosition,i.localQuaternion,i.localScale,i._localMatrix),t=!0}else if(t){l=i.parent?i.parent.worldMatrix:r.default.IDENTITY;i.worldMatrix.set(l.multiply(i._localMatrix))}i.children.forEach((function(e){n.recursivelySyncBackEntity(e,t)}))}},e.prototype.recursivelySyncBackEntity=function(e,t){var n=this,i=this._reverseBindMap.get(e);if(i){var s=e.parent?e.parent.worldMatrix:r.default.IDENTITY,c=o.default.createFromNumber(i.position.x,i.position.y,i.position.z),l=a.default.createFromNumber(i.rotation.x,i.rotation.y,i.rotation.z,i.rotation.w),u=r.default.composeTQS(c,l,e.localScale),d=s.inverse().multiply(u),h=r.default.IDENTITY;d.decomposeTransRotMatScale(e.localPosition,h,o.default.ONE);var p=a.default.createFromMatrix4(h);e.localQuaternion.set(p),e.worldMatrix.set(u),r.default.composeTQS(e.localPosition,e.localQuaternion,e.localScale,e._localMatrix),t=!0}else if(t){s=e.parent?e.parent.worldMatrix:r.default.IDENTITY;e.worldMatrix.set(s.multiply(e._localMatrix))}e._isWorldMatrixDirty=!1,e._isLocalMatrixDirty=!1,e.children.forEach((function(e){n.recursivelySyncBackEntity(e,t)}))},Object.defineProperty(e.prototype,"PhysSystem",{get:function(){var e=this;return function(t){var n;return n=t?new e._phys3D.PhysSystem(t):new e._phys3D.PhysSystem,e._isNative||(n._Simulate=n.Simulate,n.Simulate=function(t){e._syncForward(),n._Simulate(t),e._syncBack()}),n}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DynamicRigidbody",{get:function(){var e=this;return function(t){var n=new e._phys3D.DynamicRigidbody(t);return e._isNative||(n._isAttached=n.isAttached,n.isAttached=function(){return e._bindMap.has(n)}),n}},enumerable:!1,configurable:!0}),i.__decorate([s],e.prototype,"RawVec3f",void 0),i.__decorate([s],e.prototype,"RawVec2f",void 0),i.__decorate([s],e.prototype,"PhysMesh",void 0),i.__decorate([s],e.prototype,"Collider",void 0),i.__decorate([s],e.prototype,"MeshCollider",void 0),i.__decorate([s],e.prototype,"CombineMode",void 0),i.__decorate([s],e.prototype,"Material",void 0),i.__decorate([s],e.prototype,"CapsuleCollider",void 0),i.__decorate([s],e.prototype,"Joint",void 0),i.__decorate([s],e.prototype,"ContactPoint",void 0),i.__decorate([s],e.prototype,"Collision",void 0),i.__decorate([s],e.prototype,"SphereCollider",void 0),i.__decorate([s],e.prototype,"Bounds",void 0),i.__decorate([s],e.prototype,"StaticRigidbody",void 0),i.__decorate([s],e.prototype,"RawQuaternion",void 0),i.__decorate([s],e.prototype,"BoxCollider",void 0),i.__decorate([s],e.prototype,"RaycastHit",void 0),i.__decorate([s],e.prototype,"CharacterController",void 0),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1).__importDefault(n(78));t.default=function(){if(i)return i;var e=r.default("phye");return e&&e.Phys3D&&(i=e),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pid=void 0;var i=null,r=null;t.pid=0;var o=!1;function a(e){var t=r.readFileSync(e),n=i("crypto").createHash("md5");return n.update(t),n.digest("hex")}function s(e,t){return!!t&&function(e,t){var n=window.Buffer.from(t,"base64"),r=i("crypto").createVerify("RSA-SHA1");return r.update(e),!!r.verify("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCIfocuCk0FdG9zN9C6GqhJRVNG\n1FbJa8aUAZDawoCcwowIc/zMHRCl3srHUOQi3fjZpSObiVbvLidlWDSOw/rdBxbU\nG/4BqJFuIUQziCnqdRiCyYV2w9Z29/qNcKbr1gxmqXVgo0WRbkKlIFKGvSXFiVM3\nn49RQm2mgWsvqXn2vQIDAQAB\n-----END PUBLIC KEY-----",n)}(a(e),t)}function c(e){if(!i)return null;var t,n=!1,r=window.__devtoolsConfig||window.top.__devtoolsConfig||{};if(r.__runtimeLibConfigPath&&(t=r.__runtimeLibConfigPath,n=r.appConfig.isDev),!t)throw new Error("cannot find runtimeLibConfigPath");var o=i(t);if(!o)throw new Error("connot find lib config");if(!Object.keys(o).includes(e))throw new Error("the mod cannot be require");var c=o[e],l=c.path,u=c.signature,d=c.distMd5;if(!n){var h=!1;if(u?h=s(l,u):d&&(h=function(e,t){return!!t&&a(e)===t}(l,d)),!h)throw new Error("node addon is not safe!")}return i(l)}t.default=function(e){return console.log("require module: "+e),function(){if(!o&&(o=!0,window.__global&&window.__global.require))try{if(i=window.__global.require,delete window.__global.require,!(r=i("fs"))||!r.readFileSync)throw new Error;t.pid=i("process").pid}catch(e){r=null,i=null}}(),c(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nativeValue2Native=void 0,t.nativeValue2Native=new WeakMap;var i=function(e){this._native=e,this.data=this._native.data,t.nativeValue2Native.set(this,e)};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=i.__importDefault(n(81)),o=i.__importDefault(n(87)),a=i.__importStar(n(89)),s=i.__importDefault(n(82)),c=i.__importDefault(n(88)),l=i.__importDefault(n(83)),u=i.__importStar(n(84)),d=i.__importDefault(n(85)),h=i.__importDefault(n(86)),p=function(){function e(e,t){this._native=e,t.isRenderNative?(this.createRenderDraw=this.createRenderDrawAccelerate.bind(this),this.createCommandBuffer=this.createCommandBufferAccelerate.bind(this)):(this.createRenderDraw=this.createRenderDrawLocal.bind(this),this.createCommandBuffer=this.createCommandBufferLocal.bind(this))}return e.prototype.createCommandBufferAccelerate=function(e,t){return new o.default(this._native,e,t)},e.prototype.createCommandBufferLocal=function(){var e=this._native.createCommandBuffer();return new r.default(e)},e.prototype.createRect=function(e,t,n,i){var r=this._native.createRect(e,t,n,i);return new a.default(r)},e.prototype.createRenderDrawLocal=function(){var e=this._native.createRenderDraw();return new s.default(e)},e.prototype.createRenderDrawAccelerate=function(){var e=this._native.createRenderDraw();return new c.default(e)},e.prototype.createVertexLayout=function(e){var t=this._native.createVertexLayout(JSON.stringify(e));return new u.default(t)},e.prototype.createRenderView=function(e,t,n,i){var r=e||0,o=this._native.createView(r,t,a.rect2Native.get(n),a.rect2Native.get(i));return new l.default(o)},e.prototype.createBatchableVertexBuffer=function(e,t){var n=this._native.createBatchableVertexBuffer(e,u.vertexLayout2Native.get(t));return new d.default(n)},e.prototype.createBatchableIndexBuffer=function(e){var t=this._native.createBatchableIndexBuffer(e);return new h.default(t)},e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commandBuffer2Native=void 0;var i=n(82);t.commandBuffer2Native=new WeakMap;var r=function(){function e(e){this._native=e,t.commandBuffer2Native.set(this,e)}return e.prototype.putRenderDraw=function(e){this._native.putRenderDraw(i.renderDraw2Native.get(e))},e.prototype.batchPutRenderDraw=function(e,t){t=void 0!==t?t:e.length;for(var n=0;n<t;n++){var r=e[n];this._native.putRenderDraw(i.renderDraw2Native.get(r))}},e.prototype.putSubCommandBuffer=function(e){this._native.putSubCommandBuffer(e._native)},e.prototype.reset=function(){this._native.reset()},e.prototype.execute=function(){this._native.execute()},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderDraw2Native=void 0;var i=n(1),r=n(79),o=i.__importDefault(n(18)),a=n(83),s=n(84),c=n(85),l=n(86);t.renderDraw2Native=new WeakMap;var u={raster:o.default.WRITE_SET(wgfx.EnumIndexType.UINT16,o.default.INDEX_TYPE_MASK,o.default.INDEX_TYPE_SHIFT)|o.default.WRITE_SET(wgfx.EnumCullMode.BACK,o.default.CULL_MODE_MASK,o.default.CULL_MODE_SHIFT)|o.default.WRITE_SET(wgfx.EnumPrimitiveType.TRIANGLES,o.default.PRIMITIVE_TYPE_MASK,o.default.PRIMITIVE_TYPE_SHIFT)|o.default.WRITE_SET(wgfx.EnumFaceWinding.CW,o.default.FACE_WINDING_MASK,o.default.FACE_WINDING_SHIFT),stencilDepth:o.default.WRITE_SET(1,o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,o.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT)|o.default.WRITE_SET(wgfx.EnumCompareFunc.LESS_EQUAL,o.default.DEPTH_COMPARE_FUNC_MASK,o.default.DEPTH_COMPARE_FUNC_SHIFT)},d=function(){function e(e){this._native=e,t.renderDraw2Native.set(this,e),Object.assign(this._native,u)}return Object.defineProperty(e.prototype,"renderView",{set:function(e){this._native.view=a.renderView2Native.get(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shader",{set:function(e){this._native.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexLayout",{set:function(e){this._native.vertexLayout=s.vertexLayout2Native.get(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{set:function(e){this._native.indexBuffer=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffers",{set:function(e){this._native.vertexBuffers=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativeValues",{set:function(e){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n];t.push(r.nativeValue2Native.get(o))}this._native.nativeValues=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"images",{set:function(e){this._native.images=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseElement",{set:function(e){this._native.baseElement=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numElements",{set:function(e){this._native.numElements=e},enumerable:!1,configurable:!0}),e.prototype.applyUpdate=function(){this._native.applyUpdate()},e.prototype.setBlendOn=function(e){this._native.blend&=~o.default.BLEND_ENABLE_MASK,e&&(this._native.blend|=o.default.WRITE_SET(1,o.default.BLEND_ENABLE_MASK,o.default.BLEND_ENABLE_SHIFT))},e.prototype.setBlendMode=function(e,t,n){this.setBlendModeSeparate(e,e,t,t,n,n)},e.prototype.setBlendModeSeparate=function(e,t,n,i,r,a){this._native.blend&=~(o.default.BLEND_OP_RGB_MASK|o.default.BLEND_OP_ALPHA_MASK|o.default.BLEND_SRC_FACTOR_RGB_MASK|o.default.BLEND_SRC_FACTOR_ALPHA_MASK|o.default.BLEND_DST_FACTOR_RGB_MASK|o.default.BLEND_DST_FACTOR_ALPHA_MASK),this._native.blend|=o.default.WRITE_SET(r,o.default.BLEND_OP_RGB_MASK,o.default.BLEND_OP_RGB_SHIFT)|o.default.WRITE_SET(a,o.default.BLEND_OP_ALPHA_MASK,o.default.BLEND_OP_ALPHA_SHIFT)|o.default.WRITE_SET(e,o.default.BLEND_SRC_FACTOR_RGB_MASK,o.default.BLEND_SRC_FACTOR_RGB_SHIFT)|o.default.WRITE_SET(t,o.default.BLEND_SRC_FACTOR_ALPHA_MASK,o.default.BLEND_SRC_FACTOR_ALPHA_SHIFT)|o.default.WRITE_SET(n,o.default.BLEND_DST_FACTOR_RGB_MASK,o.default.BLEND_DST_FACTOR_RGB_SHIFT)|o.default.WRITE_SET(i,o.default.BLEND_DST_FACTOR_ALPHA_MASK,o.default.BLEND_DST_FACTOR_ALPHA_SHIFT)},e.prototype.setColorMask=function(e){this._native.blend&=~o.default.COLOR_WRITE_MASK,this._native.blend|=o.default.WRITE_SET(e,o.default.COLOR_WRITE_MASK,o.default.COLOR_WRITE_SHIFT)},e.prototype.setDepthWriteOn=function(e){this._native.stencilDepth&=~o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,e&&(this._native.stencilDepth|=o.default.WRITE_SET(1,o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,o.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT))},e.prototype.setDepthTest=function(e){this._native.stencilDepth&=~o.default.DEPTH_COMPARE_FUNC_MASK,this._native.stencilDepth|=o.default.WRITE_SET(e,o.default.DEPTH_COMPARE_FUNC_MASK,o.default.DEPTH_COMPARE_FUNC_SHIFT)},e.prototype.setStencilTestOn=function(e){this._native.stencilDepth&=~o.default.STENCIL_ENABLE_FUNC_MASK,e&&(this._native.stencilDepth|=o.default.WRITE_SET(1,o.default.STENCIL_ENABLE_FUNC_MASK,o.default.STENCIL_ENABLE_FUNC_SHIFT))},e.prototype.setStencilWriteMask=function(e){this._native.stencilDepth&=~o.default.STENCIL_WRITE_MASK,this._native.stencilDepth|=o.default.WRITE_SET(e,o.default.STENCIL_WRITE_MASK,o.default.STENCIL_WRITE_SHIFT)},e.prototype.setStencilReadMask=function(e){this._native.stencilDepth&=~o.default.STENCIL_READ_MASK,this._native.stencilDepth|=o.default.WRITE_SET(e,o.default.STENCIL_READ_MASK,o.default.STENCIL_READ_SHIFT)},e.prototype.setStencilRef=function(e){this._native.stencilDepth&=~o.default.STENCIL_REF_MASK,this._native.stencilDepth|=o.default.WRITE_SET(e,o.default.STENCIL_REF_MASK,o.default.STENCIL_REF_SHIFT)},e.prototype.setStencilTestMode=function(e,t,n,i){var r=o.default.WRITE_SET(e,o.default.STENCIL_FRONT_COMPARE_FUN_MASK,o.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)|o.default.WRITE_SET(t,o.default.STENCIL_FRONT_FAIL_OP_MASK,o.default.STENCIL_FRONT_FAIL_OP_SHIFT)|o.default.WRITE_SET(n,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)|o.default.WRITE_SET(i,o.default.STENCIL_FRONT_PASS_OP_MASK,o.default.STENCIL_FRONT_PASS_OP_SHIFT);this._native.stencilOpTest=r+(r<<16>>>0)},e.prototype.setStencilTestModeSeparate=function(e,t,n,i,r,a,s,c){this._native.stencilOpTest=0,this._native.stencilOpTest=o.default.WRITE_SET(e,o.default.STENCIL_FRONT_COMPARE_FUN_MASK,o.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)|o.default.WRITE_SET(t,o.default.STENCIL_FRONT_FAIL_OP_MASK,o.default.STENCIL_FRONT_FAIL_OP_SHIFT)|o.default.WRITE_SET(n,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)|o.default.WRITE_SET(i,o.default.STENCIL_FRONT_PASS_OP_MASK,o.default.STENCIL_FRONT_PASS_OP_SHIFT)|o.default.WRITE_SET_SAFE(r,o.default.STENCIL_BACK_COMPARE_FUN_MASK,o.default.STENCIL_BACK_COMPARE_FUN_SHIFT)|o.default.WRITE_SET(a,o.default.STENCIL_BACK_FAIL_OP_MASK,o.default.STENCIL_BACK_FAIL_OP_SHIFT)|o.default.WRITE_SET(s,o.default.STENCIL_BACK_DEPTH_FAIL_OP_MASK,o.default.STENCIL_BACK_DEPTH_FAIL_OP_SHIFT)|o.default.WRITE_SET(c,o.default.STENCIL_BACK_PASS_OP_MASK,o.default.STENCIL_BACK_PASS_OP_SHIFT)},e.prototype.setCullMode=function(e){this._native.raster&=~o.default.CULL_MODE_MASK,this._native.raster|=o.default.WRITE_SET(e,o.default.CULL_MODE_MASK,o.default.CULL_MODE_SHIFT)},e.prototype.setFaceWinding=function(e){this._native.raster&=~o.default.FACE_WINDING_MASK,this._native.raster|=o.default.WRITE_SET(e,o.default.FACE_WINDING_MASK,o.default.FACE_WINDING_SHIFT)},e.prototype.setPrimitiveType=function(e){this._native.raster&=~o.default.PRIMITIVE_TYPE_MASK,this._native.raster|=o.default.WRITE_SET(e,o.default.PRIMITIVE_TYPE_MASK,o.default.PRIMITIVE_TYPE_SHIFT)},e.prototype.setIndexType=function(e){this._native.raster&=~o.default.INDEX_TYPE_MASK,this._native.raster|=o.default.WRITE_SET(e,o.default.INDEX_TYPE_MASK,o.default.INDEX_TYPE_SHIFT)},e.prototype.setPassDepthFormat=function(e){this._native.raster&=~o.default.DEPTH_FORMAT_MASK,this._native.raster|=o.default.WRITE_SET(e,o.default.DEPTH_FORMAT_MASK,o.default.DEPTH_FORMAT_SHIFT)},e.prototype.setPassColorFormat=function(e,t){this._native.raster&=~(o.default.COLOR_ATTACHMENT_COUNT_MASK|o.default.COLOR_FORMAT_MASK),this._native.raster|=o.default.WRITE_SET(e,o.default.COLOR_FORMAT_MASK,o.default.COLOR_FORMAT_SHIFT)|o.default.WRITE_SET(t,o.default.COLOR_ATTACHMENT_COUNT_MASK,o.default.COLOR_ATTACHMENT_COUNT_SHIFT)},e.prototype.setUnBatchable=function(){this._native.batchable=!1,this._native.renderDataDirty=!1},e.prototype.setBatchable=function(e,t,n){this._native.batchable=!0,this._native.renderDataDirty=!0,this._native.vertexBuffers=[c.batchableVertexBuffer2Native.get(e)],this._native.indexBuffer=l.batchableIndexBuffer2Native.get(t),this._native.worldTransform=r.nativeValue2Native.get(n)},e.prototype.setBatchableRenderDataDirty=function(){this._native.renderDataDirty=!0},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderView2Native=void 0,t.renderView2Native=new WeakMap;var i=function(e){this._native=e,t.renderView2Native.set(this,e)};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertexLayout2Native=void 0,t.vertexLayout2Native=new WeakMap;var i=function(e){this._native=e,t.vertexLayout2Native.set(this,e)};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchableVertexBuffer2Native=void 0,t.batchableVertexBuffer2Native=new WeakMap;var i=function(e){this._native=e,this.data=e.data,t.batchableVertexBuffer2Native.set(this,e)};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchableIndexBuffer2Native=void 0,t.batchableIndexBuffer2Native=new WeakMap;var i=function(e){this._native=e,this.data=e.data,t.batchableIndexBuffer2Native.set(this,e)};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(88);!function(e){e[e.CommandRenderDraw=1]="CommandRenderDraw",e[e.CommandSubBuffer=2]="CommandSubBuffer"}(i||(i={}));var o=function(){function e(e,t,n){if(this._bufferSize=0,this._renderer=e,t&&0!=t||n&&0!=n){var i=t||0,r=n||0;this._initCommandBuffer(4*(2*i+2*r))}else this._initCommandBuffer(1024)}return e.prototype.batchPutRenderDraw=function(e,t){var n=2*(t=void 0!==t?t:e.length)*4;this._checkSize(n);for(var o=this._u32view[0]/4+1,a=0;a<t;a++){var s=e[a];this._u32view[o]=i.CommandRenderDraw,this._u32view[o+1]=r.renderDraw2Native.get(s).id,o+=2}for(var c=0,l=e;c<l.length;c++)s=l[c];this.setCommandSize(this._u32view[0]+n)},e.prototype.putSubCommandBuffer=function(e){this._checkSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=i.CommandSubBuffer,this._u32view[t+1]=e._native.id,this.setCommandSize(this._u32view[0]+8)},e.prototype.reset=function(){this.setCommandSize(0)},e.prototype.execute=function(){this._native.execute()},e.prototype._initCommandBuffer=function(e){this._native=this._renderer.createCommandBuffer(e),this._u32view=new Uint32Array(this._native.data,0,this._native.data.byteLength/4),this._bufferSize=e},e.prototype._extendCommandBuffer=function(e){this._native.extend(e),this._u32view=new Uint32Array(this._native.data,0,this._native.data.byteLength/4),this._bufferSize=e},e.prototype._checkSize=function(e){if(4+this._u32view[0]+e>this._bufferSize){var t=2*(4+this._u32view[0]+e);this._extendCommandBuffer(t)}},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderDraw2Native=void 0;var i=n(1),r=n(79),o=i.__importDefault(n(18)),a=n(83),s=n(84),c=n(85),l=n(86);t.renderDraw2Native=new WeakMap;var u=o.default.WRITE_SET(wgfx.EnumIndexType.UINT16,o.default.INDEX_TYPE_MASK,o.default.INDEX_TYPE_SHIFT)|o.default.WRITE_SET(wgfx.EnumCullMode.BACK,o.default.CULL_MODE_MASK,o.default.CULL_MODE_SHIFT)|o.default.WRITE_SET(wgfx.EnumPrimitiveType.TRIANGLES,o.default.PRIMITIVE_TYPE_MASK,o.default.PRIMITIVE_TYPE_SHIFT)|o.default.WRITE_SET(wgfx.EnumFaceWinding.CW,o.default.FACE_WINDING_MASK,o.default.FACE_WINDING_SHIFT),d=o.default.WRITE_SET(1,o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,o.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT)|o.default.WRITE_SET(wgfx.EnumCompareFunc.LESS_EQUAL,o.default.DEPTH_COMPARE_FUNC_MASK,o.default.DEPTH_COMPARE_FUNC_SHIFT),h=new ArrayBuffer(200),p=new Uint32Array(h);p[8]=u,p[7]=d;var f=function(){function e(e){this._native=e,t.renderDraw2Native.set(this,e),this._u8view=new Uint8Array(this._native.data),this._u32View=new Uint32Array(this._native.data),this.clear()}return Object.defineProperty(e.prototype,"renderView",{set:function(e){this._u32View[0]=a.renderView2Native.get(e).id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shader",{set:function(e){this._u32View[2]=e.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexLayout",{set:function(e){this._u32View[3]=s.vertexLayout2Native.get(e).id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{set:function(e){this._u32View[9]=e.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffers",{set:function(e){this._u32View.fill(0,10,14);for(var t=0;t<e.length;t++)this._u32View[10+t]=e[t].id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativeValues",{set:function(e){this._u32View.fill(0,14,30);for(var t=0;t<e.length;t++)this._u32View[14+t]=r.nativeValue2Native.get(e[t]).id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"images",{set:function(e){this._u32View.fill(0,30,46);for(var t=0;t<e.length;t++)this._u32View[30+t]=e[t].id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseElement",{set:function(e){this._u32View[46]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numElements",{set:function(e){this._u32View[47]=e},enumerable:!1,configurable:!0}),e.prototype.applyUpdate=function(){},e.prototype.clear=function(){this._u32View.set(p)},e.prototype.setBlendOn=function(e){this._u32View[4]&=~o.default.BLEND_ENABLE_MASK,e&&(this._u32View[4]|=o.default.WRITE_SET(1,o.default.BLEND_ENABLE_MASK,o.default.BLEND_ENABLE_SHIFT))},e.prototype.setBlendMode=function(e,t,n){this.setBlendModeSeparate(e,e,t,t,n,n)},e.prototype.setBlendModeSeparate=function(e,t,n,i,r,a){this._u32View[4]&=~(o.default.BLEND_OP_RGB_MASK|o.default.BLEND_OP_ALPHA_MASK|o.default.BLEND_SRC_FACTOR_RGB_MASK|o.default.BLEND_SRC_FACTOR_ALPHA_MASK|o.default.BLEND_DST_FACTOR_RGB_MASK|o.default.BLEND_DST_FACTOR_ALPHA_MASK),this._u32View[4]|=o.default.WRITE_SET(r,o.default.BLEND_OP_RGB_MASK,o.default.BLEND_OP_RGB_SHIFT)|o.default.WRITE_SET(a,o.default.BLEND_OP_ALPHA_MASK,o.default.BLEND_OP_ALPHA_SHIFT)|o.default.WRITE_SET(e,o.default.BLEND_SRC_FACTOR_RGB_MASK,o.default.BLEND_SRC_FACTOR_RGB_SHIFT)|o.default.WRITE_SET(t,o.default.BLEND_SRC_FACTOR_ALPHA_MASK,o.default.BLEND_SRC_FACTOR_ALPHA_SHIFT)|o.default.WRITE_SET(n,o.default.BLEND_DST_FACTOR_RGB_MASK,o.default.BLEND_DST_FACTOR_RGB_SHIFT)|o.default.WRITE_SET(i,o.default.BLEND_DST_FACTOR_ALPHA_MASK,o.default.BLEND_DST_FACTOR_ALPHA_SHIFT)},e.prototype.setColorMask=function(e){this._u32View[4]&=~o.default.COLOR_WRITE_MASK,this._u32View[4]|=o.default.WRITE_SET(e,o.default.COLOR_WRITE_MASK,o.default.COLOR_WRITE_SHIFT)},e.prototype.setDepthWriteOn=function(e){this._u32View[7]&=~o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,e&&(this._u32View[7]|=o.default.WRITE_SET(1,o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,o.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT))},e.prototype.setDepthTest=function(e){this._u32View[7]&=~o.default.DEPTH_COMPARE_FUNC_MASK,this._u32View[7]|=o.default.WRITE_SET(e,o.default.DEPTH_COMPARE_FUNC_MASK,o.default.DEPTH_COMPARE_FUNC_SHIFT)},e.prototype.setStencilTestOn=function(e){this._u32View[7]&=~o.default.STENCIL_ENABLE_FUNC_MASK,e&&(this._u32View[7]|=o.default.WRITE_SET(1,o.default.STENCIL_ENABLE_FUNC_MASK,o.default.STENCIL_ENABLE_FUNC_SHIFT))},e.prototype.setStencilWriteMask=function(e){this._u32View[7]&=~o.default.STENCIL_WRITE_MASK,this._u32View[7]|=o.default.WRITE_SET(e,o.default.STENCIL_WRITE_MASK,o.default.STENCIL_WRITE_SHIFT)},e.prototype.setStencilReadMask=function(e){this._u32View[7]&=~o.default.STENCIL_READ_MASK,this._u32View[7]|=o.default.WRITE_SET(e,o.default.STENCIL_READ_MASK,o.default.STENCIL_READ_SHIFT)},e.prototype.setStencilRef=function(e){this._u32View[7]&=~o.default.STENCIL_REF_MASK,this._u32View[7]|=o.default.WRITE_SET(e,o.default.STENCIL_REF_MASK,o.default.STENCIL_REF_SHIFT)},e.prototype.setStencilTestMode=function(e,t,n,i){this.setStencilTestModeSeparate(e,t,n,i,e,t,n,i)},e.prototype.setStencilTestModeSeparate=function(e,t,n,i,r,a,s,c){this._u32View[6]=0,this._u32View[6]=o.default.WRITE_SET(e,o.default.STENCIL_FRONT_COMPARE_FUN_MASK,o.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)|o.default.WRITE_SET(t,o.default.STENCIL_FRONT_FAIL_OP_MASK,o.default.STENCIL_FRONT_FAIL_OP_SHIFT)|o.default.WRITE_SET(n,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)|o.default.WRITE_SET(i,o.default.STENCIL_FRONT_PASS_OP_MASK,o.default.STENCIL_FRONT_PASS_OP_SHIFT)|o.default.WRITE_SET(r,o.default.STENCIL_BACK_COMPARE_FUN_MASK,o.default.STENCIL_BACK_COMPARE_FUN_SHIFT)|o.default.WRITE_SET(a,o.default.STENCIL_BACK_FAIL_OP_MASK,o.default.STENCIL_BACK_FAIL_OP_SHIFT)|o.default.WRITE_SET(s,o.default.STENCIL_BACK_DEPTH_FAIL_OP_MASK,o.default.STENCIL_BACK_DEPTH_FAIL_OP_SHIFT)|o.default.WRITE_SET(c,o.default.STENCIL_BACK_PASS_OP_MASK,o.default.STENCIL_BACK_PASS_OP_SHIFT)},e.prototype.setCullMode=function(e){this._u32View[8]&=~o.default.CULL_MODE_MASK,this._u32View[8]|=o.default.WRITE_SET(e,o.default.CULL_MODE_MASK,o.default.CULL_MODE_SHIFT)},e.prototype.setFaceWinding=function(e){this._u32View[8]&=~o.default.FACE_WINDING_MASK,this._u32View[8]|=o.default.WRITE_SET(e,o.default.FACE_WINDING_MASK,o.default.FACE_WINDING_SHIFT)},e.prototype.setPrimitiveType=function(e){this._u32View[8]&=~o.default.PRIMITIVE_TYPE_MASK,this._u32View[8]|=o.default.WRITE_SET(e,o.default.PRIMITIVE_TYPE_MASK,o.default.PRIMITIVE_TYPE_SHIFT)},e.prototype.setIndexType=function(e){this._u32View[8]&=~o.default.INDEX_TYPE_MASK,this._u32View[8]|=o.default.WRITE_SET(e,o.default.INDEX_TYPE_MASK,o.default.INDEX_TYPE_SHIFT)},e.prototype.setPassDepthFormat=function(e){this._u32View[8]&=~o.default.DEPTH_FORMAT_MASK,this._u32View[8]|=o.default.WRITE_SET(e,o.default.DEPTH_FORMAT_MASK,o.default.DEPTH_FORMAT_SHIFT)},e.prototype.setPassColorFormat=function(e,t){this._u32View[8]&=~(o.default.COLOR_ATTACHMENT_COUNT_MASK|o.default.COLOR_FORMAT_MASK),this._u32View[8]|=o.default.WRITE_SET(e,o.default.COLOR_FORMAT_MASK,o.default.COLOR_FORMAT_SHIFT)|o.default.WRITE_SET(t,o.default.COLOR_ATTACHMENT_COUNT_MASK,o.default.COLOR_ATTACHMENT_COUNT_SHIFT)},e.prototype.setUnBatchable=function(){this._u8view[192]=0,this._u8view[193]=0},e.prototype.setBatchable=function(e,t,n){this._u8view[192]=1,this._u8view[193]=1,this._u32View[10]=c.batchableVertexBuffer2Native.get(e).id,this._u32View[11]=0,this._u32View[9]=l.batchableIndexBuffer2Native.get(t).id,this._u32View[49]=r.nativeValue2Native.get(n).id},e.prototype.setBatchableRenderDataDirty=function(){this._u8view[193]=1},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rect2Native=void 0,t.rect2Native=new WeakMap;var i=function(e){this._native=e,t.rect2Native.set(this,e)};t.default=i}]).default,__appServiceSDK__;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Kanata={})}(this,(function(e){"use strict";e.Puppet="undefined"!=typeof NativeGlobal?NativeGlobal.Puppet:void 0,e.CREATE_INSTANCE=(t,n,i,r,o)=>{var a=globalThis.KANATA_INSTANCES=globalThis.KANATA_INSTANCES||{};if(a[t])return a[t];var s={exports:{}},c=s.exports;return function(e,t){"object"==typeof c&&void 0!==s?t(c):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).KanataClass={})}(this,(function(a){var s,c,l,u,d,h,p,f,g,_,m,y,v,A,b,w,E,T,S,C,I,x,D,O,P,R,k,N,M;a.EVertexFormat=void 0,(s=a.EVertexFormat||(a.EVertexFormat={}))[s.FLOAT=0]="FLOAT",s[s.FLOAT2=1]="FLOAT2",s[s.FLOAT3=2]="FLOAT3",s[s.FLOAT4=3]="FLOAT4",s[s.BYTE4=4]="BYTE4",s[s.BYTE4N=5]="BYTE4N",s[s.UBYTE4=6]="UBYTE4",s[s.UBYTE4N=7]="UBYTE4N",s[s.SHORT2=8]="SHORT2",s[s.SHORT2N=9]="SHORT2N",s[s.SHORT4=10]="SHORT4",s[s.SHORT4N=11]="SHORT4N",s[s.UINT10_N2=12]="UINT10_N2",a.EVertexStep=void 0,(c=a.EVertexStep||(a.EVertexStep={}))[c.PER_VERTEX=0]="PER_VERTEX",c[c.PER_INSTANCE=1]="PER_INSTANCE",a.EIndexType=void 0,(l=a.EIndexType||(a.EIndexType={}))[l.NONE=1]="NONE",l[l.UINT16=2]="UINT16",l[l.UINT32=3]="UINT32",a.ETextureType=void 0,(u=a.ETextureType||(a.ETextureType={}))[u.D2=0]="D2",u[u.Cube=1]="Cube",u[u.D2Array=2]="D2Array",u[u.D3=3]="D3",a.ETextureFormat=void 0,(d=a.ETextureFormat||(a.ETextureFormat={}))[d.RGBA8=0]="RGBA8",d[d.SRGBA8=1]="SRGBA8",d[d.RGB10A2=2]="RGB10A2",d[d.RG8=3]="RG8",d[d.R8=4]="R8",d[d.RGBA32F=5]="RGBA32F",d[d.RGBA16F=6]="RGBA16F",d[d.RG11B10F=7]="RG11B10F",d[d.Depth_Low=20]="Depth_Low",d[d.Depth_High=21]="Depth_High",d[d.Depth_Stencil=22]="Depth_Stencil",d[d.RGBA4=23]="RGBA4",d[d.RGB565=24]="RGB565",d[d.RGB5A1=25]="RGB5A1",d[d.ETC1RGB8=100]="ETC1RGB8",d[d.ETC2RGB8=110]="ETC2RGB8",d[d.ETC2RGBA8=111]="ETC2RGBA8",d[d.PVRTC2RGBV1=120]="PVRTC2RGBV1",d[d.PVRTC4RGBV1=121]="PVRTC4RGBV1",d[d.PVRTC2RGBAV1=122]="PVRTC2RGBAV1",d[d.PVRTC4RGBAV1=123]="PVRTC4RGBAV1",d[d.ASTC4x4=140]="ASTC4x4",d[d.ASTC5x5=141]="ASTC5x5",d[d.ASTC6x6=142]="ASTC6x6",d[d.ASTC8x6=143]="ASTC8x6",d[d.ASTC8x8=144]="ASTC8x8",d[d.DXT1=150]="DXT1",d[d.DXT3=151]="DXT3",d[d.DXT5=152]="DXT5",a.EWrapMode=void 0,(h=a.EWrapMode||(a.EWrapMode={}))[h.REPEAT=1]="REPEAT",h[h.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",h[h.MIRRORED_REPEAT=3]="MIRRORED_REPEAT",a.EFilterMode=void 0,(p=a.EFilterMode||(a.EFilterMode={}))[p.NEAREST=1]="NEAREST",p[p.LINEAR=2]="LINEAR",p[p.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",p[p.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",p[p.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",p[p.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR",a.EUniformType=void 0,(f=a.EUniformType||(a.EUniformType={}))[f.FLOAT=0]="FLOAT",f[f.FLOAT2=1]="FLOAT2",f[f.FLOAT3=2]="FLOAT3",f[f.FLOAT4=3]="FLOAT4",f[f.MAT2=4]="MAT2",f[f.MAT3=5]="MAT3",f[f.MAT4=6]="MAT4",f[f.SAMPLER=7]="SAMPLER",a.ECullMode=void 0,(g=a.ECullMode||(a.ECullMode={}))[g.NONE=0]="NONE",g[g.FRONT=1]="FRONT",g[g.BACK=2]="BACK",a.EFaceWinding=void 0,(_=a.EFaceWinding||(a.EFaceWinding={}))[_.CCW=1]="CCW",_[_.CW=2]="CW",a.ECompareFunc=void 0,(m=a.ECompareFunc||(a.ECompareFunc={}))[m.LESS=1]="LESS",m[m.LEQUAL=2]="LEQUAL",m[m.EQUAL=3]="EQUAL",m[m.GEQUAL=4]="GEQUAL",m[m.GREATER=5]="GREATER",m[m.NOTEQUAL=6]="NOTEQUAL",m[m.NEVER=7]="NEVER",m[m.ALWAYS=8]="ALWAYS",a.EStencilOp=void 0,(y=a.EStencilOp||(a.EStencilOp={}))[y.ZERO=0]="ZERO",y[y.KEEP=1]="KEEP",y[y.REPLACE=2]="REPLACE",y[y.INCR_WRAP=3]="INCR_WRAP",y[y.INCR=4]="INCR",y[y.DECR_WRAP=5]="DECR_WRAP",y[y.DECR=6]="DECR",y[y.INVERT=7]="INVERT",a.EBlendFactor=void 0,(v=a.EBlendFactor||(a.EBlendFactor={}))[v.ZERO=0]="ZERO",v[v.ONE=1]="ONE",v[v.SRC_COLOR=2]="SRC_COLOR",v[v.ONE_MINUS_SRC_COLOR=3]="ONE_MINUS_SRC_COLOR",v[v.SRC_ALPHA=4]="SRC_ALPHA",v[v.ONE_MINUS_SRC_ALPHA=5]="ONE_MINUS_SRC_ALPHA",v[v.DST_ALPHA=6]="DST_ALPHA",v[v.ONE_MINUS_DST_ALPHA=7]="ONE_MINUS_DST_ALPHA",v[v.DST_COLOR=8]="DST_COLOR",v[v.ONE_MINUS_DST_COLOR=9]="ONE_MINUS_DST_COLOR",v[v.SRC_ALPHA_SATURATE=10]="SRC_ALPHA_SATURATE",v[v.CONSTANT_COLOR=11]="CONSTANT_COLOR",v[v.ONE_MINUS_CONSTANT_COLOR=12]="ONE_MINUS_CONSTANT_COLOR",a.EBlendEquation=void 0,(A=a.EBlendEquation||(a.EBlendEquation={}))[A.FUNC_ADD=0]="FUNC_ADD",A[A.FUNC_SUBTRACT=1]="FUNC_SUBTRACT",A[A.FUNC_REVERSE_SUBTRACT=2]="FUNC_REVERSE_SUBTRACT",A[A.MIN=3]="MIN",A[A.MAX=4]="MAX",a.EColorMask=void 0,(b=a.EColorMask||(a.EColorMask={}))[b.NONE=16]="NONE",b[b.R=1]="R",b[b.G=2]="G",b[b.B=4]="B",b[b.A=8]="A",b[b.RGB=7]="RGB",b[b.RGBA=15]="RGBA",a.EPixelType=void 0,(w=a.EPixelType||(a.EPixelType={}))[w.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",w[w.FLOAT=5126]="FLOAT",w[w.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",w[w.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",w[w.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a.ELoadAction=void 0,(E=a.ELoadAction||(a.ELoadAction={}))[E.CLEAR=0]="CLEAR",E[E.LOAD=1]="LOAD",E[E.DONTCARE=2]="DONTCARE",a.EComponentType=void 0,(T=a.EComponentType||(a.EComponentType={}))[T.Undefined=0]="Undefined",T[T.Culling=1]="Culling",T[T.Animator=2]="Animator",T[T.SkinnedSkeleton=3]="SkinnedSkeleton",a.EDataModelType=void 0,(S=a.EDataModelType||(a.EDataModelType={}))[S.AnimationClip=1]="AnimationClip",S[S.SkeletonBoneInverse=2]="SkeletonBoneInverse",a.EMeshRenderType=void 0,(C=a.EMeshRenderType||(a.EMeshRenderType={}))[C.UnKnown=0]="UnKnown",C[C.Static3D=1]="Static3D",C[C.Skinned3D=2]="Skinned3D",C[C.UI=3]="UI",a.EPrimitiveType=void 0,(I=a.EPrimitiveType||(a.EPrimitiveType={}))[I.TRIANGLES=0]="TRIANGLES",I[I.TRIANGLE_STRIP=1]="TRIANGLE_STRIP",I[I.LINES=2]="LINES",I[I.LINE_STRIP=3]="LINE_STRIP",I[I.POINTS=4]="POINTS",I[I.ZERO=5]="ZERO",a.EShadowMode=void 0,(x=a.EShadowMode||(a.EShadowMode={}))[x.None=0]="None",x[x.OneCascade_PCF=1]="OneCascade_PCF",x[x.TwoCascade_PCF=2]="TwoCascade_PCF",x[x.FourCascade_PCF=4]="FourCascade_PCF",a.EShadowFitMode=void 0,(D=a.EShadowFitMode||(a.EShadowFitMode={}))[D.FitFrustum=0]="FitFrustum",D[D.FitObjects=1]="FitObjects",a.EVertexLayoutUsage=void 0,(O=a.EVertexLayoutUsage||(a.EVertexLayoutUsage={}))[O.CUSTOM=0]="CUSTOM",O[O.POSITION=1]="POSITION",O[O.NORMAL=2]="NORMAL",O[O.TANGENT=3]="TANGENT",O[O.UV0=4]="UV0",O[O.UV1=5]="UV1",O[O.UV2=6]="UV2",O[O.COLOR=7]="COLOR",O[O.BONEINDEX=8]="BONEINDEX",O[O.BONEWEIGHT=9]="BONEWEIGHT",a.EVertexBatchOperator=void 0,(P=a.EVertexBatchOperator||(a.EVertexBatchOperator={}))[P.MatrixMultiple=0]="MatrixMultiple",P[P.UVST=1]="UVST",a.EAnimationBlendType=void 0,(R=a.EAnimationBlendType||(a.EAnimationBlendType={}))[R.Override=0]="Override",R[R.Additive=1]="Additive",a.EUseDefaultAddedAction=void 0,(k=a.EUseDefaultAddedAction||(a.EUseDefaultAddedAction={}))[k.Ignore=0]="Ignore",k[k.Refresh=1]="Refresh",a.EUseDefaultRetainedAction=void 0,(N=a.EUseDefaultRetainedAction||(a.EUseDefaultRetainedAction={}))[N.Keep=0]="Keep",N[N.Refresh=1]="Refresh",N[N.WriteBack=2]="WriteBack",a.EUseDefaultRemovedAction=void 0,(M=a.EUseDefaultRemovedAction||(a.EUseDefaultRemovedAction={}))[M.Keep=0]="Keep",M[M.Clear=1]="Clear",M[M.WriteBack=2]="WriteBack";var L,B={size:21,resetFlag:0,renderPass:1,canvasWidth:2,canvasHeight:3,uniforms:4,useInstanceOrNeverTranspose:20},F=65472,U={size:14,rotation:0,position:1,scale:3,worldMatrix:5},W={size:27,dfRotationType:1,rotationType:0,rotation:1,position:5,scale:8,worldOffset:11,worldMatrix:11},j={size:7,active:0,dfActive:1,layer:1,boundingBallCenter:2,boundingBallRadius:5,entityId:6},G={size:147,view:0,depth:1,active:2,fov:3,aspect:4,near:5,far:6,up:7,eye:10,orthoSize:13,isProjection:14,cullingMask:15,canvasSizeY:16,targetTransform:17,viewMatrix:18,projectionMatrix:34,viewMatrixInverse:50,viewMatrix2D:66,projectionMatrix2D:82,viewMatrixInverse2D:98,manualMatrix:114,layerCullDistances:115},V={size:78,view:0,depth:1,active:2,shadowDistance:3,shadowMode:4,shadowFilterMode:5,lightDir:6,bounds:9,lightSpaceMatrices:14},H={dynamicBatch:0,skinHandle:1,castShadow:2,bindTarget:3,start:4,size:5,materialId:0,vertexBufferId:1,indexBufferId:2,startIndex:3,numIndices:4},z={size:6,useMaterialStates:0,fstencil:1,bstencil:2,blendRGBA:3,colorDepth:4,state:5},Z={size:14,renderQueue:0,effect:1,uniformBlock:2,fstencilMask:3,bstencilMask:4,blendRGBAMask:5,colorDepthMask:6,stateMask:7,fstencil:8,bstencil:9,blendRGBA:10,colorDepth:11,state:12,useInstance:13},Y={boneInverseModelId:0,boneIndices:1,perBoneIndices:1,perBoneEntityId:1,perBoneMatrixOld:16,perBoneMatrixNew:12};a.EEventType=void 0,(L=a.EEventType||(a.EEventType={}))[L.SetRootEntity=1]="SetRootEntity",L[L.AddChild=2]="AddChild",L[L.AddChildAtIndex=3]="AddChildAtIndex",L[L.RemoveFromParent=4]="RemoveFromParent",L[L.DisperseSubTree=5]="DisperseSubTree",L[L.BindToBone=6]="BindToBone",L[L.BindToBones=7]="BindToBones",L[L.UnBindFromBone=8]="UnBindFromBone",L[L.UnBindFromBones=9]="UnBindFromBones",L[L.EntityCommandActive=10]="EntityCommandActive",L[L.EntityCommandInActive=11]="EntityCommandInActive";var $,q=t.getContext("wgfx",{bufferPoolSize:40960,shaderPoolSize:5120,imagePoolSize:40960,pipelinePoolSize:1024,passPoolSize:1024,stencil:!0,alpha:"Editor"===i,antialias:n.mainScreenMSAA||!1,preserveDrawingBuffer:!0,ignore_assert:!!n.gfxIgnoreAssert,disable_log:"Editor"!==i});$="undefined"!=typeof window&&window.top?(window.top.NativeGlobal||{}).Puppet:r?((null==wx?void 0:wx.NativeGlobal)||{}).Puppet:(NativeGlobal||{}).Puppet;var Q=void 0;$&&(q&&q.gfx||r)&&(Q=new $(null==q?void 0:q.gfx,o,r));var J=Q||{};var X=new(function(){function e(e){this._queues=[],this._end=0,this._end=e;for(var t=0;t<=e;t+=1)this._queues.push([])}return e.prototype.add=function(e){this._queues[0].push(e)},e.prototype.step=function(){var e=this._queues[this._end];e.splice(0,e.length);for(var t=this._end;t>0;t-=1)this._queues[t]=this._queues[t-1];this._queues[0]=e},e}())(5),K={REAL_DOWNLOADER:null,LOAD:function(e){return K.REAL_DOWNLOADER.load(e)}},ee=function(e,t){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function te(e,t){function n(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ne=function(){function e(e){this._bufferSize=0,e&&(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength)}return Object.defineProperty(e.prototype,"commandOffset",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commandOffsetUint32",{get:function(){return this._u32view[0]/4},enumerable:!1,configurable:!0}),e.prototype._checkBufferSize=function(e){this._u32view[0]+e+1>this._u32view.length&&J.refreshNodesWorldTransform()},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}(),ie=function(e){function t(){return e.call(this,J.eventBusSM)||this}return te(t,e),t.prototype.setRootEntity=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.SetRootEntity,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.addChild=function(e,t){this._checkBufferSize(12);var n=this._u32view[0]/4+1;this._u32view[n]=a.EEventType.AddChild,this._u32view[n+1]=e,this._u32view[n+2]=t,this.setCommandSize(this._u32view[0]+12)},t.prototype.addChildAtIndex=function(e,t,n){this._checkBufferSize(16);var i=this._u32view[0]/4+1;this._u32view[i]=a.EEventType.AddChildAtIndex,this._u32view[i+1]=e,this._u32view[i+2]=t,this._u32view[i+3]=n,this.setCommandSize(this._u32view[0]+16)},t.prototype.removeFromParent=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.RemoveFromParent,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.disperseSubTree=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.DisperseSubTree,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.bindToBone=function(e,t){this._checkBufferSize(12);var n=this._u32view[0]/4+1;this._u32view[n]=a.EEventType.BindToBone,this._u32view[n+1]=e,this._u32view[n+2]=t,this.setCommandSize(this._u32view[0]+12)},t.prototype.unbindFromBone=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.UnBindFromBone,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.entityCommandActive=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.EntityCommandActive,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.entityCommandInActive=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.EntityCommandInActive,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.bindToBones=function(e,t){var n=e.length,i=4*(2+2*n);this._checkBufferSize(i);var r=this._u32view[0]/4+1;this._u32view[r]=a.EEventType.BindToBones,this._u32view[r+1]=n;for(var o=0;o<n;o++){var s=e[o],c=t[o];this._u32view[r+2+o]=s.id,this._u32view[r+2+n+o]=c.id}this.setCommandSize(this._u32view[0]+i)},t.prototype.unBindFromBones=function(e){var t=e.length,n=4*(2+t);this._checkBufferSize(n);var i=this._u32view[0]/4+1;this._u32view[i]=a.EEventType.UnBindFromBones,this._u32view[i+1]=t;for(var r=0;r<t;r++){var o=e[r];this._u32view[i+2+r]=o.id}this.setCommandSize(this._u32view[0]+n)},t}(ne),re=function(e){function t(){return e.call(this,J.dirtyNodesSM)||this}return te(t,e),t.prototype.addDirtyEntity=function(e){this._checkBufferSize(1),this._u32view[this._u32view[0]+1]=e,this.setCommandSize(this._u32view[0]+1)},t.prototype.addDirtyEntityId=function(e){this._checkBufferSize(1),this._u32view[this._u32view[0]+1]=e,this.setCommandSize(this._u32view[0]+1)},t.prototype.addDirtyEntities=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var n=this._u32view[0]+1,i=t-(this._u32view.length-1),r=0;r<i;r++)this._u32view[n+r]=e[r];var o=t-i;for(r=i;r<o;r++)this.addDirtyEntityId(e[r])}else{for(i=t,n=this._u32view[0]+1,r=0;r<i;r++)this._u32view[n+r]=e[r];this.setCommandSize(this._u32view[0]+i)}},t.prototype.addDirtyEntitiesById=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var n=this._u32view[0]+1,i=t-(this._u32view.length-1),r=0;r<i;r++)this._u32view[n+r]=e[r];var o=t-i;for(r=i;r<o;r++)this.addDirtyEntityId(e[r])}else{for(i=t,n=this._u32view[0]+1,r=0;r<i;r++)this._u32view[n+r]=e[r];this.setCommandSize(this._u32view[0]+i)}},t}(ne),oe=new ie,ae=new re,se=new(function(){function e(){}return e.prototype.entityAddChild=function(e,t){oe.addChild(e,t)},e.prototype.entityAddChildAtIndex=function(e,t,n){oe.addChildAtIndex(e,t,n)},e.prototype.entityRemoveFromParent=function(e){oe.removeFromParent(e)},e.prototype.entityClear=function(e){oe.disperseSubTree(e)},e.prototype.entitySetActive=function(e,t){t?oe.entityCommandActive(e):oe.entityCommandInActive(e)},e.prototype.entitySetLocalMatrixDirty=function(e){ae.addDirtyEntity(e)},e.prototype.setRootEntity=function(e){oe.setRootEntity(e)},e.prototype.refreshWorldTransform=function(){J.refreshNodesWorldTransform()},e.prototype.bindEntityToBone=function(e,t){oe.bindToBone(e.id,t.id)},e.prototype.unbindEntityFromBone=function(e){oe.unbindFromBone(e.id)},e.prototype.bindEntitiesToBones=function(e,t){oe.bindToBones(e,t)},e.prototype.unbindEntitiesFromBones=function(e){oe.unBindFromBones(e)},e}()),ce=function(){function e(){this.isKanataImage=!0,this.premultiplyAlpha=!1}return e.IS=function(e){return e&&e.isKanataImage},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"src",{get:function(){return this._src},set:function(e){var t=this;this._src=e,K.LOAD({src:this._src,encoding:void 0,onLoad:function(n){J.decodeImage(n.data,(function(n,i,r){n?(t._data=n,t._width=i,t._height=r,t.onload&&t.onload()):t.onerror&&t.onerror(new Error("Decode Image error: '"+e+"'"))}),t.premultiplyAlpha),X.add(n.data)},onError:function(e){t.onerror&&t.onerror(e)}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e}(),le=function(){function e(e){this._bufferSize=0,e?(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength):(this.buffer=new ArrayBuffer(1024),this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=1024)}return Object.defineProperty(e.prototype,"commandOffset",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commandOffsetUint32",{get:function(){return this._u32view[0]/4},enumerable:!1,configurable:!0}),e.prototype._checkBufferSize=function(e){},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}(),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateSkinningMatrices=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;return this.setCommandSize(t),this._u32view},t}(le),de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimators=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;return this.setCommandSize(t),this._u32view},t}(le),he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimatorControllers=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;return this.setCommandSize(t),this._u32view},t}(le),pe=new ue,fe=new de,ge=new he,_e="undefined"!=typeof WeakRef,me={downloader:K,eventBridge:se,update:function(e){X.step()},clearView:function(e){return J.clearView(e.id)},cullCamera:function(e,t,n){return J.cullCamera(e.id,t.id,n)},drawCamera:function(e,t,n){return J.drawCamera(e.id,t.id,n)},drawLight:function(e,t,n,i){return J.drawLight(e.id,t.id,n.id,i)},submit:function(){return J.submit()},createScalableList:function(e,t){return J.createScalableList(e,t)},createNodePool:function(e,t){return J.createNodePool(e,t)},createNodeTree:function(e,t,n,i,r){return J.createNodeTree(e,t,n,i,r)},createVertexLayout:function(e){return J.createVertexLayout(JSON.stringify(e))},createVertexDataDescriptor:function(e){return J.createVertexDataDescriptor(JSON.stringify(e))},createVertexBuffer:function(e,t){return X.add(e),J.createVertexBuffer(e,t.id)},updateVertexBuffer:function(e,t,n){return X.add(t),J.updateVertexBuffer(e.id,t,n)},createIndexBuffer:function(e,t){return X.add(e),J.createIndexBuffer(e,t)},updateIndexBuffer:function(e,t,n){return X.add(t),J.updateIndexBuffer(e.id,t,n)},createVertexData:function(e,t,n){return J.createVertexData(e.id,t,n.id)},createIndexData:function(e){return J.createIndexData(e)},createTexture:function(e,t,n,i,r,o,a,s,c){return s&&s.forEach((function(e,t){e=ce.IS(e)?e.data:e,s[t]=e,X.add(e)})),J.createTexture(e,t,n,i,r,o,a,s,c)},createAutoUpdateTextureFromCanvas:function(e){return J.createTexture(e)},updateTexture:function(e,t,n,i,r,o,a,s,c){return X.add(c),J.updateTexture(e.id,t,n,i,r,o,a,s,c)},updateTextureFlags:function(e,t){return J.updateTextureFlags(e.id,t)},createUniformBlockDescriptor:function(e){return J.createUniformBlockDescriptor(JSON.stringify(e))},createUniformBlock:function(e){return J.createUniformBlock(e.id)},createEffect:function(e,t,n,i,r,o){return J.createEffect(e,t,JSON.stringify(n),JSON.stringify(i),r,JSON.stringify(o))},createMaterial:function(e){return J.createMaterial(JSON.stringify(e||{}))},changeMaterialMacros:function(e,t){return J.changeMaterialMacros(e.id,JSON.stringify(t))},createView:function(e){var t={passAction:e.passAction,viewport:e.viewport,scissor:e.scissor};return J.createView(JSON.stringify(t))},updateViewRect:function(e,t){return J.updateViewRect(e.id,t)},updateViewScissor:function(e,t){return J.updateViewScissor(e.id,t)},createRenderPass:function(e){var t=e;return t.colors.forEach((function(e){e.texture=e.texture.id})),t.depth.texture=t.depth.texture.id,t.stencil.texture=t.stencil.texture.id,J.createRenderPass(JSON.stringify(e))},createCullingComponentPool:function(e){return J.createCullingComponentPool(e)},createRenderComponent:function(e,t,n,i,r,o){return J.createRenderComponent(e,t.id,n,i,r,JSON.stringify(o||{}))},changeMeshMacros:function(e,t){return J.changeMeshMacros(e.id,JSON.stringify(t))},createAnimator:function(e,t){return J.createAnimator(e,t)},updateAnimators:function(e,t){var n=fe.updateAnimators(e,t);return X.add(n),J.updateAnimators(n)},createAnimationClipBinding:function(e,t,n,i,r,o,a,s){for(var c=Math.min(i.length-r,o),l=Math.min(e.length-t,n),u=new ArrayBuffer(4*(c+l)),d=new Uint32Array(u),h=0,p=t;p<l;p++)d[h++]=e[p]?e[p].id:0;for(p=r;p<c;p++)d[h++]=null===i[p]?0:"number"==typeof i[p]?i[p]:i[p].id;return X.add(u),J.createAnimationClipBinding(u,0,l,c,a,s.id)},rebindAnimationClipBinding:function(e,t,n,i,r,o,a,s,c,l,u){for(var d=Math.min(r.length-o,a),h=Math.min(t.length-n,i),p=new ArrayBuffer(4*(d+h)),f=new Uint32Array(p),g=0,_=n;_<h;_++)f[g++]=t[_]?t[_].id:0;for(_=o;_<d;_++)f[g++]=null===r[_]?0:"number"==typeof r[_]?r[_]:r[_].id;return X.add(p),e.rebind(p,0,h,d,s,c,l,u.id)},updateAnimationClipBinding:function(e,t,n,i,r,o,a,s,c,l){for(var u=Math.min(r.length-o,a),d=Math.min(t.length-n,i),h=new ArrayBuffer(4*(u+d)),p=new Uint32Array(h),f=0,g=n;g<d;g++)p[f++]=t[g]?t[g].id:0;for(g=o;g<u;g++)p[f++]=null===r[g]?0:"number"==typeof r[g]?r[g]:r[g].id;return X.add(h),e.update(h,0,d,u,s,c,l)},writeAnimationClipBindingDefaultValues:function(e){e.writeDefaultValues()},createAnimatorControllerModel:function(e){return J.createAnimatorControllerModel(e)},setAnimatorControllerModelMaskAtIndex:function(e,t,n){e.setMaskAtIndex(t,n.buffer,n.offset,n.length)},updateAnimatorControllerModel:function(e){e.update()},createAnimatorControllerStateModel:function(e){return J.createAnimatorControllerStateModel(e)},updateAnimatorControllers:function(e,t){var n=ge.updateAnimatorControllers(e,t);X.add(n),J.updateAnimatorControllers(n)},createSkinning:function(e,t){return J.createSkinning(e,t)},updateSkinnings:function(e,t){var n=pe.updateSkinningMatrices(e,t);return X.add(n),J.updateSkinnings(n)},createRenderCamera:function(e,t){return J.createRenderCamera(e,t)},createLightCamera:function(){return J.createLightCamera()},createAnimationClipModel:function(e){return X.add(e),J.createAnimationClipModel(e)},createBoneInverseModel:function(e){return X.add(e),J.createBoneInverseModel(e)},loadTTFFont:function(e,t){K.LOAD({src:e,encoding:void 0,onLoad:function(e){var n=e.data,i=e.filePath;X.add(n);var r=J.loadTTFFont(n,i);t(r)},onError:function(){t("Arial")}})},getGlyphInfo:function(e,t){var n=e.italic?"italic ":" ",i=e.bold?"bold ":" ";return J.getGlyphInfo((""+n+i+Math.floor(e.size)+"px "+e.fontFamily).trim(),t)},refreshNodesWorldTransform:function(){return J.refreshNodesWorldTransform()},getRenderEnv:function(){var e=J.getRenderEnv(),t=e.registerFallbackEffect.bind(e);if(e.registerFallbackEffect=function(e,n){t(e,(null==n?void 0:n.id)||0)},e.changeMacros){var n=e.changeMacros.bind(e);e.changeMacros=function(e){n(JSON.stringify(e))}}else e.changeMacros=function(){};if(e.changeVirtualMacros){var i=e.changeVirtualMacros.bind(e);e.changeVirtualMacros=function(e){i(JSON.stringify(e))}}else e.changeVirtualMacros=function(){};if(e.setInternalInstanceInfo){var r=e.setInternalInstanceInfo.bind(e);e.setInternalInstanceInfo=function(e,t,n){r(e,JSON.stringify(t),JSON.stringify(n))}}else e.setInternalInstanceInfo=function(){};return e},createWeakRef:function(e){return _e?new WeakRef(e):J.createWeakRef?J.createWeakRef(e):{deref:function(){return e}}},createWeakRefSentry:function(){return J.createWeakRefSentry?J.createWeakRefSentry():{}},createNativeUUMap:function(){return J.createNativeUUMap()},createNativeSUMap:function(){return J.createNativeSUMap()},createNativeULUMap:function(){return J.createNativeULUMap()},setNodeName:function(e,t){return J.setNodeName(e,t)},setRenderComponentName:function(e,t){return J.setRenderComponentName(e.id,t)},debugPrint:function(e){return J.debugPrint(e)}},ye={IS_VALID:function(){return!!Q},GET_MAIN_CANVAS:function(){return t}};ye.worker=me,ye.Image=ce;var ve,Ae=function(){function e(){}return Object.defineProperty(e.prototype,"_handle",{get:function(){return this.__handle},set:function(e){this.__handle=e,this.id=e.id,this.__handle.__feObj=this},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._handle.destroy&&this._handle.destroy()},e}(),be=ye.worker,we=function(e){function t(){var t=e.call(this)||this;return t._macros={},t._virtualMacros={},t._isWrongWrapMapping=!1,t._handle=be.getRenderEnv(),t._uniformBlocks=[],t._u32View=new Uint32Array(t._handle.data),t._f32View=new Float32Array(t._handle.data),"string"==typeof t._handle.version?t._version=t._handle.version.split(".").map((function(e){return parseInt(e,10)})):"WEBGL"!==t.backendType&&(t._version=[0,0]),t._version&&(t._isWrongWrapMapping=0===t._version[0]),t}return te(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backendType",{get:function(){return this._handle.backendType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasWidth",{get:function(){return this._f32View[B.canvasWidth]},set:function(e){this._f32View[B.canvasWidth]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasHeight",{get:function(){return this._f32View[B.canvasHeight]},set:function(e){this._f32View[B.canvasHeight]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportCompressTextures",{get:function(){return this._handle.supportCompressTextures},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"features",{get:function(){return this._handle.features||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useInstance",{get:function(){return!!(1&this._u32View[B.useInstanceOrNeverTranspose])},set:function(e){var t=this._u32View[B.useInstanceOrNeverTranspose];this._u32View[B.useInstanceOrNeverTranspose]=e?1|t:-2&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"neverTranspose",{get:function(){return!!(2&this._u32View[B.useInstanceOrNeverTranspose])},set:function(e){var t=this._u32View[B.useInstanceOrNeverTranspose];this._u32View[B.useInstanceOrNeverTranspose]=e?2|t:-3&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isWrongWrapMapping",{get:function(){return this._isWrongWrapMapping},enumerable:!1,configurable:!0}),t.prototype.supportCompressTexture=function(e){return this.supportCompressTextures.indexOf(e)>=0},t.prototype.registerFallbackEffect=function(e,t){this._handle.registerFallbackEffect(e,null==t?void 0:t.__handle)},t.prototype.beginFrame=function(){this._u32View[B.resetFlag]=1},t.prototype.endFrame=function(){be.submit()},t.prototype.clearView=function(e){be.clearView(e.__handle)},t.prototype.setEnvUniform=function(e,t){this._u32View[B.uniforms+e]=t.id,this._uniformBlocks[e]=t},t.prototype.setRenderPass=function(e){this._u32View[B.renderPass]=e.id,this._renderPass=e},t.prototype.changeMacros=function(e){Object.assign(this._macros,e),this._handle.changeMacros(this._macros)},t.prototype.getMacro=function(e){return this._macros[e]},t.prototype.changeVirtualMacros=function(e){Object.assign(this._virtualMacros,e),this._handle.changeVirtualMacros(this._virtualMacros)},t.prototype.getVirtualMacro=function(e){return this._virtualMacros[e]},t.prototype.setInternalInstanceInfo=function(e,t,n){this._handle.setInternalInstanceInfo(e,t,n)},t}(Ae),Ee=new we,Te=function(){function t(){this._id=__wxConfig.accountInfo.appId;var t=e.DATA_BUSES=e.DATA_BUSES||{};this._globalObj=t[this._id]=t[this._id]||[]}return t.prototype.postMessage=function(e){!r&&this._globalObj.push(e)},t.prototype.onMessage=function(e){r&&(this._callback=e)},t.prototype.flush=function(){if(r){for(var e=0,t=this._globalObj;e<t.length;e++){var n=t[e];this._callback&&this._callback("string"==typeof n?JSON.parse(n):n)}this._globalObj.length=0}},t}();e&&(ve=new Te);var Se=ve,Ce=function(){function e(){}return Object.defineProperty(e.prototype,"__handle",{get:function(){return this._handle},enumerable:!1,configurable:!0}),e.prototype._init=function(e){this._fastInit(e)},e.prototype._fastInit=function(e){this._handle=e,this._handle.__feObj=this;var t=e.id,n=e.data,i=n.byteLength;this._bufferLength=i,this._byteOffset=0,this._buffer=n,this.id=t,this._f32view=new Float32Array(n,0,i/4)},e.prototype._initU32View=function(){this._u32view=new Uint32Array(this._buffer,this._byteOffset,this._bufferLength/4)},e.prototype._initPropertyView=function(e,t){return new Float32Array(this._buffer,this._byteOffset+4*e,t)},e.prototype.setRawBuffer=function(e){this._f32view.set(e)},e.prototype.destroy=function(){this._handle.destroy&&this._handle.destroy()},e}(),Ie=ye.worker,xe=function(e){function t(){var t=e.call(this)||this;return t._offsetEntityIds=0,t._animationClipCount=0,t._nodeCount=0,t._handle={id:0},t}return te(t,e),t.UPDATE_ANIMATORS=function(e,t){Ie.updateAnimators(e,t)},t.prototype.bindAnimations=function(e,t,n){this.entities=t,this.animationClipModels=e,this.animationClipModels=e,this._animationClipCount=e.length;var i=t.length;for(var r in t)i+=t[r].length;this._nodeCount=i;var o=Ie.createAnimator(e.length,i);if(!(o.id<0)&&o.data){this._init(o),this._initU32View();for(r=0;r<e.length;r++)this._u32view[3*r]=e[r].id;this._offsetEntityIds=3*e.length;var a,s=0;for(r=0;r<t.length;r++){for(var c=0;c<t[r].length;c++)null!=t[r][c]?(this._u32view[this._offsetEntityIds+s+c]=t[r][c].id,a||(a=t[r][c].id)):this._u32view[this._offsetEntityIds+s+c]=0,this._u32view[this._offsetEntityIds+s+c]=null!=t[r][c]?t[r][c].id:0;s+=t[r].length}0===this._u32view[this._offsetEntityIds]&&(null!=n&&n.id?this._u32view[this._offsetEntityIds]=n.id:a&&(this._u32view[this._offsetEntityIds]=a))}},t.prototype.setClipParams=function(e,t,n){if(this._handle){var i=3*e;this._f32view[i+1]=Math.round(t),this._f32view[i+2]=n}},t.prototype.getAnimationClipCount=function(){return this._animationClipCount},t.prototype.getNodeCount=function(){return this._nodeCount},t.prototype.getAnimationParameter=function(e){var t=3*e;return{animationClipId:this._u32view[t],frameIndex:this._f32view[t+1],percentage:this._f32view[t+2]}},t.prototype.getEntity=function(e){return this._u32view[this._offsetEntityIds+e]},t}(Ce),De=ye.worker,Oe=function(e){function t(t,n){var i=e.call(this)||this,r=De.createRenderCamera(t.id,n||!1);return r.id<0||!r.data||(i._init(r),i._initU32View(),i._layerCullDistances=new Float32Array(i._buffer,4*G.layerCullDistances,32),i._f32view.set([0,1,0],G.up),i.isProjection=!0),i}return te(t,e),Object.defineProperty(t.prototype,"active",{get:function(){return!!this._u32view[G.active]},set:function(e){this._u32view[G.active]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._u32view[G.depth]},set:function(e){this._u32view[G.depth]=e<0?0:e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProjection",{get:function(){return!!this._u32view[G.isProjection]},set:function(e){this._u32view[G.isProjection]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},set:function(e){this._view=e,this._u32view[G.view]=e.id,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fov",{get:function(){return this._f32view[G.fov]},set:function(e){this._f32view[G.fov]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"aspect",{get:function(){return this._f32view[G.aspect]},set:function(e){Math.abs(this._f32view[G.aspect]-e)<=1e-4||(this._f32view[G.aspect]=e,this._setDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._f32view[G.near]},set:function(e){this._f32view[G.near]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._f32view[G.far]},set:function(e){this._f32view[G.far]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orthoSize",{get:function(){return this._f32view[G.orthoSize]},set:function(e){this._f32view[G.orthoSize]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullingMask",{get:function(){return this._u32view[G.cullingMask]},set:function(e){this._u32view[G.cullingMask]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerCullDistances",{get:function(){return this._layerCullDistances},set:function(e){this._layerCullDistances.set(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasSizeY",{get:function(){return this._f32view[G.canvasSizeY]},set:function(e){this._f32view[G.canvasSizeY]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetTransform",{get:function(){return this._u32view[G.targetTransform]},set:function(e){this._u32view[G.targetTransform]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"up",{set:function(e){this._f32view.set(e,G.up)},enumerable:!1,configurable:!0}),t.prototype.cull=function(e,t){De.cullCamera(this.__handle,e.__handle,t)},t.prototype.draw=function(e,t){De.drawCamera(this.__handle,e.__handle,t)},t.prototype.changeProjectionMatrix=function(e,t){e?(this._f32view.set(t,G.projectionMatrix),this._u32view[G.manualMatrix]|=1):this._u32view[G.manualMatrix]&=-2,this._setDirty()},t.prototype.changeViewMatrix=function(e,t){e?(this._f32view.set(t,G.viewMatrix),this._u32view[G.manualMatrix]|=2):this._u32view[G.manualMatrix]&=-3,this._setDirty()},t.prototype._setDirty=function(){this._handle.setSharedDirty()},t.prototype.updateMatrix=function(){this._handle.updateMatrices()},t.OFFSETS=G,t}(Ce),Pe=ye.worker,Re=function(e){function t(){var t=e.call(this)||this,n=Pe.createLightCamera();return n.id<0||!n.data||(t._init(n),t._initU32View(),t._lightSpaceMatrices=new Float32Array(t._buffer,4*V.lightSpaceMatrices,64),t._tilingOffsets=new Float32Array([1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0]),t._cascadedSplits=new Float32Array(3),t._farBounds=new Float32Array(t._buffer,4*(V.bounds+1),4),t._bounds=new Float32Array(t._buffer,4*V.bounds,5)),t}return te(t,e),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},set:function(e){this._u32view[V.view]=e.id,this._view=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return!!this._u32view[V.active]},set:function(e){this._u32view[V.active]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._u32view[V.depth]},set:function(e){this._u32view[V.depth]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowDistance",{get:function(){return this._f32view[V.shadowDistance]},set:function(e){this._f32view[V.shadowDistance]=e,this._updateBounds(!1),this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowFilterMode",{get:function(){return this._u32view[V.shadowFilterMode]},set:function(e){this._u32view[V.shadowFilterMode]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowMode",{get:function(){return this._u32view[V.shadowMode]},set:function(e){this._u32view[V.shadowMode]=e,this._tilingOffsets.set(e<2?[1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0]:[.5,.5,0,0,.5,.5,.5,0,.5,.5,0,.5,.5,.5,.5,.5]),this._updateBounds(!0),this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightSpaceMatrices",{get:function(){return this._lightSpaceMatrices},enumerable:!1,configurable:!0}),t.prototype.draw=function(e,t,n){Pe.drawLight(this.__handle,e.__handle,t,n)},t.prototype.prepareUniforms=function(e){e.setUniform("u_csmLightSpaceMatrices",this.lightSpaceMatrices),e.setUniform("u_shadowTilingOffsets",this._tilingOffsets),e.setUniform("u_csmFarBounds",this._farBounds)},t.prototype.setLightDir=function(e,t,n){Math.abs(e-this._f32view[V.lightDir])<1e-6&&Math.abs(t-this._f32view[V.lightDir+1])<1e-6&&Math.abs(n-this._f32view[V.lightDir+2])<1e-6||(this._f32view[V.lightDir]=e,this._f32view[V.lightDir+1]=t,this._f32view[V.lightDir+2]=n,this._setDirty())},t.prototype.setCascadedSplits=function(e,t,n){},t.prototype._updateBounds=function(e){var t=.3,n=this.shadowDistance,i=this.shadowMode;if(e){var r=n/t;this._bounds[0]=t;for(var o=1;o<i;o+=1){var a=o/i,s=t*Math.pow(r,a)*.75+.25*(t+(n-t)*a);this._bounds[o]=s,this._setSplitPercents(o-1,s/n)}this._bounds[i]=n,this._setSplitPercents(i-1,1)}else{for(o=1;o<i;o+=1){s=this._cascadedSplits[o-1]*n;this._bounds[o]=s}this._bounds[i]=n}},t.prototype._adjustSplitPercents=function(e,t){return e<this.shadowMode/2&&(t=Math.min(t,this._cascadedSplits[e+1])),this._setSplitPercents(e,t)},t.prototype._setSplitPercents=function(e,t){var n=this.shadowMode/2;return e>=n?0:e===n-1?1:t},t.prototype._setDirty=function(){this._handle.setSharedDirty()},t.OFFSETS=V,t}(Ce),ke=function(){function e(){}return Object.defineProperty(e.prototype,"float32View",{get:function(){return this._nativePool._f32view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint32View",{get:function(){return this._nativePool._u32view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._nativeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poolId",{get:function(){return this._poolId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poolIndex",{get:function(){return this._poolIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poll",{get:function(){return this._nativePool.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsing",{get:function(){return this._using},set:function(e){this._using=e},enumerable:!1,configurable:!0}),e.prototype._init=function(e,t){this._nativeId=e,this._poolId=-65473&e,this._poolIndex=e&F,this._nativePool=t[this._poolId],this._using=!0},e.prototype.setRawBuffer=function(e){this._nativePool._f32view.set(e,this.entityOffset)},e}(),Ne=function(){function e(e){this._index=0,this._size=null!=e?e:500,this._array=new Array(this._size)}return e.prototype.push=function(e){this._index>=this._size&&(this._size*=2,this._array.length=this._size),this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},e}(),Me=function(e){function t(t){var n=e.call(this)||this;return n._init(t),n._initU32View(),n}return te(t,e),t}(Ce),Le=function(){function e(e,t,n){this.pools={},this._poolIndex=0,this._poolUsedLength=0,this._poolLength=0,this._disposedIds=new Ne,this._template=e,this._templateView=t,this._allocateFunc=n}return e.prototype._enlargePool=function(e){var t=this._allocateFunc(e),n=new Me(t);this._poolIndex=n.id,this.pools[n.id]=n,this._poolLength+=e},e.prototype.allocateOne=function(){if(this._disposedIds.size()>0)return this._poolUsedLength++,this._disposedIds.pop();this._poolUsedLength>=this._poolLength&&this._enlargePool(1024);var e=this._poolIndex;return this._poolIndex+=64,this._poolUsedLength++,e},e.prototype.dispose=function(e){e.isUsing&&(this._disposedIds.push(e.id),this._poolUsedLength--,e.setRawBuffer(this._templateView),e.isUsing=!1)},e}(),Be=ye.worker,Fe=new Uint32Array(new ArrayBuffer(4*j.size)),Ue=new Float32Array(Fe.buffer),We=function(e){function t(n){var i=e.call(this)||this,r=t.POLL_MANAGER.allocateOne();return i._init(r,t.POLL_MANAGER.pools),i.entityOffset=(i._poolIndex>>6)*j.size,i._activeOffset=i.entityOffset+j.active,i._layerOffset=i.entityOffset+j.layer,i._boundingBallCenterOffset=i.entityOffset+j.boundingBallCenter,i._boundingBallRadiusOffset=i.entityOffset+j.boundingBallRadius,i._entityIdOffset=i.entityOffset+j.entityId,i}return te(t,e),t.prototype.getActive=function(){return 0!=(this._nativePool._u32view[this._activeOffset]&j.dfActive)},t.prototype.setActive=function(e){e?this._nativePool._u32view[this._activeOffset]|=j.dfActive:this._nativePool._u32view[this._activeOffset]&=~j.dfActive},t.prototype.getLayer=function(){return this._nativePool._u32view[this._layerOffset]},t.prototype.setLayer=function(e){this._nativePool._u32view[this._layerOffset]=e},t.prototype.getBoundingBallCenter=function(){return this._boundingBallCenter||(this._boundingBallCenter=new Float32Array(this._nativePool._buffer,4*this._boundingBallCenterOffset,3)),this._boundingBallCenter},t.prototype.setBoundingBallCenter=function(e,t){void 0===t&&(t=0),e[t]===this._nativePool._f32view[this._boundingBallCenterOffset]&&e[t+1]===this._nativePool._f32view[this._boundingBallCenterOffset+1]&&e[t+2]===this._nativePool._f32view[this._boundingBallCenterOffset]+3||(3===e.length?this._nativePool._f32view.set(e,this._boundingBallCenterOffset):(this._nativePool._f32view[this._boundingBallCenterOffset]=e[t],this._nativePool._f32view[this._boundingBallCenterOffset+1]=e[t+1],this._nativePool._f32view[this._boundingBallCenterOffset+2]=e[t+2]))},t.prototype.getBoundingBallRadius=function(){return this._nativePool._f32view[this._boundingBallRadiusOffset]},t.prototype.setBoundingBallRadius=function(e){this._nativePool._f32view[this._boundingBallRadiusOffset]=e},t.prototype.bindEntity=function(e){this._bindEntityNative(e)},t.prototype.destroy=function(){this._unbindEntityNative(),t.POLL_MANAGER.dispose(this)},t.prototype._bindEntityNative=function(e){this.uint32View[this._entityIdOffset]=e.id},t.prototype._unbindEntityNative=function(){this.uint32View[this._entityIdOffset]=0},t.POLL_MANAGER=new Le(Fe,Ue,(function(e){return Be.createCullingComponentPool(e)})),t}(ke),je=ye.worker,Ge=function(e){function t(t,n){var i=e.call(this)||this,r=i._createNativeObj(t,n);return r.id<0||!r.data||(i._init(r),i._initU32View(),i._macros=n.macros,i._meshCount=n.meshCount,i._uniforms=n.uniformBlock),i}return te(t,e),t.CREATE_FAKE=function(e,t){return new Ve(e,t)},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"meshCount",{get:function(){return this._meshCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"castShadow",{get:function(){return!!this._u32view[H.castShadow]},set:function(e){this._u32view[H.castShadow]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dynamicBatch",{get:function(){return!!this._u32view[H.dynamicBatch]},set:function(e){this._u32view[H.dynamicBatch]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skinSkeleton",{set:function(e){this._u32view[H.skinHandle]=e.id,this._skinSkeleton=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bindTarget",{set:function(e){this._u32view[H.bindTarget]=e?e.id:0,this._bindTarget=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"macros",{get:function(){return this._macros},enumerable:!1,configurable:!0}),t.prototype._createNativeObj=function(e,t){return je.createRenderComponent(t.meshCount,t.uniformBlock.__handle,e.id,t.culling?t.culling.id:0,t.renderType,t.macros)},t.prototype.changeMacros=function(e){this._macros=this._macros||{},Object.assign(this._macros,e),je.changeMeshMacros(this.__handle,this._macros,!0)},t.prototype.getStartIndex=function(e){return this._u32view[H.start+H.size*e+H.startIndex]},t.prototype.setStartIndex=function(e,t){this._u32view[H.start+H.size*e+H.startIndex]=t},t.prototype.getNumIndices=function(e){return this._u32view[H.start+H.size*e+H.numIndices]},t.prototype.setNumIndices=function(e,t){this._u32view[H.start+H.size*e+H.numIndices]=t},t.prototype.getVertexBuffer=function(e){return this._vertexes[e]},t.prototype.setVertexBuffer=function(e,t){this._vertexes||(this._vertexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.vertexBufferId]=t.id,this._vertexes[e]=t},t.prototype.getIndexBuffer=function(e){return this._indexes[e]},t.prototype.setIndexBuffer=function(e,t){this._indexes||(this._indexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.indexBufferId]=t.id,this._indexes[e]=t},t.prototype.getVertexData=function(e){return this._vertexes&&this._vertexes[e]},t.prototype.setVertexData=function(e,t){this._vertexes||(this._vertexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.vertexBufferId]=t.id,this._vertexes[e]=t},t.prototype.getIndexData=function(e){return this._indexes&&this._indexes[e]},t.prototype.setIndexData=function(e,t){this._indexes||(this._indexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.indexBufferId]=t.id,this._indexes[e]=t},t.prototype.getMaterial=function(e){return this._materials&&this._materials[e]},t.prototype.setMaterial=function(e,t){this._materials||(this._materials=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.materialId]=t?t.id:0,this._materials[e]=t},t.prototype.fastSet=function(e,t,n,i,r){this._vertexes=e,this._indexes=t,this._materials=n;for(var o=0;o<this._meshCount;o+=1)this.setVertexBuffer(o,e[o]),this.setIndexBuffer(o,t[o]),this.setMaterial(o,n[o]),this.setStartIndex(o,i[o]),this.setNumIndices(o,r[o])},t.prototype.setDirty=function(){this._handle.setSharedDirty&&this._handle.setSharedDirty()},t.prototype.copyStates=function(e){e._u32view.length<this._u32view.length?this._u32view.set(e._u32view,0):this._u32view.set(new Uint32Array(e._u32view.buffer,0,this._u32view.length),0),this._materials=e._materials,this._vertexes=e._vertexes,this._indexes=e._indexes},t.OFFSETS=H,t}(Ce),Ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._createNativeObj=function(e,t){return{id:0,data:new ArrayBuffer(4*(H.start+H.size*t.meshCount)),setSharedDirty:function(){}}},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},set:function(e){this._uniforms=e},enumerable:!1,configurable:!0}),t}(Ge),He=ye.worker,ze=function(e){function t(t,n){var i=e.call(this)||this;i.flag=n,i._boneNum=0,i._boneNum=t;var r=He.createSkinning(t,n);return r.id<0||!r.data||(i._init(r),i._initU32View()),i}return te(t,e),t.UPDATE_MATS=function(e,t){He.updateSkinnings(e,t)},Object.defineProperty(t.prototype,"boneNum",{get:function(){return this._boneNum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneInverseModel",{get:function(){return this._boneInverseModel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneOffsetMatrices",{get:function(){return this._boneOffsetMatrices},enumerable:!1,configurable:!0}),t.prototype.setBoneMatrix=function(e,t,n){var i=this._boneNum;if(t.length===i&&n.length===i){for(var r=[],o=0;o<i;o++)r.push(n[o].id);this._u32view[Y.boneInverseModelId]=e.id,this._u32view.set(t,Y.boneIndices);var a=Y.boneIndices+i*Y.perBoneIndices;this._u32view.set(r,a),this._boneOffsetMatrices=new Float32Array(this._buffer,this._byteOffset+4*(Y.boneIndices+i*(Y.perBoneIndices+Y.perBoneEntityId)),i*(1&this.flag?12:16)),this._boneInverseModel=e}else console.warn("setBoneMatrix Error")},t.prototype.getBoneNum=function(){return this._boneNum},t.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},t}(Ce),Ze=ye.worker,Ye=new Float32Array(new ArrayBuffer(4*U.size));Ye.set([0,0,0,1,1],0);var $e=function(e){function t(){var n=e.call(this)||this,i=t.POLL_MANAGER.allocateOne();return n._init(i,t.POLL_MANAGER.pools),n.entityOffset=(n._poolIndex>>6)*U.size,n.localRotationOffset=n.entityOffset+U.rotation,n.localPositionOffset=n.entityOffset+U.position,n.localScaleOffset=n.entityOffset+U.scale,n.worldMatrixOffset=n.entityOffset+U.worldMatrix,n.active=!0,n}return te(t,e),t.prototype.addChild=function(e){Ze.eventBridge.entityAddChild(this.id,e.id)},t.prototype.addChildAtIndex=function(e,t){Ze.eventBridge.entityAddChildAtIndex(this.id,e.id,t)},t.prototype.removeFromParent=function(){Ze.eventBridge.entityRemoveFromParent(this.id)},t.prototype.setAsRoot=function(){Ze.eventBridge.setRootEntity(this.id)},t.prototype.destroy=function(){this.removeFromParent(),t.POLL_MANAGER.dispose(this)},t.prototype.clear=function(){Ze.eventBridge.entityClear(this.id)},t.prototype.setLocalMatrixDirty=function(){Ze.eventBridge.entitySetLocalMatrixDirty(this.id)},Object.defineProperty(t.prototype,"active",{set:function(e){Ze.eventBridge.entitySetActive(this.id,e)},enumerable:!1,configurable:!0}),t.POLL_MANAGER=new Le(Ye,Ye,(function(e){return Ze.createNodePool(e,!1)})),t.OFFSETS=U,t}(ke),qe=function(){function e(e,t){this._ctor=e,this._index=0,this._size=null!=t?t:500,this._array=new e(this._size)}return e.prototype.push=function(e){if(this._index>=this._size){var t=new this._ctor(2*this._size);t.set(this._array),this._array=t,this._size*=2}this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},Object.defineProperty(e.prototype,"buffer",{get:function(){return this._array.buffer},enumerable:!1,configurable:!0}),e}(),Qe=ye.worker,Je=new Uint32Array(new ArrayBuffer(4*W.size)),Xe=new Float32Array(Je.buffer);Je[0]=1,Xe.set([0,0,0,1],1),Xe.set([0,0,0],5),Xe.set([1,1,1],8);var Ke=function(e){function t(){var n=e.call(this)||this,i=t.POLL_MANAGER.allocateOne();return n._init(i,t.POLL_MANAGER.pools),n.entityOffset=(n._poolIndex>>6)*W.size,n.localRotationTypeOffset=n.entityOffset+W.rotationType,n.localQuaternionOffset=n.entityOffset+W.rotation,n.localPositionOffset=n.entityOffset+W.position,n.localScaleOffset=n.entityOffset+W.scale,n.worldMatrixOffset=n.entityOffset+W.worldOffset,n.active=!0,n}return te(t,e),t.CREATE_TREE=function(e,n,i,r){void 0===r&&(r=!1),t._CREATE_TREE_IDS.clear();for(var o=0;o<e;o++)i[o]=new t,t._CREATE_TREE_IDS.push(i[o].id);var a=Qe.createNodeTree(e,t._CREATE_TREE_IDS.buffer,n,r,!0);if(!a)for(o=0;o<e;o++)t.POLL_MANAGER.dispose(i[o]);return a},t.prototype.setUsingEuler=function(e){e?this._nativePool._u32view[this.localRotationTypeOffset]&=~W.dfRotationType:this._nativePool._u32view[this.localRotationTypeOffset]|=W.dfRotationType},t.prototype.isUsingEuler=function(){return 0==(this._nativePool._u32view[this.localRotationTypeOffset]&W.dfRotationType)},t.prototype.addChild=function(e){Qe.eventBridge.entityAddChild(this.id,e.id)},t.prototype.addChildAtIndex=function(e,t){Qe.eventBridge.entityAddChildAtIndex(this.id,e.id,t)},t.prototype.removeFromParent=function(){Qe.eventBridge.entityRemoveFromParent(this.id)},t.prototype.setAsRoot=function(){Qe.eventBridge.setRootEntity(this.id)},t.prototype.destroy=function(){this.removeFromParent(),t.POLL_MANAGER.dispose(this)},t.prototype.clear=function(e,n){for(var i=0;i<n;i++)t.POLL_MANAGER.dispose(e[i]);Qe.eventBridge.entityClear(this.id)},t.prototype.setLocalMatrixDirty=function(){Qe.eventBridge.entitySetLocalMatrixDirty(this.id)},Object.defineProperty(t.prototype,"active",{set:function(e){Qe.eventBridge.entitySetActive(this.id,e)},enumerable:!1,configurable:!0}),t.POLL_MANAGER=new Le(Je,Xe,(function(e){return Qe.createNodePool(e,!0)})),t.OFFSETS=W,t._CREATE_TREE_IDS=new qe(Uint32Array),t}(ke),et=ye.worker,tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._createNativeModel=function(e,t){var n;e===a.EDataModelType.AnimationClip?n=et.createAnimationClipModel(t):e===a.EDataModelType.SkeletonBoneInverse&&(n=et.createBoneInverseModel(t)),this._handle=n},t}(Ae),nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype.setAnimationClip=function(e){this._createNativeModel(a.EDataModelType.AnimationClip,e)},t}(tt),it=ye.worker,rt=function(e){function t(t,n,i,r,o,a,s,c){var l=e.call(this)||this;return l._handle=it.createAnimationClipBinding(t,n,i,r,o,a,s,c),l}return te(t,e),t.prototype.rebind=function(e,t,n,i,r,o,a,s,c,l){return it.rebindAnimationClipBinding(this.__handle,e,t,n,i,r,o,a,s,c,l)},t.prototype.update=function(e,t,n,i,r,o,a,s,c){return it.updateAnimationClipBinding(this.__handle,e,t,n,i,r,o,a,s,c)},t.prototype.writeDefaultValues=function(){it.writeAnimationClipBindingDefaultValues(this.__handle)},t}(Ae),ot=ye.worker,at=function(e){function t(t){var n=e.call(this)||this;n.layerCount=t,n._handle=ot.createAnimatorControllerModel(t),n._uint32View=new Uint32Array(n._handle.data),n._f32View=new Float32Array(n._handle.data),n._blendStates=new Array(t);for(var i=0;i<t;i++)n._uint32View[1+3*i]=1,n._f32View[1+3*i+1]=0,n._f32View[1+3*i+2]=0;return n}return te(t,e),t.UPDATE_ANIMATOR_CONTROLLERS=function(e,t){ot.updateAnimatorControllers(e,t)},t.prototype.setAnimationClipBinding=function(e){this._uint32View[0]=e?e.id:0,this._binding=e},t.prototype.setLayerBlendType=function(e,t){this._uint32View[1+3*e]=t},t.prototype.setLayerWeight=function(e,t){this._f32View[1+3*e+1]=t},t.prototype.setLayerBlend=function(e,t){this._uint32View[1+3*e+2]=t?t.id:0,this._blendStates[e]=t},t.prototype.setLayerMask=function(e,t){ot.setAnimatorControllerModelMaskAtIndex(this.__handle,e,t)},t.prototype.update=function(){ot.updateAnimatorControllerModel(this.__handle)},t.prototype.destroy=function(){this._binding=null,this._blendStates=null},t}(Ae),st=ye.worker,ct=function(e){function t(t){var n=e.call(this)||this;n.count=t,n._index=0,n._handle=st.createAnimatorControllerStateModel(t),n._f32View=new Float32Array(n._handle.data),n._uint32View=new Uint32Array(n._handle.data);for(var i=0;i<t;i++)n._uint32View[5*i+3]=0,n._f32View[5*i+3+1]=0,n._f32View[5*i+3+2]=0,n._uint32View[5*i+3+3]=0,n._f32View[5*i+3+4]=0;return n}return te(t,e),Object.defineProperty(t.prototype,"weight",{get:function(){return this._f32View[0]},set:function(e){this._f32View[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useDefault",{get:function(){return this._f32View[1]},set:function(e){this._f32View[1]=e},enumerable:!1,configurable:!0}),t.prototype.resetBlendInfo=function(){for(var e=0;e<this.count;e++)this._f32View[5*e+3+1]=0,this._f32View[5*e+3+2]=0;this._index=0},t.prototype.setNextState=function(e){this._uint32View[2]=e?e.id:0,this._nextState=e},t.prototype.setBlendInfo=function(e,t,n,i,r){return!(this._index>=this.count)&&(this._uint32View[5*this._index+3]=e.id,this._f32View[5*this._index+3+1]=t,this._f32View[5*this._index+3+2]=n,this._uint32View[5*this._index+3+3]=i?i.id:this._uint32View[5*this._index+3],this._f32View[5*this._index+3+4]=r,this._index++,!0)},t}(Ae),lt=function(e){function t(t){var n=e.call(this)||this;return n._init(t),n}return te(t,e),Object.defineProperty(t.prototype,"dataLength",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset+4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrayBuffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t}(Ce),ut=16384,dt=32768,ht=393216,pt=15728640;function ft(e,t){return-8&e|t<<0}function gt(e,t){return-57&e|t<<3}function _t(e,t){return-449&e|t<<6}function mt(e,t){return-3585&e|t<<9}function yt(e,t){return-12289&e|t<<12}function vt(e,t){return t?e|ut:-16385&e}function At(e,t){return-393217&e|(1===t?0:t<<17)}function bt(e,t){return-15728641&e|t-1<<20}function wt(e,t){return t?e|dt:-32769&e}function Et(e){return(7&e)>>0}function Tt(e){return(56&e)>>3}function St(e){return(448&e)>>6}var Ct=2147483648;function It(e,t){return t?e|Ct:2147483647&e}function xt(e){return!!(e&Ct)}var Dt=1073741824;function Ot(e,t){return t?e|Dt:-1073741825&e}function Pt(e){return!!(e&Dt)}var Rt=16776960;function kt(e,t){return 4294963455&e|t<<8}function Nt(e,t){return 4294905855&e|t<<8<<4}function Mt(e,t){return 4293984255&e|t<<8<<8}function Lt(e,t){return 4279238655&e|t<<8<<12}function Bt(e){return(e&Rt)>>8&15}function Ft(e){return(e&Rt)>>8>>4&15}function Ut(e){return(e&Rt)>>8>>8&15}function Wt(e){return(e&Rt)>>8>>12&15}var jt=1056964608;function Gt(e,t){return 4043309055&e|t<<24}function Vt(e,t){return 3489660927&e|t<<24<<3}function Ht(e){return(e&jt)>>24&7}var zt=240;function Zt(e,t){return-241&e|t<<4}function Yt(e){return 0!=(e&zt)}function $t(e){return(e&zt)>>4}var qt=255;function Qt(e,t){return-256&e|(255&t)<<0}function Jt(e){return(e&qt)>>0}var Xt=65280;function Kt(e,t){return-65281&e|t<<8}function en(e){return(e&Xt)>>8}var tn=983040;function nn(e,t){return-983041&e|t<<16}function rn(e){return 0!=(e&tn)}function on(e){return(e&tn)>>16}var an=20,sn=4293918720;function cn(e,t){return 4279238655&e|t<<an}function ln(e,t){return 4043309055&e|t<<an<<4}function un(e,t){return 268435455&e|t<<an<<8}function dn(e){return(e&sn)>>an&15}function hn(e){return(e&sn)>>an>>4&15}function pn(e){return(e&sn)>>an>>8&15}var fn=255;function gn(e,t){return-256&e|(255&t)<<0}function _n(e){return e&fn}var mn=768;function yn(e,t){return-769&e|t<<8}function vn(e){return(e&mn)>>8}function An(e){return!!(e&mn)}var bn=14336;function wn(e,t){return-14337&e|t<<11}function En(e){return(e&bn)>>11}var Tn=ye.worker,Sn=function(e){function t(t,n,i,r,o,s){var c,l=e.call(this)||this,u=Tn.createEffect(t,n,i,r,o,s);if(u.id<0||!u.data)return l;l._handle=u,l._init(u),l._initU32View();for(var d=0;d<n;d+=1){var h=d*z.size+z.colorDepth;l._u32view[h]=(c=l._u32view[h],!0?15|c:-16&c),l._u32view[h]=Mt(l._u32view[h],a.EBlendFactor.ZERO),l._u32view[h]=Lt(l._u32view[h],a.EBlendFactor.ONE)}return l._passCount=n,l}return te(t,e),Object.defineProperty(t.prototype,"passCount",{get:function(){return this._passCount},enumerable:!1,configurable:!0}),t.prototype.warmUp=function(){return this._handle.warmUp()},t.prototype.getBlendOn=function(e){return Pt(this._u32view[e*z.size+z.colorDepth])},t.prototype.setBlendOn=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=Ot(this._u32view[n],t)},t.prototype.getBlendSrc=function(e){return Bt(this._u32view[e*z.size+z.colorDepth])},t.prototype.setBlendSrc=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=kt(this._u32view[n],t),this._u32view[n]=Mt(this._u32view[n],t)},t.prototype.getBlendDst=function(e){return Ft(this._u32view[e*z.size+z.colorDepth])},t.prototype.setBlendDst=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=Nt(this._u32view[n],t),this._u32view[n]=Lt(this._u32view[n],t)},t.prototype.getBlendSrcRGB=function(e){return Bt(this._u32view[e*z.size+z.colorDepth])},t.prototype.setBlendSrcRGB=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=kt(this._u32view[n],t)},t.prototype.getBlendSrcAlpha=function(e){return Ut(this._u32view[e*z.size+z.colorDepth])},t.prototype.setBlendSrcAlpha=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=Mt(this._u32view[n],t)},t.prototype.getBlendDstRGB=function(e){return Ft(this._u32view[e*z.size+z.colorDepth])},t.prototype.setBlendDstRGB=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=Nt(this._u32view[n],t)},t.prototype.getBlendDstAlpha=function(e){return Wt(this._u32view[e*z.size+z.colorDepth])},t.prototype.setBlendDstAlpha=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=Lt(this._u32view[n],t)},t.prototype.getBlendFunc=function(e){return Ht(this._u32view[e*z.size+z.colorDepth])},t.prototype.setBlendFunc=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=Gt(this._u32view[n],t),this._u32view[n]=Vt(this._u32view[n],t)},t.prototype.getDepthTestOn=function(e){return Yt(this._u32view[e*z.size+z.colorDepth])},t.prototype.setDepthTestOn=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=Zt(this._u32view[n],t?a.ECompareFunc.LEQUAL:0)},t.prototype.getDepthTestComp=function(e){return $t(this._u32view[e*z.size+z.colorDepth])},t.prototype.setDepthTestComp=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=Zt(this._u32view[n],t)},t.prototype.getDepthWrite=function(e){return xt(this._u32view[e*z.size+z.colorDepth])},t.prototype.setDepthWrite=function(e,t){var n=e*z.size+z.colorDepth;this._u32view[n]=It(this._u32view[n],t)},t.prototype.getCullFace=function(e){return vn(this._u32view[e*z.size+z.state])},t.prototype.setCullFace=function(e,t){var n=e*z.size+z.state;this._u32view[n]=yn(this._u32view[n],t)},t.prototype.getCullOn=function(e){return An(this._u32view[e*z.size+z.state])},t.prototype.setCullOn=function(e,t){var n=e*z.size+z.state;this._u32view[n]=yn(this._u32view[n],t?a.ECullMode.BACK:a.ECullMode.NONE)},t.prototype.getPrimitiveType=function(e){return En(this._u32view[e*z.size+z.state])},t.prototype.setPrimitiveType=function(e,t){var n=e*z.size+z.state;this._u32view[n]=wn(this._u32view[n],t)},t.prototype.getStencilTestOn=function(e){return rn(this._u32view[e*z.size+z.fstencil])},t.prototype.setStencilTestOn=function(e,t){var n=e*z.size+z.bstencil,i=nn(this._u32view[n],t?a.ECompareFunc.LEQUAL:0);this._u32view[n]=i,n=e*z.size+z.fstencil,this._u32view[n]=i},t.prototype.getStencilComp=function(e){return on(this._u32view[e*z.size+z.fstencil])},t.prototype.setStencilComp=function(e,t){var n=e*z.size+z.bstencil,i=nn(this._u32view[n],t);this._u32view[n]=i,n=e*z.size+z.fstencil,this._u32view[n]=i},t.prototype.getStencilPass=function(e){return pn(this._u32view[e*z.size+z.fstencil])},t.prototype.setStencilPass=function(e,t){var n=e*z.size+z.bstencil,i=un(this._u32view[n],t);this._u32view[n]=i,n=e*z.size+z.fstencil,this._u32view[n]=i},t.prototype.getStencilFail=function(e){return dn(this._u32view[e*z.size+z.fstencil])},t.prototype.setStencilFail=function(e,t){var n=e*z.size+z.bstencil,i=cn(this._u32view[n],t);this._u32view[n]=i,n=e*z.size+z.fstencil,this._u32view[n]=i},t.prototype.getStencilZFail=function(e){return hn(this._u32view[e*z.size+z.fstencil])},t.prototype.setStencilZFail=function(e,t){var n=e*z.size+z.bstencil,i=ln(this._u32view[n],t);this._u32view[n]=i,n=e*z.size+z.fstencil,this._u32view[n]=i},t.prototype.getStencilWriteMask=function(e){return _n(this._u32view[e*z.size+z.fstencil])},t.prototype.setStencilWriteMask=function(e,t){var n=e*z.size+z.bstencil,i=gn(this._u32view[n],t);this._u32view[n]=i,n=e*z.size+z.fstencil,this._u32view[n]=i},t.prototype.getStencilReadMask=function(e){return Jt(this._u32view[e*z.size+z.fstencil])},t.prototype.setStencilReadMask=function(e,t){var n=e*z.size+z.bstencil,i=Qt(this._u32view[n],t);this._u32view[n]=i,n=e*z.size+z.fstencil,this._u32view[n]=i},t.prototype.getStencilRef=function(e){return en(this._u32view[e*z.size+z.fstencil])},t.prototype.setStencilRef=function(e,t){var n=e*z.size+z.bstencil,i=Kt(this._u32view[n],t);this._u32view[n]=i,n=e*z.size+z.fstencil,this._u32view[n]=i},t.prototype.getUseMaterialStates=function(e){return!!(1&this._u32view[e*z.size+z.useMaterialStates])},t.prototype.setUseMaterialStates=function(e,t){this._u32view[e*z.size+z.useMaterialStates]=t?4294967295:0},t.prototype._getUseMaterialStateMask=function(e,t){return function(e,t){return!!(e&1<<t)}(this._u32view[e*z.size+z.useMaterialStates],t)},t.prototype._setUseMaterialStateMask=function(e,t,n){this._u32view[e*z.size+z.useMaterialStates]=function(e,t,n){return n?e|t:e&~t}(this._u32view[e*z.size+z.useMaterialStates],t,n)},t.prototype.getUseMaterialStateBlendOn=function(e){return this._getUseMaterialStateMask(e,1)},t.prototype.setUseMaterialStateBlendOn=function(e,t){return this._setUseMaterialStateMask(e,1,t)},t.prototype.getUseMaterialStateBlendSrcRGB=function(e){return this._getUseMaterialStateMask(e,2)},t.prototype.setUseMaterialStateBlendSrcRGB=function(e,t){return this._setUseMaterialStateMask(e,2,t)},t.prototype.getUseMaterialStateBlendSrcAlpha=function(e){return this._getUseMaterialStateMask(e,3)},t.prototype.setUseMaterialStateBlendSrcAlpha=function(e,t){return this._setUseMaterialStateMask(e,3,t)},t.prototype.getUseMaterialStateBlendDstRGB=function(e){return this._getUseMaterialStateMask(e,4)},t.prototype.setUseMaterialStateBlendDstRGB=function(e,t){return this._setUseMaterialStateMask(e,4,t)},t.prototype.getUseMaterialStateBlendDstAlpha=function(e){return this._getUseMaterialStateMask(e,5)},t.prototype.setUseMaterialStateBlendDstAlpha=function(e,t){return this._setUseMaterialStateMask(e,5,t)},t.prototype.getUseMaterialStateBlendFunc=function(e){return this._getUseMaterialStateMask(e,6)},t.prototype.setUseMaterialStateBlendFunc=function(e,t){return this._setUseMaterialStateMask(e,6,t)},t.prototype.getUseMaterialStateDepthTestOn=function(e){return this._getUseMaterialStateMask(e,7)},t.prototype.setUseMaterialStateDepthTestOn=function(e,t){return this._setUseMaterialStateMask(e,7,t)},t.prototype.getUseMaterialStateDepthTestComp=function(e){return this._getUseMaterialStateMask(e,8)},t.prototype.setUseMaterialStateDepthTestComp=function(e,t){return this._setUseMaterialStateMask(e,8,t)},t.prototype.getUseMaterialStateDepthWrite=function(e){return this._getUseMaterialStateMask(e,9)},t.prototype.setUseMaterialStateDepthWrite=function(e,t){return this._setUseMaterialStateMask(e,9,t)},t.prototype.getUseMaterialStateCullOn=function(e){return this._getUseMaterialStateMask(e,10)},t.prototype.setUseMaterialStateCullOn=function(e,t){return this._setUseMaterialStateMask(e,10,t)},t.prototype.getUseMaterialStateCullFace=function(e){return this._getUseMaterialStateMask(e,11)},t.prototype.setUseMaterialStateCullFace=function(e,t){return this._setUseMaterialStateMask(e,11,t)},t.prototype.getUseMaterialStatePrimitiveType=function(e){return this._getUseMaterialStateMask(e,12)},t.prototype.setUseMaterialStatePrimitiveType=function(e,t){return this._setUseMaterialStateMask(e,12,t)},t.prototype.getUseMaterialStateStencilTestOn=function(e){return this._getUseMaterialStateMask(e,13)},t.prototype.setUseMaterialStateStencilTestOn=function(e,t){return this._setUseMaterialStateMask(e,13,t)},t.prototype.getUseMaterialStateStencilTestComp=function(e){return this._getUseMaterialStateMask(e,14)},t.prototype.setUseMaterialStateStencilTestComp=function(e,t){return this._setUseMaterialStateMask(e,14,t)},t.prototype.getUseMaterialStateStencilTestPass=function(e){return this._getUseMaterialStateMask(e,15)},t.prototype.setUseMaterialStateStencilTestPass=function(e,t){return this._setUseMaterialStateMask(e,15,t)},t.prototype.getUseMaterialStateStencilTestFail=function(e){return this._getUseMaterialStateMask(e,16)},t.prototype.setUseMaterialStateStencilTestFail=function(e,t){return this._setUseMaterialStateMask(e,16,t)},t.prototype.getUseMaterialStateStencilTestZFail=function(e){return this._getUseMaterialStateMask(e,17)},t.prototype.setUseMaterialStateStencilTestZFail=function(e,t){return this._setUseMaterialStateMask(e,17,t)},t.prototype.showDebugInfo=function(){for(var e="",t=0;t<this._passCount;t+=1)e+="Pass: "+t+":\nPrimitiveType("+a.EPrimitiveType[this.getPrimitiveType(t)]+"),\nBlendOn("+this.getBlendOn(t)+"), BlendSrc("+a.EBlendFactor[this.getBlendSrcRGB(t)]+","+a.EBlendFactor[this.getBlendSrcAlpha(t)]+"), BlendDst("+a.EBlendFactor[this.getBlendDstRGB(t)]+","+a.EBlendFactor[this.getBlendDstAlpha(t)]+"), BlendFunc("+a.EBlendEquation[this.getBlendFunc(t)]+"),\nDepthTestOn("+this.getDepthTestOn(t)+"), DepthTestComp("+a.ECompareFunc[this.getDepthTestComp(t)]+"), DepthWrite("+this.getDepthWrite(t)+"),\nCullOn("+this.getCullOn(t)+"), CullFace("+a.ECullMode[this.getCullFace(t)]+"),\nStencilTestOn("+this.getStencilTestOn(t)+"), StencilComp("+a.ECompareFunc[this.getStencilComp(t)]+"), StencilPass("+a.EStencilOp[this.getStencilPass(t)]+"), StencilFail("+a.EStencilOp[this.getStencilFail(t)]+"), StencilZFail("+a.EStencilOp[this.getStencilZFail(t)]+"),\nStencilWriteMask("+this.getStencilWriteMask(t)+"), StencilReadMask("+this.getStencilReadMask(t)+"), StencilRef("+this.getStencilRef(t)+")\n      ";return e},t.OFFSETS=z,t}(Ce),Cn=ye.worker,In=function(e){function t(t,n,i){var r=e.call(this)||this;return r._createNativeMat(t,n,i),r.blendSrcAlpha=a.EBlendFactor.ZERO,r.blendDstAlpha=a.EBlendFactor.ONE,r.renderQueue=2e3,r._macros=t,n&&(r.effect=n),i&&(r.uniforms=i),r}return te(t,e),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},set:function(e){this._u32view[Z.effect]=e.id,this._effect=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},set:function(e){this._u32view[Z.uniformBlock]=e.id,this._uniforms=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderQueue",{get:function(){return this._u32view[Z.renderQueue]},set:function(e){this._u32view[Z.renderQueue]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useInstance",{get:function(){return!!this._u32view[Z.useInstance]},set:function(e){this._u32view[Z.useInstance]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendOn",{get:function(){return Pt(this._u32view[Z.colorDepth])},set:function(e){var t=Z.colorDepth;this._u32view[t]=Ot(this._u32view[t],e),this._u32view[Z.colorDepthMask]|=Dt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcRGB",{get:function(){return Bt(this._u32view[Z.colorDepth])},set:function(e){var t=Z.colorDepth;this._u32view[t]=kt(this._u32view[t],e),this._u32view[Z.colorDepthMask]|=3840},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcRGBChanged",{get:function(){return!!(3840&this._u32view[Z.colorDepthMask])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcAlpha",{get:function(){return Ut(this._u32view[Z.colorDepth])},set:function(e){var t=Z.colorDepth;this._u32view[t]=Mt(this._u32view[t],e),this._u32view[Z.colorDepthMask]|=983040},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrc",{set:function(e){this.blendSrcRGB=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstRGB",{get:function(){return Ft(this._u32view[Z.colorDepth])},set:function(e){var t=Z.colorDepth;this._u32view[t]=Nt(this._u32view[t],e),this._u32view[Z.colorDepthMask]|=61440},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstRGBChanged",{get:function(){return!!(61440&this._u32view[Z.colorDepthMask])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstAlpha",{get:function(){return Wt(this._u32view[Z.colorDepth])},set:function(e){var t=Z.colorDepth;this._u32view[t]=Lt(this._u32view[t],e),this._u32view[Z.colorDepthMask]|=15728640},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDst",{set:function(e){this.blendDstRGB=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendFunc",{get:function(){return Ht(this._u32view[Z.colorDepth])},set:function(e){var t=Z.colorDepth;this._u32view[t]=Gt(this._u32view[t],e),this._u32view[t]=Vt(this._u32view[t],e),this._u32view[Z.colorDepthMask]|=jt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestOn",{get:function(){return Yt(this._u32view[Z.colorDepth])},set:function(e){var t=Z.colorDepth;this._u32view[t]=Zt(this._u32view[t],e?a.ECompareFunc.LEQUAL:0),this._u32view[Z.colorDepthMask]|=zt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestComp",{get:function(){return $t(this._u32view[Z.colorDepth])},set:function(e){var t=Z.colorDepth;this._u32view[t]=Zt(this._u32view[t],e),this._u32view[Z.colorDepthMask]|=zt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthWrite",{get:function(){return xt(this._u32view[Z.colorDepth])},set:function(e){var t=Z.colorDepth;this._u32view[t]=It(this._u32view[t],e),this._u32view[Z.colorDepthMask]|=Ct},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullFace",{get:function(){return vn(this._u32view[Z.state])},set:function(e){var t=Z.state;this._u32view[t]=yn(this._u32view[t],e),this._u32view[Z.stateMask]|=mn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullOn",{get:function(){return An(this._u32view[Z.state])},set:function(e){var t=Z.state;this._u32view[t]=yn(this._u32view[t],e?a.ECullMode.BACK:a.ECullMode.NONE),this._u32view[Z.stateMask]|=mn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"primitiveType",{get:function(){return En(this._u32view[Z.state])},set:function(e){var t=Z.state;this._u32view[t]=wn(this._u32view[t],e),this._u32view[Z.stateMask]|=bn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilTestOn",{get:function(){return rn(this._u32view[Z.fstencil])},set:function(e){var t=Z.bstencil,n=nn(this._u32view[t],e?a.ECompareFunc.LEQUAL:0);this._u32view[t]=n,t=Z.fstencil,this._u32view[t]=n,this._u32view[Z.bstencilMask]|=tn,this._u32view[Z.fstencilMask]|=tn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilComp",{get:function(){return on(this._u32view[Z.fstencil])},set:function(e){var t=Z.bstencil,n=nn(this._u32view[t],e);this._u32view[t]=n,t=Z.fstencil,this._u32view[t]=n,this._u32view[Z.bstencilMask]|=tn,this._u32view[Z.fstencilMask]|=tn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilPass",{get:function(){return pn(this._u32view[Z.fstencil])},set:function(e){var t=Z.bstencil,n=un(this._u32view[t],e);this._u32view[t]=n,t=Z.fstencil,this._u32view[t]=n,this._u32view[Z.bstencilMask]|=4026531840,this._u32view[Z.fstencilMask]|=4026531840},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilFail",{get:function(){return dn(this._u32view[Z.fstencil])},set:function(e){var t=Z.bstencil,n=cn(this._u32view[t],e);this._u32view[t]=n,t=Z.fstencil,this._u32view[t]=n,this._u32view[Z.bstencilMask]|=15728640,this._u32view[Z.fstencilMask]|=15728640},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilZFail",{get:function(){return hn(this._u32view[Z.fstencil])},set:function(e){var t=Z.bstencil,n=ln(this._u32view[t],e);this._u32view[t]=n,t=Z.fstencil,this._u32view[t]=n,this._u32view[Z.bstencilMask]|=251658240,this._u32view[Z.fstencilMask]|=251658240},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilWriteMask",{get:function(){return _n(this._u32view[Z.fstencil])},set:function(e){var t=Z.state,n=gn(this._u32view[t],e);this._u32view[t]=n,t=Z.state,this._u32view[t]=n,this._u32view[Z.stateMask]|=fn,this._u32view[Z.stateMask]|=fn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilReadMask",{get:function(){return Jt(this._u32view[Z.fstencil])},set:function(e){var t=Z.bstencil,n=Qt(this._u32view[t],e);this._u32view[t]=n,t=Z.fstencil,this._u32view[t]=n,this._u32view[Z.bstencilMask]|=qt,this._u32view[Z.fstencilMask]|=qt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilRef",{get:function(){return en(this._u32view[Z.fstencil])},set:function(e){var t=Z.bstencil,n=Kt(this._u32view[t],e);this._u32view[t]=n,t=Z.fstencil,this._u32view[t]=n,this._u32view[Z.bstencilMask]|=Xt,this._u32view[Z.fstencilMask]|=Xt},enumerable:!1,configurable:!0}),t.prototype._setMask=function(e,t,n){this._u32view[e]=n?this._u32view[e]|t:this._u32view[e]&~t},t.prototype._getMask=function(e,t){return!!(this._u32view[e]&t)},Object.defineProperty(t.prototype,"blendOnMask",{get:function(){return this._getMask(Z.colorDepthMask,Dt)},set:function(e){this._setMask(Z.colorDepthMask,Dt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcRGBMask",{get:function(){return this._getMask(Z.colorDepthMask,3840)},set:function(e){this._setMask(Z.colorDepthMask,3840,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcAlphaMask",{get:function(){return this._getMask(Z.colorDepthMask,983040)},set:function(e){this._setMask(Z.colorDepthMask,983040,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcMask",{set:function(e){this.blendSrcRGBMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstRGBMask",{get:function(){return this._getMask(Z.colorDepthMask,61440)},set:function(e){this._setMask(Z.colorDepthMask,61440,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstAlphaMask",{get:function(){return this._getMask(Z.colorDepthMask,15728640)},set:function(e){this._setMask(Z.colorDepthMask,15728640,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstMask",{set:function(e){this.blendDstRGBMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendFuncMask",{get:function(){return this._getMask(Z.colorDepthMask,jt)},set:function(e){this._setMask(Z.colorDepthMask,jt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestOnMask",{get:function(){return this._getMask(Z.colorDepthMask,zt)},set:function(e){this._setMask(Z.colorDepthMask,zt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestCompMask",{get:function(){return this._getMask(Z.colorDepthMask,zt)},set:function(e){this._setMask(Z.colorDepthMask,zt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthWriteMask",{get:function(){return this._getMask(Z.colorDepthMask,Ct)},set:function(e){this._setMask(Z.colorDepthMask,Ct,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullFaceMask",{get:function(){return this._getMask(Z.stateMask,mn)},set:function(e){this._setMask(Z.stateMask,mn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullOnMask",{get:function(){return this._getMask(Z.stateMask,mn)},set:function(e){this._setMask(Z.stateMask,mn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"primitiveTypeMask",{get:function(){return this._getMask(Z.stateMask,bn)},set:function(e){this._setMask(Z.stateMask,bn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilTestOnMask",{get:function(){return this._getMask(Z.bstencilMask,tn)},set:function(e){this._setMask(Z.bstencilMask,tn,e),this._setMask(Z.fstencilMask,tn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilCompMask",{get:function(){return this._getMask(Z.bstencilMask,tn)},set:function(e){this._setMask(Z.bstencilMask,tn,e),this._setMask(Z.fstencilMask,tn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilPassMask",{get:function(){return this._getMask(Z.bstencilMask,Xt)},set:function(e){this._setMask(Z.bstencilMask,4026531840,e),this._setMask(Z.fstencilMask,4026531840,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilFailMask",{get:function(){return this._getMask(Z.bstencilMask,Xt)},set:function(e){this._setMask(Z.bstencilMask,15728640,e),this._setMask(Z.fstencilMask,15728640,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilZFailMask",{get:function(){return this._getMask(Z.bstencilMask,Xt)},set:function(e){this._setMask(Z.bstencilMask,251658240,e),this._setMask(Z.fstencilMask,251658240,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilWriteMaskMask",{get:function(){return this._getMask(Z.bstencilMask,Xt)},set:function(e){this._setMask(Z.stateMask,fn,e),this._setMask(Z.stateMask,fn,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilReadMaskMask",{get:function(){return this._getMask(Z.bstencilMask,Xt)},set:function(e){this._setMask(Z.bstencilMask,qt,e),this._setMask(Z.fstencilMask,qt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilRefMask",{get:function(){return this._getMask(Z.bstencilMask,Xt)},set:function(e){this._setMask(Z.bstencilMask,Xt,e),this._setMask(Z.fstencilMask,Xt,e)},enumerable:!1,configurable:!0}),t.prototype._createNativeMat=function(e,t,n){var i=Cn.createMaterial(e,n);i.id<0||!i.data||(this._handle=i,this._init(i),this._initU32View())},t.prototype.changeMacros=function(e){this._macros=this._macros||{},Object.assign(this._macros,e),Cn.changeMaterialMacros(this.__handle,this._macros,!0)},t.prototype.clone=function(e){var n=new t(this._macros,this._effect);return n._f32view.set(this._f32view),n.uniforms=e||this._uniforms.clone(),n},t.prototype.showDebugInfo=function(){var e="";return e+="RenderQueue("+this.renderQueue+"), PrimitiveType("+a.EPrimitiveType[this.primitiveType]+"),\nOverwrite("+this._u32view[Z.fstencilMask].toString(16)+", "+this._u32view[Z.bstencilMask].toString(16)+", "+this._u32view[Z.blendRGBAMask].toString(16)+", "+this._u32view[Z.colorDepthMask].toString(16)+", "+this._u32view[Z.stateMask].toString(16)+"),\nBlendOn("+this.blendOn+"), BlendSrc("+a.EBlendFactor[this.blendSrcRGB]+","+a.EBlendFactor[this.blendSrcAlpha]+"), BlendDst("+a.EBlendFactor[this.blendDstRGB]+","+a.EBlendFactor[this.blendDstAlpha]+"), BlendFunc("+a.EBlendEquation[this.blendFunc]+"),\nDepthTestOn("+this.depthTestOn+"), DepthTestComp("+a.ECompareFunc[this.depthTestComp]+"), DepthWrite("+this.depthWrite+"),\nCullOn("+this.cullOn+"), CullFace("+a.ECullMode[this.cullFace]+"),\nStencilTestOn("+this.stencilTestOn+"), StencilComp("+a.ECompareFunc[this.stencilComp]+"), StencilComp("+a.EStencilOp[this.stencilPass]+"), StencilFail("+a.EStencilOp[this.stencilFail]+"), StencilZFail("+a.EStencilOp[this.stencilZFail]+"),\nStencilWriteMask("+this.stencilWriteMask+"), StencilReadMask("+this.stencilReadMask+"), StencilRef("+this.stencilRef+")\n      "},t.OFFSETS=Z,t}(Ce),xn=ye.worker,Dn=function(e){function t(t){var n=e.call(this)||this,i=t;return i.colors.forEach((function(e,t){e.texture=e.texture.__handle})),i.depth.texture=i.depth.texture.__handle,t.stencil?i.stencil.texture=i.stencil.texture.__handle:i.stencil={texture:{id:0}},n._handle=xn.createRenderPass(i),n}return te(t,e),t.SCREEN_RENDER_PASS={id:0,__handle:{id:0}},t}(Ae),On=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype.setBoneInverseMatrix=function(e){var t=new Float32Array(e.length);t.set(e),this._createNativeModel(a.EDataModelType.SkeletonBoneInverse,t.buffer)},t}(tt),Pn=ye.worker,Rn=function(e){function t(t){var n=e.call(this)||this,i=t.canvas;i?(n._width=i.width,n._height=i.height):(n._width=t.width,n._height=t.height),n._type=t.type||a.ETextureType.D2,n._slice=t.slices||0,n._mips=t.mips||0,n._pixelFormat=t.pixelFormat||a.ETextureFormat.RGBA8,n._flags=n._buildFlags(t);var r=i?Pn.createAutoUpdateTextureFromCanvas(i):Pn.createTexture(n._type,n._width,n._height,n._slice,n._mips,n._pixelFormat,n._flags,t.source,t.offsets);return n._handle=r||{id:0},n}return te(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slice",{get:function(){return this._slice},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mips",{get:function(){return this._mips},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapU",{get:function(){return Ee.isWrongWrapMapping?St(this._flags):Et(this._flags)},set:function(e){Pn.updateTextureFlags(this.__handle,this._flags=Ee.isWrongWrapMapping?_t(this._flags,e):ft(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapV",{get:function(){return Ee.isWrongWrapMapping?Et(this._flags):Tt(this._flags)},set:function(e){Pn.updateTextureFlags(this.__handle,this._flags=Ee.isWrongWrapMapping?ft(this._flags,e):gt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapW",{get:function(){return Ee.isWrongWrapMapping?Tt(this._flags):St(this._flags)},set:function(e){Pn.updateTextureFlags(this.__handle,this._flags=Ee.isWrongWrapMapping?gt(this._flags,e):_t(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"magFilter",{get:function(){return(12288&this._flags)>>12},set:function(e){Pn.updateTextureFlags(this.__handle,this._flags=yt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFilter",{get:function(){return(3584&this._flags)>>9},set:function(e){Pn.updateTextureFlags(this.__handle,this._flags=mt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anisoLevel",{get:function(){return 1+((this._flags&pt)>>20)},set:function(e){Pn.updateTextureFlags(this.__handle,this._flags=bt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sampleCount",{get:function(){return(this._flags&ht)>>17},set:function(e){Pn.updateTextureFlags(this.__handle,this._flags=At(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generateMipmaps",{get:function(){return!!(this._flags&ut)},set:function(e){Pn.updateTextureFlags(this.__handle,this._flags=vt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderTarget",{get:function(){return!!(this._flags&dt)},set:function(e){Pn.updateTextureFlags(this.__handle,this._flags=wt(this._flags,e))},enumerable:!1,configurable:!0}),t.prototype.update=function(e){var t=e.level||0;Pn.updateTexture(this.__handle,t,e.slice||0,e.xoffset||0,e.yoffset||0,e.zoffset||0,e.width||this.width>>t||1,e.height||this.height>>t||1,e.buffer)},t.prototype._buildFlags=function(e){var t;return this._flags=0,Ee.isWrongWrapMapping?(e.wrapU&&(this._flags=_t(this._flags,e.wrapU)),e.wrapV&&(this._flags=ft(this._flags,e.wrapV)),e.wrapW&&(this._flags=gt(this._flags,e.wrapW))):(e.wrapU&&(this._flags=ft(this._flags,e.wrapU)),e.wrapV&&(this._flags=gt(this._flags,e.wrapV)),e.wrapW&&(this._flags=_t(this._flags,e.wrapW))),e.magFilter&&(this._flags=yt(this._flags,e.magFilter)),e.minFilter&&(this._flags=mt(this._flags,e.minFilter)),e.anisoLevel&&(this._flags=bt(this._flags,e.anisoLevel)),e.sampleCount&&(this._flags=At(this._flags,e.sampleCount)),e.generateMipmaps&&(this._flags=vt(this._flags,e.generateMipmaps)),e.isRenderTarget&&(this._flags=wt(this._flags,e.isRenderTarget)),e.isWriteOnly&&(this._flags=(t=this._flags,e.isWriteOnly?65536|t:-65537&t)),this._flags},t.prototype.showDebugInfo=function(){var e="";return e+="type("+a.ETextureType[this.type]+"), format("+a.ETextureFormat[this.pixelFormat]+"),\nwidth("+this.width+"), height("+this.height+"), slice("+this.slice+"), mips("+this.mips+"),\nwrapU("+a.EWrapMode[this.wrapU]+"), wrapV("+a.EWrapMode[this.wrapV]+"), wrapW("+a.EWrapMode[this.wrapW]+"),\nmagFilter("+a.EFilterMode[this.magFilter]+"), minFilter("+a.EFilterMode[this.minFilter]+"),\nanisoLevel("+this.anisoLevel+"), sampleCount("+this.sampleCount+"), generateMipmaps("+this.generateMipmaps+")\n    "},t}(Ae),kn=ye.worker,Nn=function(e){function t(t){var n=e.call(this)||this;return n._handle=n._createNativeObj(t),n._handle.data&&(n._f32View=new Float32Array(n._handle.data),n._u32View=new Uint32Array(n._handle.data)),n._descriptor=t,n}return te(t,e),t.CREATE_FAKE=function(e){return new Mn(e)},Object.defineProperty(t.prototype,"_dataView",{get:function(){return this._f32View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},enumerable:!1,configurable:!0}),t.prototype._createNativeObj=function(e){return kn.createUniformBlock(e.__handle)||{id:0}},t.prototype.hasKey=function(e){return this._descriptor.hasKey(e)},t.prototype.setUniform=function(e,t){var n=this._descriptor.layout[e];return!!n&&(n[0]===a.EUniformType.SAMPLER&&(t instanceof Rn?(this._textures=this._textures||{},this._textures[e]=t,t=t.id):this._textures&&(this._textures[e]=void 0)),this._descriptor.setUniform(e,t,this._f32View,this._u32View),!0)},t.prototype.getUniform=function(e){return this._descriptor.getUniform(e,this._f32View,this._u32View)},t.prototype._getFloatOffset=function(e){return this._descriptor._getFloatOffset(e)},t.prototype.setAllData=function(e){this._f32View.set(e,0)},t.prototype.clone=function(){var e=new t(this._descriptor);return e._f32View?(this._textures&&(e._textures=Object.assign({},this._textures)),e._f32View.set(this._f32View),e):e},t.prototype.copy=function(e){if(this._descriptor.id!==e._descriptor.id){var t=e.descriptor.layout;for(var n in t)if(this.hasKey(n)){var i=e.getUniform(n);this.setUniform(n,i),e._textures&&e._textures[n]&&(this._textures=this._textures||{},this._textures[n]=e._textures[n])}}else this._f32View.set(e._f32View)},t.prototype.showDebugInfo=function(){var e=this,t="";return Object.keys(this._descriptor.layout).forEach((function(n){var i=e._descriptor.getUniform(n,e._f32View,e._u32View);t+=n+": ["+("number"==typeof i?[i]:i).join(",")+"]\n"})),t},t}(Ae),Mn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._createNativeObj=function(e){return{id:0,data:new ArrayBuffer(4*e.size)}},t}(Nn),Ln=ye.worker,Bn=function(e){function t(t){var n=e.call(this)||this;n._layout={};var i=0;return t.uniforms.forEach((function(e){var t=e.type;e.type===a.EUniformType.MAT4&&(e.type=a.EUniformType.FLOAT4,e.num=4*(e.num||1));var r=void 0!==e.num?e.num:1,o=n._getLength(e.type),s=i+o*r;n._layout[e.name]=[e.type,i,r,o,t,!!e.needTranspose],i=s})),n._size=i,n._handle=Ln.createUniformBlockDescriptor(t)||{id:0},n}return te(t,e),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype._getLength=function(e){var t=0;switch(e){case a.EUniformType.FLOAT:t=1;break;case a.EUniformType.FLOAT2:t=2;break;case a.EUniformType.FLOAT3:t=3;break;case a.EUniformType.FLOAT4:t=4;case a.EUniformType.MAT2:t=4;break;case a.EUniformType.MAT3:t=9;break;case a.EUniformType.MAT4:t=16;break;case a.EUniformType.SAMPLER:t=1}return t},t.prototype.hasKey=function(e){return void 0!==this._layout[e]},t.prototype.setUniform=function(e,t,n,i){var r=this._layout[e];if(r){var o=r[0],s=r[1];switch(o){case a.EUniformType.FLOAT:case a.EUniformType.FLOAT2:case a.EUniformType.FLOAT3:case a.EUniformType.FLOAT4:case a.EUniformType.MAT2:case a.EUniformType.MAT3:case a.EUniformType.MAT4:this._setFloatArray(s,t,n);break;case a.EUniformType.SAMPLER:this._setTexture(s,t,i)}}},t.prototype._setFloatArray=function(e,t,n){n.set(t,e)},t.prototype._setTexture=function(e,t,n){n[e]=t},t.prototype.getUniform=function(e,t,n){var i=this._layout[e];if(!i)return null;var r=i[0],o=i[1],s=i[2],c=i[3];switch(r){case a.EUniformType.FLOAT:case a.EUniformType.FLOAT2:case a.EUniformType.FLOAT3:case a.EUniformType.FLOAT4:case a.EUniformType.MAT2:case a.EUniformType.MAT3:case a.EUniformType.MAT4:return new Float32Array(t.buffer,4*o,s*c);case a.EUniformType.SAMPLER:return n[o]}},t.prototype._getFloatOffset=function(e){var t=this._layout[e];return t?t[1]:-1},t}(Ae),Fn=ye.worker,Un=function(e){function t(t,n){void 0===n&&(n=!1);var i=e.call(this)||this;return i._handle=Fn.createIndexBuffer(t,n)||{id:0},i._byteSize=t.byteLength,i}return te(t,e),Object.defineProperty(t.prototype,"byteSize",{get:function(){return this._byteSize},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){Fn.updateIndexBuffer(this.__handle,e,t)},t}(Ae),Wn=ye.worker,jn=function(e){function t(t){var n=e.call(this)||this;return n._handle=Wn.createIndexData(t),n}return te(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._handle.data},enumerable:!1,configurable:!0}),t}(Ae),Gn=ye.worker,Vn=function(e){function t(t,n){var i=e.call(this)||this;return i._handle=Gn.createVertexBuffer(t,n.__handle)||{id:0},i._layout=n,i._byteSize=t.byteLength,i}return te(t,e),Object.defineProperty(t.prototype,"byteSize",{get:function(){return this._byteSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){Gn.updateVertexBuffer(this.__handle,e,t)},t}(Ae),Hn=ye.worker,zn=function(e){function t(t,n,i){var r=e.call(this)||this;return r._handle=Hn.createVertexData(t.__handle,n,i.__handle),r._layout=t,r}return te(t,e),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._handle.data},enumerable:!1,configurable:!0}),t}(Ae),Zn=ye.worker,Yn=function(e){function t(t){var n=e.call(this)||this;return n._attributes={},n._usages={},n._options=t,t.attributes.forEach((function(e){n._attributes[e.name]=e,n._usages[e.usage]=e})),n._handle=Zn.createVertexLayout(t),n}return te(t,e),Object.defineProperty(t.prototype,"stride",{get:function(){return this._options.stride},enumerable:!1,configurable:!0}),t.prototype.getConfigByName=function(e){return this._attributes[e]},t.prototype.getConfigByUsage=function(e){return this._usages[e]},t}(Ae),$n=ye.worker,qn=function(e){function t(t){var n=e.call(this)||this;return n._options=t,n._handle=$n.createVertexDataDescriptor(t),n}return te(t,e),t}(Ae),Qn=ye.worker,Jn=function(e){function t(t){var n=e.call(this)||this;return n._handle=Qn.createView(t),n}return te(t,e),t}(Ae),Xn=ye.worker,Kn=function(e){function t(t){var n=e.call(this)||this;return n._size=0,n._index=0,n._onBackendEnlarge=function(){n._resized()},n._handle=Xn.createScalableList(t,n._onBackendEnlarge),n._resized(),n}return te(t,e),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this._u32View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"usedSize",{get:function(){return this._sizeView[0]>this.size?this.size:this._sizeView[0]},set:function(e){this._sizeView[0]=e},enumerable:!1,configurable:!0}),t.prototype.enlarge=function(e){this._handle.enlarge(),this._resized()},t.prototype.begin=function(){this._index=0},t.prototype.add=function(e,t){this._index===this._size&&this.enlarge(),this._u32View[this._index++]=e},t.prototype.end=function(){this._sizeView[0]=this._index},t.prototype.reset=function(){this._sizeView[0]=0},t.prototype._resized=function(){var e=this.__handle.data.byteLength/4-1;this._u32View=new Uint32Array(this.__handle.data,4),this._sizeView=new Uint32Array(this.__handle.data,0,1),this._size=e},t}(Ae),ei=ye.worker,ti=ye.IS_VALID,ni=ye.GET_MAIN_CANVAS,ii=ye.Image,ri=ei.downloader,oi=ei.createWeakRef,ai=ei.createWeakRefSentry,si=ei.createNativeUUMap,ci=ei.createNativeSUMap,li=ei.createNativeULUMap,ui=ei.loadTTFFont,di=ei.getGlyphInfo,hi=ei.refreshNodesWorldTransform;var pi=ei.eventBridge,fi={bindEntityToBone:pi.bindEntityToBone.bind(pi),unbindEntityFromBone:pi.unbindEntityFromBone.bind(pi),bindEntitiesToBones:pi.bindEntitiesToBones.bind(pi),unbindEntitiesFromBones:pi.unbindEntitiesFromBones.bind(pi)},gi=void 0;"undefined"!=typeof window&&window.top?gi=window.top.NativeGlobal:r||(gi=NativeGlobal);var _i=void 0!==gi&&gi.Puppet,mi=void 0!==gi&&gi.Phys3D;a.AnimationClipBinding=rt,a.AnimationClipModel=nt,a.AnimatorComponent=xe,a.AnimatorControllerModel=at,a.AnimatorControllerStateModel=ct,a.CAMERA_OFFSETS=G,a.CULLING_OFFSETS=j,a.CameraComponent=Oe,a.CullingComponent=We,a.DataBuffer=lt,a.DataModel=tt,a.Downloader=ri,a.EFFECT_OFFSETS=z,a.ENTITY2D_OFFSETS=U,a.ENTITY3D_OFFSETS=W,a.Effect=Sn,a.Entity2D=$e,a.Entity3D=Ke,a.GET_MAIN_CANVAS=ni,a.IS_VALID=ti,a.Image=ii,a.IndexBuffer=Un,a.IndexData=jn,a.LIGHT_OFFSETS=V,a.LightCameraComponent=Re,a.MATERIAL_OFFSETS=Z,a.MESH_OFFSETS=H,a.Material=In,a.MeshRendererComponent=Ge,a.POOL_SUB_ID_MASK=F,a.POOL_SUB_ID_SHIT=6,a.Phys3D=mi,a.Puppet=_i,a.RENDER_ENV_OFFSETS=B,a.RenderEnv=we,a.RenderPass=Dn,a.SKINNED_SKELETON_OFFSETS=Y,a.ScalableList=Kn,a.SkeletonBoneInverseModel=On,a.SkinnedSkeletonComponent=ze,a.Texture=Rn,a.UniformBlock=Nn,a.UniformDescriptor=Bn,a.VERSION="1.0.1",a.VertexBuffer=Vn,a.VertexData=zn,a.VertexDataDescriptor=qn,a.VertexLayout=Yn,a.View=Jn,a.composeRawBufferEntity2D=function(e,t,n){var i=new ArrayBuffer(4*U.size),r=new Float32Array(i);return r[U.rotation]=e,r[U.position]=t[0],r[U.position+1]=t[1],r[U.scale]=n[0],r[U.scale+1]=n[1],r},a.composeRawBufferEntity3D=function(e,t,n,i){var r=new ArrayBuffer(4*(W.size-16)),o=new Uint32Array(r),a=new Float32Array(r);return o[W.rotationType]=e?0:1,a.set(t,W.rotation),a.set(n,W.position),a.set(i,W.scale),a},a.composeRawBufferEntity3DWhole=function(e,t,n,i){var r=new ArrayBuffer(4*W.size),o=new Uint32Array(r),a=new Float32Array(r);return o[W.rotationType]=e?0:1,a.set(t,W.rotation),a.set(n,W.position),a.set(i,W.scale),a},a.createNativeSUMap=ci,a.createNativeULUMap=li,a.createNativeUUMap=si,a.createWeakRef=oi,a.createWeakRefSentry=ai,a.crossContext=Se,a.debugPrint=function(e){},a.eventBridge=fi,a.getGlyphInfo=di,a.loadTTFFont=ui,a.refreshNodesWorldTransform=hi,a.renderEnv=Ee,a.setNodeName=function(e,t){},a.setRenderComponentName=function(e,t){},a.update=function(e){Se.flush(),ei.update(e)},Object.defineProperty(a,"__esModule",{value:!0})})),a[t]=c,c}})),(()=>{var e={2288:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});n(665);var i=n(1106);const r=(e={})=>(0,i.IN)("getABTestConfig",e)},3525:(e,t,n)=>{"use strict";n.d(t,{r3:()=>l.r3,FE:()=>l.FE,YG:()=>l.YG,zy:()=>l.zy,Fv:()=>d,IN:()=>l.IN,bb:()=>l.bb,jQ:()=>l.jQ,TG:()=>u.Z,kV:()=>p,Ld:()=>l.Ld,g9:()=>m});n(5260);var i=n(2582),r=n(9973);const o={sample:{invokeWebviewMethod:null,drawCanvas:null,createContext:null,createCanvasContext:null,canvasToTempFilePath:null,canvasGetImageData:null,canvasPutImageData:null,getShareInfo:null,pageScrollTo:null,chooseInvoiceTitle:null,ShareInfoStorage:null,arrayBufferToBase64:null,base64ToArrayBuffer:null,openSetting:null,getExtConfig:null,chooseMedia:null,chooseWeChatContact:null,uploadEncryptedFileToCDN:null,onUploadEncryptedFileToCDNProgress:null,getExtConfigSync:null,showShareMenu:null,hideShareMenu:null,updateShareMenu:null,openUrl:null,setNavigationBarColor:null,setNavigationBarAlpha:null,_getRealRoute:null,vibrateShort:null,vibrateLong:null,getSetting:null,checkIsSupportFacialRecognition:null,startFacialRecognitionVerify:null,startFacialRecognitionVerifyAndUploadVideo:null,sendBizRedPacket:null,sendGoldenRedPacket:null,openGoldenRedPacketDetail:null,showRedPackage:null,addPhoneContact:null,setScreenBrightness:null,getScreenBrightness:null,shareToWeRun:null,getWeRunData:null,uploadWeRunData:null,canIUse:null,setPageStyle:null,triggerGettingWidgetData:null,navigateToMiniProgram:null,navigateToDevMiniProgram:null,navigateBackMiniProgram:null,exitMiniProgram:null,setNavigationBarRightButton:null,onTapNavigationBarRightButton:null,setTopBarText:null,setTabBarBadge:null,removeTabBarBadge:null,showTabBarRedDot:null,hideTabBarRedDot:null,showTabBar:null,hideTabBar:null,setTabBarStyle:null,setTabBarItem:null,setEnableDebug:null,captureScreen:null,onUserCaptureScreen:null,setKeepScreenOn:null,checkIsSupportSoterAuthentication:null,startSoterAuthentication:null,checkIsSoterEnrolledInDevice:null,openDeliveryList:null,reportIDKey:null,reportKeyValue:null,setNavigationBarTitle:null,showNavigationBarLoading:null,hideNavigationBarLoading:null,startPullDownRefresh:null,stopPullDownRefresh:null,operateWXData:null,getOpenDeviceId:null,makeBluetoothPair:null,openBluetoothAdapter:null,closeBluetoothAdapter:null,getBluetoothAdapterState:null,startBluetoothDevicesDiscovery:null,stopBluetoothDevicesDiscovery:null,getBluetoothDevices:null,getConnectedBluetoothDevices:null,createBLEConnection:null,setBLEMTU:null,closeBLEConnection:null,getBLEDeviceServices:null,getBLEDeviceCharacteristics:null,notifyBLECharacteristicValueChanged:null,notifyBLECharacteristicValueChange:null,readBLECharacteristicValue:null,writeBLECharacteristicValue:null,onBluetoothDeviceFound:null,onBLEConnectionStateChanged:null,onBLEConnectionStateChange:null,onBLECharacteristicValueChange:null,onBluetoothAdapterStateChange:null,offBluetoothAdapterStateChange:null,offBluetoothDeviceFound:null,offBLEConnectionStateChanged:null,offBLEConnectionStateChange:null,offBLECharacteristicValueChange:null,createBLEPeripheralServer:null,onBLEPeripheralConnectionStateChanged:null,offBLEPeripheralConnectionStateChanged:null,startBeaconDiscovery:null,stopBeaconDiscovery:null,getBeacons:null,onBeaconUpdate:null,onBeaconServiceChange:null,startWifi:null,stopWifi:null,getWifiList:null,getConnectedWifi:null,connectWifi:null,presetWifiList:null,setWifiList:null,onGetWifiList:null,onWifiConnected:null,offGetWifiList:null,offWifiConnected:null,onEvaluateWifi:null,getHCEState:null,startHCE:null,stopHCE:null,sendHCEMessage:null,onHCEMessage:null,startLocalServiceDiscovery:null,stopLocalServiceDiscovery:null,onLocalServiceFound:null,offLocalServiceFound:null,onLocalServiceLost:null,offLocalServiceLost:null,onLocalServiceDiscoveryStop:null,offLocalServiceDiscoveryStop:null,onLocalServiceResolveFail:null,offLocalServiceResolveFail:null,redirectTo:null,reLaunch:null,navigateTo:null,switchTab:null,navigateBack:null,_triggerBeforeUnloadPage:null,_triggerBeforeShareAppMessage:null,navigateBackApplication:null,navigateBackNative:null,launchApplication:null,getStorage:null,getStorageSync:null,setStorage:null,setStorageSync:null,removeStorage:null,removeStorageSync:null,clearStorage:null,clearStorageSync:null,getStorageInfo:null,getStorageInfoSync:null,getBackgroundFetchData:null,onBackgroundFetchData:null,request:null,connectSocket:null,closeSocket:null,sendSocketMessage:null,onSocketOpen:null,onSocketClose:null,onSocketMessage:null,onSocketError:null,uploadFile:null,downloadFile:null,addNativeDownloadTask:null,chooseImage:null,previewImage:null,previewMedia:null,getImageInfo:null,saveImageToPhotosAlbum:null,startRecord:null,stopRecord:null,playVoice:null,pauseVoice:null,stopVoice:null,onVoicePlayEnd:null,chooseVideo:null,saveVideoToPhotosAlbum:null,getVideoInfo:null,compressVideo:null,getLocation:null,openLocation:null,chooseLocation:null,choosePoi:null,onLocationChange:null,offLocationChange:null,onLocationChangeError:null,offLocationChangeError:null,startLocationUpdateBackground:null,startLocationUpdate:null,stopLocationUpdate:null,getNetworkType:null,onNetworkStatusChange:null,getSystemInfo:null,getSystemInfoSync:null,getBatteryInfo:null,getBatteryInfoSync:null,startAccelerometer:null,stopAccelerometer:null,onAccelerometerChange:null,startCompass:null,stopCompass:null,onCompassChange:null,reportAction:null,getBackgroundAudioManager:null,getRecorderManager:null,getBackgroundAudioPlayerState:null,playBackgroundAudio:null,pauseBackgroundAudio:null,seekBackgroundAudio:null,stopBackgroundAudio:null,onBackgroundAudioPlay:null,onBackgroundAudioPause:null,onBackgroundAudioStop:null,join1v1Chat:null,setEnable1v1Chat:null,joinVoIPChat:null,exitVoIPChat:null,updateVoIPChatMuteConfig:null,onVoIPChatMembersChanged:null,onVoIPChatSpeakersChanged:null,onVoIPChatInterrupted:null,offVoIPChatMembersChanged:null,offVoIPChatSpeakersChanged:null,offVoIPChatInterrupted:null,onVoIPVideoMembersChanged:null,offVoIPVideoMembersChanged:null,onVoIPChatStateChanged:null,offVoIPChatStateChanged:null,subscribeVoIPVideoMembers:null,login:null,checkSession:null,authorize:null,getUserInfo:null,getUserProfile:null,requestFacetoFacePayment:null,requestPayment:null,requestPersonalPay:null,requestJointPayment:null,getWCPayOverseaPrepayRequest:null,requestH5Transaction:null,openWCPayOverseaPaymentReceive:null,handleWCPayOverseaWalletBuffer:null,requestVerifyUserIdentity:null,verifyPaymentPassword:null,bindPaymentCard:null,requestPaymentToBank:null,requestVirtualPayment:null,openOfflinePayView:null,openWCPayCardList:null,requestMallPayment:null,requestOrderPayment:null,addCard:null,openCard:null,scanCode:null,openQRCode:null,scanItem:null,chooseAddress:null,saveFile:null,openDocument:null,getSavedFileList:null,getSavedFileInfo:null,getFileInfo:null,removeSavedFile:null,getFileSystemManager:null,chooseContact:null,removeUserCloudStorage:null,setUserCloudStorage:null,makePhoneCall:null,makeVoIPCall:null,onAppRoute:null,onAppRouteDone:null,onAppEnterBackground:null,onAppEnterForeground:null,onAppUnhang:null,onPageReload:null,onPageNotFound:null,offPageNotFound:null,onThemeChange:null,offThemeChange:null,onAppShow:null,offAppShow:null,onAppHide:null,offAppHide:null,onError:null,offError:null,onUnhandledRejection:null,offUnhandledRejection:null,getLaunchOptionsSync:null,getEnterOptionsSync:null,createAnimation:null,createInnerAudioContext:null,createAudioContext:null,createVideoContext:null,createMapContext:null,createCameraContext:null,createLivePlayerContext:null,createLivePusherContext:null,onWebviewEvent:null,onNativeEvent:null,hideKeyboard:null,onKeyboardHeightChange:null,offKeyboardHeightChange:null,getPublicLibVersion:null,showModal:null,showToast:null,hideToast:null,showLoading:null,hideLoading:null,showActionSheet:null,reportAnalytics:null,getClipboardData:null,setClipboardData:null,createSelectorQuery:null,createIntersectionObserver:null,updatePerfData:null,traceEvent:null,onMemoryWarning:null,offMemoryWarning:null,getUpdateManager:null,createWorker:null,voiceSplitJoint:null,uploadSilkVoice:null,downloadSilkVoice:null,getResPath:null,setResPath:null,env:null,appStatus:null,hanged:null,getLogManager:null,getRealtimeLogManager:null,onWindowResize:null,offWindowResize:null,setPageOrientation:null,loadFontFace:null,setInnerAudioOption:null,addWeRunData:null,setBackgroundColor:null,setBackgroundTextStyle:null,getMenuButtonBoundingClientRect:null,calRqt:null,getAvailableAudioSources:null,reportMonitor:null,faceVerifyForPay:null,chooseInvoice:null,startDeviceMotionListening:null,stopDeviceMotionListening:null,onDeviceMotionChange:null,startGyroscope:null,stopGyroscope:null,onGyroscopeChange:null,secureTunnel:null,startCustomFacialRecognitionVerify:null,startCustomFacialRecognitionVerifyAndUploadVideo:null,getAccountInfoSync:null,setCookies:null,getCookies:null,nextTick:null,chooseMultiMedia:null,chooseMessageFile:null,getLabInfo:null,setLabInfo:null,compressImage:null,shareAppMessageForFakeNative:null,downloadApp:null,installDownloadApp:null,getAppInstallState:null,queryDownloadAppTask:null,cancelDownloadAppTask:null,resumeDownloadAppTask:null,pauseDownloadAppTask:null,onDownloadAppStateChange:null,downloadAppForIOS:null,offGyroscopeChange:null,offDeviceMotionChange:null,offCompassChange:null,offAccelerometerChange:null,offUserCaptureScreen:null,offNetworkStatusChange:null,offHCEMessage:null,offBeaconUpdate:null,offBeaconServiceChange:null,requestSubscribeMessage:null,hideHomeButton:null,getBLEDeviceRSSI:null,checkIsOpenAccessibility:null,addPhoneCalendar:null,addPhoneRepeatCalendar:null,updateWeChatApp:null,getRandomValues:null,shareFileMessage:null,shareVideoMessage:null,addFileToFavorites:null,addVideoToFavorites:null,showShareImageMenu:null,searchContacts:null,publishWeChatState:null},ui:{invokeWebviewMethod:0,drawCanvas:20,createContext:20,createCanvasContext:20,canvasToTempFilePath:20,canvasGetImageData:20,canvasPutImageData:20,getShareInfo:30,pageScrollTo:30,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:20,openSettingForPlugin:30,getExtConfig:0,chooseMedia:20,chooseWeChatContact:20,uploadEncryptedFileToCDN:10,onUploadEncryptedFileToCDNProgress:10,getExtConfigSync:0,showShareMenu:30,hideShareMenu:30,updateShareMenu:30,openUrl:20,setNavigationBarColor:30,setNavigationBarAlpha:30,hideHomeButton:30,_getRealRoute:20,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:10,startFacialRecognitionVerify:20,startFacialRecognitionVerifyAndUploadVideo:20,sendBizRedPacket:10,sendGoldenRedPacket:10,openGoldenRedPacketDetail:10,showRedPackage:10,addPhoneContact:10,setScreenBrightness:20,getScreenBrightness:20,shareToWeRun:20,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:0,setPageStyle:30,triggerGettingWidgetData:10,navigateToMiniProgram:30,navigateToDevMiniProgram:30,navigateBackMiniProgram:30,exitMiniProgram:30,setNavigationBarRightButton:20,onTapNavigationBarRightButton:20,setTopBarText:30,setTabBarBadge:30,removeTabBarBadge:30,showTabBarRedDot:30,hideTabBarRedDot:30,showTabBar:30,hideTabBar:30,setTabBarStyle:30,setTabBarItem:30,setEnableDebug:30,captureScreen:30,onUserCaptureScreen:30,offUserCaptureScreen:30,setKeepScreenOn:10,checkIsSupportSoterAuthentication:10,startSoterAuthentication:10,checkIsSoterEnrolledInDevice:10,openDeliveryList:20,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:30,showNavigationBarLoading:30,hideNavigationBarLoading:30,startPullDownRefresh:30,stopPullDownRefresh:30,operateWXData:10,getOpenDeviceId:10,makeBluetoothPair:10,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceRSSI:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:30,reLaunch:30,navigateTo:30,switchTab:30,navigateBack:30,_triggerBeforeUnloadPage:30,_triggerBeforeShareAppMessage:30,navigateBackApplication:30,navigateBackNative:0,launchApplication:30,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:10,chooseImage:20,previewImage:20,previewMedia:20,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:20,stopRecord:20,playVoice:20,pauseVoice:20,stopVoice:20,onVoicePlayEnd:20,chooseVideo:20,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:20,openLocation:20,chooseLocation:20,choosePoi:20,onLocationChange:20,offLocationChange:20,onLocationChangeError:20,offLocationChangeError:20,startLocationUpdateBackground:20,startLocationUpdate:20,stopLocationUpdate:20,getNetworkType:0,onAppRoute:30,onAppRouteDone:30,onAppEnterBackground:30,onAppEnterForeground:30,onAppUnhang:30,onPageReload:30,onPageNotFound:30,offPageNotFound:30,onThemeChange:10,offThemeChange:10,onAppShow:30,offAppShow:30,onAppHide:30,offAppHide:30,onError:30,offError:30,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:20,createAudioContext:20,createVideoContext:20,createMapContext:20,createCameraContext:20,createLivePlayerContext:20,createLivePusherContext:20,onWebviewEvent:20,onNativeEvent:20,hideKeyboard:20,onKeyboardHeightChange:20,offKeyboardHeightChange:20,getPublicLibVersion:0,showModal:20,showToast:20,hideToast:20,showLoading:20,hideLoading:20,showActionSheet:20,reportAnalytics:10,getClipboardData:20,setClipboardData:20,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:10,uploadSilkVoice:10,downloadSilkVoice:10,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:20,offWindowResize:20,setPageOrientation:30,loadFontFace:20,setInnerAudioOption:0,setBackgroundColor:30,setBackgroundTextStyle:30,getMenuButtonBoundingClientRect:20,calRqt:10,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,join1v1Chat:10,setEnable1v1Chat:10,joinVoIPChat:10,exitVoIPChat:10,updateVoIPChatMuteConfig:10,onVoIPChatMembersChanged:10,onVoIPChatSpeakersChanged:10,onVoIPChatInterrupted:10,offVoIPChatMembersChanged:10,offVoIPChatSpeakersChanged:10,offVoIPChatInterrupted:10,onVoIPVideoMembersChanged:10,offVoIPVideoMembersChanged:10,onVoIPChatStateChanged:10,offVoIPChatStateChanged:10,subscribeVoIPVideoMembers:10,login:10,checkSession:10,authorize:20,getUserInfo:20,getUserProfile:20,requestFacetoFacePayment:20,requestPayment:20,verifyPaymentPassword:20,bindPaymentCard:20,requestPersonalPay:20,requestPaymentToBank:20,requestJointPayment:20,getWCPayOverseaPrepayRequest:20,requestH5Transaction:20,openWCPayOverseaPaymentReceive:20,handleWCPayOverseaWalletBuffer:20,requestVerifyUserIdentity:20,requestVirtualPayment:20,openOfflinePayView:20,openWCPayCardList:20,requestMallPayment:20,requestOrderPayment:20,addCard:20,openCard:20,scanCode:20,openQRCode:20,scanItem:20,chooseAddress:20,saveFile:10,openDocument:20,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:20,removeUserCloudStorage:10,setUserCloudStorage:10,makePhoneCall:20,makeVoIPCall:20,getAvailableAudioSources:10,reportMonitor:10,faceVerifyForPay:30,chooseInvoice:20,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:10,startCustomFacialRecognitionVerify:10,startCustomFacialRecognitionVerifyAndUploadVideo:10,getAccountInfoSync:0,setCookies:10,getCookies:10,nextTick:0,chooseMultiMedia:20,chooseMessageFile:20,getLabInfo:10,setLabInfo:10,compressImage:0,enterContact:20,shareAppMessageForFakeNative:20,checkIsOpenAccessibility:10,addPhoneCalendar:20,addPhoneRepeatCalendar:20,updateWeChatApp:10,getRandomValues:0,shareFileMessage:20,shareVideoMessage:20,addFileToFavorites:20,addVideoToFavorites:20,showShareImageMenu:20,searchContacts:10,publishWeChatState:20},log:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:2,canvasToTempFilePath:2,canvasGetImageData:2,canvasPutImageData:2,getShareInfo:1,pageScrollTo:1,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,requestSubscribeMessage:1,getExtConfig:1,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:2,showShareMenu:1,hideShareMenu:1,updateShareMenu:1,openUrl:0,setNavigationBarColor:1,setNavigationBarAlpha:0,hideHomeButton:1,_getRealRoute:0,vibrateShort:1,vibrateLong:1,getSetting:1,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:1,addPhoneContact:1,setScreenBrightness:1,getScreenBrightness:1,shareToWeRun:1,getWeRunData:1,canIUse:1,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:1,setTabBarBadge:1,removeTabBarBadge:1,showTabBarRedDot:1,hideTabBarRedDot:1,showTabBar:1,hideTabBar:1,setTabBarStyle:1,setTabBarItem:1,setEnableDebug:1,captureScreen:0,onUserCaptureScreen:3,setKeepScreenOn:1,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:1,showNavigationBarLoading:1,hideNavigationBarLoading:1,startPullDownRefresh:1,stopPullDownRefresh:1,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:1,openBluetoothAdapter:1,closeBluetoothAdapter:1,getBluetoothAdapterState:1,startBluetoothDevicesDiscovery:1,stopBluetoothDevicesDiscovery:1,getBluetoothDevices:1,getConnectedBluetoothDevices:1,createBLEConnection:1,setBLEMTU:1,closeBLEConnection:1,getBLEDeviceServices:1,getBLEDeviceRSSI:1,getBLEDeviceCharacteristics:1,notifyBLECharacteristicValueChanged:1,notifyBLECharacteristicValueChange:1,readBLECharacteristicValue:1,writeBLECharacteristicValue:1,onBluetoothAdapterStateChange:3,onBluetoothDeviceFound:3,onBLEConnectionStateChanged:3,onBLEConnectionStateChange:3,onBLECharacteristicValueChange:3,offBluetoothAdapterStateChange:3,offBluetoothDeviceFound:3,offBLEConnectionStateChanged:3,offBLEConnectionStateChange:3,offBLECharacteristicValueChange:3,createBLEPeripheralServer:2,onBLEPeripheralConnectionStateChanged:3,offBLEPeripheralConnectionStateChanged:3,startBeaconDiscovery:1,stopBeaconDiscovery:1,getBeacons:1,onBeaconUpdate:1,onBeaconServiceChange:1,startWifi:1,stopWifi:1,getWifiList:1,getConnectedWifi:1,connectWifi:1,presetWifiList:1,setWifiList:1,onGetWifiList:3,onWifiConnected:3,offGetWifiList:3,offWifiConnected:3,onEvaluateWifi:3,getHCEState:1,startHCE:1,stopHCE:1,sendHCEMessage:1,onHCEMessage:3,startLocalServiceDiscovery:1,stopLocalServiceDiscovery:1,onLocalServiceFound:3,offLocalServiceFound:3,onLocalServiceLost:3,offLocalServiceLost:3,onLocalServiceDiscoveryStop:3,offLocalServiceDiscoveryStop:3,onLocalServiceResolveFail:3,offLocalServiceResolveFail:3,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,navigateBackNative:0,launchApplication:0,getStorage:1,getStorageSync:2,setStorage:1,setStorageSync:2,removeStorage:1,removeStorageSync:2,clearStorage:1,clearStorageSync:2,getStorageInfo:1,getStorageInfoSync:2,getBackgroundFetchData:1,onBackgroundFetchData:3,request:1,connectSocket:1,closeSocket:1,sendSocketMessage:1,onSocketOpen:3,onSocketClose:3,onSocketMessage:3,onSocketError:3,uploadFile:1,downloadFile:1,addNativeDownloadTask:0,chooseImage:1,previewImage:1,previewMedia:1,getImageInfo:1,saveImageToPhotosAlbum:1,startRecord:1,stopRecord:1,playVoice:1,pauseVoice:1,stopVoice:1,onVoicePlayEnd:1,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:1,compressVideo:1,getLocation:1,openLocation:1,chooseLocation:1,choosePoi:1,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:1,onNetworkStatusChange:3,getSystemInfo:1,getSystemInfoSync:2,getBatteryInfo:1,getBatteryInfoSync:2,startAccelerometer:1,stopAccelerometer:1,onAccelerometerChange:3,startCompass:1,stopCompass:1,onCompassChange:3,reportAction:0,getBackgroundAudioManager:2,getRecorderManager:2,getBackgroundAudioPlayerState:1,playBackgroundAudio:1,pauseBackgroundAudio:1,seekBackgroundAudio:1,stopBackgroundAudio:1,onBackgroundAudioPlay:3,onBackgroundAudioPause:3,onBackgroundAudioStop:3,join1v1Chat:1,setEnable1v1Chat:1,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:3,onVoIPChatSpeakersChanged:3,onVoIPChatInterrupted:3,offVoIPChatMembersChanged:3,offVoIPChatSpeakersChanged:3,offVoIPChatInterrupted:3,onVoIPVideoMembersChanged:3,offVoIPVideoMembersChanged:3,onVoIPChatStateChanged:3,offVoIPChatStateChanged:3,subscribeVoIPVideoMembers:1,login:1,checkSession:1,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:1,requestPersonalPay:1,requestFacetoFacePayment:1,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:1,addCard:1,openCard:1,scanCode:1,openQRCode:1,scanItem:1,chooseAddress:1,saveFile:1,openDocument:1,getSavedFileList:1,getSavedFileInfo:1,getFileInfo:1,removeSavedFile:1,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,onThemeChange:1,offThemeChange:1,createAnimation:2,createInnerAudioContext:2,createAudioContext:0,createVideoContext:2,createMapContext:2,createCameraContext:2,createLivePlayerContext:2,createLivePusherContext:2,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:1,showToast:1,hideToast:1,showLoading:1,hideLoading:1,showActionSheet:1,reportAnalytics:0,getClipboardData:1,setClipboardData:1,createSelectorQuery:1,createIntersectionObserver:1,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:2,createWorker:2,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:3,offWindowResize:3,setPageOrientation:1,loadFontFace:1,uploadWeRunData:0,addWeRunData:0,setBackgroundColor:1,setBackgroundTextStyle:1,getMenuButtonBoundingClientRect:1,onAppShow:3,offAppShow:3,onAppHide:3,offAppHide:3,onError:3,offError:3,onUnhandledRejection:3,offUnhandledRejection:3,getLaunchOptionsSync:2,getEnterOptionsSync:2,calRqt:0,offPageNotFound:0,getAvailableAudioSources:1,reportMonitor:1,faceVerifyForPay:1,chooseInvoice:1,startDeviceMotionLisstening:1,stopDeviceMotionListening:1,onDeviceMotionChange:3,startGyroscope:1,stopGyroscope:1,onGyroscopeChange:3,setInnerAudioOption:1,secureTunnel:1,startCustomFacialRecognitionVerify:1,startCustomFacialRecognitionVerifyAndUploadVideo:1,getAccountInfoSync:0,setCookies:1,getCookies:1,nextTick:0,chooseMultiMedia:1,chooseMessageFile:1,getLabInfo:1,setLabInfo:1,compressImage:1,enterContact:1,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:3,downloadAppForIOS:0,offGyroscopeChange:3,offDeviceMotionChange:3,offCompassChange:3,offAccelerometerChange:3,offUserCaptureScreen:3,offNetworkStatusChange:3,offHCEMessage:3,offBeaconUpdate:3,offBeaconServiceChange:3,checkIsOpenAccessibility:1,addPhoneCalendar:1,addPhoneRepeatCalendar:1,updateWeChatApp:1,getRandomValues:1,shareFileMessage:1,shareVideoMessage:1,addFileToFavorites:1,addVideoToFavorites:1,showShareImageMenu:1,searchContacts:1,publishWeChatState:1},tap:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:0,canvasToTempFilePath:0,canvasGetImageData:0,canvasPutImageData:0,getShareInfo:0,pageScrollTo:0,chooseInvoiceTitle:0,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:10,openSettingForPlugin:10,getExtConfig:0,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:0,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,_getRealRoute:0,vibrateShort:0,vibrateLong:0,getSetting:20,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:0,setScreenBrightness:0,getScreenBrightness:0,shareToWeRun:0,getWeRunData:0,uploadWeRunData:0,canIUse:0,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:0,navigateToDevMiniProgram:0,navigateBackMiniProgram:0,navigateBackNative:0,exitMiniProgram:40,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:0,captureScreen:0,onUserCaptureScreen:0,setKeepScreenOn:0,checkIsSupportSoterAuthentication:0,startSoterAuthentication:0,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:0,stopPullDownRefresh:0,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceRSSI:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,onBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,redirectTo:0,reLaunch:0,navigateTo:0,switchTab:0,navigateBack:0,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,launchApplication:0,getStorage:0,getStorageSync:0,setStorage:0,setStorageSync:0,removeStorage:0,removeStorageSync:0,clearStorage:0,clearStorageSync:0,getStorageInfo:0,getStorageInfoSync:0,request:20,connectSocket:0,closeSocket:0,sendSocketMessage:0,onSocketOpen:0,onSocketClose:0,onSocketMessage:0,onSocketError:0,uploadFile:0,downloadFile:20,addNativeDownloadTask:0,chooseImage:0,previewImage:0,previewMedia:0,getImageInfo:0,saveImageToPhotosAlbum:0,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:0,saveVideoToPhotosAlbum:0,getVideoInfo:0,compressVideo:0,getLocation:0,openLocation:0,chooseLocation:0,choosePoi:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:0,onNetworkStatusChange:0,getSystemInfo:0,getSystemInfoSync:0,getBatteryInfo:0,getBatteryInfoSync:0,startAccelerometer:0,stopAccelerometer:0,onAccelerometerChange:0,startCompass:0,stopCompass:0,onCompassChange:0,reportAction:0,getBackgroundAudioManager:0,getRecorderManager:0,getBackgroundAudioPlayerState:0,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,login:0,checkSession:0,authorize:0,getUserInfo:0,requestFacetoFacePayment:0,requestPayment:30,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:30,addCard:0,openCard:0,scanCode:0,openQRCode:0,scanItem:0,chooseAddress:0,saveFile:0,openDocument:0,getSavedFileList:0,getSavedFileInfo:0,getFileInfo:0,removeSavedFile:0,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:0,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,offPageNotFound:0,onThemeChange:0,offThemeChange:0,onAppShow:0,offAppShow:0,onAppHide:0,offAppHide:0,onError:0,offError:0,onUnhandledRejection:0,offUnhandledRejection:0,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:0,createAudioContext:0,createVideoContext:0,createMapContext:0,createCameraContext:0,createLivePlayerContext:0,createLivePusherContext:0,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:30,showToast:0,hideToast:0,showLoading:0,hideLoading:0,showActionSheet:30,reportAnalytics:0,getClipboardData:0,setClipboardData:0,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:0,createWorker:0,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:0,offWindowResize:0,setPageOrientation:0,loadFontFace:0,setInnerAudioOption:0,addWeRunData:0,setBackgroundColor:0,setBackgroundTextStyle:0,getMenuButtonBoundingClientRect:0,calRqt:0,getAvailableAudioSources:0,reportMonitor:0,faceVerifyForPay:0,chooseInvoice:0,startDeviceMotionListening:0,stopDeviceMotionListening:0,onDeviceMotionChange:0,startGyroscope:0,stopGyroscope:0,onGyroscopeChange:0,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,getAccountInfo:0,nextTick:0,setCookies:0,getCookies:0,getAccountInfoSync:0,chooseMultiMedia:0,join1v1Chat:0,setEnable1v1Chat:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,onVoIPVideoMembersChanged:0,offVoIPVideoMembersChanged:0,onVoIPChatStateChanged:0,offVoIPChatStateChanged:0,subscribeVoIPVideoMembers:0,getBackgroundFetchData:0,onBackgroundFetchData:0,chooseMessageFile:0,getLabInfo:0,setLabInfo:0,compressImage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,offGyroscopeChange:0,offDeviceMotionChange:0,offCompassChange:0,offAccelerometerChange:0,offUserCaptureScreen:0,offNetworkStatusChange:0,offHCEMessage:0,offBeaconUpdate:0,offBeaconServiceChange:0,requestSubscribeMessage:40,hideHomeButton:0,checkIsOpenAccessibility:0,updateWeChatApp:0,openChannelsLive:40,openChannelsActivity:40,openChannelsUserProfile:40,addPhoneCalendar:40,addPhoneRepeatCalendar:40,getRandomValues:0,showShareImageMenu:0,shareFileMessage:40,shareVideoMessage:40,addFileToFavorites:40,addVideoToFavorites:40,getUserProfile:40,searchContacts:40,publishWeChatState:40,openCustomerServiceChat:40},singlePage:{invokeWebviewMethod:0,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:0,pageScrollTo:10,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,openSettingForPlugin:1,getExtConfig:10,chooseMedia:1,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,hideHomeButton:0,_getRealRoute:0,vibrateShort:10,vibrateLong:10,getSetting:0,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:1,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:0,uploadWeRunData:0,addWeRunData:0,canIUse:10,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:0,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,offBeaconUpdate:0,onBeaconServiceChange:0,offBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,offHCEMessage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:0,onBackgroundFetchData:0,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:1,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:1,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:0,compressVideo:0,getLocation:10,openLocation:1,chooseLocation:1,choosePoi:1,enableLocationUpdateBackground:0,enableLocationUpdate:0,disableLocationUpdate:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:10,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:0,createVideoContext:10,createMapContext:10,createCameraContext:0,createLivePlayerContext:10,createLivePusherContext:0,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:0,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:0,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:0,setClipboardData:0,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:0,traceEvent:0,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:0,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:0,hanged:0,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:0,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:0,checkSession:0,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:0,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestMidasPayment:0,requestOrderPayment:0,addCard:1,openCard:1,scanCode:1,openQRCode:0,scanItem:1,chooseAddress:1,saveFile:10,openDocument:1,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:1,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:0,getABTestConfig:0,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:0,chooseMultiMedia:0,getLabInfo:0,setLabInfo:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:0,createRewardedVideoAd:0,error:10,serviceMarket:10,getNativeUserInfo:10,getPerformance:10,reportPerformance:10,createUDPSocket:0,createBufferURL:10,revokeBufferURL:10},thirdApp:{invokeWebviewMethod:10,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:10,pageScrollTo:10,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:10,openSettingForPlugin:10,getExtConfig:10,chooseMedia:10,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:10,hideShareMenu:10,updateShareMenu:10,openUrl:0,setNavigationBarColor:10,setNavigationBarAlpha:10,hideHomeButton:10,_getRealRoute:10,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:10,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:10,setPageStyle:10,triggerGettingWidgetData:0,navigateToMiniProgram:10,navigateToDevMiniProgram:10,navigateBackMiniProgram:10,exitMiniProgram:10,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:10,removeTabBarBadge:10,showTabBarRedDot:10,hideTabBarRedDot:10,showTabBar:10,hideTabBar:10,setTabBarStyle:10,setTabBarItem:10,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:10,reportKeyValue:10,setNavigationBarTitle:10,showNavigationBarLoading:10,hideNavigationBarLoading:10,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:10,reLaunch:10,navigateTo:10,switchTab:10,navigateBack:10,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:10,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:10,stopRecord:10,playVoice:10,pauseVoice:10,stopVoice:10,onVoicePlayEnd:10,chooseVideo:10,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:10,openLocation:10,chooseLocation:10,choosePoi:10,enableLocationUpdateBackground:10,enableLocationUpdate:10,disableLocationUpdate:10,onLocationChange:10,offLocationChange:10,onLocationChangeError:10,offLocationChangeError:10,startLocationUpdateBackground:10,startLocationUpdate:10,stopLocationUpdate:10,getNetworkType:10,onAppRoute:10,onAppRouteDone:10,onAppEnterBackground:10,onAppEnterForeground:10,onAppUnhang:10,onPageReload:10,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:10,createVideoContext:10,createMapContext:10,createCameraContext:10,createLivePlayerContext:10,createLivePusherContext:10,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:10,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:10,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:10,setClipboardData:10,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:10,hanged:10,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:10,checkSession:10,authorize:10,getUserInfo:10,getUserProfile:10,requestPayment:10,verifyPaymentPassword:0,bindPaymentCard:0,requestPersonalPay:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:10,addCard:10,openCard:10,scanCode:10,openQRCode:0,chooseAddress:10,saveFile:10,openDocument:10,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:10,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:10,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:10,getABTestConfig:10,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:10,chooseMultiMedia:10,getLabInfo:0,setLabInfo:0,enterContact:10,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:10,createRewardedVideoAd:10,error:10,serviceMarket:10,openBusinessView:10,requestMidasPayment:10,modifyFriendInteractiveStorage:0,getUserInteractiveStorage:0,getUserCloudStorage:0,getPotentialFriendList:0,getGroupInfo:0,getGroupCloudStorage:0,getFriendCloudStorage:0,createGridAd:10,createBannerAd:10}},a=(e,t)=>o[t][e];var s=n(665),c=n(1095),l=n(1106),u=n(1130);function d(e){const t=a(e,"thirdApp");return 0!==t&&1!==t||!(0,c.er)()||1===t&&_()&&(0,l.IN)("showToast",{icon:"",title:"暂不支持当前功能",duration:2500}),!0}let h=!1;function p(e){h="tap"===e}function f(){setTimeout((()=>{h=!1}),0)}function g(e){return(...t)=>{if(4===s.Z.appType)return p("tap"),e.apply(this,t),void f();__virtualDOM__.wrapTapMark((()=>{e.apply(this,t)}))}}function _(){return 4===s.Z.appType?h:h||__virtualDOM__.checkTapMark()}function m(e,t){return function(n,...o){const u=a(e,"tap"),d=_();let h=n;if(10===u&&!d&&((0,r.Y)({name:e,scene:0,strategy:1}),i.gm||!(0,c.KU)(e)))return void(n&&(n.fail||n.complete)&&setTimeout((()=>{(0,l.YG)(e,n,"can only be invoked by user TAP gesture.")}),0));if((20===u&&d||30===u)&&("function"==typeof n?h=g.call(this,n):"object"==typeof n&&(h=Object.assign({},n),["success","fail","complete"].forEach((e=>{"function"==typeof h[e]&&(h[e]=g.call(this,h[e]))})))),40===u&&4!==s.Z.appType&&!d)return void(n&&(n.fail||n.complete)&&setTimeout((()=>{(0,l.YG)(e,n,"can only be invoked by user TAP gesture.")}),0));const p=t.apply(this,[h].concat(o));return 4===s.Z.appType&&[10,30,40].includes(u)&&f(),p}}},4532:(e,t,n)=>{"use strict";n.d(t,{w$:()=>i});const i={FORE_GROUND:0,BACK_GROUND:1,LOCK:2}},7621:(e,t,n)=>{"use strict";n.d(t,{k:()=>a});var i=n(1106),r=(n(2851),n(2582));const o=e=>{(0,i.gM)(Object.assign({},e,{data:{api_name:"webapi_reportgroupshare",data:{path:e.path,share_key:e.shareKey}},success(t){r.wZ&&"string"==typeof t.data&&(t.data=JSON.parse(t.data));const n=JSON.parse(t.data.data);0===n.errcode?(t.expiresIn=n.expires_in,t.groupMsgTicket=n.group_msg_ticket,delete t.data,(0,i.FE)({name:"getGroupMsgTicket",args:e,res:t})):(0,i.YG)("getGroupMsgTicket",e,n.errmsg,n.errcode)},fail(t){(0,i.YG)("getGroupMsgTicket",e,t.errMsg,-1)}}))},a=e=>{o(e)}},2851:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={lastRoute:"",lastOpenType:"",query:{},runningStatus:"active",navigatorLock:!1,openUrlLock:!1,possessingBackgroundAudioPlayer:!1,webviewEventCallback:null,hanged:!1,appStatus:n(4532).w$.FORE_GROUND,navigationBarTitleMap:{},currentNetworkType:""}},29:(e,t,n)=>{"use strict";n.d(t,{dq:()=>a});var i=n(8159),r=n(1106);n(5260);const o=new i.Z;(0,r.jQ)("onPageReload",((e={},t=0)=>{e.webviewId=t,o.emit("onPageReload",e)}));const a=function(e,t){o.once(`onBeforeUnloadPage_${e}`,(e=>{"function"==typeof t&&t(e)}))}},5260:(e,t,n)=>{"use strict";n.d(t,{Hw:()=>c,Em:()=>r.Em,sd:()=>l,S0:()=>u,s$:()=>d,p9:()=>h,Bf:()=>p,HR:()=>f,cE:()=>g,mQ:()=>_,f0:()=>m,yP:()=>y,Pp:()=>v,Z8:()=>A,l0:()=>b,iZ:()=>w,l7:()=>E,sM:()=>I,RG:()=>x,Nf:()=>D,M8:()=>O,yC:()=>P,AK:()=>R,El:()=>k,Ky:()=>N});var i=n(665),r=n(7452),o=(n(2582),n(1661));const a=/^[-+a-zA-Z0-9]+:\/\//,s=/^__[-+a-zA-Z0-9]+__\//;function c(e,t){return __errorTracer__.wrapSystemFunction("appServiceSDKScriptError",t,e)}function l(e,t,n=!0){if(n&&(t=v(t)),0===t.indexOf("/"))return t.substr(1);if(0===t.indexOf("./"))return l(e,t.substr(2),!1);{const n=t.split("/");let i,r;for(i=0,r=n.length;i<r&&".."===n[i];i++);n.splice(0,i);const o=e.length>0?e.split("/"):[];o.splice(o.length-i-1,i+1);const a=o.concat(n).join("/");return a}}function u(e){const t=e.match(a);if(!t)return e;const n=t[0];if("plugin://"===n){const t=n.length,r=e.indexOf("/",t);if(r>=0){const n=e.slice(t,r),o=i.Z.plugins&&i.Z.plugins[n]?i.Z.plugins[n].provider:n;e=e.slice(0,t)+o+e.slice(r)}let o=e.indexOf("?");o<0&&(o=e.length);const a=e.slice(0,o),s=exparser.Component._list[a];if(!s)throw new b(`Page "${a}" is not found`);e=s.is+e.slice(o)}else if("plugin-private://"===n){let t=e.indexOf("?");t<0&&(t=e.length);const n=e.slice(0,t);e="/"+__appServiceEngine__.convertComponentAliasToRoute(n)+e.slice(t)}else{if("wx://"!==n)throw new b(`Unknown URL protocol "${n}"`);e="/__wx__/"+e.slice(5)}return e}function d(e,t,n=!0){for(;a.test(t);)t=u(t);return l(e,t,n)}function h(e){const t=e.match(a),n=e.match(s);let r="";if(t){const n=t[0];if("plugin://"===n){const t=n.length,o=e.indexOf("/",t);if(o>=0){const n=e.slice(t,o);r=i.Z.plugins&&i.Z.plugins[n]?i.Z.plugins[n].provider:n}}else if("plugin-private://"===n){const t=n.length,i=e.indexOf("/",t);if(i>=0){r=e.slice(t,i)}}else"wx://"===n&&(r="//")}if(n){const t=n[0];if("__plugin__/"===t){const n=t.length,i=e.indexOf("/",n);if(i>=0){r=e.slice(n,i)}}else"__wx__/"===t&&(r="//")}return r}function p(e,t){const n=h(t);if(!n)return!0;return h(__virtualDOM__.convertRouteToComponentAlias(e))===n}function f(e,t=!1){if("object"!=typeof e)return e;const n=[];for(const i in e)if((0,o.n)(e,i))if(t)try{n.push(`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`)}catch(t){n.push(`${i}=${e[i]}`)}else n.push(`${i}=${e[i]}`);return n.join("&")}function g(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&Object.keys(t).length>0){const n=e.split("?");return n[0]+"?"+f(m((n[1]||"").split("&").reduce(((e,t)=>{if("string"==typeof t&&t.length>0){const n=t.split("="),i=n[0],r=n[1];e[i]=r}return e}),{}),Object.keys(t).reduce(((e,n)=>("object"==typeof t[n]?e[encodeURIComponent(n)]=encodeURIComponent(JSON.stringify(t[n])):e[encodeURIComponent(n)]=encodeURIComponent(t[n]),e)),{})))}return e}function _(e,t="http"){return"http"===t?/^(http|https):\/\/.*/i.test(e):"websocket"===t?/^(ws|wss):\/\/.*/i.test(e):void 0}function m(...e){return e.reduce(((e,t)=>{for(const n in t)e[n]=t[n];return e}),{})}function y(e){if("string"==typeof e){const t=e.split("?"),n=t[0],i=(t[1]||"").split("&").reduce(((e,t)=>{if("string"==typeof t&&t.length>0){const n=t.split("="),i=n[0],r=n[1];e[i]=r}return e}),{}),r=[];for(const e in i)(0,o.n)(i,e)&&r.push(`${e}=${encodeURIComponent(i[e])}`);return r.length>0?`${n}?${r.join("&")}`:e}return e}function v(e){if("string"!=typeof e)return e;{let t=e.split("?")[0];const n=e.split("?")[1];return t+=".html",void 0!==n?`${t}?${n}`:t}}function A(e){return"string"==typeof e?-1!==e.indexOf("?")?e.replace(/\.html\?/,"?"):e.replace(/\.html$/,""):e}class b extends Error{constructor(e){super(`APP-SERVICE-SDK:${e}`),this.type="AppServiceSdkKnownError"}}class w extends Error{constructor(e){super(`${e}`),this.type="ThirdScriptError"}}function E(e,t){for(const n in t)e[n]=t[n];return e}const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",S=globalThis.btoa||function(e){const t=String(e);let n="";for(let e,i,r=0,o=T;t.charAt(0|r)||(o="=",r%1);n+=o.charAt(63&e>>8-r%1*8)){if(i=t.charCodeAt(r+=3/4),i>255)throw new Error('"btoa" failed');e=e<<8|i}return n},C=globalThis.atob||function(e){const t=String(e).replace(/=+$/,"");let n="";if(t.length%4==1)throw new Error('"atob" failed');for(let e,i,r=0,o=0;i=t.charAt(o++);~i&&(e=r%4?64*e+i:i,r++%4)?n+=String.fromCharCode(255&e>>(-2*r&6)):0)i=T.indexOf(i);return n};function I(e){let t="";const n=new Uint8Array(e),i=n.byteLength;for(let e=0;e<i;e++)t+=String.fromCharCode(n[e]);return S(t)}function x(e){const t=C(e),n=t.length,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=t.charCodeAt(e);return i.buffer}function D(e){return Object.keys(e).reduce(((t,n)=>("string"==typeof e[n]?t[n]=e[n]:"number"==typeof e[n]?t[n]=e[n]+"":t[n]=Object.prototype.toString.apply(e[n]),t)),{})}function O(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}i.Z.clientVersion;function P(e,t){e=e.split("."),t=t.split(".");const n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let i=0;i<n;i++){const n=parseInt(e[i],10),r=parseInt(t[i],10);if(n>r)return 1;if(n<r)return-1}return 0}function R(e={},t){"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}function k(e={},t){const n=t?{errMsg:t}:void 0;"function"==typeof e.success&&e.success(n),"function"==typeof e.complete&&e.complete(n)}function N(e={},t){const n=t?{errMsg:t}:void 0;"function"==typeof e.fail&&e.fail(n),"function"==typeof e.complete&&e.complete(n)}},1425:(e,t,n)=>{"use strict";n.d(t,{Ji:()=>m,o8:()=>_});var i=n(6947),r=n(2582),o=n(3270),a=n(1106),s=n(7452),c=n(5260);i.Z.fs;const l=(e={})=>{(0,a.r3)("readCompressedFile",e,{filePath:"",compressionAlgorithm:""})&&(0,a.IN)("readCompressedFile",e)},u="weapp://wechat-game-runtime",d="readFile";const h=globalThis;let p={};function f(e,t){if("string"!=typeof e)return Promise.reject(new Error("WebAssembly.instantiate: first argument must be a string"));if(/^(wxfile|https?):/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: not support wxfile: or http: path"));if(!/\.wasm(\.br)?$/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: only support file type .wasm or .wasm.br"));if(r.jP)return new Promise(((n,i)=>{!function(e={}){const{filePath:t,encoding:n}=e;let i;const r=new XMLHttpRequest;r.open("POST",`${u}/wxfs/${btoa(t)}`,!0),r.setRequestHeader("content-type","application/json"),r.responseType="string"==typeof n?"text":"arraybuffer",r.onload=()=>{i="string"==typeof n?r.responseText:r.response,(0,a.FE)({name:d,args:e,res:{data:i}})},r.onerror=t=>{(0,a.YG)(d,e,t.message)},r.send(JSON.stringify({}))}({filePath:e,success(e){n(p.instantiate(e.data,t))},fail({errMsg:e}){i(new Error(e.replace(/^\w+:fail\s*/,"")))}})}));if(r.cj||r.wZ){const n=p.instantiate(e,t);return"Promise"===(0,s.Em)(n)?n:Promise.resolve(n)}{let n=o.p;return r.gm&&/\.br$/.test(e)&&(n=l),new Promise(((i,r)=>{n({compressionAlgorithm:"br",filePath:e,success(e){i(p.instantiate(e.data,t))},fail({errMsg:e}){r(new Error(e.replace(/^\w+:fail\s*/,"")))}})}))}}void 0!==i.Z.WebAssembly?p=i.Z.WebAssembly:void 0!==h.WebAssembly&&(p=h.WebAssembly);const g=()=>({Table:p.Table,Memory:p.Memory,Global:p.Global,Instance:p.Instance,instantiate:(e,t)=>f(e,t)}),_=({provider:e}={})=>e?(e=>({Table:p.Table,Memory:p.Memory,Global:p.Global,Instance:p.Instance,instantiate:(t,n)=>"string"==typeof t?(-1!==t.indexOf(`__plugin__/${e}/`)||(t=t.replace(/^\//,""),t=(0,c.S0)(`plugin-private://${e}/${t}`)),f(t,n)):f(t,n)}))(e):g();h.WXWebAssembly=g(),delete h.WebAssembly;const m={Table:p.Table,Memory:p.Memory,Global:p.Global,Instance:p.Instance,compile:p.compile,compileStreaming:p.compileStreaming,instantiateStreaming:p.instantiateStreaming,validate:p.validate,CompileError:p.CompileError,LinkError:p.LinkError,Module:p.Module,RuntimeError:p.RuntimeError,instantiate:(...e)=>Promise.resolve(p.instantiate(...e))}},5985:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(8159),r=n(9078);const o=new i.Z,a={appLaunchInfo:null,appLaunchShareInfo:null,sceneHistory:[],appId:"",ShareInfoStorage:r.Z,emitter:o}},5292:(e,t,n)=>{"use strict";n.d(t,{Xb:()=>g});var i=n(638),r=n(2046),o=n(1106),a=n(5985),s=n(4572),c=n(7343),l=n(665),u=(n(1459),n(1095));let d,h;(0,o.Ld)("getLaunchAppInfo",(({callbackId:e},t)=>{(0,o.nY)("appLaunchInfoGot",{res:{sceneHistory:a.Z.sceneHistory,appId:a.Z.appId},callbackId:e},[t])})),l.Z.onReady((()=>{if(!(0,u.aI)()){const e=l.Z.appLaunchInfo||{};Object.assign(e,l.Z.debugLaunchInfo||{}),a.Z.appLaunchInfo=e,a.Z.appLaunchShareInfo=e.shareInfo,(0,c.e1)(e),h=(0,s.Qs)(e,!0),d=(0,s.Ar)(h,l.Z.preloadType),h.__public=(0,s.rT)(d,""),(0,c.NS)(d)}}));var p=n(9185);const f=(0,r.s)("AppShow"),g=(f.onMethod,f.offMethod,f.internalOnMethod);(0,i.T)((e=>{f.emitInternal(e)})),(0,p.H)((function e(t){if("appLaunch"===t.openType){const t=function(){if(!h)throw new Error("getLaunchOptionsSync:fail get launch options");return h||{}}();f.emitInternal(t),(0,p.b)(e)}}))},4915:(e,t,n)=>{"use strict";n.d(t,{e4:()=>r,WZ:()=>a,R0:()=>s,LY:()=>c});var i=n(1106);const r=["startPullDownRefresh"];let o=[];const a={appRoute:!1,appRouteDone:!1},s=()=>{o.forEach((e=>{const{name:t,args:n,option:r}=e;(0,i.oQ)(t,n,r)})),o=[]},c=(e,t,n)=>{const{appRoute:r,appRouteDone:s}=a;!r&&s?(0,i.oQ)(e,t,n):o.push({name:e,args:t,option:n})}},7343:(e,t,n)=>{"use strict";n.d(t,{NS:()=>c,e1:()=>l,rN:()=>u});var i=n(4572),r=n(1459),o=n(1106);let a={},s={};function c(e){a=e}function l(e){s=e}function u(){const e=(0,r.hI)(this)||"";return(0,i.rT)(a,e)}(0,o.Ld)("getEnterAppInfo",(({callbackId:e},t)=>{(0,o.nY)("appEnterInfoGot",{res:s,callbackId:e},[t])}))},7292:(e,t,n)=>{"use strict";n.d(t,{Tc:()=>c,dY:()=>b,JG:()=>i.J,HM:()=>f.H,tE:()=>A});var i=n(7142),r=n(638),o=n(5292),a=n(2046);const s=(0,a.s)("AppHide"),c=(s.onMethod,s.offMethod,s.internalOnMethod);(0,i.J)((e=>{s.emitInternal(e)}));var l=n(1106);const u=(0,a.s)("AppUnhang"),d=(u.internalOnMethod,u.onMethod);(0,l.jQ)("onAppUnhang",((e={})=>{u.emit(e)}));var h=n(4532),p=n(2851);p.Z.appStatus=h.w$.FORE_GROUND,p.Z.hanged=!1,(0,o.Xb)((e=>{Date.now()})),c((e=>{Date.now()})),(0,r.T)((()=>{p.Z.appStatus=h.w$.FORE_GROUND})),(0,i.J)((e=>{"hide"===e.mode?p.Z.appStatus=h.w$.LOCK:p.Z.appStatus=h.w$.BACK_GROUND,"close"===e.mode?p.Z.hanged=!1:"hang"===e.mode&&(p.Z.hanged=!0)})),d((()=>{p.Z.hanged=!1}));var f=n(9185),g=n(1130),_=n(3536),m=n(1095),y=n(665);let v=null;const A=e=>{v=e},b=()=>{v=null},w=(0,m.Fr)(((e={})=>{const t=["release","develop","trial"];(0,g.Z)("CreateWxaShortLink","webapi_createwxashortlink",{},{},(e=>({wxa_appid:e.appid,wxa_path:e.path,page_title:e.title,version:e.version,version_type:t.indexOf(e.envVersion)})),(e=>{delete e.rawData,e.shortLink=e.short_link,delete e.short_link}))(e)})),E=(0,m.Fr)(((e={})=>{((e={})=>{e.keyPath="WxaAppVersionInfo.AppVersion",(0,l.IN)("getAppContact",e,{beforeSuccess(e){e.data=JSON.parse(e.data)}})})({success(t){(0,l.FE)({name:"getAppContact",args:e,res:t})},fail(t){((e={})=>{e.keyPath="WxaAppVersionInfo.VersionState",(0,l.IN)("getAppContact",e,{beforeSuccess(e){e.data=JSON.parse(e.data),1===e.data&&(e.data=0)}})})({success(t){(0,l.FE)({name:"getAppContact",args:e,res:t})},fail(t){(0,l.FE)({name:"getAppContact",args:e,res:t,success:!1})}})}})})),T=e=>(0,_.CF)({icon:"none",title:e}),S=new Map,C="请检查网络后重试";let I=0;(0,l.jQ)("onCopyUrl",(e=>{if(!(0,m.aI)()&&e.webviewId!==p.Z.currentWebviewId)return console.warn("[onCopyUrl] error: webviewId loss"),void T("请检查网络后重试");const t=e.shortLinkEnable||!1,n=p.Z.lastRoute,i=p.Z.lastOpenType,r=JSON.parse(JSON.stringify(p.Z.lastRawQuery||{}));if("appLaunch"!==i&&"autoReLaunch"!==i)try{Object.keys(r).forEach((e=>{r[e]=decodeURIComponent(r[e])}))}catch(e){return void T(C)}const o=(0,m.aI)()?t?"":"index.html":`${n}.html`;let a=Object.entries(r).map((e=>e.join("="))).join("&");if(t&&"function"==typeof v)try{a=(v()||{}).query||""}catch(e){console.warn("[onCopyUrl] error",e)}const s=a?`${o}?${a}`:o;if(!t)return void(0,l.IN)("returnCopyUrl",{url:s,shortLinkEnable:t,success(){T("已复制")},fail(){T(C)}});S.has(I)&&S.set(I,!1);const c=++I;let u=!1;S.set(c,!0);const d=e=>{!!S.get(c)&&(T(e),e===C&&(0,l.IN)("returnCopyUrl",{url:"",shortLinkEnable:t}),S.set(c,!1))};setTimeout((()=>{u=!0,d(C)}),1500);const h=y.Z.page[`${n}.html`],f=h&&h.window||{},g=y.Z.global&&y.Z.global.window||{},_=f.navigationBarTitleText||g.navigationBarTitleText||"";E().then((e=>{const n=e.data;return w({appid:y.Z.accountInfo.appId,envVersion:y.Z.envVersion,path:s,title:(0,m.aI)()?"":_,version:n}).then((e=>{console.log("createWxaShortLinkAsync, ",e);return!!S.get(c)&&!u&&((0,l.IN)("returnCopyUrl",{url:e.shortLink,shortLinkEnable:t,success(){T("已复制")},fail(){T(C)}}),S.set(c,!1)),null})).catch((e=>{d(C),console.log("[onCopyUrl]:",e)})),null})).catch((e=>{d(C),console.log("[onCopyUrl]: ",e)}))}))},7142:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var i=n(1106),r=n(2999);const o=(0,n(2046).s)("AppEnterBackground"),a=o.internalOnMethod;(0,r.n)("onAppEnterBackground",((e={})=>{o.emit(e),(0,i.nY)("onAppEnterBackground",e)}))},638:(e,t,n)=>{"use strict";n.d(t,{T:()=>f});var i=n(1106),r=n(5985),o=n(972),a=n(4572),s=n(7343),c=n(2046),l=n(2999),u=n(1095),d=n(2851),h=n(665);h.Z.onReady((()=>{d.Z.scene=h.Z.appLaunchInfo.scene}));const p=(0,c.s)("AppEnterForeground"),f=p.internalOnMethod;function g(e){if(!(0,u.aI)()){e=(0,a.Qs)(e,!1),(0,s.e1)(e);const t=(0,a.Ar)(e);e.__public=(0,a.rT)(t,""),(0,s.NS)(t),p.emit(e),d.Z.scene=e.scene}}(0,l.n)("onAppEnterForeground",((e={})=>{const t=e.debugLaunchInfo||{};Object.assign(e,t),delete e.debugLaunchInfo,!(0,o._o)()||1!==e.reLaunch&&!0!==e.reLaunch?g(e):r.Z.emitter.once("onAppRoute",(()=>{g(e)})),(0,i.nY)("onAppEnterForeground",e)}))},9185:(e,t,n)=>{"use strict";n.d(t,{b:()=>E,H:()=>w});var i=n(1106),r=n(2999),o=n(972),a=n(5985),s=n(5260),c=n(2046),l=n(1532),u=n(4212);const d=Object.hasOwnProperty,h=(0,c.s)("AppRouteNotFound"),p=(h.onMethod,h.offMethod,h.emit),f=(e,t)=>{u.s.info(`[rewriteRoute] (webviewId=${t}) ${e}`)};let g={};const _=(e,{needHtmlSuffix:t})=>{const n=e.replace(/\.html(\?|$)/i,(e=>e.slice(5)));let i=(0,s.S0)(n);if("/"===i[0]&&(i=i.slice(1)),!t)return i;let r=i.indexOf("?");r<0&&(r=i.length);return i.slice(0,r)+".html"+i.slice(r)},m=(e,t=0)=>{if(["dismissPip","navigateBack"].includes(e.openType))return!1;if("rewriteRoute"===e.openType&&(e=((e,t)=>{let n=0;if(d.call(e,"originalWebviewId"))n=e.originalWebviewId,f(`Found originalWebviewId=${n}`,t);else{if(1!==Object.keys(g).length)return f(`No originalWebviewId found and we have ${Object.keys(g).length} backup data, guess failed, cleaning backups and giving up`,t),g={},e;n=Object.keys(g)[0],f(`No originalWebviewId found and guess it=${n}`,t)}const i=g[n];return delete g[n],["openType","wxMaterial","location","prerender"].forEach((t=>{e[t]=i[t]})),e})(e,t)),!e.notFound)return!1;let n=!1,i=e.rawPath;for(;/^[-_+a-z]+:\/\//i.test(i);){f(`${i} has protocol, try rewriting`,t);try{i=_(i,{needHtmlSuffix:!0}),n=!0}catch(e){return"AppServiceSdkKnownError"===e.type&&console.error(e.message),(0,l.IN)("pageNotFoundCallback",{hasHandler:!1,webviewId:t}),!1}}return n?(g[t]=e,f(`rewriteRoute from "${e.rawPath}" to "${i}"`,t),(0,l.IN)("rewriteRoute",{url:i,webviewId:t}),!0):(p(e,t),!1)};var y=n(665),v=n(2851),A=n(4915);const b=(0,c.s)("AppRoute"),w=b.internalOnMethod,E=b.internalOffMethod,T=new Set;(0,r.n)("onAppRoute",((e,t=0)=>{u.s.log("received onAppRoute, res=",JSON.stringify(e)),A.WZ.appRoute=!0,A.WZ.appRouteDone=!1;if(!m(e,t)){if(e.path=(0,s.Z8)(e.path),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==e.openType&&(v.Z.lastRoute=e.path||"",v.Z.lastRawQuery=JSON.parse(JSON.stringify(e.query||{}))),v.Z.lastOpenType=e.openType,["appLaunch","autoReLaunch"].includes(e.openType)&&T.add(t),!T.has(t))for(const t in e.query)try{e.query[t]=decodeURIComponent(e.query[t])}catch(e){}if("dismissPip"!==e.openType&&(v.Z.query=e.query,v.Z.currentWebviewId=e.webviewId),"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage){const t=e.preloadRule||y.Z._preloadRule&&y.Z._preloadRule[e.path],n=e.page||y.Z._page&&y.Z._page[e.path+".html"];if(t&&(y.Z.updatePreloadRule(e.path,t),e.preloadRule,y.Z.preloadRule),n){const t=y.Z.global&&y.Z.global.window||{};n.window=Object.assign({},t,n.window),y.Z.updatePage(e.path,n),e.page,y.Z.page}}(0,i.nY)("onAppRoute",e,[]),(0,o._o)()&&a.Z.emitter.emit("onAppRoute"),b.emit(e)}}))},4572:(e,t,n)=>{"use strict";n.d(t,{Qs:()=>l,Ar:()=>d,rT:()=>h});var i=n(5985),r=n(5260),o=n(2851),a=n(1106),s=n(665),c=n(5014);function l(e={},t){if(e.scene=e.scene?parseInt(e.scene,10):e.scene,e.query=(t?e.query:o.Z.query)||{},e.path=t?(0,r.Z8)(e.path):(0,r.Z8)(o.Z.lastRoute),e.referrerInfo=e.referrerInfo||{},e.isLaunch=t,t||(1044===e.scene?o.Z.lastShareInfo={shareInfo:e.shareInfo,path:e.path,query:e.query}:o.Z.lastShareInfo=void 0),i.Z.sceneHistory.push(e.scene),!e.referrerInfo.appId||1036!==e.scene&&1069!==e.scene||(i.Z.appId=e.referrerInfo.appId),"object"==typeof e.shareInfo&&null!==e.shareInfo){const{shareInfo:t}=e;t.shareKey&&t.shareName&&((0,a.IN)("showUpdatableMessageSubscribeButton",{shareKey:t.shareKey}),e.shareTicket=i.Z.ShareInfoStorage.set(t.shareKey,t.shareName),i.Z.ShareInfoStorage.lastShareTicket=e.shareTicket),delete e.shareInfo}return e}let u;function d(e={},t){0===(e=Object.assign({},e)).scene?e.scene=u:u=e.scene;let n=e.scene;1103===n?n=1001:1104===n?n=1089:1131===n||1158!==n&&1159!==n&&1160!==n||!(0,c.J)("getGroupToolbarInfo")&&(n=1008),[1106,1005,1006,1027,1042].indexOf(n)>-1&&(e.referrerInfo.appId=null);const i=e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{};if(e.referrerInfo.privateExtraData&&e.referrerInfo.privateExtraData.__pluginAppId){e.referrerInfo.appId&&(i.pluginAppId=e.referrerInfo.privateExtraData.__pluginAppId),delete e.referrerInfo.privateExtraData.__pluginAppId;0===Object.keys(e.referrerInfo.privateExtraData).length&&delete e.referrerInfo.privateExtraData}const r={path:e.path,query:e.query,scene:n,shareTicket:e.shareTicket,referrerInfo:i};e.chatroomUsername&&1156===n&&(r.chatroomUsername=e.chatroomUsername),e.chatType&&(r.chatType=e.chatType);const o=e.nativeExtraData||{};return o.location&&(r.locationInfo=o.location),7!==s.Z.appType&&10!==s.Z.appType||(e.nativeExtraData&&(r.nativeExtraData=e.nativeExtraData),r.sessionId=e.sessionid||e.sessionId,r.isLaunch=e.isLaunch,e.isLaunch&&(r.prerender=!!s.Z.prerender),r.clickTimestamp=e.clickTimestamp,r.preloadType=t),e.mode&&(r.mode=e.mode),1173===n&&(o.mimeType?r.forwardMaterials=[{type:o.mimeType,path:o.materialPath,name:o.materialName,size:o.materialSize}]:Array.isArray(o.materials)&&(r.forwardMaterials=o.materials)),r}function h(e,t=""){if((0,r.p9)(e.path||"")!==t){const t={path:e.path,query:{},scene:e.scene,shareTicket:e.shareTicket,referrerInfo:{}};return e.mode&&(t.mode=e.mode),10===s.Z.appType&&(e.nativeExtraData&&(t.nativeExtraData=e.nativeExtraData),t.sessionId=e.sessionId,t.isLaunch=e.isLaunch,e.isLaunch&&(t.prerender=e.prerender),t.clickTimestamp=e.clickTimestamp,t.preloadType=e.preloadType),t}return e}},7657:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var i=n(1130);const r=(o="getCloudFileUrl",a="qbase_commapi",(0,i.Z)(o,a,{},{},(function(e){const t=e.data;return{qbase_api_name:"tcbapi_component_gettempfileurl",qbase_req:JSON.stringify({fileid_list:t.fileid_list.slice(),type:t.type}),cli_req_id:`${+new Date}_${Math.random()}`}}),(function(e){return e})));var o,a;const s=function(e,t,n){l({fileIds:e,type:t,success:n})},c=new Map,l=function(e){const{fileIds:t,type:n,success:i}=e,o=new Map,a=[];let s=!1;if(t.forEach((e=>{const t=c.get(e);if(t){if(Date.now()<t.expireTime)return void(o.has(e)||(o.set(e,t.data),s||(s=!0)));c.delete(e)}/^(cloud):\/\//.test(e)&&a.push(e)})),0===a.length)return void(s?u(t,o,0,i):"function"==typeof i&&i({data:t.map((e=>({url:e})))}));let l=0;const d=function(e,t){const n=[],i=Math.ceil(e.length/t);for(let r=0;r<i;r++)n.push(e.slice(r*t,(r+1)*t));return n}(t,50);Promise.all(d.map((e=>new Promise((t=>{r({data:{fileid_list:e,type:n},requestInQueue:!1,success(n){const i=JSON.parse(n.rawData);if(i.baseresponse&&0===i.baseresponse.errcode?i.download_list.forEach((e=>{o.set(e.fileid,e),!c.has(e.fileid)&&e.max_age&&c.set(e.fileid,{data:e,expireTime:Date.now()+1e3*e.max_age})})):i.baseresponse?e.forEach((e=>{o.set(e,{download_url:e,service_errcode:i.baseresponse.errcode,errmsg:"system error baseresponse.errcode "+i.baseresponse.errcode}),c.has(e)&&c.delete(e)})):e.forEach((e=>{o.set(e,{download_url:e,service_errcode:-1,errmsg:"system error baseresponse empty"}),c.has(e)&&c.delete(e)})),i.baseresponse&&i.baseresponse.stat&&i.baseresponse.stat.qbase_cost_time){const e=i.baseresponse.stat.qbase_cost_time;e>l&&(l=e)}t()},fail(){t()},complete(e){}})}))))).then((()=>{u(t,o,l,i)})).catch((e=>{"function"==typeof i&&i({data:t.map((t=>({url:t,service_errcode:-1,errmsg:e+""})))})}))};function u(e,t,n,i){const r=[];e.forEach((e=>{if(/^(cloud):\/\//.test(e)){const n=t.get(e);n?0===n.service_errcode?r.push({url:n.download_url}):r.push({url:e,code:n.service_errcode,msg:n.errmsg}):r.push({url:e,code:-1,msg:"NO_RESULT"})}else r.push({url:e})})),"function"==typeof i&&i({data:r,cost:n})}},2802:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});const i="undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version},8827:(e,t,n)=>{"use strict";n.d(t,{KL:()=>p,Zv:()=>f,jl:()=>d,zv:()=>g});n(638),n(9185);var i=n(7322),r=n(665),o=(n(2582),n(5292));n(5014);let a=[],s=[];const c=["expires","domain","path","busid","indate","receivetime","spread"],l={scene:-1,sceneNote:"",sessionId:""};function u(){const e=Date.now(),t=[];a.forEach((n=>{const i=n.expires||n.__wxprivate_calc_expires__;if(i&&1e3*i>e){const e=[];for(const t in n)c.indexOf(t)>=0&&e.push(`${encodeURIComponent(t)}=${encodeURIComponent(n[t])}`);e.push(`${encodeURIComponent(n.key)}=${encodeURIComponent(n.value)}`),t.push(e.join("; "))}}));const n=t.join(";; ");n.length>=4096||function(e,t){const n=r.Z.accountInfo&&r.Z.accountInfo.appId||"noAppId";e&&e.trim()&&(0,i.L)("setCookiesToGlobalStorage",{cookies:e,appId:n},void 0,t)}(n,(()=>{}))}function d(e,t,n){if("string"!=typeof e)return;const i=Date.now();e.split(";;").forEach((e=>{let o;if(e.split(";").forEach((e=>{o=o||{};const t=(e=e.split("="))[0].trim();let n=e[1]&&e[1].trim();"expires"!==t&&"indate"!==t||(n=+n,n=Number.isNaN(n)?void 0:n),t&&void 0!==n&&(c.indexOf(t)>=0?o[decodeURIComponent(t)]=decodeURIComponent(n):(o.key=decodeURIComponent(t),o.value=decodeURIComponent(n)))})),!o)return;t&&(o.receivetime=~~(i/1e3)),void 0===o.expires&&void 0!==o.indate&&o.receivetime&&(o.__wxprivate_calc_expires__=+o.receivetime+ +o.indate);const a=o.expires||o.__wxprivate_calc_expires__;a&&!(1e3*a>i)||function(e,t){for(let n=0,i=t.length;n<i;n++){const i=t[n];if(e.busid===i.busid&&e.key===i.key)return!0}return!1}(o,n)||n.push(o),r.Z.accountInfo&&r.Z.accountInfo.appId&&o.spread&&(o.spread="*"===o.spread?"":o.spread+":",o.spread+=r.Z.accountInfo.appId)}))}(0,o.Xb)(((e={})=>{l.scene=e.scene,l.sceneNote=e.scene_note,l.sessionId=e.sessionid}));function h(e){const t=[];for(const n in e)c.indexOf(n)>=0&&t.push(`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`);return t.push(`${encodeURIComponent(e.key)}=${encodeURIComponent(e.value)}`),t.join("; ")}const p=e=>{const t=Date.now(),n=[];a.forEach((e=>{const i=e.expires||e.__wxprivate_calc_expires__;e.domain&&"*"===e.domain&&(!i||1e3*i>t)&&n.push(h(e))}));const i=n.join(";; ");return e&&e.success&&e.success({cookies:i}),i},f=e=>{const t=Date.now(),n=[];a.forEach((e=>{const i=e.expires||e.__wxprivate_calc_expires__;(!i||1e3*i>t)&&n.push(e)}));const i=r.Z&&r.Z.accountInfo&&r.Z.accountInfo.appId||"",o=l.scene||"",s=l.sceneNote||"",c=l.sessionId||"";n.push({key:"appid",value:i,busid:"wxapp"},{key:"sessionid",value:c,busid:"wxapp"},{key:"scene",value:o,busid:"wxapp"},{key:"scene_note",value:s,busid:"wxapp"});const{hostAppId:u,pluginAppId:d}=e&&e.pluginInfo?e.pluginInfo:{};if(void 0!==u&&void 0!==d){const e=n.find((e=>"appid"===e.key));e&&(e.value=u),n.push({key:"plugin_appid",value:d,busid:"wxapp"})}const p=r.Z.host||{};"SDK"===p.env&&n.push({key:"sdk_host_appid",value:p.appId,busid:"wxapp"});const f=n.map(h).join(";; ");return e&&e.success&&e.success({cookies:f}),f},g=e=>{const t=Date.now(),n=e.cookies||[],i=e.isTemporary;if(!(n instanceof Array))return;const o=i?s:a,l=[],d={},p={},f=r.Z.accountInfo&&r.Z.accountInfo.appId||"";n.forEach((e=>{if(!e.key||"string"!=typeof e.key)return;const n=+e.expires;if(!e.value||n&&1e3*n<t)d[e.key]={key:e.key,busid:e.busid};else{const t={key:e.key,value:e.value};c.forEach((n=>{let r=e[n];"expires"!==n&&"indate"!==n||(r=+r,r=Number.isNaN(r)?void 0:r),"spread"===n&&r&&!i&&f&&(t.spread="*"===r?"":r+":",t.spread+=f),"receivetime"!==n&&"spread"!==n&&void 0!==r&&(t[n]=r)})),p[e.key]=t,l.push(t)}})),o.forEach((e=>{const n=d[e.key];if(n&&(!n.busid&&!e.busid||n.busid===e.busid))return;const i=p[e.key];if(i&&(!i.busid&&!e.busid||i.busid===e.busid))return;const r=e.expires||e.__wxprivate_calc_expires__;r&&1e3*r<t||l.push(e)}));if(function(e){const t=[];return e.forEach((e=>{t.push(h(e))})),t.join(";; ")}(l).length>=4096)return"setCookies:fail whole cookies storage is out of limit(4KB limit)";i?s=l:(a=l,u())}},4212:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});var i=n(1106);const r=__wxConfig.platform;let o=[];const a=e=>{const t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),i=("0"+e.getHours()).slice(-2),o=("0"+e.getMinutes()).slice(-2),a=("0"+e.getSeconds()).slice(-2),s=("00"+e.getMilliseconds()).slice(-3),c=`${e.getFullYear()}-${t}-${n}`,l=`${i}:${o}:${a}.${s}`;if("ios"===r){return`${c} ${l}000${(e.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-")}`}return`${c} ${(e.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")} ${l}`},s=e=>function(...t){const n=t.map((e=>{switch(e){case null:return"null";case void 0:return"undefined";default:return e.toString()}})).join(" ");o.push({date:new Date,type:e,content:n})};__wxConfig.onReady((()=>{setTimeout((function e(){var t;(setTimeout(e,2e3),0!==o.length)&&(t=o.slice(),"ios"===r&&"function"==typeof systemLog?systemLog({dataArray:t.map((e=>`\n${a(e.date)} [${e.type[0].toUpperCase()}][weapplib] ${e.content}`))}):"ios"===r||"windows"===r?(0,i.IN)("systemLog",{dataArray:t.map((e=>({message:`\n${a(e.date)} [${e.type[0].toUpperCase()}][weapplib] ${e.content}`})))}):"android"===r&&(0,i.IN)("systemLog",{message:["\n"].concat(t.map((e=>`[${e.type[0].toUpperCase()}][${a(e.date)}][weapplib] ${e.content}`))).join("\n")}),o=[])}),2e3)}));const c={log:s("log"),debug:s("debug"),info:s("info"),warn:s("warn"),error:s("error")}},6998:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getNetworkType:()=>l,onNetworkStatusChange:()=>u,offNetworkStatusChange:()=>d,_getCurrentNetworkType:()=>h});var i=n(1106),r=n(2046),o=n(665),a=n(2851);let s="";const c=(0,r.s)("networkstatusChange"),l=e=>{(0,i.IN)("getNetworkType",e)},u=c.onMethod,d=c.offMethod,h=()=>s;(0,i.jQ)("onNetworkStatusChange",((e={})=>{s=e.networkType,a.Z.currentNetworkType=s,c.emit(e),(0,i.nY)("onNetworkStatusChange",e)})),o.Z.onReady((()=>{l({success(e){s=e.networkType,a.Z.currentNetworkType=s}})}))},8176:(e,t,n)=>{"use strict";n.d(t,{oK:()=>s,j8:()=>c,x9:()=>o});var i=n(1106);const r=(0,n(2046).s)("userCaptureScreen"),o=r.onMethod;r.offMethod;let a=null;(0,i.jQ)("onUserCaptureScreen",(e=>{"function"==typeof a&&a(e),r.emit(e)}));const s=e=>{a=__errorTracer__.surroundThirdByTryCatch(e,"at onUserCaptureScreen callback function")},c=()=>{a=null}},3170:(e,t,n)=>{"use strict";n.d(t,{So:()=>p,xI:()=>f,m4:()=>g,Oo:()=>A,Ew:()=>b,Yu:()=>I,mw:()=>x});var i=n(1106),r=n(2999),o=n(2802),a=n(665),s=n(2582),c=n(1095),l=n(7322);let u=null;const d=e=>{let t=s.iw;s.cj&&(e.brand="iPhone"),s.gm&&"devtools"!==e.brand&&(t="iPhone"===e.brand?"ios":"android"),e.platform=t,e.SDKVersion=o.c,e.enableDebug=Boolean(a.Z.debug),a.Z.devicePixelRatio&&(e.devicePixelRatio=a.Z.devicePixelRatio),a.Z.theme&&(e.theme=a.Z.theme),a.Z.host&&(e.host=a.Z.host),s.wZ&&/^\d+\.\d+$/.test(e.version)&&(e.version+=".0"),u=Object.assign({},e),delete u.errMsg,(0,c.Av)()&&4!==a.Z.appType&&(e.safeArea=Object.assign({},e.safeArea),e.safeArea.top=0,e.safeArea.bottom=e.screenHeight,e.safeArea.height=e.safeArea.bottom-e.safeArea.top),s.jP&&(e.renderer="h5")},h=()=>{a.Z.isReady||(new Error).stack},p=e=>{h();(0,i.IN)("getSystemInfo",e,{beforeSuccess:d})},f=()=>{let e={};return p({success(t){delete t.errMsg,e=t,u=Object.assign({},e)}}),e},g=()=>u||f();let _=null,m=0,y=0;const v=["brand","model","pixelRatio","language","version","system","platform","SDKVersion"];a.Z.onReady((()=>{_={};for(let e=0;e<v.length;e++){if(!(v[e]in a.Z)){_=g();break}_[v[e]]=a.Z[v[e]]}if(a.Z.screenHeight&&a.Z.screenWidth)m=a.Z.screenWidth,y=a.Z.screenHeight;else{const e=g();m=e.screenWidth,y=e.screenHeight}}));const A=()=>a.Z.isReady?Object.assign({},_):((new Error).stack,{}),b=()=>a.Z.isReady?{screenWidth:m,screenHeight:y,deviceOrientation:m>y?"landscape":"portrait"}:((new Error).stack,{});let w=!1;const E=new Set;let T;(0,r.n)("onAppRouteDone",(()=>{w=!0,E.forEach((e=>e())),E.clear()}));const S=new Set,C=()=>{(0,l.L)("getUserAgent",{},void 0,(e=>{T=e,S.forEach((t=>{try{t(e)}catch(e){}})),S.clear()}))},I=e=>{T?e(T):w?(S.add(e),C()):(E.has(C)||E.add(C),S.add(e))},x=(()=>{let e;return(...t)=>e||(e=f(...t),e)})()},9848:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var i=n(665),r=n(638);const o=(()=>{let e;const t=t=>{e="halfPage"===t.mode};return(0,r.T)((e=>t(e))),i.Z.onReady((()=>t(i.Z.appLaunchInfo||{}))),()=>e})();(()=>{const e=[1175,1177];let t;const n=n=>{t=e.includes(n.scene)};(0,r.T)((e=>n(e))),i.Z.onReady((()=>n(i.Z.appLaunchInfo||{})))})()},6052:(e,t,n)=>{"use strict";n.d(t,{KK:()=>r.KK,yH:()=>o,rW:()=>s,vL:()=>c,bh:()=>l,hr:()=>u,pJ:()=>d,NG:()=>h,NC:()=>p,i$:()=>g,ho:()=>_,ZD:()=>m,ej:()=>v,Pd:()=>b,cF:()=>w,qB:()=>E,yX:()=>T,lz:()=>S,dJ:()=>C,gj:()=>P,aW:()=>R});var i=n(5274),r=n(2159);const{saveFile:o,saveFileSync:a,getSavedFileList:s,getSavedFileInfo:c,removeSavedFile:l,getFileInfo:u,readFile:d,readFileSync:h,writeFile:p,writeFileSync:f,mkdir:g,mkdirSync:_,rmdir:m,rmdirSync:y,readdir:v,readdirSync:A,access:b,accessSync:w,unlink:E,unlinkSync:T,stat:S,statSync:C,unzip:I,copyFile:x,copyFileSync:D,rename:O,renameSync:P,appendFile:R,appendFileSync:k}=i.ZP.app},8013:(e,t,n)=>{"use strict";n.d(t,{tT:()=>i,LE:()=>u,Xo:()=>c,jL:()=>l});const i=(0,n(1130).Z)("getChannelsLiveInfo","webapi_getfinderviewlastlive",{},{},(({feedId:e,finderUserName:t})=>({export_id:e,finder_username:t})),(e=>{e.live_info&&e.live_info.length&&(e.feedId=e.live_info[0].export_id,e.nonceId=e.live_info[0].nonce_id,e.description=e.live_info[0].description,e.status=e.live_info[0].status,e.headUrl=e.live_info[0].head_url,e.nickname=e.live_info[0].nickname),delete e.live_info,delete e.rawData}));var r=n(1106),o=n(3536);function a(){if("undefined"==typeof __appServiceEngine__)return"";const e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}function s(e,t,n,i=""){const r=[e||"",a(),t,n,i].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"WeAppToChannels",value:r})}function c(e={}){i(Object.assign({},e,{success({nickname:t}){const n=t?`“${t}”`:"";(0,o.I6)({title:`即将打开${n}视频号直播`,confirmText:"允许",cancelText:"取消",success({confirm:t}){t?(0,r.IN)("openChannelsLive",e,{beforeAll({errMsg:t}){s(e.finderUserName,1,/^\w+:ok/.test(t)?1:0,t)}}):(s(e.finderUserName,1,0,"cancel"),(0,r.YG)("openChannelsLive",e,"cancel"))}})},fail({errMsg:t}){s(e.finderUserName,1,0,t),(0,r.YG)("openChannelsLive",e,t)},complete:null}))}function l(e={}){i(Object.assign({},e,{success({nickname:t}){const n=t?`“${t}”`:"";(0,o.I6)({title:`即将打开${n}视频号`,confirmText:"允许",cancelText:"取消",success({confirm:t}){t?(0,r.IN)("openChannelsUserProfile",e,{beforeAll({errMsg:t}){s(e.finderUserName,2,/^\w+:ok/.test(t)?1:0,t)}}):(s(e.finderUserName,2,0,"cancel"),(0,r.YG)("openChannelsUserProfile",e,"cancel"))}})},fail({errMsg:t}){s(e.finderUserName,2,0,t),(0,r.YG)("openChannelsUserProfile",e,t)},complete:null}))}function u(e={}){i(Object.assign({},e,{success({nickname:t}){const n=t?`“${t}”`:"";(0,o.I6)({title:`即将打开${n}视频号`,confirmText:"允许",cancelText:"取消",success({confirm:t}){t?(0,r.IN)("openChannelsActivity",e,{beforeAll({errMsg:t}){s(e.finderUserName,3,/^\w+:ok/.test(t)?1:0,t)}}):(s(e.finderUserName,3,0,"cancel"),(0,r.YG)("openChannelsActivity",e,"cancel"))}})},fail({errMsg:t}){s(e.finderUserName,3,0,t),(0,r.YG)("openChannelsActivity",e,t)},complete:null}))}},7322:(e,t,n)=>{"use strict";n.d(t,{L:()=>s});var i=n(1106),r=(n(7452),n(2851));let o=0;const a=[],s=(e,t={},n,s)=>{const c=o++;a[c]=s,(0,i.nY)("invokeWebviewMethod",{name:e,args:t,callbackId:c},void 0===n?[r.Z.currentWebviewId]:n)};(0,i.Ld)("callbackWebviewMethod",(({res:e,callbackId:t})=>{const n=a[t];delete a[t],n&&n(e)}))},9978:(e,t,n)=>{"use strict";n.d(t,{I9:()=>u,EO:()=>d,zU:()=>p,FI:()=>h,FE:()=>f});var i=n(1106),r=n(5260),o=n(2851),a=n(2614),s=n(7618),c=n(7657),l=n(665);const u=(e={})=>{(0,i.IN)("chooseImage",(0,r.f0)({count:9,sizeType:["original","compressed"],sourceType:["album","camera"]},e),{beforeSuccess(e){e.tempFileSizes?e.tempFiles=(e.tempFilePaths||[]).filter((e=>e)).map(((t,n)=>({path:t,size:e.tempFileSizes[n]}))):e.tempFiles=(e.tempFiles||[]).filter((e=>e.path&&"number"==typeof e.size)),delete e.tempFileSizes}})},d=(e={})=>{if(!(0,i.r3)("previewImage",e,{urls:[""]}))return;const t=l.Z.version,n=l.Z.system,r="7.0.12"===t&&n.indexOf("iOS 13.4")>=0;for(const t of e.urls)if(/^\s*data:image\//.test(t)&&r)return void(0,i.YG)("previewImage",e,"url can not be base64 on iOS 13.4");const o=Object.assign({},e);o.urls=o.urls.slice(),o.referrerPolicy=o.referrerPolicy||"origin",(0,c.V)(o.urls,"image",(e=>{const t=o.urls;if(o.urls=[...e.data.map((e=>e.url))],o.current){const e=t.indexOf(o.current);e>=0&&(o.current=o.urls[e])}o.urls&&(o.urls=o.urls.map((e=>s.L.get(e)||e))),(0,i.IN)("previewImage",o)}))},h=e=>{const t=Object.assign({},e),n=[t.src];(0,c.V)(n,"image",(e=>(t.src=e.data[0].url,p(t,a.S))))},p=(e,t)=>{(0,i.r3)("getImageInfo",e,{src:""})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/tmp\//.test(e.src)?(0,i.IN)("getImageInfo",e,{beforeSuccess:t=>{t.path=e.src}}):/^(http|https):\/\//.test(e.src)?t({url:e.src,success(t){404!==t.statusCode?(e.src=t.tempFilePath,(0,i.IN)("getImageInfo",e,{beforeSuccess:t=>{t.path=e.src}})):(0,i.YG)("getImageInfo",e,"image not found (404)")},fail(t){(0,i.YG)("getImageInfo",e,"download image fail. reason: "+t.errMsg)}}):(e.src=(0,r.sd)(o.Z.lastRoute,e.src,!1),(0,i.IN)("getImageInfo",e,{beforeSuccess:t=>{t.path=e.src}})))},f=(e={})=>{e.filePath=s.L.get(e.filePath)||e.filePath,(0,i.IN)("saveImageToPhotosAlbum",e,{})}},2614:(e,t,n)=>{"use strict";n.d(t,{o:()=>D,S:()=>O});var i=n(1106),r=n(6947),o=n(2582),a=n(665),s=n(2288),c=n(5014),l=n(7255);(0,l.b)("Download",{maxTaskCount:10,functionName:"downloadFile"}),a.Z.onReady((()=>{try{"number"==typeof a.Z.wxAppInfo.maxDownloadConcurrent&&(0,l.b)("Download",{maxTaskCount:a.Z.wxAppInfo.maxDownloadConcurrent})}catch(e){}}));class u extends l.o{constructor(e){super(e,{taskType:"Download",beforeSend:t=>(t.filePath=e.filePath,t),beforeSuccess:e=>(delete e.timeInterval,e)})}}const d=u;var h=n(8159),p=n(1095),f=n(9271);const g=r.Z.Download,_=new WeakMap,m=new WeakMap,y=new WeakMap,v=[];let A=0,b=10;function w(e=!1){for(e&&(_.delete(e),m.delete(e),y.delete(e),A--);v.length>0&&A<b;){const e=v.shift(),t=_.get(e),n=m.get(e);t&&n&&(t.start(n),A++)}}a.Z.onReady((()=>{a.Z.wxAppInfo&&a.Z.wxAppInfo.maxDownloadConcurrent&&(b=a.Z.wxAppInfo.maxDownloadConcurrent)}));class E{constructor(e){const t=new g,n=new h.Z;_.set(this,t),y.set(this,n),m.set(this,(0,p.v7)(e,["url","header","filePath","enableProfile"])),t.onfail=t=>{(0,i.YG)("downloadFile",e,t),w(!0)},t.onsuccess=t=>{(0,i.FE)({name:"downloadFile",args:e,res:t}),w(!0)},t.onheader=e=>n.emit("header",{header:e}),t.onprogress=(e,t,i)=>n.emit("progress",{progress:e,totalBytesWritten:t,totalBytesExpectedToWrite:i}),(0,f.k)({api:"downloadFile",url:e.url}).then((t=>{e.__skipDomainCheck__||t.isInDomainList||t.isInLAN&&!t.isLocalHost?(v.push(this),w()):(0,i.YG)("downloadFile",e,"invalid url")})).catch((()=>{(0,i.YG)("downloadFile",e,"url validate error")}))}abort(){const e=_.get(this);e&&e.abort()}onHeadersReceived(e){const t=y.get(this);t&&t.on("header",e)}onProgressUpdate(e){const t=y.get(this);t&&t.on("progress",e)}offHeadersReceived(e){const t=y.get(this);t&&t.off("header",e)}offProgressUpdate(e){const t=y.get(this);t&&t.off("progress",e)}}let T=!1;function S(e){return T?new E(e):new d(e)}n.g.__isAppServiceRemoteDebugMode__||r.Z.Download&&a.Z.onReady((()=>{let e=!1;const t=o.cj?"clicfg_appbrand_ios_native_download":"clicfg_appbrand_native_download";(0,s.b)({experimentId:t,experimentType:"Expt",success:t=>{t&&1===Number(t.testConfig)&&(e=!0)},fail(e){}});const n=(0,c.J)("bindingDownload");T=e||n}));var C=n(5274);const I=(e={})=>(e=Object.assign({__skipDomainCheck__:!1},e),(t={})=>{if((0,i.r3)("downloadFile",t,{url:""})){t.__skipDomainCheck__=e.__skipDomainCheck__;try{return new S(t)}catch(e){return void(0,i.YG)("downloadFile",t,e.message)}}}),x=I(),D=I({__skipDomainCheck__:!0}),O=(e={})=>{if("string"!=typeof e.filePath||!e.filePath.startsWith((0,C.WZ)()))return x(e);(0,i.YG)("downloadFile",e,"permission denied")}},5166:(e,t,n)=>{"use strict";n.d(t,{a:()=>M,W:()=>N});var i=n(1106),r=n(5260),o=n(665),a=n(7255),s=n(7452),c=n(2851);let l="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",u="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function d({isSuccess:e,invokeTime:t,costTime:n,wxdataQueueTimestamp:i,wxdataDequeueTimestamp:r,beginCGITimestamp:a,CGICallbackTimestamp:d,wxlibCallbackTimestamp:h,requestingCount:p,cost1:f,cost2:g,cost3:_,cost4:m,cost5:y,cost6:v,JSApiType:A}){Math.random()<.002&&setTimeout((()=>{const b=c.Z.currentNetworkType,w=o.Z.appType+1e3,E=o.Z.appLaunchInfo&&void 0!==o.Z.appLaunchInfo.scene?o.Z.appLaunchInfo.scene:0,T=["","",e?1:0,t,n,b,"",w,E,l,u,"",0,0,f,g,_,m,y,v,0,0,p,t,i,r,a,d,0,0,h,A].map((S=1024,e=>(0,s.HD)(e)&&e.length>S?e.substr(0,S):e)).join(",");var S;Reporter.reportKeyValue({key:"WeAppOperateWXData",value:T})}),0)}(0,s.HD)(l)&&(l=l.replace(" ","")),(0,s.HD)(u)&&(u=u.replace(" ","-"));var h=n(7646),p=n(1095),f=n(6998);const g=(0,p.Fr)((0,h.Ce)(!1,"getDNSInfo"));let _={},m={},y={};(0,f.onNetworkStatusChange)((()=>{_={},m={},y={}}));let v=0;(0,a.b)("Request",{maxTaskCount:10,functionName:"request"}),o.Z.onReady((()=>{try{"number"==typeof o.Z.wxAppInfo.maxRequestConcurrent&&(0,a.b)("Request",{maxTaskCount:o.Z.wxAppInfo.maxRequestConcurrent})}catch(e){}}));class A extends a.o{constructor(e){const t={JSApiType:1,invokeTime:Date.now(),requestingCount:++v};super(e,{taskType:"Request",beforeSend:t=>(t.responseType=e.responseType,t.apiSigningSeq=e.apiSigningSeq,t.apiSignature=e.apiSignature,t),beforeSuccess:n=>{var i,r;return e.host&&e.ip&&(i=e.host,r=e.ip,m[i]=r),t.isSuccess=!0,function(e){"string"==typeof e.data&&65279===e.data.charCodeAt(0)&&(e.data=e.data.substr(1))}(n),function(e){e.statusCode=parseInt(e.statusCode,10)}(n),function(e){"object"==typeof e.header&&(e.header=Object.keys(e.header).reduce(((t,n)=>(Array.isArray(e.header[n])?t[n]=e.header[n].join(","):"string"==typeof e.header[n]&&(t[n]=e.header[n]),t)),{}))}(n),"json"===e.dataType&&function(e){try{e.data=JSON.parse(e.data)}catch(e){}}(n),b(n,t,e),n},beforeFail:n=>(t.isSuccess=!1,b(n,t,e),n)})}}function b(e,t,n){const i=Date.now();if(v--,t.costTime=i-t.invokeTime,e.clientInfo&&"object"==typeof e.clientInfo){const r=e.clientInfo;t.wxdataQueueTimestamp=r.invokeTime,t.wxdataDequeueTimestamp=r.invokeTime,t.beginCGITimestamp=r.beginCGITimestamp,t.CGICallbackTimestamp=r.CGICallbackTimestamp,t.wxlibCallbackTimestamp=r.wxlibCallbackTimestamp,t.cost1=t.wxdataQueueTimestamp-t.invokeTime,t.cost2=t.wxdataDequeueTimestamp-t.wxdataQueueTimestamp,t.cost3=t.beginCGITimestamp-t.wxdataDequeueTimestamp,t.cost4=t.CGICallbackTimestamp-t.beginCGITimestamp,t.cost5=t.wxlibCallbackTimestamp-t.CGICallbackTimestamp,t.cost6=i-t.wxlibCallbackTimestamp,n&&n.__wxUseProfile__&&(e.__requestProfileInfo=t),delete e.clientInfo,d(t)}}const w=A,E=new WeakMap;class T{constructor(){let e;const t=new Promise((t=>{e=t}));E.set(this,{promise:t,resolve:e})}abort(){const{promise:e}=E.get(this);e.then((e=>{e.abort()}))}onHeadersReceived(e){const{promise:t}=E.get(this);t.then((t=>{t.onHeadersReceived(e)}))}offHeadersReceived(e){const{promise:t}=E.get(this);t.then((t=>{t.offHeadersReceived(e)}))}}function S({args:e}){const t=(0,r.Em)(e.header);e.header=e.header||{},e.header=(0,r.Nf)(e.header),"Undefined"!==t&&"Object"!==t&&(console.warn("wx.request: header must be an object"),e.header={}),e.header=Object.keys(e.header).reduce(((t,n)=>("content-type"===n.toLowerCase()?t[n.toLowerCase()]=e.header[n]:t[n]=e.header[n],t)),{});let n="text";e.responseType&&(n=e.responseType.toLowerCase());const i=e.header||{};let o,a="GET";return"string"==typeof e.method&&(a=e.method.toUpperCase()),e.dataType=e.dataType||"json",i["content-type"]=i["content-type"]||"application/json",o=void 0===e.data?"":"string"!=typeof e.data&&"ArrayBuffer"!==(0,r.Em)(e.data)?i["content-type"].indexOf("application/x-www-form-urlencoded")>-1?(0,r.HR)(e.data,!0):i["content-type"].indexOf("application/json")>-1||"object"==typeof e.data?JSON.stringify(e.data):o.toString():e.data,"GET"===a&&(e.url=(0,r.cE)(e.url,e.data)),{header:i,method:a,responseType:n,dataStr:o,args:e}}function C({args:e,host:t}){let n;if(!0===e.enableHttpDNS){const e=(e=>{const t=_[e];return t?{expired:Date.now()>t.expireTime,ip:t.ip}:null})(t);return e&&!1===e.expired?(n=e.ip,{host:t,ip:n}):(e=>(y[e]||(y[e]=g({apiName:"webapi_wxahttpdns_gethostip",reqData:{domain:e}}).then((t=>{delete y[e],t=JSON.parse(t.rawData);const{wxa_state:n,ip:i,ttl:r}=t;if(0===n)return _[e]={ip:i,expireTime:1e3*r+Date.now()},_[e];throw new Error(n)})).catch((t=>{throw delete y[e],t}))),y[e]))(t).then((e=>(n=e.ip,{host:t,ip:n})))}return{}}function I({host:e,ip:t}){return{forbidReuse:((e,t)=>{const n=m[e];return t?!(n&&n===t||(delete m[e],0)):(delete m[e],!1)})(e,t)}}var x=n(6012);function D({args:e}){const{host:t,protocol:n}=(0,x.e)(e.url);return{host:t,protocol:n}}function O({protocol:e}){let t;return t="http"===e?80:"https"===e?443:0,{port:t}}const P=__safeway__.apiSign.makeApiSign;class R{constructor(e){this.innerParams=e,this.asyncTasks=[]}use(e){const t=e(this.innerParams,this.asyncTasks);if(t instanceof Promise){const e=t.then((e=>{Object.assign(this.innerParams,e)}));this.asyncTasks.push(e)}else Object.assign(this.innerParams,t);return this}useAfterAsyncTasks(e){return this.asyncTasks.length>0?Promise.all(this.asyncTasks).then((()=>{this.use(e)})).catch((e=>e)):this.use(e),this}catch(e){return this.catchFn=e,this}execute(){if(this.asyncTasks.length>0){const e=new T;return Promise.all(this.asyncTasks).then((()=>{const t=this.createRequestTask();((e,t)=>{const{resolve:n}=E.get(e);n(t)})(e,t)})).catch((e=>{this.catchFn&&this.catchFn(e),delete this.catchFn})),e}return this.createRequestTask()}createRequestTask(){const{args:e,host:t,ip:n,header:i,method:r,port:o,responseType:a,dataStr:s,options:c,forbidReuse:l}=this.innerParams;try{return new w(Object.assign({},e,{header:i,method:r,responseType:a,data:s,ip:n,host:t,port:o,forbidReuse:l},P("createRequestTask",{url:e.url,__skipDomainCheck__:c.__skipDomainCheck__})))}catch(e){return this.catchFn&&this.catchFn(e),void delete this.catchFn}}}const k=(e={})=>(e=Object.assign({__skipDomainCheck__:!1},e),function(t={}){if(!(0,i.r3)("request",t,{url:""}))return;if(!1===(0,r.mQ)(t.url))return void(0,i.YG)("request",t,`invalid url "${t.url}"`);try{JSON.stringify(t.data)}catch(e){return void(0,i.YG)("request",t,"fail to stringify data")}if("function"==typeof t.data)return void(0,i.YG)("request",t,"data should not be Function");const n=new R({args:t,options:e});return n.catch((e=>{(0,i.YG)("request",t,e.message||e.errMsg)})).use(S).use(D).use(O).use(C).useAfterAsyncTasks(I),n.execute()}),N=k(),M=k({__skipDomainCheck__:!0})},7255:(e,t,n)=>{"use strict";n.d(t,{o:()=>x,b:()=>B});var i=n(3525),r=n(5500),o=n(2184),a=n(1095),s=n(7452),c=n(6052),l=n(6012),u=n(2582),d=n(946),h=n(665);const p=(0,a.Fr)(c.lz);let f=0;const g=new WeakMap,_=new WeakMap,m=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakMap,b=new WeakMap,w=new WeakMap,E=new WeakMap,T=new WeakMap,S={},C=new o.Q("Network",!0),I=wxNativeConsole.createLogger("NetworkTask");class x{constructor(e,{taskType:t,beforeSend:n,beforeSuccess:i,beforeFail:r}){const o=f++;g.set(this,o),m.set(this,"waiting"),y.set(this,e),v.set(this,t),b.set(this,n),w.set(this,i),(0,s.mf)(r)&&E.set(this,r);let a=!1;u.jP&&(a=!0),u.wZ&&h.Z.clientVersion>=654315008&&("Download"!==t&&"Request"!==t||Object.keys(h.Z.gamePlugins||h.Z.plugins||{}).forEach((e=>{const t=(h.Z.gamePlugins||h.Z.plugins)[e];!t||"wx20afc706a711eefc"!==t.provider&&"wx4d5893418b75cb20"!==t.provider||(a=!0)}))),T.set(this,a),this.promise=new d.Q(((e,t)=>{this.resolve=e,this.reject=t}));const c=()=>{M.call(this)?S[t].taskQueue.push({id:o,item:this}):O.call(this)};(0,s.mf)(e.customCheck)?e.customCheck(e,(n=>{n?D(t,e,n):c()})):c()}abort(){if(I.info(`[${v.get(this)}][${g.get(this)}]abort()`),"waiting"===m.get(this)){I.info(`[${v.get(this)}][${g.get(this)}] waiting=true`);const e=S[v.get(this)].taskQueue.findIndex((e=>e.id===g.get(this)));e>-1&&(S[v.get(this)].taskQueue.splice(e,1),(0,i.YG)(S[v.get(this)].functionName,y.get(this),"abort")),m.set(this,"done")}else this.promise.then((()=>{(0,i.IN)(`operate${v.get(this)}Task`,{[`${v.get(this).toLowerCase()}TaskId`]:_.get(this),operationType:"abort"})}))}onProgressUpdate(e){this.promise.then((()=>{C.on(`${v.get(this)}${_.get(this)}progressUpdate`,e)}))}offProgressUpdate(e){this.promise.then((()=>{C.off(`${v.get(this)}${_.get(this)}progressUpdate`,e)}))}onHeadersReceived(e){this.promise.then((()=>{C.on(`${v.get(this)}${_.get(this)}headersReceived`,e)}))}offHeadersReceived(e){this.promise.then((()=>{C.off(`${v.get(this)}${_.get(this)}headersReceived`,e)}))}}function D(e,t,n){(0,i.FE)({name:S[e].functionName,args:{success:t.success,fail:t.fail,complete:t.complete},success:!1,errMsg:n})}function O(){const e=y.get(this),t=v.get(this),n=T.get(this);m.set(this,"sending"),A.set(this,Date.now());const i=P.call(this);n?this.promise.then((()=>{R.call(this)})).catch((n=>{D(t,e,n)})):i?D(t,e,i):R.call(this)}function P(){const e=v.get(this),t=y.get(this);let n;S[e].currentTaskCount++;const r={data:t.data,url:t.url,header:t.header,method:t.method,timeout:(0,s.hj)(t.timeout)?t.timeout:0,enableHttp2:!!(0,s.jn)(t.enableHttp2)&&t.enableHttp2,enableQuic:!!(0,s.jn)(t.enableQuic)&&t.enableQuic,enableCache:!!(0,s.jn)(t.enableCache)&&t.enableCache,enableProfile:!(0,s.jn)(t.enableProfile)||t.enableProfile,ip:t.ip,port:t.port,forbidReuse:!!(0,s.jn)(t.forbidReuse)&&t.forbidReuse,host:t.host,__skipDomainCheck__:t.__skipDomainCheck__,success:t=>{const n=t[`${e.toLowerCase()}TaskId`];_.set(this,n),S[e].taskIdMap[n]=this,this.resolve()},fail:i=>{S[e].currentTaskCount--;const r=i[`${e.toLowerCase()}TaskId`];n=i.errMsg,k.call(this,{taskType:e,options:t,errMsg:n,success:!1}),this.reject(n),I.error(`[${e}][createTask][Fail] taskId=${r}`)},complete:()=>{m.set(this,"done")}},o=T.get(this),a=`create${e}Task${o?"Async":""}`;return(0,i.IN)(a,b.get(this)(r)),n}function R(){const e=_.get(this),t=y.get(this),n=v.get(this),r=S[n].functionName;C.on(`${n}${e}success`,(e=>{w.get(this).call(this,e),(0,i.FE)({name:r,args:{success:t.success,fail:t.fail,complete:t.complete},res:e})})),C.on(`${n}${e}fail`,(e=>{const n=E.get(this);n&&n.call(this,e),(0,i.FE)({name:r,args:{success:t.success,fail:t.fail,complete:t.complete},success:!1,errMsg:e.errMsg})}))}function k({taskType:e,options:t,errMsg:n,success:i=!0,dataLength:o=0,statusCode:a="",responseDataLength:s=0,profile:c={}}){const l=t.url,u=i?1:2,d=Date.now()-A.get(this),h=t.__skipDomainCheck__;d>=6e4&&I.error(`reportTask costTime too long: ${d}ms, taskId=${_.get(this)}`),(0,r.P)(S[e].functionName,l,u,d,n,a,h,o,s,c)}function N(e,t){const n=`${t.toLowerCase()}TaskId`,i=e[n],{state:r,header:o}=e;if(delete e.state,delete e[n],e.cookies=o?(0,l.$)(o["Set-Cookie"]||o["set-cookie"]):[],C.emit(`${t}${i}${r}`,e),"success"===r||"fail"===r){const n=S[t].taskIdMap[i],o=y.get(n);if(!n)return;S[t].currentTaskCount-=1,S[t].taskQueue.length>0&&O.call(S[t].taskQueue.shift().item);let s=Promise.resolve((0,a.Y6)(o.data));if("Upload"===t){let e=0;"object"==typeof o.formData&&null!==o.formData&&(e=JSON.stringify(o.formData).length),s=p({path:o.filePath}).then((t=>e+t.stats.size)).catch((()=>e))}let c=Promise.resolve((0,a.Y6)(e.data));if("Download"===t){const t=e.dataLength;c="number"==typeof t?Promise.resolve(t):p({path:e.filePath||e.tempFilePath||""}).then((e=>e.stats.size)).catch((()=>0))}Promise.all([s,c]).then((([i,a])=>{k.call(n,{taskType:t,options:o,errMsg:e.errMsg,statusCode:e.statusCode,success:"success"===r,dataLength:i,responseDataLength:a,profile:e.profile})})),L.call(n)}}function M(){const e=v.get(this);return S[e].currentTaskCount>=S[e].maxTaskCount}function L(){const e=v.get(this),t=_.get(this);delete S[e].taskIdMap[t],C.removeAllListeners(`${e}${t}success`),C.removeAllListeners(`${e}${t}fail`),C.removeAllListeners(`${e}${t}complete`)}function B(e,t){const n=S[e]?S[e]:{currentTaskCount:0,maxTaskCount:10,taskQueue:[],functionName:"",taskIdMap:{}};(0,i.jQ)(`on${e}TaskStateChange`,(t=>{N.call(this,t,e)})),S[e]=Object.assign(n,t)}},6012:(e,t,n)=>{"use strict";function i(e){if(!e)return[];if(Array.isArray(e))return e;return e.split(",").reduce(((e,t)=>(/^\s*\S+=/.test(t)?e.push(t):e.length&&(e[e.length-1]+=t),e)),[]).map((e=>e.trim()))}function r(e){const t={protocol:/^(.+)\:\/\//,host:/\:\/\/(.+?)[\?\#\s\/]/,path:/\w(\/.*?)[\?\#\s]/,query:/\?(.+?)[\#\/\s]/,hash:/\#(\w+)\s$/};return e+=" ",Object.keys(t).forEach((n=>{const i=t[n];t[n]="query"===n?i.exec(e)&&i.exec(e)[1].split("&").reduce(((e,t)=>{const n=t.split("=");return e[n[0]]=n[1],e}),{}):i.exec(e)&&i.exec(e)[1]})),t}n.d(t,{$:()=>i,e:()=>r})},7477:(e,t,n)=>{"use strict";n.d(t,{sy:()=>je,JM:()=>_.JM,p4:()=>ze,Iq:()=>Pe,PF:()=>Je,bV:()=>xe,Xi:()=>gt,$8:()=>Ue,sj:()=>Ze,bG:()=>Re,et:()=>Le,wN:()=>Ve,x4:()=>Ie,as:()=>Ge,Lo:()=>_.Lo,mG:()=>i,bO:()=>vt,Me:()=>o,Xw:()=>qe,sD:()=>Ye.s,FD:()=>st,TP:()=>$e,BN:()=>r,z9:()=>He});var i={};n.r(i),n.d(i,{Ls:()=>N,bu:()=>s});var r={};n.r(r),n.d(r,{l7:()=>H.Z,bz:()=>ae,dv:()=>Y,rf:()=>Q,R0:()=>Ae,KQ:()=>q,kv:()=>ne,hx:()=>ee});var o={};n.r(o),n.d(o,{WZ:()=>Te,FA:()=>we,_p:()=>Ee,qU:()=>Se});var a=n(1106);const s=e=>{(0,a.IN)("requestVirtualPayment",e)};var c=n(1503),l=n.n(c),u=n(3356),d=n.n(u),h=n(638),p=n(3170),f=n(7322),g=n(8827),_=n(7646),m=n(2276),y=n(665);var v=n(3536),A=n(7452),b=n(2783),w=n(5287);let E=!1,T=500,S=!1;const C=0,I=1,x=2,D=3,O=4,P=()=>{var e,t,n;return{shouldCheck:null!==(e=E)&&void 0!==e&&e,timeout:null!==(t=T)&&void 0!==t?t:500,deprecated:null!==(n=S)&&void 0!==n&&n}},R=function(){var e=d()((function*(e){try{const{respData:t}=yield B({apiName:"webapi_openproduct_bizaccount",reqData:{path:e.path,query:JSON.stringify(e.query||{})}}),n=JSON.parse(t.data);if(void 0!==n.openproduct_checkticket&&(E=!!n.openproduct_checkticket),void 0!==n.openproduct_checktickettimeout&&(T=parseInt(n.openproduct_checktickettimeout,10)),void 0!==n.openproduct_checkticket_deprecated&&(S=!!n.openproduct_checkticket_deprecated),void 0!==n.openleague_cookie){const e=[];(0,g.jl)(n.openleague_cookie||"",!1,e);const t=(0,g.zv)({cookies:e});t&&wxNativeConsole.error("[set openleague_cookie]",t)}}catch(e){}}));return function(t){return e.apply(this,arguments)}}();y.Z.onReady((()=>{setTimeout((()=>R(y.Z.appLaunchInfo||{})),1e3)})),(0,h.T)((e=>{(e.reLaunch||e.isLaunch)&&R(e)}));const k=(()=>{let e,t,n,i;return(0,h.T)((r=>{e=+r.scene||0,t=r.scene_note||r.sceneNote||"",n=+r.prescene||0,i=r.prescene_note||r.presceneNote||""})),y.Z.onReady((()=>{(()=>{const r=y.Z.appLaunchInfo||{};e=r.scene||0,t=r.scene_note||r.sceneNote||"",n=r.prescene||0,i=r.prescene_note||r.presceneNote||""})()})),()=>({scene:e,scene_note:t,prescene:n,prescene_note:i})})(),N=(0,b.NX)("requestPayment",function(){var e=d()((function*(e){const t=(0,A.x7)(e,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""});if(t)throw new Error(`parameter error: ${t}`);e=Object.assign({},e);const{deprecated:n,shouldCheck:i}=P();let r=!1;if(r="develop"===y.Z.envVersion||"trial"===y.Z.envVersion?y.Z.usingShopPlugin||!1:i||!1,r){if(console.log("wx.requestPayment is deprecated for shop plugin. Please use wx.requestOrderPayment."),n)throw new Error("deprecated for shop plugin");let t=C;const i=e.ticket||"";try{const n=P().timeout||500;try{const{is_authorized:r}=yield Promise.race([F(l()({ticket:i,prepay_id:e.package.replace("prepay_id=","")},k())),U("timeout",n)]);t=r?D:O}catch(e){wxNativeConsole.error("[paymentCheckTicket] fail",e),t=e&&"timeout"===e.message?x:I}if(t===O)throw new Error("check ticket rejected")}finally{W({ticket:i,checkTicketStatus:t})}}let o,a=G.NONE;try{const t=yield j(e);return a=G.SUCCESS,t}catch(e){throw a=G.FAILED,o=e.message,e}finally{r&&V({prepayId:(e.package||"").replace("prepay_id=",""),requestPaymentStatus:a,requestPaymentErrmsg:o})}}));return function(t){return e.apply(this,arguments)}}()),M=function(){var e=d()((function*(){const{time:e,isRistWarning:t,wording:n}=yield new Promise((e=>{!function(e){const t=y.Z.accountInfo&&y.Z.accountInfo.appId||"noAppId";(0,f.L)("getRequestPaymentFromGlobalStorage",{appId:t},void 0,e)}((t=>{let n=!1,i="";const r=y.Z&&y.Z.appContactInfo&&y.Z.appContactInfo.operationInfo&&y.Z.appContactInfo.operationInfo.jsonInfo&&y.Z.appContactInfo.operationInfo.jsonInfo.warning_info&&y.Z.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];r&&r.forEach((e=>{"requestPayment"===e.jsapi_name&&e.wording&&(n=!0,i=e.wording)})),e({time:t,isRistWarning:n,wording:i})}))})),i=(+new Date-(e||0))/1e3/60;t&&i>30&&(yield new Promise(((e,t)=>{(0,v.I6)({content:n,confirmText:"继续支付",cancelText:"取消",success(n){n.confirm?(!function(e,t){const n=y.Z.accountInfo&&y.Z.accountInfo.appId||"noAppId";e&&(0,f.L)("setRequestPaymentToGlobalStorage",{requestPayment:e,appId:n},void 0,t)}(+new Date),e()):t(new Error("cancel"))}})})))}));return function(){return e.apply(this,arguments)}}(),L=(0,b.Vl)(a.IN.bind(null,"requestPayment")),B=(0,b.Vl)(_.JM),F=function(){var e=d()((function*(e={}){const{respData:t}=yield B({apiName:"webapi_openproductcheckticket",reqData:l()({},e)});return JSON.parse(t.data)}));return function(){return e.apply(this,arguments)}}(),U=(e,t)=>new Promise(((n,i)=>setTimeout((()=>i(new Error(e))),t))),W=({ticket:e,checkTicketStatus:t})=>{const n=y.Z.appLaunchInfo||{},i=k(),r=[n.sessionid||n.sessionId||"",i.scene,i.scene_note,i.prescene,i.prescene_note,t||0,e||""].join(",");Reporter.reportKeyValue({key:"RequestPaymentCheckTicket",value:r})},j=function(){var e=d()((function*(e){yield M();const t=(0,g.Zv)();e.passCookies&&"string"==typeof e.passCookies?e.cookie=t?e.passCookies+";; "+t:e.passCookies:t?e.cookie=t:delete e.cookie,delete e.passCookies,e.cookie;const n=(0,w.I)(),i=yield L(l()(l()({adUxInfo:n},e),{},{grantMessageQuota:!0}));return(0,_.JM)({apiName:"webapi_reportpayrecord",reqData:{prepay_id:e.package.replace("prepay_id=","")}}),(0,f.L)("reportPaymentFormId",{packageStr:e.package}),(0,m.Hk)(),i}));return function(t){return e.apply(this,arguments)}}(),G={NONE:0,SUCCESS:1,FAILED:2},V=function(){var e=d()((function*({extUserUin:e,addOrderStatus:t,requestPaymentStatus:n,requestPaymentErrmsg:i,prepayId:r,outOrderId:o}){const a=(0,p.mw)(),s=y.Z.appLaunchInfo||{},{respData:c}=yield B({apiName:"webapi_openproductreportorder",reqData:{ext_info:l()(l()({ext_useruin:e,ext_appid:y.Z.host&&y.Z.host.appId,session_id:s.sessionid||s.sessionId||""},k()),{},{add_order_status:t,request_payment_status:n,request_payment_errmsg:i,model:a.model,brand:a.brand,version:a.version,system:a.system,platform:a.platform,sdk_version:a.SDKVersion}),prepay_id:r,order_info:{out_order_id:o}}});return JSON.parse(c.data)}));return function(t){return e.apply(this,arguments)}}();var H=n(9078),z=n(5260),Z=n(2582);const Y=(e={})=>{const t=H.Z.get(e.shareTicket);t?(0,a.gM)((0,z.f0)({data:{api_name:"webapi_getshareinfo",data:{share_key:t.shareKey,share_name:t.shareName}}},e),{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateWXData","getShareInfo")},beforeSuccess:e=>{Z.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{const t=JSON.parse(e.data.data);t.roomTopic&&(e.roomTopic=t.roomTopic)}catch(e){}e.iv=e.data.iv,e.encryptedData=e.data.encryptedData,e.data.cloud_id&&(e.cloudID=e.data.cloud_id),delete e.data}}):(0,a.YG)("getShareInfo",e,"invalid shareTicket")};var $=n(8799);const q=(e={})=>{const t=Array.isArray(e.menus)?e.menus:["shareAppMessage"],n=[];if(t.includes("shareAppMessage")){$.Q.showShareAppMessageMenu=!0;const t=new Promise(((t,n)=>{!0===e.withShareTicket?($.Q.withShareTicket=!0,(0,a.IN)("showShareMenuWithShareTicket",{withShareTicket:!0,success:t,fail:n,beforeAll(e){e.errMsg=e.errMsg.replace("showShareMenuWithShareTicket","showShareMenu")},beforeFail(e){e.errMsg+=", with arg withShareTicket: true"}})):($.Q.withShareTicket=!1,(0,a.IN)("showShareMenu",{success:t,fail:n}))}));n.push(t)}if(t.includes("shareAppMessage")&&t.includes("shareTimeline")){$.Q.showShareTimelineMenu=!0;const e=new Promise(((e,t)=>{(0,a.IN)("showShareTimelineMenu",{success:e,fail:t})}));n.push(e)}Promise.all(n).then((()=>{(0,a.FE)({name:"showShareMenu",args:e})})).catch((t=>{const n=t.errMsg.replace("showShareMenu:fail","").replace("showShareTimelineMenu:fail","");(0,a.YG)("showShareMenu",e,n,t.errCode)}))},Q=(e={})=>{const t=Array.isArray(e.menus)?e.menus:["shareAppMessage","shareTimeline"],n=[];function i(){return new Promise(((e,t)=>{(0,a.IN)("hideShareTimelineMenu",{success:e,fail:t})}))}if(t.includes("shareTimeline")&&($.Q.showShareTimelineMenu=!1,n.push(i())),t.includes("shareAppMessage")){$.Q.showShareAppMessageMenu=!1,0===n.length&&n.push(i());const e=new Promise(((e,t)=>{(0,a.IN)("hideShareMenu",{success:e,fail:t})}));n.push(e)}Promise.all(n).then((()=>{(0,a.FE)({name:"hideShareMenu",args:e})})).catch((t=>{const n=t.errMsg.replace("hideShareMenu:fail","").replace("hideShareTimelineMenu:fail","");(0,a.YG)("hideShareMenu",e,n,t.errCode)}))};function J(e){return new Promise(((t,n)=>{"boolean"==typeof e.withShareTicket?(0,a.IN)("updateShareMenuShareTicket",{withShareTicket:e.withShareTicket,success:t,fail:n},{beforeAll(e){e.errMsg=e.errMsg.replace("updateShareMenuShareTicket","updateShareMenu")},beforeFail(e){e.errMsg+=', with arg "withShareTicket": true'}}):t({errMsg:"updateShareMenu:ok"})}))}function X(e){return new Promise(((t,n)=>{if("boolean"==typeof e.isUpdatableMessage||"boolean"==typeof e.isPrivateMessage){const i=JSON.stringify({activity_id:e.activityId,template_id:e.templateInfo&&e.templateInfo.templateId,parameter_list:e.templateInfo&&e.templateInfo.parameterList});(0,a.IN)("updateShareMenuUpdatable",{isPrivateMessage:e.isPrivateMessage,updatable:e.isUpdatableMessage,templateId:i,success:t,fail:n}),!0===e.isPrivateMessage?$.Q.isPrivateMessage=!0:!1===e.isPrivateMessage&&($.Q.isPrivateMessage=!1)}else t({errMsg:"updateShareMenu:ok"})}))}function K(e){return new Promise(((t,n)=>{"string"==typeof e.toDoActivityId?((0,a.IN)("updateShareMenuUpdatable",{updatable:!0,success:e=>{},fail:e=>{wxNativeConsole.error("updateShareMenuToDo updateShareMenuUpdatable fail",e)}}),(0,a.IN)("updateShareMenuShareTicket",{withShareTicket:!0,success:e=>{},fail:e=>{wxNativeConsole.error("updateShareMenuToDo updateShareMenuShareTicket fail",e)}}),(0,a.IN)("updateShareMenuToDo",{toDoActivityId:e.toDoActivityId,isToDoMessage:"boolean"!=typeof e.isToDoMessage||e.isToDoMessage,success:e=>{wxNativeConsole.info("updateShareMenuToDo success",e),t(e)},fail:e=>{wxNativeConsole.error("updateShareMenuToDo fail",e),n(e)}})):t({errMsg:"updateShareMenu:ok"})}))}const ee=(e={})=>{wxNativeConsole.info("wx.updateShareMenu",e),Promise.all([J(e),X(e),K(e)]).then((t=>{"function"==typeof e.success&&__errorTracer__.surroundThirdByTryCatch(e.success,"at api updateShareMenu success callback function")(t[0]),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t[0])})).catch((t=>{void 0===t.errMsg&&(t.errMsg="updateShareMenu:fail "+t.message),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api updateShareMenu fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t)}))};var te=n(5184);const ne=()=>{(0,te.v)("showUpdatableMessageSubscribeButton"),console.warn("wx.showUpdatableMessageSubscribeButton 此接口已废弃")};var ie=n(5014);const re="authPrivateMessage",oe=(0,_.Ce)(!1,re);function ae(e={}){const t=H.Z.get(e.shareTicket);t&&t.shareKey?(0,ie.J)("authShareRelationship")?oe({apiName:"webapi_authmgr",reqData:{share_key:t.shareKey},success(t){wxNativeConsole.info("webapi_authmgr res",t);const n=JSON.parse(t.respData.data),i={};i.iv=n.iv,i.encryptedData=n.encrypt_activity_id,i.valid=1===n.res,(0,a.FE)({name:re,args:e,res:i})},fail:e.fail,complete:e.complete}):(0,a.YG)(re,e,"no permission"):(0,a.YG)(re,e,"invalid shareTicket")}var se=n(3525),ce=n(9978),le=n(2851);var ue=n(3685);const de=(0,b.Vl)(ce.FI),he=1,pe=3,fe=4,ge=5,_e=6,me=7,ye=({action:e})=>{const t=y.Z.appLaunchInfo||{},n=[y.Z.appType+1e3,e,t.sessionid||t.sessionId||""].join(",");Reporter.reportKeyValue({key:"ShareImageMenu",value:n})},ve=function(){var e=d()((function*(e){const t=(yield new Promise((e=>__sclEngine__.initScl((t=>e(t.mainRoot)))))).append("share-image",{imgPath:e.imgPath,height:e.height,width:e.width,actions:JSON.stringify([{action:"shareToFriend",text:"发送给朋友",imageSrc:"https://res.wx.qq.com/op_res/9uyxJUMf5aP9owCkoJvfePWjtv7dvB_UbB9Mh2QOnIvTu_Q6ulI-q0micEIFzNyo-XSO9_sHyTzCgIXG4zFhDg",imageDarkSrc:"https://res.wx.qq.com/op_res/9uyxJUMf5aP9owCkoJvfePWjtv7dvB_UbB9Mh2QOnIvTu_Q6ulI-q0micEIFzNyo-XSO9_sHyTzCgIXG4zFhDg"},{action:"addToFavorites",text:"收藏",imageSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng",imageDarkSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng"},{action:"saveToAlbum",text:"保存到相册",imageSrc:"https://res.wx.qq.com/op_res/BgIIq_VgA_b30mPKYKb4CmnQemMBJMujsqfe6REw4MSf3i_ql8KU-FywDJLSRGRnxQOWW5VphGdXW0Yr2-Z-0g",imageDarkSrc:"https://res.wx.qq.com/op_res/G0_niEOxSlL24rHxfWQRrYEhHlR548A2lETw0Se_jFtJt3ZpHTIaPZPeINUGM3--cFoO5adG9q8jjhNfUzKUxA"}])}),n=(0,ue.vJ)((e=>{[ue.ML.BottomBackButton,ue.ML.NavigationBackInterceptionType,ue.ML.NavigateBackCall].includes(e.type)&&t.handleClose()})),{action:i}=yield new Promise((e=>{["shareToFriend","addToFavorites","saveToAlbum","cancel"].forEach((n=>{t.addListener(n,(()=>e({action:n})))}))}));return(0,ue.J_)(n),{action:i}}));return function(t){return e.apply(this,arguments)}}(),Ae=(0,b.NX)("showShareImageMenu",function(){var e=d()((function*(e={}){if(!(0,ie.J)("showShareImageMenu"))throw new Error("no permission");(0,se.zy)(e,{path:""});let t=e.path;if(/^\w+:\/\//.test(t)){if(!/^wxfile:\/\//.test(t)&&!/^http:\/\/tmp\//.test(t))throw new Error("invalid path")}else t="/"+((e,t=!0)=>(0,z.sd)(le.Z.lastRoute,e,t))(t,!1);const{height:n,width:i}=yield de({src:t}),{action:r}=yield ve({imgPath:t,height:n,width:i});switch(ye({action:he}),r){case"shareToFriend":try{yield(0,se.bb)("shareImageMessage",{imagePath:t}),ye({action:pe})}catch(e){if("cancel"===e.message)return void ye({action:fe});throw e}return;case"addToFavorites":return ye({action:ge}),void(yield(0,se.bb)("addImageToFavorites",{url:t}));case"saveToAlbum":return ye({action:_e}),yield(0,se.bb)("saveImageToPhotosAlbum",{filePath:t}),void(Z.cj&&(0,v.CF)({icon:"success",title:"已保存"}));default:case"cancel":throw ye({action:me}),new Error("cancel")}}));return function(){return e.apply(this,arguments)}}());var be=n(7343);const we=(e={})=>{if((0,ie.J)("sendBizRedPacketForOpen")){const t=(0,be.rN)().scene;if(1047!==t&&1124!==t&&1011!==t&&1025!==t){const n=`sendBizRedPacket:fail scene ${t} not support.`;return e.fail&&e.fail({errMsg:n}),void(e.complete&&e.complete({errMsg:n}))}}(0,a.IN)("sendBizRedPacket",e,{})},Ee=(e={})=>{(0,a.IN)("sendRedPacket",e,{})},Te=(e={})=>{(0,a.IN)("openRedPacket",e,{})},Se=(e={})=>{const{url:t}=e;if(!(0,a.r3)("showRedPackage",e,{url:""}))return;if(0!==t.indexOf("https://support.weixin.qq.com/cgi-bin/mmsupport-bin/showredpacket"))return void(0,a.YG)("showRedPackage",e,"url is invalid");if(!(0,ie.J)("showRedPackage"))return void(0,a.YG)("showRedPackage",e,"no permission");const n=Object.assign({},e,{url:t,isNativeStyle:!0});(0,a.IN)("private_openUrl",n,{beforeAll(e){e.errMsg=e.errMsg.replace("private_openUrl","showRedPackage")}})};let Ce;const Ie=e=>{(0,a.IN)("login",(0,z.f0)(e,{requestInQueue:!1}))},xe=e=>{Ce&&clearTimeout(Ce),(0,a.IN)("refreshSession",e,{beforeSuccess:e=>{Ce=setTimeout((()=>{(0,a.IN)("refreshSession")}),1e3*e.expireIn),delete e.err_code,delete e.expireIn},beforeAll:e=>{e.errMsg=e.errMsg.replace("refreshSession","checkSession")}})};var De=n(1095);const Oe=({innerContext:e={},args:t={}}={})=>{(0,a.r3)("authorize",t,{scope:""})&&("scope.userInfo"!==t.scope||(0,De.KU)("getUserInfo")||(0,De.KU)("authorize")?(0,a.IN)("authorize",(0,z.f0)(t,{scope:[t.scope],requestInQueue:!e.hasOwnProperty("requestInQueue")||Boolean(e.requestInQueue)}),{beforeAll(e){delete e.body,void 0!==e.err_code&&(e.errCode=e.err_code,delete e.err_code)}}):(0,a.YG)("authorize",t,"scope unauthorized"))},Pe=(e={})=>{Oe({args:e})},Re=(e={})=>{const t=wx&&wx.version&&wx.version.version||"",n=!0===(0,De.KU)("getUserInfo")||"unknown"===(0,De.KU)("getUserInfo");(0,a.gM)((0,z.f0)({},e,{isImportant:!0,data:{api_name:"webapi_getuserinfo",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",version:t}}}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateWXData","getUserInfo"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:e=>{Z.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})};var ke=n(1130);const Ne=(e={})=>{(0,ke.Z)("confirmAvatarInfo","webapi_confirmuseravatarinfo",{},{},(e=>e),(e=>{try{e.userInfo=JSON.parse(e.rawData),Object.keys(e.userInfo).forEach((t=>{delete e[t]}))}catch(e){}}))(e)};let Me=null;const Le=(e={})=>{if(!(0,a.r3)("getUserProfile",e,{desc:""}))return;const t=e.desc.replace(/[^\x00-\xff]/g,"##").length;if(t>30||t<2)return void(0,a.YG)("getUserProfile",e,"desc length does not meet the requirements");const n=y.Z.accountInfo.nickname,i=y.Z.accountInfo.icon||"https://res.wx.qq.com/op_res/yytAZD8UVkSQiY3p1COF23jOcEEUXzIgkoz1dEMh7AaDptVrldnHP_Vw24igHeMwpbwo-RRtTJ-_9hk9BBDqHQ",r=Date.now();((e={})=>{(0,ke.Z)("getUserAvatarInfo","webapi_getuseravatarpopupinfo",{},{})(e)})({success(t){const o=Date.now();console.log("[user-profile] getUserAvatarInfo",t,o-r);const s="number"==typeof e.showType?e.showType:t.show_type,c=t.avatar_info.is_ban_modify_avatar,l=t.avatar_info.default_headimg_url,u=t.avatar_info.default_headimg_fileid,d=t.avatar_info.default_avatar_id,h=(t.avatar_info.avatar_list||[]).map((e=>({id:e.id,avatar:e.avatarurl,nickname:e.nickname,desc:e.desc||""})));let p=t.avatar_info.avatar_limit;if(0===s)return void((e={})=>{if(!(0,a.r3)("getUserProfile",e,{desc:""}))return;const t=e.desc.replace(/[^\x00-\xff]/g,"##").length;if(t>30||t<2)return void(0,a.YG)("getUserProfile",e,"desc length does not meet the requirements");const n=!0===(0,De.KU)("getUserProfile")||"unknown"===(0,De.KU)("getUserProfile");(0,a.gM)((0,z.f0)({},e,{isImportant:!0,data:{api_name:"webapi_getuserprofile",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",desc:e.desc}}}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateWXData","getUserProfile"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:e=>{Z.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})})(e);if(1===s){p+=1;const e={id:-100,avatar:l,nickname:"微信用户",desc:"临时头像昵称"};h.splice(1,0,e)}const f=JSON.stringify({appName:n,appIcon:i,infoList:h,showType:s,selected:d,limit:p,isBanModifyAvatar:c}),g=(0,ue.vJ)((e=>{[ue.ML.BottomBackButton,ue.ML.NavigationBackInterceptionType,ue.ML.NavigateBackCall].includes(e.type)&&Me&&Me.handleCancel()}));__sclEngine__.initScl((t=>{Me=t.mainRoot.append("user-profile",{input:f}),Me.addListener("confirm",(t=>{(0,ue.J_)(g),Ne({avatar_id:t.detail.selected,opt:1,lang:e.lang||"en",success(t){(0,a.FE)({name:"getUserProfile",args:e,res:t})},fail(){(0,a.YG)("getUserProfile",e,"confirmAvatarInfo fail")},complete(e){console.log("[user-profile] confirmAvatarInfo: ",e)}}),Me=null})),Me.addListener("cancel",(()=>{(0,ue.J_)(g),(0,a.YG)("getUserProfile",e,"cancel"),Ne({avatar_id:-100,opt:2,lang:e.lang||"en",complete(e){console.log("[user-profile] confirmAvatarInfo: ",e)}}),Me=null})),Me.addListener("create",(()=>{((e={})=>{(0,a.IN)("createVestUser",e,{beforeSuccess(e){e.userInfo&&(e.userInfo.avatar=e.userInfo.headImg,e.userInfo.desc=e.userInfo.desc||"",delete e.userInfo.headImg)}})})({sessionId:Math.floor(Date.now()/1e3),defaultAvatarUrl:l,defaultAvatarFileId:u,complete(e){e.userInfo&&(h.push(e.userInfo),console.log("[user-profile] createVestUser: ",e,h),Me.setData({infoList:h})),Me.setData({hide:!1})}})}))}))},fail(){(0,a.YG)("getUserProfile",e,"getUserAvatarInfo fail")}})};var Be=n(596);const Fe=wxNativeConsole.createLogger("getSetting");const Ue=(0,ke.Z)("getSetting","webapi_getuserallappauth",{},{},(function(e){const t=wx&&wx.version&&wx.version.version||"",n=Object.assign({with_sub_msg:"boolean"==typeof e.withSubscriptions&&e.withSubscriptions,version:t},e);return delete n.withSubscriptions,n}),(function(e){if(Fe.info("webapi_getuserallappauth res",e),e.auth_item?e.authSetting=e.auth_item.reduce(((e,t)=>(e[t.scope]=1===t.state,e)),{}):e.authSetting={},void 0!==e.sub_msg_switch){const t={mainSwitch:1===e.sub_msg_switch};if(e.sub_msg_list){Fe.info("sub_msg_list",e.sub_msg_list);const n=e.sub_msg_list.reduce(((e,t)=>{let n=t.template_id;return t.sys_msg_type>0&&(n=(0,Be.r)(t.sys_msg_type)),t.ban_flag?e[n]="ban":(e[n]=t.setting_status?"accept":"reject",t.is_accept_with_audio&&(e[n]="acceptWithAudio")),e}),{});Fe.info("itemSettings",n),t.itemSettings=n,Object.assign(t,n)}e.subscriptionsSetting=t}return delete e.rawData,delete e.signature,delete e.auth_item,delete e.sub_msg_list,delete e.sub_msg_switch,e}));var We=n(9848);const je=(e={})=>{(0,a.IN)("openSetting",e,{beforeSuccess(e){const t=e.authSetting||[];if(e.authSetting=t.reduce(((e,t)=>(e[t.scope]=1===t.state,e)),{}),e.subscriptionsSetting){const t={};if(t.mainSwitch=e.subscriptionsSetting.mainSwitch,e.subscriptionsSetting.templatesInfo){const n=e.subscriptionsSetting.templatesInfo;t.itemSettings=n.reduce(((e,t)=>{const n={2116:"SYS_MSG_TYPE_INTERACTIVE",4668:"SYS_MSG_TYPE_RANK"}[t.tid];const i={"-1":"ban",0:"reject",1:"accept"};return n?e[n]=i[t.status]:(e[t.templateId]=i[t.status],t.acceptAudio&&(e[t.templateId]="acceptWithAudio")),e}),{})}e.subscriptionsSetting=t}}})},Ge=(e={})=>{if((0,We.S)())return(0,a.YG)("openSetting",e,"not supported"),void(0,v.CF)({icon:"none",title:"暂不支持当前功能"});je(e)},Ve=(e={})=>{(0,a.IN)("openWeRunSetting",{checkSupport:!0,success(){(0,a.gM)((0,z.f0)({data:{api_name:"webapi_getwerunstep_history"}},e),{beforeAll(e){e.errMsg=e.errMsg.replace("operateWXData","getWeRunData")},beforeSuccess(e){Z.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}})},fail(t){t.errMsg=t.errMsg.replace("openWeRunSetting","getWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api getWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api getWeRunData fail callback function")(t)}})},He=(e={})=>{"number"!=typeof e.step||e.step<0?(0,a.YG)("uploadWeRunData",e,"parameter error: step should be number and greater or equal to 0"):(0,a.IN)("openWeRunSetting",{checkSupport:!1,success(){(0,a.IN)("uploadWeRunData",e,{})},fail(t){t.errMsg=t.errMsg.replace("openWeRunSetting","uploadWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api uploadWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api uploadWeRunData fail callback function")(t)}})},ze=(e={})=>{"number"!=typeof e.step||e.step<0?(0,a.YG)("addWeRunData",e,"parameter error: step should be number and greater or equal to 0"):(0,a.IN)("openWeRunSetting",{checkSupport:!1,success(){(0,a.IN)("addWeRunData",e,{})},fail(t){t.errMsg=t.errMsg.replace("openWeRunSetting","addWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api addWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api addWeRunData fail callback function")(t)}})},Ze=(0,ke.Z)("getUserGameLabel","webapi_getgameplayerlabel",{},{},(()=>{}),(e=>(delete e.rawData,e)));var Ye=n(2420);const $e=(e={})=>{(0,te.v)("sendGroupMessage"),(0,a.YG)("sendGroupMessage",e,"sendGroupMessage 接口已废弃")},qe=function(e){(0,_.JM)({apiName:"webapi_reportgroupshare",reqData:e})},Qe=(0,ke.Z)("checkIsUserAdvisedToRest ","webapi_getplaytimelimit",{},{},(({todayPlayedTime:e=0})=>({today_played_seconds:e})),(e=>{e.result=!e.is_healthy,delete e.is_healthy})),Je=e=>{(0,a.r3)("checkIsUserAdvisedToRest",e,{todayPlayedTime:0})&&Qe(e)};var Xe=n(6998),Ke=n(7292);let et=0,tt={};y.Z.onReady((()=>{et=y.Z.appType,tt=y.Z.appLaunchInfo}));const nt=(e,t)=>{const n=[];return t.forEach((t=>{let i=e[t];"boolean"==typeof i&&(i=i?1:0),n.push(`${t}:${i}`)})),n.join("|")},it=({name:e,data:t})=>{const n="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],i=n.length>0&&n[n.length-1].__route__||"",r=(0,Xe._getCurrentNetworkType)(),o=wx&&wx.version&&wx.version.version||"";let a="";switch(e){case"loadFontFace":a=nt(t,["family","source","global","scopes"]);break;case"requestSubscribeMessage":a=nt(t,["templateCount","templateType","operationType"]);break;case"openCustomerServiceChat":a=nt(t,["extInfo","corpId"])}const s=[Math.round(Date.now()/1e3),tt.scene,tt.sessionid||tt.sessionId,i,r,o,e,a,et,1,""].join(",");Reporter.reportKeyValue({key:"APIUse",value:s,immediately:!0})};let rt={};(0,Ke.Tc)((()=>{let e=!1;Object.keys(rt).forEach((t=>{const n=rt[t];n.cameraFrame&&n.webgl&&(e=!0)})),e&&it({name:"suspectAR",data:{}}),rt={}}));const ot=(0,_.Ce)(!1,"requestSubscribeMessage");let at=!1;(0,Ke.HM)((()=>{at=!1})),(0,Ke.JG)((()=>{at=!1}));const st=e=>{if(at)(0,a.YG)("requestSubscribeMessage",e,"last call has not ended");else{if(!(0,a.r3)("requestSubscribeMessage",e,{tmplIds:[]}))return;at=!0,Z.cj&&y.Z.clientVersion<385877504||Z.wZ&&y.Z.clientVersion<654313216||Z.gm?lt(e):ct(e)}},ct=e=>{Reporter.reportIDKey({key:"requestSubscribeMessageWithNative",force:!0});const t=Object.assign({},e);t.tmplIds=Array.from(new Set(e.tmplIds)),(0,a.IN)("requestSubscribeMessage",t,{beforeAll(){at=!1},beforeSuccess(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeSuccess",force:!0}),at=!1},beforeFail(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeFail",force:!0})}})},lt=e=>{const t=e.tmplIds||[];let n,i;if(0===t.length?(n="TmplIds can't be empty",i=10001):t.length>=4?(n="Templates count out of max bounds",i=20003):""===t[0]?(n="No template data return, verify the template id exist",i=20001):"string"!=typeof t[0]&&(n="Invalid template id",i=10004),n)return at=!1,void(0,a.YG)("requestSubscribeMessage",e,n,i);const r=t.map((e=>({TemplateId:e})));ot({apiName:"webapi_subscribe_msg",reqData:{AppId:y.Z.accountInfo.appId,ActionType:1,ItemList:r},success(n){const i=(JSON.parse(n.respData.data).InfoList||[])[0]||{};if(i.TemplateId!==t[0])return at=!1,void(0,a.FE)({name:"requestSubscribeMessage",args:e,res:{[t[0]]:"ban"}});let r="订阅一次以下消息通知";3===i.TemplateType&&(r="长期订阅以下消息通知"),(0,v.K4)({title:r,content:i.Title||"",confirmText:"允许",cancelText:"取消",success(t){at=!1,ut(e,t)},fail(t){at=!1,(0,a.YG)("requestSubscribeMessage",e,t.errMsg)}})},fail(t){const n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();(0,a.YG)("requestSubscribeMessage",e,n,+t.err_code),at=!1}})},ut=(e,t)=>{const n=e.tmplIds[0];ot({apiName:"webapi_subscribe_msg",reqData:{AppId:y.Z.accountInfo.appId,ActionType:2,UIData:{OpType:t.confirm?1:2,UIItem:[{TemplateId:n,ChooseStatus:1}]}},success(){const i={};i[`${n}`]=""+(t.confirm?"accept":"reject"),(0,a.FE)({name:"requestSubscribeMessage",args:e,res:i}),it({name:"requestSubscribeMessage",data:{templateCount:1,templateType:0,operationType:t.confirm?1:2}})},fail(t){const n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();(0,a.YG)("requestSubscribeMessage",e,n,+t.err_code)}})};var dt=n(2999);let ht="";y.Z.onReady((()=>{ht=y.Z.appLaunchInfo.chatroomUsername,wxNativeConsole.info("chatroomUsername",ht)})),(0,dt.n)("onAppEnterForeground",((e={})=>{ht=e.chatroomUsername,wxNativeConsole.info("onAppEnterForeground chatroomUsername",ht)}));const pt="getGroupEnterInfo",ft=(0,_.Ce)(!1,pt),gt=(e={})=>{ht?(0,ie.J)("getGroupToolbarInfo")?ft({apiName:"webapi_swapopengid",reqData:{chatroom_name:ht},success(t){wxNativeConsole.info("webapi_swapopengid res",t);const n=t.respData,i={};i.iv=n.iv,i.encryptedData=n.encryptedData,n.cloud_id&&(i.cloudID=n.cloud_id),(0,a.FE)({name:pt,args:e,res:i})},fail:e.fail}):(0,a.YG)(pt,e,"no permission"):(0,a.YG)(pt,e,"invalid scene")};var _t=n(2046);n(7188);(0,_t.s)("AppPerfRouteNavigation");function mt(e,t,n){const i=void 0===t._relativePath?le.Z.lastRoute:t._relativePath;try{return(0,z.s$)(i,t.url,!n)}catch(r){if(!(r instanceof z.l0))throw r;if(!n){if(!(0,z.Bf)(i,t.url))return t.url;(0,a.YG)(e,t,r.message)}}return""}const yt=[1011,1025,1047,1124],vt=(e={})=>{const{scene:t}=(0,be.rN)();yt.indexOf(t)<0&&console.log(`enter scene must be one of [1011, 1025, 1047, 1124], current is ${t}`);const n=Object.assign({},e);if("string"==typeof n.url){const e=mt("publishWeChatState",n,!1);if(!e)return;n.url=e,n.url=(0,z.yP)(n.url)}(0,a.IN)("publishWeChatState",n)}},7646:(e,t,n)=>{"use strict";n.d(t,{Lo:()=>a,JM:()=>s,Ce:()=>o});var i=n(1106),r=n(2582);const o=(e=!0,t,n=!1,o=!1)=>(a={})=>{if(!(0,i.r3)("operateWXData",a,{apiName:""}))return;if("operateWXData"===t){}const s={api_name:a.apiName,data:a.reqData||{},operate_directly:e};n&&(s.plugin_appid=a.pluginId);const c={data:s,isImportant:!0===o,requestInQueue:!a.hasOwnProperty("requestInQueue")||Boolean(a.requestInQueue)};(0,i.gM)(Object.assign({},c,a),{beforeAll(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess(e){r.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})},a=o(!0),s=o(!1);o(!0,void 0,!0)},2420:(e,t,n)=>{"use strict";n.d(t,{s:()=>l,y:()=>c});var i=n(1130),r=n(1106),o=n(665);const a=(0,i.Z)("reportUserBehaviorBranchAnalytics","webapi_reportbranchanalytics",{},{},(({branchId:e,branchDim:t,eventType:n})=>({itemList:[{branchId:e,branchDim:t,eventType:n}]}))),s=(0,i.Z)("reportUserBehaviorBranchAnalyticsForDebug","webapi_reportbranchanalyticsfordebugtool",{},{},(({branchId:e,branchDim:t,reportType:n,query:i})=>({itemList:[{branchId:e,branchDim:t,reportType:n,query:i}]})));function c(e={}){"release"!==o.Z.envVersion&&s(e)}function l(e={}){"string"!=typeof e.branchId?(0,r.YG)("reportUserBehaviorBranchAnalytics",e,"branchId must be a string"):e.branchDim&&"string"!=typeof e.branchDim?(0,r.YG)("reportUserBehaviorBranchAnalytics",e,"branchDim is an optional string"):1!==e.eventType&&2!==e.eventType?(0,r.YG)("reportUserBehaviorBranchAnalytics",e,"eventType must be 1 or 2"):(a(e),c({branchId:e.branchId,branchDim:e.branchDim,reportType:e.eventType}))}},596:(e,t,n)=>{"use strict";n.d(t,{D:()=>o,r:()=>a});const i={SYS_MSG_TYPE_INTERACTIVE:1,SYS_MSG_TYPE_RANK:2},r=function(e){const t={};for(const n in e)t[e[n]]=n;return t}(i);function o(e){return i[e]}function a(e){return r[e]}},9078:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(5260);const r={},o={lastShareTicket:null,get:e=>r[e],set(e,t){const n=(0,i.M8)();return r[n]={shareKey:e,shareName:t},n}}},8799:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});const i={showShareAppMessageMenu:!1,showShareTimelineMenu:!1,withShareTicket:!1,isPrivateMessage:!1}},6175:(e,t,n)=>{"use strict";n.d(t,{l:()=>a});var i=n(1106),r=n(8329);const o=(0,n(1130).Z)("getFriendCloudStorage","webapi_getfrienduserstorage",{},{},(({keyList:e=[]})=>({key:e})),(e=>(e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((e=>(e.KVDataList=e.kv_list||[],delete e.kv_list,e))),delete e.user_item,delete e.rawData,e))),a=(e={})=>{const t=(0,r.M)(e.keyList);t?(0,i.YG)("getFriendCloudStorage",e,t):o(e)}},6329:(e,t,n)=>{"use strict";n.d(t,{q:()=>l});var i=n(9078),r=n(1106),o=n(8329),a=n(1130);const s=wxNativeConsole.createLogger("getGroupCloudStorage"),c=(0,a.Z)("getGroupCloudStorage","webapi_getgroupuserstorage",{},{},(({keyList:e=[],shareTicket:t})=>{const n=i.Z.get(t),{shareKey:r,shareName:o}=n;return s.info("shareTicket=",t),s.info("shareInfo=",JSON.stringify(n)),{key:e,share_key:r,share_name:o}}),(e=>(e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((e=>(e.KVDataList=e.kv_list||[],delete e.kv_list,e))),delete e.user_item,delete e.rawData,e))),l=e=>{const t=(0,o.M)(e.keyList);t?(0,r.YG)("getGroupCloudStorage",e,t):setTimeout((()=>{e.shareTicket?i.Z.get(e.shareTicket)?(s.info("use args.shareTicket",e.shareTicket),c(e)):(0,r.YG)("getGroupCloudStorage",e,"参数 shareTicket 不正确"):i.Z.lastShareTicket&&i.Z.get(i.Z.lastShareTicket)?(s.info("use lastShareTicket",i.Z.lastShareTicket),c(Object.assign({shareTicket:i.Z.lastShareTicket},e))):(0,r.YG)("getGroupCloudStorage",e,"当前小程序不是从群分享卡片打开")}),1e3/60)}},4460:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var i=n(1106);const r=(0,n(1130).Z)("getGroupInfo","webapi_getshareinfo_byopengid",{},{},(({openGId:e})=>({opengid_list:[e]})),(e=>(e.name=e.info_list[0].room_topic,delete e.info_list,delete e.rawData,e)));function o(e){setTimeout((()=>{r(Object.assign({},e,{success:t=>(0,i.FE)({args:e,res:t,name:"getGroupInfo",success:!!t.name,errMsg:t.name?"":"invalid openGId"})}))}))}},7393:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});const i=(0,n(1130).Z)("getPotentialFriendList","webapi_game_potential_friends",{},{},(()=>{}),(e=>(e.list=e.friend_list,delete e.friend_list,delete e.rawData,e)))},9798:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});var i=n(8329),r=n(1130),o=n(1106);const a=(0,r.Z)("getUserCloudStorage","webapi_getselfuserstorage",{},{},(({keyList:e=[]})=>({key:e})),(e=>(e.KVDataList=e.kv_list||[],delete e.kv_list,delete e.rawData,e))),s=e=>{const t=(0,i.M)(e.keyList);t?(0,o.YG)("getUserCloudStorage",e,t):a(e)}},5161:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});const i=(0,n(1130).Z)("getUserCloudStorageKeys","webapi_getuserstorageallappkey",{},{},(()=>{}),(e=>(e.keys=e.data_key,delete e.data_key,delete e.rawData,e)))},6081:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});const i=(0,n(7646).Ce)(!1,"getUserInfo",!1,!0),r=({openIdList:e=[],lang:t="en",success:n,fail:r,complete:o}={})=>{i({apiName:"webapi_getuserinfo_byopenid",reqData:{openIdList:e,lang:t},success:e=>{const t=JSON.parse(e.respData.data).userInfoList||[];"function"==typeof n&&n({errMsg:e.errMsg,data:t})},fail:r,complete:o})}},272:(e,t,n)=>{"use strict";n.d(t,{Fc:()=>w,U7:()=>E,$X:()=>T});var i=n(2184),r=n(1130),o=n(3536),a=n(1876),s=n(1106),c=n(665),l=n(6081),u=n(1095),d=n(7452),h=n(7848),p=n(9378),f=n(495);const g=new i.Q("InteractiveStorageModified",!0),_={add:1},m=(0,u.Fr)(l.b);const y=({actionId:e,actId:t=0,receiverOpenId:n,detail:i,opNum:r=0,operationType:o=0})=>{const a=[e,t,0,i,r,o,n].join(",");Reporter.reportKeyValue({key:"GameInteractiveData",value:a})},v=e=>{Reporter.reportIDKey({key:e})},A=(0,r.Z)("modifyFriendInteractiveStorage","webapi_modifyfriendinteractivedata",{},{},(({key:e,operation:t,opNum:n,toUser:i,debug:r,action:o,object:a,ratio:s,quiet:c})=>({key:e,operation:t,debug:r,opNum:n,toUser:i,action:o,object:a,ratio:s,quiet:!!c,op_num:n,to_user:i,random_number:Date.now(),randomNumber:Date.now()})),(e=>{const{json_resp:t,inner_errcode:n,inner_errmsg:i}=e,r="modifyFriendInteractiveStorage:fail ";let o;e.errMsg,delete e.json_resp,delete e.rawData,delete e.inner_errcode,delete e.inner_errmsg;try{o=JSON.parse(t)}catch(e){o={},e.message}if(function(e){if(!e)return;e.split("\n").map(decodeURIComponent).forEach((e=>{const t=parseInt(e.substr(0,1),10),n=`[JSServer]${e.substr(1)}`;switch(t){case h.pO.LOG:console.log(n);break;case h.pO.WARNING:console.warn(n);break;case h.pO.ERROR:console.error(n)}}))}(o.log),!(0,d.o8)(n)&&0!==n)return e.errMsg=`${r}${i}`,void(e.errCode=n);try{const t=JSON.parse(o.base_resp);if(0!==t.errcode)return e.errCode=t.errmsg,void(e.errMsg=`${r}${t.errmsg}`);e.errCode=0}catch(t){e.errCode=-1,e.errMsg=`${r}${t.message}`,t.message}})),b=new Set,w=e=>{v("modifyFriendInteractiveStorage");const t=Object.assign({},e,{success:t=>{(0,s.FE)({res:t,args:e,name:"modifyFriendInteractiveStorage",success:0===t.errCode,errCode:t.errCode,errMsg:t.errMsg}),t.errCode||g.emit("modified",`${e.key}`)}});t.quiet?(e=>{const t=(0,f.x9)();let n=(0,p.A)();!n&&t&&t.referrerInfo&&(n=t.referrerInfo.messageExtraData),n&&3===n.shareType&&n.userInfo?b.has(n.userInfo.openID)?(0,s.YG)("modifyFriendInteractiveStorage",e,"quiet modify can only be use once"):(b.add(n.userInfo.openID),A(Object.assign(e,{toUser:n.userInfo.openID}))):(0,s.YG)("modifyFriendInteractiveStorage",e,"game is not launch by click share card")})(t):t.toUser?c.Z.modifyFriendInteractiveStorageTemplates?(e=>{m({openIdList:[e.toUser]}).then((t=>{const{nickName:n}=t.data[0],i=parseInt(e.key,10),r=e.toUser,o=e.opNum,l=_[e.operation];let u,d,h;for(h of c.Z.modifyFriendInteractiveStorageTemplates)if(h.key===e.key){const e=h.ratio?` x${o*h.ratio} ？`:"？";u=`确认${h.action} ${n} ${h.object}${e}`,d=encodeURIComponent(u);break}if(!u)throw new Error("invalid key");const f={actId:i,receiverOpenId:r,detail:d,opNum:o,operationType:l};y(Object.assign({actionId:1},f)),v("modifyFriendInteractiveStorageShowModal");const g=(0,a.U)({content:u,title:`${h.action}${h.object}`,confirmText:`确认${h.action}`,confirm(){g.destroy(),A(Object.assign({action:h.action,object:h.object,ratio:h.ratio},e,{success:t=>{if(e.success&&e.success(t),t.errCode)return;const n="string"==typeof e.title,i=(0,a.U)({title:`${h.action}${h.object}`,icon:!0,content:n?`已${h.action}，马上告诉微信好友？`:`已${h.action}`,cancelText:n?"下次吧":"我知道了",confirmText:!!n&&"告诉他",cancel(){i.destroy()},confirm(){i.destroy(),(0,p.N)({openId:r,title:e.title,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId})}})}})),y(Object.assign({actionId:2},f)),v("modifyFriendInteractiveStorageConfirm")},cancel(){g.destroy(),(0,s.YG)("modifyFriendInteractiveStorage",e,"cancel"),y(Object.assign({actionId:3},f)),v("modifyFriendInteractiveStorageCancel")}})})).catch((({errMsg:t,message:n})=>{(0,s.YG)("modifyFriendInteractiveStorage",e,t||n)}))})(t):c.Z.modifyFriendInteractiveStorageConfirmWording?(e=>{m({openIdList:[e.toUser]}).then((t=>{const{nickName:n}=t.data[0],i=c.Z.modifyFriendInteractiveStorageConfirmWording.replace("${nickname}",n),r={actId:parseInt(e.key,10),receiverOpenId:e.toUser,detail:encodeURIComponent(i),opNum:e.opNum,operationType:_[e.operation]};y(Object.assign({actionId:1},r)),v("modifyFriendInteractiveStorageShowModal"),(0,o.I6)({content:i,confirmText:"确定",cancelText:"取消",success(t){t.confirm?(A(e),y(Object.assign({actionId:2},r)),v("modifyFriendInteractiveStorageConfirm")):((0,s.YG)("modifyFriendInteractiveStorage",e,"cancel"),y(Object.assign({actionId:3},r)),v("modifyFriendInteractiveStorageCancel"))}})})).catch((({errMsg:t})=>{(0,s.YG)("modifyFriendInteractiveStorage",e,t)}))})(t):(0,s.YG)("modifyFriendInteractiveStorage",e,"invalid modifyFriendInteractiveStorage config in game.json"):(0,s.YG)("modifyFriendInteractiveStorage",e,"toUser is required without quiet")},E=e=>{g.on("modified",e)},T=e=>{g.off("modified",e)}},9378:(e,t,n)=>{"use strict";n.d(t,{A:()=>i.A5,N:()=>a});var i=n(6369),r=n(1703),o=n(665);function a(e={}){const t={openId:e.openId,title:e.title||o.Z.accountInfo.nickname,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId,success:e.success,fail:e.fail,complete:e.complete};t.query=(0,r.k)(),(0,i.HP)(t,"shareAppMessageToSpecificContactDirectly")}},8329:(e,t,n)=>{"use strict";function i(e){if(!Array.isArray(e)||e.some((e=>"string"!=typeof e||0===e.length)))return"invalid keyList"}n.d(t,{M:()=>i})},972:(e,t,n)=>{"use strict";n.d(t,{_o:()=>o,Ft:()=>a,LN:()=>s,Ks:()=>c});var i=n(665),r=n(2582);const o=(()=>{let e=!1;return(r.cj||r.wZ&&i.Z.clientVersion>=637865520)&&(e=!0),()=>e})(),a=(()=>{let e=!1;return r.cj&&i.Z.clientVersion>=385877248&&(e=!0),()=>e})(),s=(()=>{let e=!1;return r.cj&&i.Z.clientVersion>=385878314&&(e=!0),()=>e})(),c=(()=>{let e=!1;return r.cj&&i.Z.clientVersion>=402655232&&i.Z.clientVersion<=402655487&&(e=!0),()=>e})()},8010:(e,t,n)=>{"use strict";n.d(t,{nw:()=>c,P0:()=>l,dx:()=>u});var i=n(1106),r=n(5014),o=n(2582),a=n(7646);const s=__safeway__.apiSign.makeApiSign,c=(e={})=>{const t=s("navigateBackApplication",e);(0,i.IN)("navigateBackApplication",t,{})},l=(e={})=>{e.launchAppid&&"string"==typeof e.launchAppid?(0,a.JM)({apiName:"wxaapi_verify_jump",reqData:{appid:e.launchAppid},success:t=>{"ok"===JSON.parse(t.rawData).res?(0,i.IN)("launchApplication",Object.assign(e,{appId:e.launchAppid,operateDirectly:!0})):(0,i.YG)("launchApplication",e,"no permission")},fail:t=>{wxNativeConsole.error("[launchApplication][wxaapi_verify_jump] fail",t),(0,i.YG)("launchApplication",e,"no permission")}}):(delete e.operateDirectly,(0,i.IN)("launchApplication",e,{}))},u=(e={})=>{(0,r.J)("plugin_launchApplicationDirectly_operateDirectly")||delete e.operateDirectly,o.cj?(0,r.J)("launchApplicationDirectly")?(0,i.IN)("launchApplication",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace("launchApplication","launchApplicationDirectly")}}):setTimeout((()=>(0,i.YG)("launchApplicationDirectly",e,"no permission"))):(0,i.IN)("launchApplicationDirectly",e,{})}},2276:(e,t,n)=>{"use strict";n.d(t,{Hk:()=>W,SY:()=>B,iy:()=>S});var i=n(1503),r=n.n(i),o=n(3356),a=n.n(o),s=n(3525),c=n(5260),l=n(8827),u=n(7142),d=(n(9973),n(665)),h=n(7646),p=n(1095),f=n(2582),g=n(5014),_=n(4212),m=n(2288),y=n(3685),v=n(2783),A=n(607),b=n(6998),w=n(9848),E=n(3536);const T=(0,v.Vl)(h.JM),S=(e={},t={},n={})=>{JSON.stringify(e),JSON.stringify(t),JSON.stringify(n),_.s.log(`[_doNavigateToMiniProgram], args=${JSON.stringify(e)}, privateArgs=${JSON.stringify(t)}, ext=${JSON.stringify(n)}`);const i=Object.assign({},e);delete i.sourcetype,delete i.preScene,delete i.preSceneNote,delete i.mode,7!==d.Z.appType&&(delete i.scene,delete i.sceneNote);const r=(0,l.KL)();r?(i.privateExtraData=i.privateExtraData||{},i.privateExtraData.cookies=r):i.privateExtraData&&delete i.privateExtraData.cookies;const o=Object.assign({},i,t);if("string"==typeof o.path&&o.path.trim().length>0?o.path=(0,c.Pp)(o.path).trim():o.path=void 0,o.halfPage=Object.assign({},o.halfPage||{}),o.halfPage.hideCapsuleMenu=!1,o.halfPage.capsuleMenuType="singleClose",JSON.stringify(o),_.s.log(`[_doNavigateToMiniProgram], finalArgs=${JSON.stringify(o)}`),o.needTransferToWeChat&&(0,p.er)())return(0,s.FE)({name:"navigateToMiniProgram",args:o}),delete o.success,delete o.fail,delete o.complete,void(0,s.IN)("sdk_navigateToMiniProgram",o,n);(0,s.IN)("navigateToMiniProgram",o,n)},C=(e,t,n,i)=>{const r=[e,t,d.Z.appType+1e3,n+1e3,i].join(",");Reporter.reportKeyValue({key:"NavigateToMiniProgramAlert",value:r})},I=(()=>{let e;return()=>(e||(e=new Promise((e=>{__sclEngine__.initScl((t=>e(t.mainRoot)))}))),e)})(),x=function(){var e=a()((function*(e){const t=yield I();let n;switch(O){case D.HALF_SCREEN_DIALOG_WITHOUT_LOGO:n=t.append("navigateToMp",{title:e.oldWording,logo:"",name:"",type:D.HALF_SCREEN_DIALOG});break;case D.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:n=t.append("navigateToMp",{title:e.title,logo:e.icon_url,name:e.desc,type:D.HALF_SCREEN_DIALOG}),e.expensiveWording&&e.expensiveWording.then((({used_friend_cnt_sub_desc:e})=>{n.setData({desc:e||""})}));break;case D.HALF_SCREEN_DIALOG_WITH_SCORE:n=t.append("navigateToMp",{title:e.title,logo:e.icon_url,name:e.desc,type:D.HALF_SCREEN_DIALOG}),e.expensiveWording&&e.expensiveWording.then((({score_sub_desc:e})=>{n.setData({desc:e||""})}));break;default:n=t.append("navigateToMp",{title:e.title,logo:e.icon_url,name:e.desc,type:O})}const i=(0,y.vJ)((e=>{[y.ML.BottomBackButton,y.ML.NavigationBackInterceptionType,y.ML.NavigateBackCall].includes(e.type)&&n.handleCancel()})),r=yield new Promise((e=>{n.addListener("confirm",(()=>{e({confirm:!0})})),n.addListener("cancel",(()=>{e({confirm:!1})}))}));return(0,y.J_)(i),r}));return function(t){return e.apply(this,arguments)}}(),D={DEFAULT:0,DIALOG:1,HALF_SCREEN_DIALOG:2,HALF_SCREEN_DIALOG_WITHOUT_LOGO:3,HALF_SCREEN_DIALOG_WITH_SCORE:4,HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:5};let O=D.DEFAULT;d.Z.onReady((()=>{(0,m.b)({experimentId:"clicfg_navigation_use_scl_alert_v5",experimentType:"Expt",success:e=>{JSON.stringify(e),e&&void 0!==e.testConfig&&(O=Number(e.testConfig)||D.DEFAULT,Object.values(D).includes(O)||(O=D.DEFAULT))}})}));const P=function(){var e=a()((function*(e,t,n,i,o,a){if(1===t)return;const c=O!==D.DEFAULT&&void 0!==__sclEngine__&&(f.gm||f.cj||f.wZ)&&o,l=c?O:D.DEFAULT;let u;try{u=c?yield x(r()(r()({},o),{},{oldWording:e,expensiveWording:a})):yield(0,s.bb)("showModal",{title:e,content:"",confirmText:"允许",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:"#7D90A9",cancelColor:"#000000",cancelColorDark:"#AAAAAA"})}catch(e){throw C(3,n,i,l),e}const{confirm:d}=u;if(!d)throw C(2,n,i,l),new Error("cancel");C(1,n,i,l)}));return function(t,n,i,r,o,a){return e.apply(this,arguments)}}(),R=1,k=2,N=function(){var e=a()((function*(e){const t=[];switch(O){case D.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:t.push(k);break;case D.HALF_SCREEN_DIALOG_WITH_SCORE:t.push(R)}if(!t.length)return{};e.appId,_.s.log(`[_getNavigateWxAppDescInfo] appId=${e.appId}`);try{const{respData:n}=yield T({apiName:"webapi_getnavigatewxaappdesc",reqData:{target_appid:e.appId,desc_type_list:t}});n.data;return JSON.parse(n.data)}catch(e){return e.message,{}}}));return function(t){return e.apply(this,arguments)}}(),M=(()=>{let e=[];return d.Z.onReady((()=>{Array.isArray(d.Z.navigateToMiniProgramAppIdList)&&(e=d.Z.navigateToMiniProgramAppIdList,(0,g.J)("openWxappLimit5")&&e.splice(5))})),(t,n)=>new Promise(((i,r)=>{const o=(0,p.KU)("navigateToMiniProgramConfig");if(!1===o||f.gm)if(n)i();else if(e.indexOf(t)>-1)i({sourcetype:4});else{r({errMsg:`appId "${t}" is not in navigateToMiniProgramAppIdList`})}else!0===o?i():"unknown"===o&&i({sourcetype:4})}))})(),L=function(){var e=a()((function*({appId:e,path:t,shortLink:n}){let i;_.s.log(`[_checkBeforeNavigateToMiniProgram] appId=${e} path=${t} shortLink=${n}`);const o=new Promise((e=>{i=e}));e&&!n&&i(e);const a=o.then((e=>N({appId:e})));let c;O!==D.DEFAULT&&I();try{c=yield(l={appId:e,shortLink:n},new Promise(((e,t)=>{l.appId,l.shortLink,_.s.log(`[_getNavigateWxAppInfo] appId=${l.appId} shortLink=${l.shortLink}`);const n=0,i=1;(0,h.JM)({apiName:"webapi_getnavigatewxaappinfo",reqData:{req_type:l.shortLink?i:n,target_appid:l.appId,target_short_link:l.shortLink},success(t){const n=JSON.parse(t.respData.data),i=n.action_code,r=n.skip_local_check,o=Boolean(n.runtime_sdk_whitelist),a=n.target_short_link_info;e({actionCode:i,skipLocalCheck:r,reason:n.reason,wording:n.wording,appType:n.apptype,newWording:n.new_wording,popupInfo:n.pop_up_info,needTransferToWeChat:o,shortLinkInfo:a}),t.respData.data},fail(e){t(e),e.errMsg}})})))}catch(n){return n.errMsg||n.message,{appId:e,path:t}}var l;const{actionCode:u,skipLocalCheck:p,reason:f,wording:g,appType:m,newWording:y,popupInfo:v,needTransferToWeChat:T,shortLinkInfo:S}=c;let C=1===u;if(S&&(e=S.wxa_appid,t=(S.wxa_path||"").replace(/\.html(\?|$)/,"$1"),i(e)),_.s.log(`[_getNavigateWxAppInfo][resolve] appId=${e} path=${t} actionCode=${u}, skipLocalCheck=${p}, reason=${f}, wording=${g}, appType=${m}, needTransferToWeChat=${T}`),1!==u&&2!==u)throw v?(Reporter.reportKeyValue({key:"WeAppNavBan",value:[d.Z.appType+1e3,d.Z.appLaunchInfo.scene,33,3302,0,1,f,"跳转跳出",(0,b._getCurrentNetworkType)()].join(",")}),(0,s.IN)("showModal",{showCancel:!0,content:v.desc,confirmText:v.confirm_wording,cancelText:v.cancel_wording,success({confirm:e}){const t=v.confirm_url;e&&(0,A.n)({url:t}),Reporter.reportKeyValue({key:"WeAppNavBan",value:[d.Z.appType+1e3,d.Z.appLaunchInfo.scene,33,3302,e?1:2,2,f,"跳转跳出",(0,b._getCurrentNetworkType)()].join(",")})}})):g&&(0,s.IN)("showModal",{content:g,showCancel:!1}),new Error(f);if(1!==u&&(0,w.S)()){if(7!==m)throw(0,E.CF)({icon:"none",title:"暂不支持当前功能"}),new Error("not supported");C=!0}try{const n=yield M(e,p);return C||(yield P(g,u,e,m,y,a)),r()(r()({},n),{},{appId:e,path:t,needTransferToWeChat:T})}catch(e){const t=e.errMsg||e.message;throw new Error(t)}}));return function(t){return e.apply(this,arguments)}}(),B=((0,v.NX)("_checkBeforeNavigateToMiniProgram",L),(e={})=>{e.appId||e.shortLink?e.appId&&!(0,s.r3)("navigateToMiniProgram",e,{appId:""})||e.shortLink&&!(0,s.r3)("navigateToMiniProgram",e,{shortLink:""})||(e.appId,e.path,e.shortLink,_.s.log(`[_navigateToMiniProgram] appId=${e.appId} path=${e.path} shortLink=${e.shortLink}`),L({appId:e.appId,path:e.path,shortLink:e.shortLink}).then(((t={})=>{JSON.stringify(t),_.s.log(`[_checkBeforeNavigateToMiniProgram][resolve], res=${JSON.stringify(t)}`),S(e,{appId:t.appId,path:t.path,sourcetype:t.sourcetype,needTransferToWeChat:t.needTransferToWeChat})}),(t=>{const n=t.errMsg||t.message;_.s.log(`[_checkBeforeNavigateToMiniProgram][reject], errMsg=${n}`),(0,s.YG)("navigateToMiniProgram",e,n),"cancel"!==n&&Reporter.errorReport({key:"appServiceSDKScriptError",error:t,extend:"at checking before navigate to miniprogram"})}))):(0,s.YG)("navigateToMiniProgram",e,"should have appId or shortLink")});let F=!1,U=0;(0,s.Ld)("tapAnyWhere",(function(e){U=e.timeStamp,F=!0})),(0,u.J)((()=>{U=0,F=!1}));const W=()=>{U=Date.now(),F=!0}},6300:(e,t,n)=>{"use strict";n.d(t,{JB:()=>d,n8:()=>i.n,Bx:()=>s});var i=n(607),r=n(1106);let o=!1;const a=[],s=(e={})=>{if(!e.webviewId||!e.data){console.error("invalid arguments");const t={errMsg:"sendDataToH5: arguments data or webviewId cannot be null"};return"function"==typeof e.fail&&e.fail(t),void("function"==typeof e.complete&&e.complete(t))}"object"==typeof e.data&&(e.data=JSON.stringify(e.data)),o?a.push(e):(o=!0,(0,r.IN)("sendDataToH5",e,{afterAll(){if(o=!1,a.length){const e=a.shift();s(e)}}}))};let c=!1;const l=[];function u(e){for(let t=0;t<l.length;t++)l[t](e)}const d=e=>{if("function"!=typeof e)return;l.push(((t={})=>{t.webviewId&&t.data?("string"==typeof t.data&&(t.data=JSON.parse(t.data)),e(t)):console.error("invalid arguments in onH5Data callback")})),c||((0,r.jQ)("onH5Data",u),c=!0)}},607:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s,n:()=>c});var i=n(1106),r=n(5260),o=n(2851);const a=e=>(t={})=>{if(!0!==o.Z.openUrlLock)if(t.url=t.url||"",(0,r.mQ)(t.url))o.Z.openUrlLock=!0,(0,i.IN)(e,t,{afterAll(){o.Z.openUrlLock=!1}});else{console.error("invalid url",t.url);const n={errMsg:`${e}: invalid url "${t.url}"`};"function"==typeof t.fail&&t.fail(n),"function"==typeof t.complete&&t.complete(n)}},s=a("openUrl"),c=a("private_openUrl")},5184:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});const i=e=>{Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},5500:(e,t,n)=>{"use strict";n.d(t,{P:()=>d});var i=n(6998),r=n(1106),o=n(1095),a=n(9066);let s=0,c=[];const l=()=>{const e=JSON.stringify({business:"mmbizwxaservicequality",dataArray:c,appType:Reporter.getAppType()},null,2);(0,r.IN)("reportRealtimeAction",{actionData:e}),c=[]},u=e=>{let t="";return Object.keys(e).forEach(((n,i)=>{try{const r=`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`;0!==i&&(t+="&"),t+=r}catch(e){}})),t},d=(e,t,n,r,d,h,p,f=0,g=0,_={})=>{let m="",y="";if((0,o.aI)()&&(y=u(a.Z.query)),"undefined"!=typeof __appServiceEngine__){const e=__appServiceEngine__.getCurrentPages();if(e&&e.length>0){const t=e[e.length-1];t&&(m=t.route,y=t.__displayReporter&&t.__displayReporter.showOptions&&t.__displayReporter.showOptions.query)}}const v=[e,t,n,r,d,Reporter.getAppType(),h,f,(0,i._getCurrentNetworkType)(),m,y,g,u(_)].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"NetworkAPI",value:v}),Reporter.reportIDKey({key:`${e}_${1===n?"ok":"fail"}`}),c.push([e,t,n,h||"",r,d,(0,i._getCurrentNetworkType)(),p?"1":"0",Reporter.getAppType(),f].map((e=>{let t;try{t=encodeURIComponent(e)}catch(n){t=e}return t})).join(",")),Date.now()-s>=6e4&&(s=Date.now(),setTimeout(l,6e4))}},9973:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});var i=n(2851);const r=({name:e,scene:t,strategy:n,timeDiffToLastTap:r=0})=>{let o;"undefined"!=typeof __appServiceEngine__&&(o=__appServiceEngine__.getCurrentPagesByDomain("").find((e=>e.__wxWebviewId__===i.Z.currentWebviewId))||{});const a=[e,t,Reporter.getAppType(),o?o.route:"",n||0,r].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"RecycledAPI",value:a})}},926:e=>{var t="undefined"!=typeof __Function__?__Function__:globalThis.Function;e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./entry.js")}({"./entry.js":function(e,t,n){(function(t){const i=n("./node_modules/protocol-buffers/index.js"),r=n("./node_modules/protocol-buffers-encodings/index.js");var o=n("./node_modules/varint/index.js");const a=function(e,t){const n=new Uint8Array(8);let i=t,r=0,o=0,s=0;do{o|=(127&e[i])<<s,s+=7,s>=8&&(n[r]=255&o,o>>=8,s-=8,r++)}while(e[i++]>=128);return n[r]=255&o,a.bytes=i-t,n};function s(e,t){let n=0;for(let i=t;i<e.length;i++){if(!(128&e[i]))return n+1;n++}return n}var c,l,u=function(e,t,n,i){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:i}};r.uint64=(c=function(e,t){var n=s(e,t);if(n>=7&&NativeGlobal.decodeUint64Array){e=a(e,t);var i=NativeGlobal.decodeUint64Array(e);c.bytes=n}else i=o.decode(e,t),c.bytes=o.decode.bytes;return i},l=o.encode,u(0,l,c,(function(e){return e<0?10:o.encodingLength(e)}))),r.int64=function(){var e=function(n,i){if(((c=o.decode(n,i))>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&NativeGlobal.decodeUint64Array){var r=s(n,i);let t=10==r;t&&(n[9+i]=127&n[9+i]),n=a(n,i);var c=NativeGlobal.decodeUint64Array(n);return e.bytes=r,t?"-"+c:c}if(c>=Math.pow(2,63)){for(var l=9;255===n[i+l-1];)l--;var u=new t(l=l||9);n.copy(u,0,i,i+l),u[l-1]=127&u[l-1],c=-1*o.decode(u,0),e.bytes=10}else e.bytes=o.decode.bytes;return c},n=function(e,t,i){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw new Error("number too large, not supported yet");if(e<0){var r=i+9;for(o.encode(-1*e,t,i),t[i+=o.encode.bytes-1]=128|t[i];i<r-1;)t[++i]=255;t[r]=1,n.bytes=10}else o.encode(e,t,i),n.bytes=o.encode.bytes;return t};return u(0,n,e,(function(e){return e<0?10:o.encodingLength(e)}))}(),e.exports=function(e){const n=i(e);return Object.keys(n).forEach((function(e){var i;n[e].decode&&(n[e].decode=(i=n[e].decode,function e(n){"[object Uint8Array]"==Object.prototype.toString.call(n)&&n.__proto__!=t.__proto__&&(n.__proto__=t.prototype);const r=i.apply(this,arguments);return e.bytes=i.bytes,r}))})),n},e.exports.fixBuffer=function(e){return"[object Uint8Array]"==Object.prototype.toString.call(e)&&e.__proto__!=t.__proto__&&(e.__proto__=t.prototype),e}}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/base64-js/index.js":function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,i=l(e),a=i[0],s=i[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),u=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o=[],a=16383,s=0,c=n-r;s<c;s+=a)o.push(u(e,s,s+a>c?c:s+a));1===r?(t=e[n-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var r,o,a=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":function(e,t,n){"use strict";(function(e){var i=n("./node_modules/base64-js/index.js"),r=n("./node_modules/ieee754/index.js"),o=n("./node_modules/isarray/index.js");function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(t,n),r=(e=s(e,i)).write(t,n);r!==i&&(e=e.slice(0,r));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?s(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(i)return j(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function _(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function m(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,i,r);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,i,r){var o,a=1,s=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){var u=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,h=0;h<c;h++)if(l(e,o+h)!==l(t,h)){d=!1;break}if(d)return o}return-1}function v(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function A(e,t,n,i){return V(j(t,e.length-n),e,n,i)}function b(e,t,n,i){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function w(e,t,n,i){return b(e,t,n,i)}function E(e,t,n,i){return V(G(t),e,n,i)}function T(e,t,n,i){return V(function(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)i=(n=e.charCodeAt(a))>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function S(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,a,s,c,l=e[r],u=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[r+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[r+1],a=e[r+2],128==(192&o)&&128==(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[r+1],a=e[r+2],s=e[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=d}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=I));return n}(i)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,i){return u(t),t<=0?s(e,t):void 0!==n?"string"==typeof i?s(e,t).fill(n,i):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=c.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,i,r){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(i,r),u=e.slice(t,n),d=0;d<s;++d)if(l[d]!==u[d]){o=l[d],a=u[d];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},c.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function x(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function D(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function O(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=W(e[o]);return r}function P(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,n,i,r,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function N(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function M(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function L(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,i,o){return o||L(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function F(e,t,n,i,o){return o||L(e,0,n,8),r.write(e,t,n,i,52,8),n+8}c.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var r=t-e;n=new c(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},c.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),r.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),r.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),r.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),r.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||k(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||k(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);k(this,e,t,n,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);k(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,o=i-n;if(this===e&&n<t&&t<i)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:j(new c(e,i).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],a=0;a<i;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/generate-function/index.js":function(e,n,i){for(var r=i("./node_modules/util/util.js"),o=i("./node_modules/is-property/is-property.js"),a=/[\{\[]/,s=/[\}\]]/,c=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"],l={},u=0;u<c.length;u++)l[c[u]]=!0;var d=function(e){return o(e)&&!l.hasOwnProperty(e)},h={s:function(e){return""+e},d:function(e){return""+Number(e)},o:function(e){return JSON.stringify(e)}},p=function(){var e=[],n=0,i={},c=function(t){for(var i="";i.length<2*n;)i+="  ";e.push(i+t)},l=function(e){return s.test(e.trim()[0])&&a.test(e[e.length-1])?(n--,c(e),void n++):a.test(e[e.length-1])?(c(e),void n++):s.test(e.trim()[0])?(n--,void c(e)):void c(e)},u=function(e){if(!e)return u;if(1===arguments.length&&e.indexOf("\n")>-1)for(var t=e.trim().split("\n"),n=0;n<t.length;n++)l(t[n].trim());else l(r.format.apply(r,arguments));return u};return u.scope={},u.formats=h,u.sym=function(e){return e&&d(e)||(e="tmp"),i[e]||(i[e]=0),e+(i[e]++||"")},u.property=function(e,t){return 1===arguments.length&&(t=e,e=""),o(t+="")?e?e+"."+t:t:e?e+"["+JSON.stringify(t)+"]":JSON.stringify(t)},u.toString=function(){return e.join("\n")},u.toFunction=function(n){n||(n={});var i="return ("+e.join("\n")+")";Object.keys(u.scope).forEach((function(e){n[e]||(n[e]=u.scope[e])}));var r=Object.keys(n).map((function(e){return e})),o=r.map((function(e){return n[e]}));return t.apply(null,r.concat(i)).apply(null,o)},arguments.length&&u.apply(null,arguments),u};p.formats=h,e.exports=p},"./node_modules/generate-object-property/index.js":function(e,t,n){var i=n("./node_modules/is-property/is-property.js"),r=function(e,t){return i(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};r.valid=i,r.property=function(e){return i(e)?e:JSON.stringify(e)},e.exports=r},"./node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?r-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var a,s,c,l=8*o-r-1,u=(1<<l)-1,d=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,r),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;e[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;e[n+p]=255&a,p+=f,a/=256,l-=8);e[n+p-f]|=128*g}},"./node_modules/is-property/is-property.js":function(e,t,n){"use strict";e.exports=function(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}},"./node_modules/isarray/index.js":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"./node_modules/os-browserify/browser.js":function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},"./node_modules/process/browser.js":function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,l=[],u=!1,d=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var e=s(h);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"./node_modules/protocol-buffers-encodings/index.js":function(e,t,n){(function(e){var i=n("./node_modules/varint/index.js"),r=n("./node_modules/signed-varint/index.js");function o(e,t,n,i){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:i}}function a(t){return e.isBuffer(t)?t.length:e.byteLength(t)}t.make=o,t.name=function(e){for(var n=Object.keys(t),i=0;i<n.length;i++)if(t[n[i]]===e)return n[i];return null},t.skip=function(e,t,n){switch(e){case 0:return i.decode(t,n),n+i.decode.bytes;case 1:return n+8;case 2:var r=i.decode(t,n);return n+i.decode.bytes+r;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4}throw new Error("Unknown wire type: "+e)},t.bytes=o(2,(function t(n,r,o){var s=o,c=a(n);return i.encode(c,r,o),o+=i.encode.bytes,e.isBuffer(n)?n.copy(r,o):r.write(n,o,c),t.bytes=(o+=c)-s,r}),(function e(t,n){var r=n,o=i.decode(t,n);n+=i.decode.bytes;var a=t.slice(n,n+o);return n+=a.length,e.bytes=n-r,a}),(function(e){var t=a(e);return i.encodingLength(t)+t})),t.string=o(2,(function t(n,r,o){var a=o,s=e.byteLength(n);return i.encode(s,r,o,"utf-8"),o+=i.encode.bytes,r.write(n,o,s),t.bytes=(o+=s)-a,r}),(function e(t,n){var r=n,o=i.decode(t,n);n+=i.decode.bytes;var a=t.toString("utf-8",n,n+o);return e.bytes=(n+=o)-r,a}),(function(t){var n=e.byteLength(t);return i.encodingLength(n)+n})),t.bool=o(0,(function e(t,n,i){return n[i]=t?1:0,e.bytes=1,n}),(function e(t,n){var i=t[n]>0;return e.bytes=1,i}),(function(){return 1})),t.int32=o(0,(function e(t,n,r){return i.encode(t<0?t+4294967296:t,n,r),e.bytes=i.encode.bytes,n}),(function e(t,n){var r=i.decode(t,n);return e.bytes=i.decode.bytes,r>2147483647?r-4294967296:r}),(function(e){return i.encodingLength(e<0?e+4294967296:e)})),t.int64=o(0,(function e(t,n,r){if(t<0){var o=r+9;for(i.encode(-1*t,n,r),n[r+=i.encode.bytes-1]=128|n[r];r<o-1;)n[++r]=255;n[o]=1,e.bytes=10}else i.encode(t,n,r),e.bytes=i.encode.bytes;return n}),(function t(n,r){var o=i.decode(n,r);if(o>=Math.pow(2,63)){for(var a=9;255===n[r+a-1];)a--;a=a||9;var s=e.allocUnsafe(a);n.copy(s,0,r,r+a),s[a-1]=127&s[a-1],o=-1*i.decode(s,0),t.bytes=10}else t.bytes=i.decode.bytes;return o}),(function(e){return e<0?10:i.encodingLength(e)})),t.sint32=t.sint64=o(0,r.encode,r.decode,r.encodingLength),t.uint32=t.uint64=t.enum=t.varint=o(0,i.encode,i.decode,i.encodingLength),t.fixed64=t.sfixed64=o(1,(function e(t,n,i){return t.copy(n,i),e.bytes=8,n}),(function e(t,n){var i=t.slice(n,n+8);return e.bytes=8,i}),(function(){return 8})),t.double=o(1,(function e(t,n,i){return n.writeDoubleLE(t,i),e.bytes=8,n}),(function e(t,n){var i=t.readDoubleLE(n);return e.bytes=8,i}),(function(){return 8})),t.fixed32=o(5,(function e(t,n,i){return n.writeUInt32LE(t,i),e.bytes=4,n}),(function e(t,n){var i=t.readUInt32LE(n);return e.bytes=4,i}),(function(){return 4})),t.sfixed32=o(5,(function e(t,n,i){return n.writeInt32LE(t,i),e.bytes=4,n}),(function e(t,n){var i=t.readInt32LE(n);return e.bytes=4,i}),(function(){return 4})),t.float=o(5,(function e(t,n,i){return n.writeFloatLE(t,i),e.bytes=4,n}),(function e(t,n){var i=t.readFloatLE(n);return e.bytes=4,i}),(function(){return 4}))}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/protocol-buffers-schema/index.js":function(e,t,n){var i=n("./node_modules/protocol-buffers-schema/parse.js"),r=n("./node_modules/protocol-buffers-schema/stringify.js");e.exports=i,e.exports.parse=i,e.exports.stringify=r},"./node_modules/protocol-buffers-schema/parse.js":function(e,t,n){var i=n("./node_modules/protocol-buffers-schema/tokenize.js"),r=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],o=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var n=e.shift();if("("===n&&(n=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[n]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},a=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var n=e.shift();t.required="required"===n,t.repeated="repeated"===n,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=o(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},s=function(e){for(var t={enums:[],options:{},messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(a(e));break;case"enum":t.enums.push(f(e));break;case"message":t.messages.push(u(e));break;case"extensions":t.extensions=l(e);break;case"oneof":e.shift();var n=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var i=a(e);i.oneof=n,t.fields.push(i)}e.shift();break;case"extend":t.extends.push(c(e));break;case";":e.shift();break;case"reserved":for(e.shift();";"!==e[0];)e.shift();break;case"option":var r=g(e);if(void 0!==t.options[r.name])throw new Error("Duplicate option "+r.name);t.options[r.name]=r.value;break;default:e.unshift("optional"),t.fields.push(a(e))}return t},c=function(e){return{name:e[1],message:u(e)}},l=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var n=e.shift();if("max"===n&&(n=536870911),n=Number(n),isNaN(n))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:n}},u=function(e){e.shift();var t=1,n=[],i={name:e.shift(),options:{},enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),n=s(n),i.enums=n.enums,i.messages=n.messages,i.fields=n.fields,i.extends=n.extends,i.extensions=n.extensions,i.options=n.options,i;n.push(e.shift())}if(t)throw new Error("No closing tag for message")},d=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},h=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},p=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var n={value:null,options:{}};return n.value=Number(e.shift()),"["===e[0]&&(n.options=o(e)),e.shift(),{name:t,val:n}},f=function(e){e.shift();var t={},n={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),n;if("option"!==e[0]){var i=p(e);n.values[i.name]=i.val}else t=g(e),n.options[t.name]=t.value}throw new Error("No closing tag for enum")},g=function(e){for(var t=null,n=null,i=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:n};switch(e[0]){case"option":e.shift();var r="("===e[0];if(r&&e.shift(),t=e.shift(),r){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(n=i(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(n))throw new Error("Unexpected value for option optimize_for: "+n);"{"===n&&(n=_(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},_=function(e){for(var t=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},n={};e.length;){if("}"===e[0])return e.shift(),n;var i="("===e[0];i&&e.shift();var r=e.shift();if(i){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}var o=null;switch(e[0]){case":":if(void 0!==n[r])throw new Error("Duplicate option map key "+r);e.shift(),"{"===(o=t(e.shift()))&&(o=_(e)),n[r]=o,";"===e[0]&&e.shift();break;case"{":if(e.shift(),o=_(e),void 0===n[r]&&(n[r]=[]),!Array.isArray(n[r]))throw new Error("Duplicate option map key "+r);n[r].push(o);break;default:throw new Error("Unexpected token in option map: "+e[0])}}throw new Error("No closing tag for option map")},m=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},y=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var n=g(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value;break;case"rpc":t.methods.push(v(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},v=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var n=g(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value}throw new Error("No closing tag for rpc")};e.exports=function(e){for(var t=i(e.toString()),n=0;n<t.length;n++){var o;if(/^("|')([^'"]*)$/.test(t[n]))for(o=1===t[n].length?n+1:n;o<t.length;o++)if(/^[^'"\\]*(?:\\.[^'"\\]*)*("|')$/.test(t[o])){t=t.slice(0,n).concat(t.slice(n,o+1).join("")).concat(t.slice(o+1));break}}for(var a={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},s=!0;t.length;){switch(t[0]){case"package":a.package=d(t);break;case"syntax":if(!s)throw new Error("Protobuf syntax version should be first thing in file");a.syntax=h(t);break;case"message":a.messages.push(u(t));break;case"enum":a.enums.push(f(t));break;case"option":var l=g(t);if(a.options[l.name])throw new Error("Duplicate option "+l.name);a.options[l.name]=l.value;break;case"import":a.imports.push(m(t));break;case"extend":a.extends.push(c(t));break;case"service":a.services||(a.services=[]),a.services.push(y(t));break;default:throw new Error("Unexpected token: "+t[0])}s=!1}return a.extends.forEach((function(e){a.messages.forEach((function(t){t.name===e.name&&e.message.fields.forEach((function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)}))}))})),a.messages.forEach((function(e){e.fields.forEach((function(t){var n,i,o,s;if(t.options&&"true"===t.options.packed&&-1===r.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some((function(e){return e.name===t.type})))return}else{if((n=t.type.split(".")).length>2)throw new Error("what is this?");if(i=n[0],o=n[1],a.messages.some((function(e){if(e.name===i)return s=e,e})),s&&s.enums&&s.enums.some((function(e){return e.name===o})))return}throw new Error("Fields of type "+t.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}}))})),a}},"./node_modules/protocol-buffers-schema/stringify.js":function(e,t){var n=function(e,t){var n=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(n="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(n="");var i=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return i&&(i=" ["+i+"]"),t.push((n?n+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+i+";"),t},i=function(e,t){t.push("message "+e.name+" {"),e.options||(e.options={}),a(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){t.push(r(e,[]))})),e.messages||(e.messages=[]),e.messages.forEach((function(e){t.push(i(e,[]))}));var o={};return e.fields||(e.fields=[]),e.fields.forEach((function(e){e.oneof?(o[e.oneof]||(o[e.oneof]=[]),o[e.oneof].push(n(e,[]))):t.push(n(e,[]))})),Object.keys(o).forEach((function(e){o[e].unshift("oneof "+e+" {"),o[e].push("}"),t.push(o[e])})),t.push("}",""),t},r=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var n=a(e.options,[]);return n.length>1&&t.push(n.slice(0,-1)),Object.keys(e.values).map((function(n){var i=o(e.values[n]);t.push([n+" = "+i+";"])})),t.push("}",""),t},o=function(e,t){var n=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return n&&(n=" ["+n+"]"),e.value+n},a=function(e,t){var n=Object.keys(e);return n.forEach((function(n){var i=e[n];~n.indexOf(".")&&(n="("+n+")");var r=typeof i;"object"===r?(i=s(i,[])).length&&t.push("option "+n+" = {",i,"};"):("string"===r&&"optimize_for"!==n&&(i='"'+i+'"'),t.push("option "+n+" = "+i+";"))})),n.length>0&&t.push(""),t},s=function(e,t){return Object.keys(e).forEach((function(n){var i=e[n],r=typeof i;"object"===r?Array.isArray(i)?i.forEach((function(e){(e=s(e,[])).length&&t.push(n+" {",e,"}")})):(i=s(i,[])).length&&t.push(n+" {",i,"}"):("string"===r&&(i='"'+i+'"'),t.push(n+": "+i))})),t},c=function(e,t){var n="rpc "+e.name+"(";e.client_streaming&&(n+="stream "),n+=e.input_type+") returns (",e.server_streaming&&(n+="stream "),n+=e.output_type+")",e.options||(e.options={});var i=a(e.options,[]);return i.length>1?t.push(n+" {",i.slice(0,-1),"}"):t.push(n+";"),t},l=function(e){return function(t){return Array.isArray(t)?t.map(l(e+"  ")).join("\n"):e+t}};e.exports=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),a(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){r(e,t)})),e.messages||(e.messages=[]),e.messages.forEach((function(e){i(e,t)})),e.services&&e.services.forEach((function(e){!function(e,t){t.push("service "+e.name+" {"),e.options||(e.options={}),a(e.options,t),e.methods||(e.methods=[]),e.methods.forEach((function(e){t.push(c(e,[]))})),t.push("}","")}(e,t)})),t.map(l("")).join("\n")}},"./node_modules/protocol-buffers-schema/tokenize.js":function(e,t){e.exports=function(e){var t,n=function(e){return e.trim()};return e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(n).filter(Boolean).map((function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e})).map(n).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((t=!1,function(e){return"/*"===e?(t=!0,!1):"*/"===e?(t=!1,!1):!t}))}},"./node_modules/protocol-buffers/compile-to-js.js":function(e,t,n){var i=n("./node_modules/os-browserify/browser.js"),r={type:!0,message:!0,name:!0,buffer:!0,encode:!0,decode:!0,encodingLength:!0,dependencies:!0};function o(e){return"function"==typeof e.encode}e.exports=function(e){var t="";return t+="// This file is auto generated by the protocol-buffers compiler"+i.EOL,t+=i.EOL,t+="/* eslint-disable quotes */"+i.EOL,t+="/* eslint-disable indent */"+i.EOL,t+="/* eslint-disable no-redeclare */"+i.EOL,t+="/* eslint-disable camelcase */"+i.EOL,t+=i.EOL,t+="// Remember to `npm install --save protocol-buffers-encodings`"+i.EOL,t+="var encodings = require('protocol-buffers-encodings')"+i.EOL,t+="var varint = encodings.varint"+i.EOL,t+="var skip = encodings.skip"+i.EOL,t+=i.EOL,function e(n,s,c){var l=Object.keys(n).filter((function(e){return!r[e]&&o(n[e])}));Object.keys(n).filter((function(e){if(r[e])return false;return!o(n[e])})).forEach((function(e){t+=c+s+"."+e+" = "+function(e,t){const n=Object.keys(e);if(!n.every((function(t){return"number"==typeof e[t]&&/^[a-z][a-z0-9]+$/i.test(t)})))return JSON.stringify(e,null,2).replace(/\n/g,i.EOL)+i.EOL;var r="{"+i.EOL;return n.forEach((function(o,a){r+=t+"  "+o+": "+e[o]+(a<n.length-1?",":"")+i.EOL})),r+t+"}"+i.EOL}(n[e],c)+i.EOL})),l.forEach((function(e){t+=c+"var "+e+" = "+s+"."+e+" = {"+i.EOL,t+=c+"  buffer: true,"+i.EOL,t+=c+"  encodingLength: null,"+i.EOL,t+=c+"  encode: null,"+i.EOL,t+=c+"  decode: null"+i.EOL,t+=c+"}"+i.EOL,t+=i.EOL})),l.forEach((function(e){t+=c+"define"+e+"()"+i.EOL})),l.length&&(t+=i.EOL);l.forEach((function(r){t+=c+"function define"+r+" () {"+i.EOL,e(n[r],r,c+"  "),t+=c+"  "+r+".encodingLength = encodingLength"+i.EOL,t+=c+"  "+r+".encode = encode"+i.EOL,t+=c+"  "+r+".decode = decode"+i.EOL+i.EOL,t+=c+"  "+a(n[r].encodingLength,c+"  ")+i.EOL+i.EOL,t+=c+"  "+a(n[r].encode,c+"  ")+i.EOL+i.EOL,t+=c+"  "+a(n[r].decode,c+"  ")+i.EOL,t+=c+"}"+i.EOL+i.EOL}))}(e,"exports",""),t+=a(n("./node_modules/protocol-buffers/compile.js").defined,"")+i.EOL;function a(e,t){return e.toString().split("\n").map((function(e,n){return n?t+e:e.replace(/(function \w+)\(/,"$1 (")})).join("\n")}}},"./node_modules/protocol-buffers/compile.js":function(e,t,n){(function(t){var i=n("./node_modules/protocol-buffers-encodings/index.js"),r=n("./node_modules/varint/index.js"),o=n("./node_modules/generate-object-property/index.js"),a=n("./node_modules/generate-function/index.js"),s=function(e){return null!=e&&("number"!=typeof e||!isNaN(e))},c=function(e,t){if(e.map)return"{}";if(e.repeated)return"[]";switch(e.type){case"string":return function(e){try{return!!e&&"string"==typeof JSON.parse(e)}catch(e){return!1}}(t)?t:'""';case"bool":return"true"===t?"true":"false";case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return""+Number(t||0);default:return"null"}};e.exports=function(e,n,l){var u={},d={},h={},p=function(e,t){return l?(n=t[e],(r=i.name(n))?"encodings."+r:n.name?n.name:"encodings.enum"):"enc["+e+"]";var n,r},f=function(e,t){e.enums&&e.enums.forEach((function(e){e.id=t+(t?".":"")+e.name,d[e.id]=e,f(e,e.id)})),e.messages&&e.messages.forEach((function(n){n.id=t+(t?".":"")+n.name,u[n.id]=n,n.fields.forEach((function(n){if(n.map){var i="Map_"+n.map.from+"_"+n.map.to,r={name:i,enums:[],messages:[],fields:[{name:"key",type:n.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:n.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:t+(t?".":"")+i};u[r.id]||(u[r.id]=r,e.messages.push(r)),n.type=i,n.repeated=!0}})),f(n,n.id)}))};f(e,"");var g=function(n,l){n.messages.forEach((function(e){l[e.name]=_(e.name,n.id)})),n.enums.forEach((function(e){l[e.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(e.values)})),l.type=2,l.message=!0,l.name=n.name;var u={};n.fields.forEach((function(e){e.oneof&&(u[e.oneof]||(u[e.oneof]=[]),u[e.oneof].push(e.name))}));var d=n.fields.map((function(e){return _(e.type,n.id)})),h=d.filter((function(e,t){return d.indexOf(e)===t})),f=d.map((function(e){return h.indexOf(e)})),g=function(e){for(var t=0;t<d.length;t++)e(d[t],n.fields[t],o("obj",n.fields[t].name),t)},m=a()("function encodingLength (obj) {")("var length = 0");Object.keys(u).forEach((function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),n=u[e].map((function(e){return"+defined("+o("obj",e)+")"})).join(" + ");m("if ((%s) > 1) throw new Error(%s)",n,t)})),g((function(e,t,n,i){var o=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,a=r.encodingLength(t.tag<<3|e.type);t.required?m("if (!defined(%s)) throw new Error(%s)",n,JSON.stringify(t.name+" is required")):m("if (defined(%s)) {",n),t.map&&(m()("var tmp = Object.keys(%s)",n)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",n)("}"),n="tmp"),o?(m()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",n)("if (!defined(%s)) continue",n+"[i]")("var len = %s.encodingLength(%s)",p(f[i],h),n+"[i]")("packedLen += len"),e.message&&m("packedLen += varint.encodingLength(len)"),m("}")("if (packedLen) {")("length += %d + packedLen + varint.encodingLength(packedLen)",a)("}")):(t.repeated&&(m("for (var i = 0; i < %s.length; i++) {",n),m("if (!defined(%s)) continue",n+="[i]")),m("var len = %s.encodingLength(%s)",p(f[i],h),n),e.message&&m("length += varint.encodingLength(len)"),m("length += %d + len",a),t.repeated&&m("}")),t.required||m("}")})),m()("return length")("}"),m=m.toFunction({defined:s,varint:r,enc:h});var y=a()("function encode (obj, buf, offset) {")("if (!offset) offset = 0")("if (!buf) buf = Buffer.allocUnsafe(encodingLength(obj))")("var oldOffset = offset");Object.keys(u).forEach((function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),n=u[e].map((function(e){return"+defined("+o("obj",e)+")"})).join(" + ");y("if ((%s) > 1) throw new Error(%s)",n,t)})),g((function(e,t,n,i){t.required?y("if (!defined(%s)) throw new Error(%s)",n,JSON.stringify(t.name+" is required")):y("if (defined(%s)) {",n);var o,a=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,s=r.encode(t.tag<<3|2),c=r.encode(t.tag<<3|e.type);if(t.map&&(y()("var tmp = Object.keys(%s)",n)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",n)("}"),n="tmp"),a){for(y()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",n)("if (!defined(%s)) continue",n+"[i]")("packedLen += %s.encodingLength(%s)",p(f[i],h),n+"[i]")("}"),y("if (packedLen) {"),o=0;o<c.length;o++)y("buf[offset++] = %d",s[o]);y("varint.encode(packedLen, buf, offset)"),y("offset += varint.encode.bytes"),y("}")}if(t.repeated&&(y("for (var i = 0; i < %s.length; i++) {",n),y("if (!defined(%s)) continue",n+="[i]")),!a)for(o=0;o<c.length;o++)y("buf[offset++] = %d",c[o]);e.message&&(y("varint.encode(%s.encodingLength(%s), buf, offset)",p(f[i],h),n),y("offset += varint.encode.bytes")),y("%s.encode(%s, buf, offset)",p(f[i],h),n),y("offset += %s.encode.bytes",p(f[i],h)),t.repeated&&y("}"),t.required||y("}")})),y()("encode.bytes = offset - oldOffset")("return buf")("}"),y=y.toFunction({encodingLength:m,defined:s,varint:r,enc:h,Buffer:t});var v,A=n.fields.map((function(e,t){return e.required&&"!found"+t})).filter((function(e){return e})).join(" || "),b=a(),w=[];return g((function(e,t){var i=t.options&&t.options.default,r=_(t.type,n.id,!1),a=r&&r.values;a?t.repeated?w.push(o.property(t.name)+": []"):(i=i&&a[i]?a[i].value:a[Object.keys(a)[0]].value,w.push(o.property(t.name)+": "+parseInt(i||0,10))):w.push(o.property(t.name)+": "+c(t,i))})),w=w.filter((v={},function(e){return!v.hasOwnProperty(e)&&(v[e]=!0,!0)})),b()("function decode (buf, offset, end) {")("if (!offset) offset = 0")("if (!end) end = buf.length")('if (!(end <= buf.length && offset <= buf.length)) throw new Error("Decoded message is not valid")')("var oldOffset = offset")("var obj = {"),w.forEach((function(e,t){b(e+(t===w.length-1?"":","))})),b("}"),g((function(e,t,n,i){t.required&&b("var found%d = false",i)})),b("while (true) {")("if (end <= offset) {")(A&&'if (%s) throw new Error("Decoded message is not valid")',A)("decode.bytes = offset - oldOffset")("return obj")("}")("var prefix = varint.decode(buf, offset)")("offset += varint.decode.bytes")("var tag = prefix >> 3")("switch (tag) {"),g((function(t,i,r,a){var s=i.repeated&&(i.options&&i.options.packed&&"false"!==i.options.packed||!(i.options&&"false"==i.options.packed)&&3==e.syntax&&("float"===i.type||"double"===i.type||-1!=i.type.indexOf("int")));b("case %d:",i.tag),i.oneof&&n.fields.forEach((function(e){e.oneof===i.oneof&&i.name!==e.name&&b("delete %s",o("obj",e.name))})),s&&b()("var packedEnd = varint.decode(buf, offset)")("offset += varint.decode.bytes")("packedEnd += offset")("while (offset < packedEnd) {"),t.message?(b("var len = varint.decode(buf, offset)"),b("offset += varint.decode.bytes"),i.map?(b("var tmp = %s.decode(buf, offset, offset + len)",p(f[a],h)),b("%s[tmp.key] = tmp.value",r)):i.repeated?b("%s.push(%s.decode(buf, offset, offset + len))",r,p(f[a],h)):b("%s = %s.decode(buf, offset, offset + len)",r,p(f[a],h))):i.repeated?b("%s.push(%s.decode(buf, offset))",r,p(f[a],h)):b("%s = %s.decode(buf, offset)",r,p(f[a],h)),b("offset += %s.decode.bytes",p(f[a],h)),s&&b("}"),i.required&&b("found%d = true",a),b("break")})),b()("default:")("offset = skip(prefix & 7, buf, offset)")("}")("}")("}"),b=b.toFunction({varint:r,skip:i.skip,enc:h}),y.bytes=b.bytes=0,l.buffer=!0,l.encode=y,l.decode=b,l.encodingLength=m,l.dependencies=h,l},_=function(e,t,o){if(n&&n[e])return n[e];if(i[e])return i[e];var s=(t?t+"."+e:e).split(".").map((function(t,n,i){return i.slice(0,n).concat(e).join(".")})).reverse().reduce((function(e,t){return e||u[t]||d[t]}),null);if(!1===o)return s;if(!s)throw new Error("Could not resolve "+e);return s.values?function(e){var t=Object.keys(e.values).map((function(t){return"val !== "+parseInt(e.values[t].value,10)})).join(" && ");t||(t="true");var n=a()("function encode (val, buf, offset) {")('if (%s) throw new Error("Invalid enum value: "+val)',t)("varint.encode(val, buf, offset)")("encode.bytes = varint.encode.bytes")("return buf")("}").toFunction({varint:r}),o=a()("function decode (buf, offset) {")("var val = varint.decode(buf, offset)")('if (%s) throw new Error("Invalid enum value: "+val)',t)("decode.bytes = varint.decode.bytes")("return val")("}").toFunction({varint:r});return i.make(0,n,o,r.encodingLength)}(s):h[s.id]?h[s.id]:(h[s.id]={},g(s,h[s.id]))};return(e.enums||[]).concat((e.messages||[]).map((function(e){return _(e.id)})))},e.exports.defined=s}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/protocol-buffers/index.js":function(e,t,n){(function(t){var i=n("./node_modules/protocol-buffers-schema/index.js"),r=n("./node_modules/protocol-buffers/compile.js"),o=n("./node_modules/protocol-buffers/compile-to-js.js");e.exports=function(e,n){if(n||(n={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var o="object"!=typeof e||t.isBuffer(e)?i.parse(e):e,a=function(){var e=this;r(o,n.encodings||{},n.inlineEnc).forEach((function(t){e[t.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(t.values)||t}))};return a.prototype.toString=function(){return i.stringify(o)},a.prototype.toJSON=function(){return o},new a},e.exports.toJS=function(t){return o(e.exports(t,{inlineEnc:!0}))}}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/signed-varint/index.js":function(e,t,n){var i=n("./node_modules/varint/index.js");t.encode=function e(t,n,r){t=t>=0?2*t:-2*t-1;var o=i.encode(t,n,r);return e.bytes=i.encode.bytes,o},t.decode=function e(t,n){var r=i.decode(t,n);return e.bytes=i.decode.bytes,1&r?(r+1)/-2:r/2},t.encodingLength=function(e){return i.encodingLength(e>=0?2*e:-2*e-1)}},"./node_modules/util/node_modules/inherits/inherits_browser.js":function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},"./node_modules/util/support/isBufferBrowser.js":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"./node_modules/util/util.js":function(e,t,n){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},r=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,o=i.length,a=String(e).replace(r,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}})),c=i[n];n<o;c=i[++n])g(c)||!A(c)?a+=" "+c:a+=" "+s(c);return a},t.deprecate=function(n,i){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,i).apply(this,arguments)};var r=!1;return function(){if(!r){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),r=!0}return n.apply(this,arguments)}};var o,a={};function s(e,n){var i={seen:[],stylize:l};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),f(n)?i.showHidden=n:n&&t._extend(i,n),y(i.showHidden)&&(i.showHidden=!1),y(i.depth)&&(i.depth=2),y(i.colors)&&(i.colors=!1),y(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=c),u(i,e,i.depth)}function c(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function l(e,t){return e}function u(e,n,i){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return m(r)||(r=u(e,r,i)),r}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(_(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(n);if(0===a.length){if(E(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return d(n)}var l,A="",T=!1,S=["{","}"];(p(n)&&(T=!0,S=["[","]"]),E(n))&&(A=" [Function"+(n.name?": "+n.name:"")+"]");return v(n)&&(A=" "+RegExp.prototype.toString.call(n)),b(n)&&(A=" "+Date.prototype.toUTCString.call(n)),w(n)&&(A=" "+d(n)),0!==a.length||T&&0!=n.length?i<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=T?function(e,t,n,i,r){for(var o=[],a=0,s=t.length;a<s;++a)x(t,String(a))?o.push(h(e,t,n,i,String(a),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(h(e,t,n,i,r,!0))})),o}(e,n,i,s,a):a.map((function(t){return h(e,n,i,s,t,T)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,A,S)):S[0]+A+S[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,i,r,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),x(i,r)||(a="["+r+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?u(e,c.value,null):u(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function g(e){return null===e}function _(e){return"number"==typeof e}function m(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return A(e)&&"[object RegExp]"===T(e)}function A(e){return"object"==typeof e&&null!==e}function b(e){return A(e)&&"[object Date]"===T(e)}function w(e){return A(e)&&("[object Error]"===T(e)||e instanceof Error)}function E(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(o)&&(o=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var i=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,i,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=f,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=_,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=v,t.isObject=A,t.isDate=b,t.isError=w,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("./node_modules/util/support/isBufferBrowser.js");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",I(),t.format.apply(t,arguments))},t.inherits=n("./node_modules/util/node_modules/inherits/inherits_browser.js"),t._extend=function(e,t){if(!t||!A(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e};var D="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(D&&e[D]){var t;if("function"!=typeof(t=e[D]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,D,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,i=new Promise((function(e,i){t=e,n=i})),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push((function(e,i){e?n(e):t(i)}));try{e.apply(this,r)}catch(e){n(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),D&&Object.defineProperty(t,D,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=D,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return r.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(O,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,i(t)),n}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/varint/decode.js":function(e,t){e.exports=function e(t,n){var i,r=0,o=0,a=n=n||0,s=t.length;do{if(a>=s)throw e.bytes=0,new RangeError("Could not decode varint");i=t[a++],r+=o<28?(127&i)<<o:(127&i)*Math.pow(2,o),o+=7}while(i>=128);return e.bytes=a-n,r}},"./node_modules/varint/encode.js":function(e,t){e.exports=function e(t,i,r){i=i||[];var o=r=r||0;for(;t>=n;)i[r++]=255&t|128,t/=128;for(;-128&t;)i[r++]=255&t|128,t>>>=7;return i[r]=0|t,e.bytes=r-o+1,i};var n=Math.pow(2,31)},"./node_modules/varint/index.js":function(e,t,n){e.exports={encode:n("./node_modules/varint/encode.js"),decode:n("./node_modules/varint/decode.js"),encodingLength:n("./node_modules/varint/length.js")}},"./node_modules/varint/length.js":function(e,t){var n=Math.pow(2,7),i=Math.pow(2,14),r=Math.pow(2,21),o=Math.pow(2,28),a=Math.pow(2,35),s=Math.pow(2,42),c=Math.pow(2,49),l=Math.pow(2,56),u=Math.pow(2,63);e.exports=function(e){return e<n?1:e<i?2:e<r?3:e<o?4:e<a?5:e<s?6:e<c?7:e<l?8:e<u?9:10}},"./node_modules/webpack/buildin/global.js":function(e,n){var i;i=globalThis;try{i=i||new t("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i}})},2913:(e,t,n)=>{"use strict";n.d(t,{z:()=>o});var i=n(1106),r=n(5260);const o=()=>{const e={};let t;if((0,i.IN)("getMenuButtonBoundingClientRect",{success(t){Object.assign(e,t),delete e.errMsg},fail(e){t=e.errMsg}}),t)throw new r.iZ(t);return e}},3536:(e,t,n)=>{"use strict";n.d(t,{Zz:()=>D,I6:()=>m,Zk:()=>I,PE:()=>T,Cy:()=>x,QP:()=>C,K4:()=>y,CF:()=>E});var i=n(1106),r=n(5260),o=n(2851),a=n(2276),s=n(2582),c=n(1095),l=n(3872),u=n(9185),d=n(2046);const h=(0,d.s)("XWebTextareaSupportedEvent");let p=!1;(0,i.Ld)("xWebTextareaSupported",(({canInsert2XWeb:e})=>{p=e,h.emit({canInsert2XWeb:e})})),(s.gm||s.qB||s.Mq||s.wZ||s.Ae)&&(0,i.Ld)("SPECIAL_PAGE_EVENT",(({data:e,eventName:t,ext:n,nodeId:a,instanceId:c},l=0)=>{if((!s.wZ||p)&&(e&&"input"===e.type&&n&&n.modelValueName&&__virtualDOM__.setModelValueData(e.detail.value,n.modelValueName,l,a),e&&"input"===e.type&&"function"==typeof o.Z.webviewEventCallback)){const s=o.Z.webviewEventCallback({data:e,eventName:t,webviewId:l,nodeId:a}),u=e.detail.value;if(n&&n.setKeyboardValue)if(void 0===s);else if("Object"===(0,r.Em)(s)){const e={};c&&(e.instanceId=c),u!==s.value&&(e.value=s.value+""),Number.isNaN(parseInt(s.cursor,10))||(e.cursor=parseInt(s.cursor,10)),(0,i.nY)("setKeyboardValue",e,[l])}else u!==s&&(0,i.nY)("setKeyboardValue",{value:s+"",cursor:-1,instanceId:c},[l])}}));const f=(0,d.s)("DomReady"),g=f.internalOnMethod;let _=!1;const m=(e={})=>{let t={title:"",content:"",confirmText:"确定",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:void 0!==__wxConfig.theme&&e.confirmColor?e.confirmColor:"#7D90A9",cancelColor:"#000000",cancelColorDark:void 0!==__wxConfig.theme&&e.cancelColor?e.cancelColor:"#AAAAAA",editable:!1,placeholderText:""};t=(0,r.l7)(t,e),(0,i.r3)("showModal",t,{title:"",content:"",confirmText:"",cancelText:"",confirmColor:"",cancelColor:"",editable:!1,placeholderText:""})&&(t.confirmText.replace(/[^\x00-\xff]/g,"##").length>8?(0,i.YG)("showModal",e,"confirmText length should not larger than 4 Chinese characters"):t.cancelText.replace(/[^\x00-\xff]/g,"##").length>8?(0,i.YG)("showModal",e,"cancelText length should not larger than 4 Chinese characters"):(0,i.IN)("showModal",t,{beforeSuccess:e=>{e.confirm=Boolean(e.confirm),s.cj||s.Mq?e.cancel=!e.confirm:e.cancel=!e.confirm&&Boolean(e.cancel),(0,a.Hk)()},beforeAll(){_=!0},afterAll(){_=!1}}))},y=(e={})=>{m(e),(0,c.aI)()&&(0,l.y4)(l.F0.EVENT_CANVAS_AFTER_MODAL)},v={},A={};(0,u.H)((e=>{A[e.webviewId]=[]})),g((e=>{setTimeout((()=>{const t=e.webviewId,n=A[t]||[];v[t]=!0,n.length>0&&(w=!1,S=!1,n.forEach((e=>{const{res:t,args:n}=e,r=/hideLoading/.test(t.errMsg)?{beforeAll:e=>{e.errMsg=e.errMsg.replace("hideToast","hideLoading")}}:{};(0,i.IN)("hideToast",n,r)}))),delete A[t]}),100)}));let b=1,w=!1;const E=(e={})=>{let t={duration:1500,title:"",icon:"success",mask:!1};if(t=(0,r.l7)(t,e),e.image&&(t.image=(0,r.sd)(o.Z.lastRoute,e.image,!1)),["success","loading","none","error"].indexOf(t.icon)<0&&(t.icon="success"),"none"===t.icon&&(t.icon=""),!(0,i.r3)("showToast",t,{duration:1,title:"",icon:""}))return;const n=A[o.Z.currentWebviewId]||[];n.length>0&&(w=!1,S=!1,n.forEach((e=>{const{res:t,args:n}=e;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete A[o.Z.currentWebviewId]),w=b++,setTimeout((function(){w=!1}),t.duration),t.maskAll=!1,(0,i.IN)("showToast",t)},T=(e={})=>{if(s.gm&&S&&(!w||w<S))return w=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideToast:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideToast:ok"})})),void console.warn("请注意 showToast 与 hideToast 必须配对使用");o.Z.currentWebviewId;w=!1,(0,i.IN)("hideToast",e)};let S=!1;const C=(e={})=>{let t={title:"",icon:"loading",mask:!1,duration:1e8};if(t=(0,r.l7)(t,e),t.icon="loading",delete t.image,!(0,i.r3)("showLoading",t,{duration:1,title:""}))return;const n=A[o.Z.currentWebviewId]||[];n.length>0&&(w=!1,S=!1,n.forEach((e=>{const{res:t,args:n}=e;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete A[o.Z.currentWebviewId]),S=b++,t.maskAll=!1,(0,i.IN)("showToast",t,{beforeAll:e=>{e.errMsg=e.errMsg.replace("showToast","showLoading")}})},I=(e={})=>{if(s.gm&&w&&(!S||S<w))return S=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideLoading:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideLoading:ok"})})),void console.warn("请注意 showLoading 与 hideLoading 必须配对使用");o.Z.currentWebviewId;S=!1,(0,i.IN)("hideToast",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace("hideToast","hideLoading")}})},x=(e={})=>{let t={itemList:[],itemColor:"#000000",itemColorDark:void 0!==__wxConfig.theme&&e.itemColor?e.itemColor:"#FFFFFFCC"};t=(0,r.l7)(t,e),delete t.cancelText,delete t.cancelColor,(0,i.r3)("showActionSheet",t,{itemList:["1"],itemColor:""})&&(e.itemList.length>6?(0,i.YG)("showActionSheet",e,"parameter error: itemList should not be large than 6"):(0,i.IN)("showActionSheet",t,{beforeAll:e=>{(e.errMsg.indexOf(":ok")>-1||e.errMsg.indexOf(":cancel")>-1)&&(0,a.Hk)(),_=!0},afterAll:()=>{_=!1}}))},D=()=>_},1051:(e,t,n)=>{"use strict";n.d(t,{et:()=>h,lX:()=>s,q7:()=>c,eZ:()=>d});var i=n(665),r=n(1106),o=n(3685);let a=null;const s=(e={})=>{if(!(0,r.r3)("showAuthorize",e,{apply:""}))return;const t=i.Z.accountInfo.nickname,n=i.Z.accountInfo.icon,s=JSON.stringify({nickname:t,icon:n,apply:e.apply,overlay:e.overlay}),c=(0,o.vJ)((e=>{[o.ML.BottomBackButton,o.ML.NavigationBackInterceptionType,o.ML.NavigateBackCall].includes(e.type)&&a&&(a.handleCancel(),a=null)}));__sclEngine__.initScl((t=>{a=t.mainRoot.append("authorize",{input:s}),a.addListener("confirm",(()=>{(0,o.J_)(c),(0,r.FE)({name:"showAuthorize",args:e})})),a.addListener("cancel",(()=>{(0,o.J_)(c),(0,r.YG)("showAuthorize",e,"cancel")}))}))};function c(e={}){__sclEngine__.initScl((t=>{t.mainRoot.append("game-ranklist",e)}))}var l=n(2913);let u=null;function d(e={},t){if(u)return t&&t(u);const{right:n,bottom:r}=(0,l.z)(),o=i.Z.screenWidth-n,a=r+36,s=JSON.stringify(e);__sclEngine__.initScl((e=>{u=e.mainRoot.append("verify-tip",{top:a,right:o,info:s}),u.addListener("destroy",(()=>{u=null})),t&&t(u)}))}function h(e={}){__sclEngine__.initScl((t=>{t.mainRoot.append("ad-skip-card",e)}))}},3685:(e,t,n)=>{"use strict";n.d(t,{ML:()=>u,vJ:()=>v,J_:()=>A});var i=n(3356),r=n.n(i),o=n(1503),a=n.n(o),s=n(2783),c=n(1106);const l=(0,n(2046).s)("navigateBackIntercept"),u={SlideBack:1,BottomBackButton:2,NavigationBarBack:3,NavigateBackCall:4},d=[u.SlideBack,u.BottomBackButton,u.NavigationBarBack,u.NavigateBackCall],h=[];let p=0;(0,c.jQ)("onNavigateBackIntercept",((e={})=>{const{id:t}=h[h.length-1]||{};l.emit(a()(a()({},e),{},{id:t})),(0,c.nY)("onNavigateBackIntercept",a()(a()({},e),{},{id:t}))}));const f=({scopes:e}={})=>{const t=new Set(e||[]),n={scopes:d.map((e=>({type:e,interception:t.has(e)})))};return(0,c.bb)("setNavigateBackInterception",n)},g=function(){var e=r()((function*(e={}){var t;e=a()(a()({},e),{},{scopes:null!==(t=e.scopes)&&void 0!==t?t:d}),yield f(e);const n=++p;return h.push({id:n,options:e}),{id:n}}));return function(){return e.apply(this,arguments)}}(),_=((0,s.NX)("setNavigateBackInterception",g),function(){var e=r()((function*({id:e}={}){const t=h.findIndex((t=>t.id===e));if(!(t<0)){if(t===h.length-1){let e;e=h.length>1?h[h.length-2].options:{scope:[]},yield f(e)}h.splice(t,1)}}));return function(){return e.apply(this,arguments)}}()),m=((0,s.NX)("stopNavigateBackInterception",_),l.internalOnMethod),y=l.internalOffMethod,v=function(){var e=r()((function*(e,t=d){const{id:n}=yield g({scopes:t}),i=t=>{t.id===n&&e(t)};return m(i),{id:n,handler:i}}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=r()((function*(e){const{id:t,handler:n}=(yield e)||{};yield _({id:t}),y(n)}));return function(t){return e.apply(this,arguments)}}()},9706:(e,t,n)=>{"use strict";n.d(t,{KN:()=>f});var i=n(1106);const r=[];let o=null,a=null,s=!1,c=[],l=!1,u="",d=0,h=0;const p=e=>{o=e;let t=!1,n=!0;e.deviceOrientation!==u&&(t=!0),e.size.windowWidth!==d&&(t=!0),e.size.windowHeight!==h&&(t=!0),(e=>{e.deviceOrientation&&(u=e.deviceOrientation),d=e.size.windowWidth,h=e.size.windowHeight})(e),e.pageOrientation&&(e.pageOrientation.setPageOrientation&&(l=!0),"auto"===e.pageOrientation.originalPageOrientation||l||(t=!1,n=!1)),"undefined"!=typeof __appServiceEngine__&&__appServiceEngine__.isFramesetMode()&&(n=!1),t&&(s=!0);const i=e.changedWebviewIds;n&&i&&i.forEach((e=>{c.indexOf(e)<0&&c.push(e)})),a||(a=setTimeout((()=>{a=null;const e=s;s=!1;const t=c;c=[];const n={deviceOrientation:o.deviceOrientation,size:o.size};e&&r.forEach((e=>{__errorTracer__.surroundThirdByTryCatch(e,"at onWindowResize callback function")(n)})),t.forEach((e=>{const t="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getPageByWebviewId(e):null;t&&__errorTracer__.surroundThirdByTryCatch((()=>{t.__callPageLifeTime__("onResize",n)}),"at Resize callback function")()}))}),16))};(0,i.jQ)("onViewDidResize",(e=>{p(e)}));const f=e=>{r.push(e)}},9482:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w,r:()=>E});var i=n(9345),r=n(891),o=n(665),a=n(5274),s=n(1106);const c=new WeakMap,l=new WeakMap,u=new WeakMap,d={},h={},p={},f=new WeakMap,g=new WeakMap;let _=0;const m={};function y(e,t,n=++_){return p[e]?(m[e]||(m[e]=[]),m[e].push({id:n,callback:t})):(p[e]=n,t()),n}function v(e,t){if(p[e]===t&&(delete p[e],m[e]&&m[e].length)){const{id:t,callback:n}=m[e].shift();y(e,n,t)}}if(!r._w.new){let e=0;Object.assign(r._w,{new(t){const n=++e;return h[n]=t,Object.keys(d).forEach((e=>{const i=c.get(d[e]);__safeway__.worker.postMsgToWorker(i,{__cmd__:"setSharedBuffer",__buffer__:t,__id__:n},!1)})),n},get:e=>h[e],destroy(e){delete h[e]},Lock:y,Unlock:v})}__safeway__.worker.onWorkerMsg(((e,t)=>{const n=d[e],i=l.get(n),o=g.get(n);if(t.__log__&&t.logs)(s=t).__isNativeConsole__?wxNativeConsole[s.level](...s.logs):console[s.level](...s.logs);else{var s;if("setSharedBuffer"===t.__cmd__)return h[t.__id__]=t.__buffer__,void Object.keys(d).forEach((n=>{const i=c.get(d[n]);i!==e&&__safeway__.worker.postMsgToWorker(i,t,!1)}));if("lockSharedBuffer"!==t.__cmd__)if("unlockSharedBuffer"!==t.__cmd__){if(n&&"function"==typeof i)if(o&&o.useWKWorker){if("requireScriptSuccess"===t.__cmd__){const e=f.get(n);return void(e&&e.evaluateWorkerScriptPromiseResolve&&e.evaluateWorkerScriptPromiseResolve())}if("readFile"===t.__cmd__)return void a.t2.readFile({filePath:t.filePath,success:({data:n})=>__safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,result:String.fromCharCode(...new Uint16Array(n))}),fail:({errMsg:n})=>__safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,errMsg:n})});i(t.data)}else i((0,r.IF)(t))}else v(t.__sid__,t.__lid__);else y(t.__sid__,(()=>n.postMessage(t)),t.__lid__)}}));const A=function(e,t){this.postMessage({__cmd__:"requireScript",__script__:e,__id__:c.get(this),__options__:t})},b=function(){let e;const t=new Promise((t=>{e=t}));f.set(this,{evaluateWorkerScriptPromise:t,evaluateWorkerScriptPromiseResolve:e})};class w{constructor(e,t,n={useWKWorker:!1,contextType:"",pluginId:""}){c.set(this,e),g.set(this,n),d[e]=this,this._id=e,n.useWKWorker?b.call(this):A.call(this,t,{pluginId:n.pluginId}),i.Z.add(this,n.contextType)}postMessage(e){const t=c.get(this),n=f.get(this),i=g.get(this);i&&i.useWKWorker&&n?n.evaluateWorkerScriptPromise.then((()=>{__safeway__.worker.postMsgToWorker(t,{data:e,appid:o.Z.accountInfo.appId})})):__safeway__.worker.postMsgToWorker(t,e)}onMessage(e){l.set(this,e)}terminate(){const e=c.get(this),t=g.get(this);t&&t.useWKWorker?__safeway__.worker.postMsgToWorker(e,{__cmd__:"terminate",appid:o.Z.accountInfo.appId}):__safeway__.worker.terminate(e),i.Z.remove(this),c.delete(this),l.delete(this),f.delete(this),u.delete(this),g.delete(this),delete d[e]}onProcessKilled(e){u.set(this,e)}}(0,s.jQ)("onWorkerWebViewTerminate",(()=>{Object.keys(d).forEach((e=>{const t=d[e],n=g.get(t);if(n&&n.useWKWorker){const n=u.get(t);i.Z.remove(t),c.delete(t),l.delete(t),f.delete(t),u.delete(t),g.delete(t),delete d[e],"function"==typeof n&&__errorTracer__.surroundThirdByTryCatch(n,"at Worker.onProcessKilled callback function")(),Reporter.reportIDKey({key:"onWorkerWebViewTerminate"})}}))}));const E=e=>{if(e._id>=0&&d[e._id])return e._id}},9345:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,d:()=>o});const i=new Set,r=new WeakMap,o={service:"service",plugin:"plugin"},a={[o.service]:0,[o.plugin]:0},s={add(e,t){i.add(e),r.set(e,t),a[t]++},remove(e){const t=r.get(e);i.delete(e)&&(r.delete(e),a[t]--)},get size(){return i.size},getSizeByType:e=>a[e]}},7188:(e,t,n)=>{"use strict";n.d(t,{g4:()=>y,V8:()=>b});var i=n(665),r=n(7452),o=n(2851),a=n(1106),s=n(7646),c=n(2582);const l=0,u=1,d=2,h=1,p=2,f=3,g=4,_=wxNativeConsole.createLogger("BanForPage");let m=!1,y=new Set(["shareAppMessage","shareAppMessageDirectly","requestPayment","setClipboardData","getClipboardData","getLocation","getPhoneNumber","navigateToMiniProgram","navigateBackMiniProgram"]),v=[];function A(e,t,n){_.log(`[checkAPIAvailableForPage] APIName=${e}, path=${t}, title=${n}`);const i=function(e,t,n){let i=-1;for(let e=0;e<v.length;e++){const o=v[e];if((!(0,r.HD)(o.path_rule)||!o.path_rule||new RegExp(o.path_rule).test(t))&&(!(0,r.HD)(o.title_rule)||!o.title_rule||new RegExp(o.title_rule).test(n))){i=e;break}}return _.log(`[getBanRuleIndexForPage] banRuleIndex=${i}`),i}(0,t,n);if(-1===i)return w(e,h,g,e),!0;const o=v[i];return _.log("[checkAPIAvailableForPage], found rule:",o),function(e,t){const n=e.ban_jsapi_list.find((e=>e.jsapi_name===t));if(!n)return _.log("[checkAPIAvailableForPageByRule], no APIItem found"),!0;let i,r;if(_.log("[checkAPIAvailableForPageByRule], found APIItem:",n),n.state===l)i=!1;else if(n.state===u)i=!0;else if(n.state===d&&(i=!0,1===e.is_valid)){const e=n.toast_wording||"该功能暂时无法使用";(0,a.be)("showToast",{title:e,icon:"none"})}return r=i?e.is_valid?p:f:h,w(t,r,g,t),1!==e.is_valid||!i}(o,e)}function b(e){const t=Object.keys(o.Z.query).reduce(((e,t)=>[...e,`${t}=${o.Z.query[t]}`]),[]).join("&"),n=o.Z.lastRoute+(t?`?${t}`:""),i=o.Z.navigationBarTitleMap[o.Z.lastRoute]||"";return _.log(`[checkAPIAvailableForCurrentPage] APIName=${e}, path=${n}, title=${i}`),A(e,n,i)}function w(e,t,n,r="",a=""){if(_.log(`[reportAPIBanForPage] APIName=${e}, blockType=${t}, checkScene=${n}, extraInfo=${r}, needReport=${m}`),!m)return;const{appLaunchInfo:c}=i.Z,l=Object.keys(o.Z.query).map((e=>`${e}=${o.Z.query[e]}`)).join("&"),u={session_id:c.sessionid||c.sessionId,cur_path:o.Z.lastRoute+(l?`?${l}`:""),title:o.Z.navigationBarTitleMap[o.Z.lastRoute],check_scene:n,block_status:t,extra_info:r,launch_scene:c.scene,launch_path:c.path,target_path:a};_.log("[reportAPIBanForPage], reqData:",u),(0,s.JM)({reqData:u,apiName:"webapi_reportnvgcheckinfo",complete(e){_.log(`[reportAPIBanForPage], res.errMsg=${e.errMsg}`)}})}i.Z.onReady((()=>{if(!c.gm)try{const{do_report:e,navigate_ban_rule_list:t}=i.Z.appContactInfo.operationInfo.jsonInfo.navigate_ban_info;v=t,m=1===e,y=new Set(t.reduce(((e,t)=>[...e,...t.ban_jsapi_list]),y)),_.log(`[BanForPage][init] needReport=${m}`),_.log("[BanForPage][init] ruleList:",v),_.log("[BanForPage][init] banAPISet:",y)}catch(e){_.error(`[BanForPage][init] fail, errMsg=${e.message}`)}}))},6947:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="undefined"!=typeof NativeGlobal?NativeGlobal:{}},891:(e,t,n)=>{"use strict";n.d(t,{_w:()=>h,Y2:()=>f,IF:()=>g});var i=n(7452),r=n(5260);const o="function"==typeof wxNativeConsole?wxNativeConsole.createLogger("SharedArrayBuffer"):wxConsole,a=0,s=1,c=2,l=new WeakMap,u=new Map;let d=ArrayBuffer;const h="undefined"==typeof WeixinSharedBuffer?{}:WeixinSharedBuffer;"undefined"==typeof WeixinSharedBuffer&&("undefined"!=typeof __global?d=__global.SharedArrayBuffer:n.g.SharedArrayBuffer&&(d=n.g.SharedArrayBuffer));class p{constructor(e,t){if(o.log(`constructor length=${e}, sabId=${t}`),!(0,i.hj)(e)||e<0)throw new r.iZ(`Invalid array buffer length ${e}`);if((0,i.hj)(t)){let e;o.info(`get buffer with sabId: ${t}`);try{e=h.get(t)}catch(e){throw o.error(`WeixinSharedBuffer.get${t} fail: ${e.message}`),new Error(`WeixinSharedBuffer.get${t} fail: ${e.message}`)}Object.defineProperty(this,"buffer",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(this,"_sabId",{value:t,enumerable:!0,writable:!1})}else{o.info(`new ArrayBuffer with length: ${e}`),Object.defineProperty(this,"buffer",{value:new d(e),writable:!1,enumerable:!0});const t=h.new(this.buffer);o.info(`sabId: ${t}`),Object.defineProperty(this,"_sabId",{value:t,enumerable:!0,writable:!1})}const n={writeStatus:a,readStatus:a,writeLockCallbacks:[],readLockCallbacks:[],writeLockId:void 0,readLockId:void 0,destroyed:!1};l.set(this,n),u.set(this._sabId,this),o.log(`[${this._sabId}] created:`,this.buffer)}destroy(){o.warn(`[${this._sabId}][destroy()]`);const e=l.get(this);e.writeLockCallbacks=[],e.readLockCallbacks=[],u.delete(this._sabId),l.get(this).destroyed=!0,this.unlock(),h.destroy(this._sabId)}lock(e,t=!1){const n=l.get(this),{destroyed:o,writeStatus:a,readStatus:u,writeLockCallbacks:d,readLockCallbacks:p}=n;if(o)throw new r.iZ("SharedArrayBuffer has been destroyed");if(!(0,i.mf)(e))throw new r.iZ("callback must be a function");a!==c?(d.push(e),a===s||(n.writeStatus=s,n.writeLockId=h.Lock(this._sabId,(()=>{d.forEach((e=>e())),p.forEach((e=>e())),n.writeStatus=c,n.writeLockCallbacks=[],n.readLockCallbacks=[]})))):e()}unlock(){const e=l.get(this),{writeLockId:t,readLockId:n,writeStatus:i,readStatus:r,destroyed:o}=e;o?console.warn("unlock: SharedArrayBuffer has been destroyed"):(i!==s&&i!==c||(h.Unlock(this._sabId,t),e.writeStatus=a,e.writeLockId=void 0,e.writeLockCallbacks=[]),r!==s&&r!==c||(h.Unlock(this._sabId,n),e.readStatus=a,e.readLockId=void 0,e.readLockCallbacks=[]))}}const f=e=>new p(e),g=e=>{return o.log("[unpackSharedArrayBuffer]",e),(0,i.Kn)(e)?(o.log("[unpackSharedArrayBuffer] isObject"),(0,i.hj)(e._sabId)?(o.info("[unpackSharedArrayBuffer] sabId is number"),t=e._sabId,o.info(`[getSharedArrayBuffer] sabId=${t}`),u.has(t)?(o.info("[getSharedArrayBuffer] return existed object"),u.get(t)):(o.info("[getSharedArrayBuffer] return new object"),new p(0,t))):Object.keys(e).reduce(((t,n)=>{const i=e[n];return t[n]=g(i),t}),{})):(0,i.kJ)(e)?e.map(g):e;var t}},665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=__wxConfig},5542:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const i=n.g.WeixinArrayBuffer;delete n.g.WeixinArrayBuffer;const r=i},6077:(e,t,n)=>{"use strict";n.d(t,{X:()=>C,T:()=>I});var i=n(665),r=n(2999),o=n(6998),a=n(7452);let s=0,c="",l="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",u="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function d(){if("undefined"==typeof __appServiceEngine__)return"";const e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}(0,a.HD)(l)&&(l=l.replace(" ","")),(0,a.HD)(u)&&(u=u.replace(" ","-")),i.Z.onReady((()=>{s=i.Z.appLaunchInfo.scene,c=i.Z.appLaunchInfo.sessionid||i.Z.appLaunchInfo.sessionId,(0,r.n)("onAppEnterForeground",(e=>{e&&e.scene&&(s=e.scene),e&&(e.sessionid||e.sessionId)&&(c=e.sessionid||e.sessionId)}))}));const h=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","getBox2D","createSharedArrayBuffer","nv_constructor","nv_toString"],p=["chooseMedia","chooseVideo","compressVideo","createCameraContext","stopRecord"],f=new WeakSet,g=[];function _(){return 1e4*Date.now()+Math.round(9999*Math.random())}function m(e,t,n){const i=Object.getOwnPropertyDescriptor(e,t);return!i.get&&(!!i.writable&&(!(!t||"_"===t[0])&&(!h.includes(t)&&(!(n&&!p.includes(t))&&!!(0,a.mf)(e[t])))))}function y(e,...t){(0,a.mf)(e)&&e(...t)}function v(e,t=!0){const n=(0,a.Em)(e);switch(n){case"Number":case"Boolean":return e;case"String":return A(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return`[Error:${v(e.message)}|${v(e.stack)}]`;case"Object":return t?Object.keys(e).map((t=>`${v(t)}=${v(e[t],!1)}`)).sort(((e,t)=>e.length-t.length)).join("&")||"{}":`[${n}]`;default:return`[${n}]`}}function A(e){return t=>(0,a.HD)(t)&&t.length>e?t.substr(0,e):t}function b(e,t,n,r,o,a,h,p,f,_){let m=0;g.forEach((({match:t,version:n})=>{"string"==typeof t?e===t&&(m=n):t instanceof RegExp&&t.test(e)&&(m=n)})),"connectWifi"===e&&(n="");const y=[e,t,v(n),r,o,Date.now()-o,a,h,v(p),i.Z.appType+1e3,s,l,u,m,f,d(),c].map(A(1024)).join(",");_||1!==h||(Reporter.reportIDKey({key:"asyncApiCount"}),Reporter.reportIDKey({key:"asyncApiCost",value:Date.now()-o})),Reporter.reportKeyValue({key:_?"WeAppInvoke2":"WeAppInvoke",value:y})}const w=Map,E=Math.random;function T(e,t,n,i,r,s=!1){if(!(0,a.Kn)(t))return;const c=new w;for(const e of Object.getOwnPropertyNames(t))m(t,e,s)&&c.set(e,t[e]);const l=Object.getPrototypeOf(t);for(const e of Object.getOwnPropertyNames(l))m(l,e,s)&&c.set(e,l[e]);c.forEach(((c,l)=>{t[l]=function(u,...d){const h=`${e}${l}`;if(E()>i){const e=c.call(t,u,...d);return n&&(0,a.Kn)(e)&&!f.has(e)&&(T(`${h}.`,e,!1,i,r,s),f.add(e)),e}const p=(0,o._getCurrentNetworkType)(),g=Date.now(),m=_();try{const e=c.call(t,(0,a.Kn)(u)&&("success"in u||"fail"in u||"complete"in u)?Object.assign({},u,{success:e=>{b(h,m,u,1,g,p,1,e,r,s),y(u.success,e)},fail:e=>{b(h,m,u,0,g,p,1,e,r,s),y(u.fail,e)}}):u,...d);return b(h,m,u,null===e?0:1,g,p,0,e,r,s),n&&(0,a.Kn)(e)&&!f.has(e)&&(T(`${h}.`,e,!1,i,r,s),f.add(e)),e}catch(e){throw b(h,m,u,0,g,p,0,e,r,s),e}}}))}let S=!1;function C(e,t=0){T("",e,!0,.05,t),T("",e,!0,1,t,!0),T("cloud.",e.cloud,!0,.05,t),function(e){if(!e.createCanvas)return;const t=e.createCanvas;e.createCanvas=()=>{const n=t.call(e);if(n&&n.getContext){const e=n.getContext;n.getContext=(...t)=>{const i=e.call(n,...t);if(i&&i.compressedTexImage2D){const e=i.compressedTexImage2D;i.compressedTexImage2D=(...t)=>{S||(S=!0,b("WebGLRenderingContext.compressedTexImage2D",_(),{},1,Date.now(),(0,o._getCurrentNetworkType)(),0,void 0)),e.call(i,...t)}}return i}}return n}}(e)}function I(e,t){g.push({match:e,version:t})}},5014:(e,t,n)=>{"use strict";n.d(t,{J:()=>c});var i=n(1106),r=n(7452),o=n(665);const a={requestVirtualPayment:285,setCookies:502,getCookies:503,UDP:606,launchApplicationDirectly:620,screenCanvasReadPixels:631,navigateToMiniProgramDirectly:632,openDataContextExtension:638,batchGetContactDirectly:676,launchApp:692,sendBizRedPacketForOpen:694,openWxappLimit5:720,shareCallback:740,WeAppWorker:775,listenFrameChangeInWorker:776,requestSubscribeWhatsNew:782,getGroupToolbarInfo:803,requestMidasFriendPayment:804,createWebView:805,authShareRelationship:852,uploadToCommonCDN:878,quicklyAddBrandContact:879,engineOpenData:894,preloadMiniProgramEnvDirectly:900,predownloadMiniProgramPackageDirectly:901,addPhoneCalendar:912,addPhoneRepeatCalendar:913,privateScanItem:917,shareDataToWeRun:926,handoff:931,bindingDownload:972,bindingReadFile:973,bindingWebSocket:974,openH5GameClub:975,showShareImageMenu:978,plugin_launchApplicationDirectly_operateDirectly:1009,privateSearchContacts:1024,private_setNavigateBackInterception:1020,private_stopNavigateBackInterception:1021,TCP:1025,TCPServer:1026,inputTypeSafePassword:1027,startGameLiveDirectly:1045,getUserRecentGameLiveInfo:1049,private_getWebviewDebugInfo:1051,showRedPackage:1052},s={};o.Z.onReady((()=>{const e=Object.keys(a).map((e=>a[e]));(0,i.IN)("getPermissionBytes",{indexes:e,success(t){if(t.permissionBytes)for(let n=0;n<t.permissionBytes.length;n++){const i=e[n];s[i]=1===t.permissionBytes[n]}},fail(e){}})}));const c=e=>{const t=a[e];if("number"!=typeof t)return!1;if(!(0,r.o8)(s[t]))return s[t];let n=!1;return(0,i.IN)("getPermissionBytes",{indexes:[t],success(e){e.permissionBytes&&(n=1===e.permissionBytes[0],s[t]=n)}}),n}},2184:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});var i=n(7452);class r{constructor(e="",t=!1){this.type="",this.surround=!1,this.eventMap=new Map,this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap,this.type=e,this.surround=t}on(e,t){if(!(0,i.mf)(t))return void console.error("emitter.on fail: callback must be a function");let n=t;var r,o;this.surround&&(r=t,o=`at ${this.type}${e} callback function`,n=void 0!==__errorTracer__?__errorTracer__.surroundThirdByTryCatch(r,o):void 0!==__subContextEngine__?__subContextEngine__.surroundThirdByTryCatch(r,o):(...e)=>{try{return r(...e)}catch(e){return void console.error(`thirdScriptError\n${e.message};${o}\n`,e)}},this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t)),this.eventMap.has(e)?this.eventMap.get(e).add(n):this.eventMap.set(e,new Set([n]))}off(e,t){const n=this.eventMap.get(e);if(n)if("function"!=typeof t)n.forEach((e=>{const t=this.originalCallbackMap.get(e);this.callbackMap.delete(t),this.originalCallbackMap.delete(e)})),n.clear();else if(this.surround){const e=this.callbackMap.get(t);n.delete(e),this.callbackMap.delete(t),this.originalCallbackMap.delete(e)}else n.delete(t)}emit(e,...t){if(this.eventMap.has(e)){new Set(this.eventMap.get(e)).forEach((e=>e(...t)))}}removeAllListeners(e){this.off(e)}getListenersLength(e){const t=this.eventMap.get(e);return t?t.size:0}}},2582:(e,t,n)=>{"use strict";n.d(t,{iw:()=>r,gm:()=>o,wZ:()=>a,cj:()=>s,qB:()=>c,Mq:()=>l,Ae:()=>u,DD:()=>d,Dq:()=>h,jP:()=>f});var i=n(665);const r=i.Z.platform,o="devtools"===i.Z.platform,a="android"===i.Z.platform,s="ios"===i.Z.platform,c="windows"===i.Z.platform,l="mac"===i.Z.platform,u="mina"===i.Z.platform,d=c||l;function h(){if(i.Z&&"debug"in i.Z&&void 0!==i.Z.debug)return!!i.Z.debug}const p=i.Z.host||{},f=(p.env,p.env,p.env,p.forceUseNativeMap,"object"==typeof window&&window&&window.__wkrenderer_h5)},2046:(e,t,n)=>{"use strict";n.d(t,{s:()=>s});var i=n(8159);const r=new i.Z({maxListeners:20,newListener:!1}),o=new i.Z({maxListeners:20,newListener:!1});const a={};function s(e){if(e=e[0].toUpperCase()+e.slice(1),!a[e]){let t=new WeakMap;a[e]={getGlobalListeners:()=>r.listeners(e),getInternalListeners:()=>o.listeners(e),emit:(...t)=>{o.emit(e,...t),r.emit(e,...t)},emitGlobal:(...t)=>{r.emit(e,...t)},emitInternal:(...t)=>{o.emit(e,...t)},internalOnMethod:(t,n={})=>{"function"==typeof t&&(n.prepend?n.once?o.prependOnceListener(e,t):o.prependListener(e,t):n.once?o.once(e,t):o.on(e,t))},internalOffMethod:t=>{"function"==typeof t&&o.off(e,t)},onMethod:n=>{const i=function(e,t){return"function"!=typeof t?(console.error(`on${e} should accept a function instead of ${typeof t}`),null):__errorTracer__.surroundThirdByTryCatch(t,`at api on${e} callback function`)}(e,n);i&&(t.set(n,i),r.on(e,i))},offMethod:n=>{if(function(e,t){return!t||"function"==typeof t||(console.error(`off${e} should accept a function instead of ${typeof t}`),!1)}(e,n))if(n){if(t.has(n)){const i=t.get(n);t.delete(n),r.off(e,i)}}else t=new WeakMap,r.removeAllListeners(e)}}}return a[e]}},8159:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,y:()=>s});var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function r(){this._events={},this._conf&&o.call(this,this._conf)}function o(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=void 0!==e.maxListeners?e.maxListeners:20,e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener)):this._maxListeners=20}function a(e,t){console.warn(`[Event] ${e} listeners of event ${t} have been added, possibly causing memory leak.`)}function s(e){this._events={},this._newListener=!1,this._removeListener=!1,o.call(this,e)}s.prototype.delimiter=".",s.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},s.prototype.event="",s.prototype.once=function(e,t){return this._once(e,t,!1)},s.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},s.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},s.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},s.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},s.prototype._many=function(e,t,n,i){var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&r.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,i),r},s.prototype.emit=function(){this._events||r.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,i,o,a,s=arguments.length;if(this._all&&this._all.length){if(a=this._all.slice(),s>3)for(t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];for(i=0,n=a.length;i<n;i++)switch(this.event=e,s){case 1:a[i].call(this,e);break;case 2:a[i].call(this,e,arguments[1]);break;case 3:a[i].call(this,e,arguments[1],arguments[2]);break;default:a[i].apply(this,t)}}if("function"==typeof(a=this._events[e])){switch(this.event=e,s){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),o=1;o<s;o++)t[o-1]=arguments[o];a.apply(this,t)}return!0}if(a&&(a=a.slice()),a&&a.length){if(s>3)for(t=new Array(s-1),o=1;o<s;o++)t[o-1]=arguments[o];for(i=0,n=a.length;i<n;i++)switch(this.event=e,s){case 1:a[i].call(this);break;case 2:a[i].call(this,arguments[1]);break;case 3:a[i].call(this,arguments[1],arguments[2]);break;default:a[i].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},s.prototype.emitAsync=function(){this._events||r.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,i,o,a,s=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),o=1;o<c;o++)t[o]=arguments[o];for(i=0,n=this._all.length;i<n;i++)switch(this.event=e,c){case 1:s.push(this._all[i].call(this,e));break;case 2:s.push(this._all[i].call(this,e,arguments[1]));break;case 3:s.push(this._all[i].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[i].apply(this,t))}}if("function"==typeof(a=this._events[e]))switch(this.event=e,c){case 1:s.push(a.call(this));break;case 2:s.push(a.call(this,arguments[1]));break;case 3:s.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];s.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),c>3)for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];for(i=0,n=a.length;i<n;i++)switch(this.event=e,c){case 1:s.push(a[i].call(this));break;case 2:s.push(a[i].call(this,arguments[1]));break;case 3:s.push(a[i].call(this,arguments[1],arguments[2]));break;default:s.push(a[i].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},s.prototype.on=function(e,t){return this._on(e,t,!1)},s.prototype.prependListener=function(e,t){return this._on(e,t,!0)},s.prototype.onAny=function(e){return this._onAny(e,!1)},s.prototype.prependAny=function(e){return this._onAny(e,!0)},s.prototype.addListener=s.prototype.on,s.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},s.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||r.call(this),this._newListener&&this.emit("newListener",e,t),this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,a.call(this,this._events[e].length,e))):this._events[e]=t,this},s.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n});for(var o=0;o<r.length;o++){if(n=r[o]._listeners,i(n)){for(var a=-1,s=0,c=n.length;s<c;s++)if(n[s]===t||n[s].listener&&n[s].listener===t||n[s]._origin&&n[s]._origin===t){a=s;break}if(a<0)continue;return this._events[e].splice(a,1),0===n.length&&delete this._events[e],this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var n=Object.keys(t);for(var i in n){var r=n[i],o=t[r];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&e(t[r]),0===Object.keys(o).length&&delete t[r])}}}(this.listenerTree),this},s.prototype.offAny=function(e){var t,n=0,i=0;if(e&&this._all&&this._all.length>0){for(n=0,i=(t=this._all).length;n<i;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,i=t.length;n<i;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(e){return void 0===e?(!this._events||r.call(this),this):(this._events&&(this._events[e]=null),this)},s.prototype.listeners=function(e){return this._events||r.call(this),this._events[e]||(this._events[e]=[]),i(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},s.prototype.eventNames=function(){return Object.keys(this._events)},s.prototype.listenerCount=function(e){return this.listeners(e).length},s.prototype.listenersAny=function(){return this._all?this._all:[]};const c=s},1661:(e,t,n)=>{"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.d(t,{n:()=>i})},946:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});class i{constructor(e){if(this._status="pending",this._return=void 0,this._processors=[],"function"!=typeof e)throw new TypeError("Promise resolver is not a function");try{e((e=>{"pending"===this._status&&(this._status="then",this._return=e,this._consume())}),(e=>{"pending"===this._status&&(this._status="catch",this._return=e,this._consume())}))}catch(e){this._status="catch",this._return=e,this._consume()}}_consume(){if("pending"===this._status)return;let e;do{e=this._processors.shift()}while(e&&e.type!==this._status);if(e)try{this._return=e.func(this._return),this._status="then"}catch(e){this._return=e,this._status="catch"}finally{this._consume()}}then(e){return this._processors.push({func:e,type:"then"}),this._consume(),this}catch(e){return this._processors.push({func:e,type:"catch"}),this._consume(),this}static resolve(e){return new i((t=>t(e)))}static reject(e){return new i((()=>{throw e}))}}},7452:(e,t,n)=>{"use strict";n.d(t,{Em:()=>r,HD:()=>o,hj:()=>a,jn:()=>s,o8:()=>c,Ft:()=>l,i2:()=>u,AT:()=>h,U:()=>p,Kn:()=>f,s$:()=>g,kJ:()=>_,mf:()=>m,eP:()=>y,fU:()=>v,x7:()=>A,e6:()=>b});const i=Object.prototype.toString;function r(e){return i.call(e).slice(8,-1)}const o=e=>"String"===r(e),a=e=>"Number"===r(e),s=e=>!0===e||!1===e||"Boolean"===r(e),c=e=>void 0===e,l=e=>null===e,u=Number.isNaN||(e=>e!=e),d=Number.isFinite||(e=>a(e)&&n.g.isFinite(e)),h=e=>a(e)&&Math.abs(e)===1/0,p=e=>d(e)&&Math.floor(e)===e,f=e=>"Object"===r(e),g=e=>f(e)&&!l(e),_=Array.isArray||(e=>"Array"===r(e)),m=e=>"function"==typeof e,y=e=>"ArrayBuffer"===r(e),v=e=>ArrayBuffer.isView(e)&&!(e=>"DataView"===r(e))(e);function A(e,t,n="parameter"){const i=r(t),o=r(e);if(o!==i)return`${n} should be ${i} instead of ${o};`;let a="";switch(i){case"Object":Object.keys(t).forEach((i=>{a+=A(e[i],t[i],`${n}.${i}`)}));break;case"Array":if(e.length<t.length)return`${n} should have at least ${t.length} item;`;for(let i=0;i<t.length;++i)a+=A(e[i],t[i],`${n}[${i}]`)}return a}function b(e){try{return JSON.stringify(e)}catch(e){return e.message,""}}},2783:(e,t,n)=>{"use strict";n.d(t,{M8:()=>h,Hw:()=>p,ZT:()=>f,op:()=>g,Yt:()=>_,gA:()=>m,Qu:()=>y,Vl:()=>A,NX:()=>b});var i=n(3451),r=n.n(i),o=n(1503),a=n.n(o),s=n(7452),c=n(1106);const l=["errMsg"],u=["errMsg"],d=["success","fail","complete"];function h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function p(e,t){return function(...n){try{return e(...n)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:t})}}}}function f(){}const g=p((function(e){const t=(0,s.Em)(e);if("Array"===t||"Object"===t)try{e=JSON.stringify(e)}catch(e){throw e.type="AppServiceSdkKnownError",e}else e="String"===t||"Number"===t||"Boolean"===t?e.toString():"Date"===t?e.getTime().toString():"Undefined"===t?"undefined":"Null"===t?"null":"";return{data:e,dataType:t}}),"anyTypeToString");const _=p((function(e,t){return"String"===t?e:e="Array"===t||"Object"===t?JSON.parse(e):"Number"===t?parseFloat(e):"Boolean"===t?"true"===e:"Date"===t?new Date(parseInt(e,10)):"Undefined"===t?void 0:"Null"===t?null:""}),"stringToAnyType");function m(e){return function(t={},...n){t=t||{};const{success:i,fail:r,complete:o}=t;return i||r||o?e.apply(this,[t,...n]):new Promise(((i,r)=>{const o=Object.assign({success:i,fail:r},t);e.apply(this,[o,...n])}))}}function y(e,t,n){const i=m(n.value);return n.value=function(){return i.apply(this,arguments)},n}const v=Symbol("ErrorInfosSymbol");Error;const A=e=>(t={},...n)=>new Promise(((i,o)=>e(a()(a()({},t),{},{success:i,fail:e=>{const{errMsg:t}=e,n=r()(e,l),i=new Error(t.replace(/^\w+:fail ?/,""));Object.assign(i,n),i[v]=n,o(i)},complete:(e={})=>{const{errMsg:t}=e,n=r()(e,u);if(t&&!/^\w+:(ok|fail)/.test(t)){const t=new Error(e.errMsg.replace(/^\w+:/,""));Object.assign(t,n),t[v]=n,t._complete_hook=!0,o(t)}}}),...n))),b=(e,t)=>(n={},...i)=>{let{success:o,fail:a,complete:s}=n,l=r()(n,d);const u={success:o,fail:a,complete:s};t(l,...i).then((t=>(0,c.FE)({name:e,args:u,success:!0,res:t})),(t=>{t._complete_hook?(0,c.S3)({name:e,args:u,errMsg:t.message,res:t[v]||{}}):(0,c.FE)({name:e,args:u,success:!1,errMsg:t.message,res:t[v]||{}})}))}},7848:(e,t,n)=>{"use strict";n.d(t,{pO:()=>c,f$:()=>l});var i=n(7452);const r={String:0,NaN:"<NaN>",Infinity:e=>e>0?"<Infinity>":"<-Infinity>",Number:0,Boolean:0,Null:0,Undefined:"<Undefined>",Function:e=>""===e.name?"<Function>":`<Function: ${e.name}>`,Date:e=>`<Date: ${e.toJSON()}>`,RegExp:e=>`<RegExp: ${e.toString()}>`,Error:e=>`<${e.name}: ${e.message}>`,Symbol:e=>`<Symbol: ${e.toString()}>`,Promise:"<Promise>",Map:e=>`<Map: size=${e.size}>`,WeakMap:"<WeakMap>",Set:e=>`<Set: size=${e.size}>`,WeakSet:"<WeakSet>",ArrayBuffer:e=>`<ArrayBuffer: byteLength=${e.byteLength}>`,DataView:e=>`<DataView: byteLength=${e.byteLength}, byteOffset=${e.byteOffset}>`,TypedArray:e=>`<${e.constructor&&e.constructor.name?e.constructor.name:"TypedArray"}: byteLength=${e.byteLength}, length=${e.length}>`};function o(e){const t=function(e){const t=(0,i.Em)(e);if("Number"===t){if((0,i.i2)(e))return"NaN";if((0,i.AT)(e))return"Infinity"}else if("Object"===t){if((0,i.Ft)(e))return"Null"}else if(t.endsWith("Array")&&"Array"!==t&&(0,i.fU)(e))return"TypedArray";return t}(e);return t in r?r[t]?(0,i.mf)(r[t])?[r[t](e),!0]:[r[t],!0]:[e,!0]:[null,!1]}function a(e){const t=new WeakMap;let n=0;return function e(r,a){let s;const[c,l]=o(r);return l?c:n>3e3?"<Hidden>":t.has(r)?`<Circular: ${t.get(r)}>`:(t.set(r,a),n++,(0,i.kJ)(r)?r.map(((t,n)=>e(t,`${a}[${n}]`))):(s={},Object.keys(r).forEach((t=>{s[t]=e(r[t],`${a}.${t}`)})),s))}(e,"@")}function s(e){try{return(e=Array.prototype.slice.call(e)).map(a)}catch(e){return void console.warn("[console] This object can not be logged")}}const c={LOG:0,INFO:1,WARNING:2,ERROR:3,DEBUG:4,TIME:5,TIME_END:5};function l(e,t,n=!0){if(n||e===c.WARNING||e===c.ERROR)try{const i=s(t);if(void 0===i)return;const r=JSON.stringify({level:e,logs:i});return r.length>1048576&&!n||r.length>2097152&&n?JSON.stringify({level:e,logs:["<LOG_EXCEED_MAX_LENGTH>"]}):r}catch(e){return void console.warn("[console] This object can not be logged")}}},5287:(e,t,n)=>{"use strict";n.d(t,{I:()=>l});var i=n(2999),r=n(665),o=n(2815),a=n(6602);let s="";const c=(e={})=>{try{s=e.transitExtraData.adUxInfo}catch(e){s=""}};void 0!==__safeway__&&(r.Z.onReady((()=>{c(r.Z.appLaunchInfo)})),(0,i.n)("onAppEnterForeground",(e=>{c(e)})),(0,i.n)("onAppEnterBackground",((e={})=>{"back"!==e.mode&&"close"!==e.mode||(s="")})),(0,a.L)("getAdUxInfo",((e,t)=>{(0,o.n)("adUxInfoGot",{adUxInfo:s,callbackId:e.callbackId},[t])})));const l=()=>s},2642:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var i=n(5287);function r(e,t,n,r){"navigateToMiniProgram"!==e&&"openUrl"!==e&&"private_openUrl"!==e||(t.adUxInfo=t.adUxInfo||(0,i.I)()),__safeway__.bridge.invoke(e,t,n,r)}},1532:(e,t,n)=>{"use strict";n.d(t,{be:()=>S,F0:()=>y,IN:()=>b,bb:()=>w,qu:()=>E,oQ:()=>A});var i=n(2642),r=n(1106);let o={},a={},s={},c=0;const l=(e,t)=>Object.keys(t).map((n=>Object.keys(t[n]).map((i=>({func:n,result:e,errMsg:i,count:t[n][i]}))))),u=()=>{const e=l(1,o),t=l(2,a),n=l(3,s),i=[].concat(e,t,n);0!==i.length&&(0,r.IN)("reportRealtimeAction",{actionData:JSON.stringify({business:"mmbizwxajsapi",dataType:1,dataArray:i,appType:Reporter.getAppType()})}),o={},a={},s={}};var d=n(2783),h=n(7188),p=n(665),f=n(7452),g=n(4915),_=n(2582);const m=["open","openSync","close","closeSync","fstat","fstatSync","write","writeSync","read","readSync","truncate","truncateSync","ftruncate","ftruncateSync"];function y(e,t,n,i){e.errMsg=e.errMsg||`${t}:ok`;const r=0===e.errMsg.indexOf(`${t}:ok`),l=new RegExp(`${t}:(fail |fail:)?cancel`).test(e.errMsg),d=0===e.errMsg.indexOf(`${t}:fail`);"function"==typeof i.beforeAll&&i.beforeAll(e),r?function(e,t,n){const i=function(){"function"==typeof e.success&&e.success(t),"function"==typeof n.afterSuccess&&n.afterSuccess(t)};"function"==typeof n.beforeSuccess?2===n.beforeSuccess._argumentsLength?n.beforeSuccess(t,i):(n.beforeSuccess(t),i()):i()}(n,e,i):l?function(e,t,n,i){const r=new RegExp(`${t}:(fail |fail:)?cancel`);e.errMsg=e.errMsg.replace(r,`${t}:fail cancel`),"function"==typeof n.fail&&n.fail(e),"function"==typeof i.beforeCancel&&i.beforeCancel(e),"function"==typeof n.cancel&&n.cancel(e),"function"==typeof i.afterCancel&&i.afterCancel(e)}(e,t,n,i):d&&function(e,t,n,i){"function"==typeof e.beforeFail&&e.beforeFail(n),"function"==typeof i.fail&&i.fail(n),"function"==typeof e.afterFail&&e.afterFail(n),(0,f.mf)(e.checkNeedReportFail)&&!1===e.checkNeedReportFail(n)||Reporter.reportIDKey({key:`${t}_fail`})}(i,t,e,n),"function"==typeof n.complete&&n.complete(e),"function"==typeof i.afterAll&&i.afterAll(e),((e,t,n,i,r)=>{let l;l=t?o:n?a:s,l[e]=l[e]||{},l[e][r]=(l[e][r]||0)+1,Date.now()-c>=6e4&&(c=Date.now(),setTimeout(u,6e4))})(t,r,d,0,e.errMsg)}function v(e){return(t,n={},r={},o="/")=>{(0,f.Kn)(n)||(n={}),"operateWXData"===t&&n._isFromBaseOperateWXData;const a=function(e,t){return Object.keys(e).reduce(((n,i)=>("function"==typeof e[i]&&(n[i]=__errorTracer__.surroundThirdByTryCatch(e[i],`at api ${t} ${i} callback function`),delete e[i]),n)),{})}(n,t);if(n=Object.assign({},n),r=function(e,t){return Object.keys(e).reduce(((n,i)=>("function"==typeof e[i]&&(n[i]=(0,d.Hw)(e[i],`at api ${t} ${i} callback function`),n[i]._argumentsLength=e[i].length),n)),{})}(r,t),Reporter.reportIDKey({key:t}),!e){if(0===p.Z.appType&&h.g4.has(t)&&!(0,h.V8)(t))return void y({errMsg:`${t}:fail API has been banned`},t,a,r);delete n.pluginId,delete n.permissionBytes,"/"!==o&&(n.pluginId=o)}const s=(c=t,_.jP||_.wZ&&m.includes(c));var c;(0,i.d)(t,n,(e=>{y(e,t,a,r)}),s)}}const A=v(!1),b=(e,t,n)=>{g.e4.indexOf(e)<0?A(e,t,n):(0,g.LY)(e,t,n)},w=(e,t,n)=>(0,d.Vl)((t=>b(e,t,n)))(t),E=e=>e?(t,n,i)=>{A(t,n,i,e)}:b,T=v(!0),S=(e,t,n)=>{T(e,t,n)}},2833:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});var i=n(2783);function r(e,t){!function(e,t){__safeway__.bridge.on(e,t)}(e,(0,i.Hw)(t,`at api ${e} callback function`))}},2815:(e,t,n)=>{"use strict";function i(e,t,n){!function(e,t,n){__safeway__.bridge.publish(e,t,n)}(e,{data:t,options:{timestamp:Date.now()}},n)}n.d(t,{n:()=>i})},6602:(e,t,n)=>{"use strict";function i(e,t){!function(e,t){__safeway__.bridge.subscribe(e,t)}(e,(({data:e,options:n},i,r={})=>{const o=n&&n.timestamp||0,a=Date.now();Reporter.speedReport({key:"webview2AppService",data:e||{},timeMark:{startTime:o,endTime:a,nativeTime:r.nativeTime||0}}),"function"==typeof t&&t(e,i)}))}n.d(t,{L:()=>i})},1106:(e,t,n)=>{"use strict";n.d(t,{be:()=>o.be,gM:()=>C,r3:()=>l,FE:()=>p,S3:()=>h,YG:()=>d,zy:()=>u,F0:()=>o.F0,IN:()=>o.IN,bb:()=>o.bb,qu:()=>o.qu,oQ:()=>o.oQ,jQ:()=>a.j,nY:()=>i.n,Ld:()=>r.L});var i=n(2815),r=n(6602),o=n(1532),a=n(2833),s=n(2783),c=n(7452);function l(e,t,n){const i=(0,c.x7)(t,n);return!i||(d(e,t,`parameter error: ${i}`),!1)}function u(e,t){const n=(0,c.x7)(e,t);if(n)throw new Error(`parameter error: ${n}`)}function d(e,t={},n="",i){p({name:e,args:t,errMsg:n,errCode:i,success:!1})}function h({name:e,args:t={},errMsg:n="",res:i={}}){t=t||{};const r=`${e}:${n}`,o=__errorTracer__.surroundThirdByTryCatch(t.complete||s.ZT,`at api ${e} complete callback function`);i.errMsg=r,o(i)}function p({name:e,args:t={},success:n=!0,errMsg:i="",errCode:r,res:o={}}){t=t||{};const a=n?`${e}:ok`:`${e}:fail ${i}`,l=__errorTracer__.surroundThirdByTryCatch((n?t.success:t.fail)||s.ZT,`at api ${e} ${n?"success":"fail"} callback function`),u=__errorTracer__.surroundThirdByTryCatch(t.complete||s.ZT,`at api ${e} complete callback function`);o.errMsg=a,(0,c.hj)(r)&&(o.errCode=r),l(o),u(o)}var f=n(665),g=n(2851);let _="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",m="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function y(e){return t=>(0,c.HD)(t)&&t.length>e?t.substr(0,e):t}function v(e,t=!0){const n=(0,c.Em)(e);switch(n){case"Number":case"Boolean":return e;case"String":return y(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return`[Error:${v(e.message)}|${v(e.stack)}]`;case"Object":return t?Object.keys(e).map((t=>`${v(t)}=${v(e[t],!1)}`)).sort(((e,t)=>e.length-t.length)).join("&")||"{}":`[${n}]`;default:return`[${n}]`}}function A({WXDataApiName:e,argument:t,isSuccess:n,invokeTime:i,costTime:r,result:o,errMsg:a,isConfirm:s,queueLength:c,wxdataQueueTimestamp:l,wxdataDequeueTimestamp:u,beginCGITimestamp:d,CGICallbackTimestamp:h,beginCGITimestampAfterConfirm:p,CGICallbackTimestampAfterConfirm:A,wxlibCallbackTimestamp:b,requestInQueue:w,requestingCount:E,cost1:T,cost2:S,cost3:C,cost4:I,cost5:x,cost6:D}){Math.random()<.05&&setTimeout((()=>{const O=g.Z.currentNetworkType,P=f.Z.appType+1e3,R=f.Z.appLaunchInfo&&void 0!==f.Z.appLaunchInfo.scene?f.Z.appLaunchInfo.scene:0,k=[e,v(JSON.stringify(t)),n?1:0,i,r,O,v(o),P,R,_,m,a&&v(a)||"",s?1:0,c,T,S,C,I,x,D,0,w?1:0,E,i,l,u,d,h,p,A,b].map(y(1024)).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:k})}),0)}(0,c.HD)(_)&&(_=_.replace(" ","")),(0,c.HD)(m)&&(m=m.replace(" ","-"));let b=0;const w=wxNativeConsole.createLogger("baseOperateWXData"),E=["webapi_getuserinfo","webapi_getwerunstep_history","subscribemsg"],T=["webapi_getuserinfo","webapi_getuserallappauth","webapi_getadvert","webapi_getshareinfo"],S=["qbase_commapi","webapi_botdemo"];function C(e={},t={},...n){const i=Object.assign({},e);i._isFromBaseOperateWXData=!0;const r=t.beforeAll,a=t.beforeSuccess,s=t.beforeFail,c=i.data&&i.data.api_name;E.includes(c)?i.requestInQueue=!0:i.requestInQueue=!1,T.includes(c)?i.isImportant=!0:i.isImportant=!1,S.includes(i.data&&i.data.api_name)&&(i.keepAlive=!0);const l={isSuccess:void 0,WXDataApiName:c,argument:i,invokeTime:Date.now(),requestInQueue:i.requestInQueue,requestingCount:++b};w.info(`${i.data.api_name} _options.requestInQueue`,i.requestInQueue),(0,o.IN)("operateWXData",i,{beforeAll(e){const n=Date.now();b--,l.costTime=n-l.invokeTime;try{if(e&&e.data&&e.data.data?l.result=JSON.stringify(e.data):l.result=e.data,e.clientInfo&&"object"==typeof e.clientInfo){const t=e.clientInfo;Object.keys(t).forEach((e=>{l[e]=t[e]})),l.cost1=t.wxdataQueueTimestamp-l.invokeTime,l.cost2=t.wxdataDequeueTimestamp-t.wxdataQueueTimestamp,l.cost3=t.beginCGITimestamp-t.wxdataDequeueTimestamp,l.cost4=t.CGICallbackTimestamp-t.beginCGITimestamp,l.cost5=t.wxlibCallbackTimestamp-t.CGICallbackTimestamp,l.cost6=n-t.wxlibCallbackTimestamp}}catch(e){w.error(e)}"function"==typeof r&&r.call(t,e)},beforeSuccess(e){l.isSuccess=!0,i.data.data&&i.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=l),"function"==typeof a&&a.call(t,e),A(l)},beforeFail(e){l.isSuccess=!1,l.errMsg=e.errMsg,i.data.data&&i.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=l),"function"==typeof s&&s.call(t,e),A(l)}},...n)}},2999:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var i=n(2833),r=n(2046);const o={},a=(e,t)=>{const n=(0,r.s)(`WeixinJSBridge-${e}`);o[e]||((0,i.j)(e,((...e)=>{n.emit(...e)})),o[e]=!0),n.internalOnMethod(t)}},2159:(e,t,n)=>{"use strict";n.d(t,{yH:()=>r,Do:()=>o,rW:()=>s,vL:()=>c,bh:()=>l,KK:()=>a});var i=n(1106);const r=e=>{(0,i.r3)("saveFile",e,{tempFilePath:""})&&(0,i.IN)("saveFile",e)},o=(e,t)=>{if(!e||"string"!=typeof e)throw new Error("tempFilePath must be a string");if(void 0!==t&&"string"!=typeof t)throw new Error("filePath must be a string");let n,r;if((0,i.IN)("saveFileSync",{tempFilePath:e,filePath:t,success(e){r=e.savedFilePath},fail(e){n=e.errMsg}}),n)throw new Error(n);return r},a=e=>{(0,i.r3)("openDocument",e,{filePath:""})&&(e.showMenu=e.showMenu||!1,(0,i.IN)("openDocument",e))},s=(e={})=>{(0,i.IN)("getSavedFileList",e)},c=(e={})=>{(0,i.r3)("getSavedFileInfo",e,{filePath:""})&&(0,i.IN)("getSavedFileInfo",e)},l=(e={})=>{(0,i.r3)("removeSavedFile",e,{filePath:""})&&(0,i.IN)("removeSavedFile",e)}},5289:(e,t,n)=>{"use strict";n.d(t,{c:()=>r,Q:()=>o});var i=n(1106);const r=(e={})=>{(0,i.r3)("copyFile",e,{srcPath:"",destPath:""})&&(0,i.IN)("fs_copyFile",e,{beforeAll(e){e.errMsg=e.errMsg.replace("fs_copyFile:","copyFile:")}})},o=(e,t)=>{if(!e||"string"!=typeof e)throw new Error("srcPath must be a string");if(!t||"string"!=typeof t)throw new Error("destPath must be a string");let n;if((0,i.IN)("fs_copyFileSync",{srcPath:e,destPath:t,fail(e){n=e.errMsg.replace("fs_copyFileSync:","copyFileSync:")}}),n)throw new Error(n)}},4079:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var i=n(1106),r=n(7452);const o=(e={})=>{if((0,i.r3)("getFileInfo",e,{filePath:""})){if(void 0!==e.digestAlgorithm){const t=(0,r.x7)(e,{digestAlgorithm:""});if(t)return void(0,i.YG)("getFileInfo",e,`parameter error: ${t}`);if(-1===["md5","sha1"].indexOf(e.digestAlgorithm))return void(0,i.YG)("getFileInfo",e,`parameter error: invalid digestAlgorithm "${e.digestAlgorithm}"`)}(0,i.IN)("getFileInfo",e,{})}}},5274:(e,t,n)=>{"use strict";n.d(t,{t2:()=>D,ZP:()=>N,WZ:()=>M});var i=n(2159),r=n(4079),o=n(3270),a=n(1106);const s=["ascii","base64","binary","hex","ucs2","ucs-2","utf16le","utf-16le","utf8","utf-8","latin1"];var c=n(7618),l=n(665),u=n(2582);const d=u.gm?"http://":"wxfile://";let h,p=[],f=!1;u.cj?h=new RegExp(`^${d}tmp_`):u.wZ&&(h=new RegExp("^tmp_")),l.Z.onReady((()=>{u.wZ||u.cj?(0,a.IN)("readdir",{dirPath:d,success(e){const t=e.files||[];p=t.filter((e=>h.test(e))),f=!0}}):f=!0}));const g=(e,t)=>{if(!/^wxfile:\/\/(tmp\/?)?$/.test(t))return;const n=c.L.get();e.files=e.files.filter((e=>(new RegExp(`^${t}`).test(e)||(e=`${t}${e}`),-1===n.indexOf(e)))).filter((e=>f?-1===p.indexOf(e):!h.test(e)))};var _=n(4192);class m{constructor({mode:e,size:t,lastAccessedTime:n,lastModifiedTime:i}){this.mode=e,this.size=t,this.lastAccessedTime=n,this.lastModifiedTime=i}_checkModeProperty(e){return(61440&this.mode)===e}isDirectory(){return this._checkModeProperty(16384)}isFile(){return this._checkModeProperty(32768)}}const y=(e,t)=>{let n=!0;if(["mode","size","lastAccessedTime","lastModifiedTime"].forEach((t=>{n=n&&void 0!==e[t]})),n)e.stats=new m(e),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime;else if(e.stats&&1===Object.keys(e.stats).length&&e.stats[""])e.stats=new m(e.stats[""]);else{const n=[];let i=e.stats;u.wZ&&(i=e,n.push({path:"/",stats:v(t)})),Object.keys(i).forEach((e=>{if("errMsg"===e)return;const t=i[e];""===e&&(e="/"),n.push({path:e,stats:new m(t)}),delete i[e]})),e.stats=n}},v=(e,t=!1)=>{if(!e||"string"!=typeof e)throw new Error("path must be a string");let n,i;if((0,a.IN)("statSync",{path:e,recursive:t,success(t){y(t,e),n=t.stats},fail(e){i=e.errMsg}}),i)throw new Error(i);return n};var A=n(5289);var b=n(7452);const w="readZipEntry",E=["a","ax","a+","ax+","as","as+","r","r+","w","wx","w+","wx+"];var T=n(5260);var S=n(1503),C=n.n(S),I=n(5542);var x=n(1095);const D={saveFile:i.yH,saveFileSync:i.Do,getSavedFileList:i.rW,getSavedFileInfo:i.vL,removeSavedFile:i.bh,getFileInfo:r.h,readFile:o.p,readFileSync:o.N,writeFile:(e={})=>{(0,a.r3)("writeFile",e,{filePath:""})&&(e.encoding&&-1===s.indexOf(e.encoding)?(0,a.YG)("writeFile",e,`invalid encoding "${e.encoding}"`):(0,a.IN)("writeFile",e,{}))},writeFileSync:(e,t,n)=>{if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===s.indexOf(n))throw new Error(`invalid encoding "${n}"`);let i;if((0,a.IN)("writeFileSync",{filePath:e,data:t,encoding:n,fail(e){i=e.errMsg}}),i)throw new Error(i)},mkdir:(e={})=>{(0,a.r3)("mkdir",e,{dirPath:""})&&(0,a.IN)("mkdir",e)},mkdirSync:(e,t=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");let n;if((0,a.IN)("mkdirSync",{dirPath:e,recursive:t,fail(e){n=e.errMsg}}),n)throw new Error(n)},rmdir:(e={})=>{(0,a.r3)("rmdir",e,{dirPath:""})&&(0,a.IN)("rmdir",e)},rmdirSync:(e,t=!1)=>{if(!e||"string"!=typeof e)throw new Error("dirPath must be a string");let n;if((0,a.IN)("rmdirSync",{dirPath:e,recursive:t,fail(e){n=e.errMsg}}),n)throw new Error(n)},readdir:(e={})=>{(0,a.r3)("readdir",e,{dirPath:""})&&(0,a.IN)("readdir",e,{beforeSuccess(t){g(t,e.dirPath)}})},readdirSync:e=>{if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");let t,n;if((0,a.IN)("readdirSync",{dirPath:e,success(e){t=e.files},fail(e){n=e.errMsg}},{beforeSuccess(t){g(t,e)}}),n)throw new Error(n);return t},access:(e={})=>{(0,a.r3)("access",e,{path:""})&&(0,a.IN)("access",e)},accessSync:e=>{if(!e||"string"!=typeof e)throw new TypeError("path must be a string");let t;if((0,a.IN)("accessSync",{path:e,fail(e){t=e.errMsg}}),t)throw new Error(t)},unlink:_.q,unlinkSync:_.y,stat:(e={})=>{(0,a.r3)("stat",e,{path:""})&&(0,a.IN)("stat",e,{beforeSuccess:t=>{y(t,e.path)}})},statSync:v,unzip:(e={})=>{(0,a.r3)("unzip",e,{zipFilePath:""})&&(0,a.IN)("unzip",Object.assign({},e,{targetDirectory:e.targetPath}))},copyFile:A.c,copyFileSync:A.Q,rename:(e={})=>{(0,a.r3)("rename",e,{oldPath:"",newPath:""})&&(0,a.IN)("fs_rename",e,{beforeAll(e){e.errMsg=e.errMsg.replace(/^fs_/,"")}})},renameSync:(e,t)=>{if(!e||"string"!=typeof e)throw new Error("oldPath must be a string");if(!t||"string"!=typeof t)throw new Error("newPath must be a string");let n;if((0,a.IN)("fs_renameSync",{oldPath:e,newPath:t,fail(e){n=e.errMsg.replace(/^fs_/,"")}}),n)throw new Error(n)},appendFile:(e={})=>{(0,a.r3)("appendFile",e,{filePath:""})&&(e.encoding&&-1===s.indexOf(e.encoding)?(0,a.YG)("appendFile",e,`invalid encoding "${e.encoding}"`):(0,a.IN)("fs_appendFile",e,{}))},appendFileSync:(e,t,n)=>{if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===s.indexOf(n))throw new Error(`invalid encoding "${n}"`);let i;if((0,a.IN)("fs_appendFileSync",{filePath:e,data:t,encoding:n,fail(e){i=e.errMsg}}),i)throw new Error(i)},readZipEntry:(e={})=>{(0,a.r3)(w,e,{filePath:""})&&((0,b.o8)(e.encoding)||-1!==s.indexOf(e.encoding)?"all"===e.entries||Array.isArray(e.entries)?(0,a.IN)(w,e,{beforeSuccess:e=>(e.entries&&Object.keys(e.entries).forEach((t=>{if(e[t]&&(e.entries[t].data=e[t],delete e[t]),"ok"===e.entries[t].errMsg?e.entries[t].errMsg="readZipEntry:ok":e.entries[t].errMsg=`readZipEntry:fail ${e.entries[t].errMsg}`,0===t.indexOf("file:")){const n=t.replace("file:","");e.entries[n]=e.entries[t],delete e.entries[t]}})),e)}):(0,a.YG)(w,e,"invalid entries"):(0,a.YG)(w,e,`invalid encoding "${e.encoding}"`))},open:(e={})=>{const t=Object.assign({},e);(0,a.r3)("open",e,{filePath:""})&&(void 0===e.flag||E.includes(e.flag)?(void 0===e.flag&&(t.flag="r"),(0,a.IN)("open",t)):(0,a.YG)("open",e,`invalid flag "${e.flag}"`))},openSync:(e={})=>{const{filePath:t}=e;let n,i,{flag:r}=e;if(!t||"string"!=typeof t)throw new TypeError("filePath must be a string");if(void 0!==r&&!E.includes(r))throw new T.iZ(`invalid flag: ${r}`);if(void 0===r&&(r="r"),(0,a.IN)("openSync",{filePath:t,flag:r,fail(e){i=e.errMsg},success(e){n=e.fd}}),i)throw new Error(i);return n},close:(e={})=>{(0,a.r3)("close",e,{fd:""})&&(0,a.IN)("close",e)},closeSync:({fd:e}={})=>{if(!e||"string"!=typeof e)throw new TypeError("fd must be a string");let t;if((0,a.IN)("closeSync",{fd:e,fail(e){t=e.errMsg}}),t)throw new Error(t)},fstat:(e={})=>{(0,a.r3)("fstat",e,{fd:""})&&(0,a.IN)("fstat",e,{beforeSuccess(e){const{mode:t,size:n}=e;let{lastAccessedTime:i,lastModifiedTime:r}=e;i>1617e9&&(i=Math.floor(i/1e3)),r>1617e9&&(r=Math.floor(r/1e3)),e.stats=new m({mode:t,size:n,lastAccessedTime:i,lastModifiedTime:r}),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime}})},fstatSync:({fd:e}={})=>{if(!e||"string"!=typeof e)throw new TypeError("fd must be a string");let t,n;if((0,a.IN)("fstatSync",{fd:e,fail(e){n=e.errMsg},success(e){const{mode:n,size:i}=e;let{lastAccessedTime:r,lastModifiedTime:o}=e;r>1617e9&&(r=Math.floor(r/1e3)),o>1617e9&&(o=Math.floor(o/1e3)),t=new m({mode:n,size:i,lastAccessedTime:r,lastModifiedTime:o})}}),n)throw new Error(n);return t},write:(e={})=>{const t=Object.assign({},e);if((0,a.r3)("write",t,{fd:""}))if(t.encoding&&-1===s.indexOf(t.encoding))(0,a.YG)("write",t,`invalid encoding "${t.encoding}"`);else{if((0,b.eP)(t.data)){if(t.data.byteLength>10485760)return void(0,a.YG)("write",t,"ArrayBuffer exceed size limit (10M)");("number"!=typeof t.offset||t.offset<0)&&(t.offset=0),("number"!=typeof t.length||t.length<0)&&(t.length=t.data.byteLength-t.offset)}else if(!(0,b.HD)(t.data))return void(0,a.YG)("write",t,"data must be a string or ArrayBuffer");"number"!=typeof t.position&&(t.position=void 0),(0,a.IN)("write",t)}},writeSync:({fd:e,data:t,offset:n,length:i,encoding:r,position:o}={})=>{if(!e||"string"!=typeof e)throw new TypeError("fd must be a string");if(r&&-1===s.indexOf(r))throw new T.iZ(`invalid encoding "${r}"`);if((0,b.eP)(t)){if(t.byteLength>10485760)throw new T.iZ("ArrayBuffer exceed size limit (10M)");("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i<0)&&(i=t.byteLength-n)}else if(!(0,b.HD)(t))throw new TypeError("data must be a string or ArrayBuffer");let c,l;if("number"!=typeof o&&(o=void 0),(0,a.IN)("writeSync",{fd:e,data:t,offset:n,length:i,encoding:r,position:o,fail(e){c=e.errMsg},success(e){l={bytesWritten:e.bytesWritten}}}),c)throw new Error(c);return l},read:(e={})=>{if(!(0,a.r3)("read",e,{fd:""}))return;if(!(0,b.eP)(e.arrayBuffer))return void(0,a.YG)("FileSystemManager.read",e,"arrayBuffer must be an ArrayBuffer");const t=Object.assign({},e);u.cj&&I.Z&&I.Z.trace&&(t.arrayBufferId=I.Z.trace(t.arrayBuffer,"rw"),delete t.arrayBuffer),(0,b.hj)(t.position)&&t.position<0?t.position=0:(0,b.o8)(t.position)||(0,b.Ft)(t.position)?t.position=null:(0,b.hj)(t.position)||(t.position=0);const n=Number(t.length);Number.isNaN(n)?t.length=0:t.length=n;const i=Number(t.offset);Number.isNaN(i)?t.offset=0:t.offset=i,(0,a.IN)("read",t,{beforeSuccess(t){t.arrayBuffer=e.arrayBuffer},afterAll(){u.cj&&I.Z&&I.Z.untrace&&I.Z.untrace(t.arrayBufferId)}})},readSync:(e={})=>{const{fd:t,arrayBuffer:n}=e;if(!t||"string"!=typeof t)throw new TypeError("fd must be a string");if(!(0,b.eP)(n))throw new TypeError("arrayBuffer must be an ArrayBuffer");const i=Object.assign({},e);u.cj&&I.Z&&I.Z.trace&&(i.arrayBufferId=I.Z.trace(i.arrayBuffer,"rw"),delete i.arrayBuffer),(0,b.hj)(i.position)&&i.position<0?i.position=0:(0,b.o8)(i.position)||(0,b.Ft)(i.position)?i.position=null:(0,b.hj)(i.position)||(i.position=0);const r=Number(i.length);Number.isNaN(r)?i.length=0:i.length=r;const o=Number(i.offset);let s,c;if(Number.isNaN(o)?i.offset=0:i.offset=o,(0,a.IN)("readSync",C()(C()({},i),{},{fail(e){c=e.errMsg},success(e){s={bytesRead:e.bytesRead,arrayBuffer:n}}})),u.cj&&I.Z&&I.Z.untrace&&I.Z.untrace(i.arrayBufferId),c)throw new Error(c);return s},truncate:(e={})=>{(0,a.r3)("truncate",e,{filePath:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),(0,a.IN)("truncate",e,{}))},truncateSync:({filePath:e,length:t}={})=>{if(!e||"string"!=typeof e)throw new Error("filePath must be a string");let n;if("number"!=typeof t&&(t=0),(t=Math.floor(t))<0&&(t=0),(0,a.IN)("truncateSync",{filePath:e,length:t,fail(e){n=e.errMsg}}),n)throw new Error(n)},ftruncate:(e={})=>{(0,a.r3)("ftruncate",e,{fd:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),(0,a.IN)("ftruncate",e))},ftruncateSync:({fd:e,length:t}={})=>{if(!e||"string"!=typeof e)throw new Error("fd must be a string");let n;if("number"!=typeof t&&(t=0),(t=Math.floor(t))<0&&(t=0),(0,a.IN)("ftruncateSync",{fd:e,length:t,fail(e){n=e.errMsg}}),n)throw new Error(n)}};let O="",P="";l.Z.onReady((()=>{try{O=l.Z.env.USER_DATA_PATH,P=l.Z.env.OPEN_DATA_PATH,delete l.Z.env.OPEN_DATA_PATH}catch(e){}}));const R={saveFile:["filePath"],saveFileSync:[1],readFile:["filePath"],readFileSync:[0],writeFile:["filePath"],writeFileSync:[0],mkdir:["dirPath"],mkdirSync:[0],rmdir:["dirPath"],rmdirSync:[0],readdir:["dirPath"],readdirSync:[0],access:["path"],accessSync:[0],unlink:["filePath"],unlinkSync:[0],stat:["path"],statSync:[0],unzip:["zipFilePath","targetPath"],copyFile:["srcPath","destPath"],copyFileSync:[0,1],rename:["oldPath","newPath"],renameSync:[0,1],appendFile:["filePath"],appendFileSync:[0]},k=e=>{const t={};return Object.keys(D).forEach((n=>{const i=D[n];t[n]=(...t)=>{if(!R[n])return i(...t);if(R[n].every((i=>((e,t)=>"string"!=typeof e||!e.startsWith("wxfile://ad")&&(!(0,x.Av)()||!e.startsWith("wxfile://usr")&&!e.startsWith("http://usr"))&&!e.startsWith("opendata"===t?O:P))((n.endsWith("Sync")?t:t[0])[i],e))))return i(...t);if(n.endsWith("Sync"))throw new Error(`${n}:fail permission denied`);t=t[0]||{},(0,a.YG)(n,t,"permission denied")}})),t},N={app:k("app"),game:k("game"),opendata:k("opendata")};function M(){return P}},3270:(e,t,n)=>{"use strict";n.d(t,{p:()=>f,N:()=>g});var i=n(1106),r=n(5014),o=n(6947),a=n(2582),s=n(665),c=n(2288),l=n(6077),u=n(7452),d=n(5260);const h=o.Z.fs;let p=!1;h&&h.FileReader&&s.Z.onReady((()=>{let e=!1;const t=a.cj?"clicfg_appbrand_ios_native_readfile":"clicfg_appbrand_native_readfile";(0,c.b)({experimentId:t,experimentType:"Expt",success:t=>{t&&1===Number(t.testConfig)&&((0,l.T)(/readFile(?:Sync)?$/,1),e=!0)},fail(e){}});const n=(0,r.J)("bindingReadFile");p=e||n}));const f=(e={})=>{if((0,i.r3)("readFile",e,{filePath:""}))if((0,u.o8)(e.encoding)||(0,u.HD)(e.encoding))if((0,u.o8)(e.position)||(0,u.hj)(e.position))if((0,u.o8)(e.length)||(0,u.hj)(e.length))if(p){const t=new h.FileReader;t.onerror=t=>(0,i.YG)("readFile",e,t),t.onread=t=>(0,i.FE)({name:"readFile",args:e,res:{data:t}}),t.read(e.filePath,e.encoding)}else(0,i.IN)("readFile",e);else(0,i.YG)("readFile",e,`invalid length: ${e.length}`);else(0,i.YG)("readFile",e,`invalid position: ${e.position}`);else(0,i.YG)("readFile",e,`invalid encoding: ${e.encoding}`)},g=(e,t,n,r)=>{if(!e||!(0,u.HD)(e))throw new d.iZ(`invalid filePath: ${e}`);if(!(0,u.o8)(t)&&!(0,u.HD)(t))throw new d.iZ(`invalid encoding: ${t}`);if(!(0,u.o8)(n)&&!(0,u.hj)(n))throw new d.iZ(`invalid position: ${n}`);if(!(0,u.o8)(r)&&!(0,u.hj)(r))throw new d.iZ(`invalid length: ${r}`);if(p)try{return h.readFileSync(e,t)}catch(a){throw new Error(a)}let o,a;if((0,i.IN)("readFileSync",{filePath:e,encoding:t,position:n,length:r,success(e){o=e.data},fail(e){a=e.errMsg}}),a)throw new Error(a);return o}},4192:(e,t,n)=>{"use strict";n.d(t,{q:()=>r,y:()=>o});var i=n(1106);const r=(e={})=>{(0,i.r3)("unlink",e,{filePath:""})&&(0,i.IN)("unlink",e)},o=e=>{if(!e||"string"!=typeof e)throw new Error("filePath must be a string");let t;if((0,i.IN)("unlinkSync",{filePath:e,fail(e){t=e.errMsg}}),t)throw new Error(t)}},1130:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(1106),r=n(2582);function o(e,t,n={},o={},a=(()=>{}),s=(()=>{})){return(c={})=>{n=a(c),(0,i.gM)(Object.assign({},c,{data:Object.assign({api_name:t},o,n?{data:n}:void 0),requestInQueue:!c.hasOwnProperty("requestInQueue")||Boolean(c.requestInQueue)}),{beforeAll(t){t.errMsg=t.errMsg.replace("operateWXData",e)},beforeSuccess(e){if(r.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data.data){e.rawData=e.data.data;const t=JSON.parse(e.data.data);e=Object.assign(e,t)}e.data.signature&&(e.signature=e.data.signature),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data,e=s(e)}})}}},9271:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var i=n(1106),r=n(1095);const o=({api:e,url:t})=>(0,r.vB)()?Promise.resolve({isInDomainList:!0,isLocalHost:!1,isInLAN:!0}):new Promise(((n,r)=>{(0,i.IN)("checkNetworkAPIURL",{api:e,url:t,success:n,fail:r})}))},6725:(e,t,n)=>{"use strict";n.d(t,{vL:()=>k,ED:()=>x,UG:()=>N,No:()=>y,zL:()=>P,pr:()=>M,UK:()=>L,rU:()=>B});var i=n(6947),r=n(2783),o=n(1106),a=n(7618),s=n(1950),c=n(665),l=n(1095),u=n(2582),d=n(7060),h=n(972),p=n(138),f=n(7452);const{Canvas:g}=i.Z,_=new WeakMap;let m=0;const y=e=>{if(null!=e)return _.get(e)};function v(e){(0,h.Ft)()&&(0,o.IN)("removeImageView",{viewId:e,complete({errMsg:e}){}})}function A(e){if((0,h.Ks)()){const t=e.getContext;e.getContext=(...n)=>{const i=t.call(e,...n),r=i.getSupportedExtensions,o=i.getExtension;return r&&(i.getSupportedExtensions=(...e)=>{const t=r.call(i,...e);if(Array.isArray(t)){const e=new Set(t);return e.delete("WEBGL_compressed_texture_etc1"),e.delete("WEBGL_compressed_texture_etc"),Array.from(e)}return t}),o&&(i.getExtension=e=>"WEBGL_compressed_texture_etc1"===e||"WEBGL_compressed_texture_etc"===e?null:o.call(i,e)),i}}}let b,w=!1;const E=Object.defineProperty,T=Object.getOwnPropertyDescriptor,S=Object.prototype.hasOwnProperty,C=["getContext","toDataURL"],I=["width","height","tagName","nodeName"],x=({secure:e=!1,isSharedCanvas:t=!1}={},n=!0)=>{const i=new g,l=!!("string"==typeof(u.gm?c.Z.appConfig.subContext:c.Z.subContext))&&n;if(A(i),u.gm){let e=i.__proto__.__proto__;i.__proto__=new Proxy(i.__proto__,{setPrototypeOf:(t,n)=>(e=n,!0),getPrototypeOf:()=>e})}u.jP||u.gm||S.call(i,"width")||(I.forEach((e=>{for(let t=i;t;t=t.__proto__)if(S.call(t,e)){E(i,e,T(t,e)),E(i,e,{configurable:!1});break}})),E(i,"style",{value:{},writable:!0}),b||(b={},b[Symbol.toStringTag]="HTMLCanvasElement",C.forEach((e=>{for(let t=i;t;t=t.__proto__)if(S.call(t,e)){E(b,e,T(t,e));break}}))),i.__proto__=b),l&&(Object.setPrototypeOf(i,(0,s.v)()),"Object"===(0,f.Em)(i)&&Object.defineProperty((0,s.v)(),Symbol.toStringTag,{get:()=>"HTMLCanvasElement"})),void 0===i.__id&&(i.__id=m++);let p=!1;w||(w=!0,p=!0),_.set(i,{canvasId:i.__id,secure:e,isSharedCanvas:t,isScreenCanvas:p,flag:(0,d.f)()});try{delete i.__id}catch(e){}const y=u.gm?i:(e=>{const{canvasId:t}=_.get(e);return t})(i),x=t=>{if(e){const e=a.L.set(t.tempFilePath);t.tempFilePath=e}v(y)};return i.toTempFilePathSync=function(e={}){let t,n;const i=_.get(this),r=!!i&&i.isScreenCanvas;if(function(e){(0,h.Ft)()&&(0,o.IN)("insertImageView",{parentId:0,viewId:e,position:{width:0,height:0,top:0,left:0},clickable:!1,data:"{}",complete({errMsg:e}){}})}(y),(0,o.IN)("canvasToTempFilePathSync",Object.assign({},e,{canvasId:y},{isScreenCanvas:r,success:e=>{t=e.tempFilePath},fail:e=>{n=e.errMsg}}),{beforeSuccess:x}),v(y),n)throw new Error(n);return t},i.toTempFilePath=(0,r.gA)(((e={})=>{const t=_.get(i),n=!!t&&t.isScreenCanvas;(0,o.IN)("canvasToTempFilePath",Object.assign({},e,{canvasId:y,isScreenCanvas:n}),{beforeSuccess:x})})),i};let D,O;const P=()=>O;c.Z.onReady((()=>{if((0,l.aI)()){(0,p.QJ)();const e="string"==typeof(u.gm?c.Z.appConfig.subContext:c.Z.subContext)||(0,p.$Q)();D=x({secure:e}),(e=>{if((0,h.LN)()){const t=e.getContext;e.getContext=(n,i,...r)=>{if("webgl"===n||"2d"===n){const o=Object.assign({},i);return o.preserveDrawingBuffer=!0,t.call(e,n,o,...r)}return t.call(e,n,i,...r)}}})(D),A(D),(0,s.w)(),O=x({secure:e,isSharedCanvas:!0}),O.width=c.Z.screenWidth,O.height=c.Z.screenHeight}}));let R=!1;const k=()=>R?x({secure:(0,p.$Q)()}):(R=!0,D),N=()=>new i.Z.ScreenCanvas,M=()=>x({secure:(0,p.$Q)()}),L=function(){return x()},B=()=>D},1950:(e,t,n)=>{"use strict";n.d(t,{v:()=>S,w:()=>T});var i=n(6947),r=n(6725),o=n(7060),a=n(665),s=n(5014),c=n(5184),l=n(1095);const u=e=>!(0,r.No)(e).secure,d=(e,t)=>{const n=(0,r.No)(t);if(!n)return!0;const{secure:i}=n,{secure:o}=(0,r.No)(e);return!(!o&&i)},h=function(e){return function(){if(/texImage2D|texSubImage2D/.test(e)){const{flag:t}=(0,r.No)(this.canvas),{textures:n,currentTextureIndex:i}=t,o=n[i];if(o&&"WeixinCanvasTexture"===o.type)return void console.warn(`在调用 wxBindCanvasTexture() 向 ${i} 号纹理单元提交纹理后，不能再调用 ${e}() 向该纹理单元提交纹理`)}const t=this.canvas,n=/createPattern|drawImage/.test(e)?arguments[0]:arguments[arguments.length-1];if(d(t,n))return!0;console.warn(`在 game.json 配置了 OpenDataContext 后，非安全 Canvas 的 WebGL 上下文的 ${e} 不能传入安全 Canvas`)}};let p=!1,f="unknown";a.Z.onReady((()=>{p=(0,s.J)("screenCanvasReadPixels"),f=(0,l.KU)("screenCanvasReadPixelsFreely")}));const g={toDataURL:function(){return!!u(this)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 不能调用 toDataURL"),"")},getImageData:function(){return!!u(this.canvas)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 的 2d 上下文不能调用 getImageData"),{width:0,height:0,data:new Uint8ClampedArray(0)})},createPattern:h("createPattern"),drawImage:h("drawImage"),texImage2D:h("texImage2D"),texSubImage2D:h("texSubImage2D"),wxBindCanvasTexture:h("wxBindCanvasTexture"),readPixels:function(){const{secure:e}=(0,r.No)(this.canvas);if(!e)return!0;if((0,c.v)("WebGLRenderingContext.readPixels"),!p)return void(0,c.v)("screenCanvasReadPixelsNoPermission");const{dirtyFramebufferMap:t,currentFramebuffer:n}=(0,r.No)(this.canvas).flag;if(!t.has(n)||((0,c.v)("unsafeScreenCanvasReadPixelsUsedBefore"),!1!==f))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，绘制了 sharedCanvas 的画布不能 readPixels")}},{Canvas:_,Image:m}=i.Z;let y;const v={"2d":null,webgl:null},A={Image:null,Canvas:null,CanvasRenderingContext2D:null,CanvasPattern:null,CanvasGradient:null,ImageData:null,TextMetrics:null},b=new WeakMap;function w(){const e=new _;return e.width=1,e.height=1,e}function E(e){const t={};return Object.keys(e).forEach((n=>{const i=Object.getOwnPropertyDescriptor(e,n);if("function"!=typeof i.value)i.get||i.set?Object.defineProperty(t,n,{get(){if(i.get)return i.get.call(this)},set(e){i.set&&i.set.call(this,e)}}):Object.defineProperty(t,n,i);else{const i=e[n];t[n]=function(){if("function"==typeof g[n]){const e=g[n].apply(this,arguments);if(!0!==e)return e}return"function"==typeof o.a[n]&&o.a[n].apply(this,arguments),i.apply(this,arguments)}}})),t}function T(){return Object.keys(A).forEach((e=>{if(A[e])return;const t=w(),n=t.getContext("2d");if("Canvas"===e)A[e]=Object.getPrototypeOf(t);else if("Image"===e)A[e]=Object.getPrototypeOf(new m);else if("CanvasRenderingContext2D"===e)A[e]=Object.getPrototypeOf(n);else if("CanvasPattern"===e){const i=n.createPattern(t,"repeat");A[e]=Object.getPrototypeOf(i)}else if("CanvasGradient"===e){const t=n.createLinearGradient(0,0,100,100);A[e]=Object.getPrototypeOf(t)}else if("ImageData"===e){const t=n.getImageData(0,0,10,10);A[e]=Object.getPrototypeOf(t)}else if("TextMetrics"===e){const t=n.measureText("123");A[e]=Object.getPrototypeOf(t)}})),A}const S=function(){if(y)return y;const e=w(),t=E(Object.getPrototypeOf(e)),n=t.getContext;return t.getContext=function(e,t){const{isSharedCanvas:i}=(0,r.No)(this);if(i)return{};const o=n.call(this,e,t);return null===o||(/2d|webgl/.test(e)&&Object.setPrototypeOf(o,function(e){if(v[e])return v[e];const t=w().getContext(e),n=E(Object.getPrototypeOf(t));return v[e]=n,v[e]}(e)),b.set(o,this),Object.defineProperty(o,"canvas",{value:this,configurable:!1,writeable:!1})),o},y=t,t}},7060:(e,t,n)=>{"use strict";n.d(t,{a:()=>c,f:()=>o});var i=n(6725);const r=e=>"object"==typeof e&&null!==e,o=()=>{const e={};return{dirtyTextureMap:new WeakMap,dirtyRenderbufferMap:new WeakMap,dirtyFramebufferMap:new WeakMap,framebufferTextureMap:new WeakMap,framebufferRenderbufferMap:new WeakMap,textures:[],currentTextureIndex:0,screenFramebuffer:e,currentFramebuffer:e}},a=function(){const e=arguments[arguments.length-1],t=(0,i.No)(e),{textures:n,currentTextureIndex:o,dirtyTextureMap:a}=(0,i.No)(this.canvas).flag,s=n[o];r(s)&&(t&&t.isSharedCanvas?a.set(s,!0):a.has(s)&&a.delete(s))},s=function(){const{textures:e,currentFramebuffer:t,dirtyFramebufferMap:n,framebufferTextureMap:o,dirtyTextureMap:a,framebufferRenderbufferMap:s,dirtyRenderbufferMap:c}=(0,i.No)(this.canvas).flag;if(!e.some((e=>a.has(e))))return;n.set(t,!0);const l=o.get(t);r(l)&&a.set(l,!0);const u=s.get(t);r(u)&&c.set(u,!0)},c={activeTexture(e){const t=e-this.TEXTURE0;(0,i.No)(this.canvas).flag.currentTextureIndex=t},bindTexture(e,t){const{textures:n,currentTextureIndex:r}=(0,i.No)(this.canvas).flag;n[r]=t},wxBindCanvasTexture(e,t){const{textures:n,currentTextureIndex:o,dirtyTextureMap:a}=(0,i.No)(this.canvas).flag;if(!r(t))return void(n[o]=null);const s=(0,i.No)(t),c={type:"WeixinCanvasTexture"};n[o]=c,s&&s.isSharedCanvas?a.set(c,!0):a.has(c)&&a.delete(c)},texImage2D:a,texSubImage2D:a,bindFramebuffer(e,t){const n=(0,i.No)(this.canvas).flag;n.currentFramebuffer=t||n.screenFramebuffer},framebufferTexture2D(e,t,n,r){const{framebufferTextureMap:o,currentFramebuffer:a}=(0,i.No)(this.canvas).flag;o.set(a,r)},framebufferRenderbuffer(e,t,n,r){const{dirtyRenderbufferMap:o,dirtyFramebufferMap:a,framebufferRenderbufferMap:s,currentFramebuffer:c}=(0,i.No)(this.canvas).flag;o.has(r)&&a.set(c,!0),s.set(c,r)},copyTexImage2D(){const{dirtyFramebufferMap:e,currentFramebuffer:t,textures:n,currentTextureIndex:o,dirtyTextureMap:a}=(0,i.No)(this.canvas).flag;if(e.has(t)){const e=n[o];r(e)&&a.set(e,!0)}},drawArrays:s,drawElements:s}},2141:(e,t,n)=>{"use strict";n.d(t,{B:()=>p,D:()=>f});var i=n(2582),r=n(6947);const{Image:o}=r.Z;let a;const s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.prototype.hasOwnProperty,u=["src","width","height","naturalWidth","naturalHeight","complete","tagName","nodeName","onerror","onload"],d=new WeakMap;function h(e){return"function"!=typeof e?null:(d.set(e,(({type:t,target:n,timeStamp:i})=>e&&e({type:t,target:n,currentTarget:n,timestamp:1e6*i}))),d.get(e))}function p(){return new o}function f(){const e=new o;return function(e){if(i.gm)return;if(l.call(e,"src"))return;const t=e.__proto__;a||(a={addEventListener(e,n){t.addEventListener.call(this,e,h(n))},removeEventListener(e,n){t.removeEventListener.call(this,e,d.get(n)||n)}}),e.__proto__=a,u.forEach((n=>{for(let i=t;i;i=i.__proto__)if(l.call(i,n)){const t=c(i,n);if(/^on/.test(n)){let i=null;s(e,n,{get:()=>i,set(n){i=n,t.set.call(e,h(n))}})}else s(e,n,t);break}}))}(e),e}},2411:(e,t,n)=>{"use strict";n.d(t,{y:()=>l,r:()=>u});var i=n(665),r=n(1095),o=n(743),a=n(495);let s={},c=null;function l(){return s}function u(){return c||(0,a.Ir)()}i.Z.onReady((()=>{s=i.Z.appLaunchInfo,(0,r.aI)()&&((0,o.OQ)(((e={})=>{const t=Object.assign({},e);s.referrerInfo=Object.assign({},s.referrerInfo,t.referrerInfo),delete t.referrerInfo,s=Object.assign({},s,t)})),(0,o.Ke)((e=>{c=e})))}))},495:(e,t,n)=>{"use strict";n.d(t,{Ir:()=>l,x9:()=>u,Br:()=>d});var i=n(9078),r=n(665),o=n(5014),a=n(2497);let s,c;r.Z.onReady((()=>{const e=d(r.Z.appLaunchInfo||{});s=e.appLaunchInfo,c=e.publicLaunchInfo}));const l=()=>c,u=()=>s;function d(e={}){const t=e.shareInfo;let n=e.scene,s=e.query||{};"object"==typeof t&&null!==t&&(e.shareTicket=i.Z.set(t.shareKey,t.shareName),i.Z.lastShareTicket=e.shareTicket),e.query=e.query||{},e.scene=e.scene?parseInt(e.scene,10):e.scene,e.referrerInfo=e.referrerInfo||{},1022===e.scene&&(s=e.query={}),!1===e.reLaunch&&(s={}),(0,a.B)(),void 0===e.reLaunch&&"hide"===(0,a.B)()&&(s={}),1103===e.scene&&(n=1001),1104===e.scene&&(n=1089),1158!==e.scene&&1159!==e.scene&&1160!==e.scene||!(0,o.J)("getGroupToolbarInfo")&&(n=1008);const c={scene:n,query:s,shareTicket:e.shareTicket,referrerInfo:e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{}};return r.Z.debugLaunchInfo&&r.Z.debugLaunchInfo.lanDebugInfo&&!1!==r.Z.debugLaunchInfo.lanDebugInfo.useStaticServer&&(c.lanDebugInfo=r.Z.debugLaunchInfo.lanDebugInfo),e.chatType&&(c.chatType=e.chatType),{publicLaunchInfo:c,appLaunchInfo:e}}},74:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});const i=(0,n(1130).Z)("gameTransfer","webapi_game_transfer",{},{},(e=>JSON.parse(JSON.stringify(e))))},1703:(e,t,n)=>{"use strict";n.d(t,{r:()=>r,k:()=>o});let i={};function r(e={}){const t=e.shareMessageToFriendScene;return"number"==typeof t&&(t>=0&&t<=50&&(i={shareMessageToFriendScene:t},!0))}function o(){return Object.keys(i).map((e=>`${e}=${i[e]}`)).join("&")}},6500:(e,t,n)=>{"use strict";n.d(t,{_:()=>f,H:()=>g});var i=n(3356),r=n.n(i),o=n(665),a=n(2802),s=n(2141),c=n(6725),l=n(7646);let u=1,d=!1;function h(e,t,n=""){return e.font=`${t}px -apple-system`,n?e.measureText(n).width:0}o.Z.onReady((()=>{u=o.Z.pixelRatio,(0,l.JM)({apiName:"webapi_game_issharemarkenabled",reqData:{lib_version:a.c},success(e){const t=JSON.parse(e.rawData);d=t.is_enabled}})}));const p=e=>new Promise((t=>{if(e)if("transparent"===e)t({width:0,height:0});else{const n=(0,s.B)();n.onload=()=>t(n),n.onerror=()=>t(),n.src=e}else t()})),f=function(){var e=r()((function*({background:e,label:t,icon:n,tag:i,more:r=!1,base64:o=!1}){if(!e)return e;const a=(0,c.pr)(),s=a.getContext("2d");a.width=210*u,a.height=168*u,"transparent"===e&&(a.height=40*u),s.fillStyle="rgba(255, 255, 255, 0)",s.fillRect(0,0,a.width,a.height);const l=yield p(e);if(!l)return e;l.width/l.height>=1.25?s.drawImage(l,0,0,1.25*l.height,l.height,0,0,a.width,a.height):l.width/l.height<1.25&&s.drawImage(l,0,0,l.width,.8*l.width,0,0,a.width,a.height);const d=h(s,12*u,t);if(i){const e=h(s,10*u,i);s.fillStyle="rgba(0, 0, 0, 0.5)",s.beginPath(),s.moveTo(0,8*u),s.lineTo(d+e+12*u,8*u),s.arc(d+e+12*u,20*u,12*u,1.5*Math.PI,2.5*Math.PI),s.lineTo(0,32*u),s.closePath(),s.fill(),s.fillStyle="#F36D00",s.beginPath(),s.moveTo(4*u,14*u),s.arc(6*u,14*u,2*u,Math.PI,1.5*Math.PI),s.lineTo(e+10*u,12*u),s.arc(e+10*u,14*u,2*u,1.5*Math.PI,2*Math.PI),s.lineTo(e+12*u,26*u),s.arc(e+10*u,26*u,2*u,2*Math.PI,2.5*Math.PI),s.lineTo(6*u,28*u),s.arc(6*u,26*u,2*u,.5*Math.PI,Math.PI),s.closePath(),s.fill(),s.fillStyle="#FFFFFF",s.fillText(i,8*u,23.5*u),h(s,12*u),s.fillText(t,e+16*u,24*u)}else if(n){const e=yield p(r&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAMCAYAAABBV8wuAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAHtJREFUeNpj/v//v3RDQwNDY2PjLwYkwATEM4F4B1ABL7pEChALoUsyA434AjRqLZCdCcTBQPZqkLGMMBVA1RJAaj8QvwNiD0Zkc5EkHzMxoIL/UMzIhKRaHKr6I8guRiyC7oyMjJ8YsQnC/DEXXRAEWIA4A4g/IQuCAAABEju5SK8v4wAAAABJRU5ErkJggg=="),i=e?10*u:0;s.fillStyle="rgba(0, 0, 0, 0.5)",s.beginPath(),s.moveTo(0,8*u),s.lineTo(d+i+22*u,8*u),s.arc(d+i+22*u,20*u,12*u,1.5*Math.PI,2.5*Math.PI),s.lineTo(0,32*u),s.closePath(),s.fill();const o=yield p(n);o&&o.width&&o.height&&s.drawImage(o,6*u,12*u,16*u,16*u),e&&e.width&&e.height&&s.drawImage(e,d+30*u,14*u,6*u,12*u),s.fillStyle="#FFFFFF",h(s,12*u),s.fillText(t,26*u,24*u)}else s.fillStyle="rgba(0, 0, 0, 0.5)",s.beginPath(),s.moveTo(0,8*u),s.lineTo(d+2*u,8*u),s.arc(d+2*u,20*u,12*u,1.5*Math.PI,2.5*Math.PI),s.lineTo(0,32*u),s.closePath(),s.fill(),s.fillStyle="#FFFFFF",h(s,12*u),s.fillText(t,6*u,24*u);return o?a.toDataURL():a.toTempFilePathSync()}));return function(t){return e.apply(this,arguments)}}(),g=e=>new Promise((t=>{d&&e.imageUrl?(0,l.JM)({apiName:"webapi_game_getsharemark",reqData:{lib_version:a.c},success:({rawData:n})=>{let i=JSON.parse(n);i=(i.mark_list||[])[0],i||t(e),i&&f({background:e.imageUrl,label:i.wording,icon:i.head_img_url,tag:i.mark_word}).then((n=>{e.imageUrl=n,e.extra={shareCardMarker:{label:i.mark_type}},t(e)})).catch((()=>t(e)))},fail:()=>t(e)}):t(e)}))},6369:(e,t,n)=>{"use strict";n.d(t,{HP:()=>B,A5:()=>k,ld:()=>U,$F:()=>F,dg:()=>W,kv:()=>N});var i=n(1503),r=n.n(i),o=n(8159),a=n(1106),s=n(9078),c=n(7618),l=n(7621),u=n(1095),d=n(9973),h=n(2582),p=n(665),f=n(3536),g=n(4345),_=n(6998);const m={};var y=n(3872),v=n(5014),A=n(7657),b=n(2411),w=n(1029),E=n(678),T=n(2451),S=n(8582),C=n(5917),I=n(2420),x=n(7477),D=n(1051);const O=new o.Z;let P=null,R=null;const k=()=>R;p.Z.onReady((()=>{(0,u.aI)()&&n(743).dN((e=>{if(R={},e.referrerInfo&&e.referrerInfo.messageExtraData){R=e.referrerInfo.messageExtraData;const{userInfo:t,shareType:n}=R;if(n&&t){const i=[Reporter.getAppType(),n,t.openID,e.path||"",(0,_._getCurrentNetworkType)()].join(",");Reporter.reportKeyValue({key:"ShareCardClick",value:i})}}}))}));const N=e=>{(0,a.IN)("showUpdatableMessageSubscribeButton",{shareKey:e})},M=e=>(t,n)=>{let{shareInfos:i}=t;if(delete t.shareInfos,void 0!==i&&i.length>0)if(i=i.filter((e=>e.shareKey&&e.shareName)),t.shareTickets=i.map((e=>(N(e.shareKey),s.Z.set(e.shareKey,e.shareName)))),h.gm)delete t.shareTickets,delete t.shareInfos,n();else{if(e.getGroupMsgTicket)return void Promise.all(i.map((e=>new Promise((t=>{const{shareKey:n}=e;(0,l.k)({shareKey:n,success(e){t({groupMsgTicket:e.groupMsgTicket,expiresIn:e.expiresIn})},fail(){t({groupMsgTicket:""})}})}))))).then((e=>(t.groupMsgInfos=e,n()))).catch((()=>{}));n()}else n()},L=(e={},t,n={},i=!1)=>{const r=(0,C.VW)(),o=(0,C.rZ)();let s="string"==typeof e.path?e.path:"",l="string"==typeof e.query?e.query:"",g="",_=0;switch(t){case"shareAppMessage":_=1;break;case"shareAppMessageDirectly":_=2;break;case"shareAppMessageToSpecificContactDirectly":_=3}if(l.length>2e3&&(console.warn(`shareAppMessage: query exceed max length limit 2000: "${l.length}"`),l=l.substr(0,2e3)),l&&(s=`${s}?${l}`),e.imageUrl=c.L.get(e.imageUrl)||e.imageUrl,Array.isArray(e.imageUrl)&&(e.imageUrl=""),!r){if(!o[e.imageUrlId])return e.imageUrlId,(0,f.CF)({icon:"none",title:"由于小程序违规，分享功能暂时无法使用"}),void A(2);g=e.imageUrl=o[e.imageUrlId]}function A(t){!function({result:e,shareType:t,canUseCustomImageUrl:n,imageUrlId:i="",transformedImageUrl:r=""}){const o=m.query,a=[],s=p.Z.accountInfo&&p.Z.accountInfo.nickname||"";if(o&&"object"==typeof o)for(const e in o)a.push(`${encodeURIComponent(e)}=${encodeURIComponent(o[e])}`);const c=[m.scene,m.scene_note,m.sessionid,"",s,Reporter.getAppType(),e,0,a.join("&"),t,n?1:2,i,r,p.Z.host?p.Z.host.appId:""].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Share",value:c}),Reporter.submit()}({result:t,shareType:_,canUseCustomImageUrl:r,imageUrlId:e.imageUrlId,transformedImageUrl:g})}(0,a.IN)(t,Object.assign(n,e,{path:s,useDefaultSnapshot:!0,messageExtraData:Object.assign({shareType:_,userInfo:P},e.extra),success(t){(0,S.Ku)("shareAppMessage",t),(i||!h.gm&&(0,u.KU)("share"))&&(0,a.FE)({name:"shareAppMessage",args:e,res:t}),A(1),setTimeout((()=>{(0,y.y4)(y.F0.EVENT_CANVAS_AFTER_SHARE_SUCCESS)}),500),e.requireAdsSkipCard&&(0,x.JM)({apiName:"webapi_recvadcardsharepresent",reqData:{outTradeNo:(Date.now()+Math.random()).toString(36)},success(e){const t=JSON.parse(e.rawData);!t.errCode&&t.amount&&(0,D.et)(t)}})},fail(t){const n=t.errMsg.replace("shareAppMessage:fail","");(i||!h.gm&&(0,u.KU)("share"))&&(0,a.YG)("shareAppMessage",e,n),A(-1!==n.indexOf("cancel")?3:2)},cancel(){setTimeout((()=>{(0,y.y4)(y.F0.EVENT_CANVAS_AFTER_SHARE_CANCEL)}),500)},complete:t=>{const n=(t.errMsg||"").replace(/^[^:]+/,"shareMessageToFriend"),i=!n||"shareMessageToFriend:ok"===n;(0,v.J)("shareCallback")&&3===_&&(O.emit("callback",{errMsg:n,success:i}),(0,a.FE)({name:"shareMessageToFriend",errMsg:n,success:i,args:e}))}}),{beforeSuccess:M(e),beforeAll(e){e.errMsg=e.errMsg.replace("shareAppMessageDirectly","shareAppMessage"),e.errMsg=e.errMsg.replace("shareAppMessageToSpecificContactDirectly","shareAppMessage")}}),["success","fail","cancel","complete"].some((t=>"function"==typeof e[t]))&&(0,d.Y)({name:t,strategy:1}),(0,y.y4)(y.F0.EVENT_CANVAS_BEFORE_SHARE)},B=(...e)=>{const t=()=>{let t=e[0].imageUrl;(0,A.V)([t],"image",(i=>{/^(cloud):\/\//.test(t)&&(t=i.data[0].url),e[0].imageUrl=t,(0,u.aI)()?n(6500).H(e[0]).catch(wxConsole.warn).then((()=>L(...e))):L(...e)}))};P?t():(0,g.v)({success:e=>{P=e},complete:()=>t()})},F=(e={})=>{const t={title:e.title||p.Z.accountInfo.nickname,imageUrl:e.imageUrl,query:e.query,imageUrlId:e.imageUrlId,path:e.path,requireAdsSkipCard:e.requireAdsSkipCard},n=(0,b.y)(),i=n.scene,r=n.chatroomUsername;let o="shareAppMessageDirectly",a=e.toCurrentGroup;a=1158===i?"boolean"!=typeof a||a:"boolean"==typeof a&&a,a&&1158===i&&(t.chatroomUsername=r,o="shareAppMessageToSpecificContactDirectly"),B(t,o),(0,I.y)({reportType:8,query:e.query})},U=e=>{O.on("callback",e)};function W(e){return(0,f.QP)({title:"请稍等"}),(0,w.c)({filePath:e.filePath,thumbFilePath:e.thumbFilePath,fileType:20302,appType:213}).then((e=>((0,f.Zk)(),e))).then((t=>{const n=(0,E.xF)({pageType:T.Gy.PLAY_PAGE_VIDEO,query:e.query});return function(e,t={},n,i={}){return new Promise(((o,s)=>{const c={title:t.title,path:t.path,imageUrl:e.thumbUrl,cardSubType:(0,E.oq)(n),messageExtraData:r()({title:t.title,imageUrl:e.fileUrl,pageType:n,thumbUrl:e.thumbUrl,fileUrl:e.fileUrl},i)};(0,a.IN)("shareAppMessageDirectly",r()(r()({},c),{},{success:o,fail:s}))}))}(t,{title:e.title,path:n,imageUrl:t.thumbUrl},T.Gy.PLAY_PAGE_VIDEO,e)})).catch((e=>{(0,f.Zk)(),wxNativeConsole.error("fail",e)}))}},5917:(e,t,n)=>{"use strict";n.d(t,{rZ:()=>d,VW:()=>h,Mc:()=>p,tK:()=>f,AV:()=>g,Hi:()=>_});var i=n(665),r=n(1130),o=n(1095),a=n(1029),s=n(1106),c=n(4079);let l=!0,u={};i.Z.onReady((()=>{if(!(0,o.KU)("shareCustomImageUrl")){(0,r.Z)("getShareConfig","webapi_getshareconf")({success(e){Array.isArray(e.share_link_list)&&(u=e.share_link_list.reduce(((e,t)=>(e[t.id]=t.url,e)),{}))},fail(e){}}),l=!1}}));const d=()=>u,h=()=>l,p=(e,t,n)=>`${e}?size=${t}x${n}`,f=e=>new Promise(((t,n)=>{(0,s.IN)("getImageInfo",{src:e,success:t,fail:n})}));function g(e){return(0,a.c)({filePath:e,fileType:20301,appType:215})}function _(e,t=1048576){return new Promise(((n,i)=>{(0,c.h)({filePath:e,success:e=>{e.size<=t?n(e):i(e)},fail:i})}))}},4052:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,J:()=>s});var i=n(6947),r=n(1106),o=n(2582);const a=e=>{if(o.gm){let t=null;return(0,r.IN)("encodeArrayBufferSync",Object.assign(e,{success(e){t=e.buffer},fail(){}})),t}return i.Z.encodeArrayBuffer(e.data,e.format)},s=e=>{if(o.gm){let t="";return(0,r.IN)("decodeArrayBufferSync",Object.assign(e,{success(e){t=e.result},fail(){}})),t}return i.Z.decodeArrayBuffer(e.data,e.format)}},1944:(e,t,n)=>{"use strict";n.d(t,{pd:()=>s,wH:()=>g,bo:()=>_,Qi:()=>f,fE:()=>h,Et:()=>p,n8:()=>u,L5:()=>d,Yo:()=>c});var i=n(5260),r=n(1106),o=n(8065),a=n(5014);const s=e=>{if((0,a.J)("createWebView"))return new o.kh(Object.assign({},e,{__skipDomainCheck__:!1}));throw new Error("createWebView:fail no permission")},c=({url:e,success:t,fail:n,complete:i})=>{(0,r.IN)("openUrl",{url:e,success:t,fail:n,complete:i})},l=({url:e,success:t,fail:n,complete:i})=>{(0,r.IN)("private_openUrl",{url:e,isNativeStyle:!0,success:t,fail:n,complete:i})},u=({success:e,fail:t,complete:n}={})=>{l({url:"http://game.qq.com/contract.shtml",success:e,fail:t,complete:n})},d=({success:e,fail:t,complete:n}={})=>{l({url:"https://game.qq.com/privacy_guide.shtml",success:e,fail:t,complete:n})},h=({success:e,fail:t,complete:n}={})=>{l({url:"http://huanle.qq.com/cp/a20170209notice/",success:e,fail:t,complete:n})},p=({success:e,fail:t,complete:n}={})=>{l({url:"https://game.qq.com/privacy_guide_children.shtml",success:e,fail:t,complete:n})},f=({success:e,fail:t,complete:n}={})=>{l({url:"https://game.qq.com/game_account_cancellation_agreement.shtml",success:e,fail:t,complete:n})},g=({success:e,fail:t,complete:n,query:r}={})=>{l({url:(0,i.cE)("https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/accountinfo.html",r),success:e,fail:t,complete:n})},_=({success:e,fail:t,complete:n,query:r}={})=>{l({url:(0,i.cE)("https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/minigametransfer.html",r),success:e,fail:t,complete:n})}},9066:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={query:{}}},8997:(e,t,n)=>{"use strict";n.d(t,{ul:()=>p,R0:()=>_,fs:()=>l.t2,Be:()=>h,_t:()=>d,Yo:()=>u,Lo:()=>f,mQ:()=>g,yw:()=>m,fy:()=>v,Ae:()=>y});var i=n(1106),r=n(2241),o=n(4684),a=n(5260),s=n(7646),c=n(2582);var l=n(5274);const u=(0,r.Fr)((({url:e,adInfo:t,adUxInfo:n,success:r,fail:o,complete:a})=>{const s={url:e,adInfo:t,success:r,fail:o,complete:a};n&&(s.adUxInfo=n),(0,i.IN)("private_openUrl",s)})),d=(0,r.Fr)((({canvasInfo:e,posType:t,success:n,fail:r,complete:a})=>{(0,i.IN)("openADCanvas",{canvasId:e.canvas_id,preLoad:0,noStore:0,extraData:JSON.stringify({pos_type:t}),adInfoXml:(0,o.l_)(e.ad_info_xml),openFirstSightVoice:1,success:n,fail:r,complete:a})})),h=(0,r.Fr)((({appId:e,path:t,traceid:n,aid:r,adInfo:o,adUxInfo:s,success:c,fail:l,complete:u})=>{const d=`${n}:${r}`,h={appId:e,path:(0,a.Pp)(t).trim(),scene:1095,sourcetype:1,sceneNote:d,adInfo:o,success:c,fail:l,complete:u};s&&(h.adUxInfo=s),(0,i.IN)("navigateToMiniProgram",h)})),p=(0,r.Fr)(((e=!0,t,n=!1)=>(r={})=>{if(!(0,i.r3)("adOperateWXData",r,{apiName:""}))return;const o={data:{api_name:r.apiName,data:r.reqData||{},operate_directly:e},isImportant:!0===n,requestInQueue:!r.hasOwnProperty("requestInQueue")||Boolean(r.requestInQueue)};(0,i.IN)("adOperateWXData",Object.assign({},o,r),{beforeAll(e){void 0!==t&&(e.errMsg=e.errMsg.replace("adOperateWXData",t))},beforeSuccess(e){c.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.respData=e.data,delete e.data}})})(!1,"adOperateWXDataForAd")),f=(0,r.Fr)((0,s.Ce)(!1,"operateWXDataForAd"));function g(e){(0,i.be)("showSplashAd",e)}function _(e){(0,i.be)("closeSplashAd",e)}function m(e){(0,i.be)("showSplashAdMenu",e)}function y(e){(0,i.be)("splashAdFirstStepViewLayoutStateChange",e)}function v(e){(0,i.be)("splashAdAllViewLayoutStateChange",e)}},5328:(e,t,n)=>{"use strict";n.d(t,{vK:()=>r,DX:()=>o,_W:()=>a,WG:()=>s,wE:()=>c,R$:()=>l,fY:()=>u,Lq:()=>d,YC:()=>h,gQ:()=>p,ET:()=>f,UJ:()=>g,yd:()=>_,qi:()=>m,MC:()=>y,c3:()=>v,sl:()=>A,yB:()=>i.Bq});var i=n(637);const r={CRT_SIZE_REWARD_VEDIO169:559,CRT_SIZE_REWARD_VEDIO916:560,CRT_SIZE_REWARD_LANDINGPAGE:910,CRT_SIZE_SPLASH_AD:1003,CRT_SIZE_IN_TEXT_DESC_CARD:841,CRT_SIZE_MULTI_POS_NEW_PIC:927,CRT_SIZE_MULTI_POS_VIDEO:929,CRT_SIZE_GRID:972,CRT_SIZE_BIG_PIC:998,CRT_SIZE_VERTICAL_VIDEO_NEW_916:721},o={banner:"8040321819858439","incentive-video":"1030436212907001",interstitialAd:"3030046789020061",grid:"7070083760581921",splashAd:"5060180989186180",wxAppVideo:"5010365819466098",wxAppPreVideoAd:"7090665964306299",customAd:"4071202390577885"},a={banner:3,"incentive-video":1,interstitialAd:4,grid:7,splashAd:8,customAd:9},s={banner:"showed","incentive-video":"viewable",interstitialAd:"viewable",grid:"viewable",splashAd:"viewable",customAd:"viewable"},c={"incentive-video":3,banner:4,interstitialAd:5,grid:6,customAd:7},l={94794:"widget_gray_batchload_app",94801:"widget_gray_vb_check",94804:"widget_gray_time_limit",94805:"widget_gray_video_download_v2",95489:"widget_gray_unlimit_fetch_tag",95767:"widget_gray_rewardedpage_exposure",100036:"widget_gray_report_install_follow",100332:"widget_gray_rewardedpage_exposure_v2",101246:"widget_gray_reward_new_endpage",104502:"widget_gray_reward_use_gauss_blur",104504:"widget_gray_reward_use_expand_style",105786:"widget_gray_banner_limit_click",105818:"widget_gray_splash_data_channel_parallel",107048:"widget_gray_splash_click_area_switch",110380:"widget_gray_webstore",109764:"widget_gray_rewrad_use_gauss_blur_android_system_version",109766:"widget_gray_rewrad_use_gauss_blur_android_wechat_version",110106:"widget_gray_splash_check_and_fetch",110108:"widget_gray_splashad_show_duration",110422:"widget_gray_interstitialAd_insurance_tips"},u={WECHAT:23,OPEN_PLATFORM_APP_MOB:12,APPLE_APP_STORE:19,MINI_GAME:46,JD_URL:25,WE_CHAT_SHOP:30,WE_CHAT_ARTICLE:29,GDT_WE_CHAT_ARTICLE:31},d="wxfile://ad",h=`${d}/adinfos.txt`,p={splashAd:1288,customAd:1390},f={dataLoadSuccess:0,dataLoadFail:1,dataPreloadSuccess:2,dataPreloadFail:3,handleDataFail:4,launchAcceptShouldShow:5,menuAcceptShouldShow:6,readFileFail:7,launchShowSplashAdSuccess:8,menuShowSplashAdSuccess:9,showSplashAdFail:10,firstRenderFail:11,firstInsertFail:12,secondRenderFail:13,secondInsertFail:14,iosThirdInsertFail:15,checkAdStateFail:16,adOfflineClose:17,readFileDataFail:18,firstShowSuccess:19,showSplashAdMenuSuccess:20,showSplashAdMenuFail:21,secondShowSuccess:22,removeFileDataFail:23,landingPageFail:24,frequencyControlFail:25,frequencyControlReturn:26,bulkCopyFileFail:27,getAdInfosFail:28,getAidFail:29,setExposureTagFail:30,NO_ADINFOS:31,NO_AID:32,MATERIAL_NOT_READY:33,CHECK_AD_STATUS_ERROR:34,CRT_ORIENTATION_NOT_SURE:35,EXPOSURE_TIMES_LIMIT:36,START_CHECK_AD_STATUS:37,CHECK_AD_STATUS_SUCCESS:38,OTHER_ADS_EMIT_FETCH:39,WRITE_ADINFOS_SUCCESS:40,WRITE_ADINFOS_FAIL:41,SHOW_SPLASH_FAIL:10},g={banner:5,"incentive-video":6,interstitialAd:8,customAd:9,grid:13,splashAd:14},_={click:1,exposure:0},m={showed:0,viewable:1,incentiveVideoCard:2},y={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5},v={NO_ADINFOS:2001,NO_AID:2002,MATERIAL_NOT_READY:2003,CHECK_AD_STATUS_ERROR:2004,CRT_ORIENTATION_NOT_SURE:2005,EXPOSURE_TIMES_LIMIT:2006,SHOW_SPLASH_FAIL:2007},A={12:"应用",19:"应用",23:"公众号",25:"商品",29:"活动",30:"商品",31:"活动",36:"优惠",39:"店铺",43:"活动",46:"小游戏",47:"优惠"}},9598:(e,t,n)=>{"use strict";n.d(t,{Zp:()=>o,S4:()=>a,Ug:()=>s,Pp:()=>c,EJ:()=>l,BZ:()=>u,vj:()=>d,vl:()=>h});var i=n(1106);const r=new(n(1095).vp),o=()=>{r.emit("_onEmitSplashAdFetch")},a=e=>{"function"==typeof e&&r.on("_onEmitSplashAdFetch",e)};function s(e){(0,i.jQ)("shouldShowSplashAd",e)}function c(e){(0,i.jQ)("onSplashAdShow",e)}function l(e){(0,i.jQ)("onSplashAdHide",e)}function u(e){(0,i.jQ)("onSplashAdClose",e)}function d(e){(0,i.jQ)("onSplashAdWillLayout",e)}function h(e){(0,i.jQ)("onSplashAdButtonClicked",e)}},3324:(e,t,n)=>{"use strict";n.d(t,{G_:()=>s,uQ:()=>c,LQ:()=>l,mh:()=>a});var i=n(4684),r=n(8997),o=n(5328);const a=e=>{const t={};try{e=JSON.parse(e);for(const n of e)n.hasOwnProperty("exp_para")&&n.exp_para.forEach((e=>{t[e.name]=Number(e.value)}));for(const e in t)o.R$[e]&&(t[o.R$[e]]=t[e]);return t}catch(e){return{}}},s=(e={},t=!0)=>(0,r.ul)({apiName:"webapi_getadvert",reqData:{action:"CheckAdIsOnline",request_data:JSON.stringify(e)},requestInQueue:t}),c=({aid:e,buttonText:t=""})=>(0,r.Lo)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"get_ad_metric",aid:e.toString(),button_text:t})}}).then((e=>{if(!e.rawData)throw new Error("get_ad_metric no result");try{const t=JSON.parse(e.rawData),n=JSON.parse(t.result),{ad_metric_count:r,desc_text:o}=n||{};return null==r||null==o||r<50?null:{count:(0,i.in)(r),descText:o}}catch(e){throw new Error("get_ad_metric invalid result")}})).catch((()=>{throw new Error("get_ad_metric request failed")})),l=({guide_group_id:e,uxinfo:t})=>(0,r.Lo)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"BindAdFansToGuideGroup",guide_group_id:e,uxinfo:t})}}).then((e=>"ok"===e.msg?Promise.resolve(e):Promise.reject(e)))},570:(e,t,n)=>{"use strict";n.d(t,{Z7:()=>f,BZ:()=>p,J$:()=>_,fn:()=>g,x1:()=>h});var i=n(2614),r=n(8997),o=n(5328),a=n(2582),s=n(9598),c=n(1095);const l=["adinfos.txt","/adinfos.txt","/"];let u=0;const d=(e="")=>{if(e)return new Promise(((t,n)=>{r.fs.unlink({filePath:e,success:t,fail:e=>{e&&e.errMsg&&e.errMsg.indexOf("no such file or directory")>-1||n(e)}})}))},h=(e="")=>e?((e="")=>{if(e)return new Promise(((t,n)=>{r.fs.stat({path:e,recursive:!0,success:t,fail:n})}))})(e).then((e=>{let t=0;const n=[],i=[],r=e.stats||[],o=+new Date;for(const e of r){t+=e.stats.size||0,l.includes(e.path)||n.push(e.path);o-1e3*e.stats.lastAccessedTime>=6048e5&&!l.includes(e.path)&&i.push(e.path)}return{totalSize:t,fileList:n,outedDateFileList:i}})):{totalSize:0,fileList:[],outedDateFileList:[]},p=(e="",t=[])=>{if(!e||0===t.length)return Promise.resolve();const n=[];for(const i of t){const t=`${e}/${i}`;n.push(d(t))}return Promise.all(n)},f=(e={},t="")=>t?(0,c.er)()?Promise.resolve():a.wZ||a.cj?new Promise(((n,i)=>{r.fs.writeFile({filePath:t,data:JSON.stringify(e),encoding:"utf-8",success:n,fail:i})})):Promise.resolve():Promise.resolve(),g=e=>e&&0!==e.length?((e="")=>{if(e)return new Promise(((t,n)=>{r.fs.readdir({dirPath:e,success:t,fail:n})}))})(o.Lq).then((t=>{const n=t.files;e&&e.map((e=>{const{url:t,filePath:r,fileName:o}=e;return n.includes(o)?Promise.resolve():((e="",t="")=>{if(e&&t)return new Promise(((n,r)=>{(0,i.o)({url:e,filePath:t,success:n,fail:r})}))})(t,r)}))})):Promise.reject({errMsg:"无数据"}),_=e=>{if(e&&"object"==typeof e&&!(u>0)&&(u+=1,!(0,c.er)()&&(a.wZ||a.cj)&&e&&e.widget_gray_unlimit_fetch_tag)){const t=3600*e.widget_gray_unlimit_fetch_tag*1e3;try{r.fs.stat({path:o.YC,success:e=>{var n;Date.now()-1e3*(null==e||null===(n=e.stats)||void 0===n?void 0:n.lastModifiedTime)>=t&&(0,s.Zp)()},fail:e=>{e.errMsg&&e.errMsg.indexOf("no such file")>-1&&f({},o.YC)}})}catch(e){}}}},2886:(e,t,n)=>{"use strict";n.d(t,{R:()=>r,Y:()=>o});var i=n(7868);const r=e=>(0,i.J)(19213,e),o=e=>(0,i.J)(19214,e)},4684:(e,t,n)=>{"use strict";n.d(t,{l_:()=>o,Ee:()=>s,Cy:()=>c,in:()=>d,IU:()=>l,$G:()=>u,U2:()=>h,X1:()=>p,Vs:()=>r.Vs});var i=n(1106),r=n(2241);const o=function(e){let t="";return 0===(e=e||"").length?"":(t=e.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g,"    "),t=t.replace(/&#039;|&#39;/g,"'"),t=t.replace(/&#047;|&#47;/g,"/"),t=t.replace(/&#092;|&#92;/g,"\\"),t=t.replace(/&quot;/g,'"'),t=t.replace(/&amp;/g,"&"),t=t.replace(/<br>/g,"\n"),t=t.replace(/<br\/>/g,"\n"),t=t.replace(/<br \/>/g,"\n"),t)},a=e=>e&&"object"==typeof e&&!Array.isArray(e),s=(e,...t)=>{if(!t.length)return e;const n=t.shift();if(a(e)&&a(n))for(const t in n)a(n[t])?(e[t]||Object.assign(e,{[t]:{}}),s(e[t],n[t])):Object.assign(e,{[t]:n[t]});return s(e,...t)},c=()=>{const e=new Date,t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("")},l=e=>{if(e)return e.wx_game_video&&e.wx_game_video.short_video?e.wx_game_video.short_video.viewid:void 0},u=(e,t)=>{let n=0,i=0;for(let r=0;r<e.length;r++)n+=/[\u4e00-\u9fa5]/.test(e[r])?2:1,n<t-1&&(i=r);return n>t?`${e.substring(0,i+1)}...`:e},d=e=>e<1e4?e.toString():`${(e/1e4).toFixed(1)}万`,h=(e,t,n)=>{"string"==typeof t&&(t=t.split("."));let i=e,r=0;for(;i&&r<t.length;)i=i[t[r]],r+=1;return i||n},p=e=>{let t=0;const n=Object.assign({},{fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},e);try{(0,i.IN)("measureText",Object.assign({},n,{complete(e){t=e.width||0}}))}catch(e){}return t}},8582:(e,t,n)=>{"use strict";n.d(t,{lc:()=>w,Ku:()=>E,sv:()=>C,L9:()=>I});var i=n(8176),r=n(665),o=n(5287),a=n(2886),s=n(1106),c=n(9185),l=n(1095),u=n(29),d=n(7646),h=n(2241),p=n(570);const f=(0,h.Fr)((0,d.Ce)(!1,"advertReport"));let g="",_=0,m="index.html";const y=new l.vp,v="_onWxAdUserCaptureScreen",A={shareAppMessage:0,shareTimeline:3};r.Z.onReady((()=>{g=(0,o.I)()}));const b={};try{(0,c.H)((e=>{_=e.webviewId,b[_]||(b[_]=!0,m=e.path,(0,u.dq)(_,(e=>{S(e)})))}))}catch(e){}(0,i.x9)((()=>{const e=+new Date;g&&(0,a.R)({eventTimeStamp:e,scene:7,uxinfo:g,url:m}),_&&(0,s.nY)(v,{eventTimeStamp:e,path:m},[_]),y.emit(v,{eventTimeStamp:e,webviewId:_,path:m})}));const w=e=>{"function"==typeof e&&y.on("_onWxAdUserCaptureScreen",e)},E=(e,t)=>{if(g){let n="",i=A[e]?A[e]:0;"shareAppMessage"===e&&t.shareInfos&&(i=t.shareInfos.length>0?2:1,n=t.shareInfos.length>0&&t.shareInfos[0].shareName||""),0===i&&"shareAppMessage"===e&&t.shareTickets&&(i=t.shareTickets.length>0?2:1),(0,a.Y)({eventTimeStamp:+new Date,shareType:i,tousername:n,uxinfo:g,url:m})}},T={};(0,s.Ld)("wxAdDelayReport",((e,t)=>{T[t]||(T[t]={}),e.key&&e.value&&(T[t][e.key]=e.value)}));const S=e=>{if(T[e]){for(const t in T[e]){const n=T[e][t];f({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:n}}).catch((e=>{}))}delete T[e]}};(0,s.Ld)("checkWxAdFetchLog",(e=>{(0,p.J$)(e)})),(0,s.Ld)("weappTouchEvent",(e=>{y.emit("_onWeappTouchEvent",e)}));const C=e=>{y.off("_onWeappTouchEvent",e)},I=(e,t)=>{let n=!1;if("function"==typeof e){const i=i=>{!n&&e(i,t),n=!0};return y.on("_onWeappTouchEvent",i),i}return null}},2605:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});const i={20299:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"is_reward",value:"0"},{type:"uint32",key:"is_cancel",value:"0"},{type:"uint32",key:"ad_platform",value:"0"}],18988:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"button_type",value:"0"}],16743:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"close_type",value:"0"},{type:"uint64",key:"exposure_duration",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"close_time",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16139:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"appid",value:"0"},{type:"string",key:"weapppath",value:"0"},{type:"string",key:"adunit_id",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"traceid",value:"0"},{type:"uint64",key:"TimeMs",value:"0"},{type:"string",key:"useragent",value:"0"},{type:"uint32",key:"type",value:"0"},{type:"uint32",key:"diaphaneity",value:"0"},{type:"uint32",key:"PageX",value:"0"},{type:"uint32",key:"PageY",value:"0"},{type:"uint32",key:"ScreenHeight",value:"0"},{type:"uint32",key:"ScreenWidth",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"orig_weapp_id",value:""}],17045:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"weapp_path",value:""},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"device_type",value:""},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"ad_pos_x",value:"0"},{type:"uint32",key:"ad_pos_y",value:"0"},{type:"uint32",key:"exp_time",value:"0"},{type:"uint32",key:"clk_complaint_button",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"service_type",value:"0"},{type:"uint32",key:"first_grade_id",value:"0"},{type:"string",key:"first_grade_desc",value:""},{type:"uint64",key:"first_grade_time",value:"0"},{type:"uint32",key:"second_grade_id",value:"0"},{type:"string",key:"second_grade_desc",value:""},{type:"uint64",key:"second_grade_time",value:"0"},{type:"uint32",key:"is_finish_complaint",value:"0"},{type:"uint32",key:"is_click_ad",value:"0"},{type:"uint64",key:"click_ad_time",value:"0"},{type:"uint64",key:"click_ad_time_ms",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"feedback_reason",value:"0"}],16487:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"click_time",value:"0"},{type:"uint32",key:"click_cnt",value:"0"},{type:"uint32",key:"start_pos_x",value:"0"},{type:"uint32",key:"start_pos_y",value:"0"},{type:"uint32",key:"end_pos_x",value:"0"},{type:"uint32",key:"end_pos_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"uint32",key:"block_click",value:"0"},{type:"uint64",key:"start_posx",value:"0"},{type:"uint64",key:"start_posy",value:"0"},{type:"uint64",key:"end_posx",value:"0"},{type:"uint64",key:"end_posy",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16e3:[{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"uint64",key:"play_duration",value:"0"},{type:"uint64",key:"click_close_ts",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"uint64",key:"video_first_play_ts",value:"0"},{type:"uint64",key:"card_first_show_ts",value:"0"},{type:"uint64",key:"click_card_ts",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"current_play_url",value:""},{type:"string",key:"last_fetch_url",value:""},{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint64",key:"video_duration",value:"0"},{type:"uint32",key:"is_ended",value:"0"}],15730:[{type:"uint64",key:"load_begin_time",value:"0"},{type:"uint64",key:"load_end_time",value:"0"},{type:"uint64",key:"load_cost_time",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"report_type",value:"0"},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"load_departure_time",value:"0"},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],15979:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"lastclkperiod",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"uint32",key:"pagestaytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"string",key:"orig_weapp_id",value:""}],15980:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"opentime",value:"0"},{type:"uint64",key:"closetime",value:"0"},{type:"uint64",key:"staytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"string",key:"act_type",value:""},{type:"string",key:"act_type_str",value:""},{type:"uint32",key:"act_type_int",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16295:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"id_key",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"string",key:"source_url",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"expand_feild",value:""},{type:"string",key:"expand_feild2",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"id_key_group",value:"924"},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"machine_brand",value:""},{type:"string",key:"machine_type",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"}],17035:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"touch_start_x",value:"0"},{type:"uint32",key:"touch_start_y",value:"0"},{type:"uint32",key:"touch_end_x",value:"0"},{type:"uint32",key:"touch_end_y",value:"0"},{type:"uint64",key:"touch_duration",value:"0"},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],18072:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"last_clicks",value:""},{type:"uint32",key:"banner_x",value:"0"},{type:"uint32",key:"banner_y",value:"0"},{type:"uint32",key:"banner_width",value:"0"},{type:"uint32",key:"banner_height",value:"0"},{type:"uint32",key:"exp_ms",value:"0"},{type:"uint32",key:"clk_ms",value:"0"},{type:"uint32",key:"banner_clk_screen_x",value:"0"},{type:"uint32",key:"banner_clk_screen_y",value:"0"},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"last_show_time",value:"0"},{type:"uint64",key:"slotid",value:"0"}],18517:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"action",value:"0"},{type:"string",key:"traceid",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"publisher_appid",value:""},{type:"uint32",key:"row_number",value:"0"},{type:"uint32",key:"column_number",value:"0"},{type:"uint32",key:"box_index",value:"0"},{type:"uint64",key:"action_timems",value:"0"},{type:"uint32",key:"clk_x",value:"0"},{type:"uint32",key:"clk_y",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"machine_type",value:""}],19429:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"show_time",value:"0"},{type:"uint64",key:"end_time",value:"0"},{type:"uint64",key:"show_delay_duration",value:"0"},{type:"uint64",key:"fetch_duration",value:"0"}],19213:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19214:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"shareType",value:"0"},{type:"uint32",key:"tousername",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19837:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"slotid",value:""},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"ext_info",value:""},{type:"uint64",key:"p1",value:"0"},{type:"uint64",key:"p2",value:"0"},{type:"uint64",key:"p3",value:"0"},{type:"uint64",key:"p4",value:"0"},{type:"uint64",key:"p5",value:"0"},{type:"uint64",key:"p6",value:"0"},{type:"uint64",key:"p7",value:"0"},{type:"uint64",key:"p8",value:"0"},{type:"uint64",key:"p9",value:"0"},{type:"uint64",key:"p10",value:"0"},{type:"uint64",key:"p11",value:"0"},{type:"uint64",key:"p12",value:"0"},{type:"uint64",key:"p13",value:"0"},{type:"uint64",key:"p14",value:"0"},{type:"uint64",key:"p15",value:"0"},{type:"uint64",key:"p16",value:"0"},{type:"string",key:"instance_id",value:""},{type:"uint32",key:"scene",value:"0"},{type:"uint32",key:"error_code",value:"0"},{type:"uint64",key:"p17",value:"0"},{type:"uint64",key:"p18",value:"0"},{type:"uint64",key:"p19",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint64",key:"p20",value:"0"},{type:"uint64",key:"p21",value:"0"},{type:"string",key:"machine_brand",value:""},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"}],20480:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"string",key:"click_pos",value:""}],20317:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"branch_id",value:""},{type:"string",key:"branch_dim",value:""}],21644:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"crt_size",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"ad_unit_id",value:""},{type:"uint32",key:"use_gauss_video",value:"0"},{type:"string",key:"video_url",value:""},{type:"string",key:"gauss_video_url",value:""},{type:"uint32",key:"use_expand_style",value:"0"},{type:"uint32",key:"exp_use_gauss_video",value:"0"},{type:"uint32",key:"exp_use_expand_style",value:"0"}],23415:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"string",key:"adunitid",value:""},{type:"uint32",key:"button_type",value:"0"},{type:"uint64",key:"button_time",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint64",key:"ad_clk_time",value:"0"},{type:"uint64",key:"ad_exp_time",value:"0"},{type:"uint32",key:"ad_clk_x",value:"0"},{type:"uint32",key:"ad_clk_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"}]},r=e=>{const t=i[e.toString()];return t?t.concat([]):[]}},7868:(e,t,n)=>{"use strict";n.d(t,{r:()=>E,J:()=>w});var i=n(2605),r=n(1095),o=n(7646),a=n(2241),s=n(3170),c=n(2582),l=n(4643),u=n(665);const d=(0,a.Fr)((0,o.Ce)(!1,"advert_report"));let h="";const p=c.iw;let f="",g="",_="",m="",y="",v="",A=!0;let b="";u.Z.onReady((()=>{h=(0,l._t)()||"";const e=(0,s.Oo)();f=e.system,g=e.version,_=e.SDKVersion,y=e.model,v=e.brand,A=(0,r.aI)();try{b=u.Z.accountInfo.appId,m=__libVersionInfo__.updateTime}catch(e){}}));const w=(e,t)=>{let n=(0,i.x)(e);if(n&&0!==n.length)return t=Object.assign({publisher_appid:b,appid:b,orig_weapp_id:"",network_type:"",wechat_version:g,platform:p,system_version:f,device_orientation:h,wxapp_lib_version:_,wxapp_lib_time:m,machine_type:y,ad_platform:A?1:0},t),t=Object.assign({DeviceModel:y,DeviceBrand:v,OsName:p,OsVersion:f},t),n=n.map((e=>({type:e.type,value:(t[e.key]||e.value).toString()}))),d({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}}).catch((e=>{}))},E=(e,t,n)=>{(({key:e,id:t})=>{"object"==typeof e&&(!t&&(t=e.idKeyGroup),e=e.idKey),0===e&&(e="0"),Reporter.reportIDKeyDirectly({id:t||924,key:e,force:!0})})({key:e}),(({key:e,id:t,extInfo:n,reportData:i})=>{if("object"==typeof e&&(!t&&(t=e.idKeyGroup),e=e.idKey),0===e&&(e="0"),i=i||{},n&&"string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=n.toString()}w(16295,{id_key:e,id_key_group:t||924,report_time:+new Date,ad_pos_type:i.ad_pos_type||0,source_url:i.source_url||"",expand_feild:i.reportAdData||"",expand_feild2:n,aid:i.aid||0,traceid:i.traceid||"",ad_unit_id:i.ad_unit_id})})({key:e,extInfo:t,reportData:n})}},8579:(e,t,n)=>{"use strict";n.d(t,{IN:()=>a,ET:()=>c,$g:()=>u});const i=(e,t)=>({idKey:e,idKeyGroup:t});let r;!function(e){e[e.COMMON=924]="COMMON",e[e.SPLASHAD=1288]="SPLASHAD",e[e.CUSTOMAD=1390]="CUSTOMAD"}(r||(r={}));const o=e=>i(e,r.COMMON),a={AD_BANNER_LOAD_ERROR:o(5),AD_VIDEO_LOAD_ERROR:o(10),REWARDED_VIDEO_PARSE_ERROR:o(11),REWARDED_VIDEO_RENDER_ERROR:o(12),REWARDED_VIDEO_LOAD_ERROR:o(13),REWARDED_VIDEO_FOLLOW_SUCCESS:o(14),OPEN_URL_ERROR:o(21),OPEN_WXAPP_ERROR:o(22),OPEN_CANVAS_ERROR:o(23),ADD_CONTACT_ERROR:o(24),LAUNCH_APP_ERROR:o(25),OPEN_WEBAPPSTORE_ERROR:o(26),ADD_DOWNLOAD_TASK_ERROR:o(28),CLICK_REPORT_ERROR:o(32),EXPOSURE_REPORT_ERROR:o(33),FOLLOW_REPORT_ERROR:o(34),REWARDED_VIDEO_ANIMATE_ERROR:o(35),AD_FOLLOWED:o(37),AD_INSTALLED:o(38),AD_INTERSTITIAL_LOAD_ERROR:o(39),REWARDED_VIDEO_INSTANCE_BROKEN:o(50),PRELOAD_MINIENV_SUCCESS:o(86),PRELOAD_MINIENV_ERROR:o(87),AD_GRID_LOAD_SUCCESS:o(88),AD_GRID_LOAD_COUNT_ERROR:o(89),AD_GRID_LOAD_ERROR:o(90),PREDOWNLOAD_SUCCESS:o(96),PREDOWNLOAD_ERROR:o(97),REWARDED_VIDEO_OTHER_SHOW_ERROR:o(105),BATCHLOAD_SUCCESS:o(112),BATCHLOAD_ERROR:o(113),REWARDED_VIDEO_BUTTON_WIDTH_ERROR:o(114),REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR:o(115),BIND_GUIDE_SUCCESS:o(119),BIND_GUIDE_ERROR:o(120),REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR:o(121),RIGHTBUTTON_HIDE_ERROR:o(127),REWARDED_VIDEO_RELATION_FETCH_ERROR:o(128),GET_DEVICEINFO_ERROR:o(129),THIRD_ERROR:o(130),GET_DEVICEINFO_SUCCESS:o(131),GET_WAID_SUCCESS:o(132),GET_WAID_ERROR:o(133),READ_ADINFOS_ERROR:o(134),AD_FETCH_SUCCESS:o(135),REWARDED_VIDEO_PRELOAD_ERROR:o(136),REWARDED_VIDEO_PRELOAD_SUCCESS:o(137),READ_ADINFOS_SUCCESS:o(138),ANALYSE_DEBUG_REPORT_ERROR:o(139),PRELOAD_CALL_ERROR:o(140),PRELOAD_LOAD_ERROR:o(141),PRELOAD_LOAD_SUCCESS:o(142),PRELOAD_USE_SUCCESS:o(143),PRELOAD_USE_ERROR:o(144),PRELOAD_DOWNLOAD_SUCCESS:o(145),PRELOAD_DOWNLOAD_ERROR:o(146),REPORT_VIDEO_FAILED:o(147),REWARD_GAUSS_EXISTS:o(148),REWARD_USE_GAUSS:o(149),REWARD_USE_EXPAND_STYLE:o(150),REWARD_USE_GAUSS_AND_EXPAND_STYLE:o(151),REWARDED_VIDEO_KEEP_ALIVE:o(152),REWARDED_VIDEO_END:o(154),OPEN_CHANNELS_ACTIVITY_SUCCESS:o(156),OPEN_CHANNELS_ACTIVITY_FAILED:o(157),OPEN_CHANNELS_LIVE_SUCCESS:o(158),OPEN_CHANNELS_LIVE_FAILED:o(159),OPEN_CHANNELS_USER_PROFILE_SUCCESS:o(160),OPEN_CHANNELS_USER_PROFILE_FAILED:o(161),REWARD_CHANNELS_CALLBACK_SUCCESS:o(162),REWARD_CHANNELS_CALLBACK_FAILED:o(163),H5_PRELOAD_CARD_CLICKED:o(164),H5_PRELOAD_BUTTON_CLICKED:o(165),H5_PRELOAD_SUCCESS:o(166),H5_PRELOAD_FAILED:o(167),H5_PRELOAD_PLAYABLE_CLICKED:o(168),GET_CHANNELS_LIVE_STATUS_SUCCESS:o(169),GET_CHANNELS_LIVE_STATUS_FAILED:o(170),REWARDED_VIDEO_DURATION_ZERO:o(171),OPEN_WEBSTORE_ERROR:o(181)},s=e=>i(e,r.SPLASHAD),c={dataLoadSuccess:s(0),dataLoadFail:s(1),dataPreloadSuccess:s(2),dataPreloadFail:s(3),handleDataFail:s(4),launchAcceptShouldShow:s(5),menuAcceptShouldShow:s(6),readFileFail:s(7),launchShowSplashAdSuccess:s(8),menuShowSplashAdSuccess:s(9),showSplashAdFail:s(10),firstRenderFail:s(11),firstInsertFail:s(12),secondRenderFail:s(13),secondInsertFail:s(14),iosThirdInsertFail:s(15),checkAdStateFail:s(16),adOfflineClose:s(17),readFileDataFail:s(18),firstShowSuccess:s(19),showSplashAdMenuSuccess:s(20),showSplashAdMenuFail:s(21),secondShowSuccess:s(22),removeFileDataFail:s(23),landingPageFail:s(24),frequencyControlFail:s(25),frequencyControlReturn:s(26),bulkCopyFileFail:s(27),getAdInfosFail:s(28),getAidFail:s(29),setExposureTagFail:s(30),NO_ADINFOS:s(31),NO_AID:s(32),MATERIAL_NOT_READY:s(33),CHECK_AD_STATUS_ERROR:s(34),CRT_ORIENTATION_NOT_SURE:s(35),EXPOSURE_TIMES_LIMIT:s(36),START_CHECK_AD_STATUS:s(37),CHECK_AD_STATUS_SUCCESS:s(38),OTHER_ADS_EMIT_FETCH:s(39),WRITE_ADINFOS_SUCCESS:s(40),WRITE_ADINFOS_FAIL:s(41)},l=e=>i(e,r.CUSTOMAD),u={LOAD_FAILED:l(1),PRELOAD_SUCCESS:l(2),PRELOAD_FAILED:l(3),PARSE_FAILED:l(4),TPL_RENDER_SUCCESS:l(5),TPL_PARSE_FAILED:l(6),TPL_LOAD_FAILED:l(7),AD_LIMIT_TIME:l(8),AD_LIMIT_BOUNDARY:l(9),RELATION_FETCH_ERROR:l(10),SHOW_FAILED1:l(11),SHOW_FAILED2:l(12),AD_VIDEO_LOAD_FAILED:l(13),FOLLOW_SUCCESS:l(14),FOLLOW_FAILED:l(15),RENDER_SUCCESS:l(16),RENDER_FAILED:l(17),REFETCH_SUCCESS:l(18),REFETCH_FAILED:l(19),LOAD_SUCCESS:l(20),WIDTH_GET_ERROR:l(21)}},8476:(e,t,n)=>{"use strict";n.d(t,{S3:()=>p,S0:()=>f,v3:()=>g,uj:()=>_,lv:()=>y,SQ:()=>A,NN:()=>b});var i=n(2582),r=n(3170),o=n(1093),a=n(7868),s=n(1095),c=n(5708),l=n(9185),u=n(665),d=n(4643),h=n(9237);const p={startTime:new Date,gameAppId:"",deviceOrientation:"",screenWidth:0,screenHeight:0,systemVersion:"",wechatVersion:"",SDKVersion:"",SDKVersionTime:"",envVersion:"",brand:"",model:"",platform:i.iw,isWaGame:!0,isApp:!1,isIOS:i.cj,isAndroid:i.wZ,isIPad:null,oaid:"",imei:"",idfa:"",common_device_id:"{}",adNetworkType:""},f={enterForegroundTime:new Date,gameDuration:0,currentScene:1011,weappPath:"index.html",lastWebviewId:0,currentWebviewId:0,currentOpenType:""},g=()=>(0,d.ei)(p,["oaid","imei","idfa","common_device_id"]),_=()=>{if(!p.isWaGame){const e=(0,r.xI)();p.screenWidth=e.screenWidth,p.screenHeight=e.screenHeight,p.deviceOrientation=p.screenWidth>p.screenHeight?"landscape":"portrait"}return p.deviceOrientation};let m=()=>{};const y=()=>m(),v=()=>new Promise((e=>{m=e})),A=new Promise((e=>{u.Z.onReady((()=>{var t;p.startTime=new Date,p.deviceOrientation=(0,d._t)()||"",p.envVersion=u.Z.envVersion;const n=(0,r.Oo)(),c=(0,r.Ew)();p.screenWidth=c.screenWidth||0,p.screenHeight=c.screenHeight||0,p.systemVersion=n.system,p.wechatVersion=n.version,p.SDKVersion=n.SDKVersion,p.brand=n.brand,p.model=n.model,p.isIPad=null===(t=n.model)||void 0===t?void 0:t.includes("iPad"),p.isWaGame=(0,s.aI)(),p.isApp=(0,s.N0)();try{p.gameAppId=u.Z.accountInfo.appId,p.SDKVersionTime=__libVersionInfo__.updateTime}catch(e){}Promise.all([new Promise((e=>{(0,o.yx)((t=>{p.oaid=t,e()}))})),new Promise((e=>{(0,o.dz)().then((({imei:t,oaid:n,commonid:r})=>{i.cj?p.idfa=t:i.wZ&&(p.oaid=n,p.imei=t),p.common_device_id=r||"{}",e(),v().then((()=>{(0,a.r)(h.IN.GET_DEVICEINFO_SUCCESS)}))})).catch((t=>{e(),v().then((()=>{(0,a.r)(h.IN.GET_DEVICEINFO_ERROR,t)}))}))}))]).then((()=>e(p)))}))})),b=e=>{const t=Object.keys(e);for(const n of t)p[n]=e[n]};try{(0,l.H)((({webviewId:e,openType:t,path:n})=>{p.isWaGame||(f.lastWebviewId=f.currentWebviewId,f.currentWebviewId=e||0,f.currentOpenType=t,f.weappPath=n)}))}catch(e){}(0,c.dN)((({scene:e})=>{f.enterForegroundTime=new Date,f.currentScene=e})),(0,c.vv)((()=>{f.gameDuration+=Date.now()-f.enterForegroundTime.getTime()}))},9237:(e,t,n)=>{"use strict";n.d(t,{FF:()=>ai,W:()=>_e,z5:()=>he,IN:()=>ge.IN,fr:()=>Te,EM:()=>Se,kv:()=>me});var i=n(3356),r=n.n(i),o=n(1503),a=n.n(o),s=n(2102),c=n.n(s),l=n(9536),u=n.n(l),d=n(665),h=n(1095),p=n(1093),f=n(8997),g=n(3324),_=n(2886);const m=(e,t=!1)=>{let n=t?"<?xml version='1.0' encoding='utf-8' ?>":"";return n+=`<${e.name}>`,e.children.length>0?n+=(e=>e.children&&e.children.length>0?e.children.map((e=>m(e))).join(""):"")(e):n+=`<![CDATA[${e.content.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}]]>`,n+=`</${e.name}>`,n};var y=n(8582),v=n(4684),A=n(570),b=n(5328);const w=Symbol("signExport"),E=()=>(e,t)=>{e[w]=e[w]||new Set,e[w].add(t)},T=(e,t)=>{const n=Array.isArray(t)?t:[t];for(const t of n)if(!(t in e)||"function"!=typeof e[t])throw new Error(`${t} is not the function method of the class`);return n.map((t=>e[t]))},S=(e,t=!1)=>(n,i,o)=>{const a=o.value,s=T(n,e);o.value=t?function(){var e=r()((function*(...e){const t=yield a.call(this,...e);for(const e of s)yield e.call(this,t);return t}));return function(){return e.apply(this,arguments)}}():function(...e){const t=a.call(this,...e);if(t instanceof Promise)return t.then((e=>{for(const t of s)t.call(this,e);return e}));for(const e of s)e.call(this,t);return t}},C=(e,t=!1)=>(n,i,o)=>{const a=o.value,s=T(n,e);o.value=t?function(){var e=r()((function*(...e){try{return yield a.call(this,...e)}catch(e){for(const t of s)yield t.call(this,e);throw e}}));return function(){return e.apply(this,arguments)}}():function(...e){try{const t=a.call(this,...e);return t instanceof Promise&&t.catch((e=>{for(const t of s)t.call(this,e)})),t}catch(e){for(const t of s)t.call(this,e);throw e}}};var I,x,D,O,P,R,k,N,M,L,B,F,U,W,j,G,V,H,z,Z,Y,$,q,Q,J,X,K,ee,te,ne,ie=n(4643),re=n(2605),oe=n(8476),ae=n(6714);let se=(I=E(),x=E(),D=E(),O=E(),P=E(),R=E(),k=E(),N=E(),M=E(),L=E(),B=E(),F=E(),U=E(),W=E(),j=E(),G=E(),V=E(),H=E(),z=E(),Z=E(),Y=E(),$=E(),q=E(),Q=E(),J=E(),X=E(),K=E(),ee=E(),te=E(),ne=class{constructor(e){this.adProxy=e,this.timePoints={},this.analyseBranchInfo=null}get adType(){return this.adProxy.getAdType()}get data(){return this.adProxy.data}get convertedAdData(){return this.adProxy.convertedAdData}get datas(){return this.adProxy.datas}get adUnitId(){return this.adProxy.getAdUnitId()}get pluginAppid(){return this.adProxy.getPluginAppid()}get lastClickTime(){return this.adProxy.getLastClickTime()}getTimePoint(e){return this.timePoints[e]?this.timePoints[e]:0}setTimePoint(e,t={}){if("splashAd"===this.adType)return void(this.timePoints[e]=Date.now());["p2","p12"].includes(e)&&(this.timePoints={p1:this.timePoints.p1||0});const{time:n}=t;this.timePoints[e]=n||Date.now()}reportTimePoints({slotid:e,costtype:t,splash_instance_id:n="",scene:i=0,errCode:r=0,extInfo:o={}}){var s;if(!["customAd","incentive-video","splashAd","interstitialAd"].includes(this.adType))return;this.reportMMData(19837,a()({slotid:e,costtype:t,ext_info:JSON.stringify(Object.assign({},o,{adUnitId:this.adUnitId,is_game:!0})),instance_id:n,scene:i,crt_size:(null===(s=this.data)||void 0===s?void 0:s.crt_size)||0,error_code:r},this.timePoints))}reportCloseAction(e){return this.reportMMData(16743,e)}reportAdEntranceExposure(e){return this.reportMMData(18988,e)}reportTouchClick(e){return this.reportMMData(16487,e)}reportCancelRewardPlayablePage(e){return this.reportMMData(20299,e)}formatMMData(e,t){var n;const i=(0,re.x)(e);if(!i||0===i.length)return null;let r=this.data||{aid:0,traceid:"",crt_size:0};if("grid"===this.adType&&-1!==[16139].indexOf(e))try{r=this.datas[this.datas.length-1]}catch(e){}return Object.assign(t,{aid:r.aid,traceid:r.traceid,crt_size:r.crt_size,slotid:b.DX[this.adType],report_time:Date.now(),ad_pos_type:null!==(n=b._W[this.adType])&&void 0!==n?n:0,publisher_appid:this.pluginAppid?this.pluginAppid:oe.S3.gameAppId,appid:this.pluginAppid?this.pluginAppid:oe.S3.gameAppId,orig_weapp_id:this.pluginAppid?oe.S3.gameAppId:"",network_type:oe.S3.adNetworkType,wechat_version:oe.S3.wechatVersion,platform:oe.S3.platform,system_version:oe.S3.systemVersion,device_orientation:oe.S3.deviceOrientation,wxapp_lib_version:oe.S3.SDKVersion,wxapp_lib_time:oe.S3.SDKVersionTime,machine_type:oe.S3.model,machine_brand:oe.S3.brand,screen_width:oe.S3.screenWidth,screen_height:oe.S3.screenHeight,ad_platform:oe.S3.isWaGame?1:0,ad_unit_id:this.adUnitId}),i.map((e=>({type:e.type,value:(t[e.key]||e.value).toString()})))}reportMMData(e,t){const n=this.formatMMData(e,t);return(0,f.Lo)({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}})}reportAbnormalDetect(e){const t={adunit_id:this.adUnitId,appid:oe.S3.gameAppId};if(Object.assign(e,t),"object"==typeof e)return this.reportMMData(16139,e)}reportAdIDKey({key:e,id:t}){var n;let i=t,r=e;"object"==typeof r&&(!i&&(i=r.idKeyGroup),r=r.idKey),i||(i=null!==(n=b.gQ[this.adType])&&void 0!==n?n:924),0===r&&(r="0"),Reporter.reportIDKeyDirectly({id:i,key:r})}processStackMsg(e){let t=(e.stack||"").replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,"");const n=e.toString();return t.indexOf(n)<0&&(t=`${n}@${t}`),t}reportAdIDKeyErrorData({key:e,id:t,extInfo:n=""}){var i,r;let o=e,a=t,s=n;"object"==typeof o&&(!a&&(a=o.idKeyGroup),o=o.idKey),0===o&&(o="0");let c="",l="";try{if(this.data){const e={crt_size:this.data.crt_size,product_type:this.data.product_type,dest_type:this.data.dest_type,url:this.data.url};if([_e.CRT_SIZE_REWARD_VEDIO169,_e.CRT_SIZE_REWARD_VEDIO916,_e.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(this.data.crt_size)){const t=this.convertedAdData;t&&(e.is_gauss_blur=(0,ae.zt)(t),e.is_expand_style=(0,ae.zi)(t),l=e.is_gauss_blur?t.gaussVideo.src:t.shortVideo.src)}else this.adProxy.isBannerAd()&&(l=this.data.image_url);c=JSON.stringify(e)}if(s&&"string"!=typeof s)try{s instanceof Error&&(s=this.processStackMsg(s)),s=JSON.stringify(s)}catch(e){s=s.toString()}}catch(e){var u;s=this.processStackMsg(e),l="",c=null===(u=this.data)||void 0===u?void 0:u.crt_size}return this.reportMMData(16295,{id_key:o,id_key_group:null!==(i=null!==(r=a)&&void 0!==r?r:b.gQ[this.adType])&&void 0!==i?i:924,report_time:+new Date,source_url:l,expand_feild:c,expand_feild2:s,scene:this.adProxy.scene||0})}reportAdMonitorData(e,t){this.reportAdIDKey({key:e}),this.reportAdIDKeyErrorData({key:e,extInfo:t})}reportEndPage({slotid:e,costtype:t,isGame:n=0,posType:i,ace_type:r,exposure_duration:o=0}){return this.reportMMData(19002,{slotid:e,costtype:t,is_game:n,pos_type:i,ace_type:r,exposure_duration:o})}reportAdFeedbackData(e){var t,n;const i={};if("grid"===this.adType){var r;const e={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(r=this.datas)||void 0===r||r.forEach((t=>{t.extBackComm&&e.viewid.push(t.extBackComm.viewid),e.s_pt.push(t.pt),e.s_aid.push(t.aid),e.s_trace_id.push(t.traceid)})),i.grid_feedback_info=e}return this.reportMMData(17045,{appid:oe.S3.gameAppId,weapp_path:oe.S0.weappPath,ad_unit_id:this.adUnitId,device_type:oe.S3.model||"",ad_height:e.adHeight,ad_width:e.adWidth,screen_height:oe.S3.screenHeight,screen_width:oe.S3.screenWidth,ad_pos_x:e.adPosX,ad_pos_y:e.adPosY,exp_time:e.expTime,clk_complaint_button:1,slotid:b.DX[this.adType],service_type:oe.S3.isWaGame?1:0,first_grade_id:e.firstGradeId,first_grade_desc:e.firstGradeDesc,first_grade_time:e.firstGradeTime,second_grade_id:e.secondGradeId,second_grade_desc:e.secondGradeDesc,second_grade_time:e.secondGradeTime,is_finish_complaint:0,is_click_ad:null!==(t=e.isClickAd)&&void 0!==t?t:0!==this.lastClickTime?1:0,click_ad_time_ms:null!==(n=e.clickAdTimeMs)&&void 0!==n?n:this.lastClickTime,feedback_reason:e.feedbackReason,ext_feedback_comm:JSON.stringify(i)})}reportBehaviorButton({button:e,playDuration:t,preloadVideo:n,preloadVideoSuccess:i,videoFirstPlay:r,cardFirstShow:o,clickCard:a,pressInterval:s,currentPlayUrl:c,lastFetchUrl:l,isEnded:u,videoDuration:d}){return this.reportMMData(16e3,{click_button:e,play_duration:t,click_close_ts:+new Date,preload_video:n,preload_video_success:i,video_first_play_ts:r,card_first_show_ts:o,click_card_ts:a,press_interval:s,current_play_url:c,last_fetch_url:l,is_ended:u?1:0,video_duration:d})}reportVideoLoadTime({beginTime:e=0,endTime:t=0,departureTime:n=0,preloadVideo:i=0,preloadVideoSuccess:r=0,reportType:o=0}){const a=t-n-e;return a>0?this.reportMMData(15730,{load_begin_time:e,load_end_time:t,load_departure_time:n,load_cost_time:a,preload_video:i,preload_video_success:r,report_type:o}):Promise.resolve()}reportRepeatClick({slotId:e,costType:t,clkCnt:n,lastClkPeriod:i,retCode:r,costTime:o,pageStayTime:a,jsapiName:s}){return this.reportMMData(15979,{slotid:e,costtype:t,clkcnt:n,currenttime:+new Date,lastclkperiod:i,retcode:r,costtime:o,pagestaytime:a,jsapiname:s})}reportLandingTime({slotId:e,costType:t,openTime:n,closeTime:i,stayTime:r,jsapiName:o,clickTime:a,clkCnt:s,retCode:c,costTime:l,actTypeInt:u,actTypeStr:d}){return this.reportMMData(15980,{slotid:e,costtype:t,currenttime:a,opentime:n,closetime:i,staytime:r,jsapiname:o,clkcnt:s,retcode:c,costtime:l,act_type_int:u,act_type_str:d})}reportVideoLastClick({touchStartX:e,touchStartY:t,touchEndX:n,touchEndY:i,touchDuration:r,screenWidth:o,screenHeight:a}){return this.reportMMData(17035,{touch_start_x:e,touch_start_y:t,touch_end_x:n,touch_end_y:i,touch_duration:r,screenwidth:o,screenheight:a})}reportBannerLastClick({lastClickArr:e,top:t,left:n,width:i,height:r,expMs:o,clickMs:a,bannerClkScreenX:s,bannerClkScreenY:c,lastShowTime:l}){return this.reportMMData(18072,{last_clicks:e,banner_x:t,banner_y:n,banner_width:i,banner_height:r,exp_ms:o,clk_ms:a,banner_clk_screen_x:s,banner_clk_screen_y:c,last_show_time:l,slotid:b.DX[this.adType]})}reportRelationFetchDuration({startTime:e,showTime:t,endTime:n}){return this.reportMMData(19429,{start_time:e,show_time:t,end_time:n,show_delay_duration:0===t?0:n-t,fetch_duration:n-e})}reportMMClickPos({clickPos:e}){var t;return this.reportMMData(20480,{slotid:b.DX[this.adType],costtype:null!==(t=this.data)&&void 0!==t&&t.is_cpm?1:2,currenttime:Date.now(),click_pos:e})}reportADFunnelModel({adtype:e,stage:t}){const n=[e,t].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"GameADFunnelModel",value:n,force:!0,immediately:!0})}recordAnalyseBranchInfo({branchId:e,branchDim:t}){this.analyseBranchInfo={branchId:e,branchDim:t}}resetAnalyseBranchInfo(){this.analyseBranchInfo=null}reportAnalyseInfo(e){const t=b.WG[this.adType]||"viewable";if(!oe.S3.isWaGame||e!==t)return;const n=this.analyseBranchInfo;n&&("release"!==oe.S3.envVersion&&this.adProxy.reportAnalyseDebugInfo(n),this.reportMMData(20317,{branch_id:n.branchId,branch_dim:n.branchDim}))}reportRewardGaussVideo({useGaussVideo:e,useExpandStyle:t,videoUrl:n,gaussVideoUrl:i,expUseGaussVideo:r,expUseExpandStyle:o}){this.reportMMData(21644,{use_gauss_video:e?1:0,video_url:n,gauss_video_url:i,use_expand_style:t?1:0,exp_use_gauss_video:r,exp_use_expand_style:o})}reportPopupClickAction({buttonType:e,buttonTime:t,adClkTime:n,adExpTime:i,adClkX:r,adClkY:o,adWidth:a,adHeight:s,isGame:c,costtype:l}){this.reportMMData(23415,{adunitid:this.adUnitId,button_type:e,button_time:t,ad_clk_time:n,ad_exp_time:i,ad_clk_x:r,ad_clk_y:o,ad_width:a,ad_height:s,is_game:c,costtype:l})}},c()(ne.prototype,"getTimePoint",[I],Object.getOwnPropertyDescriptor(ne.prototype,"getTimePoint"),ne.prototype),c()(ne.prototype,"setTimePoint",[x],Object.getOwnPropertyDescriptor(ne.prototype,"setTimePoint"),ne.prototype),c()(ne.prototype,"reportTimePoints",[D],Object.getOwnPropertyDescriptor(ne.prototype,"reportTimePoints"),ne.prototype),c()(ne.prototype,"reportCloseAction",[O],Object.getOwnPropertyDescriptor(ne.prototype,"reportCloseAction"),ne.prototype),c()(ne.prototype,"reportAdEntranceExposure",[P],Object.getOwnPropertyDescriptor(ne.prototype,"reportAdEntranceExposure"),ne.prototype),c()(ne.prototype,"reportTouchClick",[R],Object.getOwnPropertyDescriptor(ne.prototype,"reportTouchClick"),ne.prototype),c()(ne.prototype,"reportCancelRewardPlayablePage",[k],Object.getOwnPropertyDescriptor(ne.prototype,"reportCancelRewardPlayablePage"),ne.prototype),c()(ne.prototype,"reportMMData",[N],Object.getOwnPropertyDescriptor(ne.prototype,"reportMMData"),ne.prototype),c()(ne.prototype,"reportAbnormalDetect",[M],Object.getOwnPropertyDescriptor(ne.prototype,"reportAbnormalDetect"),ne.prototype),c()(ne.prototype,"reportAdIDKey",[L],Object.getOwnPropertyDescriptor(ne.prototype,"reportAdIDKey"),ne.prototype),c()(ne.prototype,"processStackMsg",[B],Object.getOwnPropertyDescriptor(ne.prototype,"processStackMsg"),ne.prototype),c()(ne.prototype,"reportAdIDKeyErrorData",[F],Object.getOwnPropertyDescriptor(ne.prototype,"reportAdIDKeyErrorData"),ne.prototype),c()(ne.prototype,"reportAdMonitorData",[U],Object.getOwnPropertyDescriptor(ne.prototype,"reportAdMonitorData"),ne.prototype),c()(ne.prototype,"reportEndPage",[W],Object.getOwnPropertyDescriptor(ne.prototype,"reportEndPage"),ne.prototype),c()(ne.prototype,"reportAdFeedbackData",[j],Object.getOwnPropertyDescriptor(ne.prototype,"reportAdFeedbackData"),ne.prototype),c()(ne.prototype,"reportBehaviorButton",[G],Object.getOwnPropertyDescriptor(ne.prototype,"reportBehaviorButton"),ne.prototype),c()(ne.prototype,"reportVideoLoadTime",[V],Object.getOwnPropertyDescriptor(ne.prototype,"reportVideoLoadTime"),ne.prototype),c()(ne.prototype,"reportRepeatClick",[H],Object.getOwnPropertyDescriptor(ne.prototype,"reportRepeatClick"),ne.prototype),c()(ne.prototype,"reportLandingTime",[z],Object.getOwnPropertyDescriptor(ne.prototype,"reportLandingTime"),ne.prototype),c()(ne.prototype,"reportVideoLastClick",[Z],Object.getOwnPropertyDescriptor(ne.prototype,"reportVideoLastClick"),ne.prototype),c()(ne.prototype,"reportBannerLastClick",[Y],Object.getOwnPropertyDescriptor(ne.prototype,"reportBannerLastClick"),ne.prototype),c()(ne.prototype,"reportRelationFetchDuration",[$],Object.getOwnPropertyDescriptor(ne.prototype,"reportRelationFetchDuration"),ne.prototype),c()(ne.prototype,"reportMMClickPos",[q],Object.getOwnPropertyDescriptor(ne.prototype,"reportMMClickPos"),ne.prototype),c()(ne.prototype,"reportADFunnelModel",[Q],Object.getOwnPropertyDescriptor(ne.prototype,"reportADFunnelModel"),ne.prototype),c()(ne.prototype,"recordAnalyseBranchInfo",[J],Object.getOwnPropertyDescriptor(ne.prototype,"recordAnalyseBranchInfo"),ne.prototype),c()(ne.prototype,"resetAnalyseBranchInfo",[X],Object.getOwnPropertyDescriptor(ne.prototype,"resetAnalyseBranchInfo"),ne.prototype),c()(ne.prototype,"reportAnalyseInfo",[K],Object.getOwnPropertyDescriptor(ne.prototype,"reportAnalyseInfo"),ne.prototype),c()(ne.prototype,"reportRewardGaussVideo",[ee],Object.getOwnPropertyDescriptor(ne.prototype,"reportRewardGaussVideo"),ne.prototype),c()(ne.prototype,"reportPopupClickAction",[te],Object.getOwnPropertyDescriptor(ne.prototype,"reportPopupClickAction"),ne.prototype),ne);var ce=n(1106);n(2942),n(2185);let le,ue,de,he,pe,fe;!function(e){e[e.SOURCE_UNKNOW=0]="SOURCE_UNKNOW",e[e.SOURCE_MP=1]="SOURCE_MP",e[e.SOURCE_OSS=2]="SOURCE_OSS",e[e.SOURCE_MP_OSS=3]="SOURCE_MP_OSS",e[e.SOURCE_OPEN_API=4]="SOURCE_OPEN_API",e[e.SOURCE_MARKETING_API=5]="SOURCE_MARKETING_API",e[e.SOURCE_WEPAY=6]="SOURCE_WEPAY",e[e.SOURCE_PRODUCT_API=7]="SOURCE_PRODUCT_API",e[e.SOURCE_WEAPP=8]="SOURCE_WEAPP",e[e.SOURCE_LOCAL_BUSINESS=9]="SOURCE_LOCAL_BUSINESS"}(le||(le={})),function(e){e[e.NORMAL_AD=0]="NORMAL_AD",e[e.LOCAL_BUSINESS_AD=1]="LOCAL_BUSINESS_AD"}(ue||(ue={})),function(e){e[e.POS_TYPE_APPMSG_BOTTOM=0]="POS_TYPE_APPMSG_BOTTOM",e[e.POS_TYPE_APPMSG_TOP=1]="POS_TYPE_APPMSG_TOP",e[e.POS_TYPE_NEWS=2]="POS_TYPE_NEWS",e[e.POS_TYPE_APPMSG_VIDEO=3]="POS_TYPE_APPMSG_VIDEO",e[e.POS_TYPE_FREE_TRADE=4]="POS_TYPE_FREE_TRADE",e[e.POS_TYPE_APPMSG_MIDDLE=5]="POS_TYPE_APPMSG_MIDDLE",e[e.POS_TYPE_MAIL=6]="POS_TYPE_MAIL",e[e.POS_TYPE_WX_APPLICATION=7]="POS_TYPE_WX_APPLICATION",e[e.POS_TYPE_WX_GAME_VIDEO=8]="POS_TYPE_WX_GAME_VIDEO",e[e.POS_TYPE_MP_PRODUCT=9]="POS_TYPE_MP_PRODUCT",e[e.POS_TYPE_WEAPP_INTERSTITIAL=10]="POS_TYPE_WEAPP_INTERSTITIAL",e[e.POS_TYPE_BOX=11]="POS_TYPE_BOX",e[e.POS_TYPE_WEAPP_COVER=12]="POS_TYPE_WEAPP_COVER",e[e.POS_TYPE_WEAPP_TEMPLATE=13]="POS_TYPE_WEAPP_TEMPLATE",e[e.POS_TYPE_WX_PAY=14]="POS_TYPE_WX_PAY",e[e.POS_TYPE_BIZ_TIME_LINE=15]="POS_TYPE_BIZ_TIME_LINE",e[e.POS_TYPE_MP_MAX=100]="POS_TYPE_MP_MAX",e[e.POS_TYPE_MULTI_SLOT=101]="POS_TYPE_MULTI_SLOT",e[e.POS_TYPE_WX_APPLET=997]="POS_TYPE_WX_APPLET",e[e.POS_TYPE_MP_ALL=998]="POS_TYPE_MP_ALL",e[e.POS_TYPE_SNS_FEED=999]="POS_TYPE_SNS_FEED"}(de||(de={})),function(e){e[e.DEST_TYPE_AD=0]="DEST_TYPE_AD",e[e.DEST_TYPE_OUTER=1]="DEST_TYPE_OUTER",e[e.DEST_TYPE_APPDETAIL=2]="DEST_TYPE_APPDETAIL",e[e.DEST_TYPE_BIZ=3]="DEST_TYPE_BIZ",e[e.DEST_TYPE_APPINFO_PAGE=4]="DEST_TYPE_APPINFO_PAGE",e[e.DEST_TYPE_WECHAT_SHOP=5]="DEST_TYPE_WECHAT_SHOP",e[e.DEST_TYPE_WECHAT_APPLET=6]="DEST_TYPE_WECHAT_APPLET",e[e.DEST_TYPE_CANVAS=9]="DEST_TYPE_CANVAS",e[e.DEST_TYPE_CHANNELS=101]="DEST_TYPE_CHANNELS",e[e.DEST_TYPE_CHANNELS_LIVE=102]="DEST_TYPE_CHANNELS_LIVE",e[e.DEST_TYPE_CHANNELS_USER_PROFILE=103]="DEST_TYPE_CHANNELS_USER_PROFILE"}(he||(he={})),function(e){e[e.RT_SIZE_WORD=91]="RT_SIZE_WORD",e[e.CRT_SIZE_PIC=133]="CRT_SIZE_PIC",e[e.CRT_SIZE_APPMSG=134]="CRT_SIZE_APPMSG",e[e.CRT_SIZE_CARD=135]="CRT_SIZE_CARD",e[e.CRT_SIZE_TOP_PIC=166]="CRT_SIZE_TOP_PIC",e[e.CRT_SIZE_APPDETAIL=167]="CRT_SIZE_APPDETAIL",e[e.CRT_SIZE_WECHAT_SHOP=267]="CRT_SIZE_WECHAT_SHOP",e[e.CRT_SIZE_COPY_CARD=354]="CRT_SIZE_COPY_CARD",e[e.CRT_SIZE_PIC_CARD=355]="CRT_SIZE_PIC_CARD",e[e.CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC=998]="CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC",e[e.CRT_SIZE_OFF_ACCOUNT_PIC=117]="CRT_SIZE_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_WECHAT_APPLET_GRAND_PIC=484]="CRT_SIZE_WECHAT_APPLET_GRAND_PIC",e[e.CRT_SIZE_WECHAT_VIDEO=538]="CRT_SIZE_WECHAT_VIDEO",e[e.CRT_SIZE_H5VIDEO_PIC_6S=555]="CRT_SIZE_H5VIDEO_PIC_6S",e[e.CRT_SIZE_H5VIDEO_VIDEO_15S=1515]="CRT_SIZE_H5VIDEO_VIDEO_15S",e[e.CRT_SIZE_MUTUAL_VIDEO_169=996]="CRT_SIZE_MUTUAL_VIDEO_169",e[e.CRT_SIZE_MUTUAL_VIDEO_43=997]="CRT_SIZE_MUTUAL_VIDEO_43",e[e.CRT_SIZE_IMAGE=666]="CRT_SIZE_IMAGE",e[e.CRT_SIZE_VIDEO=888]="CRT_SIZE_VIDEO",e[e.CRT_SIZE_CARD_IMAGE=450]="CRT_SIZE_CARD_IMAGE",e[e.CRT_SIZE_CARD_VIDEO=452]="CRT_SIZE_CARD_VIDEO",e[e.CRT_SIZE_LINK=454]="CRT_SIZE_LINK",e[e.CRT_SIZE_CARD_SELECT_IMAGE=480]="CRT_SIZE_CARD_SELECT_IMAGE",e[e.CRT_SIZE_CARD_SELECT_VIDEO=482]="CRT_SIZE_CARD_SELECT_VIDEO",e[e.CRT_SIZE_CARD_VOTE_IMAGE=516]="CRT_SIZE_CARD_VOTE_IMAGE",e[e.CRT_SIZE_CARD_VOTE_VIDEO=519]="CRT_SIZE_CARD_VOTE_VIDEO",e[e.CRT_SIZE_WXAPP_PIC=532]="CRT_SIZE_WXAPP_PIC",e[e.CRT_SIZE_CARD_TURN_IMAGE=539]="CRT_SIZE_CARD_TURN_IMAGE",e[e.CRT_SIZE_CARD_TURN_VIDEO=540]="CRT_SIZE_CARD_TURN_VIDEO",e[e.CRT_SIZE_WXAPP_CARD_PIC=556]="CRT_SIZE_WXAPP_CARD_PIC",e[e.CRT_SIZE_WXGAME_VIDEO_0=559]="CRT_SIZE_WXGAME_VIDEO_0",e[e.CRT_SIZE_WXGAME_VIDEO_1=560]="CRT_SIZE_WXGAME_VIDEO_1",e[e.CRT_SIZE_WXAPP_BANNER_608=608]="CRT_SIZE_WXAPP_BANNER_608",e[e.CRT_SIZE_MULTI_POS_960_334=567]="CRT_SIZE_MULTI_POS_960_334",e[e.CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC=568]="CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_MULTI_POS_CARD=569]="CRT_SIZE_MULTI_POS_CARD",e[e.CRT_SIZE_MULTI_POS_COPY_CARD=570]="CRT_SIZE_MULTI_POS_COPY_CARD",e[e.CRT_SIZE_CARD_RATING_IMAGE=588]="CRT_SIZE_CARD_RATING_IMAGE",e[e.CRT_SIZE_CARD_RATING_VIDEO=589]="CRT_SIZE_CARD_RATING_VIDEO",e[e.CRT_SIZE_CARD_FULL_IMAGE=598]="CRT_SIZE_CARD_FULL_IMAGE",e[e.CRT_SIZE_CARD_FULL_VIDEO=599]="CRT_SIZE_CARD_FULL_VIDEO",e[e.CRT_SIZE_MP_TAGS=677]="CRT_SIZE_MP_TAGS",e[e.CRT_SIZE_SCREEN_701=701]="CRT_SIZE_SCREEN_701",e[e.CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO=913]="CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO",e[e.CRT_SIZE_CARD_FULL_GESTURE_VIDEO=698]="CRT_SIZE_CARD_FULL_GESTURE_VIDEO",e[e.CRT_SIZE_BOTTOM_708=708]="CRT_SIZE_BOTTOM_708",e[e.CRT_SIZE_IN_TEXT_841=841]="CRT_SIZE_IN_TEXT_841",e[e.CRT_SIZE_CARD_COMPONENT_IMAGE=1707]="CRT_SIZE_CARD_COMPONENT_IMAGE",e[e.CRT_SIZE_CARD_COMPONENT_VIDEO=1708]="CRT_SIZE_CARD_COMPONENT_VIDEO",e[e.CRT_SIZE_PRODUCT=1501]="CRT_SIZE_PRODUCT",e[e.CRT_SIZE_CARD_SPHERE_IMAGE=699]="CRT_SIZE_CARD_SPHERE_IMAGE",e[e.CRT_SIZE_IMAGE_TEXT_CARD=904]="CRT_SIZE_IMAGE_TEXT_CARD",e[e.CRT_SIZE_MULTI_SLOT_BANNER=925]="CRT_SIZE_MULTI_SLOT_BANNER",e[e.CRT_SIZE_MULTI_SLOT_BANNER_MP=926]="CRT_SIZE_MULTI_SLOT_BANNER_MP",e[e.CRT_SIZE_MULTI_SLOT_IMAGE=927]="CRT_SIZE_MULTI_SLOT_IMAGE",e[e.CRT_SIZE_MULTI_SLOT_IMAGE_MP=928]="CRT_SIZE_MULTI_SLOT_IMAGE_MP",e[e.CRT_SIZE_MULTI_SLOT_VIDEO=929]="CRT_SIZE_MULTI_SLOT_VIDEO",e[e.CRT_SIZE_MULTI_SLOT_BOX=972]="CRT_SIZE_MULTI_SLOT_BOX",e[e.CRT_SIZE_BUTTON_CARD_IMAGE=955]="CRT_SIZE_BUTTON_CARD_IMAGE",e[e.CRT_SIZE_BUTTON_CARD_VIDEO=957]="CRT_SIZE_BUTTON_CARD_VIDEO",e[e.CRT_SIZE_WXGAME_LAND_PAGE=910]="CRT_SIZE_WXGAME_LAND_PAGE",e[e.CRT_SIZE_WEAPP_COVER=1003]="CRT_SIZE_WEAPP_COVER",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO=1064]="CRT_SIZE_SNS_PORTRAIL_VIDEO",e[e.CRT_SIZE_CARD_FULL_PRESS_VIDEO=1065]="CRT_SIZE_CARD_FULL_PRESS_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_1=1479]="CRT_SIZE_SNS_PORTRAIL_VIDEO_1",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_2=1480]="CRT_SIZE_SNS_PORTRAIL_VIDEO_2",e[e.CRT_SIZE_CHANNELS_IMAGE=1530]="CRT_SIZE_CHANNELS_IMAGE",e[e.CRT_SIZE_CHANNELS_PORTRAIL_IMAGE=1531]="CRT_SIZE_CHANNELS_PORTRAIL_IMAGE",e[e.CRT_SIZE_CARD_FULL_TWIST_VIDEO=1733]="CRT_SIZE_CARD_FULL_TWIST_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280=721]="CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280",e[e.CRT_SIZE_CARD_FINDER_EVENT_VIDEO=1748]="CRT_SIZE_CARD_FINDER_EVENT_VIDEO"}(pe||(pe={})),function(e){e[e.PAGE_TYPE_NONE=0]="PAGE_TYPE_NONE",e[e.PAGE_TYPE_OUTLINK=1]="PAGE_TYPE_OUTLINK",e[e.PAGE_TYPE_ARTICLE=2]="PAGE_TYPE_ARTICLE",e[e.PAGE_TYPE_H5CANVAS=3]="PAGE_TYPE_H5CANVAS",e[e.PAGE_TYPE_CANVAS=4]="PAGE_TYPE_CANVAS",e[e.PAGE_TYPE_CARD=5]="PAGE_TYPE_CARD",e[e.PAGE_TYPE_ACCOUNT=6]="PAGE_TYPE_ACCOUNT",e[e.PAGE_TYPE_APPSTORE=7]="PAGE_TYPE_APPSTORE",e[e.PAGE_TYPE_TMPL=8]="PAGE_TYPE_TMPL",e[e.PAGE_TYPE_SIMPLE_CANVAS=9]="PAGE_TYPE_SIMPLE_CANVAS",e[e.PAGE_TYPE_AD=10]="PAGE_TYPE_AD",e[e.PAGE_TYPE_DIRECT=11]="PAGE_TYPE_DIRECT",e[e.PAGE_TYPE_APPDETAIL=12]="PAGE_TYPE_APPDETAIL",e[e.PAGE_TYPE_APPINFO_PAGE=13]="PAGE_TYPE_APPINFO_PAGE",e[e.PAGE_TYPE_WECHAT_SHOP=14]="PAGE_TYPE_WECHAT_SHOP",e[e.PAGE_TYPE_WEAPP=15]="PAGE_TYPE_WEAPP",e[e.PAGE_TYPE_ACTIVE=16]="PAGE_TYPE_ACTIVE",e[e.PAGE_TYPE_FORM_IMAGE=17]="PAGE_TYPE_FORM_IMAGE",e[e.PAGE_TYPE_FORM_VIDEO=18]="PAGE_TYPE_FORM_VIDEO",e[e.PAGE_TYPE_APP_IMAGE=19]="PAGE_TYPE_APP_IMAGE",e[e.PAGE_TYPE_APP_VIDEO=20]="PAGE_TYPE_APP_VIDEO",e[e.PAGE_TYPE_CANVAS_QUES=21]="PAGE_TYPE_CANVAS_QUES",e[e.PAGE_TYPE_CANVAS_VOTE=22]="PAGE_TYPE_CANVAS_VOTE",e[e.PAGE_TYPE_WEPAY_CARD=23]="PAGE_TYPE_WEPAY_CARD",e[e.PAGE_TYPE_WXGAME=24]="PAGE_TYPE_WXGAME",e[e.PAGE_TYPE_FY_EGOODS=25]="PAGE_TYPE_FY_EGOODS",e[e.PAGE_TYPE_ALITA=26]="PAGE_TYPE_ALITA",e[e.PAGE_TYPE_PHONE_CALL=27]="PAGE_TYPE_PHONE_CALL",e[e.PAGE_TYPE_SUBSCRIPTION=40027]="PAGE_TYPE_SUBSCRIPTION",e[e.PAGE_TYPE_YOUZAN=20003]="PAGE_TYPE_YOUZAN",e[e.PAGE_TYPE_WEIMENG=20305]="PAGE_TYPE_WEIMENG",e[e.PAGE_TYPE_FENGYE_EC_SINGLE=10001]="PAGE_TYPE_FENGYE_EC_SINGLE",e[e.PAGE_TYPE_FENGYE_EC_TOGETHER=10002]="PAGE_TYPE_FENGYE_EC_TOGETHER",e[e.PAGE_TYPE_FENGYE_EC_FOCUS=10003]="PAGE_TYPE_FENGYE_EC_FOCUS",e[e.PAGE_TYPE_PLAY_H5=18001]="PAGE_TYPE_PLAY_H5",e[e.PAGE_TYPE_SCAN=40026]="PAGE_TYPE_SCAN",e[e.PAGE_TYPE_CHANNELS=60003]="PAGE_TYPE_CHANNELS",e[e.PAGE_TYPE_CHANNELS_WATCH_LIVE=60005]="PAGE_TYPE_CHANNELS_WATCH_LIVE",e[e.PAGE_TYPE_CHANNELS_RESERVE_LIVE=60006]="PAGE_TYPE_CHANNELS_RESERVE_LIVE",e[e.PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5=40028]="PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_IOS_APP_H5=40029]="PAGE_TYPE_WECHAT_XJ_IOS_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_WEBSITE_H5=40030]="PAGE_TYPE_WECHAT_XJ_WEBSITE_H5",e[e.PAGE_TYPE_WECHAT_RED_PACKET_COVER=40031]="PAGE_TYPE_WECHAT_RED_PACKET_COVER",e[e.PAGE_TYPE_WECHAT_VIDEO_TOPIC=40032]="PAGE_TYPE_WECHAT_VIDEO_TOPIC",e[e.PAGE_TYPE_MAX=1e8]="PAGE_TYPE_MAX"}(fe||(fe={}));var ge=n(8579);let _e,me,ye;!function(e){e[e.PIC_TIME5=555]="PIC_TIME5",e[e.VIDEO_TIME15=1515]="VIDEO_TIME15",e[e.APP_VIDEO=538]="APP_VIDEO",e[e.CRT_SIZE_WX_APPLICATION=532]="CRT_SIZE_WX_APPLICATION",e[e.CRT_SIZE_WX_APPLICATION_X=567]="CRT_SIZE_WX_APPLICATION_X",e[e.CRT_SIZE_WX_APPLICATION_NEW=608]="CRT_SIZE_WX_APPLICATION_NEW",e[e.CRT_SIZE_WX_APPLICATION_CARD=556]="CRT_SIZE_WX_APPLICATION_CARD",e[e.CRT_SIZE_REWARD_VEDIO169=559]="CRT_SIZE_REWARD_VEDIO169",e[e.CRT_SIZE_REWARD_VEDIO916=560]="CRT_SIZE_REWARD_VEDIO916",e[e.CRT_SIZE_REWARD_LANDINGPAGE=910]="CRT_SIZE_REWARD_LANDINGPAGE",e[e.CRT_SIZE_TABLE_SCREEN_IMAGE=701]="CRT_SIZE_TABLE_SCREEN_IMAGE",e[e.CRT_SIZE_INSERT_VIDEO=913]="CRT_SIZE_INSERT_VIDEO",e[e.CRT_SIZE_MULTI_POS_NEW_PIC=927]="CRT_SIZE_MULTI_POS_NEW_PIC",e[e.CRT_SIZE_MULTI_POS_VEDIO=929]="CRT_SIZE_MULTI_POS_VEDIO",e[e.CRT_SIZE_MULTI_POS_GRID=972]="CRT_SIZE_MULTI_POS_GRID",e[e.CRT_SIZE_COVER_AD=1003]="CRT_SIZE_COVER_AD",e[e.CRT_SIZE_CPM_PIC=998]="CRT_SIZE_CPM_PIC",e[e.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT=928]="CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT",e[e.CRT_SIZE_VERTICAL_VIDEO_NEW_916=721]="CRT_SIZE_VERTICAL_VIDEO_NEW_916"}(_e||(_e={})),function(e){e[e.ANDROID=12]="ANDROID",e[e.IOS=19]="IOS",e[e.WE_CHAT=23]="WE_CHAT",e[e.MINI_GAME=46]="MINI_GAME",e[e.WE_CHAT_CARD=36]="WE_CHAT_CARD",e[e.WE_CHAT_SHOP=30]="WE_CHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.WE_CHAT_ARTICLE=29]="WE_CHAT_ARTICLE",e[e.GDT_WE_CHAT_ARTICLE=31]="GDT_WE_CHAT_ARTICLE",e[e.WE_CHAT_APP=38]="WE_CHAT_APP",e[e.LBS=37]="LBS",e[e.LEAD_AD=43]="LEAD_AD",e[e.JD_URL=25]="JD_URL"}(me||(me={})),function(e){e[e.MP_TAG_TYPE_NONE=0]="MP_TAG_TYPE_NONE",e[e.MP_TAG_TYPE_PLAY=1]="MP_TAG_TYPE_PLAY",e[e.MP_TAG_TYPE_DOWNLOAD=3]="MP_TAG_TYPE_DOWNLOAD",e[e.MP_TAG_TYPE_FOLLOW=4]="MP_TAG_TYPE_FOLLOW",e[e.MP_TAG_TYPE_FORM=5]="MP_TAG_TYPE_FORM",e[e.MP_TAG_TYPE_CATEGORY=2]="MP_TAG_TYPE_CATEGORY",e[e.MP_TAG_TYPE_ORDER=6]="MP_TAG_TYPE_ORDER",e[e.MP_TAG_TYPE_POI=7]="MP_TAG_TYPE_POI",e[e.MP_TAG_TYPE_CONVERTION=8]="MP_TAG_TYPE_CONVERTION",e[e.MP_TAG_TYPE_APP_CATEGORY=9]="MP_TAG_TYPE_APP_CATEGORY"}(ye||(ye={}));const ve={123:["image","brand"],124:["image","store"],127:["image","download"],128:["image","follow"],134:["image","wxgame"],138:["image","brand"],126:["card","follow","normal"],129:["card","follow","large"],132:["card","download","large"],130:["video","download"],131:["video","brand"],133:["video","wxgame"],135:["video","brand"],136:["video","follow"],137:["video","brand"]},Ae={1:"store",2:"brand",3:"download",6:"follow",7:"wxgame"},be=[123,124,126,127,128,129,130,131,132,133,134,135,136,137,138],we=[_e.CRT_SIZE_WX_APPLICATION,_e.CRT_SIZE_WX_APPLICATION_NEW,_e.CRT_SIZE_WX_APPLICATION_X,_e.CRT_SIZE_WX_APPLICATION_CARD,_e.CRT_SIZE_REWARD_VEDIO169,_e.CRT_SIZE_REWARD_VEDIO916,_e.CRT_SIZE_TABLE_SCREEN_IMAGE,_e.CRT_SIZE_REWARD_LANDINGPAGE,_e.CRT_SIZE_INSERT_VIDEO,_e.CRT_SIZE_MULTI_POS_NEW_PIC,_e.CRT_SIZE_MULTI_POS_VEDIO,_e.CRT_SIZE_MULTI_POS_GRID,_e.CRT_SIZE_CPM_PIC,_e.CRT_SIZE_COVER_AD,_e.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT,_e.CRT_SIZE_VERTICAL_VIDEO_NEW_916];let Ee;!function(e){e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON=2001]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON=2002]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT=2003]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER=2004]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT=2005]="MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION=2006]="MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION=2007]="MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_FOLLOW=2008]="MMOCAD_CLICKPOS_BIZ_FOLLOW",e[e.MMOCAD_CLICKPOS_BIZ_LIKE=2009]="MMOCAD_CLICKPOS_BIZ_LIKE",e[e.MMOCAD_CLICKPOS_BIZ_COMMENT=2010]="MMOCAD_CLICKPOS_BIZ_COMMENT",e[e.MMOCAD_CLICKPOS_BIZ_HEADIMAGE=2011]="MMOCAD_CLICKPOS_BIZ_HEADIMAGE",e[e.MMOCAD_CLICKPOS_BIZ_NICKNAME=2012]="MMOCAD_CLICKPOS_BIZ_NICKNAME",e[e.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD=2013]="MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD"}(Ee||(Ee={}));let Te,Se,Ce,Ie;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.VIDEO=1]="VIDEO",e[e.LIVE=2]="LIVE"}(Te||(Te={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROOM=1]="ROOM",e[e.RESERVATION=2]="RESERVATION"}(Se||(Se={})),function(e){e[e.NONE=1]="NONE",e[e.ON_AIR=2]="ON_AIR",e[e.ENDED=3]="ENDED",e[e.IN_PREPARE=4]="IN_PREPARE"}(Ce||(Ce={})),function(e){e[e.NONE=0]="NONE",e[e.NICKNAME=1]="NICKNAME",e[e.LINK=2]="LINK",e[e.RESOURCE=3]="RESOURCE",e[e.ACTIONBUTTON=4]="ACTIONBUTTON",e[e.CANVASBUTTON=5]="CANVASBUTTON",e[e.TAGBUTTON=6]="TAGBUTTON"}(Ie||(Ie={}));var xe,De,Oe,Pe,Re,ke,Ne,Me,Le,Be,Fe,Ue,We,je,Ge,Ve,He,ze,Ze=n(5166);let Ye=1;const $e=new Set;let qe=(xe=E(),De=E(),Oe=E(),Pe=E(),Re=E(),ke=E(),Ne=E(),Me=E(),Le=E(),Be=E(),Fe=E(),Ue=E(),We=E(),je=E(),Ge=E(),Ve=E(),He=E(),ze=class{constructor(e){this.adProxy=e,this.lastVideoReportTime=0,this.lastExposureTime=0,this.lastClickTime=0,this.lastAdReqTs=0,this.index=void 0,this.index=Ye,Ye+=1,$e.add(this.adUnitId)}get adType(){return this.adProxy.getAdType()}get adUnitId(){return this.adProxy.getAdUnitId()}get slotData(){return this.adProxy.getSlotData()}get pluginAppid(){return this.adProxy.getPluginAppid()}get data(){return this.adProxy.data}get datas(){return this.adProxy.datas}get reportAdMonitorData(){return this.adProxy.reportAdMonitorData}reset(){this.lastVideoReportTime=0}getLastClickTime(){return this.lastClickTime}getLastAdReqTs(){return this.lastAdReqTs}setLastExposureTime(e){this.lastExposureTime=e}setLastClickTime(e){this.lastClickTime=e}setLastAdReqTs(e){this.lastAdReqTs=e}reportFollow({result:e}){let t=5;return this.adProxy.isRewardedVideoAd()?t=6:[_e.CRT_SIZE_TABLE_SCREEN_IMAGE,_e.CRT_SIZE_INSERT_VIDEO].includes(this.data.crt_size)&&(t=8),(0,f.Lo)({apiName:"webapi_adfollow_report",reqData:{type:{success:140,fail:141,already:142,cancel:143}[e],source:5,scene:75,traceid:this.data.traceid,trace_id:this.data.traceid,aid:this.data.aid,pos_type:t}}).catch((e=>{throw this.reportAdMonitorData(ge.IN.FOLLOW_REPORT_ERROR,e),e}))}getExtraExpOrClkData(e){var t;let n=[];"exposure"===e.reportType&&e.isMulti&&e.multiList?n=e.multiList.map(((e,t)=>({idx:t,waid:this.datas[e].waid||""}))):this.data.waid&&(n=[{idx:0,waid:this.data.waid}]);const i=a()(a()({},(0,oe.v3)()),{},{weapp_enter_scene:(null===d.Z||void 0===d.Z||null===(t=d.Z.appLaunchInfo)||void 0===t?void 0:t.scene)||0,extra:JSON.stringify(n)}),r=a()({},i),o=a()({},i);if("customAd"===this.adType&&e.isMulti)if("exposure"===e.reportType){var s;const t={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(s=e.multiList)||void 0===s||s.forEach((e=>{const n=this.datas[e];n.extBackComm&&t.viewid.push(n.extBackComm.viewid),t.s_pt.push(n.pt),t.s_aid.push(n.aid),t.s_trace_id.push(n.traceid)})),r.box_ad_exposure={report_mode:1,box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:JSON.stringify({viewid:t.viewid}),s_trace_id:JSON.stringify(t.s_trace_id),s_aid:JSON.stringify(t.s_aid),s_pt:JSON.stringify(t.s_pt),s_index:JSON.stringify(e.multiList||[])}}else if("click"===e.reportType){var c;const e=this.adProxy.adDataIndex;o.box_ad_click={box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:null===(c=this.data.extBackComm)||void 0===c?void 0:c.viewid,box_index:e}}if("customAd"===this.adType){var l;const e=null===(l=this.data.extBackComm)||void 0===l?void 0:l.sub_templ_id;e&&(r.sub_templ_id=e,o.sub_templ_id=e)}if("incentive-video"===this.adType&&this.data.isPlayable&&(r.is_playable=1,o.is_playable=1),["interstitialAd","incentive-video","customAd"].includes(this.adType)&&e.videoData){const{currentTime:t,duration:n}=e.videoData;(t||n)&&(o.video_play_time=t,o.video_duration=n)}if("grid"===this.adType)if("exposure"===e.reportType){var u;const e={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(u=this.datas)||void 0===u||u.forEach((t=>{t.extBackComm&&e.viewid.push(t.extBackComm.viewid),e.s_pt.push(t.pt),e.s_aid.push(t.aid),e.s_trace_id.push(t.traceid)})),r.box_ad_exposure={report_mode:1,box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:JSON.stringify({viewid:e.viewid}),s_trace_id:JSON.stringify(e.s_trace_id),s_aid:JSON.stringify(e.s_aid),s_pt:JSON.stringify(e.s_pt)}}else if("click"===e.reportType){var h;const t=e.clickAdIndex||0;o.box_ad_click={box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:null===(h=this.data.extBackComm)||void 0===h?void 0:h.viewid,box_index:t}}return{extExposureComm:r,extClickComm:o}}reportExpOrClk(e){let t=3;const n={showed:2,viewable:5,incentiveVideoCard:14};if("exposure"===e.reportType?(t=n[e.exposureType],"showed"===e.exposureType?this.adProxy.setTimePoint("p6"):"viewable"===e.exposureType&&this.adProxy.setTimePoint("p7"),this.adProxy.reportAnalyseInfo(e.exposureType)):"click"===e.reportType&&this.adProxy.setTimePoint("p10"),"exposure"===e.reportType&&e.multiList&&e.isMulti){const n=this.adProxy.adDataIndex;e.multiList.forEach((e=>{this.adProxy.setCurrentData(e),(0,ce.IN)("adDataReport",{adInfo:this.adProxy.getTransmissionChainData({logtype:t})})})),this.adProxy.setCurrentData(n)}else(0,ce.IN)("adDataReport",{adInfo:this.adProxy.getTransmissionChainData({logtype:t})});const{extExposureComm:i,extClickComm:r}=this.getExtraExpOrClkData(e),o=this.getExpOrClkCommonArgs(e),s="click"===e.reportType?{click_point:JSON.stringify({x:e.clickAbsoluteLeft,y:e.clickAbsoluteTop}),press_interval:e.pressInterval,pos_x:e.clickRelativeLeft,pos_y:e.clickRelativeTop,click_pos:0,ext_click_comm:JSON.stringify(r)}:{exposure_type:b.qi[e.exposureType],ext_exposure_comm:JSON.stringify(i)};return(0,f.Lo)({apiName:"advert_report",reqData:a()(a()(a()({},o),s),{},{report_type:b.yd[e.reportType],weapp_extra_data:JSON.stringify(o.weapp_extra_data),ad_group_id:o.advert_group_id,apurl:this.data.apurl,rl:this.data.rl,weapp_ghid:o.weapp_gh_id})})}getExpOrClkCommonArgs(e){var t;return{advert_group_id:this.data.group_id,trace_id:this.data.traceid,pos_id:b.DX[this.adType],pos_type:b.UJ[this.adType],sdk_version:oe.S3.SDKVersion,ad_w:e.width,ad_h:e.height,aid:this.data.aid,weapp_gh_id:(null===(t=this.data.weapp_info)||void 0===t?void 0:t.original_id)||"",pt:this.data.pt,screen_cnt:1,from_h5:0,from_game:1,wegame_start_ts:oe.S3.startTime.valueOf(),wegame_enter_ts:oe.S0.enterForegroundTime.valueOf(),wegame_user_duration:oe.S0.gameDuration+(Date.now()-oe.S0.enterForegroundTime.getTime()),wxa_report_detail:this.getWxaReportDetail({left:e.left,top:e.top}),weapp_extra_data:a()(a()({},this.getWeappExtraData()),e.weappExtraData||{})}}reportClick(e){return this.lastClickTime=+new Date,this.reportExpOrClk(a()({reportType:"click"},e)).catch((e=>{throw this.reportAdMonitorData(ge.IN.CLICK_REPORT_ERROR,e),e}))}reportExposure(e){return"showed"===e.exposureType&&this.adProxy.checkPreloadH5Page(),this.lastExposureTime=+new Date,this.reportExpOrClk(a()({reportType:"exposure"},e)).catch((e=>{throw this.reportAdMonitorData(ge.IN.EXPOSURE_REPORT_ERROR,e),e}))}reportFlooringPage(e,t){const n={aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:oe.S3.gameAppId,orig_weapp_id:this.pluginAppid?oe.S3.gameAppId:""},i=null==t?void 0:t.map((e=>a()(a()({},n),e))),r={};return 1===e?r.rewared_video_ending_page_a=i:2===e&&(r.rewared_video_ending_page_b=i),(0,f.Lo)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(r)}})}reportAntifraud(e){const t=a()(a()({},e),{},{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:oe.S3.gameAppId,orig_weapp_id:this.pluginAppid?oe.S3.gameAppId:"",network_type:oe.S3.adNetworkType,wechat_version:oe.S3.wechatVersion,platform:oe.S3.platform,system_version:oe.S3.systemVersion,device_orientation:oe.S3.deviceOrientation,wxapp_lib_version:oe.S3.SDKVersion,crt_size:this.data.crt_size,product_type:this.data.product_type,adunitid:this.adUnitId,machine_brand:oe.S3.brand||"",machine_type:oe.S3.model||"",clientimptime:this.lastAdReqTs}),n={};return n.antifraud_table_screen_report=[t],(0,f.Lo)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(n)}})}reportVideo({playType:e,conditionType:t,muted:n,playDuration:i,videoDuration:r,rewardedTime:o,isRewarded:a}){const s=(0,f.Lo)({apiName:"webapi_advideo_report",reqData:{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,trace_id:this.data.traceid,viewid:this.data.wx_game_video.short_video.viewid,video_play_info:{play_type:{unknown:0,complete:1,partial:2,error:3}[e],play_duration:i-this.lastVideoReportTime,video_duration:r,auto_play:!0,muted:n,rewarded_time:o&&Math.min(o,r),is_rewarded:a},report_type:{unknown:0,land:1,end:2,start:3,exit:4,close:5}[t]}});return this.lastVideoReportTime=i,s}getWxaReportDetail({top:e=0,left:t=0}){return{page_x:t||0,page_y:e||0,screen_x:t||0,screen_y:e||0,ad_number:Ye-1,ad_unit_number:$e.size,ad_index:this.index,page_enter_time:oe.S0.enterForegroundTime.valueOf(),phone_screen_width:oe.S3.screenWidth,phone_screen_height:oe.S3.screenHeight}}getWeappExtraData(){var e,t;return{weixin_version:oe.S3.wechatVersion,os_version:oe.S3.systemVersion,machine_brand:oe.S3.brand||"",machine_type:oe.S3.model,network_type:oe.S3.adNetworkType,start_ts:oe.S3.startTime.valueOf(),enter_ts:oe.S0.enterForegroundTime.valueOf(),user_duration:oe.S0.gameDuration+(Date.now()-oe.S0.enterForegroundTime.getTime()),imp_time:this.lastAdReqTs,exp_time:this.lastExposureTime,clk_time:this.lastClickTime,env:null===(e=d.Z.host)||void 0===e?void 0:e.env,app_appid:null===(t=d.Z.host)||void 0===t?void 0:t.appId}}composeExposureCommonInfo({top:e=0,left:t=0,width:n=0,height:i=0,adType:r="incentive-video"}){let o;try{o=this.data.weapp_info.original_id}catch(e){}const s=a()({},(0,oe.v3)()),c=this.getWeappExtraData(),l=this.getWxaReportDetail({top:e,left:t}),u={report_type:0,pos_id:b.DX[this.adType],sdk_version:oe.S3.SDKVersion,aid:this.data.aid,traceid:this.data.traceid,trace_id:this.data.traceid,ad_group_id:this.data.group_id,weapp_ghid:o,rl:this.data.rl,pt:this.data.pt,screen_cnt:1,ad_w:n,ad_h:i,from_game:1,from_h5:0,wegame_start_ts:oe.S3.startTime.valueOf(),wegame_enter_ts:oe.S0.enterForegroundTime.valueOf(),wegame_user_duration:oe.S0.gameDuration+(Date.now()-oe.S0.enterForegroundTime.getTime()),pos_type:b.UJ[r],wxa_report_detail:l,weapp_extra_data:JSON.stringify(c),ext_exposure_comm:JSON.stringify(s)};return JSON.stringify(u)}reportInstallFollow(e){const{condition:t}=this.data;t&&1===t.widget_gray_report_install_follow&&(0,f.Lo)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(e)}})}reportAnalyseDebugInfo(e){const t=b.wE[this.adType];return t||this.reportAdMonitorData(ge.IN.ANALYSE_DEBUG_REPORT_ERROR,new Error(`invalid reportType ${this.adType}`)),(0,f.Lo)({apiName:"webapi_reportbranchanalyticsfordebugtool",reqData:{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:t}]}}).catch((e=>{this.reportAdMonitorData(ge.IN.ANALYSE_DEBUG_REPORT_ERROR,e)}))}reportIPV4(){setTimeout((()=>{try{var e;const t=this.datas&&this.datas.length>0?this.datas[0]:this.data;null!=t&&null!==(e=t.extBackComm)&&void 0!==e&&e.ip_ping_url&&(0,Ze.a)({url:(0,h.Uj)(t.extBackComm.ip_ping_url)})}catch(e){}}),2e3)}},c()(ze.prototype,"getLastClickTime",[xe],Object.getOwnPropertyDescriptor(ze.prototype,"getLastClickTime"),ze.prototype),c()(ze.prototype,"getLastAdReqTs",[De],Object.getOwnPropertyDescriptor(ze.prototype,"getLastAdReqTs"),ze.prototype),c()(ze.prototype,"setLastExposureTime",[Oe],Object.getOwnPropertyDescriptor(ze.prototype,"setLastExposureTime"),ze.prototype),c()(ze.prototype,"setLastClickTime",[Pe],Object.getOwnPropertyDescriptor(ze.prototype,"setLastClickTime"),ze.prototype),c()(ze.prototype,"setLastAdReqTs",[Re],Object.getOwnPropertyDescriptor(ze.prototype,"setLastAdReqTs"),ze.prototype),c()(ze.prototype,"reportFollow",[ke],Object.getOwnPropertyDescriptor(ze.prototype,"reportFollow"),ze.prototype),c()(ze.prototype,"getExpOrClkCommonArgs",[Ne],Object.getOwnPropertyDescriptor(ze.prototype,"getExpOrClkCommonArgs"),ze.prototype),c()(ze.prototype,"reportClick",[Me],Object.getOwnPropertyDescriptor(ze.prototype,"reportClick"),ze.prototype),c()(ze.prototype,"reportExposure",[Le],Object.getOwnPropertyDescriptor(ze.prototype,"reportExposure"),ze.prototype),c()(ze.prototype,"reportFlooringPage",[Be],Object.getOwnPropertyDescriptor(ze.prototype,"reportFlooringPage"),ze.prototype),c()(ze.prototype,"reportAntifraud",[Fe],Object.getOwnPropertyDescriptor(ze.prototype,"reportAntifraud"),ze.prototype),c()(ze.prototype,"reportVideo",[Ue],Object.getOwnPropertyDescriptor(ze.prototype,"reportVideo"),ze.prototype),c()(ze.prototype,"getWxaReportDetail",[We],Object.getOwnPropertyDescriptor(ze.prototype,"getWxaReportDetail"),ze.prototype),c()(ze.prototype,"composeExposureCommonInfo",[je],Object.getOwnPropertyDescriptor(ze.prototype,"composeExposureCommonInfo"),ze.prototype),c()(ze.prototype,"reportInstallFollow",[Ge],Object.getOwnPropertyDescriptor(ze.prototype,"reportInstallFollow"),ze.prototype),c()(ze.prototype,"reportAnalyseDebugInfo",[Ve],Object.getOwnPropertyDescriptor(ze.prototype,"reportAnalyseDebugInfo"),ze.prototype),c()(ze.prototype,"reportIPV4",[He],Object.getOwnPropertyDescriptor(ze.prototype,"reportIPV4"),ze.prototype),ze);function Qe(e){return{appId:e.weapp_info&&e.weapp_info.appid,appType:46==e.product_type?1004:1e3,path:e.url,openRate:e.extBackComm&&e.extBackComm.pctr||0}}var Je,Xe,Ke,et,tt,nt,it,rt,ot,at,st,ct,lt;let ut=(Je=E(),Xe=E(),Ke=E(),et=E(),tt=E(),nt=E(),it=E(),rt=E(),ot=E(),at=E(),st=E(),ct=E(),lt=class{constructor(e){this.adProxy=e,this.isAppInstalled=!1}get adType(){return this.adProxy.getAdType()}get data(){return this.adProxy.data}get datas(){return this.adProxy.datas}get reportAdMonitorData(){return this.adProxy.reportAdMonitorData}get isValidCondition(){return this.adProxy.isValidCondition}getFullRl(){let{rl:e}=this.data;try{/viewid=([^&]+)/.test(e)||(-1===e.indexOf("?")?e+=`?viewid=${this.data.extBackComm.viewid}`:e+=`&viewid=${this.data.extBackComm.viewid}`)}catch(e){}return e}getFollowPageUrl(e,t){const n={source:4,tid:e.traceid,pt:e.pt,aid:e.aid,ad_engine:e.is_cpm?1:0,pos_type:e.pos_type,jsapi_scene:oe.S3.isWaGame?147:140};return(0,ie.a3)(t,n)}getSkAdItem(){var e,t;let n=null;const i=this.data;if(null!=i&&null!==(e=i.condition)&&void 0!==e&&e.widget_gray_webstore&&null!=i&&null!==(t=i.extBackComm)&&void 0!==t&&t.sk_ad_items)try{n=JSON.parse(i.extBackComm.sk_ad_items)[0]}catch(e){}return n}isPrefetch(e){var t,n,i,r,o,a,s,c;const l={url:this.data.url,jump_url:this.data.button_action.jump_url,playable_url:null===(t=this.data.crtInfo)||void 0===t||null===(n=t[0])||void 0===n||null===(i=n.wxgame_video_card)||void 0===i||null===(r=i.flooring_page)||void 0===r?void 0:r.page_url}[e],u={url:this.data.dest_type===he.DEST_TYPE_OUTER,jump_url:(null===(o=this.data.button_action)||void 0===o?void 0:o.jump_type)===he.DEST_TYPE_OUTER,playable_url:!0}[e];return l&&u&&Boolean(null===(a=this.data)||void 0===a||null===(s=a.extBackComm)||void 0===s||null===(c=s.material_handler_info)||void 0===c?void 0:c.h5_preload_info[e])}getTransmissionChainData({logtype:e=3}){const t={traceid:this.data.traceid,trace_id:this.data.traceid,product_type:this.data.pt,jump_url:encodeURIComponent(this.data.url),rl:encodeURIComponent(this.getFullRl()),logtype:e};return Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")}setAppInstallState(e){this.isAppInstalled=e}land({isButton:e=!1}={}){var t=this;return r()((function*(){const{dest_type:n,product_type:i,url:r}=t.data,o={isButton:e};if(!e){if(t.isPrefetch("url")&&t.adProxy.reportAdMonitorData(ge.IN.H5_PRELOAD_CARD_CLICKED),[12,19].indexOf(i)>-1){const{app_info:{url_scheme:e}}=t.data;let i;var a;if(oe.S3.isIOS)i=JSON.stringify({aid:t.data.aid,ad_uid:null===(a=t.data.extBackComm)||void 0===a?void 0:a.uid,scene_id:4001});const s=t.getSkAdItem();return e&&e.trim().length>0?oe.S3.isAndroid&&!t.isAppInstalled?t.landPage(n,r,o):t.adProxy.launchApplication({schemeUrl:e,isIosDirect:oe.S3.isIOS,appInfo:t.data.app_info,extraData:i,skAdItem:s}).catch((e=>(null!==s&&t.reportAdMonitorData(ge.IN.OPEN_WEBSTORE_ERROR,e),t.landPage(n,r,o)))):t.landPage(n,r,o)}return t.landPage(n,r,o)}{t.isPrefetch("jump_url")&&t.adProxy.reportAdMonitorData(ge.IN.H5_PRELOAD_BUTTON_CLICKED);const{button_action:{jump_type:e,jump_url:n}}=t.data;if(i===me.IOS)return t.openAppStore();if(i!==me.WE_CHAT)return t.landPage(e,n,o);{const{biz_info:{user_name:i,is_subscribed:a}}=t.data;if(a)return 10===e?t.landPage(e,r,o):(0,f.Yo)({url:t.getFollowPageUrl(t.data,n),adInfo:t.getTransmissionChainData({logtype:3})});try{const e=yield t.adProxy.addContact({username:i,isWaGame:oe.S3.isWaGame}),{ext_info:n,uxinfo:r}=t.data;let o;try{o=JSON.parse(n)}catch(e){}if(/ok|added/.test(e.errMsg)&&o&&o.guide_group_id&&r)try{yield(0,g.LQ)({guide_group_id:o.guide_group_id,uxinfo:r}),t.adProxy.reportAdIDKey({key:ge.IN.BIND_GUIDE_SUCCESS})}catch(e){t.reportAdMonitorData(ge.IN.BIND_GUIDE_ERROR,e)}return e}catch(e){if(/cancel/.test(e.errMsg))return e;throw t.reportAdMonitorData(ge.IN.ADD_CONTACT_ERROR,e),e}}}}))()}landPage(e,t,n){if(e===he.DEST_TYPE_APPDETAIL&&oe.S3.isIOS){var i;const{app_info:{appinfo_url:e}}=this.data,t=JSON.stringify({aid:this.data.aid,ad_uid:null===(i=this.data.extBackComm)||void 0===i?void 0:i.uid,scene_id:4001}),n=this.getSkAdItem();return this.adProxy.launchApplication({schemeUrl:e,extraData:t,skAdItem:n}).catch((t=>(null!==n&&this.reportAdMonitorData(ge.IN.OPEN_WEBSTORE_ERROR,t),(0,f.Yo)({url:e,adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_URL_ERROR,e),e})))))}if(e===he.DEST_TYPE_BIZ)return(0,f.Yo)({url:this.getFollowPageUrl(this.data,t),adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_URL_ERROR,e),e}));if(e===he.DEST_TYPE_WECHAT_APPLET){const{weapp_info:{appid:e},traceid:n,aid:i,uxinfo:r}=this.data;return(0,f.Be)({appId:e,path:t,traceid:n,aid:i,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:r}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_WXAPP_ERROR,e),e}))}if(e===he.DEST_TYPE_CANVAS){const{canvas_info:e,pos_type:t}=this.data;return(0,f._t)({canvasInfo:e,posType:t}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_CANVAS_ERROR,e),e}))}if(10===e){const{biz_info:{user_name:e}}=this.data;return this.adProxy.openProfile({username:e}).catch((e=>{throw e}))}return e===he.DEST_TYPE_CHANNELS?this.jumpChannels("activity",n):e===he.DEST_TYPE_CHANNELS_LIVE?this.jumpChannels("live",n):e===he.DEST_TYPE_CHANNELS_USER_PROFILE?this.jumpChannels("userProfile",n):(0,f.Yo)({url:t,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:this.data.uxinfo}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_URL_ERROR,e),e}))}getChannelsExtraInfo(e){return JSON.stringify({sns_ad:{uxinfo:this.data.uxinfo||"",snsid:"",scene:e}}).replace(/,/g,";")}jumpChannels(e,{isButton:t}){var n=this;return r()((function*(){var i;const r=null===(i=n.data)||void 0===i?void 0:i.extBackComm.channels_info,{crt_size:o,apurl:s,rl:c}=n.data,l={feedId:r.id,nonceId:r.nonce_id,finderUserName:r.username,reportExtraInfo:n.getChannelsExtraInfo(t?Ie.ACTIONBUTTON:Ie.RESOURCE)},u={activity:ge.IN.OPEN_CHANNELS_ACTIVITY_SUCCESS,live:ge.IN.OPEN_CHANNELS_LIVE_SUCCESS,userProfile:ge.IN.OPEN_CHANNELS_USER_PROFILE_SUCCESS}[e],d={activity:ge.IN.OPEN_CHANNELS_ACTIVITY_FAILED,live:ge.IN.OPEN_CHANNELS_LIVE_FAILED,userProfile:ge.IN.OPEN_CHANNELS_USER_PROFILE_FAILED}[e];if(r){if("activity"===e&&o===_e.CRT_SIZE_REWARD_LANDINGPAGE)try{const e=yield n.adProxy.openChannelsRewardedVideoAd(a()(a()({},l),{},{expReportLink:s,clkReportLink:c,reportInfo:n.adProxy.getExpOrClkCommonArgs({top:0,left:0,width:oe.S3.screenWidth,height:oe.S3.screenHeight}),clickPosMap:{follow:Ee.MMOCAD_CLICKPOS_BIZ_FOLLOW,like:Ee.MMOCAD_CLICKPOS_BIZ_LIKE,comment:Ee.MMOCAD_CLICKPOS_BIZ_COMMENT,headimage:Ee.MMOCAD_CLICKPOS_BIZ_HEADIMAGE,nickname:Ee.MMOCAD_CLICKPOS_BIZ_NICKNAME,forward:Ee.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD},feedbackUrl:n.getFeedbackUrl(oe.S3.isWaGame?1003:1005)}));return n.reportAdMonitorData(u),e}catch(e){n.reportAdMonitorData(d,e)}try{switch(e){case"activity":yield n.adProxy.openChannelsRewardedVideoAd(a()(a()({},l),{},{adJSAPIType:1}));break;case"live":yield n.adProxy.openChannelsLive(l);break;case"userProfile":yield n.adProxy.openChannelsUserProfile(l)}return void n.reportAdMonitorData(u)}catch(e){n.reportAdMonitorData(d,e)}}n.reportAdMonitorData(d,new Error("channelsInfo is empty"))}))()}openAppStore(){var e;const{app_info:{appinfo_url:t,url_scheme:n}}=this.data,i=JSON.stringify({aid:this.data.aid,ad_uid:null===(e=this.data.extBackComm)||void 0===e?void 0:e.uid,scene_id:4001}),r=this.getSkAdItem();return n&&n.trim().length>0?this.adProxy.launchApplication({schemeUrl:n,isIosDirect:!0,appInfo:this.data.app_info,extraData:i,skAdItem:r}).catch((()=>this.adProxy.launchApplication({schemeUrl:t,extraData:i,skAdItem:r}).catch((e=>(null!==r&&this.reportAdMonitorData(ge.IN.OPEN_WEBSTORE_ERROR,e),(0,f.Yo)({url:t,adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_URL_ERROR,e),e}))))))):this.adProxy.launchApplication({schemeUrl:t,extraData:i,skAdItem:r}).catch((()=>(0,f.Yo)({url:t,adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_URL_ERROR,e),e}))))}preloadLanding(){try{if(6===this.data.dest_type){let e=[];const t=[];if("grid"===this.adType?this.datas.forEach((n=>{var i;null!==(i=n.weapp_info)&&void 0!==i&&i.appid&&(e.push(n.weapp_info.appid),t.push(Qe(n)))})):(e=[this.data.weapp_info.appid],t.push(Qe(this.data))),(0,ce.IN)("batchGetContact",{appIds:e}),oe.S3.isAndroid)this.isValidCondition("widget_gray_batchload_app")&&(0,ce.IN)("batchPreloadMiniProgram",{openParams:{visitScene:oe.S0.currentScene,businessScene:1,innerScene:1095},preloadList:t,success:e=>{this.reportAdMonitorData(ge.IN.BATCHLOAD_SUCCESS,e)},fail:e=>{this.reportAdMonitorData(ge.IN.BATCHLOAD_ERROR,e)}});else if(oe.S3.isIOS){let e="app";this.data.product_type===me.MINI_GAME&&(e="game"),this.isValidCondition("widget_gray_preload_env")&&(oe.S3.isAndroid||"app"===e)&&(0,ce.IN)("preloadMiniProgramEnv",{type:e,success:e=>{this.reportAdMonitorData(ge.IN.PRELOAD_MINIENV_SUCCESS,e)},fail:e=>{this.reportAdMonitorData(ge.IN.PRELOAD_MINIENV_ERROR,e)}}),this.isValidCondition("widget_gray_predownload_app")&&(0,ce.IN)("predownloadMiniProgramPackage",{username:`${this.data.weapp_info.original_id}@app`,path:this.data.url,scene:1,success:e=>{this.reportAdMonitorData(ge.IN.PREDOWNLOAD_SUCCESS,e)},fail:e=>{this.reportAdMonitorData(ge.IN.PREDOWNLOAD_ERROR,e)}})}}}catch(e){}}checkFollow(e){return r()((function*(){const{rawData:t}=yield(0,f.Lo)({apiName:"webapi_checkcontact",reqData:{biz_uin:e}});return 1===JSON.parse(t).is_subscribed}))()}getFeedbackUrl(e){const t=this.data.material_id_list||[],n=encodeURIComponent(`[${t.toString()}]`)||"";let i=(0,ie.a3)("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html#wechat_redirect",{aid:this.data.aid,traceid:this.data.traceid,source:e,material_id:n||"",machine_type:oe.S3.model,publisher_appid:oe.S3.gameAppId});if("grid"===this.adType){const t="https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html?ismulity=1#wechat_redirect",n=[],r=[],o=[];this.datas.forEach((e=>{n.push(e.traceid),r.push(e.material_id_list||[]),o.push(e.aid)}));const a={traceid:JSON.stringify(n),source:e,aid:JSON.stringify(o),material_id:JSON.stringify(r),machine_type:oe.S3.model,publisher_appid:oe.S3.gameAppId};i=(0,ie.a3)(t,a)}return i}openFeedbackUrl(e){const t=this.getFeedbackUrl(e);return(0,f.Yo)({url:t})}checkPreloadH5Page(){var e=this;return r()((function*(){var t,n,i,r,o;const a=new Set;let{url:s}=e.data,c=null===(t=e.data.button_action)||void 0===t?void 0:t.jump_url,l=null===(n=e.data.crtInfo)||void 0===n||null===(i=n[0])||void 0===i||null===(r=i.wxgame_video_card)||void 0===r||null===(o=r.flooring_page)||void 0===o?void 0:o.page_url;e.isPrefetch("url")&&("1"!==(0,ie.Wz)(s).prefetch&&(s=(0,ie.a3)(s,{prefetch:1}),e.data.url=s),a.add(s)),e.isPrefetch("jump_url")&&("1"!==(0,ie.Wz)(c).prefetch&&(c=(0,ie.a3)(c,{prefetch:1}),e.data.button_action.jump_url=c),a.add(c)),e.isPrefetch("playable_url")&&("1"!==(0,ie.Wz)(l).prefetch&&(l=(0,ie.a3)(l,{prefetch:1}),e.data.crtInfo[0].wxgame_video_card.flooring_page.page_url=l),a.add(l));const u=[...a].map((e=>({url:e,bizScene:20002})));if(u.length)try{yield e.adProxy.preloadH5Page({urlList:u}),e.reportAdMonitorData(ge.IN.H5_PRELOAD_SUCCESS)}catch(t){e.reportAdMonitorData(ge.IN.H5_PRELOAD_FAILED,t)}}))()}},c()(lt.prototype,"isPrefetch",[Je],Object.getOwnPropertyDescriptor(lt.prototype,"isPrefetch"),lt.prototype),c()(lt.prototype,"getTransmissionChainData",[Xe],Object.getOwnPropertyDescriptor(lt.prototype,"getTransmissionChainData"),lt.prototype),c()(lt.prototype,"setAppInstallState",[Ke],Object.getOwnPropertyDescriptor(lt.prototype,"setAppInstallState"),lt.prototype),c()(lt.prototype,"land",[et],Object.getOwnPropertyDescriptor(lt.prototype,"land"),lt.prototype),c()(lt.prototype,"landPage",[tt],Object.getOwnPropertyDescriptor(lt.prototype,"landPage"),lt.prototype),c()(lt.prototype,"getChannelsExtraInfo",[nt],Object.getOwnPropertyDescriptor(lt.prototype,"getChannelsExtraInfo"),lt.prototype),c()(lt.prototype,"openAppStore",[it],Object.getOwnPropertyDescriptor(lt.prototype,"openAppStore"),lt.prototype),c()(lt.prototype,"preloadLanding",[rt],Object.getOwnPropertyDescriptor(lt.prototype,"preloadLanding"),lt.prototype),c()(lt.prototype,"checkFollow",[ot],Object.getOwnPropertyDescriptor(lt.prototype,"checkFollow"),lt.prototype),c()(lt.prototype,"getFeedbackUrl",[at],Object.getOwnPropertyDescriptor(lt.prototype,"getFeedbackUrl"),lt.prototype),c()(lt.prototype,"openFeedbackUrl",[st],Object.getOwnPropertyDescriptor(lt.prototype,"openFeedbackUrl"),lt.prototype),c()(lt.prototype,"checkPreloadH5Page",[ct],Object.getOwnPropertyDescriptor(lt.prototype,"checkPreloadH5Page"),lt.prototype),lt);const dt=BabelRuntimeHelpers.initializerDefineProperty;var ht=n.n(dt);BabelRuntimeHelpers.initializerWarningHelper;var pt,ft,gt,_t,mt,yt,vt,At,bt,wt,Et,Tt,St,Ct,It,xt,Dt,Ot,Pt,Rt,kt,Nt,Mt,Lt,Bt,Ft,Ut,Wt,jt,Gt,Vt,Ht,zt,Zt,Yt,$t,qt,Qt,Jt,Xt,Kt,en,tn,nn,rn,on,an,sn,cn,ln,un,dn=n(2642),hn=n(6998),pn=n(8013),fn=n(2582);const{makeApiSign:gn}=__safeway__.apiSign,_n=e=>t=>new Promise(((n,i)=>{e(Object.assign({},t,{success:n,fail:i}))})),mn=(e,t,n)=>{var i;e.errMsg=e.errMsg||`${t}:ok`;const r=0===e.errMsg.indexOf(`${t}:ok`),o=0===e.errMsg.indexOf(`${t}:fail`);var a;if(r)null==n||null===(a=n.success)||void 0===a||a.call(n,e);else if(o){var s;null==n||null===(s=n.fail)||void 0===s||s.call(n,e)}null==n||null===(i=n.complete)||void 0===i||i.call(n,e)},yn=({username:e,success:t,fail:n,complete:i})=>{(0,ce.IN)("profile",{username:e,scene:75,success:t,fail:n,complete:i})},vn=({username:e,isWaGame:t,success:n,fail:i,complete:r})=>{(0,ce.IN)("private_addContact",{username:e,scene:t?146:139,webtype:1,success:n,fail:i,complete:r})},An=({schemeUrl:e,isIosDirect:t,appInfo:n,extraData:i,skAdItem:r,success:o,fail:a,complete:s})=>{const c={};t&&(c.appId=n.app_id,c.installSchemeUrl=n.appinfo_url,null!==r?(c.installAction=1,c.skAdItem=r):c.installAction=0),i&&(c.extraData=i),(0,ce.IN)("launchApplication",Object.assign(c,{schemeUrl:e,operateDirectly:1,success:o,fail:a,complete:s}))},bn=({appUrl:e,extraData:t,skAdItem:n,success:i,fail:r,complete:o})=>{const a=gn("downloadAppInternal",{appUrl:e,extraData:t,skAdItem:n,operateDirectly:1,success:i,fail:r,complete:o});(0,ce.IN)("downloadAppInternal",a)},wn=({packageName:e,success:t,fail:n,complete:i})=>{const r=gn("getInstallState",{packageName:e,permissionBytes:[1,1,1],success:t,fail:n,complete:i});(0,ce.IN)("getInstallState",r)},En=({downloadId:e,success:t,fail:n,complete:i})=>{(0,ce.IN)("queryDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:n,complete:i})},Tn=({downloadId:e,success:t,fail:n,complete:i})=>{(0,ce.IN)("pauseDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:n,complete:i})},Sn=({downloadId:e,success:t,fail:n,complete:i})=>{(0,ce.IN)("resumeDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:n,complete:i})},Cn=({downloadId:e,success:t,fail:n,complete:i})=>{const r=gn("installDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:n,complete:i});(0,ce.IN)("installDownloadTask",r)},In=({isHide:e,success:t,fail:n,complete:i})=>{(0,ce.IN)("setNavigationBarRightButton",{hide:e,success:t,fail:n,complete:i})},xn=({isHide:e,success:t,fail:n,complete:i})=>{(0,ce.IN)("private_setNavigationBarRightButton",{hide:e,success:t,fail:n,complete:i})},Dn=({resources:e,success:t,fail:n,complete:i})=>{(0,ce.IN)("loadVideoResource",{resources:e,success:t,fail:n,complete:i})},On=({orientation:e,success:t,fail:n,complete:i})=>{(0,ce.IN)("private_setPageOrientation",{orientation:e,success:t,fail:n,complete:i})},Pn=({success:e,fail:t,complete:n}={})=>{(0,ce.IN)("hideVirtualBottomNavigationBar",{success:e,fail:t,complete:n})},Rn=({success:e,fail:t,complete:n}={})=>{(0,ce.IN)("showVirtualBottomNavigationBar",{success:e,fail:t,complete:n})},kn=({success:e,fail:t,complete:n}={})=>{(0,ce.IN)("showStatusBar",{success:e,fail:t,complete:n})},Nn=({success:e,fail:t,complete:n}={})=>{(0,ce.IN)("hideStatusBar",{success:e,fail:t,complete:n})},Mn=({success:e,fail:t,complete:n,feedId:i,nonceId:r,finderUserName:o,reportExtraInfo:a})=>{(0,dn.d)("openChannelsActivity",{feedId:i,nonceId:r,finderUserName:o,reportExtraInfo:a,permissionBytes:[1,1,1]},(i=>{mn(i,"openChannelsActivity",{success:e,fail:t,complete:n})}))},Ln=({success:e,fail:t,complete:n,feedId:i,nonceId:r,finderUserName:o,reportExtraInfo:a})=>{(0,dn.d)("openChannelsLive",{feedId:i,nonceId:r,finderUserName:o,reportExtraInfo:a,permissionBytes:[1,1,1]},(i=>{mn(i,"openChannelsLive",{success:e,fail:t,complete:n})}))},Bn=({success:e,fail:t,complete:n,finderUserName:i,reportExtraInfo:r})=>{(0,dn.d)("openChannelsUserProfile",{finderUserName:i,reportExtraInfo:r,permissionBytes:[1,1,1]},(i=>{mn(i,"openChannelsUserProfile",{success:e,fail:t,complete:n})}))},Fn=({success:e,fail:t,complete:n,feedId:i,nonceId:r,finderUserName:o,reportExtraInfo:a,adJSAPIType:s,expReportLink:c,clkReportLink:l,reportInfo:u,clickPosMap:d,feedbackUrl:h})=>{(0,ce.IN)("openChannelsRewardedVideoAd",{feedId:i,nonceId:r,finderUserName:o,reportExtraInfo:a,adJSAPIType:s,expReportLink:c,clkReportLink:l,reportInfo:u,clickPosMap:d,feedbackUrl:h,success:e,fail:t,complete:n})},Un=({mixWithOther:e=!0,obeyMuteSwitch:t=!0,success:n,fail:i,complete:r})=>{(0,ce.IN)("setInnerAudioOption",{mixWithOther:e,obeyMuteSwitch:t,success:n,fail:i,complete:r})},Wn=({urlList:e,success:t,fail:n,complete:i})=>{(0,ce.IN)("private_onWebPageUrlExposed",{urlList:e,success:t,fail:n,complete:i})},jn=_n((({taskName:e,taskUrl:t,fileMd5:n,extInfo:i,success:r,fail:o,complete:a})=>{const s=gn("addDownloadTaskStraight",{taskName:e,taskUrl:t,fileMd5:n,extInfo:i,permissionBytes:[1,1,1],success:r,fail:o,complete:a});(0,ce.IN)("addDownloadTaskStraight",s)}));let Gn=(pt=E(),ft=E(),gt=E(),_t=E(),mt=E(),yt=E(),vt=E(),At=E(),bt=E(),wt=E(),Et=E(),Tt=E(),St=E(),Ct=E(),It=E(),xt=E(),Dt=E(),Ot=E(),Pt=E(),Rt=E(),kt=E(),Nt=E(),Mt=E(),Lt=E(),Bt=E(),Ft=class{constructor(){ht()(this,"setNavigationBarRightButton",Ut,this),ht()(this,"setMiniProgramNavigationBarRightButton",Wt,this),ht()(this,"hideVirtualBottomNavigationBar",jt,this),ht()(this,"showVirtualBottomNavigationBar",Gt,this),ht()(this,"showStatusBar",Vt,this),ht()(this,"hideStatusBar",Ht,this),ht()(this,"openProfile",zt,this),ht()(this,"addContact",Zt,this),ht()(this,"downloadAppInternal",Yt,this),ht()(this,"openChannelsActivity",$t,this),ht()(this,"openChannelsRewardedVideoAd",qt,this),ht()(this,"openChannelsLive",Qt,this),ht()(this,"openChannelsUserProfile",Jt,this),ht()(this,"getChannelsLiveInfo",Xt,this),ht()(this,"getNetworkType",Kt,this),ht()(this,"preloadH5Page",en,this),this.innerPreloadVideo=_n(Dn),ht()(this,"preloadVideo",tn,this),this.innerLaunchApplication=_n(An),ht()(this,"launchApplication",nn,this),this.innerGetInstallState=_n(wn),ht()(this,"getInstallState",rn,this),this.innerQueryDownloadTask=_n(En),ht()(this,"queryDownloadTask",on,this),this.innerPauseDownloadTask=_n(Tn),ht()(this,"pauseDownloadTask",an,this),this.innerResumeDownloadTask=_n(Sn),ht()(this,"resumeDownloadTask",sn,this),this.innerInstallDownloadTask=_n(Cn),ht()(this,"installDownloadTask",cn,this),this.innerSetPageOrientation=_n(On),ht()(this,"setPageOrientation",ln,this),this.innerSetInnerAudioOption=_n(Un),ht()(this,"setInnerAudioOption",un,this)}},Ut=c()(Ft.prototype,"setNavigationBarRightButton",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(In)}}),Wt=c()(Ft.prototype,"setMiniProgramNavigationBarRightButton",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(xn)}}),jt=c()(Ft.prototype,"hideVirtualBottomNavigationBar",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Pn)}}),Gt=c()(Ft.prototype,"showVirtualBottomNavigationBar",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Rn)}}),Vt=c()(Ft.prototype,"showStatusBar",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(kn)}}),Ht=c()(Ft.prototype,"hideStatusBar",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Nn)}}),zt=c()(Ft.prototype,"openProfile",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(yn)}}),Zt=c()(Ft.prototype,"addContact",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(vn)}}),Yt=c()(Ft.prototype,"downloadAppInternal",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(bn)}}),$t=c()(Ft.prototype,"openChannelsActivity",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Mn)}}),qt=c()(Ft.prototype,"openChannelsRewardedVideoAd",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Fn)}}),Qt=c()(Ft.prototype,"openChannelsLive",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Ln)}}),Jt=c()(Ft.prototype,"openChannelsUserProfile",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Bn)}}),Xt=c()(Ft.prototype,"getChannelsLiveInfo",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(pn.tT)}}),Kt=c()(Ft.prototype,"getNetworkType",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(hn.getNetworkType)}}),en=c()(Ft.prototype,"preloadH5Page",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Wn)}}),tn=c()(Ft.prototype,"preloadVideo",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerPreloadVideo({resources:e})}}),nn=c()(Ft.prototype,"launchApplication",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{const t="string"==typeof e?{schemeUrl:e}:e;return!fn.cj||null!=t&&t.isIosDirect||null===(null==t?void 0:t.skAdItem)?this.innerLaunchApplication(t):this.downloadAppInternal({appUrl:t.schemeUrl,extraData:null==t?void 0:t.extraData,skAdItem:null==t?void 0:t.skAdItem})}}}),rn=c()(Ft.prototype,"getInstallState",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerGetInstallState({packageName:e})}}),on=c()(Ft.prototype,"queryDownloadTask",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerQueryDownloadTask({downloadId:e})}}),an=c()(Ft.prototype,"pauseDownloadTask",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerPauseDownloadTask({downloadId:e})}}),sn=c()(Ft.prototype,"resumeDownloadTask",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerResumeDownloadTask({downloadId:e})}}),cn=c()(Ft.prototype,"installDownloadTask",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerInstallDownloadTask({downloadId:e})}}),ln=c()(Ft.prototype,"setPageOrientation",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerSetPageOrientation({orientation:e})}}),un=c()(Ft.prototype,"setInnerAudioOption",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>this.innerSetInnerAudioOption({mixWithOther:e,obeyMuteSwitch:t})}}),Ft);var Vn,Hn,zn,Zn,Yn,$n,qn,Qn,Jn,Xn,Kn,ei,ti,ni,ii,ri;let oi=!1,ai=(Vn=S("handleAdDataDone"),Hn=C("handleAdDataError"),zn=S("handleAdDataDone"),Zn=C("handleAdDataError"),Yn=S("handleAdDataDone"),$n=C("handleAdDataError"),qn=S("handleAdDataDone"),Qn=C("handleAdDataError"),Jn=S("handleAdDataDone"),Xn=C("handleAdDataError"),Kn=S("handleAdDataDone"),ei=C("handleAdDataError"),ti=S("handleAdDataDone"),ni=C("handleAdDataError"),ii=(e,t,n)=>{const i=n.value;n.value=function(...e){const t=e=>{si&&si in this&&"function"==typeof this[si]&&this[si](e)};try{const n=i.call(this,...e);return n instanceof Promise?n.catch((e=>t(e))):n}catch(e){t(e)}}},ri=class{constructor({adUnitId:e,adType:t,pluginAppid:n=""}){this.adUnitId=void 0,this.adType=void 0,this.pluginAppid=void 0,this.slotData={},this.lastAdRetCode=0,this.lastAdRespone="fetch",this.limitAdReqTime=3e4,this.fetchPromise=null,this.webviewId=oe.S0.currentWebviewId,this.fetchRetryCount=0,this.isCanvasXmlHook=!1,this.handledInNewFetch=!1,this.nativeMethodInvoker=new Gn,this.mmReporter=void 0,this.cgiReporter=void 0,this.lander=void 0,this.datas=[],this.data={},this.convertedAdData=null,this.isMulti=!1,this.isViewable=!1,this.adDataIndex=0,this.scene=0,"splashAd"!==t&&(0,oe.lv)(),this.adUnitId=e,this.adType=t,this.pluginAppid=oe.S3.isWaGame?"":n,this.mmReporter=new se(this),this.cgiReporter=new qe(this),this.lander=new ut(this),this.bindProxyMethods(),this.setTimePoint("p1"),(0,y.lc)((e=>{if(e.webviewId===oe.S0.currentWebviewId&&this.data&&this.isViewable){const{uxinfo:t}=this.data,n=4;(0,_.R)({eventTimeStamp:e.eventTimeStamp?e.eventTimeStamp:+new Date,scene:n,uxinfo:t,url:e.path?e.path:"index.html"})}}))}bindProxyMethods(){const e=[this.nativeMethodInvoker,this.mmReporter,this.cgiReporter,this.lander];for(const r of e){const e=(0,ie.Zw)(r);for(const o of e)n=o,i=void 0,(null===(i=(t=r)&&t[w])||void 0===i?void 0:i.has(n))&&(this[o]=(...e)=>r[o](...e))}var t,n,i}isLimitRequest(){return"checkAd"!==this.lastAdRespone&&0!==this.lastAdRetCode&&+new Date-this.getLastAdReqTs()<this.limitAdReqTime}convertTestAdData(e){try{const i=(0,ie.Xh)(e),r=JSON.parse(i.crt_exp_info);var t;if(i.crtExpInfo=r,1002===r.exp_type){if(null!==(t=i.wx_game_video)&&void 0!==t&&t.wxgame_video_card){const e=JSON.parse(r.exp_data);i.wx_game_video.wxgame_video_card.flooring_page=e}}else if(1001===r.exp_type){i.profile_exp=!0;const t=r.exp_data&&"string"==typeof r.exp_data?JSON.parse(r.exp_data):r.exp_data;i.dest_type=t.dest_type;let n={};if(i.button_action)try{n=JSON.parse(e.button_action)}catch(e){}n.jump_type=t.jump_type,i.button_action=JSON.stringify(n)}else if(105===r.exp_type)i.ad_style_data=r.exp_data;else if(106===r.exp_type){const e=r.exp_data&&"string"==typeof r.exp_data?JSON.parse(r.exp_data):r.exp_data;(0,ie.Ee)(i,e),i.common_exp=!0}else if(r.exp_type&&[108,109,2001].includes(r.exp_type))i.ad_dynamic_list=r.exp_data;else if(r.crt_size&&[_e.CRT_SIZE_WX_APPLICATION_NEW,_e.CRT_SIZE_WX_APPLICATION_X].includes(r.crt_size)){if(i.crt_size=r.crt_size,i.ad_width=r.width,i.material_width=r.width,i.ad_height=r.height,i.material_height=r.height,i.image_url=r.image_url,r.dest_url&&i.url&&[1,3,6].includes(i.dest_type)){const e=(0,ie.Wz)(i.url),t={};e.weixinadkey&&(t.weixinadkey=e.weixinadkey),e.ticket&&(t.ticket=e.ticket),e.gdt_vid&&(t.gdt_vid=e.gdt_vid),e.weixinadinfo&&(t.weixinadinfo=e.weixinadinfo),i.url=(0,ie.a3)(r.dest_url,t)}i.watermark_text=r.watermark||""}else if(r.landpage_type){var n;null!==(n=i.wx_game_video)&&void 0!==n&&n.wxgame_video_card&&(i.wx_game_video.wxgame_video_card.flooring_page=r)}return i}catch(t){return e}}getFetchArgs({isAdInterval:e},t){var n,i;const r={scene_type:oe.S0.currentScene,ad_unit_id:this.adUnitId,appid:this.pluginAppid?this.pluginAppid:oe.S3.gameAppId,orig_weapp_id:this.pluginAppid?oe.S3.gameAppId:"",weapp_path:oe.S0.weappPath,pos_id:"",network_type:oe.S3.adNetworkType,orientation:{landscape:1,portrait:2}[oe.S3.deviceOrientation],sdk_version:oe.S3.SDKVersion,ext_slot_custom_comm:"",weapp_extra_data:JSON.stringify({wxa_start_ts:oe.S3.startTime.valueOf(),wxa_enter_ts:oe.S0.enterForegroundTime.valueOf(),weixin_version:oe.S3.wechatVersion,os_version:oe.S3.systemVersion,machine_type:oe.S3.model,is_ad_interval:!!e,env:null===(n=d.Z.host)||void 0===n?void 0:n.env,app_appid:null===(i=d.Z.host)||void 0===i?void 0:i.appId})};r.pos_id=b.DX[this.adType];let o={};return"grid"===this.adType?o.box_slot_ad={count:String(this.slotData.gridCount),box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)}:"splashAd"===this.adType?(o.splash_ad={count:String(5)},o.weapp_enter_scene=(null==t?void 0:t.weappEnterScene)||0,o.request_type=(null==t?void 0:t.requestType)||1,o.check_ad_is_online_ads=(null==t?void 0:t.preloadAds)||[],delete r.appid):"customAd"===this.adType&&(o={is_adunit_tmpl:!0}),(0,h.er)()&&(o.in_3rd_app=1),r.ext_slot_custom_comm=JSON.stringify(o),r}validateFetchEnv(){if((0,h.er)()&&this.reportAdMonitorData(ge.IN.THIRD_ERROR),"splashAd"!==this.adType&&!this.adUnitId)throw{errMsg:"no ad unit id"};if(this.isLimitRequest())throw{errMsg:"no advertisement",errCode:this.lastAdRetCode}}validateFetchRes(e){if("-12001"===e.err_code)throw this.lastAdRetCode=e.err_code,{errMsg:"no permission",errCode:-12001};if(this.lastAdRetCode=e.ret,this.lastAdRespone="fetch",!this.isCheckAdIsOnlineRequest(e)){if(!e.advertisement_num||e.advertisement_num<=0)throw{errMsg:"no advertisement",errCode:e.ret};if(!e.advertisement_info)throw e}}validateCrtSize(e){const{pt:t,crt_size:n}=e,i=be.includes(t),r=we.includes(n);if(!i&&!r){if(n&&!r)throw{errMsg:`unexpected advertisement crt_size ${n}`};throw{errMsg:`unexpected advertisement type ${t}`}}}handleAdDataDone(){this.reportAdMonitorData(ge.IN.AD_FETCH_SUCCESS),this.reportIPV4()}handleAdDataError(e){this.reportAdMonitorData(ge.IN.AD_FETCH_SUCCESS,e)}handleWaidForList(e=[]){const t={};if(e.length<1)return Promise.resolve(t);const n=[];return null==e||e.forEach((e=>{n.push((0,p.p4)(e.apkName).then((t=>a()(a()({},t),{},{aid:e.aid}))))})),Promise.race([Promise.all(n).then((e=>(e.forEach((({waid:e,aid:n=""})=>{e&&n&&(t[n]=e)})),t))).catch((e=>(this.reportAdMonitorData(ge.IN.READ_ADINFOS_ERROR,e),t))),(0,v.Vs)(2e3).then((()=>t))])}handleBulkSaveMaterials(e){let t=[];return this.isSplashAd()&&this.data&&(t=this.getSplashAdMaterialList(e)),t.length>0?(0,A.fn)(t):Promise.resolve()}getSplashAdMaterialList(e){var t,n;const i=[],r=(null==e?void 0:e.crtInfo[0])||{},o=e.rerankingExtInfo.material_hash||"",a=(null==r?void 0:r.image_url)||"",s=(null==r||null===(t=r.card_info)||void 0===t?void 0:t.pure_color_url)||"",c=(null==r||null===(n=r.card_info)||void 0===n?void 0:n.material_blur_url)||"",l=`${b.Lq}/${e.aid}_${o}.png`;if(o&&i.push({url:a,fileName:`${e.aid}_${o}.png`,filePath:l}),s){const t=`${b.Lq}/${e.aid}_${o}_pure_color.png`;o&&i.push({url:s,fileName:`${e.aid}_${o}_pure_color.png`,filePath:t})}if(c){const t=`${b.Lq}/${e.aid}_${o}_blur.png`;o&&i.push({url:c,fileName:`${e.aid}_${o}_blur.png`,filePath:t})}return i}handleAdInfosIndexCache(e,t,n){var i=this;return r()((function*(){let r;try{r=yield i.handleWaidForList(e)}catch(e){}t.deviceInfo=(0,oe.v3)(),t.waidMap=r,i.reportAdMonitorData(ge.IN.READ_ADINFOS_SUCCESS,{adInfos:t});try{return yield(0,A.Z7)(t,n),i.reportAdMonitorData(ge.ET.WRITE_ADINFOS_SUCCESS,{adInfos:t})}catch(e){const n=e instanceof Error?i.processStackMsg(e):e;return i.reportAdMonitorData(ge.ET.WRITE_ADINFOS_FAIL,{adInfos:t,errMsg:n})}}))()}isCheckAdIsOnlineRequest(e){return this.isSplashAd()&&1010===e.ret&&e.advertisement_extra_info}isCheckAdIsOnlineResp(e){return!("traceid"in e)}handleCheckAdIsOnlineResp(e){var t;const n=null===(t=JSON.parse(e.advertisement_extra_info))||void 0===t?void 0:t.check_ad_resp;return this.lastAdRespone=this.isCheckAdIsOnlineResp(n)?"checkAd":"fetch",n}handleSplashAd(e){var t=this;return r()((function*(){if(t.isCheckAdIsOnlineRequest(e))return t.handleCheckAdIsOnlineResp(e);t.reportAdMonitorData(ge.ET.dataLoadSuccess);let n=0;const i=[];let r=[];const o=[],a=`${(0,v.Cy)()}_exposure_times`,s=`${b.Lq}/adinfos.txt`,c={slot_id:b.DX[t.adType],ads:[],crtSizeMap:{},materialHashMap:{},total_exposure_times:0,[a]:0,requestInQueue:"true",totalSizeUsed:0},l=yield(0,A.x1)(b.Lq);c.totalSizeUsed=l.totalSize;let u=l.outedDateFileList||[];u=u.length<21&&l.totalSize>20971520?l.fileList:u;try{yield(0,A.BZ)(b.Lq,u)}catch(e){t.reportAdMonitorData(ge.ET.removeFileDataFail,e)}try{const s=e.advertisement_info.length>0&&e.advertisement_info.map(((e,s)=>{var l,u;const d=t.handleAdData(e),h=d.rerankingExtInfo.material_hash||"",p={material_hash:d.rerankingExtInfo.material_hash||"",tid:d.rerankingExtInfo.tid.toString()||"",aid:d.aid,trace_id:d.traceid};c.ads.push(p),c.total_exposure_times=d.rerankingExtInfo.total_exposure_times||0,c[a]=d.rerankingExtInfo[a]||0;const f=null===(l=d.condition)||void 0===l?void 0:l.widget_gray_splash_data_channel_parallel;c.requestInQueue=f?"false":"true",c.isCheckAndFetch=(null===(u=d.condition)||void 0===u?void 0:u.widget_gray_splash_check_and_fetch)||0,c.materialHashMap[d.aid]=h;const g=d.crtInfo[0]||{};d.crtInfo&&(c.crtSizeMap[d.aid]=g.width>g.height?"landscape":"portrait");const _=t.getSplashAdMaterialList(d);r=r.concat(_),n+=0===s?_.length:0;const m=`${b.Lq}/${d.aid}.txt`;if(i.push((0,A.Z7)(d,m)),d.product_type===me.ANDROID){var y;const e=null===(y=d.appInfo)||void 0===y?void 0:y.apkName;o.push({apkName:e,aid:d.aid})}return d}));t.datas=s}catch(e){throw t.reportAdMonitorData(ge.ET.handleDataFail,e),e}const d=r.slice(0,n);return yield(0,A.fn)(d),i.push((0,A.fn)(r)),i.push(t.handleAdInfosIndexCache(o,c,s)),Promise.all(i).then((()=>t.reportAdMonitorData(ge.ET.dataPreloadSuccess))).catch((e=>{throw t.reportAdMonitorData(ge.ET.dataPreloadFail,e),e})),t.datas[0]}))()}handleCustomAd(e){const t=e.advertisement_info.map(((e,t)=>{var n;const i=e=>{if(0===t)throw e};let r,o,s=null;const c=this.handleAdData(e),{crtInfo:l,button_action:u,product_type:d,dest_type:h,crt_size:p}=c;if(c.reranking_ext_info&&c.reranking_ext_info.refresh_time)o=c.reranking_ext_info.refresh_time;else if(c.reranking_ext_info&&"string"==typeof c.reranking_ext_info)try{const e=JSON.parse(c.reranking_ext_info);e.refresh_time&&(o=e.refresh_time)}catch(e){}if(null!=c&&null!==(n=c.extBackComm)&&void 0!==n&&n.tmpl_info)try{const e=JSON.parse(c.extBackComm.tmpl_info);s=JSON.parse(e.tmpl_content),r=Number(c.extBackComm.sub_templ_id)}catch(e){this.reportAdMonitorData(ge.$g.TPL_PARSE_FAILED),i({errMsg:"custom template error",errCode:b.yB.ERR_TPL_PARSE})}else this.reportAdMonitorData(ge.$g.TPL_LOAD_FAILED),i({errMsg:"no custom template",errCode:b.yB.ERR_TPL_NONE});return a()(a()({},e),{},{crtInfo:l,button_action:u,product_type:d,dest_type:h,crt_size:p,condition:c.condition,template:s,subTemplId:r,refreshTime:o,aid:c.aid,app:c.app,appInfo:c.appInfo,extBackComm:c.extBackComm,wording:c.hint_txt,card_info:c.card_info,video_info:c.video_info,image_url:c.image_url,weapp_info:c.weapp_info,wx_game_video:c.wx_game_video})}));return this.reportAdMonitorData(ge.$g.LOAD_SUCCESS),t.length>1?this.isMulti=!0:this.isMulti=!1,this.datas=t,this.setCurrentData(0),t[0]}handleGridAd(e){if(e.advertisement_info.length!==this.slotData.gridCount)throw this.reportAdMonitorData(ge.IN.AD_GRID_LOAD_COUNT_ERROR,{count:this.slotData.gridCount,getCount:e.advertisement_info.length}),{errMsg:"no advertisement count error",errCode:e.ret};const t=e.advertisement_info.map(((e,t)=>{const n=this.handleAdData(e);return n._isGrid=!0,n._gridInfo={row:5===this.slotData.gridCount?1:2,column:5===this.slotData.gridCount?5:4,index:t},n}));this.datas=t,this.setCurrentData(0),this.fetchRetryCount=0;for(const e of this.datas)if(e.crt_size!==_e.CRT_SIZE_MULTI_POS_GRID)throw{errMsg:`unexpected advertisement crt_size ${e.crt_size}`};return this.reportAdMonitorData(ge.IN.AD_GRID_LOAD_SUCCESS),this.datas}handleInterstitialAd(e){const t=JSON.parse(e.image_url),n=a()(a()({},t[0]||{}),(0,ie.ei)(e,["crtInfo","product_type","dest_type","crt_size","button_action","condition","app","appInfo","extBackComm"]));if(e.crt_size===_e.CRT_SIZE_INSERT_VIDEO){let e="0";const t=decodeURIComponent(this.data.apurl);/viewid=([^&]+)/.test(t)&&(e=RegExp.$1),this.data.wx_game_video={short_video:{viewid:e}}}return this.convertedAdData=n,n}handleRewardedVideoAd(e){var t,n,i,r;e.crt_size===_e.CRT_SIZE_REWARD_LANDINGPAGE&&this.handleRewardedLandingPage(e);const o=this.data.crtInfo&&Array.isArray(this.data.crtInfo)?this.data.crtInfo:[];0===o.length&&o.push({wxgame_video_card:{}});const[{wxgame_video_card:{head_bg_img:s,mp_tag_type:c},wxgame_gauss_video:l}]=o,{canvas_info:u,wx_game_video:{short_video:d,wxgame_video_card:{show_time:h,thumb:p,title:f,desc:g,flooring_page:_}}}=e;let m=30;if(e.reranking_ext_info&&e.reranking_ext_info.rewarded_time)m=e.reranking_ext_info.rewarded_time;else if(e.reranking_ext_info&&"string"==typeof e.reranking_ext_info)try{const t=JSON.parse(e.reranking_ext_info);t.rewarded_time&&(m=t.rewarded_time)}catch(e){}m=Math.floor(1e3*m),_&&[3,4].indexOf(_.landpage_type)>-1&&(this.data.isPlayable=!0);const y=a()({crtInfo:o[0],canvas_info:u,type:ve[e.pt],shortVideo:this.mapRewardVideoFields(d),gaussVideo:l?this.mapRewardVideoFields(a()(a()({},l),{},{video_duration:l.video_duration_ms})):null,rewardedTime:m,card:{icon:p,name:f,wording:g,headBgImg:s,mpTagType:c,showTime:h},flooringPage:_},(0,ie.ei)(e,["crt_size","product_type","dest_type","button_action","condition","app","appInfo"]));this.convertedAdData=y;const v=(0,ae.zt)(y),A=(0,ae.zi)(y);return this.reportRewardGaussVideo({useGaussVideo:v,useExpandStyle:A,expUseGaussVideo:null!==(t=null===(n=e.condition)||void 0===n?void 0:n.widget_gray_reward_use_gauss_blur)&&void 0!==t?t:0,expUseExpandStyle:1,videoUrl:null!==(i=null==d?void 0:d.video_url)&&void 0!==i?i:"",gaussVideoUrl:null!==(r=null==l?void 0:l.video_url)&&void 0!==r?r:""}),null!=l&&l.video_url&&this.reportAdMonitorData(ge.IN.REWARD_GAUSS_EXISTS),v&&A?this.reportAdMonitorData(ge.IN.REWARD_USE_GAUSS_AND_EXPAND_STYLE):v?this.reportAdMonitorData(ge.IN.REWARD_USE_GAUSS):A&&this.reportAdMonitorData(ge.IN.REWARD_USE_EXPAND_STYLE),y}mapRewardVideoFields(e){const{thumb_url:t,video_url:n,video_duration:i,thumb_width:r,thumb_height:o}=e;return{poster:t,src:n,duration:i,width:r,height:o}}handleRewardedLandingPage(e){var t;const n=oe.S3.isAndroid&&d.Z.clientVersion>=654315008||oe.S3.isIOS&&d.Z.clientVersion>=385879552;if((null===(t=this.data.condition)||void 0===t?void 0:t.widget_gray_rewardedpage_exposure_v2)&&n)try{const{canvas_info:t}=e,{root:n}=u()(t.ad_info_xml),i=(0,v.IU)(e),r=this.composeExposureCommonInfo({top:0,left:0,width:oe.S3.screenWidth,height:oe.S3.screenHeight});n.children.push({name:"viewid",children:[],attributes:{},content:i},{name:"commInfo",children:[],attributes:{},content:r});const o=m(n,!0);this.data.canvas_info.ad_info_xml=o,this.isCanvasXmlHook=!0}catch(e){this.isCanvasXmlHook=!1}}handleBannerAd(e){const{pt:t,crt_size:n,image_url:i,material_width:r,material_height:o,ad_width:s,ad_height:c,use_style_data:l,hint_txt:u,watermark_type:d}=e;let{extBackComm:{antifraud_popup:h}}=e;void 0===h&&(h=!1);const p=ve[t];let f,g;l?(f=s,g=c):[_e.CRT_SIZE_WX_APPLICATION,_e.CRT_SIZE_WX_APPLICATION_NEW,_e.CRT_SIZE_WX_APPLICATION_X].includes(n)?(f=(s||r)/2,g=(c||o)/2):n===_e.CRT_SIZE_WX_APPLICATION_CARD&&(f=s,g=c);const _=a()({antifraudPopup:h,type:p,crt_size:n,useStyleData:l,watermark:Ae[d],width:f,height:g,image:{src:i,width:r,height:o},wording:u},(0,ie.ei)(e,["ad_style_data","product_type","dest_type","button_action","watermark_text","condition","app","appInfo"]));return this.convertedAdData=_,_}extractJson(e,t,n,i){const r=null!=n?n:t;if(e[r]&&"string"==typeof e[r])try{e[t]=JSON.parse(e[r])}catch(n){e[t]=null!=i?i:{}}else null!=i&&(e[t]=i)}buildWechatInfo(e){if(e.product_type===me.WE_CHAT){const{biz_appid:t,biz_info:{nick_name:n,is_subscribed:i,head_img:r,biz_uin:o}}=e;return{icon:r,nickname:n,uin:o,isFollowed:i,biz_appid:t}}return{}}buildAppInfo(e){const t=e.product_type;if([me.ANDROID,me.IOS].includes(t)){const{app_info:{app_name:t,apk_name:n,apk_url:i,app_md5:r,icon_url:o,url_scheme:a,version_code:s,channel_id:c,desc:l}}=e;return{appName:t,apkName:n,apkUrl:i,appMd5:r,iconUrl:o,urlScheme:a,versionCode:s,channelId:c,desc:l}}return{}}handleAdData(e){var t;if(0===Object.keys(e).length)throw{errMsg:"unexpected adData"};const n=e.crt_exp_tid&&e.crt_exp_info?this.convertTestAdData(e):(0,ie.Xh)(e),i=n;if(n.crt_size&&(i.crt_size=Number(n.crt_size)),this.extractJson(i,"crtInfo","crt_info"),this.extractJson(i,"extBackComm","ext_back_comm"),this.extractJson(i,"button_action","button_action",{}),this.extractJson(i,"adStyleData","ad_style_data",""),this.extractJson(i,"rerankingExtInfo","reranking_ext_info",""),this.extractJson(i,"extInfo","ext_info"),this.extractJson(i,"adDynamicList","ad_dynamic_list"),n.flow_exp_info)try{i.condition=(0,g.mh)(n.flow_exp_info),this.isSplashAd()||this.handleSplashAdFetchLog(i.condition)}catch(e){}if(i.adStyleData&&[_e.CRT_SIZE_REWARD_VEDIO169,_e.CRT_SIZE_REWARD_VEDIO916,_e.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(i.crt_size)){i.use_style_data=!0;const{adStyleData:e}=i;n.ad_width=e.width,n.ad_height=e.height,e.widgets.forEach((e=>{const t=n.button_action;4===e.type&&(t.button_text=e.title,t.jump_type=e.dest_type||t.jump_type,t.jump_url=e.dest_url||t.jump_url)}))}else this.validateCrtSize(i);const r=n.button_action;if(r.button_text=r.button_text||"查看",n.watermark_text=n.watermark_text||"去逛逛",18001===(null==i||null===(t=i.extInfo)||void 0===t?void 0:t.page_type)){const e={gdt_vid:n.traceid||"",uxinfo:n.uxinfo||"",ad_token:n.ad_token||"",rl:n.rl||""};n.url=(0,ie.a3)(n.url,e)}const o=this.buildWechatInfo(i),s=this.buildAppInfo(i);return n.product_type===me.ANDROID&&(0,p.p4)(s.apkName).then((({waid:e})=>{i.waid=e,this.reportAdMonitorData(ge.IN.GET_WAID_SUCCESS)})).catch((e=>{this.reportAdMonitorData(ge.IN.GET_WAID_ERROR,e)})),a()(a()({},i),{},{app:o,appInfo:s})}handleSplashAdFetchLog(e){this.handledInNewFetch||(this.handledInNewFetch=!0,(0,A.J$)(e))}handleOperateWXData(e){const t={apiName:"webapi_getadvert",reqData:e,requestInQueue:!1};return this.isSplashAd()?(0,f.ul)(t):(0,f.Lo)(t)}processFetch(e,t,n){var i=this;return r()((function*(){if(i.validateFetchEnv(),Object.keys(t).length>0)(0,oe.NN)(t);else{oe.S3.deviceOrientation=(0,oe.uj)();const{networkType:e}=yield i.getNetworkType();oe.S3.adNetworkType=e}const r=i.getFetchArgs({isAdInterval:e},n);i.setLastAdReqTs(+new Date),i.setLastExposureTime(0),i.setLastClickTime(0),i.setTimePoint("p2");try{let e=yield i.handleOperateWXData(r);if(i.fetchPromise=null,i.fetchRetryCount=0,i.handledInNewFetch=!1,i.setTimePoint("p3"),e=JSON.parse(e.rawData),i.validateFetchRes(e),i.isSplashAd())return i.handleSplashAd(e);if(i.isGridAd())return i.handleGridAd(e);if(i.isCustomAd())return i.handleCustomAd(e);const t=i.handleAdData(e.advertisement_info[0]);return i.data=t,i.checkDuplicateRecommendedAds(t.product_type,t.app,t.appInfo),i.isInterstitialAd(t)?i.handleInterstitialAd(t):i.isRewardedVideoAd(t)?i.handleRewardedVideoAd(t):i.handleBannerAd(t)}catch(t){let n="";try{n=JSON.parse(t).errMsg}catch(e){}if(i.fetchPromise=null,0===n.indexOf("getAdData:fail")&&i.fetchRetryCount<1)return i.fetchRetryCount+=1,i.fetch(e);throw i.isBannerAd()?i.reportAdMonitorData(ge.IN.AD_BANNER_LOAD_ERROR,t):i.isRewardedVideoAd()?i.reportAdMonitorData(ge.IN.AD_VIDEO_LOAD_ERROR,t):i.isInterstitialAd()?i.reportAdMonitorData(ge.IN.AD_INTERSTITIAL_LOAD_ERROR,t):i.isGridAd()?i.reportAdMonitorData(ge.IN.AD_GRID_LOAD_ERROR,t):i.isCustomAd()?i.reportAdMonitorData(ge.$g.LOAD_FAILED,t):i.isSplashAd()&&i.reportAdMonitorData(ge.ET.dataLoadFail,t),t}}))()}checkDuplicateRecommendedAds(e,t,n){var i=this;return r()((function*(){const r=[];let o="0";const a=decodeURIComponent(i.data.apurl);/viewid=([^&]+)/.test(a)&&(o=RegExp.$1);const s={conv_status:r},c={},{imei:l,idfa:u}=yield oe.SQ,d={viewid:o,app_status:0,follow_status:0,imei:l,idfa:u};if(e===me.WE_CHAT){if(c.ad_type=1,c.ad_id=t.biz_appid,d.follow_status=t.isFollowed?2:1,t.isFollowed)return i.reportAdMonitorData(ge.IN.AD_FOLLOWED,{adInfo:c})}else if(e===me.ANDROID){const{apkName:e,versionCode:t}=n;try{const n=yield i.getInstallState(e),r=n.isInstalled&&(void 0===n.versionCode||n.versionCode>=t);c.ad_type=2,c.ad_id=e,d.app_status=r?2:1,r&&i.reportAdMonitorData(ge.IN.AD_INSTALLED,{adInfo:c})}catch(e){d.app_status=0,Reporter.reportIDKey({key:"adGetInstallState_fail",force:!0})}}r.push(d),i.reportInstallFollow(s)}))()}getAdType(){return this.adType}getAdUnitId(){return this.adUnitId}getPluginAppid(){return this.pluginAppid}getSlotData(){return this.slotData}getDeviceInfo(){return oe.S3}isBannerAd(){return"banner"===this.adType}isRewardedVideoAd(e){return"incentive-video"===this.adType&&(!e||[_e.CRT_SIZE_REWARD_VEDIO169,_e.CRT_SIZE_REWARD_VEDIO916,_e.CRT_SIZE_VERTICAL_VIDEO_NEW_916,_e.CRT_SIZE_REWARD_LANDINGPAGE].includes(e.crt_size))}isInterstitialAd(e){return"interstitialAd"===this.adType&&(!e||[_e.CRT_SIZE_TABLE_SCREEN_IMAGE,_e.CRT_SIZE_INSERT_VIDEO].includes(e.crt_size))}isGridAd(){return"grid"===this.adType}isCustomAd(){return"customAd"===this.adType}isSplashAd(){return"splashAd"===this.adType}getProgramStartTime(){return oe.S3.startTime}getWebviewInfo(){return{createWebviewId:this.webviewId,lastWebviewId:oe.S0.lastWebviewId,currentWebviewId:oe.S0.currentWebviewId,openType:oe.S0.currentOpenType}}setSlotData(e){this.slotData=Object.assign(this.slotData,e||{})}reset(){this.adDataIndex=0,this.cgiReporter.reset()}fetch(e=!1,t={},n={}){return this.fetchPromise||(this.fetchPromise=this.processFetch(e,t,n)),this.fetchPromise}setRightButtonHide(e){const t=()=>oe.S3.isWaGame?this.setNavigationBarRightButton({isHide:e}):this.setMiniProgramNavigationBarRightButton({isHide:e});return t().catch((n=>(this.reportAdMonitorData(ge.IN.RIGHTBUTTON_HIDE_ERROR,{retryCount:0,isHide:e,message:this.processStackMsg(n)}),t().catch((t=>{throw this.reportAdMonitorData(ge.IN.RIGHTBUTTON_HIDE_ERROR,{retryCount:1,isHide:e,message:this.processStackMsg(t)}),t})))))}addDownloadTaskStraight(e,t,n,i){return jn({taskName:e,taskUrl:t,fileMd5:n,extInfo:i}).catch((e=>(this.reportAdMonitorData(ge.IN.ADD_DOWNLOAD_TASK_ERROR,e),Promise.reject(e))))}operateFullscreen(e){if(!e)return Promise.reject();const t=[this.setRightButtonHide("hide"===e)];return oe.S3.isWaGame||t.push("hide"===e?this.hideStatusBar():this.showStatusBar()),!oe.S3.isWaGame&&oe.S3.isAndroid&&t.push("hide"===e?this.hideVirtualBottomNavigationBar():this.showVirtualBottomNavigationBar()),Promise.all(t)}isTriggerClick(e){const t=e.absoluteX,n=e.absoluteY,i=e.absoluteEndX,r=e.absoluteEndY,o=e.pressInterval;let a=!1;return Math.abs(r-n)<30&&Math.abs(i-t)<30&&o<300&&(a=!0),a}isValidCondition(e){return!!(e&&this.data&&this.data.condition)&&(this.data.condition[e]||void 0===this.data.condition[e])}setCurrentData(e){var t;this.adDataIndex=e,null!==(t=this.datas)&&void 0!==t&&t[e]&&(this.data=this.datas[e])}checkCanvasXmlState(){return this.isCanvasXmlHook}handleRewardedVideoPlayableLand(e,t){var n,i;const r=null==this||null===(n=this.data)||void 0===n||null===(i=n.extBackComm)||void 0===i?void 0:i.uid,o={};4===t?o.xj_scene=6:(o.gdt_vid=this.data.traceid||"",o.uxinfo=this.data.uxinfo||"",o.reward=1),o.rl=this.data.rl||"",o.ad_token=this.data.ad_token||"",oe.S3.isIOS&&(o.uid=r||"");const a=(0,ie.a3)(e,o);return this.isPrefetch("playable_url")&&this.reportAdMonitorData(ge.IN.H5_PRELOAD_BUTTON_CLICKED),(0,f.Yo)({url:a})}setDeviceInfo(e){Object.assign(oe.S3,e)}setSplashAdShowStatus(){oi=!0}getSplashAdShowStatus(){return oi}getChannelsLiveStatus(){var e=this;return r()((function*(){const{dest_type:t,extBackComm:{channels_info:n,live_video_mode:i,live_video_sub_mode:r}}=e.data;if(!n||null==i||null==r)return"none";if((0,ie.Ie)(i,r)&&t===he.DEST_TYPE_CHANNELS_LIVE){const{id:t,username:i}=n;if(!t||!i)return"none";try{const{status:n}=yield e.getChannelsLiveInfo({feedId:t,finderUserName:i});if([Ce.NONE,Ce.IN_PREPARE].includes(n))return"none";if(n===Ce.ON_AIR)return"onlive";if(n===Ce.ENDED)return"end";e.reportAdIDKey({key:ge.IN.GET_CHANNELS_LIVE_STATUS_SUCCESS})}catch(n){e.reportAdMonitorData(ge.IN.GET_CHANNELS_LIVE_STATUS_FAILED,{id:t,username:i,errMsg:n})}}else if((0,ie.gC)(i,r)&&t===he.DEST_TYPE_CANVAS)return"reserve";return"none"}))()}},c()(ri.prototype,"handleCheckAdIsOnlineResp",[Vn,Hn],Object.getOwnPropertyDescriptor(ri.prototype,"handleCheckAdIsOnlineResp"),ri.prototype),c()(ri.prototype,"handleSplashAd",[zn,Zn],Object.getOwnPropertyDescriptor(ri.prototype,"handleSplashAd"),ri.prototype),c()(ri.prototype,"handleCustomAd",[Yn,$n],Object.getOwnPropertyDescriptor(ri.prototype,"handleCustomAd"),ri.prototype),c()(ri.prototype,"handleGridAd",[qn,Qn],Object.getOwnPropertyDescriptor(ri.prototype,"handleGridAd"),ri.prototype),c()(ri.prototype,"handleInterstitialAd",[Jn,Xn],Object.getOwnPropertyDescriptor(ri.prototype,"handleInterstitialAd"),ri.prototype),c()(ri.prototype,"handleRewardedVideoAd",[Kn,ei],Object.getOwnPropertyDescriptor(ri.prototype,"handleRewardedVideoAd"),ri.prototype),c()(ri.prototype,"handleBannerAd",[ti,ni],Object.getOwnPropertyDescriptor(ri.prototype,"handleBannerAd"),ri.prototype),c()(ri.prototype,"checkDuplicateRecommendedAds",[ii],Object.getOwnPropertyDescriptor(ri.prototype,"checkDuplicateRecommendedAds"),ri.prototype),ri);var si},2185:()=>{},2942:()=>{},8401:(e,t,n)=>{"use strict";n.d(t,{wA:()=>h,Ar:()=>fe,KM:()=>ee,Ym:()=>pe,MO:()=>ue,v:()=>F,Qr:()=>p,y0:()=>de,cF:()=>ne,sY:()=>M,vE:()=>B,ve:()=>L});var i=n(8065),r=n(1503),o=n.n(r),a=n(9536),s=n.n(a),c=n(2241),l=n(3356),u=n.n(l);const d=e=>{let t=Array.isArray(e)?e[0]:e;for(;t.parent&&t.parent!==fe&&t.parent.referComponent;)t=t.parent;return t};class h{constructor(e){this.state={},this.style={},this.isComponent=!0,this._hasUnmount=!1,this._eventHandler={},this._stateQueue={},this._setStateTimer=null,this._setStyleTimer=null,this._manualStyle={},this._subComponents=[],this._rootElement=void 0,this._elementMap={},this.props=void 0,this.parent=null,this.props=e}setState(e,t){var n=this;this._stateQueue=this._stateQueue||{};let i=!1;for(const t of Object.keys(e)){e[t]!==this.state[t]&&(i=!0)}i?(Object.assign(this._stateQueue,e),this._setStateTimer&&clearTimeout(this._setStateTimer),this._setStateTimer=setTimeout(u()((function*(){n._setStateTimer=null;let e=!1;for(const t of Object.keys(n._stateQueue)){const i=n._stateQueue[t];n.state[t]!==i&&(e=!0)}e&&(F(n,"updateState",o()(o()({},n.state),n._stateQueue)),Object.assign(n.state,n._stateQueue),L(n),ee(d(n._rootElement)),yield fe.nextLayout(),null==t||t(n.state,n.props))})),0)):null==t||t(this.state,this.props)}ready(e){}updatedProps(){}render(){return""}_unmountComponent(){if(!this._hasUnmount){if(this._hasUnmount=!0,Array.isArray(this._subComponents))for(const e of this._subComponents)e._unmountComponent();F(this,"destroy")}}getRootElement(){if(!Array.isArray(this._rootElement))return this._rootElement;throw new Error("You should'nt try getRootElement() in component with virtual root")}getRootElements(){return this._rootElement}getRootComponent(){let e=this;for(;e.parent;)e=e.parent;return e}getSubComponents(){return this._subComponents}getElementById(e){return this._elementMap[e]?this._elementMap[e]:null}getEventHandler(e){return this._eventHandler[e]}setStyle(e,t){var n=this;return u()((function*(){const i=n.getElementById(e),r=n._manualStyle;e&&t&&(i&&Object.assign(i.style,t),r[e]=r[e]||{},Object.assign(r[e],t)),yield Promise.resolve();const o=n.getRootComponent();yield o.requestLayout()}))()}requestLayout(){const e=Array.isArray(this._rootElement)?this._rootElement[0]:this._rootElement;return new Promise((t=>{this._setStyleTimer&&clearTimeout(this._setStyleTimer),this._setStyleTimer=setTimeout((()=>{this._setStyleTimer=null,ee(d(this._rootElement)),Promise.race([null==e?void 0:e.nextUpdate(),(0,c.Vs)(200)].filter((e=>e))).then((()=>t()))}),0)}))}_bindEvent(e,t,n){return this._eventHandler[e]=this._eventHandler[e]||{},this._eventHandler[e][t]=this._eventHandler[e][t]||new Set,this._eventHandler[e][t].add(n),n}_unbindEvent(e,t,n){var i,r;return!(null===(i=this._eventHandler[e])||void 0===i||null===(r=i[t])||void 0===r||!r.has(n))&&(this._eventHandler[e][t].delete(n),0===this._eventHandler[e][t].size&&delete this._eventHandler[e][t],0===Object.keys(this._eventHandler[e]).length&&delete this._eventHandler[e],!0)}onClick(e,t){return this._bindEvent(e,"click",t)}offClick(e,t){return this._unbindEvent(e,"click",t)}onReady(e,t){return this._bindEvent(e,"ready",t)}offReady(e,t){return this._unbindEvent(e,"ready",t)}onTouchstart(e,t){return this._bindEvent(e,"touchstart",t)}offTouchstart(e,t){return this._unbindEvent(e,"touchstart",t)}onTouchmove(e,t){return this._bindEvent(e,"touchmove",t)}offTouchmove(e,t){return this._unbindEvent(e,"touchmove",t)}onTouchend(e,t){return this._bindEvent(e,"touchend",t)}offTouchend(e,t){return this._unbindEvent(e,"touchend",t)}onTouchcancel(e,t){return this._bindEvent(e,"touchcancel",t)}offTouchcancel(e,t){return this._unbindEvent(e,"touchcancel",t)}onWaiting(e,t){return this._bindEvent(e,"waiting",t)}offWaiting(e,t){return this._unbindEvent(e,"waiting",t)}onPlay(e,t){return this._bindEvent(e,"play",t)}offPlay(e,t){return this._unbindEvent(e,"play",t)}onPause(e,t){return this._bindEvent(e,"pause",t)}offPause(e,t){return this._unbindEvent(e,"pause",t)}onEnded(e,t){return this._bindEvent(e,"ended",t)}offEnded(e,t){return this._unbindEvent(e,"ended",t)}onTimeUpdate(e,t){return this._bindEvent(e,"timeUpdate",t)}offTimeUpdate(e,t){return this._unbindEvent(e,"timeUpdate",t)}onError(e,t){return this._bindEvent(e,"error",t)}offError(e,t){return this._unbindEvent(e,"error",t)}onProgress(e,t){return this._bindEvent(e,"progress",t)}offProgress(e,t){return this._unbindEvent(e,"progress",t)}onFullScreenChange(e,t){return this._bindEvent(e,"fullScreenChange",t)}offFullScreenChange(e,t){return this._unbindEvent(e,"fullScreenChange",t)}}h.isComponent=!0,h.subComponents={};const p=e=>e;var f=n(19);let g;!function(e){e.waiting="waiting",e.play="play",e.pause="pause",e.ended="ended",e.timeUpdate="timeUpdate",e.error="error",e.progress="progress",e.fullScreenChange="fullScreenChange",e.loadedMetaData="loadedMetaData"}(g||(g={}));class _ extends h{render(){const{props:{children:e}}=this;return e}}_.isFragment=!0;const m="Fragment",y={view:i.G7,text:i.xv,image:i.Ee,video:i.nk},v=e=>e.name[0]>="A"&&e.name[0]<="Z",A=new WeakMap,b=(e,t)=>{const{referComponent:n}=t,i={children:t.children};let r="getSubComponentProps",o=[];if(e.getProps){const[t,...n]=e.getProps.split(":");r=t,o=n}Object.assign(i,F(n,r,t.name,...o)||{});for(const t of Object.keys(e)){const n=e[t];["getProps","children"].includes(t)||(i[t]=n)}return i.children=t.children,i},w=(e,t,n)=>{if(!n.isComponent)throw new Error(`class ${e.name} is not a component, please ensure extend BaseComponent`);return M(n,b(t,e),!1,e.referComponent)},E=(e,t=T(e))=>{const{referComponent:n}=e,{id:i}=t,r=(("string"==typeof t.class?t.class:"")||"").split(/\s+/).filter(Boolean),a=o()({},t);i&&(a.name=i),delete a.id,a.style=de({classList:r,name:i,referComponent:n});const s=null!=a.bubbleEvent,c=new(0,y[e.name])(a);if(c.isBubbleEventSet=s,Object.assign(c,{classList:r,referComponent:n,key:t.key||null}),i&&n&&n.getEventHandler(i))for(const t of Object.keys(n.getEventHandler(i))){const r=n.getEventHandler(i)[t];if(t in g){if("video"===e.name)for(const e of r){const n=c[`on${t[0].toUpperCase()}${t.slice(1)}`];null==n||n.call(c,e)}}else for(const e of r)c.on(t,e)}return null!=i&&(p(n)._elementMap[i]=c),c},T=e=>{const t={};for(const n of Object.keys(e.attributes)){const i=e.attributes[n],r=(0,c.um)(n);t[r]=i,/\{\{.+\}\}/.test(i)||("true"===i?t[r]=!0:"false"===i?t[r]=!1:"id"===r?t.id=(0,c.um)(i):t[r]=i)}return t},S=e=>{const t=e.constructor.subComponents||[],n="function"==typeof t?t():t;return o()(o()({},n),{},{[m]:_})},C=e=>{if(Array.isArray(e)){const t=e.map((e=>C(e))),n={element:null,subComponents:[]};for(const{element:e,subComponents:i}of t){e&&(null===n.element&&(n.element=[]),Array.isArray(e)?n.element.push(...(0,f.xH)(e)):n.element.push(e));for(const e of i)n.subComponents.includes(e)||n.subComponents.push(e)}return n}if(!e)return{element:null,subComponents:[]};const t=S(e.referComponent);let n;const i=[],r=T(e);if(v(e)){if(!t[e.name])throw new Error(`component name ${e.name} does not exists`);const o=w(e,r,t[e.name]);if(n=o.getRootElements(),!n)return{element:null,subComponents:[]};i.push(o)}else{const t=E(e,r);e.children.forEach((e=>{const{element:n,subComponents:r}=C(e);if(n)if(i.push(...r),Array.isArray(n))for(const e of n)t.add(e);else t.add(n)})),n=t}return{element:n,subComponents:i}},I=(e,t)=>{const n=["autoInsert","autoplay","bubbleEvent","clickState","controls","enablePlayGesture","enableProgressGesture","eventType","height","hide","initialTime","live","loop","muted","obeyMuteSwitch","objectFit","parentId","playbackRate","poster","preLoad","scene","showCenterPlayBtn","src","underGameView","width","x","y","value"];let i=!1;for(const e of n)void 0===t[e]&&(t[e]=void 0);for(const r of Object.keys(t)){const o=t[r];n.includes(r)&&e[r]!==o&&(e[r]=o,i=!0)}return i},x=(e,t,n=null)=>{let i=n;if(e!==t){if(!i){if(!e||!e.parent)throw new Error("can not find element tree without parent");i=e.parent}if(e&&i.remove(e),t)if(Array.isArray(t))for(const e of t)i.add(e);else i.add(t)}},D=(e,t)=>{if(y[t.name]&&e)return e.constructor===y[t.name];if(null!=e&&e.isRootElementOfComponent&&e.referComponent){return e.referComponent.constructor.name===t.name}return!1},O=(e,t)=>{const n=T(t),i=t.referComponent,r=S(i),o=e&&D(e,t);if(!v(t)){if(!t.children||0===t.children.length)return e&&o?(I(e,n),e):E(t,n);if(e&&o)return I(e,n),R((e=>Object.keys(e.children).map((t=>e.children[t])))(e),t.children),e;const{element:r,subComponents:a}=C(t);return i.getSubComponents().push(...a),r}const a=null==e?void 0:e.referComponent,s=null==a?void 0:a.constructor;if(a&&s===r[t.name]){Object.assign(p(a).props,b(n,t));return L(a)}const c=i.getSubComponents().indexOf(a);c>-1&&i.getSubComponents().splice(c,1),a&&F(a,"destroy"),null==e||e.remove();return w(t,n,r[t.name]).getRootElements()},P=e=>e.reduce(((e,t)=>(t.name===m?e.push(...P(t.children)):e.push(t),e)),[]),R=(e,t)=>{const n=[],i={};for(const t of e)t.key?i[t.key]=t:n.push(t);for(const r of P(t)){const{key:t}=r;let o=null;if(t)i[t]&&(o=i[t],delete i[t]);else for(const e of Object.keys(n)){const t=n[+e];if(t&&D(t,r)){o=t,n.splice(Number(e),1);break}}o||(o=n.shift()||null),e.length&&e[0].parent&&x(o,O(o,r),e[0].parent)}const r=Object.keys(i).reduce(((e,t)=>(e.push(i[t]),e)),[]);for(const e of[...n,...r])null==e||e.remove()},k=(e,t)=>{Array.isArray(e)?e.forEach((e=>k(e,t))):(t(e),e.children.forEach((e=>k(e,t))))},N=(e,t)=>{k(e,(e=>{e.referComponent||(e.referComponent=t)}))},M=(e,t,n=!0,i=null)=>{const r=new e(t);r.parent=i;const o=r.render(),a="string"==typeof o?s()(o).root:o;N(a,r);const{element:c,subComponents:l}=C(a);return p(r)._subComponents=l,c&&(p(r)._rootElement=c,Array.isArray(c)?c.forEach((e=>{e.isRootElementOfComponent=!0})):c.isRootElementOfComponent=!0),F(r,"ready",c,l),n&&(c&&(Array.isArray(c)?c.forEach((e=>{fe.add(e),ee(e)})):(fe.add(c),ee(c))),A.set(e,r)),r},L=(e,t)=>{t&&Object.assign(p(e).props,t);const n=e.getRootElements(),i=e.render(),r="string"==typeof i?s()(i).root:i;return N(r,e),Array.isArray(n)&&Array.isArray(r)?R(n,r):Array.isArray(n)&&!Array.isArray(r)?R(n,[r]):!Array.isArray(n)&&Array.isArray(r)?R([n],r):Array.isArray(n)||Array.isArray(r)||x(n,O(n,r)),F(e,"updatedProps"),n},B=e=>{if(!p(e).isComponent)throw new Error("variable is not a component instance");const t=e.getRootElements();Array.isArray(t)?t.forEach((e=>fe.remove(e))):fe.remove(t),p(e)._unmountComponent(),A.delete(e.constructor)},F=(e,t,...n)=>"function"==typeof e[t]?e[t](...n):null;var U=n(9890),W=n(4643),j=n(996);const G=["width","height"],V=(e="column",t)=>["row","column"].indexOf(e)===["width","height"].indexOf(t),H=(e,t)=>Math.max(e,t),z=(e,t)=>e+t,Z=e=>({width:(e.style.marginLeft||0)+(e.style.marginRight||0),height:(e.style.marginTop||0)+(e.style.marginBottom||0)}),Y=e=>({width:(e.style.paddingLeft||0)+(e.style.paddingRight||0),height:(e.style.paddingTop||0)+(e.style.paddingBottom||0)}),$=(e,t,n)=>e&&"px"===e.slice(-2)?parseFloat(e.slice(0,-2))+n:parseFloat(e.slice(0,-1))/100*t+n,q=(e,t,n,i,r,o)=>{const a=e.parent,s=i[n],c=Y(e)[n];let l=t,u=null,d=!1;var h;if(!r&&o>0&&(null==l||o>l)&&(l=o),i.position&&"absolute"===i.position[1]&&null!=l&&(l+=o),s||null==l)s&&"percent"===s[0]&&null!=l?(u=l*s[1]-c,d=!0):s&&"digit"===s[0]&&(u=s[1]-c,d=!0);else if("auto"!==e.style[n])if("absolute"===(null===(h=i.position)||void 0===h?void 0:h[1])){let e=0,t=!1;for(const r of"width"===n?["left","right"]:["top","bottom"])null!=i[r]?"digit"===i[r][0]?e+=Number(i[r][1])||0:"percent"===i[r][0]&&(e+=(Number(i[r][1])||0)*l):t=!0;u=t?null:l-e}else r&&V(a.style.flexDirection,n)&&e.style.flex>0?u=null:((e=>(0,W.MJ)(e).some((e=>null!=e.style.flex&&e.style.flex>0)))(e)&&(d=!0),u=l-c);return null!=u&&(e.autoFitSize[n].size=u),d},Q=e=>{const t=(0,W.ex)(e),n=Y(e);e.autoFitSize={width:{size:null,margin:0,padding:n.width},height:{size:null,margin:0,padding:n.height}};const r=e.parent,o=pe(de(e)),a={width:!1,height:!1},s={width:null,height:null};for(const n of G){const i=o[n];let s=t?"width"===n?U.S.screenWidth:U.S.screenHeight:r.autoFitSize[n].size;const c=t?0:r.autoFitSize[n].padding;!i&&t&&"height"===n&&(s=null),a[n]=q(e,s,n,o,!0,c)}X(e,o);const c=Y(e),l="wrap"===e.style.flexWrap,u=[];for(const t of(0,W.MJ)(e)){Q(t);const n=Z(t);if("absolute"!==t.style.position)for(const i of G){const r=V(e.style.flexDirection,i);if(l){if(r){const e="width"===i?"height":"width";u.push([(t.autoFitSize[i].size||0)+t.autoFitSize[i].padding+n[i],(t.autoFitSize[e].size||0)+t.autoFitSize[e].padding+n[e]])}}else{const e=r?z:H;null==t.autoFitSize[i].size&&t.autoFitSize[i].padding<=0&&e===z&&(a[i]=!0),s[i]=e((t.autoFitSize[i].size||0)+t.autoFitSize[i].padding+n[i],s[i]||0)}}}if(l){let t=0,n=0,i=0,r=0;const o=V(e.style.flexDirection,"width")?"width":"height",c="width"===o?"height":"width";r=a[o]&&null!=e.style[o]?e.style[o]:u.reduce(((e,[t])=>e+t),0);for(const[e,o]of u)i=Math.max(i,o),e+t>r?(n+=i,i=o,t=e):t+=e;n+=i,s[o]=t,s[c]=n}e instanceof i.xv&&(null!=e.autoFitSize.height.size&&a.height||Object.assign(e.autoFitSize.height,{size:e.style.lineHeight||e.style.fontSize||0,padding:c.height}),null!=e.autoFitSize.width.size&&a.width||Object.assign(e.autoFitSize.width,{size:j.Z.getTextWidth(e.value,e.style.fontSize||14)+3,padding:c.width}));for(const t of G)a[t]||null===s[t]?c[t]>0&&(e.autoFitSize[t].padding=c[t]):Object.assign(e.autoFitSize[t],{size:null!=s[t]?s[t]:null,padding:c[t]})},J=e=>{const t=(0,W.MJ)(e);for(const i of G){const r=V(e.style.flexDirection,i);let{size:o}=e.autoFitSize[i];const{padding:a}=e.autoFitSize[i];if(null==o&&!a)continue;o=o||0;let s=0,c=0;for(const e of t){const{size:t,margin:n,padding:r}=e.autoFitSize[i];"absolute"!==e.style.position&&(null!=t?s+=t+r+n:e.style.flex&&e.style.flex>0&&(c+=Number(e.style.flex)))}for(const l of t){var n;const t=pe(de(l));let u=null;r?u=l.style.flex?(o-s)/H(c,1)*l.style.flex:null:e.style.alignItems&&"stretch"!==e.style.alignItems||(u=o),null==l.autoFitSize[i].size&&u?q(l,u,i,t,!1,a):"absolute"===(null===(n=t.position)||void 0===n?void 0:n[1])&&q(l,o,i,t,!1,a)}}for(const e of t)J(e);for(const t of G){const{size:n,padding:i}=e.autoFitSize[t];null!=n&&e.style[t]!==n+i&&(e.style[t]=n+i)}e instanceof i.xv&&null==e.style.lineHeight&&(e.style.lineHeight=e.style.height)},X=(e,t)=>{const n=e.autoFitSize.width.size,i=e.autoFitSize.height.size;for(const r of Object.keys(t)){const o=t[r];"percent"===o[0]?"horizontal"===ne[r]&&null!=n?e.style[r]=o[1]*n:"vertical"===ne[r]&&null!=i&&(e.style[r]=o[1]*i):"normal"===o[0]&&(e.style[r]=o[1])}t.transform&&"transform"===t.transform[0]&&(e.style.left=$(t.transform[1][0],n||0,e.style.left||0),e.style.top=$(t.transform[1][1],i||0,e.style.top||0)),!e.style.lineHeight&&e.parent&&e.parent.style.lineHeight&&(e.style.lineHeight=e.parent.style.lineHeight)},K=e=>{const t=[["width","left"],["height","top"]];for(const i of(0,W.MJ)(e)){K(i);for(const[r,o]of t){var n;if((i.style.position||null!==(n=i.expandAbsoluteSize)&&void 0!==n&&n.has(r))&&"hidden"!==e.style.overflow){const t=(i.style[r]||0)+(i.style[o]||0);t>(e.style[r]||0)&&(e.style[r]=t,e.expandAbsoluteSize=e.expandAbsoluteSize||new Set,e.expandAbsoluteSize.add(r))}}}},ee=e=>{Q(e),J(e),K(e)},te=e=>Number(e).toString()===e,ne={left:"horizontal",right:"horizontal",marginLeft:"horizontal",marginRight:"horizontal",paddingLeft:"horizontal",paddingRight:"horizontal",marginTop:"horizontal",marginBottom:"horizontal",paddingTop:"horizontal",paddingBottom:"horizonta",borderRadius:"horizontal",top:"vertical",bottom:"vertical"},ie=/^\s*#[0-9a-fA-F]{3}\s*$/,re=/^\s*#[0-9a-fA-F]{3,6}\s*$/,oe=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,ae=/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/,se=/px$/,ce=e=>"number"==typeof e?e:se.test(e)?Number(e.replace(se,""))||0:te(e)?parseInt(e,10):e,le=e=>{if("string"==typeof e&&ie.test(e)){const[t,n,i]=e.slice(1);return`#${t}${t}${n}${n}${i}${i}`}return e},ue=(e={})=>{const t={};for(const n of Object.keys(e)){const i=e[n];if(["padding","margin"].includes(n)){const e=Array.isArray(i)?i:(null==i?"":i).toString().split(/\s+/);let r=null,o=null,a=null,s=null;switch(e.length){case 0:continue;case 1:[r]=e,[o]=e,[a]=e,[s]=e;break;case 2:[r,o]=e,[a,s]=e;break;case 3:[r,o,a]=e,s=o;break;case 4:[r,s,a,o]=e;break;default:continue}Object.assign(t,{[`${n}Top`]:ce(r),[`${n}Left`]:ce(o),[`${n}Bottom`]:ce(a),[`${n}Right`]:ce(s)})}else if("border"===n){const e=(i||"").toString().split(/\s+/);switch(e.length){case 0:continue;case 1:t.borderColor=le(e[0]);continue;case 2:t.borderWidth=ce(e[0]),t.borderColor=le(e[1]);continue;case 3:t.borderWidth=ce(e[0]),t.borderColor=le(e[2]);continue;default:continue}}else if("background"===n&&re.test(e[n]))t.backgroundColor=le(e[n]);else if("background"===n&&(oe.test(e[n])||ae.test(e[n])))t.backgroundColor=e[n];else if("background"===n&&e[n].includes("linear-gradient"))t.backgroundColor=e[n];else if("color"===n&&"string"==typeof i&&ae.test(i)){const[n,r,o,a]=ae.exec(i).slice(1,5).map((e=>Number(e))),s=e=>e.toString(16);t.color=`#${s(n)}${s(r)}${s(o)}`,null==e.opacity&&(t.opacity=Number(a))}else if("display"===n&&"none"===e[n])t.hidden=!0;else if("rotate"===n){const i=e[n];t.rotate="string"==typeof i?Number(i.replace("deg",""))||0:i}else t[n]=le(ce(e[n]))}return t},de=e=>{const t=p(e.referComponent);if(!t)return Object.assign({},e.style||{});const n={},i=t.style||{};for(const t of e.classList||[])Object.assign(n,ue(i[t])),Object.assign(n,ue(i[`.${t}`]));return i[e.name]&&Object.assign(n,ue(i[e.name])),e.name&&t._manualStyle[e.name]&&Object.assign(n,ue(t._manualStyle[e.name])),n},he={percent:/^-?[1-9]\d*(\.\d+)?%$/,translate:/translate\(\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*,\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*\)/},pe=e=>{const t={};for(const n of Object.keys(e)){const i=e[n];if(null==i)continue;const r=i.toString().trim();if((ne[n]||["width","height"].includes(n))&&he.percent.test(r)){const e=parseFloat(r.slice(0,-1))/100;t[n]=["percent",e]}else if(te(r))t[n]=["digit",Number(r)];else if("transform"===n&&r.includes("translate")){const e=he.translate.exec(r);e&&(t[n]=["transform",e.slice(1,3)])}else t[n]="string"==typeof i?["normal",r]:["normal",i]}return t},fe=i.uo},9890:(e,t,n)=>{"use strict";n.d(t,{S:()=>c,g:()=>l});var i=n(665),r=n(1095),o=n(4643),a=n(3170);let s=!1;const c={},l=()=>s?Promise.resolve(c):new Promise((e=>{i.Z.onReady((()=>{s=!0,c.deviceOrientation=(0,o._t)();const t=(0,a.Ew)();c.screenWidth=t.screenWidth||0,c.screenHeight=t.screenHeight||0,c.isWaGame=(0,r.aI)(),e(c)}))}))},19:(e,t,n)=>{"use strict";n.d(t,{ei:()=>i,Ee:()=>o,Zw:()=>a,U2:()=>s,xH:()=>c,Xh:()=>l});const i=(e,t)=>t.reduce(((t,n)=>(t[n]=e[n],t)),{}),r=e=>e&&"object"==typeof e&&!Array.isArray(e);function o(e,...t){if(!t.length)return e;const n=t.shift();if(r(e)&&r(n))for(const t of Object.keys(n))r(n[t])?(e[t]||Object.assign(e,{[t]:{}}),o(e[t],n[t])):Object.assign(e,{[t]:n[t]});return o(e,...t)}const a=e=>{const t=new Set;let n=e;for(;n;){for(const e of Object.getOwnPropertyNames(n))t.add(e);n=Object.getPrototypeOf(n)}return[...t]},s=(e,t,n)=>{const i="string"==typeof t?t.split("."):t;let r=e,o=0;for(;r&&o<i.length;)r=r[i[o]],o+=1;return r||n},c=e=>e.reduce(((e,t)=>(Array.isArray(t)?e.push(...c(t)):e.push(t),e)),[]),l=e=>JSON.parse(JSON.stringify(e))},4643:(e,t,n)=>{"use strict";n.d(t,{a3:()=>g,Xh:()=>i.Xh,U2:()=>i.U2,Ze:()=>l,_t:()=>y,Zw:()=>i.Zw,Wz:()=>f,MJ:()=>s,gC:()=>w,Ie:()=>b,ex:()=>o,Ee:()=>i.Ee,ei:()=>i.ei,zJ:()=>c});var i=n(19),r=n(8401);const o=e=>{var t;return e.parent===r.Ar||!(null!==(t=e.parent)&&void 0!==t&&t.referComponent)},a=e=>Object.keys(e.children).map((t=>e.children[t])),s=e=>a(e).filter((e=>!0!==(null==e?void 0:e.style.hidden))),c=(e,t,n="downward")=>{"downward"===n&&t(e);for(const i of a(e))c(i,t,n);"upward"===n&&t(e)},l=(e,t)=>{for(const{path:n,value:r,condition:o=!0}of t){if(!o)continue;const t=r||(n?(0,i.U2)(e,n):"");if(t)return t}return null},u=63,d=e=>{const t=e.toString(16).toUpperCase();return t.length<2?`%0${t}`:`%${t}`},h=e=>{if(!e)return"";const t=String(e),n=[],i=/[ \r\n!*"'();:@&=+$,/?%#[\]<>{}|`^\\\u0080-\uffff]/;for(const e of t)if(e.match(i)){const t=e.codePointAt?e.codePointAt(0):e.charCodeAt(0);t<128?n.push(d(t)):t<2048?n.push([d(192+(t>>6)),d(128+(t&u))].join("")):t<65536?n.push([d(224+(t>>12)),d(128+(t>>6&u)),d(128+(t&u))].join("")):t<2097152&&n.push([d(240+(t>>18)),d(128+(t>>12&u)),d(128+(t>>6&u)),d(128+(t&u))].join(""))}else n.push(e);return n.join("")},p=e=>{if(!e)return"";const t=e=>{if(!e)throw new Error("invalid text")},n=e=>String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(e),i=e.replace(/%[a-fA-F0-9]{2}/gi,(e=>String.fromCharCode(parseInt(e.replace("%",""),16))));let r=0,o="";for(;r<i.length;){const e=i.charCodeAt(r);if(e<128)o+=n(e),r+=1;else if(e>=192&&e<224){t(r+1<i.length);o+=n((31&e)<<6|i.charCodeAt(r+1)&u),r+=2}else if(e<240){t(r+2<i.length);const a=i.charCodeAt(r+1),s=i.charCodeAt(r+2);o+=n((15&e)<<12|(a&u)<<6|s&u),r+=3}else{t(r+3<i.length);const a=i.charCodeAt(r+1),s=i.charCodeAt(r+2),c=i.charCodeAt(r+3);o+=n([(7&e)<<18,(a&u)<<12,(s&u)<<6,c&u].reduce(((e,t)=>e|t),0)),r+=4}}return o},f=e=>{const t={};if(e.indexOf("?")>-1){const n=e.indexOf("?")+1;let i=e.substring(n);i.indexOf("#")>-1&&(i=i.substring(0,i.indexOf("#")));const r=i.split("&");for(const e of r){const[n,i]=e.split("=");t[n]=p(i)}}return t},g=(e,t)=>{if(!e)return"";if(!t)return e;const n=e.split("#"),i=n[0].indexOf("?")>-1?"&":"?";let r="";const o=Object.keys(t);if(o.length>0){for(const e of o)r=r.concat(`${e}=${h(t[e])}&`);return r.length>0&&(r=r.substring(0,r.length-1)),n[0]+i+r+(n[1]?`#${n[1]}`:"")}return e};var _=n(3170),m=n(665);const y=()=>{const e=(0,_.Ew)();return e.screenWidth&&e.screenHeight?e.screenWidth>e.screenHeight?"landscape":"portrait":m.Z.deviceOrientation&&/^landscape/.test(m.Z.deviceOrientation)?"landscape":m.Z.deviceOrientation||"portrait"};var v=n(9237);const A=e=>e===v.fr.LIVE,b=(e,t)=>A(e)&&t===v.EM.ROOM,w=(e,t)=>A(e)&&t===v.EM.RESERVATION},3866:(e,t,n)=>{"use strict";let i,r,o,a,s,c,l,u,d;n.d(t,{H:()=>i,_d:()=>r,Y8:()=>o,Xw:()=>a,XP:()=>s,nf:()=>c,H_:()=>l,Zw:()=>u,dA:()=>d}),function(e){e.TAP="tap",e.ANIMATIONEND="animationend"}(i||(i={})),function(e){e.APPENTERFOREGROUND="appEnterForeground",e.APPENTERBACKGROUND="appEnterBackground",e.CONTAINERTAP="containerTap",e.ADBUTTONTAP="adButtonTap",e.VIEWABLEEXPOSURE="viewableExposure",e.EXPOSURE="exposure",e.SHOWHALF="showhalf",e.HIDEHALF="hidehalf",e.SPLASHADFIRSTRENDER="splashAdFirstRender",e.SPLASHADMENUVIEW="splashAdMenuView"}(r||(r={})),function(e){e.BUTTONTAP="buttonTap"}(o||(o={})),function(e){e.RELATIONFETCHED="relationFetched"}(a||(a={})),function(e){e.VIDEOENDED="videoEnded",e.VIDEOPAUSE="videoPause",e.VIDEOPLAY="videoPlay",e.VIDEOTIMEUPDATE="videoTimeUpdate",e.MUTEDCHANGE="mutedChange",e.VIDEOLOADEDMETADATA="videoLoadedMetaData"}(s||(s={})),function(e){e.FEEDBACKBTNTAP="feedbackBtnTap",e.TAGTAP="tagTap",e.DISLIKETAP="dislikeTap",e.DISLIKEREASONTAP="dislikeReasonTap"}(c||(c={})),function(e){e.REPLAY="replay",e.SHOW="show",e.HIDE="hide",e.VIDEODISLIKE="videodislike"}(l||(l={})),function(e){e.SHOWCHANGE="showChange",e.UNITTAP="unitTap"}(u||(u={})),function(e){e.REWARDEDVIDEOPLAY="rewardedVideoPlay",e.REWARDEDVIDEOEND="rewardedVideoEnd",e.REWARDEDVIDEOTIMEUPDATE="rewardedVideoTimeUpdate",e.REWARDEDVIDEOSHOWFLOORINGPAGE="rewardedVideoShowFlooringPage",e.REWARDEDVIDEOHANDLEDYNAMICDONE="rewardedVideoHandleDynamicDone"}(d||(d={}))},780:(e,t,n)=>{"use strict";let i;n.d(t,{A:()=>i}),function(e){e.SHOWFEEDBACK="showFeedback",e.ADSHOWHALF="adShowHalf",e.ADHIDEHALF="adHideHalf",e.TRIGGEREVENT="triggerEvent",e.REPORTVIDEOPLAY="reportVideoPlay",e.APPENTERBACKGROUND="appEnterBackground",e.ADVIDEOPAUSE="adVideoPause",e.ADVIDEOPLAY="adVideoPlay",e.FEEDBACKBTNTAP="feedbackBtnTap",e.FEEDBACKREPORT="feedbackReport",e.BTNTAP="btnTap",e.CHANGEADBTNTEXT="changedAdBtnText",e.ENDPAGEINIT="endPageInit",e.SHOWENDPAGE="showEndPage",e.REPORTENDPAGE="reportEndPage",e.APPENTERFOREGROUND="appEnterForeground",e.ENDPAGEHIDE="endPageHide",e.ENDPAGESHOW="endPageShow",e.REPORTMMDATA="reportMMData",e.HIDEAD="hideAd",e.REPORTTIMEPOINT="reportTimePoint",e.CHANGEMULTISHOW="changeMultiShow",e.CHECKEXPOSURE="checkExposure",e.LANDAD="landAd",e.CHANGECOUNTDOWN="changeCountdown",e.SPLASHSKIPAD="splashSkipAd",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(i||(i={}))},637:(e,t,n)=>{"use strict";let i;n.d(t,{aO:()=>i,Y8:()=>r.Y8,Dx:()=>u,Zw:()=>r.Zw,Af:()=>_,H:()=>r.H,A$:()=>o.A,JF:()=>v,H_:()=>r.H_,Bq:()=>y,nf:()=>r.nf,Eo:()=>h,bk:()=>g,IN:()=>m.$g,v5:()=>c,BB:()=>s,dA:()=>r.dA,_d:()=>r._d,Xw:()=>r.Xw,qW:()=>l,XP:()=>r.XP,jn:()=>d,fc:()=>A}),function(e){e.HIDEAD="hideAd",e.SETSTYLE="setStyle",e.REPORTIDKEY="reportIdKey",e.TRIGGEREVENT="triggerEvent",e.SETEXPRVARS="setExprVar",e.VIDEOTOGGLEMUTED="videoToggleMuted",e.VIDEOPLAY="videoPlay",e.VIDEOPAUSE="videoPause",e.VIDEOSTOP="videoStop",e.BUTTONSETTEXT="buttonSetText",e.RELOADAD="reloadAd",e.REPORTMMDATA="reportMMData",e.ENDPAGEHIDE="endPageHide",e.IMAGESETSRC="imageSetSrc",e.TEXTSETTEXT="textSetText",e.ANIMATE="animate",e.TRIGGERBTNCLICK="triggerBtnClick",e.CHANGEMULTISHOW="changeMultiShow",e.LANDAD="landAd",e.SPLASHSKIPAD="splashSkipAd",e.ADDCHILDREN="addChildren",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(i||(i={}));var r=n(3866),o=n(780);let a,s,c,l,u,d,h,p,f,g,_;!function(e){e[e.COMMON=1]="COMMON",e[e.FULLSCREEN=2]="FULLSCREEN"}(a||(a={})),function(e){e[e.COMMON=1]="COMMON",e[e.ROW=2]="ROW",e[e.COLUMN=3]="COLUMN",e[e.PROPORTION=4]="PROPORTION"}(s||(s={})),function(e){e[e.COMMON=1]="COMMON",e[e.ICON=2]="ICON",e[e.AD=3]="AD"}(c||(c={})),function(e){e[e.COMMON=1]="COMMON",e[e.NICKNAME=2]="NICKNAME",e[e.DESC=3]="DESC",e[e.RELATION=4]="RELATION"}(l||(l={})),function(e){e[e.COMMON=1]="COMMON",e[e.LOGICCOMMON=2]="LOGICCOMMON"}(u||(u={})),function(e){e[e.COMMON=1]="COMMON",e[e.AD=2]="AD"}(d||(d={})),function(e){e[e.COMMON=1]="COMMON",e[e.SIMPLE=2]="SIMPLE"}(h||(h={})),function(e){e[e.COMMON=1]="COMMON"}(p||(p={})),function(e){e[e.COMMON=1]="COMMON"}(f||(f={})),function(e){e[e.NONE=0]="NONE",e[e.COMMON=1]="COMMON",e[e.ADS=2]="ADS"}(g||(g={})),function(e){e[e.NONE=0]="NONE",e[e.ROWLOOP=1]="ROWLOOP",e[e.COLUMNLOOP=2]="COLUMNLOOP"}(_||(_={}));var m=n(8579);let y,v;!function(e){e[e.ERR_RENDER=2001]="ERR_RENDER",e[e.ERR_TPL_NONE=2002]="ERR_TPL_NONE",e[e.ERR_TPL_PARSE=2003]="ERR_TPL_PARSE",e[e.ERR_SHOW_FAILED1=2004]="ERR_SHOW_FAILED1",e[e.ERR_SHOW_FAILED2=2005]="ERR_SHOW_FAILED2"}(y||(y={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ING=1]="ING",e[e.PAUSE=2]="PAUSE",e[e.SUCCESS=3]="SUCCESS",e[e.INSTALLED=4]="INSTALLED"}(v||(v={}));const A=["left","top","right","bottom","width","height","maxWidth","maxHeight","minWidth","minHeight","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","fontSize","lineHeight","borderRadius"]},6714:(e,t,n)=>{"use strict";n.d(t,{zt:()=>s,zi:()=>c});var i=n(9237),r=n(5260),o=n(8476);const a=e=>{const t=/(\d+)(?:\.(\d+))?(?:\.(\d+))?(?:\.(\d+))?/.exec(e);return t?t.slice(1).filter((e=>null!=e)).join("."):null},s=function(e){var t,n;const s=c(e),l="portrait"===o.S3.deviceOrientation,u=e.crt_size===i.W.CRT_SIZE_REWARD_VEDIO916;if(o.S3.isAndroid){var d,h;const t=a((null==e||null===(d=e.condition)||void 0===d?void 0:d.widget_gray_rewrad_use_gauss_blur_android_system_version)||""),n=a((null==e||null===(h=e.condition)||void 0===h?void 0:h.widget_gray_rewrad_use_gauss_blur_android_wechat_version)||""),i=a(o.S3.systemVersion),s=a(o.S3.wechatVersion);if(t&&i&&(0,r.yC)(i,t)<0)return!1;if(n&&s&&(0,r.yC)(s,n)<0)return!1}return Boolean((null==e||null===(t=e.condition)||void 0===t?void 0:t.widget_gray_reward_use_gauss_blur)&&(null==e||null===(n=e.gaussVideo)||void 0===n?void 0:n.src)&&l!==u&&[i.W.CRT_SIZE_REWARD_VEDIO169,i.W.CRT_SIZE_REWARD_VEDIO916].includes(e.crt_size)&&(s||l))},c=function(e){const{flooringPage:t}=e,n="portrait"===o.S3.deviceOrientation,r=[i.W.CRT_SIZE_REWARD_VEDIO916,i.W.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size);return Boolean(n!==r&&!o.S3.isIPad&&[i.W.CRT_SIZE_REWARD_VEDIO169,i.W.CRT_SIZE_REWARD_VEDIO916,i.W.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size)&&![2,3,4].includes(null==t?void 0:t.landpage_type))}},1093:(e,t,n)=>{"use strict";n.d(t,{yx:()=>f,dz:()=>g,p4:()=>_});var i=n(1503),r=n.n(i),o=n(2582),a=n(665),s=n(1106);let c="",l="";let u="{}",d="",h="",p="{}";function f(e){c?e&&e(c):o.wZ&&a.Z.clientVersion<654315827?(0,s.IN)("getOAID",{success(t){/:ok/.test(t.errMsg)?(c=t.result||"",e&&e(c)):e&&e("")},fail(){e&&e("")}}):e&&e("")}function g(e=""){return new Promise(((t,n)=>{o.wZ&&a.Z.clientVersion>=654315827||o.cj&&a.Z.clientVersion>=385879808?(0,s.IN)("getDeviceInfo",{waidPkg:e,success(e){c=e.oaid||"",l=e.imei||"",h=e.waid||"",d=e.ua||"",p=e.devIdInfo||"{}";try{u=JSON.stringify(r()(r()({},JSON.parse(p)),d?{ua:d}:{}))}catch(e){n(e)}t({oaid:c,imei:l,commonid:u,waid:h})},fail(e){n(e)}}):t({oaid:c,imei:l,commonid:u,waid:h})}))}function _(e=""){return new Promise(((t,n)=>{let i="",r="";o.wZ&&a.Z.clientVersion>=654316032?(0,s.IN)("getDeviceInfo",{waidPkg:e,success(e){i=e.waid||"",r=e.imei||"",t({waid:i,imei:r})},fail(e){n(e)}}):t({waid:i,imei:r})}))}},5373:(e,t,n)=>{"use strict";n.d(t,{wA:()=>l,Wj:()=>a,bn:()=>c,S1:()=>u,Ue:()=>s});var i=n(8065),r=n(2241);const o=new WeakMap,a=e=>o.get(e),s=function(e){const t=a(this),n={view:i.G7,text:i.xv,image:i.Ee,video:i.nk,"image-previewer":i.Vr}[e.name];let o="";e.attributes.id?o=(0,r.um)(e.attributes.id):wxNativeConsole.error(`${e.name} 缺少id`);const c=Object.keys(e.attributes).reduce(((n,i)=>{const a=e.attributes[i],s=(0,r.um)(i);return"id"===i?(n.style=Object.assign(n.style||{},t.style[o]),n):"class"===i?(n.style=a.split(/\s+/).reduce(((e,n)=>Object.assign(e,t.style[n])),n.style||{}),n):(/\{\{.+\}\}/.test(a)||(n[s]=""===a||"true"===a||"false"!==a&&a),n)}),{});c.name=o;const l=new n(c);return t[o]=l,e.children.forEach((e=>{const t=s.call(this,e);l.add(t)})),l},c=e=>{o.delete(e)};class l{constructor(){o.set(this,{})}}const u=function(e,t,n){const i=a(this);i.xom=e,i.style=t,i.state=n,s.call(this,e)}},9974:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(8159);class r{constructor(){this.emitter=new i.Z({maxListeners:2e3}),this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap}emit(e,t){this.emitter.emit(e,t)}on(e,t){if(t&&"function"==typeof t){const n=__errorTracer__.surroundThirdByTryCatch(t,`at ${e} callback function`);this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}off(e,t){if(t&&"function"==typeof t){const n=this.callbackMap.get(t);"function"==typeof n&&(this.emitter.off(e,n),this.callbackMap.delete(t),this.originalCallbackMap.delete(n))}else this.emitter.listeners(e).forEach((e=>{const t=this.originalCallbackMap.get(e);this.callbackMap.delete(t),this.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}}},1876:(e,t,n)=>{"use strict";n.d(t,{U:()=>g});var i=n(9536),r=n.n(i),o=n(8065),a=n(5373),s=n(3170),c=n(9706),l=n(665),u=n(2582),d=n(3536);let h=0,p=0;l.Z.onReady((()=>{const e=(0,s.Ew)();h=e.screenWidth,p=e.screenHeight,(0,c.KN)((e=>{h=e.windowWidth,p=e.windowHeight}))}));class f extends a.wA{constructor({title:e,content:t,icon:n,confirmText:i,cancelText:s,confirm:c,cancel:l,style:u={}}={}){super();const d=(0,a.Wj)(this),f=`<view id="container">\n      <view id="mask" />\n      <view id="tail" />\n      <view id="popup">\n        <view id="header">\n          <image id="close" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png" />\n          <text id="title" value="${e}" />\n          <text id="close2" />\n        </view>\n        <view id="main">\n          ${n?`<image id="icon" src="${!0===n?"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht3OjibpgsQSWKlYHJ8u8AiacNQgu4ianBYzC5gEXmxS74iaGkZUzEbFjwp6n7d8rJV7JSA/0?wx_fmt=png":n}" />`:""}\n          <text id="content" value="${t}" />\n        </view>\n        <view id="footer">\n          ${s?`<text id="cancel" value="${s}" />`:""}\n          ${i?`<text id="confirm" value="${i}" />`:""}\n        </view>\n      </view>\n    </view>`,{root:g}=r()(f),_=(({cancelText:e,confirmText:t,icon:n})=>{const i=h>p;return{mask:{width:h,height:p,zIndex:1000007,opacity:.5,backgroundColor:"#000000"},tail:{bottom:0,height:12,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",left:i?(h-p)/2:0,width:i?p:h},popup:{bottom:0,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",borderRadius:12,left:i?(h-p)/2:0,width:i?p:h},header:{height:64,flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:i?p:h},close:{width:14,height:14,marginLeft:20},title:{width:150,height:40,fontSize:15,lineHeight:40,textAlign:"center",color:"#000000"},close2:{width:14,height:14,marginRight:20},main:{flexDirection:"column",alignItems:"center",width:i?p:h},icon:{height:64,width:64,marginTop:12,marginBottom:8},content:{height:60,fontSize:17,color:"#000000",textAlign:"center",lineBreak:"break-all",marginTop:n?0:64,marginBottom:n?0:15,width:i?.9*p:.9*h},footer:{heihgt:40,marginBottom:32,flexDirection:"row",justifyContent:"center",width:i?p:h},cancel:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#07c160",backgroundColor:"rgba(0, 0, 0, 0.05)",width:t?120:184},confirm:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#ffffff",backgroundColor:"#04c160",width:e?120:184}}})(arguments[0]);Object.keys(u).forEach((e=>{_[e]&&Object.assign(_[e],u[e])})),a.S1.call(this,g,_),o.uo.add(d.container),d.close&&d.close.on("click",(()=>{"function"==typeof l&&l()})),d.cancel&&d.cancel.on("click",(()=>{"function"==typeof l&&l()})),d.confirm&&d.confirm.on("click",(()=>{"function"==typeof c&&c()}))}destroy(){const e=(0,a.Wj)(this);o.uo.remove(e.container),(0,a.bn)(this)}}function g(e={}){return u.DD?((0,d.I6)(Object.assign({},e,{showCancel:!!e.cancelText,success({confirm:t,cancel:n}){t?e.confirm&&e.confirm():n&&e.cancel&&e.cancel()}})),{destroy:()=>{}}):new f(e)}},6095:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const i={ACTION_TYPE_CLICK_GAME:1,ACTION_TYPE_CLICK_CLOSE_BTN:2,ACTION_TYPE_CLICK_HIDE:3,ACTION_TYPE_COMPLAINT:4,ACTION_TYPE_NOT_INTERESTED:5,ACTION_TYPE_INFLUEENCE_OPERATION:6},r={AD_TYPE_BANNER:1,AD_TYPE_PORTAL:2,AD_TYPE_ICON:3},o={reportId:1101,idkey:{BANNER_LOAD_ERROR:1,BANNER_RENDER_ERROR:2,PORTAL_LOAD_ERROR:3,PORTAL_RENDER_ERROR:14,LAUNCH_APP_ERROR:5,REPORT_ERROR:6,BANNER_TIMEOUT:7,BANNER_WXDATA_TIMEOUT:8,BANNER_TIMEOUT_RETRY_SUCCESS:9,BANNER_TIMEOUT_RETRY_FAIL:10,PORTAL_TIMEOUT:11,PORTAL_WXDATA_TIMEOUT:12,PORTAL_TIMEOUT_RETRY_SUCCESS:13,PORTAL_TIMEOUT_RETRY_FAIL:4,BANNER_DATA_INVALID:15,PORTAL_DATA_INVALID:16,BANNER_DATA_INVALID_RETRY_SUCCESS:17,BANNER_DATA_INVALID_RETRY_FAIL:18,PORTAL_DATA_INVALID_RETRY_SUCCESS:19,PORTAL_DATA_INVALID_RETRY_FAIL:20,ICON_LOAD_ERROR:21,ICON_TIMEOUT:22,ICON_WXDATA_TIMEOUT:23,ICON_TIMEOUT_RETRY_SUCCESS:24,ICON_TIMEOUT_RETRY_FAIL:25,ICON_DATA_INVALID:26,ICON_DATA_INVALID_RETRY_SUCCESS:27,ICON_DATA_INVALID_RETRY_FAIL:28,BANNER_PRELOAD_SUCCESS:29,BANNER_PRELOAD_FAIL:30,PORTAL_PRELOAD_SUCCESS:31,PORTAL_PRELOAD_FAIL:32,ICON_PRELOAD_SUCCESS:33,ICON_PRELOAD_FAIL:34},designWidth:375,TIMEOUT:15e3,ERRMSG:{NODATA:"no data available, please invoke load()",DUPLICATEWARN:"同一时刻只能展示一个同一类型的组件",NO_ADUNITID_WARN:"please pass in the adUnitId"},adType:r,adTypeName:{[r.AD_TYPE_BANNER]:"BANNER",[r.AD_TYPE_PORTAL]:"PORTAL",[r.AD_TYPE_ICON]:"ICON"},actionType:i,feedbackList:[{name:"不感兴趣",actionType:i.ACTION_TYPE_NOT_INTERESTED},{name:"影响操作",actionType:i.ACTION_TYPE_INFLUEENCE_OPERATION}],presetChars:{0:5.5615234375,1:5.5615234375,2:5.5615234375,3:5.5615234375,4:5.5615234375,5:5.5615234375,6:5.5615234375,7:5.5615234375,8:5.5615234375,9:5.5615234375,"%":8.8916015625,"(":3.330078125,")":3.330078125,"-":3.330078125,".":2.7783203125,"/":2.7783203125,A:6.669921875,B:6.669921875,C:7.2216796875,D:7.2216796875,E:6.669921875,F:6.1083984375,G:7.7783203125,H:7.2216796875,I:2.7783203125,J:5,K:6.669921875,L:5.5615234375,M:8.330078125,N:7.2216796875,O:7.7783203125,P:6.669921875,Q:7.7783203125,R:7.2216796875,S:6.669921875,T:6.1083984375,U:7.2216796875,V:6.669921875,W:9.4384765625,X:6.669921875,Y:6.669921875,Z:6.1083984375,a:5.5615234375,b:5.5615234375,c:5,d:5.5615234375,e:5.5615234375,f:2.7783203125,g:5.5615234375,h:5.5615234375,i:2.2216796875,j:2.2216796875,k:5,l:2.2216796875,m:8.330078125,n:5.5615234375,o:5.5615234375,p:5.5615234375,q:5.5615234375,r:3.330078125,s:5,t:2.7783203125,u:5.5615234375,v:5,w:7.2216796875,x:5,y:5,z:5,"|":2.59765625}}},996:(e,t,n)=>{"use strict";n.d(t,{Z:()=>K});var i=n(6095),r=n(2582),o=n(1095),a=n(665),s=n(1106),c=n(29),l=n(1661),u=n(5260);const d={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"#00000000"};var h=n(2851);void 0!==globalThis.ImageData&&globalThis.ImageData;function p(e,t,n="",i=""){let r=`canvas_${e}_${t}_${n}_`;return i&&i!==__virtualDOM__.getRootNodeId(e)&&(r+=i),r}function f(e){const t=[];let n=1;return(0,s.Ld)(e,(e=>{let n=-1;for(let i=0;i<t.length;i++){const r=t[i],o=r[0],a=r[1];if(o.cid===e.cid&&o.canvasId===e.canvasId){n=i,a(e);break}}n>=0&&t.splice(n,1)})),function(e,i){e.cid=n++,t.push([e,i])}}const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;"undefined"!=typeof window&&window.atob;let m=!1;a.Z.onReady((()=>{(0,s.IN)("getPermissionBytes",{indexes:[977],success:e=>{e.permissionBytes&&1===e.permissionBytes[0]&&(m=!0)}})}));const y={},v={};function A(e){return"number"==typeof e}function b(e){let t=null;if(null!=(t=/^#([0-9|A-F|a-f]{6})$/.exec(e))){return[parseInt(t[1].slice(0,2),16),parseInt(t[1].slice(2,4),16),parseInt(t[1].slice(4),16),255]}if(null!=(t=/^#([0-9|A-F|a-f]{3})$/.exec(e))){let e=t[1].slice(0,1),n=t[1].slice(1,2),i=t[1].slice(2,3);return e=parseInt(e+e,16),n=parseInt(n+n,16),i=parseInt(i+i,16),[e,n,i,255]}if(null!=(t=/^rgb\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e){return Math.min(255,parseInt(e.trim(),10))})).concat(255);if(null!=(t=/^rgba\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e,t){return 3===t?Math.floor(255*parseFloat(e.trim())):Math.min(255,parseInt(e.trim(),10))}));const n=e.toLowerCase();if((0,l.n)(d,n)){t=/^#([0-9|A-F|a-f]{6,8})$/.exec(d[n]);const e=parseInt(t[1].slice(0,2),16),i=parseInt(t[1].slice(2,4),16),r=parseInt(t[1].slice(4,6),16);let o=parseInt(t[1].slice(6,8),16);return o=o>=0?o:255,[e,i,r,o]}return console.group("非法颜色: "+e),console.error("不支持颜色："+e),console.groupEnd(),[0,0,0,255]}function w(e){if(Array.isArray(e)){const t=[];return e.forEach((function(e){t.push(w(e))})),t}if("object"==typeof e){const t={};for(const n in e)t[n]=w(e[n]);return t}return e}function E(e,t){if(!(r.gm||r.DD||r.Ae||/wxfile:\/\//.test(t)))if(e.pluginId||e.nodeId){const n=e.pluginId.split("/")[0],i=__virtualDOM__.getNodeById(e.nodeId,e.webviewId),r=i&&i.is||"";t=n?0===t.indexOf("/")?__virtualDOM__.getPluginRoutePrefix(n)+(0,u.sd)(r,t,!1).replace(/\.html$/,""):(0,u.sd)(__virtualDOM__.convertComponentAliasToRoute(r),t,!1).replace(/\.html$/,""):(0,u.sd)(r,t,!1).replace(/\.html$/,"")}else t=(0,u.sd)(h.Z.lastRoute,t,!1).replace(/.html$/,"");return t}class T{constructor(e,t){this.type=e,this.data=t,this.colorStop=[]}addColorStop(e,t){L?this.colorStop.push([e,t]):this.colorStop.push([e,b(t)])}}class S{constructor(e){this.width=e}}class C{constructor(e,t){this.image=e,this.repetition=t}}class I{constructor(e,t,n,i){if(this.actions=[],this.path=[],this.subpath=[],this.webviewId=e,this.canvasId=t,this.pluginId=i,this.useHardwareAccelerate=!0,this.nodeId=n,this._id=p(e,t,i,n),this.drawingState=y[this._id]=y[this._id]||[],this.state=v[this._id]=v[this._id]||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:L?"#000000":r.cj?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},this._transform={a:1,b:0,c:0,d:1,e:0,f:0},r.gm||r.DD){const e=document.createElement("canvas");this._context=e.getContext("2d")}}getActions(){const e=w(this.actions);return this.actions=[],this.path=[],this.subpath=[],e}clearActions(){this.actions=[],this.path=[],this.subpath=[]}draw(e=!1,t){const n=this.canvasId,i=w(this.actions),r=this.useHardwareAccelerate;this.actions=[],this.path=[],this.useHardwareAccelerate=!0,this.isWidgetCanvas?$({isWidgetCanvas:!0,actions:i,reserve:e}):$({canvasId:n,actions:i,reserve:e,useHardwareAccelerate:r,complete:t},this.webviewId,this.pluginId,this.nodeId)}createLinearGradient(e,t,n,i){return new T("linear",[e,t,n,i])}createCircularGradient(e,t,n){return new T("radial",[e,t,n])}createPattern(e,t){if(void 0!==t){if(-1!==["repeat","repeat-x","repeat-y","no-repeat"].indexOf(t))return e=e._src?e._src:E(this,e),new C(e,t);console.error(`Failed to execute 'createPattern' on 'CanvasContext': The provided type ('${t}') is not one of 'repeat', 'no-repeat', 'repeat-x', or 'repeat-y'.`)}else console.error("Failed to execute 'createPattern' on 'CanvasContext': 2 arguments required, but only 1 present.")}measureText(e){let t;return r.gm||r.DD?(this._context.font=this.state.font,t=this._context.measureText(e)):(0,s.IN)("measureText",{text:e,fontSize:this.state.fontSize,fontFamily:this.state.fontFamily,fontWeight:this.state.fontWeight,fontStyle:this.state.fontStyle,complete(e){t={width:e.width||0}}}),new S(t.width||0)}save(){this.actions.push({method:"save",data:[]}),this.drawingState.push(this.state)}restore(){this.actions.push({method:"restore",data:[]}),this.state=v[this._id]=this.drawingState.pop()||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:L?"#000000":r.cj?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}getLineDash(){return this.state.lineDash}beginPath(){this.path=[],this.subpath=[],(r.gm||L)&&this.path.push({method:"beginPath",data:[]})}moveTo(e,t){this.path.push({method:"moveTo",data:[e,t]}),this.subpath=[[e,t]]}closePath(){this.path.push({method:"closePath",data:[]}),this.subpath.length&&(this.subpath=[this.subpath.shift()])}lineTo(e,t){0===this.path.length&&0===this.subpath.length?this.path.push({method:"moveTo",data:[].slice.apply(arguments)}):this.path.push({method:"lineTo",data:[].slice.apply(arguments)}),this.subpath.push([e,t])}quadraticCurveTo(e,t,n,i){this.path.push({method:"quadraticCurveTo",data:[e,t,n,i]}),this.subpath.push([n,i])}bezierCurveTo(e,t,n,i,r,o){this.path.push({method:"bezierCurveTo",data:[e,t,n,i,r,o]}),this.subpath.push([r,o])}arc(e,t,n,i,o,a=!1){if(!r.wZ||L)return this.path.push({method:"arc",data:[e,t,n,i,o,a]}),void this.subpath.push([e,t]);const s=e+Math.cos(i)*n,c=t+Math.sin(i)*n;if(this.subpath.push([s,c]),a&&i-o>=2*Math.PI||!a&&o-i>=2*Math.PI)this.subpath.push([s,c]);else{const i=e+Math.cos(o)*n,r=t+Math.sin(o)*n;this.subpath.push([i,r])}this.path.push({method:"arc",data:[e,t,n,i,o,a]})}rect(e,t,n,i){this.path.push({method:"rect",data:[e,t,n,i]}),this.subpath=[[e,t]],r.wZ&&!L&&this.path.push({method:"closePath",data:[]})}arcTo(e,t,n,i,o,a){if((!r.wZ||L)&&!a)return this.path.push({method:"arcTo",data:[e,t,n,i,o]}),void this.subpath.push([n,i]);const s=this.subpath[this.subpath.length-1],c=s[0],l=s[1];if(c===e&&l===t||e===n&&t===i||0===o)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);if(c===e&&c===n||l===t&&l===i)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);const{sqrt:u,acos:d,sin:h,tan:p,atan:f,PI:g}=Math,_=function(e){return e**2},m=c-e,y=l-t,v=n-e,A=i-t,b=d((m*v+y*A)/(u(_(m)+_(y))*u(_(v)+_(A))))/2,w=Math.round(o/h(b)*1e6)/1e6,E=Math.round(o/p(b)*1e6)/1e6;let T,S,C,I,x,D;if(c-e==0)T=e,S=l-t>0?t+E:t-E;else if(l-t==0)T=c-e>0?e+E:e-E,S=t;else{const n=(l-t)/(c-e),i=l-n*c;T=(u(_(m)+_(y))*E+m*e+y*t-i*y)/(m+n*y),S=n*T+i}if(n-e==0)C=e,I=i-t>0?t+E:t-E;else if(i-t==0)C=n-e>0?e+E:e-E,I=t;else{const r=(i-t)/(n-e),o=i-r*n;C=(u(_(v)+_(v))*E+v*e+A*t-o*A)/(v+r*A),I=r*C+o}const O=(T+C)/2-e,P=(S+I)/2-t;if(0===P)x=e,D=P>0?t+w:t-w;else{const n=P/O,i=t-n*e;x=(u(_(O)+_(P))*w+e*O+t*P-i*P)/(O+n*P),D=n*x+i}x=Math.round(1e6*x)/1e6,D=Math.round(1e6*D)/1e6;const R=S-D,k=T-x,N=g-2*b;let M=f(R/k);0===R&&k<0&&(M=Math.PI);const B=(T-x)*(I-D)-(S-D)*(C-x);this.path.push({method:"arc",data:[x,D,o,M,B>0?M+N:M-N,B<0]}),this.subpath.push([C,I])}getTransform(){return this._transform}clip(){this.actions.push({method:"clip",data:w(this.path)})}set lineDashOffset(e){if(r.gm||r.DD||r.Ae)this.actions.push({method:"setLineDashOffset",data:[e]});else{const t=this.state.lineDash||[0,0];this.actions.push({method:"setLineDash",data:[t,e]})}}set globalCompositeOperation(e){this.actions.push({method:"setGlobalCompositeOperation",data:[e]})}set shadowBlur(e){r.gm||r.DD||r.Ae?this.actions.push({method:"setShadowBlur",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,e,this.state.shadowColor]}),this.state.shadowBlur=e)}set shadowColor(e){if(r.gm||r.DD||r.Ae)return void this.actions.push({method:"setShadowColor",data:[e]});let t;t=L?e:r.cj&&0===this.state.shadowBlur?[]:b(e),this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,this.state.shadowBlur,t]}),this.state.shadowColor=t}set shadowOffsetX(e){r.gm||r.DD||r.Ae?this.actions.push({method:"setShadowOffsetX",data:[e]}):(this.actions.push({method:"setShadow",data:[e,this.state.shadowOffsetY,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetX=e)}set shadowOffsetY(e){r.gm||r.DD||r.Ae?this.actions.push({method:"setShadowOffsetY",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,e,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetY=e)}set font(e){this.state.font=e;const t=e.match(/^(([\w\-]+\s)*)(\d+r?px)(\/(\d+\.?\d*(r?px)?))?\s+(.*)/);if(!t)return void console.warn("Failed to set 'font' on 'CanvasContext': invalid format.");const n=t[1].trim().split(/\s/),i=parseFloat(t[3]),o=t[7],a=[];let s="";const c=this;function l(){a.push({method:"setFontWeight",data:["normal"]}),c.state.fontWeight="normal"}if(n.forEach(((e,t)=>{["italic","oblique","normal"].indexOf(e)>-1?(a.push({method:"setFontStyle",data:[e]}),this.state.fontStyle=e):["bold","normal"].indexOf(e)>-1?(a.push({method:"setFontWeight",data:[e]}),this.state.fontWeight=e):0===t?(a.push({method:"setFontStyle",data:["normal"]}),c.state.fontStyle="normal"):1===t&&l()})),1===n.length&&l(),s=a.map((e=>e.data[0])).join(" "),this.state.fontSize=i,this.state.fontFamily=o,r.gm||r.DD||r.Ae)return s=`${s} ${i}px ${o}`,void this.actions.push({method:"setFont",data:[s]});this.actions.push.apply(this.actions,a),this.actions.push({method:"setFontSize",data:[i]},{method:"setFontFamily",data:[o]})}get font(){return this.state.font}set fillStyle(e){x(this,"setFillStyle",e)}set strokeStyle(e){x(this,"setStrokeStyle",e)}set globalAlpha(e){e=Math.floor(255*parseFloat(e)),this.actions.push({method:"setGlobalAlpha",data:[e]})}set textAlign(e){this.actions.push({method:"setTextAlign",data:[e]})}set lineCap(e){this.actions.push({method:"setLineCap",data:[e]})}set lineJoin(e){this.actions.push({method:"setLineJoin",data:[e]})}set lineWidth(e){this.actions.push({method:"setLineWidth",data:[e]})}set miterLimit(e){this.actions.push({method:"setMiterLimit",data:[e]})}set textBaseline(e){this.actions.push({method:"setTextBaseline",data:[e]})}}function x(e,t,n){"string"==typeof n?L?e.actions.push({method:t,data:["normal",n]}):e.actions.push({method:t,data:["normal",b(n)]}):"object"==typeof n&&n instanceof T?e.actions.push({method:t,data:[n.type,n.data,n.colorStop]}):n instanceof C&&e.actions.push({method:t,data:["pattern",n.image,n.repetition]})}[].concat(["scale","rotate","translate","setTransform","transform"],["drawImage","fillText","fill","stroke","fillRect","strokeRect","clearRect","strokeText"]).forEach((function(e){I.prototype[e]="fill"===e||"stroke"===e?function(){this.actions.push({method:e+"Path",data:w(this.path)})}:"fillRect"===e?function(e,t,n,i){this.actions.push({method:"fillPath",data:[{method:"rect",data:[e,t,n,i]}]})}:"strokeRect"===e?function(e,t,n,i){this.actions.push({method:"strokePath",data:[{method:"rect",data:[e,t,n,i]}]})}:"fillText"===e||"strokeText"===e?function(t,n,i,r){const o=[t.toString(),n,i];"number"==typeof r&&o.push(r),this.actions.push({method:e,data:o})}:"drawImage"===e?function(t,n,i,r,o,a,s,c,l){let u;t=t._src?t._src:E(this,t),void 0===l&&(a=n,s=i,c=r,l=o,n=void 0,i=void 0,r=void 0,o=void 0),u=A(n)&&A(i)&&A(r)&&A(o)?[t,a,s,c,l,n,i,r,o]:A(c)&&A(l)?[t,a,s,c,l]:[t,a,s],this.actions.push({method:e,data:u})}:"clearRect"===e?function(){this.useHardwareAccelerate=!1,this.actions.push({method:e,data:[].slice.apply(arguments)})}:"transform"===e||"setTransform"===e?function(t,n,i,r,o,a){this._transform={a:t,b:n,c:i,d:r,e:o,f:a},this.actions.push({method:e,data:[t,n,i,r,o,a]})}:function(){this._ignoreScale&&"scale"===e?this._ignoreScale=!1:this.actions.push({method:e,data:[].slice.apply(arguments)})}})),["setFillStyle","setTextAlign","setStrokeStyle","setGlobalAlpha","setShadow","setFontSize","setLineCap","setLineJoin","setLineWidth","setMiterLimit","setTextBaseline","setLineDash"].forEach((function(e){"setFillStyle"===e||"setStrokeStyle"===e?I.prototype[e]=function(){const t=arguments[0];x(this,e,t)}:"setGlobalAlpha"===e?I.prototype[e]=function(){const t=[].slice.apply(arguments,[0,1]);t[0]=Math.floor(255*parseFloat(t[0])),this.actions.push({method:e,data:t})}:"setShadow"===e?I.prototype[e]=function(){const t=[].slice.apply(arguments,[0,4]);L||(t[3]=r.cj&&0===t[2]?[]:b(t[3])),this.actions.push({method:e,data:t}),this.state.shadowBlur=t[2],this.state.shadowColor=t[3],this.state.shadowOffsetX=t[0],this.state.shadowOffsetY=t[1]}:"setLineDash"===e?I.prototype[e]=function(){const t=[].slice.apply(arguments,[0,2]);t[0]=t[0]&&t[0].length?t[0]:[0,0],t[1]=t[1]||0,this.actions.push({method:e,data:t}),this.state.lineDash=t[0]}:"setFontSize"===e?I.prototype.setFontSize=function(e){this.state.font=this.state.font.replace(/\d+\.?\d*px/,e+"px"),this.state.fontSize=e,this.actions.push({method:"setFontSize",data:[e]})}:I.prototype[e]=function(){this.actions.push({method:e,data:[].slice.apply(arguments,[0,1])})}}));n(3170);const D={},O={};function P(e){return D[e]?D[e]:R(e)}function R(e){const t=new k(e);return D[e]=t,t}r.wZ&&(0,s.jQ)("onXWebCanvasSurfaceChange",((e={})=>{const t=O[e.viewId];t&&"function"==typeof t.swapSurface&&t.swapSurface()})),(0,s.Ld)("skiaCanvasSizeChanged",(({canvasId:e,pluginId:t,nodeId:n,position:i},r)=>{const o=p(r,e,t,n),a=D[o];0===i.width&&0===i.height||!a||a.width===i.width&&a.height===i.height||(a.width=i.width,a.height=i.height,a.canvas&&a.context&&(a.canvas.width=i.width,a.canvas.height=i.height,a.needsReplay()&&a.replayActions()))}));class k{constructor(e){this.id=e,this.width=0,this.height=0,this.context=null,this._actionsDefer=[],this._actionsWaiting=!1,this._images=[],this._actionsQueue=[],this._contextPromise=new Promise((e=>{this._resolveContext=e}))}init(e,t,i,o){this.width=t,this.height=i,r.cj&&(this.canvas=new n.g.Canvas(e),this.context=this.canvas.getContext("2d")),r.wZ&&(this.canvasView=HTMLCanvasView.createView(o),O[o]=this.canvasView,this.canvas=HTMLCanvasElement.createElement(this.canvasView),this.context=this.canvas.getContext("2d")),this._resolveContext&&this._resolveContext(this.context)}preloadImage(e){e.forEach((e=>{let t="";const i=e.method,o=e.data;"drawImage"===i?t=o[0]:"setFillStyle"===i&&"pattern"===o[0]&&(t=o[1]),t&&!this._images[t]&&(r.cj?(this._images[t]=new n.g.Image,this._images[t].onload=()=>{this._images[t].ready=!0}):r.wZ&&(this._images[t]=new SkiaImage,this._images[t].onload=()=>{this._images[t].ready=!0}),this._images[t].setSrc(t))}))}checkImageLoaded(e,t,n){const i=this._images[e];return i.ready?(n(i),!0):(this._actionsDefer.unshift([t,!0]),this._actionsWaiting=!0,i.onload=()=>{i.ready=!0,n(i),this._actionsWaiting=!1;const e=this._actionsDefer.slice(0);this._actionsDefer=[];let t=e.shift();for(;t;)this.draw(t[0],t[1],t[2],this._webviewId,this._nodeId,this._pluginId),t=e.shift()},!1)}draw(e,t,n,i,r,o){this._webviewId=i,this._nodeId=r,this._pluginId=o,this.context?this._draw(e,t,n,i,r,o):this._contextPromise.then((()=>(this._draw(e,t,n,i,r,o),null))).catch((()=>{}))}_draw(e,t,n,i,o,a){const s=this.context;if(e)if(t||this._flushQueue(),this._enqueue({actions:e,reserve:t}),this._actionsWaiting)this._actionsDefer.push([e,t,n]);else{t||(s.fillStyle="#000000",s.strokeStyle="#000000",s.shadowColor="#000000",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0,s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,this.width,this.height)),this.preloadImage(e,i,o,a),s.save();for(let t=0;t<e.length;t++){const n=e[t];let i=n.method;const r=n.data;if(/^set/.test(i)&&"setTransform"!==i){const n=i[3].toLowerCase()+i.slice(4);let o;if("fillStyle"===n||"strokeStyle"===n){if("normal"===r[0])o=r[1];else if("linear"===r[0])o=s.createLinearGradient(...r[1]),r[2].forEach((function(e){const t=e[0],n=e[1];o.addColorStop(t,n)}));else if("radial"===r[0]){const e=r[1][0],t=r[1][1],n=[e,t,0,e,t,r[1][2]];o=s.createRadialGradient(...n),r[2].forEach((function(e){const t=e[0],n=e[1];o.addColorStop(t,n)}))}else if("pattern"===r[0]){if(!this.checkImageLoaded(r[1],e.slice(t+1),(e=>{e&&(s[n]=s.createPattern(e,r[2]))})))break;continue}s[n]=o}else if("globalAlpha"===n)s[n]=r[0]/255;else if("shadow"===n){const e=["shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor"];r.forEach((function(t,n){e[n],s[e[n]]=t}))}else"fontSize"===n?s.font=s.font.replace(/\d+\.?\d*px/,r[0]+"px"):"lineDash"===n?(s.setLineDash(r[0]),s.lineDashOffset=r[1]||0):"textBaseline"===n?("normal"===r[0]&&(r[0]="alphabetic"),s[n]=r[0]):s[n]=r[0]}else if("fillPath"===i||"strokePath"===i)i=i.replace(/Path/,""),s.beginPath(),r.forEach((function(e){s[e.method](...e.data)})),s[i]();else if("fillText"===i){let[e,...t]=r;t&&t.map&&(t=t.map((e=>"string"==typeof e?parseFloat(e):e))),s.fillText(e,...t)}else if("drawImage"===i){let[n,...i]=r;this._images=this._images||{},i&&i.map&&(i=i.map((e=>"string"==typeof e?parseFloat(e):e)));if(!this.checkImageLoaded(n,e.slice(t+1),(e=>{e&&s.drawImage.apply(s,[e,...i.slice(4,8),...i.slice(0,4)])})))break}else if("clip"===i)r.forEach((function(e){s[e.method](...e.data)})),s.clip();else if("arcTo"===i||"rotate"===i){let e=r;r&&r.map&&(e=r.map((e=>"string"==typeof e?parseFloat(e):e))),s[i](...e)}else if("strokeText"===i){let[e,...t]=r;t&&t.map&&(t=t.map((e=>"string"==typeof e?parseFloat(e):e))),s[i](e,...t)}else s[i](...r)}s.restore(),r.wZ&&this.canvasView.present(),this._actionsWaiting||"function"==typeof n&&n()}}getImageData(e={}){this.context?this._getImageData(e):this._contextPromise.then((()=>(this._getImageData(e),null))).catch((()=>{}))}_getImageData(e={}){let t;try{const{x:n,y:i,width:r,height:o}=e||{};t=this.context.getImageData(n,i,r,o)}catch(t){return void(0,u.Ky)(e,t)}if(!t)return void(0,u.Ky)("canvasGetImageData:fail");const n={width:t.width,height:t.height,data:t.data};(0,u.AK)(e,n)}putImageData(e={}){this.context?this._putImageData(e):this._contextPromise.then((()=>(this._putImageData(e),null))).catch((()=>{}))}_putImageData(e={}){try{const{x:t,y:i,width:o,height:a,data:s}=e||{};let c;r.cj?c=new n.g.ImageData(s,o,a):r.wZ&&(c=new SkiaImageData(s,o,a)),r.wZ&&this.canvasView.prepareDraw(),this.context.putImageData(c,t,i),r.wZ&&this.canvasView.present()}catch(t){return void(0,u.Ky)(e,t)}(0,u.El)(e,"canvasPutImageData:ok")}replayActions(){const e=()=>{};this._actionsQueue.forEach((t=>{this.draw(t.actions,t.reserve,e,this._webviewId,this._nodeId,this._pluginId)}))}needsReplay(){return this._actionsQueue.length>0}_flushQueue(){this._actionsQueue=[]}_enqueue(e){this._actionsQueue.push(e)}}const N=r.wZ&&a.Z.useXWebCanvas,M=r.cj&&a.Z.useSkiaCanvas,L=(r.wZ&&a.Z.useNewXWebCanvasToTFP,N||M),B={},F={},U={},W={};let j=0,G=0,V=4500;const H=Date.now,z=(f("onCanvasMethodCallback"),f("onDrawCanvas"));function Z({canvasId:e,pluginId:t,nodeId:n,viewId:i,webviewId:r}){const o=p(r,e,t,n);U[o]&&delete U[o],L&&function({canvasId:e,pluginId:t,nodeId:n,viewId:i,webviewId:r}){const o=p(r,e,t,n);delete D[o],delete O[i]}({webviewId:r,canvasId:e,pluginId:t,nodeId:n,viewId:i})}function Y(e,t,n=!1,i,o,a,c){if(r.gm||r.qB||r.Mq||r.Ae){const i={actions:t,reserve:n,canvasId:e};z(i,(function(e){"function"==typeof c&&c({errMsg:e.errMsg})})),(0,s.nY)("canvasActionsChanged",i)}else(0,s.IN)("drawCanvas",{canvasId:e,reserve:n,useHardwareAccelerate:i,actions:t,success:o,fail:a,complete:c})}function $({isWidgetCanvas:e,canvasId:t,actions:n,reserve:i,useHardwareAccelerate:r,success:o,fail:a,complete:c},l=h.Z.currentWebviewId,u="",d=""){const f=H();if(!Array.isArray(n))return;if(e){if(f-j<V){const e={errMsg:"drawCanvas:fail 调用 draw 过于频繁。"};return G+=1,G>500&&(G=0,console.warn(e.errMsg)),void("function"==typeof a&&a(e))}return j=f,void(0,s.IN)("drawCanvas",{canvasId:void 0,reserve:i,actions:n,success:o,fail:a,complete:c})}const g=p(l,t,u,d);if(L){P(g).draw(n,i,c,l,d,u)}else if("number"==typeof U[g]){Y(U[g],n,i,r,o,a,c)}else W[g]=W[g]||[],W[g]=W[g].concat({actions:n,reserve:i,useHardwareAccelerate:r,success:o,fail:a,complete:c})}"undefined"!=typeof __widgetConfig__&&(V="number"==typeof __widgetConfig__.drawMinInterval?__widgetConfig__.drawMinInterval:25),(0,s.Ld)("canvasInsert",(({canvasId:e,viewId:t,canvasNumber:n,pluginId:i,data:r,position:o,nodeId:a,compPath:s},l)=>{L&&function({canvasId:e,viewId:t,canvasNumber:n,pluginId:i,position:r,nodeId:o},a){const s=p(a,e,i,o);let c=P(s);c.context&&(c=R(s)),c.context||c.init(n,r.width,r.height,t,a)}({canvasId:e,viewId:t,canvasNumber:n,pluginId:i,position:o,nodeId:a},l);const u=p(l,e,i,a);B[n]={lastTouches:[],data:r,compPath:s},U[u]=n,F[n]=o,Array.isArray(W[u])&&(W[u].forEach((function(e){Y(n,e.actions,e.reserve,e.useHardwareAccelerate,e.success,e.fail,e.complete)})),delete W[u]),(0,c.dq)(l,(()=>{Z({canvasId:e,pluginId:i,nodeId:a,viewId:t,webviewId:l})}))})),(0,s.Ld)("canvasUpdate",(({canvasNumber:e,position:t})=>{(0,l.n)(F,e)&&(F[e]=t)})),(0,s.Ld)("canvasRemove",(({canvasId:e,pluginId:t,nodeId:n,viewId:i},r)=>{Z({canvasId:e,pluginId:t,nodeId:n,viewId:i,webviewId:r})}));const q=(e,t,n="",i="")=>new I(e,t,n,i);let Q=i.Z.presetChars;let J=null;const X=()=>{if(J)return J;if((0,o.aI)()){const e=new NativeGlobal.Canvas;e.width=1,e.height=1,J=e.getContext("2d")}else J=((e,t)=>{const n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(h.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return q(h.Z.currentWebviewId,e,n)})();return J};const K=new class{constructor(){}getCharWidth(e,t){let n=0;return n=Q[e]?Q[e]:10,n*t/10}limitString(e,t){return e&&e.length>t?e.substring(0,t)+"...":e}getTextWidth(e,t){if(r.wZ)return this.getTextWidthInAndroid(e,t);const n=X();return t&&(n.font=`${t}px PingFangSC-Regular, SF Pro Display, SF Pro Text`),Math.ceil(n.measureText(e).width||0)+1}getTextWidthInAndroid(e,t){e=(e=String(e)).split("");let n=0;return e.forEach((e=>{let i=this.getCharWidth(e,t);n+=i})),n}getMaxWordLength(e,t,n,i=!0){e=(e=String(e)).split("");let r=0,o=0,a=0;i&&(a=this.getTextWidth("...",t),n-=a);for(let i=0;i<e.length;i++){let a=e[i],s=this.getCharWidth(a,t);if(r+s>n)break;o++,r+=s}return o}textMetrics(e,t){const{fontSize:n,maxWidth:i,maxLines:r=1}=t;let o=[],a=0,s=e.substring(0,e.length);for(;a<r;){let e=this.getMaxWordLength(s,n,i,!(a!==r-1)),t=a===r-1?this.limitString(s,e):s.substring(0,e);t&&o.push({text:t,width:this.getTextWidth(t,n)}),a++,s=s.substring(e,s.length)}return o}}},9423:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l}),e=n.hmd(e);var i,r={name:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0};r.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(n,(function(e){return t[e]||e})):""}},i=globalThis,e.exports?e.exports=r:"function"==typeof define&&n.amdO?define((function(){return r})):i.doT=r;var o={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},a=/$^/;function s(e,t,n){return("string"==typeof t?t:t.toString()).replace(e.define||a,(function(t,i,r,o){return 0===i.indexOf("def.")&&(i=i.substring(4)),i in n||(":"===r?(e.defineParams&&o.replace(e.defineParams,(function(e,t,r){n[i]={arg:t,text:r}})),i in n||(n[i]=o)):new Function("def","def['"+i+"']="+o)(n)),""})).replace(e.use||a,(function(t,i){e.useParams&&(i=i.replace(e.useParams,(function(e,t,i,r){if(n[i]&&n[i].arg&&r){var o=(i+":"+r).replace(/'|\\/g,"_");return n.__exp=n.__exp||{},n.__exp[o]=n[i].text.replace(new RegExp("(^|[^\\w$])"+n[i].arg+"([^\\w$])","g"),"$1"+r+"$2"),t+"def.__exp['"+o+"']"}})));var r=new Function("def","return "+i)(n);return r?s(e,r,n):r}))}function c(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}r.template=function(e,t,n){var l,u,d=(t=t||r.templateSettings).append?o.append:o.split,h=0,p=t.use||t.define?s(t,e,n||{}):e;p=("var out='"+(t.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(t.interpolate||a,(function(e,t){return d.start+c(t)+d.end})).replace(t.encode||a,(function(e,t){return l=!0,d.startencode+c(t)+d.end})).replace(t.conditional||a,(function(e,t,n){return t?n?"';}else if("+c(n)+"){out+='":"';}else{out+='":n?"';if("+c(n)+"){out+='":"';}out+='"})).replace(t.iterate||a,(function(e,t,n,i){return t?(h+=1,u=i||"i"+h,t=c(t),"';var arr"+h+"="+t+";if(arr"+h+"){var "+n+","+u+"=-1,l"+h+"=arr"+h+".length-1;while("+u+"<l"+h+"){"+n+"=arr"+h+"["+u+"+=1];out+='"):"';} } out+='"})).replace(t.evaluate||a,(function(e,t){return"';"+c(t)+"out+='"}))+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),l&&(t.selfcontained||!i||i._encodeHTML||(i._encodeHTML=r.encodeHTMLSource(t.doNotSkipEncoded)),p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+r.encodeHTMLSource.toString()+"("+(t.doNotSkipEncoded||"")+"));"+p);try{return new Function(t.varname,p)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+p),e}},r.compile=function(e,t){return r.template(e,null,t)};const l=r},1860:(e,t,n)=>{"use strict";n.d(t,{W:()=>f});var i=n(8159),r=n(3170),o=n(8006),a=n(2241),s=n(665),c=n(2999);const l=new i.Z({maxListeners:2e5});let u=32768,d="portrait",h="";s.Z.onReady((()=>{d=s.Z.deviceOrientation||d,h=(0,r.Oo)().model||""}));const p=(e,t)=>-1!==["click","touchstart","touchmove","touchend","touchcancel","ready","prop-change"].indexOf(e)?`element-${t}-${e}`:-1!==["layout"].indexOf(e)?e:void 0;class f{constructor({parentId:e=0,id:t=u++,style:n={},props:i={},name:r=""}={}){const c=s.Z.platform;this.parentId=e,this.dest=0,this.id=t,this.name=r,this.children={},this.parent=null,this.isInserted=!1,this.shouldUpdate=!1,this.readyResult=new Promise((e=>{this.on("ready",e)})),n=Object.assign((0,o.ph)(),n),Object.assign(n,n[d]);const l=/iphone x/.test(h.toLowerCase())?"iphone x":c;Object.assign(n,n[l]),Object.assign(n,n[`${l}-${d}`]),this.style={},this.computedStyle=Object.assign({},n),this.lastComputedStyle=Object.assign({},n),this.layoutBox=null,Object.keys(n).forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>n[e],set:t=>{if(t!==n[e]&&void 0!==t){if(n[e]=t,this.computedStyle[e]=t,this.lastComputedStyle[e]=t,-1!==o.fc.indexOf(e)&&this.style.scale){const n=t*this.style.scale;this.computedStyle[e]=n,this.lastComputedStyle[e]=n}"scale"===e&&o.fc.forEach((e=>{n[e]&&(this.computedStyle[e]=n[e]*t,this.lastComputedStyle[e]=n[e]*t)})),this.shouldUpdate=!0,"hidden"===e&&(t?((0,a.cM)(this.id,this.name,"隐藏, 保存宽高",this.computedStyle.width,this.computedStyle.height),o.MY.forEach((e=>{this.computedStyle[e]=0}))):((0,a.cM)(this.id,this.name,"显示, 设置回来",this.lastComputedStyle.width,this.lastComputedStyle.height),o.MY.forEach((e=>{this.computedStyle[e]=this.lastComputedStyle[e]})))),this.requestLayout()}}})})),o.fc.forEach((e=>{if(this.style[e]&&this.style.scale){const t=this.style[e]*this.style.scale;this.computedStyle[e]=t,this.lastComputedStyle[e]=t}})),n.hidden&&o.MY.forEach((e=>{this.computedStyle[e]=0})),Object.keys(i).forEach((e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:()=>i[e],set:t=>{t!==i[e]&&(i[e]=t,this.shouldUpdate=!0,this.requestLayout())}})})),["touchstart","touchmove","touchend","touchcancel"].forEach((e=>{this.on(e,(t=>{if(!this.bubbleEvent||!this.parent)return;let n=0,i=0;try{n=this.layoutBox.left,i=this.layoutBox.top}catch(e){}if("touchstart"===e||"touchend"===e){const r=Object.assign({},t);r.x+=n,r.y+=i,this.parent.emit(e,r)}else{const r=t.map((e=>({x:e.x+n,y:e.y+i})));this.parent.emit(e,r)}}))}))}getChildren(){return Object.keys(this.children).map((e=>{const t=this.children[e];return t.dest=this.dest,{id:t.id,name:t.name,style:t.computedStyle,children:t.getChildren()}}))}getAbsolutePosition(e){if(!e)return this.getAbsolutePosition(this);if(!e.parent)return{left:0,top:0};const{left:t,top:n}=this.getAbsolutePosition(e.parent);return{left:t+e.layoutBox.left,top:n+e.layoutBox.top}}add(e){e.parent=this,e.parentId=this.id,e.dest=this.dest,this.children[e.id]=e,this.requestLayout()}remove(e){e?this.children[e.id]&&(e.remove(),delete this.children[e.id]):(Object.keys(this.children).forEach((e=>{this.children[e].remove(),delete this.children[e]})),this.destroy(),this.parent&&delete this.parent.children[this.id]),this.requestLayout()}emit(e,t){l.emit(p(e,this.id),t)}on(e,t){l.on(p(e,this.id),t)}once(e,t){l.once(p(e,this.id),t)}off(e,t){l.off(p(e,this.id),t)}nextLayout(e){if(!e||"function"!=typeof e)return new Promise((e=>this.nextLayout(e)));setTimeout(e,250)}nextUpdate(e){if(!e||"function"!=typeof e)return new Promise((e=>this.nextUpdate(e)));this.once("update-done",e)}ready(){const e=Object.keys(this.children).map((e=>this.children[e].ready()));return Promise.all(e.concat(this.readyResult))}requestLayout(){this.emit("layout")}forceUpdate(){const e=this.isInserted?this.update():this.insert(),t=Object.keys(this.children).map((e=>this.children[e].forceUpdate()));return e.then((()=>Promise.all(t)))}insert(){return Promise.resolve()}update(){return Promise.resolve()}destroy(){["click","ready","touchstart","touchmove","touchend","touchcancel"].forEach((e=>{const t=p(e,this.id);l.removeAllListeners(t)}))}}const g=e=>{const{id:t}=JSON.parse(e.data);l.emit(p("click",t))};(0,c.n)("onTextViewClick",g),(0,c.n)("onImageViewClick",g),["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"].forEach((e=>{const t=e.replace(/^on/,"").toLowerCase();(0,c.n)(e,(e=>{try{const{id:n}=JSON.parse(e.data);l.emit(p(t,n),e.touch||e.touches)}catch(e){}}))}))},8065:(e,t,n)=>{"use strict";n.d(t,{V1:()=>L,Ee:()=>_,Vr:()=>Q,Gf:()=>W,gw:()=>Z,xv:()=>s,nk:()=>D,G7:()=>a,kh:()=>$.k,_w:()=>f,uo:()=>p});var i=n(1106),r=n(1860),o=n(2241);class a extends r.W{constructor({id:e,parentId:t,style:n,props:i={},type:r="text",name:o="",autoInsert:s=!1,eventType:c="touch",clickState:l=!1,bubbleEvent:u=!1}={}){super({id:e,style:n,props:Object.assign(i,{fullscreen:!1}),name:o,parentId:t}),this.type="text"===r?"TextView":"ImageView",this.eventType=c,this.autoInsert=s,this.bubbleEvent=u,"touch"===this.eventType&&l&&this.ready().then((()=>{this.mask=new a({style:{backgroundColor:"rgba(0, 0, 0, 0.1)",hidden:!0,position:"absolute",left:0,top:0},eventType:"click"}),this.mask.name="mask",this.add(this.mask)})).catch((()=>{}));let d=Date.now(),h={x:0,y:0};this.on("touchstart",(e=>{l&&this.mask&&(this.mask.style.hidden=!1),d=Date.now(),h=e}));const p=e=>{l&&this.mask&&(this.mask.style.hidden=!0);let t={x:0,y:0};try{t=this.getAbsolutePosition()}catch(e){}let n={x:0,y:0};Array.isArray(e)?n=e.pop():e.x&&e.y&&(n=e);const i={absoluteX:t.left+h.x,absoluteY:t.top+h.y,relativeX:h.x,relativeY:h.y,absoluteEndX:t.left+n.x,absoluteEndY:t.top+n.y,relativeEndX:n.x,relativeEndY:n.y,pressInterval:Date.now()-d};this.emit("click",i)};this.on("touchend",p),this.on("touchcancel",p),this.autoInsert&&this.insert()}toNativeData(){const e=["borderRadius","borderWidth","borderColor","opacity","overflow","fixed","rotate"];"ImageView"===this.type&&e.push("objectFit");const t=e.reduce(((e,t)=>(e[t]=this.computedStyle[t],"borderColor"===t&&(e[t]=(0,o.$v)(this.computedStyle[t])),e)),{});t.bgColor=(0,o.$v)(this.computedStyle.backgroundColor),t.scaleX=this.computedStyle.scaleWidth,t.scaleY=this.computedStyle.scaleHeight;let n={left:this.computedStyle.left,top:this.computedStyle.top,width:this.computedStyle.width,height:this.computedStyle.height};this.layoutBox&&(n={left:this.layoutBox.left,top:this.layoutBox.top,width:this.layoutBox.width,height:this.layoutBox.height}),this.computedStyle.hidden&&(n.width=0,n.height=0),this.mask&&(this.mask.style.width=n.width,this.mask.style.height=n.height),t.padding=[0,0,0,0],void 0!==t.borderRadius&&t.borderRadius||(t.borderRadius=0);return{parentId:this.parentId,dest:this.dest,viewId:this.id,position:n,hide:this.computedStyle.hidden,style:t,notCoverRect:!0,fullscreen:this.fullscreen,zIndex:this.style.zIndex,fixed:t.fixed}}insert(){const e=Object.assign(this.toNativeData(),{clickable:"click"===this.eventType,gesture:"touch"===this.eventType,transEvt:!1,sendTo:"appservice",data:JSON.stringify({id:this.id})});return this.isInserted=!0,new Promise(((t,n)=>{(0,i.IN)(`insert${this.type}`,Object.assign(e,{success:e=>{(0,o.cM)(this.name,this.id,"ready"),this.emit("ready"),t(e)},fail:n}))}))}update(){this.shouldUpdate=!1;const e=this.toNativeData();return new Promise(((t,n)=>{(0,i.IN)(`update${this.type}`,Object.assign(e,{success:t,fail:n}))}))}destroy(){super.destroy();const e={dest:this.dest,viewId:this.id};return new Promise(((t,n)=>{(0,i.IN)(`remove${this.type}`,Object.assign(e,{success:t,fail:n}))}))}animate({left:e,top:t,opacity:n,scaleWidth:r,scaleHeight:o,rotate:a=0,duration:s=500}={}){const c={dest:this.dest,viewId:this.id,easing:"ease-in",duration:s,finalStyle:{left:e,top:t,opacity:n,rotate:a,scaleX:r,scaleY:o}};return new Promise(((e,t)=>{(0,i.IN)("animateCoverView",Object.assign(c,{success:e,fail:t}))})).then((i=>(void 0!==e&&(this.style.left=e),void 0!==t&&(this.style.top=t),void 0!==r&&(this.style.scaleWidth=r),void 0!==o&&(this.style.scaleHeight=o),void 0!==n&&(this.style.opacity=n),void 0!==a&&(this.style.rotate=a),i)))}}class s extends a{constructor({id:e,style:t,value:n="",name:i="",autoInsert:r=!1,eventType:o,bubbleEvent:a,clickState:s}={}){super({id:e,style:t,props:{value:n},type:"text",name:i,autoInsert:r,eventType:o,bubbleEvent:a,clickState:s})}toNativeData(){const e=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"].reduce(((e,t)=>(e[t]=this.computedStyle[t],e)),{});return Object.assign(super.toNativeData(),{label:Object.assign(e,{content:this.value})})}}var c=function(){var e,t="inherit",n="row",i="row-reverse",r="column",o="column-reverse",a="flex-start",s="center",c="flex-start",l="center",u="flex-end",d="stretch",h="relative",p="absolute",f={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},g={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},_={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},m={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function y(e){return void 0===e}function v(e){return e===n||e===i}function A(e,t){if(void 0!==e.style.marginStart&&v(t))return e.style.marginStart;var n=null;switch(t){case"row":n=e.style.marginLeft;break;case"row-reverse":n=e.style.marginRight;break;case"column":n=e.style.marginTop;break;case"column-reverse":n=e.style.marginBottom}return void 0!==n?n:void 0!==e.style.margin?e.style.margin:0}function b(e,t){if(void 0!==e.style.marginEnd&&v(t))return e.style.marginEnd;var n=null;switch(t){case"row":n=e.style.marginRight;break;case"row-reverse":n=e.style.marginLeft;break;case"column":n=e.style.marginBottom;break;case"column-reverse":n=e.style.marginTop}return null!=n?n:void 0!==e.style.margin?e.style.margin:0}function w(e,t){if(void 0!==e.style.borderStartWidth&&e.style.borderStartWidth>=0&&v(t))return e.style.borderStartWidth;var n=null;switch(t){case"row":n=e.style.borderLeftWidth;break;case"row-reverse":n=e.style.borderRightWidth;break;case"column":n=e.style.borderTopWidth;break;case"column-reverse":n=e.style.borderBottomWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function E(e,t){if(void 0!==e.style.borderEndWidth&&e.style.borderEndWidth>=0&&v(t))return e.style.borderEndWidth;var n=null;switch(t){case"row":n=e.style.borderRightWidth;break;case"row-reverse":n=e.style.borderLeftWidth;break;case"column":n=e.style.borderBottomWidth;break;case"column-reverse":n=e.style.borderTopWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function T(e,t){return function(e,t){if(void 0!==e.style.paddingStart&&e.style.paddingStart>=0&&v(t))return e.style.paddingStart;var n=null;switch(t){case"row":n=e.style.paddingLeft;break;case"row-reverse":n=e.style.paddingRight;break;case"column":n=e.style.paddingTop;break;case"column-reverse":n=e.style.paddingBottom}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+w(e,t)}function S(e,t){return function(e,t){if(void 0!==e.style.paddingEnd&&e.style.paddingEnd>=0&&v(t))return e.style.paddingEnd;var n=null;switch(t){case"row":n=e.style.paddingRight;break;case"row-reverse":n=e.style.paddingLeft;break;case"column":n=e.style.paddingBottom;break;case"column-reverse":n=e.style.paddingTop}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+E(e,t)}function C(e,t){return w(e,t)+E(e,t)}function I(e,t){return A(e,t)+b(e,t)}function x(e,t){return T(e,t)+S(e,t)}function D(e,t){return t.style.alignSelf?t.style.alignSelf:e.style.alignItems?e.style.alignItems:"stretch"}function O(e,t){if("rtl"===t){if(e===n)return i;if(e===i)return n}return e}function P(e,t){return function(e){return e===r||e===o}(e)?O(n,t):r}function R(e){return e.style.position?e.style.position:"relative"}function k(e){return R(e)===h&&e.style.flex>0}function N(e,t){return e.layout[m[t]]+I(e,t)}function M(e,t){return void 0!==e.style[m[t]]&&e.style[m[t]]>=0}function L(e,t){return void 0!==e.style[t]}function B(e,t){return void 0!==e.style[t]?e.style[t]:0}function F(e,t,n){var i={row:e.style.minWidth,"row-reverse":e.style.minWidth,column:e.style.minHeight,"column-reverse":e.style.minHeight}[t],r={row:e.style.maxWidth,"row-reverse":e.style.maxWidth,column:e.style.maxHeight,"column-reverse":e.style.maxHeight}[t],o=n;return void 0!==r&&r>=0&&o>r&&(o=r),void 0!==i&&i>=0&&o<i&&(o=i),o}function U(e,t){return e>t?e:t}function W(e,t){void 0===e.layout[m[t]]&&M(e,t)&&(e.layout[m[t]]=U(F(e,t,e.style[m[t]]),x(e,t)))}function j(e,t,n){t.layout[g[n]]=e.layout[m[n]]-t.layout[m[n]]-t.layout[_[n]]}function G(e,t){return void 0!==e.style[f[t]]?B(e,f[t]):-B(e,g[t])}function V(E,V,z){var Z=function(e,n){var i;return(i=e.style.direction?e.style.direction:t)===t&&(i=void 0===n?"ltr":n),i}(E,z),Y=O(function(e){return e.style.flexDirection?e.style.flexDirection:r}(E),Z),$=P(Y,Z),q=O(n,Z);W(E,Y),W(E,$),E.layout.direction=Z,E.layout[f[Y]]+=A(E,Y)+G(E,Y),E.layout[g[Y]]+=b(E,Y)+G(E,Y),E.layout[f[$]]+=A(E,$)+G(E,$),E.layout[g[$]]+=b(E,$)+G(E,$);var Q=E.children.length,J=x(E,q);if(function(e){return void 0!==e.style.measure}(E)){var X=!y(E.layout[m[q]]),K=e;K=M(E,q)?E.style.width:X?E.layout[m[q]]:V-I(E,q),K-=J;var ee=!M(E,q)&&!X,te=!M(E,r)&&y(E.layout[m.column]);if(ee||te){var ne=E.style.measure(K);ee&&(E.layout.width=ne.width+J),te&&(E.layout.height=ne.height+x(E,r))}if(0===Q)return}var ie,re,oe,ae,se=function(e){return"wrap"===e.style.flexWrap}(E),ce=function(e){return e.style.justifyContent?e.style.justifyContent:"flex-start"}(E),le=T(E,Y),ue=T(E,$),de=x(E,Y),he=x(E,$),pe=!y(E.layout[m[Y]]),fe=!y(E.layout[m[$]]),ge=v(Y),_e=null,me=null,ye=e;pe&&(ye=E.layout[m[Y]]-de);for(var ve=0,Ae=0,be=0,we=0,Ee=0,Te=0;Ae<Q;){var Se,Ce=0,Ie=0,xe=0,De=0,Oe=pe&&ce===a||!pe&&ce!==s,Pe=Oe?Q:ve,Re=!0,ke=Q,Ne=null,Me=null,Le=le,Be=0;for(ie=ve;ie<Q;++ie){if((oe=E.children[ie]).lineIndex=Te,oe.nextAbsoluteChild=null,oe.nextFlexChild=null,(Ze=D(E,oe))===d&&R(oe)===h&&fe&&!M(oe,$))oe.layout[m[$]]=U(F(oe,$,E.layout[m[$]]-he-I(oe,$)),x(oe,$));else if(R(oe)===p)for(null===_e&&(_e=oe),null!==me&&(me.nextAbsoluteChild=oe),me=oe,re=0;re<2;re++)ae=0!==re?n:r,!y(E.layout[m[ae]])&&!M(oe,ae)&&L(oe,f[ae])&&L(oe,g[ae])&&(oe.layout[m[ae]]=U(F(oe,ae,E.layout[m[ae]]-x(E,ae)-I(oe,ae)-B(oe,f[ae])-B(oe,g[ae])),x(oe,ae)));var Fe=0;if(pe&&k(oe)?(Ie++,xe+=oe.style.flex,null===Ne&&(Ne=oe),null!==Me&&(Me.nextFlexChild=oe),Me=oe,Fe=x(oe,Y)+I(oe,Y)):(Se=e,ge||(Se=M(E,q)?E.layout[m[q]]-J:V-I(E,q)-J),0===be&&H(oe,Se,Z),R(oe)===h&&(De++,Fe=N(oe,Y))),se&&pe&&Ce+Fe>ye&&ie!==ve){De--,be=1;break}Oe&&(R(oe)!==h||k(oe))&&(Oe=!1,Pe=ie),Re&&(R(oe)!==h||Ze!==d&&Ze!==c||y(oe.layout[m[$]]))&&(Re=!1,ke=ie),Oe&&(oe.layout[_[Y]]+=Le,pe&&j(E,oe,Y),Le+=N(oe,Y),Be=U(Be,F(oe,$,N(oe,$)))),Re&&(oe.layout[_[$]]+=we+ue,fe&&j(E,oe,$)),be=0,Ce+=Fe,Ae=ie+1}var Ue=0,We=0,je=0;if(je=pe?ye-Ce:U(Ce,0)-Ce,0!==Ie){var Ge,Ve,He=je/xe;for(Me=Ne;null!==Me;)(Ge=He*Me.style.flex+x(Me,Y))!==(Ve=F(Me,Y,Ge))&&(je-=Ve,xe-=Me.style.flex),Me=Me.nextFlexChild;for((He=je/xe)<0&&(He=0),Me=Ne;null!==Me;)Me.layout[m[Y]]=F(Me,Y,He*Me.style.flex+x(Me,Y)),Se=e,M(E,q)?Se=E.layout[m[q]]-J:ge||(Se=V-I(E,q)-J),H(Me,Se,Z),oe=Me,Me=Me.nextFlexChild,oe.nextFlexChild=null}else ce!==a&&(ce===s?Ue=je/2:"flex-end"===ce?Ue=je:"space-between"===ce?(je=U(je,0),We=Ie+De-1!=0?je/(Ie+De-1):0):"space-around"===ce&&(Ue=(We=je/(Ie+De))/2));for(Le+=Ue,ie=Pe;ie<Ae;++ie)R(oe=E.children[ie])===p&&L(oe,f[Y])?oe.layout[_[Y]]=B(oe,f[Y])+w(E,Y)+A(oe,Y):(oe.layout[_[Y]]+=Le,pe&&j(E,oe,Y),R(oe)===h&&(Le+=We+N(oe,Y),Be=U(Be,F(oe,$,N(oe,$)))));var ze=E.layout[m[$]];for(fe||(ze=U(F(E,$,Be+he),he)),ie=ke;ie<Ae;++ie)if(R(oe=E.children[ie])===p&&L(oe,f[$]))oe.layout[_[$]]=B(oe,f[$])+w(E,$)+A(oe,$);else{var Ze,Ye=ue;if(R(oe)===h)if((Ze=D(E,oe))===d)y(oe.layout[m[$]])&&(oe.layout[m[$]]=U(F(oe,$,ze-he-I(oe,$)),x(oe,$)));else if(Ze!==c){var $e=ze-he-N(oe,$);Ye+=Ze===l?$e/2:$e}oe.layout[_[$]]+=we+Ye,fe&&j(E,oe,$)}we+=Be,Ee=U(Ee,Le),Te+=1,ve=Ae}if(Te>1&&fe){var qe=E.layout[m[$]]-he,Qe=qe-we,Je=0,Xe=ue,Ke=function(e){return e.style.alignContent?e.style.alignContent:"flex-start"}(E);Ke===u?Xe+=Qe:Ke===l?Xe+=Qe/2:Ke===d&&qe>we&&(Je=Qe/Te);var et=0;for(ie=0;ie<Te;++ie){var tt=et,nt=0;for(re=tt;re<Q;++re)if(R(oe=E.children[re])===h){if(oe.lineIndex!==ie)break;y(oe.layout[m[$]])||(nt=U(nt,oe.layout[m[$]]+I(oe,$)))}for(et=re,nt+=Je,re=tt;re<et;++re)if(R(oe=E.children[re])===h){var it=D(E,oe);if(it===c)oe.layout[_[$]]=Xe+A(oe,$);else if(it===u)oe.layout[_[$]]=Xe+nt-b(oe,$)-oe.layout[m[$]];else if(it===l){var rt=oe.layout[m[$]];oe.layout[_[$]]=Xe+(nt-rt)/2}else it===d&&(oe.layout[_[$]]=Xe+A(oe,$))}Xe+=nt}}var ot=!1,at=!1;if(pe||(E.layout[m[Y]]=U(F(E,Y,Ee+S(E,Y)),de),Y!==i&&Y!==o||(ot=!0)),fe||(E.layout[m[$]]=U(F(E,$,we+he),he),$!==i&&$!==o||(at=!0)),ot||at)for(ie=0;ie<Q;++ie)oe=E.children[ie],ot&&j(E,oe,Y),at&&j(E,oe,$);for(me=_e;null!==me;){for(re=0;re<2;re++)ae=0!==re?n:r,!y(E.layout[m[ae]])&&!M(me,ae)&&L(me,f[ae])&&L(me,g[ae])&&(me.layout[m[ae]]=U(F(me,ae,E.layout[m[ae]]-C(E,ae)-I(me,ae)-B(me,f[ae])-B(me,g[ae])),x(me,ae))),L(me,g[ae])&&!L(me,f[ae])&&(me.layout[f[ae]]=E.layout[m[ae]]-me.layout[m[ae]]-B(me,g[ae]));oe=me,me=me.nextAbsoluteChild,oe.nextAbsoluteChild=null}}function H(e,t,n){e.shouldUpdate=!0;var i=e.style.direction||"ltr";!e.isDirty&&e.lastLayout&&e.lastLayout.requestedHeight===e.layout.height&&e.lastLayout.requestedWidth===e.layout.width&&e.lastLayout.parentMaxWidth===t&&e.lastLayout.direction===i?(e.layout.width=e.lastLayout.width,e.layout.height=e.lastLayout.height,e.layout.top=e.lastLayout.top,e.layout.left=e.lastLayout.left):(e.lastLayout||(e.lastLayout={}),e.lastLayout.requestedWidth=e.layout.width,e.lastLayout.requestedHeight=e.layout.height,e.lastLayout.parentMaxWidth=t,e.lastLayout.direction=i,e.children.forEach((function(e){e.layout.width=void 0,e.layout.height=void 0,e.layout.top=0,e.layout.left=0})),V(e,t,n),e.lastLayout.width=e.layout.width,e.lastLayout.height=e.layout.height,e.lastLayout.top=e.layout.top,e.lastLayout.left=e.layout.left)}return{layoutNodeImpl:V,computeLayout:H,fillNodes:function e(t){return t.layout&&!t.isDirty||(t.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),t.style||(t.style={}),t.children||(t.children=[]),t.children.forEach(e),t}}}();const l=(e,t)=>{let n=!1;t.layoutBox=t.layoutBox||{},["left","top","width","height"].forEach((i=>{n=n||t.layoutBox[i]!==e.layout[i],t.layoutBox[i]=e.layout[i]})),t.shouldUpdate=t.shouldUpdate||n,e.children.forEach((e=>{const n=t.children[e.id];n&&l(e,n)}))},u=e=>{let t=Promise.resolve();return e.isInserted?e.shouldUpdate&&(t=e.update()):t=e.insert(),t.then((()=>Promise.all(Object.keys(e.children).map((t=>{const n=e.children[t];return u(n)})))))},d=e=>{e.isInserted?e.shouldUpdate&&e.update():e.insert(),Object.keys(e.children).map((t=>{const n=e.children[t];return d(n)}))};class h extends r.W{constructor({style:e,name:t,auto:n=!0}={}){super({style:e,id:0,name:t});let i=null;this.auto=n,this.on("layout",(()=>{this.auto&&(clearTimeout(i),i=setTimeout((()=>this.layout()),0))})),this.onebyone=!0}layout(){const e={id:this.id,style:{width:this.style.width,height:this.style.height,flexDirection:"row"},children:this.getChildren()};var t;return t=e,c.fillNodes(t),c.computeLayout(t),l(e,this),this.onebyone?u(this).then((()=>this.emit("update-done"))):(d(this),Promise.resolve().then((()=>this.emit("update-done"))))}}const p=new h({name:"webview-layout"});p.dest=0;const f=new h({name:"nativeview-layout",auto:!1});f.onebyone=!1,f.dest=1;var g=n(1095);class _ extends a{constructor({id:e,style:t,src:n="",name:i="",autoInsert:r=!1,eventType:o,bubbleEvent:a,clickState:s}={}){super({id:e,style:t,props:{src:n},type:"image",name:i,autoInsert:r,eventType:o,bubbleEvent:a,clickState:s})}toNativeData(){return Object.assign(super.toNativeData(),{iconPath:(0,g.Uj)(this.src)})}}var m=n(9974),y=n(2999),v=n(2582),A=n(665),b=n(6998);const w={video:1,"live-player":2,"live-pusher":3,image:4,audio:5};let E=0,T={};A.Z.onReady((()=>{E=A.Z.appType+1e3,T=A.Z.appLaunchInfo}));const S={onLoad:1,onWaiting:2,onError:3,onPlay:4,onPause:5,onFullScreenChange:6,onEnd:7,onTimeUpdate:8,onSrcSet:9,onImageLoad:91,onImageError:92},C={},I=["onVideoWaiting","onVideoPlay","onVideoPause","onVideoEnded","onVideoTimeUpdate","onVideoError","onVideoProgress"];v.wZ&&I.push("onVideoFullScreenChange");const x=(e,t,n)=>{"ad"!==e.scene&&(({component:e,eventName:t,eventData:n,src:i=""}={})=>{const r=(0,b._getCurrentNetworkType)(),o=wx&&wx.version&&wx.version.version||"";let a=Object.keys(T.query||{}).map((e=>`${e}=${T.query[e]}`)).join(",");a=encodeURIComponent(a);let s="";switch(t){case"onLoad":s=[n.duration,n.controls?2:1].join(";");break;case"onWaiting":s=[n.position,n.buffered].join(";");break;case"onError":s=n.errMsg.replace(","," ");break;case"onFullScreenChange":s=n.fullScreen?2:1;break;case"onTimeUpdate":s=[n.position,n.buffered].join(";");break;case"onImageLoad":s=[n.isLazyLoad?2:1,n.size,n.loadTime,n.width,n.height,n.originalWidth,n.originalHeight].join(";");break;case"onImageError":s=[n.isLazyLoad?2:1].join(";")}const c=[Math.round(Date.now()/1e3),T.scene,"",T.sessionid||T.sessionId,T.path,a,r,o,w[e],S[t],s,encodeURIComponent(i.substring(0,1024)).substring(0,1024),E].join(",");Reporter.reportKeyValue({key:"MediaCompStatus",value:c})})({component:"video",eventName:t,eventData:n,src:e.src})};class D extends r.W{constructor({style:e={},name:t,x:n=0,y:i=0,width:r=300,height:o=200,hide:a=!1,src:s,poster:c,referrerPolicy:l="no-referrer",initialTime:u=0,playbackRate:d=1,live:h=!1,objectFit:p="contain",controls:f=!0,showProgress:g=!0,showProgressInControlMode:_=g,autoplay:y=!1,muted:v=!1,loop:A=!1,enableProgressGesture:b=!0,enablePlayGesture:w=!1,showCenterPlayBtn:E=!0,autoInsert:T=!0,scene:S="default",preLoad:x=!1,obeyMuteSwitch:D=!1,underGameView:O=!1,backgroundColor:P="#000000",playerHint:R="",zIndex:k}={}){super({style:e,name:t}),this.isSrcChanged=!1,this.autoInsert=T,this.playerHint=R,this.scene=S,this.preLoad=x,this.underGameView=O,this.zIndex=k,C[this.id]=this;let N=null;this.emitter=new m.Z,this.deferred=[],this._buffered=0,this._position=0;const M={x:n,y:i,width:r,height:o,hide:a,src:s,poster:c,initialTime:u,playbackRate:d,live:h,objectFit:p,controls:f,showProgress:g,showProgressInControlMode:_,backgroundColor:P,autoplay:y,muted:v,loop:A,enableProgressGesture:b,enablePlayGesture:w,showCenterPlayBtn:E,obeyMuteSwitch:D,referrerPolicy:l};Object.keys(M).forEach((e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:()=>M[e],set:t=>{"src"!==e&&M[e]===t||(M[e]=t,this.isInserted?("src"===e&&(this.isSrcChanged=!0),"poster"===e&&(this.isPosterChanged=!0),"playbackRate"===e?this.operate("playbackRate",[t]):(clearTimeout(N),N=setTimeout((()=>this.update()),0))):this.deferred.push({type:"property",property:e,value:t}))}})})),I.forEach((e=>{const t=e.toLowerCase().replace("video","");this[t]=()=>{},this.emitter.on(e,(e=>{this[t](e)}))})),this.autoInsert&&this.insert().then((()=>{this.playbackRate&&1!==this.playbackRate&&this.operate("playbackRate",[this.playbackRate])})).then((()=>{this.deferred.forEach((e=>{"property"===e.type?this[e.property]=e.value:this.operate(e.method,e.args)}))}))}insert(){if(!this.isInserted)return this.isInserted=!0,x(this,"onSrcSet",{}),new Promise(((e,t)=>{(0,i.IN)("insertVideoPlayer",Object.assign(this.toNativeData(),{data:JSON.stringify({id:this.id}),filePath:(0,g.Uj)(this.src),scene:this.scene,preLoad:this.preLoad,underGameView:this.underGameView,referrerPolicy:this.referrerPolicy,playerHint:this.playerHint,zIndex:this.zIndex,success:t=>{this.emit("ready"),e(t)},fail:t}))}))}destroy(){return new Promise(((e,t)=>{v.cj?setTimeout((()=>{(0,i.IN)("removeVideoPlayer",{videoPlayerId:this.id,success:e,fail:t})}),0):(0,i.IN)("removeVideoPlayer",{videoPlayerId:this.id,success:e,fail:t}),I.forEach((e=>{const t=e.replace("Video","").replace("on","off");"function"==typeof this[t]&&this[t]()})),delete C[this.id]}))}toNativeData(){this.layoutBox;const e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={videoPlayerId:this.id,position:e,hide:this.hide,zIndex:Number.isInteger(+this.zIndex)?+this.zIndex:0,initialTime:this.initialTime,live:this.live,objectFit:this.objectFit,needEvent:!0,showBasicControls:this.controls,showProgress:this.showProgress,showProgressInControlMode:this.showProgressInControlMode,backgroundColor:this.backgroundColor,backgroudColor:this.backgroundColor,autoplay:this.autoplay,muted:this.muted,loop:this.loop,customCache:!1,enableProgressGesture:this.enableProgressGesture,enablePlayGesture:this.enablePlayGesture,showCenterPlayBtn:this.showCenterPlayBtn,obeyMuteSwitch:this.obeyMuteSwitch,referrerPolicy:this.referrerPolicy};return this.isSrcChanged&&(t.filePath=(0,g.Uj)(this.src),this.isSrcChanged=!1),this.isPosterChanged&&(t.poster=(0,g.Uj)(this.poster),this.isPosterChanged=!1),this.autoInsert||(t.parentId=this.parentId),t}update(){this.shouldUpdate=!1;const e=this.toNativeData();return e.filePath&&x(this,"onSrcSet",{}),new Promise(((t,n)=>{(0,i.IN)("updateVideoPlayer",Object.assign({},e,{success:t,fail:n}))}))}operate(e,t=[]){if(this.isInserted)return this.hide&&"playbackRate"!==e?Promise.reject(new Error(`${e} can't be invoked when video is hidden`)):new Promise(((n,r)=>{(0,i.IN)("operateVideoPlayer",{videoPlayerId:this.id,type:e,data:t,success:n,fail:r})}));this.deferred.push({type:"method",method:e,args:t})}play(){return this.operate("play")}pause(){return this.operate("pause")}stop(){return this.operate("stop")}seek(e){return this.operate("seek",[e])}requestFullScreen(e){return this.operate("requestFullScreen",[e])}exitFullScreen(){return this.operate("exitFullScreen")}}I.forEach((e=>{const t=e.replace("Video","");D.prototype[t]=function(t){this.emitter.on(e,t)};const n=t.replace("on","off");D.prototype[n]=function(t){this.emitter.off(e,t)}})),I.forEach((e=>{(0,y.n)(e,(t=>{const n=t.videoPlayerId||JSON.parse(t.data).id,i=C[n];if(!i)return;if(i.emitter.emit(e,t),"onVideoProgress"===e)return void(i._buffered=t.buffered);let r=t;"onVideoTimeUpdate"===e?(i._position=t.position,r={position:t.position,buffered:i._buffered}):"onVideoWaiting"===e&&(r={position:i._position,buffered:i._buffered}),x(i,e.replace("Video",""),r)}))}));var O=n(8159),P=n(5542),R=n(5014),k=n(9482);const N=new O.Z,M={};class L extends r.W{constructor({style:e,name:t,x:n=0,y:r=0,width:o=300,height:a=200,devicePosition:s="back",flash:c="auto",size:l="small",autoInsert:u=!0,success:d,fail:h,complete:p}={}){super({style:e,name:t}),this.size=l,M[this.id]=this;let f=null;this.deferred=[];const g={x:n,y:r,width:o,height:a,devicePosition:s,flash:c};Object.keys(g).forEach((e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:()=>g[e],set:t=>{if(g[e]!==t){if(g[e]=t,!this.isInserted)return this.deferred.push({type:"property",property:e,value:t}),t;clearTimeout(f),f=setTimeout((()=>this.update()),0)}}})})),N.on("onInit",(()=>{const e=this.deferred;this.isInserted=!0,this.deferred=[],e.forEach((e=>{"property"===e.type?this[e.property]=e.value:this.operate(e.method,e.args)}))}));const _={success:d,fail:h,complete:p};u&&this.insert().then((e=>{this.frameWidth=e.width,this.frameHeight=e.height,(0,i.FE)({name:"createCamera",args:_})})).catch((()=>{(0,i.YG)("createCamera",_)}))}insert(){if(!this.isInserted)return new Promise(((e,t)=>{(0,i.IN)("insertCamera",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}update(){return new Promise(((e,t)=>{(0,i.IN)("updateCamera",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}operate(e,t={}){return this.isInserted?new Promise(((n,r)=>{(0,i.IN)("operateCamera",Object.assign(t,{cameraId:this.id,type:e,fail:r,success:t=>{if(n(t),"listenFrameChange"===e){if(!P.Z)throw new Error("device not supported");t.data=P.Z.get(t.bufferId),t.data.__proto__=ArrayBuffer.prototype,this._frame=t}}}))})):(this.deferred.push({type:"method",method:e,args:t}),Promise.resolve({}))}toNativeData(){const e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={cameraId:this.id,position:e,devicePosition:this.devicePosition,flash:this.flash,size:this.size};return this.autoInsert||(t.parentId=this.parentId),t}takePhoto(e="normal"){return this.operate("takePhoto",{quality:e})}startRecord(){return this.operate("startRecord")}stopRecord(e=!1){return this.operate("stopRecord",{compressed:e})}onAuthCancel(e){N.on("onAuthCancel",e)}onStop(e){N.on("onStop",e)}onCameraFrame(e){"function"==typeof e&&N.on("onCameraFrame",(()=>{this._frame&&e({data:this._frame.data,width:this._frame.width,height:this._frame.height})}))}listenFrameChange(e){const t=e?(0,k.r)(e):void 0,n={size:this.size};return void 0!==t&&(0,R.J)("listenFrameChangeInWorker")?(n.workerId=t,this.operate("listenFrameChange",n)):this.operate("listenFrameChange",n)}closeFrameChange(){return this._frame=null,this.operate("closeFrameChange")}destroy(){return new Promise(((e,t)=>{delete M[this.id],N.removeAllListeners("onInit"),N.removeAllListeners("onAuthCancel"),N.removeAllListeners("onStop"),N.removeAllListeners("onCameraFrame"),(0,i.IN)("removeCamera",{cameraId:this.id,success:e,fail:t})}))}}(0,y.n)("onCameraInitDone",(()=>N.emit("onInit"))),(0,y.n)("onCameraNeedAuthCancel",(()=>N.emit("onAuthCancel"))),(0,y.n)("onCameraStop",(()=>N.emit("onStop"))),(0,y.n)("onCameraFrame",(()=>N.emit("onCameraFrame")));var B=n(2184);const F={},U=new B.Q("LivePlayer",!0);class W extends r.W{constructor({style:e,name:t,x:n=0,y:r=0,width:o=300,height:a=200,src:s,mode:c="live",autoplay:l=!1,muted:u=!1,orientation:d="vertical",objectFit:h="contain",minCache:p=1,maxCache:f=3,soundMode:g="speaker",autoPauseIfOpenNative:_=!0,autoInsert:m=!0,success:y,fail:v,complete:A}={}){super({style:e,name:t}),F[this.id]=this;let b=null;this.deferred=[];const w={x:n,y:r,width:o,height:a,src:s,mode:c,autoplay:l,muted:u,orientation:d,objectFit:h,minCache:p,maxCache:f,soundMode:g,autoPauseIfOpenNative:_};Object.keys(w).forEach((e=>{Object.defineProperty(this,e,{enumerable:!0,get:()=>w[e],set:t=>{if(w[e]!==t){if(w[e]=t,!this.isInserted)return this.deferred.push({type:"property",property:e,value:t}),t;clearTimeout(b),b=setTimeout((()=>this.update()),0)}}})}));const E={success:y,fail:v,complete:A};m&&this.insert().then((()=>{const e=this.deferred;this.isInserted=!0,this.deferred=[],e.forEach((e=>{"property"===e.type?this[e.property]=e.value:this.operate(e.method,e.args)})),(0,i.FE)({name:"createLivePlayer",args:E})})).catch((({errMsg:e})=>{const t=(e||"").replace(/^\w+:fail\s*/,"");(0,i.YG)("createLivePlayer",E,t)}))}insert(){if(!this.isInserted)return new Promise(((e,t)=>{(0,i.IN)("insertLivePlayer",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}update(){return new Promise(((e,t)=>{(0,i.IN)("updateLivePlayer",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}operate(e,t=[]){return this.isInserted?new Promise(((n,r)=>{(0,i.IN)("operateLivePlayer",{livePlayerId:this.id,type:e,data:t,quality:t.quality,fail:r,success:n})})):(this.deferred.push({type:"method",method:e,args:t}),Promise.resolve({}))}toNativeData(){const e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePlayerId:this.id,position:e,playUrl:this.src,mode:"live"===this.mode?1:2,autoplay:this.autoplay,muted:this.muted,orientation:this.orientation,objectFit:this.objectFit,minCache:this.minCache,maxCache:this.maxCache,soundMode:this.soundMode,autoPauseIfOpenNative:this.autoPauseIfOpenNative,needEvent:!0,needNetStatus:!0,needAudioVolume:!0};return this.autoInsert||(t.parentId=this.parentId),t}play(){return this.operate("play")}stop(){return this.operate("stop")}pause(){return this.operate("pause")}resume(){return this.operate("resume")}mute(){return this.operate("mute")}requestFullScreen(e=0){return this.operate("requestFullScreen",[e])}exitFullScreen(){return this.operate("exitFullScreen")}snapshot(e="raw"){return this.operate("snapshot",{quality:e})}destroy(){return new Promise(((e,t)=>{delete F[this.id],U.off(`state-${this.id}`),U.off(`fs-${this.id}`),U.off(`net-${this.id}`),U.off(`audio-${this.id}`),(0,i.IN)("removeLivePlayer",{livePlayerId:this.id,success:e,fail:t})}))}onStateChange(e){U.on(`state-${this.id}`,e)}offStateChange(e){U.off(`state-${this.id}`,e)}onFullScreenChange(e){U.on(`fs-${this.id}`,e)}offFullScreenChange(e){U.off(`fs-${this.id}`,e)}onNetStatus(e){U.on(`net-${this.id}`,e)}offNetStatus(e){U.off(`net-${this.id}`,e)}onAudioVolumeNotify(e){U.on(`audio-${this.id}`,e)}offAudioVolumeNotify(e){U.off(`audio-${this.id}`,e)}}const j=(e,t)=>(0,y.n)(e,(e=>t(e||{})));j("onLivePlayerEvent",(({livePlayerId:e,errCode:t,errMsg:n})=>{U.emit(`state-${e}`,{code:t,message:n})})),j("onLivePlayerFullScreenChange",(({livePlayerId:e,fullScreen:t,direction:n})=>{U.emit(`fs-${e}`,{fullScreen:t,direction:n})})),j("onLivePlayerNetStatus",(({livePlayerId:e,info:t})=>{t&&U.emit(`net-${e}`,{videoBitrate:t.VIDEO_BITRATE,audioBitrate:t.AUDIO_BITRATE,videoFPS:t.VIDEO_FPS,videoGOP:t.VIDEO_GOP,netSpeed:t.NET_SPEED,netQualityLevel:t.NET_QUALITY_LEVEL,netJitter:t.NET_JITTER,videoWidth:t.VIDEO_WIDTH,videoHeight:t.VIDEO_HEIGHT})})),j("onLivePlayerAudioVolume",(({livePlayerId:e,volume:t})=>{U.emit(`audio-${e}`,{volume:t})}));const G={},V=new B.Q("LivePusher",!0);function H(e){switch(e){case"SD":return 1;case"HD":return 2;case"FHD":return 3;default:return 6}}function z(e){switch(e){case"3:14":return 1;default:return 2}}class Z extends r.W{constructor({style:e,name:t,x:n=0,y:r=0,width:o=300,height:a=200,url:s,mode:c="RTC",autopush:l=!1,muted:u=!1,enableCamera:d=!0,autoFocus:h=!0,orientation:p="vertical",beauty:f=0,whiteness:g=0,aspect:_="9:16",minBitrate:m=200,maxBitrate:y=1e3,audioQuality:v="high",waitingImage:A,waitingImageHash:b,zoom:w=!1,devicePosition:E="front",remoteMirror:T=!1,localMirror:S="auto",audioReverbType:C=0,enableMic:I=!0,enableAgc:x=!1,enableAns:D=!1,audioVolumeType:O="voicecall",videoWidth:P=360,videoHeight:R=640,autoInsert:k=!0,success:N,fail:M,complete:L}={}){super({style:e,name:t}),G[this.id]=this;let B=null;this.deferred=[];const F={x:n,y:r,width:o,height:a,url:s,mode:c,autopush:l,muted:u,enableCamera:d,autoFocus:h,orientation:p,beauty:f,whiteness:g,aspect:_,minBitrate:m,maxBitrate:y,audioQuality:v,waitingImage:A,waitingImageHash:b,zoom:w,devicePosition:E,remoteMirror:T,localMirror:S,audioReverbType:C,enableMic:I,enableAgc:x,enableAns:D,audioVolumeType:O,videoWidth:P,videoHeight:R};Object.keys(F).forEach((e=>{Object.defineProperty(this,e,{enumerable:!0,get:()=>F[e],set:t=>{if(F[e]!==t){if(F[e]=t,!this.isInserted)return this.deferred.push({type:"property",property:e,value:t}),t;clearTimeout(B),B=setTimeout((()=>this.update()),0)}}})}));const U={success:N,fail:M,complete:L};k&&this.insert().then((()=>{const e=this.deferred;this.isInserted=!0,this.deferred=[],e.forEach((e=>{"property"===e.type?this[e.property]=e.value:this.operate(e.method,e.args)})),(0,i.FE)({name:"createLivePusher",args:U})})).catch((({errMsg:e})=>{const t=(e||"").replace(/^\w+:fail\s*/,"");(0,i.YG)("createLivePusher",U,t)}))}insert(){if(!this.isInserted)return new Promise(((e,t)=>{(0,i.IN)("insertLivePusher",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}update(){return new Promise(((e,t)=>{(0,i.IN)("updateLivePusher",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}operate(e,t={}){return this.isInserted?new Promise(((n,r)=>{(0,i.IN)("operateLivePusher",{livePusherId:this.id,type:e,url:t.url,volume:t.volume,quality:t.quality,fail:r,success:n})})):(this.deferred.push({type:"method",method:e,args:t}),Promise.resolve({}))}toNativeData(){const e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePusherId:this.id,position:e,pushUrl:this.url,mode:H(this.mode),autopush:this.autopush,muted:this.muted,enableCamera:this.enableCamera,focusMode:this.autoFocus?0:1,orientation:this.orientation,beauty:this.beauty,whiteness:this.whiteness,aspect:z(this.aspect),minBitrate:this.minBitrate,maxBitrate:this.maxBitrate,backgroundImage:this.waitingImage,backgroundMD5:this.waitingImageHash,zoom:this.zoom,devicePosition:this.devicePosition,remoteMirror:this.remoteMirror,localMirror:this.localMirror,enableMic:this.enableMic,enableAGC:this.enableAgc,enableANS:this.enableAns,audioVolumeType:this.audioVolumeType,audioReverbType:this.audioReverbType,videoWidth:this.videoWidth,videoHeight:this.videoHeight,needEvent:!0,needNetStatus:!0};return this.autoInsert||(t.parentId=this.parentId),t}start(){return this.operate("start")}stop(){return this.operate("stop")}pause(){return this.operate("pause")}resume(){return this.operate("resume")}playBGM(e){return this.operate("playBGM",{url:e})}stopBGM(){return this.operate("stopBGM")}pauseBGM(){return this.operate("pauseBGM")}resumeBGM(){return this.operate("resumeBGM")}setBGMVolume(e=1){return this.operate("setBGMVolume",{volume:e})}setMICVolume(e=1){return this.operate("setMICVolume",{volume:e})}startPreview(){return this.operate("startPreview")}stopPreview(){return this.operate("stopPreview")}snapshot(e){return this.operate("snapshot",{quality:e})}switchCamera(){return this.operate("switchCamera")}toggleTorch(){return this.operate("toggleTorch")}destroy(){return new Promise(((e,t)=>{delete G[this.id],V.off(`state-${this.id}`),V.off(`net-${this.id}`),V.off(`start-${this.id}`),V.off(`progress-${this.id}`),V.off(`complete-${this.id}`),V.off(`error-${this.id}`),(0,i.IN)("removeLivePusher",{livePusherId:this.id,success:e,fail:t})}))}onStateChange(e){V.on(`state-${this.id}`,e)}offStateChange(e){V.off(`state-${this.id}`,e)}onNetStatus(e){V.on(`net-${this.id}`,e)}offNetStatus(e){V.off(`net-${this.id}`,e)}onBGMStart(e){V.on(`start-${this.id}`,e)}offBGMStart(e){V.off(`start-${this.id}`,e)}onBGMProgress(e){V.on(`progress-${this.id}`,e)}offBGMProgress(e){V.off(`progress-${this.id}`,e)}onBGMComplete(e){V.on(`complete-${this.id}`,e)}offBGMComplete(e){V.off(`complete-${this.id}`,e)}onError(e){V.on(`error-${this.id}`,e)}offError(e){V.off(`error-${this.id}`,e)}}const Y=(e,t)=>(0,y.n)(e,(e=>t(e||{})));Y("onLivePusherEvent",(({livePusherId:e,errCode:t,errMsg:n})=>{V.emit(`state-${e}`,{code:t,message:n})})),Y("onLivePusherNetStatus",(({livePusherId:e,info:t})=>{t&&V.emit(`net-${e}`,{videoBitrate:t.VIDEO_BITRATE,audioBitrate:t.AUDIO_BITRATE,videoFPS:t.VIDEO_FPS,videoGOP:t.VIDEO_GOP,netSpeed:t.NET_SPEED,netQualityLevel:t.NET_QUALITY_LEVEL,netJitter:t.NET_JITTER,videoWidth:t.VIDEO_WIDTH,videoHeight:t.VIDEO_HEIGHT})})),Y("onLivePusherBGMStart",(({livePusherId:e})=>{V.emit(`start-${e}`)})),Y("onLivePusherBGMProgress",(({livePusherId:e,progress:t,duration:n})=>{V.emit(`progress-${e}`,{progress:t,duration:n})})),Y("onLivePusherBGMComplete",(({livePusherId:e,errCode:t})=>{V.emit(`complete-${e}`,{errCode:t})})),Y("onLivePusherError",(({livePusherId:e,errCode:t,errMsg:n,data:i})=>{V.emit(`error-${e}`,{errCode:t,errMsg:n,data:i})}));var $=n(6722);const q={};class Q extends r.W{constructor({style:e={},name:t,x:n=0,y:i=0,width:r=300,height:o=200,url:a="",urls:s=[],scale:c=1,autoInsert:l=!0,hide:u=!1,zIndex:d=0}={}){if(super({style:e,name:t}),this.x=n,this.y=i,this.width=r,this.height=o,this.scale=+c,this.hide=u,this.autoInsert=l,this.url=a,this.zIndex=d,this.emitter=new B.Q("ImagePreviewer",!0),q[this.id]=this,"string"==typeof s)try{this.urls=JSON.parse(s)}catch(e){this.urls=[]}else this.urls=s;this._insertPromise=new Promise(((e,t)=>{this._insertPromiseResolve=e,this._insertPromiseReject=t}))}insert(){return this.toNativeData(),(0,i.IN)("insertImagePreviewer",Object.assign(this.toNativeData(),{success:e=>{this._insertPromiseResolve(e)},fail:e=>{this._insertPromiseReject(e)}})),this._insertPromise}update(){return new Promise(((e,t)=>{this._insertPromise.then((()=>{this.toNativeData(),(0,i.IN)("updateImagePreviewer",Object.assign(this.toNativeData(),{success:t=>{e(t)},fail:e=>{t(e)}}))})).catch(t)}))}destroy(){return this.id,new Promise(((e,t)=>{setTimeout((()=>{(0,i.IN)("removeImagePreviewer",{viewId:this.id,success:e,fail:t}),this.offImageLoadFail(),delete q[this.id]}),0)}))}toNativeData(){this.layoutBox;const e={position:this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},urls:this.urls.length>0?this.urls:[this.url],scale:this.scale,hide:this.hide,viewId:this.id,zIndex:this.zIndex,parentId:this.parentId};return this.parentId,e}onImageLoadFail(e){this.emitter.on("onImageLoadFail",e)}offImageLoadFail(e){this.emitter.off("onImageLoadFail",e)}}(0,y.n)("onImagePreviewerLoadFail",(e=>{q[e.viewId].emitter.emit("onImageLoadFail",e)}))},8006:(e,t,n)=>{"use strict";n.d(t,{ph:()=>o,fc:()=>i,MY:()=>r});const i=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","fontSize","lineHeight","borderRadius"],r=["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","width","height"],o=()=>({left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1,scaleWidth:1,scaleHeight:1,color:void 0,fontSize:void 0,textAlign:void 0,fontWeight:void 0,lineHeight:void 0,lineBreak:void 0,backgroundColor:void 0,backgroundColorOpacity:1,borderRadius:void 0,borderColor:void 0,borderColorOpacity:1,opacity:void 0,overflow:void 0,zIndex:1,fixed:!1,rotate:0})},6722:(e,t,n)=>{"use strict";n.d(t,{k:()=>h,Z:()=>p});var i=n(1860),r=n(1106),o=n(2999),a=n(665);const s=new Map,c=new WeakMap,l=new WeakMap,u=new WeakMap;function d(e){return new Promise(((t,n)=>{const i=l.get(this);(0,r.IN)("insertHTMLWebView",{htmlId:this.id,position:i,src:c.get(this),zIndex:u.get(this),backgroundColor:i.backgroundColor,__skipDomainCheck__:e,success:t,fail:n})}))}class h extends i.W{constructor({src:e,zIndex:t,style:n={},__skipDomainCheck__:i}){super({style:n}),s.set(this.id,this),c.set(this,e),l.set(this,n),u.set(this,t),d.call(this,i),this.isInserted=!0}get src(){return c.get(this)}set src(e){c.set(this,e),(0,r.IN)("updateHTMLWebView",{htmlId:this.id,src:e})}get style(){return l.get(this)}set style(e){this.style||l.set(this,{});const t=Object.assign(this.style,e);this.isInserted&&(0,r.IN)("updateHTMLWebView",{htmlId:this.id,position:t,backgroundColor:t.backgroundColor})}get zIndex(){return u.get(this)}set zIndex(e){u.set(this,e),(0,r.IN)("updateHTMLWebView",{htmlId:this.id,zIndex:e})}destroy(){s.delete(this.id),(0,r.IN)("removeHTMLWebView",{htmlId:this.id})}}function p(){return[...s.keys()]}function f({htmlId:e}){const t=s.get(e);t&&t.onload&&setTimeout(t.onload)}function g({name:e,arg:t,htmlId:n}){"postMessage"===e&&s.forEach((({onmessage:e},i)=>{n&&n!==i||e&&setTimeout((()=>e(t)))}))}a.Z.onReady((()=>{4===a.Z.appType&&((0,o.n)("onWebviewFinishLoad",f),(0,o.n)("onWebInvokeAppService",g),(0,o.n)("WEB_INVOKE_APPSERVICE",g))}))},2241:(e,t,n)=>{"use strict";n.d(t,{XS:()=>i,Vs:()=>r,_u:()=>o,cM:()=>a,$G:()=>s,um:()=>c,$v:()=>u,Fr:()=>l,P2:()=>d});const i=({outer:e={width:0,height:0},inner:t={width:0,height:0},maxScale:n=1e3,minScale:i=0,side:r})=>{const o=e.width/e.height,a=t.width/t.height,s=e.width/t.width,c=e.height/t.height;let l=o>a?c:s;var u,d,h;return"width"===r?l=s:"height"===r&&(l=c),u=l,d=i,h=n,l=Math.min(Math.max(d,u),h),t.width*=l,t.height*=l,e.width=Math.max(e.width,t.width),e.height=Math.max(e.height,t.height),{scale:l,outer:e,inner:t}},r=(e=0)=>new Promise((t=>{setTimeout(t,e)})),o=()=>{},a=()=>{},s=(e,t)=>{let n="",i=0;for(let r=0;r<e.length;r++){if(i+=/[\u4e00-\u9fa5]/.test(e[r])?2:1,i>t){n+="...";break}n+=e[r]}return n},c=e=>e.split("-").map(((e,t)=>0===t?e:e[0].toUpperCase()+e.slice(1))).join(""),l=e=>(t={})=>new Promise(((n,i)=>{e(Object.assign(t,{success:n,fail:i}))})),u=e=>{let t=null;return!/^#/.test(e)||7!==e.length&&9!==e.length?null!==(t=/^(rgb|rgba)\((.+)\)/.exec(e))?"#"+t[2].split(",").map(((e,t)=>(e=e.trim(),1===(e=(e=3===t?Math.floor(255*parseFloat(e)):parseInt(e,10)).toString(16)).length&&(e="0"+e),e))).join(""):"#00000000":e},d=function(e,t,n){let i,r,o,a=null,s=0;n||(n={});const c=function(){s=!1===n.leading?0:Date.now(),a=null,o=e.apply(i,r),a||(i=r=null)};return function(){const l=Date.now();s||!1!==n.leading||(s=l);const u=t-(l-s);return i=this,r=arguments,u<=0||u>t?(clearTimeout(a),a=null,s=l,o=e.apply(i,r),a||(i=r=null)):a||!1===n.trailing||(a=setTimeout(c,u)),o}}},5977:(e,t,n)=>{"use strict";n.d(t,{DT:()=>c,FL:()=>d,RZ:()=>u});var i=n(2999),r=n(2046),o=n(1106);n(5867),n(6998),n(5014);const a=e=>{let t="";if(e&&"object"==typeof e){let{query:n}=e;n="string"==typeof n?n:"",n.length>2e3&&(console.warn(`onGameLiveStateChange: query exceed max length limit 2000: "${n.length}"`),n=n.substr(0,2e3)),n.length>0&&(t=`?${n.replace(/^\?/,"")}`)}return t},s=(0,r.s)("GameLiveStateChange"),c=s.internalOnMethod;s.internalOffMethod;let l=null;const u=e=>{l=__errorTracer__.surroundThirdByTryCatch(e,"at onGameLiveStateChange callback function")},d=()=>{l=null},h=e=>({0:"end",1:"start",4:"menuClick"}[e]);(0,i.n)("onGameLiveStateChange",((e={})=>{s.emitInternal(e)}));c((e=>{const{event:t}=e;if(4===t){const{path:t}=(e=>{let t="";if("function"==typeof l){const n={state:h(e.event)},i=l(n);t=a(i)}return{path:t}})(e);(0,o.IN)("startGameLive",{path:t,reportInfo:JSON.stringify({scene:4})})}else if((0===t||1===t)&&"function"==typeof l){const t={state:h(e.event)};l(t)}}))},8191:(e,t,n)=>{"use strict";n.d(t,{Jv:()=>l,Or:()=>u,vv:()=>d,b$:()=>h,Ry:()=>p});var i=n(2999),r=n(2046),o=n(678),a=n(2497);const s=(0,r.s)("Hide"),c=(0,r.s)("BaseFrameHide"),l=s.onMethod,u=s.offMethod,d=s.internalOnMethod,h=s.internalOffMethod,p=c.internalOnMethod;c.internalOffMethod;(0,i.n)("onAppEnterBackground",((e={})=>{(0,a.v)(e.mode),(0,o.b$)()?c.emit(e):(c.emit(e),s.emit(e))}))},5708:(e,t,n)=>{"use strict";n.d(t,{b$:()=>r.b$,Tb:()=>i.Tb,DT:()=>c.DT,vv:()=>r.vv,dN:()=>i.dN,FL:()=>c.FL,Or:()=>r.Or,il:()=>i.il,yC:()=>s,RZ:()=>c.RZ,Jv:()=>r.Jv,Ke:()=>i.Ke,TU:()=>a});var i=n(743),r=n(8191),o=n(5184);const a=()=>{(0,o.v)("onStickyStatusChange"),console.warn("wx.onStickyStatusChange 已废弃，请勿继续使用")},s=()=>{(0,o.v)("offStickyStatusChange"),console.warn("wx.offStickyStatusChange 已废弃，请勿继续使用")};var c=n(5977)},743:(e,t,n)=>{"use strict";n.d(t,{Ke:()=>f,il:()=>g,dN:()=>_,Tb:()=>m,Vh:()=>v,OQ:()=>y});var i=n(495),r=n(2046),o=n(665),a=n(6369),s=n(2582),c=n(2999),l=n(9066),u=n(678),d=n(7452);const h=(0,r.s)("Show"),p=(0,r.s)("BaseFrameShow"),f=h.onMethod,g=h.offMethod,_=h.internalOnMethod,m=h.internalOffMethod,y=p.internalOnMethod;p.internalOffMethod;function v(e,t){e=e||(0,i.Ir)(),t=t||(0,i.x9)(),Reporter.__query__=e.query,l.Z.query=e.query,h.emitInternal(t),h.emitGlobal(e)}function A(e){wxNativeConsole.info("[emitBaseFrameOnShow]",e),p.emitInternal(e)}function b(e=""){const t=e.indexOf("?");let n={};if(t>=0){const i=e.slice(t+1);if(i)try{n=i.split("&").reduce(((e,t)=>{const n=t.split("="),i=n[0],r=n.slice(1).join("=");return e[i]=r,e}),{})}catch(e){n={}}}return n}(0,c.n)("onAppEnterForeground",((e={})=>{const t=e.path;s.wZ&&(0,d.Kn)(e.query)&&Object.keys(e.query).length>0||t&&(e.query=b(t));const{publicLaunchInfo:n,appLaunchInfo:r}=(0,i.Br)(e),o=r.shareInfo;A(r),setTimeout((()=>{(0,u.b$)()||v(n,r),"object"==typeof o&&null!==o&&(0,a.kv)(o.shareKey)}),0)})),o.Z.onReady((()=>{const e=(0,i.Ir)(),t=(0,i.x9)();Reporter.__query__=e.query,l.Z.query=e.query,s.gm||(A(t),setTimeout((()=>{(0,u.b$)()||v(e,t)}),0))}))},2497:(e,t,n)=>{"use strict";let i;function r(e){i=e}function o(){return i}n.d(t,{v:()=>r,B:()=>o})},5867:(e,t,n)=>{"use strict";n.d(t,{V:()=>s,U:()=>c});var i=n(3536),r=n(7618),o=n(5708);let a=!1;function s(){return!!a}function c(){return s()||(0,i.Zz)()?Promise.resolve():Promise.reject(new Error("require user interaction (only in touchend event)"))}r.U.on("beforeTouchEnd",(()=>{a=!0})),r.U.on("afterTouchEnd",(()=>{a=!1})),(0,o.vv)((()=>{a=!1}))},1627:(e,t,n)=>{"use strict";n.d(t,{E:()=>l,Z:()=>d});var i=n(6947),r=n(2184),o=n(7618),a=n(3525),s=n(7452);const c=new r.Q("touch",!0),l=new r.Q("touch",!0),u={};["start","move","end","cancel"].forEach((e=>{if("start"===e){const t="beforeTouchStart",n="setLastTapTime",r="tap";i.Z.EventHandler[`ontouch${e}`]=i=>{o.U.emit(t,i),o.U.emit(n,Date.now()),(0,a.kV)(r),c.emit(e,i),l.emit(e,i)}}else if("end"===e){const t="beforeTouchEnd",n="afterTouchEnd";i.Z.EventHandler[`ontouch${e}`]=i=>{o.U.emit(t),c.emit(e,i),l.emit(e,i),o.U.emit(n)}}else i.Z.EventHandler[`ontouch${e}`]=t=>{c.emit(e,t),l.emit(e,t)};u[`onTouch${e.charAt(0).toUpperCase()+e.slice(1)}`]=(t,n)=>{(0,s.Kn)(n)&&(i.Z.EventHandler[`ontouch${e}Dst`]=n),c.on(e,t)},u[`offTouch${e.charAt(0).toUpperCase()+e.slice(1)}`]=t=>{c.off(e,t)}}));const d=u},2451:(e,t,n)=>{"use strict";n.d(t,{Bq:()=>i,Gy:()=>r,W0:()=>o});const i="__wx__/functional-page",r={PLAY_PAGE_IMAGE:"play_page_image",PLAY_PAGE_VIDEO:"play_page_video"},o=[1154,1007,1008,1074,1088,1044,1045,1046,1010,1096]},5959:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});let i={};const r={get:(e="default")=>i[e],set(e,t="default"){i[t]=e},clear(){i={}}}},678:(e,t,n)=>{"use strict";n.d(t,{xF:()=>a,Vc:()=>s,CV:()=>l,bu:()=>u,cX:()=>d,hk:()=>h,oq:()=>p,b$:()=>f,uy:()=>_});var i=n(2411),r=n(5959),o=n(2451);function a({pageType:e="",query:t}={}){let n="";return"string"==typeof t?n=t:t&&"object"==typeof t&&(n=g(t)),`${o.Bq}/${e}?${n.replace(/^\?/,"")}`}function s(e=""){return new RegExp(`^${o.Bq}/(${c()})`).test(e)}function c(){return Object.keys(o.Gy).map((e=>o.Gy[e])).join("|")}function l(e=""){const t=e.indexOf("?");let n="",i="";t>=0?(n=e.slice(0,t),i=e.slice(t+1)):n=e;const r=new RegExp(`^${o.Bq}/(${c()})`),a=e.match(r);let s="";return a&&(s=a[1]),{path:n,query:i,functionalPageType:s,isFunctionalPage:!!s}}function u(){const e=(0,i.y)().referrerInfo,t=e&&e.messageExtraData;let n={};return"object"==typeof t&&null!==t&&(n=t),n}function d(){const e=(0,i.y)().referrerInfo,t=e&&e.messageExtraData;let n="";return"object"==typeof t&&null!==t&&(n=JSON.stringify(t)),n}function h(e){let t={};const n=r.n.get();if(n.pageType===o.Gy.PLAY_PAGE_IMAGE){const i=a({pageType:o.Gy.PLAY_PAGE_IMAGE,query:n.query});t={title:n.params.title||e.title,path:i,imageUrl:n.params.imageUrl||n.params.fileUrl,messageExtraData:Object.assign({},n.params,{pageType:o.Gy.PLAY_PAGE_IMAGE}),cardSubType:p(o.Gy.PLAY_PAGE_IMAGE)}}else if(n.pageType===o.Gy.PLAY_PAGE_VIDEO){const i=a({pageType:o.Gy.PLAY_PAGE_VIDEO,query:n.query});t={title:n.params.title||e.title,path:i,imageUrl:n.params.thumbUrl,messageExtraData:Object.assign({},n.params,{pageType:o.Gy.PLAY_PAGE_VIDEO}),cardSubType:p(o.Gy.PLAY_PAGE_VIDEO)}}return t}function p(e){return{[o.Gy.PLAY_PAGE_IMAGE]:0,[o.Gy.PLAY_PAGE_VIDEO]:1}[e]}function f(){return!!r.n.get()}function g(e={}){let t=Object.keys(e).reduce(((t,n)=>`${t}${n}=${e[n]}&`),"");return t=t.replace(/&$/,""),t}function _(e,t="index.html"){let n="";"string"==typeof e?n=e:e&&"object"==typeof e&&(n=g(e));return t+"?"+n}},4875:(e,t,n)=>{var i,r,o;globalThis,r=[t,n(6865),n(7009)],void 0===(o="function"==typeof(i=function(e,t,n){e.animate=t,e.Scroller=n})?i.apply(t,r):i)||(e.exports=o)},7009:(e,t,n)=>{var i,r,o;globalThis,r=[n(6865)],void 0===(o="function"==typeof(i=function(e){const t=function(){},n=function(e,n){this.__callback=e,this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:t,penetrationDeceleration:.03,penetrationAcceleration:.08};for(const e in n)this.options[e]=n[e]},i=function(e){return Math.pow(e-1,3)+1},r=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)};return n.prototype={__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions(e,t,n,i){null!==e&&(this.__clientWidth=e),null!==t&&(this.__clientHeight=t),null!==n&&(this.__contentWidth=n),null!==i&&(this.__contentHeight=i),this.__computeScrollMax(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},setPosition(e,t){this.__clientLeft=e||0,this.__clientTop=t||0},setSnapSize(e,t){this.__snapWidth=e,this.__snapHeight=t},getValues(){return{left:this.__scrollLeft,top:this.__scrollTop,right:this.__scrollLeft+this.__clientWidth/this.__zoomLevel,bottom:this.__scrollTop+this.__clientHeight/this.__zoomLevel,zoom:this.__zoomLevel}},getPoint(e,t){const n=this.getValues();return{left:e/n.zoom,top:t/n.zoom}},getScrollMax(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo(t,n,i,r,o){if(!this.options.zooming)throw new Error("Zooming is not enabled!");o&&(this.__zoomComplete=o),this.__isDecelerating&&(e.stop(this.__isDecelerating),this.__isDecelerating=!1);const a=this.__zoomLevel;void 0===i&&(i=this.__clientWidth/2),void 0===r&&(r=this.__clientHeight/2),t=Math.max(Math.min(t,this.options.maxZoom),this.options.minZoom),this.__computeScrollMax(t);const s=t/a;let c=s*(this.__scrollLeft+i)-i,l=s*(this.__scrollTop+r)-r;c>this.__maxScrollLeft?c=this.__maxScrollLeft:c<0&&(c=0),l>this.__maxScrollTop?l=this.__maxScrollTop:l<0&&(l=0),this.__publish(c,l,t,n)},zoomBy(e,t,n,i,r){this.zoomTo(this.__zoomLevel*e,t,n,i,r)},scrollTo(t,n,i,r){if(this.__isDecelerating&&(e.stop(this.__isDecelerating),this.__isDecelerating=!1),void 0!==r&&r!==this.__zoomLevel){if(!this.options.zooming)throw new Error("Zooming is not enabled!");t*=r,n*=r,this.__computeScrollMax(r)}else r=this.__zoomLevel;this.options.scrollingX?this.options.paging?t=Math.round(t/this.__clientWidth)*this.__clientWidth:this.options.snapping&&(t=Math.round(t/this.__snapWidth)*this.__snapWidth):t=this.__scrollLeft,this.options.scrollingY?this.options.paging?n=Math.round(n/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(n=Math.round(n/this.__snapHeight)*this.__snapHeight):n=this.__scrollTop,t=Math.max(Math.min(this.__maxScrollLeft,t),0),n=Math.max(Math.min(this.__maxScrollTop,n),0),t===this.__scrollLeft&&n===this.__scrollTop&&(i=!1),this.__publish(t,n,r,i)},scrollBy(e,t,n){const i=this.__isAnimating?this.__scheduledLeft:this.__scrollLeft,r=this.__isAnimating?this.__scheduledTop:this.__scrollTop;this.scrollTo(i+(e||0),r+(t||0),n)},doMouseZoom(e,t,n,i){const r=e>0?.97:1.03;return this.zoomTo(this.__zoomLevel*r,!1,n-this.__clientLeft,i-this.__clientTop)},doTouchStart(t,n){if(void 0===t.length)throw new Error(`Invalid touch list: ${t}`);if(n instanceof Date&&(n=n.valueOf()),"number"!=typeof n)throw new Error(`Invalid timestamp value: ${n}`);let i,r;this.__interruptedAnimation=!0,this.__isDecelerating&&(e.stop(this.__isDecelerating),this.__isDecelerating=!1,this.__interruptedAnimation=!0),this.__isAnimating&&(e.stop(this.__isAnimating),this.__isAnimating=!1,this.__interruptedAnimation=!0);const o=1===t.length;o?(i=t[0].pageX,r=t[0].pageY):(i=Math.abs(t[0].pageX+t[1].pageX)/2,r=Math.abs(t[0].pageY+t[1].pageY)/2),this.__initialTouchLeft=i,this.__initialTouchTop=r,this.__zoomLevelStart=this.__zoomLevel,this.__lastTouchLeft=i,this.__lastTouchTop=r,this.__lastTouchMove=n,this.__lastScale=1,this.__enableScrollX=!o&&this.options.scrollingX,this.__enableScrollY=!o&&this.options.scrollingY,this.__isTracking=!0,this.__didDecelerationComplete=!1,this.__isDragging=!o,this.__isSingleTouch=o,this.__positions=[]},doTouchMove(e,t,n){if(void 0===e.length)throw new Error(`Invalid touch list: ${e}`);if(t instanceof Date&&(t=t.valueOf()),"number"!=typeof t)throw new Error(`Invalid timestamp value: ${t}`);if(!this.__isTracking)return;let i,r;2===e.length?(i=Math.abs(e[0].pageX+e[1].pageX)/2,r=Math.abs(e[0].pageY+e[1].pageY)/2):(i=e[0].pageX,r=e[0].pageY);const o=this.__positions;if(this.__isDragging){const e=i-this.__lastTouchLeft,a=r-this.__lastTouchTop;let s=this.__scrollLeft,c=this.__scrollTop,l=this.__zoomLevel;if(void 0!==n&&this.options.zooming){const e=l;if(l=l/this.__lastScale*n,l=Math.max(Math.min(l,this.options.maxZoom),this.options.minZoom),e!==l){const t=i-this.__clientLeft,n=r-this.__clientTop;s=(t+s)*l/e-t,c=(n+c)*l/e-n,this.__computeScrollMax(l)}}if(this.__enableScrollX){s-=e*this.options.speedMultiplier;const t=this.__maxScrollLeft;(s>t||s<0)&&(this.options.bouncing?s+=e/2*this.options.speedMultiplier:s=s>t?t:0)}if(this.__enableScrollY){c-=a*this.options.speedMultiplier;const e=this.__maxScrollTop;(c>e||c<0)&&(this.options.bouncing?c+=a/2*this.options.speedMultiplier:c=c>e?e:0)}o.length>60&&o.splice(0,30),o.push(s,c,t),this.__publish(s,c,l)}else{const e=this.options.locking?3:0,n=5,a=Math.abs(i-this.__initialTouchLeft),s=Math.abs(r-this.__initialTouchTop);this.__enableScrollX=this.options.scrollingX&&a>=e,this.__enableScrollY=this.options.scrollingY&&s>=e,o.push(this.__scrollLeft,this.__scrollTop,t),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(a>=n||s>=n),this.__isDragging&&(this.__interruptedAnimation=!1)}this.__lastTouchLeft=i,this.__lastTouchTop=r,this.__lastTouchMove=t,this.__lastScale=n},doTouchEnd(e){if(e instanceof Date&&(e=e.valueOf()),"number"!=typeof e)throw new Error(`Invalid timestamp value: ${e}`);if(this.__isTracking){if(this.__isTracking=!1,this.__isDragging)if(this.__isDragging=!1,this.__isSingleTouch&&this.options.animating&&e-this.__lastTouchMove<=100){const t=this.__positions,n=t.length-1;let i=n;for(let e=n;e>0&&t[e]>this.__lastTouchMove-100;e-=3)i=e;if(i!==n){const r=t[n]-t[i],o=this.__scrollLeft-t[i-2],a=this.__scrollTop-t[i-1];this.__decelerationVelocityX=o/r*(1e3/60),this.__decelerationVelocityY=a/r*(1e3/60);const s=this.options.paging||this.options.snapping?4:1;(Math.abs(this.__decelerationVelocityX)>s||Math.abs(this.__decelerationVelocityY)>s)&&this.__startDeceleration(e)}else this.options.scrollingComplete()}else e-this.__lastTouchMove>100&&this.options.scrollingComplete();this.__isDecelerating||((this.__interruptedAnimation||this.__isDragging)&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel)),this.__positions.length=0}},__publish(t,n,o,a){const s=this.__isAnimating;if(s&&(e.stop(s),this.__isAnimating=!1),a&&this.options.animating){this.__scheduledLeft=t,this.__scheduledTop=n,this.__scheduledZoom=o;const a=this.__scrollLeft,c=this.__scrollTop,l=this.__zoomLevel,u=t-a,d=n-c,h=o-l,p=function(e,t,n){n&&(this.__scrollLeft=a+u*e,this.__scrollTop=c+d*e,this.__zoomLevel=l+h*e,this.__callback&&this.__callback(this.__scrollLeft,this.__scrollTop,this.__zoomLevel))}.bind(this),f=function(e){return this.__isAnimating===e}.bind(this),g=function(e,t,n){t===this.__isAnimating&&(this.__isAnimating=!1),(this.__didDecelerationComplete||n)&&this.options.scrollingComplete(),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))}.bind(this);this.__isAnimating=e.start(p,f,g,this.options.animationDuration,s?i:r)}else this.__scheduledLeft=this.__scrollLeft=t,this.__scheduledTop=this.__scrollTop=n,this.__scheduledZoom=this.__zoomLevel=o,this.__callback&&this.__callback(t,n,o),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))},__computeScrollMax(e){void 0===e&&(e=this.__zoomLevel),this.__maxScrollLeft=Math.max(this.__contentWidth*e-this.__clientWidth,0),this.__maxScrollTop=Math.max(this.__contentHeight*e-this.__clientHeight,0)},__startDeceleration(t){if(this.options.paging){const e=Math.max(Math.min(this.__scrollLeft,this.__maxScrollLeft),0),t=Math.max(Math.min(this.__scrollTop,this.__maxScrollTop),0),n=this.__clientWidth,i=this.__clientHeight;this.__minDecelerationScrollLeft=Math.floor(e/n)*n,this.__minDecelerationScrollTop=Math.floor(t/i)*i,this.__maxDecelerationScrollLeft=Math.ceil(e/n)*n,this.__maxDecelerationScrollTop=Math.ceil(t/i)*i}else this.__minDecelerationScrollLeft=0,this.__minDecelerationScrollTop=0,this.__maxDecelerationScrollLeft=this.__maxScrollLeft,this.__maxDecelerationScrollTop=this.__maxScrollTop;const n=function(e,t,n){this.__stepThroughDeceleration(n)}.bind(this),i=this.options.snapping?4:.1,r=function(){const e=Math.abs(this.__decelerationVelocityX)>=i||Math.abs(this.__decelerationVelocityY)>=i;return e||(this.__didDecelerationComplete=!0),e}.bind(this),o=function(e,t,n){this.__isDecelerating=!1,this.__didDecelerationComplete&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,this.options.snapping)}.bind(this);this.__isDecelerating=e.start(n,r,o)},__stepThroughDeceleration(e){let t=this.__scrollLeft+this.__decelerationVelocityX,n=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){const e=Math.max(Math.min(this.__maxDecelerationScrollLeft,t),this.__minDecelerationScrollLeft);e!==t&&(t=e,this.__decelerationVelocityX=0);const i=Math.max(Math.min(this.__maxDecelerationScrollTop,n),this.__minDecelerationScrollTop);i!==n&&(n=i,this.__decelerationVelocityY=0)}if(e?this.__publish(t,n,this.__zoomLevel):(this.__scrollLeft=t,this.__scrollTop=n),!this.options.paging){const e=.95;this.__decelerationVelocityX*=e,this.__decelerationVelocityY*=e}if(this.options.bouncing){let e=0,i=0;const{penetrationDeceleration:r}=this.options,{penetrationAcceleration:o}=this.options;t<this.__minDecelerationScrollLeft?e=this.__minDecelerationScrollLeft-t:t>this.__maxDecelerationScrollLeft&&(e=this.__maxDecelerationScrollLeft-t),n<this.__minDecelerationScrollTop?i=this.__minDecelerationScrollTop-n:n>this.__maxDecelerationScrollTop&&(i=this.__maxDecelerationScrollTop-n),0!==e&&(e*this.__decelerationVelocityX<=0?this.__decelerationVelocityX+=e*r:this.__decelerationVelocityX=e*o),0!==i&&(i*this.__decelerationVelocityY<=0?this.__decelerationVelocityY+=i*r:this.__decelerationVelocityY=i*o)}}},n})?i.apply(t,r):i)||(e.exports=o)},6865:(e,t)=>{var n,i,r;globalThis,i=[t],void 0===(r="function"==typeof(n=function(e){const t="undefined"==typeof window?this:window,n=Date.now||function(){return+new Date},i=60,r=1e3;let o={},a=1;e.requestAnimationFrame=function(){const e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame;let n=!!e;if(e&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(e.toString())&&(n=!1),n)return function(t,n){e(t,n)};const i=60;let r={},o=0,a=1,s=null,c=+new Date;return function(e,t){const n=a++;return r[n]=e,o++,null===s&&(s=setInterval((function(){const e=+new Date,t=r;r={},o=0;for(const n in t)t.hasOwnProperty(n)&&(t[n](e),c=e);e-c>2500&&(clearInterval(s),s=null)}),1e3/i)),n}}(),e.stop=function(e){const t=null!==o[e];return t&&(o[e]=null),t},e.isRunning=function(e){return null!==o[e]},e.start=function(t,s,c,l,u,d){const h=n();let p=h,f=0,g=0;const _=a++;if(_%20==0){const e={};for(const t in o)e[t]=!0;o=e}var m=function(a){const y=!0!==a,v=n();if(!o[_]||s&&!s(_))return o[_]=null,void c(i-g/((v-h)/r),_,!1);if(y){const e=Math.round((v-p)/(r/i))-1;for(let t=0;t<Math.min(e,4);t++)m(!0),g++}l&&(f=(v-h)/l,f>1&&(f=1));const A=u?u(f):f;!1!==t(A,v,y)&&1!==f||!y?y&&(p=v,e.requestAnimationFrame(m,d)):(o[_]=null,c(i-g/((v-h)/r),_,1===f||void 0===l))};return o[_]=!0,e.requestAnimationFrame(m,d),_}})?n.apply(t,i):n)||(e.exports=r)},7765:(e,t,n)=>{"use strict";n.d(t,{oq:()=>r,y:()=>o});const i=new WeakMap,r=(e,t)=>i.set(e,t),o=e=>i.get(e)},138:(e,t,n)=>{"use strict";n.d(t,{dU:()=>G,$Q:()=>z,QJ:()=>V});var i=n(665),r=n(1106);const o=wxGA,a={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267,MiniGameOpenDataMonitor:23536};var s=n(4212);var c=n(5014),l=n(9798),u=n(6175),d=n(6329),h=n(7393),p=n(4460),f=n(9378),g=n(6081),_=n(5161),m=n(272),y=n(1425),v=n(1130);const A=(0,v.Z)("getGameLifeProfile","webapi_getgamelifeprofile",{},{},(e=>JSON.parse(JSON.stringify(e)))),b=(0,v.Z)("getGreetingControlInfo","webapi_getgreetingcontrolinfo",{},{},(e=>JSON.parse(JSON.stringify(e)))),w=(0,v.Z)("interactGameLifeTag","webapi_interactgamelifetag",{},{},(e=>JSON.parse(JSON.stringify(e))));var E=n(1944),T=n(2276),S=n(6725),C=n(6300),I=n(8065),x=n(5373),D=n(9536),O=n.n(D),P=n(74),R=n(8010),k=n(4052);const N={Component:x.wA,getPrivateThis:x.Wj,removePrivateThis:x.bn,create:x.Ue,init:x.S1,webviewLayout:I.uo,nativeviewLayout:I._w,xmlParser:O()},M={Kanata:Kanata,wxGA:o,reportIDKey:({id:e,key:t,value:n})=>Reporter.reportIDKey({id:e,key:t,value:n}),reportKeyValue:function({key:e,value:t,immediately:n}){return"number"!=typeof e||Object.values(a).includes(e)?Reporter.reportKeyValue({key:e,value:t,immediately:n}):Reporter.reportKeyValue({key:e,value:t,immediately:n,number:!0})},getXLogManager:()=>s.s,getUserCloudStorage:l.u,getFriendCloudStorage:u.l,getGroupCloudStorage:d.q,getPotentialFriendList:h.e,getGroupInfo:p.y,shareMessageToFriend:f.N,getUserInfo:g.b,getUserCloudStorageKeys:_.r,modifyFriendInteractiveStorage:m.Fc,WebAssembly:y.Ji,getGameLifeProfile:A,getGreetingControlInfo:b,interactGameLifeTag:w,openGameLifeAccountInfo:E.wH,openGameLifeMiniGameTransfer:E.bo,Function:Function.prototype.constructor,createCanvas:(...e)=>(0,S.ED)(...e),createScreenCanvas:(...e)=>(0,S.UG)(...e),createWebView:e=>new I.kh(e),navigateToMiniProgramDirectly:e=>(0,T.iy)(e,e),privateOpenUrl:C.n8,gameTransfer:P.z,coverview:N,launchApplicationDirectly:R.dx,encode:k.c,decode:k.J},L={wxGA:846,Kanata:933,reportIDKey:847,reportKeyValue:848,getXLogManager:849,getUserCloudStorage:883,getFriendCloudStorage:884,getGroupCloudStorage:885,getPotentialFriendList:886,getGroupInfo:887,shareMessageToFriend:888,getUserInfo:915,getUserCloudStorageKeys:950,modifyFriendInteractiveStorage:951,WebAssembly:962,Function:963,getGameLifeProfile:964,getGreetingControlInfo:965,interactGameLifeTag:966,openGameLifeAccountInfo:979,openGameLifeMiniGameTransfer:980,gameTransfer:981,createCanvas:987,createScreenCanvas:987,createWebView:991,navigateToMiniProgramDirectly:1002,coverview:1005,launchApplication:1006,privateOpenUrl:1007,launchApplicationDirectly:1008,encode:1022,decode:1023},B=Object.keys(L).map((e=>L[e])),F={},U=["getUserCloudStorage","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getGroupInfo","shareMessageToFriend","getUserCloudStorageKeys","modifyFriendInteractiveStorage"],W={},j=e=>(e=>{if(W[e])return W[e];F[e]={},(0,r.IN)("getPluginPermissionBytes",{pluginList:[{indexes:B,pluginId:e}],success(t){const n=t.pluginPermissionMap;if(n&&n[e])for(let t=0;t<n[e].length;t++){const i=B[t];F[e][i]=1===n[e][t]}}});const t={platform:i.Z.platform};for(const n in M){const i=L[n],r=F[e][i];("wx20afc706a711eefc"===e||"wx4d5893418b75cb20"===e||r)&&("createCanvas"===n&&(H=!0),-1===U.indexOf(n)?t[n]=M[n]:(0,c.J)("engineOpenData")&&(H=!0,t[n]=M[n]))}return W[e]=t,W[e]})(e),G=(e,{enableRequireHostModule:t,customEnv:n})=>{const i=j(e);return i.customEnv=n,t&&(i.requireHostModule=__subContextEngine__.getGameContext().contextGlobal.__require),i},V=()=>{const e=i.Z.plugins||i.Z.gamePlugins;e&&Object.keys(e).forEach((t=>{const n=e[t].provider;j(n)}))};let H=!1;const z=()=>H},3872:(e,t,n)=>{"use strict";n.d(t,{F0:()=>a,az:()=>l,y4:()=>u});var i=n(1106),r=n(7452),o=n(6722);const a={EVENT_CANVAS_BEFORE_SHARE:1,EVENT_CANVAS_AFTER_SHARE_SUCCESS:2,EVENT_CANVAS_AFTER_SHARE_CANCEL:3,EVENT_CANVAS_BEFORE_ADS:4,EVENT_CANVAS_ADS_FIN:5,EVENT_CANVAS_ADS_CANCEL:6,EVENT_CANVAS_BEFORE_JUMP_TO_APP:7,EVENT_CANVAS_BEFORE_PAY:8,EVENT_CANVAS_BEFORE_JUMP_TO_CUSTOMER_SERVICE:9,EVENT_CANVAS_BEFORE_CLOSE_CUSTOMER_SERVICE:10,EVENT_CANVAS_BEFORE_QR_CODE:11,EVENT_CANVAS_BEFORE_MORE:12,EVENT_CANVAS_BEFORE_GAME_ClUB:13,EVENT_CANVAS_AFTER_MODAL:14,EVENT_CANVAS_BEFORE_NORMAL_EXIT:15,EVENT_CANVAS_SAMPLE_BY_TIME:16,EVENT_CANVAS_WEBVIEW_TIMING:17,EVENT_CANVAS_WEBVIEW_BEFORE_JUMP:18},s={sampleEventList:[]},c=new Map;function l(){(0,i.jQ)("onCanvasReportEventSampleConfigReceived",(e=>{const t=JSON.parse(e.keyEventSampleConfig);Array.isArray(t.sample_event_list)&&(s.sampleEventList=t.sample_event_list,s.sampleEventList.forEach((e=>{c.set(e,0)})),function(){const e=s.sampleEventList.find((e=>e.event===a.EVENT_CANVAS_SAMPLE_BY_TIME));if(e){let t=6e3,n=6,i=0;(0,r.hj)(e.sample_interval_seconds)&&(t=1e3*e.sample_interval_seconds),(0,r.hj)(e.sample_cnt)&&(n=e.sample_cnt),setTimeout((()=>{u(a.EVENT_CANVAS_SAMPLE_BY_TIME),i++}),1e3);const o=setInterval((()=>{i>n?clearInterval(o):setTimeout((()=>{u(a.EVENT_CANVAS_SAMPLE_BY_TIME),i++}),500)}),t)}}(),function(){const e=s.sampleEventList.find((e=>e.event===a.EVENT_CANVAS_WEBVIEW_TIMING));if(e){let t=6e3,n=6,i=0;(0,r.hj)(e.sample_interval_seconds)&&(t=1e3*e.sample_interval_seconds),(0,r.hj)(e.sample_cnt)&&(n=e.sample_cnt),setTimeout((()=>{(0,o.Z)().forEach((e=>{u(a.EVENT_CANVAS_WEBVIEW_TIMING,e)})),i++}),1e3);const s=setInterval((()=>{i>n?clearInterval(s):setTimeout((()=>{(0,o.Z)().forEach((e=>{u(a.EVENT_CANVAS_WEBVIEW_TIMING,e)})),i++}),500)}),t)}}())})),(0,i.jQ)("onStartReportCanvasData",(({event:e})=>{e===a.EVENT_CANVAS_WEBVIEW_BEFORE_JUMP?(0,o.Z)().forEach((t=>{u(e,t)})):u(e)}))}function u(e,t){const n=function(e){return s.sampleEventList.find((t=>e===t.event))}(e);if(n){const e=Date.now(),r=c.get(n);if(n.sample_interval_seconds,(e-r)/1e3<n.sample_interval_seconds)return;(0,i.IN)("reportCanvasData",{eventInfo:JSON.stringify(n),viewId:t>0?t:0,success(){c.set(n,e)},fail({errMsg:e}){}})}}},4345:(e,t,n)=>{"use strict";let i;n.d(t,{v:()=>r,Z:()=>o});const r=(0,n(1130).Z)("getIAPInfo","webapi_getiapinfo");function o(){return new Promise(((e,t)=>{i?e(i):r({success(t){i={openId:t.openID,appId:t.appId},e(i)},fail(e){t(e.errMsg)}})}))}},1029:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var i=n(1106),r=n(7618);function o({filePath:e,thumbFilePath:t,fileType:n,appType:o}={}){return new Promise(((a,s)=>{if(!/wxfile:\/\//.test(e)&&!/http:\/\//.test(e)){const t=r.L.get(e);e=t}(0,i.IN)("uploadToCommonCDN",{filePath:e,thumbFilePath:t,fileType:n,appType:o,isStorageMode:!0,snsUploadVersion:0,directReturnInDevtools:!0,success:a,fail:s})}))}},7618:(e,t,n)=>{"use strict";n.d(t,{U:()=>o,L:()=>a});var i=n(8159),r=n(2783);const o=new i.Z,a={map:{},set(e){const t=(0,r.M8)();return this.map[t]=e,t},get(e){return e?this.map[e]:Object.keys(this.map).map((e=>this.map[e]))}}},1459:(e,t,n)=>{"use strict";n.d(t,{Ur:()=>c,hI:()=>s});n(883);const i={emitter:new(n(8159).Z),puidToPluginWX:{},pluginIDs:{},pluginVersions:{},pluginInfos:{}};var r=n(1095),o=n(7765);const a=e=>{for(const t in i.puidToPluginWX)if(i.puidToPluginWX[t]===e)return t},s=e=>i.pluginIDs[a(e)],c=e=>{if((0,r.aI)()){const t=(0,o.y)(e);return t&&t.provider?t.provider:void 0}return s(e)}},1095:(e,t,n)=>{"use strict";n.d(t,{Hw:()=>c,Wv:()=>u,Vs:()=>d,vp:()=>h,Y6:()=>p,KU:()=>f,aI:()=>g,N0:()=>_,Fr:()=>m,fm:()=>y,vB:()=>v,M7:()=>A,v7:()=>b,Uj:()=>w,Av:()=>E,er:()=>T,GO:()=>S});var i=n(8159),r=n(665),o=n(3525),a=n(2582),s=n(7452);function c(e,t,n){return function(){try{return e.apply(e,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:n,error:e,extend:t})}}}}function l(e,t,n,i){Object.defineProperty(e,n,{get(){const e=this;return"function"==typeof t[n]?c((function(){return(0,o.Fv)(n),(0,o.g9)(n,t[n]).apply(e,arguments)}),`wx.${n}`,i):t[n]},enumerable:!0,configurable:!0})}const u=(e,t)=>{const n={};for(const i in e)l(n,e,i,t);return n},d=(e,t)=>{const n=t.timeout;if("number"!=typeof n)return void e(t);let i=!1;const r=setTimeout((function(){const e={errMsg:"request timeout"};i=!0,"function"==typeof t.fail&&t.fail(e),"function"==typeof t.complete&&t.complete(e)}),n),o=["success","fail","complete"].reduce(((e,n)=>(e[n]=e=>{i||(clearTimeout(r),"function"==typeof t[n]&&t[n](e))},e)),{});e(Object.assign({},t,o))};class h{constructor(e={maxListeners:2e3}){this.emitter=new i.Z(e),this.callbackMap="undefined"!=typeof WeakMap?new WeakMap:{},this.originalCallbackMap=new WeakMap}emit(e,t){this.emitter.emit(e,t)}on(e,t){if(t&&"function"==typeof t){const n=__errorTracer__.surroundThirdByTryCatch(t,`at ${e} callback function`);this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}off(e,t){if(t&&"function"==typeof t){const n=this.callbackMap.get(t);this.emitter.off(e,n),this.callbackMap.delete(t),this.originalCallbackMap.delete(n)}else this.emitter.listeners(e).forEach((e=>{const t=this.originalCallbackMap.get(e);this.callbackMap.delete(t),this.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}listeners(e){return this.emitter.listeners(e)}}function p(e){return"string"==typeof e?e.length:"object"==typeof e&&null!==e&&"number"==typeof e.byteLength?e.byteLength:0}function f(e){let t="unknown";if(r.Z.appContactInfo&&r.Z.appContactInfo.operationInfo&&r.Z.appContactInfo.operationInfo.jsonInfo&&r.Z.appContactInfo.operationInfo.jsonInfo.apiAvailable){const{apiAvailable:n}=r.Z.appContactInfo.operationInfo.jsonInfo;"number"==typeof n[e]&&(t=1===n[e])}return t}function g(){return 4===r.Z.appType}function _(){return 0===r.Z.appType}function m(e){return(t={})=>new Promise(((n,i)=>{e(Object.assign(t,{success:n,fail:i}))}))}function y(e){return e.charAt(0).toUpperCase()+e.slice(1)}function v(){return a.gm?!r.Z.urlCheck:!0===r.Z.debug}function A(e,t){const n=String(e).split(".").map((function(e){return parseInt(e,10)})),i=String(t).split(".").map((function(e){return parseInt(e,10)})),r=Math.max(n.length,i.length);let o;if(null!=e&&null!=t){if(0===e.length&&0===t.length)return 0;if(0===e.length)return-1;if(0===t.length)return 1;for(let e=0;e<r&&(o=a(n[e],i[e]),0===o);e++);return o}function a(e,t){return"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),e>t?1:e<t?-1:0}console.error("versionCompare()参数格式错误")}function b(e,t){return t.reduce(((t,n)=>((0,s.o8)(e[n])||(t[n]=e[n]),t)),{})}function w(e){if(!a.gm||"string"!=typeof e)return e;if(/^https?:\/\//.test(e)){const t=e.split("?"),n=t[1]||"",i=n.length>0?"&":"";e=`${t[0]}?${n}${i}devtools_ignore=true`}return e}function E(){return r.Z.appLaunchInfo&&"singlePage"===r.Z.appLaunchInfo.mode}function T(){const e=r.Z.host;return e&&"WeChat"!==e.env&&"WMPF"!==e.env}const S=function(){return r.Z.isIsolateContext}},5130:(e,t,n)=>{function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(4161)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),e.splice(o,0,i)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())},4161:(e,t,n)=>{var i;function r(e){function n(){if(n.enabled){var e=n,r=+new Date,o=r-(i||r);e.diff=o,e.prev=i,e.curr=r,i=r;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;c++;var r=t.formatters[i];if("function"==typeof r){var o=a[c];n=r.call(e,o),a.splice(c,1),c--}return n})),t.formatArgs.call(e,a);var l=n.log||t.log||console.log.bind(console);l.apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length,r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(1378),t.names=[],t.skips=[],t.formatters={}},1378:e=>{var t=1e3,n=60*t,i=60*n,r=24*i,o=365.25*r;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,s){s=s||{};var c,l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!a)return;var s=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*o;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===l&&!1===isNaN(e))return s.long?a(c=e,r,"day")||a(c,i,"hour")||a(c,n,"minute")||a(c,t,"second")||c+" ms":function(e){if(e>=r)return Math.round(e/r)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2808:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,i,r){n=n||"&",i=i||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(n);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var l=0;l<c;++l){var u,d,h,p,f=e[l].replace(a,"%20"),g=f.indexOf(i);g>=0?(u=f.substr(0,g),d=f.substr(g+1)):(u=f,d=""),h=decodeURIComponent(u),p=decodeURIComponent(d),t(o,h)?Array.isArray(o[h])?o[h].push(p):o[h]=[o[h],p]:o[h]=p}return o}},1368:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,i,r){return n=n||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(r){var o=encodeURIComponent(t(r))+i;return Array.isArray(e[r])?e[r].map((function(e){return o+encodeURIComponent(t(e))})).join(n):o+encodeURIComponent(t(e[r]))})).join(n):r?encodeURIComponent(t(r))+i+encodeURIComponent(t(e)):""}},6642:(e,t,n)=>{"use strict";t.decode=t.parse=n(2808),t.encode=t.stringify=n(1368)},9639:function(e,t,n){var i;e=n.nmd(e),function(r){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,c=36,l=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function g(e){throw RangeError(h[e])}function _(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function m(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+_((e=e.replace(d,".")).split("."),t).join(".")}function y(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function v(e){return _(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function b(e,t,n){var i=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;i+=c)e=p(e/35);return p(i+36*e/(e+38))}function w(e){var t,n,i,r,o,a,l,u,d,h,f,_=[],m=e.length,y=0,A=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&g("not-basic"),_.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<m;){for(o=y,a=1,l=c;r>=m&&g("invalid-input"),((u=(f=e.charCodeAt(r++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:c)>=c||u>p((s-y)/a))&&g("overflow"),y+=u*a,!(u<(d=l<=w?1:l>=w+26?26:l-w));l+=c)a>p(s/(h=c-d))&&g("overflow"),a*=h;w=b(y-o,t=_.length+1,0==o),p(y/t)>s-A&&g("overflow"),A+=p(y/t),y%=t,_.splice(y++,0,A)}return v(_)}function E(e){var t,n,i,r,o,a,l,u,d,h,_,m,v,w,E,T=[];for(m=(e=y(e)).length,t=128,n=0,o=72,a=0;a<m;++a)(_=e[a])<128&&T.push(f(_));for(i=r=T.length,r&&T.push("-");i<m;){for(l=s,a=0;a<m;++a)(_=e[a])>=t&&_<l&&(l=_);for(l-t>p((s-n)/(v=i+1))&&g("overflow"),n+=(l-t)*v,t=l,a=0;a<m;++a)if((_=e[a])<t&&++n>s&&g("overflow"),_==t){for(u=n,d=c;!(u<(h=d<=o?1:d>=o+26?26:d-o));d+=c)E=u-h,w=c-h,T.push(f(A(h+E%w,0))),u=p(E/w);T.push(f(A(u,0))),o=b(n,v,i==r),n=0,++i}++n,++t}return T.join("")}a={version:"1.3.2",ucs2:{decode:y,encode:v},decode:w,encode:E,toASCII:function(e){return m(e,(function(e){return u.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return m(e,(function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()},883:(e,t,n)=>{"use strict";var i=n(9639),r=n(5225);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),d=["%","/","?",";","#"].concat(u),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(6642);function v(e,t,n){if(e&&r.isObject(e)&&e instanceof o)return e;var i=new o;return i.parse(e,t,n),i}o.prototype.parse=function(e,t,n){if(!r.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/");var v=e=l.join(s);if(v=v.trim(),!n&&1===e.split("#").length){var A=c.exec(v);if(A)return this.path=v,this.href=v,this.pathname=A[1],A[2]?(this.search=A[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var b=a.exec(v);if(b){var w=(b=b[0]).toLowerCase();this.protocol=w,v=v.substr(b.length)}if(n||b||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===v.substr(0,2);!E||b&&_[b]||(v=v.substr(2),this.slashes=!0)}if(!_[b]&&(E||b&&!m[b])){for(var T,S,C=-1,I=0;I<h.length;I++){-1!==(x=v.indexOf(h[I]))&&(-1===C||x<C)&&(C=x)}-1!==(S=-1===C?v.lastIndexOf("@"):v.lastIndexOf("@",C))&&(T=v.slice(0,S),v=v.slice(S+1),this.auth=decodeURIComponent(T)),C=-1;for(I=0;I<d.length;I++){var x;-1!==(x=v.indexOf(d[I]))&&(-1===C||x<C)&&(C=x)}-1===C&&(C=v.length),this.host=v.slice(0,C),v=v.slice(C),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var O=this.hostname.split(/\./),P=(I=0,O.length);I<P;I++){var R=O[I];if(R&&!R.match(p)){for(var k="",N=0,M=R.length;N<M;N++)R.charCodeAt(N)>127?k+="x":k+=R[N];if(!k.match(p)){var L=O.slice(0,I),B=O.slice(I+1),F=R.match(f);F&&(L.push(F[1]),B.unshift(F[2])),B.length&&(v="/"+B.join(".")+v),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=i.toASCII(this.hostname));var U=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+U,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!g[w])for(I=0,P=u.length;I<P;I++){var j=u[I];if(-1!==v.indexOf(j)){var G=encodeURIComponent(j);G===j&&(G=escape(j)),v=v.split(j).join(G)}}var V=v.indexOf("#");-1!==V&&(this.hash=v.substr(V),v=v.slice(0,V));var H=v.indexOf("?");if(-1!==H?(this.search=v.substr(H),this.query=v.substr(H+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,H)):t&&(this.search="",this.query={}),v&&(this.pathname=v),m[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var z=this.search||"";this.path=U+z}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+i},o.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(r.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,i=Object.keys(this),a=0;a<i.length;a++){var s=i[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var u=c[l];"protocol"!==u&&(n[u]=e[u])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){for(var d=Object.keys(e),h=0;h<d.length;h++){var p=d[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||_[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),A=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=A||v||n.host&&e.pathname,w=b,E=n.pathname&&n.pathname.split("/")||[],T=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),b=b&&(""===f[0]||""===E[0])),A)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=f;else if(f.length)E||(E=[]),E.pop(),E=E.concat(f),n.search=e.search,n.query=e.query;else if(!r.isNullOrUndefined(e.search)){if(T)n.hostname=n.host=E.shift(),(D=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=D.shift(),n.host=n.hostname=D.shift());return n.search=e.search,n.query=e.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=E.slice(-1)[0],C=(n.host||e.host||E.length>1)&&("."===S||".."===S)||""===S,I=0,x=E.length;x>=0;x--)"."===(S=E[x])?E.splice(x,1):".."===S?(E.splice(x,1),I++):I&&(E.splice(x,1),I--);if(!b&&!w)for(;I--;I)E.unshift("..");!b||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),C&&"/"!==E.join("/").substr(-1)&&E.push("");var D,O=""===E[0]||E[0]&&"/"===E[0].charAt(0);T&&(n.hostname=n.host=O?"":E.length?E.shift():"",(D=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=D.shift(),n.host=n.hostname=D.shift()));return(b=b||n.host&&E.length)&&!O&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},5225:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},9536:(e,t,n)=>{var i=n(5130)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:n()}}();function t(){if(o(/^<\?xml\s*/)){for(var e={attributes:{}};!a()&&!s("?>");){var t=r();if(!t)return e;e.attributes[t.name]=t.value}return o(/\?>\s*/),e}}function n(){i("tag %j",e);var t=o(/^<([\w-:.]+)\s*/);if(t){for(var c,l={name:t[1],attributes:{},children:[]};!(a()||s(">")||s("?>")||s("/>"));){var u=r();if(!u)return l;l.attributes[u.name]=u.value}if(o(/^\s*\/>\s*/))return l;for(o(/\??>\s*/),l.content=function(){i("content %j",e);var t=o(/^([^<]*)/);return t?t[1]:""}();c=n();)l.children.push(c);return o(/^<\/[\w-:.]+>\s*/),l}}function r(){i("attribute %j",e);var t,n=o(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(n)return{name:n[1],value:(t=n[2],t.replace(/^['"]|['"]$/g,""))}}function o(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function a(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},2102:e=>{"use strict";e.exports=BabelRuntimeHelpers.applyDecoratedDescriptor},3356:e=>{"use strict";e.exports=BabelRuntimeHelpers.asyncToGenerator},1503:e=>{"use strict";e.exports=BabelRuntimeHelpers.objectSpread2},3451:e=>{"use strict";e.exports=BabelRuntimeHelpers.objectWithoutProperties}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};(()=>{"use strict";n.d(i,{default:()=>qL});var e={};n.r(e),n.d(e,{getABTestConfig:()=>f.b,getGameRelatedContextsExports:()=>$h,getIsolatedGamePluginContextEnv:()=>qh});var t={};n.r(t),n.d(t,{_downloadFileSkipCheckDomain:()=>y.o,_operateWXData:()=>ye.JM,_requestSkipCheckDomain:()=>m.a,_socketSkipCheckDomainFactory:()=>ce,_uploadFileSkipCheckDomain:()=>S,private_getUserAgent:()=>ve.Yu,uploadToCommonCDN:()=>Qh});var r=n(7848),o=n(6947),a=n(2582);if(a.jP)console=window.console;else if(!a.gm&&!a.DD&&!a.Ae){const e=function(e,t){const n=(0,r.f$)(e,t,(0,a.Dq)());n&&o.Z.log(n)};globalThis.console={log(){e(r.pO.LOG,arguments)},info(){e(r.pO.INFO,arguments)},warn(){e(r.pO.WARNING,arguments)},error(){e(r.pO.ERROR,arguments)},debug(){e(r.pO.DEBUG,arguments)},time(){e(r.pO.TIME,arguments)},timeEnd(){e(r.pO.TIME_END,arguments)},group(){},groupEnd(){}}}var s=n(665),c=n(1106),l=n(2046);const u=(0,l.s)("UpdateWXConfig"),d=u.onMethod;u.offMethod;(0,c.jQ)("onUpdateWXConfig",(e=>{wxNativeConsole.info("onUpdateWXConfig",e),Object.keys(e).forEach((t=>{s.Z[t]=e[t]})),u.emit(e)}));var h=n(2783),p=n(1095),f=n(2288),g=n(6077);const _=[{APINames:[/^connectSocket/],ios:{app:1,game:1},android:{app:1,game:1},version:1},{APINames:[/^request/,/^downloadFile/],ios:{app:"clicfg_wegame_ios_use_cronet_request",game:"clicfg_wegame_ios_use_cronet_request"},android:{app:1,game:1},version:1},{APINames:[/^downloadFile/],ios:{app:"clicfg_appbrand_ios_native_download",game:"clicfg_appbrand_ios_native_download"},android:{app:0,game:0},version:2},{APINames:[/^connectSocket/],ios:{app:"clicfg_appbrand_ios_native_socket_wcwss",game:"clicfg_appbrand_ios_native_socket_wcwss"},android:{app:2,game:2},version:2}];s.Z.onReady((()=>{if(!(0,p.aI)()&&!(0,p.N0)())return;const e=(0,p.aI)()?"game":"app";_.forEach((t=>{const{APINames:n,version:i}=t,r=t[a.iw];r&&r[e]&&function(e,t,n){JSON.stringify(t),"string"==typeof e?(0,f.b)({experimentId:e,experimentType:"Expt",success({testConfig:e}){JSON.stringify(t),1===Number(e)&&t.forEach((e=>{(0,g.T)(e,n)}))}}):"number"==typeof e&&t.forEach((t=>{(0,g.T)(t,e)}))}(r[e],n,i)}))}));var m=n(5166),y=n(2614),v=n(5260),A=n(7255);(0,A.b)("Upload",{maxTaskCount:10,functionName:"uploadFile"}),s.Z.onReady((()=>{try{"number"==typeof s.Z.wxAppInfo.maxUploadConcurrent&&(0,A.b)("Upload",{maxTaskCount:s.Z.wxAppInfo.maxUploadConcurrent})}catch(e){}}));class b extends A.o{constructor(e){super(e,{taskType:"Upload",beforeSend:t=>(t.filePath=e.filePath,t.name=e.name,t.formData=e.formData,t),beforeSuccess:e=>e})}}const w=b,E=(e={})=>(e=Object.assign({__skipDomainCheck__:!1},e),(t={})=>{if(!(0,c.r3)("uploadFile",t,{url:"",filePath:"",name:""}))return;"object"!=typeof t.header&&void 0!==t.header&&(console.warn("uploadFile: header must be an object"),delete t.header),"object"!=typeof t.formData&&void 0!==t.formData&&(console.warn("uploadFile: formData must be an object"),delete t.formData);let n={},i={};t.header&&(n=(0,v.Nf)(t.header)),t.formData&&(i=(0,v.Nf)(t.formData));try{return new w(Object.assign({},t,{header:n,formData:i,__skipDomainCheck__:e.__skipDomainCheck__}))}catch(e){return void(0,c.YG)("uploadFile",t,e.message)}}),T=E(),S=E({__skipDomainCheck__:!0});var C,I=n(2102),x=n.n(I),D=n(2184),O=n(5500),P=n(7452);let R=0;const k=new WeakMap,N=new WeakMap,M=new WeakMap,L=new WeakMap,B={},F=new D.Q;(0,c.jQ)("onSocketTaskStateChange",((e={})=>{const{state:t,socketTaskId:n}=e,i=B[n];if(!i)return;const r=k.get(i);if(delete e.state,delete e.socketTaskId,i){if("open"===t){i.readyState=i.OPEN;const t=M.get(i).url,n=1,r=Date.now()-L.get(i),o="",a=e.statusCode,s=M.get(i).__skipDomainCheck__,c=0,l=e.profile;(0,O.P)("connectSocket",t,n,r,o,a,s,c,0,l)}else"close"!==t&&"error"!==t||(i.readyState=i.CLOSED);F.emit(`${r}${t}`,e),F.emit(`onSocket${t[0].toUpperCase()+t.substr(1)}`,e,i),"close"===t&&(delete B[n],F.removeAllListeners(`${r}open`),F.removeAllListeners(`${r}close`),F.removeAllListeners(`${r}error`),F.removeAllListeners(`${r}message`))}}));const U=function(e,t){F.on(`${k.get(this)}${e}`,__errorTracer__.surroundThirdByTryCatch(t,`at socketTask.on${e} callback function`))};let W=(C=class{constructor(e,t){this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING;const n=R++;let i;k.set(this,n),M.set(this,t),Object.defineProperty(this,"__socketInstance__",{value:e,writable:!1,configurable:!1,enumerable:!1}),["success","fail","complete"].forEach((e=>{"function"==typeof t[e]&&(t[e]=__errorTracer__.surroundThirdByTryCatch(t[e],`at api connectSocket ${e} callback function`))})),L.set(this,Date.now()),(0,P.hj)(t.timeout)||(t.timeout=0);const r=()=>{(0,c.IN)("createSocketTask",t,{beforeAll(e){e.errMsg=e.errMsg.replace("createSocketTask","connectSocket")},beforeSuccess:e=>{N.set(this,e.socketTaskId),B[e.socketTaskId]=this},beforeFail:e=>{const n=t.url,r=Date.now()-L.get(this),o=t.__skipDomainCheck__;i=e.errMsg,(0,O.P)("connectSocket",n,2,r,i,"",o,0)}}),i&&(this.readyState=this.CLOSED,setTimeout((()=>{F.emit(`${n}error`,{errMsg:i})}),0))};(0,P.mf)(t.customCheck)?t.customCheck(t,(e=>{e?((0,c.YG)("connectSocket",t,e),this.readyState=this.CLOSED,setTimeout((()=>{F.emit(`${n}error`,{errMsg:e})}),0)):r()})):r()}send(e){if(this.readyState===this.OPEN){const t=Date.now();(0,c.IN)("operateSocketTask",Object.assign({},e,{operationType:"send",socketTaskId:N.get(this)}),{beforeAll:n=>{if(n.errMsg=n.errMsg.replace("operateSocketTask","sendSocketMessage"),Math.random()>.99){const i=M.get(this).url,r=n.errMsg.indexOf("ok")>-1?1:2,o=Date.now()-t,a=n.errMsg,s="",c=M.get(this).__skipDomainCheck__,l=(0,p.Y6)(e.data);(0,O.P)("sendSocketMessage",i,r,o,a,s,c,l)}}})}else(0,c.YG)("SocketTask.send",e,"SocketTask.readyState is not OPEN")}close(e={}){(0,c.IN)("operateSocketTask",Object.assign({code:1e3},e,{operationType:"close",socketTaskId:N.get(this)}),{beforeAll(e){e.errMsg=e.errMsg.replace("operateSocketTask","closeSocket")}})}onOpen(e){U.call(this,"open",e)}onClose(e){U.call(this,"close",e)}onMessage(e){U.call(this,"message",e)}onError(e){U.call(this,"error",e)}},x()(C.prototype,"send",[h.Qu],Object.getOwnPropertyDescriptor(C.prototype,"send"),C.prototype),x()(C.prototype,"close",[h.Qu],Object.getOwnPropertyDescriptor(C.prototype,"close"),C.prototype),C);var j=n(9271);let G=5;s.Z.onReady((()=>{s.Z.wxAppInfo&&s.Z.wxAppInfo.maxWebsocketConnect&&(G=s.Z.wxAppInfo.maxWebsocketConnect)}));const V=o.Z.WSS,H=new WeakMap,z=new WeakMap,Z=new WeakMap,Y={},$=new D.Q;let q=0,Q=0;function J(e,t,n){t.errMsg=t.errMsg||"ok";const i="ok"===t.errMsg;(0,c.FE)({name:e,args:n,success:i,errMsg:t.errMsg})}class X{constructor(e,t){this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING,Object.defineProperty(this,"__socketInstance__",{value:e,writable:!1,configurable:!1,enumerable:!1});const n=q++,i=new V;H.set(this,t),z.set(this,i),Z.set(this,n);const r=Date.now();i.onopen=(e,i)=>{this.readyState!==this.CLOSED&&(Q++,this.readyState=this.OPEN,$.emit(`${n}open`,{header:e,profile:i}),$.emit("onSocketOpen",{header:e,profile:i},this),(0,O.P)("connectSocket",t.url,1,Date.now()-r,"","",t.__skipDomainCheck__,0,0,i))},i.onclose=(e,t)=>{Q--,this.readyState=this.CLOSED,$.emit(`${n}close`,{code:e,reason:t}),$.emit("onSocketClose",{code:e,reason:t},this)},i.onmessage=e=>{this.readyState!==this.CLOSED&&((0,P.eP)(e)&&(e.__proto__=ArrayBuffer.prototype),$.emit(`${n}message`,{data:e}),$.emit("onSocketMessage",{data:e},this))},i.onerror=(e,t)=>{Q--,this.readyState=this.CLOSED,setTimeout((()=>{$.emit(`${n}error`,{errCode:e,errMsg:t}),$.emit("onSocketError",{errCode:e,errMsg:t},this)}),0)};const o=()=>{const e={errMsg:""};Q>=G?(this.readyState=this.CLOSED,e.errMsg=`fail reach max websocket connect count ${G}`):(e.errMsg=i.connect((0,p.v7)(t,["url","header","timeout","protocols","tcpNoDelay","perMessageDeflate","enableProfile"])),"string"==typeof e.errMsg&&""!==e.errMsg||(e.errMsg="ok")),e.errMsg,"ok"===e.errMsg&&(Y[n]=this),J("connectSocket",e,t)};(0,P.mf)(t.customCheck)?t.customCheck(t,(e=>{e?J("connectSocket",{errMsg:e},t):o()})):(o(),(0,j.k)({api:"websocket",url:t.url}).then((e=>{if(t.url,!(t.__skipDomainCheck__||e.isInDomainList||e.isInLAN&&!e.isLocalHost))throw new Error("fail:url not in domain list")})).catch((e=>{this.readyState=this.CLOSED;const t=e.message||e.errMsg;$.emit(`${n}error`,{errMsg:t}),$.emit("onSocketError",{errMsg:t},this)})))}send(e={}){const t={errMsg:z.get(this).send(e.data)};(e.success||e.fail||e.complete)&&J("sendSocketMessage",t,e)}close(e={}){this.readyState;J("closeSocket",{errMsg:z.get(this).close((0,P.hj)(e.code)?e.code:1e3,e.reason)},e)}onOpen(e){$.on(`${Z.get(this)}open`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onOpen callback function"))}onClose(e){$.on(`${Z.get(this)}close`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onClose callback function"))}onMessage(e){$.on(`${Z.get(this)}message`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onMessage callback function"))}onError(e){$.on(`${Z.get(this)}error`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onError callback function"))}}var K=n(5014);let ee=W,te=B;n.g.__isAppServiceRemoteDebugMode__||o.Z.WSS&&s.Z.onReady((()=>{let e=!1;const t=a.cj?"clicfg_appbrand_ios_native_socket_wcwss":1;1===t?e=!0:(0,f.b)({experimentId:t,experimentType:"Expt",success:t=>{t&&1===Number(t.testConfig)&&(e=!0)}});const n=(0,K.J)("bindingWebSocket");(e||n)&&(ee=X,te=Y)}));const ne=new WeakMap,ie={};function re(e,t){return ie[t]||(ie[t]=new WeakMap,F.on(`onSocket${t}`,oe(t)),$.on(`onSocket${t}`,oe(t))),function(n){(0,c.r3)(`onSocket${t}`,n,h.ZT)&&ie[t].set(e,n)}}function oe(e){return function(t,n){const i=n.__socketInstance__,r=ie[e].get(i),o=ne.get(i);r&&n===o&&__errorTracer__.surroundThirdByTryCatch(r,`at onSocket${e} callback function`)(t)}}const ae=(e={})=>{e=Object.assign({__skipDomainCheck__:!1},e);const t={};return{connectSocket(n){if(!(0,c.r3)("connectSocket",n,{url:""}))return;if(!1===(0,v.mQ)(n.url,"websocket"))return void(0,c.YG)("request",n,`invalid url "${n.url}"`);"object"!=typeof n.header&&void 0!==n.header&&delete n.header;let i={};n.header&&(i=(0,v.Nf)(n.header)),n.__skipDomainCheck__=e.__skipDomainCheck__;try{const e=ne.get(t),r=new ee(t,Object.assign({},n,{header:i}));return e&&e.readyState!==e.CLOSED?e.readyState:ne.set(t,r),r}catch(e){return e.message,void(0,c.YG)("connectSocket",n,e.message)}},closeSocket(e){const n=ne.get(t);n&&n.readyState!==n.CLOSED?(n.readyState=n.CLOSED,n.close(e)):(0,c.YG)("closeSocket",e,"WebSocket is not connected");for(const e in te){const i=te[e];i.__socketInstance__===t&&(i.readyState=i.CLOSED,i!==n&&i.close())}},sendSocketMessage(e){const n=ne.get(t);n&&n.readyState===n.OPEN?n.send(e):(0,c.YG)("sendSocketMessage",e,"WebSocket is not connected")},onSocketOpen:re(t,"Open"),onSocketClose:re(t,"Close"),onSocketMessage:re(t,"Message"),onSocketError:re(t,"Error")}},se=ae(),ce=()=>ae({__skipDomainCheck__:!0});var le=n(6052),ue=n(5274);class de extends Error{constructor(e){super(`APP-SERVICE-SDK:${e}`),this.type="AppServiceSdkKnownError"}}let he=0;const pe=function(e){if(!Array.isArray(e))return[];return e.filter((e=>"string"==typeof e&&!e.startsWith("__plugins__")))},fe={setStorage:e=>{if((0,c.r3)("setStorage",e,{key:""}))try{const{data:t,dataType:n}=(0,h.op)(e.data);(0,c.IN)("setStorage",{key:e.key,data:t,dataType:n,storageId:he,success:e.success,fail:e.fail,complete:e.complete})}catch(t){"function"==typeof e.fail&&e.fail({errMsg:`setStorage:fail ${t.message}`}),"function"==typeof e.complete&&e.complete({errMsg:`setStorage:fail ${t.message}`})}},setStorageSync:(e,t="")=>{if(!(0,c.r3)("setStorage",e,""))return;const n=a.cj?"setStorage":"setStorageSync",{data:i,dataType:r}=(0,h.op)(t);let o=!1,s="";if((0,c.IN)(n,{key:e,data:i,dataType:r,storageId:he,fail(e={}){o=!0,s=e.errMsg.replace("setStorage:","setStorageSync:")}}),o)throw new de(s)},getStorage:e=>{(0,c.r3)("getStorage",e,{key:""})&&(0,c.IN)("getStorage",Object.assign({},e,{storageId:he}),{beforeSuccess:e=>{e.data=(0,h.Yt)(e.data,e.dataType),delete e.dataType},checkNeedReportFail:e=>-1===e.errMsg.indexOf("data not found")})},getStorageSync:e=>{if(!(0,P.HD)(e))return;const t=a.cj?"getStorage":"getStorageSync";let n;return(0,c.IN)(t,{key:e,storageId:he},{beforeAll:(e={})=>{n=(0,h.Yt)(e.data,e.dataType)},checkNeedReportFail:e=>-1===e.errMsg.indexOf("data not found")}),n},getStorageInfo:e=>{(0,c.IN)("getStorageInfo",Object.assign({},e,{storageId:he}),{beforeAll:e=>{e.keys=pe(e.keys)}})},getStorageInfoSync:()=>{let e;return(0,c.IN)("getStorageInfoSync",{storageId:he},{beforeAll:t=>{e=t,t.keys=pe(t.keys),delete t.errMsg}}),e},removeStorage:e=>{(0,c.r3)("removeStorage",e,{key:""})&&(0,c.IN)("removeStorage",Object.assign({},e,{storageId:he}))},removeStorageSync:e=>{(0,c.r3)("removeStorageSync",e,"")&&(0,c.IN)("removeStorageSync",{key:e,storageId:he})},clearStorage:e=>{(0,c.IN)("clearStorage",Object.assign({},e,{storageId:he}))},clearStorageSync:()=>{const e=a.cj?"clearStorage":"clearStorageSync";(0,c.IN)(e,{storageId:he})}},ge={app:0,game:0,opendata:1,singlePage:2},_e=e=>{const t=ge[e],n={};return Object.keys(fe).forEach((e=>{const i=fe[e];n[e]=(...e)=>(he=t,i(...e))})),n},me={app:_e("app"),game:_e("game"),opendata:_e("opendata"),singlePage:_e("singlePage")};var ye=n(7477),ve=n(3170);var Ae=n(6998);let be=!1;const we=(0,l.s)("accelerometerChange"),Ee=we.onMethod,Te=we.offMethod;(0,c.jQ)("onAccelerometerChange",((e={})=>{s.Z.clientVersion>=369558016&&s.Z.clientVersion<369558272&&(e.x&&(e.x/=180/Math.PI),e.y&&(e.y/=180/Math.PI),e.z&&(e.z/=180/Math.PI)),we.emit(e)}));let Se=!1;const Ce=(0,l.s)("compassChange"),Ie=Ce.onMethod,xe=Ce.offMethod;(0,c.jQ)("onCompassChange",((e={})=>{Ce.emit(e)}));var De=n(2851);var Oe=n(3536);const Pe=__safeway__.apiSign.makeApiSign;var Re=n(8176);var ke,Ne=n(8159);const Me=(e,t)=>Object.assign({},e,{[t]:(0,v.sM)(e[t])}),Le=new Ne.Z,Be=new WeakMap,Fe=new WeakMap,Ue=function(e,t){const n=`${Be.get(this)}_on${e}`,i=n=>{__errorTracer__.surroundThirdByTryCatch(t,`at BLEPeripheralServer.on${e} callback function`)(n)};Fe.get(this).set(t,i),Le.on(n,i)},We=function(e,t){const n=`${Be.get(this)}_on${e}`,i=Fe.get(this);if((0,P.mf)(t)){const e=i.get(t);(0,P.mf)(e)&&(i.delete(t),Le.off(n,e))}else Fe.set(this,new WeakMap),Le.removeAllListeners(n)},je=(0,l.s)("CharacteristicReadRequest");je.onMethod,je.offMethod;(0,c.jQ)("onCharacteristicReadRequest",((e={})=>{Le.emit(`${e.serverId}_onCharacteristicReadRequest`,e),je.emit(e)}));const Ge=(0,l.s)("CharacteristicWriteRequest");Ge.onMethod,Ge.offMethod;(0,c.jQ)("onCharacteristicWriteRequest",((e={})=>{"string"==typeof e.value&&(e.value=(0,v.RG)(e.value)),Le.emit(`${e.serverId}_onCharacteristicWriteRequest`,e),Ge.emit(e)}));const Ve=(0,l.s)("CharacteristicSubscribed");Ve.onMethod,Ve.offMethod;(0,c.jQ)("onCharacteristicSubscribed",((e={})=>{Le.emit(`${e.serverId}_onCharacteristicSubscribed`,e),Ve.emit(e)}));const He=(0,l.s)("CharacteristicUnsubscribed");He.onMethod,He.offMethod;(0,c.jQ)("onCharacteristicUnsubscribed",((e={})=>{Le.emit(`${e.serverId}_onCharacteristicUnsubscribed`,e),He.emit(e)}));let ze=(ke=class{constructor(e){this.serverId=e,this.services=[],Be.set(this,e),Fe.set(this,new WeakMap);["CharacteristicReadRequest","CharacteristicWriteRequest","CharacteristicSubscribed","CharacteristicUnsubscribed"].forEach((e=>{this[`on${e}`]=t=>{Ue.call(this,e,t)},this[`off${e}`]=t=>{We.call(this,e,t)}}))}close(e={}){const t=this,n=Object.assign({},e,{serverId:this.serverId});(0,c.IN)("closeBLEPeripheralServer",n,{beforeSuccess(){t.serverId="",Be.delete(t)}})}addService(e={}){if(!(0,c.r3)("BLEPeripheralServer.addService",e,{service:{}}))return;let t=e.service.characteristics||[];t=t.map((e=>{let t=e.descriptors||[];return t=t.map((e=>Me(e,"value"))),Object.assign({},e,{value:(0,v.sM)(e.value),descriptors:t})}));const n=Object.assign({},e,{serverId:this.serverId,service:{uuid:e.service.uuid,characteristics:t}}),i=this;(0,c.IN)("addBLEPeripheralService",n,{beforeSuccess(){i.services.push(e.service.uuid)}})}removeService(e={}){if(!(0,c.r3)("BLEPeripheralServer.removeService",e,{serviceId:""}))return;const t=this,n=Object.assign({},e,{serverId:this.serverId});(0,c.IN)("removeBLEPeripheralService",n,{beforeSuccess(){const n=t.services.indexOf(e.serviceId);n>=0&&t.services.splice(n,1)}})}startAdvertising(e={}){const t=e.advertiseRequest||{};let n=t.manufacturerData||[];n=n.map((e=>Me(e,"manufacturerSpecificData")));const i=Object.assign({},t,{manufacturerData:n}),r=Object.assign({},e,{serverId:this.serverId,advertiseRequest:i,powerLevel:e.powerLevel||"medium"});(0,c.IN)("startBLEPeripheralAdvertising",r,{})}stopAdvertising(e={}){const t=Object.assign({},e,{serverId:this.serverId});(0,c.IN)("stopBLEPeripheralAdvertising",t,{})}writeCharacteristicValue(e={}){const t=Object.assign({},e,{serverId:this.serverId,value:(0,v.sM)(e.value)});(0,c.IN)("writeBLEPeripheralCharacteristicValue",t,{})}},x()(ke.prototype,"close",[h.Qu],Object.getOwnPropertyDescriptor(ke.prototype,"close"),ke.prototype),x()(ke.prototype,"addService",[h.Qu],Object.getOwnPropertyDescriptor(ke.prototype,"addService"),ke.prototype),x()(ke.prototype,"removeService",[h.Qu],Object.getOwnPropertyDescriptor(ke.prototype,"removeService"),ke.prototype),x()(ke.prototype,"startAdvertising",[h.Qu],Object.getOwnPropertyDescriptor(ke.prototype,"startAdvertising"),ke.prototype),x()(ke.prototype,"stopAdvertising",[h.Qu],Object.getOwnPropertyDescriptor(ke.prototype,"stopAdvertising"),ke.prototype),x()(ke.prototype,"writeCharacteristicValue",[h.Qu],Object.getOwnPropertyDescriptor(ke.prototype,"writeCharacteristicValue"),ke.prototype),ke);const Ze=(0,l.s)("BLEPeripheralConnectionStateChanged"),Ye=Ze.onMethod,$e=Ze.offMethod;(0,c.jQ)("onBLEPeripheralConnectionStateChanged",((e={})=>{Ze.emit(e)}));var qe=n(3525);const Qe=(0,l.s)("local-service-found"),Je=(0,l.s)("local-service-lost"),Xe=(0,l.s)("local-service-discovery"),Ke=(0,l.s)("local-service-resolve-fail");(0,qe.jQ)("onLocalServiceEvent",(e=>{const t=Object.assign({},e);switch("object"==typeof t.attributes&&null!==t.attributes&&Object.keys(t.attributes).forEach((e=>{const n=t.attributes[e];t.attributes[e]=(0,v.RG)(n)})),delete t.event,e.event){case"found":Qe.emit(t);break;case"lost":Je.emit(t);break;case"stopScan":delete t.serviceType,delete t.serviceName,delete t.ip,delete t.port,Xe.emit(t);break;case"resolveFail":delete t.ip,delete t.port,Ke.emit(t)}}));const et=Qe.onMethod,tt=Qe.offMethod,nt=Je.onMethod,it=Je.offMethod,rt=Xe.onMethod,ot=Xe.offMethod,at=Ke.onMethod,st=Ke.offMethod,ct=(0,l.s)("gyroscopeChange"),lt=ct.onMethod,ut=ct.offMethod;(0,c.jQ)("onGyroscopeChange",(e=>{ct.emit(e)}));const dt=(0,l.s)("deviceMotionChange"),ht=dt.onMethod,pt=dt.offMethod;(0,c.jQ)("onDeviceMotionChange",(e=>{dt.emit(e)}));let ft=null;o.Z&&o.Z.WXAUDIO?ft=o.Z.WXAUDIO:o.Z&&o.Z.AudioContext?ft=o.Z.AudioContext:"undefined"!=typeof AudioContext?ft=AudioContext:"undefined"!=typeof webkitAudioContext&&(ft=webkitAudioContext);const gt=ft;var _t=n(3270),mt=n(7657);let yt;const vt=new WeakMap,At=new WeakMap,bt=new WeakMap,wt=new WeakMap,Et=new WeakMap,Tt=new WeakMap,St=new WeakMap,Ct=new WeakMap,It=new WeakMap,xt=new WeakMap,Dt=new WeakMap,Ot={},Pt=(0,p.Fr)(m.a),Rt=(0,p.Fr)(_t.p),kt=e=>Rt({filePath:e}).then((e=>e.data)),Nt=e=>Pt({url:e,responseType:"arraybuffer",enableHttp2:!0,enableCache:!0}).then((e=>e.data)),Mt=e=>new Promise((t=>{(0,mt.V)([e],"audio",(e=>{t(Nt(e.data[0].url))}))})),Lt=function(e){vt.set(this,Object.assign(vt.get(this),e))},Bt=function(e){return vt.get(this)[e]},Ft=function(){return vt.get(this)},Ut=function(){this.stop(!0),Lt.call(this,{_source:null});const e=bt.get(this);e&&e()},Wt=function(e){const t=yt.createBufferSource(),{currentPlayBackTime:n,state:i}=jt.call(this,e),{loop:r,playbackRate:o,_buffer:a,_gainNode:s}=i,c=Ut.bind(this);t.onended=c,t.buffer=a,t.loop=r,t.playbackRate.value=o,s&&t.connect(s),t.start(0,n),yt.resume(),Lt.call(this,{_isPlaying:!0,paused:!1,_source:t,_played:!0,_playbackTime:0,_lastCurrentTime:n,_startedAt:yt.currentTime,_endedHandler:c})},jt=function(e){e=e||Ft.call(this);const{_startedAt:t,_playbackTime:n,_isPlaying:i,playbackRate:r,_lastCurrentTime:o,duration:a}=e;let s;return s=i?o+(yt.currentTime-t)*r:n,s>a&&(s%=a),{currentPlayBackTime:s,state:e}},Gt=function(){this.stop(!0);const{_gainNode:e}=Ft.call(this);e&&e.disconnect(),Lt.call(this,{_buffer:null,_source:null,_loadPromise:null,_gainNode:null,_audioLoadPromiseResolve:null}),At.delete(this),bt.delete(this),wt.delete(this),Et.delete(this),St.delete(this),Tt.delete(this),Ct.delete(this),It.delete(this),Dt.delete(this),clearInterval(xt.get(this)),xt.delete(this)},Vt=function(){this.stop(!0),Lt.call(this,{_buffer:null,_source:null,_loadPromise:null,_audioLoadPromiseResolve:null})},Ht=function(e){let t;Vt.call(this);const n=new Promise((e=>{t=e}));Lt.call(this,{src:e,_ready:!1,_played:!1,_loadPromise:n,_audioLoadPromiseResolve:t})};class zt{constructor(){yt||(yt=new gt,"function"==typeof yt.create&&yt.create());const e=yt.createGain();e.connect(yt.destination);const t={},n=new Promise((e=>{t._audioLoadPromiseResolve=e}));vt.set(this,Object.assign(t,{startTime:0,autoplay:!1,loop:!1,volume:1,playbackRate:1,paused:!1,duration:NaN,_loadPromise:n,_gainNode:e,_played:!1,_playbackTime:0,_ready:!1,_isPlaying:!1,src:""}))}get src(){return Bt.call(this,"src")}set src(e){const{src:t}=Ft.call(this);"string"==typeof e&&e.length>0&&t!==e&&(t&&Ht.call(this,e),Lt.call(this,{src:e}),(e=>{const t=Ot[e];if(t&&t.audioBuffer)return Promise.resolve(t.audioBuffer);if(t&&t.loadPromise)return t.loadPromise;let n;n=/^(http|https):\/\//.test(e)?Nt(e):/^(cloud):\/\//.test(e)?Mt(e):kt(e);const i=n.then((t=>new Promise(((n,i)=>{yt.decodeAudioData(t,(t=>{const i=Ot[e];i.audioBuffer||(i.audioBuffer=t),n(i.audioBuffer)}),i)}))));return Ot[e]={loadPromise:i},i})(e).then((e=>{const t=Ft.call(this),n=At.get(this),{_isPlaying:i,autoplay:r,_audioLoadPromiseResolve:o}=t;return Lt.call(this,{_ready:!0,_buffer:e,duration:e.duration}),n&&n(),r&&!i&&this.play(),o(),null})).catch((t=>{const n=wt.get(this);n&&n({type:"error",errMsg:`set audio src ${e} fail: ${t.message}`})})))}get startTime(){return Bt.call(this,"startTime")}set startTime(e){const{_played:t,startTime:n}=Ft.call(this);e!==n&&"number"==typeof e&&e>=0&&(Lt.call(this,{startTime:e}),t||this.seek(e))}get autoplay(){return Bt.call(this,"autoplay")}set autoplay(e){const{autoplay:t}=Ft.call(this);if(!!e!==t&&(Lt.call(this,{autoplay:!!e}),e)){const{_loadPromise:e}=Ft.call(this);e.then((()=>{const e=Ft.call(this),{_isPlaying:t,autoplay:n,_source:i}=e;return i&&!t&&n&&this.play(),null}))}}get loop(){return Bt.call(this,"loop")}set loop(e){const t=Bt.call(this,"_source");Lt.call(this,{loop:e=!!e}),t&&(t.loop=e)}get volume(){return Bt.call(this,"volume")}set volume(e){const{volume:t,_gainNode:n}=Ft.call(this);"number"==typeof e&&e>=0&&e<=1&&e!==t&&(Lt.call(this,{volume:e}),n&&n.gain&&(n.gain.value=e))}get playbackRate(){return Bt.call(this,"playbackRate")}set playbackRate(e){const{playbackRate:t,_source:n}=Ft.call(this);"number"==typeof e&&t!==e&&e>=.5&&e<=2&&(Lt.call(this,{playbackRate:e,_lastCurrentTime:this.currentTime,_startedAt:yt.currentTime}),n&&(n.playbackRate.value=e))}get duration(){return Bt.call(this,"duration")}get currentTime(){const{currentPlayBackTime:e}=jt.call(this);return e}get paused(){return Bt.call(this,"paused")}get buffered(){const{duration:e}=Ft.call(this);return e>0?e:0}play(e=!1){const t=Ft.call(this),{_isPlaying:n,_ready:i,_loadPromise:r}=t;if(n)return;const o=()=>e?null:Et.get(this);if(i){Wt.call(this,t);const e=o();e&&e()}else r.then((()=>{Wt.call(this);const e=o();return e&&e(),null}))}pause(){const e=Ft.call(this),{_isPlaying:t,_source:n}=e;if(n&&t){const e=Tt.get(this);n.stop(0),n.disconnect(),n.onended=null,Lt.call(this,{_isPlaying:!1,_playbackTime:this.currentTime,paused:!0,_endedHandler:null}),e&&e()}}stop(e=!1){const{_source:t}=Ft.call(this);if(t){const n=St.get(this);t.stop(0),t.disconnect(),t.onended=null,Lt.call(this,{_isPlaying:!1,_playbackTime:0,paused:!0,_endedHandler:null}),!e&&n&&n()}}seek(e){if("number"==typeof e&&e>=0){const{_isPlaying:t}=Ft.call(this),n=Ct.get(this),i=It.get(this),r=At.get(this);i&&i(),t?(this.stop(!0),Lt.call(this,{_playbackTime:e}),this.play(!0)):Lt.call(this,{_playbackTime:e}),n&&n(),r&&r()}}destroy(){Gt.call(this)}set oncanplay(e){"function"==typeof e?At.set(this,e):At.delete(this)}set onended(e){"function"==typeof e?bt.set(this,e):bt.delete(this)}set onerror(e){"function"==typeof e?wt.set(this,e):wt.delete(this)}set onplay(e){"function"==typeof e?Et.set(this,e):Et.delete(this)}set onpause(e){"function"==typeof e?Tt.set(this,e):Tt.delete(this)}set onstop(e){"function"==typeof e?St.set(this,e):St.delete(this)}set onseeked(e){"function"==typeof e?Ct.set(this,e):Ct.delete(this)}set onseeking(e){"function"==typeof e?It.set(this,e):It.delete(this)}set ontimeupdate(e){if("function"==typeof e){const t=xt.get(this);clearInterval(t);const n=setInterval((()=>{const{_isPlaying:t}=Ft.call(this);t&&e()}),350);xt.set(this,n)}else xt.delete(this)}set onwaiting(e){"function"==typeof e?Dt.set(this,e):Dt.delete(this)}}const Zt=["src","startTime","autoplay","loop","obeyMuteSwitch","volume","playbackRate","duration","currentTime","paused","buffered","referrerPolicy"],Yt=["startTime","duration","currentTime"],$t=["Canplay","Ended","Error","Pause","Play","Seeked","Seeking","Stop","TimeUpdate","Waiting"],qt=new Set,Qt=new WeakMap,Jt=new WeakMap,Xt=new WeakMap,Kt=new WeakMap;class en{constructor(e,t=1e3){const n=new Ne.Z;Qt.set(this,e),qt.add(this),Kt.set(this,{conversion:t}),Zt.forEach((n=>Object.defineProperty(this,n,{get:()=>Yt.includes(n)?e[n]/t:e[n],set(i){Yt.includes(n)?e[n]=t*i:e[n]=i}}))),$t.forEach((t=>{this["on"+t]=e=>{const i=__errorTracer__.surroundThirdByTryCatch(e,`at audioContext.on${t} callback function`);Jt.set(e,i),Xt.set(i,e),n.on(t,i)},this["off"+t]=e=>{if((0,P.mf)(e)){const i=Jt.get(e);(0,P.mf)(i)&&(n.off(t,i),Jt.delete(e),Xt.delete(i))}else n.listeners(t).forEach((e=>{const t=Xt.get(e);Jt.delete(t),Xt.delete(e)})),n.removeAllListeners(t)},e["on"+t.toLowerCase()]=(e,i)=>{e?n.emit(t,{errCode:e,errMsg:i}):n.emit(t)}}))}play(){Qt.get(this).play()}stop(){Qt.get(this).stop()}pause(){Qt.get(this).pause()}seek(e){const{conversion:t}=Kt.get(this);Qt.get(this).seek(t*e)}destroy(){const e=Qt.get(this);e.destroy&&e.destroy(),$t.forEach((e=>{this["off"+e]()})),qt.delete(this),Qt.delete(this)}static pauseAllAudio(){qt.forEach((e=>{const t=Qt.get(e);t&&t.pause()}))}}class tn extends en{constructor(){super(new o.Z.Audio,1e3)}}class nn extends en{constructor(){super(new zt,1)}}var rn=n(9978);const on=new Ne.Z,an={8e3:[16e3,48e3],11025:[16e3,48e3],12e3:[24e3,64e3],16e3:[24e3,96e3],22050:[32e3,128e3],24e3:[32e3,128e3],32e3:[48e3,192e3],44100:[64e3,32e4],48e3:[64e3,32e4]};(0,c.jQ)("onRecorderStateChange",((e={})=>{const{state:t}=e;delete e.state,on.emit(`onRecorderStateChange_${t}`,e)}));const sn=e=>{(0,c.IN)("operateRecorder",Object.assign({},e))},cn={start(e={}){const t=Object.assign({format:"aac",sampleRate:8e3,encodeBitRate:48e3,numberOfChannels:2,audioSource:"auto"},e);if(-1===Object.keys(an).map((e=>parseInt(e,10))).indexOf(t.sampleRate))throw new Error(`invalid sampleRate "${t.sampleRate}", sampleRate should be one of ${JSON.stringify(Object.keys(an))}`);if(t.encodeBitRate>an[t.sampleRate][1]||t.encodeBitRate<an[t.sampleRate][0])throw new Error(`invalid encodeBitRate "${t.encodeBitRate}", encodeBitRate should be greater than ${an[t.sampleRate][0]} and less than ${an[t.sampleRate][1]}`);t.operationType="start",t.fail=e=>{on.emit("onRecorderStateChange_error",e)},sn(t)},pause(){sn({operationType:"pause",fail(e){on.emit("onRecorderStateChange_error",e)}})},resume(){sn({operationType:"resume",success(){on.emit("onRecorderStateChange_resume")},fail(e){on.emit("onRecorderStateChange_error",e)}})},stop(){sn({operationType:"stop",fail(e){on.emit("onRecorderStateChange_error",e)}})},onStart(e){on.removeAllListeners("onRecorderStateChange_start"),on.on("onRecorderStateChange_start",(()=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onResume(e){on.removeAllListeners("onRecorderStateChange_resume"),on.on("onRecorderStateChange_resume",(()=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onResume callback function")()}))},onPause(e){on.removeAllListeners("onRecorderStateChange_pause"),on.on("onRecorderStateChange_pause",(()=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onStop(e){on.removeAllListeners("onRecorderStateChange_stop"),on.on("onRecorderStateChange_stop",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onStop callback function")(t)}))},onFrameRecorded(e){on.removeAllListeners("onRecorderStateChange_frameRecorded"),on.on("onRecorderStateChange_frameRecorded",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onFrameRecorded callback function")(t)}))},onError(e){on.removeAllListeners("onRecorderStateChange_error"),on.on("onRecorderStateChange_error",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onError callback function")(t)}))},onInterruptionBegin(e){on.removeAllListeners("onRecorderStateChange_interruptionBegin"),on.on("onRecorderStateChange_interruptionBegin",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionBegin callback function")(t)}))},onInterruptionEnd(e){on.removeAllListeners("onRecorderStateChange_interruptionEnd"),on.on("onRecorderStateChange_interruptionEnd",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionEnd callback function")(t)}))}},ln=wxNativeConsole.createLogger("MediaAudioPlayerJsApi"),un=new WeakMap;function dn(e,t){un.set(this,Object.assign(un.get(this),{[e]:t})),this.promise.then((()=>{(0,c.IN)("operateAudioPlayer",{operationType:"update",containerId:un.get(this).containerId,[e]:t,success:e=>{ln.log("update audio success",e)},fail:e=>{ln.error("update audio fail",e)}})})).catch((e=>{ln.error("update audio fail",e)}))}class hn{constructor(){un.set(this,{}),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),(0,c.IN)("operateAudioPlayer",{operationType:"create",success:e=>{ln.log("operateAudioPlayer create success",e),un.set(this,Object.assign(un.get(this),{containerId:e.containerId})),this.resolve(e)},fail:e=>{ln.error("operateAudioPlayer create fail",e),this.reject(e)}})}start(){return this.promise.then((()=>new Promise(((e,t)=>{(0,c.IN)("operateAudioPlayer",{operationType:"start",containerId:un.get(this).containerId,success:t=>{ln.log("operateAudioPlayer start success",t),e(t)},fail:e=>{ln.error("operateAudioPlayer start fail",e),t(e)}})}))))}addAudioSource(e){return this.promise.then((()=>new Promise(((t,n)=>{(0,c.IN)("operateAudioPlayer",{operationType:"addTask",containerId:un.get(this).containerId,taskId:e.videoDecoderId,success:e=>{ln.log("addAudioSource addTask success",e),t(e)},fail:e=>{ln.error("addAudioSource addTask fail",e),n(e)}})}))))}removeAudioSource(e){return this.promise.then((()=>new Promise(((t,n)=>{(0,c.IN)("operateAudioPlayer",{operationType:"delTask",containerId:un.get(this).containerId,taskId:e.videoDecoderId,success:e=>{ln.log("removeAudioSource delTask success",e),t(e)},fail:e=>{ln.error("removeAudioSource delTask fail",e),n(e)}})}))))}stop(){return this.promise.then((()=>new Promise(((e,t)=>{(0,c.IN)("operateAudioPlayer",{operationType:"stop",containerId:un.get(this).containerId,success:t=>{ln.log("stop audio success",t),e(t)},fail:e=>{ln.log("stop audio fail",e),t(e)}})}))))}destroy(){return this.promise.then((()=>new Promise(((e,t)=>{(0,c.IN)("operateAudioPlayer",{operationType:"remove",containerId:un.get(this).containerId,success:t=>{ln.log("destroy audio success",t),e(t)},fail:e=>{ln.error("destroy audio fail",e),t(e)}}),un.delete(this)}))))}set volume(e){return dn.call(this,"audioVolume",e),e}get volume(){return un.get(this).audioVolume}}const pn=wxNativeConsole.createLogger("MediaAudioPlayerBinding"),fn=new WeakMap;function gn(e,t){fn.set(this,Object.assign(fn.get(this),{[e]:t})),this.promise.then((()=>{o.Z.MediaToolKit.audioUpdate({containerId:fn.get(this).containerId,[e]:t},(e=>{0===e.errCode?pn.log("operateAudioPlayer update success",e):pn.error("operateAudioPlayer update fail",e)}))})).catch((e=>{pn.error("update audio fail",e)}))}class _n{constructor(){fn.set(this,{}),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),pn.log("NativeGlobal.MediaToolKit.audioCreate",o.Z.MediaToolKit.audioCreate),o.Z.MediaToolKit.audioCreate({},(e=>{0===e.errCode?(pn.log("NativeGlobal.MediaToolKit.audioCreate success",e),fn.set(this,Object.assign(fn.get(this),{containerId:e.containerId})),this.resolve(e)):(pn.error("create MediaAudioPlayerBinding fail"),this.reject(e))}))}start(){return this.promise.then((()=>new Promise(((e,t)=>{o.Z.MediaToolKit.audioStart({containerId:fn.get(this).containerId},(n=>{0===n.errCode?(pn.log("operateAudioPlayer start success",n),e(n)):(pn.error("operateAudioPlayer start fail",n),t(n))}))}))))}addAudioSource(e){return this.promise.then((()=>new Promise(((t,n)=>{o.Z.MediaToolKit.audioAddTask({containerId:fn.get(this).containerId,taskId:e.videoDecoderId},(e=>{0===e.errCode?(pn.log("addAudioSource addTask success",e),t(e)):(pn.error("addAudioSource addTask fail",e),n(e))}))}))))}removeAudioSource(e){return this.promise.then((()=>new Promise(((t,n)=>{o.Z.MediaToolKit.audioDelTask({containerId:fn.get(this).containerId,taskId:e.videoDecoderId},(e=>{0===e.errCode?(pn.log("removeAudioSource delTask success",e),t(e)):(pn.error("removeAudioSource delTask fail",e),n(e))}))}))))}stop(){return this.promise.then((()=>new Promise(((e,t)=>{o.Z.MediaToolKit.audioStop({containerId:fn.get(this).containerId},(n=>{0===n.errCode?(pn.log("stop audio success",n),e(n)):(pn.log("stop audio fail",n),t(n))}))}))))}destroy(){return this.promise.then((()=>new Promise(((e,t)=>{o.Z.MediaToolKit.audioRemove({containerId:fn.get(this).containerId},(n=>{0===n.errCode?(pn.log("destroy audio success",n),e(n)):(pn.error("destroy audio fail",n),t(n))})),fn.delete(this)}))))}set volume(e){return gn.call(this,"audioVolume",e),e}get volume(){return fn.get(this).audioVolume}}var mn=n(7618),yn=n(1459);const vn=(0,l.s)("AudioInterruptionBegin"),An=vn.onMethod,bn=vn.offMethod,wn=(vn.internalOnMethod,vn.internalOffMethod,(0,l.s)("AudioInterruptionEnd")),En=wn.onMethod,Tn=wn.offMethod;wn.internalOnMethod,wn.internalOffMethod;let Sn=!1,Cn=!1;(0,c.jQ)("onAudioInterruptionBegin",(e=>{wxNativeConsole.info("onAudioInterruptionBegin"),Sn=!0,!1===Cn&&vn.emit(e)})),(0,c.jQ)("onAudioInterruptionEnd",(e=>{wxNativeConsole.info("onAudioInterruptionEnd"),Sn=!1,!1===Cn&&wn.emit(e)}));const In=()=>Cn;var xn=n(1503),Dn=n.n(xn),On=n(3356),Pn=n.n(On),Rn=n(5542);const kn=new Ne.Z,Nn=new WeakMap,Mn=new WeakMap;(0,c.jQ)("onCanvasPlayerStateChange",(e=>{const t=e.state;"playEnd"===t?kn.emit(e.containerId,{event:"ended",data:{}}):"buffSize"===t?kn.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}}):"error"===t&&kn.emit(e.containerId,{event:"error",data:{message:e.errMsg,code:e.errCode}})}));let Ln=!1;function Bn(e){return Fn.apply(this,arguments)}function Fn(){return(Fn=Pn()((function*(e){const t=Mn.get(e);yield t}))).apply(this,arguments)}function Un(e,t,n={}){return(0,c.bb)("operateCanvasPlayer",Dn()(Dn()({},n),{},{containerId:e.id||0,operationType:t}))}function Wn(e,t,i={}){return new Promise(((r,o)=>{n.g.NativeGlobal.MediaToolKit[t](Dn()(Dn()({},i),{},{containerId:e.id||0}),(e=>{if(0!==e.errCode){const n=new Error(e.errMsg||`${t} failed`);return Object.assign(n,e),void o(n)}r(e)}))}))}function jn(e,t,n){const i=Nn.get(e);i&&i.emit(t,n)}class Gn{constructor(){var e=this;const t=new Ne.Z;Nn.set(this,t);const i=Pn()((function*(){if(a.wZ){a.wZ&&(Ln||(Ln=!0,n.g.NativeGlobal.MediaToolKit.addEventListener("onPlayerBuffSize",(e=>{kn.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}})})),n.g.NativeGlobal.MediaToolKit.addEventListener("onPlayerPlayEnd",(e=>{kn.emit(e.containerId,{event:"ended",data:{}})}))));const t=yield new Promise(((e,t)=>{n.g.NativeGlobal.MediaToolKit.playerCreate({},(n=>{if(0!==n.errCode){const e=new Error(n.errMsg||"create failed");return Object.assign(e,n),void t(e)}e(n)}))}));e.id=t.containerId}else{const t=yield(0,c.bb)("operateCanvasPlayer",{operationType:"create"});e.id=t.containerId}kn.on(e.id,(({event:e,data:n})=>t.emit(e,n)))}))();Mn.set(this,i)}start(e={}){var t=this;return Pn()((function*(){let n;if(yield Bn(t),a.wZ){let i=e.source;if(!e.source||!/^(http|https):\/\/.*/i.test(e.source)){i=(yield(0,c.bb)("private_fileSystemConvert",{operationType:"getAbsolutePath",localId:e.source})).filePath}const r=yield Wn(t,"playerStart",{filePath:i,mode:void 0!==e.mode?e.mode:1,videoFormat:e.videoFormat||55,startStamp:e.startTime,abortAudio:e.abortAudio,abortVideo:e.abortVideo});n=Object.assign({},r.video),t.width=n.width||0,t.height=n.height||0,t.buffer=new ArrayBuffer(t.width*t.height*4),n.video=r.video,n.audio=r.audio}else{const i=yield Un(t,"start",{source:e.source,mode:void 0!==e.mode?e.mode:1,videoFormat:e.videoFormat||55,startStamp:e.startTime,abortAudio:e.abortAudio,abortVideo:e.abortVideo});n=Object.assign({},i.video),t.buffId=i.buffId,t.width=n.width||0,t.height=n.height||0,n.video=i.video,n.audio=i.audio}return jn(t,"start",n),n}))()}seek(e,t="inaccurate"){var n=this;return Pn()((function*(){yield Bn(n);const i="accurate"===t;return a.wZ?yield Wn(n,"playerSeek",{seekStamp:e,seekByStamp:i}):yield Un(n,"seek",{seekStamp:e,seekByStamp:i}),jn(n,"seek",{position:e}),e}))()}wait(e=!1){var t=this;return Pn()((function*(){yield Bn(t),a.wZ?yield Wn(t,"playerWait",{wait:e}):yield Un(t,"wait",{wait:e}),jn(t,"wait",{})}))()}stop(){var e=this;return Pn()((function*(){yield Bn(e),a.wZ?yield Wn(e,"playerStop",{}):yield Un(e,"stop",{}),jn(e,"stop",{})}))()}remove(){var e=this;return Pn()((function*(){if(yield Bn(e),e.id){kn.removeAllListeners(e.id);const t=Nn.get(e);t.eventNames().forEach((e=>t.removeAllListeners(e)))}a.wZ?yield Wn(e,"playerRemove",{}):yield Un(e,"remove",{})}))()}getFrameData(){let e,t,i,r,o,s;if(a.wZ?n.g.NativeGlobal.MediaToolKit.playerGetFrame({containerId:this.id,buffer:this.buffer},(n=>{n.got&&(e=this.buffer),t=n.pts,i=n.pk_pts,r=n.dts,o=n.pk_dts})):(0,c.IN)("operateCanvasPlayer",{operationType:"getFrame",containerId:this.id,success:n=>{n.got&&(e=Rn.Z.get(this.buffId),e&&(e.__proto__=ArrayBuffer.prototype)),t=n.pts,i=n.pk_pts,r=n.dts,o=n.pk_dts},fail(e){s=new Error(e.errMsg&&e.errMsg.replace(/operateCanvasPlayer/g,"getFrameData")),Object.assign(s,e)}}),s)throw s;return e?{width:this.width,height:this.height,data:e,pts:t,pkPts:i,dts:r,pkDts:o}:null}on(e,t){Nn.get(this).on(e,t)}off(e,t){Nn.get(this).off(e,t)}get videoDecoderId(){return this.id}}var Vn=n(946);const Hn=new WeakMap,zn=new WeakMap,Zn=new WeakMap,Yn=new WeakMap,$n=new WeakMap,qn=new WeakMap,Qn=new WeakMap,Jn=new Map,Xn=new Map;o.Z.EventHandler&&(o.Z.EventHandler.onbindingobjectdestruct=e=>{const t=Xn[e];t&&(0,c.IN)("getAudioState",{audioId:t,success(e){!0===e.paused?(Jn.delete(t),(0,c.IN)("destroyAudioInstance",{audioId:t})):Jn.get(t)&&!1===Jn.get(t).loop&&ri.once(`${t}_onAudioStateChange_ended`,(()=>{Jn.delete(t),(0,c.IN)("destroyAudioInstance",{audioId:t})}))}})});const Kn=function(e,t){zn.set(this,Object.assign(zn.get(this),{[e]:t})),"src"===e&&zn.set(this,Object.assign(zn.get(this),{paused:!0})),Yn.get(this)&&(setTimeout((()=>{const n=Object.assign({},zn.get(this),$n.get(this),{timestamp:Date.now(),audioId:Hn.get(this),success:()=>{zn.set(this,Object.assign(zn.get(this),{[e]:t}))},fail:()=>{ti.call(this)}});In()&&(n.autoplay=!1),(0,c.IN)("setAudioState",n),Yn.set(this,!0)}),0),Yn.set(this,!1)),$n.set(this,Object.assign($n.get(this),{[e]:t}))},ei=function(e,t){Qn.get(this).then((()=>{Kn.call(this,e,t)}))},ti=function(e,t){let n=zn.get(this)[e];return(0,c.IN)("getAudioState",{audioId:Hn.get(this),success:i=>{delete i.errMsg,zn.set(this,Object.assign(zn.get(this),i)),n=i[e],"function"==typeof t&&t(n)}}),n},ni=function(e){const t=Hn.get(this);(0,c.IN)("operateAudio",Object.assign({timestamp:Date.now(),audioId:t,fail({errMsg:e}){li("error",{errMsg:e,errCode:-1})}},e))},ii=function(e){Qn.get(this).then((()=>{setTimeout((()=>{ni.call(this,e)}),0)}))},ri=new Ne.Z;(0,c.jQ)("onAudioStateChange",((e={})=>{e.state=e.state.toLowerCase();const{state:t,audioId:n}=e;delete e.audioId,delete e.state;const i="play"!==t,r=Jn.get(n);r&&(r.paused=i),(0,c.IN)("getAudioState",{audioId:n,success(){t}}),ri.emit(`${n}_onAudioStateChange_${t}`,e)}));const oi=function(e,t){const n=`${Hn.get(this)}_onAudioStateChange_${e}`,i=n=>{__errorTracer__.surroundThirdByTryCatch(t,`at audioContext.on${e} callback function`)(n)};qn.set(t,i),ri.on(n,i)},ai=function(e,t){Qn.get(this).then((()=>{oi.call(this,e,t)}))},si=function(e,t){const n=`${Hn.get(this)}_onAudioStateChange_${e}`;if((0,P.mf)(t)){const e=qn.get(t);(0,P.mf)(e)&&ri.off(n,e)}else ri.removeAllListeners(n)},ci=function(e,t){Qn.get(this).then((()=>{si.call(this,e,t)}))},li=function(e,t){ri.emit(`${Hn.get(this)}_onAudioStateChange_${e}`,t)};let ui=0,di=!1;const hi=class{constructor({async:e=!0}={}){let t,n;zn.set(this,{}),$n.set(this,{}),Zn.set(this,void 0),Yn.set(this,!0),Qn.set(this,new Vn.Q(((e,i)=>{t=e,n=i}))),(0,c.IN)(a.wZ&&(0,p.aI)()&&s.Z.clientVersion>=654315008&&e||a.jP?"createAudioInstanceAsync":"createAudioInstance",{timestamp:Date.now(),success:e=>{const n={src:"",startTime:0,paused:!0,currentTime:0,duration:0,obeyMuteSwitch:!0,volume:1,autoplay:!1,loop:!1,buffered:0,referrerPolicy:""};if(Jn.set(e.audioId,n),Hn.set(this,e.audioId),zn.set(this,n),o.Z.BindingObject){const t=new o.Z.BindingObject;this.__bindingObject=t,Xn[t.__id]=e.audioId}ui+=1,++ui>=1024&&!di&&a.cj&&(di=!0,Reporter.reportIDKey({id:356,key:"audioInstancesCountReach1024"})),setTimeout(t,0)},fail:e=>{n(e.errMsg)}}),["Play","Pause","Stop","Canplay","Error","Ended","Waiting","Seeking","Seeked"].forEach((e=>{this[`on${e}`]=t=>{ai.call(this,e.toLowerCase(),t)},this[`off${e}`]=t=>{ci.call(this,e.toLowerCase(),t)}}))}get src(){return this.cloudId?this.cloudId:ti.call(this,"src")}set src(e){"string"==typeof e&&0!==e.length?(0,mt.V)([e],"audio",(t=>{/^(cloud):\/\//.test(e)?this.cloudId=e:this.cloudId="",e=t.data[0].url,ei.call(this,"src",e)})):li.call(this,"error",{errMsg:`Failed to set src, the src ${e} is invalid.`})}get startTime(){return ti.call(this,"startTime")/1e3}set startTime(e){"number"==typeof e?ei.call(this,"startTime",1e3*e):li("error",{errMsg:`Failed to set startTime, the startTime ${e} is invalid.`})}set autoplay(e){"boolean"==typeof e&&ei.call(this,"autoplay",e)}get autoplay(){return ti.call(this,"autoplay")}set loop(e){"boolean"==typeof e&&ei.call(this,"loop",e)}get loop(){return ti.call(this,"loop")}set obeyMuteSwitch(e){"boolean"==typeof e&&ei.call(this,"obeyMuteSwitch",e)}get obeyMuteSwitch(){return ti.call(this,"obeyMuteSwitch")}set volume(e){"number"!=typeof e||e<0||e>1||ei.call(this,"volume",e)}get volume(){return ti.call(this,"volume")}set playbackRate(e){"number"!=typeof e||e<0||ei.call(this,"playbackRate",e)}get playbackRate(){return ti.call(this,"playbackRate")}set referrerPolicy(e){"string"==typeof e&&ei.call(this,"referrerPolicy",e)}get referrerPolicy(){return ti.call(this,"referrerPolicy")}get paused(){return ti.call(this,"paused")}get duration(){return ti.call(this,"duration")/1e3}get currentTime(){return ti.call(this,"currentTime")/1e3}get buffered(){return ti.call(this,"buffered")/1e3}play(){!1===In()&&ii.call(this,{operationType:"play"})}pause(){ii.call(this,{operationType:"pause"})}stop(){ii.call(this,{operationType:"stop"})}seek(e){"number"!=typeof e||e<0?li("error",{errMsg:`Failed to seek, the currentTime ${e} is invalid.`}):ii.call(this,{operationType:"seek",currentTime:1e3*e})}destroy(){Qn.get(this).then((()=>{const e=Hn.get(this);Jn.has(e)&&(["play","pause","stop","canplay","error","ended","waiting","seeking","seeked"].forEach((t=>{const n=`${e}_onAudioStateChange_${t}`;ri.removeAllListeners(n)})),Jn.delete(e),ui-=1,(0,c.IN)("destroyAudioInstance",{audioId:e}))}))}onTimeUpdate(e){Qn.get(this).then((()=>{const t=`${Hn.get(this)}_onAudioStateChange_timeupdate`;void 0===Zn.get(this)&&Zn.set(this,setInterval((()=>{if("active"!==De.Z.runningStatus||!0===zn.get(this).paused||1===zn.get(this).paused)return;const e=zn.get(this).currentTime;ti.call(this,"currentTime",(n=>{n!==e&&ri.emit(t)}))}),250)),ri.removeAllListeners(t);const n=t=>{__errorTracer__.surroundThirdByTryCatch(e,"at audioContext.onTimeUpdate callback function")(t)};qn.set(e,n),ri.on(t,n)}))}offTimeUpdate(e){Qn.get(this).then((()=>{ci.call(this,"timeupdate",e)}))}static pauseAllAudio(){Jn.forEach(((e,t)=>{(0,c.IN)("operateAudio",{timestamp:Date.now(),audioId:t,operationType:"pause"})}))}},pi=()=>{hi.pauseAllAudio(),tn.pauseAllAudio(),nn.pauseAllAudio()},fi=wxNativeConsole.createLogger("InnerAudioContext"),gi=e=>{let t;t="object"==typeof e&&e?e:{async:e};const n=t.useWebAudioImplement;return(a.DD||a.Ae)&&o.Z.Audio?(fi.info("using NativeAudio"),new tn):n&&gt?(fi.info("using WebAudio"),new nn):(fi.info("using AudioJsApi"),new hi(t))};var _i=n(9185),mi=n(7142);let yi=!1;s.Z.onReady((()=>{yi="develop"===s.Z.envVersion||"trial"===s.Z.envVersion}));let vi=0;const Ai={wgs84:null,gcj02:null};(0,_i.H)((()=>{vi=0})),(0,mi.J)((()=>{vi=0}));let bi=0;var wi=n(2913);const Ei=(e={})=>{(0,c.IN)("exitMiniProgram",e,{})};var Ti=n(6300),Si=n(4212);const Ci={debug(){},log(){},info(){},warn(){},error(){}};s.Z.onReady((()=>{}));const Ii="undefined"!=typeof __initHelper&&1===__initHelper,xi=function(){try{return le.cF.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return Ci.error("accessSync fail",e,arguments),{errMsg:e.message||""}}},Di=function(){try{return le.gj.apply(this,arguments)}catch(e){return Ci.error("renameSync fail",e,arguments),{errMsg:e.message||""}}},Oi=function(){try{return{stat:le.dJ.apply(this,arguments),errMsg:"statSync:ok"}}catch(e){return Ci.error("statSync fail",e,arguments),{errMsg:e.message||""}}},Pi=function(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`},Ri=function(e){"string"!=typeof e&&(e+="");let t,n,i=0;for(t=0;t<e.length;t++)n=e.charCodeAt(t),n<127?i+=1:n>=128&&n<=2047?i+=2:n>=2048&&n<=65535&&(i+=3);return i};let ki,Ni,Mi=!1;const Li=102400;let Bi,Fi=[];const Ui={lastLogNum:1,lastLogSize:0};let Wi=!1,ji=!1,Gi=!1;const Vi={},Hi=e=>Ni+"log"+e,zi=(0,v.Hw)((e=>xi(e).errMsg.indexOf("accessSync:ok")>=0)),Zi=(0,v.Hw)((function(e){const t=xi(e).errMsg;return t.indexOf("fail")>=0&&(t.indexOf("access denied")>=0||t.indexOf("no permission")>=0)})),Yi=(0,v.Hw)((e=>{if(Ci.info(`initLog[1][isRemoteDebugMode=${Ii}, wxConfigReady=${Mi}, isLogInit=${Wi}]`),Ii||!Mi||Wi)return void(e&&e());if(Ci.info("initLog[2]"),ki=s.Z&&"devtools"===s.Z.platform,Ni=(s.Z&&s.Z.env.USER_DATA_PATH||(ki?"http://usr":"wxfile://usr"))+"/miniprogramLog/",!zi(Ni))return Ci.info(`initLog[3][mkdirSync][usrLogDir=${Ni}]`),function(){try{le.ho.apply(this,arguments)}catch(e){return Ci.error("mkdirSync fail",e,arguments),{errMsg:e.message||""}}}(Ni),Wi=!0,Gi=Zi(Ni),e&&e(),Gi?void Ci.error("hasNoPermission[1]"):void 0;if(Gi=Zi(Ni),Gi)return Wi=!0,void Ci.error("hasNoPermission[2]");let t=1;for(;t<=5&&zi(Hi(t));)Vi[t]=!0,Ui.lastLogNum=t,t++;Ci.info(`[before statSync] path=${Hi(Ui.lastLogNum)}`);const n=Oi(Hi(Ui.lastLogNum));n.stat&&(Ui.lastLogSize=n.stat.size),Ci.info("[before isLogInit changeinto true"),Wi=!0,e&&e()})),$i=(0,v.Hw)((()=>{Yi((()=>{if(Ci.warn(`[after initLog] isLogInit=${Wi}; isRemoteDebugMode=${Ii}; hasNoPermission=${Gi}; CACHE_LOG.length=${Fi.length}; needDeleteOldLog=${ji}`),!Wi)return;if(Ii||Gi||!Fi.length||ji)return;const e=[];let t=0,n=0;for(;n<Fi.length;n++){const i=Ri(Fi[n]);if(Ci.warn(`[logItemSize=${i}][currentSize=${t}][MAX_LOG_SIZE=102400]`),i>Li)console.warn("[wx.log warn] each log size exceed 100KB will be discard."),Ci.warn(`submitLog[3],logItemSize=${i},MAX_LOG_SIZE=102400`);else{if(t+i>Li)break;t+=i,e.push(Fi[n])}}if(Ci.warn(`[reportLogList.length=${e.length}]`),e.length){if(Ui.lastLogSize+t>1048576){if(Ui.lastLogNum+1>=6)return ji=!0,Ci.warn("submitLog[4][deleteOldLog]","logConfig=",Ui,",MAX_FILE_COUNT=",4),void setTimeout((function(){Ci.info(`deleteOldLog[1],unlinkSync,logPath(1)=${Hi(1)}`),function(){try{le.yX.apply(this,arguments),Ci.info("unlinkSync success",arguments)}catch(e){return Ci.error("unlinkSync fail",e,arguments),{errMsg:e.message||""}}}(Hi(1));for(let e=2;e<=5;e++)Ci.info(`deleteOldLog[2],renameSync,logPath(1)=${Hi(1)},logPath(i - 1)=${Hi(e-1)}`),Di(Hi(e),Hi(e-1));Ui.lastLogNum=5,Vi[Ui.lastLogNum]=!1,Ui.lastLogSize=0,ji=!1}),50);Ui.lastLogNum++,Ui.lastLogSize=0}n===Fi.length?Fi=[]:Fi.splice(0,n),Vi[Ui.lastLogNum]||zi(Hi(Ui.lastLogNum))?(Ci.info("submitLog[7],before appendFile, filePath=",Hi(Ui.lastLogNum)),(0,le.aW)({filePath:Hi(Ui.lastLogNum),data:(Ui.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",fail(e){Ci.error("submitLog[7.1], appendFile fail",e)},success(e){Ci.info("submitLog[7.2], appendFile success",e)}})):(Ci.info("submitLog[5], before writeFile, filePath=",Hi(Ui.lastLogNum)),(0,le.NC)({filePath:Hi(Ui.lastLogNum),data:(Ui.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",success(e){Ci.info("submitLog[5.1], writeFile success",e)},fail(e){console.log("log writeFile err "+e.errMsg),Ci.error("submitLog[6],writeFile fail",e)}})),Ui.lastLogSize+=t}}))}));function qi(){Bi&&clearTimeout(Bi),Bi=setTimeout((()=>{$i(),Bi=null,qi()}),2e3)}const Qi={logApiInvoke:!0};["info","debug","log","warn"].forEach((e=>{Qi[e]=function(){if(Ii||Gi||!Mi||!arguments.length)return;if(!Ui)return;const t=[];for(let e=0;e<arguments.length;e++)"number"==typeof arguments[e]||"string"==typeof arguments[e]?t.push(arguments[e]):t.push(JSON.stringify(arguments[e]));t.splice(0,0,Pi(new Date),`[${e}]`),Fi.push(t.join(" "))}})),Qi._getUserLog=function(){const e={};for(let t=1;t<=5;t++)e["log"+t]=Oi(Hi(t));return e},Qi.privateSystemLog=(...e)=>{Mi&&7===s.Z.appType&&void 0!==Reporter&&e&&e.length&&Si.s.log.apply(Si.s,e)},s.Z.onReady((()=>{Ii||(Mi=!0,(0,v.Hw)(qi)())})),(0,mi.J)((()=>{Ii||$i()}));const Ji=(0,v.Hw)(Ti.Bx),Xi=(0,v.Hw)(Ti.JB);function Ki(e={}){if(Ci.info(`uploadUserLog[1],logConfig.lastLogNum=${Ui.lastLogNum}`,",args=",e),!e.index||e.index>Ui.lastLogNum)return Ci.info("uploadUserLog[2]"),void(e.complete&&e.complete());const t="ios"===s.Z.platform?1:5,n=e.readFileResp||function(){try{return{data:le.NG.apply(this,arguments),errMsg:"readFileSync:ok"}}catch(e){return Ci.error("readFileSync fail",e,arguments),{errMsg:e.message||""}}}(Hi(e.index),"utf8");if(Ci.info(`uploadUserLog[3],readFileSync=${n.errMsg},index=${e.index},EACH_SLICE=${t}`),n.errMsg.indexOf("readFileSync:ok")>=0&&n.data){const i=n.data.length,r=Math.max(parseInt(i/t,10),1),o=(e.slice-1)*r;Ci.info("uploadUserLog[4]","start=",o,"eachLen=",r,"len=",i,n.data.length);const a=n.data.substr(o,r);if(Ci.info("uploadUserLog[5],content.length=",a&&a.length,",logConfig=",Ui),!a)return Ci.info("uploadUserLog[6],uploadUserLogSliceComplete"),Ji({webviewId:e.webviewId,data:{total:Ui.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:(0,ve.m4)()}}),e.index++,e.slice=1,e.readFileResp=null,void Ki(e);Ci.info("uploadUserLog[7], uploadUserLogContent,content.length=",a&&a.length,",logConfig=",Ui),Ji({webviewId:e.webviewId,data:{type:"uploadUserLogContent",content:a,index:e.index,slice:e.slice||1,total:Ui.lastLogNum,info:1===e.index&&1===e.slice?(0,ve.m4)():null},success(){Ci.info(`uploadUserLog[8] uploadUserLogContent suc, EACH_SLICE=${t}, args.slice=${e.slice}, logConfig.lastLogNum=${Ui.lastLogNum}`),e.slice===t?(Ji({webviewId:e.webviewId,data:{total:Ui.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:(0,ve.m4)()}}),e.index++,e.slice=1,e.readFileResp=null,Ki(e)):(e.slice++,e.readFileResp=n,Ci.info("uploadUserLog[9],args=",e),Ki(e))},fail(t){Ci.error(`uploadUserLog[10] fail,failResp.errMsg=${t.errMsg},args.retry=${e.retry}`),e.retry?Ji({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:t&&t.errMsg,index:e.index,info:(0,ve.m4)()}}):(e.retry=!0,Ki(e))}})}else Ci.error(`uploadUserLog[11],readFileSync fail=${n.errMsg},index=${e.index}`),Ji({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:n.errMsg,index:e.index,info:(0,ve.m4)()}})}Ii||Xi((e=>{Ci.info("onH5Data",e,Ui),e.data&&"uploadUserLog"===e.data.type&&Ki({index:1,slice:1,webviewId:e.webviewId})}));var er=n(7646);const tr=[],nr=[];let ir=~~(+new Date/1e3),rr=0;function or(e,t,n,i){let r;r="string"==typeof i?i:i?"high":"low",(0,c.IN)("operateRealtimeData",{type:t,content:n,priority:r,id:e},{beforeSuccess(){},beforeFail(e){nr.forEach((t=>t(e)))}})}function ar(){const e=tr.shift();"function"==typeof e&&(e(),rr=+new Date),tr.length&&setTimeout(ar,200)}const sr=(e,t,n)=>{if(1005!==e&&a.gm)return;const i=+new Date,r=ir++;return i-rr>=200&&!tr.length?(or(r,e,t,n),rr=i):(tr.push((()=>{or(r,e,t,n)})),setTimeout(ar,200)),r};(0,c.jQ)("onRealtimeDataResponse",(e=>{nr.forEach((t=>t(e)))}));const cr=(0,p.Fr)((0,er.Ce)(!1,"GetUploadSetting")),lr=(0,p.Fr)((0,er.Ce)(!1,"GetUploadSetting",!0));let ur;const dr={};function hr(e){return e?(dr[e]||(dr[e]=lr({apiName:"GetUploadSetting",reqData:{},pluginId:e})),dr[e]):ur||(ur=cr({apiName:"GetUploadSetting",reqData:{}}),ur)}let pr=+new Date;const fr=(0,v.Hw)((e=>gr(e).errMsg.indexOf("accessSync:ok")>=0)),gr=function(){try{return le.cF.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return{errMsg:e.message||""}}},_r=(0,p.Fr)((0,er.Ce)(!1,"UploadByApi")),mr=(0,p.Fr)((0,er.Ce)(!1,"UploadByApi",!0)),yr={DEBUG:1,INFO:2,WARN:4,ERROR:8},vr=1,Ar=2,br=1;let wr="",Er=!1;function Tr(e){Er?e&&e():(Er=!0,s.Z.onReady((()=>{wr=s.Z.accountInfo.appId,e&&e()})))}const Sr=function(e,t){if("string"!=typeof e)return 0;let n,i,r,o=0;if("utf-16"===(t=t?t.toLowerCase():"utf8")||"utf16"===t)for(i=0,r=e.length;i<r;i++)n=e.charCodeAt(i),o+=n<=65535?2:4;else for(i=0,r=e.length;i<r;i++)n=e.charCodeAt(i),o+=n<=127?1:n<=2047?2:n<=65535?3:4;return o};function Cr(){if("undefined"!=typeof __appServiceEngine__){const e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}if((0,p.aI)())return"index"}let Ir;function xr(){Ir&&(Ir=clearTimeout(Ir))}let Dr=!1;let Or="";class Pr{constructor(e={}){var t;this.systemInfo=(0,ve.m4)(),this.opt={},this.opt.level=yr.INFO,this.mode=e.mode||"normal",this.pluginId=e.pluginId,this.pluginVersion=e.pluginVersion,this.timerId=null,this.isExceedTodayUploadLogCount=!1,this.opt.isClientReport=!!e.isClientReport,this.msgList={},this.filterList={},this.kvFilterList={},this.sizeList={},this.levelList={},this._uploadList=[],this._logInfo={},this._logInfo.level=0,this._logInfo.version=2,this._logInfo.source=br,this._logInfo.platform="ios"===this.systemInfo.platform?Ar:vr,this._logInfo.libraryVersion=this.systemInfo.SDKVersion,this._logInfo.clientVersion=this.systemInfo.version,this.exceedSizeList={},this.structSizeList={},this.historyLog={},this.retryLogList={},this.MaxSize=10240,this.MaxLogCount=500,this._logCacheBeforeLogConfig=[],setTimeout((()=>{a.gm||this._getLogConfig()}),300),Tr((()=>{(0,p.aI)()&&this.cyclelyUploadInGame()})),this.uploadCount=0,this.failCount=0,this.opt.isClientReport&&(this.MaxSize=5120,this.MaxLogCount=200,(0,Ae.getNetworkType)({success(e){Or=e.networkType}}),(0,Ae.onNetworkStatusChange)((e=>{Or=e.networkType})),t=e=>{this.onRealtimeDataResponse(e)},a.gm||"function"==typeof t&&nr.push((0,h.Hw)(t)))}cyclelyUploadInGame(){setTimeout((()=>{Lr(),this.cyclelyUploadInGame()}),6e5)}onRealtimeDataResponse(e){if(this.uploadCount++,0!==e.errcode&&("wifi"!==Or&&"4g"!==Or||(this.failCount++,this.uploadCount>=5&&this.failCount/this.uploadCount>=.6&&(Dr=!0,this.failCount=0,this.uploadCount=0,setTimeout((()=>{Dr=!1}),6e4))),e.idList&&e.idList.length)){let t=!1;const n={};let i=!1;const r={};e.idList.forEach((o=>{const a=this.historyLog[o];a&&(a.id,a.url,Reporter.reportKeyValue({key:"UserLogFail",value:`,${Or},${e.errcode},${parseInt(Date.now()/1e3,10)},${a.url},${a.libraryVersion},${wr}`}),t=!0,delete this.historyLog[o],n[o]=a);const s=this.retryLogList[o];s&&(s.id,s.url,r[o]=s,delete this.retryLogList[o],i=!0)})),t&&(this.retryLogList=n,this.failRetry(n)),i&&this.saveToFile(r)}}_getLogConfig(e,t){return hr(this.pluginId).then((n=>{if(n.rawData){try{const i=JSON.parse(n.rawData);this.MaxSize=1024*i.MaxLogSize,i.MaxLogCount&&(this.MaxLogCount=i.MaxLogCount),this._logInfo.id=i.UserUin,i.OpenId&&(this.traceid=`${i.OpenId}_${parseInt(Date.now()/1e3,10)}`),i.Debug&&i.Debug.MaxSize&&i.Debug.ExpireTime>Date.now()/1e3&&(this.isDebugMode=!0,this.MaxSize=1024*i.Debug.MaxSize,this.opt.level=yr.DEBUG,i.Debug.MaxLogCount&&(this.MaxLogCount=i.Debug.MaxLogCount));const r=this._logCacheBeforeLogConfig||[];this._logCacheBeforeLogConfig=[],r.forEach((e=>{this._baseLog(e.key,e.path,...e.args)})),this._getConfigFail=!1,e&&this.upload(t),(0,p.aI)()||function(e){if(xr(),e="number"!=typeof e?3e5:e,(e=Math.max(e,5e3))>0){const t=()=>{xr(),Ir=setTimeout((()=>{Lr(),t()}),e)};t()}}(i.ReportInterval)}catch(e){this._hasNoPermission=!0,this._logCacheBeforeLogConfig=[]}setTimeout((()=>{this.tryUploadFailLog()}),100)}else this._hasNoPermission=!0,this._logCacheBeforeLogConfig=[]})).catch((e=>{e.errMsg&&e.errMsg.indexOf("fail invalid scope")>=0&&(this._hasNoPermission=!0,this._logCacheBeforeLogConfig=[]),this._getConfigFail=!0}))}_config(e={}){e.mode&&(this.mode=e.mode)}_checkSize(e,t){let n=0;if(!t||!t.length)return!0;if(!(e=this.pluginId||e||Cr()))return!0;t.forEach((e=>{n+=Sr(e)})),this.sizeList[e]=this.sizeList[e]||0;const i=this.sizeList[e];return i+n>this.MaxSize?n:(this.sizeList[e]=i+n,!0)}_getLogValue(e){const t=typeof e;let n,i="";if("function"===t&&(n="function(){}"),"undefined"===t)n="<Undefined>";else if("object"===t){i=Object.prototype.toString.call(e),i=i.replace(/^\[object |\]$/g,"");try{n="Error"===i?e.stack:JSON.stringify(e)}catch(e){i="Error",n=e.message}}else e+="";return n||e}_baseLog(e,t,...n){if(!n.length)return;if(this._hasNoPermission)return;if(!this._logInfo.id)return void this._logCacheBeforeLogConfig.push({key:e,path:t,args:n});let i,r,o,a;"object"==typeof e?(i=e.id,r=e.name,o=e.level,a=e.time):(i="__DEFAULT__",r="__DEFAULT__",o=e,a=+new Date);const s=yr[o.toUpperCase()]||0;if(s<this.opt.level)return;let c,l;if(t=this.pluginId||t||Cr(),this.structSizeList[t]=this.structSizeList[t]||0,"kv"===this.mode){const[e,o]=n;if(!e||"string"!=typeof e)return;const s=this._getLogValue(o);l=this._checkSize(t,[e,s]),c=[i,a,r,e,s]}else c=n.map(this._getLogValue),l=this._checkSize(t,c),this.structSizeList[t]+=6+(c.length?3*c.length-1:0);if(!0===l)this._addLogMsg(c,t,s);else{if(this.exceedSizeList[t]=this.exceedSizeList[t]||0,!this.exceedSizeList[t]){const e=[`UserLog:fail Log Size ${l} Exceed.`];"kv"===this.mode&&e.unshift("warning"),this._addLogMsg(e,t,yr.WARN)}this.exceedSizeList[t]+=l}}_addLogMsg(e,t,n){if(this.isExceedTodayUploadLogCount)return;if(!n)return;if(this._getConfigFail&&this._getConfigRetry)return;const i=this.pluginId||t||Cr();if(!i)return;if(this.msgList[i]=this.msgList[i]||[],this.msgList[i].length>=this.MaxLogCount)return void this.MaxLogCount;const r=this.msgList[i][0];if("kv"===this.mode){const[t,r,o,a,s]=e,c=[n,t,r,o,a,s];this.msgList[i].push(c)}else{const t=new Date,o=Math.ceil(+t/1e3),a=[r?o-r[0]:o,e,n,t.getMilliseconds()];if(!this.msgList[i].length){const e=(new Date).getTimezoneOffset();a.push(e)}this.msgList[i].push(a)}this.levelList[i]=this.levelList[i]||0,this.levelList[i]|=n}OperateWxUploadLog(e,t){if(this.isExceedTodayUploadLogCount)return;const n=e.structSize||0;delete e.structSize;const i=e.rawSize||0;if(delete e.rawSize,this.opt.isClientReport){const r=this.pluginId?1004:1001;e.url;const o=sr(r,JSON.stringify({interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0,pluginId:this.pluginId||"",pluginVersion:this.pluginVersion||"",appId:wr}));return this.historyLog[o]=e,Reporter.reportKeyValue({key:"UserLog",value:`,${n+i},${i}${e.timestamp},${e.url},${e.filter1},${wr}`}),void(t&&t(!0))}return(r={apiName:"UploadByApi",pluginId:this.pluginId,reqData:{interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0}},r.pluginId?mr(r):_r(r)).then((()=>{t&&t(!0)})).catch((e=>{e&&1e4==+e.err_code&&(this.isExceedTodayUploadLogCount=!0),t&&t(!1),this.failCount++}));var r}failRetry(e){this.uploadFailRetryTimerId||(this.uploadFailRetryTimerId=setTimeout((()=>{if(e)for(const t in e)this.historyLog.hasOwnProperty(t)&&this.OperateWxUploadLog(this.historyLog[t])}),3e3))}stat(e){return(e=this.pluginId||e||Cr())&&this.sizeList[e]||0}_hasUploadInterval(){return!!this.opt.isClientReport||!(this._isUploading||Date.now()-this._lastUploadTime<1e3)}upload(e){const t=e||Cr();if(!(e=this.pluginId||t))return;const n=this.msgList[e]||[];if(!n||!n.length)return;if(!this._hasUploadInterval())return void(this._uploadList.indexOf(t)<0&&this._uploadList.push(t));if(this._getConfigFail||!this._logInfo.id){if(this._getConfigRetry)return;return this._getConfigRetry=!0,void this._getLogConfig(!0,t)}if(!Er)return void Tr((()=>{wr&&this.upload(t)}));if(Dr)return;this.msgList[e]=[];const i=this.levelList[e]||yr.DEBUG;this.levelList[e]=0;const r=this.sizeList[e];this.sizeList[e]=0;const o=this.exceedSizeList[e];this.exceedSizeList[e]=0;const a=this._logInfo;a.level=i,a.rawSize=o+r;const s=this.structSizeList[e]||0;if(a.structSize=s,this.structSizeList[e]=0,this._logInfo.timestamp=Math.ceil(Date.now()/1e3),this._logInfo=Object.assign({},this._logInfo),"kv"===this.mode){const t={},i={};n.forEach((e=>{const[n,r,o,a,s,c]=e,l=n||yr.DEBUG;i[r]=i[r]||[o,{},l],i[r][1][s]=c,i[r][2]=Math.max(i[r][2],l),t[a]=t[a]||[],-1===t[a].indexOf(i[r])&&t[a].push(i[r])}));const r=this.kvFilterList,o=[];Object.keys(r[e]).forEach((t=>{r[e][t].forEach((e=>{const[n,r]=e;if(i[n]){const e=i[n][1];e.__REALTIME_LOG_TAG__=e.__REALTIME_LOG_TAG__||[],-1===e.__REALTIME_LOG_TAG__.indexOf(r)&&e.__REALTIME_LOG_TAG__.push(r),-1===o.indexOf(r)&&(o.push(r),o.push(`${t}_${r}`))}}))})),a.msg=JSON.stringify(t),a.filter1=[].concat(Object.keys(t),o).join(" "),this.kvFilterList[e]=[]}else a.msg=JSON.stringify(n),a.filter1=this.filterList[e]||"",this.filterList[e]="";Sr(a.msg),a.appid=wr,this.pluginId&&(a.pluginid=this.pluginId),this.pluginVersion&&(a.pluginVersion=this.pluginVersion),"kv"===this.mode&&(a.mode=this.mode),a.url=t,this.traceid&&(a.traceid=this.traceid),a.device=this.systemInfo.model+" "+this.systemInfo.system,this._isUploading=!0,this.OperateWxUploadLog(a,(e=>{this._isUploading=!1,this._lastUploadTime=Date.now(),e&&this._uploadList.length&&(this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout((()=>{this.timerId=null,this.upload(this._uploadList.shift())}),1e3))}))}setFilterMsg(e,t,n){if("string"!=typeof t&&(t=JSON.stringify(t)),Sr(t)>2048)return!1;if(e=this.pluginId||e||Cr(),"kv"===this.mode&&"object"==typeof n){const i=this.kvFilterList;return i[e]=i[e]||{},i[e][n.name]=[[n.id,t]],!0}return this.filterList[e]=t,!0}addFilterMsg(e,t,n){if("string"!=typeof t&&(t=JSON.stringify(t)),e=this.pluginId||e||Cr(),"kv"===this.mode&&"object"==typeof n){const i=this.kvFilterList;return i[e]=i[e]||{},i[e][n.name]=i[e][n.name]||[],void i[e][n.name].push([n.id,t])}const i=this.filterList[e]||"";this.setFilterMsg(e,i+(i?" ":"")+t)}getTraceId(){return this.traceid||""}getFilePath(){const e=(s.Z&&s.Z.env.USER_DATA_PATH||(a.gm?"http://usr":"wxfile://usr"))+"/miniprogramLog/",t=e+"realtime.log";return fr(e)||function(){try{le.ho.apply(this,arguments)}catch(e){return{errMsg:e.message}}}(e),t}getFileContent(e){let t=function(){try{return{data:le.NG.apply(this,arguments),errMsg:"readFileSync:ok"}}catch(e){return{errMsg:e.message}}}(e,"utf8");try{if(t&&t.data)return t=JSON.parse(t.data),t}catch(e){}return null}saveToFile(e){if(!e)return;const t=this.getFilePath();if(fr(t)){const n=this.getFileContent(t);if(n)for(const t in n)e[t]||(e[t]=n[t])}(0,le.NC)({filePath:t,data:JSON.stringify(e),encoding:"utf8",fail(e){e.errMsg},success(e){}})}tryUploadFailLog(){const e=this.getFilePath();if(fr(e)){const t=this.getFileContent(e);if(!t)return;for(const e in t)t.hasOwnProperty(e)&&this.OperateWxUploadLog(t[e]);(0,le.NC)({filePath:e,data:"{}",encoding:"utf8",fail(e){e.errMsg},success(e){}})}}}let Rr=null;const kr={},Nr=e=>e?kr[e]:Rr,Mr=(e={},t,n)=>{let i="",r={stat(){if(a.gm)return;const e=Nr(t);return e?e.stat(i):void 0},setFilterMsg(e){if(a.gm)return;const n=Nr(t);return n?n.setFilterMsg(i,e):void 0},addFilterMsg(e){if(a.gm)return;const n=Nr(t);return n?n.addFilterMsg(i,e):void 0},in(e){(0,p.aI)()?i="index":e&&e.route&&(i=e.route)},tag(e){const n=pr++,r=+new Date;return{debug(o,s){if(a.gm)return;const c=Nr(t);return c?c._baseLog({id:n,name:e,time:r,level:"debug"},i,o,s):void 0},info(o,s){if(a.gm)return;const c=Nr(t);return c?c._baseLog({id:n,name:e,time:r,level:"info"},i,o,s):void 0},warn(o,s){if(a.gm)return;const c=Nr(t);return c?c._baseLog({id:n,name:e,time:r,level:"warn"},i,o,s):void 0},error(o,s){if(a.gm)return;const c=Nr(t);return c?c._baseLog({id:n,name:e,time:r,level:"error"},i,o,s):void 0},setFilterMsg(r){if(a.gm)return;const o=Nr(t);return o?o.setFilterMsg(i,r,{name:e,id:n}):void 0},addFilterMsg(r){if(a.gm)return;const o=Nr(t);return o?o.addFilterMsg(i,r,{name:e,id:n}):void 0}}}};return r=t?Object.assign(r,{config(){},debug(){},info(){},warn(){},error(){}}):Object.assign(r,{config(e){if(a.gm||"object"!=typeof e)return;const n=Nr(t);n&&n._config(e)},debug(...e){if(a.gm)return;const n=Nr(t);return n?n._baseLog("debug",i,...e):void 0},info(...e){if(a.gm)return;const n=Nr(t);return n?n._baseLog("info",i,...e):void 0},warn(...e){if(a.gm)return;const n=Nr(t);return n?n._baseLog("warn",i,...e):void 0},error(...e){if(a.gm)return;const n=Nr(t);return n?n._baseLog("error",i,...e):void 0}}),Nr(t)||((e,t)=>{e?kr[e]=t:Rr=t})(t,new Pr({isClientReport:e.isClientReport,pluginId:t,pluginVersion:n,mode:t?"kv":"normal"})),r},Lr=e=>{if(a.gm)return;const t=(()=>{const e=[];return Rr&&e.push(Rr),Object.keys(kr).forEach((t=>e.push(kr[t]))),e})();t.length&&t.forEach((t=>{try{t.upload(e)}catch(e){}}))};let Br;(0,mi.J)((e=>{a.gm||e&&8===e.targetAction||Er&&(Br&&clearTimeout(Br),Br=setTimeout((()=>{if("undefined"!=typeof __appServiceEngine__){__appServiceEngine__.getCurrentPagesByDomain("").forEach((e=>{Lr(e.route)}))}else(0,p.aI)()&&Lr();Br=null}),10))}));var Fr=n(6725),Ur=n(2141),Wr=n(6369),jr=n(1703),Gr=n(495),Vr=n(2411);const Hr=o.Z.requestPointerLock,zr=o.Z.exitPointerLock,Zr=o.Z.isPointerLocked,Yr={now:o.Z.performanceNow},$r=()=>Yr;let qr;const Qr=(0,l.s)("memoryWarning"),Jr=Qr.onMethod,Xr=Qr.offMethod,Kr=(e,t=!1)=>{t?qr=e:Jr(e)};(0,c.jQ)("onMemoryWarningReceive",((e={})=>{if(a.wZ&&e.level<10)return;Qr.getGlobalListeners().length?Qr.emitGlobal(e):"function"==typeof qr&&qr(e)}));let eo=Date.now();const to=function(){o.Z.gc?o.Z.gc():function(){let e={};for(let t=0;t<1e5;t++)e[t]=[];e=null}()};Kr((()=>{Date.now()-eo>1e3&&to(),eo=Date.now()}),!0);var no=n(1627);const{EventHandler:io}=o.Z,ro=new D.Q("Mouse",!0),oo={};["Down","Move","Up"].forEach((e=>{oo[`onMouse${e}`]=t=>ro.on(e,t),oo[`offMouse${e}`]=t=>ro.off(e,t),io[`onmouse${e.toLowerCase()}`]=t=>{"Up"===e&&mn.U.emit("beforeTouchEnd"),ro.emit(e,t),"Up"===e&&mn.U.emit("afterTouchEnd")}}));const ao=oo,{EventHandler:so}=o.Z,co=new D.Q("PointerLock",!0),lo={};["Change","Error"].forEach((e=>{lo[`onPointerLock${e}`]=t=>co.on(e,t),lo[`offPointerLock${e}`]=t=>co.off(e,t),so[`onpointerlock${e.toLowerCase()}`]=()=>co.emit(e)}));const uo=lo,{EventHandler:ho}=o.Z,po=new D.Q("Mouse",!0);ho.onwheel=e=>po.emit("Wheel",e);const fo=(0,l.s)("Game-Error"),go=(0,l.s)("Game-UnhandledRejection"),_o=fo.onMethod,mo=fo.offMethod,yo=go.onMethod,vo=go.offMethod;Reporter.registerThirdErrorListener((e=>{fo.emit({message:e,stack:""})})),Reporter.registerThirdUnhandledRejectionListener(((e,t)=>{go.emit({reason:e,promise:t})}));var Ao=n(678);let bo=null;function wo(e,t){"object"!=typeof e&&(e={});const n=(0,Vr.y)(),i=n.scene,r=n.chatroomUsername;let o="shareAppMessage",a=e.toCurrentGroup;a=1158===i?"boolean"!=typeof a||a:"boolean"==typeof a&&a;const c={title:e.title||s.Z.accountInfo.nickname,imageUrl:e.imageUrl,query:e.query,imageUrlId:e.imageUrlId,path:e.path};a&&1158===i&&(c.chatroomUsername=r,o="shareAppMessageToSpecificContactDirectly"),(0,Wr.HP)(c,o,t)}(0,c.jQ)("onShareAppMessage",(e=>{if((0,Ao.b$)()){const t=(0,Ao.hk)(e);return void(0,c.IN)("shareAppMessageDirectly",Dn()(Dn()({},t),{},{success(e){},fail(e){wxNativeConsole.error("shareAppMessageDirectly fail",e)}}))}let t={};if("function"==typeof bo&&(t=bo({}),"object"!=typeof t&&(t={})),"Promise"===(0,P.Em)(t.promise)){let n=!1;setTimeout((()=>{n||(n=!0,wo(t,e))}),3e3),t.promise.then((t=>{n||(n=!0,wo(t,e))}))}else wo(t,e)}));var Eo=n(2451),To=n(5959);var So=n(1029),Co=n(5289),Io=n(4192),xo=n(5917);const Do=wxNativeConsole.createLogger("shareTimeline");function Oo(e={},t={title:s.Z.accountInfo.nickname}){const n={};let i="string"==typeof e.query?e.query:"";i.length>2e3&&(console.warn(`shreTimeline: query exceed max length limit 2000: "${i.length}"`),i=i.substr(0,2e3)),n.path=(0,Ao.xF)({pageType:Eo.Gy.PLAY_PAGE_IMAGE,query:i});const r=(0,xo.VW)(),o=(0,xo.rZ)();if(r){const t=mn.L.get(e.imageUrl);n.imageUrl="string"==typeof t?t:e.imageUrl}else{if(!o[e.imageUrlId])return(0,Oe.CF)({icon:"none",title:"由于小程序违规，分享功能暂时无法使用"}),null;n.imageUrl=o[e.imageUrlId]}return Object.assign({userPath:"string"==typeof e.path?e.path:"",userQuery:i},t,e,n)}function Po(e,t={},n,i={}){return Do.log("invokeShareTimeline",e,t,n,i),new Promise(((r,o)=>{const a={title:t.title,path:t.path,imageUrl:t.imageUrl?t.imageUrl:"",cardSubType:(0,Ao.oq)(n),messageExtraData:Dn()({userPath:t.userPath,userQuery:t.userQuery,title:t.title,imageUrl:t.imageUrl||"",pageType:n,thumbUrl:e.thumbUrl,fileUrl:e.fileUrl,isCustomPreviewImg:e.isSnapshot?0:1},i)};n===Eo.Gy.PLAY_PAGE_IMAGE&&(a.preloadResources=[e.fileUrl]),Do.debug("shareParams",a),(0,c.IN)("shareTimeline",Dn()(Dn()({},a),{},{success:r,fail:o}))}))}function Ro(e){(0,Oe.QP)({title:"请稍等"}),function(e={}){const{imagePreviewUrlId:t,imagePreviewUrl:n}=e,i=(0,xo.VW)(),r=(0,xo.rZ)();if(i){if(/^(http|https):\/\//.test(n))return new Promise((e=>{(0,y.o)({url:n,success:t=>{e(ko(t.tempFilePath).catch((e=>{Do.error(e),No()})))},fail:t=>{Do.error(t),e(No())}})}));if(/^wxfile:\/\//.test(n))return ko(n).catch((e=>(Do.error("getFinalUrlWithImageInfoAndCDNUrl fail",e,n),No())));if((0,P.HD)(n)){let e=n.split(".").pop();e=e?e.toLowerCase():"jpg";const t=`__wx_temp_timeline_img_${(0,v.M8)()}.${e}`,i=`${s.Z.env.USER_DATA_PATH}/${t}`;return(0,p.Fr)(Co.c)({srcPath:n,destPath:i}).then((()=>ko(i))).then((e=>((0,Io.q)({filePath:i,success:e=>{Do.log("unlink success",e)},fail:e=>{Do.error("unlink fail",e)}}),e))).catch((e=>(Do.error("getFinalUrlWithImageInfoAndCDNUrl fail",e,i),No())))}return No()}{const e=r[t];return t&&e?new Promise((t=>{(0,rn.zU)({src:e,success:n=>{const{width:i,height:r}=n,o=(0,xo.Mc)(e,i,r);t({fileUrl:o,thumbUrl:o})},fail:()=>t(No())},y.o)})):No()}}(e).then((e=>((0,Oe.Zk)(),e))).then((t=>Po(t,e,Eo.Gy.PLAY_PAGE_IMAGE))).catch((e=>{(0,Oe.Zk)(),Do.debug("invokeShareTimeline fail",e)}))}function ko(e){return Promise.all([(0,xo.tK)(e),(0,xo.Hi)(e,1048576).then((()=>(0,xo.AV)(e)))]).then((([e,t])=>{const{width:n,height:i}=e;return{fileUrl:(0,xo.Mc)(t.fileUrl,n,i),thumbUrl:(0,xo.Mc)(t.thumbUrl,n,i)}}))}function No(){return new Promise(((e,t)=>{const n=(0,Fr.rU)();n.toTempFilePath({x:0,y:0,width:n.width,height:n.height,destWidth:n.width,destHeight:n.height,success(t){t.width=n.width,t.height=n.height,e(t)},fail(e){wxNativeConsole.error("createSnapshot fail",e),t(e)}})})).then((e=>{const{width:t,height:n,tempFilePath:i}=e;return(0,xo.AV)(i).then((e=>({fileUrl:(0,xo.Mc)(e.fileUrl,t,n),thumbUrl:(0,xo.Mc)(e.thumbUrl,t,n),isSnapshot:!0})))}))}const Mo=wxNativeConsole.createLogger("onShareTimeline");let Lo=null;function Bo(e,t){const n=function(e){let t={};return"function"==typeof Lo&&(t=Lo(),"object"!=typeof t&&(t={})),Oo(t,e)}(t);Mo.debug("onShareTimelineInGame shareData",n),n&&Ro(n)}(0,c.jQ)("onShareTimeline",(e=>{const t=To.n.get();t?function(e,t){let n="",i="";e.pageType===Eo.Gy.PLAY_PAGE_IMAGE?(n=(0,Ao.xF)({pageType:Eo.Gy.PLAY_PAGE_IMAGE,query:e.query}),i=e.params.imageUrl||""):e.pageType===Eo.Gy.PLAY_PAGE_VIDEO&&(n=(0,Ao.xF)({pageType:Eo.Gy.PLAY_PAGE_VIDEO,query:e.query}),i=e.params.thumbUrl||"");const r={thumbUrl:e.params.thumbUrl,fileUrl:e.params.fileUrl},o={title:e.params.title||t.title,imageUrl:i,path:n,userPath:e.params.userPath,userQuery:e.params.userQuery};Po(r,o,e.pageType,e.params).catch((e=>{Mo.error("fail",e)}))}(t,e):Bo(0,e)}));var Fo=n(5184);var Uo=n(5708);const Wo=new D.Q("key",!0);o.Z.EventHandler.onkeydown=e=>{Wo.emit("down",e)},o.Z.EventHandler.onkeyup=e=>{Wo.emit("up",e)};var jo=n(9974);const Go=new jo.Z;let Vo,Ho;["onKeyboardInput","onKeyboardConfirm","onKeyboardComplete"].forEach((e=>{(0,c.jQ)(e,(t=>{Go.emit(e,t)}))})),(0,c.jQ)("onWindowResize",(()=>{const e={},t=(0,ve.xI)();Vo===t.windowWidth&&Ho===t.windowHeight||(Vo=e.windowWidth=t.windowWidth,Ho=e.windowHeight=t.windowHeight,mn.U.emit("onWindowResize",e))}));let zo=null;(0,c.jQ)("onAddToFavorites",(e=>{let t={};if((0,Ao.b$)()){const t=(0,Ao.hk)(e);return void(0,c.IN)("addToFavorites",Dn()(Dn()({},t),{},{success(e){},fail(e){wxNativeConsole.error("addToFavorites fail",e)}}))}"function"==typeof zo&&(t=zo({}),"object"!=typeof t&&(t={}),t.path="string"==typeof t.path?t.path:"","string"==typeof t.query&&(t.path=t.path+"?"+t.query));let n=t.imageUrl;(0,mt.V)([n],"image",(i=>{/^(cloud):\/\//.test(n)&&(n=i.data[0].url),t.imageUrl=n,(0,c.IN)("addToFavorites",Object.assign(e,t))}))}));var Zo=n(8010),Yo=n(743);let $o=!1,qo=!1,Qo=Zo.P0,Jo="";(0,Yo.dN)(((e={})=>{let{scene:t}=e;const{referrerInfo:n}=e;void 0!==t&&("string"==typeof t&&(t=parseInt(t,10)),n&&n.appId&&(Jo=n.appId),1036===t?(qo=!0,Qo=Zo.P0):1069===t?(qo=!0,Qo=Zo.nw):1089!==t&&1090!==t&&1038!==t&&(qo=!1))})),mn.U.on("beforeTouchEnd",(()=>{$o=!0})),mn.U.on("afterTouchEnd",(()=>{$o=!1}));var Xo=n(4052),Ko=n(8065);const ea=new p.vp;(0,c.jQ)("onDeviceOrientationChange",(e=>{e.value=e.value.toLowerCase(),/reverse/.test(e.value)&&(e.value="landscapeReverse"),ea.emit("deviceOrientationChange",e)}));const ta=e=>{(0,c.IN)("enableDeviceOrientationChangeListening",{enable:!0}),ea.on("deviceOrientationChange",e)},na=e=>{(0,c.IN)("enableDeviceOrientationChangeListening",{enable:!1}),ea.off("deviceOrientationChange",e)},ia=__subContextEngine__.getGameOpenDataContext(),ra=JSON.stringify,oa=e=>{ua();try{ia.postMessage({data:ra(e)})}catch(e){throw new v.iZ(e.message)}},aa=e=>{ua(),ia.onMessage(e)};let sa,ca=!1;const la=()=>{const e=a.gm?s.Z.appConfig.subContext:s.Z.subContext;return e&&"string"==typeof e},ua=()=>{!ca&&la()&&(__subContextEngine__.createGameOpenDataContext(),ca=!0)};let da=null;const ha=()=>(ua(),da||(da=(0,Fr.zL)()),da);let pa,fa,ga;try{a.gm&&(pa=document.createElement.bind(document),fa=document.body.appendChild.bind(document.body),ga=null)}catch(e){}var _a=n(7621),ma=n(9078);var ya=n(9482),va=n(9345);let Aa=1;s.Z.onReady((()=>{try{"number"==typeof s.Z.wxAppInfo.maxWorkerConcurrent&&(Aa=s.Z.wxAppInfo.maxWorkerConcurrent)}catch(e){}}));const ba=function(e,t={}){const{useExperimentalWorker:n}=t,i={workerUrl:e,appid:s.Z.accountInfo.appId,useExperimentalWorker:n&&(0,K.J)("WeAppWorker")};let r="workers.js",o=va.d.service;const a=(0,yn.Ur)(this);if(a&&(r=(0,v.S0)(`plugin-private://${a}/workers.js`),o=va.d.plugin,i.pluginId=a),va.Z.getSizeByType(o)>=Aa)throw new Error("createWorker: exceed max concurrent workers limit.");const{workerId:c,useWKWorker:l}=__safeway__.worker.create(r,i);if(setTimeout((()=>{Reporter.reportIDKey({key:l?"createWKWorker":"createNormalWorker"})}),0),c>0)return new ya.Z(c,e,{useWKWorker:l,contextType:o,pluginId:i.pluginId});throw-1===c?new Error(`createWorker: Worker "${e}" does not exists.`):new Error("createWorker: unknown error.")};var wa=n(638);let Ea=null,Ta=null,Sa=null,Ca=null;const Ia=new Promise((e=>{Ca=e}));s.Z.onReady((()=>{const e=e=>{Ta=e,Sa=s.Z,Ea=(0,ve.m4)(),Ca()};new Promise(((e,t)=>{(0,Ae.getNetworkType)({success(t){e(t.networkType)},fail(e){t(e)}})})).then((t=>{e(t)})).catch((()=>{e(null)}))}));const xa=e=>{Sa?e():Ia.then(e)},Da={enabled:!0,sampleRate:1,batchTime:300,legacyReportEnabled:!0,bufferCapacity:1e3,userUin:0};let Oa,Pa=!1;function Ra(e,t){if(0===t)return!1;const n=Math.ceil(1/t);return e%n===parseInt(Date.now()/864e5,10)%n}function ka(){const e="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],t=Ea&&Ea.brand,n=Ea&&Ea.model,i=Ea&&Ea.platform,r=Ea&&Ea.system,o=Sa&&Sa.appLaunchInfo&&Sa.appLaunchInfo.scene,a=Sa&&s.Z.envVersion,c=Ea&&Ea.version,l=Ea&&Ea.SDKVersion;let u=e.length>0&&e[e.length-1].__route__||"";return u=function(e){if(!e)return"";const t=e.indexOf("?");return t>-1?e.substring(0,t):e}(u),{platform:i,system:r,path:u,scene:o,brand:t,model:n,networkType:Ta,envType:a,clientVersion:c,sdkVersion:l}}function Na(e,t,n=[],i){const r=Object.create(null);r.key=e,r.value=t;const o=ka();let a="";i?(a=i.pluginId,o.pluginCustomVersion=i.customVersion,o.path=__virtualDOM__.convertRouteToComponentAlias(o.path),o.path.indexOf("plugin")<0&&(o.path="")):a=Sa.accountInfo&&Sa.accountInfo.appId,function({appId:e,metrics:t={},dimensions:n=[]}={}){let i="";n.length>0&&(i="_"+n.join("_"));const r=ka(),o=`${t.key}_${r.networkType}_${r.scene}${i}`;if(Object.keys(La).length>Da.bufferCapacity)return;La[o]||(La[o]={appId:e,key:t.key,valueSum:0,count:0,baseInfo:r,dimensions:n});const a=La[o];a&&(a.valueSum+=t.value,a.count++)}({appId:a,metrics:r,dimensions:n}),Oa&&Oa.then((()=>{"release"===s.Z.envVersion&&1!==Da.sampleRate&&Da.userUin&&!Ra(Da.userUin,Da.sampleRate)||Da.enabled&&Da.legacyReportEnabled&&Ga({appId:a,metrics:r,baseInfo:o,interfaces:"log_20000_userdefine",busid:"b_wxg_wxa_miniprogram_performance"})}))}const Ma=(0,p.Fr)((0,er.Ce)(!1,"UploadByApi")),La={};function Ba(){const e=Object.keys(La);if(e.length<=0)return;if(!Da.enabled)return;if("release"===s.Z.envVersion&&1!==Da.sampleRate&&Da.userUin&&!Ra(Da.userUin,Da.sampleRate))return;const t="develop"===s.Z.envVersion||"trial"===s.Z.envVersion;for(const n of e){const e=La[n],i={key:e.key,value:e.valueSum/e.count,num:e.count},r=e.baseInfo,o=e.dimensions;t?o.length>0?Va({appId:e.appId,metrics:i,baseInfo:r,interfaces:"log_20004",busid:"b_wxg_wxa_miniprogram_performance",dimensions:o}):Va({appId:e.appId,metrics:i,baseInfo:r,interfaces:"log_20002",busid:"b_wxg_wxa_miniprogram_performance"}):o.length>0?Ga({appId:e.appId,metrics:i,baseInfo:r,interfaces:"log_20003",busid:"b_wxg_wxa_miniprogram_performance",dimensions:o}):Ga({appId:e.appId,metrics:i,baseInfo:r,interfaces:"log_20001",busid:"b_wxg_wxa_miniprogram_performance"}),delete La[n],Reporter.reportKeyValue({key:"PerfReport",value:[e.appId,r.platform,r.scene,r.brand,r.model,r.networkType,r.envType,i.key,i.value,i.num,parseInt(Date.now()/1e3,10)].join(",")})}}let Fa=null;function Ua(){const e="develop"===s.Z.envVersion||"trial"===s.Z.envVersion?60:Da.batchTime;Fa&&clearInterval(Fa),Fa=setInterval(Ba,1e3*e)}let Wa=!1;function ja(){Wa=!0,xa((()=>{setTimeout(Ba,3e4),Ua(),(0,mi.J)((()=>{Ba()})),(0,wa.T)((()=>{Ua()}))}))}function Ga({appId:e,metrics:t={},baseInfo:n={},interfaces:i="",busid:r="",dimensions:o}={}){const a=JSON.stringify({appId:e,base:n,metrics:t,dimensions:o,time:parseInt(Date.now()/1e3,10)}),s=JSON.stringify({interface:i,busid:r,data:a});sr(1002,s,!0)}function Va({appId:e,metrics:t={},baseInfo:n={},interfaces:i="",busid:r="",dimensions:o}={}){if(!Da.enabled)return;const a=JSON.stringify({appId:e,base:n,metrics:t,dimensions:o,time:parseInt(Date.now()/1e3,10)});Ma({apiName:"UploadByApi",reqData:{interface:i,busid:r,data:a}}).catch((()=>{}))}const Ha=4294967295;function za(e,t,n,i){Da.enabled&&(e||"number"==typeof e||console.warn("[reportPerformance] id can not be empty"),t||"number"==typeof t||console.warn("[reportPerformance] value can not be empty"),e=parseFloat(e),t=parseFloat(t),(Number.isNaN(e)||"number"!=typeof e)&&console.warn("[reportPerformance] id should always be type of Number"),e>=0&&e<=Ha||console.warn("[reportPerformance] id is out of range, will probably cause report failure"),(Number.isNaN(t)||"number"!=typeof t)&&console.warn("[reportPerformance] id should always be type of Number"),t>=0&&t<=Ha?(void 0===n||Array.isArray(n)||(n=[String(n)]),Array.isArray(n)&&(n.length>2&&console.warn("[reportPerformance] expected dimensions length to be less than or equals to 2, but got",n.length),0===(n=n.slice(0,2)).length&&(n[0]="",n[1]=""),1===n.length&&(n[1]=""),n=n.map((e=>e?String(e):"")).map((e=>e.substring(0,256)))),n&&Array.isArray(n)||(n=[]),Pa||(Pa=!0,Oa=hr().then((e=>{let t;try{t=JSON.parse(e.rawData)}catch(e){}if(t){const e=t.PerformaceGlobalConf,n=t.PerformacePersonalConf;e&&(void 0!==e.PerformanceOldReportOff&&(Da.legacyReportEnabled=!(1===e.PerformanceOldReportOff)),void 0!==e.PerformanceReportMaxNum&&(Da.bufferCapacity=parseInt(e.PerformanceReportMaxNum,10)),void 0!==e.PerformanceMiniprogramlibGatherTime&&(Da.batchTime=60*parseInt(e.PerformanceMiniprogramlibGatherTime,10))),n&&(void 0!==n.PerformanceMiniprogramlibOff&&(Da.enabled=!(1===n.PerformanceMiniprogramlibOff)),void 0!==n.PerformanceMiniprogramlibGatherTime&&(Da.batchTime=60*parseInt(n.PerformanceMiniprogramlibGatherTime,10)),void 0!==n.PerformanceMiniprogramlibSamplingRatio&&(Da.sampleRate=parseInt(n.PerformanceMiniprogramlibSamplingRatio,10)/100)),Da.userUin=t.UserUin,300!==Da.batchTime&&Ua()}})).catch((e=>{}))),Wa||ja(),xa((()=>{"release"===s.Z.envVersion&&1!==Da.sampleRate&&Da.userUin&&!Ra(Da.userUin,Da.sampleRate)||Na(e,t,n,i)}))):console.warn("[reportPerformance] value should be in range of",0," to",Ha))}var Za=n(7322);const Ya=o.Z.createBufferURL||(()=>""),$a=o.Z.revokeBufferURL||(()=>!1),qa=o.Z.createSignal||(()=>null);var Qa=n(7292);const Ja={request:m.a,showToast:Oe.CF,hideToast:Oe.PE,requestVirtualPayment:ye.mG.bu,requestPayment:ye.mG.Ls,getSystemInfo:ve.So,showModal:Oe.I6,getNetworkType:Ae.getNetworkType},Xa=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=44)}([function(e,t,n){var i=n(31);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}},function(e,t,n){var i;!function(e,t){function n(e,t){return(typeof t)[0]==e}function r(t,i,r,o,a){setTimeout((function(){try{o=a(o),a=o&&n("o",o)|n(e,o)&&o.then,n(e,a)?o==t?r(TypeError()):a.call(o,i,r):i(o)}catch(e){r(e)}}))}function o(e){return i((function(t){t(e)}))}(i=function(t,o){return(o=function a(s,c,l,u,d,h){function p(e){return function(t){d&&(d=0,a(n,e,t))}}if(u=a.q,s!=n)return i((function(e,t){u.push({p:this,r:e,j:t,1:s,0:c})}));if(l&&n(e,l)|n("o",l))try{d=l.then}catch(e){c=0,l=e}if(n(e,d))try{d.call(l,p(1),c=p(0))}catch(e){c(e)}else for(o=function(o,a){return n(e,o=c?o:a)?i((function(e,t){r(this,e,t,l,o)})):t},h=0;h<u.length;)d=u[h++],n(e,s=d[c])?r(d.p,d.r,d.j,l,s):(c?d.r:d.j)(l)}).q=[],t.call(t={then:function(e,t){return o(e,t)},catch:function(e){return o(0,e)},always:function(e){return o(e,(function(t){throw e(t),t}))},finally:function(e){return e||(e=function(){}),o((function(t){return i.resolve(e()).then((function(){return t}))}),(function(t){return i.resolve(e()).then((function(){throw t}))}))}},(function(e){o(n,1,e)}),(function(e){o(n,0,e)})),t}).resolve=o,i.reject=function(e){return i((function(t,n){n(e)}))},i.all=function(e){return i((function(t,n,i,r){r=[],i=e.length||t(r),e.map((function(e,a){o(e).then((function(e){r[a]=e,--i||t(r)}),n)}))}))},i.race=function(e){return i((function(t,n){e.map((function(e){o(e).then(t,n)}))}))}}("f"),t.a=i},function(e,t,n){function i(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];setTimeout((function(){return e.apply(void 0,i)}),t)}function r(e){return Object(c.a)(e)?e:[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.delay=i,t.debounce=function(e,t,n){var r,o,a=function(t,n){r=null,n&&(o=e.apply(t,n))},s=function(){r&&clearTimeout(r);for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];if(n){var u=!r;r=setTimeout(a,t),u&&(o=e.apply(this,c))}else r=i(a,t,this,c);return o};return s.cancel=function(){clearTimeout(r),r=null},s},n.d(t,"scene",(function(){return f})),t.toArray=r,n.d(t,"timer",(function(){return _})),t.endsWith=function(e,t){var n=e.length-t.length;return t.split("").every((function(t,i){return e[n+i]===t}))},t.retry=function(e,t){var n,r=t.times,o=t.interval,a=void 0===o?0:o,s=t.abort;return new l.a((function(t,o){!function c(){n=Date.now(),e().then(t).catch((function(e){if(0==--r)return o(e);if(s(e))return e.aborted=!0,o(e);var t=Date.now();a=Math.max(a-(t-n),0),i(c,a)}))}()}))},t.camelize=function(e){var t=function(e){return e.replace(/_([a-z0-9])/g,(function(e,t){return t.toUpperCase()}))};if(Object(s.a)(e))return t(e);if(Object(a.a)(e)){var n={};return Object(o.a)(e,(function(e,i){n[t(i)]=e})),n}return e},t.compact=function(e){var t={};return Object(o.a)(e,(function(e,n){void 0!==e&&(t[n]=e)})),t},t.normalizeOptions=function(e){var t={};return Object(o.a)(e,(function(e,n){t[n]=decodeURIComponent(e)})),t},t.signWithMD5=function(e,t){var n=(t||Object.keys(e)).sort().map((function(t){return e[t]?t+"="+e[t]:""})).join("&");return h(n+p.a.md5Salt).toUpperCase()};var o=n(10),a=n(6),s=n(9),c=n(7),l=n(1);n.d(t,"each",(function(){return o.a}));var u=n(16);n.d(t,"addParam",(function(){return u.a}));var d=n(17);n.d(t,"pick",(function(){return d.a}));var h=n(33),p=(n.n(h),n(11)),f=function(){var e={isQQMp:"object"==typeof qq,isWxPlugin:!1,isComponent:!1,isOwnerMP:!1};try{e.isWxPlugin=WECHATAPP_PLUGIN}catch(e){}try{e.isComponent=STANDALONE_COMPONENT}catch(e){}try{e.isOwnerMP=PLUGIN_OWNER_MP}catch(e){}return e}(),g={},_={start:function(e){(e=r(e)).forEach((function(e){g[e]=(new Date).getTime()}))},get:function(e,t){var n=(e=r(e)).map((function(e){var n=(new Date).getTime()-g[e];return t&&(g[e]=n),n}));return n.length>1?n:n[0]},stop:function(e){return _.get(e,!0)},clear:function(e){(e=r(e)).forEach((function(e){delete g[e]}))}}},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){var i=function(){function e(t){t instanceof e?(this.stack=t.stack,this.message=t.message,this.name=t.name,this.info=t.info):(this.stack=(new Error).stack,this.message=t.msg,this.name="PayError",this.info=t)}return e.except=function(t){throw new e(t)},e.reject=function(t){return Promise.reject(new e(t))},e.prototype.toString=function(){return"PayError: "+this.message},e}();t.a=i},function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s}));var i,r={SUCCESS:0,FAIL:-1,CANCEL:-2,INTERFACE_NOT_EXIST:-3,RISK_INTERCEPT:-4,UNKNOWN:-5,PARAMS_ERROR:1e3},o=((i={})[r.SUCCESS]="支付成功",i[r.FAIL]="支付失败",i[r.CANCEL]="支付取消",i[r.PARAMS_ERROR]="参数错误",i[r.INTERFACE_NOT_EXIST]="接口不存在",i[r.RISK_INTERCEPT]="风控拦截",i[r.SIGN_SUCCESS]="签约成功",i[r.SIGN_FAIL]="签约失败",i.CHANNEL_NOT_SUPPORT="渠道不支持",i),a={FAIL:{ret:r.FAIL,msg:o[r.FAIL]}},s=function(e){return{ret:e,msg:o[e]}}},function(e,t,n){t.a=function(e){return Object(i.a)("Object",e)&&null!==e};var i=n(13)},function(e,t,n){t.a=function(e){return Object(i.a)("Array",e)};var i=n(13)},function(e,t,n){function i(e,t){try{return e()}catch(e){return t?t(e):null}}var r=n(0),o=n.n(r),a=n(1),s=["showModal","hideModal","showToast","hideToast","getSystemInfo","getNetworkType","requestPayment","requestVirtualPayment","navigateTo","navigateToMiniProgram","openBusinessView"].reduce((function(e,t){return e[t]=function(e){return new a.a((function(n,i){try{Ja[t](o()({},e,{success:n,fail:i}))}catch(e){n(!0)}}))},e}),{}),c={onAppShow:[]};s.onAppShow=function(e){c.onAppShow.push(e),i((function(){return Ja.onAppShow(e)}))},s.offAllAppShow=function(){c.onAppShow.forEach((function(e){i((function(){return Ja.offAppShow(e)}))}))},t.a=s},function(e,t,n){t.a=function(e){return Object(i.a)("String",e)};var i=n(13)},function(e,t,n){t.a=function(e,t){var n,r=0;if(Object(i.a)(e)){var o=e.length;for(n=e[0];r<o&&!1!==t.call(n,n,r,e);n=e[++r]);}else for(var a in e)if(!1===t.call(e[a],e[a],a,e))break;return e};var i=n(7)},function(e,t,n){t.c=function(){return"2.3.4"},t.b=function(){return["pf_header","wcp"]},n.d(t,"a",(function(){return i}));var i={md5Salt:"TwDbiyLgv93ysymjH6sHujMTXs9ehwe1"}},function(e,t,n){var i=n(23),r=n(0),o=n.n(r),a=new(function(){function e(){}var t=e.prototype;return t.getSdkParam=function(e){return void 0===e?this._sdkParam:this._sdkParam[e]},t.setSdkParam=function(e){this._sdkParam=o()({},this._sdkParam,e)},t.setInfo=function(e){this._info=e},t.getInfo=function(e){return void 0===e?this._info:Object(i.a)(this._info,e)},e}());t.a=a},function(e,t,n){t.a=function(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&n===e}},function(e,t,n){t.a=function(e,t){if(void 0===t&&(t=!0),!Object(i.a)(e))return"";var n=[];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&void 0!==e[r]&&null!==e[r]){var o=t?encodeURIComponent(r):r,a=t?encodeURIComponent(e[r]):e[r];n.push(o+"="+a)}return n.join("&")};var i=n(6)},function(e,t,n){t.a=function(e){if(!Object(r.a)(e))return[];var t=[];return Object(i.a)(e,(function(e,n){t.push(n)})),t};var i=n(10),r=n(6)},function(e,t,n){var i=n(14),r=n(10),o=n(15),a=n(6);t.a=function(e,t){if(!Object(a.a)(e))return t;var n=Object(o.a)(e);if(0===n.length)return t;t=function(e,t){return void 0===t&&(t=location.href),e instanceof Array||(e=[e]),t=t.replace(/[\r\n]/g,""),Object(r.a)(e,(function(e){t=(t=t.replace(new RegExp("(?:&"+e+"=[^&]*)","g"),"")).replace(new RegExp("(?:\\?"+e+"=[^&]*&?)","g"),"?")})),t}(n,t);var s=Object(i.a)(e);return t+(/(\?|&)$/.test(t)?""+s:/\?/.test(t)?"&"+s:"?"+s)}},function(e,t,n){t.a=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})}},function(e,t,n){t.a=function(){}},function(e,t,n){t.a=function(e,t,n){void 0===e&&(e=location.href),void 0===t&&(t="&"),void 0===n&&(n="=");var r=e.replace(/.+?\?/,"").replace(/#.*/,""),o=r.split(t);return i[r]||(i[r]=o.reduce((function(e,t){var i=t.indexOf(n);if(i>-1){var r=t.substr(0,i);if(r){var o=t.substr(i+1);try{e[r]=decodeURIComponent(o)}catch(t){e[r]=o}}}return e}),{})),i[r]};var i={}},function(e,t,n){n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"g",(function(){return p}));var i=n(9),r=n(7),o=Object.prototype.hasOwnProperty,a=function(e,t){var n=function(e,t){if(!Object(r.a)(t))throw new Error("arr should be array! found: "+t);return t.filter((function(t){if(Object(i.a)(t))return!(o.call(e,t)&&""!==e[t]);if(Object(r.a)(t)){var n=t[0],a=t[1];return!(o.call(e,n)&&a(e[n]))}throw new Error("validate item should be string or array.")})).map((function(e){return Object(r.a)(e)?e[0]:e}))}(e,t);return 0===n.length?{status:!0,msg:""}:{status:!1,msg:n.join(", ")+" 错误"}},s=function(e,t){return void 0===t&&(t=[]),a(e,["offer_id","openid"].concat(t))},c=function(e,t){return void 0===t&&(t=[]),s(e,["buy_quantity","pf","zoneid"].concat(t))},l=function(e){return s(e,["buy_quantity","provide_uin"])},u=function(e){return c(e,["provide_uin"])},d=function(e){return s(e,["pf","service_code"])},h=function(e){return s(e,[["goodstokenurl",function(e){return/\d+\/[A-Za-z_-]+\?[A-Za-z_-]+=/.test(e)}],"zoneid","pf"])},p=function(e){return s(e,["pf","service_id"])}},function(e,t,n){n.d(t,"a",(function(){return o}));var i=n(0),r=n.n(i),o=function(){function e(e){var t=e.ret,n=e.err_code,i=void 0===n?"":n,r=e.msg;this.result={resultCode:t,resultMsg:r,innerCode:i}}var t=e.prototype;return t.setExtra=function(e){return void 0===e&&(e={}),this.result=r()({},this.result,e),this},t.getResult=function(){return this.result},e}()},function(e,t,n){function i(e){return Object(o.a)("Function",e)}var r=n(7),o=n(13);t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return i(e)?Object(r.a)(t[0])?e.call.apply(e,[null].concat(t[0])):e.call.apply(e,[null].concat(t)):null}},function(e,t,n){function i(e,t){for(var n=0,i=t.split(".");e&&n<i.length;)e=e[i[n++]];return e}t.a=function(){var e=Array.prototype.slice.call(arguments);return i(e[0],e.slice(1).join("."))}},function(e,t,n){t.a=function(e,t){var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[],r=0;if(t=t||n.length,e)for(r=0;r<e;r++)i[r]=n[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)if(!i[r]){var o=0|16*Math.random();i[r]=n[19===r?3&o|8:o]}return i.join("")}},function(e,t,n){function i(e,t){if(!Object(a.a)(t)||0===t.length)return e;var n=t.reduce((function(e,t){return e[t]=!0,e}),{});return Object(o.a)(e).reduce((function(t,i){return n[i]||(t[i]=e[i]),t}),{})}var r=n(14),o=n(15),a=n(7),s=n(6),c=n(0),l=n.n(c),u=n(3),d=n.n(u),h=n(32),p=n.n(h),f=n(5),g=n(21),_=n(2),m=n(22),y=n(8),v=n(17),A=function(e){var t={0:0,"-1":-1,2:-2,3:1e3},n=String(e.errCode||e.resultCode),i=e.errMsg||e.resultMsg||"";if(Object.prototype.hasOwnProperty.call(t,n))return{resultCode:t[n],resultMsg:i};var r=f.b.FAIL;return{resultCode:r,resultMsg:f.d[r]}},b=n(12),w=n(34),E=n(30);n.d(t,"a",(function(){return x}));var T,S,C,I,x=(T=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=3e3),function(n,i,r){var o=r.value;return r.value=Object(_.debounce)(o,t,e),r}}(),S=function(e,t,n){if("launchPay"!==t)return n;var i=n.value;return n.value=function(){for(var e=this,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(~~this.opt.env){if(this.opt.__unsafe_disable_sandbox_tips)return void i.apply(this,r);y.a.showModal({content:"温馨提示：您即将进入测试环境，任何充值都无法在真实环境中使用。若您不是测试人员，请勿充值。",showCancel:!1}).then((function(t){t.confirm?i.apply(e,r):Object(m.a)(n.value.cancel)}))}else i.apply(this,r)},n},C=function(e,t,n){if(_.scene.isQQMp){var i=n.value;n.value=function(e,t){if(!e.useRequestMidasPayment)return i.call(this,e,t);var r=Object(_.camelize)(e),o=Object(_.compact)(l()({zoneId:r.zoneid||r.zoneId||"1"},Object(v.a)(r,["offerId","buyQuantity","isCanChange","discountId","aid","other"]),r._internal_qq_req_mdspay_param,{success:function(e){return t(A(e))},fail:function(e){return t(A(e))},complete:function(){return n.value.cancel&&n.value.cancel()}}));qq.requestMidasPayment(o)}}return n},I=function(e){function t(t,n){var i;return(i=e.call(this)||this).opt=t||{},b.a.setSdkParam(i.opt),i.api=n,i.name="BaseApi",i.params=null,i.callback=null,i.AppClass=null,i.app=null,i.callbackInvoked=!1,y.a.offAllAppShow(),i.checkUpdate({silent:t.silent}),i}d()(t,e);var n=t.prototype;return n.launchPay=function(e,t){var n=this;if("function"!=typeof t)throw new Error("Callback must be a function.");if(this.callbackInvoked)throw new Error("Midas instance should be re-initialized before calling `launchPay`.");this.params=e||{},b.a.setSdkParam(this.params),this.callback=t,this.app=new this.AppClass({params:e,opt:this.opt,api:this}),this.app.report("payparams",l()({},e,this.opt)),Object(s.a)(e.context)&&(e.context.__MIDAS_EXTEND__={report:this.app.report.bind(this.app),util:_}),this.app.pay().then((function(e){return n.constructResult(e)})).then((function(e){return n.invokeCallback(e)})).catch((function(e){return n.errorCallback(e)})).finally((function(){return n._destroy()}))},n.launchFeature=function(e,t){switch(e.type){case"ask":return e.goodstokenurl="/v1/r/"+e.offer_id+"/mobile_goods_info?friends_pay_msg="+e.order_id+"&token_store_type=1&friends_pay_source=mobile",delete e.order_id,delete e.type,this.launchPay(e,t);case"pay_score":return function(e){return void 0===e}(e.direct_channel)&&(e.direct_channel="wechat"),e.enablePayScore=!0,this.launchPay(e,t);case"friends_pay_order":return e.isFriendsPayOrder=!0,this.launchPay(e,t);default:throw new Error("type is not valid.")}},n.cancel=function(){"function"==typeof this.launchPay.cancel&&this.launchPay.cancel()},n.constructResult=function(e){return void 0===e&&(e={}),new g.a(e).setExtra(e.extra).getResult()},n.errorCallback=function(e){var t=l()({},i(e.info,["ret","msg","err_code"]),e.extra);if("PayError"===e.name){var n=new g.a(e.info).setExtra(t).getResult();if("FRIENDS_PAY_ORDER"===n.resultMsg){var o=b.a.getInfo("info.rate"),a=this.params.buy_quantity;return n.info&&!n.info.price_level&&(n.info.price_level=Math.round(a/parseInt(o))),n.info.friends_pay_msg=n.info.token,delete n.info.token,this.invokeCallback({resultCode:0,resultMsg:"下单成功",extendInfo:{token:Object(r.a)(n.info),priceLevel:n.info.price_level}})}return this.invokeCallback(n)}if(e.msg&&e.ret){var s=new g.a(e).setExtra(t).getResult();return this.invokeCallback(s)}return this.app&&this.app.clientLog("JS ERROR: "+e.message+". stack: "+e.stack,190,"midaspay/api/base-api.js"),this.invokeCallback()},n.invokeCallback=function(e){if(this.app.report("invoke.callback",l()({},e,{invoked:this.callbackInvoked})),!this.callbackInvoked&&"function"==typeof this.callback){var t=e||this.constructResult(f.a.FAIL);this.callback(t),this.callbackInvoked=!0}},n.destroy=function(){},n._destroy=function(){y.a.offAllAppShow(),this.invokeCallback(),b.a.getSdkParam("hide_loading")||y.a.hideToast(),this.cancel();try{this.app&&this.app.destroy&&(this.app.destroy(),this.app=null),this.callback=null,this.api.instance=null}catch(e){}},n.checkUpdate=function(e){return Object(E.a)(e)},n.log=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).log.apply(e,[this.name].concat(n))},t}(w.TinyEmitter),p()(I.prototype,"launchPay",[T,S,C],Object.getOwnPropertyDescriptor(I.prototype,"launchPay"),I.prototype),I);x.createApi=function(e){return{init:function(t){return void 0===t&&(t={}),this.instance=new e(t,this),this.instance},get:function(){if(!this.instance)throw new Error(e+" is not initialized.");return this.instance},destroy:function(){this.instance&&(this.instance.destroy(),this.instance=null)}}}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var i=n(18),r=n(4),o=n(7),a=n(23),s=n(22),c=n(0),l=n.n(c),u=n(19),d=n(17),h=n(3),p=n.n(h),f=n(2),g=n(1),_=n(5),m=n(21),y=function(){function e(e,t,n){void 0===n&&(n={}),this.app=e,this.payMod=t,this.params=n,this.payMod.cgi.setChannel(this),this.name="",this.buyReportIformat="",this.payReportIformatPrefix=""}var t=e.prototype;return t.buildBuyParams=function(e){},t.beforeSave=function(){return g.a.resolve()},t.buyAndPay=function(e){var t=this;this.report(this.buyReportIformat);var n=this.buildBuyParams(e);return this.beforeSave().then((function(){return t.params.enablePayScore?t.payMod.enablePayScore():t.params.isFriendsPayOrder?t.payMod.friendsPayOrder():t.payMod.save(n)})).then((function(e){return t.params.isFriendsPayOrder&&(~~e.ret?r.a.except(e):r.a.except({info:e.info,msg:"FRIENDS_PAY_ORDER"})),e})).then((function(e){return t.beforePay(e)})).then((function(e){return t.pay(e,n)}))},t.beforePay=function(e){return f.timer.start(this.name+"pay"),e},t.pay=function(e,t){},t.getChannelName=function(){return""},t.constructResult=function(e,t){return void 0===t&&(t={channel:this.getChannelName()}),new m.a(e).setExtra(t).getResult()},t.reportPay=function(e,t){var n="fail"===e?{resultCode:-9999}:void 0;this.report(this.payReportIformatPrefix+"."+e+".callback",l()({},t,{times:f.timer.get(this.name+"pay")}),n)},t.report=function(e,t,n){this.app.report(e,t,n)},t.log=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).log.apply(e,[this.name].concat(n))},e}();y.ResultAdapter=m.a;var v=n(8),A=n(12),b=function(e){function t(t,n,i){var r;return void 0===i&&(i={}),(r=e.call(this,t,n,i)||this).name="WechatChannel",r.api=r.app.api,r.buyReportIformat="wechat.buy",r.payReportIformatPrefix="wechat_pay",r.buyParams={},r}p()(t,e);var n=t.prototype;return n.buildBuyParams=function(e){return this.buyParams=l()({wx_direct_pay:this.params.referer?3:0,wx_publice_pay:1,pay_method:"wechat"},e),"1"==this.payMod.getPayParams().change_wx_openid&&(this.buyParams.change_wx_openid="1"),this.buyParams},n.getChannelName=function(){return"wechat"},n.pay=function(e,t){if(e.wx_info=e.wx_info||{},e.info=e.info||{},this.report("wechat.handlebuy",e&&e.wx_info),v.a.hideToast(),f.scene.isOwnerMP||f.scene.isWxPlugin)return g.a.resolve({ret:0,extra:{wx_info:e.wx_info}});if(e.info.service_id)return this.payScore(e.info);var n=this.getSignUrl(e);return n?(this.wxSerialNo=e.wx_info?e.wx_info.wx_serialno:"",this.sign(n)):this.requestPayment(e)},n.payScore=function(e){var t=this;this.report("payscore.params",e);var n=function(){var e=A.a.getSdkParam("wx_api"),t="",n={};return"openBusinessView"===e?(t=e,n={businessType:"wxpayScoreEnable"}):(t="navigateToMiniProgram",n={appId:"wxd8f3793ea3b935b8",path:"pages/use/enable"}),{payScoreApi:t,payScoreParams:n}}(),i=n.payScoreApi,o=n.payScoreParams,a=A.a.getSdkParam("wx_extra")||{};return v.a[i](l()({},o,{extraData:Object(d.a)(e,["mch_id","service_id","out_request_no","timestamp","nonce_str","sign_type","sign"]),envVersion:A.a.getSdkParam("mp_env")},a)).then((function(){return r.a.except({ret:_.b.UNKNOWN,msg:"信用分开通结果未知，请从后台查询"})})).catch((function(e){if(e instanceof r.a)throw e;return t.report("payscore.navigate.error",e),r.a.except({ret:_.b.FAIL,msg:e.errMsg||"开通信用分失败"})}))},n.sign=function(e){var t=this,n=Object(u.a)(e);return this.report("sign.params",n),this.unknownError=new r.a({ret:_.b.UNKNOWN,msg:"签约结果未知"}),v.a.navigateToMiniProgram({appId:"wxbd687630cd02ce1d",path:"pages/index/index",extraData:n}).then((function(e){var n=new g.a((function(e,n){Object(f.delay)((function(){t.report("sign.timeout"),n(t.unknownError)}),15e3)}));return g.a.race([t.onNavigationSuccess(e,"wxbd687630cd02ce1d"),n])})).catch((function(e){if(e===t.unknownError)throw e;t.report("sign.navigate.error",e),r.a.except({ret:_.b.FAIL,msg:e.errMsg||"签约失败"})}))},n.onNavigationSuccess=function(e){var t=this;return this.report("sign.navigate.success",e),this.api.emit("navigateToSign"),new g.a((function(e,n){v.a.onAppShow((function(i){var o=i.referrerInfo||{},a=o.appId,s=o.extraData;if("wxbd687630cd02ce1d"===a){var c=s&&"SUCCESS"!==s.return_code,u=s&&"SUCCESS"===s.return_code,d={ret:_.b.SUCCESS,msg:"签约成功"};if(u)return e(l()({},d,{extra:{contractId:s.contract_id}}));if(c)throw Error();return t.wxSerialNo?(t.app.showPayLoading({duration:10,title:"查询结果中..."}),t.payMod.querySignResult(t.wxSerialNo).then((function(n){return t.report("query.sign.success",n),e(d)})).catch((function(e){return t.report("query.sign.fail",e),n(e&&e.info&&5===e.info.status?new r.a({ret:_.b.FAIL,msg:"签约失败"}):t.unknownError)}))):n(t.unknownError)}}))}))},n.requestPayment=function(e){var t=this,n=e.wx_info||{},i=n.wx_time,o=n.wx_noncenum,a=n.wx_package,s=n.wx_signtype,c=void 0===s?"SHA1":s,d=n.wx_sign;if(this.report("wechatpay.start.pv",e.wx_info),this.params.wx_h5pay){var h=Object(u.a)(d),p=e.info.portal_serial_no;return Ja.getSystemInfoSync().isQB&&this.params.referer?new g.a((function(n){Ja.requestPayment(l()({},h,{referer:t.params.referer,complete:function(){return n({ret:_.b.UNKNOWN,msg:"支付结果未知，请从后台查询",extra:{portalSerialNo:e.info.portal_serial_no}})}}))})):{ret:_.b.SUCCESS,msg:"",extra:l()({},h,{mweb_url:d,portalSerialNo:p})}}return v.a.requestPayment({timeStamp:i,nonceStr:o,package:a,signType:c,paySign:d}).then((function(e){return t.log("pay success",e),t.reportPay("success",e),{ret:_.b.SUCCESS,msg:e.errMsg}})).catch((function(e){t.log("pay fail ",e),t.report("fail",e);var n=(e.errMsg||"").indexOf("cancel")>-1?_.b.CANCEL:_.b.FAIL,i=void 0===e.errCode?n:e.errCode,o=e.errMsg||_.d[i];r.a.except({ret:i,msg:o})}))},n.getSignUrl=function(e){return e.wx_info.wx_sign_url||decodeURIComponent(e.url||"")},t}(y),w=function(e){function t(t,n,i){var r;return void 0===i&&(i={}),(r=e.call(this,t,n,i)||this).name="WechatAppChannel",r.buyReportIformat="wechat_app.buy",r.payReportIformatPrefix="wechatapp_pay",r}p()(t,e);var n=t.prototype;return n.beforeSave=function(){return Ja&&Ja.requestVirtualPayment?g.a.resolve():(this.report("requestVirtualPayment.notexist"),r.a.reject({ret:_.b.INTERFACE_NOT_EXIST,msg:_.d[_.b.INTERFACE_NOT_EXIST]}))},n.buildBuyParams=function(e){if(this.payMod.needCurrencyType(this.getChannelName()))return this.app.paramsError("需要currency_type参数");var t=l()({currency_type:this.payMod.getCurrencyType(),pay_method:this.getChannelName()},e);return"1"==this.payMod.getPayParams().change_wx_openid&&(t.change_wx_openid="1"),t},n.getChannelName=function(){return"wechatapp"},n.pay=function(e,t){var n=this;return this.report("wechat_app.handlebuy",e&&e.wechatapp_info),v.a.hideToast(),new g.a((function(t,i){var o=e.wechatapp_info||{},a=o.price_level,s=o.orderid,c=o.orderid,l=o.desc,u=o.sign;n.report("wechatapp_pay.start.pv"),Ja.requestVirtualPayment({priceLevel:a,businessOrderId:s,outTradeNo:c,desc:l,virtualPaySign:u,success:function(e){n.reportPay("success",e);var i=_.b.SUCCESS,r=e.errMsg;t({ret:i,msg:r})},fail:function(e){n.reportPay("fail",e);var t=e.errMsg||"",o=t.indexOf("cancel")>-1?_.b.CANCEL:_.b.FAIL,a=void 0===e.errCode?o:e.errCode,s=t||_.d[a];i(new r.a({ret:a,msg:s}))}})}))},t}(y),E=function(e){function t(t,n,i){var r;return void 0===i&&(i={}),(r=e.call(this,t,n,i)||this).name="QQWalletChannel",r.api=r.app.api,r.buyReportIformat="qqwallet.buy",r.payReportIformatPrefix="qqwallet_pay",r.buyParams={},r}p()(t,e);var n=t.prototype;return n.buildBuyParams=function(e){return this.buyParams=l()({cft_type:"tokenid",pay_method:"qqwallet"},e),this.buyParams},n.getChannelName=function(){return"qqwallet"},n.pay=function(e){return e.qqwallet_info=e.qqwallet_info||{},this.report("qqwallet.handlebuy",e&&e.qqwallet_info),v.a.hideToast(),this.requestPayment(e.qqwallet_info)},n.requestPayment=function(e){var t=this,n=e||{},i=n.qqwallet_bargainorId,o=n.qqwallet_tokenId;return this.report("qqwalletpay.start.pv",e),v.a.requestPayment({bargainor_id:i,package:"prepay_id="+o}).then((function(e){return t.reportPay("success",e),{ret:_.b.SUCCESS,msg:e.errMsg}})).catch((function(e){t.report("fail",e);var n=(e.errMsg||"").indexOf("cancel")>-1?_.b.CANCEL:_.b.FAIL,i=void 0===e.errCode?n:e.errCode,o=e.errMsg||_.d[i];throw new r.a({ret:i,msg:o})}))},t}(y),T={wechat:function(e,t,n){return void 0===n&&(n={}),new b(e,t,n)},wechatapp:function(e,t,n){return void 0===n&&(n={}),new w(e,t,n)},qqwallet:function(e,t,n){return void 0===n&&(n={}),new E(e,t,n)}},S=n(14),C=n(24),I=n(11),x=function(){function e(){this.reportQueue=[],this.pid=0,this.iformatPrefix="",this.env={},this.params={},this.transactionId=Object(C.a)()+"_"+(new Date).getTime(),this.handleReportComplete=this.handleReportComplete.bind(this),this.name="Report"}var t=e.prototype;return t.constructParams=function(e,t,n){void 0===n&&(n={});var i=l()({6:10,7:0,8:t?Object(S.a)(t):"",13:this.pid++,21:[this.iformatPrefix,e].join("."),31:"midas_wx_sdk_"+Object(I.c)(),38:(new Date).getTime(),29:this.transactionId},n);return Object.keys(i).map((function(e){return e+"="+encodeURIComponent(i[e])})).join("|")},t.doSend=function(){var e,t=this,n=this.reportQueue[0]||{},i=n.iformat,r=n.resultInfo,o=n.opt;if(i){var a=Ja.request({url:"https://api.unipay.qq.com/v1/900/15499/log_data",method:"POST",data:{num:1,record0:this.constructParams(i,r,o),rr:Math.random()},header:{"content-type":"application/x-www-form-urlencoded"},complete:function(){clearTimeout(e),t.handleReportComplete()}});e=setTimeout((function(){try{a.abort()}catch(e){}}),3e3)}},t.handleReportComplete=function(){this.reportQueue.shift(),this.reportQueue.length>0&&this.doSend()},t.send=function(e,t,n){var i=this;void 0===n&&(n={}),this.reportQueue.push({iformat:e,resultInfo:t,opt:n}),1===this.reportQueue.length&&setTimeout((function(){i.doSend()}),0)},t.destroy=function(){},t.setIformatPrefix=function(e){this.iformatPrefix=e},t.setDefaultParams=function(e){this.params=e},t.init=function(){var e=this;if(this.report("before.checkenv"),this.env.model)return this.report("after.checkenv",this.env),this.env,g.a.resolve(this.env);var t=v.a.getSystemInfo().then((function(t){e.env=l()({},e.env,t)})).catch(i.a),n=v.a.getNetworkType().then((function(t){void 0===t&&(t={}),t.networkType,e.env.networkType=t.networkType})).catch(i.a);return g.a.all([t,n]).then((function(){e.report("after.checkenv",e.env),e.env}))},t.getPlatform=function(){var e=this.env;return e.model?e.model.indexOf("iPhone")>-1?"ios":"android":""},t.getLibVersion=function(){var e=this.env;return e&&e.version||""},t.report=function(e,t,n){void 0===n&&(n={}),this.iformatPrefix.split(".").slice(1).join("."),this.send(e,t,{3:this.params.openid||"",37:this.params.session_id||"",43:this.params.session_type||"",41:this.params.login_wx_appid||"",26:this.params.pf||"",7:n.resultCode||0,19:this.params.service_code||"",24:this.params.offer_id||"",50:this.getPlatform()+"_"+this.getLibVersion(),51:this.params.aid||""})},t.log=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).log.apply(e,[this.name].concat(n))},e}(),D=n(20);n.d(t,"a",(function(){return O}));var O=function(){function e(e){var t=e.params,n=void 0===t?{}:t,i=e.opt,r=e.api;this.params=n,this.opt=i,this.env={},this.payMod=null,this.api=r,this.params=l()({},n,{env:~~i.env,bizAppId:this.getBizAppid(n)}),this.validator=D.d,this.reportObj=new x,this.reportObj.setDefaultParams(this.params)}var t=e.prototype;return t.beforePay=function(){if(f.timer.start(this.name+"paystart"),this.showPayLoading(),"function"==typeof this.validator&&!this.params._skipValidation){this.validator=this.params.enablePayScore?D.g:this.validator;var e=this.validator(this.params);return e.status?this.checkEnv():this.paramsError(e.msg)}return this.checkEnv()},t.pay=function(){var e=this;return this.beforePay().then((function(){if(!e.params.direct_channel)return e.payMod.getInfo()})).then((function(t){return e.getPayChannel(t)})).then((function(t){return e.directPay(t)}))},t.checkEnv=function(){return this.reportObj.init()},t.report=function(e,t,n){void 0===n&&(n={}),this.reportObj.report(e,t,n)},t.clientLog=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.report("client.log",{msg:e,line:t,file:n})},t.getPayChannel=function(e){if(Object(s.a)(this.params.onPayInfo,e),this.params.direct_channel)return g.a.resolve(this.params.direct_channel);A.a.setInfo(e);var t=Object(a.a)(e,"info.channel");if(Object(o.a)(t)){var n=f.scene.isQQMp,i={qqwallet:n,wechat:!n,wechatapp:!n},c=t.filter((function(e){return i[e.name]}));if(c.length>0)return g.a.resolve(c[0].name)}return this.report("channel.info.exception",{},{resultCode:"-9999"}),r.a.reject({ret:_.b.FAIL,msg:_.d.CHANNEL_NOT_SUPPORT,err_code:t.map((function(e){return e.name})).join(", ")})},t.canDirectPay=function(e){return!(!e||!Object.prototype.hasOwnProperty.call(T,e))||(this.report("directpay.nosupport",{channel:e}),!1)},t.directPay=function(e){var t=this;return this.canDirectPay(e)?(this.report("directpay",{channel:e}),T[e](this,this.payMod,this.params).buyAndPay().then((function(e){return t.report("payduration",{time:f.timer.get(t.name+"paystart")}),e}))):r.a.reject({ret:_.b.FAIL,msg:_.d.CHANNEL_NOT_SUPPORT})},t.getBizAppid=function(e){return 1!==parseInt(this.opt.use_default_wxappid)?e.biz_appid||"1":""},t.paramsError=function(e){return void 0===e&&(e=""),r.a.reject({ret:_.b.PARAMS_ERROR,msg:e||_.d[_.b.FAIL]})},t.showPayLoading=function(e){var t=void 0===e?{}:e,n=t.duration,i=void 0===n?30:n,r=t.title,o=void 0===r?"支付中...":r;A.a.getSdkParam("hide_loading")||v.a.showToast({title:o,icon:"loading",mask:!0,duration:1e3*i})},t.hidePayLoading=function(){A.a.getSdkParam("hide_loading")||v.a.hideToast()},t.destroy=function(){this.callback=i.a,this.reportObj.destroy(),this.payMod.cgi.clearNetworkTask(),this.payMod=null},t.log=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).log.apply(e,[this.name].concat(n))},e}()},function(e,t,n){function i(e){return Object(u.a)(e,(function(t,n){Object(a.a)(t)&&""===t&&delete e[n],Object(s.a)(t)&&0===t.length&&delete e[n],Object(c.a)(t)&&(i(t),0===Object(l.a)(t).length&&delete e[n])})),e}function r(e){if(!Object(c.a)(e))return e.toString();try{var t=i(JSON.parse(JSON.stringify(e)));return JSON.stringify(t)}catch(t){return JSON.stringify(e)}}var o=n(4),a=n(9),s=n(7),c=n(6),l=n(15),u=n(10),d=n(0),h=n.n(d),p=n(19),f=function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},g=n(16),_=function(){function e(e){this.openid=e.openid.toString(),this.openkey=e.openkey||"",this.sessionid=e.sessionid,this.sessiontype=e.sessiontype}return e.createSession=function(t,n){return new e(f({},n,t))},e.createUinSkeySession=function(e){return this.createSession(e,this.uinSkeySchema)},e.createWechatSession=function(e){return this.createSession(e,this.wechatSchema)},e.createQQConnectSession=function(e){return this.createSession(e,this.qqConnectSchema)},e.createDummySession=function(e){var t=f({openkey:"nokey"},e);return this.createSession(t,this.dummySchema)},e.matchesSchema=function(e,t){return(Object(s.a)(t)?t:[t]).some((function(t){return e.sessionid===t.sessionid&&e.sessiontype===t.sessiontype}))},e.prototype.getSessionParam=function(){return{openid:encodeURIComponent(this.openid),openkey:encodeURIComponent(this.openkey),session_id:encodeURIComponent(this.sessionid),session_type:encodeURIComponent(this.sessiontype)}},e.prototype.addSessionParam=function(e){return Object(g.a)(this.getSessionParam(),e)},e.createSchema=function(e,t){return{sessionid:e,sessiontype:t}},e.wechatSchema=e.createSchema("hy_gameid","wc_actoken"),e.uinSkeySchema=e.createSchema("uin","skey"),e.qqConnectSchema=e.createSchema("openid","kp_accesstoken"),e.dummySchema=e.createSchema("hy_gameid","st_dummy"),e}(),m=n(11),y=n(12),v=n(24),A=n(35),b=n.n(A),w=n(5),E=n(1),T=n(18),S=n(8),C=n(2),I={5001:"buyQuantity参数错误，请参考虚拟支付教程中虚拟支付API接口说明",7007:"获取微信授权失败，请使用小游戏管理员账号重新授权登录",7006:"配置信息未发布沙箱，请在MP管理端将游戏币托管配置信息进行“沙箱发布”"},x=function(e){var t=h()({},e);if(1003===e.ret){var n=function(e){return Object(a.a)(e)&&e.split(/-+/)[1]||""}(e.err_code);I[n]&&(t.msg=I[n])}return 1138===e.ret?parseInt(y.a.getSdkParam("hide_risk_modal"))?E.a.resolve(t):function(e,t){var n=h()({},Object(w.c)(t),{err_code:e.err_code||"",extra:{resultInfo:e.msg}});return S.a.showModal({content:e.msg,showCancel:!1}).then((function(){return n})).catch((function(){return n}))}(t,w.b.RISK_INTERCEPT):t},D=function(e,t,n){if(2022===e.ret){var i=y.a.getSdkParam("context");if(!Object(c.a)(i))throw e;var r=h()({},e).flex_attack_info,a=void 0===r?{}:r,s=Object(C.pick)(t,["openid","openkey","session_id","session_type","from_h5","pf","pfkey","session_token","webversion","pay_method"]);"no_key"===s.openkey&&"wc_actoken"===s.session_type&&(s.session_type="st_dummy");var l=y.a.getSdkParam("hide_rc_switch"),u={hide_switch:void 0===l||l?1:"",amt:a.fk_amt,fk_info:encodeURIComponent(a.fk_info),from:"miniprogram",rcs_version:"1.0",r:Math.random(),type:"save",appid:y.a.getSdkParam("offer_id"),sandbox:y.a.getSdkParam("sandbox"),verify_url:a.verify_url},d=y.a.getSdkParam("rc_page")||"/pages/midas-rc/midas-rc",p=i.__MIDAS_EXTEND__,f=Object(g.a)(h()({},s,u),d);return new E.a((function(t,i){S.a.navigateTo({url:f}).catch((function(t){i(e)})),p.riskControlCallback=function(e,r){if(void 0===r&&(r={}),(e=e||{}).error&&!parseInt(y.a.getSdkParam("hide_risk_modal"))&&S.a.showModal({title:"提示",content:"对不起，目前不支持该验证方式，请选择其他验证方式并重试",showCancel:!1}),!r.fk_rc_token||e.error)return i(new o.a(Object(w.c)(w.b.RISK_INTERCEPT)));var a=n.buildBuyParams(r);n.payMod.save(a).then(t).catch(i),p.riskControlCallback=T.a}}))}throw e},O=function(e,t,n){void 0===e&&(e={});var i=null===n?"":n.getChannelName(),r=e.data||{},a={wechatapp:x,default:D},s="function"==typeof a[i]?a[i]:a.default;return E.a.resolve().then((function(){return s(r,t,n)})).catch((function(t){if(t instanceof o.a)throw t;throw Object(C.pick)(e.data,["msg","ret","err_code"])}))},P=function(){function e(e){void 0===e&&(e={}),this.pf=e.pf||"html5",this.pfkey=e.pfkey||"pfkey",this.appid=e.appid,this.sandbox=~~e.sandbox,this.sessionObj=e.sessionObj||null,this.mid=e.mid||"r",this.domain="api.unipay.qq.com",1===this.sandbox?this.domain="sandbox.api.unipay.qq.com":2===this.sandbox&&(this.domain="dev.api.unipay.qq.com"),this.domainq=this.sandbox?"sandbox.api.unipay.qq.com":"q.unipay.qq.com",this.sessionToken=e.sessionToken||Object(v.a)()+(new Date).getTime(),e.extend&&(this.extend=e.extend),this.requestTasks={},this.taskId=0,this.channel=null}var t=e.prototype;return t.setChannel=function(e){this.channel=e},t.setEnv=function(e){if(e&&this.sandbox)switch(this.env=e,e){case"dev":this.domain="dev.api.unipay.qq.com";break;case"sandbox":this.domain="sandbox.api.unipay.qq.com"}},t.restoreEnv=function(){this.sandbox&&this.setEnv("sandbox")},t._getCgiUrl=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),function(e,t){return Object(a.a)(e)&&Object(c.a)(t)?e.replace(/\$([a-zA-Z0-9_\.]*)\$/g,(function(e,n){if(-1!==n.indexOf(".")){n=n.split(/\./g);var i=t;return Object(u.a)(n,(function(e){i=i[e]})),i||""}return void 0!==t[n]?t[n]:""})):e}(e.url,h()({appid:this.appid,mid:this.mid||"r",domain:"https://"+(n.domainq?this.domainq:this.domain)},t))},t.setSession=function(e){this.sessionObj=e},t._getSessionParam=function(){return h()({pf:this.pf,pfkey:this.pfkey,from_h5:1,session_token:this.sessionToken,r:Math.random()},this.sessionObj.getSessionParam())},t.wxOpenBusiness=function(t,n){var i=h()({sub_channel:2},t,this._getSessionParam(),{wechatapp_proxy_type:"wx_open_business"});return i.sig=Object(C.signWithMD5)(i,["openid","openkey","session_id","session_type","service_id"]),this.request(this._getCgiUrl(e.url.wechatAppProc),i,n)},t.getToken=function(t,n){var i=h()({action:"new_friends_pay",friends_pay_source:"wechatapp",type:"save"},t,this._getSessionParam(),{wechatapp_proxy_type:"get_token"});return this.request(this._getCgiUrl(e.url.wechatAppProc),i,n)},t.request=function(e,t,n){var i=this;if(void 0===t&&(t={}),void 0===n&&(n={}),!Ja)throw new Error("wx is not defined.");t.webversion="midaswxapp_"+Object(m.c)();var r,o=this.genTaskId();return(e.split("?")[0]||"").match(/(\w+)$/),new E.a((function(a,s){var c=Ja.request({url:e,method:n.method||"GET",header:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},data:t,success:function(e){void 0===e&&(e={});var n={ret:-9998,httpCode:e.statusCode,msg:"系统繁忙，请稍后再试！"};return e.statusCode>=200&&e.statusCode<=299?e.data&&0===e.data.ret?a(e.data):(e.data.ret||(e.data=n),e.data.msg=e.data.msg||n.msg,O(e,t,i.channel).then(a).catch(s)):s(n)},fail:function(e){var t=e.errMsg||"";return s({ret:-9999,msg:"请求超时！（"+t+"）"})},complete:function(){i.clearSingleNetworkTask(o),r=null}});r=setTimeout((function(){r=null;try{c.abort()}catch(e){}}),12e3),i.addNetworkTask(o,c,r)}))},t.mobileSaveGoods=function(t,n){void 0===t&&(t={});var i=t._params;delete t._url,delete t._mid,delete t._params;var r=h()({biz_appid:this.sessionObj.appid||""},this._getSessionParam(),t);return i&&/\/mobile_goods_info\?/.test(i)&&(i=i.replace(/mobile_goods_info\?.+/,"wechatapp_proc")),this.request(this._getCgiUrl(e.url.mobileSaveGoods3,{params:i}),r,n)},t.mobileGoodsInfo=function(t,n){void 0===t&&(t={});var i=t.params;delete t.params;var r=h()({},this._getSessionParam(),t);return i&&/\/mobile_goods_info\?/.test(i)&&(i=i.replace(/mobile_goods_info\?.+/,"wechatapp_proc")),this.request(this._getCgiUrl(e.url.mobileGoodsInfo3,{params:i}),r,n)},t.wechatAppProc=function(e,t){return this.commonEndpoint("wechatAppProc",e,t)},t.querySignResult=function(e,t){return this.commonEndpoint("wechatAppProc",h()({},e,{cmd:17,wechatapp_proxy_type:"wechat_query"}),t).then((function(e){if(4!==e.wx_order_status)throw new o.a({ret:w.b.FAIL,status:e.wx_order_status})}))},t.commonEndpoint=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i={});var r=h()({},this._getSessionParam(),n);return this.request(this._getCgiUrl(e.url[t]),r,i)},t.addNetworkTask=function(e,t,n){this.requestTasks[e]={task:t,timeout:n}},t.clearNetworkTask=function(){var e=this;Object.keys(this.requestTasks).forEach((function(t){e.clearSingleNetworkTask(t)})),this.requestTasks={}},t.clearSingleNetworkTask=function(e){var t=this.requestTasks[e];try{t.timeout&&clearTimeout(t.timeout),t.task&&t.task.abort&&t.task.abort(),delete this.requestTasks[e]}catch(e){}},t.genTaskId=function(){return++this.taskId},b()(e,[{key:"isSandbox",set:function(e){this.sandbox=e,this.domain=this.sandbox?"sandbox.api.unipay.qq.com":"api.unipay.qq.com"}}]),e}();P.url={},P.url.mobileGoodsInfo3={url:"$domain$$params$",https:!0},P.url.mobileSaveGoods3={url:"$domain$$params$",https:!0},P.url.wechatAppProc={url:"$domain$/v1/r/$appid$/wechatapp_proc?",https:!0},P.url.wechatQuery={url:"$domain$/v1/r/$appid$/wechat_query?",https:!0},P.url.jifenPayGoods={url:"https://m.jifen.qq.com/cgi-bin/pay_goods?",https:!0},P.url.wxOpenBusiness={url:"$domain$/v1/r/$appid$/wx_open_business?",https:!0},P.url.getToken={url:"$domain$/v1/r/$appid$/get_token?",https:!0},n.d(t,"a",(function(){return R}));var R=function(){function e(e,t){this.app=e,this.name="BasePayMod",this.params=t,this.params.extend=t.extend||"",this.session=new _({openid:t.openid,openkey:t.openkey||"no_key",sessionid:t.session_id||"hy_gameid",sessiontype:t.session_type||"wc_actoken"}),this.infoReportIformat={pv:"info.pv",status:"info.status"},this.saveReportIformat={pv:"save.pv",status:"save.status"},this.processType="",this.cgi=new P({pf:this.params.pf,pfkey:this.params.pfkey||"pfkey",appid:this.params.offer_id,sandbox:~~this.params.env,sessionObj:this.session,app:e})}var t=e.prototype;return t.getInfoPublicParams=function(){var e={process_type:this.processType,page_type:"mall",wx_appid:this.params.login_wx_appid||""};return this.params.pf_header&&(e.pf_header=this.params.pf_header),e},t.beforeGetInfo=function(e){C.timer.start(this.name+"info"),this.report(this.infoReportIformat.pv,e)},t.buildInfoParams=function(){},t.getInfo=function(){},t.getAdditionalParams=function(){var e=this.params.additional;return e?Object(a.a)(e)?Object(p.a)(decodeURIComponent(e)):e:{}},t.getSavePublicParams=function(){var e=this,t=h()({},this.getAdditionalParams(),{process_type:this.processType,page_type:"order",from_https:"1",from_h5:"1",cr_flex:"1",fk_tips:"1",extend:encodeURIComponent(this.params.extend||""),provide_uin:this.params.provide_uin||"",wx_appid:this.params.login_wx_appid||""});if(Object(m.b)().forEach((function(n){e.params[n]&&(t[n]=e.params[n])})),this.params.groupid){var n={GamePayMod:"currency_group",GoodsPayMod:"goods_group",SubscribePayMod:"version=3.0&month_group"}[this.name];t.drm_info=n+"="+this.params.groupid}return t},t.getScorePayParams=function(){return h()({},this.getAdditionalParams(),{service_id:this.params.service_id})},t.getFriendsPayOrderParams=function(){var e=y.a.getInfo("info.rate"),t=this.params,n=t.zoneid,i=t.buy_quantity,r=t.currency_type,o=t.change_wx_openid,a=void 0===o?"":o,s=t.login_wx_appid,c=void 0===s?"":s,l=t.extend,u=void 0===l?"":l,d=Math.round(100*i/parseInt(e));return h()({},this.getAdditionalParams(),{zoneid:n,buy_quantity:i,currency_type:r,change_wx_openid:a,wx_appid:c,extend:u,wcp:"type="+r+"&amt="+d})},t.beforeSave=function(e){this.report(this.saveReportIformat.pv,e),C.timer.start(this.name+"save")},t.buildSaveParams=function(e){void 0===e&&(e={})},t.save=function(e){},t.getPayParams=function(){return this.params},t.getZoneid=function(e){return void 0===e&&(e={}),e.zoneid||this.params.zoneid||"1"},t.getCurrencyType=function(){return this.params.currency_type||""},t.needCurrencyType=function(e){return void 0===e&&(e=""),"wechat_app"===e&&!this.params.currency_type},t.querySignResult=function(e){var t=this;return Object(C.retry)((function(){return t.cgi.querySignResult({wx_serialno:e})}),{times:this.params.retry_times||5,interval:this.params.retry_interval?Math.max(this.params.retry_interval,1e3):2e3,abort:function(e){return e.info&&5===e.info.status}})},t.report=function(e,t,n){this.app.report(e,t,n)},t.enablePayScore=function(){this.beforeSave();var e=this.cgi.wxOpenBusiness(this.getScorePayParams(),{method:"POST"});return this.wrapSave(e)},t.friendsPayOrder=function(){this.beforeSave();var e=this.cgi.getToken(this.getFriendsPayOrderParams(),{method:"POST"});return this.wrapSave(e)},t.reportInfo=function(e){this.report(this.infoReportIformat.status,{httpCode:e.httpCode||"200",resultMsg:e.msg,errCode:e.err_code||"",res:r(e),times:C.timer.get(this.name+"info")},{resultCode:e.ret})},t.wrapInfo=function(e){var t=this;return e.then((function(e){return t.reportInfo(e),e})).catch((function(e){if(e instanceof o.a)throw e;t.reportInfo(e),o.a.except(e)}))},t.reportSave=function(e){this.report(this.saveReportIformat.status,{httpCode:e.httpCode||"200",resultMsg:e.msg,errCode:e.err_code,res:r(e),times:C.timer.get(this.name+"save")},{resultCode:e.ret})},t.wrapSave=function(e){var t=this;return e.then((function(e){return t.reportSave(e),e})).catch((function(e){if(e instanceof o.a)throw e;t.reportSave(e),o.a.except(e)}))},t.log=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).log.apply(e,[this.name].concat(n))},e}()},function(e,t,n){function i(e,t){if(!Object(r.a)(e))return-1;if(!Object(r.a)(t))return 1;for(var n=e.split("."),i=t.split("."),o=Math.min(n.length,i.length),a=0;a<o;a++){var s=Number(n[a]),c=Number(i[a]);if(s>c)return 1;if(c>s)return-1;if(!isNaN(s)&&isNaN(c))return 1;if(isNaN(s)&&!isNaN(c))return-1}return 0}var r=n(9),o=n(1),a=n(11);t.a=function(e){void 0===e&&(e={});var t=!0,n=Object(a.c)();try{"devtools"!==Ja.getSystemInfoSync().platform&&(t=!1)}catch(e){t=!1}var r={shouldUpdate:!1,latestVersion:"unknown",currentVersion:n,updateAt:"unknown"};return t?new o.a((function(t){Ja.request({url:"http://r.tnpm.oa.com/@tencent/midas-mp-sdk",success:function(n){var r=n.data["dist-tags"].latest,o=new Date(n.data.time[r]).toLocaleString(),s=Object(a.c)(),c=i(r,s)>0,l={shouldUpdate:c,latestVersion:r,currentVersion:s,updateAt:o},u=console;return u.group("Midas SDK"),u.log(l),u.groupEnd("Midas SDK"),c&&!e.silent&&Ja.showModal({title:"Midas SDK",content:"米大师 SDK 有新版可用，详情请查看官网 http://midas.qq.com。如需屏蔽该消息，请在 init 时传入参数 silent: true。",showCancel:!1}),t(l)},fail:function(){return t(r)}})})):o.a.resolve(r)}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}},function(e,t,n){var i;!function(r){function o(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,i,r,a){return o(function(e,t){return e<<t|e>>>32-t}(o(o(t,e),o(i,a)),r),n)}function s(e,t,n,i,r,o,s){return a(t&n|~t&i,e,t,r,o,s)}function c(e,t,n,i,r,o,s){return a(t&i|n&~i,e,t,r,o,s)}function l(e,t,n,i,r,o,s){return a(t^n^i,e,t,r,o,s)}function u(e,t,n,i,r,o,s){return a(n^(t|~i),e,t,r,o,s)}function d(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,i,r,a,d,h=1732584193,p=-271733879,f=-1732584194,g=271733878;for(n=0;n<e.length;n+=16)i=h,r=p,a=f,d=g,h=s(h,p,f,g,e[n],7,-680876936),g=s(g,h,p,f,e[n+1],12,-389564586),f=s(f,g,h,p,e[n+2],17,606105819),p=s(p,f,g,h,e[n+3],22,-1044525330),h=s(h,p,f,g,e[n+4],7,-176418897),g=s(g,h,p,f,e[n+5],12,1200080426),f=s(f,g,h,p,e[n+6],17,-1473231341),p=s(p,f,g,h,e[n+7],22,-45705983),h=s(h,p,f,g,e[n+8],7,1770035416),g=s(g,h,p,f,e[n+9],12,-1958414417),f=s(f,g,h,p,e[n+10],17,-42063),p=s(p,f,g,h,e[n+11],22,-1990404162),h=s(h,p,f,g,e[n+12],7,1804603682),g=s(g,h,p,f,e[n+13],12,-40341101),f=s(f,g,h,p,e[n+14],17,-1502002290),h=c(h,p=s(p,f,g,h,e[n+15],22,1236535329),f,g,e[n+1],5,-165796510),g=c(g,h,p,f,e[n+6],9,-1069501632),f=c(f,g,h,p,e[n+11],14,643717713),p=c(p,f,g,h,e[n],20,-373897302),h=c(h,p,f,g,e[n+5],5,-701558691),g=c(g,h,p,f,e[n+10],9,38016083),f=c(f,g,h,p,e[n+15],14,-660478335),p=c(p,f,g,h,e[n+4],20,-405537848),h=c(h,p,f,g,e[n+9],5,568446438),g=c(g,h,p,f,e[n+14],9,-1019803690),f=c(f,g,h,p,e[n+3],14,-187363961),p=c(p,f,g,h,e[n+8],20,1163531501),h=c(h,p,f,g,e[n+13],5,-1444681467),g=c(g,h,p,f,e[n+2],9,-51403784),f=c(f,g,h,p,e[n+7],14,1735328473),h=l(h,p=c(p,f,g,h,e[n+12],20,-1926607734),f,g,e[n+5],4,-378558),g=l(g,h,p,f,e[n+8],11,-2022574463),f=l(f,g,h,p,e[n+11],16,1839030562),p=l(p,f,g,h,e[n+14],23,-35309556),h=l(h,p,f,g,e[n+1],4,-1530992060),g=l(g,h,p,f,e[n+4],11,1272893353),f=l(f,g,h,p,e[n+7],16,-155497632),p=l(p,f,g,h,e[n+10],23,-1094730640),h=l(h,p,f,g,e[n+13],4,681279174),g=l(g,h,p,f,e[n],11,-358537222),f=l(f,g,h,p,e[n+3],16,-722521979),p=l(p,f,g,h,e[n+6],23,76029189),h=l(h,p,f,g,e[n+9],4,-640364487),g=l(g,h,p,f,e[n+12],11,-421815835),f=l(f,g,h,p,e[n+15],16,530742520),h=u(h,p=l(p,f,g,h,e[n+2],23,-995338651),f,g,e[n],6,-198630844),g=u(g,h,p,f,e[n+7],10,1126891415),f=u(f,g,h,p,e[n+14],15,-1416354905),p=u(p,f,g,h,e[n+5],21,-57434055),h=u(h,p,f,g,e[n+12],6,1700485571),g=u(g,h,p,f,e[n+3],10,-1894986606),f=u(f,g,h,p,e[n+10],15,-1051523),p=u(p,f,g,h,e[n+1],21,-2054922799),h=u(h,p,f,g,e[n+8],6,1873313359),g=u(g,h,p,f,e[n+15],10,-30611744),f=u(f,g,h,p,e[n+6],15,-1560198380),p=u(p,f,g,h,e[n+13],21,1309151649),h=u(h,p,f,g,e[n+4],6,-145523070),g=u(g,h,p,f,e[n+11],10,-1120210379),f=u(f,g,h,p,e[n+2],15,718787259),p=u(p,f,g,h,e[n+9],21,-343485551),h=o(h,i),p=o(p,r),f=o(f,a),g=o(g,d);return[h,p,f,g]}function h(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function p(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function f(e){var t,n,i="0123456789abcdef",r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+=i.charAt(t>>>4&15)+i.charAt(15&t);return r}function g(e){return unescape(encodeURIComponent(e))}function _(e){return function(e){return h(d(p(e),8*e.length))}(g(e))}function m(e,t){return function(e,t){var n,i,r=p(e),o=[],a=[];for(o[15]=a[15]=void 0,r.length>16&&(r=d(r,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^r[n],a[n]=1549556828^r[n];return i=d(o.concat(p(t)),512+8*t.length),h(d(a.concat(i),640))}(g(e),g(t))}function y(e,t,n){return t?n?m(t,e):function(e,t){return f(m(e,t))}(t,e):n?_(e):function(e){return f(_(e))}(e)}void 0!==(i=function(){return y}.call(t,n,t,e))&&(e.exports=i)}()},function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(n,arguments)}var r=this;return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,a=i.length;o<a;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}},e.exports=n,e.exports.TinyEmitter=n},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){n.d(t,"a",(function(){return s}));var i=n(0),r=n.n(i),o=n(3),a=n.n(o),s=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="GamePayMod",i.processType="save",i.infoReportIformat={pv:"buypage.pv",status:"buypage.status"},i.saveReportIformat={pv:"startsave.pv",status:"savestatus"},i}a()(t,e);var n=t.prototype;return n.buildInfoParams=function(){return r()({},this.getInfoPublicParams(),{zoneid:this.getZoneid(),accounttype:"common",buy_quantity:this.params.buy_quantity||"1"})},n.getInfo=function(){this.beforeGetInfo();var e=this.cgi.wechatAppProc(this.buildInfoParams());return this.wrapInfo(e)},n.buildSaveParams=function(e){return void 0===e&&(e={}),r()({},this.getSavePublicParams(),{buy_quantity:e.buy_quantity||this.params.buy_quantity||"1",zoneid:this.getZoneid(),accounttype:e.accounttype||"common",service_name:encodeURIComponent(this.params.service_name||""),discountid:this.params.discountid||""},e)},n.save=function(e){this.beforeSave();var t=this.cgi.wechatAppProc(this.buildSaveParams(e),{method:"POST"});return this.wrapSave(t)},t}(n(29).a)},function(e,t,n){},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n.n(i),o=n(25),a=n(0),s=n.n(a),c=n(26),l=n.n(c),u=n(27),d=n.n(u),h=n(28),p=n(19),f=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="GoodsPayMod",i.processType="bg",i.goodsInfo=null,i.infoReportIformat={pv:"goodsinfo.pv",status:"goodsinfo.status"},i.saveReportIformat={pv:"startsave.pv",status:"savestatus"},i}r()(t,e);var n=t.prototype;return n.buildInfoParams=function(){return s()({},this.getInfoPublicParams(),{zoneid:this.getZoneid(),params:this.params.goodstokenurl},Object(p.a)(this.params.goodstokenurl))},n.getInfo=function(e){this.beforeGetInfo();var t=this.cgi.mobileGoodsInfo(this.buildInfoParams(),e);return this.wrapInfo(t)},n.buildSaveParams=function(e){return void 0===e&&(e={}),s()({},this.getSavePublicParams(),{zoneid:this.getZoneid(),buy_quantity:this.params.buy_quantity||""},e,Object(p.a)(this.params.goodstokenurl),{_params:this.params.goodstokenurl})},n.save=function(e){this.beforeSave();var t=this.cgi.mobileSaveGoods(this.buildSaveParams(e),{method:"POST"});return this.wrapSave(t)},t}(n(29).a),g=n(20),_=function(e){function t(t){var n,i=t.params,r=void 0===i?{}:i,o=l()(t,["params"]);return(n=e.call(this,s()({params:r},o))||this).name="GoodsApp",n.iformatPrefix="midaswechatpay."+(n.isEnterprise()?"enterprise":"goods"),n.reportObj.setIformatPrefix(n.iformatPrefix),n.payMod=new f(d()(n),n.params),n.validator=g.b,n}return r()(t,e),t.prototype.isEnterprise=function(){return this.opt.isEnterprise},t}(h.a),m=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this).name=t.isEnterprise?"EnterpriseApi":"GoodsApi",n.AppClass=_,n}return r()(t,e),t}(o.a);t.default=o.a.createApi(m)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=n(3),o=n.n(r),a=n(25),s=n(0),c=n.n(s),l=n(26),u=n.n(l),d=n(27),h=n.n(d),p=n(28),f=n(19),g=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="SubscribePayMod",i.processType="unimonth",i.params.aid&&(i.params.appremark=encodeURIComponent("aid="+i.params.aid)),i.account=i.params.account||"wechat",i.infoReportIformat={pv:"monthinfo.pv",status:"monthinfo.status"},i.saveReportIformat={pv:"startsave.pv",status:"savestatus"},i.isContinuousMonth="continuous_month"===i.params.sign_type,i}o()(t,e);var n=t.prototype;return n.buildInfoParams=function(){return c()({},this.getInfoPublicParams(),{service_code:this.params.service_code,product_id:this.params.product_id,buy_quantity:this.params.buy_quantity||"1",provide_no_type:this.getProvideNoType(),query_scope:this.isContinuousMonth?"include_continuous":""})},n.getInfo=function(){this.beforeGetInfo();var e=this.cgi.wechatAppProc(this.buildInfoParams());return this.wrapInfo(e)},n.buildSaveParams=function(e){void 0===e&&(e={});var t=c()({buy_quantity:e.buy_quantity||this.params.buy_quantity||1,service_code:this.params.service_code,product_id:e.product_id||this.params.product_id,appremark:this.params.appremark||"",provide_no_type:this.getProvideNoType(),service_name:this.params.service_name||"",continuous_month:this.isContinuousMonth?"1":""},this.getSavePublicParams(),e);return this.shouldAutoContinue()&&(t.auto_cont="1"),"wechatid"===this.getProvideNoType()&&delete t.provide_uin,"sign_only"===this.params.sign_type?c()({},t,{process_type:"month",page_type:"sign",type:"month",contract_type:this.params.contract_type||"",ts:Math.round((new Date).getTime()/1e3)}):t},n.save=function(e){var t=this.buildSaveParams(e);this.beforeSave({serviceCode:t.service_code,productId:t.product_id});var n=this.cgi.wechatAppProc(t,{method:"POST"});return this.wrapSave(n)},n.getProvideNoType=function(){return this.params.provide_uin?"uin":"wechatid"},n.shouldAutoContinue=function(){return this.params.extend?"1"===Object(f.a)(this.params.extend).auto_cont:1===parseInt(this.params.auto_cont)},t}(n(29).a),_=n(20),m=function(e){function t(t){var n,i=t.params,r=void 0===i?{}:i,o=u()(t,["params"]);return(n=e.call(this,c()({params:r},o))||this).name="SubscribeApp",n.iformatPrefix="midaswechatpay.subscribe",n.reportObj.setIformatPrefix(n.iformatPrefix),n.payMod=new g(h()(n),n.params),n.validator=_.f,n}return o()(t,e),t}(p.a),y=n(2),v=n(5),A=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t,n)||this).name="SubscribeApi",i.AppClass=m,i}return o()(t,e),t.prototype.launchSign=function(e,t){return this.callback=t,Object(y.endsWith)(e.product_id,"continuous_month_pid")?this.launchPay(e,t):this.errorCallback(new i.a({ret:v.b.PARAMS_ERROR,msg:"product_id should ends with continuous_month_pid"}))},t}(a.a);t.default=a.a.createApi(A)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n.n(i),o=n(25),a=n(0),s=n.n(a),c=n(26),l=n.n(c),u=n(27),d=n.n(u),h=n(28),p=n(36),f=n(20),g=function(e){function t(t){var n,i=t.params,r=void 0===i?{}:i,o=l()(t,["params"]);return(n=e.call(this,s()({params:r},o))||this).name="GameApp",n.iformatPrefix="midaswechatpay.game",n.reportObj.setIformatPrefix(n.iformatPrefix),n.payMod=new p.a(d()(n),n.params),n.validator=f.a,n}return r()(t,e),t}(h.a),_=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t,n)||this).name="GameApi",i.AppClass=g,i}return r()(t,e),t}(o.a);t.default=o.a.createApi(_)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n.n(i),o=n(25),a=n(0),s=n.n(a),c=n(26),l=n.n(c),u=n(27),d=n.n(u),h=n(28),p=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="PcGamePayMod",i}return r()(t,e),t}(n(36).a),f=n(20),g=function(e){function t(t){var n,i=t.params,r=void 0===i?{}:i,o=l()(t,["params"]);return(n=e.call(this,s()({params:r},o))||this).name="PcGameApp",n.iformatPrefix="midaswechatpay.pcgame",n.reportObj.setIformatPrefix(n.iformatPrefix),n.payMod=new p(d()(n),n.params),n.validator=f.c,n}return r()(t,e),t}(h.a),_=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this).name="PcGameApi",n.AppClass=g,n}return r()(t,e),t}(o.a);t.default=o.a.createApi(_)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(37),a=(n.n(o),n(38));t.default=r()({},a.default,{init:function(e){return void 0===e&&(e={}),e.isEnterprise=!0,a.default.init(e)}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n.n(i),o=(n(37),n(25)),a=n(0),s=n.n(a),c=n(26),l=n.n(c),u=n(27),d=n.n(u),h=n(28),p=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="QbPayMod",i.processType="qb",i.infoReportIformat={pv:"buypage.pv",status:"buypage.status"},i.saveReportIformat={pv:"startsave.pv",status:"savestatus"},i}r()(t,e);var n=t.prototype;return n.buildInfoParams=function(){return s()({},this.getInfoPublicParams(),{zoneid:this.getZoneid(),accounttype:"qb",buy_quantity:this.params.buy_quantity||"1"})},n.buildSaveParams=function(t){return void 0===t&&(t={}),s()({},e.prototype.buildSaveParams.call(this,t),{accounttype:"qb"})},t}(n(36).a),f=n(20),g=function(e){function t(t){var n,i=t.params,r=void 0===i?{}:i,o=l()(t,["params"]);return(n=e.call(this,s()({params:r},o))||this).name="QbApp",n.iformatPrefix="midaswechatpay.qb",n.reportObj.setIformatPrefix(n.iformatPrefix),n.payMod=new p(d()(n),n.params),n.validator=f.e,r.service_name="充值Q币",n}return r()(t,e),t}(h.a),_=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this).name="QbApi",n.AppClass=g,n}return r()(t,e),t}(o.a);t.default=o.a.createApi(_)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(11);n.d(t,"getVersion",(function(){return i.c}));var r=n(30);n.d(t,"checkUpdate",(function(){return r.a}));var o=n(39);n.d(t,"subscribe",(function(){return o.default}));var a=n(40);n.d(t,"game",(function(){return a.default}));var s=n(41);n.d(t,"pcGame",(function(){return s.default}));var c=n(38);n.d(t,"goods",(function(){return c.default}));var l=n(42);n.d(t,"enterprise",(function(){return l.default}));var u=n(43);n.d(t,"recharge",(function(){return u.default})),n(37)}]);var Ka=n(1130),es=n(2999);const ts={};(0,es.n)("onAppEnterForeground",(e=>{Object.assign(ts,e)})),s.Z.onReady((()=>{Object.assign(ts,s.Z.appLaunchInfo)}));const ns=(0,Ka.Z)("querySettlementMark","jsapi_querysettlementmark",{},{},(()=>({isWxHost:!s.Z.host||"WeChat"===s.Z.host.env,sdkAppId:s.Z.host&&s.Z.host.appId,scene:ts.scene,sceneNote:ts.scene_note||ts.sceneNote,sessionId:ts.sessionId||ts.sessionid}))),is=()=>new Promise((e=>{ns({complete:({mark:t})=>e(t)})}));var rs=n(4345);const os={offer_id:"offerId",currency_type:"currencyType",session_id:"sessionId",session_type:"sessionType",pf:"platform",login_wx_appid:"loginWXAppId",change_wx_openid:"changeWXOpenId",extend:"extend",product_id:"productId",service_code:"serviceCode",service_name:"serviceName",buy_quantity:"buyQuantity",aid:"aid",provide_uin:"provideUin",zoneid:"zoneId",goodstokenurl:"goodsTokenUrl"},as=["offer_id","currency_type","session_id","session_type","pf","login_wx_appid","change_wx_openid","extend"];function ss(e){let t=[];return"subscribe"===e.mode?t=["product_id","service_code","service_name","buy_quantity","aid","provide_uin"]:"game"===e.mode||"pcGame"===e.mode?t=["buy_quantity","zoneid","provide_uin"]:"goods"===e.mode?t=["buy_quantity","zoneid","goodstokenurl"]:"enterprise"===e.mode&&(t=["zoneid","goodstokenurl"]),[...as,...t].reduce(((t,n)=>(t[n]=e[os[n]],"pf"===n&&"windows"===t.pf&&(t.pf="android",t.pf_header="wxgame_windows-2001"),t)),{})}var cs=n(3872),ls=n(607),us=n(1051),ds=n(2276);const hs=wxNativeConsole.createLogger("common reportUserBehavior"),ps=(0,p.Fr)(Oe.I6);let fs=!1,gs=null,_s=null;const ms=new D.Q("Verify",!0);function ys(e=!0){e&&(_s=null),gs&&(gs.destroy(),gs=null)}function vs(e){if(!_s)return;const{url:t,weapp:n}=_s.urlInfo;n?(0,ds.iy)({appId:n.appid,path:n.path,extraData:n.extraData,success:e}):(0,ls.n)({url:t,isNativeStyle:!0,success:e}),ys()}function As(e,t,n,i,r=0){Reporter.reportKeyValue({key:"GameAdsSkipCard",value:[(0,Ae._getCurrentNetworkType)(),s.Z.appLaunchInfo.scene,0,15,e,t,n,"",0,"",i,0,"","",0,"",100*r].join(",")})}s.Z.onReady((()=>{const e=(0,p.Fr)((0,er.Ce)(!1,"reportUserBehavior"));let t,n=s.Z.appLaunchInfo,i=0,r=null,o=0,c="",l="",u={},d=!1,h=!1,f=!1,g=!1,_=0,m=3e5;try{s.Z.appContactInfo&&s.Z.appContactInfo.operationInfo&&s.Z.appContactInfo.operationInfo.jsonInfo&&s.Z.appContactInfo.operationInfo.jsonInfo.op_info&&(f=1===Number(s.Z.appContactInfo.operationInfo.jsonInfo.op_info.adult_only),g=1===Number(s.Z.appContactInfo.operationInfo.jsonInfo.op_info.grow_protect))}catch(e){hs.error("get op_info fail",e.message)}const y=(0,p.aI)()||g,v=(0,p.aI)()||g,A=(0,p.aI)()||g||f,b=(n,i,{coldBoot:r=!1}={})=>{_=Date.now();const g={onShow:1,heartbeat:2,onHide:3,retryLogin:4};return fs?y().then(v).catch((e=>{hs.error("report fail",e)})):ws.then(y).then(v).catch((e=>{hs.error("report fail",e)}));function y(){const r={version:1,callbackData:t,type:g[n],duration:i/1e3,scene_note:l,scene:o,referrerInfo:{appId:c,extraData:u},appServiceType:s.Z.appType};(0,p.aI)()||(r.isWxaAdultOnly=f);return e({apiName:"jsapi_reportuserbehav",reqData:r})}function v(e){const n=JSON.parse(e.rawData),{action:i,alertMsg:r,heartbeatInterval:o}=n;switch(t=n.callbackData,o!==m&&o>=1e4&&(m=o,w()),i){case 1:break;case 2:setTimeout((()=>{ps({title:"提示",content:r,showCancel:!1})}),/landscape/.test(s.Z.deviceOrientation)?500:0);break;case 3:{const e=setTimeout(Ei,15e3);ps({title:"提示",content:r+"（15s后未操作将自动退出）",showCancel:!1}).then((()=>{clearTimeout(e),Ei()}));break}case 4:{const e=setTimeout(Ei,15e3),{url:t,name:i}=n.urlInfo;!h&&r&&t&&i&&(h=!0,As(1504,0,1,1),(0,Oe.I6)({title:"提示",content:r+"（15s后未操作将自动退出）",confirmText:i,cancelText:"退出游戏",success(t){clearTimeout(e),t.confirm?(As(1504,1,2,1),_s=n,vs((()=>{d=!0}))):t.cancel&&(As(1504,2,2,1),hs.info("modal cancel"),Ei()),h=!1},fail(t){hs.error("show modal fail=",t),clearTimeout(e),Ei(),h=!1}}));break}case 5:{const{name:e}=n.urlInfo;As(1505,0,1,1),setTimeout((()=>{h||(0,Oe.I6)({title:"提示",content:r,confirmText:e,cancelText:"继续游戏",success({confirm:e}){_s=n,e&&As(1505,1,2,1),e||As(1505,2,2,1),e&&vs((()=>{d=!0}))},complete(){h=!1}}),h=!0}),/landscape/.test(s.Z.deviceOrientation)?500:0);break}case 6:var c,l;_s=n,n.isSoftAlert&&ms.emit("notify",{alertMsg:n.alertMsg,remainSeconds:n.remainSeconds,doVerify:()=>vs()}),gs?null===(c=(l=gs).setData)||void 0===c||c.call(l,n):(gs=!0,setTimeout((()=>(0,us.eZ)(n,(e=>{gs=e,As(1501,0,1,2),setTimeout((()=>gs&&As(1502,0,1,2)),1e4),gs.addListener("stop",(()=>ys())),gs.addListener("click",(()=>{const{showSeconds:e,remainSeconds:t}=gs.data;As(e?1502:1501,1,2,2,t),vs((()=>{d=!0}))}))}))),a.cj?2e3:0))}}},w=()=>{null!==r&&(clearInterval(r),E())},E=()=>{r=setInterval((()=>{i=Date.now()-_,y&&b("heartbeat",i)}),m)},T=(e,{coldBoot:t=!1}={})=>{l=e.scene_note||"",i=0,o=e.scene,e.referrerInfo&&(c=e.referrerInfo.appId,u=e.referrerInfo.extraData),E(),d?(b("retryLogin",i),d=!1):A&&b("onShow",i,{coldBoot:t})},S=()=>{i=Date.now()-_,clearInterval(r),r=null,v&&b("onHide",i)};T(n,{coldBoot:!0}),(0,es.n)("onAppEnterForeground",(e=>{n=e,T(n)})),(0,es.n)("onAppEnterBackground",(()=>{S()})),(0,es.n)("onAppRoute",(e=>{hs.log("onAppRoute",e),"autoReLaunch"===e.openType&&(h=!1,S(),setTimeout((()=>{T(n)}),1e3))}))}));let bs=()=>{},ws=new Promise((e=>{bs=e}));const Es=()=>{fs=!0,bs()};const Ts=["subscribe","game","pcGame","goods","enterprise"],Ss="requestMidasPayment",Cs=["game"],Is="requestMidasFriendPayment",xs=wxNativeConsole.createLogger("requestMidasFriendPayment");function Ds({actionStatus:e,errType:t=0,orderNo:n="",orderNoForUrl:i=""}={}){const r=[0,3001,30,10,1,e,"",0,i,(0,Ae._getCurrentNetworkType)(),0,0,t,0,"",n,""].join(",");xs.log("[MidasFriendPayment reportValue]",r),Reporter.reportKeyValue({key:"MidasFriendPayment",value:r})}function Os(){return(0,K.J)("requestMidasFriendPayment")?Promise.resolve():(Ds({actionStatus:0,errType:1}),Promise.reject({errCode:-15005,errMsg:"No MidasFriendPayment Permission"}))}function Ps(){return(0,K.J)("requestVirtualPayment")?Promise.resolve():(Ds({actionStatus:0,errType:2}),Promise.reject({errCode:-15005,errMsg:"No VirtualPayment Permission"}))}const Rs=(0,Ka.Z)("checkIsSupportMidasFriendPayment","webapi_isaddpayfororderblocked",{},{},(()=>({})),(e=>(e.blocked=e.is_blocked,delete e.is_blocked,delete e.rawData,e)));var ks=n(9848);const Ns=new Ne.Z;(0,c.jQ)("onUpdateStatusChange",(e=>{const t=(e.state||"").toLowerCase();var n;e.appContactInfo&&e.appContactInfo.passThroughInfo.forceUpdate||!1?"updateready"===t&&(console.info("[apply update before]"),a.wZ&&s.Z.clientVersion<=654315263?(0,c.IN)("updateApp",n):(0,Oe.I6)({content:(0,ks.S)()?"服务需要重启以使用最新功能":"小程序需要重启以使用最新功能",confirmText:"知道了",showCancel:!1,complete(){(0,c.IN)("updateApp",n)}})):(delete e.state,Ns.emit(t,e))}));const Ms=[];let Ls;Ns.on("updating",(()=>{Ls={hasUpdate:!0},Bs()})),Ns.on("noupdate",(()=>{Ls={hasUpdate:!1},Bs()}));const Bs=()=>{Ms.forEach((e=>{"function"==typeof e&&e(Ls)})),Ms.length=0},Fs=[];let Us=!1,Ws=!1;Ns.on("updateready",(()=>{Us=!0,js()}));const js=()=>{Fs.forEach((e=>{"function"==typeof e&&e()})),Fs.length=0},Gs=[];let Vs;Ns.on("updatefailed",(()=>{Vs={},Hs()}));const Hs=()=>{Gs.forEach((e=>{"function"==typeof e&&e(Vs)})),Gs.length=0},zs={onCheckForUpdate:e=>{e=__errorTracer__.surroundThirdByTryCatch(e,"at onCheckForUpdate callback function"),Ls?"function"==typeof e&&e(Ls):Ms.push(e)},onUpdateReady:e=>{e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),Us?"function"==typeof e&&e():Fs.push(e)},onUpdateFailed:e=>{e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),Vs?"function"==typeof e&&e(Vs):Gs.push(e)},applyUpdate:e=>{Us&&Ws?(0,c.YG)("applyUpdate",e,"applyUpdate has been called"):Us?(Ws=!0,a.wZ&&s.Z.clientVersion<=654315263?(0,c.IN)("updateApp",e):(0,Oe.I6)({content:(0,ks.S)()?"服务需要重启以使用最新功能":"小程序需要重启以使用最新功能",confirmText:"知道了",showCancel:!1,complete(){(0,c.IN)("updateApp",e)}})):(0,c.YG)("applyUpdate",e,"update is not ready")}},Zs={};s.Z.onReady((()=>{"object"==typeof s.Z.env&&Object.assign(Zs,s.Z.env)}));const Ys=Zs;var $s=n(1425),qs=n(1950),Qs=n(9536),Js=n.n(Qs),Xs=n(5373),Ks=n(8799);class ec extends Xs.wA{constructor({template:e,style:t,event:n}={}){if(super(),e){const i=(0,Xs.Wj)(this),{root:r}=Js()(e);Xs.S1.call(this,r,t),Ko.uo.add(i.container),this.initEvent(n)}!1===Sn&&!1===Cn&&(pi(),Cn=!0,vn.emit({})),(0,c.IN)("showShareMenu"),(0,c.IN)("showShareTimelineMenu")}initEvent(e){if(e){const t=(0,Xs.Wj)(this);this.event=e,Object.keys(e).forEach((n=>{const i=e[n];Object.keys(i).forEach((e=>{const r=i[e];t[n]&&t[n].on(e,r)}))}))}}unbundEvent(){if(this.event){const e=(0,Xs.Wj)(this);Object.keys(this.event).forEach((t=>{const n=this.event[t];Object.keys(n).forEach((i=>{const r=n[i];e[t]&&e[t].off(i,r)}))}))}}destroy(){this.unbundEvent();const e=(0,Xs.Wj)(this);Ko.uo.remove(e.container),(0,Xs.bn)(this),Ks.Q.showShareAppMessageMenu&&(Ks.Q.withShareTicket?(0,c.IN)("showShareMenuWithShareTicket",{withShareTicket:!0}):(0,c.IN)("showShareMenu")),Ks.Q.showShareTimelineMenu&&(0,c.IN)("showShareTimelineMenu"),!1===Sn&&!0===Cn&&(Cn=!1,wn.emit({}))}}class tc extends ec{constructor({template:e,style:t}={}){super({template:e,style:t})}}let nc=!1,ic=0,rc=0,oc=0;function ac(e,t){const n=Math.max(ic,rc),i=Math.min(ic,rc);return t/e-(n-oc-44-8-44-8)/i>.1?(n-2*(oc+44))/n:(rc-20)/rc}s.Z.onReady((()=>{nc="devtools"===s.Z.platform,ic=s.Z.screenHeight,rc=s.Z.screenWidth,oc=s.Z.statusBarHeight}));class sc extends tc{constructor({imageUrl:e}={}){let t=1,n=0,i=0;const r=e.match(/size=(\d+)x(\d+)$/);r&&(n=+r[1],i=+r[2],t=ac(n,i));super({template:`<view id="container">\n      <view id="imgWrp">\n        ${nc?`<image id="mainImage" src="${e}" />`:`<image-previewer id="mainImage" scale="${t}"></image-previewer>`}\n      </view>\n    </view>`,style:function(){const e=rc>ic?"landscape":"portrait";return{container:{backgroundColor:"#191919",flexDirection:"column",width:"portrait"===e?rc:ic,height:"portrait"===e?ic:rc},imgWrp:{flexDirection:"row",justifyContent:"center"},mainImage:{left:0,top:nc?oc+44+8:0,width:"portrait"===e?rc:ic,height:"portrait"===e?ic:rc,objectFit:"contain"}}}()}),this.imageUrl=e,this.scale=t,this.width=n,this.height=i,this.sizeMatch=r,this.retried=[];const o=(0,Xs.Wj)(this);nc||o.mainImage.onImageLoadFail((e=>{this.handleOnImageLoadFail(e)})),this.initImageInfo()}handleOnImageLoadFail(e){const t=this.retried;t.includes(e.url)?(0,Oe.I6)({content:"图片加载失败",showCancel:!1}):(t.push(e.url),this.initImageInfo()),setTimeout((()=>{(0,Oe.Zk)()}),500)}initImageInfo(){setTimeout((()=>{(0,Oe.QP)({title:"加载中",maskAll:!0})}),500),this.sizeMatch?this.downloadImage().then((e=>{this.showImage({width:this.width,height:this.height,url:e.tempFilePath,scale:this.scale})})):this.downloadImage().then((e=>{(0,c.IN)("getImageInfo",{src:e.tempFilePath,success:t=>{const{width:n,height:i}=t,r=ac(n,i);this.showImage({width:n,height:i,url:e.tempFilePath,scale:r})},fail:()=>{this.handleOnImageLoadFail({url:e.tempFilePath})}})}))}downloadImage(){return new Promise((e=>{(0,y.o)({url:this.imageUrl,success:t=>{e(t)},fail:()=>{this.handleOnImageLoadFail({url:this.imageUrl})}})}))}showImage(e){const{width:t,height:n,url:i,scale:r}=e,o=(0,Xs.Wj)(this);"portrait"===(t>n?"landscape":"portrait")?nc?o.mainImage.style.scale=r:o.mainImage.scale=r:(nc&&(o.mainImage.style.top=0),nc?(o.mainImage.style.scale=1,o.mainImage.style.top=0):o.mainImage.scale=1),o.mainImage.urls=[i],o.mainImage.update(),setTimeout((()=>{(0,Oe.Zk)()}),500)}}let cc=0,lc=0,uc=0,dc=0,hc={};s.Z.onReady((()=>{lc=s.Z.screenHeight,uc=s.Z.screenWidth,dc=s.Z.statusBarHeight,hc=s.Z.safeArea;const e=Math.max(lc,uc);let t=e;hc&&hc.bottom&&(t=Math.max(hc.bottom,hc.right)),cc=e-t}));class pc extends tc{constructor({videoUrl:e,thumbUrl:t}={}){super({template:`\n    <view id="container">\n      <view id="imgWrp">\n        <video id="mainVideo" src="${e}" poster="${t}" controls="true" object-fit="contain" autoplay="false" z-index="2" showProgress="false" showProgressInControlMode="true" backgroundColor="transparent"></video>\n      </view>\n    </view>`,style:function(){const e=uc>lc?"landscape":"portrait",t=dc+44+8,n=cc+44+8;return{container:{backgroundColor:"#191919",flexDirection:"column",width:"portrait"===e?uc:lc,height:"portrait"===e?lc:uc},imgWrp:{flexDirection:"row",justifyContent:"center"},mainVideo:{position:"absolute",top:t,left:0,width:"portrait"===e?uc:lc,height:"portrait"===e?lc-t-n:uc-t-n}}}()}),this._handleVideoError(),this._playAtWIFI()}_handleVideoError(){(0,Xs.Wj)(this).mainVideo.onError((()=>{(0,Oe.I6)({title:"视频加载失败，请稍后再试",confirmText:"确定",showCancel:!1})}))}_playAtWIFI(){(0,c.IN)("getNetworkType",{success:({networkType:e})=>{const t=(0,Xs.Wj)(this);"wifi"===e&&(t.mainVideo.showCenterPlayBtn=!1,t.mainVideo.play().then((e=>{})))}})}}const fc=new Ne.Z;(0,c.jQ)("onLoadSubPackageTaskStateChange",(e=>{fc.emit(e.state,e.taskId,e)}));const gc={},_c=[],mc=new WeakMap,yc=new WeakMap,vc=function(e){return gc[e]},Ac=function(e){const t=Object.assign({},e);return delete t.taskId,delete t.state,delete t.moduleName,t},bc=function(e,t=!1){let n=e;"string"!=typeof n&&console.error("SubContext onSubPackageReady error: moduleName is empty"),n.endsWith(".js")||(n.endsWith("/")||(n=`${n}/`),n=`${n}game.js`);const i=To.n.get();if((0,p.GO)()&&(0,p.aI)()&&!t&&!i)return"__APP__"===e?__subContextEngine__.getGameContext().evaluateScriptFile("game.js"):__subContextEngine__.getGameContext().evaluateScriptFile(n)};fc.on("success",((e,t)=>{const n=vc(e);delete gc[e],Array.isArray(n)&&n.forEach(function(){var e=Pn()((function*(e){const n=t.moduleName,i=mc.get(e),r=Ac(t);_c.push(n),yield bc(n,t.isMonkeyTest),r.errMsg="loadSubpackage:ok","function"==typeof i.success&&i.success(r),"function"==typeof i.complete&&i.complete(r)}));return function(t){return e.apply(this,arguments)}}())})),fc.on("fail",((e,t)=>{const n=vc(e);delete gc[e],Array.isArray(n)&&n.forEach((e=>{const n=mc.get(e),i=Ac(t);i.errMsg="loadSubpackage:fail module not found","function"==typeof n.fail&&n.fail(i),"function"==typeof n.complete&&n.complete(i)}))})),fc.on("progressUpdate",((e,t)=>{const n=vc(e);Array.isArray(n)&&n.forEach((e=>{const n=yc.get(e),i=Ac(t);"function"==typeof n&&n(i)}))}));const wc=function(){const e=mc.get(this);if(_c.indexOf(e.name)>=0){const t={errMsg:"loadSubpackage:ok",moduleName:e.name};return"function"==typeof e.success&&e.success(t),void("function"==typeof e.complete&&e.complete(t))}let t;if("__APP__"===e.name&&a.gm&&(0,p.GO)()&&(0,p.aI)()){_c.push(e.name),bc(e.name);const t={errMsg:"loadSubpackage:ok"};return"function"==typeof e.success&&e.success(t),void("function"==typeof e.complete&&e.complete(t))}if((0,c.IN)("createLoadSubPackageTask",{moduleName:e.name,success:e=>{void 0===gc[e.loadTaskId]?gc[e.loadTaskId]=[this]:gc[e.loadTaskId].push(this)},fail:n=>{t=n.errMsg,a.cj&&(n.errMsg="loadSubpackage:fail module not found","function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail)(n),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete)(n))}}),t)throw new Error(t.replace(/createLoadSubPackageTask:fail[ :]/,""))};class Ec{constructor(e){mc.set(this,e),["success","fail","complete"].forEach((t=>{"function"==typeof e[t]&&(e[t]=__errorTracer__.surroundThirdByTryCatch(e[t],`at api loadSubpackage ${t} callback function`))})),wc.call(this)}onProgressUpdate(e){yc.set(this,(t=>{void 0!==t.totalBytesWriten&&(t.totalBytesWritten=t.totalBytesWriten,delete t.totalBytesWriten),"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at LoadTask.onProgressUpdate callback function")(t)}))}}var Tc=n(8191),Sc=n(2802);const Cc="GameReportKV";let Ic,xc,Dc,Oc=!1,Pc=0,Rc=0,kc=-1,Nc={},Mc=0,Lc=0,Bc={},Fc="",Uc="",Wc="";const jc=(e={})=>{e=Object.assign({},Nc,Bc,e),Bc=e;const t=e.query||s.Z.appLaunchInfo.query,n=[];t&&"object"==typeof t&&Object.keys(t).forEach((e=>{n.push(`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)}));const i=e.eventTime;let r=e.clickTimestamp;r=r<=9999999999?1e3*r:r;const o=i-r,a=e.sessionid||e.sessionId,c=xc||xc===a?0:1;xc=a,1===e.eventId&&(Mc=Date.now()-r,Lc=e.isLaunch?1:2),e.sceneNote=e.scene_note||e.sceneNote||"",e.sessionId=a||"",e.usedState=e.usedstate||e.usedState,e.costTime=o,e.SDKVersion=Sc.c,e.presceneNote=e.prescene_note||e.presceneNote||"",e.isEntrance=c,e.queryArray=n,e.startCostTime=Mc,e.startType=Lc,Uc=e.pagepath=e.path||s.Z.appLaunchInfo.path;const l=[e.eventId,e.scene,e.sceneNote,e.sessionId,e.usedState,e.pagepath,e.networktype||"",e.costTime,e.stayTime||0,encodeURIComponent(e.referpagepath||""),e.targetAction||0,e.targetPagePath||"",e.clickTimestamp,e.SDKVersion,e.prescene,e.presceneNote,e.isEntrance,e.queryArray.join("&"),Reporter.getAppType(),0,"",0,e.clickTimestamp,"",0,e.startCostTime,e.startType,Date.now(),"number"==typeof e.staytimeFuncpageStart?e.staytimeFuncpageStart:0,s.Z.host?s.Z.host.appId:"",e.shortLink].map(encodeURIComponent).map(((e,t)=>-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e)).join(",");Reporter.reportKeyValue({key:"Display",value:l}),Reporter.submit(),((e={})=>{let t="",n=2;if(s.Z){const e=s.Z.accountInfo,i=s.Z.envVersion;e&&(t=e.appId||""),"release"===i?n=1:"trial"===i&&(n=3)}Fc||(Fc=wx&&wx.version&&wx.version.version||"");const i={DeviceModel:Dc.model||"",DeviceBrand:Dc.brand||"",OsName:Dc.platform||"",OsVersion:Dc.system||"",LanguageVersion:Dc.language||"",appid:t,appversion:Fc,appstate:n,event_id:e.eventId,scene:e.scene,scene_note:e.sceneNote.substr(0,1024),sessionid:e.sessionId,usedstate:e.usedState,pagepath:(e.pagepath||"").substr(0,1024),networktype:e.networktype||"",costtime:e.costTime,staytime:e.stayTime||0,referpagepath:(e.referpagepath||"").substr(0,1024),targetAction:e.targetAction||0,targetPagePath:(e.targetPagePath||"").substr(0,1024),clickTimestamp:0,publicLibVersion:e.SDKVersion,prescene:e.prescene,prescene_note:e.presceneNote,isentrance:e.isEntrance,query:e.queryArray.join("&").substr(0,1024),apptype:Reporter.getAppType(),pagetype:0,anchorTargetText:"",clickTime:e.clickTimestamp,anchorTargetRelatedText:"",orientationChangeCount:0,startCostTime:e.startCostTime,startType:e.startType,reportTime:Date.now()};try{sr(1e3,JSON.stringify(i),!0)}catch(e){}})(e)},Gc=(e={},t={})=>{1===(e=e.isLaunch?Object.assign(t,e,Nc):Object.assign(t,e)).eventId?(e.scene_note=e.scene_note||e.sceneNote||"",e.sessionid=e.sessionid||e.sessionId||"",e.prescene_note=e.prescene_note||e.presceneNote||"",e.targetPagePath=e.targetPagePath||"",e.referpagepath=e.referpagepath||"",e.clickTimestamp=e.clickTimestamp||Date.now(),e.stayTime=e.stayTime||0):2===e.eventId&&(e.targetAction=e.targetAction||0),(0,Ae.getNetworkType)({success:t=>{let n=t.networkType;"none"===n&&(n="offline"),e.networktype=n,jc(e)},fail:()=>{jc(e)}})},Vc=e=>{const t=parseInt((e.eventTime||0)/1e3,10);return[e.eventId,e.scene,t,e.stayTime||0,e.sessionId,s.Z.host?s.Z.host.appId:"",Ic,e.instanceId].map(encodeURIComponent).join(",")},Hc=(0,p.Hw)((e=>{Ic=(0,v.M8)(),kc=e.scene,Pc=Date.now(),Wc=e.sessionid||e.sessionId||"";const t=e.scene,n=Vc({eventId:1,scene:t,eventTime:Pc,sessionId:Ic,instanceId:Wc});Reporter.reportKeyValue({key:Cc,value:n}),Gc(e,{eventId:1,eventTime:Pc,staytimeFuncpageStart:0})}),"at private.reportEnterForeground","gameSDKScriptError"),zc=(0,p.Hw)((e=>{const t=Date.now(),n=t-Pc;let i=0;0===Rc?i=0:Rc>0&&(0,Ao.Vc)(Uc)?i=t-Rc:Rc>0&&/^index/.test(Uc)&&(i=n);const r=kc,o=Vc({eventId:2,scene:r,eventTime:t,stayTime:n,sessionId:Ic,instanceId:Wc});Reporter.reportKeyValue({key:Cc,value:o}),Gc(e,{eventId:2,scene:r,eventTime:t,stayTime:n,staytimeFuncpageStart:i})}),"at private.reportEnterBackground","gameSDKScriptError");function Zc(e){Rc="number"==typeof e?e:Date.now()}let Yc=0,$c=0,qc=0,Qc={};function Jc(){return __subContextEngine__.getPool().length>0}s.Z.onReady((()=>{$c=s.Z.screenHeight,qc=s.Z.screenWidth,Qc=s.Z.safeArea;const e=Math.max($c,qc);let t=e;Qc&&Qc.bottom&&(t=Math.max(Qc.bottom,Qc.right)),Yc=e-t}));class Xc extends ec{constructor({slotTemplate:e,slotStyle:t}={}){super({template:`\n    <view id="container">\n      <view id="wrp">\n        ${e}\n      </view>\n      <view id="footer">\n        <text id="playBtn" value="开始游戏" />\n      </view>\n    </view>`,style:Object.assign({container:{backgroundColor:"#000000",flexDirection:"column",width:qc,height:$c,zIndex:1000010},wrp:{flexDirection:"row",justifyContent:"center"},footer:{flexDirection:"row",justifyContent:"center",position:"absolute",paddingBottom:16+Yc,paddingTop:12,bottom:0,left:0,width:qc,backgroundColor:"#000000"},playBtn:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#ffffff",backgroundColor:"#FA9D3B",width:184}},t),event:{playBtn:{click:()=>{this._handlePlayBtnClick()}}}}),Jc()||setTimeout((()=>{this.preloadPackage()}),0),Zc(0)}preloadPackage(){const e=To.n.get().params;let t="__APP__";if(e.userPath){const n=__subContextEngine__.isValidGameIndependentSubpackagePath(e.userPath,s.Z.subPackages);if(n){let e=t=n.root;e.endsWith(".js")||(e.endsWith("/")||(e=`${e}/`),e=`${e}game.js`),__subContextEngine__.getGameContext().setEntry([e])}}this.loadTaskPromise=new Promise(((e,n)=>{new Ec({name:t,success:t=>{e()},fail:e=>{wxNativeConsole.error("createLoadSubPackageTask fail",e),n(),(0,Oe.I6)({title:"提示",content:"加载游戏失败，请尝试重新打开游戏",showCancel:!1})}})}))}_handlePlayBtnClick(){this.runGame(1e3)}runGame(e=0){const t=To.n.get().query,n=(0,Ao.uy)(t,"functionalpage-index.html");0===e&&(this.destroy(),To.n.clear()),(0,Oe.QP)({title:"加载中",maskAll:!0});const i=new Promise((t=>{setTimeout((()=>{t()}),e)}));let r=null;const o=[i];Jc()||(r=this.loadTaskPromise,o.push(r)),Promise.all(o).then((()=>{(0,c.IN)("functionalPageStartGame",{url:n,success(e){},fail(e){}}),r&&__subContextEngine__.initGameJS(),(0,Oe.Zk)(),e>0&&(this.destroy(),To.n.clear()),(0,Yo.Vh)(),Zc(Date.now())}))}}let Kc=0,el=0,tl=0,nl={};function il(e,t){let n=1;if("portrait"===(tl>el?"landscape":"portrait")){n=(el-2*(Kc+16+40+12-16))/el}else n=.95;if("portrait"===(e>t?"landscape":"portrait")){t/e-el/tl>=0||(n=(tl-20)/tl)}return n}s.Z.onReady((()=>{el=s.Z.screenHeight,tl=s.Z.screenWidth,nl=s.Z.safeArea;const e=Math.max(el,tl);let t=e;nl&&nl.bottom&&(t=Math.max(nl.bottom,nl.right)),Kc=e-t}));class rl extends Xc{constructor({imageUrl:e}={}){let t=1,n=0,i=0;const r=e.match(/size=(\d+)x(\d+)$/);r&&(n=+r[1],i=+r[2],t=il(n,i));super({slotTemplate:`\n      <image-previewer id="mainImage" scale="${t}"></image-previewer>\n    `,slotStyle:{mainImage:{left:0,top:0,width:tl,height:"portrait"==(tl>el?"landscape":"portrait")?el:el-(Kc+16+40+12)}}}),this.imageUrl=e,this.scale=t,this.width=n,this.height=i,this.sizeMatch=r,this.retried=[];(0,Xs.Wj)(this).mainImage.onImageLoadFail((e=>{this.handleOnImageLoadFail(e)})),this.initImageInfo()}handleOnImageLoadFail(e){const t=this.retried;t.includes(e.url)?(0,Oe.I6)({content:"图片加载失败",showCancel:!1}):(t.push(e.url),this.initImageInfo()),setTimeout((()=>{(0,Oe.Zk)()}),500)}initImageInfo(){(0,Oe.QP)({title:"加载中",maskAll:!0}),this.sizeMatch?this.downloadImage().then((e=>{this.showImage({width:this.width,height:this.height,url:e.tempFilePath,scale:this.scale})})):this.downloadImage().then((e=>{(0,c.IN)("getImageInfo",{src:e.tempFilePath,success:t=>{const{width:n,height:i}=t,r=il(n,i);this.showImage({width:n,height:i,url:e.tempFilePath,scale:r})},fail:()=>{this.handleOnImageLoadFail({url:e.tempFilePath})}})}))}downloadImage(){return new Promise((e=>{(0,y.o)({url:this.imageUrl,success:t=>{e(t)},fail:()=>{this.handleOnImageLoadFail({url:this.imageUrl})}})}))}showImage(e){const{width:t,height:n,url:i,scale:r}=e,o=(0,Xs.Wj)(this);"portrait"===(t>n?"landscape":"portrait")&&(o.mainImage.scale=r),o.mainImage.urls=[i],o.mainImage.update(),setTimeout((()=>{(0,Oe.Zk)()}),500)}}let ol=0,al=0,sl=0,cl=0,ll={};s.Z.onReady((()=>{al=s.Z.screenHeight,sl=s.Z.screenWidth,cl=s.Z.statusBarHeight,ll=s.Z.safeArea;const e=Math.max(al,sl);let t=e;ll&&ll.bottom&&(t=Math.max(ll.bottom,ll.right)),ol=e-t}));class ul extends Xc{constructor({videoUrl:e,thumbUrl:t}={}){super({slotTemplate:`\n      <video id="mainVideo" src="${e}" poster="${t}" controls="true" object-fit="contain" autoplay="false" z-index="1000011" showProgress="false" showProgressInControlMode="true" backgroundColor="transparent"></video>\n    `,slotStyle:function(){const e=sl>al?"landscape":"portrait",t=ol+16+12+40;return{mainVideo:{position:"absolute",top:"portrait"===e?cl+36:20,left:"portrait"===e?0:ol,width:"portrait"===e?sl:sl-2*ol,height:"portrait"===e?al-(cl+36)-t:al-20-t}}}()}),this._handleVideoError(),this._playAtWIFI()}_handleVideoError(){(0,Xs.Wj)(this).mainVideo.onError((()=>{(0,Oe.I6)({title:"视频加载失败，请稍后再试",confirmText:"确定",showCancel:!1})}))}_playAtWIFI(){(0,c.IN)("getNetworkType",{success:({networkType:e})=>{const t=(0,Xs.Wj)(this);"wifi"===e&&(t.mainVideo.showCenterPlayBtn=!1,t.mainVideo.play().then((e=>{})))}})}}const dl=(0,l.s)("BottomBannerButtonClicked"),hl=dl.internalOnMethod;dl.internalOffMethod;function pl(){const e=(0,Ao.bu)(),t=(0,Vr.y)(),n=(0,Ao.CV)(t.path),i=To.n.get();i&&i.page.destroy();const r=function(e){const{path:t,query:n,pageType:i,params:r,paramsString:o,mode:a}=e;let s=null;switch(i){case Eo.Gy.PLAY_PAGE_IMAGE:s="singlePage"===a?new sc({imageUrl:e.params.fileUrl}):new rl({imageUrl:e.params.fileUrl});break;case Eo.Gy.PLAY_PAGE_VIDEO:s="singlePage"===a?new pc({videoUrl:e.params.fileUrl,thumbUrl:e.params.thumbUrl}):new ul({videoUrl:e.params.fileUrl,thumbUrl:e.params.thumbUrl});break;default:s=new sc({imageUrl:e.params.fileUrl}),wxNativeConsole.error("PAGE_TYPE invalid",e)}return{path:t,query:n,pageType:i,params:r,paramsString:o,page:s}}({path:n.path,query:t.query,pageType:n.functionalPageType,params:e,paramsString:JSON.stringify(e),mode:t.mode});To.n.set(r)}(0,es.n)("onBottomBannerButtonClicked",((e={})=>{dl.emit(e)})),s.Z.onReady((()=>{(0,Yo.OQ)(((e={})=>{if(!e.isLaunch)try{const t=(0,Ao.CV)(e.path),n=To.n.get();if(n){const i=(0,Ao.cX)();t.isFunctionalPage?Eo.W0.includes(e.scene)&&i!==n.paramsString&&(n.page.destroy(),To.n.clear(),pl()):n.page.runGame(0)}else t.isFunctionalPage&&pl()}catch(e){wxNativeConsole.error("onAppEnterForeground 错误",e)}})),hl((()=>{const e=To.n.get().params,t=(0,Ao.uy)(e.userQuery,e.userPath);(0,c.IN)("restart",{url:t,scene:1155,fail(e){wxNativeConsole.error("restart fail",e)}})}))}));const fl={parseCompletePath:Ao.CV,initFunctionalPage:pl,VALID_SCENE:Eo.W0};function gl(e,t,n,i=0){Reporter.reportKeyValue({key:"Handoff",value:[s.Z.appType+1e3,s.Z.appLaunchInfo.scene,e,t,n,i,(0,Ae._getCurrentNetworkType)(),""].join(",")})}let _l=!1;mn.U.on("beforeTouchEnd",(()=>{_l=!0})),mn.U.on("afterTouchEnd",(()=>{_l=!1}));let ml="";let yl=null;(0,c.jQ)("onStartHandoff",(()=>{let e={};"function"==typeof yl&&(e=yl({}),"object"!=typeof e&&(e={}),e.path="string"==typeof e.path?e.path:"","string"==typeof e.query&&(e.path=e.path+"?"+e.query)),(0,c.IN)("startHandoff",Object.assign({},e,{actionId:1}),{beforeSuccess:()=>gl(1,1,1),beforeFail:({errCode:e})=>gl(1,1,0,e)})}));const vl=(0,er.Ce)(!1,"getGroupUserGameData"),Al=wxNativeConsole.createLogger("getGroupUserGameData");let bl=[];const wl=(0,er.Ce)(!1,"getFriendUserGameData");let El=[];var Tl=n(6081),Sl=n(6175),Cl=n(4460),Il=n(6329),xl=n(9798);const Dl=(0,Ka.Z)("setUserCloudStorage","webapi_setselfuserstorage",{},{},(({KVDataList:e=[]})=>{const t={kv_list:e};return(0,P.jn)(s.Z.disableSetUserStorageFromMiniProgram)&&(t.disable_set_user_storage_from_miniprogram=s.Z.disableSetUserStorageFromMiniProgram),t}),(e=>(delete e.rawData,e))),Ol=(e={})=>{Array.isArray(e.KVDataList)?0!==e.KVDataList.length?e.KVDataList.some((e=>{if("object"!=typeof e||"string"!=typeof e.key||"string"!=typeof e.value)return!0}))?(0,c.YG)("setUserCloudStorage",e,"invalid KVData item"):Dl(e):(0,c.YG)("setUserCloudStorage",e,"KVDataList.length must greater than 0"):(0,c.YG)("setUserCloudStorage",e,"KVDataList must be an Array")};var Pl=n(5161),Rl=n(8329);const kl=(0,Ka.Z)("removeUserCloudStorage","webapi_removeselfuserstorage",{},{},(({keyList:e})=>({key:e})),(e=>(delete e.rawData,e))),Nl=e=>{const t=(0,Rl.M)(e.keyList);t?(0,c.YG)("removeUserCloudStorage",e,t):kl(e)};var Ml=n(9378),Ll=n(7393);const Bl=102,Fl=103,Ul=104,Wl=105,jl=106,Gl=108,Vl=111,Hl=112,zl=1,Zl=2,Yl=4,$l=5,ql=6,Ql=7,Jl=8,Xl=9,Kl=10,eu=11,tu=12,nu=13,iu=14,ru=15,ou=21,au=22,su=23,cu=1001,lu=1004,uu=1005,du=1006,hu=1007,pu=1e5,fu=100001,gu=2018,_u=2019,mu=2020,yu=2021,vu=2023,Au=2024,bu=3001,wu=3002,Eu=3003,Tu=3004,Su=4001;function Cu(e){try{JSON.parse(e);const t=JSON.parse(e);return!0===t.is_notify?function(e,t){let n;switch(t){case gu:n="broadcast";break;case _u:n="roomInfoChange";break;case mu:n="syncFrame";break;case vu:n="gameStartEnd";break;case yu:n="receiveMessage";break;case Au:n="beKickedOut";break;case bu:case wu:case Eu:n="syncInfo";break;case Tu:n="friendMessage";break;case Su:n="gameMatched";break;default:n=""}return{type:n,data:e.data}}(t,t.notify_cmd):function(e){const{businessid:t,ts:n,data:i,ret:r}=e;let o;switch(t){case Bl:return{type:"active",ts:n,errCode:r};case Fl:return{type:"heartBeat",ts:n,errCode:r};case Ul:case Wl:if(0!==r)return{type:`resp-${n}`,ts:n,errCode:r};const t=JSON.parse(i);return o={type:`resp-${n}`,ts:n,errCode:t.errcode,errMsg:t.errmsg},t.resp_data&&(o.data=JSON.parse(t.resp_data)),o;case Gl:case Vl:case Hl:if(0!==r)return{type:`resp-${n}`,ts:n,errCode:r};const a=JSON.parse(i);return o={type:`resp-${n}`,ts:n,errCode:a.errcode,errMsg:a.errmsg},a.resp_data&&(o.data=JSON.parse(a.resp_data)),o;case jl:return 0!==r?{type:`resp-${n}`,ts:n,errCode:r}:(o={type:`resp-${n}`,ts:n,errCode:0,data:{clientId:i}},o);default:wxNativeConsole.error("Unknown WebSocket Message:",e)}}(t)}catch(e){return{type:"error",data:e.message}}}const Iu={webSocketState:0,roomAccessInfo:"",gameAccessInfo:"",clientId:0,sessionId:"",socketTask:null,lockStep:null,connectedToRoom:!1,connectedToGame:!1,hasGameStarted:!1,roomInfo:null,hasLoggedIn:!1,loginPromise:null},xu={getCredentialsFail:217,startLockStepFail:218,getLostFramesFail:219},Du=e=>{const t=xu[e];t?Reporter.reportIDKey({key:t}):wxNativeConsole.error(`invalid name "${e}"`)},Ou=new Ne.Z;let Pu;class Ru{constructor(e,t={}){return this.options=Object.assign({heartBeat:!0,heartBeatInterval:15e3,heartBeatTimeout:3e4},t),this._emitter=new Ne.Z,this._setSocket(e),this._bindHandlers(),this}_setSocket(e){this._socketTask=e,this._socketTask.onOpen(this._emitter.emit.bind(this._emitter,"ws-open")),this._socketTask.onClose(this._emitter.emit.bind(this._emitter,"ws-close")),this._socketTask.onError(this._emitter.emit.bind(this._emitter,"ws-error")),this._socketTask.onMessage(this._emitter.emit.bind(this._emitter,"ws-message"))}_bindHandlers(){this._emitter.on("ws-open",(()=>{this._emitter.once("recv-active",(e=>{0===e.errCode?this._emitter.emit("open",e):this._emitter.emit("error",e)})),this._sendRawPacket(Bl).catch((e=>{this._emitter.off("recv-active"),this._emitter.emit("error",e)}))})).on("ws-message",(e=>{const t=Cu(e.data);"error"===t.type&&wxNativeConsole.error("响应数据异常",t.data),this._emitter.emit(`recv-${t.type}`,t),Ou.emit(`recv-${t.type}`,t)})).on("open",(()=>{this._sendHeartBeat()})).on("error",(()=>{this._heartBeatTimer&&clearTimeout(this._heartBeatTimer)})).on("ws-error",(e=>{wxNativeConsole.error("socket error:",e),this._heartBeatTimer&&clearTimeout(this._heartBeatTimer)})).on("ws-close",(e=>{wxNativeConsole.warn("socket close:",e),this._heartBeatTimer&&clearTimeout(this._heartBeatTimer),Pu=void 0,Iu.hasLoggedIn=!1,Iu.loginPromise=null,this._emitter.emit("logout",e)})).on("heartBeat-error",(e=>{wxNativeConsole.warn("heartbeat error",e)})).on("logout",(e=>{wxNativeConsole.warn("logout",e),Ou.emit("logout",e)}))}_sendHeartBeat(){this.options.heartBeat&&(this._heartBeatTimer=setTimeout((()=>{this._sendRawPacket(Fl).catch((e=>{this._emitter.emit("heartBeat-error",e)})),this._emitter.once("recv-heartBeat",(e=>{0===e.errCode?(this._emitter.emit("heartBeat-ok",e),this._heartBeatTimeout&&clearTimeout(this._heartBeatTimeout),this._sendHeartBeat()):this._emitter.emit("heartBeat-error",e)})),this._heartBeatTimeout=setTimeout((()=>{this._emitter.emit("logout")}),this.options.heartBeatTimeout)}),this.options.heartBeatInterval))}_sendRawPacket(e,t,n,i){return new Promise((e=>{Pu?e(Pu):(0,er.JM)({apiName:"webapi_getlockstepticket",success:t=>{const n=JSON.parse(t.rawData);Pu=n.socket_key,e(Pu),Iu.sessionId=Pu},fail:e=>{Du(xu.getCredentialsFail),wxNativeConsole.error("getCredentials",e.errMsg)}})})).then((r=>new Promise(((o,a)=>{const s={session_id:r,fast:1,businessid:e,data:t,access_info:n,ts:(i||Date.now())+""};e===Ul&&delete s.session_id,this._socketTask.send({data:JSON.stringify(s),success:o,fail:a})}))))}_listenForResponse(e,t,n,i){this._emitter.once(`recv-resp-${e}`,(e=>{delete e.type,delete e.ts,i.beforeAll&&i.beforeAll(e),0===e.errCode?(i.beforeSuccess&&i.beforeSuccess(e),t(e),i.afterSuccess&&i.afterSuccess(e)):(i.beforeFail&&i.beforeFail(e),n(e),i.afterFail&&i.afterFail(e)),i.afterAll&&i.afterAll(e)}))}sendCommand(e,t,n){let i;switch(e){case Zl:case $l:case Yl:i=Ul;break;case Kl:i=jl;break;case cu:case lu:case uu:case du:case hu:i=Gl;break;case pu:case fu:i=Vl;break;default:i=Wl}return new Promise(((r,o)=>{const{content:a,accessInfo:s}=t,c=Date.now();this._listenForResponse(c,r,o,n),this._sendRawPacket(i,JSON.stringify({cmd:e,content:JSON.stringify(a)}),s,c).then((e=>{})).catch((e=>{wxNativeConsole.error("packet error",e),o(e)}))}))}close(e){return this._socketTask.close(e)}onOpen(e){this._emitter.on("open",e)}onClose(e){this._emitter.on("close",e)}onError(e){this._emitter.on("error",e)}onMessage(e){this._emitter.on("recv-message",e)}}function ku(e={}){return new Ru(function(e={}){const t=Object.assign({},e,{url:"wss://long.wxagame.weixin.qq.com"});return ce().connectSocket(t)}(e),e)}function Nu(e){return"Object"===(0,P.Em)(e)?Object.keys(e).reduce(((t,n)=>{var i;return e[n]=Nu(e[n]),t[(i=n,i.replace(/_+(\w)/g,(function(){return arguments[2]?arguments[1].toUpperCase():arguments[0]})))]=e[n],t}),{}):Array.isArray(e)?e.map(Nu):e}function Mu(e){return"Object"===(0,P.Em)(e)?Object.keys(e).reduce(((t,n)=>{var i;return e[n]=Mu(e[n]),t[(i=n,i.split(/(?=[A-Z])/).join("_").toLowerCase())]=e[n],t}),{}):Array.isArray(e)?e.map(Mu):e}function Lu(){wxNativeConsole.warn("[getConfigOptions][WXConfig]",s.Z);const e={gameTick:33,UDPReliabilityStrategy:3,heartBeatTick:2e3,offlineTimeLength:15e3,dataType:"String"};return(0,P.Kn)(s.Z.lockStepOptions)?(["gameTick","UDPReliabilityStrategy","heartBeatTick","offlineTimeLength"].forEach((t=>{(0,P.hj)(s.Z.lockStepOptions[t])?e[t]=s.Z.lockStepOptions[t]:console.warn(`game.json: lockStepOptions.${t} is not a Number, using default value ${e[t]}`)})),["String","ArrayBuffer"].indexOf(s.Z.lockStepOptions.dataType)&&console.warn('game.json: lockStepOptions.dataType "WXConfig.lockStepOptions.dataType" is invalid, using default value "String"'),e):(console.warn("game.json: lockStepOptions is not an Object, using default options.",e),e)}const Bu=new Ne.Z;let Fu=1;const Uu=0,Wu=1,ju=2,Gu=3,Vu=4,Hu=5,zu=6,Zu=6;const Yu=class{constructor(){if(!o.Z.LockStep)return void wxNativeConsole.error("当前环境不支持 LockStep");this.emitter=new Ne.y;try{this.nativeInstance=new o.Z.LockStep}catch(e){wxNativeConsole.warn(`[LockStep] new 失败 ${e.message}`)}wxNativeConsole.warn("[LockStep] new 成功",this.nativeInstance);const{heartBeatTick:e,offlineTimeLength:t,gameTick:n,UDPReliabilityStrategy:i,dataType:r}=Lu(),a={heartBeatTick:e,offlineTimeLength:t,UDPReliabilityStrategy:i,gameTick:n,dataType:r,address:"long.wxagame.weixin.qq.com",port:10010};wxNativeConsole.warn(`[LockStep.initialize]gameTick=${a.gameTick}, hearBeatTick=${a.heartBeatTick}, offlineTimeLength=${a.offlineTimeLength}, UDPReliabilityStrategy=${a.UDPReliabilityStrategy}, gameTick=${a.gameTick}, dataType=${r}, address=${a.address}, port=${a.port}`),this.nativeInstance.initialize(a),this.nativeInstance.onStatusChange=e=>{const{status:t}=e,{requestId:n}=e;if(delete e.status,wxNativeConsole.warn(`[LockStep.onStatusChange] status=${t}, requestId=${n}`,e),n)wxNativeConsole.warn(`[LockStep.onStatusChange]key=${t}_${n}`),this.emitter.emit(`${t}_${n}`,e);else{switch(t){case Uu:this.emitter.emit("onDisconnect");break;case Hu:this.emitter.emit("onError"),Bu.emit("error",e)}this.emitter.emit(t,e)}},this.nativeInstance.onSyncFrame=e=>{this.emitter.emit("onSyncFrame",e)}}uploadFrame({actionList:e}){return new Promise(((t,n)=>{try{this.nativeInstance.uploadFrame({actionList:e}),t()}catch(e){wxNativeConsole.error(`[LockStep.uploadFrame][fail] errMsg=${e.message}`),n({errMsg:e.message})}}))}getLostFrames({beginFrameId:e,endFrameId:t}){const n=Fu++;return new Promise(((i,r)=>{this.nativeInstance.getLostFrames({beginFrameId:e,endFrameId:t,requestId:n}),this.emitter.once(`${zu}_${n}`,i),this.emitter.once(`${Zu}_${n}`,(e=>{Du(xu.getLostFramesFail),wxNativeConsole.error(`[LockStep.getLostFrames][fail], errMsg=${e.errMsg}, errCode=${e.errCode}`),r(e)}))}))}reconnect({accessInfo:e,clientId:t,sessionId:n}){const i=Fu++;return wxNativeConsole.warn(`[LockStep.reconnect]accessInfo=${e}, clientId=${t}, sessionId=${n}, requestId=${i}`),new Promise(((r,o)=>{this.nativeInstance.reconnect({accessInfo:e,clientId:t,sessionId:n,requestId:i}),this.emitter.once(`${Gu}_${i}`,r),this.emitter.once(`${Vu}_${i}`,o)}))}onSyncFrame(e){this.emitter.on("onSyncFrame",e)}offSyncFrame(e){this.emitter.off("onSyncFrame",e)}startLockStep({accessInfo:e,clientId:t,sessionId:n}){const i=Fu++;return wxNativeConsole.warn(`[LockStep.startLockStep]accessInfo=${e}, clientId=${t}, sessionId=${n}, requestId=${i}`),new Promise(((r,o)=>{this.nativeInstance.startLockStep({accessInfo:e,clientId:t,sessionId:n,requestId:i}),this.emitter.once(`${Wu}_${i}`,r),this.emitter.once(`${ju}_${i}`,o)}))}stopLockStep(){wxNativeConsole.warn("[LockStep.stopLockStep]");const e=Fu++;this.nativeInstance.stopLockStep({requestId:e})}onError(e){this.emitter.on("onError",e)}offError(e){this.emitter.off("onError",e)}onDisconnect(e){this.emitter.on("onDisconnect",e)}offDisconnect(e){this.emitter.off("onDisconnect",e)}};var $u=n(3451),qu=n.n($u);const Qu=["id","event"],Ju=new Ne.y;(0,c.jQ)("onLockStepTaskEvent",(e=>{let{id:t,event:n}=e,i=qu()(e,Qu);Ju.emit(`${t}_${n}`,i),Bu.emit(n,i)}));const Xu=class{constructor(){this._createLockStep(),this._initialize(),this._registerMethod(),this._registerEvent()}_createLockStep(){let e="createLockStep 没有同步回调";if((0,c.IN)("createLockStep",{success:({id:e})=>{wxNativeConsole.warn(`[createLockStep][success]id=${e}`),this.id=e},fail(t){wxNativeConsole.error(`[createLockStep][fail]errMsg=${t.errMsg}`),e=t.errMsg}}),(0,P.o8)(this.id))throw new Error(e)}_initialize(){const{heartBeatTick:e,offlineTimeLength:t,gameTick:n,UDPReliabilityStrategy:i,dataType:r}=Lu(),o={heartBeatTick:e,offlineTimeLength:t,UDPReliabilityStrategy:i,gameTick:n,dataType:r,address:"long.wxagame.weixin.qq.com",port:10010};wxNativeConsole.warn(`[LockStep.initialize]gameTick=${o.gameTick}, hearBeatTick=${o.heartBeatTick}, offlineTimeLength=${o.offlineTimeLength}, UDPReliabilityStrategy=${o.UDPReliabilityStrategy}, gameTick=${o.gameTick}, dataType=${o.dataType}, address=${o.address}, port=${o.port}`),this._invokeLockStepMethod("initialize",o)}_invokeLockStepMethod(e,t){(0,c.IN)("invokeLockStepMethod",Object.assign({},t,{method:e,id:this.id}),{beforeAll(t){t.errMsg=t.errMsg.replace("invokeLockStepMethod",`GameServerManager.${e}`),delete t.id,delete t.cmdId}})}_registerMethod(){["uploadFrame","getLostFrames","reconnect","startLockStep","stopLockStep"].forEach((e=>{this[e]=t=>new Promise(((n,i)=>{this._invokeLockStepMethod(e,Object.assign({},t,{success:n,fail:i}))}))}))}_registerEvent(){["syncFrame","disconnect","error"].forEach((e=>{const t=(0,l.s)(`LockStep_${this.id}_${e}`);this[`on${(0,p.fm)(e)}`]=t.onMethod,this[`off${(0,p.fm)(e)}`]=t.offMethod,Ju.on(`${this.id}_${e}`,((e={})=>{t.emit(e)}))}))}};const Ku=class{constructor(){return a.gm?new Xu:new Yu}};function ed(){}const td=class{constructor({wsEventName:e,nativeEventName:t,needJSONParse:n=!1,beforeEvent:i=ed}){if(Object.assign(this,{wsEventName:e,nativeEventName:t,needJSONParse:n,beforeEvent:i}),this.hasListenedNativeEvent=!1,e)this.internalEventManager=(0,l.s)(`GSM-${this.wsEventName}`),this.initWSEvent();else{if(!t)throw new Error(`invalid wsEventName "${e}" and nativeEventName "${t}"`);this.internalEventManager=(0,l.s)(`GSM-${this.nativeEventName}`)}}initWSEvent(){Ou.on(this.wsEventName,(e=>{this.needJSONParse?e=Nu(JSON.parse(e.data)):e.data=Nu(e.data),this.beforeEvent(e),this.internalEventManager.emit(e)})),this.onMethod=this.internalEventManager.onMethod,this.offMethod=this.internalEventManager.offMethod}onMethod(e){this.hasListenedNativeEvent||(this.hasListenedNativeEvent=!0,Iu.lockStep||(Iu.lockStep=new Ku),Iu.lockStep[this.nativeEventName](((e={})=>{this.beforeEvent(e),this.internalEventManager.emit(e)}))),this.internalEventManager.onMethod(e)}offMethod(e){this.internalEventManager.offMethod(e)}},nd=new td({nativeEventName:"onDisconnect",beforeEvent(e){e.type="game",Iu.connectedToGame=!1}}),id=nd.onMethod.bind(nd),rd=nd.offMethod.bind(nd),od=nd.internalEventManager.emit,ad={errCode:1001,errMsg:"has not logged in to server"};function sd(){}const cd=class{constructor({command:e,nativeMethodName:t,expectedArgs:n={},beforeInvoke:i=sd,beforeSend:r=sd,beforeSuccess:o=sd,autoFillAccessInfo:a=!0,functionType:s=1}){this.command=e,this.nativeMethodName=t,this.expectedArgs=n,this.beforeInvoke=i,this.beforeSend=r,this.beforeSuccess=o,this.autoFillAccessInfo=a,this.functionType=s}checkType(e,t,n){const i=(0,P.Em)(n);if(i!==t)throw new Error(`${e} should be ${t} instead of ${i}`)}assertType(e){if("Object"!==(0,P.Em)(e))throw new Error(`args should be object instead of ${(0,P.Em)(e)}`);for(const t in this.expectedArgs)this.checkType(t.type,e[this.expectedArg.name])}checkIsCallbackStyle(e={}){return"Function"===(0,P.Em)(e.success)||"Function"===(0,P.Em)(e.fail)||"Function"===(0,P.Em)(e.complete)}sendCommand({rawArgs:e}){return Iu.hasLoggedIn?new Promise(((t,n)=>{let i;i=this.autoFillAccessInfo?Iu.roomAccessInfo:e.accessInfo;const r={accessInfo:i,content:Mu(e)};delete r.content.access_info,this.beforeSend(r,e),Iu.socketTask.sendCommand(this.command,r,{}).then((e=>{e=Nu(e);const i=this.beforeSuccess(e);i instanceof Promise?i.then((()=>{t(e)})).catch((e=>{n(e)})):t(e)})).catch((e=>{n(e)}))})):Promise.reject(ad)}callNative({rawArgs:e}){const t=Object.assign({},e);return delete t.success,delete t.fail,delete t.complete,["login","reconnect"].includes(this.nativeMethodName)&&(t.sessionId=Iu.sessionId,t.clientId=Iu.clientId),Iu.lockStep||(Iu.lockStep=new Ku),Iu.lockStep[this.nativeMethodName](t)}invokeMethod(e={}){this.assertType(e),this.beforeInvoke(e);const t=this.checkIsCallbackStyle(e);let n;switch(this.functionType){case 1:n=this.sendCommand({rawArgs:e});break;case 2:n=this.callNative({rawArgs:e});break;default:throw new Error(`invalid function type: ${this.functionType}`)}return t?void n.then((t=>{e.success&&e.success(t),e.complete&&e.complete(t)})).catch((t=>{e.fail&&e.fail(t),e.complete&&e.complete(t)})):n}},ld=new cd({command:Jl,beforeSend(e){const{gameTick:t,UDPReliabilityStrategy:n}=Lu();e.content.udp_reliability_strategy=n,e.content.game_tick=t},beforeSuccess(e){Iu.gameAccessInfo&&Iu.lockStep.stopLockStep();const{accessInfo:t,clientId:n}=e.data;Iu.roomAccessInfo=t,Iu.gameAccessInfo="",Iu.connectedToRoom=!0,Iu.clientId=n}}),ud=ld.invokeMethod.bind(ld),dd=new cd({command:Xl,autoFillAccessInfo:!1,beforeSend(e){this.tempAccessInfo=e.accessInfo},beforeSuccess(e){const{clientId:t}=e.data;Iu.roomAccessInfo=this.tempAccessInfo,Iu.gameAccessInfo="",Iu.connectedToRoom=!0,Iu.clientId=t}}),hd=dd.invokeMethod.bind(dd),pd=new cd({command:eu}),fd=pd.invokeMethod.bind(pd),gd=new cd({command:tu}),_d=gd.invokeMethod.bind(gd),md=new cd({command:ru}),yd=md.invokeMethod.bind(md),vd=new cd({command:ql}),Ad=vd.invokeMethod.bind(vd),bd=new cd({command:iu,beforeSend(e){e.content.quit=!0},beforeSuccess(){Iu.gameAccessInfo&&Iu.lockStep.stopLockStep(),Iu.roomAccessInfo="",Iu.gameAccessInfo=""}}),wd=bd.invokeMethod.bind(bd),Ed=new cd({command:nu,beforeSuccess(){Iu.gameAccessInfo&&Iu.lockStep.stopLockStep(),Iu.roomAccessInfo="",Iu.gameAccessInfo=""}}),Td=Ed.invokeMethod.bind(Ed),Sd=new cd({command:zl,beforeSend(e){e.content.use_udp_to_lockstep=!0}}),Cd=Sd.invokeMethod.bind(Sd),Id=new cd({command:Ql,beforeInvoke(){if(!Iu.gameAccessInfo)throw new Error("game has not started")},beforeSend(e){e.content.use_udp_to_lockstep=!0}}),xd=Id.invokeMethod.bind(Id),Dd=new cd({functionType:2,nativeMethodName:"uploadFrame"}),Od=Dd.invokeMethod.bind(Dd),Pd=new cd({functionType:2,nativeMethodName:"getLostFrames"}),Rd=Pd.invokeMethod.bind(Pd),kd=new td({wsEventName:"recv-broadcast",needJSONParse:!0}),Nd=kd.onMethod,Md=kd.offMethod,Ld=new td({wsEventName:"recv-roomInfoChange",needJSONParse:!0,beforeEvent(e){wxNativeConsole.warn("[onRoomInfoChange][beforeEmit] 储存 roomInfo"),Iu.roomInfo=e}}),Bd=Ld.onMethod,Fd=Ld.offMethod;new td({wsEventName:"recv-gameStartEnd",needJSONParse:!0}).onMethod((({state:e,accessInfo:t})=>{switch(e){case 2:wxNativeConsole.warn(`[onGameStart] accessInfo=${t}`),Iu.gameAccessInfo=t,Iu.lockStep||(Iu.lockStep=new Ku),Iu.lockStep.startLockStep({accessInfo:t,clientId:Iu.clientId,sessionId:Iu.sessionId}).then((()=>{Iu.connectedToGame=!0,Iu.hasGameStarted=!0,Ud.emit({}),wxNativeConsole.warn("[onGameStart][LockStep.start][success]")})).catch((e=>{Du(xu.startLockStepFail),wxNativeConsole.error("[onGameStart][LockStep.start][fail]",e)}));break;case 3:wxNativeConsole.warn("[onGameEnd]"),Iu.lockStep.stopLockStep(),Iu.hasGameStarted=!0,Gd.emit({gameAccessInfo:Iu.gameAccessInfo}),Iu.gameAccessInfo=""}}));const Ud=(0,l.s)("LockStepGameStart"),Wd=Ud.onMethod,jd=Ud.offMethod,Gd=(0,l.s)("LockStepGameEnd"),Vd=Gd.onMethod,Hd=Gd.offMethod,zd=new td({nativeEventName:"onSyncFrame",beforeEvent(){Iu.hasGameStarted||(Iu.hasGameStarted=!0,Iu.connectedToGame=!0,Ud.emit({}))}}),Zd=zd.onMethod.bind(zd),Yd=zd.offMethod.bind(zd),$d=(()=>{const e=new cd({command:Kl,autoFillAccessInfo:!1});return e.invokeMethod.bind(e)})(),qd=(()=>{const e=new cd({functionType:2,nativeMethodName:"reconnect",beforeSuccess(){Iu.connectedToGame=!0}});return e.invokeMethod.bind(e)})();function Qd(e){if(wxNativeConsole.info(`[gameReconnect]connectedToGame=${Iu.connectedToGame}, roomState=${e.roomState}`),Iu.connectedToGame)return Promise.resolve({});switch(e.roomState){case 1:return Promise.resolve({});case 2:case 5:const{gameAccessInfo:t}=e;return Iu.gameAccessInfo=t,qd({accessInfo:t,clientId:Iu.clientId,sessionId:Iu.sessionId});case 3:return Promise.reject({errMsg:"the room state is ended."});case 4:return Promise.reject({errMsg:"the room state is destroyed"});default:return Promise.reject({errMsg:`invalid room state: ${e.roomState}`})}}const Jd=new cd({command:ou}),Xd=Jd.invokeMethod.bind(Jd),Kd=new cd({command:au}),eh=Kd.invokeMethod.bind(Kd),th=new td({wsEventName:"recv-beKickedOut",needJSONParse:!1,beforeEvent(e){Iu.gameAccessInfo&&Iu.lockStep.stopLockStep(),Iu.roomAccessInfo="",Iu.gameAccessInfo="",wxNativeConsole.warn("[onBeKickedOut]",e)}}),nh=th.onMethod.bind(th),ih=th.offMethod.bind(th),rh=new cd({command:su}),oh=rh.invokeMethod.bind(rh),ah=new cd({command:cu}),sh=ah.invokeMethod.bind(ah),ch=new cd({command:uu}),lh=ch.invokeMethod.bind(ch);let uh="";const dh=new cd({command:du}),hh=dh.invokeMethod.bind(dh);const ph=new cd({command:hu}),fh=ph.invokeMethod.bind(ph),gh=new td({wsEventName:"recv-syncInfo",needJSONParse:!0}),_h=gh.onMethod,mh=gh.offMethod,yh=new Ne.Z;new td({wsEventName:"recv-friendMessage",needJSONParse:!0}).onMethod((e=>{e.msg=JSON.parse(e.msg),yh.emit(e.msg.type,e)}));const vh=new WeakMap;const Ah=(0,Ka.Z)("getFriendsStateData","webapi_opengameinfo_getfriendsuserdata",{},{},(()=>{}),(e=>{const{friend_data_list:t}=e;return e.list=t?t.map((({game_info:e,profile:t})=>({userState:e.user_state,sysState:e.sys_state,openId:e.open_id,nickName:t.nick_name,avatarUrl:t.avatar_url,gender:t.gender}))):[],delete e.friend_data_list,delete e.rawData,e})),bh=new cd({command:pu}),wh=bh.invokeMethod.bind(bh),Eh=new cd({command:fu}),Th=Eh.invokeMethod.bind(Eh),Sh=new td({wsEventName:"recv-gameMatched",needJSONParse:!0}),Ch=Sh.onMethod,Ih=Sh.offMethod,xh={login:()=>(Iu.loginPromise||(Iu.loginPromise=new Promise(((e,t)=>{const n=e=>{wxNativeConsole.error("connectSocketError",e),t(e.errMsg)};Iu.socketTask=ku(),Iu.socketTask._emitter.once("recv-active",(()=>{Iu.hasLoggedIn=!0,e(),Iu.socketTask._emitter.off("ws-error",n)})),Iu.socketTask._emitter.once("ws-error",n)}))),Iu.loginPromise),logout:()=>new Promise(((e,t)=>{if(!Iu.socketTask)return e();try{Iu.socketTask.close(),Iu.socketTask._emitter.once("ws-close",e),delete Iu.socketTask}catch(e){wxNativeConsole.error("GameServerManager.logout() fail",e.message),t(e.message)}})),onLogout:e=>{Ou.on("logout",(()=>{e(),Iu.roomAccessInfo&&od({type:"room"})}))},offLogout:e=>{Ou.off("logout",e)},createRoom:ud,joinRoom:hd,updateReadyStatus:fd,changeSeat:_d,getRoomInfo:yd,broadcastInRoom:Ad,ownerLeaveRoom:Td,memberLeaveRoom:wd,startGame:Cd,endGame:xd,uploadFrame:Od,getLostFrames:Rd,reconnect:e=>{return wxNativeConsole.warn("[reconnect][invoke]",e),(t=e.accessInfo,$d({accessInfo:t}).then((e=>(wxNativeConsole.warn(`[roomReconnect][success]accessInfo=${t}, clientId=${e.data.clientId}`),Iu.roomAccessInfo=t,Iu.connectedToRoom=!0,Iu.clientId=Number(e.data.clientId),yd()))).then((e=>(wxNativeConsole.warn("[getRoomInfo][success]",e),Iu.roomInfo=e.data.roomInfo,Iu.roomInfo.gameAccessInfo&&(Iu.gameAccessInfo=Iu.roomInfo.gameAccessInfo),Promise.resolve(Iu.roomInfo))))).then(Qd);var t},getLastRoomInfo:Xd,kickoutMember:eh,restart:oh,onBroadcast:Nd,offBroadcast:Md,onRoomInfoChange:Bd,offRoomInfoChange:Fd,onSyncFrame:Zd,offSyncFrame:Yd,onGameStart:Wd,offGameStart:jd,onGameEnd:Vd,offGameEnd:Hd,onDisconnect:id,offDisconnect:rd,onBeKickedOut:nh,offBeKickedOut:ih,onLockStepError:function(e){"function"==typeof e&&Bu.on("error",e)},offLockStepError:function(e){"function"==typeof e?Bu.off("error",e):Bu.removeAllListeners("error")},startStateService:sh,endStateService:lh,setState:fh,setInviteData:function(e){return"string"==typeof e&&(uh=e,!0)},onInvite:function(e){const t=({srcProfile:t,msg:n})=>{const{data:i}=n,{nickName:r,openId:o}=t,a=o+"_"+Date.now(),s=[o,"",1,a].join(",");Reporter.reportKeyValue({key:"GameServerInvite",value:s}),(0,Oe.I6)({confirmText:"加入",cancelText:"取消",content:`${r} 邀请你一起玩游戏，是否加入？`,success:t=>{t.confirm&&e({openId:o,data:i});const n=[o,"",t.confirm?2:3,a].join(",");Reporter.reportKeyValue({key:"GameServerInvite",value:n})}})};vh.set(e,t),yh.on("invite",t)},offInvite:function(e){yh.off("invite",vh.get(e)),vh.delete(e)},startMatch:wh,cancelMatch:Th,onMatch:Ch,offMatch:Ih},Dh={inviteFriend:function({openId:e}){hh({target_openid_list:[e],msg:JSON.stringify({type:"invite",data:uh})})},onStateUpdate:_h,offStateUpdate:mh,getFriendsStateData:Ah},Oh=new WeakMap;class Ph extends Number{}const Rh=()=>new Ph(9999);class kh{constructor(){Oh.set(this,new WeakMap)}setTimeout(){const e=Oh.get(this),t=o.Z.setTimeout.apply(void 0,arguments),n=Rh();return e.set(n,t),n}clearTimeout(e){const t=Oh.get(this).get(e);void 0!==t&&o.Z.clearTimeout(t)}setInterval(){const e=Oh.get(this),t=o.Z.setInterval.apply(void 0,arguments),n=Rh();return e.set(n,t),n}clearInterval(e){const t=Oh.get(this).get(e);void 0!==t&&o.Z.clearInterval(t)}requestAnimationFrame(){const e=Oh.get(this),t=o.Z.requestAnimationFrame.apply(void 0,arguments),n=Rh();return e.set(n,t),n}cancelAnimationFrame(e){const t=Oh.get(this).get(e);void 0!==t&&o.Z.cancelAnimationFrame(t)}}const Nh=()=>{const e=new kh;return{setTimeout:e.setTimeout.bind(e),clearTimeout:e.clearTimeout.bind(e),setInterval:e.setInterval.bind(e),clearInterval:e.clearInterval.bind(e),requestAnimationFrame:e.requestAnimationFrame.bind(e),cancelAnimationFrame:e.cancelAnimationFrame.bind(e)}};var Mh=n(272),Lh=n(138);const Bh=wxNativeConsole.createLogger("requirePlugin");function Fh(e,t={},n=!1){Bh.log(`invoke: schema=${e}, env's type=${typeof env}`);const{pluginId:i,contexts:r,path:o}=(e=>{const t=e.match(/([^/]*)\/?(.*)/);if(!t||t.length<2)throw new Error(`Plugin "${e}" has not registered.`);const n=t[1],i=t[2],r=s.Z.plugins||s.Z.gamePlugins,o=r&&r[n];if(void 0===o)throw new Error(`Plugin "${e}" has not registered.`);return{pluginId:o.provider,contexts:o.contexts,alias:n,path:i}})(e);Bh.log(`pluginId=${i}, path=${o}, contexts=`,r);const a=`__plugin__/${i}`+(o?`/${o}`:"");let c;if(Bh.log(`modKey=${a}`),!n&&((e=[])=>e.some((e=>"isolatedContext"===e.type)))(r)){Bh.log("isIsolatedContext");const e=(0,Lh.dU)(i,t);Bh.log("env.keys: ",Object.keys(e)),c=__subContextEngine__.createIsolatedGamePlugin({provider:i,secure:!0,env:e,isPreload:!1})}else if(!n&&(e=>!e||e.some((e=>"gameContext"===e.type)))(r))Bh.log("isGameContext"),c=__subContextEngine__.getGameContext().contextGlobal.__require;else{if(!n||!(e=>e.some((e=>"openDataContext"===e.type)))(r))throw new Error(`invalid context type: ${(0,P.e6)(r)}`);Bh.log("isOpenDataContext"),c=__subContextEngine__.getGameOpenDataContext().contextGlobal.__require}return c(a)}const Uh=(0,qe.TG)("routeJSServer","routeJsSvr",{},{},(({name:e="",arg:t=""})=>({json_args:JSON.stringify({data:JSON.stringify({arg:t,name:e})})})),(e=>{if(!e.rawData)return e.errMsg,e;e.rawData;const{data:t,log:n}=JSON.parse(e.rawData);return e.data=JSON.parse(t),e.log=n,e.baseResp=JSON.parse(e.base_resp),e.baseResp.errCode=e.baseResp.errcode,e.baseResp.errMsg=e.baseResp.errmsg,delete e.rawData,delete e.base_resp,delete e.baseResp.errcode,delete e.baseResp.errmsg,e}));var Wh=n(7765);const jh={createWorker:ba},Gh=({provider:e})=>{const t={};(0,Wh.oq)(t,{provider:e});for(const e in jh)t[e]=jh[e].bind(t);return t};let Vh=null;const Hh=Nh(),zh={console:Object.assign({},console),Reporter:Reporter,setTimeout:Hh.setTimeout,clearTimeout:Hh.clearTimeout,setInterval:Hh.setInterval,clearInterval:Hh.clearInterval,requestAnimationFrame:Hh.requestAnimationFrame,cancelAnimationFrame:Hh.cancelAnimationFrame,wxNativeConsole:wxNativeConsole,FunctionalPage:fl,requirePlugin:function(e,t){return Fh(e,t)},WXWebAssembly:(0,$s.o8)(),getWxSourceMap(){if("undefined"!=typeof __wxSourceMap)return __wxSourceMap},_getCurrentNetworkType:Ae._getCurrentNetworkType},Zh=Nh(),Yh={WXConfig:s.Z,log:o.Z.log,setTimeout:Zh.setTimeout,clearTimeout:Zh.clearTimeout,setInterval:Zh.setInterval,clearInterval:Zh.clearInterval,requestAnimationFrame:Zh.requestAnimationFrame,cancelAnimationFrame:Zh.cancelAnimationFrame,Canvas:Fr.UK,Image:Ur.D,Touch:no.E,Audio:gi,APIs:{getGroupUserGameData:({shareTicket:e,success:t,fail:n,complete:i}={})=>{setTimeout((function(){const r=ye.BN.l7,o=e||r.lastShareTicket;if(o&&r.get(o)){const e=r.get(o),{shareKey:a,shareName:s}=e;Al.info("shareTicket=",o),Al.info("shareInfo=",JSON.stringify(e)),vl({apiName:"webapi_getgroupsnsdata",reqData:{share_key:a,share_name:s},success:e=>{const n=JSON.parse(e.respData.data),i=n.member_list||n.memberList||[];bl=i,"function"==typeof t&&t({errMsg:e.errMsg,data:i})},fail:n,complete:i})}else{const e={errMsg:"getGroupUserGameData:fail 当前小程序不是从群分享卡片打开"};"function"==typeof n&&n(e),"function"==typeof i&&i(e)}}),0)},getFriendUserGameData:({success:e,fail:t,complete:n}={})=>{setTimeout((function(){wl({apiName:"webapi_getfriendsnsdata",reqData:{},success:t=>{const n=JSON.parse(t.respData.data).friendList||[];El=n,"function"==typeof e&&e({errMsg:t.errMsg,data:n})},fail:t,complete:n})}),0)},getUserInfo:Tl.b,getFriendCloudStorage:Sl.l,getGroupInfo:Cl.y,getGroupCloudStorage:Il.q,getUserCloudStorage:xl.u,setUserCloudStorage:Ol,getUserCloudStorageKeys:Pl.r,removeUserCloudStorage:Nl,getGroupDataCache:()=>bl,getFriendDataCache:()=>El,getSystemInfo:ve.So,getSystemInfoSync:ve.xI,showModal:Oe.K4,modifyFriendInteractiveStorage:Mh.Fc,shareMessageToFriend:Ml.N,getPotentialFriendList:Ll.e,getGameServerManager:()=>Dh,routeJSServer:Uh,getCloudFileUrl:mt.V,checkHandoffEnabled:function(e={}){(0,c.IN)("checkHandoffEnabled",Object.assign({},e,{showToast:!1}),{beforeSuccess:({isEnabled:e,errCode:t})=>gl(2,3,e?1:0,t)})},startHandoff:function(e={}){(0,K.J)("handoff")?_l?(0,c.IN)("checkHandoffEnabled",{showToast:!0,success({isEnabled:t,errCode:n}){t?function(e={}){gl(2,2,2),(0,us.lX)({apply:"在电脑端微信打开小游戏",success(){gl(2,2,1),(0,c.IN)("startHandoff",Object.assign({},e,{actionId:2}),{beforeSuccess:()=>gl(2,1,1),beforeFail:({errCode:e})=>gl(2,1,0,e)})},fail(){gl(2,2,0),(0,c.YG)("startHandoff",e,"cancel")}})}(Object.assign({},e,{path:ml})):(gl(2,1,0,n),(0,c.YG)("startHandoff",e,"low pc version or not login"))},fail({errMsg:t}){(0,c.YG)("startHandoff",e,t)}}):(0,c.YG)("startHandoff",e,"not in touchEnd"):(0,c.YG)("startHandoff",e,"no permission")}},checkPermissionSync:K.J,apiReport:g.X,Reporter:Reporter,wxNativeConsole:wxNativeConsole,requirePlugin:Fh,getWxSourceMap(){if("undefined"!=typeof __wxSourceMap)return __wxSourceMap}};a.gm&&(Yh.console=console);const $h=function(){if(Vh)return Vh;if(zh.sharedCanvas=(0,Fr.zL)(),Yh.sharedCanvas=(0,Fr.zL)(),Yh.originalProto=(0,qs.w)(),Yh.WXConfig=s.Z,zh.wx=wx,s.Z.openDataContextExtension){const e=Object.assign({},wx,{getFileSystemManager:()=>ue.ZP.opendata},me.opendata);e.env={USER_DATA_PATH:(0,ue.WZ)()},Yh.wx=e,Yh.NativeGlobal=o.Z}return Vh={game:zh,gameOpenData:Yh},Vh},qh=e=>{const{provider:t}=e;return{console:Object.assign({},console),Reporter:Reporter,setTimeout:o.Z.setTimeout,clearTimeout:o.Z.clearTimeout,setInterval:o.Z.setInterval,clearInterval:o.Z.clearInterval,requestAnimationFrame:o.Z.requestAnimationFrame,cancelAnimationFrame:o.Z.cancelAnimationFrame,WXWebAssembly:(0,$s.o8)({provider:t}),wx:Gh({provider:t})}},Qh=(e={})=>{(0,c.IN)("uploadToCommonCDN",e,{})},Jh=function(e,t,n){for(const n in t){if("exportToAppServiceSDK"===n)return;e[n]=t[n]}["onPageReload"].forEach((i=>{t[i]&&(e[i]=e=>{t[i].call(n,e)})}))},Xh=(0,er.Ce)(!1,"getAdData"),Kh=(0,er.Ce)(!1,"reportAdData"),ep="1.9.91";class tp{constructor({traceid:e,aid:t,group_id:n,dest_type:i,dest_appid:r,watermark_type:o,url:a,rl:s,apurl:c,weapp_ghid:l,pt:u,title:d,imageUrl:h,width:p,height:f}){this.traceid=e,this.aid=t,this.group_id=n,this.dest_type=i,this.dest_appid=r,this.watermark_type=o,this.url=a,this.rl=s,this.apurl=c,this.weapp_ghid=l,this.pt=u,this.title=d,this.imageUrl=h,this.width=p,this.height=f}getConstant(){let e=["traceid","aid","group_id","weapp_ghid","pt"];return 1===this.dest_type&&(e=["traceid","aid","group_id","pt"]),Object.keys(this).filter((t=>-1!==e.indexOf(t))).reduce(((e,t)=>(e[t]=this[t],e)),{sdk_version:ep})}report(e,t,n,i){Kh({apiName:"advert_report",reqData:e,success:e=>{try{0!==(e=JSON.parse(e.rawData)).ret?"function"==typeof n&&n({errMsg:`reportAdData fail: ret ${e.ret}`}):"function"==typeof t&&t(e)}catch(e){"function"==typeof n&&n({errMsg:e.message})}},fail:n,complete:i})}reportExpose({viewable:e,screenCount:t=1,success:n,fail:i,complete:r}={}){const o=this.getConstant(),a={report_type:0,apurl:this.apurl,viewable:e,screen_cnt:t};this.report(Object.assign({},a,o),n,i,r)}reportClick({screenCount:e=1,absoluteX:t=0,absoluteY:n=0,pressInterval:i=0,relativeX:r=0,relativeY:o=0,realWidth:a,realHeight:s,success:c,fail:l,complete:u}={}){const d=this.getConstant(),h={report_type:1,rl:this.rl,screen_cnt:e,click_point:JSON.stringify({x:t,y:n}),press_interval:i,pos_x:r,pos_y:o,ad_w:a,ad_h:s,from_game:1};this.report(Object.assign({},h,d),c,l,u)}navigateTo({success:e,fail:t,complete:n}={}){1===this.dest_type?(0,ls.Y)({url:this.url,success:e,fail:t,complete:n}):6===this.dest_type?(0,c.IN)("navigateToMiniProgram",{appId:this.dest_appid,path:(0,v.Pp)(this.url).trim(),scene:1092,sourcetype:1,success:e,fail:t,complete:n}):"function"==typeof t&&t({errMsg:`dest_type ${this.dest_type} 是一个非法值`})}}var np=n(9598),ip=n(9237);const rp=function(e,t,n){return Xs.S1.call(this,e,(e=>{const t={};for(const n of Object.keys(e||{}))e[n]&&(t[n]=Object.assign({},e[n]),e[n].landscape&&!e[n].landscapeLeft&&(t[n].landscapeLeft=Object.assign({},e[n].landscape)),e[n].landscape&&!e[n].landscapeRight&&(t[n].landscapeRight=Object.assign({},e[n].landscape)));return t})(t),n)};var op=n(2241),ap=n(8401),sp=n(19);const cp={type:"EOF"};class lp{constructor(){this.token=[],this.tokens=[],this.state=null,this.state=this.start}isEOF(e){return e&&"object"==typeof e&&"EOF"===e.type}start(e){return this.isEOF(e)?(this.emmitToken("EOF",cp),this.start):"#"===e?(this.token.push(e),this.inTplFunc):"$"===e?(this.token.push(e),this.inTplStr):"&"===e||"|"===e?(this.token.push(e),this.inLogic):/^[0-9]/.test(e)?(this.token.push(e),this.inNumber):"'"===e?this.inQuoteStr:-1!==[">","<","=","!"].indexOf(e)?(this.token.push(e),this.inCompare):"?"===e?(this.emmitToken("QUESTION",e),this.start):":"===e?(this.emmitToken("COLON",e),this.start):","===e?(this.emmitToken("COMMA",e),this.start):/^\s/.test(e)?this.start:null}inLogic(e){return this.isEOF(e)||"&"!==e&&"|"!==e?this.start(e):(this.token.push(e),this.emmitToken("LOGIC",this.token.join("")),this.token=[],this.start)}inNumber(e){return!this.isEOF(e)&&/^[0-9.]/.test(e)?(this.token.push(e),this.inNumber):(this.emmitToken("NUMBER",this.token.join("")),this.token=[],this.start(e))}inTplFunc(e){const t=()=>{let e=0,t=0;for(let n=0,i=this.token.length;n<i;n++){const i=this.token[n];"("===i?e+=1:")"===i&&(t+=1)}return e===t};return this.isEOF(e)?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),")"===e&&t()?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start):this.inTplFunc)}inTplStr(e){return!this.isEOF(e)&&/^[a-zA-Z0-9.-_$]/.test(e)?(this.token.push(e),this.inTplStr):(this.emmitToken("TPLSTR",this.token.join("")),this.token=[],this.start(e))}inCompare(e){return this.isEOF(e)||"="!==e?(this.emmitToken("COMPARE",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),this.inCompare)}inQuoteStr(e){return this.isEOF(e)||"'"!==e?(this.token.push(e),this.inQuoteStr):(this.emmitToken("STR",this.token.join("")),this.token=[],this.start)}emmitToken(e,t){this.tokens.push({type:e,value:t})}push(e){this.state&&(this.state=this.state(e))}end(){this.state&&this.state(cp)}}const up=e=>{const t=new lp;let n=0;const i=e.length;for(;n<i;){const i=e[n];n+=1,t.push(i)}return t.end(),t.tokens},dp=e=>"ROOT"===e.type?{type:"ROOT",maxChildren:0,children:[],priority:-9999}:"TPLFUNC"===e.type?{type:"TPLFUNC",children:[e.value],maxChildren:1,priority:40}:"TPLSTR"===e.type?{type:"TPLSTR",children:[e.value],maxChildren:1,priority:40}:"NUMBER"===e.type?{type:"NUMBER",children:[e.value],maxChildren:1,priority:40}:"STR"===e.type?{type:"STR",children:[e.value],maxChildren:1,priority:40}:"COMPARE"===e.type?{type:"COMPARE",operator:e.value,children:[],maxChildren:2,priority:30,isSign:!0}:"LOGIC"===e.type?{type:"LOGIC",operator:e.value,children:[],maxChildren:2,priority:20,isSign:!0}:"QUESTION"===e.type?{type:"QUESTION",operator:e.value,children:[],maxChildren:3,priority:10,isSign:!0}:"COLON"===e.type?{type:"COLON",operator:e.value,children:[],maxChildren:0,priority:10,isSign:!0}:"EOF"===e.type?{type:"ROOT_END",children:[],maxChildren:0,priority:-9999}:null,hp=e=>0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length>=e.maxChildren),pp=e=>0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length<e.maxChildren),fp=e=>{let t;t="string"==typeof e?up(e):e;const n=[dp({type:"ROOT"})],i=e=>{const t=e.priority;for(;hp(n[n.length-1])&&pp(n[n.length-2])&&t<=n[n.length-1].priority&&t<=n[n.length-2].priority;){const{children:e}=n[n.length-2];null==e||e.push(n.pop())}},r=e=>{const t=dp(e),r=n[n.length-1];if("STR"===t.type||"TPLSTR"===t.type||"NUMBER"===t.type||"TPLFUNC"===t.type){if(hp(r))return;pp(r)?r.children.push(t):n.push(t)}else"COMPARE"===t.type||"LOGIC"===t.type||"QUESTION"===t.type?hp(r)&&(t.priority>r.priority?((e,t)=>{const i=t.children.pop();i&&e.children.push(i),n.push(e)})(t,r):(i(t),(e=>{const t=n.pop();t&&e.children.push(t),n.push(e)})(t))):"ROOT_END"===t.type&&(i(t),n.push(t))};for(let e=0,n=t.length;e<n;e++)r(t[e]);return n},gp=({type:e,children:t,operator:n},i,r={})=>{const o=e=>gp(t[e],i,r);if("COMPARE"===e){const e={">":()=>o(0)>o(1),"<":()=>o(0)<o(1),">=":()=>o(0)>=o(1),"<=":()=>o(0)<=o(1),"==":()=>o(0)==o(1),"!=":()=>o(0)!=o(1),"===":()=>o(0)===o(1)},t=n&&e[n];return t?t():null}if("LOGIC"===e){const e={"&&":()=>o(0)&&o(1),"||":()=>o(0)||o(1)},t=n&&e[n];return t?t():null}const a={NUMBER:()=>Number(t[0]),STR:()=>t[0],TPLSTR:()=>((e,t)=>{const n=e.split(".");let i="";return n.forEach((e=>{""===i?i=t[e]:("string"==typeof i&&(i=JSON.parse(i)),i=i[e])})),i})(t[0],i),QUESTION:()=>o(0)?o(1):o(2),TPLFUNC:()=>((e,t,n)=>{const i=e.indexOf("("),r=e.substring(0,i),o=e.substring(i+1,e.length-1);if(!n[r])return null;const a=up(o),s=[];let c=[];for(let e=0,t=a.length;e<t;e++){const t=a[e];"COMMA"===t.type||"EOF"===t.type?(s.push(c),c=[]):c.push(t)}const l=[];return s.forEach((e=>{l.push(mp(e,t,n))})),n[r].apply(null,l)})(t[0],i,r)}[e]||null;return a?a():null},_p={"#scope":e=>e,"#no":e=>!e,"#add":(e,t)=>e+t,"#sub":(e,t)=>e-t,"#multi":(e,t)=>e*t,"#division":(e,t)=>e/t,"#negative":e=>-e,"#toNumber":e=>Number(e),"#toString":e=>String(e),"#toArray":(...e)=>e,"#ceil":e=>Math.ceil(e),"#floor":e=>Math.floor(e),"#round":e=>Math.round(e),"#substring":(e,t,n)=>e.substring(t,n),"#like":(e,t)=>-1!==e.indexOf(t),"#toFixed":(e,t)=>parseFloat(e).toFixed(t),"#toLowerCase":e=>e.toLowerCase(),"#toUpperCase":e=>e.toUpperCase(),"#len":e=>e.length,"#hansLen":e=>{let t=0;for(const n of e)t+=/[\u4e00-\u9fa5]/.test(n)?2:1;return t/2},"#parse":e=>{try{return JSON.parse(e)}catch(e){return{}}},"#value":(e,t)=>e[t]||{},"#truncate":(e,t)=>{let n="",i=0;for(const r of e){if(i+=/[\u4e00-\u9fa5]/.test(r)?2:1,i>t){n+="...";break}n+=r}return n},"#concat":(...e)=>e.join(""),"#split":(e,t,n)=>null==e?void 0:e.split(t,n),"#abbrNum":e=>e<1e4?e.toString():`${(e/1e4).toFixed(1)}万`,"#trimDigit":e=>{const t=e.toString().split(".");if(t.length<2)return e;let n=t.slice(-1)[0];for(;"0"===n[n.length-1];)n=n.slice(0,-1);return t.slice(0,-1).concat(n?[n]:[]).join(".")},"#append":(e,t,n=!1)=>(n&&e.indexOf(t)>-1||e.push(t),e),"#remove":(e,t)=>e.filter((e=>e!==t)),"#include":(e,t)=>e.indexOf(t)>-1,"#mod":(e,t)=>e%t,"#indexedArray":e=>{if(e<=0)return[];const t=[];for(let n=0;n<e;n+=1)t.push(n);return t},"#get":sp.U2,"#slice":(e,t,n)=>e.slice(t,n)},mp=(e,t,n)=>{try{const i=fp(e);return gp(i[1],t,Object.assign({},_p,n))}catch(e){}return null};var yp=n(4643),vp=n(637),Ap=n(996),bp=n(8476);const wp={},Ep=a.iw;class Tp extends ap.wA{constructor(e,{autoRegister:t=!0}={}){super(e),this.adCustomId=void 0,this.adProxy=void 0,this.adData=void 0,this.adDatas=void 0,this.template=void 0,this.manager=void 0,this.reporter=void 0,this.emitter=void 0,this.id=void 0,this.options=void 0,this.data=void 0,this.events=void 0,this.lifecycle=void 0,this.innerStyles=void 0,this.animations=void 0,this.idPrefix=void 0,this.forType=void 0,this.forItem=void 0,this.forIndex=void 0,this.ratio=1,this.tplConfig=null,this.bubbleEvent=void 0,this.adCustomListener=null,this.clickCallbackMap=new WeakMap,this.handleCommonClick=e=>{this.doActions(this.events.tap,{event:e})},this.handleAdCustomAction=e=>{e.targetid===this.id&&this.doCommonAction(e)},this.adCustomId=e.adCustomId,this.adProxy=e.adProxy,this.adData=e.adData,this.adDatas=e.adDatas,this.manager=e.manager,this.reporter=e.reporter,this.emitter=e.emitter,this.idPrefix=e.idPrefix||"",this.forType=e.forType||vp.bk.NONE,this.forItem=e.forItem,this.forIndex=e.forIndex,e.ratio&&(this.ratio=e.ratio),this.checkSize();const n=e.template||{};this.template=n,this.id=`${this.adCustomId}-${this.idPrefix}${this.template.id}`;const i=n.options||{};this.options=i,this.data=i.data||{},this.events=i.events||{},this.lifecycle=i.lifecycle||{},this.innerStyles=i.innerStyles||{},this.animations=i.animations||{},this.bubbleEvent=void 0===i.bubbleEvent||i.bubbleEvent;const r=this.getDataValue("_bubbleEvent");void 0!==r&&(this.bubbleEvent=r),t&&this.bindCommonEvents()}ready(e){this.emitComponentLifeCycle("onInit"),e&&(e.adId=this.id)}updatedProps(){this.updateBubbleEvent()}destroy(){this.emitComponentLifeCycle("onDestroy"),this.offClick("container",this.handleCommonClick),this.emitter.off("adCustomAction",this.handleAdCustomAction),this.removeAdCustomListener()}bindCommonEvents(){this.onClick("container",this.handleCommonClick),this.emitter.on("adCustomAction",this.handleAdCustomAction)}getCommonSubComponentProps(){return{template:this.template,adCustomId:this.adCustomId,emitter:this.emitter,adProxy:this.adProxy,reporter:this.reporter,adData:this.adData,adDatas:this.adDatas,adPosition:this.props.adPosition,systemInfo:this.props.systemInfo,manager:this.manager,idPrefix:this.idPrefix||"",forType:this.forType,forIndex:this.forIndex,forItem:this.forItem,ratio:this.ratio,scope:this.props.scope}}getDataValue(e,t,n){const i=t||this.data,r=i[`${e}Expr`];if(r){return this.run(r,null==n?void 0:n.args)}return i[e]}getDataValueWithDefault(e,t,n,i){const r=n?this.getDataValue(e,n,i):this.getDataValue(e);return void 0===r?t:r}getAdData(){return this.forType===vp.bk.ADS&&null!=this.forIndex?this.getAdDatas()[this.forIndex]||{}:this.adData}getAdDatas(){return this.adDatas||[]}addAdCustomListener(e){this.removeAdCustomListener(),this.adCustomListener=t=>{t.adCustomId===this.adCustomId&&(null==e||e(t))},this.emitter.on("adCustomEvent",this.adCustomListener)}removeAdCustomListener(){this.adCustomListener&&this.emitter.off("adCustomEvent",this.adCustomListener)}setRatio(e){this.ratio=e}checkSize(){var e,t;const{template:n}=this;if(n&&"root"!==n.type)return;this.tplConfig=(null==n?void 0:n.tplConfig)||{};const i=this.props.adPosition||{};if(!this.tplConfig)return;const{tplConfig:r}=this;let{width:o}=this.props.adPosition||{};var a,s;null==o&&(o=(null===(a=this.props)||void 0===a||null===(s=a.systemInfo)||void 0===s?void 0:s.screenWidth)||bp.S3.screenWidth);o=Number(o);const c=r.minWidth||0,l=r.maxWidth||0,u=r.baseWidth||375;let d=Math.min((null===(e=this.props)||void 0===e||null===(t=e.systemInfo)||void 0===t?void 0:t.screenWidth)||bp.S3.screenWidth,Math.max(c,o));l&&(d=Math.min(d,l)),0===d&&this.setRatio(u/u),i.width=d,this.setRatio(d/u)}emitAdCustomEvent(e,t){this.emitter.emit("adCustomEvent",{adCustomId:this.adCustomId,action:e,value:t})}emitComponentEvent(e,t){const n=this.events[e];null!=n&&n.length&&this.doActions(n,t||{})}emitComponentLifeCycle(e,t){const n=this.lifecycle[e];null!=n&&n.length&&this.doActions(n,t)}doActions(e=[],t={}){for(const n of e)n.force&&!n.targetid?this.doCommonAction({args:t,payload:n}):this.emitter.emit("adCustomAction",{fromid:this.id,targetid:n.targetid?`${this.adCustomId}-${n.targetid}`:this.id,args:t,payload:n})}doCommonAction(e){const{payload:t,args:n}=e,{delay:i=0,expr:r}=t,o=()=>{if(!r||this.run(r,n))switch(t.action){case vp.aO.SETSTYLE:{const{value:e}=t;if(e.styleExpr)for(const t of Object.keys(e.styleExpr))e.style[t]=this.run(e.styleExpr[t],n);this.setStyle(e.id,e.style);break}case vp.aO.SETEXPRVARS:{const{key:e}=t.value,n=this.getDataValue("value",t.value);this.getExprInnerVars()[e]=n;break}case vp.aO.REPORTIDKEY:break;case vp.aO.TRIGGEREVENT:{const{detail:e={},eventName:i}=t.value;try{if(null!=n&&n.event&&(e.rawDetail=JSON.stringify(n.event)),t.value.detailExpr)for(const i of Object.keys(t.value.detailExpr)){const r=t.value.detailExpr[i];e[i]=this.run(r,n)}}catch(e){}this.emitAdCustomEvent(vp.A$.TRIGGEREVENT,{eventName:i,detail:e});break}case vp.aO.REPORTMMDATA:{const{data:e,dataExpr:i,id:r}=t.value;if(i)for(const t of Object.keys(i)){const r=i[t];e[t]=this.run(r,n)}this.emitAdCustomEvent(vp.A$.REPORTMMDATA,{id:r,data:e});break}case vp.aO.ANIMATE:{const{id:e,animation:n}=t.value;this.doAnimation({id:e,animationName:n});break}case vp.aO.TRIGGERBTNCLICK:{const e=null==n?void 0:n.event;var i;if(e)this.emitAdCustomEvent(vp.A$.BTNTAP,{event:e,isHandleDownload:(null===(i=t.value)||void 0===i?void 0:i.isHandleDownload)||!1});break}case vp.aO.LANDAD:{const e=null==n?void 0:n.event;e&&this.emitAdCustomEvent(vp.A$.LANDAD,{index:this.getDataValueWithDefault("index",0,t.value,{args:n}),event:e});break}case vp.aO.SPLASHSKIPAD:{const e=null==n?void 0:n.event;e&&this.emitAdCustomEvent(vp.A$.SPLASHSKIPAD,{event:e});break}case vp.aO.REPORTADMONITORDATA:{const{id:e,key:i}=t.value,r=this.getDataValue("extInfo",t.value,{args:n});this.emitAdCustomEvent(vp.A$.REPORTADMONITORDATA,{id:e,key:i,extInfo:r});break}case vp.aO.REWARDEDVIDEODYNAMIC:{const{list:e}=t.value;this.emitAdCustomEvent(vp.A$.REWARDEDVIDEODYNAMIC,{list:e});break}default:"doAction"in this&&"function"==typeof this.doAction&&this.doAction(e)}};i?setTimeout(o,i):o()}run(e,t){const n=this.getInnerFunction(),i=Dn()(Dn()({},this.getScope()),n);return mp(e,t?Dn()({$args:t},i):i,n)}getElementById(e){if(!e){var t,n;const e=null!==(t=null===(n=this.getRootElement())||void 0===n?void 0:n.parent)&&void 0!==t?t:null;return e===ap.Ar?this.getRootElement():e}return"$$"===e?this.getRootElement():super.getElementById(e)}static animate(e,t){const{left:n,top:i,scaleWidth:r,scaleHeight:o,opacity:a,rotate:s=0,easing:l="ease-in",duration:u=500}=t;let d=new Promise(((t,d)=>{(0,c.IN)("animateCoverView",{dest:e.dest,viewId:e.id,easing:l,duration:u,finalStyle:{left:n,top:i,opacity:a,rotate:s,scaleX:r,scaleY:o},success:t,fail:d})}));return"devtools"===Ep&&(d=Promise.all([d,(0,op.Vs)(u)])),d}doAnimation({id:e,emitEvent:t=!0,animationName:n,animation:i}){var r=this;return Pn()((function*(){const o=!i&&n?r.animations[n]:i,a=r.getElementById(e);if(!o||!a)return;const{keys:s,duration:c,easing:l}=o;if(((null==s?void 0:s.length)||0)<2)return;let u=0;for(const t of Object.keys(s)){const n=s[+t],{offset:i,opacity:o,left:d,top:h,rotate:p,scaleX:f,scaleY:g}=n,_=c*i,m=(0,ap.MO)({opacity:o,left:d,top:h,rotate:p,scaleWidth:f,scaleHeight:g});if(_<=0)yield r.setStyle(e,m);else{const e=Dn()(Dn()({},m),{},{easing:l,duration:_-u});e.left=m.left,e.top=m.top,yield Tp.animate(a,e),u=_}}n&&t&&(yield r.emitComponentEvent(vp.H.ANIMATIONEND,{animation:n}))}))()}updateInnerStyle(){if(this.innerStyles)for(const e of Object.keys(this.innerStyles)){const t=this.innerStyles[e];t.expr&&!this.run(t.expr)||this.updateStyle(t.style,e)}}setStyle(e,t){var n=()=>super.setStyle,i=this;return Pn()((function*(){const r=i.getDataValue("_useApx")?i.convertToApxRatio(t):t;let o=e;var a;"$$"===o&&(o=null===(a=i.getRootElement())||void 0===a?void 0:a.name);if(r){for(const e of Object.keys(r))r[e]=i.convertApxStyle(r[e]);var s;if(o)yield n().call(i,o,r);else null===(s=i.parent)||void 0===s||s.setStyle("container",r)}}))()}convertApxStyle(e){const t=/([+-]?\d+(?:\.\d+)?)apx/g;return e&&"string"==typeof e?e.replace(t,((e,t)=>`${Number(t*this.ratio)}px`)):e}updateStyle(e,t){if(e)for(const n of Object.keys(e)){let i=n,r=e[n];if(n.includes("Expr")){const e=n.split("Expr");2===e.length&&([i]=e,r=this.run(r))}this.setStyle(t,{[i]:r})}}removeInnerStyle(){if(this.innerStyles)for(const e of Object.keys(this.innerStyles)){const t=this.innerStyles[e];this.removeStyle(t.style,e)}}removeStyle(e,t){if(e)for(const n of Object.keys(e))this.setStyle(t,{[n]:null})}getScope(){var e,t;return{$ad:this.getAdData(),$ads:this.getAdDatas(),$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:(null===(e=this.props)||void 0===e?void 0:e.systemInfo)||{},ua:"",ratio:this.ratio,time:Date.now()},$for:{index:this.forIndex,item:this.forItem},$scope:(null===(t=this.props)||void 0===t?void 0:t.scope)||{}}}getExprInnerVars(){return void 0===wp[this.adCustomId]&&(wp[this.adCustomId]={}),wp[this.adCustomId]}getInnerFunction(){const e=this.getExprInnerVars();return{"#getVar":t=>e[t],"#measureText":(e,t)=>Ap.Z.getTextWidth(e,t)}}updateBubbleEvent(){const e=this.getRootElement();e&&(0,yp.zJ)(e,(e=>{if(!e.isBubbleEventSet)if(e.isRootElementOfComponent){const t=e.referComponent;e.bubbleEvent=!t||t.bubbleEvent}else e.bubbleEvent=!0}))}onClick(e,t,{handleTriggerClick:n=!0,handleClickLimit:i=!0,isReport:r=!1,clickType:o=0}={}){const a=e=>{null!==this.reporter&&(n&&!this.reporter.judgeTriggerClick(e,r)||i&&this.reporter.isClickLimit(e,o))||t(e)};return this.clickCallbackMap.set(t,a),super.onClick(e,a)}offClick(e,t){return this.clickCallbackMap.has(t)?super.offClick(e,this.clickCallbackMap.get(t)):super.offClick(e,t)}checkUseApx(){if(this.getDataValue("_useApx"))for(const e of Object.keys(this.style))this.style[e]=this.convertToApxRatio(this.style[e])}convertToApxRatio(e){const{ratio:t}=this,n=/(\d+)px/g,i={};for(const r of Object.keys(e))if(null!==vp.fc&&void 0!==vp.fc&&vp.fc.includes(r)){const o=e[r];let a=o;"number"==typeof o?a=o*t:"string"==typeof o?a=o.replace(n,((e,n)=>{const i=Number(n);return Number.isNaN(i)?e:i*t+"px"})):Array.isArray(o)&&null!=o&&o.every((e=>"number"==typeof e))&&(a=o.map((e=>e*t))),i[r]=a}else i[r]=e[r];return i}}class Sp extends Tp{getSubComponentProps(){return this.getCommonSubComponentProps()}constructor(e){var t;if((super(e,{autoRegister:!1}),this.style={blank:{width:0,height:0},linearGradient:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},".reverse":{rotate:180}},this.isShow=void 0,this.isLinearGradient=!1,this.isLinearGradientReverse=!1,this.linearGradientSrc="https://wxa.wxs.qq.com/images/wxapp/linear_gradient.png",this.linearGradientRe=/^linear-gradient\(rgba\(0,0,0,([\d.]+)\),rgba\(0,0,0,([\d.]+)\)\)$/,this.isShow=this.getDataValueWithDefault("_isShow",!0),this.isShow)&&("feedback"===this.template.type?this.setStyle("container",{display:"inline-block"}):"end"===this.template.type&&this.setStyle("container",{display:"none"}),this.updateStyle(this.template.style||{},"container"),null!==(t=this.template.style)&&void 0!==t&&t.background)){const e=this.linearGradientRe.exec(this.template.style.background.replace(/ /g,""));if(e){const[t,n]=e.slice(1);this.isLinearGradient=!0,Number(t)>Number(n)&&(this.isLinearGradientReverse=!0)}}}render(){const{template:e}=this.props;let t=null;return"for"===e.type?"<CustomFor></CustomFor>":(["layout","image","text","button","video","feedback","end","carousel","countdown"].includes(e.type)&&(t=`Custom${e.type[0].toUpperCase()}${e.type.slice(1)}`),this.isShow&&t?`\n      <view id="container">\n        ${this.isLinearGradient?`\n          <image id="linear-gradient" class="${this.isLinearGradientReverse?"reverse":""}" src="${this.linearGradientSrc}"></image>\n        `:""}\n        <${t}></${t}>\n      </view>\n    `:'<view id="blank"></view>')}}Sp.subComponents=()=>({CustomLayout:Ip,CustomText:Pp,CustomImage:Rp,CustomButton:kp,CustomVideo:Lp,CustomFeedback:Bp,CustomEnd:Fp,CustomFor:Up,CustomCarousel:Zp,CustomCountdown:Yp});class Cp extends Tp{constructor(e){var t,n,i;super(e),this.style={body:{zIndex:1,position:"absolute",hidden:!0,opacity:0,flexDirection:"column",alignItems:"center",justifyContent:"center"},".full-size":{width:"100%",height:"100%"},".full":{position:"absolute",left:0,right:0,top:0,bottom:0},".tip-container":{position:"absolute",top:0,left:0,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",hidden:!0},".video-close-tip":{position:"relative",zIndex:1e3,height:48,width:122,lineHeight:48,backgroundColor:"#4C4C4C",borderRadius:12,fontSize:17,color:"#fff",textAlign:"center"},".empty":{width:"100%",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center",backgroundColor:"#dcdcdc",color:"#888",textAlign:"center",fontSize:12,minHeight:50}},this.state={hidden:!0},this.isFullScreen=void 0,this.useDefaultFeedback=void 0,this.exposureUntilVideoPlay=void 0,this.exportAid=void 0,this.enableTimer=void 0,this.hideAfterLanding=void 0,this.isMulti=void 0,this.isWidthRequired=void 0,this.multiShowList=void 0,this.show=()=>{this.setStyle("body",{hidden:!1,opacity:1}),this.emitAdCustomEvent(vp.A$.CHECKEXPOSURE)},this.hide=()=>{this.setStyle("body",{hidden:!0,opacity:0}),this.emitAdCustomEvent(vp.A$.CHECKEXPOSURE)},this.showFeedback=()=>{const{useDefaultFeedback:e}=this;e&&(this.setStyle("tipContainer",{hidden:!1}),setTimeout((()=>{this.setStyle("tipContainer",{hidden:!0})}),3e3))},this.handleEnterForeground=()=>{this.emitComponentEvent(vp._d.APPENTERFOREGROUND),this.emitAdCustomEvent(vp.A$.APPENTERFOREGROUND)},this.handleEnterBackground=()=>{this.emitComponentEvent(vp._d.APPENTERBACKGROUND),this.emitAdCustomEvent(vp.A$.APPENTERBACKGROUND)},this.handleContainerClick=e=>{var t,n;null!==(t=this.manager)&&void 0!==t&&t.isMulti||(this.emitComponentEvent(vp._d.CONTAINERTAP),null===(n=this.reporter)||void 0===n||n.handleClick(e,2))},this.isFullScreen=this.getDataValueWithDefault("isFullScreen",!1),this.enableTimer=this.getDataValueWithDefault("enableTimer",!0),this.useDefaultFeedback=this.getDataValueWithDefault("useDefaultFeedback",!0),this.exposureUntilVideoPlay=this.getDataValueWithDefault("exposureUntilVideoPlay",!1),this.hideAfterLanding=this.getDataValueWithDefault("hideAfterLanding",!1),this.exportAid=this.getDataValueWithDefault("exportAid",!1),this.isMulti=null!==(t=null===(n=this.template)||void 0===n||null===(i=n.tplConfig)||void 0===i?void 0:i.isMulti)&&void 0!==t&&t,this.isWidthRequired=this.getDataValueWithDefault("isWidthRequired",!1),this.multiShowList=this.getDataValue("multiShowList"),this.bindEvent(),this.updateInnerStyle(),this.updateStyle(this.template.style||{},"container");const r=["left","top"];!bp.S3.isWaGame&&r.push("fixed"),this.isWidthRequired&&r.push("width"),!this.isFullScreen&&e.adPosition&&this.setStyle("body",(0,yp.ei)(e.adPosition,r))}destroy(){super.destroy(),this.unbindEvent()}ready(e){super.ready(e),this.isFullScreen&&(e.fullscreen=!0),this.updateBubbleEvent()}getCustomItemProps(e,t){return Dn()(Dn()({},this.getCommonSubComponentProps()),{},{template:this.props.template.children[parseInt(t,10)]})}bindEvent(){(0,Uo.dN)(this.handleEnterForeground),(0,Uo.vv)(this.handleEnterBackground),this.onClick("container",this.handleContainerClick)}unbindEvent(){(0,Uo.Tb)(this.handleEnterForeground),(0,Uo.b$)(this.handleEnterBackground),this.offClick("container",this.handleContainerClick)}getRootData(e){switch(e){case"hidable":return this.getDataValueWithDefault("hidable",!0);case"refetchable":return this.getDataValueWithDefault("refetchable",!1)}}doAction({payload:e,args:t}){var n,i;if(e.action===vp.aO.HIDEAD)"value"in e&&e.value.preventClose?null===(n=this.manager)||void 0===n||n.hide(!0):null===(i=this.manager)||void 0===i||i.hide();else if(e.action===vp.aO.RELOADAD){var r;null===(r=this.manager)||void 0===r||r.reload()}else e.action===vp.aO.CHANGEMULTISHOW&&(e.value.listExpr?this.emitAdCustomEvent(vp.A$.CHANGEMULTISHOW,{list:this.run(e.value.listExpr,t)}):e.value.list?this.emitAdCustomEvent(vp.A$.CHANGEMULTISHOW,{list:e.value.list}):null!=t&&t.list&&this.emitAdCustomEvent(vp.A$.CHANGEMULTISHOW,{list:t.list}))}isShow(){var e;const t=this.getElementById("body");return null!==(e=!(null!=t&&t.style.hidden))&&void 0!==e&&e}render(){if(this.props.isEmpty)return'\n        <view id="body">\n          <view id="empty-container" class="empty">\n            <text id="empty-container-text" class="empty-info" value="暂无广告，具体指引查看小程序流量主功能"></text>\n          </view>\n        </view>\n      ';const{template:e}=this.props,{isFullScreen:t}=this,{useDefaultFeedback:n}=this;return`\n      <view id="body" class="${t?"full-size":""}">\n        ${e?`\n          <view id="container" class="wx-ad-custom ${t?"full full-size":""}">\n            ${e.children.map(((e,t)=>`\n              <CustomItem get-props="getCustomItemProps:${t}"></CustomItem>\n            `)).join("\n")}\n          </view>\n          ${n?'\n            <view id="tip-container" class="tip-container">\n              <text id="close-tip" class="video-close-tip" value="感谢反馈"></text>\n            </view>\n          ':""}\n        `:""}\n      </view>\n    `}}Cp.subComponents={CustomItem:Sp};class Ip extends Tp{constructor(e){super(e),this.state={children:[]},this.style={".layout-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".layout-column":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".layout-proportion":{position:"absolute",width:"100%",height:"100%"}},this.baseType=void 0,this.classRow=!1,this.classColumn=!1,this.baseType=this.options.baseType||vp.BB.COMMON,this.baseType===vp.BB.ROW?this.classRow=!0:this.baseType===vp.BB.COLUMN?this.classColumn=!0:(this.baseType,vp.BB.PROPORTION),this.state.children=this.template.children||[],this.updateInnerStyle()}doAction({payload:e}){if(e.action===vp.aO.ADDCHILDREN){const{value:t}=e,n=Array.isArray(t)?t:[t],i=[...this.state.children,...n];this.setState({children:i})}}ready(e){super.ready(e),this.initProportionComponent()}initProportionComponent(){const e=this.getDataValue("mProportion");if(!e)return;const t=this.getRootElement().layoutBox;if(t.width/t.height>e){const n=Math.round(t.height*e);this.setStyle("container",{width:n,left:(t.width-n)/2,top:0})}else{const n=Math.round(t.width/e);this.setStyle("container",{height:n,top:(t.height-n)/2,left:0})}}getSubComponentProps(e,t){return Dn()(Dn()({},this.getCommonSubComponentProps()),{},{template:this.state.children[parseInt(t,10)]})}render(){const{children:e}=this.state,t=["layout"];this.classRow&&t.push("layout-row"),this.classColumn&&t.push("layout-column");return`\n      <view\n        id="container"\n        class="${t.join(" ")}"\n      >\n      ${e.map(((e,t)=>`\n        <CustomItem get-props="getSubComponentProps:${t}"></CustomItem>\n      `)).join("\n")}\n      </view>\n    `}}Ip.subComponents=()=>({CustomItem:Sp});var xp=n(5328),Dp=n(3324),Op=n(4684);class Pp extends Tp{constructor(e){super(e),this.style={".text":{color:"#000",fontSize:14,wordBreak:"break-all"},".text-ellipsis":{lineBreak:"ellipsis",overflow:"hidden"}},this.state={text:""},this.baseType=void 0,this.classEllipsis=!1,this.maxLen=void 0;const t=this.options.baseType||vp.qW.NICKNAME;this.baseType=t,t===vp.qW.COMMON?this.initCommonComponent():t===vp.qW.NICKNAME?this.initNickNameComponent():t===vp.qW.DESC&&this.initDescComponent(),this.classEllipsis=this.getDataValueWithDefault("isEllipsis",!0),this.maxLen=this.getDataValueWithDefault("maxLen",null),this.updateInnerStyle()}ready(e){super.ready(e),this.baseType===vp.qW.RELATION&&this.initRelationComponent()}initCommonComponent(){this.state.text=this.getDataValueWithDefault("text","")}initNickNameComponent(){const e=this.getAdData(),t=[xp.fY.APPLE_APP_STORE,xp.fY.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===xp.vK.CRT_SIZE_GRID,i=[xp.fY.WE_CHAT_ARTICLE,xp.fY.GDT_WE_CHAT_ARTICLE].includes(e.product_type),r=[xp.fY.WE_CHAT_SHOP,xp.fY.JD_URL].includes(e.product_type),o=[{path:["extBackComm","nick_name"]},{path:["weapp_info","nick_name"],condition:n},{path:["crtInfo","0","wxgame_video_card","title"],condition:[xp.vK.CRT_SIZE_REWARD_VEDIO169,xp.vK.CRT_SIZE_REWARD_VEDIO916,xp.vK.CRT_SIZE_VERTICAL_VIDEO_NEW_916,xp.vK.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size)},{path:["appInfo","appName"],condition:t},{path:["app","nickname"],condition:!t},{path:["crtInfo","0","card_info","title"]},{value:"品牌推广",condition:i},{value:"电商推广",condition:r},{value:"活动推广"}];this.state.text=(0,yp.Ze)(e,o)}initDescComponent(){const e=this.getAdData(),t=[xp.fY.APPLE_APP_STORE,xp.fY.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=[xp.vK.CRT_SIZE_REWARD_VEDIO169,xp.vK.CRT_SIZE_REWARD_VEDIO916,xp.vK.CRT_SIZE_VERTICAL_VIDEO_NEW_916,xp.vK.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size),i=e.product_type===xp.fY.MINI_GAME,r=e.product_type===xp.fY.WECHAT,o=[xp.fY.WE_CHAT_ARTICLE,xp.fY.GDT_WE_CHAT_ARTICLE].includes(e.product_type),a=[xp.fY.WE_CHAT_SHOP,xp.fY.JD_URL].includes(e.product_type),s=[{path:["extBackComm","desc_1"]},{path:["crtInfo","0","wxgame_video_card","desc"],condition:n},{path:["wording"],condition:[xp.vK.CRT_SIZE_MULTI_POS_NEW_PIC,xp.vK.CRT_SIZE_IN_TEXT_DESC_CARD].includes(e.crt_size)}];this.getDataValueWithDefault("useDefault",!1)?s.push({path:["extBackComm","default_desc"]},{value:"今日活动推荐",condition:o},{value:"今日商品推荐",condition:a},{value:"今日应用推荐",condition:t},{value:"今日公众号推荐",condition:r},{value:"今日小游戏推荐",condition:i},{value:"今日活动推荐"}):s.push({value:""}),this.state.text=(0,yp.Ze)(e,s)}initRelationComponent(){var e=this;return Pn()((function*(){const t=e.getAdData();if(8!==(0,yp.U2)(t,["crtInfo","0","card_info","mp_tag_type"]))return;const{aid:n}=t,i=Date.now(),r=(0,yp.U2)(t,["button_action","button_text"],"");try{var o;const t=yield(0,Dp.uQ)({aid:n,buttonText:r}),a=Date.now();e.adProxy.reportRelationFetchDuration({startTime:i,endTime:a,showTime:(null===(o=e.manager)||void 0===o?void 0:o.showDetailTime)||0});let s="";if(t){const{count:n,descText:i}=t;s=e.getDataValueWithDefault("text","",void 0,{args:{count:n,descText:i}}),e.emitComponentEvent(vp.Xw.RELATIONFETCHED,{count:n,descText:i})}e.setState({text:s})}catch(t){e.setState({text:""}),e.adProxy.reportAdMonitorData(vp.IN.RELATION_FETCH_ERROR,t)}}))()}doAction({payload:e}){e.action===vp.aO.TEXTSETTEXT&&this.setState({text:this.getDataValue("text",e.value)})}render(){const{classEllipsis:e}=this;let{text:t}=this.state;return this.classEllipsis&&null!==this.maxLen&&t&&(t=(0,Op.$G)(t,2*this.maxLen)),`\n      <view id="container">\n        <text\n          id="text"\n          class="text ${e?"text-ellipsis":""}"\n          value="${t}"\n        ></text>\n      </view>\n    `}}class Rp extends Tp{constructor(e){super(e),this.style={".image-img":{width:"100%",height:"100%"},".image-img-appicon":{borderRadius:5},".image-img-icon":{borderRadius:"50%"}},this.state={imgUrl:""},this.classAppIcon=!1,this.classIcon=!1,this.useBgMode=!1,this.baseType=void 0,this.useBgMode=this.getDataValueWithDefault("useBgMode",!1);const t=this.options.baseType||vp.v5.ICON;switch(this.baseType=t,t){case vp.v5.COMMON:this.initCommonComponent();break;case vp.v5.AD:this.initADComponent();break;case vp.v5.ICON:this.initIconComponent()}this.useBgMode,this.updateInnerStyle()}initCommonComponent(){this.state.imgUrl=this.getDataValueWithDefault("imgUrl","")}initIconComponent(){const e=this.getAdData(),t=[xp.fY.APPLE_APP_STORE,xp.fY.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===xp.vK.CRT_SIZE_GRID,i=[xp.fY.WE_CHAT_SHOP,xp.fY.JD_URL].includes(e.product_type),r=[xp.vK.CRT_SIZE_REWARD_VEDIO169,xp.vK.CRT_SIZE_REWARD_VEDIO916,xp.vK.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size);t?this.classAppIcon=!0:this.classIcon=!0;const o=[{path:["extBackComm","head_img"]},{path:["weapp_info","head_img"],condition:n},{path:["crtInfo","0","wxgame_video_card","thumb"],condition:r},{path:["appInfo","iconUrl"],condition:t},{path:["app","icon"],condition:!t},{path:["crtInfo","0","card_info","thumb"]},{value:"https://wxa.wxs.qq.com/images/wxapp/dianshang.png",condition:i},{value:"https://wxa.wxs.qq.com/images/wxapp/pinpai.png"}];this.state.imgUrl=(0,yp.Ze)(e,o)}initADComponent(){const e=this.getAdData();let t=e.image_url;if(!t.startsWith("http"))try{t=e.crtInfo[0].image_url||t}catch(e){}this.state.imgUrl=this.getDataValue("imgUrl")||t}doAction({payload:e}){e.action===vp.aO.IMAGESETSRC&&this.setState({imgUrl:this.getDataValue("imgUrl",e.value)})}render(){const{classAppIcon:e,classIcon:t}=this,n=this.baseType===vp.v5.AD,{imgUrl:i}=this.state,r=["image-img"];return e&&r.push("image-img-appicon"),t&&r.push("image-img-icon"),`\n      <view id="container" class="image">\n        <image\n          id="img"\n          ${n?'bubble-event="false"':""}\n          class="${r.join(" ")}"\n          src="${i}"\n        >\n      </view>\n    `}}class kp extends Tp{constructor(e){super(e),this.style={".button":{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#07c160",padding:"0 12px",borderRadius:3,overflow:"hidden"},".button-text":{textAlign:"center",color:"#fff",fontSize:16},".button-download-progress":{position:"absolute",left:0,top:0,width:0,height:"100%",overflow:"hidden"},".download-text-container":{position:"absolute",top:0,left:0,width:0,height:"100%",flexDirection:"row",alignItems:"center",justifyContent:"center"}},this.state={buttonText:""},this.downloadProgress=0,this.isHandleDownload=!1,this.handleAdCustomEvent=({action:e,value:t={}})=>{e===vp.A$.CHANGEADBTNTEXT&&t.text&&(this.setState({buttonText:t.text}),t.progress&&(this.downloadProgress=t.progress))},this.handleButtonClick=e=>{this.emitAdCustomEvent(vp.A$.BTNTAP,{event:e,isHandleDownload:this.isHandleDownload}),this.emitComponentEvent(vp.Y8.BUTTONTAP,{event:e})};const t=this.options.baseType||vp.Dx.LOGICCOMMON;t===vp.Dx.COMMON?this.initCommonComponent():t===vp.Dx.LOGICCOMMON&&this.initLogicCommonComponent(),this.updateInnerStyle(),this.setStyle("downloadProgressBar",{width:`${this.downloadProgress}%`}),this.setStyle("downloadTextContainer",{width:1e4/this.downloadProgress+"%"}),this.onClick("container",this.handleButtonClick,{isReport:!0,clickType:1})}destroy(){super.destroy(),this.offClick("container",this.handleButtonClick)}getButtonText(){return this.state.buttonText}initCommonComponent(){this.state.buttonText=this.getDataValueWithDefault("buttonText","")}initLogicCommonComponent(){const e=this.getAdData(),t=this.getDataValue("buttonText");t?this.state.buttonText=t:e.product_type===ip.kv.WE_CHAT?this.state.buttonText=e.app.isFollowed?"查看":e.button_action.button_text:this.state.buttonText=e.button_action.button_text,this.addAdCustomListener(this.handleAdCustomEvent),this.isHandleDownload=this.getDataValueWithDefault("isHandleDownload",!1)}doAction({payload:e}){e.action===vp.aO.BUTTONSETTEXT&&this.setText(e.value)}setText(e){this.setState({buttonText:this.getDataValue("text",e)})}render(){const{isHandleDownload:e}=this,{buttonText:t}=this.state;return`\n      <view id="container" class="button" bubbleEvent="false">\n        <text id="button-text" class="button-text" value="${t}"></text>\n        ${e?`\n          <view\n            id="download-progress-bar"\n            class="button-download-progress"\n          >\n            <view id="download-text-container" class="download-text-container"\n              <text id="download-text" class="button-text" value="${t}"></text>\n            </view>\n          </view>\n        `:""}\n      </view>\n    `}}const Np={videoDataMap:{}},Mp=(e,t={})=>{e&&(Np.videoDataMap[e]=t)};class Lp extends Tp{constructor(e){super(e),this.style={".video-context":{zIndex:1000008},".click-mask":{position:"absolute",zIndex:1000008,borderRadius:6,width:"100%",height:"100%"},".video-voice-box":{zIndex:1000009,position:"absolute",width:24,height:24},".video-voice-box-topleft":{top:10,left:10},".video-voice-box-topright":{top:10,right:10},".video-voice-box-bottomleft":{bottom:10,left:10},".video-voice-box-bottomright":{bottom:10,right:10},".video-count-down":{zIndex:1000009,position:"absolute",color:"#fff",textAlign:"right",fontSize:12,width:32,height:16,lineHeight:16},".video-count-down-topleft":{top:10,left:10},".video-count-down-topright":{top:10,right:10},".video-count-down-bottomleft":{bottom:10,left:10},".video-count-down-bottomright":{bottom:10,right:10},".video-voice-icon":{width:"100%",height:"100%"},".video-progress":{position:"absolute",zIndex:9,bottom:0,left:0,right:0,height:3,backgroundColor:"#f2f2f2"},".video-progress-played":{width:0,height:3,backgroundColor:"#07c160"}},this.state={muted:!0,loop:!0,autoplay:!1,countDownNumber:null,isEndPageShowing:!1},this.src="",this.poster="",this.isShowVoice=!0,this.isShowProgress=!0,this.isShowCountDown=!1,this.isShowEndPage=!1,this.voicePlacement=null,this.countDownPlacement=null,this.voiceIconSrc="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",this.mutedIconSrc="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",this.currentTime=0,this.videoDuration=0,this.objectFit="contain",this.baseType=void 0,this.toggleMuted=()=>{this.setState({muted:!this.state.muted}),this.emitComponentEvent(vp.XP.MUTEDCHANGE,{muted:this.state.muted})},this.handleCustomEvent=({action:e,value:t={}})=>{switch(e){case vp.A$.ADSHOWHALF:this.state.isEndPageShowing||this.operateVideoPlay("play");break;case vp.A$.ADHIDEHALF:this.state.isEndPageShowing||this.operateVideoPlay("pause");break;case vp.A$.APPENTERBACKGROUND:{const e=Math.min(this.currentTime,this.videoDuration);t.inAdDetail?this.reportVideoPlay("partial","exit",e):this.reportVideoPlay("partial","app_exit",e);break}case vp.A$.ENDPAGEINIT:this.isShowEndPage=this.getDataValueWithDefault("isShowEndPage",!1),this.isShowEndPage&&this.setState({loop:!1});break;case vp.A$.ENDPAGEHIDE:this.isShowEndPage&&(this.setState({isEndPageShowing:!1}),this.operateVideoPlay("play"));break;case vp.A$.ENDPAGESHOW:this.isShowEndPage&&this.setState({isEndPageShowing:!0});break;case vp.A$.BTNTAP:this.reportVideoPlay(this.currentTime<this.videoDuration?"partial":"complete","land",this.videoDuration)}},this.handleError=e=>{this.adProxy.reportAdMonitorData(vp.IN.AD_VIDEO_LOAD_FAILED,e)},this.handleTimeUpdate=e=>{var t;const{duration:n,position:i}=e;if(null==n||null==i)return;const r=Math.min(1,i/n);this.setStyle("videoProgressPlayed",{width:100*r+"%"}),this.isShowCountDown&&this.setState({countDownNumber:`${Math.ceil(n-i)}s`}),this.emitComponentEvent(vp.XP.VIDEOTIMEUPDATE,{event:e,rate:r}),this.currentTime=1e3*i,this.videoDuration||(this.videoDuration=1e3*n);const o={currentTime:this.currentTime,duration:this.videoDuration},a=(null===(t=this.manager)||void 0===t?void 0:t.adCustomId)||this.adCustomId;Mp(a,o)},this.handleEnded=e=>{var t;this.emitComponentEvent(vp.XP.VIDEOENDED,{event:e}),this.emitAdCustomEvent(vp.A$.TRIGGEREVENT,{eventName:"videoended",detail:{baseType:this.baseType}}),this.reportVideoPlay("viewable","end",this.videoDuration),a.cj&&this.reportVideoPlay("partial","start");const n={currentTime:this.videoDuration,duration:this.videoDuration},i=(null===(t=this.manager)||void 0===t?void 0:t.adCustomId)||this.adCustomId;Mp(i,n),this.currentTime=0,this.isShowEndPage&&this.emitAdCustomEvent(vp.A$.SHOWENDPAGE,{videoId:this.id}),this.setState({countDownNumber:null})},this.handlePlay=e=>{this.emitComponentEvent(vp.XP.VIDEOPLAY,{event:e}),this.emitAdCustomEvent(vp.A$.ADVIDEOPLAY),this.reportVideoPlay("partial","start",Math.min(this.currentTime,this.videoDuration))},this.handlePause=e=>{this.emitComponentEvent(vp.XP.VIDEOPAUSE,{event:e}),this.emitAdCustomEvent(vp.A$.ADVIDEOPAUSE),this.reportVideoPlay("partial","close",Math.min(this.currentTime,this.videoDuration))},this.baseType=this.options.baseType||vp.jn.AD,this.baseType===vp.jn.COMMON?this.initCommonComponent():this.baseType===vp.jn.AD&&this.initADComponent(),this.isShowVoice=this.getDataValueWithDefault("isShowVoice",!0),this.voicePlacement=this.getDataValueWithDefault("voicePosition","bottomleft").toLowerCase(),this.state.muted=this.getDataValueWithDefault("muted",!0),this.state.loop=this.getDataValueWithDefault("loop",!0),this.isShowProgress=this.getDataValueWithDefault("isShowProgress",!0),this.isShowCountDown=this.getDataValueWithDefault("isShowCountDown",!1),this.countDownPlacement=this.getDataValueWithDefault("countDownPosition","topright").toLowerCase(),this.objectFit=this.getDataValueWithDefault("objectFit","contain"),this.updateInnerStyle(),this.bindEvent(),setTimeout((()=>{this.emitComponentEvent(vp.XP.MUTEDCHANGE,{muted:this.state.muted})}),0)}destroy(){super.destroy(),this.unbindEvent(),this.removeAdCustomListener()}bindEvent(){this.onTimeUpdate("video",this.handleTimeUpdate),this.onEnded("video",this.handleEnded),this.onPlay("video",this.handlePlay),this.onPause("video",this.handlePause),this.onError("video",this.handleError),this.onClick("videovoicebox",this.toggleMuted,{clickType:1})}unbindEvent(){this.offTimeUpdate("video",this.handleTimeUpdate),this.offEnded("video",this.handleEnded),this.offPlay("video",this.handlePlay),this.offPause("video",this.handlePause),this.offError("video",this.handleError),this.offClick("videovoicebox",this.toggleMuted)}initCommonComponent(){this.src=this.getDataValueWithDefault("src",""),this.poster=this.getDataValueWithDefault("poster","")}initADComponent(){var e;const t=this.getAdData();this.src=this.getDataValue("src")||(0,yp.U2)(t,["video_info","videoUrl"])||(0,yp.U2)(t,["short_video","video_url"]),this.poster=this.getDataValue("poster")||(0,yp.U2)(t,["video_info","thumbUrl"])||(0,yp.U2)(t,["short_video","trumb_url"]),this.addAdCustomListener(this.handleCustomEvent),this.videoDuration=(0,yp.U2)(t,["wx_game_video","short_video","video_duration"])||(0,yp.U2)(t,["crtInfo","0","short_video","video_duration"],0),this.videoDuration=1e3*this.videoDuration;const n={currentTime:0,duration:this.videoDuration},i=(null===(e=this.manager)||void 0===e?void 0:e.adCustomId)||this.adCustomId;Mp(i,n),this.emitAdCustomEvent(vp.A$.REPORTTIMEPOINT,{key:"p8"})}doAction({payload:e}){switch(e.action){case vp.aO.VIDEOTOGGLEMUTED:this.toggleMuted();break;case vp.aO.VIDEOPLAY:this.operateVideoPlay("play");break;case vp.aO.VIDEOPAUSE:this.operateVideoPlay("pause");break;case vp.aO.VIDEOSTOP:this.operateVideoPlay("stop")}}operateVideoPlay(e){if(["play","pause","stop","seek"].includes(e)){this.setState({autoplay:"play"===e});const t=this.getElementById("video");null!=t&&t[e]&&t[e]()}}reportVideoPlay(e,t,n=0){this.baseType===vp.jn.AD&&this.emitAdCustomEvent(vp.A$.REPORTVIDEOPLAY,{playType:e,conditionType:t,videoInfo:{playDuration:n,videoDuration:this.videoDuration,isMuted:this.state.muted,isAutoPlay:this.state.autoplay}})}render(){const{src:e,poster:t,isShowVoice:n,mutedIconSrc:i,voiceIconSrc:r,voicePlacement:o,countDownPlacement:a,isShowProgress:s,isShowCountDown:c,objectFit:l}=this,{muted:u,loop:d,autoplay:h,countDownNumber:p,isEndPageShowing:f}=this.state,g=["video-voice-box"],_=["video-count-down"];return g.push(`video-voice-box-${o}`),_.push(`video-count-down-${a}`),`\n      <view id="container" class="video">\n        <video\n          id="video"\n          class="video-context"\n          src="${e}"\n          poster="${t}"\n          controls="false"\n          muted="${u}"\n          loop="${d}"\n          autoplay="${h}"\n          auto-insert="false"\n          under-game-view="false"\n          show-progress="false"\n          show-play-btn="false"\n          show-center-play-btn="false"\n          show-fullscreen-btn="false"\n          enable-progress-gesture="false"\n          object-fit="${l}"\n        >\n          ${!f&&n?`\n            <view id="videovoicebox" bubble-event="false" class="${g.join(" ")}">\n              <image\n                src="${u?i:r}"\n                id="videovoiceimg"\n                class="video-voice-icon"\n              ></image>\n            </view>\n          `:""}\n          ${s?'\n            <view id="video-progress" class="video-progress">\n              <view id="video-progress-played" class="video-progress-played"></view>\n            </view>\n          ':""}\n          ${!f&&c&&p?`\n            <text id="video-count-down" class="${_.join(" ")}" value="${p}"></text>\n          `:""}\n        </video>\n      </view>\n    `}}class Bp extends Tp{constructor(e){super(e),this.style={".feedback-icon":{width:6,height:4,marginLeft:2,position:"relative"},".close-icon":{width:6,height:6,marginLeft:2,position:"relative"},".feedback":{position:"relative",zIndex:1000010,padding:6},".feedback-tag-container":{flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative",padding:"2px 4px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2},".feedback-hot-click":{position:"absolute",top:-10,left:-10,right:-10,bottom:-10},".feedback-tag-text":{fontSize:10,height:12,lineHeight:12,color:"#fff"},".feedback-list":{position:"absolute",width:134,flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",borderWidth:1,borderColor:"rgba(0, 0, 0, 0.03)",borderRadius:4,zIndex:1000011},".feedback-list-bottomleft":{top:26,left:6},".feedback-list-bottomright":{top:26,right:6},".feedback-list-topleft":{bottom:26,left:6},".feedback-list-topright":{bottom:26,right:6},".feedback-btn":{position:"relative",width:132,height:32,lineHeight:32,color:"#566a97",fontSize:12,opacity:.9,textAlign:"center",zIndex:1000011},".feedback-title":{color:"#000",zIndex:1000011},".feedback-line":{width:100,height:1,opacity:.03,backgroundColor:"#000",zIndex:1000011}},this.state={isShowFeedback:!1,isShowFeedbackMenu:!1,position:null},this.feedbackIconSrc="https://wxa.wxs.qq.com/images/wxapp/feedback_icon.png",this.closeIconSrc="https://wxa.wxs.qq.com/images/wxapp/close.png",this.dislikeReasonHandlers={},this.baseType=void 0,this.handleTagClick=e=>{if(this.baseType===vp.Eo.SIMPLE)return this.handleSimpleTagClick(e);const{isShowFeedback:t,isShowFeedbackMenu:n}=this.state;t||n?this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}):(this.setState({isShowFeedback:!0}),this.updateMenuPosition(),this.updateInnerStyle(),this.emitAdCustomEvent(vp.A$.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"广告角标"}),this.emitComponentEvent(vp.nf.TAGTAP,{event:e}))},this.handleDislikeClick=e=>{this.setState({isShowFeedback:!1,isShowFeedbackMenu:!0}),this.updateMenuPosition(),this.updateInnerStyle(),this.emitComponentEvent(vp.nf.DISLIKETAP,{event:e})},this.handleFeedbackBtnClick=e=>{this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent(vp.nf.FEEDBACKBTNTAP,{event:e}),this.emitAdCustomEvent(vp.A$.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"投诉"}),this.emitAdCustomEvent(vp.A$.FEEDBACKBTNTAP)},this.checkUseApx(),this.baseType=this.options.baseType||vp.Eo.COMMON,this.bindEvent(),this.updateInnerStyle()}destroy(){super.destroy(),this.unbindEvent()}bindEvent(){this.onClick("feedbackTagContainer",this.handleTagClick),this.onClick("feedbackBtn",this.handleFeedbackBtnClick),this.onClick("dislike",this.handleDislikeClick),this.dislikeReasonHandlers={isdismatch:this.onClick("isdismatch",this.handleDislikeReasonClick.bind(this,1)),isduplicate:this.onClick("isduplicate",this.handleDislikeReasonClick.bind(this,5)),isbadad:this.onClick("isbadad",this.handleDislikeReasonClick.bind(this,4))}}unbindEvent(){this.offClick("feedbackTagContainer",this.handleTagClick),this.offClick("feedbackBtn",this.handleFeedbackBtnClick),this.offClick("dislike",this.handleDislikeClick);for(const e of Object.keys(this.dislikeReasonHandlers)){const t=this.dislikeReasonHandlers[e];this.offClick(e,t)}}updateMenuPosition(){this.setState({position:this.getDataValueWithDefault("menuPosition","bottomleft").toLowerCase()})}handleSimpleTagClick(e){this.emitAdCustomEvent(vp.A$.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:6}),this.emitAdCustomEvent(vp.A$.HIDEAD),this.emitComponentEvent(vp.nf.TAGTAP,{event:e})}handleDislikeReasonClick(e,t){this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent(vp.nf.DISLIKEREASONTAP,{event:t}),this.emitAdCustomEvent(vp.A$.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:e});const n=this.getDataValueWithDefault("afterDislike","showTip");"showTip"===n?this.emitAdCustomEvent(vp.A$.SHOWFEEDBACK):"hide"===n&&this.emitAdCustomEvent(vp.A$.HIDEAD)}render(){const{isShowFeedback:e,isShowFeedbackMenu:t,position:n}=this.state,i=["feedback-list"],r=["feedback-list"];n&&(i.push(`feedback-list-${n.toLowerCase()}`),r.push(`feedback-list-${n.toLowerCase()}`));const o=this.baseType===vp.Eo.SIMPLE?this.closeIconSrc:this.feedbackIconSrc;return`\n      <view id="container" class="feedback" bubble-event="false">\n        <view id="feedback-tag-container" class="feedback-tag-container">\n          <text id="feedback-tag" class="feedback-tag-text" value="广告"></text>\n          <image id="feedback-icon" class="${this.baseType===vp.Eo.SIMPLE?"close-icon":"feedback-icon"}" src="${o}"></image>\n        </view>\n        ${e?`\n          <view id="menu1" key="menu1" class="${i.join(" ")}">\n            <text class="feedback-btn feedback-title" value="由赞助商提供的内容"></text>\n            <view class="feedback-line"></view>\n            <text id="dislike" class="feedback-btn" value="不感兴趣"></text>\n            <view class="feedback-line"></view>\n            <text id="feedback-btn" class="feedback-btn" value="投诉"></text>\n          </view>\n        `:""}\n        ${t?`\n          <view id="menu2" key="menu2" class="${r.join(" ")}">\n            <text id="isdismatch" class="feedback-btn" value="与我无关"></text>\n            <view class="feedback-line"></view>\n            <text id="isduplicate" class="feedback-btn" value="重复收到多次"></text>\n            <view class="feedback-line"></view>\n            <text id="isbadad" class="feedback-btn" value="内容太差"></text>\n          </view>\n        `:""}\n      </view>\n    `}}class Fp extends Tp{constructor(e){super(e),this.style={".end":{position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1000099,backgroundColor:"rgba(0, 0, 0, 0.8)",flexDirection:"column",justifyContent:"center",alignItems:"center",hidden:!0},".end-refresh":{position:"absolute",left:0,bottom:0,flexDirection:"row",alignItems:"center"},".end-refresh-text":{color:"#D8D8D8",opacity:.5}},this.state={isShowEndPage:!1},this.children=[],this.refreshIconSrc="https://wxa.wxs.qq.com/images/wxapp/refresh_icon.png",this.showTime=0,this.cardInfo=void 0,this.backgroundImage="",this.exposured=!1,this.viewableExposured=!1,this.viewableExposureTimer=null,this.handleAdCustomListener=({action:e})=>{switch(e){case vp.A$.SHOWENDPAGE:this.setState({isShowEndPage:!0}),this.emitAdCustomEvent(vp.A$.ENDPAGESHOW),this.showTime=Date.now(),!this.exposured&&this.reportEndPageExposure(),this.exposured=!0,this.viewableExposured||(this.viewableExposureTimer=setTimeout((()=>{!this.viewableExposured&&this.reportEndPageExposure(!0)}),1e3)),this.emitComponentEvent(vp.H_.SHOW);break;case vp.A$.APPENTERBACKGROUND:this.state.isShowEndPage&&this.reportEndPageDuration();break;case vp.A$.APPENTERFOREGROUND:this.state.isShowEndPage&&(this.showTime=Date.now());break;case vp.A$.ADSHOWHALF:this.state.isShowEndPage&&(this.showTime=Date.now(),this.viewableExposured||(this.viewableExposureTimer=setTimeout((()=>{!this.viewableExposured&&this.reportEndPageExposure(!0)}),1e3)));break;case vp.A$.ADHIDEHALF:this.state.isShowEndPage&&(this.reportEndPageDuration(),this.viewableExposureTimer&&(clearTimeout(this.viewableExposureTimer),this.viewableExposureTimer=null))}},this.handleReplay=()=>{this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(vp.A$.ENDPAGEHIDE),this.emitComponentEvent(vp.H_.HIDE),this.reportEndPage({act_type:1003}),this.emitComponentEvent(vp.H_.REPLAY)},this.handleContainerClick=e=>{var t;this.reportEndPage({act_type:1002}),null===(t=this.reporter)||void 0===t||t.handleClick(e,2)};const t=this.getAdData();this.cardInfo=(0,Op.U2)(t,["crtInfo",0,"card_info"],{});const{end_page_type:n}=this.cardInfo;n&&(this.backgroundImage=this.cardInfo.head_bg_img,this.setStyle("refresh",{padding:"13apx 12apx"}),this.setStyle("refreshIcon",{height:"16apx",width:"16apx",marginRight:"4apx"}),this.setStyle("refreshText",{lineHeight:"18apx",fontSize:"14apx"}),this.children=this.getChildren(),this.bindEvent(),this.updateInnerStyle(),setTimeout((()=>{this.emitAdCustomEvent(vp.A$.ENDPAGEINIT)}),0))}updateState(e){this.state.isShowEndPage!==e.isShowEndPage&&this.setStyle("container",{hidden:!e.isShowEndPage})}getSubComponentProps(e,t){return Dn()(Dn()({},this.getCommonSubComponentProps()),{},{template:this.children[parseInt(t,10)]})}bindEvent(){this.onClick("contiainer",this.handleContainerClick),this.onClick("refresh",this.handleReplay),this.addAdCustomListener(this.handleAdCustomListener)}destroy(){super.destroy(),this.offClick("contiainer",this.handleContainerClick),this.offClick("refresh",this.handleReplay),this.removeAdCustomListener()}reportEndPageDuration(){this.showTime&&(this.reportEndPage({act_type:1006,exposure_duration:Date.now()-this.showTime}),this.showTime=0)}reportEndPageExposure(e=!1){let t=0;e&&(t=1,this.viewableExposured=!0),this.reportEndPage({act_type:t})}reportEndPage(e){this.emitAdCustomEvent(vp.A$.REPORTENDPAGE,{data:e})}doAction({payload:e}){e.action===vp.aO.ENDPAGEHIDE&&(this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(vp.A$.ENDPAGEHIDE),this.emitComponentEvent(vp.H_.HIDE))}getChildren(){const e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];const t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},i={},r=this.template.id;i.feedBack={type:"feedback",id:`${r}_endPageFeedback`,style:{position:"absolute",zIndex:99,top:"2px",left:"2px"},options:{events:{tagTap:[{action:vp.aO.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:vp.aO.TRIGGEREVENT,value:{eventName:vp.H_.VIDEODISLIKE}}]}}},i.iconBig={type:"image",id:`${r}_endPageIconBig`,style:{width:"40apx",height:"40apx",marginBottom:"7apx"},options:{baseType:2}},i.nickBig={type:"text",id:`${r}_endPageNickBig`,style:{marginBottom:"6apx"},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",height:"24apx",lineHeight:"24apx"}}}}},i.descSmall={type:"text",id:`${r}_endPageDescSmall`,style:{marginBottom:"23apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",opacity:.5,fontSize:"14apx",lineHeight:"20apx"}}}}},i.button={type:"button",id:`${r}_endPageButton`,style:{},options:{innerStyles:{container:{style:{height:"32apx",backgroundColor:"#07C160",borderRadius:"4apx",padding:"0 12.5apx",paddingBottomExpr:"#like($const.systemInfo.osVersion, 'Android') ? '1px' : '0'"}},buttonText:{style:{fontSize:"16apx",color:"#fff"}}},baseType:2,events:{buttonTap:[{action:vp.aO.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1001},n)}}]}}},i.iconSmall={type:"image",id:`${r}_endPageIconSmall`,style:{width:"20apx",height:"20apx",marginRight:"8apx"},options:{baseType:2}},i.nickSmall={type:"text",id:`${r}_endPageNickSmall`,style:{},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"15apx",height:"18apx",lineHeight:"18apx",opacity:".5"}}}}},i.layoutSmall={type:"layout",id:`${r}_endPageLayoutSmall`,style:{marginBottom:"16apx"},options:{baseType:2},children:[]},i.layoutSmall.children.push(i.iconSmall),i.layoutSmall.children.push(i.nickSmall),i.descBig={type:"text",id:`${r}_endPageDescBig`,style:{marginBottom:"32apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",lineHeight:"22apx"}}}}};const o=this.getDataValue("childrenConf");if(o)for(const e of Object.keys(o))i[e]&&(0,Op.Ee)(i[e],o[e]);let a=[];return a=2===this.cardInfo.end_page_type?[i.feedBack,i.layoutSmall,i.descBig,i.button]:[i.feedBack,i.iconBig,i.nickBig,i.descSmall,i.button],3===e?a.concat(this.template.children||[]):a}render(){const{backgroundImage:e,children:t,refreshIconSrc:n}=this;return`\n      <view\n        id="container"\n        class="end"\n        bubble-event="false"\n      >\n        ${e?`<image src="${e}"></image>`:""}\n        ${t.map(((e,t)=>`\n          <CustomItem get-props="getSubComponentProps:${t}"></CustomItem>\n        `))}\n        <view id="refresh" class="end-refresh">\n          <image id="refresh-icon" class="end-refresh-icon" src=${n}></image>\n        </view>\n      </view>\n    `}}Fp.subComponents=()=>({CustomItem:Sp});class Up extends Tp{constructor(e){super(e,{autoRegister:!1}),this.forArr=void 0,this.forType=this.options.baseType||vp.bk.COMMON,this.forArr=this.getDataValueWithDefault("forArr",[]),this.forType===vp.bk.COMMON?this.forArr=this.getDataValueWithDefault("forArr",[]):this.forType===vp.bk.ADS&&(this.forArr=this.getAdDatas())}getSubComponentProps(e,t,n){const{template:i,forArr:r}=this;return Dn()(Dn()({},this.getCommonSubComponentProps()),{},{idPrefix:this.idPrefix+(i.id||"")+t,forType:this.forType,forItem:r[Number(t)],template:i.children[Number(n)],forIndex:Number(t)})}render(){const{template:e}=this.props;return`<Fragment>${this.forArr.map(((t,n)=>e.children.map(((e,t)=>`\n        <CustomItem get-props="getSubComponentProps:${n}:${t}"></CustomItem>\n      `)).join("\n"))).join("\n")}</Fragment>`}}Up.subComponents=()=>({CustomItem:Sp});var Wp=n(9890);let jp=1;const Gp=(e,t)=>{jp=e/t},Vp=/([+-]?\d+(?:\.\d+)?)apx/g,Hp=/([+-]?\d+(?:\.\d+)?)rpx/g,zp=e=>null!=e&&e.replace?e.replace(Hp,((e,t)=>`${(e=>{if(0===e)return 0;const{screenWidth:t}=Wp.S;let n=e/750*t;return n<0&&(n=-n),n=Math.floor(n+1e-4),e<0?-n:n})(Number(t))}px`)):e;class Zp extends Tp{constructor(e){super(e),this.style={".carousel":{overflow:"hidden",position:"relative"},".carousel-list":{position:"relative",zIndex:1},".carousel-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".carousel-col":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".carousel-mask":{position:"absolute",width:"100%",height:"100%",zIndex:2000001,backgroundColor:"rgba(0, 0, 0, 0)"}},this.baseType=void 0,this.showCount=void 0,this.allCount=void 0,this.animateCount=void 0,this.allIndexList=void 0,this.size=void 0,this.duration=void 0,this.isViewable=!1,this.isPlaying=!1,this.animated=!1,this.timerSet=new Set,this.disabled=void 0,this.isCol=void 0,this.handleMaskClick=e=>{const t=null!=this.moveTime?(Date.now()-this.moveTime)/this.duration*this.size:0;let n;n=this.animated?-this.animateCount*this.size+t:-t;const i=(this.isCol?e.relativeY:e.relativeX)-n,r=Math.floor(i/this.size);this.emitComponentEvent(vp.Zw.UNITTAP,{index:r,event:e})},this.handleAdCustomEvent=({action:e})=>{[vp.A$.ADSHOWHALF].includes(e)?(this.isViewable=!0,this.autoplay()):[vp.A$.ADHIDEHALF].includes(e)&&(this.isViewable=!1,this.clearTimers())},this.moveTime=null,this.baseType=this.options.baseType||vp.Af.ROWLOOP,this.showCount=this.getDataValueWithDefault("showCount",0),this.allCount=this.getDataValueWithDefault("allCount",0),this.animateCount=this.allCount-this.showCount,this.size=((e,t=!0)=>{const n=t?zp(e):e;return n&&"string"==typeof n?n.replace(Vp,((e,t)=>`${Number(t*jp)}px`)):n})(this.getDataValueWithDefault("size","0px")).replace("px",""),this.duration=this.getDataValueWithDefault("duration",1500),this.disabled=this.getDataValueWithDefault("disabled",!1),this.allIndexList=Array.from({length:this.allCount}).map(((e,t)=>t)),this.isCol=this.baseType===vp.Af.COLUMNLOOP,this.onClick("mask",this.handleMaskClick),this.baseType===vp.Af.ROWLOOP?this.initCarousel("width"):this.baseType===vp.Af.COLUMNLOOP&&this.initCarousel("height"),this.updateInnerStyle()}destroy(){super.destroy(),this.offClick("mask",this.handleMaskClick),this.clearTimers(),this.isViewable=!1}initCarousel(e){this.setStyle("container",{[e]:this.showCount*this.size}),this.setStyle("list",{[e]:this.allCount*this.size}),this.addAdCustomListener(this.handleAdCustomEvent)}clearTimers(){for(const e of this.timerSet)clearTimeout(e)}autoplay(){var e=this;return Pn()((function*(){if(!e.isViewable||e.isPlaying)return;const t=e.baseType===vp.Af.ROWLOOP?"left":"top";if(e.disabled)e.emitComponentEvent(vp.Zw.SHOWCHANGE,{list:e.allIndexList.slice(0,e.showCount)||[]}),e.isPlaying=!1;else if(e.animateCount<=0)e.emitComponentEvent(vp.Zw.SHOWCHANGE,{list:e.allIndexList||[]}),e.isPlaying=!1;else{e.isPlaying=!0;for(let t=0;t<e.animateCount;t+=1){const{animated:n}=e,i=setTimeout((()=>{e.timerSet.delete(i);const r=n?e.allIndexList.slice(e.allCount-t-e.showCount,e.allCount-t):e.allIndexList.slice(t,t+e.showCount);e.emitComponentEvent(vp.Zw.SHOWCHANGE,{list:r})}),t*e.duration);e.timerSet.add(i)}e.moveTime=Date.now();try{yield e.doAnimation({id:"list",emitEvent:!1,animation:{keys:[{offset:0,[t]:e.animated?-1*e.animateCount*e.size:0},{offset:1,[t]:e.animated?0:-1*e.animateCount*e.size}],duration:e.duration*e.animateCount,easing:"linear"}})}catch(e){}e.animated=!e.animated,e.isPlaying=!1,e.moveTime=null;const n=setTimeout((()=>{e.timerSet.delete(n),e.autoplay()}),e.duration/4);e.timerSet.add(n)}}))()}getCustomItemProps(e,t){return Dn()(Dn()({},this.getCommonSubComponentProps()),{},{template:this.props.template.children[parseInt(t,10)]})}render(){const{template:{children:e}}=this.props,{baseType:t,allCount:n,showCount:i}=this;if(!(e&&e.length&&n&&i))return"<view></view>";return`\n      <view id="container" class="carousel">\n        <view id="mask" class="carousel-mask"></view>\n        <view id="list" class="${["carousel-list",t===vp.Af.ROWLOOP?"carousel-row":"carousel-col"].join(" ")}">\n          ${e.map(((e,t)=>`\n            <CustomItem get-props="getCustomItemProps:${t}"></CustomItem>\n          `)).join("\n")}\n        </view>\n      </view>\n    `}}Zp.subComponents=()=>({CustomItem:Sp});class Yp extends Tp{constructor(e){super(e),this.style={".countdown":{position:"relative",flexDirection:"row",height:32,alignItems:"center"},".countdown-background":{position:"absolute",top:0,bottom:0,left:0,right:0,height:32,background:"rgba(0, 0, 0, 0.15)",border:"0.5px solid rgba(255, 255, 255, 0.254048)",borderRadius:16},".countdown-right":{position:"relative",height:32,flexDirection:"row",alignItems:"center",alignSelf:"flex-start",paddingLeft:63,paddingRight:12,justifyContent:"center",background:"rgba(0, 0, 0, 0.15)",borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,borderRadius:16},".countdown-container":{height:32,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative"},".countdown-text":{fontSize:14,height:20,lineHeight:20,width:14,color:"#fff",alignSelf:"center",position:"relative"},".countdown-value":{fontSize:14,height:20,lineHeight:20,width:11,color:"#fff",alignSelf:"center",position:"relative"},".split-line":{width:.5,height:18.5,marginRight:8.5,position:"relative",backgroundColor:"rgba(255, 255, 255, 0.25)"}},this.state={countdownValue:""},this.children=[],this.handleAdCustomEvent=({action:e,value:t={}})=>{if(e===vp.A$.CHANGECOUNTDOWN){const e=this.getElementById("countdownvalue"),n=2===t.value.toString().length?18:11;this.setStyle("countdownvalue",{width:n}),e&&(e.value=t.value)}},this.children=this.getChildren(),this.updateInnerStyle(),this.addAdCustomListener(this.handleAdCustomEvent)}destroy(){super.destroy()}getSubComponentProps(e,t){return Dn()(Dn()({},this.getCommonSubComponentProps()),{},{template:this.children[parseInt(t,10)]})}getChildren(){const e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];const t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},i={};i.feedBack={type:"feedback",id:"Countdown-Feedback",style:{position:"absolute",height:32,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1111999,left:12},options:{innerStyles:{container:{style:{height:32,padding:0}},feedbackTag:{style:{fontSize:14,width:28,height:20,lineHeight:20}},feedbackTagContainer:{style:{backgroundColor:"",borderRadius:0,padding:0,height:32,top:0,left:0}},feedbackIcon:{style:{marginLeft:4.5,width:9,height:6,marginTop:4}},menu1:{style:{top:40,left:0}},menu2:{style:{top:40,left:0}}},events:{tagTap:[{action:vp.aO.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:vp.aO.TRIGGEREVENT,value:{eventName:vp.H_.VIDEODISLIKE}}]},data:{}}};const r=this.getDataValue("childrenConf");if(r)for(const e of Object.keys(r))i[e]&&(0,Op.Ee)(i[e],r[e]);let o=[];return o=[i.feedBack],3===e?o.concat(this.template.children||[]):o}render(){const{children:e}=this;return`\n      <view id="container" class="countdown" bubble-event="false">\n        ${e.map(((e,t)=>`\n          <CustomItem get-props="getSubComponentProps:${t}"></CustomItem>\n        `))}\n        <view class="countdown-right">\n          <view id="split-line" class="split-line"></view>\n          <view id="countdown-container" class="countdown-container">\n            <text class="countdown-value" id="countdownvalue" value="5"></text>\n            <text class="countdown-text" value="秒"></text>\n          </view>\n        </view>\n      </view>\n    `}}Yp.subComponents=()=>({CustomItem:Sp});const $p=Cp;var qp=n(780),Qp=n(3866);class Jp extends jo.Z{}var Xp=n(8997);const Kp={container:{zIndex:1000005,top:0,left:0,overflow:"hidden",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column"},adMaterialBg:{position:"absolute",hidden:!1,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"}},ef=Object.assign({},{container:{zIndex:1000005,top:0,left:0,position:"absolute",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",overflow:"hidden",backgroundColor:"#ffffff"},navigator:{hidden:!0,height:72,width:"100%",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column",overflow:"hidden"},adMaterialBg:{position:"absolute",hidden:!0,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"},adMaterialContainer:{hidden:!0,position:"absolute",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0,width:"100%"},adMaterialLandscape:{width:311,height:175,marginLeft:32,marginRight:32,borderRadius:8},adCardInfo:{flexDirection:"column",marginTop:32,width:311,height:150},adHeadInfo:{width:311,height:28,flexDirection:"row",alignItems:"center"},adHeadIcon:{width:16,height:16,marginRight:6,borderRadius:8},adversName:{width:88,height:28,lineHeight:28,fontSize:14,lineBreak:"ellipsis",color:"#ffffff",opacity:.6},adTitle:{marginTop:18,height:28,width:216,fontSize:24,color:"#ffffff"},appInfo:{flexDirection:"column",alignItems:"center",width:"100%",height:160,backgroundColor:"#ffffff"},appIcon:{borderRadius:24,marginTop:16,marginBottom:8,width:48,height:48},appName:{width:"100%",height:24,textAlign:"center",lineHeight:24,fontSize:17,color:"#000000"}},{adFeedbackList:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}},{topBar:{position:"absolute",justifyContent:"flex-start",flexDirection:"row",alignItems:"flex-start",left:0,top:40},adFeedback:{hidden:!1,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:2.5},splitLineLeft:{width:1,height:18.5,marginLeft:8.5,marginRight:8.5,backgroundColor:"rgba(255, 255, 255, 0.25)"},count:{marginLeft:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:9,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{width:15,height:32,lineHeight:32,color:"#ffffff",fontSize:14}},{card:{backgroundColor:"#ffffff",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:84,width:"100%"},adIcon:{borderRadius:20,opacity:.95,width:40,height:40,marginRight:8,marginBottom:12,marginLeft:16},adInformation:{marginBottom:12,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},adName:{height:24,lineHeight:24,fontSize:17,lineBreak:"ellipsis",color:"#000000",marginBottom:2},adWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:14},buttonContainer:{marginBottom:12,flex:1,flexDirection:"row",justifyContent:"flex-end",marginRight:16,marginLeft:12,overflow:"hidden"},button:{height:32,lineHeight:32,width:88,textAlign:"center",lineBreak:"ellipsis",fontSize:16,color:"#ffffff",backgroundColor:"#07c160",borderWidth:1,borderColor:"#07c160",borderRadius:3,marginRight:10,marginLeft:10}},{closeContainer:{flexDirection:"column",justifyContent:"flex-end",alignSelf:"flex-end",marginBottom:16,height:54},close:{height:32,lineHeight:32,width:60,marginLeft:12,marginRight:12,textAlign:"center",lineBreak:"ellipsis",fontSize:14,color:"#ffffff",borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"}},{tipsContainer:{marginTop:12,flex:1,height:32,width:"100%",flexDirection:"column",justifyContent:"center",overflow:"hidden"},tipsLineOne:{height:16,textAlign:"center",lineHeight:16,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11},tipsLineTwo:{height:16,lineHeight:16,textAlign:"center",lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11}},{adCloseTips:{hidden:!0,position:"absolute",overflow:"hidden",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0},adCloseTipsWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipsContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{mediaBottom:{backgroundColor:"#ffffff",borderRadius:8,height:24,width:"100%",alignSelf:"flex-end"}},{adButtonContainer:{width:375,height:64,overflow:"hidden",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.15)",borderRadius:2},adButton:{marginLeft:32,flex:1,height:28,lineHeight:28,lineBreak:"ellipsis",fontSize:17,color:"#ffffff",opacity:.9,borderRadius:3},actionIconContainer:{marginRight:32,flexDirection:"row",justifyContent:"center",alignItems:"center",width:12,height:14},actionIconWrap1:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},actionIconWrap2:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},iconArrow1:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow2:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5},iconArrow3:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow4:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5}}),tf={card:'\n  <view id="card">\n    <image id="ad-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/raphael/icon.png"></image>\n    <view id="ad-information" bubble-event="true">\n      <text id="ad-name" bubble-event="true" value="微信广告"></text>\n      <text id="ad-wording" bubble-event="true" value="本次封面广告赞助"></text>\n    </view>\n    <view id="button-container">\n      <text id="button" click-state="true" bubble-event="true" value="查看详情"></text>\n    </view>\n  </view>\n',appInfo:'\n  <view id="app-info">\n    <image id="app-icon"></image>\n    <text id="app-name"></text>\n  </view>\n',feedbackContent:'\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n',feedbackMenu:'\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n',topBar:'\n  <view id="top-bar">\n    <view id="count">\n      <view id="ad-feedback">\n        <text id="ad-text" value="广告" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n        <view id="split-line-left" bubble-event="true"></view>\n      </view>\n      <text id="count-down" value="5"></text>\n      <text id="count-down-append" value="秒"></text>\n    </view>\n  </view>\n',close:'\n  <view id="close-container">\n    <text id="close" click-state="true" bubble-event="true" value="跳过"></text>\n  </view>\n',gameTips:'\n  <view id="tips-container">\n    <text id="tips-line-one" value="抵制不良游戏，拒绝盗版游戏。 注意自我保护，谨慎受骗上当。"></text>\n    <text id="tips-line-two" value="适度游戏益脑，沉迷游戏伤身。 合理安排时间，享受健康生活。"></text>\n  </view>\n',closeTips:'\n  <view id="ad-close-tips">\n    <view id="ad-close-tips-wrap">\n      <text id="ad-close-tips-content" bubble-event="true" value="感谢你的反馈"></text>\n    </view>\n  </view>\n',mediaBottom:'\n  <view id="media-bottom">\n  </view>\n',adHeadInfo:'\n  <view id="ad-head-info" bubble-event="true">\n    <image id="ad-head-icon" bubble-event="true" src=""></image>\n    <text id="advers-name" value="" bubble-event="true"></text>\n  </view>\n',adTitle:'\n  <text id="ad-title" value="" bubble-event="true"></text>\n',adButtonContainer:'\n  <view id="ad-button-container">\n    <text id="ad-button" bubble-event="true" value=""></text>\n    <view id="action-icon-container">\n      <view id="action-icon-wrap-1">\n        <view id="icon-arrow-1"></view>\n        <view id="icon-arrow-2"></view>\n      </view>\n      <view id="action-icon-wrap-2">\n        <view id="icon-arrow-3"></view>\n        <view id="icon-arrow-4"></view>\n      </view>\n    </view>\n  </view>\n'},nf=(...e)=>(0,op._u)(...e),{root:rf}=Js()('\n  <view id="container">\n    <view id="navigator"></view>\n    <view id="ad-media">\n      <image id="ad-material-bg"></image>\n      <image id="ad-material" bubble-event="true"></image>\n      <view id="ad-material-container" bubble-event="true">\n        <image id="ad-material-landscape" bubble-event="true"></image>\n        <view id="ad-card-info" bubble-event="true"></view>\n      </view>\n    </view>\n  </view>\n');let of=0,af=0,sf=0,cf=0,lf=0,uf=0,df=0,hf=0,pf=!1,ff=!1,gf=!1,_f="",mf="",yf="",vf="";const Af=`${xp.Lq}/adinfos.txt`,bf=a.wZ?200:400,wf=2e3,Ef=function(e,t=!0){const n=(0,Xs.Wj)(this).adProxy.isTriggerClick(e),i=n?0:1;return t&&Tf.call(this,e,i),n},Tf=function(e,t=0){var n;const i=(0,Xs.Wj)(this);if(!i.container||!i.container.layoutBox)return;const{width:r,height:o}=i.container.layoutBox;let a=0;[0,2,3].includes(t)&&(i.clickCount+=1,a=i.clickCount);const s={slotid:xp.DX[i.adType],costtype:null!==(n=i.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,click_time:Date.now(),click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(r,10)||0,ad_height:parseInt(o,10)||0,press_interval:e.pressInterval,block_click:t};return i.adProxy.reportTouchClick(s)},Sf=function(){const e=(0,Xs.Wj)(this);let t=!1;return(0===e.startExposureTime||+new Date-e.startExposureTime<1e3)&&(t=!0),t},Cf=function(e,t){var n;const i=(0,Xs.Wj)(this),{width:r,height:o}=i.container.style,a={click_button:e,cost_type:null!==(n=i.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,slotid:xp.DX[i.adType],is_game:pf?1:0,pageentertime:+new Date(i.adProxy.getProgramStartTime()),ad_width:parseInt(r,10)||0,ad_height:parseInt(o,10)||0,clientexptime:i.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:of,screen_height:af};return i.adProxy.reportAntifraud(a)},If=function(e){const t=(0,Xs.Wj)(this),n=e.then((e=>/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0)).catch((()=>t.adProxy.reportFollow({result:"fail"})));nf(n,"splashAd","关注")},xf=function(e){var t;const n=(0,Xs.Wj)(this),i=+new Date,r={slotid:xp.DX[n.adType],is_game:pf?1:0,costtype:null!==(t=n.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,close_type:e,exposure_duration:i-n.startExposureTime-n.hideDuration,start_time:n.startExposureTime,close_time:i};return n.adProxy.reportCloseAction(r)},Df=function(e){var t;const n=(0,Xs.Wj)(this),i={slotid:xp.DX[n.adType],is_game:pf?1:0,costtype:null!==(t=n.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,button_type:e};return n.adProxy.reportAdEntranceExposure(i)},Of=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:n=0,secondGradeDesc:i="",feedbackReason:r=0}){const o=(0,Xs.Wj)(this);e&&!n&&(o.clickFirstGradeTime=+new Date),o.adProxy.reportAdFeedbackData({adWidth:of,adHeight:af,adPosX:0,adPosY:0,expTime:o.startExposureTime,slotId:xp.DX[o.adType],firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?o.clickFirstGradeTime:0,secondGradeId:n,secondGradeDesc:i,secondGradeTime:n?+new Date:0,feedbackReason:r})},Pf=function(e=!1){const t=(0,Xs.Wj)(this);if(!t.isShowed)return Promise.resolve();if(!t.data||!t.container.layoutBox)return(0,op.Vs)(100).then((()=>Pf.call(this,e)));const{left:n,top:i,width:r,height:o}=t.container.layoutBox;if(!t.isShowedExposureReported){t.isShowedExposureReported=!0,t.startExposureTime=+new Date,t.adProxy.setTimePoint("p6");const e=s.Z.onReady((()=>{t.adProxy.reportExposure({left:n,top:i,width:r,height:o,exposureType:"showed",source:t.source});const e="launch"===t.source?xp.ET.firstShowSuccess:xp.ET.secondShowSuccess;t.adProxy.reportAdMonitorData(e),t.adProxy.setSplashAdShowStatus()}));nf(e,"splashAd","原始")}if(!t.isViewableExposureReported){if(!e)return(0,op.Vs)(1e3).then((()=>Pf.call(this,!0)));{t.adProxy.setTimePoint("p7"),t.isViewableExposureReported=!0,t.adProxy.isViewable=!0;const e=t.adProxy.reportExposure({left:n,top:i,width:r,height:o,exposureType:"viewable",source:t.source});nf(e,"splashAd","可视")}}return Promise.resolve()},Rf=function(e){const t=(0,Xs.Wj)(this);if(!t.container||!t.container.layoutBox)return;const{left:n,top:i,width:r,height:o}=t.container.layoutBox,a=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-n,clickRelativeTop:e.absoluteY-i,pressInterval:e.pressInterval,left:n,top:i,width:r,height:o,source:t.source});return nf(a,"splashAd","点击"),a},kf=function(e,t){const n=(0,Xs.Wj)(this),{appInfo:{apkName:i,channelId:r,urlScheme:o},product_type:s,dest_type:c}=n.data;if(12===s&&a.wZ&&4===n.androidAppState&&o&&o.trim().length>0)Rf.call(this,e),Cf.call(this,t,e),n.adProxy.launchApplication(o).catch((()=>{})),n.lastJsapiName="launchApplication",n.isLandingPage=!0;else if(12===s&&a.wZ&&n.isYYBInstalled){Rf.call(this,e),Cf.call(this,t,e);const{aid:o,traceid:a,apurl:s}=n.adProxy.data,c=["ANDROIDWX.YYB.WX.ADVERTISE",a,o,i.replace(/\./g,"_"),"0",15,s.indexOf("ad.wx.com")>-1?1:0].join("."),l=`tmast://download?oplist=1,2&pname=${i}&channelid=${r}&via=${c}`;n.adProxy.launchApplication(l).catch((()=>{Nf.call(this)})),n.lastJsapiName="launchApplication",n.isLandingPage=!0}else a.cj&&46===s&&6===c?Promise.race([Rf.call(this,e),(0,op.Vs)(500)]).then((()=>{Cf.call(this,t,e),Nf.call(this)})).catch((()=>{Cf.call(this,t,e),Nf.call(this)})):(Rf.call(this,e),Cf.call(this,t,e),Nf.call(this))},Nf=function(e={}){const t=(0,Xs.Wj)(this),n=t.adProxy.land(e);return 23===t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(n.then((e=>{const n=/ok/.test(e.errMsg);n&&t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));const i=+new Date;var r;(t.lastJsapiStatus=0,t.lastJsapiCostTime=i-t.lastLandingTime,"private_addContact"===t.lastJsapiName)&&t.adProxy.reportLandingTime({slotId:xp.DX[t.adType],costType:null!==(r=t.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,openTime:t.lastLandingTime,closeTime:i,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:n?2:3,actTypeStr:n?"关注":"取消"})})).catch((()=>{t.lastJsapiStatus=1})),If.call(this,n)):n.then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===t.lastJsapiName||"navigateToMiniProgram"===t.lastJsapiName||"openADCanvas"===t.lastJsapiName||"launchApplication"===t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((e=>{t.lastJsapiStatus=1,t.adProxy.reportAdMonitorData(xp.ET.landingPageFail,{source:t.source,msg:e})})),n},Mf=function(e){const t=(0,Xs.Wj)(this);for(const n of e)t[n]&&clearTimeout(t[n])},Lf=function(){var e;const t=(0,Xs.Wj)(this);t.eventsMap={},null!==(e=t.appInfo)&&void 0!==e&&e.style&&(t.appInfo.style.top=16),t.componentsRenderred=!1,t.firstInserted=!1,t.adFeedbackInserted=!1,t.isDynamic=!1,t.isShowedExposureReported=!1,t.startExposureTime=0,t.isViewableExposureReported=!1,t.isShowed=!1,t.adProxy.isViewable=!1,t.isCheckAdRequest=!0,t.clickCount=0,t.lastLandingTime=0,t.lastJsapiName="",t.lastJsapiStatus=0,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.hideTime=0,t.hideDuration=0,t.isClosing=!1,t.isShowCloseTip=!1,t.clickFirstGradeTime=0,t.source="",Mf.call(this,["countTimer"]),s.Z.onReady((()=>{var e,n,i;t.adProxy.reportTimePoints({slotid:xp.DX[t.adType],costtype:null!==(e=t.adProxy.data)&&void 0!==e&&e.is_cpm?1:2,splash_instance_id:null===(n=t.showInfo)||void 0===n?void 0:n.instanceId,scene:null===(i=t.showInfo)||void 0===i?void 0:i.scene,extInfo:{adInfos:t.adInfos}})}))},Bf=function(e={},t){t&&xf.call(this,t),(0,Xp.R0)(e)},Ff=function(e={},t={}){return(0,Xs.Wj)(this).adProxy.fetch(!1,e,t)},Uf=function(){const e=(0,Xs.Wj)(this);if((a.wZ||a.cj)&&!gf)try{e.adFetchResult=Ff.call(this).catch((()=>{})),e.adProxy.reportAdMonitorData(xp.ET.OTHER_ADS_EMIT_FETCH)}catch(e){}},Wf=function(){var e;const t=(0,Xs.Wj)(this).data||{};let n={};if(null!==(e=t.crtInfo)&&void 0!==e&&e.card_info)n=t.crtInfo.card_info;else if(t.crtInfo&&t.crtInfo.length>0){const e=t.crtInfo?t.crtInfo[0]:{};n=null!=e&&e.card_info?e.card_info:{}}return n},jf=function(){var e,t;const n=(0,Xs.Wj)(this),i=+new Date-n.startExposureTime-n.hideDuration;let r=5e3;(null==n||null===(e=n.data)||void 0===e||null===(t=e.condition)||void 0===t?void 0:t.widget_gray_splashad_show_duration)>=r&&(r=n.data.condition.widget_gray_splashad_show_duration);const o=r-i;if(o>=0){const e=Math.ceil(o/1e3).toString();n.countDown&&(n.countDown.value=e),n.tplComponent&&n.tplComponent.emitAdCustomEvent(qp.A.CHANGECOUNTDOWN,{value:e}),n.countTimer&&clearTimeout(n.countTimer),n.countTimer=setTimeout((()=>{jf.call(this)}),1e3)}else"launch"===n.source&&n.isShowedExposureReported&&(n.isDynamic&&n.tplComponent.hide(),Bf.call(this,{source:n.source,animated:!0},12))},Gf=function(){const e=(0,Xs.Wj)(this);if("launch"===e.source)e.topBar&&cf&&(e.topBar.style.top=cf,e.adFeedbackMenu.style.top=cf+34,e.adFeedbackList.style.top=cf+34),e.closeContainer&&(e.closeContainer.style.marginTop=lf-68),e.appInfo&&(e.appInfo.style.height=uf,e.appInfo.style.width=of,e.isDarkMode&&(e.appInfo.style.backgroundColor="#191919",e.container.style.backgroundColor="#191919")),e.appIcon&&(e.appIcon.src=e.showInfo.appIcon,e.appIcon.style.marginTop=pf?16:28),e.appName&&(e.appName.value=e.showInfo.appName,e.appName.style.width=of,e.appName.style.color=e.isDarkMode?"#ffffff":"#000000"),e.tipsContainer&&(e.tipsContainer.style.height=32,e.tipsContainer.style.width=of,e.tipsLineOne.style.width=of,e.tipsLineOne.style.color=e.isDarkMode?"#ffffff":"#000000",e.tipsLineTwo.style.color=e.isDarkMode?"#ffffff":"#000000"),e.adCloseTips&&(e.adCloseTips.style.height=af-uf,e.adCloseTips.style.width=of);else if("menu"===e.source){var t;if(!e.data)return;const{data:n}=e,i=Wf.call(this),r=(0,ve.xI)();e.adIcon.src=i.thumb,e.adName.value=i.title,null!==(t=n.button_action)&&void 0!==t&&t.button_text&&(e.button.value=n.button_action.button_text),r.screenTop&&r.screenTop>0?sf=r.screenTop:sf&&0!==sf||(sf=88*af/812),e.navigator.style.height=sf,e.navigator.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff",e.card.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff",e.card.style.width=of,e.card.style.height=uf-sf,e.adName.style.color=e.isDarkMode?"#ffffff":"#000000",e.adWording.style.color=e.isDarkMode?"#ffffff":"#000000",e.mediaBottom&&(e.mediaBottom.style.marginTop=lf-12,e.mediaBottom.style.width=of,e.mediaBottom.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff")}if("landscape"===e.crtOrientation){const t=e.data||{},n=Wf.call(this);if(n&&e.adHeadInfo&&(e.adHeadIcon.src=n.thumb||"",e.adversName.value=n.title||"",e.adHeadInfo.style.width=of/375*311,e.adversName.style.width=of/375*311),t.hint_txt&&e.adTitle&&t.crt_size!==xp.vK.CRT_SIZE_BIG_PIC?(e.adTitle.value=t.hint_txt,e.adTitle.style.width=of/375*311):n.description&&e.adTitle?(e.adTitle.value=n.description,e.adTitle.style.width=of/375*311):e.adTitle&&t.product_type&&xp.sl[t.product_type]&&(e.adTitle.value=`今日${xp.sl[t.product_type]}推荐`,e.adTitle.style.width=of/375*311),t.button_action&&e.adButtonContainer){e.adButton.value=t.button_action.button_text,e.adButtonContainer.style.width=of,e.closeContainer&&(e.closeContainer.style.marginTop=lf-132);const n={text:t.button_action.button_text,fontSize:17},i=(0,Op.X1)(n)||80;e.adButton.style.width=i+8,e.adButton.style.width+12>100&&(e.adButton.style.width=e.adButton.style.width+12)}}},Vf=function(e){const t=(0,Xs.Wj)(this);if(t.dynamicElems||(t.dynamicElems={}),t.dynamicEmitter||$f.call(this),t.dynamicElems.root)return;const n=t.data.adDynamicList,i=zf.call(this,{tpl:n,source:e}),r=i.getRootElement();t.dynamicElems.root=r,t.container.add(t.dynamicElems.root),i.show(),t.tplComponent=i,t.tplComponent.emitComponentEvent(Qp._d.SPLASHADFIRSTRENDER)},Hf=function(){let e="";const t=(0,Xs.Wj)(this).adProxy.data,n=Wf.call(this);return t.hint_txt&&t.crt_size!==xp.vK.CRT_SIZE_BIG_PIC?e=t.hint_txt:n.description?e=n.description:t.product_type&&xp.sl[t.product_type]&&(e=`今日${xp.sl[t.product_type]}推荐`),e},zf=function({tpl:e,source:t}){const n=(0,Xs.Wj)(this),i=n.adProxy.data,r=Hf.call(this),o=Wf.call(this);return(0,ap.sY)(Cp,{manager:null,reporter:null,emitter:n.dynamicEmitter,adProxy:n.adProxy,template:e,systemInfo:{screenWidth:of,screenHeight:af},adData:i,adCustomId:"dynamic",isEmpty:!1,scope:{rightButtonTop:cf||40,source:t,screenTop:sf||88*af/812,isDarkMode:n.isDarkMode,adTitle:r||"",cardInfo:o,materialFile:_f,materialBgFile:yf,materialBlurFile:vf,private:n,appIcon:n.showInfo.appIcon,appName:n.showInfo.appName}},!1)},Zf=function(e){const t=(0,Xs.Wj)(this);Ef.call(this,e,!1)&&(Sf.call(this)||"launch"===t.source&&Bf.call(this,{source:t.source,animated:!0},11))},Yf=function(e){const t=(0,Xs.Wj)(this);switch(e.action){case qp.A.LANDAD:{const{event:n,index:i}=e.value,r=i;if(!Ef.call(this,n,13===r))return;13===r&&kf.call(this,n,r),Bf.call(this,{source:t.source,animated:!1},r),16===r&&(t.isLandingPage=!0,(0,op.Vs)(bf).then((()=>kf.call(this,n,r))));break}case qp.A.CHECKEXPOSURE:t.dynamicRendered=!0,t.isShowedExposureReported||Pf.call(this),t.countTimer||jf.call(this);break;case qp.A.FEEDBACKREPORT:Of.call(this,e.value);break;case qp.A.FEEDBACKBTNTAP:t.data&&t.adProxy.openFeedbackUrl(1014);break;case qp.A.REPORTMMDATA:e.value.id&&e.value.data&&t.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case qp.A.SPLASHSKIPAD:{const{event:t}=e.value;Zf.call(this,t);break}case qp.A.REPORTADMONITORDATA:{const n=null==e?void 0:e.value,{id:i,key:r,extInfo:o}=n,a=i?{idKeyGroup:i,idKey:r}:r;t.adProxy.reportAdMonitorData(a,o);break}}},$f=function(){const e=(0,Xs.Wj)(this);e.dynamicEmitter=new Jp,e.dynamicEmitter.on("adCustomEvent",(e=>{Yf.call(this,e)}))},qf=function(e,t=!1){const n=(0,Xs.Wj)(this);e.forEach((e=>{const{root:t}=Js()(tf[e.name]),i=Xs.Ue.call(this,t);n[e.parent].add(i)})),n.componentsRenderred=!0,Gf.call(this),t&&Qf.call(this)},Qf=function(){const e=(0,Xs.Wj)(this);e.adFeedback&&!e.eventsMap.adFeedback&&e.adFeedback.on("click",(t=>{Ef.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!e.adFeedbackMenu.style.hidden||!e.adFeedbackList.style.hidden,e.adFeedbackMenu.style.hidden=!0,e.adFeedbackList.style.hidden||Of.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),e.adFeedbackBtn&&!e.eventsMap.adFeedbackBtn&&e.adFeedbackBtn.on("click",(t=>{Ef.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,Of.call(this,{secondGradeId:1,secondGradeDesc:"投诉"}),"launch"===e.source&&Bf.call(this,{source:e.source,animated:!0},17),e.data&&e.adProxy.openFeedbackUrl(1014))})),e.adDislikeBtn&&!e.eventsMap.adDislikeBtn&&e.adDislikeBtn.on("click",(t=>{Ef.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!1,Of.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"}))})),e.adQualityBtn&&!e.eventsMap.adQualityBtn&&e.adQualityBtn.on("click",(t=>{Ef.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,Of.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),"launch"===e.source&&Bf.call(this,{source:e.source,animated:!0},17))})),e.adDuplicateBtn&&!e.eventsMap.adDuplicateBtn&&e.adDuplicateBtn.on("click",(t=>{Ef.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,Of.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),"launch"===e.source&&Bf.call(this,{source:e.source,animated:!0},17))})),e.adDismatchBtn&&!e.eventsMap.adDismatchBtn&&e.adDismatchBtn.on("click",(t=>{Ef.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,Of.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),"launch"===e.source&&Bf.call(this,{source:e.source,animated:!0},17))})),e.closeContainer&&!e.eventsMap.closeContainer&&e.closeContainer.on("click",(t=>{Ef.call(this,t,!1)&&(Sf.call(this)||"launch"===e.source&&Bf.call(this,{source:e.source,animated:!0},11))})),e.adMedia&&!e.eventsMap.adMedia&&e.adMedia.on("click",(e=>{Jf.call(this,e,"adMedia")})),e.adButtonContainer&&!e.eventsMap.adButtonContainer&&e.adButtonContainer.on("click",(e=>{Jf.call(this,e,"button")})),e.buttonContainer&&!e.eventsMap.buttonContainer&&e.buttonContainer.on("click",(t=>{if(Ef.call(this,t,!1))return e.data?(Bf.call(this,{source:e.source,animated:!1},16),e.isLandingPage=!0,(0,op.Vs)(bf).then((()=>kf.call(this,t,16)))):void 0}));const t=["adFeedback","adFeedbackBtn","adDislikeBtn","adQualityBtn","adDuplicateBtn","adDismatchBtn","closeContainer","adMedia","buttonContainer","adButtonContainer"];for(const n of t)e[n]&&!e.eventsMap[n]&&(e.eventsMap[n]=!0)},Jf=function(e,t=""){var n,i;const r=(0,Xs.Wj)(this);if((!((null==r||null===(n=r.data)||void 0===n||null===(i=n.condition)||void 0===i?void 0:i.widget_gray_splash_click_area_switch)||0)||"button"===t)&&Ef.call(this,e,!1))return r.data&&"launch"===r.source?!pf||a.wZ?(kf.call(this,e,13),(0,op.Vs)(200).then((()=>Bf.call(this,{source:r.source,animated:!1},13)))):(Bf.call(this,{source:r.source,animated:!1},13),kf.call(this,e,13)):void 0},Xf=function(){const e=(0,Xs.Wj)(this);if(e.data){const t=Wf.call(this);t&&"launch"===e.source&&(0,Xp.yw)({showMenu:!0,title:t.title,icon:t.thumb,success:()=>{e.adProxy.reportAdMonitorData(xp.ET.showSplashAdMenuSuccess)},fail:t=>{e.adProxy.reportAdMonitorData(xp.ET.showSplashAdMenuFail,{msg:t})}})}},Kf=function(){const e=(0,Xs.Wj)(this);try{var t;const n=(null===(t=e.data)||void 0===t?void 0:t.aid)||"";e.adProxy.data&&e.adInfos&&e.adInfos.waidMap&&(e.adProxy.data.waid=e.adInfos.waidMap[n])}catch(e){}},eg=function(){const e=(0,Xs.Wj)(this);if(!e.data||""===e.data||"object"!=typeof e.data){const t=Xp.fs.readFileSync(mf,"utf-8");try{const n=JSON.parse(t);e.data=n,e.adProxy.data=n}catch(t){s.Z.onReady((()=>{e.adProxy.reportAdMonitorData(xp.ET.readFileDataFail,{source:e.source,msg:t})}))}}},tg=function(){const e=(0,Xs.Wj)(this);if("launch"!==e.source)return;qf.call(this,[{parent:"adMedia",name:"topBar"}],!0),e.adFeedbackInserted=!0},ng=function(){const e=(0,Xs.Wj)(this);if("launch"!==e.source)return;let t=[{parent:"container",name:"appInfo"},{parent:"adMedia",name:"feedbackContent"},{parent:"adMedia",name:"feedbackMenu"},{parent:"adMedia",name:"close"},{parent:"container",name:"closeTips"}];"landscape"===e.crtOrientation&&(t=t.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"},{parent:"adMedia",name:"adButtonContainer"}])),(a.wZ||cf>0)&&(t.push({parent:"adMedia",name:"topBar"}),e.adFeedbackInserted=!0),e.showInfo.isGame&&t.push({parent:"appInfo",name:"gameTips"}),qf.call(this,t,!0),(0,Xp.fy)({state:0}),Ko._w.layout().then((()=>{(0,Xp.fy)({state:1}),Ko._w.auto=!0})).catch((t=>{s.Z.onReady((()=>{e.adProxy.reportAdMonitorData(xp.ET.secondInsertFail,{source:e.source,msg:t})}))}))},ig=function(){const e=(0,Xs.Wj)(this);uf=Math.max(160,160*af/812),lf=af-uf,e.adMedia.style.width=of,e.adMedia.style.height=lf;const t=9*af/16;e.adMaterial.style.width=t,e.adMaterial.style.height=af,e.adMaterial.style.left=t>of?(of-t)/2:0,"portrait"===e.crtOrientation?e.adMaterial.src=_f:"landscape"===e.crtOrientation&&(e.adMaterialBg.style.hidden=!1,e.adMaterialContainer.style.hidden=!1,e.adMaterial.style.width=of,e.adMaterial.style.height=lf,e.adMaterial.style.left=0,e.adMaterialContainer.style.width=of,e.adMaterialContainer.style.height=lf,e.adMaterial.src=yf,e.adMaterialBg.style.width=.45*af*16/9,e.adMaterialBg.style.height=.45*af,e.adMaterialBg.style.left=-(.45*af*16/9-of)/2,e.adMaterialLandscape.style.width=of/375*311,e.adMaterialLandscape.style.height=of/375*175,e.adMaterialBg.src=_f,e.adMaterialLandscape.src=_f,e.adCardInfo.style.width=of/375*311,e.adCardInfo.style.marginLeft=8),e.adMaterial.scale=af/1920},rg=function(e){var t;const n=(0,Xs.Wj)(this);if(n.showInfo=e,n.source=e.source,n.isDarkMode=e.isDarkMode||!1,e.isGame&&(pf=e.isGame),of=e.screenWidth,af=e.screenHeight,null!=n&&null!==(t=n.data)&&void 0!==t&&t.adDynamicList){const{root:t}=Js()('\n  <view id="container">\n  </view>\n');rp.call(this,t,Kp),n.isDynamic=!0,Vf.call(this,e.source)}else rp.call(this,rf,ef),ig.call(this);if(n.container.style.width=of,n.container.style.height=af,n.container.style.backgroundColor=n.isDarkMode?"#191919":"#ffffff",Ko._w.add(n.container),!n.isDynamic)try{Xp.fs.access({path:vf,success:()=>{n.adMaterialBg.src=vf}})}catch(e){}let i=[];"menu"!==n.source||n.isDynamic||(eg.call(this),i=[{parent:"container",name:"card"},{parent:"adMedia",name:"mediaBottom"}],"landscape"===n.crtOrientation&&(i=i.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"}])),n.navigator.style.hidden=!1,qf.call(this,i,!0)),(0,Xp.Ae)({state:0}),Ko._w.layout().then((()=>{if(n.firstInserted=!0,n.isShowed=!0,(0,Xp.Ae)({state:1}),"launch"!==n.source||n.isDynamic)Ko._w.auto=!0,n.container.requestLayout();else try{ng.call(this)}catch(e){s.Z.onReady((()=>{n.adProxy.reportAdMonitorData(xp.ET.secondRenderFail,{source:n.source,msg:e})}))}})).catch((e=>{s.Z.onReady((()=>{n.adProxy.reportAdMonitorData(xp.ET.firstInsertFail,{source:n.source,msg:e})}))}))},og=function(e,t={},n,i){const r=(0,Xs.Wj)(this),o=hf+xp.c3[i],a=xp.ET[i];return s.Z.onReady((()=>{var n;r.adProxy.reportAdMonitorData(a,t),r.adProxy.reportTimePoints({slotid:xp.DX[r.adType],costtype:null!==(n=r.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,splash_instance_id:e.instanceId,errCode:o,scene:e.scene,extInfo:t})})),(0,Xp.mQ)({adCallTime:Date.now(),errCode:o,show:!1,eventReceivedTime:n.startInit,cgiFetchStart:n.startFetchTime||0,cgiFetchCallBack:n.fetchCallbackTime||0})};class ag extends Xs.wA{constructor(){super();const e=(0,Xs.Wj)(this);e.canShowed=!1,e.today=(0,Op.Cy)(),e.countTimer=null,e.componentsRenderred=!1,e.isShowed=!1,e.firstInserted=!1,e.adFeedbackInserted=!1,e.isDynamic=!1,e.isShowedExposureReported=!1,e.startExposureTime=0,e.isViewableExposureReported=!1,e.isCheckAdRequest=!0,e.clickCount=0,e.lastLandingTime=0,e.lastJsapiName="",e.lastJsapiStatus=0,e.lastJsapiCostTime=0,e.isLandingPage=!1,e.landingPageCostTime=0,e.hideTime=0,e.hideDuration=0,e.isClosing=!1,e.isShowCloseTip=!1,e.clickFirstGradeTime=0,e.eventsMap={},e.source="",e.crtOrientation="portrait",e.adType="splashAd",e.adProxy=new ip.FF({adUnitId:"",adType:e.adType}),e.dynamicElems={},e.dynamicEmitter=null,e.tplComponent=null,(0,np.vl)((t=>{"close"===t.buttonType&&"launch"===t.source?(xf.call(this,10),Mf.call(this,["countTimer"])):"close"===t.buttonType&&"menu"===t.source?xf.call(this,14):"back"!==t.buttonType||"menu"!==t.source||e.isLandingPage?"menu"===t.buttonType&&Df.call(this,1):xf.call(this,15)})),(0,np.vj)((t=>{if(t.menuViewFrame&&("launch"===t.source?(cf=t.menuViewFrame.y||0,e.dynamicEmitter&&e.isDynamic&&e.tplComponent&&cf&&e.tplComponent.emitComponentEvent(Qp._d.SPLASHADMENUVIEW,{countdownTop:cf})):"menu"===t.source&&(sf=t.menuViewFrame.height||0,e.dynamicEmitter&&e.isDynamic&&e.tplComponent&&sf&&e.tplComponent.emitComponentEvent(Qp._d.SPLASHADMENUVIEW,{navHeight:sf,menuHeight:172-sf})),a.cj&&e.firstInserted&&!e.adFeedbackInserted))try{tg.call(this)}catch(t){s.Z.onReady((()=>{e.adProxy.reportAdMonitorData(xp.ET.iosThirdInsertFail,{source:e.source,msg:t})}))}})),(0,np.Pp)((()=>{e.adProxy.setTimePoint("p5"),"launch"!==e.source||e.isDynamic||(eg.call(this),Gf.call(this)),Xf.call(this),Kf.call(this),e.hideTime>0&&(e.hideDuration=+new Date-e.hideTime),Pf.call(this),"launch"===e.source&&e.isShowedExposureReported&&jf.call(this),e.isLandingPage&&(e.isLandingPage=!1)})),(0,np.EJ)((()=>{e.hideTime=+new Date,Mf.call(this,["countTimer"])})),(0,np.BZ)((()=>{ff||(ff=!0),a.cj&&e.startExposureTime>0&&+new Date-e.startExposureTime>1e3&&Pf.call(this,!0),e.container&&(e.isDynamic&&(e.tplComponent&&(0,ap.vE)(e.tplComponent),e.dynamicElems={},e.dynamicEmitter=null,e.tplComponent=null),Ko._w.remove(e.container)),Lf.call(this)}))}otherAdsEmitFetch(){Uf.call(this)}show(e){gf=!0;const t=(0,Xs.Wj)(this);t.showInfo=e,t.adProxy.scene=e.scene,t.adProxy.setTimePoint("p14");const n=t.adProxy.getTimePoint("p14");if(s.Z.onReady((()=>{setTimeout((()=>{const n="launch"===e.source?xp.ET.launchAcceptShouldShow:xp.ET.menuAcceptShouldShow;t.adProxy.reportAdMonitorData(n)}),wf)})),"launch"!==e.source)return this.showDetail(e);const i={};try{const e=Xp.fs.readFileSync(Af,"utf-8");i.adInfos=e||{},t.adInfos=JSON.parse(e)}catch(e){t.adInfos={},i.errMsg=t.adProxy.processStackMsg(e),i.fileName=Af}if(0===Object.keys(t.adInfos).length)hf=1e4,df=xp.c3.NO_ADINFOS,this.showAdByRealtimeFetch(e,n);else{var r;s.Z.onReady((()=>{setTimeout((()=>{t.isCheckAdRequest&&(t.adFetchResult=Ff.call(this).catch((()=>{})))}),wf)}));const i=t.adInfos.ads||[];(null===(r=t.adInfos)||void 0===r?void 0:r.isCheckAndFetch)||0?(hf=2e4,this.showAdByRealtimeFetch(e,n,i)):this.showAdByCheckAdsOnline(e,n),t.adDatas={};for(const e of i)try{const n=`${xp.Lq}/${e.aid}.txt`,i=Xp.fs.readFileSync(n,"utf-8"),r=JSON.parse(i);t.adDatas[e.aid]=r}catch(e){}}try{var o;const e=(null===(o=t.adInfos)||void 0===o?void 0:o.deviceInfo)||{};t.adProxy.setDeviceInfo(e)}catch(e){}}showAdByRealtimeFetch(e,t,n=[]){const i=(0,Xs.Wj)(this),r={gameAppId:e.appId,deviceOrientation:e.screenHeight>e.screenWidth?"portrait":"landscape",screenWidth:e.screenWidth,screenHeight:e.screenHeight,systemVersion:e.osVersion,wechatVersion:e.weixinVersion,SDKVersion:Sc.c,envVersion:e.osVersion,model:e.model,platform:e.osType,isWaGame:e.isGame,isIOS:a.cj,isAndroid:a.wZ,adNetworkType:e.networkType},o={weappEnterScene:e.scene,requestType:2,preloadAds:n};return i.adProxy.setTimePoint("p15"),s.Z.onReady((()=>{setTimeout((()=>{i.adProxy.reportAdMonitorData(xp.ET.START_CHECK_AD_STATUS)}),wf)})),Ff.call(this,r,o).then((t=>{s.Z.onReady((()=>{setTimeout((()=>{i.adProxy.reportAdMonitorData(xp.ET.CHECK_AD_STATUS_SUCCESS)}),wf)})),i.adProxy.setTimePoint("p16");let n=!1;"fetch"===i.adProxy.lastAdRespone&&(i.isCheckAdRequest=!1,i.data=t,i.adProxy.data=t,n=!0,hf=1e4===hf?1e4:3e4),this.showDetail(e,{aid:Number(t.aid)},n)})).catch((n=>(i.adProxy.setTimePoint("p16"),og.call(this,e,{msg:n},{startInit:t},"CHECK_AD_STATUS_ERROR"))))}showAdByCheckAdsOnline(e,t){const n=(0,Xs.Wj)(this),i=n.adInfos.requestInQueue&&"true"===n.adInfos.requestInQueue,r=JSON.stringify({weapp_enter_scene:e.scene||0}),o={slot_id:xp.DX[n.adType],publisher_appid:e.appId,network_type:xp.MC[e.networkType]||0,app_service_type:e.isGame?2:1,sdk_version:Sc.c,weixin_version:e.weixinVersion,os_version:e.osVersion,os_type:e.osType,model:e.model,ads:n.adInfos.ads||[],ext_check_ads_weapp:r};n.adProxy.setTimePoint("p15"),s.Z.onReady((()=>{setTimeout((()=>{n.adProxy.reportAdMonitorData(xp.ET.START_CHECK_AD_STATUS)}),1500)})),(0,Dp.G_)(o,i).then((t=>{s.Z.onReady((()=>{setTimeout((()=>{n.adProxy.reportAdMonitorData(xp.ET.CHECK_AD_STATUS_SUCCESS)}),1500)})),n.adProxy.setTimePoint("p16");const i=JSON.parse(t.rawData);this.showDetail(e,i)})).catch((i=>(n.adProxy.setTimePoint("p16"),og.call(this,e,{msg:i},{startInit:t},"CHECK_AD_STATUS_ERROR"))))}showDetail(e,t={aid:0},n=!1){var i=this;return Pn()((function*(){Ko._w.style.width=e.screenWidth,Ko._w.style.height=e.screenHeight,Ko._w.auto=!1;const r=(0,Xs.Wj)(i),o={startInit:r.adProxy.getTimePoint("p14"),startFetchTime:r.adProxy.getTimePoint("p15"),fetchCallbackTime:r.adProxy.getTimePoint("p16")},a=[],{aid:c}=t;if("launch"===e.source&&n){var l,u,d;const e=(null==r||null===(l=r.data)||void 0===l||null===(u=l.rerankingExtInfo)||void 0===u?void 0:u.material_hash)||"";_f=`${xp.Lq}/${c}_${e}.png`,yf=`${xp.Lq}/${c}_${e}_pure_color.png`,vf=`${xp.Lq}/${c}_${e}_blur.png`,a.push(_f),r.crtOrientation="portrait";const t=(null==r||null===(d=r.data)||void 0===d?void 0:d.crtInfo[0])||{};if(Object.keys(t).length>0){const{width:e,height:n}=t;r.crtOrientation=e>n?"landscape":"portrait"}"landscape"===r.crtOrientation&&a.push(yf)}else if("launch"!==e.source||n){if("menu"===e.source){var h,p;let e={};null!==(h=r.data)&&void 0!==h&&h.crtInfo&&r.data.crtInfo.length>0?[e]=r.data.crtInfo:null!==(p=r.data)&&void 0!==p&&p.crtInfo&&(e=r.data.crtInfo),Object.keys(e).length>0&&!r.crtOrientation&&(r.crtOrientation=r.data.crtInfo.width>r.data.crtInfo.height?"landscape":"portrait"),Df.call(i,2)}}else{var f,g,_,m;if(!c||"0"===c)return og.call(i,e,{adInfos:r.adInfos,checkAdStatus:t},o,"NO_AID");if(c&&null!=r&&null!==(f=r.adDatas)&&void 0!==f&&f[c]&&(r.data=r.adDatas[c],r.adProxy.data=r.adDatas[c]),r.crtOrientation=c?null==r||null===(g=r.adInfos)||void 0===g||null===(_=g.crtSizeMap)||void 0===_?void 0:_[c]:"",!r.crtOrientation)return og.call(i,e,{adInfos:r.adInfos,checkAdStatus:t},o,"CRT_ORIENTATION_NOT_SURE");const n=c?null==r||null===(m=r.adInfos)||void 0===m?void 0:m.materialHashMap[c]:"";mf=`${xp.Lq}/${c}.txt`,_f=`${xp.Lq}/${c}_${n}.png`,yf=`${xp.Lq}/${c}_${n}_pure_color.png`,vf=`${xp.Lq}/${c}_${n}_blur.png`,a.push(mf),a.push(_f),"landscape"===r.crtOrientation&&a.push(yf)}try{"launch"===e.source&&a.forEach((e=>{Xp.fs.accessSync(e)}))}catch(n){df=xp.c3.MATERIAL_NOT_READY;const a=r.adProxy.processStackMsg(n);let s=!1;if(r.data)try{yield r.adProxy.handleBulkSaveMaterials(r.data),s=!0}catch(e){}if(!s)return og.call(i,e,{adInfos:r.adInfos,checkAdStatus:t,msg:a},o,"MATERIAL_NOT_READY")}r.adProxy.setTimePoint("p17"),"launch"===e.source&&(0,Xp.mQ)({showMenu:!0,show:!0,errCode:df+hf,adCallTime:r.adProxy.getTimePoint("p17"),eventReceivedTime:o.startInit,cgiFetchStart:o.startFetchTime,cgiFetchCallBack:o.fetchCallbackTime,success:()=>{r.adProxy.setTimePoint("p18"),s.Z.onReady((()=>{r.adProxy.reportAdMonitorData(xp.ET.launchShowSplashAdSuccess)}))},fail:e=>{r.adProxy.setTimePoint("p18"),s.Z.onReady((()=>{r.adProxy.reportAdMonitorData(xp.ET.showSplashAdFail,{adInfos:r.adInfos,checkAdStatus:t,msg:e})})),Lf.call(i),r.container&&Ko._w.remove(r.container)}});try{r.adProxy.setTimePoint("p4"),rg.call(i,e)}catch(t){Bf.call(i,{source:e.source,animated:!1},19),Lf.call(i),s.Z.onReady((()=>{r.adProxy.reportAdMonitorData(xp.ET.firstRenderFail,{adInfos:r.adInfos,source:e.source,msg:t})}))}}))()}}var sg=n(8582);const cg=new jo.Z,lg="SHOW_REWARD",ug="HIDE_REWARD",dg={banner:"SHOW_BANNER","incentive-video":lg,grid:"SHOW_GRID"},hg={banner:"HIDE_BANNER","incentive-video":ug,grid:"HIDE_GRID"};class pg{constructor({adUnitId:e,adType:t="banner"}){this.adUnitId=e,this.adType=t}show(){const e=dg[this.adType];e&&cg.emit(e,{adUnitId:this.adUnitId})}hide(){const e=hg[this.adType];e&&cg.emit(e,{adUnitId:this.adUnitId})}on(e,t){cg.on(e,(e=>{e.adUnitId!==this.adUnitId&&t(e)}))}}const fg={container:{position:"absolute",hidden:!0,overflow:"hidden"},adFeedback:{hidden:!0,width:40,height:15,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2,color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:10},rectangle:{marginTop:2,marginRight:4,width:7.2,height:4.2},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},tag:{width:63,height:18,right:0,bottom:0,position:"absolute"},tagView:{hidden:!0,right:0,bottom:0,position:"absolute",flexDirection:"row"},tagBeforeContainer:{width:6,height:18,overflow:"hidden"},tagBefore:{width:12,height:24,borderRadius:6,backgroundColor:"rgba(0, 0, 0, 0.2)"},tagContent:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.2)"},tagMiniapp:{hidden:!0,width:11,height:12,marginRight:1},tagLabel:{height:18,lineHeight:18,color:"#ffffff",textAlign:"left",fontSize:11},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},gg={container:{flexDirection:"row",justifyContent:"space-between",position:"absolute",hidden:!0,overflow:"hidden",backgroundColor:"#ffffff"},appContainer:{flex:1,flexDirection:"column",backgroundColor:"#ffffff",alignItems:"center",paddingTop:12.5,paddingBottom:12.5},appIcon:{width:37,height:37,borderRadius:18.5},adFeedback:{hidden:!0,width:40,height:15,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2,color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",justifyContent:"center",alignItems:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:10},rectangle:{marginTop:2,marginRight:4,width:7.2,height:4.2},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:131,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:131,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},appName:{height:13,fontSize:11,lineHeight:13,color:"#888888",marginTop:5,marginBottom:15,textAlign:"center"},appButton:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadButton:{width:60,height:27,hidden:!0},downloadButtonText:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},_g={1:function(e,t){const n=yg(e.id);let i='<text id="{id}" value="{value}" bubble-event="true"></text>';i=vg(i,"id",n),i=vg(i,"value",e.content);const r={};r[n]={position:"absolute",overflow:"hidden",left:e.left,top:e.top,width:e.width,height:e.height,fontSize:e.font_size,lineHeight:e.line_height,fontWeight:e.font_weight||"normal",color:e.font_color||"#000000",textAlign:e.align||"left",lineBreak:1==e.nowrap?"clip":"break-word"};return{widgetTmpl:i,widgetStyle:r,scaleDoms:[n]}},2:function(e,t){const n=yg(e.id);let i='<image id="{id}" src="{src}" bubble-event="true"></image>';i=vg(i,"id",n),i=vg(i,"src",e.image_url);const r={};r[n]={position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height};return{widgetTmpl:i,widgetStyle:r,scaleDoms:[n]}},3:function(e,t){},4:function(e,t){let n='\n  <view id="downloadButton" click-state="true">\n    <text id="downloadButtonText" value="{value}" bubble-event="true"></text>\n    <text id="downloadProgress" bubble-event="true">\n      <text id="downloadProgressText" bubble-event="true"></text>\n    </text>\n  </view>\n  <text id="appButton" value="{value}" click-state="true"></text>\n';n=vg(n,"value",e.title);return{widgetTmpl:n,widgetStyle:{appButton:{position:"absolute",textAlign:"center",left:e.left,top:e.top,width:e.width,height:e.height,lineHeight:e.height,fontSize:e.font_size,color:e.font_color||"#000000",fontWeight:e.font_weight||"normal",backgroundColor:e.background_color||"transparent",borderColor:e.border_color||"transparent",borderWidth:1,borderRadius:e.border_radius},downloadButton:{position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height,hidden:!0},downloadButtonText:{width:e.width,height:e.height,lineHeight:e.height,textAlign:"center",fontSize:e.font_size,color:e.font_color||"#04be02",borderWidth:1,borderColor:e.border_color||"#04be02",borderRadius:e.border_radius,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:e.width,height:e.height,lineHeight:e.height,textAlign:"center",fontSize:e.font_size,color:"#ffffff",borderWidth:1,borderColor:e.border_color||"#04be02",borderRadius:e.border_radius,backgroundColor:e.border_color||"#04be02"}},scaleDoms:["appButton","downloadButton","downloadButtonText","downloadProgress","downloadProgressText"]}},5:function(e,t,n){const i=yg(e.id),r=yg(e.id),o=yg(e.id);let a='\n  <view id="{wrapId}" bubble-event="true">\n    <image id="{headerId}" src="{header}" bubble-event="true"></image>\n    <text id="{labelId}" value="{label}" bubble-event="true"></text>\n  </view>\n';a=vg(a,"wrapId",i),a=vg(a,"headerId",r),a=vg(a,"header",e.head_url),a=vg(a,"labelId",o),a=vg(a,"label",e.nick_name);const s={},c=120/690*n.width;s[i]={position:"absolute",left:e.left,top:e.top,width:c,overflow:"hidden",flex:1,flexDirection:"column",alignItems:"center"};const l=70/690*n.width;s[r]={width:l,height:l,borderRadius:1==e.head_type?l/5:l/2,marginBottom:10/690*n.width};const u=24/690*n.width;s[o]={fontSize:u,color:"#888888",width:c,height:u+5,lineHeight:u+5,textAlign:"center",lineBreak:"ellipsis"};return{widgetTmpl:a,widgetStyle:s,scaleDoms:[i,r,o]}},6:function(e,t){const n=yg(e.id),i=yg(e.id),r=yg(e.id),o=yg(e.id),a=yg(e.id);let s='\n  <view id="{tagViewId}" bubble-event="true">\n    <image id="{tagBeforeId}" bubble-event="true" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJD1yfAwp8hgm1whMrNszgO3SgLoE6tlNzpKQQm4ubB6PeOLWL30sIWR7Sfsiakp1Ouw/0?wx_fmt=png"></image>\n    <view id="{tagContentId}" bubble-event="true">\n      <image id="{tagMiniappId}" bubble-event="true" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJD1yfAwp8hgmCKiaGzo9XUvxlDiaibHqzSO9BqvH74E0m5ibptJHaMAxicKvxXmM4LjMicaA/0?wx_fmt=png"></image>\n      <text id="{tagLabelId}" value="{label}" bubble-event="true"></text>\n    </view>\n  </view>\n';s=vg(s,"tagViewId",n),s=vg(s,"tagBeforeId",i),s=vg(s,"tagContentId",r),s=vg(s,"tagMiniappId",o),s=vg(s,"tagLabelId",a),s=vg(s,"label",e.watermark_text);const c={};c[n]={right:0,bottom:0,position:"absolute",flexDirection:"row"},c[i]={width:14,height:18},c[r]={flexDirection:"row",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.6)"},c[o]={hidden:1==e.watermark_icon,width:11,height:12,marginRight:1},c[a]={width:11*e.watermark_text.length+6,height:18,lineHeight:18,color:"#ffffff",textAlign:"left",fontSize:11};return{widgetTmpl:s,widgetStyle:c,scaleDoms:[]}}};let mg=1;const yg=function(e){return["wdgt",e,mg++].join("__")},vg=function(e,t,n){return e.replace(RegExp(`\\{${t}\\}`,"gi"),n)},Ag={adFeedback:{width:46,height:15,backgroundColor:"rgba(40, 40, 40, 0.6)",borderRadius:12,"ios-portrait":{borderRadius:7},"ios-landscape":{borderRadius:7},"iphone x-portrait":{borderRadius:7},"iphone x-landscape":{borderRadius:7},color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",alignItems:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:11,left:4,top:1.5,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5},position:"absolute"},rectangle:{top:7,left:32,width:7.2,height:4.2,position:"absolute"},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},bg=n(9536),{root:wg}=bg('\n  <image id="container" click-state="false">\n    <view id="ad-feedback" click-state="true">\n        <text id="ad-text" value="广告" click-state="true" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n        <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <text id="ad-close-btn" click-state="true" value="关闭"></text>\n      <view id="ad-close-btn-line-dislike"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n      <view id="ad-close-btn-line-affect"></view>\n      <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line0"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n    <image id="tag" bubble-event="true"></image>\n    <view id="tagView" bubble-event="true">\n      <view id="tagBeforeContainer">\n        <view id="tagBefore" bubble-event="true"></view>\n      </view>\n      <view id="tagContent" bubble-event="true">\n        <image id="tagMiniapp" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/mini_program_v2.png"></image>\n        <text id="tagLabel" value="" bubble-event="true"></text>\n      </view>\n    </view>\n    <view id="ad-close-tip">\n      <view id="ad-close-tip-wrap">\n        <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n        <view id="ad-close-tip-text" bubble-event="true">\n          <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n          <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n        </view>\n      </view>\n    </view>\n  </image>\n'),{root:Eg}=bg('\n  <view id="container" click-state="true">\n    <image id="app-icon" bubble-event="true"></image>\n    <view id="app-information" bubble-event="true">\n      <text id="app-name" bubble-event="true"></text>\n      <text id="app-wording" bubble-event="true"></text>\n    </view>\n    <text id="app-button" click-state="true"></text>\n  </view>\n'),{root:Tg}=bg('\n  <view id="container" click-state="false">\n    <image id="image" bubble-event="true">\n        <view id="ad-feedback" click-state="true">\n            <text id="ad-text" value="广告" click-state="true" bubble-event="true"></text>\n            <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n            <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n        </view>\n        <view id="ad-feedback-list">\n          <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n          <text id="ad-close-btn" click-state="true" value="关闭"></text>\n          <view id="ad-close-btn-line-dislike"></view>\n          <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n          <view id="ad-close-btn-line-affect"></view>\n          <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n        </view>\n        <view id="ad-feedback-menu">\n          <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n          <view id="ad-close-btn-line"></view>\n          <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n          <view id="ad-close-btn-line0"></view>\n          <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n        </view>\n    </image>\n    <view id="app-container" bubble-event="true">\n      <image id="app-icon" bubble-event="true"></image>\n      <text id="app-name" bubble-event="true"></text>\n      <view id="download-button" click-state="true">\n        <text id="download-button-text" bubble-event="true"></text>\n        <text id="download-progress" bubble-event="true">\n          <text id="download-progress-text" bubble-event="true"></text>\n        </text>\n      </view>\n      <text id="app-button" click-state="true"></text>\n    </view>\n    <view id="ad-close-tip">\n      <view id="ad-close-tip-wrap">\n        <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n        <view id="ad-close-tip-text" bubble-event="true">\n          <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n          <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n');let Sg=0,Cg=0;const Ig=a.iw,xg=a.cj,Dg=a.wZ;let Og={},Pg=[],Rg=!0;s.Z.onReady((()=>{const e=(0,ve.Ew)();if(Sg=e.screenWidth,Cg=e.screenHeight,Rg=(0,p.aI)(),Rg){const e=n(1627).Z;e.onTouchStart((e=>{e&&e.changedTouches&&e.changedTouches.length>0&&(Og={},Og.touchStartPosX=Math.round(e.changedTouches[0].clientX),Og.touchStartPosY=Math.round(e.changedTouches[0].clientY),Og.touchEndPosX=0,Og.touchEndPosY=0,Og.touchStartTime=+new Date,Og.touchInterval=0)})),e.onTouchEnd((e=>{e&&e.changedTouches&&e.changedTouches.length>0&&(Og.touchEndPosX=Math.round(e.changedTouches[0].clientX),Og.touchEndPosY=Math.round(e.changedTouches[0].clientY),Og.touchInterval=+new Date-Og.touchStartTime,Pg.length>=10&&Pg.shift(),Pg.push(Og))}))}}));const kg=1e3,Ng=1,Mg=2,Lg=3,Bg=function(e){return $g.call(this).then((()=>{const t=(0,Xs.Wj)(this),{left:n,top:i,width:r,height:o}=t.container.layoutBox,a={slotid:8040321819858439,ScreenHeight:Cg,ScreenWidth:Sg,PageY:i,PageX:n,costtype:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,TimeMs:+new Date};return e=Object.assign({},a,e),t.adProxy.reportAbnormalDetect(e)}))},Fg=function(e,t=!0){const n=(0,Xs.Wj)(this).adProxy.isTriggerClick(e),i=n?0:1;return t&&Kg.call(this,e,i),n},Ug=function(e){const t=(0,Xs.Wj)(this),{left:n,top:i,width:r,height:o}=t.container.layoutBox;let a=!1,s=0;t.adProxy.isValidCondition("widget_gray_time_limit")&&(s=100*(t.data.condition.widget_gray_time_limit||1)),s>0&&+new Date-t.showedExposureTime<s&&(a=!0,t.adProxy.reportAdMonitorData(48));let c=0;t.adProxy.isValidCondition("widget_gray_banner_limit_click")&&(c=100*(t.data.condition.widget_gray_banner_limit_click||5)),c>0&&+new Date-t.lastShowTime<c&&(a=!0,t.adProxy.reportAdMonitorData(155));let l=0;return t.adProxy.isValidCondition("widget_gray_bd_limit")&&(l=t.data.condition.widget_gray_bd_limit||10),e&&l>0&&(e.absoluteEndX-n<l||n+r-e.absoluteEndX<l||e.absoluteEndY-i<l||i+o-e.absoluteEndY<l)&&(a=!0,t.adProxy.reportAdMonitorData(47)),a},Wg=function(e,t={}){const n=(0,Xs.Wj)(this),{antifraudPopup:i}=n.data;if(n.clickTime=Date.now(),i)return jg.call(this,e,t);Gg.call(this,e,t)},jg=function(e,t={}){const n=(0,Xs.Wj)(this);c_.call(this),(0,Oe.I6)({content:"即将打开广告详情页",confirmText:"打开",success:i=>{i.confirm?(Gg.call(this,e,t,1),e_.call(this,e,{buttonType:1,buttonTime:Date.now()}),n.adProxy.reportAdMonitorData(176)):i.cancel&&(t_.call(this,e,2),e_.call(this,e,{buttonType:2,buttonTime:Date.now()}),s_.call(this),n.adProxy.reportAdMonitorData(177)),n.adProxy.reportAdMonitorData(174)},fail:()=>{Gg.call(this,e,t),e_.call(this,e,{buttonType:0,buttonTime:Date.now()}),n.adProxy.reportAdMonitorData(175)}})},Gg=function(e,t={},n=0){const i=(0,Xs.Wj)(this),{product_type:r,button_action:{jump_type:o}}=i.data;xg&&46===r&&6===o?Promise.race([t_.call(this,e,n),(0,op.Vs)(500)]).then((()=>{r_.call(this,t)})).catch((()=>{r_.call(this,t)})):(t_.call(this,e,n),r_.call(this,t))},Vg=function(){const e=(0,Xs.Wj)(this),{outer:t,inner:n,scale:i}=i_.call(this),{crt_size:r,use_style_data:o,ad_style_data:a,dest_type:s,product_type:c}=e.data;if(o){const{template:t,style:n,scaleDoms:r}=function(e){let t="",n={container:{hidden:!0,position:"absolute",overflow:"hidden",backgroundColor:e.background_color||"#FFFFFF",width:e.width,height:e.height}},i=[];return t+='<view id="container" click-state="false">',e.widgets.forEach(((r,o)=>{const a=_g[r.type];if(a){const{widgetTmpl:s,widgetStyle:c,scaleDoms:l}=a(r,o,e);t+=s,n=Object.assign(n,c),i=i.concat(l)}})),t+='\n  <view id="adFeedback" click-state="true">\n    <text id="adText" value="广告" click-state="true" bubble-event="true"></text>\n    <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n    <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <text id="ad-close-btn" click-state="true" value="关闭"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    <view id="ad-close-btn-line-affect"></view>\n    <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line0"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="ad-close-tip">\n    <view id="ad-close-tip-wrap">\n      <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n      <view id="ad-close-tip-text" bubble-event="true">\n        <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n        <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n      </view>\n    </view>\n  </view>\n',n=Object.assign(n,Ag),t+="</view>",{template:t,style:n,scaleDoms:i}}(a),{root:o}=bg(t);rp.call(this,o,n),e.scaleDoms=r,e.scaleDoms.forEach((t=>{e[t].style.scale=i})),e.appButton&&([12,19].indexOf(c)>-1?zg.call(this):e.appButton.on("click",(e=>{if(Fg.call(this,e)&&!Ug.call(this,e))return Wg.call(this,e,{isButton:!0})}))),e.container.on("click",(e=>{if(Fg.call(this,e)&&!Ug.call(this,e))return Wg.call(this,e)}))}else if([532,608,567].indexOf(r)>-1){rp.call(this,wg,fg);const{image:{src:t,width:n,height:i},watermark_text:r}=e.data;e.container.src=t,e.tag.style.hidden=!0,e.tagView.style.hidden=!1,e.tagLabel.value=r,e.tagLabel.style.width=11*e.data.watermark_text.length+6,6===e.adProxy.data.dest_type&&(e.tagMiniapp.style.hidden=!1),12===c&&(e.adProxy.setAppInstallState(!1),Yg.call(this)),e.container.on("click",(e=>{if(!Fg.call(this,e))return;if(Ug.call(this,e))return;return Wg.call(this,e,3===s?{toOfficalAccountDetail:!0}:{})}))}else if(556==r){if([12,19].indexOf(c)>-1){rp.call(this,Tg,gg);const{width:t,image:{src:n,width:r,height:o},appInfo:{appName:a,apkName:s,apkUrl:c,appMd5:l,iconUrl:u,urlScheme:d,versionCode:h,channelId:p}}=e.data;e.image.style.width=239,e.image.style.height=120,e.image.src=n,e.appIcon.src=u,e.appName.value=(0,op.$G)(a,16),e.appName.style.width=t-r,e.image.style.scale=i,e.appContainer.style.scale=i,e.appIcon.style.scale=i,e.appIcon.style.borderRadius=4,e.appName.style.scale=i,e.downloadButtonText.style.scale=i,e.downloadProgress.style.scale=i,e.downloadProgressText.style.scale=i,e.downloadButton.style.scale=i,zg.call(this)}else{rp.call(this,Tg,gg);const{width:t,image:{src:n,width:r,height:o},app:{icon:a,isFollowed:s,nickname:l},button_action:u,wording:d}=e.data;e.image.style.width=239,e.image.style.height=120,e.image.src=n,e.appIcon.src=a,e.appName.value=(0,op.$G)(l,16),e.appName.style.width=t-r,e.image.style.scale=i,e.appContainer.style.scale=i,e.appIcon.style.scale=i,e.appName.style.scale=i,e.appButton.style.scale=i,e.appButton.value=23==c&&s?"查看":u.button_text,e.appButton.on("click",(e=>{Fg.call(this,e)&&(Ug.call(this,e)||(t_.call(this,e),c_.call(this),r_.call(this,{isButton:!0})))}))}e.container.on("click",(e=>{if(Fg.call(this,e)&&!Ug.call(this,e))return Wg.call(this,e)}))}e.container||e.adProxy.reportAdMonitorData(7)},Hg=function(){const e=(0,Xs.Wj)(this);try{const{left:t,top:n}=this.style,{outer:i,inner:r,scale:o}=i_.call(this),{type:a}=e.data;Vg.call(this),e.adFeedback.style.hidden=!1,e.adFeedback.on("click",(t=>{Fg.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!e.adFeedbackMenu.style.hidden||!e.adFeedbackList.style.hidden,e.adFeedbackMenu.style.hidden=!0,e.adFeedbackList.style.hidden||Jg.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),e.adFeedbackBtn.on("click",(t=>{if(!Fg.call(this,t,!1))return;e.adProxy.openFeedbackUrl(1002);e.adFeedbackList.style.hidden=!0,Jg.call(this,{secondGradeId:1,secondGradeDesc:"投诉"})})),e.adCloseBtn.on("click",(t=>{Fg.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,Qg.call(this))})),e.adDislikeBtn.on("click",(t=>{Fg.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!1,Qg.call(this,2,"不感兴趣"))})),e.adQualityBtn.on("click",(t=>{Fg.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,Qg.call(this,2,"不感兴趣",4))})),e.adDuplicateBtn.on("click",(t=>{Fg.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,Qg.call(this,2,"不感兴趣",5))})),e.adDismatchBtn.on("click",(t=>{Fg.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,Qg.call(this,2,"不感兴趣",1))})),e.adAffectBtn.on("click",(t=>{Fg.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,Qg.call(this,3,"影响操作"))})),e.adProxy.isValidCondition("widget_gray_close_v2")?(e.adCloseBtnLineDislike.style.hidden=!1,e.adCloseBtnLineAffect.style.hidden=!1,e.adDislikeBtn.style.hidden=!1,e.adAffectBtn.style.hidden=!1,e.rectangle.style.hidden=!1,e.rectangleClose.style.hidden=!0,e.adCloseBtn.style.hidden=!0,qg.call(this)):(e.adFeedbackList.style.height=64,e.adCloseBtnLine.style.hidden=!1,e.adCloseBtn.style.hidden=!1),e.adProxy.preloadLanding(),e.container.style.left=t,e.container.style.top=n,e.container.style.width=r.width,e.container.style.height=r.height,e.adCloseTip.style.width=r.width,e.adCloseTip.style.height=r.height,Ko.uo.add(e.container),e.emitter.emit("load"),e.container.ready().then((()=>{(0,op.cM)("container 及其子元素 ready"),e.emitter.emit("ready")})).then((()=>{Bg.call(this,{type:1})}))}catch(t){return e.adProxy.reportAdMonitorData(6,t),Promise.reject({})}},zg=function(){const e=(0,Xs.Wj)(this),{appInfo:{appName:t,apkName:n,apkUrl:i,appMd5:r,iconUrl:o,urlScheme:a,versionCode:s,channelId:c}}=e.data;e.downloadButton.style.hidden=!1,e.appButton.style.hidden=!0,xg?(e.downloadButtonText.value=e.data.button_action.button_text,e.downloadButton.on("click",(e=>{if(Fg.call(this,e)&&!Ug.call(this,e))return Wg.call(this,e,{isButton:!0})}))):Dg&&(e.downloadButtonText.value=e.downloadProgressText.value=e.data.button_action.button_text,Yg.call(this),e.downloadButton.on("click",(o=>{if(!Fg.call(this,o))return;if(Ug.call(this,o))return;t_.call(this,o);const{aid:s,traceid:c,apurl:l}=e.adProxy.data;let u=0,d="";if(e.landingCount++,e.lastLandingTime=+new Date,e.lastJsapiStatus=0,e.lastJsapiCostTime=0,4==e.androidAppState)e.adProxy.launchApplication(a).catch((e=>{})),e.lastJsapiName="launchApplication",e.isLandingPage=!0;else if(0==e.androidAppState){const o=[s,c,n.replace(/./g,"_"),0,20,l.indexOf("ad.wx.com")>-1?1:0].join(".");e.adProxy.addDownloadTaskStraight(t,i,r,o).then((t=>{c_.call(this),e.androidDownloadId=t.downloadId,setTimeout(Zg.bind(this),kg)})).catch((e=>{r_.call(this,{isButton:!0})})),e.lastJsapiName="addDownloadTaskStraight",u=4,d="下载"}else e.androidAppState==Ng?(e.adProxy.pauseDownloadTask(e.androidDownloadId).catch((e=>{})),e.downloadButtonText.value=e.downloadProgressText.value="继续",e.androidAppState=Mg,e.lastJsapiName="pauseDownloadTask",u=5,d="暂停"):e.androidAppState==Mg?(e.adProxy.resumeDownloadTask(e.androidDownloadId).then((e=>{setTimeout(Zg.bind(this),kg)})).catch((e=>{})),e.downloadButtonText.value=e.downloadProgressText.value="暂停",e.androidAppState=Ng,e.lastJsapiName="resumeDownloadTask",u=6,d="继续"):e.androidAppState==Lg&&(e.adProxy.installDownloadTask(e.androidDownloadId).catch((e=>{})),e.lastJsapiName="installDownloadTask",u=7,d="安装");u>0&&e.adProxy.reportLandingTime({slotId:8040321819858439,costType:e.adProxy.data&&e.adProxy.data.is_cpm?1:2,openTime:e.lastLandingTime,clickTime:e.lastLandingTime,clkCnt:e.landingCount,jsapiName:e.lastJsapiName,actTypeInt:u,actTypeStr:d})})))},Zg=function(e=3){const t=(0,Xs.Wj)(this);t.adProxy.queryDownloadTask(t.androidDownloadId).then((e=>{"download_succ"===e.state?(t.downloadButtonText.value=t.downloadProgressText.value="安装",t.downloadProgress.style.width=t.downloadButton.style.width,t.androidAppState=Lg,s_.call(this)):"downloading"===e.state?(t.downloadButtonText.value=t.downloadProgressText.value="暂停",t.downloadProgress.style.width=t.downloadButton.style.width*parseInt(e.progress)/100,t.androidAppState=Ng):"download_fail"===e.state&&(t.downloadButtonText.value=t.downloadProgressText.value=t.data.button_action.button_text,t.downloadProgress.style.width=0,t.androidAppState=0,s_.call(this)),"downloading"!==e.state&&"default"!==e.state||setTimeout(Zg.bind(this),kg)})).catch((t=>{e>0&&Zg(--e)}))},Yg=function(){const e=(0,Xs.Wj)(this),{appInfo:{apkName:t,versionCode:n,urlScheme:i}}=e.data;e.adProxy.getInstallState(t).then((t=>{t.isInstalled&&(void 0===t.versionCode||t.versionCode>=n)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),e.downloadButtonText&&(e.downloadButtonText.value=e.downloadProgressText.value="已安装",i&&i.trim().length>0&&(e.downloadButtonText.value=e.downloadProgressText.value="进入")),e.tagLabel&&i&&i.trim().length>0&&(e.tagLabel.value="进入应用",e.tagLabel.style.width=50))})).catch((e=>{}))},$g=function(e){if(!e||"function"!=typeof e)return new Promise((e=>$g.call(this,e)));const t=(0,Xs.Wj)(this);t.isReady?e():t.emitter.on("ready",e)},qg=function(){const e=(0,Xs.Wj)(this);let{inner:t,scale:n}=i_.call(this);n=n<.8?.8:n;const i=347/120/(e.adProxy.data.ad_width/e.adProxy.data.ad_height);e.adFeedbackBtn.style.height=e.adDislikeBtn.style.height=e.adAffectBtn.style.height=e.adQualityBtn.style.height=e.adDuplicateBtn.style.height=e.adDismatchBtn.style.height=e.adFeedbackBtn.style.lineHeight=e.adDislikeBtn.style.lineHeight=e.adAffectBtn.style.lineHeight=e.adQualityBtn.style.lineHeight=e.adDuplicateBtn.style.lineHeight=e.adDismatchBtn.style.lineHeight=32*n*i,e.adFeedbackBtn.style.fontSize=e.adDislikeBtn.style.fontSize=e.adAffectBtn.style.fontSize=e.adQualityBtn.style.fontSize=e.adDuplicateBtn.style.fontSize=e.adDismatchBtn.style.fontSize=12*n*i,e.adFeedbackList.style.height=98*n*i,e.adFeedbackMenu.style.height=98*n*i},Qg=function(e,t,n=0){const i=(0,Xs.Wj)(this);i.isClosed=!0,i.lastClosedAction="",i.closeAdTime=+new Date,e?(Jg.call(this,{secondGradeId:e,secondGradeDesc:t,feedbackReason:n}),(2!==e||n)&&(0,op.Vs)(2e3).then((()=>{this.hide(),i.emitter.emit("close")}))):(Jg.call(this,{firstGradeId:0,firstGradeDesc:""}),this.hide(),i.emitter.emit("close"))},Jg=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:n=0,secondGradeDesc:i="",feedbackReason:r=0}){const o=(0,Xs.Wj)(this),{left:a,top:s,width:c,height:l}=o.container.layoutBox;e&&!n&&(o.clickFirstGradeTime=+new Date),o.adProxy.reportAdFeedbackData({adWidth:Math.round(c),adHeight:Math.round(l),adPosX:Math.round(a),adPosY:Math.round(s),expTime:o.showedExposureTime,slotId:8040321819858439,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?o.clickFirstGradeTime:0,secondGradeId:n,secondGradeDesc:i,secondGradeTime:n?+new Date:0,feedbackReason:r})},Xg=function(){(0,op.cM)("开始 update UI");const e=(0,Xs.Wj)(this),{left:t,top:n}=this.style,{inner:i,scale:r}=i_.call(this),{type:o,crt_size:a,product_type:s,use_style_data:c}=e.data;(0,op.cM)(this.style.width,this.style.height),(0,op.cM)("update UI",i),Object.assign(e.container.style,i,{left:t,top:n});let l=[];return c?l=e.scaleDoms:[532,608,567].indexOf(a)>-1?l=[]:556==a&&23==s?l=["image","appContainer","appIcon","appName","appButton"]:556==a&&[12,19].indexOf(s)>-1&&(l=["image","appContainer","appIcon","appName","appButton","downloadButton","downloadButtonText","downloadProgress","downloadProgressText"]),l.forEach((t=>{e[t].style.scale=r})),qg.call(this),e.container.nextUpdate().then((()=>((0,op.cM)("updateUI 完成"),Promise.resolve())))},Kg=function(e,t=0){const n=(0,Xs.Wj)(this);if(d_.call(this)||!n.container||!n.container.layoutBox)return;const{width:i,height:r}=n.container.layoutBox;let o=0;[0,2,3].includes(t)&&(n.clickCount++,o=n.clickCount);const a={slotid:8040321819858439,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:o,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(r,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(a)},e_=function(e,t={}){const n=(0,Xs.Wj)(this),{width:i,height:r}=n.container.layoutBox;return n.adProxy.reportPopupClickAction({buttonType:t.buttonType,buttonTime:t.buttonTime,adClkTime:n.clickTime,adExpTime:n.showedExposureTime,adClkX:parseInt(e.absoluteX,10)||0,adClkY:parseInt(e.absoluteY,10)||0,adWidth:parseInt(i,10)||0,adHeight:parseInt(r,10)||0,isGame:Rg?1:0,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2})},t_=function(e,t=0){const n=(0,Xs.Wj)(this);if(d_.call(this)||!n.container||!n.container.layoutBox)return;const{left:i,top:r,width:o,height:a}=n.container.layoutBox,s=Object.keys(Og).length?{pos_x:Og.touchStartPosX,pos_y:Og.touchStartPosY,time:Og.touchStartTime}:{pos_x:0,pos_y:0,time:0},c=n.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-i,clickRelativeTop:e.absoluteY-r,pressInterval:e.pressInterval,left:i,top:r,width:o,height:a,weappExtraData:{show_time:n.lastShowTime,last_click:s,popup_click_type:t}});return(0,op._u)(c,"banner","点击"),l_.call(this,{stage:1002}),Pg=Pg.map((e=>`[${[e.touchStartPosX,e.touchStartPosY,e.touchEndPosX,e.touchEndPosY,e.touchStartTime,e.touchInterval].join(",")}]`)),n.adProxy.reportBannerLastClick({lastClickArr:`[${Pg.join(",")}]`,expMs:n.showedExposureTime,clickMs:+new Date,bannerClkScreenX:e.absoluteX,bannerClkScreenY:e.absoluteY,left:i,top:r,width:o,height:a,lastShowTime:n.lastShowTime}),Pg=[],c},n_=function(e=!1){const t=(0,Xs.Wj)(this);if((0,op.cM)("检查曝光"),d_.call(this))return(0,op.cM)("已经销毁, 不再曝光"),Promise.resolve();if(!t.container.layoutBox)return(0,op.cM)("还没经过布局, 下一个 loop 再做"),(0,op.Vs)(0).then((()=>n_.call(this,e)));const{left:n,top:i,width:r,height:o}=t.container.layoutBox;if(i>Cg-1)return Promise.resolve();const a=!1===t.container.style.hidden;if(t.adProxy.isViewable=!!a,!t.isShowedExposureReported&&a){(0,op.cM)("原始曝光"),t.isShowedExposureReported=!0,t.showedExposureTime=+new Date;const e=t.adProxy.reportExposure({left:n,top:i,width:r,height:o,exposureType:"showed"});(0,op._u)(e,"banner","原始")}if(i+o/2<=Cg&&!t.isViewableExposureReported&&a){if(!e)return(0,op.cM)("可视曝光第 1 阶段, 需要 1 秒以后再次检验"),(0,op.Vs)(1e3).then((()=>n_.call(this,!0)));{(0,op.cM)("可视曝光第 2 阶段"),t.isViewableExposureReported=!0;const e=t.adProxy.reportExposure({left:n,top:i,width:r,height:o,exposureType:"viewable"});(0,op._u)(e,"banner","可视")}}return Promise.resolve()},i_=function(){const e=(0,Xs.Wj)(this);let{width:t,height:n,type:i,crt_size:r,use_style_data:o}=e.data;o?(t=t,n=n):532==r?(t=345,n=99):(608==r||567==r||556==r)&&(t=345,n=120);let{width:a,height:s}=this.style;o?(a=a||345,s=s||n/t*690/2):(a=a||t,s=s||n);const c=(0,op.XS)({outer:{width:a,height:s},inner:{width:t,height:n},minScale:300/t,maxScale:Sg/t,side:"width"}),l=e.lastRealWidth!==c.inner.width||e.lastRealHeight!==c.inner.height;return this.style.realWidth=e.lastRealWidth=c.inner.width,this.style.realHeight=e.lastRealHeight=c.inner.height,l&&e.emitter.emit("resize",c.inner),c},r_=function(e){const t=(0,Xs.Wj)(this);t.landingCount++,t.landingCount>1&&t.adProxy.reportRepeatClick({slotId:8040321819858439,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,clkCnt:t.landingCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName}),t.lastLandingTime=+new Date,t.lastJsapiStatus=2,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0;const n=t.adProxy.land(e);23==t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(n.then((e=>{const n=/ok/.test(e.errMsg);n&&(t.appButton.value="查看",t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),t.adProxy.reportAdIDKey({key:9})),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));const i=+new Date;t.lastJsapiStatus=0,t.lastJsapiCostTime=i-t.lastLandingTime,"private_addContact"==t.lastJsapiName&&t.adProxy.reportLandingTime({slotId:8040321819858439,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,openTime:t.lastLandingTime,closeTime:i,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.landingCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:n?2:3,actTypeStr:n?"关注":"取消"}),s_.call(this)})).catch((e=>{t.lastJsapiStatus=1})),o_.call(this,n)):n.then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==t.lastJsapiName||"navigateToMiniProgram"==t.lastJsapiName||"openADCanvas"==t.lastJsapiName||"launchApplication"==t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((e=>{t.lastJsapiStatus=1}))},o_=function(e){const t=(0,Xs.Wj)(this),n=e.then((e=>/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0)).catch((e=>t.adProxy.reportFollow({result:"fail"})));(0,op._u)(n,"banner","关注")},a_=function(e){if(d_.call(this))return;const t=(0,Xs.Wj)(this);t.isClosed||t.adProxy.fetch(e).then((e=>(t.data=e,$g.call(this).then((()=>{t.container.style.hidden=!0})).then((()=>(t.isReady=!1,Ko.uo.remove(t.container)))).then((()=>(t.isViewableExposureReported=!1,t.adProxy.isViewable=!1,t.isShowedExposureReported=!1,t.showedExposureTime=0,Hg.call(this),$g.call(this)))).then((()=>d_.call(this)||"hide"===t.lastClosedAction?$g.call(this):t.isHideBYCover?(t.lastDisplayAction="show",$g.call(this)):(t.isShow=!0,l_.call(this,{stage:1001}),Promise.resolve().then((()=>{t.container.style.hidden=!1,t.container.nextLayout((()=>n_.call(this))),s_.call(this)}))))).catch((e=>t.emitter.emit("_error",e)))))).catch((e=>t.emitter.emit("_error",e)))},s_=function(){const e=(0,Xs.Wj)(this);if(e.adIntervals>=30&&e.adIntervals<=3600){e.adTimer&&clearTimeout(e.adTimer);const t=1e3*e.adIntervals;e.adTimer=setTimeout((()=>a_.call(this,!0)),t)}},c_=function(){if(d_.call(this))return;const e=(0,Xs.Wj)(this);e.adTimer&&(clearTimeout(e.adTimer),e.adTimer=null)},l_=function({stage:e}){const t={adtype:1,stage:e};(0,Xs.Wj)(this).adProxy.reportADFunnelModel(t)},u_=function(){if(d_.call(this))return;const e=(0,Xs.Wj)(this);(0,op.cM)("destroy 调用"),c_.call(this),this._destroyed=!0,Bg.call(this,{type:2}),$g.call(this).then((()=>e.updateResult)).then((()=>{(0,op.cM)("UI update 完成, 正式开始 destroy"),(0,Uo.Tb)(e.checkAdState),(0,Uo.b$)(e.onHide),e.emitter.off("resize"),e.emitter.off("_error"),e.emitter.off("load"),Ko.uo.remove(e.container),(0,Xs.bn)(this)}))},d_=function(){return this._destroyed},h_="banner-ad has been destroyed";class p_ extends Xs.wA{constructor({adUnitId:e,style:t={left:0,top:0,width:0,height:0},adIntervals:n=0}={}){super();const i=(0,Xs.Wj)(this);i.emitter=new jo.Z,i.adProxy=new ip.FF({adUnitId:e,adType:"banner"}),i.androidAppState=0,i.androidDownloadId=0,i.clickTime=0,i.clickCount=0,i.landingCount=0,i.lastLandingTime=0,i.lastJsapiName="",i.lastJsapiStatus=0,i.lastJsapiCostTime=0,i.isLandingPage=!1,i.landingPageCostTime=0,i.hideTime=0,i.isShowedExposureReported=!1,i.isViewableExposureReported=!1,i.isReady=!1,i.isShow=!1,i.emitter.on("ready",(()=>i.isReady=!0)),i.isHideBYCover=!1,i.adCover=new pg({adUnitId:e,adType:"banner"}),i.adIntervals="number"==typeof n?n:0,i.adTimer=null,i.isClosed=!1,i.closeAdTime=0,i.showedExposureTime=0,i.lastShowTime=0,i.clickFirstGradeTime=0,i.adCover.on(lg,(()=>{d_.call(this)||$g.call(this).then((()=>{i.isShow&&!d_.call(this)&&(i.container.style.hidden=!0),i.isHideBYCover=!0,i.lastDisplayAction=""})).catch((e=>{}))})),i.adCover.on(ug,(()=>{d_.call(this)||$g.call(this).then((()=>{i.isShow&&!d_.call(this)&&(i.container.style.hidden=!1),i.isHideBYCover=!1,"show"==i.lastDisplayAction?this.show():"hide"==i.lastDisplayAction&&this.hide()})).catch((e=>{}))})),i.lastRealWidth=0,i.lastRealHeight=0,i.updateResult=Promise.resolve(),this.adUnitId=e,this.style={},this._destroyed=!1;let r=null;Object.keys(t).forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>t[e],set:n=>{d_.call(this)||n!==t[e]&&(t[e]=n,i.updateResult=new Promise((e=>{clearTimeout(r),r=setTimeout(e,0)})).then((()=>$g.call(this))).then((()=>Promise.all([Xg.call(this),i.container.nextLayout().then((()=>n_.call(this)))]))))}})})),this.style.realWidth=this.style.width,this.style.realHeight=this.style.height;const o=i.adProxy.fetch();o.catch((e=>i.emitter.emit("_error",e))),i.adFetchResult=o,i.adFetchResult.then((e=>{(i.emitter.emitter._events?Object.keys(i.emitter.emitter._events):[]).includes("_error")||"devtools"!==Ig?(i.data=e,Hg.call(this)):console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。")})),i.checkAdState=()=>{i.adFetchResult.then((()=>{if(i.appButton&&23==i.data.product_type?i.adProxy.checkFollow(i.data.app.uin).then((e=>{const{button_text:t}=i.data.button_action;i.appButton.value=e?"查看":t,i.adProxy.data.biz_info&&(i.adProxy.data.biz_info.is_subscribed=e?1:0)})):12===i.data.product_type&&Yg.call(this),i.isLandingPage){i.lastJsapiStatus=0,i.isLandingPage=!1;const e=+new Date;i.landingPageCostTime=e-i.hideTime,i.adProxy.reportLandingTime({slotId:8040321819858439,costType:i.adProxy.data&&i.adProxy.data.is_cpm?1:2,openTime:i.hideTime,closeTime:e,stayTime:i.landingPageCostTime,jsapiName:i.lastJsapiName,clickTime:i.lastLandingTime,clkCnt:i.landingCount,retCode:i.lastJsapiStatus,costTime:i.lastJsapiCostTime,actTypeInt:1})}})).then((()=>{!i.isShow||i.adTimer||[Ng,Mg,Lg].includes(i.androidAppState)||s_.call(this)})).catch((()=>{})),!d_.call(this)&&i.isClosed&&i.closeAdTime&&+new Date-i.closeAdTime>60*(i.data.condition.widget_gray_close_v2||3)*1e3&&$g.call(this).then((()=>{i.isClosed=!1,i.closeAdTime=0,a_.call(this)}))},(0,Uo.dN)(i.checkAdState),i.onHide=e=>{c_.call(this),i.hideTime=+new Date},(0,Uo.vv)(i.onHide)}show({branchId:e,branchDim:t}={}){if(d_.call(this))return Promise.reject({errMsg:h_});const n=(0,Xs.Wj)(this);return n.isClosed?(n.lastClosedAction="show",Promise.reject({errMsg:"banner-ad has been closed"})):n.isHideBYCover?(n.lastDisplayAction="show",$g.call(this)):(n.isShow=!0,n.lastShowTime=+new Date,l_.call(this,{stage:1001}),e?n.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):n.adProxy.resetAnalyseBranchInfo(),$g.call(this).then((()=>{n.adFeedbackList.style.hidden=!0,n.adFeedbackMenu.style.hidden=!0,n.container.style.hidden=!1,n.container.nextLayout((()=>n_.call(this))),s_.call(this)})))}hide(){if(d_.call(this))return;const e=(0,Xs.Wj)(this);return e.isClosed&&(e.lastClosedAction="hide"),e.isHideBYCover?(e.lastDisplayAction="hide",$g.call(this)):(e.isShow=!1,e.adProxy.isViewable=!1,$g.call(this).then((()=>{e.container.style.hidden=!0,c_.call(this)})))}destory(){u_.call(this)}destroy(){u_.call(this)}onResize(e){if(d_.call(this))return;(0,Xs.Wj)(this).emitter.on("resize",e)}offResize(e){if(d_.call(this))return;(0,Xs.Wj)(this).emitter.off("resize",e)}onError(e){if(d_.call(this))return;(0,Xs.Wj)(this).emitter.on("_error",e)}offError(e){if(d_.call(this))return;(0,Xs.Wj)(this).emitter.off("_error",e)}onLoad(e){if(d_.call(this))return;(0,Xs.Wj)(this).emitter.on("load",e)}offLoad(e){if(d_.call(this))return;(0,Xs.Wj)(this).emitter.off("load",e)}onClose(e){if(d_.call(this))return;(0,Xs.Wj)(this).emitter.on("close",e)}offClose(e){if(d_.call(this))return;(0,Xs.Wj)(this).emitter.off("close",e)}}var f_=n(6714);const g_={},__=function(e,t,n){g_.hasOwnProperty(e)||(g_[e]={}),g_[e][t]=n},m_=function(e,t){if(g_.hasOwnProperty(e))return g_[e][t]};var y_=n(4915);const v_=(0,l.s)("AppRouteDone"),A_=v_.internalOnMethod;v_.internalOffMethod;let b_;(0,es.n)("onAppRouteDone",((e,t=0)=>{y_.WZ.appRoute=!1,y_.WZ.appRouteDone=!0,(0,y_.R0)();let n="";De.Z.navigatorLock=!1,e.path&&(n=e.path,e.path=e.path.substring(0,e.path.length-5)),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==De.Z.lastOpenType&&(De.Z.lastRoute=e.path||""),v_.emit(e),(0,c.nY)("onAppRouteDone",{frameset:e.frameset},[t]),e.path,function(e,t){if(0===s.Z.appType&&e&&t&&!De.Z.navigationBarTitleMap[e]){let n="";s.Z.page[t]&&s.Z.page[t].window&&(0,P.HD)(s.Z.page[t].window.navigationBarTitleText)?n=s.Z.page[t].window.navigationBarTitleText:s.Z.global&&s.Z.global.window&&(0,P.HD)(s.Z.global.window.navigationBarTitleText)&&(n=s.Z.global.window.navigationBarTitleText),De.Z.navigationBarTitleMap[e]=n}}(e.path,n)})),function(e){e.REWARD_ENDPAGE_HEAD_IMG="REWARD_ENDPAGE_HEAD_IMG",e.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED="REWARD_ENDPAGE_WORDING_LOGO_ENHANCED",e.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED="REWARD_ENDPAGE_WORDING_TEXT_ENHANCED",e.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED="REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED",e.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED="REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_HEAD_IMG="REWARD_EXPAND_CARD_HEAD_IMG",e.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED="REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED="REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED="REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED="REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED",e.REWARD_OLD_ENDPAGE_BUTTON="REWARD_OLD_ENDPAGE_BUTTON",e.REWARD_TEMPLATE_AREA="REWARD_TEMPLATE_AREA",e.REWARD_PAGE_BUTTON="REWARD_PAGE_BUTTON",e.REWARD_PAGE_CARD="REWARD_PAGE_CARD",e.REWARD_PAGE_IMAGE="REWARD_PAGE_IMAGE",e.REWARD_CARD_BUTTON="REWARD_CARD_BUTTON",e.REWARD_CARD="REWARD_CARD",e.REWARD_DOWNLOAD="REWARD_DOWNLOAD",e.REWARD_DYNAMIC_CONTENT="REWARD_DYNAMIC_CONTENT",e.REWARD_DYNAMIC_BUTTON="REWARD_DYNAMIC_BUTTON"}(b_||(b_={}));const w_="REWARDED_DYNAMIC",E_={defaultPageHeadline:{flexDirection:"row"},defaultPageAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},defaultPageWordingWrapper:{marginTop:0,marginBottom:48,height:72},defaultPageAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},defaultPageAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},T_={expandCardHeadline:{flexDirection:"row"},expandCardAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},expandCardWordingWrapper:{marginTop:0,marginBottom:48,height:72},expandCardAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},expandCardAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},S_=Dn()(Dn()(Dn()(Dn()(Dn()(Dn()(Dn()({container:{rotate:0,position:"absolute",justifyContent:"center",alignItems:"center",overflow:"hidden",zIndex:1000002,hidden:!0},video:{padding:8,paddingBottom:16,flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",backgroundColor:"#ff0000",position:"absolute",bottom:0},blank:{width:1,height:1},cardContainer:{hidden:!0,position:"absolute",left:8,flexDirection:"column",alignSelf:"stretch",overflow:"hidden"},card:{hidden:!0,backgroundColor:"rgba(247, 247, 247, 0.95)",borderColor:"rgba(0, 0, 0, 0.08)",flexDirection:"row",alignItems:"center",borderRadius:8,portrait:{height:90,padding:16},landscape:{width:348,height:72,padding:10}},appIcon:{borderRadius:8,opacity:.95,portrait:{width:48,height:48,marginRight:10},landscape:{width:45,height:45,marginRight:6}},appInformation:{flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},appName:{height:22.5,lineHeight:22.5,marginBottom:5,fontSize:17,lineBreak:"ellipsis",color:"#000000",portrait:{marginBottom:5},landscape:{marginBottom:2}},appWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#888888",fontSize:14},button:{width:84,height:36,lineHeight:36,textAlign:"center",fontSize:16,color:"#ffffff",borderWidth:1,borderColor:"#07C160",borderRadius:4,marginLeft:8,backgroundColor:"#07C160"},downloadButton:{width:62,height:32,hidden:!0,marginLeft:10},downloadButtonText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},dialogContainer:{zIndex:1000007,position:"absolute",overflow:"hidden",top:0,left:0,hidden:!0},dialogMask:{position:"absolute",overflow:"hidden",backgroundColor:"#000000",opacity:.7,top:0,left:0},dialog:{position:"absolute",width:300,height:168,borderRadius:10,backgroundColor:"rgba(255, 255, 255, 1)"},dialogTitle:{marginTop:28,marginBottom:27,width:300,height:48,lineHeight:24,textAlign:"center",color:"#000000",fontSize:17,fontWeight:"bold",lineBreak:"break-all"},dialogSplit:{width:300,height:1,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogButton:{width:300,justifyContent:"center",flexDirection:"row",alignItems:"center"},buttonSplit:{width:1,height:63.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogClose:{marginTop:19,marginBottom:19,width:149.5,height:25,lineHeight:25,textAlign:"center",color:"#000000",fontWeight:"bold",fontSize:18},dialogCancel:{marginTop:19,marginBottom:19,width:150,height:25,lineHeight:25,textAlign:"center",color:"#576A94",fontWeight:"bold",fontSize:18},pageCardBody:{position:"absolute",hidden:!0,flexDirection:"column",alignItems:"center",height:340},pageCardHotArea:{flexDiretion:"cloumn",alignItems:"center",height:70},pageCardTipIcon:{hidden:!0,marginTop:33,width:20,height:6.5},pageCardTip:{marginTop:2,hidden:!0,width:52,height:20,lineHeight:20,fontSize:13,color:"#ffffff"},pageCardContainer:{borderRadius:10,flexDirection:"column",height:270},pageCard:{paddingLeft:15,paddingRight:15,flexDirection:"row",alignItems:"center",borderRadius:5,height:80},pageCardAppIcon:{borderRadius:10,opacity:.95,width:48,height:48},pageCardAppInformation:{paddingLeft:5,marginTop:3,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},pageCardAppName:{height:22.5,fontSize:16,color:"#ffffff"},pageCardAppWording:{height:20,marginTop:1,color:"#888888",fontSize:14},pageCardButton:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:14,color:"#ffffff",borderWidth:1,backgroundColor:"#07C160",borderColor:"#07C160",borderRadius:4},pageCardSplitLine:{marginLeft:15,marginRight:15,height:1,backgroundColor:"rgba(255, 255, 255, 0.10)"},pageCardImgContainer:{marginTop:15,marginLeft:15,marginRight:15,marginBottom:25,height:150,overflow:"hidden"},pageCardImgBox:{height:150,left:0,flexDirection:"row",justifyContent:"center"},pageCardImg0:{order:0,borderRadius:3},pageCardImg1:{marginLeft:10,order:1,borderRadius:3},pageCardImg2:{marginLeft:10,order:2,borderRadius:3},pageCardImg3:{marginLeft:10,order:3,borderRadius:3},pageHandler:{top:0,position:"absolute",hidden:!0},pageMask:{top:0,position:"absolute",backgroundColor:"#000000",hidden:!0},dialogCloseTip:{hidden:!0,position:"absolute",overflow:"hidden",top:0,left:0},adCloseTipWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{playableTipsWrap:{left:0,hidden:!0,marginBottom:10,width:132,height:32,flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:4},playableTipsContent:{width:100,height:16,lineHeight:16,fontSize:12,color:"#ffffff",textAlign:"center"},playableGiveUp:{hidden:!0,marginLeft:8,width:24,height:32,lineHeight:32,fontSize:12,color:"#07C160"},playableCancelBox:{hidden:!0,width:44,height:32,left:72,position:"absolute"}}),{pageContainer:{top:0,hidden:!0,position:"absolute",backgroundColor:"#ffffff"},pageImgContainer:{position:"absolute",overflow:"hidden",backgroundColor:"#000000"},pageImgBox:{flexDirection:"row",justifyContent:"center",position:"absolute",backgroundColor:"#000000"},pageImg0:{flex:1,order:0},pageImg1:{flex:1,order:1},pageImg2:{flex:1,order:2},pageImgTips:{flexDirection:"row",justifyContent:"center",height:10,width:35},pageImgIcon0:{height:7,width:7,borderRadius:16,backgroundColor:"#ffffff"},pageImgIcon1:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageImgIcon2:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},pageInfoWrapper:{flexDirection:"column",alignItems:"center",height:242},pageAppIcon:{borderRadius:8,width:64,height:64},pageAppName:{marginTop:20,width:180,textAlign:"center",height:28,lineHeight:28,fontSize:20,color:"#000000"},pageAppWording:{marginTop:4,marginBottom:20,width:220,height:28,textAlign:"center",lineHeight:28,color:"#888888",fontSize:17},pageAppConversion:{hidden:!0,width:220,height:24,textAlign:"center",lineHeight:24,color:"#000000",opacity:.3,fontSize:14},pageButton:{marginTop:14,width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4},pageDownloadButton:{marginTop:14,width:166,height:42,hidden:!0},pageDownloadButtonText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#ffffff"},pageDownloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},pageDownloadProgressText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#04be02"}}),{defaultPageContainer:{hidden:!0,top:0,position:"absolute",backgroundColor:"#000000"},defaultPageBackgroundContainer:{position:"absolute"},defaultPageBackgroundMask:{position:"absolute",left:0,top:0,backgroundColor:"#000000",opacity:.6},defaultPageBackgroundImage:{position:"absolute",left:0,top:0},defaultPageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},defaultPageAppIcon:{borderRadius:8,width:64,height:64,left:0},defaultPageAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},defaultPageAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},defaultPageAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},defaultPageButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{topBar:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:0,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10}},barLeft:{flexWrap:"nowrap"},count:{marginLeft:10,paddingLeft:12.5,paddingRight:12.5,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},barRight:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},close:{width:29,height:32,lineHeight:32,color:"#ffffff",fontSize:14},splitLine:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},sound:{width:20,height:20},topBarFix:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:10,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10},hidden:!0},barLeftFix:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},soundFix:{width:20,height:20},splitLineFix:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},countDownFix:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppendFix:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},closeFix:{width:56,height:32,lineHeight:32,color:"#ffffff",fontSize:14},adFeedback:{hidden:!0,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:4},splitLineLeft:{width:1,height:18.5,marginLeft:12,marginRight:12,backgroundColor:"rgba(255, 255, 255, 0.25)"},adFeedbackList:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}}),{expandCardContainer:{hidden:!0,top:0,position:"absolute",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0)"},expandCardInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},expandCardAppIcon:{borderRadius:8,width:64,height:64,left:0},expandCardAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},expandCardAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},expandCardAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},expandCardButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{dynamicContainer:{hidden:!0,position:"absolute",top:0,left:0}}),{pendantContainer:{hidden:!0,position:"absolute"}});var C_=n(7868);const I_=[{op:"insert",id:"innerPendant",parent:"pendantContainer",tpl:{type:"image",id:"innerPendantImage",style:{width:80,height:60},options:{baseType:1,data:{imgUrlExpr:"$scope.private.data.crtInfo.wxgame_video_card.pendant_img"},events:{rewardedVideoPlay:[{action:"rewardedVideoDynamic",expr:"$scope.private.pendantContainer.style.hidden == $const.true",value:{list:[{op:"setStyle",id:"pendantContainer",expr:"$const.systemInfo.screenWidth < $const.systemInfo.screenHeight",style:{hidden:!1,width:80,height:60,leftExpr:"#sub($const.systemInfo.screenWidth, 92)",bottomExpr:"#rewardedVideoIsExpandStyle() ? #add(12, #multi(1032, #division($const.systemInfo.screenWidth, 960))) : 150"}},{op:"setStyle",id:"pendantContainer",expr:"$const.systemInfo.screenWidth > $const.systemInfo.screenHeight",style:{hidden:!1,width:80,height:60,leftExpr:"#rewardedVideoIsExpandStyle() ? #sub(#sub(#division($const.systemInfo.screenWidth, 2), #division($const.systemInfo.screenHeight, 6)), 92)  : #sub($const.systemInfo.screenWidth, 92)",bottom:20}}]}}],tap:[{action:"landAd"},{action:"reportAdMonitorData",value:{id:924,key:172,extInfo:"pendant-click"}}]}}}}],x_=xp.DX["incentive-video"],D_=e=>(0,Xs.Wj)(e),O_=(...e)=>(0,op._u)(...e),{root:P_}=Js()('\n  <view id="container">\n    <video id="video" controls="false" muted="true" autoplay="false" object-fit="contain" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad" player-hint="supportSoftDecode,mp4Only">\n      <view id="blank"></view>\n      <view id="page-card-body">\n        <view id="page-card-hot-area">\n          <image id="page-card-tip-icon"></image>\n          <text id="page-card-tip" value="了解更多"></text>\n        </view>\n        <image id="page-card-container" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=a5af9b5364f6e959667331801f6558e8&filekey=3033020101041f301d02016d040253480410a5af9b5364f6e959667331801f6558e80202423f040d00000004627466730000000131&hy=SH&storeid=32303138313031363036343533343030306464383764313336666664393336663561333230613030303030303664&bizid=1023">\n          <view id="page-card" click-state="true">\n            <image id="page-card-app-icon" bubble-event="true"></image>\n            <view id="page-card-app-information" bubble-event="true">\n              <text id="page-card-app-name" bubble-event="true"></text>\n              <text id="page-card-app-wording" bubble-event="true"></text>\n            </view>\n            <text id="page-card-button" click-state="true"></text>\n          </view>\n          <view id="page-card-split-line"></view>\n          <view id="page-card-img-container">\n            <view id="page-card-img-box" click-state="true">\n              <image id="page-card-img0" bubble-event="true"></image>\n              <image id="page-card-img1" bubble-event="true"></image>\n              <image id="page-card-img2" bubble-event="true"></image>\n              <image id="page-card-img3" bubble-event="true"></image>\n            </view>\n          </view>\n        </image>\n      </view>\n    </video>\n    \n  <view id="dynamic-container"></view>\n\n    <view id="card-container">\n      \n  <view id="playable-tips-wrap">\n    <text id="playable-tips-content" value="视频结束后可试玩"></text>\n    <text id="playable-give-up" value="放弃"></text>\n    <view id="playable-cancel-box" click-state="true"></view>\n  </view>\n\n      <view id="card" click-state="true">\n        <image id="app-icon" bubble-event="true"></image>\n        <view id="app-information" bubble-event="true">\n          <text id="app-name" bubble-event="true"></text>\n          <text id="app-wording" bubble-event="true"></text>\n        </view>\n        <text id="button" click-state="true"></text>\n        <view id="download-button" click-state="true">\n          <text id="download-button-text" bubble-event="true"></text>\n          <text id="download-progress" bubble-event="true">\n            <text id="download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n    \n  <view id="expand-card-container">\n    <view id="expand-card-info-container">\n      <view id="expand-card-wording-wrapper">\n        <view id="expand-card-headline" bubble-event="true">\n          <image id="expand-card-app-icon" bubble-event="true"></image>\n          <text id="expand-card-app-name" bubble-event="true"></text>\n        </view>\n        <text id="expand-card-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="expand-card-app-conversion"></text>\n      <text id="expand-card-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="pendant-container"></view>\n\n    \n  <view id="default-page-container">\n    <view id="default-page-background-container">\n      <image id="default-page-background-image"></image>\n      <view id="default-page-background-mask"></view>\n    </view>\n    <view id="default-page-info-container">\n      <view id="default-page-wording-wrapper">\n        <view id="default-page-headline" bubble-event="true">\n          <image id="default-page-app-icon" bubble-event="true"></image>\n          <text id="default-page-app-name" bubble-event="true"></text>\n        </view>\n        <text id="default-page-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="default-page-app-conversion"></text>\n      <text id="default-page-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="page-container">\n    <view id="page-img-container">\n      <view id="page-img-box">\n        <image id="page-img0" bubble-event="true"></image>\n        <image id="page-img1" bubble-event="true"></image>\n        <image id="page-img2" bubble-event="true"></image>\n      </view>\n      <view id="page-img-tips">\n        <view id="page-img-icon0"></view>\n        <view id="page-img-icon1"></view>\n        <view id="page-img-icon2"></view>\n      </view>\n    </view>\n    <view id="page-info-container">\n      <view id="page-info-wrapper">\n        <image id="page-app-icon"></image>\n        <text id="page-app-name"></text>\n        <text id="page-app-wording"></text>\n        <text id="page-app-conversion"></text>\n        <text id="page-button" click-state="true"></text>\n        <view id="page-download-button" click-state="true">\n          <text id="page-download-button-text" bubble-event="true"></text>\n          <text id="page-download-progress" bubble-event="true">\n            <text id="page-download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n  </view>\n\n    <view id="page-handler"></view>\n    <view id="page-mask"></view>\n    \n  <view id="top-bar">\n    <view id="bar-left">\n      <view id="count">\n        <view id="ad-feedback">\n          <text id="ad-text" value="广告" bubble-event="true"></text>\n          <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n          <view id="split-line-left" bubble-event="true"></view>\n        </view>\n        <text id="count-down"></text>\n        <text id="count-down-append"></text>\n      </view>\n    </view>\n    <view id="bar-right">\n      <image id="sound"></image>\n      <view id="split-line"></view>\n      <text id="close" value="关闭"></text>\n    </view>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="top-bar-fix">\n    <view id="bar-left-fix">\n      <image id="sound-fix"></image>\n      <view id="split-line-fix"></view>\n      <text id="count-down-fix"></text>\n      <text id="count-down-append-fix"></text>\n      <text id="close-fix" value="关闭广告"></text>\n    </view>\n  </view>\n\n    <view id="dialog-close-tip">\n      <view id="ad-close-tip-wrap">\n        <text id="ad-close-tip-content" bubble-event="true" value="感谢你的反馈"></text>\n      </view>\n    </view>\n    <view id="dialog-container">\n      <view id="dialog-mask"></view>\n      <view id="dialog">\n        <text id="dialog-title"></text>\n        <view id="dialog-split"></view>\n        <view id="dialog-button">\n          <text id="dialog-close" value="放弃"></text>\n          <view id="button-split"></view>\n          <text id="dialog-cancel" value="继续"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n'),R_="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",k_="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",N_="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJAic1IGjzG9g458d7DpIe8URUq74t0dicbwKKc69rPBf8hiby1llOBTndbKUq2NTA9YaA/0?wx_fmt=png",M_=1e3,L_=2e3;let B_=!1,F_="portrait",U_=0,W_=0,j_=0,G_=0,V_=0,H_=0,z_={};s.Z.onReady((()=>{z_=s.Z.safeArea||{};try{s.Z.global.window.pageOrientation&&(F_=s.Z.global.window.pageOrientation)}catch(e){}if(bp.S3.isIOS?B_=!0===s.Z.showStatusBar:bp.S3.isAndroid&&(B_=!0===s.Z.showStatusBar||"true"===s.Z.showStatusBar),bp.S3.isWaGame){const e=n(1627).Z;e.onTouchStart((e=>{null!=e&&e.changedTouches&&e.changedTouches.length>0&&(U_=Math.round(e.changedTouches[0].clientX),W_=Math.round(e.changedTouches[0].clientY),j_=0,G_=0,H_=0,V_=+new Date)})),e.onTouchEnd((e=>{null!=e&&e.changedTouches&&e.changedTouches.length>0&&(j_=Math.round(e.changedTouches[0].clientX),G_=Math.round(e.changedTouches[0].clientY),H_=+new Date-V_)}))}}));const Z_=(e,t)=>{const n=e.touchendTimeStamp-e.touchstartTimeStamp;e.touchendTimeStamp>0&&e.touchstartTimeStamp>0&&n>=0&&(0,C_.J)(17035,{aid:t.aid,traceid:t.traceid,touch_start_x:Math.round(e.touchstartPosX),touch_start_y:Math.round(e.touchstartPosY),touch_end_x:Math.round(e.touchendPosX),touch_end_y:Math.round(e.touchendPosY),touch_duration:n,screenwidth:bp.S3.screenWidth,screenheight:bp.S3.screenHeight,device_orientation:bp.S3.deviceOrientation})},Y_=function(){const e=D_(this);try{if(bp.S3.isIOS&&bp.S3.isApp&&e.adProxy.isValidCondition("widget_gray_measure_text")){let t;(0,c.IN)("measureText",{text:e.button.value,fontSize:16,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete(e){t={width:e.width||0}}}),!1===e.button.style.hidden&&(e.button.style.width=t.width+24),e.data.flooringPage&&2===e.pageType&&((0,c.IN)("measureText",{text:e.button.value,fontSize:e.pageCardButton.style.fontSize||14,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete(e){t={width:e.width||0}}}),e.pageCardButton.style.width=t.width+24)}else{let t=Ap.Z.getTextWidthInAndroid(e.button.value,e.button.style.fontSize||16)+24;!1===e.button.style.hidden&&(e.button.style.width=t),!1===e.downloadButton.style.hidden&&(t=Ap.Z.getTextWidthInAndroid(e.downloadButtonText.value,e.downloadButtonText.style.fontSize||13)+24,e.downloadButton.style.width=t+2,e.downloadButtonText.style.width=t,e.downloadProgressText.style.width=t),e.data.flooringPage&&2===e.pageType&&(t=Ap.Z.getTextWidthInAndroid(e.button.value,e.pageCardButton.style.fontSize||14)+24,e.pageCardButton.style.width=t)}}catch(e){}},$_="video-ad has been destroyed",q_=function(){const e=D_(this);return e.playableTipsWrap.animate({left:-144,duration:200}).then((()=>{let t="即将跳转试玩";t=bp.S3.isIOS?`${t} `:t;const n={text:t,fontSize:12},i=(0,Op.X1)(n)||72,r=(0,Op.X1)({text:"放弃",fontSize:12})||24;return e.playableTipsContent.style.width=i,e.playableGiveUp.style.width=r,e.playableTipsWrap.style.width=i+r+32,e.playableTipsContent.value=t,e.playableGiveUp.value="放弃",e.playableGiveUp.style.hidden=!1,e.playableCancelBox.style.left=i+12,e.playableCancelBox.style.hidden=!1,e.playableCancelBox.style.width=r+20,(0,op.Vs)(300).then((()=>e.playableTipsWrap.animate({left:0,duration:200})))}))},Q_=function(e){if(ny.call(this))return;const t=D_(this);if("object"==typeof e&&e.length>0)for(const n of e)t[n]&&(t[n].style.width=bp.S3.screenWidth,t[n].style.height=bp.S3.screenHeight)},J_=function(){if(ny.call(this))return Promise.reject({errMsg:$_});const e=D_(this);return K_.call(this,"hide").then((()=>{bp.S3.isWaGame||(e.adProxy.setPageOrientation(bp.S3.deviceOrientation),bp.S3.isAndroid&&(e.updateScreenInfoTimer&&(clearTimeout(e.updateScreenInfoTimer),e.updateScreenInfoTimer=null),e.updateScreenInfoTimer=setTimeout((()=>{const{screenWidth:t,screenHeight:n}=bp.S3;(0,bp.uj)();let i=!1,r=0;bp.S3.screenHeight===n&&bp.S3.screenWidth===t||(i=!0,r=bp.S3.screenHeight-n),r&&(e.cardContainer.style.top+=r);const o=["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"];oy.call(this)&&o.push("video"),Q_.call(this,o),i&&oy.call(this)&&(im.call(this,!0),hy.call(this),my.call(this))}),1e3)))}))},X_=function(){if(ny.call(this))return Promise.reject({errMsg:$_});const e=D_(this);return K_.call(this,"show").then((()=>{bp.S3.isWaGame||e.adProxy.setPageOrientation(F_)})).catch((t=>{throw e.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR,t),t}))},K_=function(e){const t=D_(this);return sy.call(this)?Promise.resolve():t.adProxy.operateFullscreen(e)},em=function(e,t=!0){if(ny.call(this))return!1;const n=D_(this).adProxy.isTriggerClick(e),i=n?0:1;return t&&Lm.call(this,e,i),n},tm=function(){if(ny.call(this))return;const e=D_(this),{product_type:t,button_action:n,card:{icon:i,name:r,wording:o,showTime:a,headBgImg:s,mpTagType:c},app:l,flooringPage:u}=e.data,d=cy.call(this);e.cardShowTime=a,e.appIcon.src=i,e.appName.value=(0,op.$G)(r,20),e.appWording.value=o,e.appIcon.style.borderRadius=10,-1===[12,19].indexOf(t)&&("portrait"===bp.S3.deviceOrientation?e.appIcon.style.borderRadius=27:"landscape"===bp.S3.deviceOrientation&&(e.appIcon.style.borderRadius=22)),e.button.value=n.button_text,n.button_text||(12===t?e.button.value="下载":19===t&&(e.button.value="查看")),23===t&&e.adProxy.checkFollow(e.data.app.uin).then((t=>{const i=t?"查看公众号":n.button_text||"关注公众号";e.button.value=i,Y_.call(this),e.data.flooringPage&&1===e.pageType&&0===e.buttonTextType?e.pageButton.value=i:e.data.flooringPage&&2===e.pageType&&0===e.buttonTextType?e.pageCardButton.value=i:e.pageType||(e.defaultPageButton.value=i),e.expandCardButton.value=i,Rm.call(this,vp.A$.CHANGEADBTNTEXT,{text:i})})).catch((()=>{const t=l.isFollowed?"查看公众号":n.button_text||"关注公众号";e.button.value=t,Y_.call(this),Rm.call(this,vp.A$.CHANGEADBTNTEXT,{text:t})})),1===e.buttonTextType&&(e.button.value=n.button_text,Rm.call(this,vp.A$.CHANGEADBTNTEXT,{text:n.button_text})),Y_.call(this),e.pageType=null!=u&&u.landpage_type?u.landpage_type:0,Am.call(this),d&&(e.expandCardAppIcon.bubbleEvent=!1),e.expandCardAppIcon.src=i,e.expandCardAppName.value=(0,op.$G)(r,20),e.expandCardAppWording.value=o,e.expandCardButton.value=e.button.value;const{screenWidth:h,screenHeight:p}=bp.S3,f=e.expandCardInfoContainer.style;if("portrait"===bp.S3.deviceOrientation?(f.width=h,f.justifyContent="flex-start",f.paddingLeft=0,f.paddingTop=48,f.height=400/375*h,f.bottom=0,f.position="absolute"):(f.justifyContent="center",f.paddingLeft=.672*p,f.width=f.paddingLeft+300,f.paddingTop=0,f.height=p,f.bottom=null,f.position=null),!d){const t=Ap.Z.getTextWidth((0,op.$G)(r,20),17);e.expandCardAppIcon.style.left=134-t/2;for(const t of Object.keys(T_)){const n=T_[t];e[t]&&Object.assign(e[t].style,n)}}if(e.expandCardAppIcon.style.borderRadius=d?8:3,-1===[xp.fY.OPEN_PLATFORM_APP_MOB,xp.fY.APPLE_APP_STORE].indexOf(t)&&(e.expandCardAppIcon.style.borderRadius=d?32:12),u&&1===e.pageType&&"portrait"===bp.S3.deviceOrientation)e.pageAppIcon.src=i,e.pageAppIcon.style.borderRadius=e.appIcon.style.borderRadius,e.pageAppName.value=(0,op.$G)(r,20),e.pageAppWording.value=o,e.pageButton.value=e.button.value,e.imgBaseName="pageImg",e.pageImgContainer.style.width=h,e.pageImgContainer.style.height=h,e.pageImgBox.style.width=3*h,e.pageImgBox.style.height=h,e.pageImgBox.style.left=0,e.pageInfoContainer.style.width=h,e.pageInfoContainer.style.height=p-h,e.pageInfoContainer.style.top=h,e.pageImgTips.style.top=h-20,e.pageImgTips.style.left=h/2-17.5,bp.S3.isIOS&&(e.pageImgIcon0.style.borderRadius=4,e.pageImgIcon1.style.borderRadius=4,e.pageImgIcon2.style.borderRadius=4),e.pageImgIcon0.style.backgroundColor="#ffffff",e.pageImgIcon1.style.backgroundColor="rgba(255, 255, 255, 0.55)",e.pageImgIcon2.style.backgroundColor="rgba(255, 255, 255, 0.55)",ym.call(this),im.call(this);else if(u&&2===e.pageType&&"portrait"===bp.S3.deviceOrientation)e.pageCardContainer.style.width=h,e.pageCardAppIcon.src=i,e.pageCardAppIcon.style.borderRadius=e.appIcon.style.borderRadius,e.pageCardAppName.value=(0,op.$G)(r,20),e.pageCardAppWording.value=o,e.pageCardButton.value=e.button.value,e.pageCard.style.width=h,e.pageCardSplitLine.style.width=h-20,e.pageCardHotArea.style.width=h,e.pageCardImgContainer.style.width=h-20,e.pageCardImgBox.style.width=_m.call(this,{padding:10}),e.pageCardTipIcon.src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=f8ba19ac709edca00138c47585de39be&filekey=3033020101041f301d02016d040253480410f8ba19ac709edca00138c47585de39be020202d1040d00000004627466730000000131&hy=SH&storeid=32303138313031303133353430323030303461363337313336666664393336663561333230613030303030303664&bizid=1023",e.video.style.padding=0,e.video.style.paddingBottom=0,e.imgBaseName="pageCardImg",ym.call(this),im.call(this),e.pageHandler.style.hidden=!1;else if(u&&[3,4].indexOf(e.pageType)>-1){let t="视频结束后可试玩";t=bp.S3.isIOS?`${t} `:t;const n={text:t,fontSize:12},i=(0,Op.X1)(n)||100;e.playableTipsContent.style.width=i,e.playableTipsWrap.style.width=i+24,e.cardContainer.style.top-=32}else if(!e.pageType){if(d&&(e.defaultPageAppIcon.bubbleEvent=!1),e.defaultPageAppIcon.src=i,e.defaultPageAppName.value=(0,op.$G)(r,20),e.defaultPageAppWording.value=o,e.defaultPageButton.value=e.button.value,!d){const t=Ap.Z.getTextWidth((0,op.$G)(r,20),17);e.defaultPageAppIcon.style.left=134-t/2;for(const t of Object.keys(E_)){const n=E_[t];e[t]&&Object.assign(e[t].style,n)}}e.defaultPageAppIcon.style.borderRadius=d?8:3,-1===[xp.fY.OPEN_PLATFORM_APP_MOB,xp.fY.APPLE_APP_STORE].indexOf(t)&&(e.defaultPageAppIcon.style.borderRadius=d?32:12),e.defaultPageBackgroundImage.src=s||"",hy.call(this)}if(8===c){const t=+new Date;(0,Dp.uQ)({buttonText:e.button.value,aid:e.adProxy.data.aid}).then((n=>{const i=+new Date;if(e.adProxy.reportRelationFetchDuration({startTime:t,endTime:i,showTime:e.showDetailTime||0}),n){const{count:t,descText:i}=n,r=`- 最近已有${t}人${i} -`;e.pageType?1===e.pageType&&(e.pageAppConversion.value=r,e.pageAppConversion.style.hidden=!1):(e.defaultPageAppConversion.value=r,e.defaultPageAppConversion.style.hidden=!1),e.expandCardAppConversion.value=r,e.expandCardAppConversion.style.hidden=!1}else e.pageAppConversion.style.hidden=!0,e.defaultPageAppConversion.style.hidden=!0,e.expandCardAppConversion.style.hidden=!0})).catch((t=>{e.pageAppConversion.style.hidden=!0,e.defaultPageAppConversion.style.hidden=!0,e.expandCardAppConversion.style.hidden=!0,e.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_RELATION_FETCH_ERROR,t)}))}else e.pageAppConversion.style.hidden=!0,e.defaultPageAppConversion.style.hidden=!0,e.expandCardAppConversion.style.hidden=!0;e.androidAppState=0,e.button.style.hidden=!1,e.pageButton.style.hidden=!1,e.defaultPageButton.style.hidden=!1,e.expandCardButton.style.hidden=!1,e.downloadButton.style.hidden=!0,e.pageDownloadButton.style.hidden=!0,12===t&&e.adProxy.isValidCondition("widget_gray_video_download_v2")&&(e.button.style.hidden=!0,e.downloadButton.style.hidden=!1,e.downloadButtonText.value=n.button_text,e.downloadProgressText.value=n.button_text,Y_.call(this),1===e.pageType&&(e.pageButton.style.hidden=!0,e.pageDownloadButton.style.hidden=!1,e.pageDownloadButtonText.value=n.button_text,e.pageDownloadProgressText.value=n.button_text))},nm=function(e={}){if(ny.call(this))return!1;const t=D_(this);if(t.direction)return t.direction===e.direction;if(1===t.pageType||!t.pageType)return!!t.flooringPageIsShow;if(2===t.pageType){if("left"===e.direction){const{y:n}=e,i=t.flooringPageIsShow?t.video.style.height-180:0,r=t.flooringPageIsShow?t.video.style.height:0;return!!(n>i&&n<r)}if("top"===e.direction){const{y:n}=e,i=0,r=t.flooringPageIsShow?t.video.style.height-180:t.video.style.height;return!!(n>i&&n<r)}}return!1},im=function(e=!1){if(ny.call(this))return;const{screenWidth:t,screenHeight:n}=bp.S3,i=D_(this);let r,o="",a="",s=0,c=0,l=0,u=0;const d=(n-i.video.style.height)/2;1===i.pageType?(i.pageHandler.style.width=t,i.pageHandler.style.height=t,o="pageImgBox",c=t/4,s=3*t/4-i.pageImgBox.style.width,r={xRevise:!0,decideByDirection:!0,setImgTips:!0,posQueue:[0,-t,-2*t]}):2===i.pageType&&(i.pageHandler.style.width=t,i.pageHandler.style.height=i.video.style.height,i.pageHandler.style.top=(n-i.video.style.height)/2,(n!==i.video.style.height||e)&&(i.pageMask.style.hidden=!1,i.pageMask.style.width=t,i.pageMask.style.height=(n-i.video.style.height)/2,i.pageMask.style.top=(n+i.video.style.height)/2),o="pageCardImgBox",a="pageCardBody",c=60,s=t-c-i.pageCardImgBox.style.width,l=i.video.style.height-i.pageCardBody.style.height+10,!bp.S3.isWaGame&&bp.S3.isAndroid&&(l=i.video.style.height-i.pageCardBody.style.height+d+10),u=l+180,i.pageCardBody.style.top=u,r={yRevise:!0,directionMap:{up:l,down:u},logPagePull:!0,showTips:!0,xInertia:!0,handleTail:!0,xHead:0,xTail:t-i.pageCardImgBox.style.width-20,touchClick:!0,imgBoxHeight:180,cardHeight:60,buttonWidth:60,buttonHeight:30}),i.flooringPageInfos={xMin:s,xMax:c,yMin:l,yMax:u,xContainer:o,yContainer:a,infos:r}},rm=function(e={}){if(ny.call(this))return;const t=D_(this),n=!0===t.flooringPageIsShow?e.max:e.min;return t.pageCardBody.animate({top:n,duration:50}).then((()=>Tm.call(this,e))).then((()=>sm.call(this)))},om=function(e={}){if(ny.call(this))return;const t=D_(this),n=e.event?e.event:{};if(cm.call(this,n))if(t.flooringPageIsShow){const i=t.pageCard.getAbsolutePosition(),r=i.top,o=i.top+e.cardHeight,a=t.pageCardImgContainer.getAbsolutePosition().top;if(n.y>r&&n.y<o){const i=t.pageCardButton.getAbsolutePosition(),r=i.top,o=i.top+e.buttonHeight,a=i.left,s=i.left+e.buttonWidth;n.y>r&&n.y<o&&n.x>a&&n.x<s?lm.call(this,n,"button",b_.REWARD_PAGE_BUTTON):lm.call(this,n,"card",b_.REWARD_PAGE_CARD)}else n.y>=a&&n.y<=t.video.style.height?lm.call(this,n,"img",b_.REWARD_PAGE_IMAGE):rm.call(this,e)}else{const i=t.pageCard.getAbsolutePosition(),r=i.top,o=i.top+e.cardHeight,a=t.pageCardButton.getAbsolutePosition(),s=a.top,c=a.top+e.buttonHeight,l=a.left,u=a.left+e.buttonWidth;n.y>r&&n.y<o?n.y>s&&n.y<c&&n.x>l&&n.x<u?lm.call(this,n,"button",b_.REWARD_PAGE_BUTTON):lm.call(this,n,"card",b_.REWARD_PAGE_CARD):rm.call(this,e)}},am=function(e={}){if(ny.call(this))return;const t=D_(this),n=e.imgBox?e.imgBox:"",i=e.xMin?e.xMin:0,r=e.xMax?e.xMax:0,o=e.xHead?e.xHead:0,a=e.xTail?e.xTail:0;return t[n].nextLayout((()=>{const e=t[n].style.left;let s=e;if(e>o&&e<=r?s=o:e>=i&&e<a&&(s=a),s!==e)return t[n].animate({left:s,duration:50})}))},sm=function(){if(ny.call(this))return;const e=D_(this);e.flooringPageIsShow?(e.pageCardTipIcon.style.hidden=!0,e.pageCardTip.style.hidden=!0):(e.showTipsTimer&&(clearTimeout(e.showTipsTimer),e.showTipsTimer=null),e.pageCardTipIcon.style.hidden=!1,e.pageCardTip.style.hidden=!1)},cm=function(e){if(ny.call(this))return;const t=D_(this);return!!(Math.abs(e.x-t.startPosX)<30&&Math.abs(e.y-t.startPosY)<30)},lm=function(e,t="",n){ny.call(this)||cm.call(this,e)&&um.call(this,e,t,n)},um=function(e,t="",n){if(ny.call(this))return;const i=D_(this);if([1,2].includes(i.pageType)&&wm.call(this,e,t),bp.S3.isAndroid&&12===i.data.product_type&&1===i.pageType&&i.adProxy.isValidCondition("widget_gray_video_download_v2"))Qm.call(this);else if(bp.S3.isIOS&&46===i.data.product_type&&6===i.data.dest_type)Promise.race([Bm.call(this,e,n),(0,op.Vs)(500)]).then((()=>{Um.call(this,{button:5},e),Ym.call(this)})).catch((()=>{Um.call(this,{button:5},e),Ym.call(this)}));else{Bm.call(this,e,n),Um.call(this,{button:5},e);const r={};23===i.data.product_type&&(r["button"===t?"isButton":"toOfficalAccountDetail"]=!0),Ym.call(this,r)}},dm=function(e={}){if(ny.call(this))return;const t=D_(this),n=e.container?e.container:"",i=e.event?e.event:{},r=t[n].getAbsolutePosition();return{x:r.left+i.x,y:r.top+i.y}},hm=function(e=!1,t={}){if(ny.call(this))return;const n=D_(this);n.isPress=e,n.startPosX=null!=t&&t.x?t.x:0,n.startPosY=null!=t&&t.y?t.y:0,n.lastPosX=null!=t&&t.x?t.x:0,n.lastPosY=null!=t&&t.y?t.y:0,n.lastSecondPosX=null!=t&&t.x?t.x:0,n.lastSecondPosY=null!=t&&t.y?t.y:0,n.direction="",n.startTime=e?+new Date:0,e&&n.throttleTimer&&clearTimeout(n.throttleTimer),n.throttleTimer=null,n.timeStamp=0,n.callCount=0,n.distanceList=[]},pm=function(){if(ny.call(this))return;const e=D_(this),t=e.imgBaseName;for(let n=0;n<3;n++){const i=e[t+n].getAbsolutePosition();e[`pageImgIcon${n}`].style.backgroundColor=0===i.left?"#ffffff":"rgba(255, 255, 255, 0.55)"}},fm=function(e={}){if(ny.call(this))return;const t=D_(this),n=e.event?e.event:{},i=e.direction?e.direction:"left";let r="top"===i?n.y-t.lastPosY:n.x-t.lastPosX;bp.S3.isAndroid&&(r="top"===i?n.y-t.lastSecondPosY:n.x-t.lastSecondPosX);const o=e.critical?e.critical:0;return"top"===i?r<0&&Math.abs(r)>=o?"up":"down":r<0&&Math.abs(r)>=o?"right":"left"},gm=function(e={}){if(ny.call(this))return Promise.reject({errMsg:$_});const t=D_(this),n=e.direction?e.direction:"left",i=e.imgBox?e.imgBox:"";let r="top"===n?e.event.y:e.event.x;const o=fm.call(this,e),a=e.directionMap?e.directionMap:{},s=e.posQueue?e.posQueue:[];let c=null;if(Object.keys(a).length>0)c=a[o]?a[o]:0;else{r=t[i].style[n],s.sort(((e,t)=>e-t));let a=0,l=s.length-1;for(;a<l;){const e=Math.floor((a+l)/2),t=l-a,n=s[e];if(r===n){c=n;break}if(r>n?a=e:l=e,t<=1)break}if(!c)if(e.decideByDirection)c=s[o]||("right"===o?s[a]:s[l]);else{const e=s[l],t=s[a];c=Math.abs(r-e)>=Math.abs(r-t)?t:e}}return Promise.resolve().then((()=>{t[i].style[n]=c})).then((()=>{if(e.logPagePull)return Tm.call(this,e);hm.call(this)})).then((()=>{if(e.showTips)return sm.call(this)})).then((()=>{if(e.setImgTips)return t[i].nextLayout((()=>{pm.call(this)}))}))},_m=function(e={}){if(ny.call(this))return;if(!e||"object"!=typeof e)return;const t=D_(this),n=e.padding?e.padding:0,{pageType:i}=t;let r=t.data.flooringPage.img_list?t.data.flooringPage.img_list:[];r="string"==typeof r?JSON.parse(r):r;let o=0;return r.forEach(((e,t)=>{const{width:r}=mm.call(this,{pageType:i,width:e.width,height:e.height});o+=0===t?r:n+r})),o},mm=function(e){if(ny.call(this))return;const t={},{screenWidth:n}=bp.S3;if(!e||"object"!=typeof e)return t;const{pageType:i,width:r,height:o}=e;return 1!==i&&i?2===i&&r===o?(t.scale=150/r,t.width=150,t.height=150):2===i&&r!==o&&(t.scale=150/o,t.width=150*r/o,t.height=150):(t.scale=n/r,t.width=n,t.height=n),t},ym=function(){if(ny.call(this))return;const e=D_(this),{pageType:t}=e;let n=e.data.flooringPage.img_list?e.data.flooringPage.img_list:[];n="string"==typeof n?JSON.parse(n):n;const i=e.imgBaseName?e.imgBaseName:"";n.forEach(((n,r)=>{const o=i+r,{width:a,height:s,scale:c}=mm.call(this,{pageType:t,width:n.width,height:n.height});e[o].scale=c,e[o].style.width=a,e[o].style.height=s,e[o].src=n.image_url}))},vm=function(){if(ny.call(this))return Promise.resolve();const e=D_(this);if(!e.data.flooringPage)return Promise.resolve();km.call(this,vp.dA.REWARDEDVIDEOSHOWFLOORINGPAGE);const{yMin:t,yMax:n}=e.flooringPageInfos;return 2!==e.pageType||e.flooringPageIsShow?1===e.pageType?e.pageContainer.animate({left:0,duration:300}).then((()=>Tm.call(this))):e.pageType?Promise.resolve():(e.cardContainer.animate({opacity:0,duration:280}),e.defaultPageContainer.animate({opacity:1,duration:280}).then((()=>Tm.call(this)))):e.pageCardBody.animate({top:t,duration:50}).then((()=>(e.flooringPageAutoShow=!0,Tm.call(this,{min:t,max:n})))).then((()=>sm.call(this)))},Am=function(){if(ny.call(this))return;const e=D_(this);if([1,2].includes(e.pageType)){e.flooringPageState.pageType=e.pageType,e.flooringPageState.card={click:0},e.flooringPageState.button={click:0};for(let t=0;t<=3&&(3!==t||2===e.pageType);t++)e.flooringPageState[`img${t}`]={exposure:0,click:0}}},bm=function(){if(ny.call(this))return;const e=D_(this);if(bp.S3.isIOS){for(let t=0;t<3;t++)e[`pageImg${t}`].src=N_,e[`pageCardImg${t}`].src=N_;e.pageCardImg3.src=N_,e.pageAppIcon.src=N_,e.pageCardAppIcon.src=N_,e.pageCardTipIcon.src=N_}},wm=function(e={},t=""){if(ny.call(this))return;const n=D_(this);if("img"===t){const t=n.imgBaseName;for(let i=0;i<=3&&(3!==i||2===n.pageType);i++){const r=n[t+i].getAbsolutePosition(),{width:o}=n[t+i].style,{height:a}=n[t+i].style,s=r.left,c=r.left+o,l=r.top,u=r.top+a;e.x>=s&&e.x<=c&&e.y>=l&&e.y<=u&&(n.flooringPageState[`img${i}`].click+=1)}}else["card","button"].includes(t)&&(n.flooringPageState[t].click+=1)},Em=function(e=!1){if(ny.call(this))return;const t=D_(this);if(e){if(t.pageType){const e=t.imgBaseName;for(let n=0;n<=3&&(3!==n||2===t.pageType);n++){const i=t[e+n].getAbsolutePosition(),{width:r}=t[e+n].style,o=-r/2,a=bp.S3.screenWidth-r/2;i.left>o&&i.left<a&&(t.flooringPageState[`img${n}`].exposure+=1)}}}else t.exposureTimer&&(clearTimeout(t.exposureTimer),t.exposureTimer=null),t.exposureTimer=setTimeout((()=>Em.call(this,!0)),1e3)},Tm=function(e={}){if(ny.call(this))return;const t=D_(this);if(2===t.pageType){const n=e.min?e.min:0,i=e.max?e.max:0;t.pageCardBody.style.top!==n||t.flooringPageIsShow||t.flooringPageAutoShow?t.pageCardBody.style.top===i&&t.flooringPageIsShow?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Sm.call(this,{type:2,staytime:0,componentsstartstr:""}),Sm.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageShowTime=0,t.flooringPageCloseTime=0,Am.call(this)):t.pageCardBody.style.top===n&&t.flooringPageAutoShow?(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Sm.call(this,{type:4,staytime:0,componentsstartstr:""}),Em.call(this)):e.isClose&&t.flooringPageIsShow&&(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Sm.call(this,{type:5,staytime:0,componentsstartstr:""}),Sm.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Am.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Sm.call(this,{type:1,staytime:0,componentsstartstr:""}),Em.call(this))}else 1===t.pageType?e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Sm.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Am.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Sm.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),Em.call(this)):t.pageType||(e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Sm.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Am.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Sm.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),Em.call(this)))},Sm=function(e){if(ny.call(this))return;const t=D_(this);1===t.pageType&&delete e.type;const n=[];return n.push(e),t.adProxy.reportFlooringPage(t.pageType,n)},Cm=function(){if(ny.call(this))return Promise.reject({errMsg:$_});const e=D_(this);return e.adProxy.fetch().then((t=>{try{e.adProxy.setTimePoint("p4");const n=Object.keys(e.emitter.emitter).includes("_events")?Object.keys(e.emitter.emitter._events):[];return"devtools"!==bp.S3.platform||n.includes("_error")?(e.data=t,e.isData=!0,Im.call(this),e.adProxy.preloadLanding(),e.emitter.emit("load"),void e.adProxy.setTimePoint("p5")):void console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。（无广告返回时，建议不设置激励视频入口）")}catch(t){throw e.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_PARSE_ERROR,t),{}}}))},Im=function(){if(ny.call(this))return;const e=D_(this),{data:t}=e,{deviceOrientation:n,screenWidth:i,screenHeight:r}=bp.S3;if(e.container.style.left=0,bp.S3.isIOS){const t="portrait"===n?z_.top?44:12:10,i="portrait"===n?z_.top?78:46:44;e.topBar.style.top=t,e.topBarFix.style.top=t,e.adFeedbackList.style.top=i,e.adFeedbackMenu.style.top=i}e.container.style.top=r,e.video.style.padding=8,e.video.style.paddingBottom=16;if(Q_.call(this,["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"]),i<r)e.cardContainer.style.width=i-16,e.cardContainer.style.top=r-130,e.cardContainer.style.left=8,e.topBar.style.left=0,e.topBar.style.width=i,e.card.style.height=90;else if(i>=r){const t=z_.top||0;e.cardContainer.style.width=348,e.cardContainer.style.top=r-104,e.cardContainer.style.left=t+18,e.topBar.style.width=i-2*t-16,e.topBar.style.left=t+8,e.card.style.height=72}if(B_&&(e.topBar.style.top=e.topBar.style.top+30,e.topBarFix.style.top=e.topBarFix.style.top+30,e.adFeedbackList.style.top=e.adFeedbackList.style.top+30,e.adFeedbackMenu.style.top=e.adFeedbackMenu.style.top+30),bp.S3.isWaGame?e.container.style.fixed&&delete e.container.style.fixed:e.container.style.fixed=!0,e.dialog.style.top=r>138?(r-138)/2:0,e.dialog.style.left=i>300?(i-300)/2:0,e.dialogCloseTip.style.top=(r-36)/2,e.dialogCloseTip.style.left=(i-124)/2,ay.call(this))e.cardContainer.style.hidden=!0,e.container.style.backgroundColor="rgba(0, 0, 0, 0)",e.topBar.style.hidden=!0,e.topBarFix.style.hidden=!0,e.video.style.hidden=!0,e.video.src&&(e.video.src="https://wxa.wxs.qq.com/images/wxapp/empty.mp4");else{var o,a;e.container.style.backgroundColor="#000000";const{product_type:n}=t,{src:i,poster:r,duration:s}=gy.call(this);e.cardContainer.style.hidden=fy.call(this),e.expandCardContainer.style.hidden=!fy.call(this),bp.S3.isIOS&&e.video.src===i&&e.video.seek(0),bp.S3.isIOS?(e.video.poster=r,(0,op.Vs)(500).then((()=>{e.video.src=i}))):(e.video.src=i,e.video.poster=r),e.adProxy.setTimePoint("p8"),e.buttonTextType=e.data.button_action.text_type||0,my.call(this),bp.S3.isAndroid&&(e.preloadVideo=!0,e.preloadVideoSuccess=!1,e.adProxy.preloadVideo([i]).catch((t=>{e.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_PRELOAD_ERROR,t)})));const{rewardedTime:c}=e.data,l=Math.ceil((s>c?c:s)/1e3).toString();e.countDown.value=l,e.countDownFix.value=l,e.countDownAppend.value="秒后可获得奖励",e.countDownAppendFix.value="秒后可获得奖励",e.countDown.style.width=2===l.length?19:12,e.countDownFix.style.width=2===l.length?19:12,e.countDownAppend.style.width=100,e.countDownAppendFix.style.width=100,tm.call(this),e.adProxy.isValidCondition("widget_gray_close_v2")&&(e.adFeedback.style.hidden=!1,e.close.value="关闭",e.close.style.width=29),12===n&&(e.adProxy.setAppInstallState(!1),qm.call(this));let u=[];(null===(o=e.data.crtInfo)||void 0===o||null===(a=o.wxgame_video_card)||void 0===a?void 0:a.pendant_img)&&(u=u.concat(I_));const{adDynamicList:d}=e.adProxy.data,h=null!=d&&d.length?u.concat(d):u;Om.call(this,h)}},xm=function(e){const t=D_(this),n=(0,yp.ei)(bp.S3,["screenWidth","screenHeight","deviceOrientation"]);return mp(e,{$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:Dn()({},n),time:Date.now()},$scope:{private:t,safeArea:z_}},{"#rewardedVideoIsExpandStyle":()=>fy.call(this)})};let Dm=null;const Om=function(e){const t=D_(this),n=(0,yp.ei)(bp.S3,["screenWidth","screenHeight","deviceOrientation"]);null!=e&&e.length&&(t.dynamicElems||(t.dynamicElems={}),t.dynamicOldStyle||(t.dynamicOldStyle={}),t.dynamicEmitter||Pm.call(this),e.forEach((e=>{const{op:i,expr:r}=e;if(!r||xm.call(this,r))if("insert"===i){var o;const{id:i,parent:r,tpl:l,bubbleEvent:u}=e;if(null!==(o=t.dynamicElems)&&void 0!==o&&o[i]){var a,s,c;if(n.screenWidth===Dm)return;null===(a=(s=t.dynamicElems[i]).remove)||void 0===a||a.call(s),(0,ap.vE)(null===(c=t.dynamicElems[i])||void 0===c?void 0:c.referComponent)}const d=(0,ap.sY)(Sp,{manager:null,reporter:null,emitter:t.dynamicEmitter,adProxy:t.adProxy,template:l,systemInfo:Dn()({},n),scope:{private:t,safeArea:z_},adData:t.adProxy.data,adDatas:t.adProxy.datas,adCustomId:w_,isEmpty:!1},!1);!1!==u&&d.updateBubbleEvent(),t.dynamicElems[i]=d.getRootElement(),t[r]&&t[r].add(t.dynamicElems[i])}else if("setStyle"===i){const{id:n,style:i}=e,r=t[n]||t.dynamicElems[n]||null;if(r){let e=!1;t.dynamicOldStyle&&!t.dynamicOldStyle[n]&&(e=!0,t.dynamicOldStyle[n]={});for(const o of Object.keys(i)){let a=o,s=i[o];if(o.includes("Expr")){const e=o.split("Expr");2===e.length&&([a]=e,s=xm.call(this,s))}e&&(t.dynamicOldStyle[n][a]=r.style[a]),r.style[a]=s}}}else if("setAttrs"===i){const{id:n,attrs:i}=e,r=t[n]||t.dynamicElems[n]||null;if(r)for(const e of Object.keys(i))r[e]=i[e]}})),Dm=n.screenWidth),km.call(this,vp.dA.REWARDEDVIDEOHANDLEDYNAMICDONE)},Pm=function(){const e=D_(this);e.dynamicEmitter=new Jp,e.dynamicEmitter.on("adCustomEvent",(t=>{const{action:n,adCustomId:i,value:r}=t;if(i===w_)if(n===vp.A$.LANDAD){var o;const e=null===(o=t.value)||void 0===o?void 0:o.event;if(!em.call(this,e))return;um.call(this,e,"",b_.REWARD_DYNAMIC_CONTENT)}else if(n===vp.A$.BTNTAP){var a;const e=null===(a=t.value)||void 0===a?void 0:a.event;if(!em.call(this,e))return;um.call(this,e,"button",b_.REWARD_DYNAMIC_BUTTON)}else if(n===vp.A$.REPORTADMONITORDATA){const{id:t,key:n,extInfo:i}=r,o=t?{idKeyGroup:t,idKey:n}:n;e.adProxy.reportAdMonitorData(o,i)}else if(n===vp.A$.REWARDEDVIDEODYNAMIC){const{list:e}=r;(0,bp.uj)(),Om.call(this,e)}}))},Rm=function(e,t){const n=D_(this);if(n.dynamicElems){const i=[];for(const e of Object.keys(n.dynamicElems))i.push(n.dynamicElems[e].ready());Promise.all(i).then((()=>{n.dynamicEmitter&&n.dynamicEmitter.emit("adCustomEvent",{adCustomId:w_,action:e,value:t})}))}},km=function(e,t){const n=D_(this);if(n.dynamicElems)for(const r of Object.keys(n.dynamicElems)){var i;const o=null===(i=n.dynamicElems[r])||void 0===i?void 0:i.referComponent;o&&o.emitComponentEvent(e,t)}},Nm=function(){const e=D_(this);Mm.call(this);const t=gy.call(this);e.keepAliveTimer=setTimeout((()=>{e.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_KEEP_ALIVE,{currentTime:e.currentTime,duration:t.duration,src:e.video.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},Mm=function(){const e=D_(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},Lm=function(e,t=0){var n;if(ny.call(this))return Promise.reject({errMsg:$_});const i=D_(this),{width:r,height:o}=2===i.pageType?i.pageCard.layoutBox:i.card.layoutBox;[0,2,3].includes(t)&&(i.clickCount+=1);const a={slotid:x_,costtype:null!==(n=i.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,click_time:+new Date,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:Number(r)||0,ad_height:Number(o)||0,press_interval:e.pressInterval,block_click:t};return i.adProxy.reportTouchClick(a)},Bm=function(e,t){if(ny.call(this))return Promise.reject({errMsg:$_});const n=D_(this),i=gy.call(this);let r=Promise.resolve();const o={currentTime:n.currentTime,duration:i.duration};let a=n.card,{absoluteX:s,absoluteY:c}=e;2===n.pageType?(a=n.pageCardContainer,s=Math.round(e.x),c=Math.round(e.y)):a=[b_.REWARD_CARD_BUTTON,b_.REWARD_CARD].indexOf(t)>-1?n.card:n.container;const{left:l,top:u}=a.getAbsolutePosition(),{width:d,height:h}=a.layoutBox;return r=n.adProxy.reportClick({clickAbsoluteLeft:s,clickAbsoluteTop:c,clickRelativeLeft:s-l,clickRelativeTop:c-u,pressInterval:e.pressInterval,left:l,top:u,width:d,height:h,videoData:o}),ly.call(this,t),O_(r,"激励视频","点击广告卡片"),Wm.call(this,{stage:1002}),r},Fm=function({playType:e,conditionType:t}){if(ny.call(this))return Promise.reject({errMsg:$_});const n=D_(this),i=gy.call(this);return n.adProxy.reportVideo({playType:e,conditionType:t,playDuration:n.currentTime,videoDuration:i.duration,muted:n.video.muted,rewardedTime:n.data.rewardedTime,isRewarded:n.isRewarded})},Um=function({button:e},t={}){var n;if(ny.call(this))return Promise.reject({errMsg:$_});const i=D_(this),r=gy.call(this),o=5===e?+new Date:0,a=t?t.pressInterval:0;return i.adProxy.reportBehaviorButton({button:e,isEnded:i.isEnded,playDuration:i.currentTime,videoDuration:null!==(n=null==r?void 0:r.duration)&&void 0!==n?n:0,preloadVideo:i.preloadVideo?1:0,preloadVideoSuccess:i.preloadVideoSuccess?1:0,videoFirstPlay:i.videoFirstPlayTime,cardFirstShow:i.cardFirstShowTime,clickCard:o,pressInterval:a,currentPlayUrl:i.video.src,lastFetchUrl:r?r.src:""})},Wm=function({stage:e}){if(ny.call(this))return Promise.reject({errMsg:$_});const t={adtype:2,stage:e};return D_(this).adProxy.reportADFunnelModel(t)},jm=e=>{e?(0,cs.y4)(cs.F0.EVENT_CANVAS_ADS_FIN):(0,cs.y4)(cs.F0.EVENT_CANVAS_ADS_CANCEL)},Gm=function(e=0){var t;if(ny.call(this))return;const n=D_(this);n.adProxy.reportTimePoints({slotid:x_,costtype:null!==(t=n.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,extInfo:{preloadVideoSuccess:n.preloadVideoSuccess?1:0}});const i=n.isRewarded;n.sound.style.hidden=!1,n.soundFix.style.hidden=!1,n.splitLine.style.hidden=!1,n.splitLineFix.style.hidden=!1,n.landingCount=0,n.clickCount=0,n.isPlaying=!1,n.isVideoCalledPlay=!1,n.isFirstPlaySuccess=!1,n.isShowed=!1,n.isRewarded=!1,n.isEnded=!1,n.isData=!1,n.disableGaussBlur=!1;try{var r;if(n.dynamicElems)for(const e of Object.keys(n.dynamicElems)){const t=n.dynamicElems[e];null!=t&&t.remove&&t.remove(),t.referComponent&&(0,ap.vE)(t.referComponent)}if(n.dynamicOldStyle)for(const e of Object.keys(n.dynamicOldStyle)){var o;const t=n[e]||(null===(o=n.dynamicElems)||void 0===o?void 0:o[e])||null,i=n.dynamicOldStyle[e];for(const e of Object.keys(i))t.style[e]=i[e]}n.dynamicElems=null,n.dynamicOldStyle=null,null!==(r=n.dynamicEmitter)&&void 0!==r&&r.off&&n.dynamicEmitter.off("adCustomEvent"),n.dynamicEmitter=null}catch(e){}n.isCancelPlayablePage=!1,n.isLandingPlayblePage=!1,n.playableTipsContent.value="视频结束后可试玩",n.playableGiveUp.value="放弃",n.playableGiveUp.style.color="#07C160",n.playableGiveUp.style.opacity=1,n.playableTipsWrap.style.width=132,n.playableTipsWrap.style.left=0,n.playableTipsWrap.style.hidden=!0,n.cardContainer.style.hidden=!0,n.playableTipsContent.style.width=120,n.playableGiveUp.style.hidden=!0,n.playableCancelBox.style.hidden=!0,n.cardContainer.style.opacity=1,n.rewardPageCostTime=0,n.isShowedExposureReported=!1,n.isViewableExposureReported=!1,n.adProxy.isViewable=!0,bp.S3.isWaGame||(n.isFullscreen=!1),n.downloadProgress.style.width=0,n.pageDownloadProgress.style.width=0,2!==e&&(!bp.S3.isWaGame&&(bp.S3.isIOS||n.data&&n.data.crt_size===xp.vK.CRT_SIZE_REWARD_LANDINGPAGE)?(0,op.Vs)(100).then((()=>{n.emitter.emit("close",{isEnded:i}),jm(i)})):(n.emitter.emit("close",{isEnded:i}),jm(i))),n.adProxy.reset();const a=Cm.call(this);a.catch((()=>{})),n.adFetchResult=a,n.container.style.hidden=!0,n.adCover.hide(),i?Wm.call(this,{stage:1005}):Wm.call(this,{stage:1006}),1===n.pageType?n.pageContainer.style.hidden=!0:2===n.pageType?(n.pageHandler.style.hidden=!0,n.pageCardBody.style.hidden=!0,n.pageMask.style.hidden=!0,n.pageCardTip.style.hidden=!0,n.video.style.padding=8,n.video.style.paddingBottom=16):n.pageType||(n.defaultPageContainer.style.hidden=!0),n.pageHandler.style.hidden=!0,Tm.call(this,{isClose:!0}),bp.S3.isAndroid&&n.adProxy.setInnerAudioOption(!0).catch((()=>{})),n.showTipsTimer&&clearTimeout(n.showTipsTimer),n.exposureTimer&&clearTimeout(n.exposureTimer),n.updateScreenInfoTimer&&clearTimeout(n.updateScreenInfoTimer),n.layoutTimer&&clearTimeout(n.layoutTimer),n.rewardPageTimer&&clearTimeout(n.rewardPageTimer),n.reportDurationTimer&&clearTimeout(n.reportDurationTimer),n.pageType=0,n.imgBaseName="",__("show",n.adType,0),__("close",n.adType,+new Date)},Vm=function(e=0){if(ny.call(this))return Promise.reject({errMsg:$_});const t=D_(this);return ay.call(this)||sy.call(this)?Hm.call(this,e):(Fm.call(this,{playType:t.isEnded?"complete":"partial",conditionType:"close"}),1===e?(Gm.call(this),Promise.resolve()):[2,3].includes(e)?Promise.all([X_.call(this),Gm.call(this,e)]):t.container.animate({top:bp.S3.screenHeight,duration:500}).then((()=>X_.call(this))).then((()=>Gm.call(this))))},Hm=function(e){if(ny.call(this))return Promise.reject({errMsg:$_});const t=D_(this);return sy.call(this)||(t.container.style.top=bp.S3.screenHeight,t.topBar.style.hidden=!0,t.topBarFix.style.hidden=!1,t.dialogClose.value="放弃",t.dialogCancel.value="继续",t.video.style.hidden=!1,t.showDialogContainer=!1),1===e?(Gm.call(this),Promise.resolve()):Promise.all([X_.call(this),Gm.call(this,e)])},zm=function(){if(ny.call(this))return;const e=D_(this);if(e.rewardPageCostTime>=15e3)e.isEnded=!0,e.isRewarded=!0,Vm.call(this),Um.call(this,{button:4});else{const t="暂未获得奖励\n是否继续浏览页面";e.showDialogContainer=!0,e.dialogContainer.style.hidden=!1,e.dialogTitle.value=t,e.adProxy.setRightButtonHide(!0).catch((()=>{}))}},Zm=function(){if(ny.call(this))return;const e=D_(this);if(Mm.call(this),e.isRewarded)Vm.call(this),Um.call(this,{button:4});else{const t="暂未获得奖励\n是否继续观看视频";e.dialogContainer.style.hidden=!1,e.dialogTitle.value=t,_y.call(this,"pause"),e.isPause=!0}},Ym=function(e={}){if(ny.call(this))return;const t=D_(this),n=gy.call(this);var i;(t.notReportExit=!0,t.landingCount+=1,t.landingCount>1)&&t.adProxy.reportRepeatClick({slotId:x_,costType:null!==(i=t.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,clkCnt:t.landingCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName});t.lastLandingTime=+new Date,t.lastJsapiStatus=2,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0;const r=t.adProxy.land(e);if(23===t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(r.then((e=>{const n=/ok/.test(e.errMsg);n&&(0===t.buttonTextType&&(t.button.value="查看公众号",Y_.call(this),Rm.call(this,vp.A$.CHANGEADBTNTEXT,{text:"查看公众号"})),t.data.flooringPage&&1===t.pageType&&0===t.buttonTextType?t.pageButton.value="查看公众号":t.data.flooringPage&&2===t.pageType&&0===t.buttonTextType?t.pageCardButton.value="查看公众号":t.pageType||(t.defaultPageButton.value="查看公众号"),t.expandCardButton.value="查看公众号",t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),t.adProxy.reportAdIDKey({key:ip.IN.REWARDED_VIDEO_FOLLOW_SUCCESS})),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));const i=+new Date;var r;(t.lastJsapiStatus=0,t.lastJsapiCostTime=i-t.lastLandingTime,"private_addContact"===t.lastJsapiName)&&t.adProxy.reportLandingTime({slotId:x_,costType:null!==(r=t.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,openTime:t.lastLandingTime,closeTime:i,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.landingCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:n?2:3,actTypeStr:n?"关注":"取消"});bp.S3.isWaGame||!bp.S3.isAndroid||sy.call(this)||setTimeout((()=>{t.adProxy.hideVirtualBottomNavigationBar().catch((()=>{})),t.container.forceUpdate()}),250)})).catch((()=>{t.lastJsapiStatus=1})),$m.call(this,r)):(t.flooringPageCloseTime=(new Date).getTime(),r.then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===t.lastJsapiName||"navigateToMiniProgram"===t.lastJsapiName||"openADCanvas"===t.lastJsapiName||"launchApplication"===t.lastJsapiName?(t.isLandingPage=!0,Mm.call(this),t.flooringPageIsShow&&(Sm.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageShowTime=0,t.flooringPageCloseTime=0,Am.call(this))):t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((()=>{t.lastJsapiStatus=1}))),ay.call(this)||sy.call(this)){setTimeout((()=>{t.notReportExit=!1}),1e3);const e=t.adProxy.reportVideo({playType:t.isPlaying?"partial":"complete",conditionType:"land",playDuration:t.currentTime,videoDuration:n.duration,muted:t.video.muted});O_(e,"激励视频","跳转落地页")}return r},$m=function(e){if(ny.call(this))return;const t=D_(this),n=e.then((e=>/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):Promise.resolve())).catch((()=>t.adProxy.reportFollow({result:"fail"})));return O_(n,"激励视频","关注"),n},qm=function(){if(ny.call(this))return;const e=D_(this),{appInfo:{apkName:t,versionCode:n,urlScheme:i}}=e.data;e.adProxy.getInstallState(t).then((t=>{if(t.isInstalled&&(void 0===t.versionCode||t.versionCode>=n)){if(e.adProxy.setAppInstallState(!0),e.androidAppState=4,e.button&&i&&i.trim().length>0){if(e.button.value="进入应用",e.pageCardButton.value="进入应用",e.pageButton.value="进入应用",e.defaultPageButton.value="进入应用",e.expandCardButton.value="进入应用",Rm.call(this,vp.A$.CHANGEADBTNTEXT,{text:"进入应用"}),1===e.buttonTextType){const t=e.data.button_action.button_text;e.button.value=t,e.pageCardButton.value=t,e.pageButton.value=t,e.defaultPageButton.value=t,e.expandCardButton.value=t,Rm.call(this,vp.A$.CHANGEADBTNTEXT,{text:t})}Y_.call(this)}if(e.adProxy.isValidCondition("widget_gray_video_download_v2")&&e.downloadButtonText&&i&&i.trim().length>0){if(e.downloadButtonText.value="进入应用",e.downloadProgressText.value="进入应用",1===e.buttonTextType){const t=e.data.button_action.button_text;e.downloadButtonText.value=t,e.downloadProgressText.value=t}if(1===e.pageType&&(e.pageDownloadButtonText.value="进入应用",e.pageDownloadProgressText.value="进入应用",1===e.buttonTextType)){const t=e.data.button_action.button_text;e.pageDownloadButtonText.value=t,e.pageDownloadProgressText.value=t}Y_.call(this)}}else e.adProxy.isValidCondition("widget_gray_video_download_v2")&&4===e.androidAppState&&(e.downloadButtonText.value=e.data.button_action.button_text,e.downloadProgressText.value=e.data.button_action.button_text,Y_.call(this),1===e.pageType&&(e.pageDownloadButtonText.value=e.data.button_action.button_text,e.pageDownloadProgressText.value=e.data.button_action.button_text),e.androidAppState=0)})).catch((()=>{}))},Qm=function(e={}){if(ny.call(this))return;const t=D_(this);Bm.call(this,e,b_.REWARD_DOWNLOAD);const{appInfo:{appName:n,apkName:i,apkUrl:r,appMd5:o,urlScheme:a}}=t.data,{aid:s,traceid:c,apurl:l}=t.adProxy.data;let u=0,d="";if(t.landingCount+=1,t.lastLandingTime=+new Date,t.lastJsapiStatus=0,t.lastJsapiCostTime=0,4===t.androidAppState)t.adProxy.launchApplication(a).catch((()=>{Ym.call(this,{isButton:!0})})),t.lastJsapiName="launchApplication",t.isLandingPage=!0;else if(0===t.androidAppState){const e=[s,c,i.replace(/./g,"_"),0,20,l.indexOf("ad.wx.com")>-1?1:0].join(".");t.adProxy.addDownloadTaskStraight(n,r,o,e).then((e=>{t.androidDownloadId=e.downloadId,setTimeout(Jm.bind(this),M_)})).catch((()=>{Ym.call(this,{isButton:!0})})),t.lastJsapiName="addDownloadTaskStraight",u=4,d="下载"}else 1===t.androidAppState?(t.adProxy.pauseDownloadTask(t.androidDownloadId).catch((()=>{})),t.downloadButtonText.value="继续下载",t.downloadProgressText.value="继续下载",1===t.pageType&&(t.pageDownloadButtonText.value="继续下载",t.pageDownloadProgressText.value="继续下载"),Y_.call(this),t.androidAppState=2,t.lastJsapiName="pauseDownloadTask",u=5,d="暂停"):2===t.androidAppState?(t.adProxy.resumeDownloadTask(t.androidDownloadId).then((()=>{setTimeout(Jm.bind(this),M_)})).catch((()=>{})),t.downloadButtonText.value="暂停下载",t.downloadProgressText.value="暂停下载",1===t.pageType&&(t.pageDownloadButtonText.value="暂停下载",t.pageDownloadProgressText.value="暂停下载"),Y_.call(this),t.androidAppState=1,t.lastJsapiName="resumeDownloadTask",u=6,d="继续"):3===t.androidAppState&&(t.adProxy.installDownloadTask(t.androidDownloadId).catch((()=>{})),t.lastJsapiName="installDownloadTask",u=7,d="安装");var h;u>0&&t.adProxy.reportLandingTime({slotId:x_,costType:null!==(h=t.adProxy.data)&&void 0!==h&&h.is_cpm?1:2,openTime:t.lastLandingTime,clickTime:t.lastLandingTime,clkCnt:t.landingCount,jsapiName:t.lastJsapiName,actTypeInt:u,actTypeStr:d})},Jm=function(e=3){if(ny.call(this))return;const t=D_(this);t.adProxy.queryDownloadTask(t.androidDownloadId).then((e=>{if("download_succ"===e.state)t.downloadButtonText.value="安装应用",t.downloadProgressText.value="安装应用",t.downloadProgress.style.width=t.downloadButton.style.width,1===t.pageType&&(t.pageDownloadButtonText.value="安装应用",t.pageDownloadProgressText.value="安装应用",t.pageDownloadProgress.style.width=t.pageDownloadButton.style.width),t.androidAppState=3,Y_.call(this);else if("downloading"===e.state)t.downloadButtonText.value="暂停下载",t.downloadProgressText.value="暂停下载",t.downloadProgress.style.width=t.downloadButton.style.width*parseInt(e.progress,10)/100,1===t.pageType&&(t.pageDownloadButtonText.value="暂停下载",t.pageDownloadProgressText.value="暂停下载",t.pageDownloadProgress.style.width=t.pageDownloadButton.style.width*parseInt(e.progress,10)/100),t.androidAppState=1,Y_.call(this);else if("download_fail"===e.state){if(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadProgressText.value=t.data.button_action.button_text,t.downloadProgress.style.width=0,1===t.pageType&&(t.pageDownloadButtonText.value=t.data.button_action.button_text,t.pageDownloadProgressText.value=t.data.button_action.button_text,t.pageDownloadProgress.style.width=0,1===t.buttonTextType)){const e=t.data.button_action.button_text;t.pageDownloadButtonText.value=e}t.androidAppState=0,Y_.call(this)}"downloading"!==e.state&&"default"!==e.state||setTimeout(Jm.bind(this),M_)})).catch((()=>{e>0&&Jm.call(this,e-1)}))},Xm=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:n=0,secondGradeDesc:i="",feedbackReason:r=0}){if(ny.call(this))return;const o=D_(this);e&&!n&&(o.clickFirstGradeTime=+new Date),o.adProxy.reportAdFeedbackData({adWidth:bp.S3.screenWidth,adHeight:bp.S3.screenHeight,adPosX:0,adPosY:0,expTime:o.startExposureTime,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?o.clickFirstGradeTime:0,secondGradeId:n,secondGradeDesc:i,secondGradeTime:n?+new Date:0,feedbackReason:r})},Km=function(e){const t=D_(this),n={adWidth:bp.S3.screenWidth,adHeight:bp.S3.screenHeight,adPosX:0,adPosY:0},i={dismatch:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1},quality:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4},duplicate:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}};if(Array.isArray(e))for(const{type:r,expTime:o,isClickAd:a,clickAdTimeMs:s,feedbackTimeMs:c}of e){if("good"===r)continue;const e=i[r]||{};t.adProxy.reportAdFeedbackData(Dn()(Dn()(Dn()({},n),e),{},{expTime:o||0,isClickAd:a,clickAdTimeMs:s||0,secondGradeTime:c||0}))}},ey=function(){const e=D_(this),t=bp.S3.isWaGame?"count":`count_${e.adProxy.getWebviewInfo().currentWebviewId}`,n=m_(t,e.adType)||0;__(t,e.adType,n>0?n-1:0),(0,Uo.Tb)(e.onShow),(0,Uo.b$)(e.onHide),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),Ko.uo.remove(e.container),(0,Xs.bn)(this)},ty=function(){if(ny.call(this))return;const e=D_(this);let t=Promise.resolve();e.isShowed&&(t=X_.call(this).then((()=>{e.adCover.hide(),bp.S3.isAndroid&&e.adProxy.setInnerAudioOption(!0).catch((()=>{})),__("show",e.adType,0),__("close",e.adType,+new Date)}))),t.then((()=>{ey.call(this)})).catch((()=>{ey.call(this)})),this._destroyed=!0},ny=function(){return this._destroyed},iy=function(e){const t=D_(this),n=t.adProxy.reportExposure({exposureType:e,left:0,top:0,width:bp.S3.screenWidth,height:bp.S3.screenHeight});"showed"===e?t.isShowedExposureReported=!0:"viewable"===e&&(t.isViewableExposureReported=!0),O_(n,"激励浏览","原始曝光")},ry=function(){const e=D_(this);return sy.call(this)||(e.container.style.hidden=!1,e.container.style.top=0,e.adCover.show()),e.container.nextLayout().then((()=>ny.call(this)?Promise.reject({errMsg:$_}):(J_.call(this).then((()=>{bp.S3.isWaGame||(e.isFullscreen=!0)})).catch((t=>{e.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR,t)})),Ym.call(this)))).then((t=>{if(sy.call(this)){t?e.adProxy.reportAdMonitorData(ip.IN.REWARD_CHANNELS_CALLBACK_SUCCESS,t):e.adProxy.reportAdMonitorData(ip.IN.REWARD_CHANNELS_CALLBACK_FAILED);const{rewardedDuration:n,feedbackInfo:i}=t||{},r=null!=n&&n>=15;e.isEnded=r,e.isRewarded=r,Vm.call(this),Um.call(this,{button:r?4:1}),Km.call(this,i)}})).catch((t=>{throw __("show",e.adType,0),t}))},oy=function(){var e;return(null===(e=D_(this).data)||void 0===e?void 0:e.crt_size)!==ip.W.CRT_SIZE_REWARD_LANDINGPAGE},ay=function(){var e,t;const n=D_(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===ip.W.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)!==ip.z5.DEST_TYPE_CHANNELS},sy=function(){var e,t;const n=D_(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===ip.W.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)===ip.z5.DEST_TYPE_CHANNELS},cy=function(){const e=D_(this),{product_type:t}=e.data;return[xp.fY.OPEN_PLATFORM_APP_MOB,xp.fY.APPLE_APP_STORE,xp.fY.WECHAT,xp.fY.MINI_GAME].includes(t)||!e.expandCardUseLogoStrategy},ly=function(e){const t=D_(this),{adProxy:n}=t;n.reportMMClickPos({clickPos:e})},uy=function(){const e=D_(this);if(!py.call(this))return;e.disableGaussBlur=!0;const{poster:t,src:n}=gy.call(this);e.video.poster!==t&&(e.video.poster=t),e.video.src!==n&&(e.video.src=n,setTimeout((()=>{e.isVideoCalledPlay&&_y.call(this,"play")}),0)),e.video.style.width=bp.S3.screenWidth,e.video.style.height=bp.S3.screenHeight,dy.call(this)},dy=function(){const e=D_(this);"portrait"===bp.S3.deviceOrientation?e.video.style.bottom=217*bp.S3.screenWidth/160-bp.S3.screenHeight/2:e.video.style.left=43*-bp.S3.screenHeight/96},hy=function(){const e=D_(this),{deviceOrientation:t,screenWidth:n,screenHeight:i}=bp.S3,r="portrait"===t,o=r?i:n,a=r?n:i;e.defaultPageBackgroundImage.style.width=o,e.defaultPageBackgroundImage.style.height=o;const s=(o-a)/-2;r?(e.defaultPageBackgroundImage.style.left=s,e.defaultPageBackgroundImage.style.top=0):(e.defaultPageBackgroundImage.style.left=0,e.defaultPageBackgroundImage.style.top=s)},py=function(){const e=D_(this);return!(!e.data||e.disableGaussBlur)&&(0,f_.zt)(e.data)},fy=function(){const e=D_(this);return!!e.data&&(0,f_.zi)(e.data)},gy=function(){var e,t;const n=D_(this);return py.call(this)&&null!==(e=n.data)&&void 0!==e&&e.gaussVideo?n.data.gaussVideo:(null==n||null===(t=n.data)||void 0===t?void 0:t.shortVideo)||null},_y=function(e){const t=D_(this),{video:n}=t;n&&("play"===e?(t.isVideoCalledPlay=!0,n.play()):"pause"===e?(t.isVideoCalledPlay=!1,n.pause()):"stop"===e&&(t.isVideoCalledPlay=!1,n.stop()))},my=function(){const e=D_(this),{deviceOrientation:t,screenWidth:n,screenHeight:i}=bp.S3,{width:r,height:o}=gy.call(this);if(e.video.style.width=n,e.video.style.height=i,e.video.style.left=0,e.video.style.bottom=0,py.call(this)){if("portrait"===t&&r<o)e.video.style.height=Math.floor(n/r*o),e.video.style.width=n;else if("landscape"===t&&r>o){const t=Math.floor(i*r/o);e.video.style.width=t,e.video.style.height=i,e.video.style.left=(n-t)/2}}else fy.call(this)&&dy.call(this)};class yy extends Xs.wA{constructor({adUnitId:e,multiton:t=!1,pluginId:n=""}){super(),this._destroyed=void 0;const i=D_(this);i.emitter=new Jp,i.androidAppState=0,i.androidDownloadId=0,i.adUnitId=e,i.adType="incentive-video",i.adProxy=new ip.FF({adUnitId:e,adType:"incentive-video",pluginAppid:n}),i.adCover=new pg({adUnitId:e,adType:"incentive-video"}),i.isShowedExposureReported=!1,i.isViewableExposureReported=!1,i.isCardExposureReported=!1,i.dynamicElems=null,i.dynamicOldStyle=null,i.dynamicEmitter=null,i.expandCardUseLogoStrategy=!1,i.rewardPageCostTime=0,i.rewardPageTimer=null,i.showDialogContainer=!1,i.isData=!1,i.isFirstPlay=!1,i.isFirstPlaySuccess=!1,i.isPlaying=!1,i.isVideoCalledPlay=!1,i.isRewarded=!1,i.isEnded=!1,i.isPause=!1,i.currentTime=0,i.cardShowTime=0,i.videoFirstPlayTime=0,i.preloadVideo=!1,i.preloadVideoSuccess=!1,i.cardFirstShowTime=0,i.clickCount=0,i.landingCount=0,i.lastLandingTime=0,i.lastJsapiName="",i.lastJsapiStatus=0,i.lastJsapiCostTime=0,i.isLandingPage=!1,i.landingPageCostTime=0,i.hideTime=0,i.showTime=0,i.startExposureTime=0,i.clickFirstGradeTime=0,i.flooringPageIsShow=!1,i.flooringPageShowTime=0,i.flooringPageCloseTime=0,i.flooringPageState={},i.flooringPageAutoShow=!1,i.showTipsTimer=null,i.exposureTimer=null,i.isCancelPlayablePage=!1,i.isLandingPlayblePage=!1,i.buttonTextType=0,i.isPress=!1,i.startPosX=0,i.startPosY=0,i.lastPosX=0,i.lastPosY=0,i.lastSecondPosX=0,i.lastSecondPosY=0,i.direction="",i.throttleTimer=null,i.timeStamp=0,i.callCount=0,i.distanceList=[],i.startTime=0,i.lastStartTime=0,i.lastMoveTime=0,i.flooringPageInfos={},i.weappTouchEventHandler=null,i.updateScreenInfoTimer=null,i.layoutTimer=null,i.closeEventCount=0,i.reportDurationTimer=null,i.disableGaussBlur=!1,this._destroyed=!1,rp.call(this,P_,S_);const{deviceOrientation:r,screenWidth:o,screenHeight:a}=bp.S3;i.container.style.width=o,i.container.style.height=a,i.container.style.top=a,i.container.style.hidden=!0,i.topBar.style.width=o,i.sound.src=k_,i.soundFix.src=k_,i.appIcon.src=N_,bm.call(this),bp.S3.isIOS&&(i.video.obeyMuteSwitch=!0),Ko.uo.add(i.container),B_&&(i.topBar.style.top=i.topBar.style.top+30,i.topBarFix.style.top=i.topBarFix.style.top+30,i.adFeedbackList.style.top=i.adFeedbackList.style.top+30,i.adFeedbackMenu.style.top=i.adFeedbackMenu.style.top+30);Q_.call(this,["dialogContainer","dialogMask"]),i.dialog.style.top=a>138?(a-138)/2:0,i.dialog.style.left=o>300?(o-300)/2:0,bp.S3.isWaGame||(i.container.fullscreen=!0,i.isFullscreen=!1);const s=Cm.call(this);s.catch((()=>{})),i.adFetchResult=s,i.isSwitched=!1,bp.S3.isWaGame||A_((()=>{if(ny.call(this))return;const{openType:e,createWebviewId:t,lastWebviewId:n}=i.adProxy.getWebviewInfo();if(["navigateTo","switchTab"].includes(e)&&t===n&&(i.isSwitched=!0),["navigateBack","navigateTo"].includes(e)&&t===n&&i.isShowed&&i.isData){const e=i.isFullscreen?3:1;Um.call(this,{button:6}),Vm.call(this,e)}})),i.close.on("click",(e=>{em.call(this,e,!1)&&Zm.call(this)})),i.closeFix.on("click",(e=>{em.call(this,e,!1)&&Zm.call(this)})),i.dialogClose.on("click",(e=>{em.call(this,e,!1)&&(i.dialogContainer.style.hidden=!0,Vm.call(this),Um.call(this,{button:1}))})),i.dialogCancel.on("click",(e=>{em.call(this,e,!1)&&(i.dialogContainer.style.hidden=!0,ay.call(this)?(i.showDialogContainer=!1,Ym.call(this)):(_y.call(this,"play"),Nm.call(this)),Um.call(this,{button:2}))})),i.sound.on("click",(e=>{em.call(this,e,!1)&&(i.video.muted=!i.video.muted,i.sound.src=i.video.muted?k_:R_)})),i.soundFix.on("click",(e=>{em.call(this,e,!1)&&(i.video.muted=!i.video.muted,i.soundFix.src=i.video.muted?k_:R_)})),i.adFeedback.on("click",(e=>{em.call(this,e,!1)&&(i.adFeedbackList.style.hidden=!i.adFeedbackMenu.style.hidden||!i.adFeedbackList.style.hidden,i.adFeedbackList.style.hidden||Xm.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),i.adFeedbackBtn.on("click",(e=>{em.call(this,e,!1)&&(i.adProxy.openFeedbackUrl(bp.S3.isWaGame?1003:1005),i.adFeedbackList.style.hidden=!0,Xm.call(this,{secondGradeId:1,secondGradeDesc:"投诉"}))})),i.adDislikeBtn.on("click",(e=>{em.call(this,e,!1)&&(Xm.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"}),i.adFeedbackList.style.hidden=!0,i.adFeedbackMenu.style.hidden=!1)})),i.adQualityBtn.on("click",(e=>{em.call(this,e,!1)&&(i.adFeedbackMenu.style.hidden=!0,Xm.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),i.dialogCloseTip.style.hidden=!1,(0,op.Vs)(L_).then((()=>{i.dialogCloseTip.style.hidden=!0})))})),i.adDuplicateBtn.on("click",(e=>{em.call(this,e,!1)&&(i.adFeedbackMenu.style.hidden=!0,Xm.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),i.dialogCloseTip.style.hidden=!1,(0,op.Vs)(L_).then((()=>{i.dialogCloseTip.style.hidden=!0})))})),i.adDismatchBtn.on("click",(e=>{em.call(this,e,!1)&&(i.adFeedbackMenu.style.hidden=!0,Xm.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),i.dialogCloseTip.style.hidden=!1,(0,op.Vs)(L_).then((()=>{i.dialogCloseTip.style.hidden=!0})))})),i.video.onTimeUpdate((e=>{const t=Number(e.duration),n=Number(e.position);try{if(ny.call(this)||!i.isShowed)return;if(Nm.call(this),i.isFirstPlay){let e=0;i.showTime>i.videoFirstPlayTime&&(e=i.showTime-i.videoFirstPlayTime),i.adProxy.setTimePoint("p21",{time:Date.now()-1e3*n}),i.adProxy.reportVideoLoadTime({beginTime:i.videoFirstPlayTime,endTime:(new Date).getTime()-Math.floor(1e3*n),departureTime:e,preloadVideo:i.preloadVideo?1:0,preloadVideoSuccess:i.preloadVideoSuccess?1:0,reportType:1}),i.isFirstPlay=!1,Wm.call(this,{stage:1004})}if(i.isPlaying=!0,n>0&&(i.currentTime=1e3*n),n>=1&&!i.isViewableExposureReported){const{width:e,height:t}=i.video.style;i.isViewableExposureReported=!0,i.adProxy.isViewable=!0;const n=i.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:e,height:t});O_(n,"激励视频","可视曝光")}Math.ceil(t-n)<=6&&[3,4].indexOf(i.pageType)>-1&&i.playableGiveUp.style.hidden&&q_.call(this);const{rewardedTime:o}=i.data,{duration:a}=gy.call(this),s=t>o/1e3?o/1e3:t||a/1e3,c=Math.ceil((a>o?o:a)/1e3);if(0===t&&(i.reportDurationTimer&&clearTimeout(i.reportDurationTimer),i.reportDurationTimer=setTimeout((()=>{i.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_DURATION_ZERO,{duration:t,durationFromAd:a,rewardedTime:o})}),1e3)),s>n){let e=Math.ceil(s-n);e>c&&(e=c),i.countDown.value=e.toString(),i.countDownFix.value=e.toString(),i.countDownAppend.value="秒后可获得奖励",i.countDownAppendFix.value="秒后可获得奖励",i.countDown.style.width=2===e.toString().length?19:12,i.countDownFix.style.width=2===e.toString().length?19:12,i.countDownAppend.style.width=100,i.countDownAppendFix.style.width=100}else i.countDown.style.hidden=!0,i.countDownFix.style.hidden=!0,i.sound.style.hidden=!0,i.soundFix.style.hidden=!0,i.splitLine.style.hidden=!0,i.splitLineFix.style.hidden=!0,i.countDownAppend.value="已获得奖励",i.countDownAppendFix.value="已获得奖励",i.countDownAppend.style.width=72,i.countDownAppendFix.style.width=72,i.isRewarded=!0;if((1e3*n>=i.cardShowTime||1e3*n>0)&&i.card.style.hidden){if(i.data.flooringPage&&2===i.pageType&&"portrait"===r?i.pageCardBody.style.hidden=!1:(i.playableTipsWrap.style.hidden=!(i.data.flooringPage&&[3,4].indexOf(i.pageType)>-1),i.card.style.hidden=!1),i.isCardExposureReported)return;i.card.nextLayout((()=>{const{left:e,top:t}=i.card.getAbsolutePosition(),{width:n,height:r}=i.card.layoutBox;i.isCardExposureReported=!0;const o=i.adProxy.reportExposure({exposureType:"incentiveVideoCard",left:e,top:t,width:n,height:r});O_(o,"激励视频","卡片曝光"),i.cardFirstShowTime=(new Date).getTime(),i.data.flooringPage&&2===i.pageType&&(i.showTipsTimer=setTimeout((()=>{sm.call(this)}),3e3))}))}km.call(this,vp.dA.REWARDEDVIDEOTIMEUPDATE,{event:e})}catch(e){i.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_RENDER_ERROR,e)}})),i.video.onEnded((()=>{var e,t;if(ny.call(this)||!i.isShowed)return;i.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_END),Mm.call(this),i.countDown.style.hidden=!0,i.countDownFix.style.hidden=!0,i.sound.style.hidden=!0,i.soundFix.style.hidden=!0,i.splitLine.style.hidden=!0,i.splitLineFix.style.hidden=!0,i.countDownAppend.value="已获得奖励",i.countDownAppendFix.value="已获得奖励",i.countDownAppend.style.width=72,i.countDownAppendFix.style.width=72,i.isRewarded=!0,i.isPlaying=!1,i.isVideoCalledPlay=!1,i.isEnded=!0,i.isPause=!1;const{duration:n}=gy.call(this);i.currentTime=n;const s=null===(e=i.data)||void 0===e||null===(t=e.card)||void 0===t?void 0:t.headBgImg,c=i.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:i.currentTime,videoDuration:n,muted:i.video.muted});if(i.data.flooringPage&&1===i.pageType&&"portrait"===r)i.pageContainer.style.width=o,i.pageContainer.style.height=a,i.pageContainer.style.left=o,i.pageContainer.style.hidden=!1,i.pageHandler.style.hidden=!1,i.pageHandler.style.zIndex=1000003,i.topBar.style.zIndex=1000004,i.pageImgTips.style.zIndex=1000004,i.pageContainer.nextLayout((()=>{vm.call(this)}));else if(i.data.flooringPage&&2===i.pageType&&"portrait"===r)vm.call(this);else if(i.data.flooringPage&&[3,4].indexOf(i.pageType)>-1&&!i.isCancelPlayablePage){let e=i.data.flooringPage.page_url||"";if(!e&&i.data.crtInfo)try{const{wxgame_video_card:{flooring_page:t}}=i.data.crtInfo;e=t.page_url||""}catch(e){}i.adProxy.handleRewardedVideoPlayableLand(e,i.pageType).then((()=>{i.isLandingPlayblePage=!0}))}else!i.pageType&&s&&(i.defaultPageContainer.style.hidden=!1,i.defaultPageContainer.style.opacity=0,i.defaultPageContainer.nextLayout((()=>{vm.call(this)})));O_(c,"激励视频","播放完成")})),i.video.onError((e=>{i.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_LOAD_ERROR,e),Mm.call(this),py.call(this)&&uy.call(this)})),i.playableCancelBox.on("click",(e=>{var t;if(!em.call(this,e))return;if(i.isCancelPlayablePage)return;i.isCancelPlayablePage=!0,i.playableGiveUp.value="已放弃",i.playableGiveUp.style.color="#ffffff",i.playableGiveUp.style.opacity=.6;const n=(0,Op.X1)({text:"已放弃",fontSize:12})||36;i.playableGiveUp.style.width=n,i.playableTipsWrap.style.width=i.playableTipsContent.style.width+n+32,i.adProxy.reportCancelRewardPlayablePage({costtype:null!==(t=i.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,slotid:x_,is_reward:1,is_cancel:1})})),i.pageButton.on("click",(e=>{em.call(this,e)&&um.call(this,e,"button",b_.REWARD_OLD_ENDPAGE_BUTTON)}));const l=e=>t=>{if(!em.call(this,t))return;const n=cy.call(this);if(n&&"wrapper"===e||!n&&["logo","wording"].includes(e))return;const i=[[b_.REWARD_ENDPAGE_HEAD_IMG,n&&"logo"===e],[b_.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED,n&&["wording","wrapper"].includes(e)],[b_.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED,!n&&["wording","wrapper"].includes(e)],[b_.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED,n&&"button"===e],[b_.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED,!n&&"button"===e]].find((([,e])=>e))[0];um.call(this,t,"button"===e?"button":"",i)},u=e=>t=>{if(!em.call(this,t))return;const n=cy.call(this);if(n&&"wrapper"===e||!n&&["logo","wording"].includes(e))return;const i=[[b_.REWARD_EXPAND_CARD_HEAD_IMG,n&&"logo"===e],[b_.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED,n&&["wording","wrapper"].includes(e)],[b_.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED,!n&&["wording","wrapper"].includes(e)],[b_.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED,n&&"button"===e],[b_.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED,!n&&"button"===e]].find((([,e])=>e))[0];um.call(this,t,"button"===e?"button":"",i)};if(i.defaultPageButton.on("click",l("button")),i.defaultPageAppIcon.on("click",l("logo")),i.defaultPageAppName.on("click",l("wording")),i.defaultPageAppWording.on("click",l("wording")),i.defaultPageWordingWrapper.on("click",l("wrapper")),i.expandCardButton.on("click",u("button")),i.expandCardAppIcon.on("click",u("logo")),i.expandCardAppName.on("click",u("wording")),i.expandCardAppWording.on("click",u("wording")),i.expandCardWordingWrapper.on("click",u("wrapper")),i.pageDownloadButton.on("click",(e=>{em.call(this,e)&&Qm.call(this,e)})),i.button.on("click",(e=>{em.call(this,e)&&(bp.S3.isIOS&&46===i.data.product_type&&6===i.data.dest_type?Promise.race([Bm.call(this,e,b_.REWARD_CARD_BUTTON),(0,op.Vs)(500)]).then((()=>{Um.call(this,{button:5},e),Ym.call(this)})).catch((()=>{Um.call(this,{button:5},e),Ym.call(this)})):(Bm.call(this,e,b_.REWARD_CARD_BUTTON),Um.call(this,{button:5},e),23===i.data.product_type?Ym.call(this,{isButton:!0}):Ym.call(this)))})),i.downloadButton.on("click",(e=>{em.call(this,e)&&Qm.call(this,e)})),i.card.on("click",(e=>{em.call(this,e)&&(bp.S3.isIOS&&46===i.data.product_type&&6===i.data.dest_type?Promise.race([Bm.call(this,e,b_.REWARD_CARD),(0,op.Vs)(500)]).then((()=>{Um.call(this,{button:5},e),Ym.call(this)})).catch((()=>{Um.call(this,{button:5},e),Ym.call(this)})):(Bm.call(this,e,b_.REWARD_CARD),Um.call(this,{button:5},e),23===i.data.product_type?Ym.call(this,{toOfficalAccountDetail:!0}):Ym.call(this)))})),i.pageHandler.on("touchstart",(e=>{if(ny.call(this))return;const t=dm.call(this,{event:e,container:"pageHandler"});i.startPosX=t.x,i.startPosY=t.y,i.lastPosX=t.x,i.lastPosY=t.y,i.lastStartTime=(new Date).getTime()})),i.pageHandler.on("touchmove",(e=>{if(ny.call(this))return;const t=i.pageHandler.getAbsolutePosition(),n=t.left+e[0].x,r=t.top+e[0].y,{xMin:o,xMax:a,yMin:s,yMax:c,xContainer:l,yContainer:u}=i.flooringPageInfos;if(n-i.lastPosX!=0&&l&&nm.call(this,{x:n,y:r,direction:"left"})){let e=i[l].style.left;e+=n-i.lastPosX,e>=o&&e<=a&&(i[l].style.left=e,i.lastSecondPosX=i.lastPosX,i.lastPosX=n,i.direction="left",i.lastMoveTime=(new Date).getTime())}if(r-i.lastPosY!=0&&u&&nm.call(this,{x:n,y:r,direction:"top"})){let e=i[u].style.top;e+=r-i.lastPosY,e>=s&&e<=c&&(i[u].style.top=e,i.lastSecondPosY=i.lastPosY,i.lastPosY=r,i.direction="top")}})),i.pageHandler.on("touchend",(e=>{if(ny.call(this))return;const t=dm.call(this,{event:e,container:"pageHandler"}),{xMin:n,xMax:r,yMin:o,yMax:a,xContainer:s,yContainer:c,infos:l}=i.flooringPageInfos;if(l.event=t,l.event&&(l.event.pressInterval=(new Date).getTime()-i.lastStartTime),l.touchClick&&om.call(this,Object.assign({},l,{event:t,max:a,min:o})),"top"===i.direction&&l.yRevise)gm.call(this,Object.assign({},l,{max:a,min:o,direction:"top",imgBox:c}));else if("left"===i.direction&&l.xRevise)gm.call(this,Object.assign({},l,{max:r,min:n,direction:"left",imgBox:s})),Em.call(this);else if("left"===i.direction&&l.xInertia){const e=t.x-i.lastPosX,o=i[s].style.left+5*e;o>=l.xHead&&o<=l.xTail?i[s].style.left=o:am.call(this,Object.assign({},l,{xMax:r,xMin:n,imgBox:s})),Em.call(this)}else i.startPosX=0,i.startPosY=0,i.lastPosX=0,i.lastPosY=0,i.lastSecondPosX=0,i.lastSecondPosY=0,i.direction="";i.direction=""})),i.onShow=()=>{if(!ny.call(this)&&(i.adProxy.setTimePoint("p11"),[3,4].indexOf(i.pageType)>-1&&i.isLandingPlayblePage&&Vm.call(this),!sy.call(this))){if(ay.call(this)&&i.isShowed&&!i.showDialogContainer)return i.rewardPageTimer&&clearTimeout(i.rewardPageTimer),i.rewardPageCostTime+=+new Date-i.hideTime-400,zm.call(this),setTimeout((()=>{i.lastJsapiStatus=0,i.isLandingPage=!1}),10),void(bp.S3.isWaGame||!bp.S3.isAndroid||sy.call(this)||(i.adProxy.hideVirtualBottomNavigationBar().catch((()=>{})),i.layoutTimer=setTimeout((()=>{i.container.forceUpdate()}),250)));!i.isShowed||i.isEnded||i.isPause||setTimeout((()=>{!i.isShowed||i.isEnded||i.isPause||(_y.call(this,"play"),Nm.call(this))}),1e3),i.data&&23===i.data.product_type?i.adProxy.checkFollow(i.data.app.uin).then((e=>{const t=i.data.button_action.button_text;0===i.buttonTextType&&(i.button.value=e?"查看公众号":t,Y_.call(this),Rm.call(this,vp.A$.CHANGEADBTNTEXT,{text:e?"查看公众号":t})),i.data.flooringPage&&2===i.pageType&&0===i.buttonTextType?i.pageCardButton.value=e?"查看公众号":t:i.data.flooringPage&&1===i.pageType&&0===i.buttonTextType?i.pageButton.value=e?"查看公众号":t:i.pageType||(i.defaultPageButton.value=e?"查看公众号":t),i.expandCardButton.value=e?"查看公众号":t,i.adProxy.data.biz_info&&(i.adProxy.data.biz_info.is_subscribed=e?1:0)})):i.data&&12===i.data.product_type&&qm.call(this),i.showTime=+new Date,setTimeout((()=>{var e;(i.flooringPageIsShow&&(i.flooringPageShowTime=+new Date,Em.call(this)),i.isLandingPage)&&(i.lastJsapiStatus=0,i.isLandingPage=!1,i.landingPageCostTime=i.showTime-i.hideTime,i.adProxy.reportLandingTime({slotId:x_,costType:null!==(e=i.adProxy.data)&&void 0!==e&&e.is_cpm?1:2,openTime:i.hideTime,closeTime:i.showTime,stayTime:i.landingPageCostTime,jsapiName:i.lastJsapiName,clickTime:i.lastLandingTime,clkCnt:i.landingCount,retCode:i.lastJsapiStatus,costTime:i.lastJsapiCostTime,actTypeInt:1}),bp.S3.isWaGame||!bp.S3.isAndroid||sy.call(this)||(i.adProxy.hideVirtualBottomNavigationBar().catch((()=>{})),i.layoutTimer=setTimeout((()=>{i.container.forceUpdate()}),250)),i.adProxy.setRightButtonHide(!0).catch((()=>{})))}),10)}},(0,Uo.dN)(i.onShow),i.onHide=()=>{if(ny.call(this))return;const e=gy.call(this);if(i.hideTime=+new Date,ay.call(this)&&i.isShowed){const e=i.adProxy.checkCanvasXmlState();return!e&&!i.isShowedExposureReported&&iy.call(this,"showed"),!e&&!i.isViewableExposureReported&&iy.call(this,"viewable")}if(i.notReportExit||!i.isShowed)return;Mm.call(this);const t=i.adProxy.reportVideo({playType:i.isPlaying?"partial":"complete",conditionType:"exit",playDuration:i.currentTime,videoDuration:e.duration,muted:i.video.muted});O_(t,"激励视频","退出小游戏"),i.flooringPageIsShow&&(i.flooringPageCloseTime=(new Date).getTime(),Sm.call(this,{type:6,staytime:i.flooringPageCloseTime-i.flooringPageShowTime,componentsstartstr:JSON.stringify(i.flooringPageState)}),i.flooringPageShowTime=0,i.flooringPageCloseTime=0,Am.call(this))},(0,Uo.vv)(i.onHide),(0,c.jQ)("onVideoResourceLoad",(e=>{!i.isShowed&&i.video&&i.video.src===e.resource&&(i.preloadVideoSuccess=!0,i.video.src=e.resource,i.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_PRELOAD_SUCCESS))})),!0===t){const e=bp.S3.isWaGame?"count":`count_${i.adProxy.getWebviewInfo().currentWebviewId}`,t=(m_(e,i.adType)||0)+1;__(e,i.adType,t),t>=5&&(console.warn(`系统检测到您创建的激励视频广告实例过多，由于您当前使用的是多例模式，为避免影响${bp.S3.isWaGame?"小游戏":"小程序"}性能，请减少实例创建数量或调用destroy方法销毁无用的实例`),5===t&&i.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_INSTANCE_BROKEN))}}load(){if(ny.call(this))return Promise.reject({errMsg:$_});const e=D_(this);if(e.isShowed)return Promise.reject({errMsg:"can't invoke load() while video-ad is showed"});if(e.isData)return Promise.resolve();const t=Cm.call(this);return e.adFetchResult=t.catch((t=>{const n=-12001===t.errCode?{errMsg:"RewardedVideoAd fail no permission"}:t;throw e.emitter.emit("_error",n),n})),e.adFetchResult}show({branchId:e,branchDim:t}={}){if(ny.call(this))return Promise.reject({errMsg:$_});const n=D_(this);if(n.isShowed)return Promise.resolve();if(!n.isData)return Promise.reject({errMsg:"no advertisement data available, please invoke load()"});if(1===(m_("show",n.adType)||0))return n.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_OTHER_SHOW_ERROR),Promise.reject({errMsg:"can't invoke show() while other video-ad is showed"});Wm.call(this,{stage:1001});const i=(new Date).getTime();return n.isSwitched=!1,__("show",n.adType,1),n.adProxy.setTimePoint("p19"),e?n.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):n.adProxy.resetAnalyseBranchInfo(),n.adFetchResult.then((()=>{if(ny.call(this))return Promise.reject({errMsg:$_});(0,bp.uj)(),Im.call(this);const{screenWidth:e,screenHeight:t}=bp.S3;return bp.S3.isWaGame?n.adProxy.reportVideoLastClick({touchStartX:Math.round(U_),touchStartY:Math.round(W_),touchEndX:Math.round(j_),touchEndY:Math.round(G_),touchDuration:H_,screenWidth:e,screenHeight:t}):(n.weappTouchEventHandler&&(0,sg.sv)(n.weappTouchEventHandler),n.weappTouchEventHandler=(0,sg.L9)(Z_,{aid:n.adProxy.data.aid,traceid:n.adProxy.data.traceid}),(0,c.nY)("emitWeappTouchEvent")),n.adProxy.reportVideoLoadTime({beginTime:i,endTime:(new Date).getTime(),reportType:2}),n.isShowed=!0,n.startExposureTime=0,n.isShowedExposureReported=!1,n.isViewableExposureReported=!1,n.isCardExposureReported=!1,n.adProxy.isViewable=!1,ay.call(this)||sy.call(this)?ry.call(this):(n.adProxy.isValidCondition("widget_gray_video_sound")?(pi(),n.video.muted=!1,bp.S3.isIOS&&(n.video.obeyMuteSwitch=!0),n.sound.src=R_,n.soundFix.src=R_):(n.video.muted=!0,n.sound.src=k_,n.soundFix.src=k_),n.count.style.hidden=!1,n.countDown.style.hidden=!1,n.splitLineLeft.style.hidden=!1,n.countDownFix.style.hidden=!1,n.card.style.hidden=!0,n.container.style.hidden=!1,n.adFeedbackList.style.hidden=!0,n.adCover.show(),n.adProxy.setTimePoint("p15"),n.container.nextLayout().then((()=>(0,op.Vs)(500))).then((()=>{if(ny.call(this))return Promise.reject({errMsg:$_});if(n.isSwitched)return Vm.call(this,1);J_.call(this).then((()=>{n.topBar.style.hidden=!1,n.topBarFix.style.hidden=!0,bp.S3.isWaGame||(n.isFullscreen=!0)})).catch((()=>{n.topBar.style.hidden=!0,n.topBarFix.style.hidden=!1}));const e={top:0,duration:500};return n.container.animate(e).then((()=>{(0,cs.y4)(cs.F0.EVENT_CANVAS_BEFORE_ADS);const{width:e,height:t}=n.video.style,i=n.adProxy.reportExposure({exposureType:"showed",left:0,top:0,width:e,height:t});return n.startExposureTime=+new Date,O_(i,"激励视频","原始曝光"),(0,op.Vs)(500).then((()=>{n.isFirstPlay=!0,n.videoFirstPlayTime=(new Date).getTime(),n.adProxy.setTimePoint("p20"),_y.call(this,"play"),Nm.call(this),km.call(this,vp.dA.REWARDEDVIDEOPLAY)}))})).then((()=>{n.isFirstPlaySuccess=!0;const e=gy.call(this),t=n.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:e.duration,muted:n.video.muted});O_(t,"激励视频","开始播放")})).catch((e=>{const t={errMsg:e,isSwitched:n.isSwitched};return n.adProxy.reportAdMonitorData(ip.IN.REWARDED_VIDEO_ANIMATE_ERROR,t),Vm.call(this,2)}))})).catch((e=>{throw __("show",n.adType,0),e})))})).catch((e=>{throw __("show",n.adType,0),e}))}isReady(){if(ny.call(this))return!1;return D_(this).isData}destory(){ty.call(this)}destroy(){ty.call(this)}onError(e){if(ny.call(this))return;D_(this).emitter.on("_error",e)}offError(e){if(ny.call(this))return;D_(this).emitter.off("_error",e)}onLoad(e){if(ny.call(this))return;D_(this).emitter.on("load",e)}offLoad(e){if(ny.call(this))return;D_(this).emitter.off("load",e)}onClose(e){if(ny.call(this))return;const t=D_(this);t.emitter.on("close",e),e&&"function"==typeof e&&(t.closeEventCount+=1,t.closeEventCount>1&&console.warn("激励视频广告组件检测到您绑定了多次 onClose 事件，绑定重复的事件会产生多次重复的回调，请确认您绑定的事件是否重复，以免造成事件重复回调问题。"))}offClose(e){if(ny.call(this))return;const t=D_(this);t.emitter.off("close",e),e&&"function"==typeof e&&t.closeEventCount>0&&(t.closeEventCount-=1),e||(t.closeEventCount=0)}}var vy=n(9706);const Ay=327,by=249,wy=184,Ey=140,Ty=388,Sy=308,Cy={textAlign:"center",color:"#ffffff",lineBreak:"ellipsis",portrait:{width:247,fontSize:17,height:24,lineHeight:24},landscape:{width:185,fontSize:14,height:20,lineHeight:20}},Iy={zIndex:1000009,position:"absolute",top:8,right:6,width:60,height:20,color:"#ffffff",fontSize:11,lineHeight:20,borderRadius:4,textAlign:"center"},xy={body:{zIndex:1000005,position:"absolute",overflow:"visibal",hidden:!0},container:{zIndex:1000005,position:"absolute",overflow:"hidden",opacity:0,hidden:!0,flexDirection:"column",alignItems:"center",justifyContent:"center"},mask:{top:0,left:0,backgroundColor:"#000000",opacity:.7,position:"absolute",overflow:"hidden"},cancelBox:{marginBottom:8,portrait:{width:Ay,height:36},landscape:{width:by,height:28},flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},cancel:{portrait:{width:36,height:36},landscape:{width:28,height:28}},adContainer:{flexDirection:"column",alignItems:"center",overflow:"hidden",borderRadius:8,portrait:{width:Ay,height:Ty},landscape:{width:by,height:Sy}},adBackground:{position:"absolute",zIndex:1000006,portrait:{marginTop:90,width:Ay,height:Ty},landscape:{marginTop:70,width:by,height:Sy},hidden:!0},adMask:{position:"absolute",zIndex:1000007,backgroundColor:"#000000",opacity:.5,borderRadius:8,portrait:{width:Ay,height:Ty},landscape:{width:by,height:Sy},hidden:!0},adContent:{zIndex:1000008,portrait:{width:Ay,height:204},landscape:{width:by,height:168},flexDirection:"column",alignItems:"center"},adChannelsLiveReserve:Dn()(Dn()({},Iy),{},{hidden:!0,backgroundColor:"#959FC1"}),adChannelsLive:Dn()(Dn()({},Iy),{},{hidden:!0,backgroundColor:"#FF6146",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}),adChannelsLiveIcon:{width:12,height:12,marginRight:4,marginLeft:4},adChannelsLiveText:{width:33,height:20,color:"#ffffff",fontSize:11,lineHeight:20,marginRight:8,textAlign:"center"},adChannelsLiveEnd:Dn()(Dn()({},Iy),{},{hidden:!0,backgroundColor:"#959FC1"}),adWording:{flexDirection:"column",alignItems:"center",justifyContent:"center",portrait:{marginTop:24,marginBottom:12,height:72},landscape:{marginTop:16,marginBottom:10,height:60}},wordingLine0:Cy,wordingLine1:Cy,wordingLine2:Cy,adButtonGroup:{flexDirection:"column",alignItems:"center",justifyContent:"center"},relationLine:{textAlign:"center",fontSize:12,height:16,lineHeight:16,color:"rgba(0, 0, 0, 0.3)",portrait:{width:247,marginBottom:12},landscape:{width:185,marginBottom:10}},adButton:{borderWidth:1,borderColor:"#ffffff",borderRadius:4,textAlign:"center",color:"#ffffff",portrait:{marginBottom:28,width:184,height:40},landscape:{marginBottom:24,width:184,height:32},flexDirection:"column",alignItems:"center",justifyContent:"center"},adButtonText:{textAlign:"center",color:"#ffffff",letterSpacing:1,fontSize:17,height:24,width:184,lineHeight:24},adFeedbackContainer:{position:"absolute",width:60,height:48,zIndex:1000008,top:0,left:0},adFeedback:{zIndex:1000008,width:35,height:16,marginTop:8,marginLeft:6,position:"absolute"},adFeedbackList:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adFeedbackTitle:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{zIndex:1000008,width:134,hidden:!0,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseTip:{hidden:!0,backgroundColor:"#ffffff",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:1000009,portrait:{width:Ay,height:400},landscape:{width:by,height:Sy}},adCloseTipWrap:{width:140,height:200,flex:1,justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:64,height:55},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a",marginTop:20,textAlign:"center"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:10,textAlign:"center"}},Dy={adMedia:{zIndex:1000008,portrait:{width:Ay,height:wy},landscape:{width:by,height:Ey}},adVideoAudioBox:{zIndex:1000008,position:"absolute",bottom:0,left:0,width:40,height:40},adVideoAudioIcon:{position:"absolute",bottom:8,left:8,width:24,height:24,hidden:!1},adVideoCountDown:{position:"absolute",top:8,right:10,color:"#ffffff",fontSize:12,lineHeight:18,width:24,height:18,textAlign:"right"},adVideoAfter:{position:"absolute",portrait:{width:Ay,height:wy},landscape:{width:by,height:Ey},hidden:!0,alignItems:"center",opacity:0},adVideoAfterMask:{position:"absolute",backgroundColor:"#000000",opacity:.7,portrait:{width:Ay,height:wy},landscape:{width:by,height:Ey}},adVideoClickMask:{position:"absolute",zIndex:1000008,borderRadius:6,portrait:{width:Ay,height:wy},landscape:{width:by,height:Ey}},adVideoAfterIcon:{zIndex:1000008,flexDirection:"row",portrait:{width:48,height:48,marginTop:52,marginBottom:8},landscape:{width:36,height:36,marginTop:44,marginBottom:6},alignSelf:"center",borderRadius:4},adVideoAfterText:{zIndex:1000008,portrait:{fontSize:16,width:Ay},landscape:{fontSize:11,width:by},lineHeight:22,color:"#ffffff",textAlign:"center",height:22}},Oy={adMedia:{zIndex:1000008,portrait:{width:Ay,height:wy},landscape:{width:by,height:Ey}}},Py='\n    <view id="ad-feedback-container">\n      <image id="ad-feedback"  bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/adfeedback.png"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  ',Ry=`\n    <view id="ad-video-container" click-state="true">\n      <video id="ad-media" click-state="true" bubble-event="true" controls="false" muted="true" autoplay="false" object-fit="cover" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad">\n        <view id="ad-video-click-mask" click-state="true" bubble-event="true"></view>\n        \n    <text id="ad-video-Count-Down">\n    </text>\n  \n        \n    <view id="ad-video-audio-box">\n      <image id="ad-video-audio-icon" bubble-event="true"></image>\n    </view>\n  \n        \n    <image id="ad-video-after" click-state="true" bubble-event="true" >\n        <view id="ad-video-after-mask" click-state="true" bubble-event="true"></view>\n        <image id="ad-video-after-icon" click-state="true" bubble-event="true"></image>\n        <text id="ad-video-after-text" click-state="true" bubble-event="true"></text>\n    </image>\n  \n        ${Py}\n      </video>\n    </view>\n  `,ky=`\n    <image id="ad-media">\n      ${Py}\n    </image>\n  `,Ny={wordingLineTmpl:'\n  <text bubble-event="true"></text>\n'},My=n(9536),Ly="https://wxa.wxs.qq.com/images/wxapp/new_audio_mute_icon.png";let By=0,Fy=0;const Uy=a.cj,Wy=a.wZ;let jy="",Gy="portrait",Vy=!0;const Hy="image",zy="video";s.Z.onReady((()=>{jy=(0,yp._t)();const e=(0,ve.Ew)();By=e.screenWidth,Fy=e.screenHeight;try{s.Z.global.window.pageOrientation&&(Gy=s.Z.global.window.pageOrientation)}catch(e){}Vy=(0,p.aI)()}));const Zy=0xac3cfbe83299d,Yy="interstitial-ad has been destroyed",$y=function(e,t=!0){if(wv.call(this))return!1;const n=(0,Xs.Wj)(this).adProxy.isTriggerClick(e),i=n?0:1;return t&&Qy.call(this,e,i),n},qy=function(e,t=0){if(wv.call(this))return!1;const n=(0,Xs.Wj)(this);let i=!1,r=0;return n.adProxy.isValidCondition("widget_gray_time_limit_2")&&(r=100*(n.data.condition.widget_gray_time_limit_2||5)),r>0&&(0===n.startExposureTime||+new Date-n.startExposureTime<r)&&(i=!0,n.adProxy.reportAdMonitorData(49,{clickType:t})),n.isShow||(i=!1),i},Qy=function(e,t=0){if(wv.call(this))return;const n=(0,Xs.Wj)(this);if(!n.container||!n.container.layoutBox)return;const{width:i,height:r}=n.container.layoutBox;let o=0;[0,2,3].includes(t)&&(n.clickCount++,o=n.clickCount);const a={slotid:Zy,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:o,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(r,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(a)},Jy=function(e){if(wv.call(this))return;const t=(0,Xs.Wj)(this);if(!t.container||!t.container.layoutBox)return;const{left:n,top:i,width:r,height:o}=t.container.layoutBox,a={currentTime:t.videoCurrentTime,duration:t.videoDuration},s=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-n,clickRelativeTop:e.absoluteY-i,pressInterval:e.pressInterval,left:n,top:i,width:r,height:o,videoData:a});return(0,op._u)(s,"interstitialAd","点击"),Xy.call(this,{stage:1002}),s},Xy=function({stage:e}){if(wv.call(this))return;const t={adtype:3,stage:e};(0,Xs.Wj)(this).adProxy.reportADFunnelModel(t)},Ky=function(e){if(wv.call(this))return;const t=(0,Xs.Wj)(this),n=e.then((e=>/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0)).catch((e=>t.adProxy.reportFollow({result:"fail"})));(0,op._u)(n,"interstitialAd","关注")},ev=function(e=!1){if(wv.call(this))return;const t=(0,Xs.Wj)(this);if((0,op.cM)("插屏广告 - 检查曝光"),!t.container.layoutBox)return(0,op.cM)("插屏广告 - 尚未完成布局，等待下一个loop检查"),(0,op.Vs)(0).then((()=>ev.call(this,e)));const{left:n,top:i,width:r,height:o}=t.container.layoutBox,a=!1===t.container.style.hidden;if(!t.isShowedExposureReported&&a){(0,op.cM)("插屏广告 - 原始曝光"),t.isShowedExposureReported=!0,t.startExposureTime=+new Date,Sv.call(this);const e=t.adProxy.reportExposure({left:n,top:i,width:r,height:o,exposureType:"showed"});(0,op._u)(e,"interstitialAd","原始")}if(!t.isViewableExposureReported&&a&&t.ad_type===Hy){if(!e)return(0,op.cM)("可视曝光第 1 阶段, 需等待 1 秒后再检查"),(0,op.Vs)(1e3).then((()=>ev.call(this,!0)));{(0,op.cM)("插屏广告 - 可视曝光第 2 阶段"),t.isViewableExposureReported=!0,t.adProxy.isViewable=!0;const e=t.adProxy.reportExposure({left:n,top:i,width:r,exposureType:"viewable"});(0,op._u)(e,"interstitialAd","可视")}}},tv=function(e){if(wv.call(this))return;const t=(0,Xs.Wj)(this),n=+new Date,i={slotid:Zy,is_game:Vy?1:0,costtype:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,close_type:e,exposure_duration:n-t.startExposureTime-t.hideDuration,start_time:t.startExposureTime,close_time:n};return t.adProxy.reportCloseAction(i)},nv=function(e,t={}){if(wv.call(this))return;const n=(0,Xs.Wj)(this),{width:i,height:r}=n.adContainer.style,o={click_button:e,cost_type:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,slotid:Zy,is_game:Vy?1:0,pageentertime:+new Date(n.adProxy.getProgramStartTime()),ad_width:parseInt(i,10)||0,ad_height:parseInt(r,10)||0,clientexptime:n.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:By,screen_height:Fy};return n.adProxy.reportAntifraud(o)},iv=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:n=0,secondGradeDesc:i="",feedbackReason:r=0}){if(wv.call(this))return;const o=(0,Xs.Wj)(this),{left:a,top:s,width:c,height:l}=o.container.layoutBox;e&&!n&&(o.clickFirstGradeTime=+new Date),o.adProxy.reportAdFeedbackData({adWidth:By,adHeight:Fy,adPosX:0,adPosY:0,expTime:o.startExposureTime,slotId:Zy,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?o.clickFirstGradeTime:0,secondGradeId:n,secondGradeDesc:i,secondGradeTime:n?+new Date:0,feedbackReason:r})},rv=function(e={}){if(wv.call(this))return;const t=(0,Xs.Wj)(this);return Object.assign({autoCloseTime:t.autoCloseTime,launchTime:t.launchTime,frequencyTime:t.frequencyTime},e)},ov=function(){if(wv.call(this))return;const e=(0,ve.xI)();By=e.screenWidth,Fy=e.screenHeight,jy=By>Fy?"landscape":"portrait"},av=function(){if(wv.call(this))return;const e=(0,Xs.Wj)(this),t=e.adProxy.fetch();return t.catch((t=>e.emitter.emit("_error",t))),e.adFetchResult=t,e.adFetchResult.then((t=>(e.isData=!0,e.data=t||{},e.autoCloseTime=t.card_info&&t.card_info.auto_close_time||15,e.launchTime=t.card_info&&t.card_info.launch_time||15,e.frequencyTime=t.card_info&&t.card_info.frequency_time||15,lv.call(this)))).catch((e=>Promise.reject(e)))},sv=function(e){const t=(0,Xs.Wj)(this),{template:n,style:i}=(e=>{let t="",n="";switch(e){case"image":t=ky,n=Dn()(Dn()({},xy),Oy);break;case"video":t=Ry,n=Dn()(Dn()({},xy),Dy);break;default:t=ky,n=Dn()(Dn()({},xy),Oy)}return{template:`\n  <view id="body">\n    <view id="container">\n      <view id="mask" bubble-event="true"></view>\n      <view id="cancel-box">\n        <image id="cancel" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/interstitialClose.jpeg"></image>\n      </view>\n      <view id="ad-container">\n        <image id="ad-background"></image>\n        <view id="ad-mask"></view>\n        ${t}\n        <text id="ad-channels-live-reserve" value="直播预约"></text>\n        <view id="ad-channels-live">\n          <image id="ad-channels-live-icon" src="https://wxa.wxs.qq.com/images/wxapp/live_icon_1.png"></image>\n          <text id="ad-channels-live-text" value="直播中"></text>\n        </view>\n        <text id="ad-channels-live-end" value="直播结束"></text>\n        <view id="ad-content">\n          <view id="ad-wording">\n          </view>\n          <view id="ad-button-group">\n            <text id="relation-line">placeholder</text>\n            <view id="ad-button" click-state="true">\n              <text id="ad-button-text" click-state="true" bubble-event="true"></text>\n            </view>\n          </view>\n        </view>\n        <view id="ad-close-tip">\n          <view id="ad-close-tip-wrap">\n            <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=b7cf6bfe332cf0a981234fdfd5bde985&filekey=3033020101041f301d02016d040253480410b7cf6bfe332cf0a981234fdfd5bde985020207b7040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353331363030303733623437313336666664393331323630333230613030303030303664&bizid=1023"></image>\n            <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n            <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n  `,style:n}})(t.ad_type);t.cardStyle=i,t.cardXOM=My(n).root,rp.call(this,t.cardXOM,i),Ko.uo.add(t.body),t.container.on("click",(e=>{if($y.call(this,e,!1)&&!t.isShowCloseTip&&!qy.call(this,e,4)){if(t.isClosing)return Promise.resolve();yv.call(this,1),nv.call(this,4,e)}})),t.cancelBox.on("click",(e=>{if(t.isShow||t.adProxy.reportAdMonitorData(124,{isClosing:t.isClosing}),$y.call(this,e,!1)&&!t.isShowCloseTip&&!qy.call(this,e,3)){if(t.isClosing)return Promise.resolve();yv.call(this,0),nv.call(this,3,e)}})),t.adFeedbackContainer.on("click",(e=>{$y.call(this,e,!1)&&(qy.call(this,e)||(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||iv.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),t.adFeedbackBtn.on("click",(e=>{$y.call(this,e,!1)&&(qy.call(this,e)||(t.adProxy.openFeedbackUrl(Vy?1007:1006),t.adFeedbackList.style.hidden=!0,iv.call(this,{secondGradeId:1,secondGradeDesc:"投诉"})))})),t.adDislikeBtn.on("click",(e=>{$y.call(this,e,!1)&&(qy.call(this,e)||(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,iv.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),t.adQualityBtn.on("click",(e=>{$y.call(this,e,!1)&&(qy.call(this,e)||(t.adFeedbackMenu.style.hidden=!0,iv.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),yv.call(this,7),nv.call(this,8,e)))})),t.adDuplicateBtn.on("click",(e=>{$y.call(this,e,!1)&&(qy.call(this,e)||(t.adFeedbackMenu.style.hidden=!0,iv.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),yv.call(this,7),nv.call(this,8,e)))})),t.adDismatchBtn.on("click",(e=>{$y.call(this,e,!1)&&(qy.call(this,e)||(t.adFeedbackMenu.style.hidden=!0,iv.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),yv.call(this,7),nv.call(this,8,e)))})),t.adButton.on("click",(e=>{$y.call(this,e)&&(qy.call(this,e,1)||vv.call(this,e,1))})),t.adWording.on("click",(e=>{nv.call(this,5,e)})),t.ad_type===Hy&&t.adMedia.on("click",(e=>{t.adProxy.isValidCondition("widget_gray_optimizedstyle")?$y.call(this,e)&&(qy.call(this,e,2)||vv.call(this,e,2)):nv.call(this,2,e)})),t.ad_type===zy&&(t.adVideoClickMask.on("click",(e=>{$y.call(this,e)&&(qy.call(this,e,2)||vv.call(this,e,2))})),t.adVideoAfter.on("click",(e=>{$y.call(this,e)&&(qy.call(this,e,2)||vv.call(this,e,2))})),t.adVideoAudioBox.on("click",(e=>{$y.call(this,e,!1)&&(qy.call(this,e,1)||(t.adMedia.muted=!t.adMedia.muted,t.adVideoAudioIcon.src=t.adMedia.muted?Ly:"https://wxa.wxs.qq.com/images/wxapp/new_audio_icon.png"))})),t.adMedia.onTimeUpdate((({duration:e,position:n})=>{if(wv.call(this))return;if(Ev.call(this),t.adMedia.autoplay=!1,n>0&&(t.videoCurrentTime=1e3*n),t.isFirstPlay){t.adProxy.setTimePoint("p21",{time:Date.now()-1e3*n});let e=0;t.showTime>t.videoFirstPlayTime&&(e=t.showTime-t.videoFirstPlayTime),t.adProxy.reportVideoLoadTime({beginTime:t.videoFirstPlayTime,endTime:(new Date).getTime()-parseInt(1e3*n),departureTime:e,reportType:1,preloadVideo:t.preloadVideo?1:0,preloadVideoSuccess:t.preloadVideoSuccess?1:0}),t.isFirstPlay=!1,Xy.call(this,{stage:1004}),t.isFirstPlaySuccess=!0,t.adProxy.reportAdIDKey({key:103})}if(n>=1&&!t.isViewableExposureReported){const{width:e,height:n}=t.adMedia.style;t.isViewableExposureReported=!0,t.adProxy.isViewable=!0;const i=t.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:e,height:n});(0,op._u)(i,"插屏视频","播放曝光")}const i=Math.ceil(e-n);t.adVideoCountDown.value=`${i.toString()}s`,Uy&&e-n<.6&&t.adVideoAfter.style.hidden&&(t.adVideoAfter.style.hidden=!1,t.adVideoAfter.animate({opacity:1,duration:350}),t.adVideoAudioBox.style.hidden=!0,t.adVideoCountDown.style.hidden=!0),t.videoDuration=1e3*e})),t.adMedia.onEnded((()=>{t.videoCurrentTime=t.videoDuration,t.isEnded=!0,t.isPlaying=!1,Tv.call(this);const e=t.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:t.videoCurrentTime,videoDuration:t.videoDuration,muted:t.adMedia.muted});(0,op._u)(e,"插屏视频","播放完成"),t.adVideoAfter.style.hidden=!1,t.adVideoAudioBox.style.hidden=!0,t.adVideoCountDown.style.hidden=!0,Wy&&t.adVideoAfter.animate({opacity:1,duration:300}),t.adProxy.reportAdMonitorData({key:104})})),t.adMedia.onError((e=>{Tv.call(this),t.adProxy.reportAdMonitorData(101,e)})))},cv=function(){if(wv.call(this))return;const e=(0,Xs.Wj)(this),{width:t,height:n}=e.data,i="portrait"===jy?Ay/t:by/t,r="portrait"===jy?Ty/n:Sy/n,o="portrait"===jy?By/375:Fy/375;e.adMedia.scale=i;const a=Object.keys(e.cardStyle);a.forEach((t=>{if(e.cardStyle[t].hasOwnProperty(jy)){const n=e.cardStyle[t][jy];Object.keys(n).forEach((i=>{e[t]&&(e[t].style[i]=n[i],e.cardStyle[t][i]=n[i])}))}})),e.adBackground.scale=r;const s=t*r;e.adBackground.style.width=e.cardStyle.adBackground.width=s,"portrait"===jy?(e.adMedia.style.width=e.cardStyle.adMedia.width=Ay,e.adMedia.style.height=e.cardStyle.adMedia.height=wy,e.adBackground.style.height=e.cardStyle.adBackground.height=Ty,e.adBackground.style.left=e.cardStyle.adBackground.left=0-(s-Ay)/2):"landscape"===jy&&(e.adMedia.style.width=e.cardStyle.adMedia.width=by,e.adMedia.style.height=e.cardStyle.adMedia.height=Ey,e.adBackground.style.height=e.cardStyle.adBackground.height=Sy,e.adBackground.style.left=e.cardStyle.adBackground.left=0-(s-by)/2);const c=["width","height","fontSize","lineHeight","borderRadius"];return a.forEach((t=>{if(!["container","mask","body"].includes(t))if(c.forEach((n=>{e[t]&&e[t].style.hasOwnProperty(n)&&(e[t].style[n]=e.cardStyle[t][n]*o)})),"adWording"===t)e[t].style.marginTop=e.cardStyle[t].marginTop*o;else if("adButton"===t)e[t].style.marginBottom=e.cardStyle[t].marginBottom*o;else if("adVideoAfterIcon"===t)e[t].style.marginTop=e.cardStyle[t].marginTop*o,e[t].style.marginBottom=e.cardStyle[t].marginBottom*o;else if(0===t.indexOf("wordingLine")){const n="portrait"===jy?Ay:by;e[t]&&e[t].style&&(e[t].style.width=n*o)}})),e.adProxy.isValidCondition("widget_gray_close_v2")&&(e.adFeedbackList.style.height=98,e.adFeedbackBtn.style.height=32,e.adDislikeBtn.style.height=32,e.adCloseBtnLineDislike0.style.hidden=!1,e.adCloseBtnLineDislike1.style.hidden=!1,e.adCloseBtnLineDislike2.style.hidden=!1,e.adCloseBtnLineDislike3.style.hidden=!1,e.adDislikeBtn.style.hidden=!1),e.container.style.width=By,e.container.style.height=Fy,e.body.style.width=By,e.body.style.height=Fy,e.mask.style.width=By,e.mask.style.height=Fy,e.container.nextLayout().then((()=>((0,op.cM)("updateUI 完成"),!Vy&&Uy?e.container.forceUpdate():Promise.resolve())))},lv=function(){if(wv.call(this))return;const e=(0,Xs.Wj)(this);try{const{app:t,appInfo:{apkName:n,channelId:i,urlScheme:r},product_type:o,dest_type:a,crt_size:s,crtInfo:c,button_action:l,image_url:u,card_info:{bg_color:d,font_color:h,bg_img:p,desc:f,thumb:g,title:_},condition:m,extBackComm:y}=e.data,v=c&&c[0]&&c[0].card_info&&c[0].card_info.mp_tag_type;switch(s){case 701:e.ad_type=Hy;break;case 913:e.ad_type=zy;break;default:e.ad_type=Hy}if(e.body&&Ko.uo.remove(e.body),sv.call(this),e.body.fullscreen=!0,Vy||(e.body.style.fixed=!0),e.ad_type===zy){const{short_video:{thumb_url:t,video_url:n,video_duration:i}}=e.data;e.adMask.style.hidden=!0,e.adBackground.style.hidden=!0,e.adVideoAfter.style.hidden=!0,e.adVideoAudioIcon.src=Ly,e.adVideoAfter.src=p,e.adVideoAfterIcon.src=g,e.adVideoAfterText.value=_,e.videoDuration=1e3*i,e.adMedia.autoplay=!1,Uy&&e.adMedia.src==n&&e.adMedia.seek(0),Uy?(e.adMedia.poster=t,(0,op.Vs)(500).then((()=>{e.adMedia.src=n,e.adProxy.setTimePoint("p8")}))):(e.adProxy.setTimePoint("p8"),e.adMedia.src=n,e.adMedia.poster=t),Wy&&(e.preloadVideo=!0,e.preloadVideoSuccess=!1,e.adProxy.preloadVideo([n]).catch((t=>{e.adProxy.reportAdMonitorData(107,t)}))),e.adProxy.reportVideoLoadTime({beginTime:e.fetchBeginTime,endTime:(new Date).getTime(),reportType:2}),e.adProxy.reportAdIDKey({key:98})}else e.ad_type===Hy&&(e.adMedia.src=u,e.adMask.style.hidden=!1,e.adBackground.style.hidden=!1,e.adProxy.reportAdIDKey({key:100}));let A;if(d?(e.adMask.style.opacity=1,e.adMask.style.backgroundColor=d,A=h,e.relationLine.style.color=h,e.adButton.style.color=h,e.adButton.style.borderColor=h,e.adButtonText.style.color=h,e.adBackground.style.hidden=!0):e.adProxy.isValidCondition("widget_gray_optimizedstyle")?(e.adContainer.style.borderRadius=8,e.adContent.style.backgroundColor="#ffffff",A="#000000",e.relationLine.style.color="#b3b3b3",e.adButton.style.color="#ffffff",e.adButton.style.borderColor="#07c160",e.adButton.style.backgroundColor="#07c160",e.adButtonText.style.color="#ffffff",e.adBackground.style.hidden=e.ad_type===zy):(e.adMask.style.opacity=.5,e.adMask.style.backgroundColor="#000000",A="#ffffff",e.relationLine.style.color="#ffffff",e.adButton.style.color="#ffffff",e.adButton.style.borderColor="#ffffff",e.adButtonText.style.color="#ffffff",e.adBackground.style.hidden=e.ad_type===zy,e.adBackground.src=p),f.forEach(((t,n)=>{const i=`wordingLine${n}`,{root:r}=My(Ny.wordingLineTmpl);r.attributes.id=i;const o=Xs.Ue.call(this,r);o.value=t,o.style.color=A,e.adWording.add(o)})),e.adButtonText.value=l.button_text,m.widget_gray_interstitialAd_insurance_tips&&21474837086===y.ams_second_industry_id&&(e.adButtonText.value="点击跳转广告详情页",e.adButtonText.style.width=218,e.adButton.style.width=218),e.buttonTextType=l.text_type||0,8===v){const t=+new Date;(0,Dp.uQ)({buttonText:l.button_text,aid:e.adProxy.data.aid}).then((n=>{const i=+new Date;if(e.adProxy.reportRelationFetchDuration({startTime:t,endTime:i,showTime:e.showDetailTime||0}),n){const{count:t,descText:i}=n,r=`— 最近已有${t}人${i} —`;e.relationLine.value=r}else e.relationLine.value=""})).catch((t=>{e.relationLine.value="",e.adProxy.reportAdMonitorData(116,t)}))}12===o?(e.adProxy.setAppInstallState(!1),hv.call(this)):23===o&&t.isFollowed&&0===e.buttonTextType&&(e.adButtonText.value="查看公众号"),e.adProxy.preloadLanding(),e.emitter.emit("load"),e.container.ready().then((()=>{(0,op.cM)("interstitialAd container 及其子元素 ready"),e.emitter.emit("ready")})),e.adProxy.reportAdIDKey({key:108})}catch(t){return e.adProxy.reportAdIDKey({key:110}),e.adProxy.reportAdMonitorData(40,t),e.adProxy.reportAdIDKey({key:109}),Promise.reject(t)}},uv=function(e){if(wv.call(this))return;const t=(0,Xs.Wj)(this);t.clickCount>1&&t.adProxy.reportRepeatClick({slotId:Zy,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,clkCnt:t.clickCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName});const n=t.adProxy.land(e);if(23===t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(n.then((e=>{const n=/ok/.test(e.errMsg);n&&0===t.buttonTextType&&(t.adButtonText.value="查看公众号",t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),t.adProxy.reportAdIDKey({key:41})),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));const i=+new Date;t.lastJsapiStatus=0,t.lastJsapiCostTime=i-t.lastLandingTime,"private_addContact"==t.lastJsapiName&&t.adProxy.reportLandingTime({slotId:Zy,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,openTime:t.lastLandingTime,closeTime:i,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:n?2:3,actTypeStr:n?"关注":"取消"})})).catch((e=>{t.lastJsapiStatus=1})),Ky.call(this,n)):n.then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==t.lastJsapiName||"navigateToMiniProgram"==t.lastJsapiName||"openADCanvas"==t.lastJsapiName||"launchApplication"==t.lastJsapiName?(t.isLandingPage=!0,Tv.call(this)):t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((e=>{t.lastJsapiStatus=1})),t.ad_type===zy){const e=t.adProxy.reportVideo({playType:t.isPlaying?"partial":"complete",conditionType:"land",playDuration:t.videoCurrentTime,videoDuration:t.videoDuration,muted:t.adMedia.muted});(0,op._u)(e,"插屏视频","跳转")}},dv=function(){if(wv.call(this))return;const e=(0,Xs.Wj)(this);return(0,op.Vs)(10).then((()=>e.adFetchResult.then((()=>{if(e.isLandingPage){e.lastJsapiStatus=0,e.isLandingPage=!1;const t=+new Date;e.landingPageCostTime=t-e.hideTime,e.adProxy.reportLandingTime({slotId:Zy,costType:e.adProxy.data&&e.adProxy.data.is_cpm?1:2,openTime:e.hideTime,closeTime:t,stayTime:e.landingPageCostTime,jsapiName:e.lastJsapiName,clickTime:e.lastLandingTime,clkCnt:e.clickCount,retCode:e.lastJsapiStatus,costTime:e.lastJsapiCostTime,actTypeInt:1}),yv.call(this,3)}e.adButton&&23===e.data.product_type?e.adProxy.checkFollow(e.data.app.uin).then((t=>{0===e.buttonTextType&&(e.adButtonText.value=t?"查看公众号":e.data.button_action.button_text),e.adProxy.data.biz_info&&(e.adProxy.data.biz_info.is_subscribed=t?1:0)})):12===e.data.product_type&&hv.call(this)})).catch((()=>{}))))},hv=function(){if(wv.call(this))return;const e=(0,Xs.Wj)(this);if(!e.data)return;const{appInfo:{apkName:t,versionCode:n,urlScheme:i}}=e.data;e.adProxy.getInstallState(t).then((t=>{t.isInstalled&&(void 0===t.versionCode||t.versionCode>=n)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),i&&i.trim().length>0?e.adButtonText.value="进入应用":e.adButtonText.value="查看应用",1===e.buttonTextType&&(e.adButtonText.value=e.data.button_action.button_text))})).catch((e=>{}))},pv=function(e){if(!e||"function"!=typeof e)return new Promise((e=>pv.call(this,e)));const t=(0,Xs.Wj)(this);t.isReady?e():t.emitter.on("ready",e)},fv=function(){if(wv.call(this))return Promise.reject({errMsg:Yy});const e=(0,Xs.Wj)(this);return e.onceSwitched=!1,e.startShow=+new Date,e.body.style.width=By,e.body.style.height=Fy,!Vy&&Uy&&(e.body.style.hidden=!1),Promise.resolve().then((()=>{if(ov.call(this),wv.call(this))return Promise.reject({errMsg:Yy});if(e.isShow=!0,e.isShowCloseTip=!1,e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!0,e.ad_type===zy){e.videoFirstPlayTime=(new Date).getTime(),e.adProxy.setTimePoint("p20"),Ev.call(this),e.adMedia.play(),e.adMedia.autoplay=!0,e.isFirstPlay=!0;const t=e.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:e.videoDuration,muted:e.adMedia.muted});e.adProxy.reportAdIDKey({key:99}),(0,op._u)(t,"插屏视频","开始播放")}return cv.call(this).then((()=>(e.body.style.hidden&&(e.body.style.hidden=!1),e.container.style.hidden=!1,e.isSwitched?yv.call(this,6):e.container.animate({opacity:1,duration:300}).then((()=>(e.showDetailTime=+new Date,e.container.nextLayout((()=>ev.call(this)))))).catch((t=>{const n={errMsg:t,isSwitched:e.isSwitched,onceSwitched:e.onceSwitched,startShow:e.startShow,enterRoute:e.enterRoute,enterTime:e.enterTime,outRoute:e.outRoute,outTime:e.outTime,lastRoute:e.lastRoute};return e.adProxy.reportAdMonitorData(36,n),yv.call(this,6).then((()=>Promise.reject({errCode:2004,errMsg:"广告渲染失败，或因小程序页面切换导致广告渲染失败"})))})))))}))},gv=function({branchId:e,branchDim:t}={}){if(wv.call(this))return Promise.reject({errMsg:Yy});const n=(0,Xs.Wj)(this);if(1===(function(){if(g_.hasOwnProperty("show")){const e=Object.keys(g_.show).map((e=>g_.show[e]));return Math.max(...e)}}()||0))return n.adProxy.reportAdMonitorData(44,rv.call(this)),Promise.reject({errCode:2003,errMsg:"当前正在播放激励视频广告或者插屏广告，不允许再次展示插屏广告"});const{createWebviewId:i,currentWebviewId:r}=n.adProxy.getWebviewInfo();return i!==r?(n.adProxy.reportAdMonitorData(45,rv.call(this)),Promise.reject({errCode:2005,errMsg:"插屏广告并非当前页面调用，不允许展示插屏广告"})):(n.adProxy.setTimePoint("p19"),n.isSwitched=!1,__("show",n.adType,1),n.showTime=+new Date,n.fetchBeginTime=(new Date).getTime(),e?n.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):n.adProxy.resetAnalyseBranchInfo(),n.adFetchResult.catch((()=>Promise.reject({errMsg:"no ad data"}))).then((()=>{const e=+new Date-+new Date(n.adProxy.getProgramStartTime());if(e<=1e3*n.launchTime)return n.adProxy.reportAdMonitorData(42,rv.call(this,{startInterval:e})),Promise.reject({errCode:2001,errMsg:"小程序启动一定时间内不允许展示插屏广告"});const t=function(){if(g_.hasOwnProperty("close")){const e=Object.keys(g_.close).map((e=>g_.close[e]));return Math.max(...e)}}()||0,i=+new Date-t;return i<=1e3*n.frequencyTime?(n.adProxy.reportAdMonitorData(43,rv.call(this,{closeInterval:i})),Promise.reject({errCode:2002,errMsg:"距离小程序插屏广告或者激励视频广告上次播放时间间隔不足，不允许展示插屏广告"})):(Xy.call(this,{stage:1001}),pv.call(this).then((()=>fv.call(this))).then((()=>{n.adProxy.reportAdMonitorData(46,rv.call(this))})))})).catch((e=>(__("show",n.adType,0),Promise.reject(e)))))},_v=function(){if(wv.call(this))return;const e=(0,Xs.Wj)(this);e.androidAppState=0,e.isData=!1,e.isShow=!1,e.startExposureTime=0,e.isShowedExposureReported=!1,e.isViewableExposureReported=!1,e.adProxy.isViewable=!1,e.lastCloseTime=0,e.buttonTextType=0,e.startExposureTime=0,e.clickCount=0,e.lastLandingTime=0,e.lastJsapiName="",e.lastJsapiStatus=0,e.lastJsapiCostTime=0,e.isLandingPage=!1,e.landingPageCostTime=0,e.hideTime=0,e.hideDuration=0,e.body.style.hidden=!0,e.container.style.hidden=!0,e.isReady=!1,e.videoFirstPlayTime=0,e.isEnded=!1,e.fetchBeginTime=0,e.videoCurrentTime=0,e.videoDuration=0,e.isPlaying=!1,e.isFirstPlay=!1,e.isFirstPlaySuccess=!1,e.isSwitched=!1,e.onceSwitched=!1,e.startShow=0,e.showDetailTime=0,e.isEnded?Xy.call(this,{stage:1005}):Xy.call(this,{stage:1006}),__("show",e.adType,0),__("close",e.adType,+new Date),Cv.call(this,"none"),!Vy&&Uy?(0,op.Vs)(100).then((()=>{e.emitter.emit("close")})):e.emitter.emit("close"),e.adProxy.reset()},mv=function(e){if(wv.call(this))return;const t=(0,Xs.Wj)(this);return t.adProxy.reportTimePoints({slotid:Zy,costtype:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,extInfo:{preloadVideoSuccess:t.preloadVideoSuccess?1:0}}),Promise.resolve().then((()=>[4,6].includes(e)?Promise.resolve():t.container.animate({opacity:0,duration:300}))).then((()=>(tv.call(this,e),2===e?nv.call(this,6):3===e&&nv.call(this,7),_v.call(this),4===e?Promise.resolve():av.call(this))))},yv=function(e){if(wv.call(this))return;const t=(0,Xs.Wj)(this);return t.isClosing?Promise.resolve():t.container?(t.isClosing=!0,t.ad_type===zy&&(t.adProxy.reportVideo({playType:t.isEnded?"complete":"partial",conditionType:"close",playDuration:t.videoCurrentTime,videoDuration:t.videoDuration,muted:t.adMedia.muted}),t.adMedia.autoplay=!1,t.adMedia.pause(),Tv.call(this),t.adMedia.muted=!0,t.adVideoAfter.style.opacity=0),t.container.ready().then((()=>mv.call(this,e))).then((()=>t.isClosing=!1)).catch((e=>{t.isClosing=!1,t.adProxy.reportAdMonitorData(126,e)}))):(t.adProxy.reportAdIDKey({key:125}),Promise.resolve())},vv=function(e,t){const n=(0,Xs.Wj)(this);if(n.isShow||n.adProxy.reportAdMonitorData(123,t),wv.call(this))return;const{appInfo:{apkName:i,channelId:r,urlScheme:o},product_type:a,dest_type:s}=n.data;12===a&&Wy&&4===n.androidAppState&&o&&o.trim().length>0?(Jy.call(this,e),nv.call(this,t,e),n.adProxy.launchApplication(o).catch((e=>{})),n.lastJsapiName="launchApplication",n.isLandingPage=!0):Uy&&46===a&&6===s?Promise.race([Jy.call(this,e),(0,op.Vs)(500)]).then((()=>{nv.call(this,t,e),uv.call(this)})).catch((()=>{nv.call(this,t,e),uv.call(this)})):(Jy.call(this,e),nv.call(this,t,e),uv.call(this))},Av=function(){const e=(0,Xs.Wj)(this);(0,Uo.Tb)(e.handleEnterForeground),(0,Uo.b$)(e.handleEnterBackground),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),Ko.uo.remove(e.body),(0,Xs.bn)(this)},bv=function(){wv.call(this)||(pv.call(this).then((()=>{const e=(0,Xs.Wj)(this);e.isShow&&(__("show",e.adType,0),__("close",e.adType,+new Date)),Av.call(this)})),this._destroyed=!0)},wv=function(){return this._destroyed},Ev=function(){const e=(0,Xs.Wj)(this);Tv.call(this),e.keepAliveTimer=setTimeout((()=>{e.adProxy.reportAdMonitorData(153,{currentTime:e.videoCurrentTime,duration:e.videoDuration,src:e.adMedia.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},Tv=function(){const e=(0,Xs.Wj)(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},Sv=function(){const e=(0,Xs.Wj)(this);e.ad_type===Hy&&e.adProxy.getChannelsLiveStatus().then((e=>{Cv.call(this,e)}))},Cv=function(e){const t=(0,Xs.Wj)(this),n={adChannelsLiveReserve:!1,adChannelsLive:!1,adChannelsLiveEnd:!1};"onlive"===e?n.adChannelsLive=!0:"end"===e?n.adChannelsLiveEnd=!0:"reserve"===e&&(n.adChannelsLiveReserve=!0);for(const e of Object.keys(n))t[e]&&t[e].style&&(t[e].style.hidden=!n[e])};class Iv extends Xs.wA{constructor({adUnitId:e,pluginId:t=""}){super();const n=(0,Xs.Wj)(this);n.adUnitId=e,n.adType="interstitialAd",n.cardXOM="",n.cardStyle="",n.ad_type="",n.emitter=new jo.Z,n.adProxy=new ip.FF({adUnitId:e,adType:"interstitialAd",pluginAppid:t}),n.androidAppState=0,n.isShowedExposureReported=!1,n.isViewableExposureReported=!1,n.isReady=!1,n.isShow=!1,n.emitter.on("ready",(()=>n.isReady=!0)),n.lastCloseTime=0,n.autoCloseTime=15,n.launchTime=15,n.frequencyTime=15,n.startExposureTime=0,n.clickCount=0,n.lastLandingTime=0,n.lastJsapiName="",n.lastJsapiStatus=0,n.lastJsapiCostTime=0,n.isLandingPage=!1,n.landingPageCostTime=0,n.hideTime=0,n.showTime=0,n.hideDuration=0,n.isClosing=!1,n.isShowCloseTip=!1,n.clickFirstGradeTime=0,n.videoFirstPlayTime=0,n.isEnded=!1,n.fetchBeginTime=0,n.videoCurrentTime=0,n.videoDuration=0,n.isPlaying=!1,n.isFirstPlay=!1,n.preloadVideo=!1,n.preloadVideoSuccess=!1,n.keepAliveTimer=null,n.isData=!1,this._destroyed=!1,n.updateResult=Promise.resolve(),n.isSwitched=!1,n.onceSwitched=!1,n.startShow=0;const{openType:i,createWebviewId:r,lastWebviewId:o,currentWebviewId:a}=n.adProxy.getWebviewInfo(),s=[i,o,a,r];n.outRoute="",n.lastRoute="",n.enterTime=0,n.outTime=0,r===a&&(n.enterRoute=s.join("|"),n.enterTime=+new Date,n.lastRoute="enter"),r===o&&(n.outRoute=s.join("|"),n.outTime=+new Date,n.lastRoute="out"),av.call(this),Vy||((0,_i.H)((e=>{if(wv.call(this))return;const{createWebviewId:t,lastWebviewId:i,currentWebviewId:r}=n.adProxy.getWebviewInfo(),o=[e.openType,i,r,t];t===r&&(n.enterRoute=o.join("|"),n.enterTime=+new Date,n.onceSwitched=!0,n.lastRoute="enter"),t===i&&(n.outRoute=o.join("|"),n.outTime=+new Date,n.onceSwitched=!0,n.lastRoute="out")})),A_((()=>{if(wv.call(this))return;const{openType:e,createWebviewId:t,currentWebviewId:i}=n.adProxy.getWebviewInfo();["navigateTo","navigateBack","switchTab"].includes(e)&&t===i&&(n.isSwitched=!0,n.isShow&&yv.call(this,4))})),(0,vy.KN)((e=>{!wv.call(this)&&n.isShow&&e.size&&(Fy=e.size.screenHeight,By=e.size.screenWidth,jy=e.deviceOrientation,cv.call(this))}))),n.handleEnterForeground=()=>{if(wv.call(this))return;n.ad_type===zy&&n.isShow&&Ev.call(this);const e=jy;ov.call(this),e!==jy&&n.isShow&&cv.call(this),n.hideTime>0&&n.isShow&&(n.hideDuration+=+new Date-n.hideTime),dv.call(this)},n.handleEnterBackground=()=>{if(!wv.call(this)&&n.isShow&&(n.hideTime=+new Date,n.ad_type===zy)){Tv.call(this);const e=n.adProxy.reportVideo({playType:n.isPlaying?"partial":"complete",conditionType:"exit",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted});(0,op._u)(e,"插屏广告","退出")}},(0,Uo.dN)(n.handleEnterForeground),(0,Uo.vv)(n.handleEnterBackground),(0,c.jQ)("onVideoResourceLoad",(e=>{!n.isShow&&n.ad_type===zy&&n.adMedia&&n.adMedia.src==e.resource&&(n.adProxy.reportAdIDKey({key:106}),n.preloadVideoSuccess=!0,n.adMedia.src=e.resource)}))}load(){if(wv.call(this))return Promise.reject({errMsg:Yy});const e=(0,Xs.Wj)(this);return e.isShow?Promise.reject({errMsg:"can't invoke load() while interstitial-ad is showed"}):e.isData?Promise.resolve():av.call(this)}show(e){return wv.call(this)?Promise.reject({errMsg:Yy}):gv.call(this,e)}destory(){bv.call(this)}destroy(){bv.call(this)}onError(e){if(wv.call(this))return;(0,Xs.Wj)(this).emitter.on("_error",e)}offError(e){if(wv.call(this))return;(0,Xs.Wj)(this).emitter.off("_error",e)}onLoad(e){if(wv.call(this))return;(0,Xs.Wj)(this).emitter.on("load",e)}offLoad(e){if(wv.call(this))return;(0,Xs.Wj)(this).emitter.off("load",e)}onClose(e){if(wv.call(this))return;(0,Xs.Wj)(this).emitter.on("close",e)}offClose(e){if(wv.call(this))return;(0,Xs.Wj)(this).emitter.off("close",e)}getSplashAdShowStatus(){return(0,Xs.Wj)(this).adProxy.getSplashAdShowStatus()}}const xv=e=>!(e.isDestroyed()||!(0,Op.U2)(e,["rootElement","layoutBox"]));class Dv{constructor({manager:e,adProxy:t,emitter:n}){this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.exposureTimer=null,this.clickFirstGradeTime=0,this.adProxy=void 0,this.manager=void 0,this.emitter=void 0,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set,this.hasEmitShowHalf=!1,this.landManager=void 0,this.handleEnterForeground=()=>{const{rootComponent:e}=this.manager;if(this.manager.isDestroyed()||!e)return;e.isShow()&&(e.emitComponentEvent(vp._d.SHOWHALF),e.emitAdCustomEvent(vp.A$.ADSHOWHALF))},this.handleEnterBackground=()=>{const{rootComponent:e}=this.manager;if(this.manager.isDestroyed()||!e)return;e.isShow()&&(e.emitComponentEvent(vp._d.HIDEHALF),e.emitAdCustomEvent(vp.A$.ADHIDEHALF))},this.handleAdCustomEvent=e=>{switch(e.action){case vp.A$.ADVIDEOPLAY:this.checkVideoViewableExposure(!0);break;case vp.A$.ADVIDEOPAUSE:this.checkVideoViewableExposure(!1);break;case vp.A$.REPORTVIDEOPLAY:this.reportVideoPlay(e.value.playType,e.value.conditionType,e.value.videoInfo);break;case vp.A$.FEEDBACKREPORT:this.reportAdFeedbackData(e.value);break;case vp.A$.REPORTENDPAGE:this.reportEndPage(e.value.data);break;case vp.A$.REPORTMMDATA:e.value.id&&e.value.data&&this.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case vp.A$.BTNTAP:this.manager.rootComponent&&this.manager.rootComponent.emitComponentEvent(vp._d.ADBUTTONTAP),this.handleClick(e.value.event,1,!0);break;case vp.A$.CHANGEMULTISHOW:this.multiShowList=e.value.list,this.checkExposure()}},this.manager=e,this.adProxy=t,this.emitter=n,this.bindEvent()}setMultiShowList(e=[]){this.multiShowList=[...e]}destroy(){this.unbindEvent()}reset(){this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.hasEmitShowHalf=!1,this.adProxy.isViewable=!1,this.exposureTimer&&clearTimeout(this.exposureTimer),this.exposureTimer=null,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set}bindEvent(){this.emitter.on("adCustomEvent",this.handleAdCustomEvent),(0,Uo.dN)(this.handleEnterForeground),(0,Uo.vv)(this.handleEnterBackground)}unbindEvent(){this.emitter.off("adCustomEvent",this.handleAdCustomEvent),(0,Uo.Tb)(this.handleEnterForeground),(0,Uo.b$)(this.handleEnterBackground)}judgeTriggerClick(e,t=!0){if(this.manager.isDestroyed())return!1;const n=this.adProxy.isTriggerClick(e),i=n?0:1;return t&&this.reportTouchClick(e,i),n}reportTouchClick(e,t){if(!xv(this.manager))return;const{width:n,height:i}=this.manager.rootElement.layoutBox;let r=0;[0,2,3].includes(t)&&(this.clickCount+=1,r=this.clickCount),this.adProxy.reportTouchClick({slotid:this.manager.getSlotId(),costtype:(0,Op.U2)(this.adProxy,["adData","data","is_cpm"])?1:2,click_time:Date.now(),click_cnt:r,start_posx:Math.round(e.relativeX||0),start_posy:Math.round(e.relativeY||0),end_posx:Math.round(e.relativeEndX||0),end_posy:Math.round(e.relativeEndY||0),ad_width:n||0,ad_height:i||0,press_interval:e.pressInterval,block_click:t})}handleClick(e,t,n=!1){if(this.manager.isDestroyed()||!this.manager.adData)return;const{appInfo:{urlScheme:i},product_type:r,dest_type:o}=this.manager.adData;this.manager.clearAdTimer(),r===xp.fY.OPEN_PLATFORM_APP_MOB&&a.wZ&&this.landManager.downloadState===vp.JF.INSTALLED&&i&&i.trim().length>0?(this.reportClick(e),this.reportAntifraud(t,e),this.adProxy.launchApplication(i).catch((()=>{})),this.manager.landManager.lastJsapiName="launchApplication",this.manager.landManager.isLandingPage=!0):a.cj&&r===ip.kv.MINI_GAME&&6===o?Promise.race([this.reportClick(e),(0,Op.Vs)(500)]).then((()=>{this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:n})})).catch((()=>{this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:n})})):(this.reportClick(e),this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:n}))}reportClick(e){if(!xv(this.manager))return;const{left:t,top:n,width:i,height:r}=this.manager.rootElement.layoutBox,{adCustomId:o}=this.manager,a=(e=>Np.videoDataMap[e]||{})(o);this.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-t,clickRelativeTop:e.absoluteY-n,pressInterval:e.pressInterval,isMulti:this.manager.isMulti,left:t,top:n,width:i,height:r,videoData:a})}isClickLimit(e,t=0){const{adProxy:n,manager:{rootElement:i}}=this;if(!i)return!1;const{width:r,height:o}=i.layoutBox,{left:s,top:c}=i.getAbsolutePosition();let l=!1,u=0;n.isValidCondition("widget_gray_time_limit")&&(u=100*(this.manager.adData.condition.widget_gray_time_limit||1)),u>0&&Date.now()-this.showedExposureTime<u&&(l=!0,n.reportAdMonitorData(vp.IN.AD_LIMIT_TIME,{clickType:t}));let d=0;return n.isValidCondition("widget_gray_bd_limit")&&(d=this.manager.adData.condition.widget_gray_bd_limit||0),"devtools"!==a.iw&&e&&d>0&&(e.absoluteEndX-s<d||s+r-e.absoluteEndX<d||e.absoluteEndY-c<d||c+o-e.absoluteEndY<d)&&(l=!0,n.reportAdMonitorData(vp.IN.AD_LIMIT_BOUNDARY)),l}reportExposure({isViewable:e}){var t=this;return Pn()((function*(){if(!xv(t.manager))return;const{rootElement:n,rootComponent:i,isMulti:r}=t.manager,{left:o,top:a,width:s,height:c}=n.layoutBox,l={left:o,top:a,width:s,height:c};if(r){const n=e?t.multiViewableExposureList:t.multiExposureList,o=t.multiShowList.filter((e=>!n.has(e)));o.length&&(o.forEach(n.add,n),i.emitComponentEvent(e?vp._d.VIEWABLEEXPOSURE:vp._d.EXPOSURE,{exposureList:o}),yield t.adProxy.reportExposure(Dn()(Dn()({},l),{},{multiList:o,isMulti:r,exposureType:e?"viewable":"showed"})))}else e?i.emitComponentEvent(vp._d.VIEWABLEEXPOSURE):i.emitComponentEvent(vp._d.EXPOSURE),yield t.adProxy.reportExposure(Dn()(Dn()({},l),{},{exposureType:e?"viewable":"showed"}))}))()}checkExposure(){var e=this;return Pn()((function*(){if(e.manager.isDestroyed())return;if(!xv(e.manager))return yield(0,Op.Vs)(0),void(yield e.checkExposure());const{rootComponent:t,isMulti:n}=e.manager,i=t.isShow(),{exposureUntilVideoPlay:r}=t;(n||!e.isExposured&&i)&&(e.isExposured=!0,e.showedExposureTime=Date.now(),e.reportExposure({isViewable:!1})),i&&!e.hasEmitShowHalf?(e.hasEmitShowHalf=!0,t.emitComponentEvent(vp._d.SHOWHALF),t.emitAdCustomEvent(vp.A$.ADSHOWHALF)):i||(e.hasEmitShowHalf=!1,t.emitComponentEvent(vp._d.HIDEHALF),t.emitAdCustomEvent(vp.A$.ADHIDEHALF)),r||(i?e.exposureTimer=setTimeout((()=>{const i=t.isShow();(n||!e.isViewableExposured&&i)&&(e.isViewableExposured=!0,e.adProxy.isViewable=!0,e.reportExposure({isViewable:!0}))}),1e3):e.exposureTimer&&clearTimeout(e.exposureTimer))}))()}checkVideoViewableExposure(e){const{rootElement:t,rootComponent:n}=this.manager;if(this.manager.isDestroyed()||!t||!n)return;const i=n.isShow(),{exposureUntilVideoPlay:r}=n,{left:o,top:a,width:s,height:c}=t.layoutBox;r&&(i&&e?this.exposureTimer=setTimeout((()=>{this.isViewableExposured||(this.isViewableExposured=!0,this.adProxy.isViewable=!0,this.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"viewable"}),n.emitComponentEvent(vp._d.VIEWABLEEXPOSURE))}),0):this.exposureTimer&&clearTimeout(this.exposureTimer))}reportAntifraud(e,t){var n=this;return Pn()((function*(){var i;if(yield n.manager.ready(),!xv(n.manager))return;const{width:r,height:o}=n.manager.rootElement.layoutBox;n.adProxy.reportAntifraud({click_button:e,cost_type:null!==(i=n.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,slotid:n.manager.getSlotId(),is_game:Wp.S.isWaGame?1:0,pageentertime:+new Date(n.adProxy.getProgramStartTime()),ad_width:r||0,ad_height:o||0,clientexptime:n.showedExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:Math.round(t.absoluteX||0),pos_y:Math.round(t.absoluteY||0),screen_width:Wp.S.screenWidth,screen_height:Wp.S.screenHeight})}))()}reportCloseAction(e){if(this.manager.isDestroyed())return;const t=Date.now();this.adProxy.reportCloseAction({slotid:this.manager.getSlotId(),is_game:Wp.S.isWaGame?1:0,costtype:(0,Op.U2)(this.adProxy,["data","is_cpm"])?1:2,close_type:e,exposure_duration:t-this.showedExposureTime-this.hideDuration,start_time:this.showedExposureTime,close_time:t})}reportAdFeedbackData({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:n=0,secondGradeDesc:i="",feedbackReason:r=0}){this.manager.isDestroyed()||(e&&!n&&(this.clickFirstGradeTime=Date.now()),this.adProxy.reportAdFeedbackData({adWidth:Wp.S.screenWidth,adHeight:Wp.S.screenHeight,adPosX:0,adPosY:0,expTime:this.showedExposureTime,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?this.clickFirstGradeTime:0,secondGradeId:n,secondGradeDesc:i,secondGradeTime:n?Date.now():0,feedbackReason:r}))}reportFollow(e){if(!this.manager.isDestroyed())return e.then((e=>/ok/.test(e.errMsg)?this.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?this.adProxy.reportFollow({result:"cancel"}):void 0)).catch((()=>this.adProxy.reportFollow({result:"fail"})))}reportVideoPlay(e,t,{playDuration:n,isMuted:i,videoDuration:r}){this.adProxy.reportVideo({playType:e,conditionType:t,playDuration:n,videoDuration:r,muted:i})}reportEndPage({ace_type:e,exposure_duration:t=0}={}){this.adProxy.reportEndPage({slotid:this.manager.getSlotId(),costtype:(0,Op.U2)(this.adProxy,["adData","data","is_cpm"])?1:2,posType:this.adProxy.data.pos_type,isGame:Wp.S.isWaGame?1:0,ace_type:e,exposure_duration:t})}reportTimePoints(){this.adProxy.reportTimePoints({slotid:this.manager.getSlotId(),costtype:(0,Op.U2)(this.adProxy,["adData","data","is_cpm"])?1:2})}}class Ov{constructor({manager:e,reporter:t}){this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.hideTime=null,this.isLandingPage=!1,this.landingPageCostTime=0,this.downloadState=vp.JF.DEFAULT,this.downloadProgress=0,this.manager=void 0,this.reporter=void 0,this.adProxy=void 0,this.manager=e,this.adProxy=e.adProxy,this.reporter=t}reset(){this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.isLandingPage=!1,this.landingPageCostTime=0}checkAdState(){var e=this;return Pn()((function*(){if(!e.manager.isDestroyed()){if(yield(0,op.Vs)(10),e.isLandingPage){var t;e.adProxy.setTimePoint("p11"),e.lastJsapiStatus=0,e.isLandingPage=!1;const n=Date.now();e.landingPageCostTime=e.hideTime?n-e.hideTime:0,e.adProxy.reportLandingTime({slotId:e.manager.getSlotId(),costType:(0,yp.U2)(e.adProxy,["adData","data","is_cpm"])?1:2,openTime:e.hideTime,closeTime:n,stayTime:e.landingPageCostTime,jsapiName:e.lastJsapiName,clickTime:e.lastLandingTime,clkCnt:e.reporter.clickCount,retCode:e.lastJsapiStatus,costTime:e.lastJsapiCostTime,actTypeInt:1}),null!==(t=e.manager.rootComponent)&&void 0!==t&&t.hideAfterLanding&&e.manager.hide()}e.manager.isShow&&e.manager.setAdTimer()}}))()}checkFollow(){var e=this;return Pn()((function*(){const{adData:t}=e.manager,n=(0,yp.U2)(t,["button_action","text_type"],0),i=yield e.adProxy.checkFollow(t.app.uin);0===n&&e.manager.updateButtonText({text:i?"查看":t.button_action.button_text}),e.adProxy.data.biz_info&&(e.adProxy.data.biz_info.is_subscribed=i?1:0)}))()}checkAppInstallState(){var e=this;return Pn()((function*(){if(e.manager.isDestroyed())return;const{appInfo:{apkName:t,versionCode:n,urlScheme:i}}=e.manager.adData;try{const r=yield e.adProxy.getInstallState(t);r.isInstalled&&(void 0===r.versionCode||r.versionCode>=n)&&(e.downloadState=vp.JF.INSTALLED,e.downloadProgress=0,e.adProxy.setAppInstallState(!0),i&&i.trim().length>0?e.manager.updateButtonText({text:"进入应用"}):e.manager.updateButtonText({text:"查看应用"}))}catch(e){}}))()}landing(e){if(this.manager.isDestroyed())return;this.reporter.clickCount>1&&this.adProxy.reportRepeatClick({slotId:this.manager.getSlotId(),costType:(0,yp.U2)(this.adProxy,["data","is_cpm"])?1:2,clkCnt:this.reporter.clickCount,lastClkPeriod:Date.now()-this.lastLandingTime,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,pageStayTime:this.landingPageCostTime,jsapiName:this.lastJsapiName});const t=this.adProxy.land(e),n=(0,yp.U2)(this.adProxy,["data","button_action","text_type"],0);this.adProxy.data.product_type===xp.fY.WECHAT&&(0,yp.U2)(e,["isButton"])&&!this.adProxy.data.biz_info.is_subscribed?(t.then((e=>{const t=/ok/.test(e.errMsg);t&&0===n&&(this.manager.updateButtonText({text:"查看公众号"}),this.adProxy.data.biz_info&&(this.adProxy.data.biz_info.is_subscribed=1),this.adProxy.reportAdIDKey({key:vp.IN.FOLLOW_SUCCESS})),e.errMsg&&(this.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));const i=Date.now();var r;(this.lastJsapiStatus=0,this.lastJsapiCostTime=i-this.lastLandingTime,"private_addContact"===this.lastJsapiName)&&this.adProxy.reportLandingTime({slotId:this.manager.getSlotId(),costType:null!==(r=this.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,openTime:this.lastLandingTime,closeTime:i,stayTime:this.lastJsapiCostTime,jsapiName:this.lastJsapiName,clickTime:this.lastLandingTime,clkCnt:this.reporter.clickCount,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,actTypeInt:t?2:3,actTypeStr:t?"关注":"取消"});this.manager.isShow&&this.manager.setAdTimer()})).catch((()=>{this.lastJsapiStatus=1})),this.reporter.reportFollow(t)):t.then((e=>{e.errMsg&&(this.lastJsapiName=e.errMsg.replace(":ok","")),["private_openUrl","navigateToMiniProgram","openADCanvas","launchApplication"].includes(this.lastJsapiName)?this.isLandingPage=!0:this.lastJsapiStatus=0,this.lastJsapiCostTime=Date.now()-this.lastLandingTime})).catch((()=>{this.lastJsapiStatus=1}))}}const Pv=new WeakMap,Rv=e=>Pv.get(e);const kv="customAd has been destroyed";let Nv=1;class Mv{constructor({adUnitId:e,adIntervals:t=0,left:n,top:i,width:r,height:o,fixed:a,style:s}){if(this.adUnitId=void 0,this.adCustomId=void 0,this.adProxy=void 0,this.reporter=void 0,this.landManager=void 0,this.isShow=!1,this.rootElement=null,this.rootComponent=null,this.systemInfo=null,this.adData=null,this.adDatas=[],this.showDetailTime=0,this.callbacks={load:[],error:[],close:[],hide:[]},this.adType="customAd",this.emitter=new Jp,this.isReady=!1,this.isDestroy=!1,this.isShowing=!1,this.isHiding=!1,this.fetchedError=null,this.template=null,this.tplConfig=null,this.slotId=void 0,this.adIntervals=void 0,this.adTimer=null,this.readyResolve=new Set,this.adPosition=void 0,this.isMulti=!1,this.handleReady=()=>{if(!this.isReady){for(const e of this.readyResolve)e();this.readyResolve.clear(),this.isReady=!0}},this.handleEnterBackground=()=>{this.landManager.hideTime=Date.now(),this.clearAdTimer()},this.handleEnterForeground=()=>{this.landManager.checkAdState(),this.landManager.hideTime&&(this.reporter.hideDuration+=Date.now()-this.landManager.hideTime)},this.handleAdCustomEvent=e=>{var t;switch(e.action){case vp.A$.TRIGGEREVENT:["error","videodislike"].includes(e.value.eventName)&&this.emitter.emit(e.value.eventName,e.value.detail||{});break;case vp.A$.SHOWFEEDBACK:null===(t=this.rootComponent)||void 0===t||t.showFeedback();break;case vp.A$.FEEDBACKBTNTAP:this.adProxy.openFeedbackUrl(bp.S3.isWaGame?1003:1005);break;case vp.A$.HIDEAD:this.hide();break;case vp.A$.REPORTTIMEPOINT:e.value.key&&this.adProxy.setTimePoint(e.value.key);break;case vp.A$.ADSHOWHALF:this.isShow=!0;break;case vp.A$.ADHIDEHALF:this.isShow=!1;break;case vp.A$.CHECKEXPOSURE:this.reporter.checkExposure();break;case vp.A$.LANDAD:{const{index:t,event:n}=e.value;if(this.reporter.isClickLimit(n))return;this.isMulti&&this.adProxy.setCurrentData(t),this.reporter.handleClick(n,1,!1);break}}},this.handleLoad=e=>this.emitCallback("load",e),this.handleError=e=>this.emitCallback("error",e),this.handleClose=()=>this.emitCallback("close"),this.handleHide=()=>this.emitCallback("hide"),this.handleVideoDislike=()=>this.emitCallback("videodislike"),this.onLoad=e=>this.callbacks.load.push(e),this.onError=e=>this.callbacks.error.push(e),this.onClose=e=>this.callbacks.close.push(e),this.onHide=e=>this.callbacks.hide.push(e),this.onVideoDislike=e=>this.callbacks.videoDislike.push(e),this.offLoad=e=>this.removeCallback("load",e),this.offError=e=>this.removeCallback("error",e),this.offClose=e=>this.removeCallback("close",e),this.offHide=e=>this.removeCallback("hide",e),this.offVideoDislike=e=>this.removeCallback("videodislike",e),e||console.error("广告单元 id(unit-id) 为空, 请先在 'https://mp.weixin.qq.com' 上创建广告单元"),this.adUnitId=e,this.slotId="4071202390577885",this.adCustomId=`AD_CUSTOM_${Nv}`,Nv+=1,this.adPosition={left:n,top:i,width:r,height:o,fixed:a},s&&"object"==typeof s){const e=["left","top","width","height","fixed"];for(const t of e)null!=s[t]&&(this.adPosition[t]=s[t])}(0,p.aI)()&&delete this.adPosition.fixed,this.adProxy=new ip.FF({adUnitId:e,adType:this.adType}),this.reporter=new Dv({manager:this,adProxy:this.adProxy,emitter:this.emitter}),this.landManager=new Ov({manager:this,reporter:this.reporter}),this.adIntervals="number"==typeof t?t:0,this.reporter.landManager=this.landManager,this.bindEvent(),this.fetchAndRender()}getSlotId(){return this.slotId}bindEvent(){this.emitter.on("load",this.handleLoad),this.emitter.on("error",this.handleError),this.emitter.on("videoDislike",this.handleVideoDislike),this.emitter.on("close",this.handleClose),this.emitter.on("hide",this.handleHide),this.emitter.on("adCustomEvent",this.handleAdCustomEvent),this.onLoad(this.handleReady),this.onError(this.handleReady),(0,Uo.dN)(this.handleEnterForeground),(0,Uo.vv)(this.handleEnterBackground)}unbindEvent(){this.emitter.off("load",this.handleLoad),this.emitter.off("error",this.handleError),this.emitter.off("videoDislike",this.handleVideoDislike),this.emitter.off("close",this.handleClose),this.emitter.off("hide",this.handleHide),this.emitter.off("adCustomEvent",this.handleAdCustomEvent),this.offLoad(this.handleReady),this.offError(this.handleReady),(0,Uo.Tb)(this.handleEnterForeground),(0,Uo.b$)(this.handleEnterBackground)}fetchAndRender({isAdInterval:e=!1,autoUnmount:t=!1}={}){var n=this;return Pn()((function*(){try{var i,r;const[o,a]=yield Promise.all([n.adProxy.fetch(e),n.getSystemInfo(),(0,Wp.g)()]);t&&n.resetState(),n.systemInfo=a,n.adData=o,n.adDatas=n.adProxy.datas||[],n.template=n.getTemplateFromAdData(o),n.tplConfig=(null===(i=n.template)||void 0===i?void 0:i.tplConfig)||{},n.checkSize(),yield n.render(),n.adProxy.reportAdMonitorData(vp.IN.RENDER_SUCCESS);const s={errMsg:"load advertisement success"};null!==(r=n.rootComponent)&&void 0!==r&&r.exportAid&&(s.aid=n.adData.aid),n.emitter.emit("load",s),n.fetchedError=null,n.adProxy.preloadLanding()}catch(e){n.adProxy.reportAdMonitorData(vp.IN.RENDER_FAILED,e);const t=null!=e&&e.errCode?e:{errCode:vp.Bq.ERR_RENDER,errMsg:"customAd render failed"};n.fetchedError=t,n.emitter.emit("error",t)}}))()}getTemplateFromAdData(e){return e.template}checkSize(){if(!this.tplConfig)return;const{tplConfig:e}=this;let{width:t}=this.adPosition;null==t&&(t=bp.S3.screenWidth),t=Number(t);const n=e.minWidth||0,i=e.maxWidth||0,r=e.baseWidth||375;let o=Math.min(bp.S3.screenWidth,Math.max(n,t));i&&(o=Math.min(o,i)),0===o&&(this.adProxy.reportAdMonitorData(vp.IN.WIDTH_GET_ERROR,{unitId:this.adUnitId}),Gp(r,r)),this.adPosition.width=o,Gp(o,r)}reload(){}updateButtonText({text:e,progress:t}){var n;null===(n=this.rootComponent)||void 0===n||n.emitAdCustomEvent(vp.A$.CHANGEADBTNTEXT,{text:e||"",progress:t||0})}getSystemInfo(){return bp.S3}ready(){return new Promise(((e,t)=>{const n=()=>{this.fetchedError?t(this.fetchedError):e()};this.isReady?n():this.readyResolve.add(n)}))}removeCallback(e,t){this.callbacks[e]&&(this.callbacks[e]=t?this.callbacks[e].filter((e=>e!==t)):[])}emitCallback(e,t){if(this.callbacks[e])for(const n of this.callbacks[e])"function"==typeof n&&n(t)}show({branchId:e,branchDim:t}={}){var n=this;return Pn()((function*(){if(n.isDestroyed())throw{errMsg:kv};if(n.isShow||n.isShowing)throw{errMsg:"the advertisement has shown"};n.isShowing=!0,e?n.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):n.adProxy.resetAnalyseBranchInfo();try{yield n.ready(),n.rootComponent&&n.rootComponent.show(),n.setAdTimer()}finally{n.isShowing=!1}}))()}setAdTimer(){var e;if(this.rootComponent&&!this.rootComponent.enableTimer)return;let t;t=this.adIntervals>=30&&this.adIntervals<=3600?1e3*this.adIntervals:null!==(e=this.adData)&&void 0!==e&&e.refreshTime?1e3*this.adData.refreshTime:null,t&&(this.adTimer&&clearTimeout(this.adTimer),this.adTimer=setTimeout((()=>this.refetch(!0)),t))}clearAdTimer(){this.isDestroyed()||this.adTimer&&(clearTimeout(this.adTimer),this.adTimer=null)}refetch(e=!1){var t=this;return Pn()((function*(){if(!t.isDestroyed()&&t.isShow)try{yield t.fetchAndRender({isAdInterval:e,autoUnmount:!0}),yield t.show(),t.adProxy.reportAdMonitorData(vp.IN.REFETCH_SUCCESS),t.rootElement&&(yield t.rootElement.nextLayout(),t.reporter.checkExposure())}catch(e){t.adProxy.reportAdMonitorData(vp.IN.REFETCH_FAILED,e);const n={errCode:vp.Bq.ERR_RENDER,errMsg:"customAd render failed"};t.emitter.emit("error",n)}}))()}hide(e=!1){var t=this;return Pn()((function*(){var n;if(t.isDestroyed())throw{errMsg:kv};if(t.isShow&&!t.isHiding){if(t.isHiding=!0,null===(n=t.rootComponent)||void 0===n||n.hide(),t.clearAdTimer(),e)t.emitter.emit("hide");else{t.isReady=!1,t.emitter.emit("close"),t.resetState(),t.adProxy.setTimePoint("p14"),t.reporter.reportTimePoints();let e=!1;t.rootComponent&&(e=t.rootComponent.getRootData("refetchable")),e?(t.unmount(),yield t.fetchAndRender()):yield t.destroy()}t.isHiding=!1}}))()}destroy(){var e=this;return Pn()((function*(){if(!e.isDestroyed()){e.isDestroy=!0;try{yield e.ready()}catch(e){}e.clearAdTimer(),e.unbindEvent(),e.resetState(),e.callbacks={load:[],error:[],close:[]},e.reporter.destroy()}}))()}isDestroyed(){return this.isDestroy}canHideAd(){return!!this.rootComponent&&this.rootComponent.getRootData("hidable")}resetState(){this.unmount(),this.rootComponent=null,this.rootElement=null,this.isReady=!1,this.isShow=!1,this.isMulti=!1,this.adData=null,this.adDatas=[],this.reporter.reset(),this.landManager.reset()}emitRender(e){return this.rootComponent?((0,ap.ve)(this.rootComponent,e),this.rootComponent):(0,ap.sY)($p,e)}render(){return this.adProxy.setTimePoint("p4"),this.template?(this.rootComponent=this.emitRender({manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy,template:this.template,systemInfo:this.systemInfo,adData:this.adProxy.data,adDatas:this.adProxy.datas,adCustomId:this.adCustomId,adPosition:this.adPosition,isEmpty:!1}),this.initialMultiLists(),this.rootElement=this.rootComponent.getRootElement(),this.adProxy.reportAdMonitorData(vp.IN.TPL_RENDER_SUCCESS),this.adProxy.setTimePoint("p5"),this.rootElement.ready()):this.renderEmpty()}initialMultiLists(){if(this.rootComponent&&(this.isMulti=this.rootComponent.isMulti&&this.adProxy.isMulti,this.isMulti)){const{multiShowList:e}=this.rootComponent;e&&Array.isArray(e)?this.reporter.setMultiShowList(e):this.reporter.setMultiShowList(Object.keys(this.adDatas).map((e=>+e)))}}unmount(){this.rootComponent&&((0,ap.vE)(this.rootComponent),this.rootElement=null,this.rootComponent=null)}renderEmpty(){return this.rootComponent=this.emitRender({isEmpty:!0,manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy}),this.rootElement=this.rootComponent.getRootElement(),ap.Ar.nextLayout()}}const Lv=e=>Rv(e);class Bv extends class{constructor(e,...t){const n=new e(...t);Pv.set(this,n)}}{constructor(e){super(Mv,e),this.isDestroy=!1}destroy(){var e=this;return Pn()((function*(){var t;e.isDestroy||(yield Lv(e).destroy(),t=e,Pv.delete(t),e.isDestroy=!0)}))()}hide(){var e=this;return Pn()((function*(){const t=Lv(e);if(!t.canHideAd())throw{errMsg:"the advertisement don't support hide"};yield t.hide(!0)}))()}isShow(){return Lv(this).isShow}}((e,t)=>{for(const n of t)e.prototype[n]=function(...e){return Rv(this)[n](...e)}})(Bv,["show","isDestroyed","onLoad","onError","onClose","onHide","offLoad","offError","offClose","offHide"]);const Fv=n(9536);let Uv=0,Wv=0;const jv=a.iw,Gv=a.cj;let Vv={},Hv=[],zv=!0;const Zv=7070083760581921;s.Z.onReady((()=>{const e=(0,ve.Ew)();if(Uv=e.screenWidth,Wv=e.screenHeight,zv=(0,p.aI)(),zv){const e=n(1627).Z;e.onTouchStart((e=>{e&&e.changedTouches&&e.changedTouches.length>0&&(Vv={},Vv.touchStartPosX=Math.round(e.changedTouches[0].clientX),Vv.touchStartPosY=Math.round(e.changedTouches[0].clientY),Vv.touchEndPosX=0,Vv.touchEndPosY=0,Vv.touchStartTime=+new Date,Vv.touchInterval=0)})),e.onTouchEnd((e=>{e&&e.changedTouches&&e.changedTouches.length>0&&(Vv.touchEndPosX=Math.round(e.changedTouches[0].clientX),Vv.touchEndPosY=Math.round(e.changedTouches[0].clientY),Vv.touchInterval=+new Date-Vv.touchStartTime,Hv.length>=10&&Hv.shift(),Hv.push(Vv))}))}}));const Yv=5,$v=8,qv=function(e){return iA.call(this).then((()=>{const t=(0,Xs.Wj)(this),{left:n,top:i,width:r,height:o}=t.container.layoutBox,a={slotid:Zv,ScreenHeight:Wv,ScreenWidth:Uv,PageY:i,PageX:n,costtype:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,TimeMs:+new Date};return e=Object.assign({},a,e),t.adProxy.reportAbnormalDetect(e)}))},Qv=function(e,t=!0){const n=(0,Xs.Wj)(this).adProxy.isTriggerClick(e),i=n?0:1;return t&&aA.call(this,e,i),n},Jv=function(e){const t=(0,Xs.Wj)(this),{left:n,top:i,width:r,height:o}=t.container.layoutBox;let a=!1,s=0;t.adProxy.isValidCondition("widget_gray_time_limit")&&(s=100*(t.data.condition.widget_gray_time_limit||1)),s>0&&+new Date-t.showedExposureTime<s&&(a=!0,t.adProxy.reportAdMonitorData(48,{slotid:Zv}));let c=0;return t.adProxy.isValidCondition("widget_gray_bd_limit")&&(c=t.data.condition.widget_gray_bd_limit||10),e&&c>0&&(e.absoluteEndX-n<c||n+r-e.absoluteEndX<c||e.absoluteEndY-i<c||i+o-e.absoluteEndY<c)&&(a=!0,t.adProxy.reportAdMonitorData(47,{slotid:Zv})),a},Xv=function(e,t,n){const i=(0,Xs.Wj)(this);for(let r=0;r<i.gridCount;r++)"item"===e?i[`gridItem${r}`].style[t]=n:"icon"===e?i[`gridItemIcon${r}`].style[t]=n:"name"===e&&(i[`gridItemName${r}`].style[t]=n)},Kv=function(){const e=(0,Xs.Wj)(this);return Promise.resolve().then((()=>{e.animateDoms.forEach((t=>{e[t].animate({scaleWidth:1,scaleHeight:1,duration:400}).catch((n=>{e[t].style.scaleWidth=1,e[t].style.scaleHeight=1}))}))}))},eA=function(e,t){return n=>{const i=(0,Xs.Wj)(this);if(i.adProxy.setCurrentData(e),!Qv.call(this,n))return;if(Jv.call(this,n))return;const r=i.adProxy.data,{product_type:o,dest_type:a}=r;Gv&&46===o&&6===a?Promise.race([cA.call(this,n,e,t),(0,op.Vs)(500)]).then((()=>{pA.call(this)})).catch((()=>{pA.call(this)})):(cA.call(this,n,e,t),pA.call(this))}},tA=function(){const e=(0,Xs.Wj)(this),{outer:t,inner:n,scale:i}=hA.call(this),r=e.datas.map(((e,t)=>{const n=e.weapp_info||{};return{name:(0,Op.$G)(n.nick_name,10),url:n.head_img||""}})),{template:o,style:a,scaleDoms:s,animateDoms:c}=((e,t)=>{const n={container:{position:"absolute",overflow:"hidden",borderRadius:8,hidden:!0},topContainer:{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",height:24,paddingLeft:12,paddingRight:12,paddingTop:8},gridTitle1:{width:36,height:16,lineHeight:16,fontSize:12},gridTitle2:{width:24,height:16,lineHeight:16,fontSize:12},gridTitleSplitLine:{width:2,height:16,lineHeight:16,fontSize:10,textAlign:"center",paddingRight:8,paddingLeft:8},gridContentContainerMask:{position:"absolute",top:0,left:0,right:0,bottom:0},gridFeedbackIconWarp:{display:"flex",height:8,width:16,flexDirection:"row",justifyContent:"center",alignItems:"center"},gridFeedbackIcon:{width:10,height:6},gridFeedbackArea:{display:"flex",height:16,width:50,flexDirection:"row",justifyContent:"start",alignItems:"center"},adFeedbackList:{width:104,height:86,hidden:!0,left:10,top:28,paddingLeft:6,paddingRight:6,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adAffectBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{width:104,height:86,hidden:!0,left:10,top:28,paddingLeft:6,paddingRight:6,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:92,height:1,backgroundColor:"#E0E0E0"}},i=[];let r=[];const o=[],a=(t,a)=>{i.push(`<view id="grid-item${t}">\n        <image src="${a.url}" id="grid-item-icon${t}"></image>\n        <text id="grid-item-name${t}" value="${a.name}"></text>\n      </view>`),o.push(`gridItem${t}`),o.push(`gridItemIcon${t}`),o.push(`gridItemName${t}`),r.push(`gridItem${t}`),r.push(`gridItemIcon${t}`),r.push(`gridItemName${t}`),n[`gridItem${t}`]={display:"flex",flexDirection:"column",alignItems:"center",width:5===e?60:70},n[`gridItemIcon${t}`]={width:48,height:48,borderRadius:6},n[`gridItemName${t}`]={marginTop:5===e?8:6,fontSize:5===e?12:14,lineHeight:5===e?16:18,height:5===e?16:18,width:5===e?60:70,textAlign:"center",overflow:"hidden"}};if(i.push('<view id="container" click-state="false">'),i.push('<view id="grid-content-container-mask"></view>'),i.push('<view id="top-container" bubble-event="true">\n                      <text id="grid-title1" value="小游戏"></text>\n                      <text id="grid-title-split-line" value="|"></view>\n                      <view id="grid-feedback-area">\n                        <text id="grid-title2" value="广告" bubble-event="true"></text>\n                        <view id="grid-feedback-icon-warp" bubble-event="true">\n                          <image id="grid-feedback-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/grid_feedback_icon.png"></image>\n                        </view>\n                      </view>\n                    </view>'),r.push("topContainer"),r.push("gridTitle1"),r.push("gridTitle2"),r.push("gridTitleSplitLine"),r.push("gridFeedbackIconWarp"),r.push("gridFeedbackArea"),r=[...r,"adFeedbackMenu","adDislikeBtn","adFeedbackBtn","adAffectBtn","adFeedbackList","adDismatchBtn","adDuplicateBtn","adQualityBtn"],5===e){i.push('<view id="grid-content-container">'),n.gridContentContainer={position:"relative",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:12,paddingLeft:10.5,paddingRight:10.5,paddingBottom:12},r.push("gridContentContainer");for(let n=0;n<e;n++)a(n,t[n]);i.push("</view>")}else if(8===e){i.push('<view id="grid-content-container">'),n.gridContentContainer={position:"relative",paddingTop:16,paddingLeft:14,paddingRight:14,paddingBottom:16};for(let e=0;e<2;e++){i.push(`<view id="grid-count8-line${e}">`),n[`gridCount8Line${e}`]={display:"flex",flexDirection:"row",justifyContent:"space-between"};for(let n=0;n<4;n++){const i=4*e+n;a(i,t[i])}i.push("</view>")}n.gridCount8Line0.marginBottom=16,r.push("gridCount8Line0"),i.push("</view>")}return i.push('\n     <view id="ad-feedback-list">\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  '),i.push("</view>"),{template:i.join(""),style:n,scaleDoms:r,animateDoms:o}})(e.gridCount,r),{root:l}=Fv(o);rp.call(this,l,a),"white"===this.adTheme?(e.gridContentContainerMask.style.backgroundColor="#ffffff",e.gridTitle1.style.color="#7F7F7F",e.gridTitle2.style.color="#7F7F7F",e.gridTitleSplitLine.style.color="#7F7F7F",Xv.call(this,"name","color","#191919")):"black"===this.adTheme&&(e.gridContentContainerMask.style.backgroundColor="#1A1A1A",e.gridTitle1.style.color="#8c8c8c",e.gridTitle2.style.color="#8c8c8c",e.gridTitleSplitLine.style.color="#8c8c8c",e.gridFeedbackIcon.src="https://wxa.wxs.qq.com/images/wxapp/grid_feedback_icon_white.png",Xv.call(this,"name","color","#FFFFFF")),e.scaleDoms=s,e.scaleDoms.forEach((t=>{e[t].style.scale=i})),e.animateDoms=c,e.animateDoms.forEach((t=>{e[t].style.scaleWidth=.7,e[t].style.scaleHeight=.7})),e.container.on("click",(e=>{}));for(let t=0;t<e.gridCount;t++)e[`gridItemIcon${t}`]&&e[`gridItemIcon${t}`].on("click",eA.call(this,t,"icon")),e[`gridItemName${t}`]&&e[`gridItemName${t}`].on("click",eA.call(this,t,"name"));e.gridFeedbackArea.on("click",(t=>{Qv.call(this,t,!1)&&(Jv.call(this,t)||(e.adFeedbackList.style.hidden=!e.adFeedbackMenu.style.hidden||!e.adFeedbackList.style.hidden,e.adFeedbackMenu.style.hidden=!0,e.adFeedbackList.style.hidden||uA.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),e.adFeedbackBtn.on("click",(t=>{Qv.call(this,t,!1)&&(Jv.call(this,t)||(e.adProxy.openFeedbackUrl(zv?1007:1006),e.adFeedbackList.style.hidden=!0,uA.call(this,{secondGradeId:1,secondGradeDesc:"投诉"})))})),e.adDislikeBtn.on("click",(t=>{Qv.call(this,t,!1)&&(Jv.call(this,t)||(e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!1,uA.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),e.adQualityBtn.on("click",(t=>{Qv.call(this,t,!1)&&(Jv.call(this,t)||(e.adFeedbackMenu.style.hidden=!0,uA.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),lA.call(this)))})),e.adDuplicateBtn.on("click",(t=>{Qv.call(this,t,!1)&&(Jv.call(this,t)||(e.adFeedbackMenu.style.hidden=!0,uA.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),lA.call(this)))})),e.adDismatchBtn.on("click",(t=>{Qv.call(this,t,!1)&&(Jv.call(this,t)||(e.adFeedbackMenu.style.hidden=!0,uA.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),lA.call(this)))})),e.adAffectBtn.on("click",(t=>{Qv.call(this,t,!1)&&(Jv.call(this,t)||(e.adFeedbackList.style.hidden=!0,uA.call(this,{secondGradeId:3,secondGradeDesc:"影响操作"}),lA.call(this)))})),e.container||e.adProxy.reportAdMonitorData(92),e.adProxy.setSlotData({gridScale:i})},nA=function(){const e=(0,Xs.Wj)(this);try{const{left:t,top:n}=this.style,{outer:i,inner:r,scale:o}=hA.call(this),{type:a}=e.data;tA.call(this),e.adProxy.preloadLanding(),e.container.style.left=t,e.container.style.top=n,e.container.style.width=r.width,e.container.style.height=r.height,rA.call(this),Ko.uo.add(e.container),e.emitter.emit("load"),e.container.ready().then((()=>{(0,op.cM)("container 及其子元素 ready"),e.emitter.emit("ready")})).then((()=>{qv.call(this,{type:1})}))}catch(t){return e.adProxy.reportAdMonitorData(91,t),Promise.reject({})}},iA=function(e){if(!e||"function"!=typeof e)return new Promise((e=>iA.call(this,e)));const t=(0,Xs.Wj)(this);t.isReady?e():t.emitter.on("ready",e)},rA=function(){const e=(0,Xs.Wj)(this),{opacity:t}=this.style;.5<=t&&t<=1?(this.style.opacity=t,e.gridContentContainerMask.style.opacity=t,e.gridFeedbackIcon.style.opacity=t):this.style.opacity=1},oA=function(){(0,op.cM)("开始 update UI");const e=(0,Xs.Wj)(this),{left:t,top:n}=this.style,{inner:i,scale:r}=hA.call(this),{type:o,crt_size:a,product_type:s,use_style_data:c}=e.data;(0,op.cM)(this.style.width,this.style.height),(0,op.cM)("update UI",i),Object.assign(e.container.style,i,{left:t,top:n});return e.scaleDoms.forEach((t=>{e[t].style.scale=r})),rA.call(this),e.container.nextUpdate().then((()=>((0,op.cM)("updateUI 完成"),Promise.resolve())))},aA=function(e,t=0){const n=(0,Xs.Wj)(this);if(vA.call(this)||!n.container||!n.container.layoutBox)return;const{width:i,height:r}=n.container.layoutBox;let o=0;[0,2,3].includes(t)&&(n.clickCount++,o=n.clickCount);const a={slotid:Zv,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:o,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(r,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(a)},sA=function(e){const t=(0,Xs.Wj)(this);let n=0,i=0;const{slotData:r}=t.adProxy;try{if(5===r.gridCount)n=Math.round((61*e+40.5)*r.gridScale),i=Math.round(60*r.gridScale);else if(8===r.gridCount){const t=Math.floor(e/4),o=e%4;n=Math.round((77*o+44)*r.gridScale),i=Math.round((64+88*t)*r.gridScale)}}catch(e){}return{x:n,y:i}},cA=function(e,t,n){const i=(0,Xs.Wj)(this);if(vA.call(this)||!i.container||!i.container.layoutBox)return;const{left:r,top:o,width:a,height:s}=i.container.layoutBox,c=sA.call(this,t),l=i.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-r,clickRelativeTop:e.absoluteY-o,pressInterval:e.pressInterval,left:r,top:o,width:a,height:s,clickAdIndex:t,clickAdPos:n,weappExtraData:{box_center_x:c.x,box_center_y:c.y,box_aid_list:i.adProxy.datas.map((e=>e.aid)),click_pos:n}});return(0,op._u)(l,"grid","点击"),mA.call(this,{stage:1002}),Hv=Hv.map((e=>`[${[e.touchStartPosX,e.touchStartPosY,e.touchEndPosX,e.touchEndPosY,e.touchStartTime,e.touchInterval].join(",")}]`)),i.adProxy.reportBannerLastClick({lastClickArr:`[${Hv.join(",")}]`,expMs:i.showedExposureTime,clickMs:+new Date,bannerClkScreenX:e.absoluteX,bannerClkScreenY:e.absoluteY,left:r,top:o,width:a,height:s}),Hv=[],l},lA=function(){this.hide(),_private.emitter.emit("close")},uA=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:n=0,secondGradeDesc:i="",feedbackReason:r=0}){if(vA.call(this))return;const o=(0,Xs.Wj)(this),{left:a,top:s,width:c,height:l}=o.container.layoutBox;e&&!n&&(o.clickFirstGradeTime=+new Date),o.adProxy.reportAdFeedbackData({adWidth:Uv,adHeight:Wv,adPosX:0,adPosY:0,expTime:o.showedExposureTime,slotId:Zv,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?o.clickFirstGradeTime:0,secondGradeId:n,secondGradeDesc:i,secondGradeTime:n?+new Date:0,feedbackReason:r})},dA=function(e=!1){const t=(0,Xs.Wj)(this);if((0,op.cM)("检查曝光"),vA.call(this))return(0,op.cM)("已经销毁, 不再曝光"),Promise.resolve();if(!t.container.layoutBox)return(0,op.cM)("还没经过布局, 下一个 loop 再做"),(0,op.Vs)(0).then((()=>dA.call(this,e)));const{left:n,top:i,width:r,height:o}=t.container.layoutBox;if(i>Wv-1)return Promise.resolve();const a=!1===t.container.style.hidden;if(t.adProxy.isViewable=!!a,!t.isShowedExposureReported&&a){(0,op.cM)("原始曝光"),t.isShowedExposureReported=!0,t.showedExposureTime=+new Date;const e=t.adProxy.reportExposure({left:n,top:i,width:r,height:o,isMulti:!0,multiList:Object.keys(t.datas).map((e=>+e)),exposureType:"showed"});(0,op._u)(e,"banner","原始"),Kv.call(this)}if(i+o/2<=Wv&&!t.isViewableExposureReported&&a){if(!e)return(0,op.cM)("可视曝光第 1 阶段, 需要 1 秒以后再次检验"),(0,op.Vs)(1e3).then((()=>dA.call(this,!0)));{(0,op.cM)("可视曝光第 2 阶段"),t.isViewableExposureReported=!0;const e=t.adProxy.reportExposure({left:n,top:i,width:r,height:o,isMulti:!0,multiList:Object.keys(t.datas).map((e=>+e)),exposureType:"viewable"});(0,op._u)(e,"banner","可视")}}return Promise.resolve()},hA=function(){const e=(0,Xs.Wj)(this);let t,n;e.gridCount===Yv?(t=Math.min(345,Uv),n=t/345*120):e.gridCount===$v&&(t=Math.min(343,Uv),n=t/343*216);let{width:i,height:r}=this.style;i=i||t,r=r||n;const o=(0,op.XS)({outer:{width:i,height:r},inner:{width:t,height:n},minScale:.8,maxScale:Uv/t,side:"width"}),a=e.lastRealWidth!==o.inner.width||e.lastRealHeight!==o.inner.height;return this.style.realWidth=e.lastRealWidth=o.inner.width,this.style.realHeight=e.lastRealHeight=o.inner.height,a&&e.emitter.emit("resize",o.inner),o},pA=function(e){const t=(0,Xs.Wj)(this);t.landingCount++,t.landingCount>1&&t.adProxy.reportRepeatClick({slotId:Zv,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,clkCnt:t.landingCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName}),t.lastLandingTime=+new Date,t.lastJsapiStatus=2,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0;t.adProxy.land(e).then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==t.lastJsapiName||"navigateToMiniProgram"==t.lastJsapiName||"openADCanvas"==t.lastJsapiName||"launchApplication"==t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((e=>{t.lastJsapiStatus=1}))},fA=function(e){if(vA.call(this))return;const t=(0,Xs.Wj)(this);t.isClosed||t.adProxy.fetch(e).then((e=>(t.datas=e,t.data=t.adProxy.data,iA.call(this).then((()=>{t.container.style.hidden=!0})).then((()=>(t.isReady=!1,Ko.uo.remove(t.container)))).then((()=>(t.isViewableExposureReported=!1,t.isShowedExposureReported=!1,t.showedExposureTime=0,t.adProxy.isViewable=!1,nA.call(this),iA.call(this)))).then((()=>vA.call(this)?iA.call(this):t.isHideBYCover?(t.lastDisplayAction="show",iA.call(this)):(t.isShow=!0,mA.call(this,{stage:1001}),Promise.resolve().then((()=>{t.container.style.hidden=!1,t.container.nextLayout((()=>dA.call(this))),gA.call(this)}))))).catch((e=>t.emitter.emit("_error",e)))))).catch((e=>t.emitter.emit("_error",e)))},gA=function(){const e=(0,Xs.Wj)(this);if(e.adIntervals>=30&&e.adIntervals<=3600){e.adTimer&&clearTimeout(e.adTimer);const t=1e3*e.adIntervals;e.adTimer=setTimeout((()=>fA.call(this,!0)),t)}},_A=function(){if(vA.call(this))return;const e=(0,Xs.Wj)(this);e.adTimer&&(clearTimeout(e.adTimer),e.adTimer=null)},mA=function({stage:e}){const t={adtype:4,stage:e};(0,Xs.Wj)(this).adProxy.reportADFunnelModel(t)},yA=function(){if(vA.call(this))return;const e=(0,Xs.Wj)(this);(0,op.cM)("destroy 调用"),_A.call(this),this._destroyed=!0,qv.call(this,{type:2}),iA.call(this).then((()=>e.updateResult)).then((()=>{(0,op.cM)("UI update 完成, 正式开始 destroy"),(0,Uo.Tb)(e.checkAdState),(0,Uo.b$)(e.onHide),e.emitter.off("resize"),e.emitter.off("_error"),e.emitter.off("load"),Ko.uo.remove(e.container),(0,Xs.bn)(this)}))},vA=function(){return this._destroyed};class AA extends Xs.wA{constructor({adUnitId:e,style:t={left:0,top:0,width:0,height:0,opacity:1},adIntervals:n=0,adTheme:i="white",gridCount:r=5}={}){super(),console.warn("格子广告位计划在2021年5月内下线，请尽快接入原生模板广告位替换，详情可查看MP流量主公告消息。");const o=(0,Xs.Wj)(this);if(o.emitter=new jo.Z,o.adProxy=new ip.FF({adUnitId:e,adType:"grid"}),o.clickCount=0,o.landingCount=0,o.lastLandingTime=0,o.lastJsapiName="",o.lastJsapiStatus=0,o.lastJsapiCostTime=0,o.isLandingPage=!1,o.landingPageCostTime=0,o.hideTime=0,o.isShowedExposureReported=!1,o.isViewableExposureReported=!1,o.isReady=!1,o.isShow=!1,o.emitter.on("ready",(()=>o.isReady=!0)),o.isHideBYCover=!1,o.adCover=new pg({adUnitId:e,adType:"grid"}),o.adIntervals="number"==typeof n?n:0,o.adTimer=null,o.showedExposureTime=0,o.clickFirstGradeTime=0,o.adCover.on(lg,(()=>{vA.call(this)||iA.call(this).then((()=>{o.isShow&&!vA.call(this)&&(o.container.style.hidden=!0),o.isHideBYCover=!0,o.lastDisplayAction=""})).catch((e=>{}))})),o.adCover.on(ug,(()=>{vA.call(this)||iA.call(this).then((()=>{o.isShow&&!vA.call(this)&&(o.container.style.hidden=!1),o.isHideBYCover=!1,"show"==o.lastDisplayAction?this.show():"hide"==o.lastDisplayAction&&this.hide()})).catch((e=>{}))})),o.lastRealWidth=0,o.lastRealHeight=0,o.updateResult=Promise.resolve(),this.adUnitId=e,-1===[Yv,$v].indexOf(r))return void console.error("您设置的gridCount参数有误");if(o.gridCount=r,-1===["white","black"].indexOf(i))return void console.error("您设置的adTheme参数有误");this.adTheme=i,this.style={},this._destroyed=!1;let a=null;Object.keys(t).forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>t[e],set:n=>{vA.call(this)||n!==t[e]&&(t[e]=n,o.updateResult=new Promise((e=>{clearTimeout(a),a=setTimeout(e,0)})).then((()=>iA.call(this))).then((()=>Promise.all([oA.call(this),o.container.nextLayout().then((()=>dA.call(this)))]))))}})})),this.style.realWidth=this.style.width,this.style.realHeight=this.style.height,o.adProxy.setSlotData({gridCount:r,adTheme:i,gridOpacity:this.style.opacity});const s=o.adProxy.fetch();s.catch((e=>o.emitter.emit("_error",e))),o.adFetchResult=s,o.adFetchResult.then((e=>{(o.emitter.emitter._events?Object.keys(o.emitter.emitter._events):[]).includes("_error")||"devtools"!==jv?(o.datas=e,o.data=o.adProxy.data,nA.call(this)):console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。")})),o.checkAdState=()=>{o.adFetchResult.then((()=>{if(o.isLandingPage){o.lastJsapiStatus=0,o.isLandingPage=!1;const e=+new Date;o.landingPageCostTime=e-o.hideTime,o.adProxy.reportLandingTime({slotId:Zv,costType:o.adProxy.data&&o.adProxy.data.is_cpm?1:2,openTime:o.hideTime,closeTime:e,stayTime:o.landingPageCostTime,jsapiName:o.lastJsapiName,clickTime:o.lastLandingTime,clkCnt:o.landingCount,retCode:o.lastJsapiStatus,costTime:o.lastJsapiCostTime,actTypeInt:1})}})).then((()=>{o.isShow&&!o.adTimer&&gA.call(this)})).catch((()=>{}))},(0,Uo.dN)(o.checkAdState),o.onHide=e=>{_A.call(this),o.hideTime=+new Date},(0,Uo.vv)(o.onHide)}show({branchId:e,branchDim:t}={}){if(vA.call(this))return Promise.reject({errMsg:"grid-ad has been destroyed"});const n=(0,Xs.Wj)(this);return n.isHideBYCover?(n.lastDisplayAction="show",iA.call(this)):(n.isShow=!0,mA.call(this,{stage:1001}),e?n.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):n.adProxy.resetAnalyseBranchInfo(),iA.call(this).then((()=>{n.container.style.hidden=!1,n.container.nextLayout((()=>dA.call(this))),gA.call(this)})))}hide(){if(vA.call(this))return;const e=(0,Xs.Wj)(this);return e.isHideBYCover?(e.lastDisplayAction="hide",iA.call(this)):(e.isShow=!1,e.adProxy.isViewable=!1,iA.call(this).then((()=>{e.container.style.hidden=!0,_A.call(this)})))}destory(){yA.call(this)}destroy(){yA.call(this)}onResize(e){if(vA.call(this))return;(0,Xs.Wj)(this).emitter.on("resize",e)}offResize(e){if(vA.call(this))return;(0,Xs.Wj)(this).emitter.off("resize",e)}onError(e){if(vA.call(this))return;(0,Xs.Wj)(this).emitter.on("_error",e)}offError(e){if(vA.call(this))return;(0,Xs.Wj)(this).emitter.off("_error",e)}onLoad(e){if(vA.call(this))return;(0,Xs.Wj)(this).emitter.on("load",e)}offLoad(e){if(vA.call(this))return;(0,Xs.Wj)(this).emitter.off("load",e)}}let bA;bA||(bA=new ag),(0,np.Ug)((e=>{bA||(bA=new ag),bA.show(e)})),(0,np.S4)((()=>{bA||(bA=new ag),bA.otherAdsEmitFetch()}));let wA=null;const EA=e=>{const t=Dn()({},e);return delete t.pluginId,(e=>e&&!0===e.multiton?new yy(e):(wA||(wA=new yy(e)),wA))(t)};var TA=n(8006);const SA=new WeakMap;class CA{constructor({type:e="text",style:t={},text:n="",image:i="",onTapCallback:r=(()=>Promise.resolve())}){const o={};SA.set(this,o),o.emitter=new jo.Z,o.onTapCallback=r,t=Object.assign((0,TA.ph)(),t,{position:"absolute"}),this.style={},o.button="text"===e?new Ko.xv({style:t,value:n,eventType:"click"}):new Ko.Ee({style:t,src:i,eventType:"click"}),Object.defineProperty(this,"text",{configurable:!0,enumerable:!0,get:()=>n,set:e=>{n=e,o.button.value=e}}),Object.defineProperty(this,"image",{configurable:!0,enumerable:!0,get:()=>i,set:e=>{i=e,o.button.src=e}}),Object.keys(t).forEach((e=>{"position"!==e&&Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>t[e],set:n=>{t[e]=n,o.button.style[e]=n}})})),o.button.on("click",(()=>{o.onTapCallback().then((e=>o.emitter.emit("tap",e))).catch((e=>o.emitter.emit("tap",e)))})),Ko.uo.add(o.button)}onTap(e){SA.get(this).emitter.on("tap",e)}offTap(e){SA.get(this).emitter.off("tap",e)}show(){SA.get(this).button.style.hidden=!1}hide(){SA.get(this).button.style.hidden=!0}destroy(){const e=SA.get(this);Ko.uo.remove(e.button)}}const IA=(0,op.Fr)((({withCredentials:e=!0,lang:t="en",success:n,fail:i}={})=>{const r=wx&&wx.version&&wx.version.version||"";(0,c.gM)({isImportant:!0,data:{api_name:"webapi_getuserinfo",from_component:!0,with_credentials:e,data:{lang:t,version:r}},success:n,fail:i},{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateWXData","getUserInfo")},beforeSuccess:e=>{a.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})}));class xA extends CA{constructor({type:e="text",style:t,image:n,text:i="获取用户信息",withCredentials:r,lang:o}={}){super({type:e,style:t,image:n,text:i,onTapCallback:()=>IA({withCredentials:r,lang:o})})}}const DA={green:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMHroMcjTH0DGy1sGwV95nfxnBialPaFEXZG5B1iarolFC6Uic4BRlTlsR0Q/0?wx_fmt=png",white:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMH8hmRP9YkP3WHQ9gKcXR4oKD0rwZxFojibQDMfjgwa3foAtjZH7Ce9Xg/0?wx_fmt=png",light:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMHlGKmb23Js82NJ4dH3b3BoUNe74Tvk2Q4ZVfzD8ibwJicgs1czbYd6Qtw/0?wx_fmt=png",dark:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMH6RhR996JZgib3RG3AtyO1OgnR6FibX7DPsBKQAJd5miaYcwyslLR7F6KQ/0?wx_fmt=png"},OA={appid:"",ssid:1037},PA={appid:"",ssid:30,wechat_pkgid:"circlecenter_mixed_circle"};s.Z.onReady((()=>{OA.appid=s.Z.accountInfo.appId,PA.appid=s.Z.accountInfo.appId}));const RA=(0,op.Fr)((({success:e,fail:t,extra:n})=>{if((0,cs.y4)(cs.F0.EVENT_CANVAS_BEFORE_GAME_ClUB),(0,K.J)("openH5GameClub")){const r=(i=Object.assign({},n,PA),`https://game.weixin.qq.com/cgi-bin/h5/static/circlecenter/mixed_circle.html?${Object.keys(i).map((e=>{try{return`${encodeURIComponent(e)}=${encodeURIComponent(i[e])}`}catch(e){return""}})).join("&")}#wechat_redirect`);(0,c.IN)("private_openUrl",{url:r,isNativeStyle:!0,success:e,fail:t})}else{const i="wxff3bb5c177303374",r=function(e,t){return`${e}?${Object.keys(t).map((e=>{try{return`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`}catch(e){return""}})).join("&")}`}("pages/club_index/club_index.html",Object.assign({},n,OA));(0,c.IN)("navigateToMiniProgram",{appId:i,path:r,scene:37,sourcetype:3,success:e,fail:t})}var i}));class kA extends CA{constructor({style:e,icon:t="green",type:n="image",image:i,text:r="打开游戏圈",extra:o}={}){"bindGroup"===n?(n="text",r="关联群聊",o=Object.assign({},o,{action:"bindGroup"})):"joinGroup"===n&&(n="text",r="进入群聊",o=Object.assign({},o,{action:"joinGroup"})),super({type:n,style:e,image:i||DA[t],text:r,onTapCallback:()=>RA({extra:o})}),"image"===n&&Object.defineProperty(this,"icon",{configurable:!0,enumerable:!0,get:()=>t,set:e=>{t=e,_private.button.src=DA[t]}})}}var NA=n(9973);const MA=(0,op.Fr)(ye.sy);class LA extends CA{constructor({type:e="text",style:t,image:n,text:i="打开设置"}){super({type:e,style:t,image:n,text:i,onTapCallback:()=>MA().then((()=>{(0,NA.Y)({name:"openSetting",scene:1})}))})}}let BA="";try{s.Z.onReady((()=>{BA=s.Z.accountInfo.appId}))}catch(e){}const FA=(0,op.Fr)((({success:e,fail:t})=>{(0,c.IN)("private_openUrl",{url:`https://mp.weixin.qq.com/mp/wapreportwxadevlog?action=get_page&appid=${BA}#wechat_redirect`,isNativeStyle:!0,success:e,fail:t})}));class UA extends CA{constructor({type:e="text",style:t,image:n,text:i="打开意见反馈页面"}){super({type:e,style:t,image:n,text:i,onTapCallback:()=>FA()})}}const WA=(0,op.Fr)((0,er.Ce)(!1,"compload"));function jA(e,t){if(!function(e,t){const{toString:n}=Object.prototype;return"Null"===t&&null===e||"Undefined"===t&&void 0===e||n.call(e).slice(8,-1)===t}(t,"String"))return;const n=t.split(".");return n.reduce(((e,t,i)=>i===n.length-1?e[t]:e[t]||{}),e)}function GA(){const e=(0,Xs.Wj)(this),t=new Date;return WA({apiName:"webapi_compload",reqData:{act_id:e.act_id,comp_id:e.comp_id}}).catch((n=>{throw e.reporter.reportKeyValue({action:QA.actionMap.getJSON,execTime:new Date-t,externInfo:JSON.stringify(n),isSuccess:0}),e.config={flows:[]},e.emitter.emit("error",n),new Error(ZA(n))})).then((n=>{e.reporter.reportKeyValue({action:QA.actionMap.getJSON,execTime:new Date-t,isSuccess:1}),n||(n={});let i={};try{i=JSON.parse(n.rawData||"{}")}catch(e){i={}}const{sign:r,config:o}=i;e.sign=r,e.config=o,e.config}))}function VA(){const e=(0,Xs.Wj)(this);this.isDestroyed=!0,this.ready=!1,e.emitter.off("_error"),e.emitter.off("load"),e.pages.forEach((e=>{Ko.uo.remove(e)}))}function HA(){const e=(0,Xs.Wj)(this);return e.destroyPromise||(e.destroyPromise=new Promise((t=>{e.fetchPromise?e.fetchPromise.then((()=>{VA.call(this),t()})).catch((()=>{VA.call(this),t()})):(VA.call(this),t())}))),e.destroyPromise}function zA(){const e=(0,Xs.Wj)(this);return e.fetchPromise=GA.call(this).then((()=>{if(this.isDestroyed)throw new Error("组件已经被销毁");return e.uiEngine.init()})),e.fetchPromise}function ZA(e){let t;try{t=JSON.stringify(e)}catch(e){t="{}"}return t}function YA(e){return JSON.parse(JSON.stringify(e))}function $A(e,t){let n;e=e||"{}";try{n=JSON.parse(e)}catch(e){n=t||{}}return n}const qA={appid:"",scene:0};s.Z.onReady((()=>{const e=s.Z.appLaunchInfo||{},t=s.Z.accountInfo||{};qA.scene=e.scene||0,qA.appid=t.appId||"",qA.SDKVersion=s.Z.SDKVersion}));class QA{constructor(e){this._private=e}reportKeyValue({action:e,execTime:t=0,externInfo:n="",isSuccess:i=1,flowid:r=""}){const o=[qA.scene,this._private.act_id,this._private.comp_id,qA.SDKVersion,(0,Ae._getCurrentNetworkType)(),e,i,t,n,r].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"GameComponent",value:o,force:!0,immediately:!0})}}QA.actionMap={getJSON:1,execFlow:2,execModelAction:3,shareAppMessage:4,launchGameWithShare:5,broadcastEvent:6,closeComponent:7,exposure:8,createRewardedVideoAd:9,createAndShowRewardedVideoAdSuccess:10,createAndShowRewardedVideoAdFail:11,confirmRewardVideo:12,cancelRewardVideo:13,destroyRewardedVideoAd:14,videoOnError:15,showModal:16,confirmModal:17};const JA=(0,op.Fr)((0,er.Ce)(!1,"compflowinvoke")),XA=/\$(.+)\$/,KA={};let eb={};const tb={launchInfo:{query:eb.query||{}}};Object.defineProperty(tb,"network_type",{configurable:!0,enumerable:!0,get:()=>(0,Ae._getCurrentNetworkType)()}),s.Z.onReady((()=>{eb=s.Z.appLaunchInfo,Object.assign(tb.launchInfo.query,eb.query||{}),wx.onShow((e=>{Object.assign(tb.launchInfo.query,e.query||{})}))}));const nb={String:"",Unit32:"0",Boolean:"true"},ib={String:String,Uint32:String,Boolean:Boolean};const rb=/\$\((.+)\)/;function ob(e,t,n,i){return"Variable"===t?jA(tb,n):"datasetValue"===t?function(e,t,n){const i=t.split("."),r=i[0];if(rb.test(r)){const t=rb.exec(r)[1],o="this"===t?n:e.uiEngine.getElementById(t);return o&&jA(o.dataset,i.slice(1).join("."))}}(e,n,i):n}function ab(e,t,n=null){return Object.keys(t&&t.inputs||{}).reduce(((i,r)=>{const o=t.inputs[r];return i[r]=function(e){const t=YA(e);return void 0===t.value&&(t.value=nb[t.format]),"Boolean"!==t.format?t.value=ib[t.format]&&ib[t.format](t.value)||t.value:t.value="true"===t.value,t}({value:ob(e,o.parse,o.value,n),format:o.format}),i}),{})}const sb=new class{getCgi(e,t={},n){const{channel:i,id:r}=t,o={act_id:e.act_id,flow_id:r,sign:e.sign,inputs:ab(e,i,n)};return function(e,{act_id:t,flow_id:n,inputs:i,sign:r}){const o=new Date;return JA({apiName:"webapi_compflowinvoke",reqData:{act_id:t,flow_id:n,inputs:i,sign:r}}).catch((t=>{throw e.reporter.reportKeyValue({action:QA.actionMap.execFlow,execTime:new Date-o,externInfo:ZA(t),isSuccess:0,flowid:n}),new Error(t.errMsg||"")})).then((t=>(e.reporter.reportKeyValue({action:QA.actionMap.execFlow,execTime:new Date-o,isSuccess:1,flowid:n}),t)))}(e,o).then((t=>{t||(t={});const n=$A(t.rawData||"{}");n.models;const{models:i=[]}=n,r="minigame_component_post";e.uiEngine.modelsHandler(n.models.filter((e=>e.id!==r)));const o=i.find((e=>e.id===r));if(o&&o.extra&&o.extra.action)return $A(o.extra.action)}))}closeComponent(e){const t=e.pages.map((e=>(e.style.hidden=!0,e.nextLayout())));return e.reporter.reportKeyValue({action:QA.actionMap.closeComponent,isSuccess:1}),Promise.all(t).then((()=>{e.emitter.emit("close")}))}shareAppMessage(e,t,n){const i=n&&n.dataset||{},r=i.share_params||{};let o="";Object.keys(r).forEach(((e,t)=>{o+=`${e}=${r[e]}`,t<Object.keys(r).length-1&&(o+="&")})),e.reporter.reportKeyValue({action:QA.actionMap.shareAppMessage,isSuccess:1,externInfo:ZA({title:i.title||"",query:o,imageUrl:i.image_url||""})}),(0,Wr.$F)({title:i.title||"",query:o,imageUrl:i.image_url||""})}broadcastEvent(e,t){const{channel:n}=t,i=ab(e,n);i.eventName&&i.eventName.value&&(e.emitter.emit(i.eventName.value,{errcode:Number(i.errcode&&i.errcode.value||0),errMsg:i.errMsg&&i.errMsg.value||""}),e.reporter.reportKeyValue({action:QA.actionMap.broadcastEvent,isSuccess:1,externInfo:ZA(i)}))}showModal(e,t){const{channel:n}=t,i=ab(e,n),r=i.title&&i.title.value||"提示",o=i.content&&i.content.value||"温馨提示",a=i.cancelText&&i.cancelText.value||"取消",s=i.cancelColor&&i.cancelColor.value||"#000000",c=i.confirmText&&i.confirmText.value||"确定",l=i.confirmColor&&i.confirmColor.value||"#576B95";let u=i.showCancel&&i.showCancel.value;return u=void 0===u||u,e.reporter.reportKeyValue({action:QA.actionMap.showModal,isSuccess:1,externInfo:ZA(i)}),new Promise((t=>{(0,Oe.K4)({title:r,content:o,showCancel:u,cancelText:a,cancelColor:s,confirmText:c,confirmColor:l,success(n){n.confirm?(e.reporter.reportKeyValue({action:QA.actionMap.confirmModal,isSuccess:1,externInfo:ZA(i)}),t()):n.cancel}})}))}showLoading(e,t){const{channel:n}=t,i=ab(e,n),r=i.title&&i.title.value||"加载中...",o=i.mask&&i.mask.value||!1;return new Promise((e=>{(0,Oe.QP)({title:r,mask:o,complete:e})}))}showToast(e,t){const{channel:n}=t,i=ab(e,n),r=i.duration&&i.duration.value||2e3;return new Promise((e=>{(0,Oe.CF)({title:i.title&&i.title.value||"",icon:i.type&&i.type.value||"none",duration:r,complete:e})}))}actionFlow(e,t,n){t.id;const{channel:i={},conditions:r={}}=t,o=ab(e,i,n),{models:a=[]}=i;return new Promise((t=>{const i=o.cond_key&&void 0!==o.cond_key.value?o.cond_key.value:void 0;if(void 0!==i&&Object.keys(r).find((e=>e===`${i}`))){const t=r[i],{channel:n={}}=t,{models:o=[]}=n;e.uiEngine.modelsHandler(o)}const s=a.map((e=>{const t=YA(e);t.attributes||(t.attributes={});const{attributes:i={}}=t,r=$A(i.dataset);for(const e in r){const t=XA.test(r[e]),i=XA.exec(r[e]);if(t){const t=i[1],o=jA(n,t);r[e]=r[e].replace(XA,o)}}return t.attributes.dataset=ZA(r),t}));s.length&&e.uiEngine.modelsHandler(s),t()}))}createRewardedVideoAd(e,t,n){const{dataset:i}=n,{adUnitId:r}=i;return e.reporter.reportKeyValue({action:QA.actionMap.createRewardedVideoAd,externInfo:r}),new Promise(((t,n)=>{if(r||((0,Oe.Zk)(),n(new Error("广告id参数必填"))),KA[r])t(KA[r]);else{const n=EA({adUnitId:r,multiton:!0});KA[r]=n,n.onError((t=>{t.adUnitId=r,e.reporter.reportKeyValue({action:QA.actionMap.videoOnError,externInfo:ZA(t),isSuccess:0})})),t(n)}}))}createAndShowRewardedVideoAd(e,t,n){return(0,Oe.QP)({title:"加载视频中..."}),new Promise(((i,r)=>{this.createRewardedVideoAd(e,t,n).then((t=>(t.load().then((n=>{t.show().then((()=>{e.reporter.reportKeyValue({action:QA.actionMap.createAndShowRewardedVideoAdSuccess,externInfo:t.adUnitId}),(0,Oe.Zk)()}))})).catch((n=>{(0,Oe.Zk)(),(0,Oe.CF)({title:"无可观看视频",icon:"none"}),e.reporter.reportKeyValue({action:QA.actionMap.createAndShowRewardedVideoAdFail,externInfo:t.adUnitId}),r(n)})),t.closeCbk&&t.offClose(t.closeCbk),t.closeCbk=n=>{n&&n.isEnded||void 0===n?(e.reporter.reportKeyValue({action:QA.actionMap.confirmRewardVideo,externInfo:t.adUnitId}),i()):(e.reporter.reportKeyValue({action:QA.actionMap.cancelRewardVideo,externInfo:t.adUnitId}),(0,Oe.CF)({title:"领取失败",icon:"none"}))},t.onClose(t.closeCbk),t.load())))}))}destroyRewardedVideoAd(e,t){const{channel:n}=t,i=ab(e,n),r=i.id&&i.id.value,o=KA.get(r);return new Promise(((t,n)=>{r&&o?(e.reporter.reportKeyValue({action:QA.actionMap.destroyRewardedVideoAd,externInfo:r,isSuccess:1}),o.destroy(),KA.delete(r),t()):(e.reporter.reportKeyValue({action:QA.actionMap.destroyRewardedVideoAd,externInfo:r,isSuccess:0}),n(new Error("组件不存在")))}))}flowParser(e,t={},n){const i=t.type||t.flow_type;let r;return r=this[i]?this[i](e,t,n):Promise.reject(),t.next?r.then((()=>this.flowParser(e,t.next,n))):r}};function cb(e={},t){let n;return e.id===t&&(n=e),(e.items||[]).forEach((e=>{n=cb(e,t)||n})),n}function lb(e={},t,n){return n||(n=[]),(function(e){const{attributes:t={}}=e;let{dataset:n="{}"}=t;return n=$A(n),n}(e).className||"").split(/\s+/).find((e=>e===t))&&n.push(e),(e.items||[]).forEach((e=>lb(e,t,n))),n}function ub(e,t){if(e.value&&(t.value=e.value),e.attributes){if(t.attributes||(t.attributes={}),e.attributes.dataset){const n=Object.assign($A(t.attributes.dataset||""),$A(e.attributes.dataset));t.attributes.dataset=ZA(n)}if(e.attributes.style){const n=Object.assign($A(t.attributes.style||""),$A(e.attributes.style));t.attributes.style=ZA(n)}}}function db(e={}){const{flows:t=[]}=e,n=t.find((e=>"init"===e.id));if(!n)return;const{channel:i={}}=n,{models:r=[]}=i,{model:o={}}=e;r.forEach((e=>{const{extra:t={}}=e;if(t.action){const e=$A(t.action);if("execModelAction"===e.actionType){let t=e.model_actions||[];if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t=[]}t.forEach((e=>{if(e.id){const t=cb(o,e.id);t&&ub(e,t)}else if(e.class){lb(o,e.class).forEach((t=>{ub(e,t)}))}}))}}}))}const hb=/(.+)\((.+)\)/,pb=/\$(.+)\$/,fb=/\$\((.+)\)/,gb={view:Ko.G7,text:Ko.xv,image:Ko.Ee};function _b(e,t){Object.keys(t.query||{}).find((e=>e.indexOf("minigame_component")>-1))&&(t.query,e.reporter.reportKeyValue({action:QA.actionMap.launchGameWithShare,isSuccess:1,externInfo:ZA(t.query)}))}function mb(e,t){e.style.scale=t;for(const n in e.children)mb(e.children[n],t)}class yb{constructor(e,t){this._private=e,this.componentInstance=t,this.id=1}oneFlowExec(e,t){const{_private:n}=this,i=n.config&&n.config.flows.find((t=>t.id===e));return i&&sb.flowParser(n,i,t)}oneModelActionExec(e,t,n){const{_private:i}=this,r=i.config.model_actions.find((t=>t.name===e));if("$this"===t)this.updateOneElement(r,n);else{const e=t.split(":");if("$class"===e[0])this.getElementsByClassName(e[1]).forEach((e=>{this.updateOneElement(r,e)}));else if("$id"===e[0]){const t=this.getElementById(e[1]);t&&this.updateOneElement(r,t)}}}eventReigster(e,t){const{dataset:n}=t.attributes;n.click&&e.on("click",(t=>{if(e.id,e.disabled||!function(e){const t=e.absoluteX,n=e.absoluteY,i=e.absoluteEndX,r=e.absoluteEndY,o=e.pressInterval;let a=!1;return Math.abs(r-n)<30&&Math.abs(i-t)<30&&o<300&&(a=!0),a}(t))return;n.click.split(";").forEach((t=>{if("execFlow"===t&&n.flowid)n.flowid.split(";").forEach((t=>{this.oneFlowExec(t,e)}));else if("execModelAction"===t&&n.action){n.action.split(";").filter((e=>e&&e.match(hb))).forEach((t=>{const n=hb.exec(t),i=n[1],r=n[2];this.oneModelActionExec(i,r,e)}))}}))}))}create(e,t){const{_private:n}=this,{attributes:i,component:r,value:o}=e;i.style=$A(i.style);const a=$A(i.dataset);i.dataset=a,i.value=o,i.src=o,i.bubbleEvent=!0;const s=new(0,gb[r])(i);if("list"===a.type&&a.listlength&&e.items.length){const t=e.items[0];e.items=[];for(let n=0;n<a.listlength;n++){const i=YA(t);a.defaultvalue&&(i.value=a.defaultvalue,i.src=a.defaultvalue);const r=$A(i.attributes.dataset);r.idprefix&&(r.idName=r.idprefix+n,i.attributes.dataset=ZA(r)),e.items.push(i)}}s.dataset=a,a.if&&(s.style.hidden=!0,setTimeout((()=>{if(a.if&&fb.test(a.if)){const e=a.if.split("."),t=fb.exec(a.if)[1],n=this.getElementById(t),i=e.slice(1).join("."),r=`${i}__bridge`;n.dataset[r]=n.dataset[i],void 0!==n.dataset[i]&&(s.style.hidden=!n.dataset[i]),Object.defineProperty(n.dataset,i,{configurable:!0,enumerable:!0,get:()=>n.dataset[r],set:e=>{void 0!==e&&(s.style.hidden=!e),n.dataset[r]=e}})}}),0)),e.items.forEach((e=>{const n=this.create(e,t);s.add(n)})),this.eventReigster.call(this,s,e);const c=a.idName||this.id++;return n[`${t}Container`][c]=s,s}init(){const{_private:e}=this;db(e.config);const t=(0,ve.xI)();e.pages=[],e.pageContainers={},e.root=new Ko.G7({}),e.root.dataset={};const n=e.config.model;n.items.forEach((i=>{const{id:r}=i,o=`${r}Container`;e[o]={},e.pageContainers[o]=e[o];const{attributes:a={}}=i,s=$A(a.style);s.hidden=!0,"singlePage"!==n.label&&(s.width=t.windowWidth,s.height=t.windowHeight),a.style=ZA(s),this.create(i,r);const c=e[o][r];if(e[r]=c,e[r].isPage=!0,e.pages.push(c),Ko.uo.add(c),"singlePage"===n.label){const{style:t}=c;this.componentInstance.style={width:t.width||0,height:t.height||0,left:0,top:0};["width","height","left","top"].forEach((e=>{Object.defineProperty(this.componentInstance.style,e,{configurable:!0,enumerable:!0,get:()=>c.computedStyle[e],set:n=>{if("width"===e||"height"===e)throw new Error("can not set width and height");n!==t[e]&&(t[e]=n)}})})),Object.keys(e.style).forEach((t=>{"left"!==t&&"top"!==t||(this.componentInstance.style[t]=e.style[t])}))}})),this.componentInstance.ready=!0,e.emitter.emit("load"),_b(e,(0,Gr.x9)()),(0,Uo.dN)((t=>{_b(e,t)}))}updateListTreeChild(e,t){const{dataset:n}=e;if(n.origin&&pb.test(n.origin)){const e=jA({item:t},pb.exec(n.origin)[1]);n.origin_source=e}if(n.render&&pb.test(n.render)){const i=jA({item:t},pb.exec(n.render)[1]);i&&(e.value=i,e.src=i)}if(n.if&&pb.test(n.if)){const i=jA({item:t},pb.exec(n.if)[1]);void 0!==i&&(e.style.hidden=!i)}for(const n in e.children)this.updateListTreeChild(e.children[n],t)}updateListTree(e,t){const n=$A(t.value,[]),i=Object.keys(e.children).map((t=>e.children[t]));n.forEach(((e,t)=>{this.updateListTreeChild(i[t],e)}))}updateList(e,t){const{dataset:n}=e,i=$A(t.value);if(e&&"list"===e.dataset.type&&t.value_filter_name){const r=Object.keys(e.children).map((t=>e.children[t])),o=t.value_filter_name.split(".");if(o[0].indexOf("[]")>-1){const e=i[o[0].replace("[]","")];if(e){const t=o[1];r.forEach(((i,r)=>{if(e[r]&&e[r][t]){let n=e[r][t];"avatar_url"===t&&(n+="/0"),i.src=n,i.value=n}else n.defaultvalue&&(i.src=n.defaultvalue,i.value=n.defaultvalue)}))}}}}getElementsByClassName(e){const{_private:t}=this;let n=[];return Object.keys(t.pageContainers).forEach((i=>{const r=t.pageContainers[i],o=Object.keys(r);n=n.concat(o.map((t=>!!(r[t].dataset.className||"").split(/\s+/).find((t=>t===e))&&r[t])).filter((e=>e)))})),n}getElementById(e){const{_private:t}=this;if("root"===e)return t.root;let n;return Object.keys(t.pageContainers).forEach((i=>{const r=t.pageContainers[i],o=Object.keys(r).find((t=>r[t].dataset.idName===e));o&&r[o]&&(n=r[o])})),n}updateOneElement(e,t){const{_private:n}=this,i=t||this.getElementById(e.id),{attributes:r={},value:o}=e;if(i){if(void 0!==r.hide&&(i.style.hidden=r.hide,!1===i.style.hidden&&i.isPage&&n.reporter.reportKeyValue({action:QA.actionMap.exposure,isSuccess:1,externInfo:ZA(i.dataset)})),o&&i.value&&(i.value=o),o&&i.src&&(i.src=o),r.dataset&&(i.dataset=Object.assign(i.dataset,$A(r.dataset))),r.style)try{const e=$A(r.style);Object.assign(i.style,e),void 0!==e.scale&&mb(i,e.scale)}catch(e){}void 0!==r.disabled&&(i.disabled=r.disabled),this.updateList(i,e),"list"!==i.dataset.type||e.value_filter_name||this.updateListTree(i,e)}e.items&&e.items.length&&e.items.forEach((e=>{this.updateOneElement(e)}))}modelsHandler(e){e.forEach((e=>{this.updateOneElement(e)})),e.filter((e=>"root"===e.id)).forEach(this.rootHandler.bind(this))}rootHandler(e){const{_private:t}=this,{extra:n={}}=e,i=$A(n.action);if("execFlow"===i.actionType)sb.flowParser(t,i);else if("execConfigFlow"===i.actionType){const{type:e,channel:n}=i,r=t.config.flows.find((t=>t.id===e));if(r){const e=YA(r);e.channel=n||e.channel,sb.actionFlow(t,e)}}else if("execModelAction"===i.actionType){let e=i.model_actions||[];"string"==typeof e&&(e=$A(e,[])),e.forEach((e=>{if(!e.name&&e.id)this.updateOneElement(e);else if(!e.name&&e.class)this.getElementsByClassName(e.class).forEach((t=>{this.updateOneElement(e,t)}));else{const n=YA(t.config.model_actions.find((t=>t.name===e.name)));n.id=e.id,this.updateOneElement(n)}}))}}}function vb(e,t,n){return Math.max(t,Math.min(e,n))}let Ab,bb=0;function wb(){return bb}function Eb(e){bb=e}const Tb={ready:!1,position:{x:0,y:0},scale:1,pixelRatio:3,IS_DEVTOOLS:!1,designSize:{width:0,height:0},maxSize:{width:0,height:0},lockSize:{width:0,height:0},toolWidth:0,screenWidth:0,screenHeight:0,headerHeight:0,device:{width:0,height:0},padding:{left:16,top:16}},Sb={commonStyle:{},dataStyle:{},listStyle:{},tipsStyle:{},linkStyle:{},userNameStyle:{},contextStyle:{},joinStyle:{},labelStyle:{},giftStyle:{},titleStyle:{},shareTitleStyle:{},timeStyle:{},tipStyle:{},newMessageStyle:{},toastStyle:{}};function Cb(){return new Promise((e=>{Tb.ready?e(Tb):new Promise((e=>{Ab||(Ab=(0,ve.xI)()),e(Ab)})).then((t=>{Tb.ready=!0;const{devicePixelRatio:n,screenWidth:i,screenHeight:r,platform:o,safeArea:a}=t;Tb.IS_DEVTOOLS="devtools"===o,Tb.IS_DEVTOOLS?(Tb.padding.left=0,Tb.padding.top=0):(Tb.position.x=a.left+Tb.padding.left,Tb.position.y=a.top+Tb.padding.top,i>r&&("ios"!==o||Tb.IS_DEVTOOLS||(Tb.position.x=a.top+Tb.padding.left,Tb.position.y=a.left+Tb.padding.top),Tb.position.y+=16)),Tb.screenWidth=i,Tb.screenHeight=r,Tb.scale=Math.min(1,i/414);const s=Math.round(n*Tb.scale*1e3)/1e3;Tb.pixelRatio=s,Tb.designSize={width:300*s,height:170*s},Tb.maxSize={width:300*s,height:170*s},Tb.lockSize={width:300*s,height:112*s},Tb.toolWidth=32*s,Tb.headerHeight=48*s,Tb.device={width:Tb.designSize.width,height:Tb.designSize.height},function(e,t){const n={fill:16777215,fontSize:12*e.pixelRatio,whiteSpace:"normal",textBaseline:"middle",lineHeight:16*e.pixelRatio,dropShadow:!0,dropShadowColor:"rgba(0, 0, 0, 0.8)",dropShadowDistance:1*e.pixelRatio},i=Object.assign({},n,{fontSize:12*e.pixelRatio,fill:14737632,breakWords:!0,wordWrap:!0,wordWrapWidth:e.device.width-72*e.pixelRatio}),r=Object.assign({},n,{fontSize:12*e.pixelRatio,fill:14737632,breakWords:!0,wordWrap:!0,wordWrapWidth:e.device.width-72*e.pixelRatio}),o=Object.assign({},i,{fill:10592673}),a=Object.assign({},i,{fill:8425639}),s=Object.assign({},n,{fill:14737632}),c=Object.assign({},n,{breakWords:!0,wordWrap:!0,wordWrapWidth:e.device.width-48*e.pixelRatio}),l=Object.assign({},n,{lineHeight:20*e.pixelRatio,breakWords:!0,wordWrap:!0,wordWrapWidth:e.device.width-56*e.pixelRatio}),u=Object.assign({},n,{fontSize:10*e.pixelRatio,lineHeight:16*e.pixelRatio,dropShadow:!1}),d=Object.assign({},n,{fill:9621832}),h=Object.assign({},n,{breakWords:!0,wordWrap:!0,wordWrapWidth:e.device.width-184*e.pixelRatio,dropShadow:!1}),p=Object.assign({},n,{dropShadow:!1}),f=Object.assign({},n,{fontSize:10*e.pixelRatio,lineHeight:14*e.pixelRatio,dropShadow:!1}),g=Object.assign({},f,{fill:10592673}),_=Object.assign({},f,{fill:0,lineHeight:12*e.pixelRatio}),m=Object.assign({},n,{fill:16777215,fontSize:14*e.pixelRatio,lineHeight:20*e.pixelRatio,dropShadow:!1});t.commonStyle=n,t.dataStyle=i,t.tipsStyle=o,t.linkStyle=a,t.userNameStyle=s,t.contextStyle=c,t.joinStyle=l,t.labelStyle=u,t.giftStyle=d,t.titleStyle=h,t.shareTitleStyle=p,t.timeStyle=f,t.tipStyle=g,t.newMessageStyle=_,t.toastStyle=m,t.listStyle=r}(Tb,Sb),e(Tb)}))}))}let Ib=!0;s.Z.onReady((()=>{const{platform:e}=(0,ve.xI)();Ib="devtools"===e}));const xb=function(){const e=(0,Ur.B)();return e.bindingScreen=wb(),e},Db=$r();var Ob=/iPhone/i,Pb=/iPod/i,Rb=/iPad/i,kb=/\biOS-universal(?:.+)Mac\b/i,Nb=/\bAndroid(?:.+)Mobile\b/i,Mb=/Android/i,Lb=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Bb=/Silk/i,Fb=/Windows Phone/i,Ub=/\bWindows(?:.+)ARM\b/i,Wb=/BlackBerry/i,jb=/BB10/i,Gb=/Opera Mini/i,Vb=/\b(CriOS|Chrome)(?:.+)Mobile/i,Hb=/Mobile(?:.+)Firefox\b/i,zb=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream},Zb={platform:"ios",language:"zh-cn",appVersion:"5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/zh_CN"},Yb=function(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,i=n.split("[FBAN");void 0!==i[1]&&(n=i[0]),void 0!==(i=n.split("Twitter"))[1]&&(n=i[0]);var r=function(e){return function(t){return t.test(e)}}(n),o={apple:{phone:r(Ob)&&!r(Fb),ipod:r(Pb),tablet:!r(Ob)&&(r(Rb)||zb(t))&&!r(Fb),universal:r(kb),device:(r(Ob)||r(Pb)||r(Rb)||r(kb)||zb(t))&&!r(Fb)},amazon:{phone:r(Lb),tablet:!r(Lb)&&r(Bb),device:r(Lb)||r(Bb)},android:{phone:!r(Fb)&&r(Lb)||!r(Fb)&&r(Nb),tablet:!r(Fb)&&!r(Lb)&&!r(Nb)&&(r(Bb)||r(Mb)),device:!r(Fb)&&(r(Lb)||r(Bb)||r(Nb)||r(Mb))||r(/\bokhttp\b/i)},windows:{phone:r(Fb),tablet:r(Ub),device:r(Fb)||r(Ub)},other:{blackberry:r(Wb),blackberry10:r(jb),opera:r(Gb),firefox:r(Hb),chrome:r(Vb),device:r(Wb)||r(jb)||r(Gb)||r(Hb)||r(Vb)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(Zb),$b={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(e){var t,n=!0;(Yb.tablet||Yb.phone)&&(Yb.apple.device&&(t=Zb.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(n=!1),Yb.android.device&&(t=Zb.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(n=!1));return n?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:Yb.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!Yb.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},qb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function Qb(e,t){return e(t={exports:{}},t.exports),t.exports}var Jb=Qb((function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new r(i,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,a=new Array(o);r<o;r++)a[r]=i[r].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,r,o,a){var s=arguments,c=n?n+e:e;if(!this._events[c])return!1;var l,u,d=this._events[c],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,r),!0;case 5:return d.fn.call(d.context,t,i,r,o),!0;case 6:return d.fn.call(d.context,t,i,r,o,a),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=s[u];d.fn.apply(d.context,l)}else{var p,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),h){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,i);break;case 4:d[u].fn.call(d[u].context,t,i,r);break;default:if(!l)for(p=1,l=new Array(h-1);p<h;p++)l[p-1]=s[p];d[u].fn.apply(d[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||r&&!s.once||i&&s.context!==i||a(this,o);else{for(var c=0,l=[],u=s.length;c<u;c++)(s[c].fn!==t||r&&!s[c].once||i&&s[c].context!==i)&&l.push(s[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})),Xb=ew,Kb=ew;function ew(e,t,n){n=n||2;var i,r,o,a,s,c,l,u=t&&t.length,d=u?t[0]*n:e.length,h=tw(e,0,d,n,!0),p=[];if(!h||h.next===h.prev)return p;if(u&&(h=function(e,t,n,i){var r,o,a,s=[];for(r=0,o=t.length;r<o;r++)(a=tw(e,t[r]*i,r<o-1?t[r+1]*i:e.length,i,!1))===a.next&&(a.steiner=!0),s.push(hw(a));for(s.sort(cw),r=0;r<s.length;r++)n=nw(n=lw(s[r],n),n.next);return n}(e,t,h,n)),e.length>80*n){i=o=e[0],r=a=e[1];for(var f=n;f<d;f+=n)(s=e[f])<i&&(i=s),(c=e[f+1])<r&&(r=c),s>o&&(o=s),c>a&&(a=c);l=0!==(l=Math.max(o-i,a-r))?1/l:0}return iw(h,p,n,i,r,l),p}function tw(e,t,n,i,r){var o,a;if(r===Sw(e,t,n,i)>0)for(o=t;o<n;o+=i)a=ww(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=ww(o,e[o],e[o+1],a);return a&&_w(a,a.next)&&(Ew(a),a=a.next),a}function nw(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!_w(i,i.next)&&0!==gw(i.prev,i,i.next))i=i.next;else{if(Ew(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function iw(e,t,n,i,r,o,a){if(e){!a&&o&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=dw(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,o,a,s,c,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<l&&(s++,i=i.nextZ);t++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1)}(r)}(e,i,r,o);for(var s,c,l=e;e.prev!==e.next;)if(s=e.prev,c=e.next,o?ow(e,i,r,o):rw(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),Ew(e),e=c.next,l=c.next;else if((e=c)===l){a?1===a?iw(e=aw(nw(e),t,n),t,n,i,r,o,2):2===a&&sw(e,t,n,i,r,o):iw(nw(e),t,n,i,r,o,1);break}}}function rw(e){var t=e.prev,n=e,i=e.next;if(gw(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(pw(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&gw(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function ow(e,t,n,i){var r=e.prev,o=e,a=e.next;if(gw(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,c=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,d=dw(s,c,t,n,i),h=dw(l,u,t,n,i),p=e.prevZ,f=e.nextZ;p&&p.z>=d&&f&&f.z<=h;){if(p!==e.prev&&p!==e.next&&pw(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&gw(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&pw(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&gw(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&pw(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&gw(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&pw(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&gw(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function aw(e,t,n){var i=e;do{var r=i.prev,o=i.next.next;!_w(r,o)&&mw(r,i,i.next,o)&&Aw(r,o)&&Aw(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),Ew(i),Ew(i.next),i=e=o),i=i.next}while(i!==e);return nw(i)}function sw(e,t,n,i,r,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&fw(a,s)){var c=bw(a,s);return a=nw(a,a.next),c=nw(c,c.next),iw(a,t,n,i,r,o),void iw(c,t,n,i,r,o)}s=s.next}a=a.next}while(a!==e)}function cw(e,t){return e.x-t.x}function lw(e,t){var n=function(e,t){var n,i=t,r=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===a)return n;var c,l=n,u=n.x,d=n.y,h=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&pw(o<d?r:a,o,u,d,o<d?a:r,o,i.x,i.y)&&(c=Math.abs(o-i.y)/(r-i.x),Aw(i,e)&&(c<h||c===h&&(i.x>n.x||i.x===n.x&&uw(n,i)))&&(n=i,h=c)),i=i.next}while(i!==l);return n}(e,t);if(!n)return t;var i=bw(n,e),r=nw(n,n.next);return nw(i,i.next),t===n?r:t}function uw(e,t){return gw(e.prev,e,t.prev)<0&&gw(t.next,e,e.next)<0}function dw(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function hw(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function pw(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function fw(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&mw(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Aw(e,t)&&Aw(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(gw(e.prev,e,t.prev)||gw(e,t.prev,t))||_w(e,t)&&gw(e.prev,e,e.next)>0&&gw(t.prev,t,t.next)>0)}function gw(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _w(e,t){return e.x===t.x&&e.y===t.y}function mw(e,t,n,i){var r=vw(gw(e,t,n)),o=vw(gw(e,t,i)),a=vw(gw(n,i,e)),s=vw(gw(n,i,t));return r!==o&&a!==s||!(0!==r||!yw(e,n,t))||!(0!==o||!yw(e,i,t))||!(0!==a||!yw(n,e,i))||!(0!==s||!yw(n,t,i))}function yw(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function vw(e){return e>0?1:e<0?-1:0}function Aw(e,t){return gw(e.prev,e,e.next)<0?gw(e,t,e.next)>=0&&gw(e,e.prev,t)>=0:gw(e,t,e.prev)<0||gw(e,e.next,t)<0}function bw(e,t){var n=new Tw(e.i,e.x,e.y),i=new Tw(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function ww(e,t,n,i){var r=new Tw(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ew(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Tw(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sw(e,t,n,i){for(var r=0,o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}ew.deviation=function(e,t,n,i){var r=t&&t.length,o=r?t[0]*n:e.length,a=Math.abs(Sw(e,0,o,n));if(r)for(var s=0,c=t.length;s<c;s++){var l=t[s]*n,u=s<c-1?t[s+1]*n:e.length;a-=Math.abs(Sw(e,l,u,n))}var d=0;for(s=0;s<i.length;s+=3){var h=i[s]*n,p=i[s+1]*n,f=i[s+2]*n;d+=Math.abs((e[h]-e[f])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[f+1]-e[h+1]))}return 0===a&&0===d?0:Math.abs((d-a)/a)},ew.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[r][o][a]);r>0&&(i+=e[r-1].length,n.holes.push(i))}return n},Xb.default=Kb;var Cw=Qb((function(e,t){!function(n){var i=t&&!t.nodeType&&t,r=e&&!e.nodeType&&e,o="object"==typeof qb&&qb;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var a,s,c=2147483647,l=36,u=/^xn--/,d=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,g=String.fromCharCode;function _(e){throw RangeError(p[e])}function m(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function y(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+m((e=e.replace(h,".")).split("."),t).join(".")}function v(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function A(e){return m(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+g(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var i=0;for(e=n?f(e/700):e>>1,e+=f(e/t);e>455;i+=l)e=f(e/35);return f(i+36*e/(e+38))}function E(e){var t,n,i,r,o,a,s,u,d,h,p,g=[],m=e.length,y=0,v=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&_("not-basic"),g.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<m;){for(o=y,a=1,s=l;r>=m&&_("invalid-input"),((u=(p=e.charCodeAt(r++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:l)>=l||u>f((c-y)/a))&&_("overflow"),y+=u*a,!(u<(d=s<=b?1:s>=b+26?26:s-b));s+=l)a>f(c/(h=l-d))&&_("overflow"),a*=h;b=w(y-o,t=g.length+1,0==o),f(y/t)>c-v&&_("overflow"),v+=f(y/t),y%=t,g.splice(y++,0,v)}return A(g)}function T(e){var t,n,i,r,o,a,s,u,d,h,p,m,y,A,E,T=[];for(m=(e=v(e)).length,t=128,n=0,o=72,a=0;a<m;++a)(p=e[a])<128&&T.push(g(p));for(i=r=T.length,r&&T.push("-");i<m;){for(s=c,a=0;a<m;++a)(p=e[a])>=t&&p<s&&(s=p);for(s-t>f((c-n)/(y=i+1))&&_("overflow"),n+=(s-t)*y,t=s,a=0;a<m;++a)if((p=e[a])<t&&++n>c&&_("overflow"),p==t){for(u=n,d=l;!(u<(h=d<=o?1:d>=o+26?26:d-o));d+=l)E=u-h,A=l-h,T.push(g(b(h+E%A,0))),u=f(E/A);T.push(g(b(u,0))),o=w(n,y,i==r),n=0,++i}++n,++t}return T.join("")}if(a={version:"1.3.2",ucs2:{decode:v,encode:A},decode:E,encode:T,toASCII:function(e){return y(e,(function(e){return d.test(e)?"xn--"+T(e):e}))},toUnicode:function(e){return y(e,(function(e){return u.test(e)?E(e.slice(4).toLowerCase()):e}))}},i&&r)if(e.exports==i)r.exports=a;else for(s in a)a.hasOwnProperty(s)&&(i[s]=a[s]);else n.punycode=a}(qb)})),Iw=function(e){return"string"==typeof e},xw=function(e){return"object"==typeof e&&null!==e},Dw=function(e){return null===e},Ow=function(e){return null==e};function Pw(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Rw=function(e,t,n,i){t=t||"&",n=n||"=";var r={};if("string"!=typeof e||0===e.length)return r;var o=/\+/g;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var c=0;c<s;++c){var l,u,d,h,p=e[c].replace(o,"%20"),f=p.indexOf(n);f>=0?(l=p.substr(0,f),u=p.substr(f+1)):(l=p,u=""),d=decodeURIComponent(l),h=decodeURIComponent(u),Pw(r,d)?Array.isArray(r[d])?r[d].push(h):r[d]=[r[d],h]:r[d]=h}return r},kw=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Nw=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(i){var r=encodeURIComponent(kw(i))+n;return Array.isArray(e[i])?e[i].map((function(e){return r+encodeURIComponent(kw(e))})).join(t):r+encodeURIComponent(kw(e[i]))})).join(t):i?encodeURIComponent(kw(i))+n+encodeURIComponent(kw(e)):""},Mw=Qb((function(e,t){t.decode=t.parse=Rw,t.encode=t.stringify=Nw})),Lw=(Mw.decode,Mw.parse,Mw.encode,Mw.stringify,Jw),Bw=Fw;function Fw(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Uw=/^([a-z0-9.+-]+:)/i,Ww=/:[0-9]*$/,jw=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Gw=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Vw=["'"].concat(Gw),Hw=["%","/","?",";","#"].concat(Vw),zw=["/","?","#"],Zw=/^[+a-z0-9A-Z_-]{0,63}$/,Yw=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$w={javascript:!0,"javascript:":!0},qw={javascript:!0,"javascript:":!0},Qw={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Jw(e,t,n){if(e&&xw(e)&&e instanceof Fw)return e;var i=new Fw;return i.parse(e,t,n),i}Fw.prototype.parse=function(e,t,n){if(!Iw(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),r=-1!==i&&i<e.indexOf("#")?"?":"#",o=e.split(r);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(r);if(a=a.trim(),!n&&1===e.split("#").length){var s=jw.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?Mw.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=Uw.exec(a);if(c){var l=(c=c[0]).toLowerCase();this.protocol=l,a=a.substr(c.length)}if(n||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===a.substr(0,2);!u||c&&qw[c]||(a=a.substr(2),this.slashes=!0)}if(!qw[c]&&(u||c&&!Qw[c])){for(var d,h,p=-1,f=0;f<zw.length;f++)-1!==(g=a.indexOf(zw[f]))&&(-1===p||g<p)&&(p=g);for(-1!==(h=-1===p?a.lastIndexOf("@"):a.lastIndexOf("@",p))&&(d=a.slice(0,h),a=a.slice(h+1),this.auth=decodeURIComponent(d)),p=-1,f=0;f<Hw.length;f++){var g;-1!==(g=a.indexOf(Hw[f]))&&(-1===p||g<p)&&(p=g)}-1===p&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var _="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!_)for(var m=this.hostname.split(/\./),y=(f=0,m.length);f<y;f++){var v=m[f];if(v&&!v.match(Zw)){for(var A="",b=0,w=v.length;b<w;b++)v.charCodeAt(b)>127?A+="x":A+=v[b];if(!A.match(Zw)){var E=m.slice(0,f),T=m.slice(f+1),S=v.match(Yw);S&&(E.push(S[1]),T.unshift(S[2])),T.length&&(a="/"+T.join(".")+a),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=Cw.toASCII(this.hostname));var C=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+C,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!$w[l])for(f=0,y=Vw.length;f<y;f++){var x=Vw[f];if(-1!==a.indexOf(x)){var D=encodeURIComponent(x);D===x&&(D=escape(x)),a=a.split(x).join(D)}}var O=a.indexOf("#");-1!==O&&(this.hash=a.substr(O),a=a.slice(0,O));var P=a.indexOf("?");if(-1!==P?(this.search=a.substr(P),this.query=a.substr(P+1),t&&(this.query=Mw.parse(this.query)),a=a.slice(0,P)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Qw[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var R=this.search||"";this.path=C+R}return this.href=this.format(),this},Fw.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&xw(this.query)&&Object.keys(this.query).length&&(o=Mw.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||Qw[t])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),t+r+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+i},Fw.prototype.resolve=function(e){return this.resolveObject(Jw(e,!1,!0)).format()},Fw.prototype.resolveObject=function(e){if(Iw(e)){var t=new Fw;t.parse(e,!1,!0),e=t}for(var n=new Fw,i=Object.keys(this),r=0;r<i.length;r++){var o=i[r];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var c=a[s];"protocol"!==c&&(n[c]=e[c])}return Qw[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!Qw[e.protocol]){for(var l=Object.keys(e),u=0;u<l.length;u++){var d=l[u];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||qw[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",f=n.search||"";n.path=p+f}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),m=_||g||n.host&&e.pathname,y=m,v=n.pathname&&n.pathname.split("/")||[],A=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!Qw[n.protocol]);if(A&&(n.hostname="",n.port=null,n.host&&(""===v[0]?v[0]=n.host:v.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),m=m&&(""===h[0]||""===v[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,v=h;else if(h.length)v||(v=[]),v.pop(),v=v.concat(h),n.search=e.search,n.query=e.query;else if(!Ow(e.search))return A&&(n.hostname=n.host=v.shift(),(S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=S.shift(),n.host=n.hostname=S.shift())),n.search=e.search,n.query=e.query,Dw(n.pathname)&&Dw(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!v.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var b=v.slice(-1)[0],w=(n.host||e.host||v.length>1)&&("."===b||".."===b)||""===b,E=0,T=v.length;T>=0;T--)"."===(b=v[T])?v.splice(T,1):".."===b?(v.splice(T,1),E++):E&&(v.splice(T,1),E--);if(!m&&!y)for(;E--;E)v.unshift("..");!m||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),w&&"/"!==v.join("/").substr(-1)&&v.push("");var S,C=""===v[0]||v[0]&&"/"===v[0].charAt(0);return A&&(n.hostname=n.host=C?"":v.length?v.shift():"",(S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=S.shift(),n.host=n.hostname=S.shift())),(m=m||n.host&&v.length)&&!C&&v.unshift(""),v.length?n.pathname=v.join("/"):(n.pathname=null,n.path=null),Dw(n.pathname)&&Dw(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},Fw.prototype.parseHost=function(){var e=this.host,t=Ww.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Xw,Kw,eE,tE,nE,iE,rE,oE,aE,sE,cE,lE,uE,dE,hE,pE,fE,gE,_E={parse:Lw,resolve:function(e,t){return Jw(e,!1,!0).resolve(t)},resolveObject:function(e,t){return e?Jw(e,!1,!0).resolveObject(t):t},format:function(e){return Iw(e)&&(e=Jw(e)),e instanceof Fw?e.format():Fw.prototype.format.call(e)},Url:Bw};function mE(e,t){return void 0===t&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function yE(e){var t=e.toString(16);return"#"+("000000".substr(0,6-t.length)+t)}function vE(e){return"string"==typeof e&&"#"===e[0]&&(e=e.substr(1)),parseInt(e,16)}(gE=Xw||(Xw={}))[gE.WEBGL_LEGACY=0]="WEBGL_LEGACY",gE[gE.WEBGL=1]="WEBGL",gE[gE.WEBGL2=2]="WEBGL2",function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(Kw||(Kw={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(eE||(eE={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(tE||(tE={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(nE||(nE={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(iE||(iE={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(rE||(rE={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(oE||(oE={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(aE||(aE={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(sE||(sE={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON"}(cE||(cE={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(lE||(lE={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(uE||(uE={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(dE||(dE={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(hE||(hE={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(pE||(pE={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(fE||(fE={})),$b.RETINA_PREFIX=/@([0-9\.]+)x/,$b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var AE=function(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[tE.NORMAL_NPM]=tE.NORMAL,e[tE.ADD_NPM]=tE.ADD,e[tE.SCREEN_NPM]=tE.SCREEN,t[tE.NORMAL]=tE.NORMAL_NPM,t[tE.ADD]=tE.ADD_NPM,t[tE.SCREEN]=tE.SCREEN_NPM;var i=[];return i.push(t),i.push(e),i}();function bE(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var n=e>>16&255,i=e>>8&255,r=255&e;return(255*t<<24)+((n=n*t+.5|0)<<16)+((i=i*t+.5|0)<<8)+(r*t+.5|0)}Float32Array,Uint32Array,Int32Array,Uint8Array;function wE(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)}function EE(e){return!(e&e-1||!e)}function TE(e){var t=(e>65535?1:0)<<4,n=((e>>>=t)>255?1:0)<<3;return t|=n,t|=n=((e>>>=n)>15?1:0)<<2,(t|=n=((e>>>=n)>3?1:0)<<1)|(e>>>=n)>>1}function SE(e,t,n){var i,r=e.length;if(!(t>=r||0===n)){var o=r-(n=t+n>r?r-t:n);for(i=t;i<o;++i)e[i]=e[i+n];e.length=o}}function CE(e){return 0===e?0:e<0?-1:1}var IE=0;function xE(){return++IE}var DE={},OE=Object.create(null),PE=Object.create(null);!function(){function e(e,t,n){this.canvas=BE.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||$b.RESOLUTION,this.resize(e,t)}e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e},enumerable:!1,configurable:!0})}();function RE(e,t){var n=$b.RETINA_PREFIX.exec(e);return n?parseFloat(n[1]):void 0!==t?t:1}var kE,NE=(0,Ur.B)().constructor,ME=function(){function e(){}return e.prototype.construct=function(){this.type="canvas"},e}(),LE=(new ME).constructor,BE={createElement:function(e){return"canvas"===e?function(){const e=function(){let e=(0,Fr.ED)({secure:(0,Lh.$Q)()},!1);return e.bindingScreen=wb(),e}();return e.type=e,Ib||(e.__proto__.__proto__=new ME),e}():"img"===e?xb():void console.error("类型不支持")}},FE={SCISSOR_TEST:3089,STENCIL_TEST:2960},UE=function(e,t){var n=e.measureText(t);return n?n.width:14*t.length},WE=function(){var e;for(e in OE)OE[e].destroy();for(e in PE)PE[e].destroy()},jE=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},GE=Jb,VE=2*Math.PI,HE=180/Math.PI,zE=Math.PI/180;!function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"}(kE||(kE={}));var ZE=function(){function e(e,t,n,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i),this.type=kE.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},e.prototype.pad=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},e.prototype.fit=function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),r=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(r-i,0),this},e.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),r=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=r-i,this},e}(),YE=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.x=e,this.y=t,this.radius=n,this.type=kE.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-e,r=this.y-t;return(i*=i)+(r*=r)<=n},e.prototype.getBounds=function(){return new ZE(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}(),$E=function(){function e(e,t,n,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=t,this.width=n,this.height=i,this.type=kE.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,i=(t-this.y)/this.height;return(n*=n)+(i*=i)<=1},e.prototype.getBounds=function(){return new ZE(this.x-this.width,this.y-this.height,this.width,this.height)},e}(),qE=function(){function e(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var i=Array.isArray(t[0])?t[0]:t;if("number"!=typeof i[0]){for(var r=[],o=0,a=i.length;o<a;o++)r.push(i[o].x,i[o].y);i=r}this.points=i,this.type=kE.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=new e(this.points.slice());return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(e,t){for(var n=!1,i=this.points.length/2,r=0,o=i-1;r<i;o=r++){var a=this.points[2*r],s=this.points[2*r+1],c=this.points[2*o],l=this.points[2*o+1];s>t!=l>t&&e<(t-s)/(l-s)*(c-a)+a&&(n=!n)}return n},e}(),QE=function(){function e(e,t,n,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=20),this.x=e,this.y=t,this.width=n,this.height=i,this.radius=r,this.type=kE.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var n=e-(this.x+this.radius),i=t-(this.y+this.radius),r=this.radius*this.radius;if(n*n+i*i<=r)return!0;if((n=e-(this.x+this.width-this.radius))*n+i*i<=r)return!0;if(n*n+(i=t-(this.y+this.height-this.radius))*i<=r)return!0;if((n=e-(this.x+this.radius))*n+i*i<=r)return!0}return!1},e}(),JE=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},e.prototype.copyTo=function(e){return e.set(this.x,this.y),e},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this},e}(),XE=function(){function e(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0),this._x=n,this._y=i,this.cb=e,this.scope=t}return e.prototype.clone=function(t,n){return void 0===t&&(t=this.cb),void 0===n&&(n=this.scope),new e(t,n,this._x,this._y)},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),e=Math.round(100*e)/100,t=Math.round(100*t)/100,this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(e){return e.set(this._x,this._y),e},e.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){e=Math.round(100*e)/100,this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){e=Math.round(100*e)/100,this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),KE=function(){function e(e,t,n,i,r,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=r,this.ty=o}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,n,i,r,o){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=r,this.ty=o,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(e,t){t=t||new JE;var n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new JE;var n=1/(this.a*this.d+this.c*-this.b),i=e.x,r=e.y;return t.x=this.d*n*i+-this.c*n*r+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*r+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),i=this.a,r=this.c,o=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=r*t-this.d*n,this.d=r*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this},e.prototype.append=function(e){var t=this.a,n=this.b,i=this.c,r=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*r,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*r,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*r+this.ty,this},e.prototype.setTransform=function(e,t,n,i,r,o,a,s,c){return this.a=Math.cos(a+c)*r,this.b=Math.sin(a+c)*r,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,n=this.b,i=this.c,r=this.d,o=-Math.atan2(-i,r),a=Math.atan2(n,t),s=Math.abs(o+a);return s<1e-5||Math.abs(VE-s)<1e-5?(e.rotation=a,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=a),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+r*r),e.position.x=this.tx,e.position.y=this.ty,e},e.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,i=this.d,r=this.tx,o=e*i-t*n;return this.a=i/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*r)/o,this.ty=-(e*this.ty-t*r)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},e.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),eT=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],tT=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],nT=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],iT=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rT=[],oT=[],aT=Math.sign;!function(){for(var e=0;e<16;e++){var t=[];rT.push(t);for(var n=0;n<16;n++)for(var i=aT(eT[e]*eT[n]+nT[e]*tT[n]),r=aT(tT[e]*eT[n]+iT[e]*tT[n]),o=aT(eT[e]*nT[n]+nT[e]*iT[n]),a=aT(tT[e]*nT[n]+iT[e]*iT[n]),s=0;s<16;s++)if(eT[s]===i&&tT[s]===r&&nT[s]===o&&iT[s]===a){t.push(s);break}}for(e=0;e<16;e++){var c=new KE;c.set(eT[e],tT[e],nT[e],iT[e],0,0),oT.push(c)}}();var sT,cT={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return eT[e]},uY:function(e){return tT[e]},vX:function(e){return nT[e]},vY:function(e){return iT[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return rT[e][t]},sub:function(e,t){return rT[e][cT.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?cT.S:cT.N:2*Math.abs(t)<=Math.abs(e)?e>0?cT.E:cT.W:t>0?e>0?cT.SE:cT.SW:e>0?cT.NE:cT.NW},matrixAppendRotationInv:function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=oT[cT.inv(t)];r.tx=n,r.ty=i,e.append(r)}},lT=function(){function e(){this.worldTransform=new KE,this.localTransform=new KE,this.position=new XE(this.onChange,this,0,0),this.scale=new XE(this.onChange,this,1,1),this.pivot=new XE(this.onChange,this,0,0),this.skew=new XE(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,i=this.worldTransform;i.a=t.a*n.a+t.b*n.c,i.b=t.a*n.b+t.b*n.d,i.c=t.c*n.a+t.d*n.c,i.d=t.c*n.b+t.d*n.d,i.tx=t.tx*n.a+t.ty*n.c+n.tx,i.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},e.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();$b.TARGET_FPMS=.06,function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"}(sT||(sT={}));var uT=function(){function e(e,t,n,i){void 0===t&&(t=null),void 0===n&&(n=0),void 0===i&&(i=!1),this.fn=e,this.context=t,this.priority=n,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(e,t){return void 0===t&&(t=null),this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},e}(),dT=function(){function e(){var e=this;this._head=new uT(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/$b.TARGET_FPMS,this.elapsedMS=1/$b.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=Db.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t,n){return void 0===n&&(n=sT.NORMAL),this._addListener(new uT(e,t,n))},e.prototype.addOnce=function(e,t,n){return void 0===n&&(n=sT.NORMAL),this._addListener(new uT(e,t,n,!0))},e.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(e){var t;if(void 0===e&&(e=Db.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*$b.TARGET_FPMS;for(var i=this._head,r=i.next;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,$b.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}();!function(){function e(){}e.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,sT.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?dT.shared:new dT,e.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}}}();$b.SORTABLE_CHILDREN=!1;var hT=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?ZE.EMPTY:((e=e||new ZE(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addQuad=function(e){var t=this.minX,n=this.minY,i=this.maxX,r=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,r=a>r?a:r,t=(o=e[2])<t?o:t,n=(a=e[3])<n?a:n,i=o>i?o:i,r=a>r?a:r,t=(o=e[4])<t?o:t,n=(a=e[5])<n?a:n,i=o>i?o:i,r=a>r?a:r,t=(o=e[6])<t?o:t,n=(a=e[7])<n?a:n,i=o>i?o:i,r=a>r?a:r,this.minX=t,this.minY=n,this.maxX=i,this.maxY=r},e.prototype.addFrame=function(e,t,n,i,r){this.addFrameMatrix(e.worldTransform,t,n,i,r)},e.prototype.addFrameMatrix=function(e,t,n,i,r){var o=e.a,a=e.b,s=e.c,c=e.d,l=e.tx,u=e.ty,d=this.minX,h=this.minY,p=this.maxX,f=this.maxY,g=o*t+s*n+l,_=a*t+c*n+u;d=g<d?g:d,h=_<h?_:h,p=g>p?g:p,f=_>f?_:f,d=(g=o*i+s*n+l)<d?g:d,h=(_=a*i+c*n+u)<h?_:h,p=g>p?g:p,f=_>f?_:f,d=(g=o*t+s*r+l)<d?g:d,h=(_=a*t+c*r+u)<h?_:h,p=g>p?g:p,f=_>f?_:f,d=(g=o*i+s*r+l)<d?g:d,h=(_=a*i+c*r+u)<h?_:h,p=g>p?g:p,f=_>f?_:f,this.minX=d,this.minY=h,this.maxX=p,this.maxY=f},e.prototype.addVertexData=function(e,t,n){for(var i=this.minX,r=this.minY,o=this.maxX,a=this.maxY,s=t;s<n;s+=2){var c=e[s],l=e[s+1];i=c<i?c:i,r=l<r?l:r,o=c>o?c:o,a=l>a?l:a}this.minX=i,this.minY=r,this.maxX=o,this.maxY=a},e.prototype.addVertices=function(e,t,n,i){this.addVerticesMatrix(e.worldTransform,t,n,i)},e.prototype.addVerticesMatrix=function(e,t,n,i,r,o){void 0===r&&(r=0),void 0===o&&(o=r);for(var a=e.a,s=e.b,c=e.c,l=e.d,u=e.tx,d=e.ty,h=this.minX,p=this.minY,f=this.maxX,g=this.maxY,_=n;_<i;_+=2){var m=t[_],y=t[_+1],v=a*m+c*y+u,A=l*y+s*m+d;h=Math.min(h,v-r),f=Math.max(f,v+r),p=Math.min(p,A-o),g=Math.max(g,A+o)}this.minX=h,this.minY=p,this.maxX=f,this.maxY=g},e.prototype.addBounds=function(e){var t=this.minX,n=this.minY,i=this.maxX,r=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>r?e.maxY:r},e.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,r=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=r&&i<=o){var a=this.minX,s=this.minY,c=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=i<s?i:s,this.maxX=r>c?r:c,this.maxY=o>l?o:l}},e.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},e.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,r=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=r&&i<=o){var a=this.minX,s=this.minY,c=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=i<s?i:s,this.maxX=r>c?r:c,this.maxY=o>l?o:l}},e.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(e,t,n,i,r,o){e-=r,t-=o,n+=r,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i},e}(),pT=function(e,t){return(pT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function fT(e,t){function n(){this.constructor=e}pT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var gT=function(e){function t(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new lT,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new hT,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return fT(t,e),t.mixin=function(e){for(var n=Object.keys(e),i=0;i<n.length;++i){var r=n[i];Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e,r))}},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ZE),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new ZE),e=this._localBoundsRect),this._localBounds||(this._localBounds=new hT);var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,r=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-r,o},t.prototype.toGlobal=function(e,t,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,n,i){return t&&(e=t.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,t,n,i,r,o,a,s,c){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===c&&(c=0),this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=i||1,this.rotation=r,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=c,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new _T),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){e=Math.round(100*e)/100,this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){e=Math.round(100*e)/100,this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*HE},set:function(e){this.transform.rotation=e*zE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){var t;this._mask&&((t=this._mask.maskObject||this._mask).renderable=!0,t.isMask=!1),this._mask=e,this._mask&&((t=this._mask.maskObject||this._mask).renderable=!1,t.isMask=!0)},enumerable:!1,configurable:!0}),t}(Jb),_T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return fT(t,e),t}(gT);function mT(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}gT.prototype.displayObjectUpdateTransform=gT.prototype.updateTransform;var yT=function(e){function t(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=$b.SORTABLE_CHILDREN,t.sortDirty=!1,t}return fT(t,e),t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var i=0;i<t.length;i++)this.addChild(t[i]);else{var r=t[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return t[0]},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e},t.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),i=this.getChildIndex(t);this.children[n]=t,this.children[i]=e,this.onChildrenChange(n<i?n:i)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);SE(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var i=0;i<t.length;i++)this.removeChild(t[i]);else{var r=t[0],o=this.children.indexOf(r);if(-1===o)return null;r.parent=null,r.transform._parentID=-1,SE(this.children,o,1),this._boundsID++,this.onChildrenChange(o),r.emit("removed",this),this.emit("childRemoved",r,this,o)}return t[0]},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,SE(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t},t.prototype.removeChildren=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.children.length);var n,i=e,r=t-i;if(r>0&&r<=t){n=this.children.splice(i,r);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(e),o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,t=0,n=this.children.length;t<n;++t){var i=this.children[t];i._lastSortedIndex=t,e||0===i.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(mT),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var n=t._mask.maskObject||t._mask;n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(t,n){void 0===n&&(n=!1);var i=e.prototype.getLocalBounds.call(this,t);if(!n)for(var r=0,o=this.children.length;r<o;++r){var a=this.children[r];a.visible&&a.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var i=0;i<t.length;i++)t[i].enabled&&this._enabledFilters.push(t[i]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e),i=0;for(var r=this.children.length;i<r;i++)this.children[i].render(e);e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(n)for(var r=0;r<i.length;++r)i[r].destroy(t)},Object.defineProperty(t.prototype,"width",{get:function(){return Math.round(this.scale.x*this.getLocalBounds().width*100)/100},set:function(e){e=Math.round(100*e)/100;var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.round(this.scale.y*this.getLocalBounds().height*100)/100},set:function(e){e=Math.round(100*e)/100;var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e},enumerable:!1,configurable:!0}),t}(gT);yT.prototype.containerUpdateTransform=yT.prototype.updateTransform;var vT=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new JE,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)},e.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}(),AT=function(e,t){return(AT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},bT=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),wT=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return 0!=(this._flags&e.FLAGS.OVER)},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return 0!=(this._flags&e.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return 0!=(this._flags&e.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),ET=function(){function e(){this._tempPoint=new JE}return e.prototype.recursiveFindHit=function(e,t,n,i,r){if(!t||!t.visible)return!1;var o=e.data.global,a=!1,s=r=t.interactive||r,c=!0;if(t.hitArea?(i&&(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(i=!1,c=!1)),s=!1):t._mask&&i&&(t._mask.containsPoint&&t._mask.containsPoint(o)||(i=!1)),c&&t.interactiveChildren&&t.children)for(var l=t.children,u=l.length-1;u>=0;u--){var d=l[u],h=this.recursiveFindHit(e,d,n,i,s);if(h){if(!d.parent)continue;s=!1,h&&(e.target&&(i=!1),a=!0)}}return r&&(i&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(o)&&(a=!0),t.interactive&&(a&&!e.target&&(e.target=t),n&&n(e,t,!!a))),a},e.prototype.findHit=function(e,t,n,i){this.recursiveFindHit(e,t,n,i,!1)},e}(),TT={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};gT.mixin(TT);var ST={target:null,data:{global:null}},CT=function(e){function t(t,n){var i=e.call(this)||this;return n=n||{},i.renderer=t,i.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new vT,i.mouse.identifier=1,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[1]=i.mouse,i.interactionDataPool=[],i.eventData=new bT,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents=!0,i.supportsPointerEvents=!1,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new ET,i._tempDisplayObject=new _T,i._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return function(e,t){function n(){this.constructor=e}AT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,t){return ST.target=null,ST.data.global=e,t||(t=this.lastObjectRendered),this.processInteractive(ST,t,null,!0),ST.target},t.prototype.setTargetElement=function(e,t){void 0===t&&(t=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(dT.system.add(this.tickerUpdate,this,sT.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(dT.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){!this.eventsAdded&&this.interactionDOMElement&&(this.supportsTouchEvents&&this.interactionDOMElement.addEventListener&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.eventsAdded&&this.interactionDOMElement&&(this.supportsTouchEvents&&this.interactionDOMElement.removeEventListener&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var t=this.activeInteractionData[e];if(t.originalEvent&&"touch"!==t.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(typeof t){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,n){n.stopPropagationHint&&e!==n.stopsPropagatingAt||(n.currentTarget=e,n.type=t,e.emit(t,n),e[t]&&e[t](n))},t.prototype.delayDispatchEvent=function(e,t,n){this.delayedEvents.push({displayObject:e,eventString:t,eventData:n})},t.prototype.mapPositionToPoint=function(e,t,n){var i;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=1/this.resolution;e.x=(t-i.left)*(this.interactionDOMElement.width/i.width)*r,e.y=(n-i.top)*(this.interactionDOMElement.height/i.height)*r},t.prototype.processInteractive=function(e,t,n,i){var r=this.search.findHit(e,t,n,i),o=this.delayedEvents;if(!o.length)return r;e.stopPropagationHint=!1;var a=o.length;this.delayedEvents=[];for(var s=0;s<a;s++){var c=o[s],l=c.displayObject,u=c.eventString,d=c.eventData;d.stopsPropagatingAt===l&&(d.stopPropagationHint=!0),this.dispatchEvent(l,u,d)}return r},t.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(var n=t.length,i=0;i<n;i++){var r=t[i],o=this.getInteractionDataForPointerId(r),a=this.configureInteractionEventForDOMEvent(this.eventData,r,o);if(a.data.originalEvent=e,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===r.pointerType)this.emit("touchstart",a);else if("mouse"===r.pointerType||"pen"===r.pointerType){var s=2===r.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,t,n){var i=e.data,r=e.data.identifier;if(n)if(t.trackedPointers[r]||(t.trackedPointers[r]=new wT(r)),this.dispatchEvent(t,"pointerdown",e),"touch"===i.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===i.pointerType||"pen"===i.pointerType){var o=2===i.button;o?t.trackedPointers[r].rightDown=!0:t.trackedPointers[r].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},t.prototype.onPointerComplete=function(e,t,n){for(var i=this.normalizeToPointerData(e),r=i.length,o=e.target!==this.interactionDOMElement?"outside":"",a=0;a<r;a++){var s=i[a],c=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,c);if(l.data.originalEvent=e,this.processInteractive(l,this.lastObjectRendered,n,t||!o),this.emit(t?"pointercancel":"pointerup"+o,l),"mouse"===s.pointerType||"pen"===s.pointerType){var u=2===s.button;this.emit(u?"rightup"+o:"mouseup"+o,l)}else"touch"===s.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(s.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var n=e.data,i=e.data.identifier;void 0!==t.trackedPointers[i]&&(delete t.trackedPointers[i],this.dispatchEvent(t,"pointercancel",e),"touch"===n.pointerType&&this.dispatchEvent(t,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,n){var i=e.data,r=e.data.identifier,o=t.trackedPointers[r],a="touch"===i.pointerType,s="mouse"===i.pointerType||"pen"===i.pointerType,c=!1;if(s){var l=2===i.button,u=wT.FLAGS,d=l?u.RIGHT_DOWN:u.LEFT_DOWN,h=void 0!==o&&o.flags&d;n?(this.dispatchEvent(t,l?"rightup":"mouseup",e),h&&(this.dispatchEvent(t,l?"rightclick":"click",e),c=!0)):h&&this.dispatchEvent(t,l?"rightupoutside":"mouseupoutside",e),o&&(l?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(t,"pointerup",e),a&&this.dispatchEvent(t,"touchend",e),o&&(s&&!c||this.dispatchEvent(t,"pointertap",e),a&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),a&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[r]},t.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"!==t[0].pointerType&&"pen"!==t[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=t.length,i=0;i<n;i++){var r=t[i],o=this.getInteractionDataForPointerId(r),a=this.configureInteractionEventForDOMEvent(this.eventData,r,o);a.data.originalEvent=e,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===r.pointerType&&this.emit("touchmove",a),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",a)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,n){var i=e.data,r="touch"===i.pointerType,o="mouse"===i.pointerType||"pen"===i.pointerType;o&&this.processPointerOverOut(e,t,n),this.moveWhenInside&&!n||(this.dispatchEvent(t,"pointermove",e),r&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(t),i=this.configureInteractionEventForDOMEvent(this.eventData,t,n);i.data.originalEvent=t,this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(n.identifier)}},t.prototype.processPointerOverOut=function(e,t,n){var i=e.data,r=e.data.identifier,o="mouse"===i.pointerType||"pen"===i.pointerType,a=t.trackedPointers[r];n&&!a&&(a=t.trackedPointers[r]=new wT(r)),void 0!==a&&(n&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(t,"pointerover",e),o&&this.delayDispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):a.over&&(a.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),a.none&&delete t.trackedPointers[r]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],n=this.getInteractionDataForPointerId(t),i=this.configureInteractionEventForDOMEvent(this.eventData,t,n);i.data.originalEvent=t,"mouse"===t.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",i)},t.prototype.getInteractionDataForPointerId=function(e){var t,n=e.pointerId;return 1===n||"mouse"===e.pointerType?t=this.mouse:this.activeInteractionData[n]?t=this.activeInteractionData[n]:((t=this.interactionDataPool.pop()||new vT).identifier=n,this.activeInteractionData[n]=t),t.copyEvent(e),t},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,n){return e.data=n,this.mapPositionToPoint(n.global,t.clientX,t.clientY),"touch"===t.pointerType&&(t.globalX=n.global.x,t.globalY=n.global.y),n.originalEvent=t,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents)for(var n=0,i=e.changedTouches.length;n<i;n++){var r=e.changedTouches[n];void 0===r.button&&(r.button=e.touches.length?1:0),void 0===r.buttons&&(r.buttons=e.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,t.push(r)}else t.push(e);return t},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(Jb),IT=function(){function e(e){this.items=[],this._name=e,this._aliasCount=0}return e.prototype.emit=function(e,t,n,i,r,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var c=this.name,l=this.items;this._aliasCount++;for(var u=0,d=l.length;u<d;u++)l[u][c](e,t,n,i,r,o,a,s);return l===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},e.prototype.remove=function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(e){return-1!==this.items.indexOf(e)},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(IT.prototype,{dispatch:{value:IT.prototype.emit},run:{value:IT.prototype.emit}}),$b.PREFER_ENV=Yb.any?Xw.WEBGL:Xw.WEBGL2,$b.STRICT_TEXTURE_CACHE=!1;var xT=[];function DT(e,t){if(!e)return null;var n="";if("string"==typeof e){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);i&&(n=i[1].toLowerCase())}for(var r=xT.length-1;r>=0;--r){var o=xT[r];if(o.test&&o.test(e,n))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var OT=function(e,t){return(OT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function PT(e,t){function n(){this.constructor=e}OT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var RT=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new IT("setRealSize"),this.onUpdate=new IT("update"),this.onError=new IT("onError")}return e.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},e.prototype.resize=function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(e,t,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(e,t){return!1},e}(),kT=function(e){function t(t){var n=this,i=t,r=i.naturalWidth||i.videoWidth||i.width,o=i.naturalHeight||i.videoHeight||i.height;return(n=e.call(this,r,o)||this).source=t,n.noSubImage=!1,n}return PT(t,e),t.crossOrigin=function(e,t,n){void 0===n&&0!==t.indexOf("data:")?e.crossOrigin="anonymous":!1!==n&&(e.crossOrigin="string"==typeof n?n:"anonymous")},t.prototype.upload=function(e,t,n,i){var r=e.gl,o=t.realWidth,a=t.realHeight;return i=i||this.source,r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lE.UNPACK),this.noSubImage||t.target!==r.TEXTURE_2D||n.width!==o||n.height!==a?(n.width=o,n.height=a,r.texImage2D(t.target,0,t.format,t.format,t.type,i)):r.texSubImage2D(r.TEXTURE_2D,0,0,0,t.format,t.type,i),!0},t.prototype.update=function(){if(!this.destroyed){var t=this.source,n=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(n,i),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(RT),NT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return PT(t,e),t.test=function(e){return e instanceof LE||"HTMLCanvasElement"===e.constructor.name||"HTMLElement"===e.constructor.name||"t"===e.constructor.name||"n"===e.constructor.name},t}(kT),MT=function(e){function t(t,n){var i=this;if(n=n||{},!(t instanceof NE)){var r=new xb;kT.crossOrigin(r,t,n.crossorigin),r.src=t,t=r}return i=e.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i.preserveBitmap=!1,i.createBitmap=void 0!==n.createBitmap?n.createBitmap:$b.CREATE_IMAGE_BITMAP,i.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,void 0!==n.premultiplyAlpha&&(i.premultiplyAlpha=n.premultiplyAlpha),i.bitmap=null,i._load=null,!1!==n.autoLoad&&i.load(),i}return PT(t,e),t.prototype.load=function(){var e=this;return this._load||(this.createBitmap=!1,this._load=new Promise((function(t,n){var i=e.source;e.url=i.src;var r=function(){e.destroyed||(i.onload=null,i.onerror=null,e.resize(i.width,i.height),e._load=null,t(e))};i.complete&&i.src?r():(i.onload=r,i.onerror=function(t){n(t),e.onError.emit(t)})}))),this._load},t.prototype.upload=function(t,n,i){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,n,i);if(!this.bitmap&&!this.bitmap)return!1;if(e.prototype.upload.call(this,t,n,i,this.bitmap),!this.preserveBitmap){var r=!0,o=n._glTextures;for(var a in o){var s=o[a];if(s!==i&&s.dirtyId!==n.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._load=null},t.test=function(e){return"string"==typeof e||e instanceof NE},t}(kT),LT=function(e){function t(t,n){var i=this,r=n||{},o=r.width,a=r.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(i=e.call(this,o,a)||this).data=t,i}return PT(t,e),t.prototype.upload=function(e,t,n){var i=e.gl;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lE.UNPACK),n.width===t.width&&n.height===t.height?i.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(n.width=t.width,n.height=t.height,i.texImage2D(t.target,0,n.internalFormat,t.width,t.height,0,t.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(RT),BT={scaleMode:aE.NEAREST,format:iE.RGBA,alphaMode:lE.NPM},FT=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i=e.call(this)||this,r=(n=n||{}).alphaMode,o=n.mipmap,a=n.anisotropicLevel,s=n.scaleMode,c=n.width,l=n.height,u=n.wrapMode,d=n.format,h=n.type,p=n.target,f=n.resolution,g=n.resourceOptions;return!t||t instanceof RT||((t=DT(t,g)).internal=!0),i.width=c||0,i.height=l||0,i.resolution=f||$b.RESOLUTION,i.mipmap=void 0!==o?o:$b.MIPMAP_TEXTURES,i.anisotropicLevel=void 0!==a?a:$b.ANISOTROPIC_LEVEL,i.wrapMode=u||$b.WRAP_MODE,i.scaleMode=void 0!==s?s:$b.SCALE_MODE,i.format=d||iE.RGBA,i.type=h||oE.UNSIGNED_BYTE,i.target=p||rE.TEXTURE_2D,i.alphaMode=void 0!==r?r:lE.UNPACK,void 0!==n.premultiplyAlpha&&(i.premultiplyAlpha=n.premultiplyAlpha),i.uid=xE(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=c>0&&l>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(t),i}return PT(t,e),Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,t){var n;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,t,n){return this.resolution=n||this.resolution,this.width=e,this.height=t,this._refreshPOT(),this.update(),this},t.prototype.setRealSize=function(e,t,n){return this.resolution=n||this.resolution,this.width=e/this.resolution,this.height=t/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=EE(this.realWidth)&&EE(this.realHeight)},t.prototype.setResolution=function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=this.width*t/e,this.height=this.height*t/e,this.emit("update",this)),this._refreshPOT()),this},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete PE[this.cacheId],delete OE[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,n,i){void 0===i&&(i=$b.STRICT_TEXTURE_CACHE);var r="string"==typeof e,o=null;r?o=e:(e._pixiId||(e._pixiId="pixiid_"+xE()),o=e._pixiId);var a=PE[o];if(r&&i&&!a)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return a||((a=new t(e,n)).cacheId=o,t.addToCache(a,o)),a},t.fromBuffer=function(e,n,i,r){e=e||new Float32Array(n*i*4);var o=new LT(e,{width:n,height:i}),a=e instanceof Float32Array?oE.FLOAT:oE.UNSIGNED_BYTE;return new t(o,Object.assign(BT,r||{width:n,height:i,type:a}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),PE[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),PE[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=PE[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete PE[e],t}}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i)delete PE[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(Jb),UT=function(e){function t(t,n){var i=this,r=n||{},o=r.width,a=r.height;(i=e.call(this,o,a)||this).items=[],i.itemDirtyIds=[];for(var s=0;s<t;s++){var c=new FT;i.items.push(c),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}return PT(t,e),t.prototype.initFromArray=function(e,t){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof RT?this.addResourceAt(e[n],n):this.addResourceAt(DT(e[n],t),n))},t.prototype.dispose=function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,t){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this},t.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=t,this.items[n].on("update",t.update,t)},t.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",t.update,t)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.items.map((function(e){return e.resource})).filter((function(e){return e})).map((function(e){return e.load()}));return this._load=Promise.all(t).then((function(){var t=e.items[0],n=t.realWidth,i=t.realHeight;return e.resize(n,i),Promise.resolve(e)})),this._load},t}(RT);xT.push(MT,NT);var WT={Resource:RT,BaseImageResource:kT,INSTALLED:xT,autoDetectResource:DT,AbstractMultiResource:UT,CanvasResource:NT,ImageResource:MT},jT=function(){function e(e){this.renderer=e}return e.prototype.destroy=function(){this.renderer=null},e}(),GT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return PT(t,e),t.prototype.upload=function(e,t,n){var i=e.gl;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lE.UNPACK),n.width===t.width&&n.height===t.height?i.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(n.width=t.width,n.height=t.height,i.texImage2D(t.target,0,1===e.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,t.width,t.height,0,t.format,t.type,this.data)),!0},t}(LT),VT=function(){function e(e,t){this.width=Math.ceil(e||100),this.height=Math.ceil(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new IT("disposeFramebuffer"),this.multisample=fE.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(e,t){return void 0===e&&(e=0),this.colorTextures[e]=t||new FT(null,{scaleMode:aE.NEAREST,resolution:1,mipmap:cE.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(e){return this.depthTexture=e||new FT(new GT(null,{width:this.width,height:this.height}),{scaleMode:aE.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:cE.OFF,format:iE.DEPTH_COMPONENT,type:oE.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(e,t){if(e=Math.ceil(e),t=Math.ceil(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],r=i.resolution;i.setSize(e/r,t/r)}this.depthTexture&&(r=this.depthTexture.resolution,this.depthTexture.setSize(e/r,t/r))}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),HT=function(e){function t(t){var n=this;"number"==typeof t&&(t={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),n=e.call(this,null,t)||this;var i=t||{},r=i.width,o=i.height;return n.mipmap=0,n.width=Math.ceil(r)||100,n.height=Math.ceil(o)||100,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new VT(n.width*n.resolution,n.height*n.resolution).addColorTexture(0,n),n.maskStack=[],n.filterStack=[{}],n}return PT(t,e),t.prototype.resize=function(e,t){e=Math.ceil(e),t=Math.ceil(t),this.framebuffer.resize(e*this.resolution,t*this.resolution)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(FT),zT=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(e,t,n){var i=t.width,r=t.height;if(n){var o=e.width/2/i,a=e.height/2/r,s=e.x/i+o,c=e.y/r+a;n=cT.add(n,cT.NW),this.x0=s+o*cT.uX(n),this.y0=c+a*cT.uY(n),n=cT.add(n,2),this.x1=s+o*cT.uX(n),this.y1=c+a*cT.uY(n),n=cT.add(n,2),this.x2=s+o*cT.uX(n),this.y2=c+a*cT.uY(n),n=cT.add(n,2),this.x3=s+o*cT.uX(n),this.y3=c+a*cT.uY(n)}else this.x0=e.x/i,this.y0=e.y/r,this.x1=(e.x+e.width)/i,this.y1=e.y/r,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/r,this.x3=e.x/i,this.y3=(e.y+e.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e}(),ZT=new zT,YT=function(e){function t(n,i,r,o,a,s){var c=e.call(this)||this;if(c.noFrame=!1,i||(c.noFrame=!0,i=new ZE(0,0,1,1)),n instanceof t&&(n=n.baseTexture),c.baseTexture=n,c._frame=i,c.trim=o,c.valid=!1,c._uvs=ZT,c.uvMatrix=null,c.orig=r||i,c._rotate=Number(a||0),!0===a)c._rotate=2;else if(c._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=s?new JE(s.x,s.y):new JE(0,0),c._updateID=0,c.textureCacheIds=[],n.valid?c.noFrame?n.valid&&c.onBaseTextureUpdated(n):c.frame=i:n.once("loaded",c.onBaseTextureUpdated,c),c.noFrame&&n.on("update",c.onBaseTextureUpdated,c),c}return PT(t,e),t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var n=this.baseTexture;n&&n.url&&OE[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},t.prototype.updateUvs=function(){this._uvs===ZT&&(this._uvs=new zT),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,n,i){void 0===n&&(n={}),void 0===i&&(i=$b.STRICT_TEXTURE_CACHE);var r="string"==typeof e,o=null;r?o=e:(e._pixiId||(e._pixiId="pixiid_"+xE()),o=e._pixiId);var a=OE[o];if(r&&i&&!a)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return a||(n.resolution||(n.resolution=RE(e)),(a=new t(new FT(e,n))).baseTexture.cacheId=o,FT.addToCache(a.baseTexture,o),t.addToCache(a,o)),a},t.fromURL=function(e,n){var i=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),r=t.from(e,Object.assign({resourceOptions:i},n),!1),o=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):o.load().then((function(){return Promise.resolve(r)}))},t.fromBuffer=function(e,n,i,r){return new t(FT.fromBuffer(e,n,i,r))},t.fromLoader=function(e,n,i){var r=new MT(e);r.url=n;var o=new t(new FT(r,{scaleMode:$b.SCALE_MODE,resolution:RE(n)}));return i||(i=n),FT.addToCache(o.baseTexture,i),t.addToCache(o,i),i!==n&&(FT.addToCache(o.baseTexture,n),t.addToCache(o,n)),o},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),OE[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),OE[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=OE[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete OE[e],t}}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i)OE[e.textureCacheIds[i]]===e&&delete OE[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,n=e.y,i=e.width,r=e.height,o=t+i>this.baseTexture.width,a=n+r>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",c="X: "+t+" + "+i+" = "+(t+i)+" > "+this.baseTexture.width,l="Y: "+n+" + "+r+" = "+(n+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+c+" "+s+" "+l)}this.valid=i&&r&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return this._EMPTY||qT(),this._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){return this._WHITE||qT(),this._WHITE},enumerable:!1,configurable:!0}),t}(Jb);function $T(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}function qT(){YT._EMPTY||(YT._EMPTY=new YT(new FT),$T(YT._EMPTY),$T(YT._EMPTY.baseTexture)),YT._WHITE||(YT._WHITE=function(){var e=BE.createElement("canvas");e.width=16,e.height=16;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new YT(new FT(new NT(e)))}(),$T(YT._WHITE),$T(YT._WHITE.baseTexture))}var QT=function(e){function t(t,n){var i=this,r=null;if(!(t instanceof HT)){var o=arguments[1],a=arguments[2],s=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+a+") instead of the ctor directly."),r=arguments[0],n=null,t=new HT({width:o,height:a,scaleMode:s,resolution:c})}return(i=e.call(this,t,n)||this).legacyRenderer=r,i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return PT(t,e),Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t,n){void 0===n&&(n=!0),e=Math.ceil(e),t=Math.ceil(t),this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,n&&this.baseTexture.resize(e,t),this.updateUvs()},t.prototype.setResolution=function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))},t.create=function(e){return"number"==typeof e&&(e={width:e,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new t(new HT(e))},t}(YT),JT=function(){function e(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(e,t){var n=new HT(Object.assign({width:e,height:t,resolution:1},this.textureOptions));return new QT(n)},e.prototype.getOptimalTexture=function(t,n,i){void 0===i&&(i=1);var r=e.SCREEN_KEY;t*=i,n*=i,this.enableFullScreen&&t===this._pixelsWidth&&n===this._pixelsHeight||(r=(65535&(t=wE(t)))<<16|65535&(n=wE(n))),this.texturePool[r]||(this.texturePool[r]=[]);var o=this.texturePool[r].pop();return o||(o=this.createTexture(t,n)),o.filterPoolKey=r,o.setResolution(i),o},e.prototype.getFilterTexture=function(e,t){var n=this.getOptimalTexture(e.width,e.height,t||e.resolution);return n.filterFrame=e.filterFrame,n},e.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},e.prototype.returnFilterTexture=function(e){this.returnTexture(e)},e.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var n=e.SCREEN_KEY,i=this.texturePool[n];if(this.enableFullScreen=t.width>0&&t.height>0,i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[n]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY="screen",e}(),XT=function(){function e(e,t,n,i,r,o,a){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===i&&(i=5126),this.buffer=e,this.size=t,this.normalized=n,this.type=i,this.stride=r,this.start=o,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,n,i,r,o){return new e(t,n,i,r,o)},e}(),KT=0,eS=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=KT++,this.disposeRunner=new IT("disposeBuffer")}return e.prototype.update=function(e){this.data=e||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}();function tS(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}var nS={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},iS={5126:4,5123:2,5121:1},rS=0,oS={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},aS=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=rS++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new IT("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(e,t,n,i,r,o,a,s){if(void 0===n&&(n=0),void 0===i&&(i=!1),void 0===s&&(s=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof eS||(t instanceof Array&&(t=new Float32Array(t)),t=new eS(t));var c=e.split("|");if(c.length>1){for(var l=0;l<c.length;l++)this.addAttribute(c[l],t,n,i,r);return this}var u=this.buffers.indexOf(t);return-1===u&&(this.buffers.push(t),u=this.buffers.length-1),this.attributes[e]=new XT(u,n,i,r,o,a,s),this.instanced=this.instanced||s,this},e.prototype.getAttribute=function(e){return this.attributes[e]},e.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},e.prototype.addIndex=function(e){return e instanceof eS||(e instanceof Array&&(e=new Uint16Array(e)),e=new eS(e)),e.index=!0,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],n=[],i=new eS;for(e in this.attributes){var r=this.attributes[e],o=this.buffers[r.buffer];t.push(o.data),n.push(r.size*iS[r.type]/4),r.buffer=0}for(i.data=function(e,t){for(var n=0,i=0,r={},o=0;o<e.length;o++)i+=t[o],n+=e[o].length;var a=new ArrayBuffer(4*n),s=null,c=0;for(o=0;o<e.length;o++){var l=t[o],u=e[o],d=tS(u);r[d]||(r[d]=new nS[d](a)),s=r[d];for(var h=0;h<u.length;h++)s[(h/l|0)*i+c+h%l]=u[h];c+=l}return new Float32Array(a)}(t,n),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,n=0;n<this.buffers.length;n++)t.buffers[n]=new eS(this.buffers[n].data.slice(0));for(var n in this.attributes){var i=this.attributes[n];t.attributes[n]=new XT(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},e.merge=function(t){for(var n,i=new e,r=[],o=[],a=[],s=0;s<t.length;s++){n=t[s];for(var c=0;c<n.buffers.length;c++)o[c]=o[c]||0,o[c]+=n.buffers[c].data.length,a[c]=0}for(s=0;s<n.buffers.length;s++)r[s]=new(oS[tS(n.buffers[s].data)])(o[s]),i.buffers[s]=new eS(r[s]);for(s=0;s<t.length;s++)for(n=t[s],c=0;c<n.buffers.length;c++)r[c].set(n.buffers[c].data,a[c]),a[c]+=n.buffers[c].data.length;if(i.attributes=n.attributes,n.indexBuffer){i.indexBuffer=i.buffers[n.buffers.indexOf(n.indexBuffer)],i.indexBuffer.index=!0;var l=0,u=0,d=0,h=0;for(s=0;s<n.buffers.length;s++)if(n.buffers[s]!==n.indexBuffer){h=s;break}for(var s in n.attributes){var p=n.attributes[s];(0|p.buffer)===h&&(u+=p.size*iS[p.type]/4)}for(s=0;s<t.length;s++){var f=t[s].indexBuffer.data;for(c=0;c<f.length;c++)i.indexBuffer.data[c+d]+=l;l+=n.buffers[h].data.length/u,d+=f.length}}return i},e}(),sS=function(e){function t(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return PT(t,e),t}(aS),cS=function(e){function t(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new eS(t.vertices),t.uvBuffer=new eS(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return PT(t,e),t.prototype.map=function(e,t){var n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+t.width/e.width,this.uvs[3]=i,this.uvs[4]=n+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=n,this.uvs[7]=i+t.height/e.height,n=t.x,i=t.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+t.width,this.vertices[3]=i,this.vertices[4]=n+t.width,this.vertices[5]=i+t.height,this.vertices[6]=n,this.vertices[7]=i+t.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(aS),lS=0,uS=function(){function e(e,t){this.uniforms=e,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=lS++,this.static=!!t}return e.prototype.update=function(){this.dirtyId++},e.prototype.add=function(t,n,i){this.uniforms[t]=new e(n,i)},e.from=function(t,n){return new e(t,n)},e}(),dS=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new ZE,this.destinationFrame=new ZE,this.filters=[]}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),hS=function(e){function t(t){var n=e.call(this,t)||this;return n.defaultFilterStack=[{}],n.texturePool=new JT,n.texturePool.setScreenSize(t.view),n.statePool=[],n.quad=new sS,n.quadUv=new cS,n.tempRect=new ZE,n.activeState={},n.globalUniforms=new uS({outputFrame:n.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),n.forceClear=!1,n.useMaxPadding=!1,n}return PT(t,e),t.prototype.push=function(e,t){for(var n=this.renderer,i=this.defaultFilterStack,r=this.statePool.pop()||new dS,o=t[0].resolution,a=t[0].padding,s=t[0].autoFit,c=t[0].legacy,l=1;l<t.length;l++){var u=t[l];o=Math.min(o,u.resolution),a=this.useMaxPadding?Math.max(a,u.padding):a+u.padding,s=s&&u.autoFit,c=c||u.legacy}1===i.length&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),i.push(r),r.resolution=o,r.legacy=c,r.target=e,r.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),r.sourceFrame.pad(a),s&&r.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),r.sourceFrame.ceil(o),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,o),r.filters=t,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;var d=this.tempRect;d.width=r.sourceFrame.width,d.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,n.renderTexture.bind(r.renderTexture,r.sourceFrame,d),n.renderTexture.clear()},t.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;var i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;var r=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(r[0]=t.destinationFrame.width,r[1]=t.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],o[0]=r[0]*t.resolution,o[1]=r[1]*t.resolution,o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*r[2]-.5*o[2],a[3]=t.sourceFrame.height*r[3]-.5*o[3],t.legacy){var s=i.filterArea;s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=t.sourceFrame.x,s[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var c=e[e.length-1];if(t.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,t.renderTexture,c.renderTexture,uE.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var l=t.renderTexture,u=this.getOptimalFilterTexture(l.width,l.height,t.resolution);u.filterFrame=l.filterFrame;var d=0;for(d=0;d<n.length-1;++d){n[d].apply(this,l,u,uE.CLEAR,t);var h=l;l=u,u=h}n[d].apply(this,l,c.renderTexture,uE.BLEND,t),this.returnFilterTexture(l),this.returnFilterTexture(u)}t.clear(),this.statePool.push(t)},t.prototype.bindAndClear=function(e,t){if(void 0===t&&(t=uE.CLEAR),e&&e.filterFrame){var n=this.tempRect;n.width=e.filterFrame.width,n.height=e.filterFrame.height,this.renderer.renderTexture.bind(e,e.filterFrame,n)}else this.renderer.renderTexture.bind(e);"boolean"==typeof t&&(t=t?uE.CLEAR:uE.BLEND),(t===uE.CLEAR||t===uE.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},t.prototype.applyFilter=function(e,t,n,i){var r=this.renderer;this.bindAndClear(n,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,r.state.set(e.state),r.shader.bind(e),e.legacy?(this.quadUv.map(t._frame,t.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(nE.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(nE.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,t){var n=this.activeState,i=n.sourceFrame,r=n.destinationFrame,o=t._texture.orig,a=e.set(r.width,0,0,r.height,i.x,i.y),s=t.worldTransform.copyTo(KE.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(t.anchor.x,t.anchor.y),a},t.prototype.destroy=function(){this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,t,n){return void 0===n&&(n=1),this.texturePool.getOptimalTexture(e,t,n)},t.prototype.getFilterTexture=function(e,t){if("number"==typeof e){var n=e;e=t,t=n}e=e||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution);return i.filterFrame=e.filterFrame,i},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t}(jT),pS=function(){function e(e){this.renderer=e}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(e){},e}(),fS=function(e){function t(t){var n=e.call(this,t)||this;return n.emptyRenderer=new pS(t),n.currentRenderer=n.emptyRenderer,n}return PT(t,e),t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,t){for(var n=this.renderer.texture.boundTextures,i=t-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)},t.prototype.boundArray=function(e,t,n,i){for(var r=e.elements,o=e.ids,a=e.count,s=0,c=0;c<a;c++){var l=r[c],u=l._batchLocation;if(u>=0&&u<i&&t[u]===l)o[c]=u;else for(;s<i;){var d=t[s];if(!d||d._batchEnabled!==n||d._batchLocation!==s){o[c]=s,l._batchLocation=s,t[s]=l;break}s++}}},t}(jT),gS=0,_S=function(e){function t(t){var n=e.call(this,t)||this;return n.webGLVersion=1,n.extensions={},n.supports={uint32Indices:!1},n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),t.view.addEventListener&&(t.view.addEventListener("webglcontextlost",n.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1)),n}return PT(t,e),Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=gS++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=gS++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},t.prototype.createContext=function(e,t){var n;if($b.PREFER_ENV>=Xw.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var t=!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=t,t||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(jT),mS=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=fE.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},yS=new ZE,vS=function(e){function t(t){var n=e.call(this,t)||this;return n.managedFramebuffers=[],n.unknownFramebuffer=new VT(10,10),n.msaaSamples=null,n}return PT(t,e),t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ZE,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;$b.PREFER_ENV===Xw.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,t){var n=this.gl;if(e){var i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,this.updateFramebuffer(e)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var r=0;r<e.colorTextures.length;r++){var o=e.colorTextures[r];this.renderer.texture.unbind(o.parentTextureArray||o)}e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,e.width,e.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,t,n,i){var r=this.viewport;r.width===n&&r.height===i&&r.x===e&&r.y===t||(r.x=e,r.y=t,r.width=n,r.height=i,this.gl.viewport(e,t,n,i))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,t,n,i,r){void 0===r&&(r=eE.COLOR|eE.DEPTH);var o=this.gl;o.clearColor(e,t,n,i),o.clear(r)},t.prototype.initFramebuffer=function(e){var t=this.gl,n=new mS(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));for(var i=e.colorTextures,r=0;r<i.length;r++)this.renderer.texture.bind(i[r],0);e.depthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures.length;t.drawBuffers||(i=Math.min(i,1)),n.multisample>1&&(n.msaaBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.RGBA8,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,n.msaaBuffer));for(var r=[],o=0;o<i;o++)if(!(0===o&&n.multisample>1)){var a=e.colorTextures[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+o,a.target,s._glTextures[this.CONTEXT_UID].texture,0),r.push(t.COLOR_ATTACHMENT0+o)}if(r.length>1&&t.drawBuffers(r),e.depthTexture&&this.writeDepthTexture){var c=e.depthTexture;this.renderer.texture.bind(c,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,0)}n.stencil||!e.stencil&&!e.depth||(n.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height),e.depthTexture||t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,n.stencil))},t.prototype.detectSamples=function(e){var t=this.msaaSamples,n=fE.NONE;if(e<=1||null===t)return n;for(var i=0;i<t.length;i++)if(t[i]<=e){n=t[i];break}return 1===n&&(n=fE.NONE),n},t.prototype.blit=function(e,t,n){var i=this.current,r=this.renderer,o=this.gl,a=this.CONTEXT_UID;if(2===r.context.webGLVersion&&i){var s=i.glFramebuffers[a];if(s){if(!e){if(s.multisample<=1)return;s.blitFramebuffer||(s.blitFramebuffer=new VT(i.width,i.height),s.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(e=s.blitFramebuffer).width=i.width,e.height=i.height}t||((t=yS).width=i.width,t.height=i.height),n||(n=t);var c=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(t.x,t.y,t.width,t.height,n.x,n.y,n.width,n.height,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,t){var n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var r=this.managedFramebuffers.indexOf(e);r>=0&&this.managedFramebuffers.splice(r,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(n.framebuffer),n.stencil&&i.deleteRenderbuffer(n.stencil))}},t.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.enableStencil();var n=e.width,i=e.height,r=this.gl,o=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,o),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,n,i),t.stencil=o,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ZE},t}(jT),AS=function(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},bS={5126:4,5123:2,5121:1},wS=function(e){function t(t){var n=e.call(this,t)||this;return n._activeGeometry=null,n._activeVao=null,n.hasVao=!0,n.hasInstance=!0,n.canUseUInt32ElementIndex=!1,n.managedGeometries={},n.managedBuffers={},n}return PT(t,e),t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;$b.PREFER_ENV===Xw.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(e){return n.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return n.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=function(e,t){return i.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,n,r,o){return i.drawElementsInstancedANGLE(e,t,n,r,o)},e.drawArraysInstanced=function(e,t,n,r){return i.drawArraysInstancedANGLE(e,t,n,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex},t.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var n=this.gl,i=e.glVertexArrayObjects[this.CONTEXT_UID],r=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},r=!0);var o=i[t.program.id]||this.initGeometryVao(e,t.program,r);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.gl,n=0;n<e.buffers.length;n++){var i=e.buffers[n],r=i._glBuffers[this.CONTEXT_UID];if(i._updateID!==r.updateID){r.updateID=i._updateID;var o=i.index?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;if(t.bindBuffer(o,r.buffer),this._boundBuffer=r,r.byteLength>=i.data.byteLength)t.bufferSubData(o,0,i.data);else{var a=i.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=i.data.byteLength,t.bufferData(o,i.data,a)}}}},t.prototype.checkCompatibility=function(e,t){var n=e.attributes,i=t.attributeData;for(var r in i)if(!n[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},t.prototype.getSignature=function(e,t){var n=e.attributes,i=t.attributeData,r=["g",e.id];for(var o in n)i[o]&&r.push(o);return r.join("-")},t.prototype.initGeometryVao=function(e,t,n){void 0===n&&(n=!0),this.checkCompatibility(e,t);var i=this.gl,r=this.CONTEXT_UID,o=this.getSignature(e,t),a=e.glVertexArrayObjects[this.CONTEXT_UID],s=a[o];if(s)return a[t.id]=s,s;var c=e.buffers,l=e.attributes,u={},d={};for(var h in c)u[h]=0,d[h]=0;for(var h in l)!l[h].size&&t.attributeData[h]?l[h].size=t.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),u[l[h].buffer]+=l[h].size*bS[l[h].type];for(var h in l){var p=l[h],f=p.size;void 0===p.stride&&(u[p.buffer]===f*bS[p.type]?p.stride=0:p.stride=u[p.buffer]),void 0===p.start&&(p.start=d[p.buffer],d[p.buffer]+=f*bS[p.type])}s=i.createVertexArray(),i.bindVertexArray(s);for(var g=0;g<c.length;g++){var _=c[g];_._glBuffers[r]||(_._glBuffers[r]=new AS(i.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this)),n&&_._glBuffers[r].refCount++}return this.activateVao(e,t),this._activeVao=s,a[t.id]=s,a[o]=s,s},t.prototype.disposeBuffer=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(t||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeGeometry=function(e,t){if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,r=e.buffers;if(e.disposeRunner.remove(this),n){for(var o=0;o<r.length;o++){var a=r[o]._glBuffers[this.CONTEXT_UID];a.refCount--,0!==a.refCount||t||this.disposeBuffer(r[o],t)}if(!t)for(var s in n)if("g"===s[0]){var c=n[s];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e);for(t=Object.keys(this.managedBuffers),n=0;n<t.length;n++)this.disposeBuffer(this.managedBuffers[t[n]],e)},t.prototype.activateVao=function(e,t){var n=this.gl,i=this.CONTEXT_UID,r=e.buffers,o=e.attributes;e.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer._glBuffers[i].buffer);var a=null;for(var s in o){var c=o[s],l=r[c.buffer]._glBuffers[i];if(t.attributeData[s]){a!==l&&(n.bindBuffer(n.ARRAY_BUFFER,l.buffer),a=l);var u=t.attributeData[s].location;if(n.enableVertexAttribArray(u),n.vertexAttribPointer(u,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(u,1)}}}},t.prototype.draw=function(e,t,n,i){var r=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?r.UNSIGNED_SHORT:r.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?r.drawElementsInstanced(e,t||o.indexBuffer.data.length,s,(n||0)*a,i||1):r.drawElements(e,t||o.indexBuffer.data.length,s,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?r.drawArraysInstanced(e,n,t||o.getSize(),i||1):r.drawArrays(e,n,t||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t}(jT),ES=function(){function e(e){void 0===e&&(e=null),this.type=pE.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=pE.NONE,this.autoDetect=!0),this._target=null},e.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function TS(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}function SS(e,t,n,i){var r=TS(e,e.VERTEX_SHADER,t),o=TS(e,e.FRAGMENT_SHADER,n),a=e.createProgram();if(e.attachShader(a,r),e.attachShader(a,o),i)for(var s in i)e.bindAttribLocation(a,i[s],s);return e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||(console.warn(t),console.error(e.getShaderInfoLog(r))),e.getShaderParameter(o,e.COMPILE_STATUS)||(console.warn(n),console.error(e.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(a,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(a)),e.deleteProgram(a),a=null),e.deleteShader(r),e.deleteShader(o),a}function CS(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t}function IS(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return CS(2*t);case"bvec3":return CS(3*t);case"bvec4":return CS(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var xS,DS={},OS=DS;function PS(){if(OS===DS||OS&&OS.isContextLost()){var e=BE.createElement("canvas"),t=void 0;$b.PREFER_ENV>=Xw.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),OS=t}return OS}function RS(e,t,n){if("precision"!==e.substring(0,9)){var i=t;return t===hE.HIGH&&n!==hE.HIGH&&(i=hE.MEDIUM),"precision "+i+" float;\n"+e}return n!==hE.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var kS={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function NS(e){return kS[e]}var MS=null,LS={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function BS(e,t){if(!MS){var n=Object.keys(LS);MS={};for(var i=0;i<n.length;++i){var r=n[i];MS[e[r]]=LS[r]}}return MS[t]}var FS,US=[{test:function(e){return"float"===e.type&&1===e.size},code:function(e){return'\n            if(uv["'+e+'"] !== ud["'+e+'"].value)\n            {\n                ud["'+e+'"].value = uv["'+e+'"]\n                gl.uniform1f(ud["'+e+'"].location, uv["'+e+'"])\n            }\n            '}},{test:function(e){return("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+e+'"], t);\n\n            if(ud["'+e+'"].value !== t)\n            {\n                ud["'+e+'"].value = t;\n                gl.uniform1i(ud["'+e+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(e,t){return"mat3"===e.type&&1===e.size&&void 0!==t.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'+e+'"].location, false, uv["'+e+'"].toArray(true));\n            '}},{test:function(e,t){return"vec2"===e.type&&1===e.size&&void 0!==t.x},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+e+'"].location, v.x, v.y);\n                }'}},{test:function(e){return"vec2"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+e+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&void 0!==t.width},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+e+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(e){return"vec4"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+e+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],WS={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},jS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},GS=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function VS(e){for(var t="",n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == "+n+".0){}");return t}function HS(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=t.createShader(t.FRAGMENT_SHADER);;){var i=GS.replace(/%forloop%/gi,VS(e));if(t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e}var zS=0,ZS={},YS=function(){function e(t,n,i){void 0===i&&(i="pixi-shader"),this.id=zS++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),ZS[i]?(ZS[i]++,i+="-"+ZS[i]):ZS[i]=1,this.vertexSrc="#define SHADER_NAME "+i+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+"\n"+this.fragmentSrc,this.vertexSrc=RS(this.vertexSrc,$b.PRECISION_VERTEX,hE.HIGH),this.fragmentSrc=RS(this.fragmentSrc,$b.PRECISION_FRAGMENT,function(){if(!xS){xS=hE.MEDIUM;var e=PS();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);xS=t.precision?hE.HIGH:hE.MEDIUM}}return xS}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return e.prototype.extractData=function(e,t){var n=PS();if(n){var i=SS(n,e,t);this.attributeData=this.getAttributeData(i,n),this.uniformData=this.getUniformData(i,n),n.deleteProgram(i)}else this.uniformData={},this.attributeData={}},e.prototype.getAttributeData=function(e,t){for(var n={},i=[],r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var a=t.getActiveAttrib(e,o),s=BS(t,a.type),c={type:s,name:a.name,size:NS(s),location:0};n[a.name]=c,i.push(c)}for(i.sort((function(e,t){return e.name>t.name?1:-1})),o=0;o<i.length;o++)i[o].location=o;return n},e.prototype.getUniformData=function(e,t){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<i;r++){var o=t.getActiveUniform(e,r),a=o.name.replace(/\[.*?\]$/,""),s=o.name.match(/\[.*?\]$/),c=BS(t,o.type);n[a]={type:c,size:o.size,isArray:s,value:IS(c,o.size)}}return n},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),e.from=function(t,n,i){var r=t+n,o=DE[r];return o||(DE[r]=o=new e(t,n,i)),o},e}(),$S=function(){function e(e,t){for(var n in this.program=e,this.uniformGroup=t?t instanceof uS?t:new uS(t):new uS({}),e.uniformData)this.uniformGroup.uniforms[n]instanceof Array&&(this.uniformGroup.uniforms[n]=new Float32Array(this.uniformGroup.uniforms[n]))}return e.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var i=t.uniforms[n];if(i.group&&this.checkUniformExists(e,i))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,n,i){return new e(YS.from(t,n),i)},e}(),qS=function(){function e(){this.data=0,this.blendMode=tE.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==tE.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),QS=function(e){function t(n,i,r){var o=this,a=YS.from(n||t.defaultVertexSrc,i||t.defaultFragmentSrc);return(o=e.call(this,a,r)||this).padding=0,o.resolution=$b.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new qS,o}return PT(t,e),t.prototype.apply=function(e,t,n,i,r){e.applyFilter(this,t,n,i)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),t}($S),JS=new KE,XS=function(){function e(e,t){this._texture=e,this.mapCoord=new KE,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var n=this.mapCoord,i=0;i<e.length;i+=2){var r=e[i],o=e[i+1];t[i]=r*n.a+o*n.c+n.tx,t[i+1]=r*n.b+o*n.d+n.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=t.orig,r=t.trim;r&&(JS.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(JS));var o=t.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(t._frame.x+s+c)/o.width,a[1]=(t._frame.y+s+c)/o.height,a[2]=(t._frame.x+t._frame.width-s+c)/o.width,a[3]=(t._frame.y+t._frame.height-s+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&0===t.rotate,!0},e}(),KS=function(e){function t(t){var n=this,i=new KE;return n=e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,t.renderable=!1,n.maskSprite=t,n.maskMatrix=i,n}return PT(t,e),t.prototype.apply=function(e,t,n,i){var r=this.maskSprite,o=r._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new XS(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,r).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,i))},t}(QS),eC=function(e){function t(t){var n=e.call(this,t)||this;return n.enableScissor=!1,n.alphaMaskPool=[],n.maskDataPool=[],n.maskStack=[],n.alphaMaskIndex=0,n}return PT(t,e),t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,t){var n=t;if(!n.isMaskData){var i=this.maskDataPool.pop()||new ES;i.pooled=!0,i.maskObject=t,n=i}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=e,n.type){case pE.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case pE.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case pE.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n)}},t.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){switch(t.type){case pE.SCISSOR:this.renderer.scissor.pop();break;case pE.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case pE.SPRITE:this.popSpriteMask()}t.reset(),t.pooled&&this.maskDataPool.push(t)}},t.prototype.detect=function(e){var t=e.maskObject;if(t.isSprite)e.type=pE.SPRITE;else if(e.type=pE.STENCIL,this.enableScissor&&t.isFastRect&&t.isFastRect()){var n=t.worldTransform,i=Math.atan2(n.b,n.a),r=Math.atan2(n.d,n.c);i=Math.round(i*(180/Math.PI)*100),r=((r=Math.round(r*(180/Math.PI)*100)-i)%18e3+18e3)%18e3,0==(i=(i%9e3+9e3)%9e3)&&9e3===r&&(e.type=pE.SCISSOR)}},t.prototype.pushSpriteMask=function(e){var t=e.maskObject,n=e._target,i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new KS(t)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=t;var r=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=r,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t}(jT),tC=function(e){function t(t){var n=e.call(this,t)||this;return n.maskStack=[],n.glConst=0,n}return PT(t,e),t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var i=this.getStackLength();i!==n&&(0===i?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.maskStack=null},t}(jT),nC=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=FE.SCISSOR_TEST,n}return PT(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var t=e.maskObject;t.renderable=!0;var n=e._scissorRect,i=t.getBounds(!0),r=this.renderer.gl;t.renderable=!1,n?i.fit(n):r.enable(r.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=i,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,t=this.renderer.renderTexture.current,n=this.renderer.projection,i=n.transform,r=n.sourceFrame,o=n.destinationFrame,a=t?t.resolution:this.renderer.resolution,s=(e.x-r.x)*a+o.x,c=(e.y-r.y)*a+o.y,l=e.width*a,u=e.height*a;i&&(s+=i.tx*a,c+=i.ty*a),t||(c=this.renderer.height-u-c),this.renderer.gl.scissor(s,c,l,u)},t}(tC),iC=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=FE.STENCIL_TEST,n}return PT(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var t=e.maskObject,n=this.renderer.gl,i=e._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,i,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var t=this.renderer.gl;0===this.getStackLength()?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(tC),rC=function(e){function t(t){var n=e.call(this,t)||this;return n.destinationFrame=null,n.sourceFrame=null,n.defaultFrame=null,n.projectionMatrix=new KE,n.transform=null,n}return PT(t,e),t.prototype.update=function(e,t,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,t,n,i){var r=this.projectionMatrix,o=i?-1:1;r.identity(),r.a=1/t.width*2,r.d=o*(1/t.height*2),r.tx=-1-t.x*r.a,r.ty=-o-t.y*r.d},t.prototype.setTransform=function(e){},t}(jT),oC=new ZE,aC=new ZE,sC=new ZE,cC=function(e){function t(t){var n=e.call(this,t)||this;return n.clearColor=t._backgroundColorRgba,n.defaultMaskStack=[],n.current=null,n.sourceFrame=new ZE,n.destinationFrame=new ZE,n}return PT(t,e),t.prototype.bind=function(e,t,n){void 0===e&&(e=null);var i,r,o,a=this.renderer;this.current=e,e?(o=(i=e.baseTexture).resolution,t||(oC.width=e.frame.width,oC.height=e.frame.height,t=oC),n||(aC.x=e.frame.x,aC.y=e.frame.y,aC.width=t.width,aC.height=t.height,n=aC),r=i.framebuffer):(o=a.resolution,t||(oC.width=a.screen.width,oC.height=a.screen.height,t=oC),n||((n=oC).width=t.width,n.height=t.height)),sC.x=n.x*o,sC.y=n.y*o,sC.width=n.width*o,sC.height=n.height*o,this.renderer.framebuffer.bind(r,sC),this.renderer.projection.update(n,t,o,!r),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor,this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t)},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t}(jT),lC=function(){},uC=function(){function e(e,t){this.program=e,this.uniformData=t,this.uniformGroups={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},e}(),dC=0,hC={textureCount:0},pC=function(e){function t(t){var n=e.call(this,t)||this;return n.destroyed=!1,n.systemCheck(),n.gl=null,n.shader=null,n.program=null,n.cache={},n.id=dC++,n}return PT(t,e),t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof FS)return FS;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");FS=!0===e({a:"b"},"a","b")}catch(e){FS=!1}return FS}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),t||(hC.textureCount=0,this.syncUniformGroup(e.uniformGroup,hC)),i},t.prototype.setUniforms=function(e){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,t){var n=this.getglProgram();e.static&&e.dirtyId===n.uniformGroups[e.id]||(n.uniformGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))},t.prototype.syncUniforms=function(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData);return this.cache[t]||(this.cache[t]=function(e,t){var n=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var i in e.uniforms){var r=t[i];if(r){for(var o=e.uniforms[i],a=!1,s=0;s<US.length;s++)if(US[s].test(r,o)){n.push(US[s].code(i,o)),a=!0;break}if(!a){var c=(1===r.size?WS:jS)[r.type].replace("location",'ud["'+i+'"].location');n.push('\n            cv = ud["'+i+'"].value;\n            v = uv["'+i+'"];\n            '+c+";")}}else e.uniforms[i].group&&n.push('\n                    renderer.shader.syncUniformGroup(uv["'+i+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},t.prototype.getSignature=function(e,t){var n=e.uniforms,i=[];for(var r in n)i.push(r),t[r]&&i.push(t[r].type);return i.join("-")},t.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateShader=function(e){var t=this.gl,n=e.program,i={};for(var r in n.attributeData)i[r]=n.attributeData[r].location;var o=SS(t,n.vertexSrc,n.fragmentSrc,i),a={};for(var r in n.uniformData){var s=n.uniformData[r];a[r]={location:t.getUniformLocation(o,r),value:IS(s.type,s.size)}}var c=new uC(o,a);return n.glPrograms[this.renderer.CONTEXT_UID]=c,c},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.destroyed=!0},t}(jT),fC=function(e){function t(t){var n=e.call(this,t)||this;return n.gl=null,n.stateId=0,n.polygonOffset=0,n.blendMode=tE.NONE,n._blendEq=!1,n.map=[],n.map[0]=n.setBlend,n.map[1]=n.setOffset,n.map[2]=n.setCullFace,n.map[3]=n.setDepthTest,n.map[4]=n.setFrontFace,n.checks=[],n.defaultState=new qS,n.defaultState.blend=!0,n}return PT(t,e),t.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(e,t){return void 0===t&&(t=[]),t[tE.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.ADD]=[e.ONE,e.ONE],t[tE.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.NONE]=[0,0],t[tE.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[tE.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[tE.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[tE.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[tE.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[tE.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[tE.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[tE.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[tE.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[tE.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[tE.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,n=0;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],n=this.gl;2===t.length?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,t){var n=this.checks.indexOf(e);t&&-1===n?this.checks.push(e):t||-1===n||this.checks.splice(n,1)},t.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},t.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},t}(jT),gC=function(e){function t(t){var n=e.call(this,t)||this;return n.count=0,n.checkCount=0,n.maxIdle=$b.GC_MAX_IDLE,n.checkCountMax=$b.GC_MAX_CHECK_COUNT,n.mode=$b.GC_MODE,n}return PT(t,e),t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==dE.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,n=!1,i=0;i<t.length;i++){var r=t[i];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(e.destroyTexture(r,!0),t[i]=null,n=!0)}if(n){var o=0;for(i=0;i<t.length;i++)null!==t[i]&&(t[o++]=t[i]);t.length=o}},t.prototype.unload=function(e){var t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var i=e.children.length-1;i>=0;i--)this.unload(e.children[i])},t}(jT),_C=function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},mC=function(e){function t(t){var n=e.call(this,t)||this;return n.boundTextures=[],n.currentLocation=-1,n.managedTextures=[],n._unknownBoundTextures=!1,n.unknownTexture=new FT,n}return PT(t,e),t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new _C(e.createTexture());for(e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new _C(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);for(e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(e,t){void 0===t&&(t=0);var n=this.gl;if(e){if((e=e.castToBaseTexture()).parentTextureArray)return;if(e.valid){e.touched=this.renderer.textureGC.count;var i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var t=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)},t.prototype.initTexture=function(e){var t=new _C(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},t.prototype.initTextureType=function(e,t){if(t.internalFormat=e.format,t.type=e.type,2===this.webGLVersion){var n=this.renderer.gl;e.type===n.FLOAT&&e.format===n.RGBA&&(t.internalFormat=n.RGBA32F),e.type===oE.HALF_FLOAT&&(t.type=n.HALF_FLOAT),t.type===n.HALF_FLOAT&&e.format===n.RGBA&&(t.internalFormat=n.RGBA16F)}},t.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var n=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(n,e,t));else{var i=e.realWidth,r=e.realHeight,o=n.gl;(t.width!==i||t.height!==r||t.dirtyId<0)&&(t.width=i,t.height=r,o.texImage2D(e.target,0,t.internalFormat,i,r,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,t){var n=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var i=this.managedTextures.indexOf(e);-1!==i&&SE(this.managedTextures,i,1)}},t.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==cE.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=sE.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,t){var n=this.gl;if(t.mipmap&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===aE.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===aE.LINEAR){var r=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===aE.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===aE.LINEAR?n.LINEAR:n.NEAREST)},t}(jT),yC={FilterSystem:hS,BatchSystem:fS,ContextSystem:_S,FramebufferSystem:vS,GeometrySystem:wS,MaskSystem:eC,ScissorSystem:nC,StencilSystem:iC,ProjectionSystem:rC,RenderTextureSystem:cC,ShaderSystem:pC,StateSystem:fC,TextureGCSystem:gC,TextureSystem:mC},vC=new KE,AC=function(e){function t(t,n){void 0===t&&(t=Kw.UNKNOWN);var i=e.call(this)||this;return(n=Object.assign({},$b.RENDER_OPTIONS,n)).roundPixels&&($b.ROUND_PIXELS=n.roundPixels),i.options=n,i.type=t,i.screen=new ZE(0,0,n.width,n.height),i.view=n.view||BE.createElement("canvas"),i.resolution=n.resolution||$b.RESOLUTION,i.transparent=n.transparent,i.autoDensity=n.autoDensity||n.autoResize||!1,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i._lastObjectRendered=null,i.plugins={},i}return PT(t,e),t.prototype.initPlugins=function(e){for(var t in e)this.plugins[t]=new e[t](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoDensity&&(this.view.style.width=e+"px",this.view.style.height=t+"px"),this.emit("resize",e,t)},t.prototype.generateTexture=function(e,t,n,i){0===(i=i||e.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);var r=QT.create({width:0|i.width,height:0|i.height,scaleMode:t,resolution:n});return vC.tx=-i.x,vC.ty=-i.y,this.render(e,r,!1,vC,!!e.parent),r},t.prototype.destroy=function(e){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=Kw.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=yE(e),mE(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),t}(Jb),bC=function(e){function t(n){var i=e.call(this,Kw.WEBGL,n)||this;return n=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new IT("destroy"),contextChange:new IT("contextChange"),reset:new IT("reset"),update:new IT("update"),postrender:new IT("postrender"),prerender:new IT("prerender"),resize:new IT("resize")},i.globalUniforms=new uS({projectionMatrix:new KE},!0),i.addSystem(eC,"mask").addSystem(_S,"context").addSystem(fC,"state").addSystem(pC,"shader").addSystem(mC,"texture").addSystem(wS,"geometry").addSystem(vS,"framebuffer").addSystem(nC,"scissor").addSystem(iC,"stencil").addSystem(rC,"projection").addSystem(gC,"textureGC").addSystem(hS,"filter").addSystem(cC,"renderTexture").addSystem(fS,"batch"),i.initPlugins(t.__plugins),n.context?i.context.initFromContext(n.context):i.context.initFromOptions({alpha:!!i.transparent,antialias:n.antialias,premultipliedAlpha:i.transparent&&"notMultiplied"!==i.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,i.resize(i.options.width,i.options.height),i}return PT(t,e),t.create=function(e){return new t(e)},t.prototype.addSystem=function(e,t){t||(t=e.name);var n=new e(this);if(this[t])throw new Error('Whoops! The name "'+t+'" is already in use');for(var i in this[t]=n,this.runners)this.runners[i].add(n);return this},t.prototype.render=function(e,t,n,i,r){if(this.renderingToScreen=!t,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(t||(this._lastObjectRendered=e),!r){var o=e.enableTempParent();e.updateTransform(),e.disableTempParent(o)}this.renderTexture.bind(t),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),t&&t.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.runners.resize.emit(t,n)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(t){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,t),this.gl=null},t.registerPlugin=function(e,n){t.__plugins=t.__plugins||{},t.__plugins[e]=n},t}(AC);var wC,EC,TC=function(){this.texArray=null,this.blend=0,this.type=nE.TRIANGLES,this.start=0,this.size=0,this.data=null},SC=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},e}(),CC=function(){function e(e){this.rawBinaryData=new ArrayBuffer(e),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(e){return this[e+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},e}(),IC=function(e){function t(t){var n=e.call(this,t)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=qS.for2d(),n.size=4*$b.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),t.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return PT(t,e),t.prototype.contextChange=function(){var e=this.renderer.gl;$b.PREFER_ENV===Xw.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),$b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=HS(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,n=t._textureArrayPool,i=this.size/4,r=Math.floor(i/this.MAX_TEXTURES)+1;e.length<i;)e.push(new TC);for(;n.length<r;)n.push(new SC);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this._bufferedTextures,n=this.MAX_TEXTURES,i=t._textureArrayPool,r=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++FT._globalBatch,c=0,l=i[0],u=0;r.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var h=e[d];e[d]=null,h._batchEnabled!==s&&(l.count>=n&&(r.boundArray(l,o,s,n),this.buildDrawCalls(l,u,d),u=d,l=i[++c],++s),h._batchEnabled=s,h.touched=a,l.elements[l.count++]=h)}for(l.count>0&&(r.boundArray(l,o,s,n),this.buildDrawCalls(l,u,this._bufferSize),++c,++s),d=0;d<o.length;d++)o[d]=null;FT._globalBatch=s},t.prototype.buildDrawCalls=function(e,n,i){var r=this._bufferedElements,o=this._attributeBuffer,a=this._indexBuffer,s=this.vertexSize,c=t._drawCallPool,l=this._dcIndex,u=this._aIndex,d=this._iIndex,h=c[l];h.start=this._iIndex,h.texArray=e;for(var p=n;p<i;++p){var f=r[p],g=f._texture.baseTexture,_=AE[g.alphaMode?1:0][f.blendMode];r[p]=null,n<p&&h.blend!==_&&(h.size=d-h.start,n=p,(h=c[++l]).texArray=e,h.start=d),this.packInterleavedGeometry(f,o,a,u,d),u+=f.vertexData.length/2*s,d+=f.indices.length,h.blend=_}n<i&&(h.size=d-h.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var t=this.renderer.texture,n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this._packedGeometries,t=this._attributeBuffer,n=this._indexBuffer;$b.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,n=this.renderer,i=n.gl,r=n.state,o=t._drawCallPool,a=null,s=0;s<e;s++){var c=o[s],l=c.texArray,u=c.type,d=c.size,h=c.start,p=c.blend;a!==l&&(a=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,r.set(this.state),i.drawElements(u,d,i.UNSIGNED_SHORT,2*h)}},t.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),$b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var t=wE(Math.ceil(e/8)),n=TE(t),i=8*t;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var r=this._aBuffers[i];return r||(this._aBuffers[i]=r=new CC(i*this.vertexSize*4)),r},t.prototype.getIndexBuffer=function(e){var t=wE(Math.ceil(e/12)),n=TE(t),i=12*t;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var r=this._iBuffers[n];return r||(this._iBuffers[n]=r=new Uint16Array(i)),r},t.prototype.packInterleavedGeometry=function(e,t,n,i,r){for(var o=t.uint32View,a=t.float32View,s=i/this.vertexSize,c=e.uvs,l=e.indices,u=e.vertexData,d=e._texture.baseTexture._batchLocation,h=Math.min(e.worldAlpha,1),p=h<1&&e._texture.baseTexture.alphaMode?bE(e._tintRGB,h):e._tintRGB+(255*h<<24),f=0;f<u.length;f+=2)a[i++]=u[f],a[i++]=u[f+1],a[i++]=c[f],a[i++]=c[f+1],o[i++]=p,a[i++]=d;for(f=0;f<l.length;f++)n[r++]=s+l[f]},t._drawCallPool=[],t._textureArrayPool=[],t}(pS),xC=function(){function e(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=uS.from({uSamplers:t},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new YS(this.vertexSrc,i)}var r={tint:new Float32Array([1,1,1,1]),translationMatrix:new KE,default:this.defaultGroupCache[e]};return new $S(this.programCache[e],r)},e.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(vTextureId < "+n+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",t+="\n}";return(t+="\n")+"\n"},e}(),DC=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n._buffer=new eS(null,t,!1),n._indexBuffer=new eS(null,t,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,oE.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,oE.FLOAT).addAttribute("aColor",n._buffer,4,!0,oE.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,oE.FLOAT).addIndex(n._indexBuffer),n}return PT(t,e),t}(aS),OC="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",PC="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",RC=function(){function e(){}return e.create=function(e){var t=Object.assign({vertex:OC,fragment:PC,geometryClass:DC,vertexSize:6},e),n=t.vertex,i=t.fragment,r=t.vertexSize,o=t.geometryClass;return function(e){function t(t){var a=e.call(this,t)||this;return a.shaderGenerator=new xC(n,i),a.geometryClass=o,a.vertexSize=r,a}return PT(t,e),t}(IC)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return OC},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return PC},enumerable:!1,configurable:!0}),e}(),kC=RC.create(),NC={AbstractBatchRenderer:IC,AbstractRenderer:AC,Attribute:XT,BaseRenderTexture:HT,BaseTexture:FT,BatchDrawCall:TC,BatchGeometry:DC,BatchPluginFactory:RC,BatchRenderer:kC,BatchShaderGenerator:xC,BatchTextureArray:SC,Buffer:eS,Filter:QS,FilterState:dS,Framebuffer:VT,GLFramebuffer:mS,GLProgram:uC,GLTexture:_C,Geometry:aS,IGLUniformData:lC,MaskData:ES,ObjectRenderer:pS,Program:YS,Quad:sS,QuadUv:cS,RenderTexture:QT,RenderTexturePool:JT,Renderer:bC,Shader:$S,SpriteMaskFilter:KS,State:qS,System:jT,Texture:YT,TextureMatrix:XS,TextureUvs:zT,UniformGroup:uS,ViewableBuffer:CC,autoDetectRenderer:function(e){return bC.create(e)},checkMaxIfStatementsInShader:HS,defaultFilterVertex:"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",defaultVertex:"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",resources:WT,systems:yC,uniformParsers:US},MC=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,i,r=function(){function e(e,t,n){void 0===t&&(t=!1),this.next=null,this.prev=null,this.owner=null,this.fn=e,this.once=t,this.thisArg=n}return e.prototype.detach=function(){return null!==this.owner&&(this.owner.detach(this),!0)},e.prototype.dispose=function(){this.detach()},e}(),o=function(){function e(){this._head=null,this._tail=null,this._filter=null}return e.prototype.handlers=function(){for(var e=this._head,t=[];e;)t.push(e),e=e.next;return t},e.prototype.hasAny=function(){return!!this._head},e.prototype.has=function(e){return e.owner===this},e.prototype.dispatch=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var i=this._head;if(!i)return!1;if(this._filter&&!this._filter.apply(this,t))return!1;for(;i;)i.once&&this.detach(i),i.fn.apply(i.thisArg,t),i=i.next;return!0},e.prototype.add=function(e,t){return void 0===t&&(t=null),this._addMiniSignalBinding(new r(e,!1,t))},e.prototype.once=function(e,t){return void 0===t&&(t=null),this._addMiniSignalBinding(new r(e,!0,t))},e.prototype.detach=function(e){return e.owner!==this||(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._head?(this._head=e.next,null===e.next&&(this._tail=null)):e===this._tail&&(this._tail=e.prev,this._tail&&(this._tail.next=null)),e.owner=null),this},e.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=null,this._tail=null;e;)e.owner=null,e=e.next;return this},e.prototype.filter=function(e){this._filter=e},e.prototype.proxy=function(){for(var e=arguments,t=this,n=[],i=0;i<arguments.length;i++)n[i]=e[i];for(var r=function(){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];return t.dispatch.apply(t,n)},o=0;o<n.length;++o)n[o].add(r);return this},e.prototype._addMiniSignalBinding=function(e){return this._head?(this._tail&&(this._tail.next=e),e.prev=this._tail,this._tail=e):(this._head=e,this._tail=e),e.owner=this,e},e}(),a=function(e){this.config=e,this.onError=new o,this.onComplete=new o,this.onProgress=new o},s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function c(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n=t.ResourceType||(t.ResourceType={}))[n.Unknown=0]="Unknown",n[n.Buffer=1]="Buffer",n[n.Blob=2]="Blob",n[n.Json=3]="Json",n[n.Xml=4]="Xml",n[n.Image=5]="Image",n[n.Audio=6]="Audio",n[n.Video=7]="Video",n[n.Text=8]="Text",function(e){e[e.NotStarted=0]="NotStarted",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete"}(i||(i={}));var l,u=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._boundOnLoad=t._onLoad.bind(t),t._boundOnError=t._onError.bind(t),t._boundOnTimeout=t._onTimeout.bind(t),t._element=t._createElement(),t._elementTimer=0,t}return c(n,e),n.prototype.load=function(){var e=this.config;e.crossOrigin&&(this._element.crossOrigin=e.crossOrigin),this._element.src=e.url,this._element.addEventListener("load",this._boundOnLoad,!1),this._element.addEventListener("error",this._boundOnError,!1),e.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,e.timeout))},n.prototype.abort=function(){this._clearEvents(),this._element.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",this._error("Image load aborted by the user.")},n.prototype._createElement=function(){return this.config.loadElement?this.config.loadElement:xb()},n.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this._element.removeEventListener("load",this._boundOnLoad,!1),this._element.removeEventListener("error",this._boundOnError,!1)},n.prototype._error=function(e){this._clearEvents(),this.onError.dispatch(e)},n.prototype._complete=function(){this._clearEvents(),this.onComplete.dispatch(t.ResourceType.Image,this._element)},n.prototype._onLoad=function(){this._complete()},n.prototype._onError=function(){this._error("Image failed to load.")},n.prototype._onTimeout=function(){this._error("Image load timed out.")},n}(a);function d(e){var t="";if(0===e.indexOf("data:")){var n=e.indexOf("/");t=e.substring(n+1,e.indexOf(";",n))}else{var i=e.indexOf("?"),r=e.indexOf("#"),o=Math.min(i>-1?i:e.length,r>-1?r:e.length);t=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()}!function(e){e.Default="text",e.Buffer="arraybuffer",e.Blob="blob",e.Document="document",e.Json="json",e.Text="text"}(l||(l={}));var h=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._xhrType=l.Default,t}return c(n,e),n.prototype.load=function(){var e=this,t=this.config,n=d(t.url);"string"!=typeof t.xhrType&&(t.xhrType=this._determineXhrType(n)),this._xhrType=t.xhrType||l.Default,(0,m.a)({data:"",url:t.url,success:function(t){var n=t.data;if(t.statusCode,t.header,"string"!=typeof n&&!(n instanceof ArrayBuffer))try{n=JSON.stringify(n)}catch(t){n=n}e._onLoad(n)},fail:function(){}})},n.prototype.abort=function(){},n.prototype._determineXhrType=function(e){return n._xhrTypeMap[e]||l.Default},n.prototype._error=function(e){this.onError.dispatch(e)},n.prototype._complete=function(e,t){this.onComplete.dispatch(e,t)},n.prototype._onLoad=function(e){switch(this._xhrType){case l.Json:this._parseJson(e);break;case l.Default:case l.Text:this._complete(t.ResourceType.Text,e)}},n.prototype._parseJson=function(e){try{var n=JSON.parse(e);this._complete(t.ResourceType.Json,n)}catch(e){this._error("Error trying to parse loaded json: "+e)}},n.setExtensionXhrType=function(e,t){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(n._xhrTypeMap[e]=t)},n.ResponseType=l,n._xhrTypeMap={xhtml:l.Document,html:l.Document,htm:l.Document,xml:l.Document,tmx:l.Document,svg:l.Document,tsx:l.Document,gif:l.Blob,png:l.Blob,bmp:l.Blob,jpg:l.Blob,jpeg:l.Blob,tif:l.Blob,tiff:l.Blob,webp:l.Blob,tga:l.Blob,json:l.Json,text:l.Text,txt:l.Text,ttf:l.Buffer,otf:l.Buffer},n}(a),p=function(e,t){t=t||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=n.parser[t.strictMode?"strict":"loose"].exec(e),r={},o=14;o--;)r[n.key[o]]=i[o]||"";return r[n.q.name]={},r[n.key[12]].replace(n.q.parser,(function(e,t,i){t&&(r[n.q.name][t]=i)})),r};function f(e){var t=e;return function(){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];if(null===t)throw new Error("Callback was already called.");var r=t;return t=null,r.apply(this,n)}}var g=function(){function e(e,t){if(void 0===t&&(t=1),this.worker=e,this.concurrency=t,this.workers=0,this.buffer=0,this.paused=!1,this._started=!1,this._tasks=[],this.onSaturated=new o,this.onUnsaturated=new o,this.onEmpty=new o,this.onDrain=new o,this.onError=new o,0===t)throw new Error("Concurrency must not be zero");this.buffer=t/4}return Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.onDrain.detachAll(),this.workers=0,this._started=!1,this._tasks=[]},e.prototype.push=function(e,t){this._insert(e,!1,t)},e.prototype.unshift=function(e,t){this._insert(e,!0,t)},e.prototype.process=function(){for(;!this.paused&&this.workers<this.concurrency&&this._tasks.length;){var e=this._tasks.shift();0===this._tasks.length&&this.onEmpty.dispatch(),this.workers+=1,this.workers===this.concurrency&&this.onSaturated.dispatch(),this.worker(e.data,f(this._next(e)))}},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},e.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},e.prototype.getTask=function(e){return this._tasks[e]},e.prototype._insert=function(e,t,n){var i=this;if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(this._started=!0,null==e&&this.idle())setTimeout((function(){return i.onDrain.dispatch()}),1);else{var r={data:e,callback:n};t?this._tasks.unshift(r):this._tasks.push(r),setTimeout((function(){return i.process()}),1)}},e.prototype._next=function(e){var t=this;return function(n){for(var i=arguments,r=[],o=1;o<arguments.length;o++)r[o-1]=i[o];t.workers-=1,e.callback&&e.callback.apply(e,function(){for(var e=arguments,t=0,n=0,i=arguments.length;n<i;n++)t+=e[n].length;var r=Array(t),o=0;for(n=0;n<i;n++)for(var a=arguments[n],s=0,c=a.length;s<c;s++,o++)r[o]=a[s];return r}([n],r)),n&&t.onError.dispatch(n,e.data),t.workers<=t.concurrency-t.buffer&&t.onUnsaturated.dispatch(),t.idle()&&t.onDrain.dispatch(),t.process()}},e}(),_=function(){function e(n,r){if(this.children=[],this.onStart=new o,this.onProgress=new o,this.onComplete=new o,this.onAfterMiddleware=new o,this.data=null,this.type=t.ResourceType.Unknown,this.error="",this.progressChunk=0,this._dequeue=function(){},this._onCompleteBinding=null,this._state=i.NotStarted,this.name=n,this.metadata=r.metadata,"string"!=typeof r.crossOrigin&&(r.crossOrigin=this._determineCrossOrigin(r.url)),r.strategy&&"function"!=typeof r.strategy)this._strategy=r.strategy,this._strategy.config=r;else{var a=r.strategy;a||(a=e._loadStrategyMap[d(r.url)]),a||(a=e._defaultLoadStrategy),this._strategy=new a(r)}this._strategy.onError.add(this._error,this),this._strategy.onComplete.add(this._complete,this),this._strategy.onProgress.add(this._progress,this)}return e.setDefaultLoadStrategy=function(t){e._defaultLoadStrategy=t},e.setLoadStrategy=function(t,n){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e._loadStrategyMap[t]=n)},Object.defineProperty(e.prototype,"strategy",{get:function(){return this._strategy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._strategy.config.url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._state===i.Loading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._state===i.Complete},enumerable:!0,configurable:!0}),e.prototype.abort=function(){this._strategy.abort()},e.prototype.load=function(){this._state=i.Loading,this.onStart.dispatch(this),this._strategy.load()},e.prototype._error=function(e){this._state=i.Complete,this.error=e,this.onComplete.dispatch(this)},e.prototype._complete=function(e,t){this._state=i.Complete,this.type=e,this.data=t,this.onComplete.dispatch(this)},e.prototype._progress=function(e){this.onProgress.dispatch(this,e)},e.prototype._determineCrossOrigin=function(e,t){return"anonymous"},e._tempAnchor=null,e._defaultLoadStrategy=h,e._loadStrategyMap={gif:u,png:u,bmp:u,jpg:u,jpeg:u,tif:u,tiff:u,webp:u,tga:u,svg:u,"svg+xml":u},e}();function y(e,t,n,i){void 0===i&&(i=!1);var r=0,o=e.length;!function a(s){s||r===o?n&&n(s):i?setTimeout((function(){return t(e[r++],a)}),1):t(e[r++],a)}()}var v=/(#[\w-]+)?$/,A=function(){function e(t,n){void 0===t&&(t=""),void 0===n&&(n=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this.resources={},this.onError=new o,this.onLoad=new o,this.onStart=new o,this.onComplete=new o,this.onProgress=new o,this._baseUrl="",this._urlResolvers=[],this._middleware=[],this._resourcesParsing=[],this._boundLoadResource=this._loadResource.bind(this),this.baseUrl=t,this._queue=new g(this._boundLoadResource,n),this._queue.pause(),this._middleware=e._defaultMiddleware.slice()}return Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this._baseUrl},set:function(e){for(;e.length&&"/"===e.charAt(e.length-1);)e=e.slice(0,-1);this._baseUrl=e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){if(Array.isArray(e)){for(var n=0;n<e.length;++n)this.add(e[n]);return this}var i="",r="",o=this._baseUrl,a={url:""};if("object"==typeof e?(i=e.url,r=e.name||e.url,o=e.baseUrl||o,a=e):(r=e,i="string"==typeof t?t:r),!i)throw new Error("You must specify the `url` property.");if(this.loading&&!a.parentResource)throw new Error("Cannot add root resources while the loader is running.");if(this.resources[r])throw new Error('Resource named "'+r+'" already exists.');i=this._prepareUrl(i,o),a.url=i;var s=new _(r,a);if(this.resources[r]=s,"function"==typeof a.onComplete&&s.onAfterMiddleware.once(a.onComplete),this.loading){var c=a.parentResource,l=[];for(n=0;n<c.children.length;++n)c.children[n].isComplete||l.push(c.children[n]);var u=c.progressChunk*(l.length+1)/(l.length+2);for(c.children.push(s),c.progressChunk=u,n=0;n<l.length;++n)l[n].progressChunk=u;s.progressChunk=u}return this._queue.push(s),this},e.prototype.use=function(t,n){return void 0===n&&(n=e.DefaultMiddlewarePriority),this._middleware.push({fn:t,priority:n}),this._middleware.sort((function(e,t){return e.priority-t.priority})),this},e.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.reset(),this._queue.pause(),this.resources){var t=this.resources[e];t&&(t._onCompleteBinding&&t._onCompleteBinding.detach(),t.isLoading&&t.abort())}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue.length(),n=0;n<this._queue.length();++n)this._queue.getTask(n).data.progressChunk=t;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!0,configurable:!0}),e.prototype.addUrlResolver=function(e){return this._urlResolvers.push(e),this},e.prototype._prepareUrl=function(e,t){var n=p(e,{strictMode:!0});if(this._urlResolvers.forEach((function(t){e=t(e,n),n=p(e,{strictMode:!0})})),n.protocol||0===e.indexOf("//")||(e=t.length&&"/"!==e.charAt(0)?t+"/"+e:t+e),this.defaultQueryString){var i=v.exec(e);if(i){var r=i[0];-1!==(e=e.substr(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}}return e},e.prototype._loadResource=function(e,t){e._dequeue=t,e._onCompleteBinding=e.onComplete.once(this._onLoad,this),e.load()},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var t=this;e._onCompleteBinding=null,this._resourcesParsing.push(e),e._dequeue(),y(this._middleware,(function(n,i){n.fn.call(t,e,i)}),(function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()}),!0)},e.use=function(t,n){return void 0===n&&(n=e.DefaultMiddlewarePriority),e._defaultMiddleware.push({fn:t,priority:n}),e._defaultMiddleware.sort((function(e,t){return e.priority-t.priority})),e},e.DefaultMiddlewarePriority=50,e._defaultMiddleware=[],e}();Object.defineProperties(A,{AbstractLoadStrategy:{get:function(){return a}},ImageLoadStrategy:{get:function(){return u}},XhrLoadStrategy:{get:function(){return h}},Resource:{get:function(){return _}},ResourceType:{get:function(){return t.ResourceType}},ResourceState:{get:function(){return i}},async:{get:function(){return{AsyncQueue:g,eachSeries:y}}},getExtension:{get:function(){return d}}}),t.Loader=A,t.Resource=_}(wC={exports:{}},wC.exports),wC.exports);(EC=MC)&&EC.__esModule&&Object.prototype.hasOwnProperty.call(EC,"default")&&EC.default,MC.ResourceType;var LC=MC.Loader,BC=(MC.Resource,5),FC=function(e,t){return(FC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},UC=function(){function e(){}return e.use=function(e,t){e.data&&e.type===BC&&(e.texture=YT.fromLoader(e.data,e.url,e.name)),t()},e}(),WC=function(e){function t(n,i){for(var r=e.call(this,n,i)||this,o=0;o<t._plugins.length;++o){var a=t._plugins[o].use;a&&r.use(a)}return r._protected=!1,r}return function(e,t){function n(){this.constructor=e}FC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}(LC);WC.registerPlugin(UC);var jC=function(){function e(e,t,n){void 0===n&&(n=null),this._texture=e instanceof YT?e:null,this.baseTexture=e instanceof FT?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(e){void 0===e&&(e=null);var t=this.data.meta.scale,n=RE(e,null);return null===n&&(n=void 0!==t?parseFloat(t):1),1!==n&&this.baseTexture.setResolution(n),n},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var n=t,i=e.BATCH_SIZE;n-t<i&&n<this._frameKeys.length;){var r=this._frameKeys[n],o=this._frames[r],a=o.frame;if(a){var s,c=null,l=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,u=new ZE(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s=o.rotated?new ZE(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new ZE(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(c=new ZE(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[r]=new YT(this.baseTexture,s,u,c,o.rotated?2:0,o.anchor),YT.addToCache(this.textures[r],r)}n++}},e.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var n=0;n<e[t].length;n++){var i=e[t][n];this.animations[t].push(this.textures[i])}}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},e.prototype.destroy=function(e){var t;for(var n in void 0===e&&(e=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),GC=function(){function e(){}return e.use=function(t,n){var i=t.name+"_image";if(t.data&&3===t.type&&t.data.frames&&!this.resources[i]){var r={name:i,url:e.getResourcePath(t,this.baseUrl),crossOrigin:"anonymous",parentResource:t,onComplete:function(e){if(e.error)n(e.error);else{var i=new jC(e.texture,t.data,t.url);i.parse((function(){t.spritesheet=i,t.textures=i.textures,n()}))}}};this.add(r)}else n()},e.getResourcePath=function(e,t){return _E.resolve(e.url.replace(t,""),e.data.meta.image)},e}(),VC=function(e,t){return(VC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},HC=new JE,zC=new Uint16Array([0,1,2,0,2,3]),ZC=function(e){function t(t){var n=e.call(this)||this;return n._anchor=new XE(n._onAnchorUpdate,n,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=tE.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=t||YT.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=zC,n.pluginName="batch",n.isSprite=!0,n._roundPixels=$b.ROUND_PIXELS,n}return function(e,t){function n(){this.constructor=e}VC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=CE(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=CE(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,n=t.a,i=t.b,r=t.c,o=t.d,a=t.tx,s=t.ty,c=this.vertexData,l=e.trim,u=e.orig,d=this._anchor,h=0,p=0,f=0,g=0;if(l?(h=(p=l.x-d._x*u.width)+l.width,f=(g=l.y-d._y*u.height)+l.height):(h=(p=-d._x*u.width)+u.width,f=(g=-d._y*u.height)+u.height),c[0]=n*p+r*g+a,c[1]=o*g+i*p+s,c[2]=n*h+r*g+a,c[3]=o*g+i*h+s,c[4]=n*h+r*f+a,c[5]=o*f+i*h+s,c[6]=n*p+r*f+a,c[7]=o*f+i*p+s,this._roundPixels)for(var _=$b.RESOLUTION,m=0;m<c.length;++m)c[m]=Math.round((c[m]*_|0)/_)}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,n=e.orig,i=this._anchor,r=this.transform.worldTransform,o=r.a,a=r.b,s=r.c,c=r.d,l=r.tx,u=r.ty,d=-i._x*n.width,h=d+n.width,p=-i._y*n.height,f=p+n.height;t[0]=o*d+s*p+l,t[1]=c*p+a*d+u,t[2]=o*h+s*p+l,t[3]=c*p+a*h+u,t[4]=o*h+s*f+l,t[5]=c*f+a*h+u,t[6]=o*d+s*f+l,t[7]=c*f+a*d+u},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ZE),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,HC);var t=this._texture.orig.width,n=this._texture.orig.height,i=-t*this.anchor.x,r=0;return HC.x>=i&&HC.x<i+t&&(r=-n*this.anchor.y,HC.y>=r&&HC.y<r+n)},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var n="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,n){return new t(e instanceof YT?e:YT.from(e,n))},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.round(Math.abs(this.scale.x)*this._texture.orig.width*100)/100},set:function(e){e=Math.round(100*e)/100;var t=CE(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.round(Math.abs(this.scale.y)*this._texture.orig.height*100)/100},set:function(e){e=Math.round(100*e)/100;var t=CE(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||YT.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(yT),YC=new KE;gT.prototype._cacheAsBitmap=!1,gT.prototype._cacheData=null;var $C=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(gT.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){var t;this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new $C),(t=this._cacheData).originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea))}}}),gT.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},gT.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters){var i=this.filters[0].padding;n.pad(i)}n.ceil($b.RESOLUTION);var r=e.renderTexture.current,o=e.renderTexture.sourceFrame.clone(),a=e.renderTexture.destinationFrame.clone(),s=e.projection.transform,c=QT.create({width:n.width,height:n.height}),l="cacheAsBitmap_"+xE();this._cacheData.textureCacheId=l,FT.addToCache(c.baseTexture,l),YT.addToCache(c,l);var u=this.transform.localTransform.copyTo(YC).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,c,!0,u,!1),e.projection.transform=s,e.renderTexture.bind(r,o,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new ZC(c);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-n.x/n.width,d.anchor.y=-n.y/n.height,d.alpha=t,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},gT.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},gT.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=e.context,r=e._projTransform;t.ceil($b.RESOLUTION);var o=QT.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+xE();this._cacheData.textureCacheId=a,FT.addToCache(o.baseTexture,a),YT.addToCache(o,a);var s=YC;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,o,!0,s,!1),e.context=i,e._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new ZC(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-t.x/t.width,c.anchor.y=-t.y/t.height,c.alpha=n,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)}},gT.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},gT.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},gT.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,FT.removeFromCache(this._cacheData.textureCacheId),YT.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},gT.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};var qC,QC,JC={float:function(e,t,n,i){n!==i&&(n.v=i,e.uniform1f(t,i))},vec2:function(e,t,n,i){n[0]===i[0]&&n[1]===i[1]||(n[0]=i[0],n[1]=i[1],e.uniform2f(t,i[0],i[1]))},vec3:function(e,t,n,i){n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]||(n[0]=i[0],n[1]=i[1],n[2]=i[2],e.uniform3f(t,i[0],i[1],i[2]))},int:function(e,t,n,i){e.uniform1i(t,i)},ivec2:function(e,t,n,i){e.uniform2i(t,i[0],i[1])},ivec3:function(e,t,n,i){e.uniform3i(t,i[0],i[1],i[2])},ivec4:function(e,t,n,i){e.uniform4i(t,i[0],i[1],i[2],i[3])},bool:function(e,t,n,i){e.uniform1i(t,i)},bvec2:function(e,t,n,i){e.uniform2i(t,i[0],i[1])},bvec3:function(e,t,n,i){e.uniform3i(t,i[0],i[1],i[2])},bvec4:function(e,t,n,i){e.uniform4i(t,i[0],i[1],i[2],i[3])},mat2:function(e,t,n,i){e.uniformMatrix2fv(t,!1,i)},mat3:function(e,t,n,i){e.uniformMatrix3fv(t,!1,i)},mat4:function(e,t,n,i){e.uniformMatrix4fv(t,!1,i)},sampler2D:function(e,t,n,i){e.uniform1i(t,i)},samplerCube:function(e,t,n,i){e.uniform1i(t,i)},sampler2DArray:function(e,t,n,i){e.uniform1i(t,i)}},XC={float:function(e,t,n,i){e.uniform1fv(t,i)},vec2:function(e,t,n,i){e.uniform2fv(t,i)},vec3:function(e,t,n,i){e.uniform3fv(t,i)},vec4:function(e,t,n,i){e.uniform4fv(t,i)},int:function(e,t,n,i){e.uniform1iv(t,i)},ivec2:function(e,t,n,i){e.uniform2iv(t,i)},ivec3:function(e,t,n,i){e.uniform3iv(t,i)},ivec4:function(e,t,n,i){e.uniform4iv(t,i)},bool:function(e,t,n,i){e.uniform1iv(t,i)},bvec2:function(e,t,n,i){e.uniform2iv(t,i)},bvec3:function(e,t,n,i){e.uniform3iv(t,i)},bvec4:function(e,t,n,i){e.uniform4iv(t,i)},sampler2D:function(e,t,n,i){e.uniform1iv(t,i)},samplerCube:function(e,t,n,i){e.uniform1iv(t,i)},sampler2DArray:function(e,t,n,i){e.uniform1iv(t,i)}};!function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"}(qC||(qC={})),function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"}(QC||(QC={}));var KC={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(void 0===t&&(t=20),!this.adaptive||!e||isNaN(e))return t;var n=Math.ceil(e/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},eI=function(){function e(){this.color=16777215,this.alpha=1,this.texture=YT.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=YT.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}(),tI=function(e,t){return(tI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function nI(e,t){function n(){this.constructor=e}tI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var iI={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var n=e.points,i=e.holes,r=t.points,o=t.indices;if(n.length>=6){for(var a=[],s=0;s<i.length;s++){var c=i[s];a.push(n.length/2),n=n.concat(c.points)}var l=Xb(n,a,2);if(!l)return;var u=r.length/2;for(s=0;s<l.length;s+=3)o.push(l[s]+u),o.push(l[s+1]+u),o.push(l[s+2]+u);for(s=0;s<n.length;s++)r.push(n[s])}}},rI={build:function(e){var t,n,i=e.shape,r=e.points,o=i.x,a=i.y;if(r.length=0,e.type===kE.CIRC)t=i.radius,n=i.radius;else{var s=e.shape;t=s.width,n=s.height}if(0!==t&&0!==n){var c=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(t+n));c/=2.3;for(var l=2*Math.PI/c,u=0;u<c-.5;u++)r.push(o+Math.sin(-l*u)*t,a+Math.cos(-l*u)*n);r.push(r[0],r[1])}},triangulate:function(e,t){var n=e.points,i=t.points,r=t.indices,o=i.length/2,a=o,s=e.shape,c=e.matrix,l=s.x,u=s.y;i.push(e.matrix?c.a*l+c.c*u+c.tx:l,e.matrix?c.b*l+c.d*u+c.ty:u);for(var d=0;d<n.length;d+=2)i.push(n[d],n[d+1]),r.push(o++,a,o)}},oI={build:function(e){var t=e.shape,n=t.x,i=t.y,r=t.width,o=t.height,a=e.points;a.length=0,a.push(n,i,n+r,i,n+r,i+o,n,i+o)},triangulate:function(e,t){var n=e.points,i=t.points,r=i.length/2;i.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),t.indices.push(r,r+1,r+2,r+1,r+2,r+3)}};function aI(e,t,n){return e+(t-e)*n}function sI(e,t,n,i,r,o,a){void 0===a&&(a=[]);for(var s=a,c=0,l=0,u=0,d=0,h=0,p=0,f=0,g=0;f<=20;++f)c=aI(e,n,g=f/20),l=aI(t,i,g),u=aI(n,r,g),d=aI(i,o,g),h=aI(c,u,g),p=aI(l,d,g),s.push(h,p);return s}var cI={build:function(e){var t=e.shape,n=e.points,i=t.x,r=t.y,o=t.width,a=t.height,s=Math.max(0,Math.min(t.radius,Math.min(o,a)/2));n.length=0,s?(sI(i,r+s,i,r,i+s,r,n),sI(i+o-s,r,i+o,r,i+o,r+s,n),sI(i+o,r+a-s,i+o,r+a,i+o-s,r+a,n),sI(i+s,r+a,i,r+a,i,r+a-s,n)):n.push(i,r,i+o,r,i+o,r+a,i,r+a)},triangulate:function(e,t){for(var n=e.points,i=t.points,r=t.indices,o=i.length/2,a=Xb(n,null,2),s=0,c=a.length;s<c;s+=3)r.push(a[s]+o),r.push(a[s+1]+o),r.push(a[s+2]+o);for(s=0,c=n.length;s<c;s++)i.push(n[s],n[++s])}};function lI(e,t,n,i,r,o,a,s){var c,l;a?(c=i,l=-n):(c=-i,l=n);var u=e-n*r+c,d=t-i*r+l,h=e+n*o+c,p=t+i*o+l;return s.push(u,d),s.push(h,p),2}function uI(e,t,n,i,r,o,a,s){var c=n-e,l=i-t,u=Math.atan2(c,l),d=Math.atan2(r-e,o-t);s&&u<d?u+=2*Math.PI:!s&&u>d&&(d+=2*Math.PI);var h=u,p=d-u,f=Math.abs(p),g=Math.sqrt(c*c+l*l),_=1+(15*f*Math.sqrt(g)/Math.PI>>0),m=p/_;if(h+=m,s){a.push(e,t),a.push(n,i);for(var y=1,v=h;y<_;y++,v+=m)a.push(e,t),a.push(e+Math.sin(v)*g,t+Math.cos(v)*g);a.push(e,t),a.push(r,o)}else{for(a.push(n,i),a.push(e,t),y=1,v=h;y<_;y++,v+=m)a.push(e+Math.sin(v)*g,t+Math.cos(v)*g),a.push(e,t);a.push(r,o),a.push(e,t)}return 2*_}function dI(e,t){e.lineStyle.native?function(e,t){var n=0,i=e.shape,r=e.points||i.points,o=i.type!==kE.POLY||i.closeStroke;if(0!==r.length){var a=t.points,s=t.indices,c=r.length/2,l=a.length/2,u=l;for(a.push(r[0],r[1]),n=1;n<c;n++)a.push(r[2*n],r[2*n+1]),s.push(u,u+1),u++;o&&s.push(u,l)}}(e,t):function(e,t){var n=e.shape,i=e.points||n.points.slice(),r=t.closePointEps;if(0!==i.length){var o=e.lineStyle,a=new JE(i[0],i[1]),s=new JE(i[i.length-2],i[i.length-1]),c=n.type!==kE.POLY||n.closeStroke,l=Math.abs(a.x-s.x)<r&&Math.abs(a.y-s.y)<r;if(c){i=i.slice(),l&&(i.pop(),i.pop(),s.set(i[i.length-2],i[i.length-1]));var u=.5*(a.x+s.x),d=.5*(s.y+a.y);i.unshift(u,d),i.push(u,d)}var h=t.points,p=i.length/2,f=i.length,g=h.length/2,_=o.width/2,m=_*_,y=o.miterLimit*o.miterLimit,v=i[0],A=i[1],b=i[2],w=i[3],E=0,T=0,S=-(A-w),C=v-b,I=0,x=0,D=Math.sqrt(S*S+C*C);S/=D,C/=D,S*=_,C*=_;var O=o.alignment,P=2*(1-O),R=2*O;c||(o.cap===QC.ROUND?f+=uI(v-S*(P-R)*.5,A-C*(P-R)*.5,v-S*P,A-C*P,v+S*R,A+C*R,h,!0)+2:o.cap===QC.SQUARE&&(f+=lI(v,A,S,C,P,R,!0,h))),h.push(v-S*P,A-C*P),h.push(v+S*R,A+C*R);for(var k=1;k<p-1;++k){v=i[2*(k-1)],A=i[2*(k-1)+1],b=i[2*k],w=i[2*k+1],E=i[2*(k+1)],T=i[2*(k+1)+1],S=-(A-w),C=v-b,S/=D=Math.sqrt(S*S+C*C),C/=D,S*=_,C*=_,I=-(w-T),x=b-E,I/=D=Math.sqrt(I*I+x*x),x/=D,I*=_,x*=_;var N=b-v,M=A-w,L=b-E,B=T-w,F=M*L-B*N,U=F<0;if(Math.abs(F)<.1)h.push(b-S*P,w-C*P),h.push(b+S*R,w+C*R);else{var W=(-S+v)*(-C+w)-(-S+b)*(-C+A),j=(-I+E)*(-x+w)-(-I+b)*(-x+T),G=(N*j-L*W)/F,V=(B*W-M*j)/F,H=(G-b)*(G-b)+(V-w)*(V-w),z=b+(G-b)*P,Z=w+(V-w)*P,Y=b-(G-b)*R,$=w-(V-w)*R,q=U?P:R;H<=Math.min(N*N+M*M,L*L+B*B)+q*q*m?o.join===qC.BEVEL||H/m>y?(U?(h.push(z,Z),h.push(b+S*R,w+C*R),h.push(z,Z),h.push(b+I*R,w+x*R)):(h.push(b-S*P,w-C*P),h.push(Y,$),h.push(b-I*P,w-x*P),h.push(Y,$)),f+=2):o.join===qC.ROUND?U?(h.push(z,Z),h.push(b+S*R,w+C*R),f+=uI(b,w,b+S*R,w+C*R,b+I*R,w+x*R,h,!0)+4,h.push(z,Z),h.push(b+I*R,w+x*R)):(h.push(b-S*P,w-C*P),h.push(Y,$),f+=uI(b,w,b-S*P,w-C*P,b-I*P,w-x*P,h,!1)+4,h.push(b-I*P,w-x*P),h.push(Y,$)):(h.push(z,Z),h.push(Y,$)):(h.push(b-S*P,w-C*P),h.push(b+S*R,w+C*R),o.join===qC.BEVEL||H/m>y||(o.join===qC.ROUND?f+=U?uI(b,w,b+S*R,w+C*R,b+I*R,w+x*R,h,!0)+2:uI(b,w,b-S*P,w-C*P,b-I*P,w-x*P,h,!1)+2:(U?(h.push(Y,$),h.push(Y,$)):(h.push(z,Z),h.push(z,Z)),f+=2)),h.push(b-I*P,w-x*P),h.push(b+I*R,w+x*R),f+=2)}}v=i[2*(p-2)],A=i[2*(p-2)+1],b=i[2*(p-1)],S=-(A-(w=i[2*(p-1)+1])),C=v-b,S/=D=Math.sqrt(S*S+C*C),C/=D,S*=_,C*=_,h.push(b-S*P,w-C*P),h.push(b+S*R,w+C*R),c||(o.cap===QC.ROUND?f+=uI(b-S*(P-R)*.5,w-C*(P-R)*.5,b-S*P,w-C*P,b+S*R,w+C*R,h,!1)+2:o.cap===QC.SQUARE&&(f+=lI(b,w,S,C,P,R,!1,h)));var Q=t.indices,J=KC.epsilon*KC.epsilon;for(k=g;k<f+g-2;++k)v=h[2*k],A=h[2*k+1],b=h[2*(k+1)],w=h[2*(k+1)+1],E=h[2*(k+2)],T=h[2*(k+2)+1],Math.abs(v*(w-T)+b*(T-A)+E*(A-w))<J||Q.push(k,k+1,k+2)}}(e,t)}var hI,pI,fI=function(e){function t(t,n,i,r,o,a){void 0===a&&(a=0),o=o||r/2;for(var s=-1*Math.PI/2+a,c=2*i,l=VE/c,u=[],d=0;d<c;d++){var h=d%2?o:r,p=d*l+s;u.push(t+h*Math.cos(p),n+h*Math.sin(p))}return e.call(this,u)||this}return nI(t,e),t}(qE),gI=function(){function e(){}return e.curveTo=function(e,t,n,i,r,o){var a=o[o.length-2],s=o[o.length-1]-t,c=a-e,l=i-t,u=n-e,d=Math.abs(s*u-c*l);if(d<1e-8||0===r)return o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t),null;var h=s*s+c*c,p=l*l+u*u,f=s*l+c*u,g=r*Math.sqrt(h)/d,_=r*Math.sqrt(p)/d,m=g*f/h,y=_*f/p,v=g*u+_*c,A=g*l+_*s,b=c*(_+m),w=s*(_+m),E=u*(g+y),T=l*(g+y);return{cx:v+e,cy:A+t,radius:r,startAngle:Math.atan2(w-A,b-v),endAngle:Math.atan2(T-A,E-v),anticlockwise:c*l>u*s}},e.arc=function(e,t,n,i,r,o,a,s,c){for(var l=a-o,u=KC._segmentsCount(Math.abs(l)*r,40*Math.ceil(Math.abs(l)/VE)),d=l/(2*u),h=2*d,p=Math.cos(d),f=Math.sin(d),g=u-1,_=g%1/g,m=0;m<=g;++m){var y=d+o+h*(m+_*m),v=Math.cos(y),A=-Math.sin(y);c.push((p*v+f*A)*r+n,(p*-A+f*v)*r+i)}},e}(),_I=function(){function e(){}return e.curveLength=function(e,t,n,i,r,o,a,s){for(var c=0,l=0,u=0,d=0,h=0,p=0,f=0,g=0,_=0,m=0,y=0,v=e,A=t,b=1;b<=10;++b)m=v-(g=(f=(p=(h=1-(l=b/10))*h)*h)*e+3*p*l*n+3*h*(u=l*l)*r+(d=u*l)*a),y=A-(_=f*t+3*p*l*i+3*h*u*o+d*s),v=g,A=_,c+=Math.sqrt(m*m+y*y);return c},e.curveTo=function(t,n,i,r,o,a,s){var c=s[s.length-2],l=s[s.length-1];s.length-=2;var u=KC._segmentsCount(e.curveLength(c,l,t,n,i,r,o,a)),d=0,h=0,p=0,f=0,g=0;s.push(c,l);for(var _=1,m=0;_<=u;++_)p=(h=(d=1-(m=_/u))*d)*d,g=(f=m*m)*m,s.push(p*c+3*h*m*t+3*d*f*i+g*o,p*l+3*h*m*n+3*d*f*r+g*a)},e}(),mI=function(){function e(){}return e.curveLength=function(e,t,n,i,r,o){var a=e-2*n+r,s=t-2*i+o,c=2*n-2*e,l=2*i-2*t,u=4*(a*a+s*s),d=4*(a*c+s*l),h=c*c+l*l,p=2*Math.sqrt(u+d+h),f=Math.sqrt(u),g=2*u*f,_=2*Math.sqrt(h),m=d/f;return(g*p+f*d*(p-_)+(4*h*u-d*d)*Math.log((2*f+m+p)/(m+_)))/(4*g)},e.curveTo=function(t,n,i,r,o){for(var a=o[o.length-2],s=o[o.length-1],c=KC._segmentsCount(e.curveLength(a,s,t,n,i,r)),l=0,u=0,d=1;d<=c;++d){var h=d/c;l=a+(t-a)*h,u=s+(n-s)*h,o.push(l+(t+(i-t)*h-l)*h,u+(n+(r-n)*h-u)*h)}},e}(),yI=function(){function e(){this.reset()}return e.prototype.begin=function(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n},e.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),vI=((hI={})[kE.POLY]=iI,hI[kE.CIRC]=rI,hI[kE.ELIP]=rI,hI[kE.RECT]=oI,hI[kE.RREC]=cI,hI),AI=[],bI=[],wI=function(){function e(e,t,n,i){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=i,this.type=e.type,this.points=[],this.holes=[]}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),EI=new JE,TI=new hT,SI=function(e){function t(){var t=e.call(this)||this;return t.uvsFloat32=null,t.indicesUint16=null,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.dirty=0,t.batchDirty=-1,t.cacheDirty=-1,t.clearDirty=0,t.drawCalls=[],t.batches=[],t.shapeIndex=0,t._bounds=new hT,t.boundsDirty=-1,t.boundsPadding=0,t.batchable=!1,t.indicesUint16=null,t.uvsFloat32=null,t.closePointEps=1e-4,t}return nI(t,e),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),bI.push(this.drawCalls[e]);for(this.drawCalls.length=0,e=0;e<this.batches.length;e++){var t=this.batches[e];t.reset(),AI.push(t)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,t,n,i){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null);var r=new wI(e,t,n,i);return this.graphicsData.push(r),this.dirty++,this},t.prototype.drawHole=function(e,t){if(void 0===t&&(t=null),!this.graphicsData.length)return null;var n=new wI(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var t=this.graphicsData,n=0;n<t.length;++n){var i=t[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,EI):EI.copyFrom(e),i.shape.contains(EI.x,EI.y))){var r=!1;if(i.holes)for(var o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(EI.x,EI.y)){r=!0;break}if(!r)return!0}}return!1},t.prototype.updateBatches=function(e){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,n=this.graphicsData,i=null,r=null;this.batches.length>0&&(r=(i=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var a=n[o],s=a.fillStyle,c=a.lineStyle;vI[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix);for(var l=0;l<2;l++){var u=0===l?s:c;if(u.visible){var d=u.texture.baseTexture,h=this.indices.length,p=this.points.length/2;d.wrapMode=sE.REPEAT,0===l?this.processFill(a):this.processLine(a);var f=this.points.length/2-p;0!==f&&(i&&!this._compareStyles(r,u)&&(i.end(h,p),i=null),i||((i=AI.pop()||new yI).begin(u,h,p),this.batches.push(i),r=u),this.addUvs(this.points,t,u.texture,p,f,u.matrix))}}}var g=this.indices.length,_=this.points.length/2;if(i&&i.end(g,_),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var m=_>65535&&e;this.indicesUint16=m?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},t.prototype._compareStyles=function(e,t){return!(!e||!t)&&e.texture.baseTexture===t.texture.baseTexture&&e.color+e.alpha===t.color+t.alpha&&!!e.native==!!t.native},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,t=this.graphicsData.length;e<t;e++){var n=this.graphicsData[e],i=n.fillStyle,r=n.lineStyle;if(i&&!i.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,t=0,n=e.length;t<n;t++)for(var i=e[t],r=0;r<i.size;r++){var o=i.start+r;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var e=this.batches,n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<2*t.BATCHABLE_SIZE},t.prototype.buildDrawCalls=function(){for(var e=++FT._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),bI.push(this.drawCalls[t]);this.drawCalls.length=0;var n=this.colors,i=this.textureIds,r=bI.pop();r||((r=new TC).texArray=new SC),r.texArray.count=0,r.start=0,r.size=0,r.type=nE.TRIANGLES;var o=0,a=null,s=0,c=!1,l=nE.TRIANGLES,u=0;for(this.drawCalls.push(r),t=0;t<this.batches.length;t++){var d=this.batches[t],h=d.style,p=h.texture.baseTexture;c!==!!h.native&&(l=(c=!!h.native)?nE.LINES:nE.TRIANGLES,a=null,o=8,e++),a!==p&&(a=p,p._batchEnabled!==e&&(8===o&&(e++,o=0,r.size>0&&((r=bI.pop())||((r=new TC).texArray=new SC),this.drawCalls.push(r)),r.start=u,r.size=0,r.texArray.count=0,r.type=l),p.touched=1,p._batchEnabled=e,p._batchLocation=o,p.wrapMode=10497,r.texArray.elements[r.texArray.count++]=p,o++)),r.size+=d.size,u+=d.size,s=p._batchLocation,this.addColors(n,h.color,h.alpha,d.attribSize),this.addTextureIds(i,s,d.attribSize)}FT._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,t=this.uvs,n=this.colors,i=this.textureIds,r=new ArrayBuffer(3*e.length*4),o=new Float32Array(r),a=new Uint32Array(r),s=0,c=0;c<e.length/2;c++)o[s++]=e[2*c],o[s++]=e[2*c+1],o[s++]=t[2*c],o[s++]=t[2*c+1],a[s++]=n[c],o[s++]=i[c];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){e.holes.length?(this.processHoles(e.holes),iI.triangulate(e,this)):vI[e.type].triangulate(e,this)},t.prototype.processLine=function(e){dI(e,this);for(var t=0;t<e.holes.length;t++)dI(e.holes[t],this)},t.prototype.processHoles=function(e){for(var t=0;t<e.length;t++){var n=e[t];vI[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds,t=TI,n=KE.IDENTITY;this._bounds.clear(),t.clear();for(var i=0;i<this.graphicsData.length;i++){var r=this.graphicsData[i],o=r.shape,a=r.type,s=r.lineStyle,c=r.matrix||KE.IDENTITY,l=0;if(s&&s.visible){var u=s.alignment;l=s.width,a===kE.POLY?l*=.5+Math.abs(.5-u):l*=Math.max(0,u)}if(n!==c&&(t.isEmpty()||(e.addBoundsMatrix(t,n),t.clear()),n=c),a===kE.RECT||a===kE.RREC){var d=o;t.addFramePad(d.x,d.y,d.x+d.width,d.y+d.height,l,l)}else if(a===kE.CIRC){var h=o;t.addFramePad(h.x,h.y,h.x,h.y,h.radius+l,h.radius+l)}else if(a===kE.ELIP){var p=o;t.addFramePad(p.x,p.y,p.x,p.y,p.width+l,p.height+l)}else{var f=o;e.addVerticesMatrix(n,f.points,0,f.points.length,l,l)}}t.isEmpty()||e.addBoundsMatrix(t,n),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,t){for(var n=0;n<e.length/2;n++){var i=e[2*n],r=e[2*n+1];e[2*n]=t.a*i+t.c*r+t.tx,e[2*n+1]=t.b*i+t.d*r+t.ty}},t.prototype.addColors=function(e,t,n,i){for(var r=bE((t>>16)+(65280&t)+((255&t)<<16),n);i-- >0;)e.push(r)},t.prototype.addTextureIds=function(e,t,n){for(;n-- >0;)e.push(t)},t.prototype.addUvs=function(e,t,n,i,r,o){void 0===o&&(o=null);for(var a=0,s=t.length,c=n.frame;a<r;){var l=e[2*(i+a)],u=e[2*(i+a)+1];if(o){var d=o.a*l+o.c*u+o.tx;u=o.b*l+o.d*u+o.ty,l=d}a++,t.push(l/c.width,u/c.height)}var h=n.baseTexture;(c.width<h.width||c.height<h.height)&&this.adjustUvs(t,n,s,r)},t.prototype.adjustUvs=function(e,t,n,i){for(var r=t.baseTexture,o=n+2*i,a=t.frame,s=a.width/r.width,c=a.height/r.height,l=a.x/a.width,u=a.y/a.height,d=Math.floor(e[n]+1e-6),h=Math.floor(e[n+1]+1e-6),p=n+2;p<o;p+=2)d=Math.min(d,Math.floor(e[p]+1e-6)),h=Math.min(h,Math.floor(e[p+1]+1e-6));for(l-=d,u-=h,p=n;p<o;p+=2)e[p]=(e[p]+l)*s,e[p+1]=(e[p+1]+u)*c},t.BATCHABLE_SIZE=100,t}(DC),CI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=QC.BUTT,t.join=qC.MITER,t.miterLimit=10,t}return nI(t,e),t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(eI),II=new Float32Array(3),xI={},DI=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n._geometry=t||new SI,n._geometry.refCount++,n.shader=null,n.state=qS.for2d(),n._fillStyle=new eI,n._lineStyle=new CI,n._matrix=null,n._holeMode=!1,n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n.pluginName="batch",n._transformID=-1,n.tint=16777215,n.blendMode=tE.NORMAL,n}return nI(t,e),Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e){if(void 0===e&&(e=null),"number"==typeof e){var t=arguments;e={width:t[0]||0,color:t[1]||0,alpha:void 0!==t[2]?t[2]:1,alignment:void 0!==t[3]?t[3]:.5,native:!!t[4]}}return this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){if("number"==typeof e){var t=arguments,n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],c=t[6];e={width:n,texture:i,color:r,alpha:o,matrix:a,alignment:s,native:c},Object.keys(e).forEach((function(t){return void 0===e[t]&&delete e[t]}))}e=Object.assign({width:0,texture:YT.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:QC.BUTT,join:qC.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var l=e.width>0&&e.alpha>0;return l?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:l},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new qE,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new qE,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this},t.prototype.lineTo=function(e,t){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,i=n[n.length-2],r=n[n.length-1];return i===e&&r===t||n.push(e,t),this},t.prototype._initCurve=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)},t.prototype.quadraticCurveTo=function(e,t,n,i){this._initCurve();var r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),mI.curveTo(e,t,n,i,r),this},t.prototype.bezierCurveTo=function(e,t,n,i,r,o){return this._initCurve(),_I.curveTo(e,t,n,i,r,o,this.currentPath.points),this},t.prototype.arcTo=function(e,t,n,i,r){this._initCurve(e,t);var o=this.currentPath.points,a=gI.curveTo(e,t,n,i,r,o);if(a){var s=a.cx,c=a.cy,l=a.radius,u=a.startAngle,d=a.endAngle,h=a.anticlockwise;this.arc(s,c,l,u,d,h)}return this},t.prototype.arc=function(e,t,n,i,r,o){if(void 0===o&&(o=!1),i===r)return this;if(!o&&r<=i?r+=VE:o&&i<=r&&(i+=VE),0==r-i)return this;var a=e+Math.cos(i)*n,s=t+Math.sin(i)*n,c=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var u=Math.abs(l[l.length-2]-a),d=Math.abs(l[l.length-1]-s);u<c&&d<c||l.push(a,s)}else this.moveTo(a,s),l=this.currentPath.points;return gI.arc(a,s,e,t,n,i,r,o,l),this},t.prototype.beginFill=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),this.beginTextureFill({texture:YT.WHITE,color:e,alpha:t})},t.prototype.beginTextureFill=function(e){if(e instanceof YT){var t=arguments,n=t[0],i=t[1],r=t[2],o=t[3];e={texture:n,color:i,alpha:r,matrix:o},Object.keys(e).forEach((function(t){return void 0===e[t]&&delete e[t]}))}e=Object.assign({texture:YT.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var a=e.alpha>0;return a?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:a},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,t,n,i){return this.drawShape(new ZE(e,t,n,i))},t.prototype.drawRoundedRect=function(e,t,n,i,r){return this.drawShape(new QE(e,t,n,i,r))},t.prototype.drawCircle=function(e,t,n){return this.drawShape(new YE(e,t,n))},t.prototype.drawEllipse=function(e,t,n,i){return this.drawShape(new $E(e,t,n,i))},t.prototype.drawPolygon=function(){for(var e,t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];var r=!0,o=n[0];o.points?(r=o.closeStroke,e=o.points):e=Array.isArray(n[0])?n[0]:n;var a=new qE(e);return a.closeStroke=r,this.drawShape(a),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.drawStar=function(e,t,n,i,r,o){return void 0===o&&(o=0),this.drawPolygon(new fI(e,t,n,i,r,o))},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return 1===e.length&&e[0].shape.type===kE.RECT&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var t=this._geometry,n=e.context.supports.uint32Indices;t.updateBatches(n),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var i=0;i<n;i++){var r=e.batches[i],o=r.style.color,a=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),s=new Float32Array(e.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),c={vertexData:a,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*r.start,r.size),uvs:s,_batchRGB:mE(o),_tintRGB:o,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=c}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,n=this.batches.length;t<n;t++){var i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}},t.prototype._renderDirect=function(e){var t=this._resolveDirectShader(e),n=this._geometry,i=this.tint,r=this.worldAlpha,o=t.uniforms,a=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(i>>16&255)/255*r,o.tint[1]=(i>>8&255)/255*r,o.tint[2]=(255&i)/255*r,o.tint[3]=r,e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(var s=0,c=a.length;s<c;s++)this._renderDrawCallDirect(e,n.drawCalls[s])},t.prototype._renderDrawCallDirect=function(e,t){for(var n=t.texArray,i=t.type,r=t.size,o=t.start,a=n.count,s=0;s<a;s++)e.texture.bind(n.elements[s],s);e.geometry.draw(i,r,o)},t.prototype._resolveDirectShader=function(e){var t=this.shader,n=this.pluginName;if(!t){if(!xI[n]){for(var i=e.plugins.batch.MAX_TEXTURES,r=new Int32Array(i),o=0;o<i;o++)r[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new KE,default:uS.from({uSamplers:r},!0)},s=e.plugins[n]._shader.program;xI[n]=new $S(s,a)}t=xI[n]}return t},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var t=e.bounds,n=t.minX,i=t.minY,r=t.maxX,o=t.maxY;this._bounds.addFrame(this.transform,n,i,r,o)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=mE(this.tint,II),t=0;t<this.batches.length;t++){var n=this.batches[t],i=n._batchRGB,r=(e[0]*i[0]*255<<16)+(e[1]*i[1]*255<<8)+(0|e[2]*i[2]*255);n._tintRGB=(r>>16)+(65280&r)+((255&r)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var t=this.transform.worldTransform,n=t.a,i=t.b,r=t.c,o=t.d,a=t.tx,s=t.ty,c=this._geometry.points,l=this.vertexData,u=0,d=0;d<c.length;d+=2){var h=c[d],p=c[d+1];l[u++]=n*h+r*p+a,l[u++]=o*p+i*h+s}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},t._TEMP_POINT=new JE,t}(yT),OI=function(e,t){return(OI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};!function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(pI||(pI={}));var PI={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:pI.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"middle",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},RI=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],kI=function(){function e(e){this.styleID=0,this.reset(),LI(this,e,e)}return e.prototype.clone=function(){var t={};return LI(t,this,PI),new e(t)},e.prototype.reset=function(){LI(this,PI,PI)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=MI(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=MI(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=MI(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?Math.round(10*this.fontSize)/10+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&RI.indexOf(i)<0&&(i='"'+i+'"'),t[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},e}();function NI(e){return"number"==typeof e?yE(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function MI(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=NI(e[t]);return e}return NI(e)}function LI(e,t,n){for(var i in n)Array.isArray(t[i])?e[i]=t[i].slice():e[i]=t[i]}var BI=function(){function e(e,t,n,i,r,o,a,s,c){this.text=e,this.style=t,this.width=n,this.height=i,this.lines=r,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=c}return e.measureText=function(t,n,i,r){i=null==i?n.wordWrap:i;var o=n.toFontString(),a=e.measureFont(o);0===a.fontSize&&(a.fontSize=n.fontSize,a.ascent=n.fontSize),r||(e._canvas||FI(),r=e._canvas);var s=r.getContext("2d");s.font=o;for(var c=(i?e.wordWrap(t,n,r):t).split(/(?:\r\n|\r|\n)/),l=new Array(c.length),u=0,d=0;d<c.length;d++){var h=UE(s,c[d])+(c[d].length-1)*n.letterSpacing;l[d]=h,u=Math.max(u,h)}var p=u+n.strokeThickness;n.dropShadow&&(p+=n.dropShadowDistance);var f=n.lineHeight||a.fontSize+n.strokeThickness,g=Math.max(f,a.fontSize+n.strokeThickness)+(c.length-1)*(f+n.leading);return n.dropShadow&&(g+=n.dropShadowDistance),new e(t,n,p,g,c,l,f+n.leading,u,a)},e.wordWrap=function(t,n,i){i||(e._canvas||FI(),i=e._canvas);for(var r=i.getContext("2d"),o=0,a="",s="",c=Object.create(null),l=n.letterSpacing,u=n.whiteSpace,d=e.collapseSpaces(u),h=e.collapseNewlines(u),p=!d,f=n.wordWrapWidth+l,g=e.tokenize(t),_=0;_<g.length;_++){var m=g[_];if(e.isNewline(m)){if(!h){s+=e.addLine(a),p=!d,a="",o=0;continue}m=" "}if(d){var y=e.isBreakingSpace(m),v=e.isBreakingSpace(a[a.length-1]);if(y&&v)continue}var A=e.getFromCache(m,l,c,r);if(A>f)if(""!==a&&(s+=e.addLine(a),a="",o=0),e.canBreakWords(m,n.breakWords))for(var b=e.wordWrapSplit(m),w=0,E=0;E<b.length;E++){for(var T=b[E],S=1;b[E+S];){var C=b[E+S],I=T[T.length-1];if(e.canBreakChars(I,C,m,E,n.breakWords))break;T+=C,S++}var x=e.getFromCache(T,l,c,r);x+o>(n.firstLine&&0===w?f-n.firstLine:f)&&(s+=e.addLine(a),w++,p=!1,a="",o=0),a+=T,o+=x}else{a.length>0&&(s+=e.addLine(a),a="",o=0);var D=_===g.length-1;s+=e.addLine(m,!D),p=!1,a="",o=0}else A+o>f&&(p=!1,s+=e.addLine(a),a="",o=0),(a.length>0||!e.isBreakingSpace(m)||p)&&(a+=m,o+=A)}return s+e.addLine(a,!1)},e.addLine=function(t,n){return void 0===n&&(n=!0),t=e.trimRight(t),n?t+"\n":t},e.getFromCache=function(e,t,n,i){var r=n[e];if("number"!=typeof r){var o=e.length*t;r=UE(i,e)+o,n[e]=r}return r},e.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},e.collapseNewlines=function(e){return"normal"===e},e.trimRight=function(t){if("string"!=typeof t)return"";for(var n=t.length-1;n>=0;n--){var i=t[n];if(!e.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return"string"==typeof t&&e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t){return"string"==typeof t&&e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var n=[],i="";if("string"!=typeof t)return n;for(var r=0;r<t.length;r++){var o=t[r];e.isBreakingSpace(o)||e.isNewline(o)?(""!==i&&(n.push(i),i=""),n.push(o)):i+=o}return""!==i&&n.push(i),n},e.canBreakWords=function(e,t){return t},e.canBreakChars=function(e,t,n,i,r){return!0},e.wordWrapSplit=function(e){return[...e]},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var n={ascent:0,descent:0,fontSize:0};e._canvas&&e._context||FI();var i=e._canvas,r=e._context;r.font=t;var o=Math.ceil(UE(r,"中文测试")),a=Math.ceil(UE(r,e.BASELINE_SYMBOL)),s=2*a;a=a*e.BASELINE_MULTIPLIER|0,i.width=o,i.height=s,r.fillStyle="#f00",r.fillRect(0,0,o,s),r.font=t,r.textBaseline="middle",r.fillStyle="#000",r.fillText("中文测试",0,a);var c=r.getImageData(0,0,o,s).data,l=c.length,u=4*o,d=0,h=0,p=!1;for(d=0;d<a;++d){for(var f=0;f<u;f+=4)if(255!==c[h+f]){p=!0;break}if(p)break;h+=u}for(n.ascent=a-d,h=l-u,p=!1,d=s;d>a;--d){for(f=0;f<u;f+=4)if(255!==c[h+f]){p=!0;break}if(p)break;h-=u}return n.descent=d-a,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n},e.clearMetrics=function(t){void 0===t&&(t=""),t?delete e._fonts[t]:e._fonts={}},e}();function FI(){var e=BE.createElement("canvas");e.width=e.height=10,BI._canvas=e,BI._context=e.getContext("2d")}BI._fonts={},BI.METRICS_STRING="|ÉqÅ",BI.BASELINE_SYMBOL="M",BI.BASELINE_MULTIPLIER=1.4,BI._newlines=[10,13],BI._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var UI={texture:!0,children:!1,baseTexture:!0},WI=function(e){function t(t,n,i){var r=this,o=!1;i||(i=BE.createElement("canvas"),o=!0),i.width=3,i.height=3;var a=YT.from(i);return a.orig=new ZE,a.trim=new ZE,(r=e.call(this,a)||this)._ownCanvas=o,r.canvas=i,r.context=r.canvas.getContext("2d"),r._resolution=$b.RESOLUTION,r._autoResolution=!0,r._text=null,r._style=null,r._styleListener=null,r._font="",r.text=t,r.style=n,r.localStyleID=-1,r}return function(e,t){function n(){this.constructor=e}OI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var n,i,r=!!t.groupText,o=this.context,a=BI.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=a.width,c=a.height,l=a.lines,u=a.lineHeight,d=a.fontProperties;if(r)for(var h=0;h<t.groupText.length;h++)s+=t.groupText[h].paddingLeft||0;this.canvas.width=Math.ceil((Math.max(1,s)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,c)+2*t.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=t.strokeThickness,o.textBaseline=t.textBaseline,o.lineJoin=t.lineJoin,o.miterLimit=t.miterLimit;for(var p=t.dropShadow?2:1,f=0;f<p;++f)for(var g=t.dropShadow&&0===f,_=(this.style.lineHeight-this.style.fontSize)/2,m=0,y=0;y<l.length;y++)if(n=t.strokeThickness/2,i=t.strokeThickness/2+y*u+_+d.ascent,r){var v=[],A=0,b=0,w=0;for(h=0;h<t.groupText.length;h++){var E=Math.max(0,t.groupText[h].length+w-m);w+=t.groupText[h].length;var T=l[y].slice(b,E);T.length>0&&(v.push({string:T,color:t.groupText[h].color,paddingLeft:t.groupText[h].paddingLeft||0,absolute:t.groupText[h].absolute,firstLine:t.groupText[h].firstLine||0}),b+=T.length)}for(h=0;h<v.length;h++){var S=v[h];if(g){var C=mE("number"==typeof(D=t.dropShadowColor)?D:vE(D));o.fillStyle="rgba("+255*C[0]+","+255*C[1]+","+255*C[2]+","+t.dropShadowAlpha+")";var I=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,x=Math.sin(t.dropShadowAngle)*t.dropShadowDistance+0;this.drawLetterSpacing(S.string,n+t.padding+(S.absolute?0:A)+S.paddingLeft+(0===y?S.firstLine:0)+I,i+t.padding-0+x)}o.fillStyle=S.color,A+=this.drawLetterSpacing(S.string,n+t.padding+(S.absolute?0:A)+S.paddingLeft+(0===y?S.firstLine:0),i+t.padding-0,!1,!0)}b-=m+=l[y].length}else{var D;if(g)C=mE("number"==typeof(D=t.dropShadowColor)?D:vE(D)),o.fillStyle="rgba("+255*C[0]+","+255*C[1]+","+255*C[2]+","+t.dropShadowAlpha+")",I=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,x=Math.sin(t.dropShadowAngle)*t.dropShadowDistance+0,this.drawLetterSpacing(l[y],n+t.padding+I,i+t.padding-0+x,!1);o.fillStyle=this._generateFillStyle(t,l,a),this.drawLetterSpacing(l[y],n+t.padding,i+t.padding-0,!1)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,t,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var o=this._style.letterSpacing;if(0===o)return i?this.context.strokeText(e,t,n):this.context.fillText(e,t,n),r?UE(this.context,e):void 0;for(var a=t,s=Array.from?Array.from(e):e.split(""),c=UE(this.context,e),l=0,u=0;u<s.length;++u){var d=s[u];i?this.context.strokeText(d,a,n):this.context.fillText(d,a,n),a+=c-(l=UE(this.context,e.substring(u+1)))+o,c=l}},t.prototype.updateTexture=function(){var e=this.canvas,t=this._texture,n=this._style,i=n.trim?0:n.padding,r=t.baseTexture;t.trim.width=t._frame.width=Math.ceil(e.width/this._resolution),t.trim.height=t._frame.height=Math.ceil(e.height/this._resolution),t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-2*i,t.orig.height=t._frame.height-2*i,this._onTextureUpdate(),r.setRealSize(e.width,e.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},t.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,t,n){var i,r=e.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];var o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,s=Math.ceil(this.canvas.width/this._resolution)-o-2*a,c=Math.ceil(this.canvas.height/this._resolution)-o-2*a,l=r.slice(),u=e.fillGradientStops.slice();if(!u.length)for(var d=l.length+1,h=1;h<d;++h)u.push(h/d);if(l.unshift(r[0]),u.unshift(0),l.push(r[r.length-1]),u.push(1),e.fillGradientType===pI.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,a,s/2,c+a);var p=0,f=(n.fontProperties.fontSize+e.strokeThickness)/c;for(h=0;h<t.length;h++)for(var g=n.lineHeight*h,_=0;_<l.length;_++){var m=g/c+("number"==typeof u[_]?u[_]:_/l.length)*f,y=Math.max(p,m);y=Math.min(y,1),i.addColorStop(y,l[_]),p=y}}else{i=this.context.createLinearGradient(a,c/2,s+a,c/2);var v=l.length+1,A=1;for(h=0;h<l.length;h++){var b;b="number"==typeof u[h]?u[h]:A/v,i.addColorStop(b,l[h]),A++}}return i},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},UI,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.round(Math.abs(this.scale.x)*this._texture.orig.width*100)/100},set:function(e){e=Math.round(100*e)/100,this.updateText(!0);var t=CE(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.round(Math.abs(this.scale.y)*this._texture.orig.height*100)/100},set:function(e){e=Math.round(100*e)/100,this.updateText(!0);var t=CE(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof kI?e:new kI(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t}(ZC);bC.registerPlugin("interaction",CT),bC.registerPlugin("batch",kC),WC.registerPlugin(GC),function(e){var t;if(!(null===(t=null==e?void 0:e.systems)||void 0===t?void 0:t.ShaderSystem))throw new Error("Unable to patch ShaderSystem, class not found.");var n=e.systems.ShaderSystem,i=!1;try{n.prototype.systemCheck.call(null),i=!1}catch(e){i=!0}i&&Object.assign(n.prototype,{systemCheck:function(){},syncUniforms:function(e,t){var n=this.shader,i=this.renderer;!function(e,t,n,i,r){var o=0,a=null,s=null,c=r.gl;for(var l in e.uniforms){var u=t[l],d=i[l],h=n[l],p=e.uniforms[l];u?"float"===u.type&&1===u.size?d!==h.value&&(h.value=d,c.uniform1f(h.location,d)):"sampler2D"!==u.type&&"samplerCube"!==u.type&&"sampler2DArray"!==u.type||1!==u.size||u.isArray?"mat3"===u.type&&1===u.size?void 0!==p.a?c.uniformMatrix3fv(h.location,!1,d.toArray(!0)):c.uniformMatrix3fv(h.location,!1,d):"vec2"===u.type&&1===u.size?void 0!==p.x?(a=d,(s=h.value)[0]===a.x&&s[1]===a.y||(s[0]=a.x,s[1]=a.y,c.uniform2f(h.location,a.x,a.y))):(a=d,(s=h.value)[0]===a[0]&&s[1]===a[1]||(s[0]=a[0],s[1]=a[1],c.uniform2f(h.location,a[0],a[1]))):"vec4"===u.type&&1===u.size?void 0!==p.width?(a=d,(s=h.value)[0]===a.x&&s[1]===a.y&&s[2]===a.width&&s[3]===a.height||(s[0]=a.x,s[1]=a.y,s[2]=a.width,s[3]=a.height,c.uniform4f(h.location,a.x,a.y,a.width,a.height))):(a=d,(s=h.value)[0]===a[0]&&s[1]===a[1]&&s[2]===a[2]&&s[3]===a[3]||(s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],c.uniform4f(h.location,a[0],a[1],a[2],a[3]))):(1===u.size?JC:XC)[u.type].call(null,c,h.location,h.value,d):(r.texture.bind(d,o),h.value!==o&&(h.value=o,c.uniform1i(h.location,o)),o++):p.group&&r.shader.syncUniformGroup(d)}}(e,n.program.uniformData,t.uniformData,e.uniforms,i)}})}(NC);$b.PREFER_ENV=Xw.WEBGL,$b.SORTABLE_CHILDREN=!0,$b.PRECISION_FRAGMENT=hE.HIGH;var jI,GI={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}},VI="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},HI=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=VI()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]],o=!t;r&&!1===r.update(e,o)&&!t&&delete this._tweens[n[i]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),zI={Linear:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),o=zI.Utils.Linear;return t<0?o(e[0],e[1],i):t>1?o(e[n],e[n-1],n-i):o(e[r],e[r+1>n?n:r+1],i-r)},Bezier:function(e,t){for(var n=0,i=e.length-1,r=Math.pow,o=zI.Utils.Bernstein,a=0;a<=i;a++)n+=r(1-t,i-a)*r(t,a)*e[a]*o(i,a);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),o=zI.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(r=Math.floor(i=n*(1+t))),o(e[(r-1+n)%n],e[r],e[(r+1)%n],e[(r+2)%n],i-r)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(o(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):o(e[r?r-1:0],e[r],e[n<r+1?n:r+1],e[n<r+2?n:r+2],i-r)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=zI.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(jI=[1],function(e){var t=1;if(jI[e])return jI[e];for(var n=e;n>1;n--)t*=n;return jI[e]=t,t}),CatmullRom:function(e,t,n,i,r){var o=.5*(n-e),a=.5*(i-t),s=r*r;return(2*t-2*n+o+a)*(r*s)+(-3*t+3*n-2*o-a)*s+o*r+t}}},ZI=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),YI=new HI,$I=function(){function e(e,t){void 0===t&&(t=YI),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=GI.Linear.None,this._interpolationFunction=zI.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=ZI.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?VI()+parseFloat(e):e:VI(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,i){for(var r in n){var o=e[r],a=Array.isArray(o),s=a?"array":typeof o,c=!a&&Array.isArray(n[r]);if("undefined"!==s&&"function"!==s){if(c){var l=n[r];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,o)),n[r]=[o].concat(l)}if("object"!==s&&!a||!o||c)void 0===t[r]&&(t[r]=o),a||(t[r]*=1),i[r]=c?n[r].slice().reverse():t[r]||0;else{for(var u in t[r]=a?[]:{},o)t[r][u]=o[u];i[r]=a?[]:{},this._setupProperties(o,t[r],n[r],i[r])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=VI()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=VI()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=VI()),void 0===t&&(t=!0),this._isPaused)return!0;var n,i,r=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>r)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var o=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,s=this._chainedTweens.length;a<s;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,i){for(var r in n)if(void 0!==t[r]){var o=t[r]||0,a=n[r],s=Array.isArray(e[r]),c=Array.isArray(a);!s&&c?e[r]=this._interpolationFunction(a,i):"object"==typeof a&&a?this._updateProperties(e[r],o,a,i):"number"==typeof(a=this._handleRelativeValue(o,a))&&(e[r]=o+(a-o)*i)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),qI=ZI.nextId,QI=YI,JI=QI.getAll.bind(QI),XI=QI.removeAll.bind(QI),KI=QI.add.bind(QI),ex=QI.remove.bind(QI),tx=QI.update.bind(QI);const nx={Easing:GI,Group:HI,Interpolation:zI,now:VI,Sequence:ZI,nextId:qI,Tween:$I,VERSION:"18.6.4",getAll:JI,removeAll:XI,add:KI,remove:ex,update:tx},{padding:ix}=Tb,rx={width:300+ix.left,height:170+ix.top};const ox=new class{constructor(){this.locked=!1,this.dragArea=[],this.unlockDragArea=[{left:0,top:0,width:32+ix.left,height:rx.height},{left:0,top:0,width:rx.width,height:50+ix.top}],this.lockDragArea=[{left:ix.left+32-4,top:ix.top-4,width:ix.left+32+8,height:ix.top+32+8}],this.preventArea=[],this.unlockPreventArea=[{left:0,top:0,width:rx.width,height:rx.height}],this.lockPreventArea=[{left:ix.left+32-4,top:ix.top-4,width:ix.left+32+8,height:ix.top+32+8}],this.params={startLeft:0,startTop:0,startX:0,startY:0,flag:!1,currentLeft:0,currentTop:0,width:0,height:0}}setAsLock(){this.locked=!0,this.dragArea=this.lockDragArea,this.preventArea=this.lockPreventArea}setAsUnLock(){this.locked=!1,this.dragArea=this.unlockDragArea,this.preventArea=this.unlockPreventArea}isHit(e,t){return this.dragArea.find((n=>e>=n.left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height))}isPrevent(e,t){return this.preventArea.find((n=>e>=n.left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height))}};let ax,sx,cx,lx,ux,dx=0;function hx(e){let t=e.offsetX||e.pageX,n=e.offsetY||e.pageY;return t=Math.round(t/Tb.scale*100)/100,n=Math.round(n/Tb.scale*100)/100,e.pageX=t,e.pageY=n,e.clientX=t,e.clientY=n,e.screenX=t,e.screenY=n,e}class px{constructor(e){this.target=void 0,this.currentTarget=[],this.touches=[],this.targetTouches=[],this.changedTouches=[],this.type=void 0,this.timeStamp=0,this.type=e}preventDefault(){}stopPropagation(){}}function fx(e,t,n="touch"){const i=new px(n);let r=t.touches,o=t.changedTouches;return Tb.IS_DEVTOOLS?(r=Object.values(t.touches),o=Object.values(t.changedTouches)):(r.forEach(hx),o.forEach(hx)),i.touches=r,i.targetTouches=Array.prototype.slice.call(r),i.changedTouches=o,i.timeStamp=t.timeStamp,i.target=e,i}const gx=function(){ax=(0,Fr.UG)(),ax.width=Tb.maxSize.width+Tb.padding.left*Tb.pixelRatio,ax.height=Tb.maxSize.height+Tb.padding.top*Tb.pixelRatio,ax.style.width=(Tb.maxSize.width/Tb.pixelRatio+Tb.padding.left)*Tb.scale+"px",ax.style.height=(Tb.maxSize.height/Tb.pixelRatio+Tb.padding.top)*Tb.scale+"px",ax.style.left=Tb.position.x-Tb.padding.left+"px",ax.style.top=Tb.position.y-Tb.padding.top+"px",ax.style.zIndex="100";const{bindingScreen:e=0}=ax;Eb(e)},_x=function(){return ax||gx(),ox.params.width=(Tb.maxSize.width/Tb.pixelRatio+Tb.padding.left)*Tb.scale,ox.params.height=(Tb.maxSize.height/Tb.pixelRatio+Tb.padding.top)*Tb.scale,lx=new bC({view:ax,antialias:!1,transparent:!0,width:(Tb.maxSize.width/Tb.pixelRatio+Tb.padding.left)*Tb.pixelRatio,height:(Tb.maxSize.height/Tb.pixelRatio+Tb.padding.top)*Tb.pixelRatio,clearBeforeRender:!1,preserveDrawingBuffer:!0}),lx.plugins.interaction.mapPositionToPoint=(e,t,n)=>{e.set(t*Tb.pixelRatio,n*Tb.pixelRatio)},ux=new yT,cx=()=>{dx++,dx%2==0&&lx&&(lx.clear(),lx.render(ux)),nx.update()},sx=new dT,sx.add(cx),sx.start(),function(e,t,n){const i=n=>{const i=n.changedTouches[0]||n.touches[0],{params:r}=ox,o=i.offsetX||i.pageX,a=i.offsetY||i.pageY;return ox.isHit(o,a)&&(r.flag=!0,r.startX=o,r.startY=a,r.startLeft=parseFloat(e.style.left),r.startTop=parseFloat(e.style.top),r.currentLeft=r.startLeft,r.currentTop=r.startTop),t&&t.plugins&&t.plugins.interaction.onPointerDown(fx(e,n),"touchstart"),!ox.isPrevent(o,a)},r=i=>{const r=i.changedTouches[0]||i.touches[0],{params:o}=ox,a=r.offsetX||r.pageX,s=r.offsetY||r.pageY;if(o.flag){const t=a-o.startX,i=s-o.startY,r=vb(o.currentLeft+t,0-Tb.padding.left,Tb.screenWidth-ox.params.width),c=vb(o.currentTop+i,0-Tb.padding.top,Tb.screenHeight-ox.params.height);e.style.left=`${r}px`,e.style.top=`${c}px`,Tb.IS_DEVTOOLS&&(o.startX=a,o.startY=s),o.currentLeft=r,o.currentTop=c,1===n.speed&&(n.speed=.5)}else t&&t.plugins&&t.plugins.interaction.onPointerMove(fx(e,i),"touchmove");return!ox.isPrevent(a,s)},o=i=>{const r=i.changedTouches[0]||i.touches[0];return t&&t.plugins&&t.plugins.interaction.onPointerUp(fx(e,i),"touchend"),ox.params.flag=!1,.5===n.speed&&(n.speed=1),!ox.isPrevent(r.offsetX||r.pageX,r.offsetY||r.pageY)};Tb.IS_DEVTOOLS?(e.addEventListener("touchstart",i),e.addEventListener("touchmove",r),e.addEventListener("touchend",o)):(e.ontouchstart=i,e.ontouchmove=r,e.ontouchend=o)}(ax,lx,sx),Tb.device.width=Tb.designSize.width,Tb.device.height=Tb.designSize.height,{renderer:lx,stage:ux}};let mx,yx,vx,Ax,bx,Ex,Tx;var Sx;let Cx;!function(e){e[e.Unknown=0]="Unknown",e[e.Anchor_Notice=1]="Anchor_Notice",e[e.Audience_Comment=2]="Audience_Comment",e[e.Audience_Join=3]="Audience_Join",e[e.Top=4]="Top",e[e.Official=5]="Official",e[e.Official_BanComment=6]="Official_BanComment",e[e.Official_OpenComment=7]="Official_OpenComment",e[e.Official_ConnectMic=8]="Official_ConnectMic",e[e.Official_LiveRewardEnable=9]="Official_LiveRewardEnable",e[e.ComboLiveReward=10]="ComboLiveReward",e[e.RewardRankingNotice=11]="RewardRankingNotice",e[e.Official_Location=12]="Official_Location",e[e.RedPacket_Sent=13]="RedPacket_Sent",e[e.RedPacket_Received=14]="RedPacket_Received",e[e.Official_PureAudioMode=15]="Official_PureAudioMode",e[e.First_Notice=16]="First_Notice"}(mx||(mx={})),function(e){e[e.Unkown=0]="Unkown",e[e.WeAppMenu=1]="WeAppMenu",e[e.WeAppExit=2]="WeAppExit",e[e.JsApi=3]="JsApi",e[e.Finder=4]="Finder"}(yx||(yx={})),function(e){e[e.Unknown=0]="Unknown",e[e.Info=1]="Info",e[e.DisableInfo=2]="DisableInfo",e[e.GetCurrentRoomMemberInfo=3]="GetCurrentRoomMemberInfo",e[e.GetCurrentRoomInfo=4]="GetCurrentRoomInfo",e[e.EnableMic=5]="EnableMic",e[e.DisableMic=6]="DisableMic",e[e.GetCurrentMicState=7]="GetCurrentMicState",e[e.EnableMicInfo=8]="EnableMicInfo",e[e.DisableMicInfo=8]="DisableMicInfo"}(vx||(vx={})),function(e){e[e.End=0]="End",e[e.Start=1]="Start",e[e.PreStart=2]="PreStart",e[e.Cancel=3]="Cancel"}(Ax||(Ax={})),function(e){e[e.TRTCQuality_Unknown=0]="TRTCQuality_Unknown",e[e.TRTCQuality_Excellent=1]="TRTCQuality_Excellent",e[e.TRTCQuality_Good=2]="TRTCQuality_Good",e[e.TRTCQuality_Poor=3]="TRTCQuality_Poor",e[e.TRTCQuality_Bad=4]="TRTCQuality_Bad",e[e.TRTCQuality_Vbad=5]="TRTCQuality_Vbad",e[e.TRTCQuality_Down=6]="TRTCQuality_Down"}(bx||(bx={})),function(e){e[e.unknow=0]="unknow",e[e.friend=1]="friend",e[e.timeline=2]="timeline"}(Ex||(Ex={})),function(e){e.lock="lock",e.unlock="unlock"}(Tx||(Tx={})),function(e){e.ontouchstart="ontouchstart",e.ontouchmove="ontouchmove",e.ontouchend="ontouchend"}(Sx||(Sx={})),function(e){e[e.screenCanvasInitErr=0]="screenCanvasInitErr",e[e.resourceLoadError=1]="resourceLoadError",e[e.jsAPIInvokeError=2]="jsAPIInvokeError"}(Cx||(Cx={}));const Ix={tl:0,tr:0,br:0,bl:0},xx={};s.Z.onReady((()=>{Cb().then((e=>{xx.canvas={width:e.device.width+e.padding.left*e.pixelRatio,height:e.device.height+e.padding.top*e.pixelRatio}}))}));function Dx(e,t=new JE,n=1){return t.x+=e.x,t.y+=e.y,e.parent&&Dx(e.parent,t,++n),t}function Ox(e,t,n,i,r,o=Ix,a){e.beginFill(a.fill,a.alpha),e.moveTo(t+o.tl,n),e.lineTo(t+i-o.tr,n),e.quadraticCurveTo(t+i,n,t+i,n+o.tr),e.lineTo(t+i,n+r-o.br),e.quadraticCurveTo(t+i,n+r,t+i-o.br,n+r),e.lineTo(t+o.bl,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o.bl),e.lineTo(t,n+o.tl),e.quadraticCurveTo(t,n,t+o.tl,n),e.endFill()}function Px(e,t){t.wordWrap=!0;const n=BI.measureText(e,t);var i;return n.lines.length>1&&(e=`${n.lines[0].slice(0,-1)}`,"\ud800"<=(i=e.substr(e.length-1,1))&&"\udbff">=i&&(e=e.slice(0,-1)),e+="..."),t.wordWrap=!1,e}function Rx(e){e.interactive=!0,e.on("pointerup",(()=>{e.alpha=1})),e.on("pointerdown",(()=>{e.alpha=.5})),e.on("pointerupoutside",(()=>{e.alpha=1}))}function kx(e,t,n){const i=Dx(e);xx[t]={x:i.x+Tb.padding.left*Tb.pixelRatio,y:i.y+Tb.padding.top*Tb.pixelRatio,width:e.width,height:e.height,check:n}}function Nx(e,t,n,i,r,o,a=null){const s=!a;let c,l;return a?(c=a.children[0],l=a.children[1]):(a=new yT,c=new DI,l=new WI(t,n)),l.text=t,l.position.set(i.left,i.top),c.clear(),c.beginFill(r.fill,r.alpha),c.drawRoundedRect(0,0,l.width+i.left+i.right,l.height+i.top+i.bottom,o),c.endFill(),s&&a.addChild(c,l),a.position.set(e.x,e.y),{labelContainer:a,labelBackground:c,labelText:l}}const Mx=[];function Lx(e,t,n=2e3,i=null){Mx[e]?(nx.remove(Mx[e]),t.alpha=1,Mx[e]=new nx.Tween(t).delay(n).to({alpha:0},300).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{Mx[e]=!1,i&&i()})).start()):(t.alpha=0,Mx[e]=new nx.Tween(t).to({alpha:1},300).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{Mx[e]=new nx.Tween(t).delay(n).to({alpha:0},300).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{Mx[e]=!1,i&&i()})).start()})).start())}let Bx,Fx;!function(e){e.STRING="STRING",e.LONGLONG="LONGLONG",e.UINT="UINT",e.INT="INT"}(Bx||(Bx={})),function(e){e.SvrReport="SvrReport",e.KvStat="KvStat"}(Fx||(Fx={}));const Ux={[Bx.STRING]:e=>"string"==typeof e&&e.length<=1024,[Bx.LONGLONG]:e=>"number"==typeof e&&Math.floor(e)===e,[Bx.UINT]:e=>"number"==typeof e&&Math.floor(e)===e&&e>=0,[Bx.INT]:e=>"number"==typeof e&&Math.floor(e)===e};const Wx={wifi:"0",unknown:"1","2g":"2","3g":"3","4g":"4","5g":"5",none:"1"};let jx="",Gx=1;class Vx extends class extends class{constructor(e,t={}){this.debug=!1,this.logid=void 0,this.base=void 0,this.schemas=void 0,this.logid=e,this.schemas=t}setBase(e){this.base=Dn()(Dn()({},this.base),e)}validate(e){for(const[t,n]of Object.entries(e)){if(void 0===n)continue;const e=this.schemas[t];e?this.validateColumn(e,n)||console.error(`SchemaValidator: logid ${this.logid}: ${t} should be ${e}, but now ${n}`):console.warn(`SchemaValidator: logid${this.logid}: ${t} 缺少类型定义`)}}validateColumn(e,t){return Ux[e](t)}}{constructor(e,t,n,i,r){super(e,i),this.protocolName=void 0,this.protocolParams=void 0,r&&(this.base=r),this.logid=e,this.protocolName=t,this.protocolParams=n}send(e,t){let n;n=Array.isArray(e)?e:[e],n.forEach((e=>{const n=Dn()(Dn()({},this.base),e),i=[];this.protocolParams.forEach((e=>{const t=void 0!==n[e]?n[e]:"";i.push(t)})),Reporter.reportKeyValue({key:this.protocolName,value:i.map(encodeURIComponent).join(","),immediately:!0}),t&&t(this.protocolName,i.map(encodeURIComponent).join(",")),this.debug&&console.log(this.protocolName,i.map(encodeURIComponent).join(","))}))}}{constructor(){super(20267,"GameAdsSkipCard",["NetworkType","SSID","ToUin","SceneID","UIArea","PositionID","ActionID","ActionStatus","OpType","Object","Status","SourceID","Allpath","ExpID","LogType","ErrType","Time","FuncType","FuncID","ContentType","ContentID","ReasonID","ExternInfo"],{AppId:Bx.STRING,NetworkType:Bx.STRING,SSID:Bx.UINT,ToUin:Bx.STRING,SceneID:Bx.LONGLONG,UIArea:Bx.LONGLONG,PositionID:Bx.LONGLONG,ActionID:Bx.LONGLONG,ActionStatus:Bx.STRING,OpType:Bx.LONGLONG,Object:Bx.STRING,Status:Bx.STRING,SourceID:Bx.LONGLONG,Allpath:Bx.STRING,ExpID:Bx.LONGLONG,Time:Bx.LONGLONG,FuncType:Bx.LONGLONG,FuncID:Bx.STRING,ReasonID:Bx.LONGLONG,ExternInfo:Bx.STRING,ErrType:Bx.STRING},{SceneID:36}),1!==Gx?this.setBase({NetworkType:Gx}):s.Z.onReady((()=>{var e;e=e=>{Wx[e]&&(Gx=Wx[e]),this.setBase({NetworkType:Gx})},jx?e&&e(jx):((0,Ae.getNetworkType)({success:t=>{const{networkType:n}=t;jx=n,e&&e(jx)}}),(0,Ae.onNetworkStatusChange)((t=>{jx=t.networkType,t.isConnected||(jx="none"),e&&e(jx)})))}))}}const Hx=new Vx;function zx(e,t){if(t===this[`_${e}`])return;const n=function(e){return e<1e3?`${e}`:e>=1e3&&e<1e4?`${parseFloat(e/1e3).toFixed(1)}k`:e>1e4&&e<1e5?`${parseFloat(e/1e4).toFixed(1)}w`:"10w+"}(t);n!==this[e]&&(this[`_${e}`]=t,this[`_${e}Str`]=n)}const Zx=new class extends GE{constructor(){super(),this.lastEvent=null,this.msgList=[],this.liveId=0,this.liveStartTime=Math.round(Date.now()/1e3),this.liveMemberList=[],this.account=null,this.isHide=!1,this._currLikeCount=0,this._currLikeCountStr="0",this._currOnlineCount=0,this._currOnlineCountStr="0",this._totalRewardCount=0,this._totalRewardCountStr="0",this._totalViewCount=0,this._totalViewCountStr="0",this._readyToStart=!1,this._netThresholdCount=0,this._netToasted=!1,this.init()}reset(){this.lastEvent=null,this._currLikeCount=0,this._currLikeCountStr="0",this._currOnlineCount=0,this._currOnlineCountStr="0",this._totalRewardCount=0,this._totalRewardCountStr="0",this._totalViewCount=0,this._totalViewCountStr="0",this.msgList=[]}bindHideAndShowEvent(){const e=()=>{this.isHide=!1,this._readyToStart&&(this._readyToStart=!1,this.emit("liveStart")),this.msgList.length&&(this.emit("msgListChange",this.msgList),this.msgList=[])};An((()=>{this.isHide=!0})),En((()=>{e()})),(0,Uo.vv)((()=>{this.isHide=!0})),(0,Uo.dN)((()=>{e()}))}init(){this.bindHideAndShowEvent(),WeixinJSBridge.on("onGameLiveInfo",this.gameLiveInfoEventHandler.bind(this)),WeixinJSBridge.on("onGameLiveNetStateChange",this.gameLiveNetStateEventHandler.bind(this)),(0,Uo.DT)(this.gameLiveStateChagneHandler.bind(this)),WeixinJSBridge.on("onGameLiveMicStateChange",this.micStateChangeHandler.bind(this))}destroy(){this.reset(),Zx.off("micStateChange"),Zx.off("msgListChange"),Zx.off("roomInfoChange")}gameLiveNetStateEventHandler(e){const{quality:t,threshold:n}=e;this._netToasted||(t>=n?(this._netThresholdCount++,this._netThresholdCount>3&&((0,Oe.CF)({icon:"none",title:"当前网络信号差"}),this._netToasted=!0,setTimeout((()=>{this._netToasted=!1}),6e4))):this._netThresholdCount=0)}micStateChangeHandler(e){this.emit("micStateChange",e)}gameLiveStateChagneHandler(e){e.event===Ax.End?this.emit("liveEnd",e):e.event===Ax.Start?(e.extra&&(this.account=e.extra,this.liveId=this.account.liveId,Hx.setBase({FuncID:`${this.account.finderUsername}:${this.liveId}`})),this.getRoomInfo(),this.isHide?this._readyToStart=!0:this.emit("liveStart")):e.event===Ax.PreStart&&this.emit("livePreStart");const t=JSON.parse(JSON.stringify(e));var n;delete t.extra,n=t,Hx.send({UIArea:0,PositionID:1,ActionID:28,ExternInfo:"string"==typeof n?encodeURIComponent(n):encodeURIComponent(JSON.stringify(n))})}gameLiveInfoEventHandler(e){this.lastEvent=e;const{msgList:t=[]}=e;if(this.isHide)return void this.msgList.push(...t);t.length&&this.emit("msgListChange",t);let n=!1;e.currLikeCount===this._currLikeCount&&e.currOnlineCount===this._currOnlineCount&&e.totalRewardCount===this._totalRewardCount&&e.totalViewCount===this._totalViewCount||(n=!0),this._currOnlineCount===e.currOnlineCount&&this._totalRewardCount===e.totalRewardCount||this.emit("roomListChange"),this.currLikeCount=e.currLikeCount||0,this.currOnlineCount=e.currOnlineCount||0,this.totalRewardCount=e.totalRewardCount||0,this.totalViewCount=e.totalViewCount||0,n&&this.emit("roomInfoChange",this.roomInfo)}getCurrentRoomMemberInfo(){return $x.gameLiveInfoControl(vx.GetCurrentRoomMemberInfo).then((e=>{this.liveMemberList=e&&e.memberList||[]}))}getRoomInfo(){return $x.gameLiveInfoControl(vx.GetCurrentRoomInfo).then((e=>{e.errMsg.indexOf(":ok")>-1&&e&&e.startTime&&(this.liveStartTime=e&&e.startTime)}))}get roomInfo(){return`${this.currLikeCount}喝彩·${this.totalViewCount}人看过·${this.currOnlineCount}人在线·${this.totalRewardCount}热度`}get currLikeCount(){return this._currLikeCountStr}set currLikeCount(e){zx.call(this,"currLikeCount",e)}get currOnlineCount(){return this._currOnlineCountStr}set currOnlineCount(e){zx.call(this,"currOnlineCount",e)}get totalRewardCount(){return this._totalRewardCountStr}set totalRewardCount(e){zx.call(this,"totalRewardCount",e)}get totalViewCount(){return this._totalViewCountStr}set totalViewCount(e){zx.call(this,"totalViewCount",e)}},Yx=e=>{};const $x=new class{shareToFriend(e=!1){!function(e=!1){Hx.send({UIArea:e?3606:3605,PositionID:e?1:2,ActionID:2})}(e),WeixinJSBridge.invoke("shareGameLive",{type:Ex.friend},(t=>{!function(e,t,n=!1){Hx.send({UIArea:n?3606:3605,PositionID:n?1:2,ActionID:10,ActionStatus:e?"1":"2",Object:t})}(!!(t.errMsg.indexOf("ok")>-1&&(t.singleChat||t.groupChat)),`singleChat=${t.singleChat||0}:groupChat=${t.groupChat||0}`,e)}))}shareToTimeline(e=!1){!function(e=!1){Hx.send({UIArea:e?3606:3605,PositionID:e?2:3,ActionID:2})}(e),WeixinJSBridge.invoke("shareGameLive",{type:Ex.timeline},(t=>{!function(e,t=!1){Hx.send({UIArea:t?3606:3605,PositionID:t?2:3,ActionID:10,ActionStatus:e?"1":"2"})}(!!(t.errMsg.indexOf("ok")>-1),e)}))}exitGameLive(e=Yx){var t;t=Math.round(Date.now()/1e3)-Zx.liveStartTime,Hx.send({UIArea:3605,PositionID:1,ActionID:2,Time:t}),WeixinJSBridge.invoke("exitGameLive",{},(t=>{e(t)}))}enterGameLiveRoom(e=Yx){Hx.send({UIArea:3605,PositionID:5,ActionID:2}),WeixinJSBridge.invoke("enterGameLiveRoom",{},(t=>{e(t)}))}minimizeGameLive(e=Yx){Hx.send({UIArea:3605,PositionID:4,ActionID:2}),WeixinJSBridge.invoke("minimizeGameLive",{},(t=>{e(t)}))}gameLiveInfoControl(e){return new Promise((t=>{WeixinJSBridge.invoke("gameLiveInfoControl",{action:e},(e=>{t(e)}))}))}micOp(e,t=Yx){const n=e?vx.EnableMic:vx.DisableMic;e?Hx.send({UIArea:3605,PositionID:4,ActionID:2,OpType:3}):Hx.send({UIArea:3605,PositionID:4,ActionID:2,OpType:7}),WeixinJSBridge.invoke("gameLiveInfoControl",{action:n},(e=>{t(e)}))}getMicState(e=Yx){WeixinJSBridge.invoke("gameLiveInfoControl",{action:vx.GetCurrentMicState},(t=>{e(t)}))}};var qx=n(4875);class Qx extends yT{constructor(e,t=!1){super(),this.app=void 0,this.scrollerObj=void 0,this.scrollHeight=0,this.scrollWidth=0,this.locked=!1,this.spriteMask=!1,this.contentWidth=void 0,this.contentHeight=void 0,this.content=void 0,this._y=0;const{width:n,height:i,app:r,bottomCbk:o,scrollerOptions:a={}}=e;this.app=r,this.contentWidth=n,this.contentHeight=i,this.spriteMask=t,this.init(o,a),this.initMask()}init(e,t={}){this.content=new yT,this.addChild(this.content);const n=Dn()({scrollingY:!0,scrollingX:!1},t);this.scrollerObj=new qx.Scroller(((t,i)=>{const r=this.isBottom();n.scrollingY&&(this.content.position.y=-i),n.scrollingX&&(this.content.position.x=-t),e&&!r&&this.isBottom()&&e()}),n),this.update(),this.interactive=!0,this.on("pointerdown",(e=>{this.app.locked||(e=e.data.originalEvent,this.scrollerObj.doTouchStart(e.changedTouches||e.touches,e.timeStamp))})),this.on("pointermove",(e=>{this.app.locked||(e=e.data.originalEvent,this.scrollerObj.doTouchMove(e.changedTouches||e.touches,e.timeStamp),this.emit("scrollevent"))})),this.on("pointerup",(e=>{this.app.locked||(e=e.data.originalEvent,this.scrollerObj.doTouchEnd(e.timeStamp))})),this.on("pointerupoutside",(e=>{this.app.locked||(e=e.data.originalEvent,this.scrollerObj.doTouchEnd(e.timeStamp))}))}setScrollHeight(e=0,t=0){this.scrollHeight=Math.round(100*e)/100||this.contentHeight,this.scrollWidth=Math.round(100*t)/100||this.contentWidth,this.scrollerObj.setDimensions(this.contentWidth,this.contentHeight,this.scrollWidth,this.scrollHeight)}update(){this.scrollHeight=this.content.height,this.scrollerObj.setDimensions(this.contentWidth,this.contentHeight,this.contentWidth,this.scrollHeight)}initMask(){let e;this.spriteMask?(e=new ZC(this.app.images["mask/rect.png"]),e.width=this.contentWidth,e.height=this.contentHeight):(e=new DI,e.beginFill(16777215,1),e.drawRect(0,0,this.contentWidth,this.contentHeight),e.endFill()),this.addChild(e),this.mask=e}updateContentHeight(e){this.contentHeight=e;const t=this.mask;this.spriteMask?t.height=this.contentHeight:(t.clear(),t.beginFill(16777215,1),t.drawRect(0,0,this.contentWidth,this.contentHeight),t.endFill())}isBottom(){return this.content.position.y<=Math.ceil(Math.min(this.contentHeight-this.scrollHeight,0))}scrollTo(e,t=!1){this.scrollerObj.scrollTo(0,-e,t)}scrollToBottom(){this.scrollTo(Math.ceil(Math.min(this.contentHeight-this.scrollHeight,0)),!1)}}const Jx={debug:!1,icons:"https://res.wx.qq.com/wechatgame/product/minigamelive/2021070746e9c/icons.json",MAX_MESSAGE_LENGTH:20,MAX_USER_LENGTH:20,ENTER_ANIMATE_ID:0,TOAST_ANIMATE_ID:1,USE_TEXT_GROUP:!0,RANK_COLORS:["#E1B363","#B6C8CD","#DFB599","#E0E0E0"]};class Xx extends yT{constructor(e){super(),this.mask=void 0,this.app=void 0,this.animating=!1,this.renderY=0,this.viewerData=[],this.scrollBox=void 0,this.viewerText=void 0,this.giftText=void 0,this.rankBackground=void 0,this.rankList=void 0,this.shareText=void 0,this.tipsText=void 0,this.hasScrollReport=!1,this.overTips=void 0,this.autoTicker=void 0,this.app=e,this.init(),this.visible=!1}init(){this.position.set(Tb.toolWidth,Tb.headerHeight),this.initMask(),this.scrollBox=new Qx({width:Tb.device.width-Tb.toolWidth,height:Tb.device.height-Tb.headerHeight,app:this.app,scrollerOptions:{scrollingX:!1,scrollingY:!0}}),this.scrollBox.on("scrollevent",(()=>{this.hasScrollReport||(this.hasScrollReport=!0,Hx.send({UIArea:3604,PositionID:1,ActionID:21}))}));this.viewerText=new WI(`在线观众 (${this.viewerData.length}人)`,Sb.dataStyle),this.viewerText.position.set(8*Tb.pixelRatio,0),this.giftText=new WI("贡献热度",Sb.dataStyle),this.giftText.position.set(Tb.device.width-Tb.toolWidth-this.giftText.width-8*Tb.pixelRatio,0),this.giftText.cacheAsBitmap=!0,this.tipsText=new WI("暂无在线观众，",Sb.tipsStyle),this.tipsText.position.set(56*Tb.pixelRatio,52*Tb.pixelRatio+0),this.tipsText.visible=!1,this.tipsText.cacheAsBitmap=!0,this.shareText=new WI("邀请朋友观看",Sb.linkStyle),this.shareText.position.set(56*Tb.pixelRatio+this.tipsText.width,52*Tb.pixelRatio+0),this.shareText.visible=!1,this.shareText.cacheAsBitmap=!0,Rx(this.shareText),this.shareText.on("pointertap",(()=>{$x.shareToFriend()})),this.rankBackground=new DI,this.rankBackground.position.set(0,0),this.rankList=new yT,this.rankList.position.set(0,26*Tb.pixelRatio+0),this.scrollBox.content.addChild(this.rankBackground,this.viewerText,this.giftText,this.rankList,this.tipsText,this.shareText),this.addChild(this.scrollBox),kx(this.shareText,"userShare",(()=>!this.app.animating&&this.visible)),this.renderList()}initMask(){const e=new DI;e.beginFill(16777215,1),Ox(e,0,4*Tb.pixelRatio-Tb.headerHeight,Tb.device.width-Tb.toolWidth-4*Tb.pixelRatio,162*Tb.pixelRatio,{tl:4*Tb.pixelRatio,tr:4*Tb.pixelRatio,br:4*Tb.pixelRatio,bl:4*Tb.pixelRatio},{fill:16777215,alpha:1}),e.endFill(),this.addChild(e),this.mask=e,this.mask.scale.y=0}renderRankBackground(){this.rankBackground.clear(),this.rankBackground.beginFill(16777215,.1);let e=50*Tb.pixelRatio;const t=Math.min(Jx.MAX_USER_LENGTH,this.viewerData.length);for(let n=0;n<t;n++)this.rankBackground.drawRect(24*Tb.pixelRatio,e,Tb.device.width-Tb.toolWidth-24*Tb.pixelRatio,1*Tb.pixelRatio),e+=32*Tb.pixelRatio;this.rankBackground.endFill()}renderList(){let e=[];if(this.rankList.children.length>0&&(e=this.rankList.removeChildren()),0===this.viewerData.length)this.tipsText.visible=!0,this.shareText.visible=!0,this.viewerText.visible=!1,this.giftText.visible=!1,this.rankBackground.clear();else{this.renderY=0,e.forEach(((e,t)=>{e.visible=!1,t>this.viewerData.length&&e.destroy({children:!0,texture:!0,baseTexture:!0})}));const t=Math.min(Jx.MAX_USER_LENGTH,this.viewerData.length);for(let n=0;n<t;n++){const t=this.viewerData[n];t.rank=n+1,this.renderItem(t,e[n])}this.tipsText.visible=!1,this.shareText.visible=!1,this.viewerText.visible=!0,this.giftText.visible=!0,this.viewerText.text=`在线观众 (${this.viewerData.length}人)`,this.renderRankBackground(),this.renderTips(),this.scrollBox.setScrollHeight(this.rankList.y+this.rankList.height+16*Tb.pixelRatio)}}renderTips(){this.viewerData.length>Jx.MAX_USER_LENGTH?this.overTips?this.overTips.visible=!0:(this.overTips=new WI(`只展示前${Jx.MAX_MESSAGE_LENGTH}位在线观众，完整列表请进视频号查看。`,Sb.tipStyle),this.overTips.position.set((Tb.device.width-Tb.toolWidth-this.overTips.width)/2,this.rankList.y+this.rankList.height+16*Tb.pixelRatio),this.overTips.cacheAsBitmap=!0,this.scrollBox.content.addChild(this.overTips)):this.overTips&&(this.overTips.visible=!1)}renderItem(e,t){const n=e.amount||0;let i=Jx.RANK_COLORS[3];if(e.rank<4&&n&&(i=Jx.RANK_COLORS[e.rank-1]),Jx.USE_TEXT_GROUP){t?(t.style.groupText=!1,t.text=n,t.visible=!0):t=new WI(n,Sb.contextStyle);const r=[...e.nickname];let{nickname:o}=e;r.length>12&&(o=r.slice(0,12).join("")),t.style.groupText=[{length:`${e.rank}`.length,color:i,paddingLeft:8*Tb.pixelRatio,absolute:!0},{length:o.length,color:"#ffffff",paddingLeft:24*Tb.pixelRatio,absolute:!0},{length:`${n}`.length,color:"#ffffff",paddingLeft:Tb.device.width-Tb.toolWidth-8*Tb.pixelRatio-t.width,absolute:!0}],t.text=`${(n?e.rank:"-")+o+n}`,t.position.set(0,this.renderY),this.rankList.addChild(t)}else{const t=new WI(n?e.rank:"-",Object.assign({},Sb.giftStyle,{fill:i})),r=new WI(e.nickname,Sb.contextStyle),o=new WI(n,Sb.contextStyle);t.position.set(8*Tb.pixelRatio,this.renderY),r.position.set(24*Tb.pixelRatio,this.renderY),o.position.set(Tb.device.width-Tb.toolWidth-8*Tb.pixelRatio-o.width,this.renderY),this.rankList.addChild(t,r,o)}this.renderY+=32*Tb.pixelRatio}updateViewData(e){this.viewerData=e,this.renderList()}show(){var e;this.animating||(this.animating=!0,this.autoTicker&&(clearTimeout(this.autoTicker),this.autoTicker=null),null===(e=this.scrollBox)||void 0===e||e.scrollTo(0),this.alpha=1,this.visible=!0,this.mask&&new nx.Tween(this.mask.scale).to({y:1},500).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.animating=!1})).start(),Hx.send({UIArea:3604,PositionID:0,ActionID:1}))}hide(e=!1){this.animating||(this.animating=!0,e&&new nx.Tween(this).to({alpha:0},250).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.visible=!1})).start(),this.mask&&new nx.Tween(this.mask.scale).to({y:0},500).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.animating=!1,this.visible=!1})).start(),this.autoDestroy())}autoDestroy(){this.autoTicker=setTimeout((()=>{this.rankList.removeChildren().forEach((e=>{e.destroy({children:!0,texture:!0,baseTexture:!0})})),this.autoTicker=null}),5e3)}}class Kx extends yT{constructor(e){super(),this.mask=void 0,this.app=void 0,this.liveData={headerUrl:"https://mmgame.qpic.cn/image/33e09bb06dc27e8aa876d96d003b3a2f1941346190bc1db68f6735bcdecf65f5/0",nickname:"用户昵称"},this.liveIcon=void 0,this.liveName=void 0,this.liveTime=void 0,this.liveTimeIcon=void 0,this.buttonMic=void 0,this.buttonMicRedTex=void 0,this.buttonMicGrayTex=void 0,this.liveTimeTicker=void 0,this._toast=void 0,this.app=e,this.init(),this.initMask(),this.visible=!1}init(){this.setData(),this.position.set(Tb.toolWidth,0);const e=4*Tb.pixelRatio,t=new DI;Ox(t,0,4*Tb.pixelRatio,Tb.device.width-Tb.toolWidth-4*Tb.pixelRatio,Tb.maxSize.height-8*Tb.pixelRatio,{tl:8*Tb.pixelRatio,tr:8*Tb.pixelRatio,br:8*Tb.pixelRatio,bl:8*Tb.pixelRatio},{fill:2894892,alpha:1}),t.beginFill(16777215,.1),t.drawRect(0,e+47*Tb.pixelRatio,Tb.device.width-Tb.toolWidth,1),t.endFill();const n=new DI;if(this.liveIcon=ZC.from(this.liveData.headerUrl||YT.WHITE),this.liveIcon.width=32*Tb.pixelRatio,this.liveIcon.height=32*Tb.pixelRatio,this.liveIcon.position.set(8*Tb.pixelRatio,e+8*Tb.pixelRatio),n.beginFill(16777215,1),n.drawCircle(24*Tb.pixelRatio,e+24*Tb.pixelRatio,16*Tb.pixelRatio),n.endFill(),this.liveIcon.mask=n,Jx.debug){this.liveIcon.interactive=!0;let e=0,t=0;const n=()=>{t&&clearTimeout(t),e++,console.log(e),5===e&&(Zx.emit("liveEnd"),this.liveIcon.off("pointerdown",n)),t=setTimeout((()=>{e=0}),2e3)};this.liveIcon.on("pointerdown",n)}this.liveName=new WI("",Sb.titleStyle),this.liveName.position.set(48*Tb.pixelRatio,e+8*Tb.pixelRatio),this.liveName.text=Px(this.liveData.nickname,this.liveName.style);const i=3*Tb.pixelRatio;this.liveTimeIcon=new DI,this.liveTimeIcon.beginFill(16777215,.5),this.liveTimeIcon.drawCircle(48*Tb.pixelRatio+i,e+30*Tb.pixelRatio+i,i),this.liveTimeIcon.endFill(),this.liveTimeIcon.cacheAsBitmap=!0,this.liveTime=new WI("",Sb.timeStyle),this.liveTime.position.set(58*Tb.pixelRatio,e+26*Tb.pixelRatio),this.liveTime.alpha=.5;const r=new ZC(this.app.images["more/exit.png"]);r.width=70*Tb.pixelRatio,r.height=32*Tb.pixelRatio,r.position.set(Tb.device.width-Tb.toolWidth-80*Tb.pixelRatio,e+8*Tb.pixelRatio),r.hitArea=new ZE(-10*Tb.pixelRatio,-10*Tb.pixelRatio,90*Tb.pixelRatio,52*Tb.pixelRatio);const o=new yT;o.position.set(0*Tb.pixelRatio,e+48*Tb.pixelRatio);const a=4*Tb.pixelRatio,s=12*Tb.pixelRatio,c=0*Tb.pixelRatio,l=64*Tb.pixelRatio,u=58*Tb.pixelRatio,d=new ZC(this.app.images["more/button_share.png"]);d.width=l,d.height=u,d.position.set(a,s);const h=new ZC(this.app.images["more/button_timeline.png"]);h.width=l,h.height=u,h.position.set(a+l+c,s);const p=new ZC(this.app.images["more/button_small.png"]);p.width=l,p.height=u,p.position.set(a+2*(l+c),s),this.buttonMicRedTex=this.app.images["more/button_mic-red.png"],this.buttonMicGrayTex=this.app.images["more/button_mic-gray.png"],this.buttonMic=new ZC(this.buttonMicRedTex),this.buttonMic.width=l,this.buttonMic.height=u,this.buttonMic.position.set(a+3*(l+c),s),o.addChild(h,d,p,this.buttonMic),Rx(h),h.on("pointertap",(()=>{$x.shareToTimeline()})),Rx(d),d.on("pointertap",(()=>{$x.shareToFriend()})),Rx(p),p.on("pointertap",(()=>{$x.minimizeGameLive()})),Rx(r),r.on("pointertap",(()=>{$x.exitGameLive()})),Rx(this.buttonMic),this.buttonMic.on("pointertap",(()=>{this.showToast("麦克风已打开"),$x.getMicState((e=>{const t=!!e.mute;$x.micOp(t,(t=>{if(t.errMsg.indexOf("ok")>-1){!e.mute?(this.buttonMic.texture=this.buttonMicRedTex,this.showToast("麦克风已关闭")):(this.buttonMic.texture=this.buttonMicGrayTex,this.showToast("麦克风已打开"))}}))}))}));const f=new ZC(this.app.images["more/tips.png"]);f.width=268*Tb.pixelRatio,f.height=26*Tb.pixelRatio,f.position.set(0,132*Tb.pixelRatio);const g=new DI;g.beginFill(3355443,.3),g.drawRect(0,0,86*Tb.pixelRatio,38*Tb.pixelRatio),g.hitArea=new ZE(-10*Tb.pixelRatio,-10*Tb.pixelRatio,106*Tb.pixelRatio,58*Tb.pixelRatio),g.endFill(),g.alpha=.3,g.interactive=!0,g.on("pointerup",(()=>{g.alpha=.3})),g.on("pointerdown",(()=>{g.alpha=1})),g.on("pointerupoutside",(()=>{g.alpha=.3})),g.on("pointertap",(()=>{$x.enterGameLiveRoom()})),g.x=172*Tb.pixelRatio,g.y=132*Tb.pixelRatio,this.addChild(t,this.liveName,this.liveTime,this.liveTimeIcon,o,f,r,g),this.liveIcon&&this.addChild(this.liveIcon,n),kx(h,"moreTimeline",(()=>!this.app.animating&&this.visible)),kx(d,"moreShare",(()=>!this.app.animating&&this.visible)),kx(p,"moreSmall",(()=>!this.app.animating&&this.visible)),kx(r,"moreExit",(()=>!this.app.animating&&this.visible)),kx(this.buttonMic,"moreMic",(()=>!this.app.animating&&this.visible)),kx(g,"moreReturn",(()=>!this.app.animating&&this.visible))}setData(){Zx.account&&(this.liveData.headerUrl===Zx.account.headerUrl&&this.liveData.nickname===Zx.account.nickname||(this.liveData=Zx.account,this.liveIcon&&(this.liveIcon.texture=new YT(new FT(this.liveData.headerUrl))),this.liveName&&(this.liveName.text=this.liveData.nickname)))}refreshTime(){const e=Math.round(Date.now()/1e3)-Zx.liveStartTime;let t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=e-3600*t-60*n;t<10&&(t=`0${t}`),n<10&&(n=`0${n}`),i<10&&(i=`0${i}`),this.liveTime.text=`${t}:${n}:${i}`}initMask(){const e=new DI;e.beginFill(16777215,1),e.drawRect(0,0,Tb.device.width-Tb.toolWidth,Tb.device.height),e.endFill(),this.addChild(e),this.mask=e,this.mask.scale.x=0}showToast(e){const t=64*Tb.pixelRatio,n=69*Tb.pixelRatio,i={top:6*Tb.pixelRatio,bottom:6*Tb.pixelRatio,left:12*Tb.pixelRatio,right:12*Tb.pixelRatio},r=4*Tb.pixelRatio,o=Nx({x:t,y:n},e,Sb.toastStyle,i,{fill:1710618,alpha:1},r,this._toast);this._toast||(this._toast=o.labelContainer,this.addChild(this._toast)),Lx(Jx.TOAST_ANIMATE_ID,this._toast)}show(){Hx.send({UIArea:3605,PositionID:0,ActionID:1}),this.alpha=1,this.visible=!0,this.liveTimeFade(),$x.getMicState((e=>{e.mute?this.buttonMic.texture=this.buttonMicRedTex:this.buttonMic.texture=this.buttonMicGrayTex})),this.mask&&new nx.Tween(this.mask.scale).to({x:1},500).easing(nx.Easing.Quadratic.InOut).start(),this.refreshTime()}hide(e=!1){e&&new nx.Tween(this).to({alpha:0},250).easing(nx.Easing.Quadratic.InOut).start(),this.mask&&new nx.Tween(this.mask.scale).to({x:0},500).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.visible=!1,this.liveTimeTicker&&(nx.remove(this.liveTimeTicker),this.liveTimeTicker=null)})).start()}liveTimeFade(){this.liveTimeTicker&&(nx.remove(this.liveTimeTicker),this.liveTimeTicker=null),this.liveTimeIcon.alpha=1,this.liveTimeTicker=new nx.Tween(this.liveTimeIcon).to({alpha:0},500).yoyo(!0).easing(nx.Easing.Quadratic.InOut).repeat(1/0).onRepeat((()=>{this.refreshTime()})).start()}}class eD extends yT{constructor(e){super(),this.mask=void 0,this.app=void 0,this.liveData={headerUrl:"https://mmgame.qpic.cn/image/33e09bb06dc27e8aa876d96d003b3a2f1941346190bc1db68f6735bcdecf65f5/0",nickname:"用户昵称"},this.liveIcon=void 0,this.liveName=void 0,this.app=e,this.init(),this.initMask(),this.visible=!1}init(){this.setData(),this.position.set(Tb.toolWidth,0);const e=4*Tb.pixelRatio,t=new DI;Ox(t,0,4*Tb.pixelRatio,Tb.device.width-Tb.toolWidth-4*Tb.pixelRatio,Tb.maxSize.height-8*Tb.pixelRatio,{tl:8*Tb.pixelRatio,tr:8*Tb.pixelRatio,br:8*Tb.pixelRatio,bl:8*Tb.pixelRatio},{fill:2894892,alpha:1}),t.beginFill(16777215,.1),t.drawRect(0,e+47*Tb.pixelRatio,Tb.device.width-Tb.toolWidth,1),t.endFill();const n=new DI;this.liveIcon=ZC.from(this.liveData.headerUrl||YT.WHITE),this.liveIcon.width=16*Tb.pixelRatio,this.liveIcon.height=16*Tb.pixelRatio,this.liveIcon.position.set(11*Tb.pixelRatio,20*Tb.pixelRatio),n.beginFill(16777215,1),n.drawCircle(19*Tb.pixelRatio,28*Tb.pixelRatio,8*Tb.pixelRatio),n.endFill(),this.liveIcon.mask=n,this.liveName=new WI(this.liveData.nickname,Sb.shareTitleStyle),this.liveName.position.set(31*Tb.pixelRatio,20*Tb.pixelRatio);const i=64*Tb.pixelRatio,r=58*Tb.pixelRatio,o=new ZC(this.app.images["more/button_share.png"]);o.width=i,o.height=r,o.position.set(48*Tb.pixelRatio,80*Tb.pixelRatio);const a=new ZC(this.app.images["more/button_timeline.png"]);a.width=i,a.height=r,a.position.set(156*Tb.pixelRatio,80*Tb.pixelRatio),Rx(a),a.on("pointertap",(()=>{$x.shareToTimeline(!0)})),Rx(o),o.on("pointertap",(()=>{$x.shareToFriend(!0)})),this.addChild(t,this.liveName,o,a),this.liveIcon&&this.addChild(this.liveIcon,n),kx(a,"shareTimeline",(()=>!this.app.animating&&this.visible)),kx(o,"shareShare",(()=>!this.app.animating&&this.visible))}setData(){Zx.account&&(this.liveData.headerUrl===Zx.account.headerUrl&&this.liveData.nickname===Zx.account.nickname||(this.liveData=Zx.account,this.liveIcon&&(this.liveIcon.texture=new YT(new FT(this.liveData.headerUrl))),this.liveName&&(this.liveName.text=this.liveData.nickname)))}initMask(){const e=new DI;e.beginFill(16777215,1),e.drawRect(0,0,Tb.device.width-Tb.toolWidth,Tb.device.height),e.endFill(),this.addChild(e),this.mask=e,this.mask.scale.x=0}show(){Hx.send({UIArea:3606,PositionID:0,ActionID:1}),this.alpha=1,this.visible=!0,this.mask&&new nx.Tween(this.mask.scale).to({x:1},500).easing(nx.Easing.Quadratic.InOut).start()}hide(e=!1){e&&new nx.Tween(this).to({alpha:0},250).easing(nx.Easing.Quadratic.InOut).start(),this.mask&&new nx.Tween(this.mask.scale).to({x:0},500).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.visible=!1})).start()}}class tD extends yT{constructor(e){super(),this.app=void 0,this.newMessageCount=0,this.hasScrollReport=!1,this.scrollBox=void 0,this.enterBox=void 0,this.newMessage=void 0,this.chatBox=void 0,this.overTips=void 0,this.app=e,this.init()}init(){this.scrollBox=new Qx({width:Tb.designSize.width-Tb.toolWidth,height:Tb.designSize.height-Tb.headerHeight,app:this.app,bottomCbk:this.hideNewNessage.bind(this),scrollerOptions:{scrollingX:!1,scrollingY:!0}},!0),this.scrollBox.position.set(Tb.toolWidth,Tb.headerHeight),this.scrollBox._y=2*Tb.pixelRatio,this.scrollBox.on("scrollevent",(()=>{this.hasScrollReport||(this.hasScrollReport=!0,Hx.send({UIArea:3603,PositionID:1,ActionID:21}))})),this.chatBox=new yT,this.scrollBox.content.addChild(this.chatBox),this.enterBox=new yT,this.enterBox.position.set(Tb.toolWidth,Tb.headerHeight+2*Tb.pixelRatio),this.addChild(this.scrollBox,this.enterBox),Hx.send({UIArea:3603,PositionID:0,ActionID:1})}updateMessage(e){e&&(e.msgType===mx.Audience_Join?this.renderEnterMessage(e):this.renderMessage(e))}renderNewMessage(){const e=`${Math.min(this.newMessageCount,Jx.MAX_MESSAGE_LENGTH)}条新消息`,t=Tb.toolWidth+8*Tb.pixelRatio,n=Tb.device.height-20*Tb.pixelRatio-8*Tb.pixelRatio,i={top:6*Tb.pixelRatio,bottom:6*Tb.pixelRatio,left:8*Tb.pixelRatio,right:8*Tb.pixelRatio+12*Tb.pixelRatio+4*Tb.pixelRatio},r={fill:16777215,alpha:1},o=12*Tb.pixelRatio;if(this.newMessage){const a=this.newMessage.children[1],s=this.newMessage.children[2];Nx({x:t,y:n},e,Sb.newMessageStyle,i,r,o,this.newMessage),s.position.x=8*Tb.pixelRatio+a.width+4*Tb.pixelRatio}else{const a=Nx({x:t,y:n},e,Sb.newMessageStyle,i,r,o);this.newMessage=a.labelContainer,Rx(this.newMessage),this.newMessage.on("pointertap",(()=>{this.scrollBox.scrollToBottom()})),this.addChild(this.newMessage),kx(this.newMessage,"chatNew",(()=>!this.app.animating&&this.visible&&this.newMessage.visible));const s=new ZC(this.app.images["icon/arrow-outlined.png"]);s.position.set(8*Tb.pixelRatio+a.labelText.width+4*Tb.pixelRatio,6*Tb.pixelRatio),s.width=12*Tb.pixelRatio,s.height=12*Tb.pixelRatio,this.newMessage.addChild(s);const c=new ZC(YT.EMPTY);c.width=2*this.newMessage.width,c.height=3*this.newMessage.height,c.position.set(-c.width/8,-c.height/2),this.newMessage.addChild(c)}this.newMessage.visible=!0}hideNewNessage(){this.newMessage&&(this.newMessage.visible=!1),this.newMessageCount=0}renderEnterMessage(e){const t=`${e.senderNickName} ${e.content}`,n=8*Tb.pixelRatio,i={top:0,bottom:0,left:8*Tb.pixelRatio,right:8*Tb.pixelRatio},r={fill:3355443,alpha:1},o=12*Tb.pixelRatio;let a;if(this.enterBox.children.length>0)a=this.enterBox.children[0],Nx({x:n,y:0},t,Sb.joinStyle,i,r,o,a);else{a=Nx({x:n,y:0},t,Sb.joinStyle,i,r,o).labelContainer,this.enterBox.addChild(a)}Lx(Jx.ENTER_ANIMATE_ID,a)}renderMessage(e){let t=8*Tb.pixelRatio;const n=!(e.msgType!==mx.ComboLiveReward),i=!(e.msgType!==mx.RewardRankingNotice),r=!!e.rankingPosition,o=!(e.msgType!==mx.First_Notice),a=this.chatBox.children.length>=Jx.MAX_MESSAGE_LENGTH;let s,c,l=0;a?([s]=this.chatBox.children,l=s.contentHeight,s.removeChildren(),this.renderTips()):s=new yT,s.position.set(0,this.scrollBox._y);let u=0;(n||i||r||o)&&(n?c=new ZC(this.app.images["label/label_gift.png"]):o||i?c=new ZC(this.app.images["label/label_notice.png"]):r&&(c=new ZC(this.app.images[`label/label_${e.rankingPosition}.png`])),c&&(c.width=c.width/3*Tb.pixelRatio,c.height=c.height/3*Tb.pixelRatio,c.position.set(t,0),s.addChild(c),s.label=c,t+=c.width+4*Tb.pixelRatio,u=c.width+4*Tb.pixelRatio));let d,h=0;if(d=e.senderNickName&&!n?`${e.senderNickName}：`:e.senderNickName&&n?`${e.senderNickName} `:"",Jx.USE_TEXT_GROUP){let t;if(t=a?s._message:new WI("",Sb.contextStyle),t.style.firstLine=u,t.style.groupText=[{length:d.length,color:"#e0e0e0",paddingLeft:u},{length:(e.content||"").length,color:"#ffffff",firstLine:u}],t.text=d+e.content,t.position.set(8*Tb.pixelRatio,0),s.addChild(t),n){let n;s.gift?(n=s.gift,n.texture=new YT(new FT(e.rewardThumbUrl))):(n=ZC.from(e.rewardThumbUrl||YT.EMPTY),n.width=16*Tb.pixelRatio,n.height=16*Tb.pixelRatio),n.position.set(8*Tb.pixelRatio+t.width,0),s.addChild(n),s.gift=n;const i=`x${e.comboRewardCount||1}`;t.style.groupText.push({length:i.length,color:"#ffffff",paddingLeft:u+16*Tb.pixelRatio}),t.text=d+e.content+i}h=t.height+4*Tb.pixelRatio,s._message=t}else{let i;i=a?s.userName:new WI("",Sb.userNameStyle),i.text=d,i.position.set(t,0),s.addChild(i),s.userName=i,d.length>0&&(t+=i.width),Sb.contextStyle.wordWrapWidth=Tb.device.width-40*Tb.pixelRatio-t;const r=BI.measureText(e.content||"",new kI(Sb.contextStyle));if(r.lines.length>1){const{lines:e}=r,n=e[0],i=e.slice(1).join("");let o,c;a?(o=s.firstRowContent,o.text=n,o.style.wordWrapWidth=Sb.contextStyle.wordWrapWidth):o=new WI(n,Sb.contextStyle),o.position.set(t,0),Sb.contextStyle.wordWrapWidth=Tb.device.width-48*Tb.pixelRatio,a&&s.otherRowContent?(c=s.otherRowContent,c.text=i,c.style.wordWrapWidth=Sb.contextStyle.wordWrapWidth):c=new WI(i,Sb.contextStyle),c.position.set(8*Tb.pixelRatio,Sb.contextStyle.lineHeight),s.addChild(o,c),s.firstRowContent=o,s.otherRowContent=c,h=o.height+c.height+4*Tb.pixelRatio}else{const i=new WI(e.content||"",Sb.contextStyle);if(i.position.set(t,0),s.addChild(i),s.firstRowContent=i,h=i.height+4*Tb.pixelRatio,t+=i.width,n){let n,i;s.gift?(n=s.gift,n.texture=new YT(new FT(e.rewardThumbUrl)),i=s.giftText):(n=ZC.from(e.rewardThumbUrl||YT.EMPTY),i=new WI("",Sb.contextStyle)),n.width=16*Tb.pixelRatio,n.height=16*Tb.pixelRatio,n.position.set(t,0),i.text=`x${e.comboRewardCount||1}`,i.position.set(t+n.width,0),s.addChild(n,i),s.gift=n,s.giftText=i}}}s.contentHeight=h,this.chatBox.addChild(s),a&&(this.chatBox.children.forEach((e=>{e.y-=l})),this.scrollBox._y-=l),this.scrollBox._y+=h;const p=this.scrollBox.isBottom();this.scrollBox.setScrollHeight(this.chatBox.height+8*Tb.pixelRatio),p||this.app.locked?this.scrollBox.scrollToBottom():(this.newMessageCount++,this.renderNewMessage(),this.scrollBox.content.y=Math.min(this.scrollBox.content.y+l,0))}renderTips(){this.overTips||(this.overTips=new WI(`只展示最新的${Jx.MAX_MESSAGE_LENGTH}条消息，更多请进视频号查看`,Sb.tipStyle),this.overTips.position.set((Tb.device.width-Tb.toolWidth-this.overTips.width)/2,-8*Tb.pixelRatio-this.overTips.height),this.overTips.cacheAsBitmap=!0,this.scrollBox.content.addChild(this.overTips))}lock(){this.hideNewNessage();const e={height:Tb.designSize.height-Tb.headerHeight};new nx.Tween(e).to({height:Tb.lockSize.height-Tb.headerHeight},500).easing(nx.Easing.Quadratic.InOut).onUpdate((()=>{this.scrollBox.updateContentHeight(e.height),this.scrollBox.setScrollHeight(this.chatBox.height+8*Tb.pixelRatio),this.scrollBox.scrollToBottom()})).start()}unlock(){const e={height:Tb.lockSize.height-Tb.headerHeight};new nx.Tween(e).to({height:Tb.designSize.height-Tb.headerHeight},500).easing(nx.Easing.Quadratic.InOut).onUpdate((()=>{this.scrollBox.updateContentHeight(e.height),this.scrollBox.setScrollHeight(this.chatBox.height+8*Tb.pixelRatio),this.scrollBox.scrollToBottom()})).start()}disableInteractive(){this.scrollBox.interactive=!1}enableInteractive(){this.scrollBox.interactive=!0}}class nD extends yT{constructor(e,t={}){super(),this.needBg=!1,this.volumnBg=void 0,this._mute=!1,this.app=void 0,this.micMask=void 0,this.volumnGraphics=void 0,this._volumn=void 0,this.bgOpen=void 0,this.bgClose=void 0,this.volumnDefaultY=0,this.muteTicker=void 0,this.volumnTicker=void 0,this.app=e,this.init(t)}init(e){const t=32*Tb.pixelRatio,n=32*Tb.pixelRatio,{width:i=t,needBg:r=!1}=e,o=i/t;this.needBg=r;const a=t*o,s=n*o;this.bgOpen=new ZC(this.app.images["mic/open.png"]),this.bgOpen.width=a,this.bgOpen.height=s,this.bgClose=new ZC(this.app.images["mic/close.png"]),this.bgClose.width=a,this.bgClose.height=s,this.bgClose.visible=!1,this.micMask=new ZC(this.app.images["mic/mask.png"]),this.micMask.width=8*Tb.pixelRatio*o,this.micMask.height=16*Tb.pixelRatio*o,this.micMask.position.set(12*Tb.pixelRatio*o,4*Tb.pixelRatio*o),this.volumnDefaultY=4*Tb.pixelRatio*o+this.micMask.height,this.volumnGraphics=new ZC(YT.WHITE),this.volumnGraphics.position.set(12*Tb.pixelRatio*o,this.volumnDefaultY),this.volumnGraphics.width=this.micMask.width,this.volumnGraphics.height=this.micMask.height,this.volumnGraphics.mask=this.micMask,this.addChild(this.bgOpen,this.bgClose,this.volumnGraphics,this.micMask),this.volumn=0}calRenderHeight(e){if(e<10)return 0;return(Math.sin(Math.PI/100*e-Math.PI/2)/2+.5)*this.micMask.height}get volumn(){return this._volumn}set volumn(e){const t=vb(e,0,100);if(t===this.volumn)return;this._volumn=t;const n=this.calRenderHeight(t);0!==n?(this.volumnStopAnimate(),this.volumnGraphics.position.y=this.volumnDefaultY-n):this.volumnStartAnimate()}get mute(){return this._mute}set mute(e){e?(this.micMask.visible=!1,this.volumnGraphics.visible=!1,this.bgOpen.visible=!1,this.bgClose.visible=!0,this.muteStartAnimate()):(this.micMask.visible=!0,this.volumnGraphics.visible=!0,this.volumn=0,this.bgOpen.visible=!0,this.bgClose.visible=!1,this.muteStopAnimate()),this._mute=e}muteStopAnimate(){this.muteTicker&&(nx.remove(this.muteTicker),this.muteTicker=null)}muteStartAnimate(){this.muteStopAnimate(),this.bgClose.alpha=1,this.muteTicker=new nx.Tween(this.bgClose).to({alpha:0},1e3).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.muteTicker=new nx.Tween(this.bgClose).to({alpha:1},500).easing(nx.Easing.Quadratic.Out).onComplete((()=>{this.muteStartAnimate()})).start()})).start()}volumnStopAnimate(){this.volumnTicker&&(nx.remove(this.volumnTicker),this.volumnTicker=null)}volumnStartAnimate(){this.volumnTicker||(this.volumnGraphics.position.y=this.volumnDefaultY,this.volumnTicker=new nx.Tween(this.volumnGraphics.position).to({y:this.volumnDefaultY-.2*this.micMask.height},400).yoyo(!0).easing(nx.Easing.Quadratic.InOut).repeat(1/0).start())}}class iD extends yT{constructor(e){super(),this.app=void 0,this._height=40*Tb.pixelRatio,this.dataBackground=void 0,this.dataText=void 0,this.dataArrow=void 0,this.listText=void 0,this.touchStartX=0,this.touchStartY=0,this.mic=void 0,this.micStateChangeHandler=void 0,this.cacheList=[],this.app=e,this.init()}init(){this.position.set(Tb.toolWidth,0),this.interactive=!0,this.touchStartX=0,this.touchStartY=0,this.on("pointerdown",(()=>{this.touchStartX=ox.params.currentLeft,this.touchStartY=ox.params.currentTop,this.dataArrow.alpha=.5})),this.on("pointerup",(()=>{this.dataArrow.alpha=1})),this.on("pointerupoutside",(()=>{this.dataArrow.alpha=1})),this.on("pointertap",(()=>{Math.abs(ox.params.currentLeft-this.touchStartX)<20&&Math.abs(ox.params.currentTop-this.touchStartY)<20&&this.app.toggleGiftView()})),this.dataBackground=new DI,Ox(this.dataBackground,0,4*Tb.pixelRatio,Tb.device.width-Tb.toolWidth-4*Tb.pixelRatio,this._height,{tl:8*Tb.pixelRatio,tr:8*Tb.pixelRatio,br:8*Tb.pixelRatio,bl:8*Tb.pixelRatio},{fill:2894892,alpha:1}),this.dataText=new WI("",Sb.dataStyle),this.dataText.position.set(8*Tb.pixelRatio,16*Tb.pixelRatio),this.listText=new WI("",Sb.listStyle),this.listText.position.set(8*Tb.pixelRatio,24*Tb.pixelRatio),this.listText.visible=!1,this.mic=new nD(this.app,{width:12*Tb.pixelRatio,needBg:!0}),this.mic.visible=!1,this.dataArrow=new ZC(this.app.images["icon/arrow.png"]),this.dataArrow.anchor.set(.5),this.dataArrow.width=16*Tb.pixelRatio,this.dataArrow.height=8*Tb.pixelRatio,this.dataArrow.position.set(Tb.device.width-Tb.toolWidth-24*Tb.pixelRatio+8*Tb.pixelRatio,22*Tb.pixelRatio),this.addChild(this.dataBackground,this.dataText,this.listText,this.mic,this.dataArrow),kx(this,"infobar",(()=>this.visible&&!this.app.locked&&!this.app.animating)),this.updateData()}updateMicPosition(){this.listText.visible?this.mic.position.set(this.dataText.position.x+this.dataText.width+4*Tb.pixelRatio,10*Tb.pixelRatio):this.mic.position.set(this.dataText.position.x+this.dataText.width+4*Tb.pixelRatio,18*Tb.pixelRatio)}updateViewData(e=null){if(e&&(this.cacheList=e),this.cacheList.length>0&&!this.dataArrow.rotation){this.dataText.position.set(8*Tb.pixelRatio,8*Tb.pixelRatio),this.listText.visible=!0;let e="";const t=[];this.cacheList.forEach(((n,i)=>{const r=n.amount||0;let o=Jx.RANK_COLORS[3];i<4&&r&&(o=Jx.RANK_COLORS[i]);const a=[...n.nickname];let{nickname:s}=n;a.length>6&&(s=a.slice(0,6).join("")),e+=`• ${s} `,t.push({length:`${s}`.length+3,color:o})})),this.listText.style.groupText=t,this.listText.text=Px(e,this.listText.style)}else this.dataText.position.set(8*Tb.pixelRatio,16*Tb.pixelRatio),this.listText.visible=!1;this.updateMicPosition()}updateData(){try{this.dataText&&this.dataText.style||(this.dataText.style=new kI(Sb.dataStyle))}catch(e){}this.dataText.text=Px(Zx.roomInfo,this.dataText.style),this.updateMicPosition()}micStateChange(e){new nx.Tween(this.mic).to({volumn:e.micVolume},200).easing(nx.Easing.Quadratic.InOut).start()}show(){this.dataArrow.rotation=Math.PI,this.updateViewData(),new nx.Tween(this).to({_height:162*Tb.pixelRatio},500).easing(nx.Easing.Quadratic.InOut).onUpdate((()=>{this.dataBackground.clear(),Ox(this.dataBackground,0,4*Tb.pixelRatio,Tb.device.width-Tb.toolWidth-4*Tb.pixelRatio,this._height,{tl:8*Tb.pixelRatio,tr:8*Tb.pixelRatio,br:8*Tb.pixelRatio,bl:8*Tb.pixelRatio},{fill:2894892,alpha:1})})).start()}hide(){this.dataArrow.rotation=0,new nx.Tween(this).to({_height:40*Tb.pixelRatio},500).easing(nx.Easing.Quadratic.InOut).onUpdate((()=>{this.dataBackground.clear(),Ox(this.dataBackground,0,4*Tb.pixelRatio,Tb.device.width-Tb.toolWidth-4*Tb.pixelRatio,this._height,{tl:8*Tb.pixelRatio,tr:8*Tb.pixelRatio,br:8*Tb.pixelRatio,bl:8*Tb.pixelRatio},{fill:2894892,alpha:1})})).onComplete((()=>{this.updateViewData()})).start()}lock(){new nx.Tween(this.dataBackground).to({alpha:0},250).easing(nx.Easing.Quadratic.InOut).start(),new nx.Tween(this.dataArrow).to({alpha:0},250).easing(nx.Easing.Quadratic.InOut).start(),this.dataText.style.wordWrapWidth-=this.mic.width+4*Tb.pixelRatio,this.updateData(),this.mic.visible=!0,$x.getMicState((e=>{e.mute?this.mic.mute=!0:this.mic.mute=!1})),this.micStateChangeHandler||(this.micStateChangeHandler=this.micStateChange.bind(this)),Zx.on("micStateChange",this.micStateChangeHandler),new nx.Tween(this.position).delay(500).to({x:2*Tb.toolWidth},500).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.dataBackground.visible=!1,this.dataArrow.visible=!1})).start()}unlock(){new nx.Tween(this.position).to({x:Tb.toolWidth},500).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.dataBackground.visible=!0,this.dataArrow.visible=!0,new nx.Tween(this.dataBackground).to({alpha:1},250).easing(nx.Easing.Quadratic.InOut).start(),new nx.Tween(this.dataArrow).to({alpha:1},250).easing(nx.Easing.Quadratic.InOut).start()})).start(),this.dataText.style.wordWrapWidth+=this.mic.width+4*Tb.pixelRatio,this.updateData(),this.micStateChangeHandler||(this.micStateChangeHandler=this.micStateChange.bind(this)),Zx.off("micStateChange",this.micStateChangeHandler),this.mic.visible=!1}}class rD extends yT{constructor(e){super(),this.app=void 0,this.locked=!1,this.animating=!1,this.lock_up=void 0,this.background=void 0,this.lock_down=void 0,this.name="Lock",this.color=255,this.app=e,this.init()}init(){this.background=new ZC(this.app.images["tool/lock-background.png"]),this.lock_up=new ZC(this.app.images["tool/lock-up.png"]),this.lock_down=new ZC(this.app.images["tool/lock-down.png"]),this.background.width=32*Tb.pixelRatio,this.background.height=32*Tb.pixelRatio,this.background.alpha=0,this.lock_up.width=6*Tb.pixelRatio,this.lock_up.height=6*Tb.pixelRatio,this.lock_up.position.set(8*Tb.pixelRatio,9*Tb.pixelRatio),this.lock_up.tint=16777215,this.lock_down.width=10*Tb.pixelRatio,this.lock_down.height=8*Tb.pixelRatio,this.lock_down.position.set(11*Tb.pixelRatio,14*Tb.pixelRatio),this.lock_down.tint=16777215,this.addChild(this.background,this.lock_up,this.lock_down)}unlock(){this.locked=!1,this.animating=!0,new nx.Tween(this.background).to({alpha:0},250).easing(nx.Easing.Quadratic.InOut).start(),new nx.Tween(this).to({color:255},250).easing(nx.Easing.Quadratic.InOut).onUpdate((()=>{this.color=Math.round(this.color),this.lock_up.tint=jE([this.color/255,this.color/255,this.color/255]),this.lock_down.tint=jE([this.color/255,this.color/255,this.color/255])})).start(),new nx.Tween(this.lock_up.position).to({y:9*Tb.pixelRatio},100).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{new nx.Tween(this.lock_up.position).to({x:8*Tb.pixelRatio},150).easing(nx.Easing.Quadratic.InOut).start()})).start(),new nx.Tween(this.position).to({x:0},500).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.animating=!1})).start()}lock(){this.locked=!0,this.animating=!0,new nx.Tween(this.background).to({alpha:1},250).easing(nx.Easing.Quadratic.InOut).start(),new nx.Tween(this).to({color:128},250).easing(nx.Easing.Quadratic.InOut).onUpdate((()=>{this.color=Math.round(this.color),this.lock_up.tint=jE([this.color/255,this.color/255,this.color/255]),this.lock_down.tint=jE([this.color/255,this.color/255,this.color/255])})).start(),new nx.Tween(this.lock_up.position).to({x:13*Tb.pixelRatio},150).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{new nx.Tween(this.lock_up.position).to({y:10*Tb.pixelRatio},100).easing(nx.Easing.Quadratic.InOut).start()})).start(),new nx.Tween(this.position).delay(500).to({x:38*Tb.pixelRatio},500).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.animating=!1})).start()}}class oD extends yT{constructor(e){super(),this.app=void 0,this.toolLock=void 0,this.toolMore=void 0,this.toolShare=void 0,this._textureBack=void 0,this._textureMore=void 0,this._textureShare=void 0,this.touchStartX=0,this.touchStartY=0,this.app=e,this.init()}init(){this.toolLock=new rD(this.app),Rx(this.toolLock),this.touchStartX=0,this.touchStartY=0,this.toolLock.position.set(0,8*Tb.pixelRatio),this.toolLock.on("pointerdown",(()=>{this.touchStartX=ox.params.currentLeft,this.touchStartY=ox.params.currentTop}));let e=0,t=0;this.toolLock.on("pointertap",(()=>{e++,Math.abs(ox.params.currentLeft-this.touchStartX)<20&&Math.abs(ox.params.currentTop-this.touchStartY)<20&&(this.app.toggleLock(),e>=2&&this.app.autoShowGiftView()),t&&clearTimeout(t),t=setTimeout((()=>{e=0,t=0}),300)})),this._textureMore=this.app.images["tool/more.png"],this._textureBack=this.app.images["tool/back.png"],this._textureShare=this.app.images["tool/share.png"],this.toolMore=new ZC(this._textureMore),this.toolMore.width=32*Tb.pixelRatio,this.toolMore.height=32*Tb.pixelRatio,this.toolMore.position.set(0,56*Tb.pixelRatio),Rx(this.toolMore),this.toolMore.on("pointertap",(()=>{this.app.toggleMoreView()})),this.toolShare=new ZC(this._textureShare),this.toolShare.width=32*Tb.pixelRatio,this.toolShare.height=32*Tb.pixelRatio,this.toolShare.hitArea=new ZE(-10*Tb.pixelRatio,-10*Tb.pixelRatio,52*Tb.pixelRatio,52*Tb.pixelRatio),this.toolShare.position.set(0,104*Tb.pixelRatio),Rx(this.toolShare),this.toolShare.on("pointertap",(()=>{this.app.toggleShareView()})),this.addChild(this.toolLock,this.toolMore,this.toolShare),kx(this.toolLock,"toolLock",(()=>!this.app.animating&&!this.app.locked)),kx({x:this.toolLock.x+38*Tb.pixelRatio,y:this.toolLock.y,width:this.toolLock.width,height:this.toolLock.height},"toolUnLock",(()=>!this.app.animating&&this.app.locked)),kx(this.toolMore,"toolMore",(()=>!this.app.animating&&!this.app.locked)),kx(this.toolShare,"toolShare",(()=>!this.app.animating&&!this.app.locked))}openMore(){this.toolMore.texture=this._textureBack}closeMore(){this.toolMore.texture=this._textureMore}openShare(){this.toolShare.texture=this._textureBack}closeShare(){this.toolShare.texture=this._textureShare}lock(){this.toolLock.lock(),this.toolMore.interactive=!1,new nx.Tween(this.toolMore).to({alpha:0},250).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.toolMore.visible=!1})).start(),this.toolShare.interactive=!1,new nx.Tween(this.toolShare).to({alpha:0},250).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.toolShare.visible=!1})).start()}unlock(){this.toolLock.unlock(),this.toolMore.interactive=!0,new nx.Tween(this.toolMore).delay(500).onStart((()=>{this.toolMore.visible=!0})).to({alpha:1},250).easing(nx.Easing.Quadratic.InOut).start(),this.toolShare.interactive=!0,new nx.Tween(this.toolShare).delay(500).onStart((()=>{this.toolShare.visible=!0})).to({alpha:1},250).easing(nx.Easing.Quadratic.InOut).start()}}const aD=[{nickname:"中",amount:55555},{nickname:"中文中中文中中文中中文中中文中中文中中文中中文中中文中",amount:0},{nickname:"123231",amount:0},{nickname:"👿👿👿",amount:0},{nickname:"👿👿",amount:0}];class sD{constructor(e,t){this.locked=!1,this.images=void 0,this.lockAnimating=!1,this.animating=!1,this.view=void 0,this.chatView=void 0,this.giftView=void 0,this.moreView=void 0,this.shareView=void 0,this.infobar=void 0,this.toolbar=void 0,this.background=void 0,this.autoLockTicker=0,this.msgListenerFn=void 0,this.roomListenerFn=void 0,this.autoShowGift=!1,this.roomList=[],e&&e.textures&&(this.images=e.textures,this.view=t,this.init(),ox.setAsUnLock(),this.autoLock())}init(){if(this.view){if(this.view.x=Tb.padding.left*Tb.pixelRatio,this.view.y=Tb.padding.top*Tb.pixelRatio,this.background=new DI,this.renderBackground(),this.toolbar=new oD(this),this.infobar=new iD(this),this.chatView=new tD(this),this.giftView=new Xx(this),this.moreView=new Kx(this),this.shareView=new eD(this),this.view.addChild(this.background,this.chatView,this.infobar,this.giftView,this.toolbar,this.moreView,this.shareView),Zx.account){const e={msgType:mx.First_Notice,content:Zx.account.joinLiveTips,comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:""};this.updateMessage(e)}this.msgListenerFn=e=>{e.forEach((e=>{this.updateMessage(e)}))},this.roomListenerFn=()=>{var e;null===(e=this.infobar)||void 0===e||e.updateData()},Zx.on("msgListChange",this.msgListenerFn),Zx.on("roomInfoChange",this.roomListenerFn),Zx.on("roomListChange",(()=>{this.getCurrentRoomMemberInfo()})),Hx.send({UIArea:0,PositionID:0,ActionID:1,OpType:1}),this.getCurrentRoomMemberInfo()}}autoLock(){if(!this.view)return;this.autoLockTicker=setTimeout((()=>{Hx.send({UIArea:0,PositionID:3,ActionID:3}),this.lock()}),3e3);const e=()=>{this.view&&(this.view.interactive=!1,this.autoLockTicker&&(clearTimeout(this.autoLockTicker),this.autoLockTicker=0),Hx.send({UIArea:0,PositionID:3,ActionID:7}),this.view.off("pointerdown",e))};this.view.interactive=!0,this.view.on("pointerdown",e)}renderBackground(){this.background&&(this.background.clear(),this.background.beginFill(0,.9),this.background.drawRoundedRect(0,0,Tb.device.width,Tb.device.height,12*Tb.pixelRatio),this.background.beginFill(16777215,.25),this.background.drawRoundedRect(0,0,Tb.device.width,Tb.device.height,12*Tb.pixelRatio),this.background.endFill())}updateMessage(e){var t;null===(t=this.chatView)||void 0===t||t.updateMessage(e)}autoShowGiftView(){this.autoShowGift=!0}toggleGiftView(){var e;this.locked||(null!==(e=this.giftView)&&void 0!==e&&e.visible?this.closeGiftView():this.openGiftView())}getCurrentRoomMemberInfo(){if(Jx.debug)return this.roomList=aD,void this.renderRoomList();Zx.getCurrentRoomMemberInfo().then((()=>{this.roomList=Zx.liveMemberList,this.renderRoomList()}))}renderRoomList(){this.giftView&&this.giftView.visible&&this.giftView.updateViewData(this.roomList),this.infobar&&this.infobar.visible&&this.infobar.updateViewData(this.roomList)}openGiftView(){var e,t,n;this.animating||(this.animating=!0,null===(e=this.chatView)||void 0===e||e.disableInteractive(),Hx.send({UIArea:3602,PositionID:3,ActionID:2,OpType:3}),setTimeout((()=>{this.animating=!1,this.chatView&&(this.chatView.visible=!1)}),500),null===(t=this.infobar)||void 0===t||t.show(),null===(n=this.giftView)||void 0===n||n.show(),this.getCurrentRoomMemberInfo())}closeGiftView(){var e,t,n;this.animating||(this.animating=!0,null===(e=this.chatView)||void 0===e||e.enableInteractive(),Hx.send({UIArea:3602,PositionID:3,ActionID:2,OpType:7}),this.chatView&&(this.chatView.visible=!0),setTimeout((()=>{this.animating=!1}),500),null===(t=this.infobar)||void 0===t||t.hide(),null===(n=this.giftView)||void 0===n||n.hide(this.locked))}toggleMoreView(){!this.locked&&this.moreView&&this.shareView&&(this.moreView.visible?this.closeMoreView():this.openMoreView())}openMoreView(){var e,t;!this.animating&&this.view&&this.moreView&&(null!==(e=this.shareView)&&void 0!==e&&e.visible&&this.closeShareView(),this.animating=!0,this.view.addChild(this.moreView),null===(t=this.toolbar)||void 0===t||t.openMore(),this.moreView.show(),Hx.send({UIArea:3602,PositionID:2,ActionID:2,OpType:3}),Zx.getRoomInfo(),setTimeout((()=>{this.animating=!1,this.chatView&&(this.chatView.visible=!1),this.infobar&&(this.infobar.visible=!1)}),500))}closeMoreView(){var e,t;this.animating||(this.animating=!0,null===(e=this.toolbar)||void 0===e||e.closeMore(),this.infobar&&(this.infobar.visible=!0),null===(t=this.moreView)||void 0===t||t.hide(this.locked),Hx.send({UIArea:3602,PositionID:2,ActionID:2,OpType:7}),this.chatView&&this.giftView&&!this.giftView.visible&&(this.chatView.visible=!0),setTimeout((()=>{this.animating=!1}),500))}toggleShareView(){!this.locked&&this.shareView&&this.moreView&&(this.shareView.visible?this.closeShareView():this.openShareView())}closeShareView(){var e,t;this.animating||(this.animating=!0,null===(e=this.toolbar)||void 0===e||e.closeShare(),this.infobar&&(this.infobar.visible=!0),null===(t=this.shareView)||void 0===t||t.hide(this.locked),Hx.send({UIArea:3602,PositionID:5,ActionID:2,OpType:7}),this.chatView&&this.giftView&&!this.giftView.visible&&(this.chatView.visible=!0),setTimeout((()=>{this.animating=!1}),500))}openShareView(){var e,t;!this.animating&&this.view&&this.shareView&&(null!==(e=this.moreView)&&void 0!==e&&e.visible&&this.closeMoreView(),this.animating=!0,this.view.addChild(this.shareView),null===(t=this.toolbar)||void 0===t||t.openShare(),this.shareView.show(),Hx.send({UIArea:3602,PositionID:5,ActionID:2,OpType:3}),Zx.getRoomInfo(),setTimeout((()=>{this.animating=!1,this.chatView&&(this.chatView.visible=!1),this.infobar&&(this.infobar.visible=!1)}),500))}toggleLock(){this.locked?this.unlock():this.lock()}lock(){var e,t,n,i,r,o;this.lockAnimating||this.animating||this.locked||(this.lockAnimating=!0,this.locked=!0,null!==(e=this.giftView)&&void 0!==e&&e.visible&&(this.animating=!1,this.closeGiftView()),null!==(t=this.moreView)&&void 0!==t&&t.visible&&(this.animating=!1,this.closeMoreView()),null!==(n=this.shareView)&&void 0!==n&&n.visible&&(this.animating=!1,this.closeShareView()),null===(i=this.toolbar)||void 0===i||i.lock(),new nx.Tween(this.background).to({alpha:0},250).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.background&&(this.background.visible=!1)})).start(),null===(r=this.infobar)||void 0===r||r.lock(),null===(o=this.chatView)||void 0===o||o.lock(),ox.setAsLock(),Hx.send({UIArea:3602,PositionID:1,ActionID:2,OpType:7}),setTimeout((()=>{this.lockAnimating=!1}),1e3))}unlock(){var e,t,n;this.lockAnimating||this.animating||!this.locked||(this.lockAnimating=!0,this.autoShowGift=!1,null===(e=this.toolbar)||void 0===e||e.unlock(),null===(t=this.infobar)||void 0===t||t.unlock(),null===(n=this.chatView)||void 0===n||n.unlock(),setTimeout((()=>{this.background&&(this.background.visible=!0,new nx.Tween(this.background).to({alpha:1},250).easing(nx.Easing.Quadratic.InOut).onComplete((()=>{this.lockAnimating=!1,this.locked=!1})).start(),Hx.send({UIArea:3602,PositionID:1,ActionID:2,OpType:3}),ox.setAsUnLock(),this.autoShowGift&&(this.autoShowGift=!1,this.openGiftView(),Hx.send({UIArea:3602,PositionID:1,ActionID:30,OpType:3})))}),500))}destroy(){var e;this.msgListenerFn=null,this.roomListenerFn=null,null===(e=this.view)||void 0===e||e.destroy({children:!0,texture:!0,baseTexture:!0}),WE(),this.chatView=null,this.giftView=null,this.moreView=null,this.infobar=null,this.toolbar=null,this.background=null,this.view=null,this.autoLockTicker&&(clearTimeout(this.autoLockTicker),this.autoLockTicker=0)}}const cD=[{msgType:mx.Audience_Comment,content:"衣服不错，是去年活动得的吧测试字数超过1行的情况衣服不错，是去年活动得的吧测试字数超过1行的情况衣服不错，是去年活动得的吧测试字数超过1行的情况",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:1,senderHeadImgUrl:"",senderNickName:"胖虎sada达萨达"},{msgType:mx.Audience_Comment,content:"衣服不错是去年活动得的吧测试字数超过新行的情况现网",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:2,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.ComboLiveReward,content:"送出爱心",comboRewardCount:1,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:"胖虎",rewardThumbUrl:"https://mmgame.qpic.cn/image/7d3eb2104d85cc5ad493b035363597629809ce2deefc6ade01dcd9f3a88f20b7/0"},{msgType:mx.ComboLiveReward,content:"送出爱心",comboRewardCount:2,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:"胖虎",rewardThumbUrl:"https://mmgame.qpic.cn/image/7d3eb2104d85cc5ad493b035363597629809ce2deefc6ade01dcd9f3a88f20b7/0"},{msgType:mx.ComboLiveReward,content:"送出爱心",comboRewardCount:3,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:"胖虎",rewardThumbUrl:"https://mmgame.qpic.cn/image/7d3eb2104d85cc5ad493b035363597629809ce2deefc6ade01dcd9f3a88f20b7/0"},{msgType:mx.Audience_Join,content:"来了",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:"袁梓民"},{msgType:mx.RewardRankingNotice,content:"成为本场热度第1名",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:1,senderHeadImgUrl:"",senderNickName:"袁梓民"},{msgType:mx.Audience_Comment,content:"衣服不错，是去年活动得的吧测试字数超过1行的情况",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Comment,content:"不去捡空投吗？",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:"小明"},{msgType:mx.Audience_Comment,content:"不去捡空投吗？",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Join,content:"来了",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Comment,content:"来了呀sdds",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:1,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.ComboLiveReward,content:"送出爱心",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:"胖虎",rewardThumbUrl:"https://mmgame.qpic.cn/image/7d3eb2104d85cc5ad493b035363597629809ce2deefc6ade01dcd9f3a88f20b7/0"},{msgType:mx.Audience_Comment,content:"嘿嘿",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:2,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Comment,content:"嘿嘿",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:3,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Comment,content:"嘿嘿",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:4,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Comment,content:"嘿嘿",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:5,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Comment,content:"嘿嘿",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:6,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Comment,content:"嘿嘿",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:7,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Comment,content:"嘿嘿",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:8,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Comment,content:"嘿嘿",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:9,senderHeadImgUrl:"",senderNickName:"胖虎"},{msgType:mx.Audience_Comment,content:"嘿嘿",comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:10,senderHeadImgUrl:"",senderNickName:"胖虎"}];let lD,uD=0,dD=0;class hD{constructor(){this.startMessage=void 0,this.stopMessage=void 0,this.app=null,this.renderer=null,this.tickerFunc=void 0,this.images=void 0,this.loaded=!1,this.loadRetryCount=3,this.ready=!1,this.inited=!1}load(){if(this.loaded)return;this.loaded=!0,gx();const e=new WC;e.add("icons",Jx.icons).load((t=>{if(!t.resources.icons||!t.resources.icons_image||t.resources.icons&&t.resources.icons.error)return this.loadRetryCount-=1,this.loaded=!1,void(this.loadRetryCount>0&&this.load());this.images=t.resources.icons,this.ready&&this.init(),e.destroy()}))}init(){if(this.ready,this.ready=!0,!this.images)return void this.load();if(this.inited)return;this.inited=!0;const{stage:e}=_x();this.app=new sD(this.images,e),Jx.debug&&this.testMessage()}testPixels(e){if(console.log("testPixels"),this.app&&!this.app.locked){dD++;const{gl:t}=e,n=new Uint8Array(400);t.readPixels(t.drawingBufferWidth-80,t.drawingBufferHeight-80,10,10,t.RGBA,t.UNSIGNED_BYTE,n);const i=n.filter(((e,t)=>(t+1)%4==0&&0!==e));if(console.log("解锁状态下不透明度占比：",i.length,n.length/4,i.length/(n.length/4)*100+"%"),i.length/(n.length/4)<.8&&(uD++,uD>=4))return uD=0,dD=0,void Zx.emit("liveReload")}dD<10&&setTimeout((()=>{this.testPixels(e)}),200)}testMessage(){const e=cD;let t;this.startMessage=n=>{let i=0;t=setInterval((()=>{var t;const n=e[i++%e.length];null===(t=this.app)||void 0===t||t.updateMessage(n),Zx.gameLiveInfoEventHandler({currLikeCount:Math.round(1e3*Math.random()),currOnlineCount:Math.round(1e3*Math.random()),liveId:Math.round(1e3*Math.random()),msgList:[],totalRewardCount:Math.round(1e3*Math.random()),totalViewCount:Math.round(1e3*Math.random())})}),n)},this.stopMessage=()=>{clearInterval(t)},this.startMessage(2e3)}reload(){this.destroy(),setTimeout((()=>{this.load(),this.init()}),1e3)}destroy(){this.stopMessage&&this.stopMessage(),sx&&cx&&(sx.remove(cx),sx.destroy(),sx=null,cx=null,dx=0),lx&&lx.view&&(lx.destroy(),lx=null),this.app&&(this.app.destroy(),this.app=null),ax&&(ax.remove(),ax=null),nx.removeAll(),Zx.destroy(),this.inited=!1,this.loaded=!1,this.images=void 0,this.ready=!1,this.loadRetryCount=3}}s.Z.onReady((()=>{Cb().then((()=>{const e=new hD;Zx.on("livePreStart",(()=>{e.load()})),Zx.on("liveReload",(()=>{e.reload()})),Jx.debug&&(e.load(),e.init()),Zx.on("liveStart",(()=>{e.loaded||e.load(),e.init()})),Zx.on("liveEnd",(()=>{Object.keys(xx).forEach((e=>{delete xx[e]})),e.destroy()}))}))})),function(e){e[e.none=0]="none",e[e.iconMore=1]="iconMore",e[e.gameMore=2]="gameMore",e[e.iconOnly=3]="iconOnly"}(lD||(lD={}));const pD=new Vx;function fD(e,t){pD.send({SceneID:14,UIArea:1401,PositionID:e,ActionID:1,Object:t,SourceID:1301})}function gD(e,t){pD.send({SceneID:14,UIArea:1401,PositionID:e,ActionID:6,Object:t,SourceID:1301})}let _D,mD;function yD(){return new Promise((e=>{_D||(_D=(0,ve.xI)()),e(_D)}))}function vD(){return mD||(mD=(0,wi.z)()),mD}const AD=(0,op.Fr)((0,er.Ce)(!1,"webapi_game_ad_report")),bD=(0,op.Fr)(Ae.getNetworkType),wD=1,ED=2,TD=3,SD=1,CD=2,ID=3,xD=1,DD=2,OD=3;let PD=null;function RD(e){return(PD?Promise.resolve(PD):GD().then((e=>{const t=e.info;return PD={session_id:e.sessionid||"",device_brand:t.brand||"",device_model:t.model||"",version:t.version||"",sdk_version:t.SDKVersion||"",system:t.system||"",screen_width:t.screenHeight||0,screen_height:t.screenWidth||0,appid:e.appid},PD}))).then((()=>bD())).then((({networkType:t})=>{let n=(Array.isArray(e)?e:[e]).map((e=>{let{type:n,params:i}=e;return i.network_type=t,{[n]:i}}));return AD({apiName:"webapi_game_ad_report",reqData:{base_info:PD,data_list:n}}).catch((e=>Promise.reject(e)))}))}var kD=n(6095);function ND(e,t){return e[t]?e[t]*(e.scale||1):0}function MD(e){let t=(0,Xs.Wj)(this);const{load_type:n,open_time:i,cost_time:r,result:o,layout:a}=e;let s={load_type:n,ad_type:t.adType,open_time:i,cost_time:r,result:o,trace_id:t.trace_id};n===TD&&(s.serving_list=[],t.data.game_ad_list.forEach(((e,t)=>{s.serving_list.push({ad_pos_id:t+1,serving_id:e.serving_id||""})})));let c=function(e){let t={};if(e&&e.layoutBox){let n=e.layoutBox||{},i=e.style||{};return t.ad_x=Math.round(n.left||ND(i,"left")||0),t.ad_y=Math.round(n.top||ND(i,"top")||0),t.ad_w=Math.round(n.width||ND(i,"width")||0),t.ad_h=Math.round(n.height||ND(i,"height")||0),t}}(a);return c&&Object.assign(s,c),s}function LD(e){let t=(0,Xs.Wj)(this),n=[],i={type:"component_load",params:MD.call(this,{load_type:TD,open_time:t.exposure_time.s,cost_time:0,layout:e,result:0})};n.push(i),t.data.game_ad_list.forEach(((e,i)=>{n.push({type:"game_exposure",params:{ad_type:t.adType,ad_pos_id:i+1,trace_id:t.trace_id||"",serving_id:e.serving_id||"",exposure_time:t.exposure_time.s}})})),RD(n)}function BD(e){let{event:t={},ad_pos_id:n,action_type:i,layout:r,serving_id:o}=e,a=(0,Xs.Wj)(this),s=r.layoutBox||{},c={action_type:i,ad_x:s.left||0,ad_y:s.top||0,ad_w:s.width||0,ad_h:s.height||0,ad_type:a.adType,exposure_time:a.exposure_time.s||zD().s,stay_time:zD().ms-a.exposure_time.ms};return a.trace_id&&(c.trace_id=a.trace_id),o&&(c.serving_id=o),t&&(c.click_x=t.absoluteX||0,c.click_y=t.absoluteY||0),n&&(c.ad_pos_id=n),c}function FD(e){let{key:t}=e;return function(e){Reporter.reportIDKeyDirectly({id:kD.Z.reportId,key:e})}(t),function({key:e=1,error_detail:t="",adUnitId:n="",adType:i=1}={}){let r={};if(VD(t,"Object"))try{t=JSON.stringify(t)}catch(e){t=""}return GD().then((e=>(r=e,UD()))).then((({networkType:o})=>({type:"error",params:{key:e,error_detail:t,appid:r.appid,ad_type:i,ad_unit_id:n,session_id:r.sessionid,network_type:o}})))}(e).then((e=>RD(e)))}const UD=(0,op.Fr)(Ae.getNetworkType),WD=kD.Z.adTypeName,jD={screenWidth:0,screenHeight:0,platform:"",isIOS:!1,isAndroid:!1,sessionid:"",deviceOrientation:"",info:{},appid:"",sessionStartTime:zD(),sessionStayTime:0,maxGameCount:3,enterScene:0};function GD(){return new Promise((e=>{jD.screenWidth?(jD.sessionStayTime=zD().ms-jD.sessionStartTime.ms,e(jD)):s.Z.onReady((()=>{let t=(0,ve.m4)();jD.info=t||{},jD.screenWidth=t.screenWidth,jD.screenHeight=t.screenHeight,jD.platform=t.platform,jD.isIOS="ios"===jD.platform,jD.isAndroid="android"===jD.platform;let n=s.Z.deviceOrientation||"";jD.deviceOrientation=n||(t.deviceOrientation||""),e(jD)}))}))}function VD(e,t){var n=Object.prototype.toString;return"Null"===t&&null===e||"Undefined"===t&&undefined===e||n.call(e).slice(8,-1)===t}function HD({appid:e,adType:t,serving_id:n}){let i=(0,Xs.Wj)(this);GD().then((r=>{let o=`${r.appid}:${r.sessionid}:${n}:${t}`;(0,c.IN)("navigateToMiniProgram",{appId:e,path:"",scene:1139,sourcetype:1,sceneNote:o,success:()=>{},fail:e=>{FD.call(this,{key:kD.Z.idkey.LAUNCH_APP_ERROR,adType:i.adType,adUnitId:i.adUnitId,error_detail:e})}})}))}function zD(){const e=new Date;return{s:parseInt(e.getTime()/1e3),ms:e.getTime()}}function ZD(e,t,n,i){return"left"===t&&n<0?0:"left"===t&&n+i.width>e.screenWidth?e.screenWidth-i.width:"top"===t&&n<0?0:"top"===t&&n+i.height>e.screenHeight?e.screenHeight-i.height:n}function YD(e){let t=e.absoluteX,n=e.absoluteY,i=e.absoluteEndX,r=e.absoluteEndY,o=e.pressInterval,a=!1;return Math.abs(r-n)<30&&Math.abs(i-t)<30&&o<300&&(a=!0),a}function $D(e=0){return new Promise((t=>{setTimeout((()=>{t({message:"timeout trigger success"})}),e)}))}function qD(e){let t={};return e.errMsg&&(t.errMsg=e.errMsg),e.errCode&&(t.errCode=e.errCode),t}function QD(e,t,n){return e<t?t:e>n?n:e}s.Z.onReady((()=>{jD.sessionStartTime=zD(),jD.enterScene=s.Z.appLaunchInfo&&s.Z.appLaunchInfo.scene||0,jD.appid=s.Z.accountInfo&&s.Z.accountInfo.appId||"",jD.sessionid=s.Z.appLaunchInfo.sessionid||s.Z.appLaunchInfo.sessionId||""})),(0,Uo.dN)((e=>{jD.sessionid=e.sessionid||e.sessionId||""}));let JD={appType:1004,path:""};function XD(e=[]){let t=(0,Xs.Wj)(this),n=e.map((e=>{let t=e.pre_load_param||{},n=JSON.parse(JSON.stringify(JD));return n.appId=e.appid,n.openRate=t.score||0,n})).filter((e=>0!==e.openRate));n.length&&GD().then((e=>{(0,c.IN)("batchPreloadMiniProgram",{openParams:{visitScene:e.enterScene,businessScene:2,innerScene:1139},preloadList:n,success:e=>{FD.call(this,{key:kD.Z.idkey[`${WD[t.adType]}_SUCCESS_FAIL`],adType:t.adType,adUnitId:t.adUnitId,error_detail:e})},fail:e=>{FD.call(this,{key:kD.Z.idkey[`${WD[t.adType]}_PRELOAD_FAIL`],adType:t.adType,adUnitId:t.adUnitId,error_detail:e})}})}))}function KD(e){e.content.style.hidden&&yD().then((t=>{const n=vD();e.icon.style.opacity=0,setTimeout((()=>{e.body.style.width=t.screenWidth,e.body.style.height=t.screenHeight,e.body.style.left=0,e.body.style.top=0,e.icon.style.left=n.left-n.height-8,e.icon.style.top=n.top,e.content.style.hidden=!1,e.mask.style.hidden=!1,e.icon.style.opacity=1}),0),e.content.nextLayout().then((()=>{e.content.animate({opacity:1,duration:300}),e.mask.animate({opacity:.1,duration:300})})),pD.send({SceneID:14,UIArea:1401,PositionID:0,ActionID:1,SourceID:1301});for(let t=1;t<=e.gameData.length;t++){fD(t,e.gameData[t-1].app_info.base.appid)}}))}function eO(e){e.content.style.opacity<1||(e.content.animate({opacity:0,duration:300}),e.mask.animate({opacity:0,duration:300}),e.content.nextLayout().then((()=>{const t=vD();e.body.style.width=t.height,e.body.style.height=t.height,e.body.style.left=t.left-t.height-8,e.body.style.top=t.top,e.icon.style.left=0,e.icon.style.top=0,e.content.style.hidden=!0,e.mask.style.hidden=!0})),pD.send({SceneID:14,UIArea:1401,PositionID:100,ActionID:2,SourceID:1301}))}function tO(e){(0,Ti.n8)({url:`https://game.weixin.qq.com/cgi-bin/minigame/static/portal/index.html?appid=${s.Z.accountInfo.appId}&ssid=1199&source_id=${e}&source=in_minigame_entry#wechat_redirect`})}function nO(e,t){e.on("touchstart",(()=>{e.style.opacity=.5})),e.on("touchend",(()=>{e.style.opacity=1})),e.on("click",(e=>{YD(e)&&t()}))}function iO(e){nO(e.icon,(()=>{e.renderMode===lD.iconMore?(KD(e),pD.send({SceneID:13,UIArea:1301,PositionID:0,ActionID:2})):e.renderMode===lD.iconOnly&&(tO(1303),pD.send({SceneID:13,UIArea:1303,PositionID:0,ActionID:2}))})),e.mask.on("click",(()=>{eO(e)}));for(let t=1;t<=e.gameData.length;t++)e[`gameItem${t}`]&&nO(e[`gameItem${t}`],(()=>{const n=e.gameData[t-1].app_info.base.appid;(0,ds.iy)({appId:n,path:"/",success(){}}),gD(t,n)}));e.moreGame&&nO(e.moreGame,(()=>{tO(1302),pD.send({SceneID:13,UIArea:1302,PositionID:0,ActionID:2})})),e.gameMore&&nO(e.gameMore,(()=>{tO(1401),pD.send({SceneID:14,UIArea:1401,PositionID:99,ActionID:2,SourceID:1301})}))}function rO(){const e=(0,Xs.Wj)(this),{template:t,style:n}=((e,t)=>{const n=vD(),i=(0,ve.xI)(),r=Math.min(412,i.screenWidth-16),o={width:n.height,height:n.height,top:n.top,left:n.left-n.height-8},a={width:80,height:20,top:n.top+n.height+8,left:n.left+(n.width-80)/2},s={body:{position:"absolute",zIndex:1e6},icon:{position:"absolute",width:n.height,height:n.height,hidden:!0},moreGame:{position:"absolute",width:80,height:20,hidden:!0},mask:{position:"absolute",backgroundColor:"#000000",opacity:0,width:i.screenWidth,height:i.screenHeight,hidden:!0},content:{position:"absolute",width:r,height:149,top:n.top+n.height+16-8,left:i.screenWidth-r-8,hidden:!0,opacity:0},contentBox:{position:"absolute",backgroundColor:"#ffffff",width:r,height:141,top:8,left:0,borderRadius:4},contentInner:{width:r,paddingLeft:4,paddingRight:4,height:105,flexDirection:"row",alignItems:"center"},contentTitle:{marginLeft:16,marginTop:16,width:200,height:20,lineHeight:20,fontSize:14,color:"#000000",opacity:.9},contentArrow:{position:"absolute",left:n.left-(i.screenWidth-r-8)-(n.height/2+8)-6,top:0,width:12,height:8},gameItem1:{width:(r-8)/4,hegiht:73},gameItem2:{width:(r-8)/4,hegiht:73},gameItem3:{width:(r-8)/4,hegiht:73},gameMore:{width:(r-8)/4,hegiht:73},gameIcon:{width:48,height:48,marginLeft:((r-8)/4-48)/2},gameName:{width:(r-8)/4,lineHeight:17,height:17,textAlign:"center",fontSize:12,color:"#000000",opacity:.5,marginTop:8,lineBreak:"break-all"}};switch(t){case lD.iconMore:s.icon.hidden=!1,s.body=Object.assign(s.body,o);break;case lD.gameMore:s.moreGame.hidden=!1,s.body=Object.assign(s.body,a);break;case lD.iconOnly:s.icon.hidden=!1,s.body=Object.assign(s.body,o)}let c="";if(e&&e.length>0){c+='<view id="content">\n    <image id="content-arrow" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20210427/205100/arrow.png"></image>\n    <view id="content-box">\n      <text id="content-title" value="更多来自此开发者的游戏"></text>\n      <view id="content-inner">';for(const[t,n]of Object.entries(e)){const e=Ap.Z.textMetrics(n.app_info.base.appname,{maxWidth:r/4,maxLines:1,fontSize:s.gameName.fontSize})[0].text;c+=`<view id="game-item${+t+1}">\n        <image id="game-icon" bubble-event="true" src="${n.app_info.base.icon_url}"></image>\n        <text id="game-name" bubble-event="true" value="${e}"></text>\n      </view>`}c+='<view id="game-more">\n        <image id="game-icon" bubble-event="true" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20210426/175420/more.png"></image>\n        <text id="game-name" bubble-event="true" value="更多游戏"></text>\n      </view>',c+="</view></view></view>"}return{template:`\n    <view id="body">\n        <image id="icon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20210427/204917/minigame.png"></image>\n        <image id="more-game" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20210429/120001/moreGame.png"></image>\n        <view id="mask" bubble-event="true"></view>\n        ${c}\n    </view>\n    `,style:s}})(e.gameData,e.renderMode),{root:i}=Js()(t);return Xs.S1.call(this,i,n),Ko.uo.add(e.body),iO(e),e.body.ready()}var oO=n(74);class aO extends Xs.wA{constructor(){super();const e=(0,Xs.Wj)(this);e.renderMode=lD.none,e.xom="",e.style="",e.state="",e.gameData=[],e.destroyPromise=null,new Promise(((e,t)=>{(0,oO.z)({req_path:"gamewxagcdatawap_getportalinfo",json_data:JSON.stringify({appid:s.Z.accountInfo.appId}),success(t){let n;const{rawData:i=""}=t;try{n=JSON.parse(i)}catch(e){n={}}e(n)},fail(e){t(e)}})})).then((t=>{if(t.data&&t.data.exp_id){switch(e.renderMode=t.data.exp_id,e.renderMode){case lD.iconMore:pD.send({SceneID:13,UIArea:1301,PositionID:0,ActionID:1});break;case lD.gameMore:pD.send({SceneID:13,UIArea:1302,PositionID:0,ActionID:1});break;case lD.iconOnly:pD.send({SceneID:13,UIArea:1303,PositionID:0,ActionID:1})}e.gameData=t.data.owner_game_info.game_info_list.slice(0,3),rO.call(this).then((()=>{}))}else e.renderMode=lD.none})).catch((()=>{e.renderMode=lD.none}))}destroy(){(0,Xs.bn)(this)}}let sO;const cO=function(){return sO||(sO=new aO,sO)};s.Z.onReady((e=>{yD().then((t=>{if("windows"!==t.platform)if("portrait"!==e.deviceOrientation){const e=function(){setTimeout((()=>{cO()}),1e3),na(e)};ta(e)}else"ios"===t.platform&&(0,v.yC)(t.version,"8.0.5")>=0?WeixinJSBridge.on("onGameViewReady",(()=>{cO()})):setTimeout((()=>{cO()}),1500)}))}));class lO extends Xs.wA{constructor({id:e,name:t,style:n={}}={}){super();const i=(0,Xs.Wj)(this);i.style=n,i.uiEngine=new yb(i,this),i.act_id=e,i.comp_id=t,i.emitter=new jo.Z,i.destroyPromise=null,i.reporter=new QA(i),this.isDestroyed=!1,this.ready=!1,this.id=e,this.name=t,zA.call(this).catch((()=>{}))}offClose(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("close",e)}onClose(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("close",e)}destroy(){return HA.call(this)}onLoad(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("load",e)}onError(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("error",e)}offLoad(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("load",e)}onMessage(e,t){(0,Xs.Wj)(this).emitter.on(e,t)}offMessage(e,t){(0,Xs.Wj)(this).emitter.off(e,t)}invoke(e={}){if(this.isDestroyed)return Promise.reject(new Error("组件已经被销毁"));const t=(0,Xs.Wj)(this),{action:n}=e;return t.config&&t.config.flows&&t.config.flows.find((e=>e.id===n))?n&&t.uiEngine.oneFlowExec(n):Promise.reject(new Error(`action ${n} is not exist`))}}globalThis.setTimeout=o.Z.setTimeout,globalThis.clearTimeout=o.Z.clearTimeout,globalThis.setInterval=o.Z.setInterval,globalThis.clearInterval=o.Z.clearInterval,globalThis.requestAnimationFrame=o.Z.requestAnimationFrame,globalThis.cancelAnimationFrame=o.Z.cancelAnimationFrame,globalThis.GameGlobal=globalThis,GameGlobal.__isAdapterInjected=!1,Object.defineProperty(globalThis,"sharedCanvas",{get:()=>ha()});let uO=s.Z.accountInfo?s.Z.accountInfo:{};s.Z.onReady((()=>{uO=s.Z.accountInfo}));let dO=!1;mn.U.once("beforeTouchStart",(()=>{dO=!0}));var hO=n(1944);const pO=(e={})=>{const t=Object.assign({},e);if(!(0,c.r3)("loadSubPackage",t,{name:""}))return;const n=s.Z.subPackages||s.Z.subpackages;if(!n)return void(0,c.YG)("loadSubpackage",t,"Your subpackages configuration is invalid.");n.forEach((e=>{t.name!==e.alias&&t.name!==e.name||(t.name=e.root)}));const i="__APP__"===t.name||"__GAME__"===t.name;i||t.name.startsWith("/")||(t.name=`/${t.name}`),i||t.name.endsWith(".js")||t.name.endsWith("/")||(t.name=`${t.name}/`),"__GAME__"===t.name&&(t.name="__APP__");try{return new Ec(t)}catch(e){return void(0,c.YG)("loadSubpackage",t,e.message)}},fO={};function gO(e={}){if(!Array.isArray(e.packages))return Promise.reject(new Error("packages must be an array."));"all"!==e.network&&(e.network="wifi"),console.info("preloadSubpackages: "+e.packages.join(", "));const t=e.packages.filter((e=>!(e in fO)));let n;return n="all"!==e.network?new Promise(((e,t)=>{const n=Ae._getCurrentNetworkType();n?e(n):Ae.getNetworkType({success(n){n.networkType?e(n.networkType):t(new Error("get network type failed."))},fail:t})})).then((e=>{if("wifi"!==e.toLowerCase())return Promise.reject(new Error(`network type does not match, '${e}' !== 'wifi'`))}),(()=>Promise.reject(new Error("get network type failed.")))):Promise.resolve(),n.then((()=>Promise.all(t.map((e=>new Promise((n=>{pO({name:e,success(){fO[e]=!0,n(t)},fail(t){const i=new Error(t.errMsg.replace("loadSubpackage:fail",""));i.packageName=e,n(i)}})}))))).then((e=>{if((e=e.filter((e=>e instanceof Error))).length>0){const t=new Error("preload subpackages failed.");return t._detail=e,Promise.reject(t)}}))))}s.Z.onReady((()=>{A_((({path:e})=>{if(s.Z.preloadRule&&s.Z.preloadRule[e])return gO(s.Z.preloadRule[e]).then((()=>{console.info("preloadSubpackages: success")}),(e=>{e._detail?(console.group(`preloadSubpackages fail: ${e.message}`),e._detail.forEach((e=>{console.warn(`${e.packageName}: ${e.message}`)})),console.groupEnd()):console.warn(`preloadSubpackages fail: ${e.message}`)}))}))}));const _O=(0,p.Fr)(Oe.I6),mO=(0,p.Fr)((0,er.Ce)(!1,"informFreezed")),yO=(0,p.Fr)((0,er.Ce)(!1,"getSubjectalterInfo")),vO=e=>new Promise((t=>setTimeout(t,e)));class AO{constructor(e,t=!1){const n=286;this.orientation=e,this.animating=!1;const{screenWidth:i}=(0,ve.xI)(),r=parseInt(32767*Math.random(),10)+32767;this.isFullScreen=t;const o=new Ko.G7({id:r,style:{position:"absolute",left:(i-n)/2,top:this.getTop(),width:n,height:38,backgroundColor:"#000000",opacity:0,zIndex:1000001,borderRadius:5,fixed:!(0,p.aI)()}}),a=new Ko.xv({id:r+1,style:{left:0,top:0,width:n,height:38,textAlign:"center",lineHeight:38,fontSize:15,color:"#ffffff"},value:`该${(0,p.aI)()?"小游戏":"小程序"}业务及数据已由新开发者承接`});o.add(a),Ko.uo.add(o),this.banner=o,this.bannerWidth=n}show(){this.banner.ready().then((()=>(this.animating=!0,this.banner.animate({top:this.getTop(),opacity:.7,duration:300})))).then((()=>(this.animating=!1,vO(5e3)))).then((()=>(this.animating=!0,this.banner.animate({top:this.getTop()-14,opacity:0,duration:300})))).then((()=>vO(3e3))).then((()=>Ko.uo.remove(this.banner))).catch((()=>{}))}getTop(){const{screenHeight:e}=(0,ve.xI)();return this.isFullScreen?"portrait"===this.orientation?e/8:e/6:16}setOrientation(e){if(this.animating)return;this.orientation=e;const{screenWidth:t}=(0,ve.xI)();this.banner.style.left=(t-this.bannerWidth)/2,this.banner.style.top=this.getTop()}}let bO=!1;s.Z.onReady((()=>{try{bO=s.Z.appContactInfo.operationInfo.jsonInfo.misc_ban_info.minigame_freeze_status}catch(e){}bO?mO({apiName:"webapi_wxacloseinfo",reqData:{}}).then((e=>{const t=JSON.parse(e.rawData);if(t.need_show&&t.svr_stoptimestamp){t.svr_stoptimestamp;const e=t.svr_stoptimestamp,n=new Date(1e3*e),i=n.getFullYear(),r=n.getMonth()+1,o=n.getDate();return _O({title:"提示",content:`本小游戏计划于 ${i}-${r}-${o} 下架，请及时处理充值所得道具，注意保护自身合法权益`,showCancel:!1})}})).catch((e=>{e.errMsg})).then((()=>Es())):Es(),setTimeout((()=>{var e,t;e=s.Z.deviceOrientation,t=!0,yO({apiName:"getSubjectalterInfo",reqData:{}}).then((n=>{if(JSON.parse(n.rawData).need_show){const n=new AO(e,t);return n.show(),n}})).catch((()=>{}))}),1e3)}));let wO=!1,EO=0;mn.U.on("setLastTapTime",(e=>{EO=e})),mn.U.on("beforeTouchStart",(()=>{wO=!0,EO=Date.now()})),(0,Uo.vv)((()=>{wO=!1,EO=0}));const TO={muteMicrophone:!1,muteEarphone:!1};function SO(e){return(0,P.Kn)(e)?((0,P.jn)(e.muteMicrophone)&&(TO.muteMicrophone=e.muteMicrophone),(0,P.jn)(e.muteEarphone)&&(TO.muteEarphone=e.muteEarphone),TO):TO}const CO=(0,l.s)("voIPChatMembersChanged"),IO=CO.onMethod,xO=CO.offMethod;(0,c.jQ)("onVoIPChatMembersChanged",(e=>{e.errCode=0,e.errMsg=e.errMsg||"ok",CO.emit(e)}));const DO=(0,l.s)("VoIPChatInterrupted"),OO=e=>{e.errCode||(e.errCode=((e="")=>e.includes("current mini app entered background")?-1:e.includes("in comming call")?-2:-1e3)(e.reason)),DO.emit(e)};(0,c.jQ)("onVoIPChatInterrupted",(e=>{OO(e)})),(0,c.jQ)("onVoIPChatInterruptedJsEvent",(e=>{OO(e)}));const PO=DO.onMethod,RO=DO.offMethod,kO=(0,l.s)("VoIPVideoMembersChanged"),NO=kO.onMethod,MO=kO.offMethod;(0,c.jQ)("onVoIPVideoMembersChanged",((e={})=>{kO.emit(e)}));const LO=(0,l.s)("voIPChatStateChanged"),BO=LO.onMethod,FO=LO.offMethod;(0,c.jQ)("onVoIPChatStateChanged",(e=>{e.errCode=e.errCode||0,e.errMsg=e.errMsg||"ok",LO.emit(e)}));let UO=1;s.Z.onReady((()=>{["close","error","listening","message"].forEach((e=>{(0,c.jQ)(`onUDPSocket${(0,p.fm)(e)}`,(t=>{const{socketId:n}=t;delete t.socketId,(0,p.fm)(e);(0,l.s)(`jsapi-udp-${n}-${e}`).emit(t)}))}))}));class WO{constructor(e){let t;if(this._id=UO++,(0,c.IN)("createUDPSocket",{socketId:this._id,type:"udp6"===e?"IPv6":"IPv4",fail(e){e.errMsg,t=e.errMsg}}),t)throw new Error(t);["close","error","listening","message"].forEach((e=>{const t=(0,l.s)(`jsapi-udp-${this._id}-${e}`);this[`on${(0,p.fm)(e)}`]=t.onMethod,this[`off${(0,p.fm)(e)}`]=t.offMethod}))}bind(e){let t,n;if((0,c.IN)("bindUDPSocket",{port:e,socketId:this._id,success(e){t=e.port},fail(e){n=e.errMsg}}),n)throw new Error(n);return t}setTTL(e){let t;if((0,c.IN)("setUDPSocketTTL",{ttl:e,socketId:this._id,fail(e){t=e.errMsg}}),t)throw new Error(t)}send(e={}){let t;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,(0,c.IN)("sendUDPSocketMessage",Object.assign({},e,{socketId:this._id,message:t,success(e){},fail:({errMsg:e})=>{(0,l.s)(`jsapi-udp-${this._id}-error`).emit({errMsg:`send: fail ${e}`})}}))}connect(){}write(e){this.send(e)}close(){let e;if((0,c.IN)("closeUDPSocket",{socketId:this._id,fail(t){e=t.errMsg}}),e)throw new Error(e)}}const jO=o.Z.UDP,GO=new WeakMap,VO=new WeakMap,HO=new WeakMap;let zO=1;class ZO{constructor(e){if(!jO)return null;const t=new jO;if(null===t)return null;const n=zO++;["close","error","listening","message"].forEach((e=>{const i=(0,l.s)(`jsbinding-udp-${n}-${e}`);t[`on${e}`]=function(...t){"message"===e&&t[0].remoteInfo&&(t[0].localInfo={address:t[0].remoteInfo.localaddress,family:t[0].remoteInfo.localfamily,port:t[0].remoteInfo.localport},delete t[0].remoteInfo.localaddress,delete t[0].remoteInfo.localfamily,delete t[0].remoteInfo.localport),i.emit(...t),"error"===e?Reporter.reportIDKey({key:"UDPError"}):"message"===e&&Reporter.reportIDKey({key:"receiveUDPMessage"})},this[`on${(0,p.fm)(e)}`]=i.onMethod,this[`off${(0,p.fm)(e)}`]=i.offMethod})),GO.set(this,t),VO.set(this,n),HO.set(this,"udp6"===e?"IPv6":"IPv4")}bind(e){return(0,O.P)("bindUDP","",1,0,"","",!1,0),Reporter.reportIDKey({key:"bindUDP"}),GO.get(this).bind({port:e,type:HO.get(this)})}setTTL(e){if(Number.isNaN(Number(e))){return void(0,l.s)(`jsbinding-udp-${VO.get(this)}-error`).emit({errMsg:"set ttl fail: ttl must be a number.",errCode:-4})}const t=GO.get(this);"IPv6"===HO.get(this)?(t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_UNICAST_HOPS"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_RECVHOPLIMIT"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_RECVPKTINFO"),optionval:1})):t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_TTL"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_PKTINFO"),optionval:1}),t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_RECVTTL"),optionval:Number(e)})}send(e={}){if(!(0,K.J)("UDP")){return void(0,l.s)(`jsbinding-udp-${VO.get(this)}-error`).emit({errMsg:"send socket fail: no permission",errCode:-3})}const t=`udp://${e.address}`;let n;n=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,GO.get(this).send(Object.assign({},e,{message:n})),Math.random()>.99&&(0,O.P)("sendUDP",t,1,0,"","",!1,(0,p.Y6)(e.message)),Reporter.reportIDKey({key:"sendUDPMessage"})}connect(e={}){const t=GO.get(this);"function"==typeof t.connect&&t.connect(e)}write(e={}){if(!(0,K.J)("UDP")){return void(0,l.s)(`jsbinding-udp-${VO.get(this)}-error`).emit({errMsg:"write socket fail: no permission",errCode:-3})}let t;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;const n=GO.get(this);"function"==typeof n.write?n.write(Object.assign({},e,{message:t})):this.send(e)}onConnect(e){GO.get(this).onconnect=e}close(){return GO.get(this).close()}}let YO=!1,$O=null,qO=null;(0,_i.H)((()=>{YO=!0})),A_((()=>{YO=!1,$O&&(QO($O),$O=null),qO&&(JO(qO),qO=null)}));const QO=e=>{(0,c.r3)("addCard",e,{cardList:[]})&&(YO?$O=e:(0,c.IN)("addCard",e))},JO=e=>{(0,c.r3)("openCard",e,{cardList:[]})&&(YO?qO=e:(0,c.IN)("openCard",e))};var XO=n(5867);const KO=(0,op.P2)(ye.FD,1e3);var eP=n(596);const tP="requestSubscribeSystemMessage",nP=(0,er.Ce)(!1,tP);let iP=!1;function rP(e){return new Promise(((t,n)=>{nP({apiName:"webapi_getsyssubscribemsgtemplateinfo",reqData:{msg_type_list:e},success(e){t(e)},fail(e){n({errMsg:e.errMsg,errCode:e.err_code||e.errCode})}})}))}function oP(e){return new Promise(((t,n)=>{const i=JSON.parse(e.respData.data);if(i&&i.msg_info_list){t(i.msg_info_list)}else n({errMsg:"data error"})}))}function aP(e){return new Promise(((t,n)=>{!function(e){const t=Object.assign({},e);t.tmplIds=Array.from(new Set(e.tmplIds)),(0,c.IN)("requestSubscribeMessage",t)}({tmplIds:e.map((e=>e.template_id)),success(n){const i={};e.forEach((e=>{const t=e.msg_type,r=(0,eP.r)(t);i[r]=n[e.template_id]})),t(i)},fail(e){n({errMsg:e.errMsg,errCode:e.err_code||e.errCode})}})}))}var sP=n(1876);const cP="getWhatsNewSubscriptionsSetting",lP=(0,er.Ce)(!1,cP),uP=(e={})=>{(0,K.J)("requestSubscribeWhatsNew")?lP({apiName:"webapi_game_query_subscribe_whats_new",reqData:{msg_type:e.msgType||1},success(t){const n=JSON.parse(t.respData.data);(0,c.FE)({name:cP,args:e,res:n})},fail:e.fail,complete:e.complete}):(0,c.YG)(cP,e,"",4)},dP=({action:e})=>{const t=(0,Vr.y)(),n=[t.scene||"",t.scene_note||"",t.sessionid||t.sessionId||"",e].join(",");Reporter.reportKeyValue({key:"GameWhatsNew",value:n})},hP=wxNativeConsole.createLogger("requestSubscribeWhatsNew"),pP="requestSubscribeWhatsNew",fP=(0,er.Ce)(!1,pP);let gP=!1;function _P(){return new Promise((e=>{dP({action:2});const t=(0,sP.U)({title:"接收游戏更新提醒",content:`${s.Z.accountInfo.nickname}更新时，你将收到微信小游戏的提醒`,confirmText:"接收",cancelText:"取消",confirm(){t.destroy(),e({confirm:!0}),dP({action:4})},cancel(){t.destroy(),e({confirm:!1}),dP({action:3})},style:{title:{fontSize:17,color:"#1b1b1b"},content:{fontSize:14,color:"#d4d4d4",lineHeight:19.6,marginTop:16,marginBottom:0},confirm:{backgroundColor:"#FA9D3B"},cancel:{color:"#FA9D3B"}}})}))}const mP={0:"OK","10 01 2":"Global_APINoPermission","10 02 2":"Global_APINoAuthorization","10 03 1":"Global_FileStorageNotEnough","13 01 3":"Render_CanvasIllegalInvocation","13 02 3":"Render_FontFileInvalid","13 03 3":"Render_ImageLoadFailed","14 01 2":"Network_RequestTimeout","15 01 3":"Storage_NotFound","16 01 3":"File_NotExist","22 00 2":"GameRecorder_UnknownError","22 01 2":"GameRecorder_InternalFailed","22 02 2":"GameRecorder_NotSupported","22 10 3":"GameRecorder_StartDurationInvalid","22 11 3":"GameRecorder_StartBitRateInvalid","22 12 3":"GameRecorder_StartFPSInvalid","22 13 3":"GameRecorder_StartGOPInvalid","22 14 3":"GameRecorder_StartWhileAlreadyStartRecording","22 15 3":"GameRecorder_StartWhilePaused","22 20 3":"GameRecorder_PauseWhileNotStartRecording","22 21 3":"GameRecorder_PauseWhileAlreadyPaused","22 30 3":"GameRecorder_ResumeWhileNotStartRecording","22 31 3":"GameRecorder_ResumeWhileRecording","22 40 3":"GameRecorder_AbortWhileNotStartRecording","22 50 3":"GameRecorder_StopWhileNotStartRecording","22 60 3":"GameRecorder_NoVideo","22 61 3":"GameRecorder_BGMNotFound","22 62 3":"GameRecorder_TimeRangeInvalid","22 63 3":"GameRecorder_EditDurationOutOfLimit","22 64 3":"GameRecorder_TimeRangeTooShort","23 00 2":"MediaRecorder_UnknownError","23 01 2":"MediaRecorder_InternalFailed","23 02 2":"MediaRecorder_NotSupported","23 10 3":"MediaRecorder_StartDurationInvalid","23 11 3":"MediaRecorder_StartBitRateInvalid","23 12 3":"MediaRecorder_StartFPSInvalid","23 13 3":"MediaRecorder_StartGOPInvalid","23 14 3":"MediaRecorder_StartWhileAlreadyStartRecording","23 15 3":"MediaRecorder_StartWhilePaused","23 20 3":"MediaRecorder_PauseWhileNotStartRecording","23 21 3":"MediaRecorder_PauseWhileAlreadyPaused","23 30 3":"MediaRecorder_ResumeWhileNotStartRecording","23 31 3":"MediaRecorder_ResumeWhileRecording","23 40 3":"MediaRecorder_AbortWhileNotStartRecording","23 50 3":"MediaRecorder_StopWhileNotStartRecording","23 60 3":"MediaRecorder_NoVideo","23 61 3":"MediaRecorder_BGMNotFound","23 62 3":"MediaRecorder_TimeRangeInvalid","23 63 3":"MediaRecorder_EditDurationOutOfLimit","23 64 3":"MediaRecorder_TimeRangeTooShort"},yP=Object.keys(mP).reduce(((e,t)=>{const n=parseInt(t.replace(/\s/g,""),10);return e[mP[t]]=n,e}),{}),vP=(0,p.Fr)((0,er.Ce)(!1,"getplaybackinfo")),AP=(e,t)=>{const n={};return e&&(0,P.HD)(e.template)&&(0,P.s$)(e.data)&&(n.desc_template_data={name:e.template,data_list:Object.keys(e.data).map((t=>({key:t,value:e.data[t]})))}),t&&(0,P.HD)(t.template)&&(n.launch_desc_template=t.template),vP({apiName:"webapi_getplaybackinfo",reqData:n}).then((e=>({shareTitle:(e=JSON.parse(e.rawData)).title,shareDesc:e.desc,buttonText:e.launch_desc,videoDesc:e.playback_desc})))};let bP=null;const wP=(e,{shareTitle:t="",sharePath:n="",useBgm:i=!1,useTimeRange:r=!1,useAtempo:o=!1,atempo:a=1,hookBgm:c=!0}={})=>(bP||(bP=vP({apiName:"webapi_getplaybackconfig"}).then((e=>(e=JSON.parse(e.rawData)).enable_share_to_haowan)).catch((()=>!1)),bP)).then((l=>{const u=l?2:1,d=(0,Vr.y)(),h=[d.scene||"",d.scene_note||"",d.sessionid||d.sessionId||"",e,u,t,n,s.Z.appType+1e3,i,r,o,a,c].join(",");Reporter.reportKeyValue({key:"GameRecorder",value:h})})),EP=["start","stop","pause","resume","abort","timeUpdate","error"].reduce(((e,t)=>(e[t]={internal:(0,l.s)(`GameRecorder-internal-${t}`),external:(0,l.s)(`GameRecorder-external-${t}`)},e)),{});let TP=!1,SP=!1,CP=!1,IP=!1;const xP=e=>{const t={101:{code:yP.GameRecorder_StartDurationInvalid,message:"GameRecorder.start:fail duration invalid"},103:{code:yP.GameRecorder_StartWhileAlreadyStartRecording,message:"GameRecorder.start:fail start while already start recording"},104:{code:yP.GameRecorder_StartWhilePaused,message:"GameRecorder.start:fail start while paused"},106:{code:yP.GameRecorder_StartBitRateInvalid,message:"GameRecorder.start:fail bitrate invalid"},107:{code:yP.GameRecorder_StartFPSInvalid,message:"GameRecorder.start:fail fps invalid"},108:{code:yP.GameRecorder_StartGOPInvalid,message:"GameRecorder.start:fail gop invalid"},112:{code:yP.GameRecorder_UnknownError,message:"GameRecorder.start:fail 小游戏直播中，暂不支持录制"},201:{code:yP.GameRecorder_PauseWhileNotStartRecording,message:"GameRecorder.pause:fail pause while not start recording"},202:{code:yP.GameRecorder_PauseWhileAlreadyPaused,message:"GameRecorder.pause:fail pause while already paused"},301:{code:yP.GameRecorder_ResumeWhileNotStartRecording,message:"GameRecorder.resume:fail resume while not start recording"},302:{code:yP.GameRecorder_ResumeWhileRecording,message:"GameRecorder.resume:fail resume while recording"},401:{code:yP.GameRecorder_AbortWhileNotStartRecording,message:"GameRecorder.abort:fail abort while not start recording"},501:{code:yP.GameRecorder_StopWhileNotStartRecording,message:"GameRecorder.stop:fail stop while not start recording"},503:{code:yP.Global_FileStorageNotEnough,message:"GameRecorder.stop:fail file storage not enough"}};return t[e]?t[e]:[102,110,111,502,710,810].includes(e)?{code:yP.GameRecorder_InternalFailed,message:"GameRecorder:fail internal failed"}:{code:yP.GameRecorder_UnknownError,message:"GameRecorder:fail unknown error"}};s.Z.onReady((()=>{const{version:e,system:t}=(0,ve.Oo)(),n=t.split(" ")[1],i=a.wZ&&-1===(0,p.M7)(n,"5.0"),r=a.cj&&-1===(0,p.M7)(e,"7.0.8");"7.0.5"===e||i||r||(0,c.IN)("isGameRecorderSupported",{success(e){TP=e.isFrameSupported,SP=e.isSoundSupported,CP=e.isVolumeSupported,IP=e.isAtempoSupported}}),(0,c.jQ)("onGameRecorderStateChange",(e=>{const t=e.state;if(delete e.state,"stop"===t)EP[t].internal.emit(e),EP[t].external.emit({duration:Math.floor(e.duration/1e3)});else if("timeUpdate"===t)EP[t].internal.emit(e),EP[t].external.emit({currentTime:e.currentTime});else if("error"===t){const n=xP(e.errCode);EP[t].external.emit({error:n})}else EP[t].external.emit()}))}));let DP=null;class OP{constructor(){EP.stop.internal.onMethod((e=>{DP=e.tempFilePath})),this._operatePromise=Promise.resolve()}isFrameSupported(){return TP}isSoundSupported(){return SP}isVolumeSupported(){return CP}isAtempoSupported(){return IP}_operate(e,t){return this._operatePromise=this._operatePromise.then((()=>this.__operate(e,t))).catch((()=>this.__operate(e,t))),this._operatePromise}__operate(e="start",t={}){if(!TP){const t=`GameRecorder.${e}:fail frame not supported`;return Promise.reject({errMsg:t,error:{message:t,code:yP.GameRecorder_NotSupported}})}let n=!0;return new Promise(((i,r)=>{(0,c.IN)("operateGameRecorder",Object.assign({operationType:e,success:()=>{"start"===e?wP(1,{hookBgm:t.hookBgm}):"stop"===e&&wP(2),i({errMsg:`GameRecorder.${e}:ok`,error:{code:yP.OK,message:`GameRecorder.${e}:ok`}}),n=!1},fail:e=>{wxNativeConsole.error("[operateGameRecorder fail]",e);const t=xP(e.errCode);r({errMsg:t.message,error:t}),n=!1},complete:t=>{if(!n)return;if(0===t.errCode)return void i();const o=xP(t.errCode);o?r({errMsg:o.message,error:o}):(r({errMsg:`GameRecorder: ${e} unknow error`}),console.error(t))}},t))}))}start({fps:e=24,bitrate:t=1e3,gop:n=12,duration:i=7200,hookBgm:r=!0}={}){return i="number"==typeof i?Math.min(7200,Math.max(5,i)):7200,t="number"==typeof t?Math.min(3e3,Math.max(600,t)):1e3,"boolean"!=typeof r&&(r=!0),this._operate("start",{fps:e,bitrate:t,gop:n,duration:i,hookBgm:r,audioBitrate:128,width:s.Z.screenWidth+4-s.Z.screenWidth%4,height:s.Z.screenHeight+4-s.Z.screenHeight%4,cumulativeStamp:!0,notifyVideoKeyFrame:!0,timeUpdateInterval:30})}stop(){return this._operate("stop")}pause(){return this._operate("pause")}resume(){return this._operate("resume")}abort(){return this._operate("abort")}on(e,t){EP[e].external.onMethod(t)}off(e,t){EP[e].external.offMethod(t)}}let PP=null;const RP=(0,p.Fr)((0,er.Ce)(!1,"getplaybackconfig"));let kP=null;const NP=wxNativeConsole.createLogger("shareGameRecorder");let MP=null,LP=null;(0,Yo.OQ)((()=>{LP&&LP()}));const BP=function({query:e="",path:t="",title:n,button:i,bgm:r="",timeRange:o=[],volume:a=1,atempo:l=1,audioMix:u=!1}={}){const d=DP;if(!d){const e="GamaRecorder.share:fail no recorded video";return Promise.reject({errMsg:e,error:{code:yP.GameRecorder_NoVideo,message:e}})}const h=(e=>"number"==typeof e&&e>=0&&e<=1?Number(e.toFixed(2)):(console.warn(`GameRecorder:volume invalid ${JSON.stringify(e)}.It has been corrected to 1`),1))(a),p=(e=>"number"==typeof e&&[.3,.5,1,1.5,2,2.5,3].includes(e)?e:(console.warn(`GameRecorder:atempo invalid ${JSON.stringify(e)}.It has been corrected to 1`),1))(l),f=((e,t)=>{const n=6e4*t;let i=0;Array.isArray(e)||(r=[[0,n]],console.warn(`GameRecorder:time range invalid ${JSON.stringify(e)}.It has been corrected to [[0, ${n}]] under x${t} atempo`));let r=e.reduce(((e,t,r)=>{if(Array.isArray(t)&&2===t.length){const[o,a]=t,s=(0,P.U)(o)&&(0,P.U)(a),c=o<a&&(!e[r-1]||o>=e[r-1][1]);s&&c&&i+a-o<=n&&(e.push([o,a]),i+=a-o)}return e}),[]);return 0===r.length&&(r=[[0,n]],console.warn(`GameRecorder:time range invalid ${JSON.stringify(e)}.It has been corrected to [[0, ${n}]] under x${t} atempo`)),r})(o,p);if(f.reduce(((e,t)=>e+t[1]-t[0]),0)<2e3*p){const e=`GamaRecorder.share:fail time range too short.It should be longer than ${2e3*p}ms under x${p} atempo.`;return Promise.reject({errMsg:e,error:{code:yP.GameRecorder_TimeRangeTooShort,message:e}})}return Promise.all([AP(n,i),kP||(kP=RP({apiName:"webapi_getplaybackconfig",reqData:{appServiceType:s.Z.appType}}).then((e=>e=JSON.parse(e.rawData))),kP)]).then((([t,n])=>{const i={videoSrc:d,timeRange:f,bgmSrc:r,volume:h,atempo:p,shareOptions:[{id:1,name:"发送给好友",needExtUrl:!1}],audioMix:!!u};return NP.debug("shareAvailbleConfig",n),n.enable_share_to_haowan,n.enable_share_to_timeline&&i.shareOptions.push({id:3,name:"分享到朋友圈"}),new Promise(((n,a)=>{MP=new Promise((e=>{LP=e})),(0,c.IN)("editGameRecorderVideo",Object.assign(i,{success:i=>{wP(5,{shareTitle:t.shareTitle,sharePath:`?${e}`,useBgm:!!r,useTimeRange:Array.isArray(o)&&o.length>0,useAtempo:[.3,.5,1.5,2,2.5,3].includes(l),atempo:l,audioMix:!!u}),n(Object.assign(i,t))},fail:e=>{if(804===e.errCode||803===e.errCode)return n();const t={0:{code:yP.OK,message:"GamaRecorder.share:ok"},801:{code:yP.GameRecorder_InternalFailed,message:"GamaRecorder.share:fail internal failed"},802:{code:yP.GameRecorder_InternalFailed,message:"GamaRecorder.share:fail internal failed"}};a({errMsg:e.errMsg.replace("editGameRecorderVideo","shareGameVideo"),error:t[e.errCode]||{code:yP.GameRecorder_UnknownError,message:`GamaRecorder.share:fail unknow error code ${e.errCode}`}})}}))}))})).then((e=>MP.then((()=>e)))).then((n=>{MP=null,LP=null;const i=t;if(void 0!==n){if(2===n.chosenId&&"string"==typeof n.extUrl)wP(7),(0,c.IN)("private_openUrl",{url:n.extUrl});else if(1===n.chosenId||0===n.chosenId){const t=(0,Ao.xF)({pageType:Eo.Gy.PLAY_PAGE_VIDEO,query:e});wP(6,{shareTitle:n.shareTitle,sharePath:t}),(0,Wr.dg)({filePath:n.videoPath,thumbFilePath:n.thumbPath,title:n.shareTitle,query:e,path:t,userPath:i}).then((()=>{wP(8,{shareTitle:n.shareTitle,sharePath:n.path})}))}else if(3===n.chosenId){const t=(0,Ao.xF)({pageType:Eo.Gy.PLAY_PAGE_VIDEO,query:e});wP(9,{shareTitle:n.shareTitle,sharePath:t}),(r={filePath:n.videoPath,thumbFilePath:n.thumbPath,title:n.shareTitle,query:e,userPath:i},(0,Oe.QP)({title:"请稍等"}),(0,So.c)({filePath:r.filePath,thumbFilePath:r.thumbFilePath,fileType:20302,appType:213}).then((e=>((0,Oe.Zk)(),e))).then((e=>{const t=(0,Ao.xF)({pageType:Eo.Gy.PLAY_PAGE_VIDEO,query:r.query});return Po(e,{title:r.title,path:t,imageUrl:e.thumbUrl},Eo.Gy.PLAY_PAGE_VIDEO,r)})).catch((e=>{(0,Oe.Zk)(),Do.error("fail",e)}))).then((()=>{wP(10,{shareTitle:n.shareTitle,sharePath:t})}))}var r;return{errMsg:"GamaRecorder.share:ok",error:{code:yP.OK,message:"GamaRecorder.share:ok"}}}})).catch((e=>{NP.error(e)}))},FP=["left","top","height","paddingLeft","paddingRight","backgroundColor","borderColor","borderWidth","borderRadius"],UP=["fontSize","color"],WP=new WeakMap;let jP=null;const GP=()=>{if(jP)return jP;const e=new o.Z.Canvas;return e.width=1,e.height=1,jP=e.getContext("2d"),jP},VP=(e,t)=>{const n=GP();return t&&(n.font=`${t}px sans-serif`),n.measureText(e).width};class HP{constructor({style:e={},image:t="",icon:n="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht7bQQ8PW9rXljICmxVsZbEwrJgsCiaWWGm6YibFoxibLwX5UvINt8owvFnBibrv2uDgqvw/0?wx_fmt=png",text:i="分享游戏时刻",share:r={}}){const o={};WP.set(this,o),o.emitter=new jo.Z,e=Object.assign((0,TA.ph)(),e);const a=Object.keys(e).filter((e=>FP.includes(e))).reduce(((t,n)=>(t[n]=e[n],t)),{});a.paddingLeft=a.paddingLeft||16,a.paddingLeft=Math.max(a.paddingLeft,16),a.paddingRight=a.paddingRight||16,a.paddingRight=Math.max(a.paddingRight,16),a.position="absolute",a.flexDirection="row",a.justifyContent="center",a.alignItems="center",a.backgroundColor=a.backgroundColor||"#09bb07",a.borderRadius=a.borderRadius||3;const s=Object.keys(e).filter((e=>UP.includes(e))).reduce(((t,n)=>(t[n]=e[n],t)),{});s.color=s.color||"#ffffff",s.fontSize=s.fontSize||17,s.lineHeight=24*s.fontSize/17,s.width=VP(i,s.fontSize),s.height=s.lineHeight,o.button=new Ko.Ee({style:a,src:t,clickState:!0}),o.icon=new Ko.Ee({style:{width:24,height:16,marginRight:e.iconMarginRight||8},src:n}),o.text=new Ko.xv({style:s,value:i,bubbleEvent:!0}),o.button.add(o.icon),o.button.add(o.text),Ko.uo.add(o.button),Object.defineProperty(this,"text",{configurable:!0,enumerable:!0,get:()=>i,set:e=>{i=e,o.text.value=e,o.text.style.width=VP(i,o.text.style.fontSize)}}),Object.defineProperty(this,"image",{configurable:!0,enumerable:!0,get:()=>t,set:e=>{t=e,o.button.src=e}}),this.style={};const c={};FP.forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>c[e],set:t=>{"height"===e?t=Math.max(t,40):"paddingLeft"!==e&&"paddingRight"!==e||(t=Math.max(t,16)),c[e]=t,o.button.style[e]=t}})})),UP.forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>c[e],set:t=>{"fontSize"===e&&(t=Math.min(Math.max(t,17),22),o.text.style.width=VP(i,t),o.text.style.height=24*t/17,o.text.style.lineHeight=24*t/17),c[e]=t,o.text.style[e]=t}})})),Object.defineProperty(this.style,"iconMarginRight",{configurable:!0,enumerable:!0,get:()=>c.iconMarginRight,set:e=>{c.iconMarginRight=e,o.icon.style.marginRight=e}}),this.share=r,o.button.on("click",(()=>{wP(3),BP(this.share).catch((e=>{o.emitter.emit("tap",e),EP.error.external.emit(e)}))})),wP(4)}onTap(e){WP.get(this).emitter.on("tap",e)}offTap(e){WP.get(this).emitter.off("tap",e)}show(){const e=WP.get(this);e.button.style.hidden&&(e.button.style.hidden=!1,wP(4))}hide(){WP.get(this).button.style.hidden=!0}}let zP=null;const ZP=new class{constructor(){this.map=Object.keys(kD.Z.adType).reduce(((e,t)=>{const n=kD.Z.adType[t];return e[n]={total_open:0,total_click:0,ad_type:n},e}),{})}openAdd(e){this.map[e].total_open+=1}clickAdd(e){this.map[e].total_click+=1}},YP=(0,op.Fr)((0,er.Ce)(!1,"webapi_game_ad_load")),$P=kD.Z.adTypeName;const qP=class{constructor({adUnitId:e,adType:t,maxGameCount:n}){this.adUnitId=e,this.adType=t,this.maxGameCount=n,this.fetchPromise=null}getFetchParams(){return GD().then((e=>({place_id:this.adUnitId,context:{total_stay:e.sessionStayTime,enter_scene:e.enterScene,ad_type_stat_list:Object.keys(ZP.map).map((e=>ZP.map[e]))},limit:this.maxGameCount||e.maxGameCount,ad_type:this.adType})))}fetch(){if(this.fetchPromise)return this.fetchPromise;let e=new Date;return this.fetchPromise=this.getFetchParams().then((t=>YP({apiName:"webapi_game_ad_load",reqData:t}).catch((n=>{let i=new Date-e;if(i>kD.Z.TIMEOUT){VD(n,"Object")&&(n.time=i,n.step=1),FD.call(this,{key:kD.Z.idkey[`${$P[this.adType]}_TIMEOUT`],adType:this.adType,adUnitId:this.adUnitId,error_detail:n});let e=new Date;return YP({apiName:"webapi_game_ad_load",reqData:t}).catch((t=>{const n=new Date-e;return VD(t,"Object")&&(t.firstTime=i,t.retryTime=n,t.step=2),FD.call(this,{key:kD.Z.idkey[`${$P[this.adType]}_TIMEOUT_RETRY_FAIL`],adType:this.adType,adUnitId:this.adUnitId,error_detail:t}),Promise.reject(t)})).then((t=>(FD.call(this,{key:kD.Z.idkey[`${$P[this.adType]}_TIMEOUT_RETRY_SUCCESS`],adType:this.adType,adUnitId:this.adUnitId,error_detail:{firstTime:i,retryTime:new Date-e,step:3}}),t)))}return VD(n,"Object")&&(n.time=i,n.step=4),FD.call(this,{key:kD.Z.idkey[`${$P[this.adType]}_LOAD_ERROR`],adType:this.adType,adUnitId:this.adUnitId,error_detail:n}),Promise.reject(n)})).then((t=>{this.fetchPromise=null;let n=JSON.parse(t.rawData||"{}"),i=new Date-e;return i>kD.Z.TIMEOUT&&(VD(t,"Object")&&(t.time=i,t.step=4),FD.call(this,{key:kD.Z.idkey[`${$P[this.adType]}_WXDATA_TIMEOUT`],adType:this.adType,adUnitId:this.adUnitId,error_detail:t})),0===n.errcode&&n.game_ad_list&&!n.game_ad_list.length?Promise.reject({errCode:n.errcode||1004}):0!==n.errcode?Promise.reject({errCode:n.errcode}):t})))),this.fetchPromise}};var QP=n(9423);const JP=JSON.stringify({bottomIcon:{position:"absolute",right:0,bottom:0,width:72,height:16},btnGreenBg:{width:67,height:32,lineHeight:32,borderRadius:3,textAlign:"center",justifyContent:"center",alignItems:"center",color:"#ffffff",fontSize:16,backgroundColor:"#07C160",fontWeight:500},btnGrayBg:{width:67,height:32,lineHeight:32,borderRadius:3,textAlign:"center",justifyContent:"center",alignItems:"center",color:"#07C160",fontSize:16,backgroundColor:"rgba(0,0,0,0.05)",fontWeight:500},gameinfoIcon:{width:48,height:48,borderRadius:24,borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:.5},gameNameTagWithoutBorder:{width:25,height:13,color:"#ffffff",backgroundColor:"#F97402",fontSize:10,lineHeight:13,textAlign:"center",borderRadius:2,marginLeft:4,marginTop:3},gameNameTagWithBorder:{width:25,height:13,color:"#ffffff",backgroundColor:"#F97402",fontSize:10,lineHeight:13,textAlign:"center",borderRadius:1,position:"absolute",right:0,bottom:0,borderWidth:1,borderColor:"#ffffff"},feedback:{position:"absolute",left:6,top:6,width:46,height:16,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2},feedbackTitle:{width:22,fontSize:10,height:16,lineHeight:16,color:"#ffffff",marginLeft:8},feedbackImg:{top:7,left:32,width:6,height:3,position:"absolute"},feedbackList:{hidden:!0,height:36,borderRadius:4,backgroundColor:"#4C4C4C",position:"absolute",left:6,top:28,flexDirection:"row",zIndex:2,alignItems:"center"},feedbackItem:{width:78,height:36,lineHeight:36,color:"#ffffff",fontSize:14,textAlign:"center"},feedbackItemSplit:{width:.5,height:24,backgroundColor:"rgba(0, 0, 0, 0.2)"}});const XP=Object.assign(JSON.parse(JP),{container:{width:350,height:300,position:"absoulte",top:0,left:0,overflow:"hidden",hidden:!0,zIndex:2},wrapper:{alignItems:"center",justifyContent:"center",landscape:{flexDirection:"row"}},mask:{backgroundColor:"#000000",opacity:.7,position:"absoulte",top:0,left:0},gameboxwrap:{flexDirection:"row"},gamebox:{width:327,overflow:"hidden",backgroundColor:"#ffffff",borderRadius:10,paddingLeft:16,paddingTop:22,paddingRight:16},title:{height:22,fontSize:17,lineHeight:22,fontWeight:"bold",marginBottom:8,color:"#000000",opacity:.9},closeIconBox:{width:36,height:36,alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.30)",borderColor:"rgba(255,255,255,0.30)",borderWidth:1,borderRadius:18},closeIconBoxVer:{alignSelf:"flex-end",marginBottom:8},closeIconBoxHor:{alignSelf:"flex-start",marginLeft:8},closeIcon:{width:12,height:12},gameinfo:{marginTop:16,flexDirection:"row"},gameinfoBox:{paddingLeft:8,width:263,landscape:{width:401}},gameinfoTitle:{flexDirection:"row"},gameName:{height:22,width:68,fontSize:17,color:"#000000",opacity:.9},gameDesc:{width:174,height:16,fontSize:14,marginTop:4,color:"#000000",opacity:.5},gameTagList:{marginTop:8,flexDirection:"row"},gameTagItem:{marginRight:8,width:36,height:20,backgroundColor:"#C8C8C8",lineHeight:20,textAlign:"center",borderRadius:3,fontSize:12,color:"#000000",opacity:.5,ios:{height:21}},gameFriendValue:{fontSize:14,color:"#000000",opacity:.3,width:180,height:20,lineHeight:20,textAlign:"right",position:"absolute",bottom:16,right:17},gameinfoBorder:{width:255,height:1,backgroundColor:"#000000",marginTop:16,opacity:.1,landscape:{width:393}},gameinfoBorderLast:{width:255,height:1,backgroundColor:"#000000",marginTop:16,opacity:0},close:{width:48,height:48,marginTop:32,borderRadius:24},gamepic:{width:292,height:114,marginTop:16,borderRadius:3,marginBottom:18,landscape:{width:433,height:167}},gameBtnText:{marginTop:16,marginBottom:32,width:184,height:40,lineHeight:40,borderRadius:3,backgroundColor:"#07C160",textAlign:"center",justifyContent:"center",alignItems:"center",marginLeft:0,marginRight:0,color:"#ffffff",fontSize:17,alignSelf:"center",fontWeight:500},emptyBlock:{width:433,height:16},portalBtn:{position:"absolute",right:16,top:8}});let KP='\n    {{? it.showFeedback !== false && it.feedbackList }}\n        <view id="feedback">\n            <text value="广告" id="feedbackTitle" bubbleEvent="true"></text>\n            <image src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190720/closearrow.png" id="feedbackImg" bubbleEvent="true"></image>\n        </view>\n\n        <view id="feedbackList">\n            {{~it.feedbackList:feedbackItem:index}}\n                <text id="feedbackItem__{{=index}}" class="feedbackItem" value="{{=feedbackItem.name}}"></text>\n\n                {{? index < it.feedbackList.length - 1 }}\n                    <view id="feedbackItemSplit"></view>\n                {{?}}\n            {{~}}\n        </view>\n    {{?}}\n';function eR(){let e=(0,Xs.Wj)(this);const t=e.feedbackList;t&&(e.feedback.on("click",(n=>{YD(n)&&(t.style.hidden=!t.style.hidden,e.feedbackImg.src=t.style.hidden?"https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190720/closearrow.png":"https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190720/closearrowup.png")})),e.data.feedbackList.forEach(((t,n)=>{e["feedbackItem__"+n].on("click",(n=>{if(!YD(n))return;const i=e.adType===kD.Z.adType.AD_TYPE_BANNER?e.container:e.gameboxwrap;RD({type:"game_click",params:BD.call(this,{event:n,action_type:t.actionType,layout:i})}),e.container.style.hidden=!0,e.feedbackList.style.hidden=!0,e.emitter.emit("close"),e.adType===kD.Z.adType.AD_TYPE_PORTAL&&Ko.uo.remove(e.container)}))})))}let tR=`\n  <view id="container">\n    <view id="mask"></view>\n    <view id="wrapper">\n        {{? it.deviceOrientation === 'portrait'}}\n            <view id="closeIconBox" class="closeIconBoxVer">\n                <image id="closeIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190713/close.png" bubbleEvent="true"></image>\n            </view>\n        {{?}}\n        <view id="gameboxwrap">\n            <view id="gamebox">\n                <view id="gameAdList">\n                    {{~it.game_ad_list :game:index}}\n                        <view class="gameinfo" id="gameinfo__{{=index}}" bubble-event="true">\n                            <image id="gameinfoIcon" src="{{=game.icon_url}}" bubble-event="true"></image>\n\n                            <view id="gameinfoBox" bubble-event="true">\n                                <view id="gameinfoTitle" bubble-event="true">\n                                    <text id="gameName__{{=index}}" class="gameName {{=game.className}}" value="{{=game.appname}}" bubble-event="true"></text>\n                                    {{? game.is_original_game }}\n                                        <text id="gameNameTagWithoutBorder" value="创意" bubble-event="true"></text>\n                                    {{?}}\n                                </view>\n\n                                {{? game.brief_intro}}\n                                    {{~game.brief_intro_lines :line:lineIndex}}\n                                        <text id="gameDesc" value="{{=line.text}}" class="{{=line.className}}" bubble-event="true"></text>\n                                    {{~}}\n                                {{?}}\n\n                                \x3c!-- 竖屏 - 2个 or 3个游戏，展示2行描述，不展示标签 --\x3e\n                                {{? it.deviceOrientation !== 'portrait' || (it.deviceOrientation === 'portrait' && it.game_ad_list.length === 1)}}\n                                    <view id="gameTagList" bubble-event="true">\n                                        {{~game.tag_list :tag:tagIndex}}\n                                            <text id="gameTagItem" class="{{=game.tag_classlist[tagIndex]}}" value="{{=tag}}" bubble-event="true"></text>\n                                        {{~}}\n                                    </view>\n                                {{?}}\n\n                                \x3c!-- 竖屏多游戏或者横屏模式下才出现 --\x3e\n                                {{? it.game_ad_list.length > 1 || it.deviceOrientation !== 'portrait' }}\n                                    <text id="btnGrayBg" class="portalBtn {{=game.btnClassName || '' }}" value="立即玩"  bubble-event="true"></text>\n                                {{?}}\n\n                                {{? index < it.game_ad_list.length - 1}}\n                                    <view class="gameinfoBorder" id="gameinfoBorder__{{=index}}"></view>\n                                {{?}}\n\n                                {{? index === it.game_ad_list.length - 1 && it.game_ad_list.length > 1}}\n                                    <view id="gameinfoBorderLast"></view>\n                                {{?}}\n                            </view>\n                        </view>\n                    {{~}}\n\n                    {{? it.game_ad_list.length === 1 && it.game_ad_list[0].banner_url }}\n                        <image id="gamepic" src="{{=it.game_ad_list[0].banner_url}}" bubble-event="true"></image>\n                    {{?}}\n\n                    {{? it.game_ad_list.length === 1 && !it.game_ad_list[0].banner_url && it.deviceOrientation !== 'portrait'  }}\n                        <view id="emptyBlock"></view>\n                    {{?}}\n\n                    {{? it.game_ad_list.length === 1 && it.deviceOrientation === 'portrait' }}\n                        <text id="gameBtnText" value="立即玩" bubble-event="true"></text>\n                    {{?}}\n                </view>\n\n                <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n                ${KP}\n            </view>\n\n            {{? it.deviceOrientation !== 'portrait'}}\n                <view id="closeIconBox" class="closeIconBoxHor">\n                    <image id="closeIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190713/close.png" bubbleEvent="true"></image>\n                </view>\n            {{?}}\n        </view>\n    </view>\n  </view>\n`;const nR=QP.Z.template(tR);function iR(e,t){let n=(0,Xs.Wj)(this);if(!YD(e))return;ZP.clickAdd(n.adType);let i=RD({type:"game_click",params:BD.call(this,{event:e,ad_pos_id:1,action_type:xD,layout:n.gameboxwrap,serving_id:t.serving_id||""})});Promise.race([i,$D(500)]).then((()=>{HD.call(this,{appid:t.appid,adType:n.adType,serving_id:t.serving_id||""})})).catch((()=>{HD.call(this,{appid:t.appid,adType:n.adType,serving_id:t.serving_id||""})}))}function rR(){let e=(0,Xs.Wj)(this);if(eR.call(this),e.closeIconBox.on("click",(t=>{YD(t)&&(RD({type:"game_click",params:BD.call(this,{event:t,action_type:DD,layout:e.gameboxwrap})}),e.container.style.hidden=!0,Ko.uo.remove(e.container),e.emitter.emit("close"))})),1===e.data.game_ad_list.length){let t=e.data.game_ad_list[0];e.gameAdList.on("click",(e=>{iR.call(this,e,t)}))}else e.data.game_ad_list.forEach(((t,n)=>{e["gameinfo__"+n].on("click",(e=>{iR.call(this,e,t)}))}))}function oR(e){let t=(0,Xs.Wj)(this);return t.data=e,t.data.dataBackTime=new Date,e.feedbackList=kD.Z.feedbackList,GD().then((n=>{t.data.deviceOrientation=n.deviceOrientation,function(e,t,n){"landscape"===t.deviceOrientation&&(e.gamebox.width=465,e.gameDesc.width=308),e.container.width=t.screenWidth,e.container.height=t.screenHeight,e.mask.width=t.screenWidth,e.mask.height=t.screenHeight,e.wrapper.width=t.screenWidth,e.wrapper.height=t.screenHeight,e.closeIconBoxVer.marginRight=(t.screenWidth-e.gamebox.width)/2,n.deviceOrientation=t.deviceOrientation;let i=function(e,t){return"portrait"===e.deviceOrientation&&t.game_ad_list.length>1?{appname:144,desc:172}:"portrait"===e.deviceOrientation&&1===t.game_ad_list.length?{appname:214,desc:239}:"portrait"!==e.deviceOrientation?{appname:280,desc:308}:void 0}(t,n),r=i.appname,o=i.desc,a=n.game_ad_list.length;n.game_ad_list.forEach((n=>{if("portrait"!==t.deviceOrientation&&1===a&&(n.btnClassName="btnGreenBg"),n.appname){const t=Ap.Z.textMetrics(n.appname,{maxWidth:r-5,maxLines:1,fontSize:e.gameName.fontSize})[0];n.appname=t.text,n.className=`width_${t.width}`,e[n.className]={width:t.width}}const i="portrait"===t.deviceOrientation&&a>1?2:1;if(n.brief_intro){let t=Ap.Z.textMetrics(n.brief_intro,{maxWidth:o-5,maxLines:i,fontSize:e.gameDesc.fontSize});t.forEach((t=>{t.className=`width_${o}`,e[t.className]={width:o}})),n.brief_intro_lines=t}n.tag_classlist=[],n.tag_list&&n.tag_list.length&&n.tag_list.forEach(((t,i)=>{const r=Ap.Z.getTextWidth(t,e.gameTagItem.fontSize)+12;n.tag_classlist[i]=`width_${r}`,e[n.tag_classlist[i]]={width:r}}))}));let s=1;("portrait"===t.deviceOrientation&&t.screenWidth<kD.Z.designWidth||"portrait"!==t.deviceOrientation&&t.screenHeight<kD.Z.designWidth)&&(s="portrait"===t.deviceOrientation?t.screenWidth/kD.Z.designWidth:t.screenHeight/kD.Z.designWidth),"portrait"!==t.deviceOrientation&&t.screenWidth-230<(e.gamebox.width+44)*s&&(s*=(t.screenWidth-230)/((e.gamebox.width+44)*s)),1!==s&&Object.keys(e).forEach((t=>{"container"!==t&&"mask"!==t&&"wrapper"!==t&&(e[t].scale=s)}))}(XP,n,e),tR=nR(e);let{root:i}=Js()(tR);return Xs.S1.call(this,i,XP),Ko.uo.add(t.container),t.container||FD.call(this,{key:kD.Z.idkey.PORTAL_RENDER_ERROR,adType:t.adType,adUnitId:t.adUnitId,error_detail:{msg:"Layout.add error"}}),rR.call(this),t.container.ready()}))}const aR=new class{constructor(){this.map={};for(let e in kD.Z.adType)this.map[kD.Z.adType[e]]={current:null}}show(e,t){this.map[e].current=t}hide(e,t){this.map[e].current===t&&(this.map[e].current=null)}};function sR(e,t){RD({type:"component_load",params:MD.call(this,{load_type:wD,open_time:e.s,cost_time:zD().ms-e.ms,result:t})})}function cR(){let e=(0,Xs.Wj)(this);function t(t){t=t||{};let n=JSON.parse(t.rawData||"{}");e.trace_id=n.trace_id,sR.call(this,e.open_time,parseInt(n.errcode));let i=zD();return oR.call(this,n).then((()=>{e.hasData=!0,e.emitter.emit("load"),RD({type:"component_load",params:MD.call(this,{load_type:ED,open_time:i.s,layout:e.gameboxwrap,cost_time:zD().ms-i.ms,result:0})}),e.emitter.emit("ready")}))}return e.open_time=zD(),e.fetchPromise=e.proxy.fetch().then((e=>t.call(this,e))).catch((t=>(e.fetchPromise=null,sR.call(this,e.open_time,parseInt(t.errCode||t.err_code||-1)),Promise.reject(t)))),e.fetchPromise}function lR(){let e=(0,Xs.Wj)(this);e.isShowed=!1,e.hasData=!1,e.exposure_time=zD(),e.open_time=zD(),e.trace_id="",e.fetchPromise=null,e.showPromise=null,aR.hide(e.adType,e)}function uR(){let e=(0,Xs.Wj)(this);this.isDestroyed=!0,e.emitter.off("_error"),e.emitter.off("load"),aR.hide(e.adType,e),e.container&&Ko.uo.remove(e.container)}function dR(){let e=(0,Xs.Wj)(this);return e.destroyPromise||(e.destroyPromise=new Promise((t=>{e.fetchPromise?e.fetchPromise.then((()=>{uR.call(this),t()})).catch((()=>{uR.call(this),t()})):(uR.call(this),t())}))),e.destroyPromise}class hR extends Xs.wA{constructor(e={}){super();const{adUnitId:t}=e;if(!t)throw new v.iZ("[GamePortal]:"+kD.Z.ERRMSG.NO_ADUNITID_WARN);this.isDestroyed=!1;let n=(0,Xs.Wj)(this);n.adUnitId=t||"",n.adType=CD,n.emitter=new jo.Z,n.proxy=new qP({adUnitId:t,adType:n.adType}),n.destroyPromise=null,n.isReady=!1,lR.call(this),n.emitter.on("ready",(()=>n.isReady=!0)),n.emitter.on("close",(()=>{lR.call(this),this.load()})),this.load()}load(){let e=(0,Xs.Wj)(this);return e.fetchPromise,this.isDestroyed?Promise.reject({errMsg:"组件已经被销毁"}):e.isShowed?Promise.reject({errMsg:"can't invoke load() while GamePortal is showed"}):e.data&&(new Date).toDateString()!==e.data.dataBackTime.toDateString()?(e.container&&Ko.uo.remove(e.container),FD.call(this,{key:kD.Z.idkey.PORTAL_DATA_INVALID,adType:e.adType,adUnitId:e.adUnitId,error_detail:{dataBackTime:e.data.dataBackTime.getTime()}}),cR.call(this).catch((t=>(FD.call(this,{key:kD.Z.idkey.PORTAL_DATA_INVALID_RETRY_FAIL,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"load"}}),e.emitter.emit("_error",qD(t)),Promise.reject(t)))).then((t=>(FD.call(this,{key:kD.Z.idkey.PORTAL_DATA_INVALID_RETRY_SUCCESS,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"load"}}),t)))):e.fetchPromise?e.fetchPromise:cR.call(this).catch((t=>(e.emitter.emit("_error",qD(t)),Promise.reject(t))))}offClose(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("close",e)}offError(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("_error",e)}offLoad(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("load",e)}onClose(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("close",e)}onError(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("_error",e)}onLoad(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("load",e)}show(){if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});let e=(0,Xs.Wj)(this),t=aR.map[e.adType].current;return t&&t!==e?Promise.reject({errMsg:kD.Z.ERRMSG.DUPLICATEWARN}):(aR.show(e.adType,e),e.showPromise?e.showPromise:e.hasData?e.data&&(new Date).toDateString()!==e.data.dataBackTime.toDateString()?(e.container&&Ko.uo.remove(e.container),FD.call(this,{key:kD.Z.idkey.PORTAL_DATA_INVALID,adType:e.adType,adUnitId:e.adUnitId,error_detail:{dataBackTime:e.data.dataBackTime.getTime()}}),cR.call(this).catch((t=>(e.emitter.emit("_error",qD(t)),aR.hide(e.adType,e),FD.call(this,{key:kD.Z.idkey.PORTAL_DATA_INVALID_RETRY_FAIL,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"show"}}),Promise.reject(t)))).then((()=>(FD.call(this,{key:kD.Z.idkey.PORTAL_DATA_INVALID_RETRY_SUCCESS,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"show"}}),e.container.style.hidden=!1,e.showPromise=e.container.nextLayout().then((()=>{e.isShowed=!0,e.exposure_time=zD(),LD.call(this,e.gameboxwrap),ZP.openAdd(e.adType),XD.call(this,e.data.game_ad_list)})),e.showPromise)))):(e.container.style.hidden=!1,e.showPromise=e.container.nextLayout().then((()=>{e.isShowed=!0,e.exposure_time=zD(),LD.call(this,e.gameboxwrap),ZP.openAdd(e.adType),XD.call(this,e.data.game_ad_list)})),e.showPromise):(aR.hide(e.adType,e),Promise.reject({errMsg:kD.Z.ERRMSG.NODATA})))}destroy(){return dR.call(this)}}let pR=`\n    <view id="container">\n        <image id="gameinfoIcon" src="{{=it.game.icon_url}}" bubble-event="true"></image>\n\n        <view id="gameinfoBox" bubble-event="true">\n            <view id="gameinfoTitle" bubble-event="true">\n                <text id="gameName" class="{{=it.game.className}}" value="{{=it.game.appname}}" bubble-event="true"></text>\n                {{? it.game.is_original_game }}\n                    <text id="gameNameTagWithoutBorder" value="创意" bubble-event="true"></text>\n                {{?}}\n            </view>\n            \x3c!-- 换行 --\x3e\n            {{? it.game.brief_intro}}\n                {{~it.game.brief_intro_lines :line:lineIndex}}\n                    <text id="gameDesc" value="{{=line.text}}" class="{{=line.className}}" bubble-event="true"></text>\n                {{~}}\n            {{?}}\n        </view>\n        <text id="btnGreenBg" value="立即玩"  bubble-event="true"></text>\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        ${KP}\n    </view>\n`,fR={container:{width:343,height:108,position:"absoulte",bottom:31,overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,zIndex:1,flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:16},gamebox:{},gameinfoBox:{paddingLeft:8},gameinfoTitle:{flexDirection:"row"},gameName:{height:22,overflow:"visible",width:68,fontSize:17,color:"#000000",opacity:.9},gameDesc:{width:190,height:17,fontSize:14,marginTop:3,color:"#000000",opacity:.5,overflow:"hidden"},gameFriendValue:{fontSize:12,color:"#000000",opacity:.3,width:177,marginTop:5,height:14}};function gR(e,t,n){n.game=n.game_ad_list[0],n.game_ad_list.forEach((t=>{if(t.appname){const n=Ap.Z.textMetrics(t.appname,{maxWidth:145,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=n.text,t.className=`width_${n.width}`,e[t.className]={width:n.width}}if(t.brief_intro){let n=Ap.Z.textMetrics(t.brief_intro,{maxWidth:e.gameDesc.width-10,maxLines:2,fontSize:e.gameDesc.fontSize});n.forEach((t=>{t.className=`width_${e.gameDesc.width}`,e[t.className]={width:e.gameDesc.width}})),t.brief_intro_lines=n,2===n.length&&(e.container.height=120)}}))}fR=Object.assign(JSON.parse(JP),fR);const _R=QP.Z.template(pR);let mR=`\n    <view id="container">\n        {{~it.game_ad_list :game:index}}\n            <view class="gameItem" id="gameinfo__{{=index}}">\n                <view id="gameIconBox" bubble-event="true">\n                    <image id="gameinfoIcon" src="{{=game.icon_url}}" bubble-event="true"></image>\n                    {{? game.is_original_game }}\n                        <text id="gameNameTagWithBorder" value="创意" bubble-event="true"></text>\n                    {{?}}\n                </view>\n\n                <text id="gameName" class="{{=game.className}}" value="{{=game.appname}}" bubble-event="true"></text>\n\n                {{? game.brief_intro }}\n                    <text class="gameFriendValue" value="{{=game.brief_intro}}" id="gameFriendValue__{{=index}}" bubble-event="true"></text>\n                {{?}}\n            </view>\n        {{~}}\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        ${KP}\n    </view>\n`,yR={container:{width:343,position:"absoulte",overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,paddingLeft:18,paddingRight:18,paddingTop:12,paddingBottom:20,flexDirection:"row",justifyContent:"center",zIndex:1},gameItem:{width:167,alignItems:"center",flex:1},gameIconBox:{width:53,heigth:48,overflow:"visible"},gameName:{height:20,width:105,fontSize:14,marginTop:6,textAlign:"center"},gameFriendValue:{fontSize:12,color:"#000000",opacity:.5,width:105,height:15,textAlign:"center"}};const vR=QP.Z.template(mR);function AR(e,t,n){e.container.height=n.game_ad_list.find((e=>e.brief_intro))?120:102,2===n.game_ad_list.length&&(e.gameFriendValue.width=130,e.gameName.width=130),n.game_ad_list.forEach((t=>{if(t.appname){const n=Ap.Z.textMetrics(t.appname,{maxWidth:e.gameName.width-5,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=n.text}if(t.brief_intro=t.tag_list.slice(0,2).join("丨"),t.brief_intro){const n=Ap.Z.textMetrics(t.brief_intro,{maxWidth:e.gameFriendValue.width-5,maxLines:1,fontSize:e.gameFriendValue.fontSize})[0];t.brief_intro=n.text}}))}yR=Object.assign(JSON.parse(JP),yR);let bR=`\n    <view id="container">\n        {{~it.game_ad_list :game:index}}\n            <view class="gameItem" id="gameinfo__{{=index}}">\n                <view id="gameIconBox" bubble-event="true">\n                    <image id="gameinfoIcon" src="{{=game.icon_url}}" bubble-event="true"></image>\n                    {{? game.is_original_game }}\n                        <text id="gameNameTagWithBorder" value="创意" bubble-event="true"></text>\n                    {{?}}\n                </view>\n                <view id="gameinfoBox" bubble-event="true">\n                    <text id="gameName" value="{{=game.appname}}" bubble-event="true"></text>\n\n                    {{? game.brief_intro }}\n                        <text id="gameFriendValue" value="{{=game.brief_intro}}" bubble-event="true"></text>\n                    {{?}}\n                </view>\n                {{? index < it.game_ad_list.length - 1}}\n                    <view id="gameItemRightBorder"></view>\n                {{?}}\n            </view>\n        {{~}}\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        ${KP}\n    </view>\n`,wR={container:{width:334,height:70,position:"absoulte",bottom:31,overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,flexDirection:"row",alignItems:"center",zIndex:1},gameItem:{width:167,flex:1,flexDirection:"row",alignItems:"center"},gameItemRightBorder:{width:1,backgroundColor:"#e5e5e5",height:70},gameIconBox:{width:53,heigth:48,marginLeft:16},gameinfoBox:{paddingLeft:4,width:95},gameName:{height:20,width:88,fontSize:14},gameFriendValue:{fontSize:12,color:"#000000",opacity:.5,width:88,marginTop:0,height:15,textAlign:"left"}};wR=Object.assign(JSON.parse(JP),wR);const ER=QP.Z.template(bR);function TR(e,t,n){e.container.width=167*n.game_ad_list.length,n.game_ad_list.forEach((t=>{if(t.appname){const n=Ap.Z.textMetrics(t.appname,{maxWidth:e.gameName.width-5,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=n.text}if(t.brief_intro=t.tag_list.slice(0,1).join("丨"),t.brief_intro){const n=Ap.Z.textMetrics(t.brief_intro,{maxWidth:e.gameFriendValue.width-5,maxLines:1,fontSize:e.gameFriendValue.fontSize})[0];t.brief_intro=n.text}}))}let SR=`\n    <view id="container">\n        <view id="gameIconBox" bubble-event="true">\n            <image id="gameinfoIcon" src="{{=it.game.icon_url}}" bubble-event="true"></image>\n            {{? it.game.is_original_game }}\n                <text id="gameNameTagWithBorder" value="创意" bubble-event="true"></text>\n            {{?}}\n        </view>\n        <view id="gameinfoBox" bubble-event="true">\n            <view id="gameinfoTitle" bubble-event="true">\n                <text id="gameName" class="{{=it.game.className }}" value="{{=it.game.appname}}" bubble-event="true"></text>\n            </view>\n            {{? it.game.brief_intro}}\n                <text id="gameDesc" value="{{=it.game.brief_intro}}" bubble-event="true"></text>\n            {{?}}\n        </view>\n        <text id="gameBtnText" value="立即玩" bubble-event="true"></text>\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        ${KP}\n    </view>\n`,CR={container:{width:334,height:70,position:"absoulte",bottom:31,overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,paddingLeft:16,paddingRight:16,flexDirection:"row",alignItems:"center",zIndex:1},gameIconBox:{width:53,heigth:48},gameinfoBox:{paddingLeft:4},gameinfoTitle:{flexDirection:"row",height:17},gameName:{height:17,width:170,fontSize:14},gameDesc:{width:180,height:14,fontSize:12,marginTop:4,color:"#000000",opacity:.5,overflow:"hidden"},gameBtnText:{width:67,height:28,lineHeight:28,borderRadius:3,textAlign:"center",justifyContent:"center",alignItems:"center",color:"#06AE56",fontSize:17,backgroundColor:"#f2f2f2"}};CR=Object.assign(JSON.parse(JP),CR);const IR=QP.Z.template(SR);function xR(e,t,n){n.game=n.game_ad_list[0],n.game_ad_list.forEach((t=>{if(t.appname){const n=Ap.Z.textMetrics(t.appname,{maxWidth:e.gameName.width-5,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=n.text}if(t.brief_intro=t.tag_list.slice(0,3).join("丨"),t.brief_intro){const n=Ap.Z.textMetrics(t.brief_intro,{maxWidth:e.gameDesc.width-5,maxLines:1,fontSize:e.gameDesc.fontSize})[0];t.brief_intro=n.text}}))}const DR=n(9536);function OR(e,t){let n=(0,Xs.Wj)(this);if(!YD(e))return;let i=RD({type:"game_click",params:BD.call(this,{event:e,ad_pos_id:1,action_type:xD,layout:n.container,serving_id:t.serving_id||""})});ZP.clickAdd(n.adType),Si.s.log(`clickReportBeforeNavigateToMiniProgram_${t.appid}_${t.serving_id}`),Promise.race([i,$D(500)]).then((()=>{HD.call(this,{appid:t.appid,adType:n.adType,serving_id:t.serving_id||""})})).catch((()=>{HD.call(this,{appid:t.appid,adType:n.adType,serving_id:t.serving_id||""})}))}function PR(){let e=(0,Xs.Wj)(this),t=e.data.game;eR.call(this);1===e.data.game_ad_list.length?e.container.on("click",(e=>{OR.call(this,e,t)})):e.data.game_ad_list.forEach(((t,n)=>{e["gameinfo__"+n].on("click",(e=>{OR.call(this,e,t)}))}))}function RR(e,t){let n=(0,Xs.Wj)(this);n.globalScale=1;let i=1;e.screenWidth<kD.Z.designWidth&&(i=e.screenWidth/kD.Z.designWidth,n.globalScale=i,Object.keys(t).forEach((e=>{t[e].scale=i})));const r={width:t.container.width*i,height:t.container.height*i};let o=(e.screenHeight-r.height-31)/i,a=(e.screenWidth-r.width)/2/i,s=n.devStyle;s.left&&(a=ZD(e,"left",s.left,r)/i),s.top&&(o=ZD(e,"top",s.top,r)/i),t.container.top=o,t.container.left=a}function kR(e,t){const n=t.game_ad_list||[];return"portrait"===e.deviceOrientation?1===n.length?{template:pR,style:fR,tplFn:_R,styleFilter:gR}:{template:mR,style:yR,tplFn:vR,styleFilter:AR}:1===n.length?{template:SR,style:CR,tplFn:IR,styleFilter:xR}:{template:bR,style:wR,tplFn:ER,styleFilter:TR}}function NR(e){let t=(0,Xs.Wj)(this);return t.data=e,t.data.dataBackTime=new Date,e.feedbackList=kD.Z.feedbackList,GD().then((n=>{let{template:i,style:r,tplFn:o,styleFilter:a}=kR(n,e);a.call(this,r,n,e),RR.call(this,n,r),i=o(t.data);let{root:s}=DR(i);return Xs.S1.call(this,s,r),Ko.uo.add(t.container),t.container||FD.call(this,{key:kD.Z.idkey.BANNER_RENDER_ERROR,adType:t.adType,adUnitId:t.adUnitId,error_detail:{msg:"Layout.add error"}}),PR.call(this),t.container.nextLayout()}))}function MR(e,t){RD({type:"component_load",params:MD.call(this,{load_type:wD,open_time:e.s,cost_time:zD().ms-e.ms,result:t})})}function LR(){let e=(0,Xs.Wj)(this),t=e.container.style,n=e.globalScale||1;e.devStyle.left=t.left,e.devStyle.top=t.top,this.style.width=Math.round(t.width*n),this.style.height=Math.round(t.height*n),e.emitter.emit("resize",{width:Math.round(t.width*n),height:Math.round(t.height*n),left:Math.round(t.left*n),top:Math.round(t.top*n)})}function BR(e){let t=(0,Xs.Wj)(this);return NR.call(this,e).then((()=>{LR.call(this),setTimeout((()=>{t.emitter.emit("ready")}),0)}))}const FR=function(){let e=(0,Xs.Wj)(this);return new Promise((t=>{e.isReady?t():e.emitter.on("ready",t)}))};function UR(){let e=(0,Xs.Wj)(this);this.isDestroyed=!0,e.emitter.off("_error"),e.emitter.off("load"),aR.hide(e.adType,e),e.container&&Ko.uo.remove(e.container)}function WR(){let e=(0,Xs.Wj)(this);return e.destroyPromise||(e.destroyPromise=new Promise((t=>{e.fetchPromise?e.fetchPromise.then((()=>{UR.call(this),t()})).catch((()=>{UR.call(this),t()})):(UR.call(this),t())}))),e.destroyPromise}function jR(){let e=(0,Xs.Wj)(this);function t(t){e.emitter.emit("load"),t=t||{};let n=JSON.parse(t.rawData||"{}");e.trace_id=n.trace_id,MR.call(this,e.open_time,parseInt(n.err_code||n.errcode||n.errCode||0));let i=zD();return BR.call(this,n).then((()=>{e.hasData=!0,RD({type:"component_load",params:MD.call(this,{load_type:ED,open_time:i.s,layout:e.container,cost_time:zD().ms-i.ms,result:0})})}))}return e.open_time=zD(),e.fetchPromise=e.proxy.fetch().then((e=>{if(!this.isDestroyed)return t.call(this,e)})).catch((t=>(MR.call(this,e.open_time,parseInt(t.errCode||t.err_code||-1)),Promise.reject(t)))),e.fetchPromise}function GR(e,t){return GD().then((n=>{let i=(0,Xs.Wj)(this);const r={width:i.container.style.width*i.globalScale||1,height:i.container.style.height*i.globalScale||1};return ZD(n,e,t,r)/(i.globalScale||1)}))}class VR extends Xs.wA{constructor(e={}){super();const{adUnitId:t,style:n={left:0,top:0}}=e;if(!t)throw new v.iZ("[GameBanner]:"+kD.Z.ERRMSG.NO_ADUNITID_WARN);n.left||(n.left=0),n.top||(n.top=0),this.isDestroyed=!1,this.style={width:0,height:0};let i=(0,Xs.Wj)(this);i.emitter=new jo.Z,i.adType=SD,i.proxy=new qP({adUnitId:t,adType:i.adType}),i.destroyPromise=null,i.isShowed=!1,i.hasData=!1,i.trace_id="",i.globalScale=1,i.devStyle=n,Object.keys(n).forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>Math.round(i.devStyle[e]*i.globalScale),set:t=>{this.isDestroyed||t!==i.devStyle[e]&&FR.call(this).then((()=>{GR.call(this,e,t).then((t=>{t!==i.devStyle[e]&&(i.devStyle[e]=t,Object.assign(i.container.style,{left:i.devStyle.left,top:i.devStyle.top}),LR.call(this))}))}))}})})),i.isReady=!1,i.emitter.on("ready",(()=>i.isReady=!0)),i.emitter.on("close",(()=>{i.isShowed=!1,aR.hide(i.adType,i)})),jR.call(this).catch((e=>{i.emitter.emit("_error",qD(e))}))}offClose(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("close",e)}offError(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("_error",e)}offLoad(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("load",e)}onError(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("_error",e)}onLoad(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("load",e)}show(){if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});let e=(0,Xs.Wj)(this),t=aR.map[e.adType].current;return t&&t!==e?Promise.reject({errMsg:"同一时刻只能展示一个同一类型的组件"}):(aR.show(e.adType,e),e.isShowed?Promise.resolve():(e.isShowed=!0,e.data&&(new Date).toDateString()!==e.data.dataBackTime.toDateString()&&(e.container&&Ko.uo.remove(e.container),FD.call(this,{key:kD.Z.idkey.BANNER_DATA_INVALID,adType:e.adType,adUnitId:e.adUnitId,error_detail:{dataBackTime:e.data.dataBackTime.getTime()}}),jR.call(this).catch((t=>{aR.hide(e.adType,e),e.emitter.emit("_error",qD(t))}))),e.fetchPromise.then((()=>(e.container.style.hidden=!1,e.exposure_time=zD(),LD.call(this,e.container),ZP.openAdd(e.adType),XD.call(this,e.data.game_ad_list),e.container.nextLayout()))).catch((t=>(aR.hide(e.adType,e),Promise.reject(t))))))}destroy(){return WR.call(this)}hide(){if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});let e=(0,Xs.Wj)(this);return e.isShowed?(e.isShowed=!1,FR.call(this).then((()=>(e.container.style.hidden=!0,e.container.nextLayout().then((()=>{aR.hide(e.adType,e),RD({type:"game_click",params:BD.call(this,{action_type:OD,layout:e.container})})})))))):Promise.resolve()}onResize(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("resize",e)}offResize(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("resize",e)}}const HR=JSON.parse(JSON.stringify({iconcontainer:{width:700,height:1e3},gameIconBoxContainer:{width:72,height:90,alignItems:"center",position:"absolute",hidden:!0},gameIcon:{marginTop:8},gameName:{fontSize:12,height:20,width:72,textAlign:"center",marginTop:4}}));let zR='\n    <view>\n        {{~it.game_ad_list :game:index}}\n            <view id="gameIconBox{{= index}}" class="gameIconBoxContainer" bubble-event="true">\n                <image id="gameIcon{{= index}}" class="gameIcon" src="{{= game.icon_url}}" bubble-event="true"></image>\n                <text id="gameName{{= index}}" class="gameName" value="{{= game.appname}}" bubble-event="true"></text>\n            </view>\n        {{~}}\n    </view>\n';const ZR=QP.Z.template(zR);function YR(e,t,n){let i=(0,Xs.Wj)(this);if(!YD(e))return;let r=RD({type:"game_click",params:BD.call(this,{event:e,ad_pos_id:n+1,action_type:xD,layout:i.gameIconBox0,serving_id:t.serving_id||""})});ZP.clickAdd(i.adType),Promise.race([r,$D(500)]).then((()=>{HD.call(this,{appid:t.appid,adType:i.adType,serving_id:t.serving_id||""})})).catch((()=>{HD.call(this,{appid:t.appid,adType:i.adType,serving_id:t.serving_id||""})}))}function $R(){let e=(0,Xs.Wj)(this);e.data.game_ad_list.forEach(((t,n)=>{e["gameIconBox"+n].on("click",(e=>{YR.call(this,e,t,n)}))}))}function qR(e,t){let n=(0,Xs.Wj)(this);return n.data=e,n.data.dataBackTime=new Date,GD().then((i=>{n.data.deviceOrientation=i.deviceOrientation,function(e,t,n,i){let r=n.game_ad_list||[];i.forEach(((t,n)=>{let i={};e["gameIconBox"+n]=i,i.left=t.left,i.top=t.top;let o={};e["gameIcon"+n]=o;const a=QD(t.size,32,64),s=QD(t.borderWidth,0,10);o.width=a,o.height=a,o.borderColor=t.borderColor,o.borderWidth=s,o.borderRadius=o.width/2;let c={};if(e["gameName"+n]=c,c.color=t.color,c.hidden=t.appNameHidden,i.height=t.appNameHidden?64:90,r[n]&&r[n].appname){const t=Ap.Z.textMetrics(r[n].appname,{maxWidth:e.gameName.width,maxLines:1,fontSize:e.gameName.fontSize})[0];r[n].appname=t.text}}))}(HR,0,e,t),zR=ZR(e);let{root:r}=Js()(zR);for(let e=0;e<this.icons.length;e++)n["gameIconBox"+e]&&Ko.uo.remove(n["gameIconBox"+e]);for(let e=0;e<r.children.length;e++)Xs.S1.call(this,r.children[e],HR),Ko.uo.add(n["gameIconBox"+e]);$R.call(this);let o=[...Array(e.game_ad_list.length)].map(((e,t)=>n["gameIconBox"+t].ready()));return Promise.all(o)}))}function QR(e,t){RD({type:"component_load",params:MD.call(this,{load_type:wD,open_time:e.s,cost_time:zD().ms-e.ms,result:t})})}function JR(){(0,Xs.Wj)(this).emitter.emit("resize",this.icons.slice(0,this.iconCount))}function XR(){let e=(0,Xs.Wj)(this);function t(t){e.emitter.emit("load"),t=t||{};let n=JSON.parse(t.rawData||"{}");this.iconCount=n.game_ad_list.length,e.trace_id=n.trace_id,QR.call(this,e.open_time,parseInt(n.err_code||n.errcode||n.errCode||0));let i=zD();return qR.call(this,n,e.icons).then((()=>{JR.call(this),setTimeout((()=>{e.emitter.emit("ready")}),0),RD({type:"component_load",params:MD.call(this,{load_type:ED,open_time:i.s,layout:e.gameIconBox0,cost_time:zD().ms-i.ms,result:0})})}))}return e.open_time=zD(),e.fetchPromise=e.proxy.fetch().then((e=>{if(!this.isDestroyed)return t.call(this,e)})).catch((t=>(e.fetchPromise=null,QR.call(this,e.open_time,parseInt(t.errCode||t.err_code||-1)),Promise.reject(t)))),e.fetchPromise}const KR=function(){let e=(0,Xs.Wj)(this);return new Promise((t=>{e.isReady?t():e.emitter.on("ready",t)}))};function ek(){let e=(0,Xs.Wj)(this);this.isDestroyed=!0,e.emitter.off("_error"),e.emitter.off("load"),aR.hide(e.adType,e),tk.call(this).forEach((e=>e&&Ko.uo.remove(e)))}function tk(){let e=(0,Xs.Wj)(this),t=[];for(let n=0;n<this.iconCount;n++)t.push(e["gameIconBox"+n]);return t}function nk(){let e=(0,Xs.Wj)(this);return e.destroyPromise||(e.destroyPromise=new Promise((t=>{e.fetchPromise?e.fetchPromise.then((()=>{ek.call(this),t()})).catch((()=>{ek.call(this),t()})):(ek.call(this),t())}))),e.destroyPromise}function ik(){let e=(0,Xs.Wj)(this);for(let t=0;t<e.count;t++)this.icons[t]={},Object.keys(e.icons[t]).forEach((n=>{Object.defineProperty(this.icons[t],n,{configurable:!0,enumerable:!0,get:()=>"width"!==n&&"height"!==n||!e["gameIconBox"+t]?e.icons[t][n]:e["gameIconBox"+t].style[n],set:i=>{if(this.isDestroyed)return;if("width"===n||"height"===n)return console.error("组件的宽高不可设置");if(i===e.icons[t][n])return;let r=e["gameIconBox"+t],o=e["gameIcon"+t],a=e["gameName"+t];if(!r)return;let s=i;KR.call(this).then((()=>{"left"===n||"top"===n?r.style[n]=s:"size"===n?(s=QD(s,32,64),o.style.width=o.style.height=s):"borderColor"===n?o.style[n]=s:"borderWidth"===n?(s=QD(s,0,10),o.style[n]=s):"color"===n?a.style.color=s:"appNameHidden"===n&&(a.style.hidden=s,r.style.height=s?64:84),e.icons[t][n]=s,JR.call(this)}))}})}))}class rk extends Xs.wA{constructor(e={}){super();let{adUnitId:t,count:n,style:i}=e;if(!t)throw new v.iZ("[GameIcon]:"+kD.Z.ERRMSG.NO_ADUNITID_WARN);if(!VD(n,"Number")||n<1||n>9)throw new v.iZ("[GameIcon]: count字段必须是1-9的数字");if(i&&(!VD(i,"Array")||i.find((e=>!VD(e,"Object")))))throw new v.iZ("[GameIcon]: style必须是由对象组成的数组");i||(i=[]);let r=(0,Xs.Wj)(this);this.isDestroyed=!1,this.iconCount=0,this.icons=[],r.count=n,r.icons=[];let o=10,a=0;for(let e=0;e<n;e++)e>0&&e%3==0&&(o=10,a+=84),r.icons[e]=Object.assign({left:o,top:a,appNameHidden:!1,color:"#000000",size:48,borderWidth:0,borderColor:"#FFF8D5",width:64,height:84},i[e]||{}),o+=82;r.emitter=new jo.Z,r.adType=ID,r.proxy=new qP({adUnitId:t,adType:r.adType,maxGameCount:n}),r.destroyPromise=null,r.isShowed=!1,r.trace_id="",r.isReady=!1,r.emitter.on("ready",(()=>r.isReady=!0)),ik.call(this),XR.call(this).catch((e=>{r.emitter.emit("_error",qD(e))}))}load(){let e=(0,Xs.Wj)(this);return e.fetchPromise,this.isDestroyed?Promise.reject({errMsg:"组件已经被销毁"}):e.data&&(new Date).toDateString()!==e.data.dataBackTime.toDateString()?(e.container&&Ko.uo.remove(e.container),FD.call(this,{key:kD.Z.idkey.ICON_DATA_INVALID,adType:e.adType,adUnitId:e.adUnitId,error_detail:{dataBackTime:e.data.dataBackTime.getTime()}}),XR.call(this).catch((t=>(FD.call(this,{key:kD.Z.idkey.ICON_DATA_INVALID_RETRY_FAIL,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"load"}}),e.emitter.emit("_error",qD(t)),Promise.reject(t)))).then((t=>(FD.call(this,{key:kD.Z.idkey.ICON_DATA_INVALID_RETRY_SUCCESS,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"load"}}),t)))):e.fetchPromise?e.fetchPromise:(e.isReady=!1,XR.call(this).catch((t=>(e.emitter.emit("_error",qD(t)),Promise.reject(t)))).then((t=>e.isShowed?(e.isShowed=!1,aR.hide(e.adType,e),this.show()):Promise.resolve(t))))}onLoad(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("load",e)}offLoad(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("load",e)}offError(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("_error",e)}onError(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("_error",e)}show(){if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});let e=(0,Xs.Wj)(this),t=aR.map[e.adType].current;if(t&&t!==e)return Promise.reject({errMsg:"同一时刻只能展示一个同一类型的组件"});if(aR.show(e.adType,e),e.isShowed)return Promise.resolve();if(e.isShowed=!0,e.data&&(new Date).toDateString()!==e.data.dataBackTime.toDateString()&&(tk.call(this).forEach((e=>e&&Ko.uo.remove(e))),FD.call(this,{key:kD.Z.idkey.ICON_DATA_INVALID,adType:e.adType,adUnitId:e.adUnitId,error_detail:{dataBackTime:e.data.dataBackTime.getTime()}}),XR.call(this).catch((t=>{aR.hide(e.adType,e),e.emitter.emit("_error",qD(t))}))),!e.fetchPromise){e.exposure_time=zD(),LD.call(this,e.gameIconBox0),ZP.openAdd(e.adType);let t=[];for(let n=0;n<this.iconCount;n++){let i=e["gameIconBox"+n];i.style.hidden=!1,t.push(i.nextLayout())}return Promise.all(t)}return e.fetchPromise.then((()=>{e.fetchPromise=null,e.exposure_time=zD(),LD.call(this,e.gameIconBox0),ZP.openAdd(e.adType);let t=[];for(let n=0;n<this.iconCount;n++){let i=e["gameIconBox"+n];i.style.hidden=!1,t.push(i.nextLayout())}return XD.call(this,e.data.game_ad_list),Promise.all(t)})).catch((t=>(aR.hide(e.adType,e),Promise.reject(t))))}destroy(){return nk.call(this)}hide(){if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});let e=(0,Xs.Wj)(this);return e.isShowed?(e.isShowed=!1,KR.call(this).then((()=>{let t=[];return tk.call(this).forEach((e=>{e.style.hidden=!0,t.push(e.nextLayout())})),Promise.all(t).then((()=>{aR.hide(e.adType,e),RD({type:"game_click",params:BD.call(this,{action_type:OD,layout:e.gameIconBox0})})}))}))):Promise.resolve()}onResize(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.on("resize",e)}offResize(e){this.isDestroyed||(0,Xs.Wj)(this).emitter.off("resize",e)}}const ok=(0,Ka.Z)("getUserInteractiveStorage","webapi_getuserinteractivedata",{},{},(({keyList:e=[]})=>({key:e}))),ak=((0,Ka.Z)("scanItem","ProductLogic",{},{},(e=>({method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})})),(e=>{delete e.rawData,delete e.errcode,e.products=(e.products||[]).map((e=>({info:{title:e.info.title,category:e.info.category.map((e=>({name:e.name})))}})))})),(0,Ka.Z)("scanItem","ProductLogic",{},{},(e=>({method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})})),(e=>{delete e.rawData,delete e.errcode,e.products=e.products||[]})),()=>{if(!s.Z.ext)return{};try{return JSON.parse(JSON.stringify(s.Z.ext))}catch(e){return{}}}),sk=function(){return{miniProgram:{appId:s.Z.accountInfo&&s.Z.accountInfo.appId||"",envVersion:s.Z.envVersion||"release",version:s.Z.appContactInfo&&s.Z.appContactInfo.user_version||""}}};var ck=n(891),lk=n(926),uk=n.n(lk);const dk=["canvasGetImageData","canvasPutImageData","canvasToTempFilePath","setEnableDebug","startAccelerometer","stopAccelerometer","getBatteryInfo","getClipboardData","setClipboardData","startCompass","stopCompass","addPhoneContact","startGyroscope","stopGyroscope","startBeaconDiscovery","stopBeaconDiscovery","getBeacons","startLocalServiceDiscovery","stopLocalServiceDiscovery","startDeviceMotionListening","stopDeviceMotionListening","getNetworkType","makePhoneCall","scanCode","scanItem","getSystemInfo","vibrateShort","vibrateLong","getExtConfig","chooseLocation","choosePoi","getLocation","startLocationUpdateBackground","startLocationUpdate","stopLocationUpdate","openLocation","chooseMessageFile","loadFontFace","chooseImage","previewImage","getImageInfo","saveImageToPhotosAlbum","compressImage","chooseVideo","saveVideoToPhotosAlbum","checkSession","chooseAddress","authorize","addCard","openCard","chooseInvoice","chooseInvoiceTitle","requestFacetoFacePayment","requestPayment","requestPersonalPay","requestSubscribeMessage","requestOrderPayment","getBackgroundFetchData","setBackgroundFetchToken","getBackgroundFetchToken","getSelectedTextRange","hideKeyboard","showModal","showToast","hideToast","showLoading","hideLoading","showActionSheet","pageScrollTo","startPullDownRefresh","stopPullDownRefresh","setBackgroundColor","setBackgroundTextStyle","setTabBarBadge","removeTabBarBadge","showTabBarRedDot","hideTabBarRedDot","showTabBar","hideTabBar","setTabBarStyle","setTabBarItem","setTopBarText","saveFile","openDocument","getSavedFileList","getSavedFileInfo","removeSavedFile","getFileInfo","getStorage","setStorage","removeStorage","clearStorage","getStorageInfo","closeBLEConnection","closeBluetoothAdapter","createBLEConnection","getBLEDeviceCharacteristics","getBLEDeviceServices","getBluetoothAdapterState","getBluetoothDevices","getConnectedBluetoothDevices","notifyBLECharacteristicValueChange","openBluetoothAdapter","readBLECharacteristicValue","startBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","writeBLECharacteristicValue","getHCEState","sendHCEMessage","startHCE","stopHCE","getScreenBrightness","setKeepScreenOn","setScreenBrightness","connectWifi","getConnectedWifi","getWifiList","setWifiList","startWifi","stopWifi","getBackgroundAudioPlayerState","playBackgroundAudio","pauseBackgroundAudio","seekBackgroundAudio","stopBackgroundAudio","getAvailableAudioSources","startRecord","stopRecord","setInnerAudioOption","playVoice","pauseVoice","stopVoice","closeSocket","sendSocketMessage","hideShareMenu","showShareMenu","updateShareMenu","getSetting","openSetting","checkIsSoterEnrolledInDevice","checkIsSupportSoterAuthentication","startSoterAuthentication","navigateBackMiniProgram","navigateToMiniProgram","setNavigationBarTitle","showNavigationBarLoading","hideNavigationBarLoading","hideHomeButton","setNavigationBarColor","redirectTo","reLaunch","navigateTo","switchTab","navigateBack","checkIsUserAdvisedToRest","getUserGameLabel","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getUserCloudStorage","getUserInteractiveStorage","modifyFriendInteractiveStorage","removeUserCloudStorage","setUserCloudStorage","exitVoIPChat","joinVoIPChat","updateVoIPChatMuteConfig","showKeyboard","updateKeyboard","openCustomerServiceConversation","setMenuStyle","setStatusBarStyle","exitMiniProgram","requestMidasPayment","showRedPackage","chooseMedia","requestSubscribeSystemMessage","getGroupInfo","getBLEDeviceRSSI","createBLEPeripheralServer","subscribeVoIPVideoMembers","previewMedia","makeBluetoothPair","setBLEMTU","getVideoInfo","compressVideo","checkIsOpenAccessibility","requestFacetoFacePayment","updateWeChatApp","join1v1Chat","setEnable1v1Chat","shareToWeRun","addPhoneCalendar","addPhoneRepeatCalendar","getRandomValues","showShareImageMenu","shareFileMessage","shareVideoMessage","addFileToFavorites","addVideoToFavorites","getUserProfile","searchContacts","publishWeChatState"];var hk=n(6500);let pk={};function fk(e,t=!0){Reporter.reportKeyValue({key:"MidasFriendPayment",value:[pk.scene,1,31,t?1:2,0,"1","",0,"",(0,Ae._getCurrentNetworkType)(),0,0,0,0,0,pk.scene_note,encodeURIComponent(JSON.stringify({label:e.mark_type,report_info:e.report_info,sessionId:pk.sessionid||pk.sessionId}))].join(",")})}s.Z.onReady((()=>{pk=s.Z.appLaunchInfo||{},function(){const e=(pk.referrerInfo||{}).messageExtraData||{};(0,er.JM)({apiName:"webapi_game_getsharemarkingame",reqData:{lib_version:Sc.c,scene:pk.scene,launch_with_share_mark:!!e.shareCardMarker},success:({rawData:e})=>{if(!e)return;(JSON.parse(e).mark_list||[]).forEach(((e,t)=>setTimeout((()=>{fk(e),function({label:e,icon:t,tag:n,data:i,more:r=!1}){(0,hk._)({label:e,icon:t,tag:n,more:r,background:"transparent",base64:a.wZ}).then((t=>{const n=new Ko.Ee({src:t,autoInsert:!0,style:{left:0,width:210,height:40,opacity:0,top:/landscape/.test(s.Z.deviceOrientation)?48:104}});let o=!1;r&&n.on("click",(()=>{o=!0,(0,er.JM)({apiName:"webapi_game_getfriendsscore",success:({rawData:t})=>{const n=JSON.parse(t).friend_score_list||[];(0,us.q7)({title:e,list:n})}}),fk(i,!1),n.destroy()})),(0,c.IN)("animateCoverView",{viewId:n.id,finalStyle:{opacity:1},duration:250,easing:"ease-out"}),setTimeout((()=>{setTimeout((()=>o||n.destroy()),300),o||(0,c.IN)("animateCoverView",{viewId:n.id,finalStyle:{opacity:0},duration:200,easing:"ease-in"})}),5250)}))}({data:e,label:e.wording,icon:e.head_img_url,tag:e.mark_word,more:6===e.mark_type})}),2e3+4500*t)))}})}()}));let gk=null,_k=!1;const mk=()=>!0===_k||("function"!=typeof getProfiler?(void 0!==o.Z.Profiler&&(gk=o.Z.Profiler,_k=!0),!0):(gk=getProfiler(),gk&&(_k=!0),!0));let yk=!1;const vk=()=>(mk(),gk?(yk||(yk=!0,gk.startCpuProfiling()),!0):null),Ak=()=>{if(mk(),!gk)return null;if(yk){yk=!1;const e=gk.stopCpuProfiling();return e}return null};function bk(e){let t="";for(let n=0;n<e.length;){const i=e[n];let r=0;i>>>7==0?(t+=String.fromCharCode(e[n]),n+=1):252==(252&i)?(r=(3&e[n])<<30,r|=(63&e[n+1])<<24,r|=(63&e[n+2])<<18,r|=(63&e[n+3])<<12,r|=(63&e[n+4])<<6,r|=63&e[n+5],t+=String.fromCharCode(r),n+=6):248==(248&i)?(r=(7&e[n])<<24,r|=(63&e[n+1])<<18,r|=(63&e[n+2])<<12,r|=(63&e[n+3])<<6,r|=63&e[n+4],t+=String.fromCharCode(r),n+=5):240==(240&i)?(r=(15&e[n])<<18,r|=(63&e[n+1])<<12,r|=(63&e[n+2])<<6,r|=63&e[n+3],t+=String.fromCharCode(r),n+=4):224==(224&i)?(r=(31&e[n])<<12,r|=(63&e[n+1])<<6,r|=63&e[n+2],t+=String.fromCharCode(r),n+=3):192==(192&i)?(r=(63&e[n])<<6,r|=63&e[n+1],t+=String.fromCharCode(r),n+=2):(t+=String.fromCharCode(e[n]),n+=1)}return t}const wk="STOP_CPU_PROFILE",Ek="TAKE_HEAP_SNAPSHOT",Tk="PERFDOG_METHOD",Sk="PERFDOG_METHOD_CALLBACK",Ck="LAN_DEBUG_GET_DEVICE_INFO",Ik="LAN_DEBUG_PLUGIN_GET_DEVICE_INFO",xk="OPEN",Dk="CLOSED",Ok="ERROR",Pk="CONNECTING",Rk="LAN_DEBUG_STATUS_CHANGE";let kk=!1;function Nk(e,t){const{model:n,version:i,system:r,SDKVersion:o}=(0,ve.Oo)(),{accountInfo:a,isDevEdition:c}=s.Z,{appId:l,nickname:u}=a,d={model:n,wechatVersion:i,system:r,SDKVersion:o,appId:l,nickname:u,isDevEdition:!!c};t(e,JSON.stringify(d))}function Mk(e,t,i){kk||(kk=!0,function(e){const t=n.g.LanDebug;t&&(p.aI||delete n.g.LanDebug,t.registerCallback?t.registerCallback(Tk,((t,n)=>{e(Sk,n)})):t.registerCallback)}(t),e(Ck,(()=>{Nk(Ck,t)})),e(Ik,(()=>{Nk(Ik,t)})),e(Tk,(e=>{const n="undefined"!=typeof getPerfDog?getPerfDog():void 0;let i="PerfDog not found";n&&n.handle&&(i=n.handle(Tk,e)),t(Sk,i)})),e("START_CPU_PROFILE",(()=>{vk()})),e(wk,(()=>{let e=Ak();a.wZ&&e&&(e.constructor.toString().includes("ArrayBuffer")?e=bk(new Uint8Array(e)):"object"==typeof e&&(e=JSON.stringify(e))),t(wk,e||"")})),e(Ek,(()=>{setTimeout((()=>{const e=(mk(),gk?gk.takeHeapSnapshot():null);if(t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"start"})),!e)return t(Ek,""),t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"error"})),!1;if(e.on){const n=i(Ek);let r=!1;e.on("data",(e=>{r||(t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"data"})),r=!0),n.send(e.slice())})),e.on("end",(()=>{t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"end"})),n.end(new ArrayBuffer(0))})),e.on("error",(e=>{t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"error"})),n.end(new ArrayBuffer(0))})),e.flush()}return!0}),100)})))}let Lk=0;const Bk=ce();let Fk=null;const Uk=()=>Fk||(Fk=uk()("\n  message LanDebugHeader {\n    required int32 version = 0;         // 版本，用于升级时兼容用\n    required string method = 1;         // 命令字，代表该包行为\n    required int32 id = 2;              // 命令序号，client端每次给server发命令可以弄一个自增序号，这样方便server处理isEnd。\n    required bool isString = 3;         // 若开发者传输的原始数据是string，需要标识，用于服务端处理\n    required string clientId = 4;       // 客户端会唯一生成一个ID\n    optional bool notEnd = 5;           // 若isEnd为true，代表这次命令已经发送完毕\n    optional string options = 6;        // 预留字段，后续可能会有一些用\n  }\n"),Fk),Wk=((e=6)=>{(e>=13||e<0)&&(e=13);const t=`${Date.now()}`.slice(-e).split("");for(let n=0;n<Math.floor(e/2);n++){const e=Math.floor(10*Math.random());t[n]="abcdefghij"[e]}return t.join("")})(),jk=new Ne.Z;let Gk=null,Vk=Dk,Hk="",zk=-1,Zk=!1,Yk=null,$k=null;const qk=[],Qk=[],Jk=[];function Xk(e){let t;try{if("object"!=typeof e)return Promise.resolve(!1);if("string"!=typeof e.ip||"string"!=typeof e.token)return Promise.resolve(!1);t=e}catch(e){return Promise.resolve(!1)}if(Vk===xk&&$k)return Promise.resolve($k);if(Vk===Pk)return Gk;const{ip:n,port:i,token:r,useStaticServer:o=!1,mode:a}=t;Zk=o,Hk=n,zk=i,Vk=Pk;const s="mpHelper"===a?"MPHELPER":"LANDEBUG",c=(0,ve.Oo)();return Mk(iN,tN,nN),Gk=new Promise((e=>{$k=Bk.connectSocket({url:`ws://${n}:${i}`,protocols:[`${encodeURI(`${s}#${c.system}_v${c.version}_${Wk}`)}||${r}`]}),$k.onOpen((()=>{$k.send({data:"ping",success(){qk.forEach((e=>{rN(e)}))},fail(e){}}),Vk=xk,jk.emit(Rk,Vk),e($k)})),$k.onMessage((e=>{if(e.data&&"pong"===e.data)return wxConsole.info("[LAN DEBUG] hand shake success");if(e.data.length<4||"string"==typeof e.data)return;const t=new Uint8Array(e.data),n=t.slice(0,4),i=new Uint32Array(n)[0],r=t.slice(4,4+i);let o;try{o=Uk().LanDebugHeader.decode(r)}catch(e){return e.message,void e.stack}const{isString:a,method:s}=o;let c;if(a){c=bk(t.slice(4+i))}else c=t.slice(4+i).buffer;jk.emit(s,c)})),$k.onClose((()=>{Kk(Dk),Jk.forEach((e=>{aN(e)}))})),$k.onError((e=>{Kk(Ok),Yk=e,Qk.forEach((e=>{oN(e)}))}))})),Gk}function Kk(e){Vk=e,jk.emit(Rk,Vk),Hk="",zk=-1,Zk=!1,$k=null}function eN(e,t,n="",i){if(void 0===n||"string"!=typeof n&&!n.constructor.toString().includes("ArrayBuffer"))return!1;let r=!1;return Gk?("string"==typeof n&&(r=!0,n=function(e){const t=[];let n;const i=e.length;for(let r=0;r<i;r++)n=e.charCodeAt(r),n>=65536&&n<=1114111?(t.push(n>>18&7|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128)):n>=2048&&n<=65535?(t.push(n>>12&15|224),t.push(n>>6&63|128),t.push(63&n|128)):n>=128&&n<=2047?(t.push(n>>6&31|192),t.push(63&n|128)):t.push(255&n);const r=new Int8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t[e];return r.buffer}(n)),Gk.then((o=>new Promise((a=>{if(!o)return a({errMsg:"sendSocketMessage:fail no client"});const c=Uk().LanDebugHeader.encode(Object.assign({version:2,method:t,id:e,isString:r,clientId:Wk,options:JSON.stringify({isDevEdition:s.Z.isDevEdition})},i?{notEnd:!0}:{})),l=new Uint32Array([c.length]);o.send({data:new Uint8Array([...new Uint8Array(l.buffer),...new Uint8Array(c.buffer),...new Uint8Array(n)]).buffer,success(e){a(e)},fail(e){a(e)}})}))))):Promise.resolve({errMsg:"sendSocketMessage:failed"})}const tN=function(e,t){return eN(Lk++,e,t)},nN=function(e){const t=Lk++;return{send:n=>eN(t,e,n,!0),end:(n=new ArrayBuffer(0))=>eN(t,e,n)}},iN=function(e,t){jk.on(e,t)},rN=function(e){try{e()}catch(e){e.message,e.stack}},oN=function(e){try{e(Yk)}catch(e){e.message,e.stack}},aN=function(e){try{e(Yk)}catch(e){e.message,e.stack}},sN={sendPackage:tN,sendStream:nN,onMessage:iN,offMessage:function(e,t){jk.off(e,t)},onReady:function(e){"function"==typeof e&&(Vk===xk?rN(e):qk.push(e))},onError:function(e){"function"==typeof e&&(Vk===Ok?oN(e):Qk.push(e))},onClose:function(e){"function"==typeof e&&(Vk===Ok?aN(e):Jk.push(e))},get status(){return Vk},get ip(){return Hk},get port(){return zk},get useStaticServer(){return Zk}};Object.defineProperty(sN,"_start",{get:()=>(...e)=>Xk(...e)});let cN,lN;(0,Uo.dN)((()=>{(e=>{setTimeout((()=>{const{ip:t,port:n,token:i,useStaticServer:r,useLanDebug:o}=(e.debugLaunchInfo||{}).lanDebugInfo||{};if((e.isDevEdition||o)&&(e.debugLaunchInfo,e.isDevEdition,t&&n&&i))return Xk({ip:t,port:n,token:i,useStaticServer:r})}),500)})(s.Z)}));let uN=!1;const dN={},hN=JSON.parse;let pN="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",fN="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function gN(){if("string"==typeof s.Z.opConfig){let e;try{e=hN(s.Z.opConfig)}catch(e){}return e&&e.expt_info}return s.Z.opConfig&&s.Z.opConfig.expt_info}function _N(){const e=gN();let t;return e&&uN?(t=1,cN=e,Reporter.reportIDKey({key:"useLaunchExptInfo"})):e?(t=2,cN=e,Reporter.reportIDKey({key:"useLaunchExptInfo"}),Reporter.reportIDKey({key:"useOriginLaunchExptInfo"})):(t=0,Reporter.reportIDKey({key:"useContactExptInfo"})),{exptInfo:cN,jsDataType:t}}function mN(){if("undefined"==typeof __appServiceEngine__)return"";const e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}"string"==typeof pN&&(pN=pN.replace(" ","")),"string"==typeof fN&&(fN=fN.replace(" ","-")),(0,es.n)("onAppEnterForeground",(e=>{Object.assign(dN,e),lN=dN.sessionId})),d((e=>{gN()&&(uN=!0)})),s.Z.onReady((()=>{Object.assign(dN,s.Z.appLaunchInfo);const e=gN();e?cN=e:s.Z.appContactInfo&&s.Z.appContactInfo.passThroughInfo&&(cN=s.Z.appContactInfo.passThroughInfo.expt_info)}));const yN=(0,Ka.Z)("getExptInfo","webapi_wxaexpt_hit",{},{},(({keyList:e})=>({param_name_list:e})),(e=>(e.list={},Array.isArray(e.hit_list)&&e.hit_list.forEach((t=>{e.list[t.param_name]=t.param_value})),delete e.base_resp,delete e.hit_list,delete e.rawData,e)));var vN=n(8013);let AN=!1;mn.U.on("beforeTouchEnd",(()=>{AN=!0})),mn.U.on("afterTouchEnd",(()=>{AN=!1})),(0,Uo.vv)((()=>{AN=!1}));const bN=(e,t)=>n=>{AN?t(n):(0,qe.YG)(e,n,"require user interaction (only in touchend event)")},wN=bN("openChannelsLive",vN.Xo),EN=bN("openChannelsActivity",vN.LE),TN=bN("openChannelsUserProfile",vN.jL),SN="navigateToUserCenter",CN=(0,er.Ce)(!1,"getadcardrechargeinfo"),IN=(0,p.Fr)(ls.n);let xN=null,DN=!1;const ON=()=>(xN?Promise.resolve(xN):new Promise(((e,t)=>{CN({apiName:"webapi_getadcardrechargeinfo",reqData:{},success(n){const i=JSON.parse(n.rawData);i.rechargeUrl?(xN=i,e(xN)):t(i)},fail:t})}))).then((e=>{const t=e.rechargeUrl;return IN({url:t,isNativeStyle:!0})})),PN="requestConsumeAdsSkipCard",RN=(0,p.Fr)((0,er.Ce)(!1,"check")),kN=(0,p.Fr)((0,er.Ce)(!1,"consume")),NN=(0,p.Fr)(Oe.I6);let MN=!1;function LN({amount:e,subactionID:t}){Reporter.reportKeyValue({key:"MidasFriendPayment",value:["",1,10,18,t,"","","","",(0,Ae._getCurrentNetworkType)(),"","","","","","",encodeURIComponent(JSON.stringify({num:e}))].join(",")})}function BN(e){const{amount:t}=e;return LN({subactionID:1}),NN({content:`使用 ${t} 张广告跳过卡`,confirmText:"确认",cancelText:"取消"}).then((n=>{if(n.confirm)return e;throw LN({amount:t,subactionID:7}),{errMsg:"cancel"}}))}function FN({token:e,amount:t}){return kN({apiName:"webapi_payadcardcostorder",reqData:{token:e}}).then((e=>{const n=JSON.parse(e.rawData),{errMsg:i,errCode:r}=n;if(0===r)return LN({amount:t,subactionID:3}),(0,Oe.CF)({icon:"none",title:`已消耗${t}张广告跳过卡`,duration:1e3}),n;throw LN({amount:t,subactionID:4}),(0,Oe.CF)({icon:"none",title:"广告跳过卡使用失败，请重试",duration:2500}),{errMsg:i,errCode:r}})).catch((e=>{throw LN({amount:t,subactionID:4}),e}))}const UN=(0,Ka.Z)("getAdsSkipCardSharePresentQuota","webapi_getadcardsharepresentquota",{},{},(()=>({})),(e=>{delete e.rawData,delete e.clientInfo})),WN=(0,p.Fr)((0,er.Ce)(!1,"getLatestUserKey")),jN="getLatestUserKey";let GN={},VN=null;const HN={getLatestUserKey:function(e){(GN.expireTime&&GN.expireTime<Date.now()?Promise.resolve(GN):VN||(VN=WN({apiName:"webapi_getuserencryptkey",reqData:{}}).then((e=>{e=JSON.parse(e.rawData);const{encrypt_key:t,version:n,expire_in:i,iv:r}=e;return GN={encryptKey:t,version:n,expireTime:Date.now()+1e3*i,iv:r},VN=null,GN})).catch((e=>{throw VN=null,e})),VN)).then((t=>((0,qe.FE)({name:jN,args:e,res:t}),null))).catch((t=>{(0,qe.YG)(jN,e,t.message)}))},getRandomValues:(e={})=>{(0,c.r3)("getRandomValues",e,{length:0})&&((!Number.isInteger(e.length)||e.length<=0||e.length>1048576)&&(0,c.YG)("getRandomValues",e,"invalid length"),(0,c.IN)("getRandomValues",e))}};var zN=n(5977);let ZN=!1;(0,zN.DT)((e=>{const{event:t}=e;1===t?ZN=!0:0===t&&(ZN=!1)}));const YN=()=>({isLive:ZN}),$N="getUserRecentGameLiveInfo",qN=(0,er.Ce)(!1,$N),QN="getUserCurrentGameliveInfo",JN=(0,er.Ce)(!1,QN),XN="getUserGameLiveDetails",KN=(0,er.Ce)(!1,XN);Oc||(Oc=!0,s.Z.onReady((()=>{(0,p.aI)()&&(setTimeout((()=>{const e=Nc=Object.assign({},s.Z.appLaunchInfo||{},(0,Gr.x9)()||{});Hc({scene:e.scene||-1,isLaunch:!0,sessionId:e.sessionid||e.sessionId||""}),(0,Yo.OQ)(Hc),(0,Tc.Ry)(zc)}),0),Dc=(0,ve.mw)())}))),(0,cs.az)();const eM=no.Z,tM=ao,nM=uo,iM=_o,rM=mo,oM=yo,aM=vo,sM=e=>{bo=__errorTracer__.surroundThirdByTryCatch(e,"at onShareAppMessage callback function")},cM=()=>{bo=null},lM=e=>{Lo=__errorTracer__.surroundThirdByTryCatch(e,"at onShareTimeline callback function")},uM=()=>{Lo=null},dM=()=>{(0,Fo.v)("onLaunch"),console.warn("onLaunch 已废弃，请使用 wx.getLaunchOptionsSync()。")},hM=()=>{(0,Fo.v)("offLaunch"),console.warn("offLaunch 已废弃")},pM=Uo.Ke,fM=Uo.il,gM=Uo.Jv,_M=Uo.Or,mM=Uo.TU,yM=Uo.yC,vM=e=>{zo=e},AM=()=>{zo=null},bM=function(e){Wo.on("down",e)},wM=function(e){Wo.off("down",e)},EM=function(e){Wo.on("up",e)},TM=function(e){Wo.off("up",e)},SM=e=>{Go.on("onKeyboardInput",e)},CM=e=>{Go.off("onKeyboardInput",e)},IM=e=>{Go.on("onKeyboardConfirm",e)},xM=e=>{Go.off("onKeyboardConfirm",e)},DM=e=>{Go.on("onKeyboardComplete",e)},OM=e=>{Go.off("onKeyboardComplete",e)},PM=e=>po.on("Wheel",e),RM=e=>po.off("Wheel",e),kM=e=>{mn.U.on("onWindowResize",e)},NM=e=>{mn.U.off("onWindowResize",e)},MM=Uo.RZ,LM=Uo.FL,{onTouchStart:BM,offTouchStart:FM,onTouchMove:UM,offTouchMove:WM,onTouchEnd:jM,offTouchEnd:GM,onTouchCancel:VM,offTouchCancel:HM}=eM,{onMouseDown:zM,offMouseDown:ZM,onMouseMove:YM,offMouseMove:$M,onMouseUp:qM,offMouseUp:QM}=tM,{onPointerLockChange:JM,offPointerLockChange:XM,onPointerLockError:KM,offPointerLockError:eL}=nM,{setStorage:tL,setStorageSync:nL,getStorage:iL,getStorageSync:rL,getStorageInfo:oL,getStorageInfoSync:aL,removeStorage:sL,removeStorageSync:cL,clearStorage:lL,clearStorageSync:uL}=me.game;Protect.hijack(!0,!1);const dL=se.connectSocket,hL=se.closeSocket,pL=se.sendSocketMessage,fL=se.onSocketOpen,gL=se.onSocketClose,_L=se.onSocketMessage,mL=se.onSocketError,yL=ye.BN.dv,vL=ye.BN.KQ,AL=ye.BN.rf,bL=ye.BN.hx,wL=ye.BN.kv,EL=ye.BN.bz,TL=ye.BN.R0,SL=Oe.CF,CL=Oe.PE,IL=Oe.QP,xL=Oe.Zk,DL=Oe.K4,OL=Oe.Cy,PL=(e={})=>{const t=Object.assign({},e);t.style=t.type,(0,c.IN)("vibrateShort",t,{})},RL=(e={})=>{(0,c.IN)("vibrateLong",e,{})},kL=function(e){if(!(0,c.r3)("joinVoIPChat",e,{signature:"",nonceStr:"",timeStamp:0,groupId:""}))return;const t="video"===e.roomType?1:2,n=Object.assign({},e,{muteConfig:SO(e.muteConfig),handsFree:!(0,P.jn)(e.handsFree)||e.handsFree,roomType:t}),i=(0,yn.hI)(this);(0,c.qu)(i)("joinVoIPChat",n,{beforeSuccess(e){(0,c.nY)("joinVoIPChat",{}),e.errCode=0},beforeFail(e){void 0===e.errCode&&(e.errCode=(e=>{const t=new RegExp(/^joinVoIPChat:(?:fail )?fail: (-?[0-9]+?), (-?[0-9]+?), .*/).exec(e);if(!t)return-1e3;const n=parseInt(t[1],10),i=parseInt(t[2],10);if(-10086!==n&&-10087!==n)return-1e3;switch(i){case 0:return 0;case-1:return-1;case-7:return-2;default:return-1e3}})(e.errMsg))}})},NL=function(e){try{const t=(0,yn.hI)(this);(0,c.qu)(t)("exitVoIPChat",Object.assign({},e,{success(t){const n=t.errMsg||"ok";(0,c.nY)("exitVoIPChat",{}),(0,c.FE)({name:"exitVoIPChat",args:e,errMsg:n,errCode:0,res:t})},fail(t){const n=t.errCode||-1,i=t.errMsg||"unknown error";(0,c.FE)({name:"exitVoIPChat",args:e,success:!1,errMsg:i,errCode:n,res:t})},complete(){}}))}catch(t){"function"==typeof e.fail&&e.fail({errCode:-1,errMsg:`exitVoIPChat:fail ${t.message}`}),"function"==typeof e.complete&&e.complete({errCode:-1,errMsg:`exitVoIPChat:complete ${t.message}`})}},ML=function(e){if(!(0,c.r3)("updateVoIPChatMuteConfig",e,{muteConfig:{}}))return;const t=(0,yn.hI)(this);(0,c.qu)(t)("updateVoIPChatMuteConfig",Object.assign({},e,{muteConfig:SO(e.muteConfig),handsFree:!(0,P.jn)(e.handsFree)||e.handsFree}))},LL=IO,BL=e=>{try{(0,c.jQ)("onVoIPChatSpeakersChanged",(t=>{t.errCode=0,t.errMsg=t.errMsg||"ok","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}))}catch(t){t.errCode=t.errCode||-1,t.errMsg=t.errMsg||"unknown error","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}},FL=PO,UL=xO,WL=()=>{(0,c.jQ)("onVoIPChatSpeakersChanged",(()=>{}))},jL=RO,GL=(e={})=>{(0,c.r3)("subscribeVoIPVideoMembers",e,{openIdList:[]})&&(0,c.IN)("subscribeVoIPMembers",e,{beforeAll(e){e.errMsg=e.errMsg.replace("subscribeVoIPMembers","subscribeVoIPVideoMembers")}})},VL=NO,HL=MO,zL=BO,ZL=FO,YL={request:m.W,downloadFile:y.S,uploadFile:T,addNativeDownloadTask:(e={})=>{a.cj?(0,c.YG)("addNativeDownloadTask",e,"iOS not supported"):(0,c.IN)("addNativeDownloadTask",e,{})},calRqt:(e={})=>{(0,c.r3)("calRqt",e,{rqt:""})&&(0,c.IN)("calRqt",e)},connectSocket:dL,closeSocket:hL,sendSocketMessage:pL,onSocketOpen:fL,onSocketClose:gL,onSocketMessage:_L,onSocketError:mL,getNetworkType:Ae.getNetworkType,onNetworkStatusChange:Ae.onNetworkStatusChange,offNetworkStatusChange:Ae.offNetworkStatusChange,openDocument:le.KK,setStorage:tL,setStorageSync:nL,getStorage:iL,getStorageSync:rL,getStorageInfo:oL,getStorageInfoSync:aL,removeStorage:sL,removeStorageSync:cL,clearStorage:lL,clearStorageSync:uL,authorize:ye.Iq,checkSession:ye.bV,getUserInfo:ye.bG,getUserProfile:ye.et,login:ye.x4,openSetting:ye.as,getSetting:ye.$8,sendGroupMessage:ye.TP,reportGroupShare:ye.Xw,operateWXData:ye.Lo,getWeRunData:ye.wN,uploadWeRunData:ye.z9,addWeRunData:ye.p4,getGroupMsgTicket:e=>{const t=ma.Z.get(e.shareTicket);t&&t.shareKey?(0,_a.k)(Object.assign({},e,{shareKey:t.shareKey})):(0,c.YG)("getGroupMsgTicket",e,"invalid shareTicket")},removeUserCloudStorage:Nl,setUserCloudStorage:Ol,openCustomerServiceConversation:(e={})=>{dO?((0,cs.y4)(cs.F0.EVENT_CANVAS_BEFORE_JUMP_TO_CUSTOMER_SERVICE),(0,Oe.I6)({content:`即将进入“${uO.nickname}”客服会话`,confirmText:"确认",cancelText:"取消",success(t){t.confirm?(0,c.IN)("enterContact",e,{}):(0,c.YG)("openCustomerServiceConversation",e,"cancel")},fail(){(0,c.YG)("openCustomerServiceConversation",e,"showModal fail")}})):(0,c.YG)("openCustomerServiceConversation",e,"require user interaction")},sendRedPacket:ye.Me._p,openRedPacket:ye.Me.WZ,sendBizRedPacket:ye.Me.FA,showRedPackage:ye.Me.qU,reportAnalytics:(e,t)=>{const n="undefined"!=typeof __appServiceEngine__&&void 0!==__appServiceEngine__.getCurrentPagesByDomain&&__appServiceEngine__.getCurrentPagesByDomain(""),i=n&&n.pop&&n.pop(),r={business:"mmbizwxaanalytics",eventID:e,data:t||{},page:i&&i.__route__,uid:Date.now().toString(16)+Math.random().toString(16).substr(2),type:1,version:wx&&wx.version&&wx.version.version||0};a.gm||(console.info("[自定义分析] 上报成功"),console.info(r)),(0,c.IN)("reportRealtimeAction",{actionData:JSON.stringify(r)})},reportMonitor:(e,t)=>{if(!e)return void console.error("wx.reportMonitor: require 'name' argument.");if(void 0===t&&(t=1),"number"!=typeof t)return void console.error("wx.reportMonitor: 'value' argument must be a Number.");const n=JSON.stringify({business:"mmbizwxamonitor",name:e,value:t,timeStamp:Date.now()});(0,c.IN)("reportRealtimeAction",{actionData:n})},requestSubscribeMessage:e=>{(0,XO.V)()?KO(e):(0,qe.YG)("requestSubscribeMessage",e,"require user interaction (only in touchend event)")},requestSubscribeSystemMessage:function(e={}){iP?(0,c.YG)(tP,e,"please invoke after last subscription ended"):(iP=!0,(0,XO.U)().then((()=>function(e){const t=e.msgTypeList;return new Promise(((e,n)=>{if(Array.isArray(t)&&t.length>0){const i=t.reduce(((e,t)=>{const n=(0,eP.D)(t);return n&&e.push(n),e}),[]);i.length>0?e(i):n({errMsg:"invalid arguments:msgTypeList"})}else n({errMsg:"invalid arguments:msgTypeList"})}))}(e))).then(rP).then(oP).then(aP).then((t=>{(0,c.FE)({name:tP,args:e,res:t}),iP=!1})).catch((t=>{(0,c.YG)(tP,e,t.errMsg||t.message,t.errCode||t.err_code),iP=!1})))},requestSubscribeWhatsNew:function(e={}){hP.log("[args]",e),gP?(0,c.YG)(pP,e,"please invoke after last subscription ended"):(gP=!0,(0,XO.U)().then((()=>function(e={}){return new Promise(((t,n)=>{dP({action:1}),(0,K.J)("requestSubscribeWhatsNew")?uP({msgType:e.msgType,success(e){1===e.status?t():n({errCode:e.status})},fail(e){hP.error("getWhatsNewSubscriptionsSetting fail",e),n(e)}}):n({errCode:4})}))}(e))).then(_P).then((t=>t.confirm?function(e={}){return new Promise(((t,n)=>{fP({apiName:"webapi_game_subscribe_whats_new",reqData:{msg_type:e.msgType||1},success(e){const i=JSON.parse(e.respData.data),{errcode:r}=i;0===r?t({confirm:!0}):n({errCode:r})},fail(e){hP.error("[webapi_game_subscribe_whats_new] fail",e),n({errCode:e.errcode||e.errCode,errMsg:e.errMsg})}})}))}(e):t)).then((t=>{(0,c.FE)({name:pP,args:e,res:t}),gP=!1})).catch((t=>{(0,c.YG)(pP,e,t.errMsg||t.message,+(t.errCode||t.err_code)),gP=!1})))},getWhatsNewSubscriptionsSetting:uP,getUserGameLabel:ye.sj,reportUserBehaviorBranchAnalytics:ye.sD,publishWeChatState:ye.bO,addCard:QO,openCard:JO,saveFile:le.yH,getFileInfo:le.hr,getSavedFileList:le.rW,getSavedFileInfo:le.vL,removeSavedFile:le.bh,readFile(e){(0,Fo.v)("readFile"),console.warn("wx.readFile 即将废弃，请使用 wx.getFileSystemManager().readFile"),(0,le.pJ)(e)},writeFile(e){(0,Fo.v)("writeFile"),console.warn("wx.writeFile 即将废弃，请使用 wx.getFileSystemManager().writeFile"),(0,le.NC)(e)},access(e){(0,Fo.v)("access"),console.warn("wx.access 即将废弃，请使用 wx.getFileSystemManager().access"),(0,le.Pd)(e)},unlink(e){(0,Fo.v)("unlink"),console.warn("wx.unlink 即将废弃，请使用 wx.getFileSystemManager().unlink"),(0,le.qB)(e)},stat(e){(0,Fo.v)("stat"),console.warn("wx.stat 即将废弃，请使用 wx.getFileSystemManager().stat"),(0,le.lz)(e)},mkdir(e){(0,Fo.v)("mkdir"),console.warn("wx.mkdir 即将废弃，请使用 wx.getFileSystemManager().mkdir"),(0,le.i$)(e)},readdir(e){(0,Fo.v)("readdir"),console.warn("wx.readdir 即将废弃，请使用 wx.getFileSystemManager().readdir"),(0,le.ej)(e)},rmdir(e){(0,Fo.v)("rmdir"),console.warn("wx.rmdir 即将废弃，请使用 wx.getFileSystemManager().rmdir"),(0,le.ZD)(e)},getFileSystemManager:()=>ue.ZP.game,saveFileToDisk:(e={})=>{(0,c.IN)("saveFileToDisk",e,{})},startAccelerometer:(e={})=>{const t={fast:0,game:20,ui:60,normal:200},n=void 0!==t[e.interval]?t[e.interval]:t.normal,i=(0,v.f0)(e,{interval:n,enable:!0});(0,c.IN)("enableAccelerometer",i,{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableAccelerometer","startAccelerometer")}}),be=!0},stopAccelerometer:(e={})=>{(0,c.IN)("enableAccelerometer",(0,v.f0)(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableAccelerometer","stopAccelerometer")}}),be=!1},onAccelerometerChange:e=>{be||((0,c.IN)("enableAccelerometer",{enable:!0}),be=!0),Ee(e)},offAccelerometerChange:Te,scanCode:(e={})=>{(0,c.r3)("scanCode",e,{})&&(0,c.IN)("scanCode",e,{beforeSuccess(e){"string"==typeof e.path&&(e.path=e.path.replace(/\.html$/,""),e.path=e.path.replace(/\.html\?/,"?"))}})},startCompass:(e={})=>{(0,c.IN)("enableCompass",(0,v.f0)(e,{enable:!0}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableCompass","startCompass")}}),Se=!0},stopCompass:(e={})=>{(0,c.IN)("enableCompass",(0,v.f0)(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableCompass","stopCompass")}}),Se=!1},onCompassChange:e=>{Se||((0,c.IN)("enableCompass",{enable:!0}),Se=!0),Ie(e)},offCompassChange:xe,startDeviceMotionListening:(e={})=>{const t={fast:0,game:20,ui:60,normal:200},n=t[e.interval]||t.normal;(0,c.IN)("enableDeviceMotionChangeListening",(0,v.f0)(e,{interval:n,enable:!0}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","startDeviceMotionListening")}})},stopDeviceMotionListening:(e={})=>{(0,c.IN)("enableDeviceMotionChangeListening",(0,v.f0)(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","stopDeviceMotionListening")}})},onDeviceMotionChange:ht,offDeviceMotionChange:pt,startGyroscope:(e={})=>{const t={fast:0,game:20,ui:60,normal:200},n=t[e.interval]||t.normal;(0,c.IN)("enableGyroscope",(0,v.f0)(e,{interval:n,enable:!0}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableGyroscope","startGyroscope")}})},stopGyroscope:(e={})=>{(0,c.IN)("enableGyroscope",(0,v.f0)(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableGyroscope","stopGyroscope")}})},onGyroscopeChange:lt,offGyroscopeChange:ut,setScreenBrightness:(e={})=>{(0,c.IN)("setScreenBrightness",e,{})},getScreenBrightness:(e={})=>{(0,c.IN)("getScreenBrightness",e,{})},setKeepScreenOn:(e={})=>{(0,c.r3)("setKeepScreenOn",e,{keepScreenOn:!0})&&(0,c.IN)("setKeepScreenOn",e,{})},captureScreen:(e={})=>{(0,c.IN)("captureScreen",e,{})},vibrateShort:PL,vibrateLong:RL,getClipboardData:(e={})=>{if((0,c.IN)("getClipboardData",Pe("getClipboardData",e)),7===s.Z.appType)return;const{system:t,accountInfo:n}=s.Z;if(s.Z.useClipboardWithPermissionNotify||/^iOS /i.test(t)&&parseInt(t.split(" ")[1],10)>=14){const e=n?n.nickname:"小程序";(0,Oe.CF)({icon:"none",title:`“${e}”读取了你的剪切板内容`})}},setClipboardData:(e={})=>{if(!(0,c.r3)("setClipboardData",e,{data:""}))return;const t=Pe("setClipboardData",e);(0,c.IN)("setClipboardData",t,{beforeSuccess(){(0,c.be)("showToast",{duration:1500,title:"内容已复制",icon:"none",mask:!1});try{De.Z.currentClipBoardData=e.data,(e=>{if(""===De.Z.currentClipBoardData)return;let t;"undefined"!=typeof __appServiceEngine__&&(t=__appServiceEngine__.getCurrentPagesByDomain("").find((e=>e.__wxWebviewId__===De.Z.currentWebviewId))||{});const n=[De.Z.currentClipBoardData,t?t.route:"",e?1:0,t?Object.keys(t.options||{}).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t.options[e])}`)).join("&"):"",Reporter.getAppType()].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Clipboard",value:n})})(!0)}catch(e){}}})},makeBluetoothPair:(e={})=>{if(!(0,c.r3)("makeBluetoothPair",e,{deviceId:""}))return;const t=Object.assign({},e);(0,P.eP)(e.pin||null)&&(t.pin=(0,v.sM)(e.pin)),(0,c.IN)("makeBluetoothPair",t)},openBluetoothAdapter:(e={})=>{(0,c.IN)("openBluetoothAdapter",e,{})},closeBluetoothAdapter:(e={})=>{(0,c.IN)("closeBluetoothAdapter",e,{})},getBluetoothAdapterState:(e={})=>{(0,c.IN)("getBluetoothAdapterState",e,{})},onBluetoothAdapterStateChange:e=>{(0,c.jQ)("onBluetoothAdapterStateChange",__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothAdapterStateChange callback function"))},offBluetoothAdapterStateChange:()=>{(0,c.jQ)("onBluetoothAdapterStateChange",(()=>{}))},startBluetoothDevicesDiscovery:(e={})=>{if(e.services){if(!Array.isArray(e.services))return void(0,c.YG)("startBluetoothDevicesDiscovery",{},"services must be an Array");if(0!==e.services.length){const t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);if(!e.services.some((function(e){return"string"==typeof e&&t.test(e)})))return void(0,c.YG)("startBluetoothDevicesDiscovery",{},"invalid service uuid");e.services=e.services.map((function(e){return a.wZ&&(e=e.toUpperCase()),4===e.length?`0000${e}-0000-1000-8000-00805F9B34FB`:8===e.length?`${e}-0000-1000-8000-00805F9B34FB`:e}))}}(0,c.IN)("startBluetoothDevicesDiscovery",e,{})},stopBluetoothDevicesDiscovery:(e={})=>{(0,c.IN)("stopBluetoothDevicesDiscovery",e,{})},getBluetoothDevices:(e={})=>{(0,c.IN)("getBluetoothDevices",e,{beforeSuccess(e){Array.isArray(e.devices)||(e.devices=[]),e.devices.map((e=>{if(e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=(0,v.RG)(e.advertisData)),e.serviceData){const t=e.serviceData;Object.keys(t).forEach((e=>{t[e]&&(t[e]=(0,v.RG)(t[e]))}))}return e}))}})},getConnectedBluetoothDevices:(e={})=>{if(e.services){if(!Array.isArray(e.services))return void(0,c.YG)("getConnectedBluetoothDevices",e,"services must be an Array");if(0!==e.services.length){const t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);if(!e.services.some((function(e){return"string"==typeof e&&t.test(e)})))return void(0,c.YG)("getConnectedBluetoothDevices",{},"invalid service uuid");e.services=e.services.map((function(e){return a.wZ&&(e=e.toUpperCase()),4===e.length?`0000${e}-0000-1000-8000-00805F9B34FB`:8===e.length?`${e}-0000-1000-8000-00805F9B34FB`:e}))}}(0,c.IN)("getConnectedBluetoothDevices",e,{beforeSuccess(e){Array.isArray(e.devices)||(e.devices=[]),e.devices=e.devices.map((e=>(e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=(0,v.RG)(e.advertisData)),e)))}})},createBLEConnection:(e={})=>{(0,c.r3)("createBLEConnection",e,{deviceId:""})&&(0,c.IN)("createBLEConnection",e,{})},closeBLEConnection:(e={})=>{(0,c.r3)("closeBLEConnection",e,{deviceId:""})&&(0,c.IN)("closeBLEConnection",e,{})},getBLEDeviceServices:(e={})=>{(0,c.r3)("getBLEDeviceServices",e,{deviceId:""})&&(0,c.IN)("getBLEDeviceServices",e,{beforeSuccess(e){Array.isArray(e.services)||(e.services=[]),void 0===e.errCode&&(e.errCode=0)}})},getBLEDeviceRSSI:(e={})=>{(0,c.r3)("getBLEDeviceRSSI",e,{deviceId:""})&&(0,c.IN)("getBLEDeviceRSSI",e)},setBLEMTU:(e={})=>{a.wZ?(0,c.r3)("setBLEMTU",e,{deviceId:"",mtu:0})&&(0,c.IN)("setBLEMTU",e,{}):(0,c.YG)("setBLEMTU",e,"can only be invoked on android")},getBLEDeviceCharacteristics:(e={})=>{(0,c.r3)("getBLEDeviceCharacteristics",e,{deviceId:"",serviceId:""})&&(0,c.IN)("getBLEDeviceCharacteristics",Object.assign({},e,{serviceId:a.wZ?e.serviceId.toUpperCase():e.serviceId}),{beforeSuccess(e){Array.isArray(e.characteristics)||(e.characteristics=[])}})},createBLEPeripheralServer:(e={})=>{(0,c.IN)("createBLEPeripheralServer",e,{beforeSuccess(e){const t=e.serverId,n=new ze(t);delete e.serverId,e.server=n}})},onBLEPeripheralConnectionStateChanged:Ye,offBLEPeripheralConnectionStateChanged:$e,notifyBLECharacteristicValueChanged:(e={})=>{(0,c.r3)("notifyBLECharacteristicValueChanged",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&(0,c.IN)("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:a.wZ?e.serviceId.toUpperCase():e.serviceId,characteristicId:a.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{})},notifyBLECharacteristicValueChange:(e={})=>{(0,c.r3)("notifyBLECharacteristicValueChange",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&(0,c.IN)("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:a.wZ?e.serviceId.toUpperCase():e.serviceId,characteristicId:a.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{beforeAll(e){void 0!==e.errCode&&(e.errCode=Number(e.errCode)),e.errMsg=e.errMsg.replace("notifyBLECharacteristicValueChanged","notifyBLECharacteristicValueChange")}})},readBLECharacteristicValue:(e={})=>{(0,c.r3)("readBLECharacteristicValue",e,{deviceId:"",serviceId:"",characteristicId:""})&&(0,c.IN)("readBLECharacteristicValue",Object.assign({},e,{serviceId:a.wZ?e.serviceId.toUpperCase():e.serviceId,characteristicId:a.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{})},writeBLECharacteristicValue:(e={})=>{(0,c.r3)("writeBLECharacteristicValue",e,{value:new ArrayBuffer(0),deviceId:"",serviceId:"",characteristicId:""})&&(0,c.IN)("writeBLECharacteristicValue",Object.assign({},e,{value:(0,v.sM)(e.value),serviceId:e.serviceId.toUpperCase(),characteristicId:a.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{})},onBluetoothDeviceFound:e=>{(0,c.jQ)("onBluetoothDeviceFound",((t={})=>{let n=[];Array.isArray(t.devices)?n=t.devices:n.push(t),n=n.map((e=>{try{e.advertisData=(0,v.RG)(e.advertisData)}catch(e){}try{const t=e.serviceData||{};Object.keys(t).forEach((e=>{t[e]&&(t[e]=(0,v.RG)(t[e]))}))}catch(e){}return e})),__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothDeviceFound callback function")({devices:n})}))},offBluetoothDeviceFound:()=>{(0,c.jQ)("onBluetoothDeviceFound",(()=>{}))},onBLEConnectionStateChanged:e=>{(0,c.jQ)("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChanged callback function"))},onBLEConnectionStateChange:e=>{(0,c.jQ)("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChange callback function"))},onBLECharacteristicValueChange:e=>{(0,c.jQ)("onBLECharacteristicValueChange",((t={})=>{"string"==typeof t.value&&(t.value=(0,v.RG)(t.value)),__errorTracer__.surroundThirdByTryCatch(e,"at onBLECharacteristicValueChange callback function")(t)}))},offBLEConnectionStateChanged:()=>{(0,c.jQ)("onBLEConnectionStateChanged",(()=>{}))},offBLEConnectionStateChange:()=>{(0,c.jQ)("onBLEConnectionStateChanged",(()=>{}))},offBLECharacteristicValueChange:()=>{(0,c.jQ)("onBLECharacteristicValueChange",(()=>{}))},startBeaconDiscovery:(e={})=>{if(e.uuids)if(Array.isArray(e.uuids)){if(0!==e.uuids.length){const t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);if(!e.uuids.some((function(e){return"string"==typeof e&&t.test(e)})))return void(0,c.YG)("startBeaconDiscovery",e,"invalid service uuid")}(0,c.IN)("startBeaconDiscovery",e)}else(0,c.YG)("startBeaconDiscovery",e,"uuid must be an Array");else(0,c.YG)("startBeaconDiscovery",e,"must have uuid")},stopBeaconDiscovery:(e={})=>{(0,c.IN)("stopBeaconDiscovery",e)},getBeacons:(e={})=>{(0,c.IN)("getBeacons",e)},onBeaconUpdate:e=>{(0,c.r3)("onBeaconUpdate",e,h.ZT)&&(0,c.jQ)("onBeaconUpdated",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconUpdate callback function"))},offBeaconUpdate:()=>{(0,c.jQ)("onBeaconUpdated",(()=>{}))},onBeaconServiceChange:e=>{(0,c.r3)("onBeaconServiceChange",e,h.ZT)&&(0,c.jQ)("onBeaconServiceChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconServiceChange callback function"))},offBeaconServiceChange:()=>{(0,c.jQ)("onBeaconServiceChanged",(()=>{}))},getLocation:(e={})=>{"gcj02"!==e.type&&(e.type="wgs84");const t=Date.now(),n=Ai[e.type];if(t-vi>=1e4||!yi&&!n)return vi=t,void((e={},t={})=>{(0,c.IN)("getLocation",e,Object.assign({beforeSuccess(t){e.altitude||delete t.altitude}},t))})(e,{afterAll(t){Ai[e.type]=t}});if(yi)(0,c.YG)("getLocation",e,"频繁调用会增加电量损耗，可考虑使用 wx.onLocationChange 监听地理位置变化");else{const t=0===n.errMsg.indexOf("getLocation:ok");(0,c.FE)({name:"getLocation",success:t,args:e,errMsg:n.errMsg,res:n})}},createInnerAudioContext:gi,getAvailableAudioSources:e=>{(0,c.IN)("getAvailableAudioSources",e)},setInnerAudioOption:e=>{(0,c.IN)("setInnerAudioOption",Object.assign({mixWithOther:!0,obeyMuteSwitch:!0},e))},createVideoDecoder:function(){return new Gn},createMediaAudioPlayer:()=>o.Z.MediaToolKit&&o.Z.MediaToolKit.audioCreate?new _n:new hn,createWebAudioContext:()=>{const e=new gt;o.Z&&o.Z.WXAUDIO&&e&&"function"==typeof e.create&&e.create();const t=[];return["close","resume","suspend"].forEach((n=>{const i=e[n];Object.defineProperty(e,n,{configurable:!1,get:()=>function(){return i.call(e),new Promise((n=>{t.push(n);const r=e.onstatechange;e.onstatechange=()=>{"function"==typeof r&&r();const n=t.pop();n&&n(),e.onstatechange=r},i.call(e)}))}.bind(e)})})),e},getRecorderManager:()=>cn,chooseImage:rn.I9,previewImage:rn.EO,previewMedia:function(e={}){if(!(0,c.r3)("previewMedia",e,{sources:[]}))return;if(e.sources.length>50)return void(0,c.YG)("previewMedia",e,"maximum length of sources is 50");const t=(0,yn.hI)(this),n=e=>"string"!=typeof t||"/"!==e[0]?e:(0,v.S0)(`plugin-private://${t}${e}`),i=JSON.parse(JSON.stringify(e.sources)),r=[],o=[];i.forEach(((e,t)=>{e.type=e.type||"image",e.index=t,e.url=e.url?mn.L.get(e.url)||e.url:"","image"===e.type?r.push(e):"video"===e.type&&o.push(e)}));const a=r.map((e=>e.url||"")).map((e=>n(e))),s=o.map((e=>e.url||"")).map((e=>n(e)));(0,mt.V)(a,"image",(t=>{const n=t.data.map((e=>e.url));(0,mt.V)(s,"video",(t=>{const a=t.data.map((e=>e.url));n.forEach(((e,t)=>{const n=r[t].index;i[n].url=e})),a.forEach(((e,t)=>{const n=o[t].index;i[n].url=e}));const s=Object.assign({current:0},e,{sources:i});(0,c.IN)("previewMedia",s)}))}))},saveImageToPhotosAlbum:rn.FE,joinVoIPChat:kL,exitVoIPChat:NL,updateVoIPChatMuteConfig:ML,onVoIPChatMembersChanged:LL,onVoIPChatSpeakersChanged:BL,onVoIPChatInterrupted:FL,offVoIPChatMembersChanged:UL,offVoIPChatSpeakersChanged:WL,offVoIPChatInterrupted:jL,subscribeVoIPVideoMembers:GL,onVoIPVideoMembersChanged:VL,offVoIPVideoMembersChanged:HL,onVoIPChatStateChanged:zL,offVoIPChatStateChanged:ZL,createCanvas:Fr.vL,createOffScreenCanvas:Fr.pr,createImage:Ur.B,onTouchStart:BM,offTouchStart:FM,onTouchMove:UM,offTouchMove:WM,onTouchEnd:jM,offTouchEnd:GM,onTouchCancel:VM,offTouchCancel:HM,onWheel:PM,offWheel:RM,onMouseDown:zM,offMouseDown:ZM,onMouseMove:YM,offMouseMove:$M,onMouseUp:qM,offMouseUp:QM,onKeyDown:bM,offKeyDown:wM,onKeyUp:EM,offKeyUp:TM,onPointerLockChange:JM,offPointerLockChange:XM,onPointerLockError:KM,offPointerLockError:eL,onKeyboardInput:SM,offKeyboardInput:CM,onKeyboardConfirm:IM,offKeyboardConfirm:xM,onKeyboardComplete:DM,offKeyboardComplete:OM,onWindowResize:kM,offWindowResize:NM,onGameLiveStateChange:MM,offGameLiveStateChange:LM,getGameLiveState:YN,getUserRecentGameLiveInfo:(e={})=>{(0,K.J)($N)?qN({apiName:"webapi_getuserrecentgameliveinfolist",reqData:{},success(t){const n=JSON.parse(t.respData.data),i={feedIdList:n.feedIdList||[]};Number.isInteger(n.errCode)&&0!==n.errCode?(0,c.YG)($N,e,n.errMsg,n.errCode):(0,c.FE)({name:$N,args:e,res:i})},fail:e.fail,complete:e.complete}):(0,c.YG)($N,e,"no permission")},getUserCurrentGameliveInfo:(e={})=>{YN().isLive?(0,K.J)("getUserRecentGameLiveInfo")?JN({apiName:"webapi_getusercurrentgameliveinfo",reqData:{},success(t){const n=JSON.parse(t.respData.data),i={feedId:n.feedId};Number.isInteger(n.errCode)&&0!==n.errCode?(0,c.YG)(QN,e,n.errMsg,n.errCode):(0,c.FE)({name:QN,args:e,res:i})},fail:e.fail,complete:e.complete}):(0,c.YG)(QN,e,"no permission"):(0,c.YG)(QN,e,"no live")},getUserGameLiveDetails:(e={})=>{(0,K.J)("getUserRecentGameLiveInfo")?KN({apiName:"webapi_getusergamelivedetailinfo",reqData:{feedIdList:Array.isArray(e.feedIdList)?e.feedIdList:[]},success(t){const n=t.respData,i=JSON.parse(n.data),r={};r.iv=n.iv,r.encryptedData=n.encryptedData,n.cloud_id&&(r.cloudID=n.cloud_id),Number.isInteger(i.errCode)&&0!==i.errCode?(0,c.YG)(XN,e,i.errMsg,i.errCode):(0,c.FE)({name:XN,args:e,res:r})},fail:e.fail,complete:e.complete}):(0,c.YG)(XN,e,"no permission")},getShareInfo:yL,authPrivateMessage:EL,showShareMenu(e){setTimeout(vL.bind(this,e),0)},hideShareMenu:AL,updateShareMenu(e){setTimeout(bL.bind(this,e),0)},onShareAppMessage:sM,offShareAppMessage:cM,onShareTimeline:lM,offShareTimeline:uM,shareAppMessage:Wr.$F,showUpdatableMessageSubscribeButton:wL,setMessageToFriendQuery:jr.r,onShareMessageToFriend:Wr.ld,onAddToFavorites:vM,offAddToFavorites:AM,showShareImageMenu:TL,onCopyUrl:Qa.tE,offCopyUrl:Qa.dY,setWindowSize:(e={})=>{(0,c.YG)("setWindowSize",e,"deprecated")},setTopBarText:(e={})=>{e.text?Date.now()-bi<5e3?(0,c.YG)("setTopBarText",e,"invoke too frequently"):(0,c.IN)("setTopBarText",e,{beforeSuccess(){bi=Date.now()}}):(0,c.YG)("setTopBarText",e,"invalid text")},showToast:SL,hideToast:CL,showLoading:IL,hideLoading:xL,showModal:DL,showActionSheet:OL,setMenuStyle:e=>{"dark"===e.style||"light"===e.style?(0,c.IN)("setMenuStyle",e):(0,c.YG)("setMenuStyle",e,`invalid style "${e.style}"`)},setStatusBarStyle:e=>{(0,c.r3)("setStatusBarStyle",e,{style:""})&&("white"===e.style||"black"===e.style?(0,c.IN)("setStatusBarStyle",Object.assign({},e,{color:e.style})):(0,c.YG)("setStatusBarStyle",e,`invalid style "${e.style}"`))},getMenuButtonBoundingClientRect:wi.z,hideSplashScreen:e=>{(0,c.IN)("hideSplashScreen",e)},onError:iM,offError:rM,onUnhandledRejection:oM,offUnhandledRejection:aM,onLaunch:dM,offLaunch:hM,onShow:pM,offShow:fM,onHide:gM,offHide:_M,onStickyStatusChange:mM,offStickyStatusChange:yM,onAudioInterruptionBegin:An,offAudioInterruptionBegin:bn,onAudioInterruptionEnd:En,offAudioInterruptionEnd:Tn,getSystemInfo:ve.So,getSystemInfoSync:ve.xI,getBatteryInfo:(e={})=>{setTimeout((()=>{(0,c.IN)("getBatteryInfo",e)}),0)},getBatteryInfoSync:()=>{let e={level:100,isCharging:!0};if((0,c.IN)("getBatteryInfo",{complete:t=>e=t}),e.errMsg=e.errMsg?e.errMsg.replace("getBatteryInfo","getBatteryInfoSync"):"getBatteryInfoSync:ok",/fail/.test(e.errMsg))throw new Error(e.errMsg);return e},getLaunchOptionsSync:Gr.Ir,getEnterOptionsSync:Vr.r,setPreferredFramesPerSecond:e=>{"function"==typeof o.Z.setPreferredFramesPerSecond?o.Z.setPreferredFramesPerSecond(e):console.warn("当前版本暂不支持设置帧率")},loadFont:e=>"function"==typeof o.Z.loadFont?o.Z.loadFont(e):(console.warn("当前版本暂不支持此加载自定义字体"),null),setCursor:e=>"function"==typeof o.Z.setCursor?o.Z.setCursor(e):(console.warn("当前版本暂不支持加载自定义光标"),!1),requestPointerLock:Hr,exitPointerLock:zr,isPointerLocked:Zr,getTextLineHeight:({fontStyle:e="normal",fontWeight:t="normal",fontSize:n=16,fontFamily:i,text:r=""}={})=>{if(a.gm){ga||(ga=pa("div"),ga.style.opacity=0,fa(ga)),ga.style.fontStyle=e,ga.style.fontWeight=t,ga.style.fontSize=n+"px",ga.style.fontFamily=i,ga.innerHTML=r||"ajghl~!";return ga.clientHeight}{const a=`${e} ${t} ${n}px ${i}`;return o.Z.getTextLineHeight(a,r)}},requestMidasPayment:(e={})=>{if((0,cs.y4)(cs.F0.EVENT_CANVAS_BEFORE_PAY),a.cj)return void(0,c.YG)(Ss,e,"iOS not supported");if(_s&&(As(1503,0,1,1),(0,Oe.I6)({title:"提示",cancelText:"返回",content:"当前账号尚未实名，完成实名认证后才可进行充值",confirmText:_s.urlInfo.name,success({confirm:e}){e&&vs(),e&&As(1503,1,2,1),e||As(1503,2,2,1)}}),1))return void(0,c.YG)(Ss,e,"unauthenticated user");if(-1===Ts.indexOf(e.mode))return void(0,c.YG)(Ss,e,"mode错误",1e3);const t=e.env;(0,rs.Z)().then(function(){var n=Pn()((function*({openId:n,appId:i}){Xa[e.mode].destroy();const r=Xa[e.mode].init({env:t}),o=ss(e);o.openid=n,o.login_wx_appid=i||e.loginWXAppId;const a=yield is();if(a){const e=`settlement_mark=${encodeURIComponent(a)}`;o.additional={remark:encodeURIComponent(e)}}o.additional,r.launchPay(o,(({resultMsg:t,resultCode:n})=>{if(0===n)(0,c.FE)({name:Ss,args:e});else{t=t.replace("requestVirtualPayment:fail","");const i="requestVirtualPayment:fail PAY_LIMIT";-15009===n?(0,Oe.I6)({title:"提示",content:t,showCancel:!1,success(){(0,c.YG)(Ss,e,i,n)},fail(){(0,c.YG)(Ss,e,i,n)}}):(0,c.YG)(Ss,e,t,n)}}))}));return function(e){return n.apply(this,arguments)}}()).catch((t=>{(0,c.YG)(Ss,e,t,-1)}))},requestMidasFriendPayment:function(e={}){(0,c.r3)(Is,e,{mode:"",offerId:"",currencyType:"",buyQuantity:0,outTradeNo:"",nonceStr:"",timeStamp:0,signature:""})?((0,Oe.QP)({title:"加载中"}),function(e={}){return new Promise(((t,n)=>{-1===Cs.indexOf(e.mode)?n({errCode:1e3,errMsg:"mode错误"}):t()}))}(e).then(Os).then(Ps).then((()=>function(e={}){return(0,rs.Z)().then((({openId:t,appId:n})=>new Promise(((i,r)=>{const{mode:o,env:a,offerId:s,currencyType:c,zoneId:l,outTradeNo:u,platform:d,buyQuantity:h,nonceStr:p,timeStamp:f,signature:g}=e;Xa[o].destroy();const _=Xa[o].init({env:a,hide_loading:!0}),m=ss(e);m.openid=t,m.login_wx_appid=n||e.loginWXAppId,m.type="friends_pay_order",m.pf=d||"android",xs.info("[transedArgs]",m),_.launchFeature(m,function(){var t=Pn()((function*({resultCode:t,resultMsg:n,extendInfo:d}){if(xs.info("[instance.launchFeature success]",{resultCode:t,resultMsg:n,extendInfo:d}),0===t){const t=d.token,n=d.priceLevel,_={offerId:s,currencyType:c,priceLevel:n,token:t,env:a,zoneId:l,busiOrderNo:u,mode:o,buyQuantity:h,nonceStr:p,timeStamp:f,signature:g,platform:m.pf};["session_id","session_type","login_wx_appid","change_wx_openid","extend","product_id","service_code","service_name","aid","provide_uin","goodstokenurl"].forEach((t=>{void 0!==e[os[t]]&&(_[os[t]]=m[t])})),_.settlementMark=yield is(),xs.info("reqData",_),(0,er.JM)({apiName:"webapi_addpayfororder",reqData:_,success(e){xs.info("[operateWXData success]",e);const t=e.respData,n=JSON.parse(t.data),o={};o.shareData=n,o.iv=t.iv,o.encryptedData=t.encryptedData,t.cloud_id&&(o.cloudID=t.cloud_id),Number.isInteger(n.errCode)&&0!==n.errCode?(xs.error("[operateWXData fail]",n),r({errCode:n.errCode,errMsg:n.errMsg}),Ds({actionStatus:0,errType:5})):i(o)},fail(e){xs.error("[operateWXData fail]",e),r(e),Ds({actionStatus:0,errType:4})}})}else r({errMsg:n,errCode:t}),Reporter.reportIDKey({key:"midasLaunchFeatureFail"}),Ds({actionStatus:0,errType:3})}));return function(e){return t.apply(this,arguments)}}())}))))}(e))).then((e=>((0,Oe.Zk)(),function(e={}){return new Promise((t=>{const n=(0,p.KU)("h5PayDisableForward");(0,c.IN)("shareAppMessageDirectly",{type:"h5",title:e.shareData.title,desc:e.shareData.desc,imageUrl:e.shareData.imageUrl,useDefaultSnapshot:!1,disableForward:n,link:e.shareData.link,success(){t({cloudID:e.cloudID,iv:e.iv,encryptedData:e.encryptedData}),Ds({actionStatus:1,orderNo:e.shareData.orderNo,orderNoForUrl:e.shareData.orderNoForUrl})},fail(){t({cloudID:e.cloudID,iv:e.iv,encryptedData:e.encryptedData}),Ds({actionStatus:0,errType:6,orderNo:e.shareData.orderNo,orderNoForUrl:e.shareData.orderNoForUrl})}})}))}(e)))).then((t=>{(0,c.FE)({name:Is,args:e,res:t})})).catch((t=>{(0,Oe.Zk)(),xs.error("fail:",t),(0,c.YG)(Is,e,t.errMsg,+(t.errCode||t.err_code))}))):Ds({actionStatus:0,errType:7})},checkIsSupportMidasFriendPayment:function(e={}){Promise.resolve().then(Os).then(Ps).then((()=>Rs(e))).catch((({errMsg:t,errCode:n,err_code:i})=>{(0,c.YG)("checkIsSupportMidasFriendPayment",e,t,+(n||i))}))},gameLoginReport:function(){(0,Fo.v)("gameLoginReport"),console.warn("wx.gameLoginReport 已经废弃")},gameLogoutReport:function(){(0,Fo.v)("gameLogoutReport"),console.warn("wx.gameLogoutReport 已经废弃")},exitMiniProgram:Ei,launchApp:function(e={}){if(!(0,K.J)("launchApp"))return void(0,c.YG)("launchApp",e,"no permission");if(!$o)return void(0,c.YG)("launchApp",e,"not in touchEnd");if(!qo)return void(0,c.YG)("launchApp",e,"invalid scene");const t=Object.assign({},e,{appId:Jo});Qo===Zo.nw?t.extraData=e.appParameter:(t.messageExt=e.appParameter,t.extInfo=e.appParameter),Qo(t)},showKeyboard:(e={})=>{if(e.defaultValue&&e.maxLength){let t=parseInt(e.maxLength,10);Number.isNaN(t)||(t=Math.max(0,t),e.defaultValue=e.defaultValue.toString().slice(0,t))}(0,c.IN)("showKeyboard",e)},hideKeyboard:(e={})=>{(0,c.IN)("hideKeyboard",e)},updateKeyboard:(e={})=>{(0,c.IN)("updateKeyboard",e)},getExtConfig:(e={})=>{setTimeout((()=>{const t={errMsg:"getExtConfig: ok",extConfig:ak()};"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}),0)},getExtConfigSync:ak,bindGroup:(e={})=>{(0,c.IN)("bindGroup",e)},joinGroup:(e={})=>{a.wZ&&s.Z.clientVersion<654316032||a.cj?(0,er.JM)({apiName:"wxaapi_wxajoinchatroom",reqData:{groupid:e.groupId,nonce_str:e.nonceStr,signature:e.signature},success(e){const t=JSON.parse(e.rawData);(0,c.IN)("private_openUrl",{url:t.join_chatroom_url,isNativeStyle:!0})},fail({errMsg:e}){(0,Oe.CF)({title:e.replace(/^\w+:fail\s+/,""),icon:"none"})},complete(){(0,c.FE)({name:"joinGroup",args:e})}}):(0,c.IN)("joinGroup",e)},getAccountInfoSync:sk,encode:Xo.c,decode:Xo.J,parseXML:e=>{if(a.gm)(0,c.IN)("parseXML",e);else{(new o.Z.XMLReader).parse(e.xml,(t=>{/ok/.test(t.errMsg)?"function"==typeof e.success&&e.success(t):"function"==typeof e.fail&&e.fail(t),"function"==typeof e.complete&&e.complete(t)}))}},createVideo:(e={})=>{const t=Object.assign({},e);(0,P.hj)(t.zIndex)?t.zIndex=Math.min(0,t.zIndex):(0,P.o8)(t.zIndex)||(t.zIndex=0);return new Ko.nk(t)},createCamera:e=>new Ko.V1(e),createLivePlayer:e=>new Ko.Gf(e),createLivePusher:e=>new Ko.gw(e),createWebView:hO.pd,onDeviceOrientationChange:ta,offDeviceOrientationChange:na,onUserCaptureScreen:Re.oK,offUserCaptureScreen:Re.j8,postMessage:oa,onMessage:aa,getOpenDataContext:()=>sa||(la()||console.warn("getOpenDataContext:fail no openDataContext target file"),sa={postMessage(e){oa(e)},onMessage(e){aa(e)},get canvas(){return ha()}},sa),createUserGameData:(e={})=>{(0,c.YG)("createUserGameData",e,"createUserGameData 接口已废弃")},updateUserGameData:(e={})=>{(0,c.YG)("updateUserGameData",e,"updateUserGameData 接口已废弃")},getPerformance:$r,setEnableDebug:(e={})=>{(0,c.r3)("setEnableDebug",e,{enableDebug:!0})&&((0,c.IN)("setEnableDebug",e,{}),e.enableDebug&&console.warn("已通过 wx.setEnableDebug 打开调试"))},triggerGC:to,onMemoryWarning:Kr,offMemoryWarning:(e,t=!1)=>{t?qr=null:Xr(e)},reportPerformance:function(e,t,n){za(e,t,n)},testApiCallTime:(e={})=>{const t=e.type;if(1===t)(0,c.IN)("testApiCallTime",e);else if(2===t)(0,Za.L)("testWebviewApiCallTime",e,void 0,(t=>{(0,c.F0)(t,"testApiCallTime",e,{})}));else{if(3!==t)return{directInvokeJs:s.Z.directInvokeJs};(0,Za.L)("testApiCallTime",e,void 0,(t=>{(0,c.F0)(t,"testApiCallTime",e,{})}))}},createWorker:ba,createSharedArrayBuffer:ck.Y2,checkIsUserAdvisedToRest:ye.PF,getUpdateManager:()=>zs,updateWeChatApp:(e={})=>{const t=Object.assign(e,{url:"https://support.weixin.qq.com/update/"});(0,ls.n)(t)},getAd:({scene:e,adId:t,success:n,fail:i,complete:r}={})=>new Promise(((e,t)=>{wx.getNetworkType({success:t=>{e(t.networkType)},fail:e=>{t(e)}})})).then((o=>Xh({apiName:"webapi_getadvert",reqData:{scene_type:e,ad_unit_id:t,weapp_path:"index.html",sdk_version:ep,network_type:o},success:e=>{if(-201828!==(e=JSON.parse(e.rawData)).ret)if(e.ret&&0!==parseInt(e.ret,10))"function"==typeof i&&i(e);else if(0!==e.advertisement_num)try{const t=e.advertisement_info[0],i={traceid:t.traceid,aid:t.aid,group_id:t.group_id,dest_type:t.dest_type,watermark_type:t.watermark_type,url:t.url,rl:t.rl,apurl:t.apurl,pt:t.pt,title:t.hint_txt,imageUrl:t.image_url,width:t.material_width,height:t.material_height};6===t.dest_type&&(i.weapp_ghid=t.weapp_info.original_id,i.dest_appid=t.weapp_info.appid);const r=new tp(i);"function"==typeof n&&n(r)}catch(e){"function"==typeof i&&i({errMsg:e.message})}else"function"==typeof i&&i({errMsg:"no advertisement"});else"function"==typeof i&&i({errMsg:"getAd: fail no permission"})},fail:i,complete:r}))),openTencentGameContract:hO.n8,openTencentPrivacyContract:hO.L5,openUrl:hO.Yo,openTencentBoardGameContract:hO.fE,openTencentChildrenGuideContract:hO.Et,openTencentAccountCancelContract:hO.Qi,createRewardedVideoAd:EA,createIncentiveVideoAd:EA,createBannerAd:e=>new p_(e),createInterstitialAd:e=>{const t=Dn()({},e);return delete t.pluginId,new Iv(t)},createCustomAd:e=>{const t=Dn()({},e);return delete t.pluginId,new Bv(t)},createGridAd:e=>new AA(e),createUserInfoButton:(e={})=>new xA(e),createGameClubButton:(e={})=>new kA(e),createOpenSettingButton:(e={})=>new LA(e),createFeedbackButton:(e={})=>new UA(e),loadSubpackage:pO,navigateToMiniProgram:e=>{(0,NA.Y)({name:"navigateToMiniProgram",scene:0,strategy:0,timeDiffToLastTap:0===EO?-2:Date.now()-EO}),wO?((0,cs.y4)(cs.F0.EVENT_CANVAS_BEFORE_JUMP_TO_APP),(0,ds.SY)(e)):(0,qe.YG)("navigateToMiniProgram",e,"require user interaction")},createUDPSocket:(e="udp4")=>a.gm?new WO(e):new ZO(e),markScene:(e={})=>{(0,c.IN)("markScene",e)},createGamePortal:e=>new hR(e),createGameBanner:e=>new VR(e),createGameIcon:e=>new rk(e),getUserInteractiveStorage:e=>{const t=(0,Rl.M)(e.keyList);t?(0,c.YG)("getUserInteractiveStorage",e,t):(Reporter.reportIDKey({key:"getUserInteractiveStorage"}),ok(e))},onInteractiveStorageModified:Mh.U7,offInteractiveStorageModified:Mh.$X,env:Ys,getLogManager:function(e={}){return"number"==typeof e.level&&(Qi.level=e.level),1===Qi.level?Qi.logApiInvoke=!1:0===Qi.level&&(Qi.logApiInvoke=!0),Qi},getRealtimeLogManager:e=>{e=e||{};const t="develop"===s.Z.envVersion||"trial"===s.Z.envVersion;return e.isClientReport=!t,Mr(e)},error:yP,isSystemError:e=>e.toString().endsWith(1),isSDKError:e=>e.toString().endsWith(2),isThirdError:e=>e.toString().endsWith(3),getGameRecorder:()=>PP||(PP=new OP),createGameRecorderShareButton:(e={})=>zP||(zP=new HP(e),zP),cloud:__cloudSDK__.getCloudAPI(),serviceMarket:__cloudSDK__.getServiceMarketAPI(),version:"undefined"==typeof __libVersionInfo__?{version:"9.9.9"}:__libVersionInfo__,getGameServerManager:()=>xh,getBox2D:()=>o.Z.Box2D,protobuf:uk(),createGameComponent:e=>new lO(e),getGroupEnterInfo:ye.Xi,onHandoff:function(e){yl=e},offHandoff:function(){yl=null},setHandoffQuery:function(e){return"string"==typeof e&&(ml="?"===e[0]?e:"?"+e,!0)},faceDetect:function(e={}){(0,c.IN)("faceDetect",e)},initFaceDetect:function(e={}){(0,c.IN)("faceProcessInit",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"initFaceDetect:$2")}})},stopFaceDetect:function(e={}){(0,c.IN)("faceProcessStop",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"stopFaceDetect:$2")}})},createBufferURL:Ya,revokeBufferURL:$a,createSignal:qa,startLocalServiceDiscovery:(e={})=>{(0,qe.IN)("operateLocalServicesScan",Object.assign({},e,{action:"start"}),{beforeSuccess:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery"),beforeFail:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery")})},stopLocalServiceDiscovery:(e={})=>{(0,qe.IN)("operateLocalServicesScan",Object.assign({},e,{action:"stop"}),{beforeSuccess:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery"),beforeFail:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery")})},onLocalServiceFound:et,offLocalServiceFound:tt,onLocalServiceLost:nt,offLocalServiceLost:it,onLocalServiceDiscoveryStop:rt,offLocalServiceDiscoveryStop:ot,onLocalServiceResolveFail:at,offLocalServiceResolveFail:st,startCPUProfiling:vk,stopCPUProfiling:Ak,getExptInfo:yN,getExptInfoSync:function(e){const t={},{exptInfo:n,jsDataType:i}=_N();return n&&Array.isArray(n.expt_param_list)&&(Array.isArray(e)||(e=n.expt_param_list.map((e=>e.param_name))),n.expt_param_list.forEach((n=>{-1!==e.indexOf(n.param_name)&&(t[n.param_name]=n.param_value,function(e,t,n){Reporter.reportKeyValue({key:"ExptHit",value:[pN,fN,e,encodeURIComponent(JSON.stringify(t)),0,"",n].join(",")})}(n.expt_group_id,n,i))}))),t},reportEvent:function(e,t={}){setTimeout((()=>function(e,t){let n=2;const{accountInfo:i,envVersion:r}=s.Z||{},o=i?i.appId:"";"release"===r?n=1:"trial"===r&&(n=3);const a=(0,ve.mw)();dN.sessionId||(dN.sessionId=dN.sessionid),dN.usedState||(dN.usedState=dN.usedstate),sr(1005,JSON.stringify({appid:o,app_state:n,appversion:sk().miniProgram.version,enter_scene:dN.scene,scene_note:dN.scene_note||dN.sceneNote,prescene:dN.prescene,prescene_note:dN.prescene_note||dN.presceneNote,sessionid:dN.sessionId,add_state:dN.usedState,page_path:mN()||dN.path,page_query:JSON.stringify(dN.query||{}),referpagepath:dN.referpagepath,isentrance:lN||lN===dN.sessionId?0:1,event_time:Date.now(),sdk_version:Sc.c,devicemodel:a.model,devicebrand:a.brand,os_name:a.platform,os_version:a.system,language_version:a.language,networktype:(0,Ae._getCurrentNetworkType)(),event_name:e,event_value:JSON.stringify(t),unique_id:String(Date.now()+Math.random()),screen_width:s.Z.screenWidth,screen_height:s.Z.screenHeight,open_source:s.Z.host&&s.Z.host.appId?2:1,host_appid:s.Z.host?s.Z.host.appId:""}),"immediate")}(e,t)))},getChannelsLiveInfo:vN.tT,openChannelsLive:wN,openChannelsActivity:EN,openChannelsUserProfile:TN,lanDebug:sN,onVerifyNotify:function(e){ms.on("notify",e)},offVerifyNotify:function(e){ms.off("notify",e)},navigateToUserCenter:(e={})=>{DN?(0,c.YG)(SN,e,"please invoke after last navigate ended"):(DN=!0,(0,XO.U)().then((()=>((e={})=>{const{type:t}=e;switch(t){case"adsSkipCard":return ON();default:return Promise.reject(new Error("invalid type"))}})(e))).then((()=>((0,c.FE)({name:SN,args:e,res:{}}),DN=!1,null))).catch((t=>{(0,c.YG)(SN,e,t.errMsg||t.message,t.errCode||t.err_code),DN=!1})))},requestConsumeAdsSkipCard:function(e={}){MN?(0,c.YG)(PN,e,"please invoke after last request ended"):(0,c.r3)(PN,e,{orderNo:""})&&(MN=!0,function(e={}){return RN({apiName:"webapi_getadcardcostorderpaypackage",reqData:{orderNo:e.orderNo}}).then((e=>{const t=JSON.parse(e.rawData),{token:n,errCode:i,errMsg:r,amount:o}=t;if(n)return{token:n,amount:o};throw{errCode:i,errMsg:r}}))}(e).then(BN).then(FN).then((()=>{MN=!1,(0,c.FE)({name:PN,args:e,res:{}})})).catch((t=>{MN=!1,void 0!==t.errCode||void 0!==t.err_code?(0,c.YG)(PN,e,t.errMsg||t.message,+(t.errCode||t.err_code||0)):(0,c.YG)(PN,e,t.errMsg||t.message)})))},getAdsSkipCardSharePresentQuota:UN,getUserCryptoManager:()=>HN,dumpGameLivePanelUI:e=>e&&e.isLibTest?(Object.keys(xx).forEach((e=>{xx[e].check&&(xx[e].clickable=xx[e].check())})),xx):{},getDebuggerMessager:()=>n.g.__debuggerMessager__?n.g.__debuggerMessager__:{},getRealNameVerifyMethod:function(){return!!_s&&vs}};for(const e of dk)if("function"==typeof YL[e]){const t=YL[e];YL[e]=(0,h.gA)(t)}["login","getUserInfo","getUserProfile","getShareInfo","getWeRunData"].forEach((e=>{const t=YL[e];YL[e]=(0,h.gA)((function(e={}){(0,p.Vs)(t,e)}))})),Reporter.setAsGame(),(0,g.X)(YL);const $L={wx:(0,p.Wv)(YL,"gameSDKScriptError")};Jh($L,t,YL),Jh($L,e,YL);const qL=$L})(),__appServiceSDK__=i.default})();var wx=__appServiceSDK__.wx;"undefined"!=typeof __exportGlobal__&&(__exportGlobal__.wx=wx);;console.info('Wechat Lib:' + wx.version.version + ', ' + wx.version.updateTime);wxNativeConsole.info('Wechat Lib:' + wx.version.version + ', ' + wx.version.updateTime);if (typeof __passWAGameGlobal__ === 'function') {
  var __WAGameGlobal__ = {}
  __WAGameGlobal__.JSContext = JSContext
  __WAGameGlobal__.Protect = Protect
  __WAGameGlobal__.__cloudSDK__ = __cloudSDK__
  __WAGameGlobal__.__subContextEngine__ = __subContextEngine__
  __WAGameGlobal__.Safeway = Safeway
  __WAGameGlobal__.Reporter = Reporter
  __WAGameGlobal__.__appServiceSDK__ = __appServiceSDK__
  __WAGameGlobal__.WeixinJSBridge = WeixinJSBridge
  __WAGameGlobal__.WeixinWorker = WeixinWorker
  __WAGameGlobal__.wxNativeConsole = wxNativeConsole
  __passWAGameGlobal__(__WAGameGlobal__)
};;global.wx=wx;global.requirePlugin=requirePlugin;__subContextEngine__.initGameRelatedContexts();})(this);var __WAGameEndTime__ = Date.now();
typeof __wxLibrary.onEnd === 'function' && __wxLibrary.onEnd(); __wxLibrary = undefined;
