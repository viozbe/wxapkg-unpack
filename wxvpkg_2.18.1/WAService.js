var __wxLibrary={fileName: 'WAService.js', envType: 'Service', contextType: 'App:Uncertain', execStart: Date.now()}
;var __WAServiceStartTime__ = Date.now();(function(global){var __exportGlobal__ = {};;var __libVersionInfo__ = {"updateTime":"2021.7.21 10:19:55","version":"2.18.1","features":{"pruneWxConfigByPage":true,"injectGameContextPlugin":true,"lazyCodeLoading2":true,"injectAppSeparatedPlugin":true,"nativeTrans":true,"gameLive":true}};;var __Function__ = global.Function; var Function = __Function__;;var __sclEngine__ = null;var BabelRuntimeHelpers={},regeneratorRuntime;(()=>{var e={1964:(e,t,n)=>{"use strict";function r(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}n.r(t),n.d(t,{default:()=>r})},6470:(e,t,n)=>{"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}n.r(t),n.d(t,{default:()=>o})},1217:(e,t,n)=>{"use strict";function r(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}n.r(t),n.d(t,{default:()=>r})},6647:(e,t,n)=>{"use strict";function r(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}n.r(t),n.d(t,{default:()=>r})},1466:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.r(t),n.d(t,{default:()=>i})},5238:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.r(t),n.d(t,{default:()=>r})},929:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,{default:()=>r})},5551:(e,t,n)=>{var r={"./applyDecoratedDescriptor":1964,"./asyncToGenerator":6470,"./initializerDefineProperty":1217,"./initializerWarningHelper":6647,"./objectSpread2":1466,"./objectWithoutProperties":5238,"./typeof":929};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=5551},5396:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(e,t,n){var r=u;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=d(e,t,n);if("normal"===c.type){if(r=n.done?f:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u="suspendedStart",p="suspendedYield",h="executing",f="completed",g={};function _(){}function m(){}function y(){}var v={};v[i]=function(){return this};var A=Object.getPrototypeOf,b=A&&A(A(k([])));b&&b!==n&&r.call(b,i)&&(v=b);var w=y.prototype=_.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=d(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return m.prototype=w.constructor=y,y.constructor=m,m.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},C(I.prototype),I.prototype[a]=function(){return this},e.AsyncIterator=I,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new I(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(w),c(w,s,"Generator"),w[i]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},7162:(e,t,n)=>{n(5396)},9401:(e,t,n)=>{"use strict";n.r(t);n(7162);const r=n(5551);r.keys().forEach((e=>{BabelRuntimeHelpers[e.substr(2)]=r(e)}))},5482:(e,t,n)=>{"use strict";n.r(t);n(634),n(6882),n(7072),n(4870),n(5735),n(3108),n(9731),n(9992),n(3430),n(7694),n(3985),n(5388),n(2994),n(3498),n(9509),n(7846),n(6635),n(5883),n(1804),n(2775),n(2586),n(3045),n(7890),n(3439),n(1515),n(7368),n(7950),n(103),n(977),n(5734),n(5940),n(8319),n(5794),n(8827),n(1715),n(1382),n(1982),n(3229),n(4074),n(4696),n(3675),n(6920),n(3161),n(723),n(6618),n(9527),n(315),n(6886),n(4962),n(6481),n(8990),n(884),n(5431),n(5704);["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((e=>{const t=globalThis[e];t&&t.name!==e&&Object.defineProperty(t,"name",{value:e})}))},305:(e,t,n)=>{var r=n(816),o=n(3718),i=n(6541),a=n(5353),s=i.data,c=i.normalize,l="USE_FUNCTION_CONSTRUCTOR",d="AsyncIteratorPrototype",u=function(e,t){if(o(e))for(var n=0;n<e.length;n++)s[c(e[n])]=t};e.exports=function(e){"object"==typeof e&&(u(e.useNative,i.NATIVE),u(e.usePolyfill,i.POLYFILL),u(e.useFeatureDetection,null),r(e,l)&&(a.USE_FUNCTION_CONSTRUCTOR=!!e.USE_FUNCTION_CONSTRUCTOR),r(e,d)&&(a.USE_FUNCTION_CONSTRUCTOR=e.AsyncIteratorPrototype))}},3819:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},8505:(e,t,n)=>{var r=n(5052);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},9736:(e,t,n)=>{var r=n(95),o=n(2391),i=n(1787),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},6637:(e,t,n)=>{"use strict";var r=n(966).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},7728:e=>{e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},1176:(e,t,n)=>{var r=n(5052);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},3339:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},9918:(e,t,n)=>{"use strict";var r,o=n(3339),i=n(7400),a=n(9859),s=n(5052),c=n(816),l=n(1589),d=n(5762),u=n(7487),p=n(1787).f,h=n(7567),f=n(6540),g=n(95),_=n(1441),m=a.Int8Array,y=m&&m.prototype,v=a.Uint8ClampedArray,A=v&&v.prototype,b=m&&h(m),w=y&&h(y),C=Object.prototype,I=C.isPrototypeOf,E=g("toStringTag"),S=_("TYPED_ARRAY_TAG"),T=o&&!!f&&"Opera"!==l(a.opera),x=!1,k={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P={BigInt64Array:8,BigUint64Array:8},D=function(e){if(!s(e))return!1;var t=l(e);return c(k,t)||c(P,t)};for(r in k)a[r]||(T=!1);if((!T||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},T))for(r in k)a[r]&&f(a[r],b);if((!T||!w||w===C)&&(w=b.prototype,T))for(r in k)a[r]&&f(a[r].prototype,w);if(T&&h(A)!==w&&f(A,w),i&&!c(w,E))for(r in x=!0,p(w,E,{get:function(){return s(this)?this[S]:void 0}}),k)a[r]&&d(a[r],S,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:x&&S,aTypedArray:function(e){if(D(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(f){if(I.call(b,e))return e}else for(var t in k)if(c(k,r)){var n=a[t];if(n&&(e===n||I.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(i){if(n)for(var r in k){var o=a[r];if(o&&c(o.prototype,e))try{delete o.prototype[e]}catch(e){}}w[e]&&!n||u(w,e,n?t:T&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,o;if(i){if(f){if(n)for(r in k)if((o=a[r])&&c(o,e))try{delete o[e]}catch(e){}if(b[e]&&!n)return;try{return u(b,e,n?t:T&&b[e]||t)}catch(e){}}for(r in k)!(o=a[r])||o[e]&&!n||u(o,e,t)}},isView:function(e){if(!s(e))return!1;var t=l(e);return"DataView"===t||c(k,t)||c(P,t)},isTypedArray:D,TypedArray:b,TypedArrayPrototype:w}},3816:(e,t,n)=>{"use strict";var r=n(9859),o=n(7400),i=n(3339),a=n(5762),s=n(8787),c=n(4229),l=n(7728),d=n(6051),u=n(4237),p=n(7331),h=n(6201),f=n(7567),g=n(6540),_=n(8151).f,m=n(1787).f,y=n(7065),v=n(4555),A=n(6407),b=A.get,w=A.set,C="ArrayBuffer",I="DataView",E="Wrong index",S=r.ArrayBuffer,T=S,x=r.DataView,k=x&&x.prototype,P=Object.prototype,D=r.RangeError,O=h.pack,N=h.unpack,R=function(e){return[255&e]},M=function(e){return[255&e,e>>8&255]},L=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},B=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},F=function(e){return O(e,23,4)},W=function(e){return O(e,52,8)},j=function(e,t){m(e.prototype,t,{get:function(){return b(this)[t]}})},U=function(e,t,n,r){var o=p(n),i=b(e);if(o+t>i.byteLength)throw D(E);var a=b(i.buffer).bytes,s=o+i.byteOffset,c=a.slice(s,s+t);return r?c:c.reverse()},V=function(e,t,n,r,o,i){var a=p(n),s=b(e);if(a+t>s.byteLength)throw D(E);for(var c=b(s.buffer).bytes,l=a+s.byteOffset,d=r(+o),u=0;u<t;u++)c[l+u]=d[i?u:t-u-1]};if(i){if(!c((function(){S(1)}))||!c((function(){new S(-1)}))||c((function(){return new S,new S(1.5),new S(NaN),S.name!=C}))){for(var G,$=(T=function(e){return l(this,T),new S(p(e))}).prototype=S.prototype,H=_(S),Z=0;H.length>Z;)(G=H[Z++])in T||a(T,G,S[G]);$.constructor=T}g&&f(k)!==P&&g(k,P);var Q=new x(new T(2)),Y=k.setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||s(k,{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},{unsafe:!0})}else T=function(e){l(this,T,C);var t=p(e);w(this,{bytes:y.call(new Array(t),0),byteLength:t}),o||(this.byteLength=t)},x=function(e,t,n){l(this,x,I),l(e,T,I);var r=b(e).byteLength,i=d(t);if(i<0||i>r)throw D("Wrong offset");if(i+(n=void 0===n?r-i:u(n))>r)throw D("Wrong length");w(this,{buffer:e,byteLength:n,byteOffset:i}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},o&&(j(T,"byteLength"),j(x,"buffer"),j(x,"byteLength"),j(x,"byteOffset")),s(x.prototype,{getInt8:function(e){return U(this,1,e)[0]<<24>>24},getUint8:function(e){return U(this,1,e)[0]},getInt16:function(e){var t=U(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=U(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return B(U(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return B(U(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return N(U(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return N(U(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){V(this,1,e,R,t)},setUint8:function(e,t){V(this,1,e,R,t)},setInt16:function(e,t){V(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){V(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){V(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){V(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){V(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){V(this,8,e,W,t,arguments.length>2?arguments[2]:void 0)}});v(T,C),v(x,I),e.exports={ArrayBuffer:T,DataView:x}},7065:(e,t,n)=>{"use strict";var r=n(2991),o=n(3231),i=n(4237);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,l=void 0===c?n:o(c,n);l>s;)t[s++]=e;return t}},9540:(e,t,n)=>{var r=n(905),o=n(4237),i=n(3231),a=function(e){return function(t,n,a){var s,c=r(t),l=o(c.length),d=i(a,l);if(e&&n!=n){for(;l>d;)if((s=c[d++])!=s)return!0}else for(;l>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9996:(e,t,n)=>{var r=n(7636),o=n(9337),i=n(2991),a=n(4237),s=n(7501),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,d=4==e,u=6==e,p=7==e,h=5==e||u;return function(f,g,_,m){for(var y,v,A=i(f),b=o(A),w=r(g,_,3),C=a(b.length),I=0,E=m||s,S=t?E(f,C):n||p?E(f,0):void 0;C>I;I++)if((h||I in b)&&(v=w(y=b[I],I,A),e))if(t)S[I]=v;else if(v)switch(e){case 3:return!0;case 5:return y;case 6:return I;case 2:c.call(S,y)}else switch(e){case 4:return!1;case 7:c.call(S,y)}return u?-1:l||d?d:S}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},6038:(e,t,n)=>{"use strict";var r=n(4229);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},3143:(e,t,n)=>{var r=n(3819),o=n(2991),i=n(9337),a=n(4237),s=function(e){return function(t,n,s,c){r(n);var l=o(t),d=i(l),u=a(l.length),p=e?u-1:0,h=e?-1:1;if(s<2)for(;;){if(p in d){c=d[p],p+=h;break}if(p+=h,e?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:u>p;p+=h)p in d&&(c=n(c,d[p],p,l));return c}};e.exports={left:s(!1),right:s(!0)}},3867:e=>{var t=Math.floor,n=function(e,i){var a=e.length,s=t(a/2);return a<8?r(e,i):o(n(e.slice(0,s),i),n(e.slice(s),i),i)},r=function(e,t){for(var n,r,o=e.length,i=1;i<o;){for(r=i,n=e[i];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==i++&&(e[r]=n)}return e},o=function(e,t,n){for(var r=e.length,o=t.length,i=0,a=0,s=[];i<r||a<o;)i<r&&a<o?s.push(n(e[i],t[a])<=0?e[i++]:t[a++]):s.push(i<r?e[i++]:t[a++]);return s};e.exports=n},7501:(e,t,n)=>{var r=n(5052),o=n(3718),i=n(95)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},4575:(e,t,n)=>{var r=n(95)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},7079:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},1589:(e,t,n)=>{var r=n(1601),o=n(7079),i=n(95)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},7081:(e,t,n)=>{var r=n(816),o=n(4826),i=n(7933),a=n(1787);e.exports=function(e,t){for(var n=o(t),s=a.f,c=i.f,l=0;l<n.length;l++){var d=n[l];r(e,d)||s(e,d,c(t,d))}}},7528:(e,t,n)=>{var r=n(4229);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3723:(e,t,n)=>{"use strict";var r=n(693).IteratorPrototype,o=n(2391),i=n(5358),a=n(4555),s=n(5495),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=o(r,{next:i(1,n)}),a(e,l,!1,!0),s[l]=c,e}},5762:(e,t,n)=>{var r=n(7400),o=n(1787),i=n(5358);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},5358:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2324:(e,t,n)=>{"use strict";var r=n(2066),o=n(1787),i=n(5358);e.exports=function(e,t,n){var a=r(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},7675:(e,t,n)=>{"use strict";var r=n(3103),o=n(3723),i=n(7567),a=n(6540),s=n(4555),c=n(5762),l=n(7487),d=n(95),u=n(4231),p=n(5495),h=n(693),f=h.IteratorPrototype,g=h.BUGGY_SAFARI_ITERATORS,_=d("iterator"),m="keys",y="values",v="entries",A=function(){return this};e.exports=function(e,t,n,d,h,b,w){o(n,t,d);var C,I,E,S=function(e){if(e===h&&D)return D;if(!g&&e in k)return k[e];switch(e){case m:case y:case v:return function(){return new n(this,e)}}return function(){return new n(this)}},T=t+" Iterator",x=!1,k=e.prototype,P=k[_]||k["@@iterator"]||h&&k[h],D=!g&&P||S(h),O="Array"==t&&k.entries||P;if(O&&(C=i(O.call(new e)),f!==Object.prototype&&C.next&&(u||i(C)===f||(a?a(C,f):"function"!=typeof C[_]&&c(C,_,A)),s(C,T,!0,!0),u&&(p[T]=A))),h==y&&P&&P.name!==y&&(x=!0,D=function(){return P.call(this)}),u&&!w||k[_]===D||c(k,_,D),p[t]=D,h)if(I={values:S(y),keys:b?D:S(m),entries:S(v)},w)for(E in I)(g||x||!(E in k))&&l(k,E,I[E]);else r({target:t,proto:!0,forced:g||x},I);return I}},8423:(e,t,n)=>{var r=n(9276),o=n(816),i=n(5391),a=n(1787).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},7400:(e,t,n)=>{var r=n(4229);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2635:(e,t,n)=>{var r=n(9859),o=n(5052),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},5694:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2671:(e,t,n)=>{var r=n(598).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},8639:e=>{e.exports="object"==typeof window},8506:(e,t,n)=>{var r=n(598);e.exports=/MSIE|Trident/.test(r)},2023:(e,t,n)=>{var r=n(598);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},8801:(e,t,n)=>{var r=n(7079),o=n(9859);e.exports="process"==r(o.process)},263:(e,t,n)=>{var r=n(598);e.exports=/web0s(?!.*chrome)/i.test(r)},598:(e,t,n)=>{var r=n(1333);e.exports=r("navigator","userAgent")||""},6358:(e,t,n)=>{var r,o,i=n(9859),a=n(598),s=i.process,c=s&&s.versions,l=c&&c.v8;l?o=(r=l.split("."))[0]<4?1:r[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),e.exports=o&&+o},9811:(e,t,n)=>{var r=n(598).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},3837:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(e,t,n)=>{var r=n(9859),o=n(7933).f,i=n(5762),a=n(7487),s=n(2079),c=n(7081),l=n(6541);e.exports=function(e,t){var n,d,u,p,h,f=e.target,g=e.global,_=e.stat;if(n=g?r:_?r[f]||s(f,{}):(r[f]||{}).prototype)for(d in t){if(p=t[d],u=e.noTargetGet?(h=o(n,d))&&h.value:n[d],!l(g?d:f+(_?".":"#")+d,e.forced)&&void 0!==u){if(typeof p==typeof u)continue;c(p,u)}(e.sham||u&&u.sham)&&i(p,"sham",!0),a(n,d,p,e)}}},4229:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4954:(e,t,n)=>{"use strict";n(7950);var r=n(7487),o=n(3466),i=n(4229),a=n(95),s=n(5762),c=a("species"),l=RegExp.prototype;e.exports=function(e,t,n,d){var u=a(e),p=!i((function(){var t={};return t[u]=function(){return 7},7!=""[e](t)})),h=p&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[u]=/./[u]),n.exec=function(){return t=!0,null},n[u](""),!t}));if(!p||!h||n){var f=/./[u],g=t(u,""[e],(function(e,t,n,r,i){var a=t.exec;return a===o||a===l.exec?p&&!i?{done:!0,value:f.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}));r(String.prototype,e,g[0]),r(l,u,g[1])}d&&s(l[u],"sham",!0)}},4990:(e,t,n)=>{"use strict";var r=n(3718),o=n(4237),i=n(7636),a=function(e,t,n,s,c,l,d,u){for(var p,h=c,f=0,g=!!d&&i(d,u,3);f<s;){if(f in n){if(p=g?g(n[f],f,t):n[f],l>0&&r(p))h=a(e,t,p,o(p.length),h,l-1)-1;else{if(h>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[h]=p}h++}f++}return h};e.exports=a},7636:(e,t,n)=>{var r=n(3819);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},1333:(e,t,n)=>{var r=n(9276),o=n(9859),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},8830:(e,t,n)=>{var r=n(1589),o=n(5495),i=n(95)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},17:(e,t,n)=>{var r=n(2991),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,l,d){var u=n+e.length,p=c.length,h=s;return void 0!==l&&(l=r(l),h=a),i.call(d,h,(function(r,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(u);case"<":a=l[i.slice(1,-1)];break;default:var s=+i;if(0===s)return r;if(s>p){var d=o(s/10);return 0===d?r:d<=p?void 0===c[d-1]?i.charAt(1):c[d-1]+i.charAt(1):r}a=c[s-1]}return void 0===a?"":a}))}},9859:(e,t,n)=>{var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},816:(e,t,n)=>{var r=n(2991),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(r(e),t)}},5977:e=>{e.exports={}},4665:(e,t,n)=>{var r=n(9859);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},3777:(e,t,n)=>{var r=n(1333);e.exports=r("document","documentElement")},4394:(e,t,n)=>{var r=n(7400),o=n(4229),i=n(2635);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},6201:e=>{var t=Math.abs,n=Math.pow,r=Math.floor,o=Math.log,i=Math.LN2;e.exports={pack:function(e,a,s){var c,l,d,u=new Array(s),p=8*s-a-1,h=(1<<p)-1,f=h>>1,g=23===a?n(2,-24)-n(2,-77):0,_=e<0||0===e&&1/e<0?1:0,m=0;for((e=t(e))!=e||e===1/0?(l=e!=e?1:0,c=h):(c=r(o(e)/i),e*(d=n(2,-c))<1&&(c--,d*=2),(e+=c+f>=1?g/d:g*n(2,1-f))*d>=2&&(c++,d/=2),c+f>=h?(l=0,c=h):c+f>=1?(l=(e*d-1)*n(2,a),c+=f):(l=e*n(2,f-1)*n(2,a),c=0));a>=8;u[m++]=255&l,l/=256,a-=8);for(c=c<<a|l,p+=a;p>0;u[m++]=255&c,c/=256,p-=8);return u[--m]|=128*_,u},unpack:function(e,t){var r,o=e.length,i=8*o-t-1,a=(1<<i)-1,s=a>>1,c=i-7,l=o-1,d=e[l--],u=127&d;for(d>>=7;c>0;u=256*u+e[l],l--,c-=8);for(r=u&(1<<-c)-1,u>>=-c,c+=t;c>0;r=256*r+e[l],l--,c-=8);if(0===u)u=1-s;else{if(u===a)return r?NaN:d?-1/0:1/0;r+=n(2,t),u-=s}return(d?-1:1)*r*n(2,u-t)}}},9337:(e,t,n)=>{var r=n(4229),o=n(7079),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},835:(e,t,n)=>{var r=n(5052),o=n(6540);e.exports=function(e,t,n){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==n&&r(a=i.prototype)&&a!==n.prototype&&o(e,a),e}},8511:(e,t,n)=>{var r=n(5353),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},6407:(e,t,n)=>{var r,o,i,a=n(8694),s=n(9859),c=n(5052),l=n(5762),d=n(816),u=n(5353),p=n(4399),h=n(5977),f="Object already initialized",g=s.WeakMap;if(a||u.state){var _=u.state||(u.state=new g),m=_.get,y=_.has,v=_.set;r=function(e,t){if(y.call(_,e))throw new TypeError(f);return t.facade=e,v.call(_,e,t),t},o=function(e){return m.call(_,e)||{}},i=function(e){return y.call(_,e)}}else{var A=p("state");h[A]=!0,r=function(e,t){if(d(e,A))throw new TypeError(f);return t.facade=e,l(e,A,t),t},o=function(e){return d(e,A)?e[A]:{}},i=function(e){return d(e,A)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},1943:(e,t,n)=>{var r=n(95),o=n(5495),i=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},3718:(e,t,n)=>{var r=n(7079);e.exports=Array.isArray||function(e){return"Array"==r(e)}},6541:(e,t,n)=>{var r=n(4229),o=/#|\.prototype\./,i=function(e,t){var n=s[a(e)];return n==l||n!=c&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",l=i.POLYFILL="P";e.exports=i},5052:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},4231:e=>{e.exports=!1},8311:(e,t,n)=>{var r=n(5052),o=n(7079),i=n(95)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},9003:(e,t,n)=>{var r=n(1176),o=n(1943),i=n(4237),a=n(7636),s=n(8830),c=n(7281),l=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var d,u,p,h,f,g,_,m=n&&n.that,y=!(!n||!n.AS_ENTRIES),v=!(!n||!n.IS_ITERATOR),A=!(!n||!n.INTERRUPTED),b=a(t,m,1+y+A),w=function(e){return d&&c(d),new l(!0,e)},C=function(e){return y?(r(e),A?b(e[0],e[1],w):b(e[0],e[1])):A?b(e,w):b(e)};if(v)d=e;else{if("function"!=typeof(u=s(e)))throw TypeError("Target is not iterable");if(o(u)){for(p=0,h=i(e.length);h>p;p++)if((f=C(e[p]))&&f instanceof l)return f;return new l(!1)}d=u.call(e)}for(g=d.next;!(_=g.call(d)).done;){try{f=C(_.value)}catch(e){throw c(d),e}if("object"==typeof f&&f&&f instanceof l)return f}return new l(!1)}},7281:(e,t,n)=>{var r=n(1176);e.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},693:(e,t,n)=>{"use strict";var r,o,i,a=n(4229),s=n(7567),c=n(5762),l=n(816),d=n(95),u=n(4231),p=d("iterator"),h=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(r=o):h=!0);var f=null==r||a((function(){var e={};return r[p].call(e)!==e}));f&&(r={}),u&&!f||l(r,p)||c(r,p,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},5495:e=>{e.exports={}},9037:e=>{var t=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:t(1+e)}},4794:(e,t,n)=>{var r,o,i,a,s,c,l,d,u=n(9859),p=n(7933).f,h=n(5795).set,f=n(2023),g=n(263),_=n(8801),m=u.MutationObserver||u.WebKitMutationObserver,y=u.document,v=u.process,A=u.Promise,b=p(u,"queueMicrotask"),w=b&&b.value;w||(r=function(){var e,t;for(_&&(e=v.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},f||_||g||!m||!y?A&&A.resolve?((l=A.resolve(void 0)).constructor=A,d=l.then,a=function(){d.call(l,r)}):a=_?function(){v.nextTick(r)}:function(){h.call(u,r)}:(s=!0,c=y.createTextNode(""),new m(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=w||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},4226:(e,t,n)=>{var r=n(9859);e.exports=r.Promise},3839:(e,t,n)=>{var r=n(6358),o=n(4229);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8694:(e,t,n)=>{var r=n(9859),o=n(8511),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},6485:(e,t,n)=>{"use strict";var r=n(3819),o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},2391:(e,t,n)=>{var r,o=n(1176),i=n(219),a=n(3837),s=n(5977),c=n(3777),l=n(2635),d=n(4399),u=d("IE_PROTO"),p=function(){},h=function(e){return"<script>"+e+"</"+"script>"},f=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;f=r?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete f.prototype[a[n]];return f()};s[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p.prototype=o(e),n=new p,p.prototype=null,n[u]=e):n=f(),void 0===t?n:i(n,t)}},219:(e,t,n)=>{var r=n(7400),o=n(1787),i=n(1176),a=n(5632);e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),s=r.length,c=0;s>c;)o.f(e,n=r[c++],t[n]);return e}},1787:(e,t,n)=>{var r=n(7400),o=n(4394),i=n(1176),a=n(2066),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},7933:(e,t,n)=>{var r=n(7400),o=n(9195),i=n(5358),a=n(905),s=n(2066),c=n(816),l=n(4394),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=a(e),t=s(t,!0),l)try{return d(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},8151:(e,t,n)=>{var r=n(140),o=n(3837).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},894:(e,t)=>{t.f=Object.getOwnPropertySymbols},7567:(e,t,n)=>{var r=n(816),o=n(2991),i=n(4399),a=n(7528),s=i("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},140:(e,t,n)=>{var r=n(816),o=n(905),i=n(9540).indexOf,a=n(5977);e.exports=function(e,t){var n,s=o(e),c=0,l=[];for(n in s)!r(a,n)&&r(s,n)&&l.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(l,n)||l.push(n));return l}},5632:(e,t,n)=>{var r=n(140),o=n(3837);e.exports=Object.keys||function(e){return r(e,o)}},9195:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},5020:(e,t,n)=>{"use strict";var r=n(4231),o=n(9859),i=n(4229),a=n(9811);e.exports=r||!i((function(){if(!(a&&a<535)){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete o[e]}}))},6540:(e,t,n)=>{var r=n(1176),o=n(8505);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},7664:(e,t,n)=>{var r=n(7400),o=n(5632),i=n(905),a=n(9195).f,s=function(e){return function(t){for(var n,s=i(t),c=o(s),l=c.length,d=0,u=[];l>d;)n=c[d++],r&&!a.call(s,n)||u.push(e?[n,s[n]]:s[n]);return u}};e.exports={entries:s(!0),values:s(!1)}},4826:(e,t,n)=>{var r=n(1333),o=n(8151),i=n(894),a=n(1176);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},9276:(e,t,n)=>{var r=n(9859);e.exports=r},4624:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},7757:(e,t,n)=>{var r=n(1176),o=n(5052),i=n(6485);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},8787:(e,t,n)=>{var r=n(7487);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},7487:(e,t,n)=>{var r=n(9859),o=n(5762),i=n(816),a=n(2079),s=n(8511),c=n(6407),l=c.get,d=c.enforce,u=String(String).split("String");(e.exports=function(e,t,n,s){var c,l=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),(c=d(n)).source||(c.source=u.join("string"==typeof t?t:""))),e!==r?(l?!h&&e[t]&&(p=!0):delete e[t],p?e[t]=n:o(e,t,n)):p?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},8115:(e,t,n)=>{var r=n(7079),o=n(3466);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},3466:(e,t,n)=>{"use strict";var r,o,i=n(895),a=n(5650),s=n(3036),c=n(2391),l=n(6407).get,d=n(2926),u=n(461),p=RegExp.prototype.exec,h=s("native-string-replace",String.prototype.replace),f=p,g=(r=/a/,o=/b*/g,p.call(r,"a"),p.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),_=a.UNSUPPORTED_Y||a.BROKEN_CARET,m=void 0!==/()??/.exec("")[1];(g||m||_||d||u)&&(f=function(e){var t,n,r,o,a,s,d,u=this,y=l(u),v=y.raw;if(v)return v.lastIndex=u.lastIndex,t=f.call(v,e),u.lastIndex=v.lastIndex,t;var A=y.groups,b=_&&u.sticky,w=i.call(u),C=u.source,I=0,E=e;if(b&&(-1===(w=w.replace("y","")).indexOf("g")&&(w+="g"),E=String(e).slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==e[u.lastIndex-1])&&(C="(?: "+C+")",E=" "+E,I++),n=new RegExp("^(?:"+C+")",w)),m&&(n=new RegExp("^"+C+"$(?!\\s)",w)),g&&(r=u.lastIndex),o=p.call(b?n:u,E),b?o?(o.input=o.input.slice(I),o[0]=o[0].slice(I),o.index=u.lastIndex,u.lastIndex+=o[0].length):u.lastIndex=0:g&&o&&(u.lastIndex=u.global?o.index+o[0].length:r),m&&o&&o.length>1&&h.call(o[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&A)for(o.groups=s=c(null),a=0;a<A.length;a++)s[(d=A[a])[0]]=o[d[1]];return o}),e.exports=f},895:(e,t,n)=>{"use strict";var r=n(1176);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},5650:(e,t,n)=>{var r=n(4229),o=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},2926:(e,t,n)=>{var r=n(4229);e.exports=r((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},461:(e,t,n)=>{var r=n(4229);e.exports=r((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},8885:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},2079:(e,t,n)=>{var r=n(9859),o=n(5762);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},1832:(e,t,n)=>{"use strict";var r=n(1333),o=n(1787),i=n(95),a=n(7400),s=i("species");e.exports=function(e){var t=r(e),n=o.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},4555:(e,t,n)=>{var r=n(1787).f,o=n(816),i=n(95)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},4399:(e,t,n)=>{var r=n(3036),o=n(1441),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},5353:(e,t,n)=>{var r=n(9859),o=n(2079),i="__core-js_shared__",a=r[i]||o(i,{});e.exports=a},3036:(e,t,n)=>{var r=n(4231),o=n(5353);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},7942:(e,t,n)=>{var r=n(1176),o=n(3819),i=n(95)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},966:(e,t,n)=>{var r=n(6051),o=n(8885),i=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},7456:(e,t,n)=>{var r=n(598);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},6650:(e,t,n)=>{var r=n(4237),o=n(3124),i=n(8885),a=Math.ceil,s=function(e){return function(t,n,s){var c,l,d=String(i(t)),u=d.length,p=void 0===s?" ":String(s),h=r(n);return h<=u||""==p?d:(c=h-u,(l=o.call(p,a(c/p.length))).length>c&&(l=l.slice(0,c)),e?d+l:l+d)}};e.exports={start:s(!1),end:s(!0)}},3124:(e,t,n)=>{"use strict";var r=n(6051),o=n(8885);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},9445:(e,t,n)=>{var r=n(4229),o=n(1647);e.exports=function(e){return r((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},1017:(e,t,n)=>{var r=n(8885),o="["+n(1647)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},5795:(e,t,n)=>{var r,o,i,a=n(9859),s=n(4229),c=n(7636),l=n(3777),d=n(2635),u=n(2023),p=n(8801),h=a.location,f=a.setImmediate,g=a.clearImmediate,_=a.process,m=a.MessageChannel,y=a.Dispatch,v=0,A={},b="onreadystatechange",w=function(e){if(A.hasOwnProperty(e)){var t=A[e];delete A[e],t()}},C=function(e){return function(){w(e)}},I=function(e){w(e.data)},E=function(e){a.postMessage(e+"",h.protocol+"//"+h.host)};f&&g||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return A[++v]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(v),v},g=function(e){delete A[e]},p?r=function(e){_.nextTick(C(e))}:y&&y.now?r=function(e){y.now(C(e))}:m&&!u?(i=(o=new m).port2,o.port1.onmessage=I,r=c(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&h&&"file:"!==h.protocol&&!s(E)?(r=E,a.addEventListener("message",I,!1)):r=b in d("script")?function(e){l.appendChild(d("script")).onreadystatechange=function(){l.removeChild(this),w(e)}}:function(e){setTimeout(C(e),0)}),e.exports={set:f,clear:g}},3231:(e,t,n)=>{var r=n(6051),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},7331:(e,t,n)=>{var r=n(6051),o=n(4237);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw RangeError("Wrong length or index");return n}},905:(e,t,n)=>{var r=n(9337),o=n(8885);e.exports=function(e){return r(o(e))}},6051:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},4237:(e,t,n)=>{var r=n(6051),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},2991:(e,t,n)=>{var r=n(8885);e.exports=function(e){return Object(r(e))}},4262:(e,t,n)=>{var r=n(2002);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},2002:(e,t,n)=>{var r=n(6051);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},2066:(e,t,n)=>{var r=n(5052);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},1601:(e,t,n)=>{var r={};r[n(95)("toStringTag")]="z",e.exports="[object z]"===String(r)},2574:(e,t,n)=>{"use strict";var r=n(3103),o=n(9859),i=n(7400),a=n(8200),s=n(9918),c=n(3816),l=n(7728),d=n(5358),u=n(5762),p=n(4237),h=n(7331),f=n(4262),g=n(2066),_=n(816),m=n(1589),y=n(5052),v=n(2391),A=n(6540),b=n(8151).f,w=n(5215),C=n(9996).forEach,I=n(1832),E=n(1787),S=n(7933),T=n(6407),x=n(835),k=T.get,P=T.set,D=E.f,O=S.f,N=Math.round,R=o.RangeError,M=c.ArrayBuffer,L=c.DataView,B=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,W=s.TypedArray,j=s.TypedArrayPrototype,U=s.aTypedArrayConstructor,V=s.isTypedArray,G="BYTES_PER_ELEMENT",$="Wrong length",H=function(e,t){for(var n=0,r=t.length,o=new(U(e))(r);r>n;)o[n]=t[n++];return o},Z=function(e,t){D(e,t,{get:function(){return k(this)[t]}})},Q=function(e){var t;return e instanceof M||"ArrayBuffer"==(t=m(e))||"SharedArrayBuffer"==t},Y=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},z=function(e,t){return Y(e,t=g(t,!0))?d(2,e[t]):O(e,t)},q=function(e,t,n){return!(Y(e,t=g(t,!0))&&y(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?D(e,t,n):(e[t]=n.value,e)};i?(B||(S.f=z,E.f=q,Z(j,"buffer"),Z(j,"byteOffset"),Z(j,"byteLength"),Z(j,"length")),r({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:z,defineProperty:q}),e.exports=function(e,t,n){var i=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,d="set"+e,g=o[s],_=g,m=_&&_.prototype,E={},S=function(e,t){D(e,t,{get:function(){return function(e,t){var n=k(e);return n.view[c](t*i+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var o=k(e);n&&(r=(r=N(r))<0?0:r>255?255:255&r),o.view[d](t*i+o.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};B?a&&(_=t((function(e,t,n,r){return l(e,_,s),x(y(t)?Q(t)?void 0!==r?new g(t,f(n,i),r):void 0!==n?new g(t,f(n,i)):new g(t):V(t)?H(_,t):w.call(_,t):new g(h(t)),e,_)})),A&&A(_,W),C(b(g),(function(e){e in _||u(_,e,g[e])})),_.prototype=m):(_=t((function(e,t,n,r){l(e,_,s);var o,a,c,d=0,u=0;if(y(t)){if(!Q(t))return V(t)?H(_,t):w.call(_,t);o=t,u=f(n,i);var g=t.byteLength;if(void 0===r){if(g%i)throw R($);if((a=g-u)<0)throw R($)}else if((a=p(r)*i)+u>g)throw R($);c=a/i}else c=h(t),o=new M(a=c*i);for(P(e,{buffer:o,byteOffset:u,byteLength:a,length:c,view:new L(o)});d<c;)S(e,d++)})),A&&A(_,W),m=_.prototype=v(j)),m.constructor!==_&&u(m,"constructor",_),F&&u(m,F,s),E[s]=_,r({global:!0,forced:_!=g,sham:!B},E),G in _||u(_,G,i),G in m||u(m,G,i),I(s)}):e.exports=function(){}},8200:(e,t,n)=>{var r=n(9859),o=n(4229),i=n(4575),a=n(9918).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!a||!o((function(){c(1)}))||!o((function(){new c(-1)}))||!i((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||o((function(){return 1!==new c(new s(2),1,void 0).length}))},5215:(e,t,n)=>{var r=n(2991),o=n(4237),i=n(8830),a=n(1943),s=n(7636),c=n(9918).aTypedArrayConstructor;e.exports=function(e){var t,n,l,d,u,p,h=r(e),f=arguments.length,g=f>1?arguments[1]:void 0,_=void 0!==g,m=i(h);if(null!=m&&!a(m))for(p=(u=m.call(h)).next,h=[];!(d=p.call(u)).done;)h.push(d.value);for(_&&f>2&&(g=s(g,arguments[2],2)),n=o(h.length),l=new(c(this))(n),t=0;n>t;t++)l[t]=_?g(h[t],t):h[t];return l}},1441:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},6969:(e,t,n)=>{var r=n(3839);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5391:(e,t,n)=>{var r=n(95);t.f=r},95:(e,t,n)=>{var r=n(9859),o=n(3036),i=n(816),a=n(1441),s=n(3839),c=n(6969),l=o("wks"),d=r.Symbol,u=c?d:d&&d.withoutSetter||a;e.exports=function(e){return i(l,e)&&(s||"string"==typeof l[e])||(s&&i(d,e)?l[e]=d[e]:l[e]=u("Symbol."+e)),l[e]}},1647:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},5738:(e,t,n)=>{"use strict";var r=n(3103),o=n(7567),i=n(6540),a=n(2391),s=n(5762),c=n(5358),l=n(9003),d=function(e,t){var n=this;if(!(n instanceof d))return new d(e,t);i&&(n=i(new Error(void 0),o(n))),void 0!==t&&s(n,"message",String(t));var r=[];return l(e,r.push,{that:r}),s(n,"errors",r),n};d.prototype=a(Error.prototype,{constructor:c(5,d),message:c(5,""),name:c(5,"AggregateError")}),r({global:!0},{AggregateError:d})},5388:(e,t,n)=>{"use strict";var r=n(3103),o=n(9859),i=n(3816),a=n(1832),s="ArrayBuffer",c=i.ArrayBuffer;r({global:!0,forced:o.ArrayBuffer!==c},{ArrayBuffer:c}),a(s)},2994:(e,t,n)=>{"use strict";var r=n(3103),o=n(4229),i=n(3816),a=n(1176),s=n(3231),c=n(4237),l=n(7942),d=i.ArrayBuffer,u=i.DataView,p=d.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new d(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),o=s(void 0===t?n:t,n),i=new(l(this,d))(c(o-r)),h=new u(this),f=new u(i),g=0;r<o;)f.setUint8(g++,h.getUint8(r++));return i}})},4870:(e,t,n)=>{"use strict";var r=n(3103),o=n(4990),i=n(2991),a=n(4237),s=n(3819),c=n(7501);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=i(this),r=a(n.length);return s(e),(t=c(n,0)).length=o(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},7072:(e,t,n)=>{"use strict";var r=n(3103),o=n(4990),i=n(2991),a=n(4237),s=n(6051),c=n(7501);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),n=a(t.length),r=c(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:s(e)),r}})},5735:(e,t,n)=>{"use strict";var r=n(905),o=n(9736),i=n(5495),a=n(6407),s=n(7675),c="Array Iterator",l=a.set,d=a.getterFor(c);e.exports=s(Array,"Array",(function(e,t){l(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},9731:(e,t,n)=>{"use strict";var r=n(3103),o=n(3143).right,i=n(6038),a=n(6358),s=n(8801);r({target:"Array",proto:!0,forced:!i("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},3108:(e,t,n)=>{"use strict";var r=n(3103),o=n(3143).left,i=n(6038),a=n(6358),s=n(8801);r({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},9992:(e,t,n)=>{"use strict";var r=n(3103),o=n(3718),i=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),i.call(this)}})},3430:(e,t,n)=>{"use strict";var r=n(3103),o=n(3819),i=n(2991),a=n(4237),s=n(4229),c=n(3867),l=n(6038),d=n(2671),u=n(8506),p=n(6358),h=n(9811),f=[],g=f.sort,_=s((function(){f.sort(void 0)})),m=s((function(){f.sort(null)})),y=l("sort"),v=!s((function(){if(p)return p<70;if(!(d&&d>3)){if(u)return!0;if(h)return h<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)f.push({k:t+r,v:n})}for(f.sort((function(e,t){return t.v-e.v})),r=0;r<f.length;r++)t=f[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));r({target:"Array",proto:!0,forced:_||!m||!y||!v},{sort:function(e){void 0!==e&&o(e);var t=i(this);if(v)return void 0===e?g.call(t):g.call(t,e);var n,r,s=[],l=a(t.length);for(r=0;r<l;r++)r in t&&s.push(t[r]);for(n=(s=c(s,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:String(t)>String(n)?1:-1}}(e))).length,r=0;r<n;)t[r]=s[r++];for(;r<l;)delete t[r++];return t}})},3985:(e,t,n)=>{n(9736)("flatMap")},7694:(e,t,n)=>{n(9736)("flat")},4173:(e,t,n)=>{n(3103)({global:!0},{globalThis:n(9859)})},3498:(e,t,n)=>{var r=n(3103),o=n(9037),i=Math.acosh,a=Math.log,s=Math.sqrt,c=Math.LN2;r({target:"Math",stat:!0,forced:!i||710!=Math.floor(i(Number.MAX_VALUE))||i(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?a(e)+c:o(e-1+s(e-1)*s(e+1))}})},9509:(e,t,n)=>{var r=n(3103),o=Math.hypot,i=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,o=0,s=0,c=arguments.length,l=0;s<c;)l<(n=i(arguments[s++]))?(o=o*(r=l/n)*r+1,l=n):o+=n>0?(r=n/l)*r:n;return l===1/0?1/0:l*a(o)}})},7846:(e,t,n)=>{"use strict";var r=n(3103),o=n(7400),i=n(5020),a=n(2991),s=n(3819),c=n(1787);o&&r({target:"Object",proto:!0,forced:i},{__defineGetter__:function(e,t){c.f(a(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},6635:(e,t,n)=>{"use strict";var r=n(3103),o=n(7400),i=n(5020),a=n(2991),s=n(3819),c=n(1787);o&&r({target:"Object",proto:!0,forced:i},{__defineSetter__:function(e,t){c.f(a(this),e,{set:s(t),enumerable:!0,configurable:!0})}})},5883:(e,t,n)=>{var r=n(3103),o=n(7664).entries;r({target:"Object",stat:!0},{entries:function(e){return o(e)}})},1804:(e,t,n)=>{var r=n(3103),o=n(9003),i=n(2324);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,n){i(t,e,n)}),{AS_ENTRIES:!0}),t}})},2775:(e,t,n)=>{var r=n(3103),o=n(7400),i=n(4826),a=n(905),s=n(7933),c=n(2324);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,r=a(e),o=s.f,l=i(r),d={},u=0;l.length>u;)void 0!==(n=o(r,t=l[u++]))&&c(d,t,n);return d}})},2586:(e,t,n)=>{"use strict";var r=n(3103),o=n(7400),i=n(5020),a=n(2991),s=n(2066),c=n(7567),l=n(7933).f;o&&r({target:"Object",proto:!0,forced:i},{__lookupGetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=l(n,r))return t.get}while(n=c(n))}})},3045:(e,t,n)=>{"use strict";var r=n(3103),o=n(7400),i=n(5020),a=n(2991),s=n(2066),c=n(7567),l=n(7933).f;o&&r({target:"Object",proto:!0,forced:i},{__lookupSetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=l(n,r))return t.set}while(n=c(n))}})},7890:(e,t,n)=>{var r=n(3103),o=n(7664).values;r({target:"Object",stat:!0},{values:function(e){return o(e)}})},7919:(e,t,n)=>{"use strict";var r=n(3103),o=n(3819),i=n(6485),a=n(4624),s=n(9003);r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=i.f(t),r=n.resolve,c=n.reject,l=a((function(){var n=o(t.resolve),i=[],a=0,c=1;s(e,(function(e){var o=a++,s=!1;i.push(void 0),c++,n.call(t,e).then((function(e){s||(s=!0,i[o]={status:"fulfilled",value:e},--c||r(i))}),(function(e){s||(s=!0,i[o]={status:"rejected",reason:e},--c||r(i))}))})),--c||r(i)}));return l.error&&c(l.value),n.promise}})},7178:(e,t,n)=>{"use strict";var r=n(3103),o=n(3819),i=n(1333),a=n(6485),s=n(4624),c=n(9003),l="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,n=a.f(t),r=n.resolve,d=n.reject,u=s((function(){var n=o(t.resolve),a=[],s=0,u=1,p=!1;c(e,(function(e){var o=s++,c=!1;a.push(void 0),u++,n.call(t,e).then((function(e){c||p||(p=!0,r(e))}),(function(e){c||p||(c=!0,a[o]=e,--u||d(new(i("AggregateError"))(a,l)))}))})),--u||d(new(i("AggregateError"))(a,l))}));return u.error&&d(u.value),n.promise}})},1515:(e,t,n)=>{"use strict";var r=n(3103),o=n(4231),i=n(4226),a=n(4229),s=n(1333),c=n(7942),l=n(7757),d=n(7487);if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),!o&&"function"==typeof i){var u=s("Promise").prototype.finally;i.prototype.finally!==u&&d(i.prototype,"finally",u,{unsafe:!0})}},3439:(e,t,n)=>{"use strict";var r,o,i,a,s=n(3103),c=n(4231),l=n(9859),d=n(1333),u=n(4226),p=n(7487),h=n(8787),f=n(6540),g=n(4555),_=n(1832),m=n(5052),y=n(3819),v=n(7728),A=n(8511),b=n(9003),w=n(4575),C=n(7942),I=n(5795).set,E=n(4794),S=n(7757),T=n(4665),x=n(6485),k=n(4624),P=n(6407),D=n(6541),O=n(95),N=n(8639),R=n(8801),M=n(6358),L=O("species"),B="Promise",F=P.get,W=P.set,j=P.getterFor(B),U=u&&u.prototype,V=u,G=U,$=l.TypeError,H=l.document,Z=l.process,Q=x.f,Y=Q,z=!!(H&&H.createEvent&&l.dispatchEvent),q="function"==typeof PromiseRejectionEvent,J="unhandledrejection",K=!1,X=D(B,(function(){var e=A(V)!==String(V);if(!e&&66===M)return!0;if(c&&!G.finally)return!0;if(M>=51&&/native code/.test(V))return!1;var t=new V((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(t.constructor={})[L]=n,!(K=t.then((function(){}))instanceof n)||!e&&N&&!q})),ee=X||!w((function(e){V.all(e).catch((function(){}))})),te=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},ne=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;E((function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var a,s,c,l=n[i++],d=o?l.ok:l.fail,u=l.resolve,p=l.reject,h=l.domain;try{d?(o||(2===e.rejection&&ae(e),e.rejection=1),!0===d?a=r:(h&&h.enter(),a=d(r),h&&(h.exit(),c=!0)),a===l.promise?p($("Promise-chain cycle")):(s=te(a))?s.call(a,u,p):u(a)):p(r)}catch(e){h&&!c&&h.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},re=function(e,t,n){var r,o;z?((r=H.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:n},!q&&(o=l["on"+e])?o(r):e===J&&T("Unhandled promise rejection",n)},oe=function(e){I.call(l,(function(){var t,n=e.facade,r=e.value;if(ie(e)&&(t=k((function(){R?Z.emit("unhandledRejection",r,n):re(J,n,r)})),e.rejection=R||ie(e)?2:1,t.error))throw t.value}))},ie=function(e){return 1!==e.rejection&&!e.parent},ae=function(e){I.call(l,(function(){var t=e.facade;R?Z.emit("rejectionHandled",t):re("rejectionhandled",t,e.value)}))},se=function(e,t,n){return function(r){e(t,r,n)}},ce=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ne(e,!0))},le=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw $("Promise can't be resolved itself");var r=te(t);r?E((function(){var n={done:!1};try{r.call(t,se(le,n,e),se(ce,n,e))}catch(t){ce(n,t,e)}})):(e.value=t,e.state=1,ne(e,!1))}catch(t){ce({done:!1},t,e)}}};if(X&&(G=(V=function(e){v(this,V,B),y(e),r.call(this);var t=F(this);try{e(se(le,t),se(ce,t))}catch(e){ce(t,e)}}).prototype,(r=function(e){W(this,{type:B,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(G,{then:function(e,t){var n=j(this),r=Q(C(this,V));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=R?Z.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&ne(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,t=F(e);this.promise=e,this.resolve=se(le,t),this.reject=se(ce,t)},x.f=Q=function(e){return e===V||e===i?new o(e):Y(e)},!c&&"function"==typeof u&&U!==Object.prototype)){a=U.then,K||(p(U,"then",(function(e,t){var n=this;return new V((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),p(U,"catch",G.catch,{unsafe:!0}));try{delete U.constructor}catch(e){}f&&f(U,G)}s({global:!0,wrap:!0,forced:X},{Promise:V}),g(V,B,!1,!0),_(B),i=d(B),s({target:B,stat:!0,forced:X},{reject:function(e){var t=Q(this);return t.reject.call(void 0,e),t.promise}}),s({target:B,stat:!0,forced:c||X},{resolve:function(e){return S(c&&this===i?V:this,e)}}),s({target:B,stat:!0,forced:ee},{all:function(e){var t=this,n=Q(t),r=n.resolve,o=n.reject,i=k((function(){var n=y(t.resolve),i=[],a=0,s=1;b(e,(function(e){var c=a++,l=!1;i.push(void 0),s++,n.call(t,e).then((function(e){l||(l=!0,i[c]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=Q(t),r=n.reject,o=k((function(){var o=y(t.resolve);b(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},7368:(e,t,n)=>{var r=n(7400),o=n(9859),i=n(6541),a=n(835),s=n(5762),c=n(1787).f,l=n(8151).f,d=n(8311),u=n(895),p=n(5650),h=n(7487),f=n(4229),g=n(816),_=n(6407).enforce,m=n(1832),y=n(95),v=n(2926),A=n(461),b=y("match"),w=o.RegExp,C=w.prototype,I=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,E=/a/g,S=/a/g,T=new w(E)!==E,x=p.UNSUPPORTED_Y,k=r&&(!T||x||v||A||f((function(){return S[b]=!1,w(E)!=E||w(S)==S||"/a/i"!=w(E,"i")})));if(i("RegExp",k)){for(var P=function(e,t){var n,r,o,i,c,l,p=this instanceof P,h=d(e),f=void 0===t,m=[],y=e;if(!p&&h&&f&&e.constructor===P)return e;if((h||e instanceof P)&&(e=e.source,f&&(t="flags"in y?y.flags:u.call(y))),e=void 0===e?"":String(e),t=void 0===t?"":String(t),y=e,v&&"dotAll"in E&&(r=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,x&&"sticky"in E&&(o=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),A&&(e=(i=function(e){for(var t,n=e.length,r=0,o="",i=[],a={},s=!1,c=!1,l=0,d="";r<=n;r++){if("\\"===(t=e.charAt(r)))t+=e.charAt(++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:I.test(e.slice(r+1))&&(r+=2,c=!0),o+=t,l++;continue;case">"===t&&c:if(""===d||g(a,d))throw new SyntaxError("Invalid capture group name");a[d]=!0,i.push([d,l]),c=!1,d="";continue}c?d+=t:o+=t}return[o,i]}(e))[0],m=i[1]),c=a(w(e,t),p?this:C,P),(r||o||m.length)&&(l=_(c),r&&(l.dotAll=!0,l.raw=P(function(e){for(var t,n=e.length,r=0,o="",i=!1;r<=n;r++)"\\"!==(t=e.charAt(r))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),o+=t):o+="[\\s\\S]":o+=t+e.charAt(++r);return o}(e),n)),o&&(l.sticky=!0),m.length&&(l.groups=m)),e!==y)try{s(c,"source",""===y?"(?:)":y)}catch(e){}return c},D=function(e){e in P||c(P,e,{configurable:!0,get:function(){return w[e]},set:function(t){w[e]=t}})},O=l(w),N=0;O.length>N;)D(O[N++]);C.constructor=P,P.prototype=C,h(o,"RegExp",P)}m("RegExp")},7950:(e,t,n)=>{"use strict";var r=n(3103),o=n(3466);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},103:(e,t,n)=>{var r=n(7400),o=n(1787),i=n(895),a=n(4229);r&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get.call({dotAll:!0,sticky:!0})}))&&o.f(RegExp.prototype,"flags",{configurable:!0,get:i})},3887:(e,t,n)=>{"use strict";var r=n(3103),o=n(3723),i=n(8885),a=n(4237),s=n(3819),c=n(1176),l=n(7079),d=n(8311),u=n(895),p=n(5762),h=n(4229),f=n(95),g=n(7942),_=n(6637),m=n(6407),y=n(4231),v=f("matchAll"),A="RegExp String",b="RegExp String Iterator",w=m.set,C=m.getterFor(b),I=RegExp.prototype,E=I.exec,S="".matchAll,T=!!S&&!h((function(){"a".matchAll(/./)})),x=o((function(e,t,n,r){w(this,{type:b,regexp:e,string:t,global:n,unicode:r,done:!1})}),A,(function(){var e=C(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=function(e,t){var n,r=e.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(e,t)))throw TypeError("Incorrect exec result");return n}return E.call(e,t)}(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(t.lastIndex=_(n,a(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),k=function(e){var t,n,r,o,i,s,l=c(this),d=String(e);return t=g(l,RegExp),void 0===(n=l.flags)&&l instanceof RegExp&&!("flags"in I)&&(n=u.call(l)),r=void 0===n?"":String(n),o=new t(t===RegExp?l.source:l,r),i=!!~r.indexOf("g"),s=!!~r.indexOf("u"),o.lastIndex=a(l.lastIndex),new x(o,d,i,s)};r({target:"String",proto:!0,forced:T},{matchAll:function(e){var t,n,r,o=i(this);if(null!=e){if(d(e)&&!~String(i("flags"in I?e.flags:u.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(T)return S.apply(o,arguments);if(void 0===(n=e[v])&&y&&"RegExp"==l(e)&&(n=k),null!=n)return s(n).call(e,o)}else if(T)return S.apply(o,arguments);return t=String(o),r=new RegExp(e,"g"),y?k.call(r,t):r[v](t)}}),y||v in I||p(I,v,k)},977:(e,t,n)=>{"use strict";var r=n(3103),o=n(6650).end;r({target:"String",proto:!0,forced:n(7456)},{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},5734:(e,t,n)=>{"use strict";var r=n(3103),o=n(6650).start;r({target:"String",proto:!0,forced:n(7456)},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},1639:(e,t,n)=>{"use strict";var r=n(3103),o=n(8885),i=n(8311),a=n(895),s=n(17),c=n(95),l=n(4231),d=c("replace"),u=RegExp.prototype,p=Math.max,h=function(e,t,n){return n>e.length?-1:""===t?n:e.indexOf(t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,c,f,g,_,m,y,v=o(this),A=0,b=0,w="";if(null!=e){if((n=i(e))&&!~String(o("flags"in u?e.flags:a.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=e[d]))return r.call(e,v,t);if(l&&n)return String(v).replace(e,t)}for(c=String(v),f=String(e),(g="function"==typeof t)||(t=String(t)),_=f.length,m=p(1,_),A=h(c,f,0);-1!==A;)y=g?String(t(f,A,c)):s(f,c,A,[],void 0,t),w+=c.slice(b,A)+y,b=A+_,A=h(c,f,A+m);return b<c.length&&(w+=c.slice(b)),w}})},5940:(e,t,n)=>{"use strict";var r=n(4954),o=n(4229),i=n(1176),a=n(4237),s=n(6051),c=n(8885),l=n(6637),d=n(17),u=n(8115),p=n(95)("replace"),h=Math.max,f=Math.min,g="$0"==="a".replace(/./,"$0"),_=!!/./[p]&&""===/./[p]("a","$0");r("replace",(function(e,t,n){var r=_?"$":"$0";return[function(e,n){var r=c(this),o=null==e?void 0:e[p];return void 0!==o?o.call(e,r,n):t.call(String(r),e,n)},function(e,o){if("string"==typeof o&&-1===o.indexOf(r)&&-1===o.indexOf("$<")){var c=n(t,this,e,o);if(c.done)return c.value}var p=i(this),g=String(e),_="function"==typeof o;_||(o=String(o));var m=p.global;if(m){var y=p.unicode;p.lastIndex=0}for(var v=[];;){var A=u(p,g);if(null===A)break;if(v.push(A),!m)break;""===String(A[0])&&(p.lastIndex=l(g,a(p.lastIndex),y))}for(var b,w="",C=0,I=0;I<v.length;I++){A=v[I];for(var E=String(A[0]),S=h(f(s(A.index),g.length),0),T=[],x=1;x<A.length;x++)T.push(void 0===(b=A[x])?b:String(b));var k=A.groups;if(_){var P=[E].concat(T,S,g);void 0!==k&&P.push(k);var D=String(o.apply(void 0,P))}else D=d(E,g,S,T,k,o);S>=C&&(w+=g.slice(C,S)+D,C=S+E.length)}return w+g.slice(C)}]}),!!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!g||_)},8319:(e,t,n)=>{"use strict";var r=n(4954),o=n(8311),i=n(1176),a=n(8885),s=n(7942),c=n(6637),l=n(4237),d=n(8115),u=n(3466),p=n(5650),h=n(4229),f=p.UNSUPPORTED_Y,g=[].push,_=Math.min,m=4294967295;r("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(a(this)),i=void 0===n?m:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!o(e))return t.call(r,e,i);for(var s,c,l,d=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,f=new RegExp(e.source,p+"g");(s=u.call(f,r))&&!((c=f.lastIndex)>h&&(d.push(r.slice(h,s.index)),s.length>1&&s.index<r.length&&g.apply(d,s.slice(1)),l=s[0].length,h=c,d.length>=i));)f.lastIndex===s.index&&f.lastIndex++;return h===r.length?!l&&f.test("")||d.push(""):d.push(r.slice(h)),d.length>i?d.slice(0,i):d}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=a(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){var a=n(r,this,e,o,r!==t);if(a.done)return a.value;var u=i(this),p=String(e),h=s(u,RegExp),g=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"g":"y"),v=new h(f?"^(?:"+u.source+")":u,y),A=void 0===o?m:o>>>0;if(0===A)return[];if(0===p.length)return null===d(v,p)?[p]:[];for(var b=0,w=0,C=[];w<p.length;){v.lastIndex=f?0:w;var I,E=d(v,f?p.slice(w):p);if(null===E||(I=_(l(v.lastIndex+(f?w:0)),p.length))===b)w=c(p,w,g);else{if(C.push(p.slice(b,w)),C.length===A)return C;for(var S=1;S<=E.length-1;S++)if(C.push(E[S]),C.length===A)return C;w=b=I}}return C.push(p.slice(b)),C}]}),!!h((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),f)},8827:(e,t,n)=>{"use strict";var r=n(3103),o=n(1017).end,i=n(9445)("trimEnd"),a=i?function(){return o(this)}:"".trimEnd;r({target:"String",proto:!0,forced:i},{trimEnd:a,trimRight:a})},1715:(e,t,n)=>{"use strict";var r=n(3103),o=n(1017).start,i=n(9445)("trimStart"),a=i?function(){return o(this)}:"".trimStart;r({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})},5794:(e,t,n)=>{"use strict";var r=n(3103),o=n(1017).trim;r({target:"String",proto:!0,forced:n(9445)("trim")},{trim:function(){return o(this)}})},6882:(e,t,n)=>{n(8423)("asyncIterator")},634:(e,t,n)=>{"use strict";var r=n(3103),o=n(7400),i=n(9859),a=n(816),s=n(5052),c=n(1787).f,l=n(7081),d=i.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new d(e):void 0===e?d():d(e);return""===e&&(u[t]=!0),t};l(p,d);var h=p.prototype=d.prototype;h.constructor=p;var f=h.toString,g="Symbol(test)"==String(d("test")),_=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=f.call(e);if(a(u,e))return"";var n=g?t.slice(7,-1):t.replace(_,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},1382:(e,t,n)=>{n(2574)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},1982:(e,t,n)=>{n(2574)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},6618:(e,t,n)=>{"use strict";var r=n(8200);(0,n(9918).exportTypedArrayStaticMethod)("from",n(5215),r)},4074:(e,t,n)=>{n(2574)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},4696:(e,t,n)=>{n(2574)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},3229:(e,t,n)=>{n(2574)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},9527:(e,t,n)=>{"use strict";var r=n(9918),o=n(8200),i=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(i(this))(t);t>e;)n[e]=arguments[e++];return n}),o)},315:(e,t,n)=>{"use strict";var r=n(9918),o=n(9859),i=n(4229),a=n(3819),s=n(4237),c=n(3867),l=n(2671),d=n(8506),u=n(6358),p=n(9811),h=r.aTypedArray,f=r.exportTypedArrayMethod,g=o.Uint16Array,_=g&&g.prototype.sort,m=!!_&&!i((function(){var e=new g(2);e.sort(null),e.sort({})})),y=!!_&&!i((function(){if(u)return u<74;if(l)return l<67;if(d)return!0;if(p)return p<602;var e,t,n=new g(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(n.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));f("sort",(function(e){var t=this;if(void 0!==e&&a(e),y)return _.call(t,e);h(t);var n,r=s(t.length),o=Array(r);for(n=0;n<r;n++)o[n]=t[n];for(o=c(t,function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e)),n=0;n<r;n++)t[n]=o[n];return t}),!y||m)},3161:(e,t,n)=>{n(2574)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},723:(e,t,n)=>{n(2574)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},3675:(e,t,n)=>{n(2574)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},6920:(e,t,n)=>{n(2574)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},4962:(e,t,n)=>{n(5738)},6481:(e,t,n)=>{n(4173)},8990:(e,t,n)=>{n(7919)},884:(e,t,n)=>{n(7178)},5431:(e,t,n)=>{n(3887)},5704:(e,t,n)=>{n(1639)},6886:(e,t,n)=>{var r=n(9859),o=n(5694),i=n(5735),a=n(5762),s=n(95),c=s("iterator"),l=s("toStringTag"),d=i.values;for(var u in o){var p=r[u],h=p&&p.prototype;if(h){if(h[c]!==d)try{a(h,c,d)}catch(e){h[c]=d}if(h[l]||a(h,l,u),o[u])for(var f in i)if(h[f]!==i[f])try{a(h,f,i[f])}catch(e){h[f]=i[f]}}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{let e=!1;if(n.g.__wxConfig&&"string"==typeof n.g.__wxConfig.platform)"ios"===n.g.__wxConfig.platform.toLowerCase()&&(e=!0);else if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent){const t=navigator.userAgent.toLowerCase();(t.indexOf("iphone")>=0||t.indexOf("ipad")>=0)&&(e=!0)}const t=[];e&&(n.g.Promise=void 0,t.push("Promise")),n(305)({usePolyfill:t,useNative:["WeakMap"]}),n(5482),n(9401)})()})();var __wxTest__=!1,wxRunOnDebug=function(e){e()},__wxConfig,Foundation;(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};(()=>{e.d(t,{default:()=>k});class n{constructor(){this.listeners={}}emit(e,t){if(this.listeners[e]&&this.listeners[e].length>0){let n=!1;return this.listeners[e].forEach((function(e){0!==e.count&&e.cb(t),e.count>0&&e.count--,0===e.count&&(n=!0)})),n&&(this.listeners[e]=this.listeners[e].filter((e=>0!==e.count))),!0}return!1}many(e,t,n){if(!t)return this;const r={count:n,cb:t};return this.listeners[e]?this.listeners[e].push(r):this.listeners[e]=[r],this}on(e,t){this.many(e,t,-1)}once(e,t){this.many(e,t,1)}off(e,t){for(let n=0;n<this.listeners[e].length;n++){const r=this.listeners[e][n];if(r.cb===t)return void(r.count=0)}}}const r=e.g.__wxLibrary,o=e.g.__wxConfig,i=r.envType,a=r.contextType,s="Service"===i,c="WebView"===i,l="Worker"===i,d="Widget"===i,u=c||s&&0===a.indexOf("App:"),p=s&&0===a.indexOf("Game:"),h=l&&"function"==typeof e.g.workerInvokeJsApi,f=!!o.isIsolateContext,g=s&&(f&&a.indexOf("Uncertain")>=0||a.indexOf("MainContext")>=0),_=s&&a.indexOf("SubContext")>=0,m=g||_,y=c||g,v="wxlib"===o.workerContentType,A={platform:function(){let e=o.platform;if(!e&&c){const t=window.navigator.userAgent.toLowerCase();t.indexOf("devtools")>=0?e="devtools":t.indexOf("miniprogramenv/windows")>=0?e="windows":t.indexOf("miniprogramenv/mac")>=0?e="mac":t.indexOf("miniprogramenv/mina")>=0?e="mina":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?e="ios":t.indexOf("android")>=0&&(e="android")}return(e||"unknown").toLowerCase()}(),SDKVersion:"undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version,isIsolateContext:m,isGame:p,isApp:u,isMainContext:g,isSubContext:_,isSafeEnv:y,isService:s,isWebView:c,isWorker:l,isWidget:d,isSupportWorkerAPI:h,typeStr:i,isWXLibWorker:v},b=new n,w={},C="configReady",I="libraryReady";function E(e,t){e in w?t(w[e]):x.once("lifeCycle:"+e,t)}function S(e,t){return!(e in w)&&(w[e]=t,x.emit("lifeCycle:"+e,t))}const T=e.g,x={EventEmitter:n,on:b.on.bind(b),emit:b.emit.bind(b),once:b.once.bind(b),onConfigReady:E.bind(null,C),emitConfigReady:S.bind(null,C),get isConfigReady(){return C in w},onLibraryReady:E.bind(null,I),emitLibraryReady:S.bind(null,I),get isLibraryReady(){return I in w},onBridgeReady(e){void 0!==WeixinJSBridge?e():"object"==typeof document&&document.addEventListener("WeixinJSBridgeReady",e,!1)},env:A,global:T};"undefined"!=typeof __Function__&&(Function=function(){return"return this"===arguments[arguments.length-1]?function(){return T}:new __Function__(...arguments)},Function.prototype=__Function__.prototype);e.g.__wxLibrary.onEnd=function(){x.emitLibraryReady({})};const k=x})(),Foundation=t.default})();var nativeTrans=function(e){"use strict";var t="webViewCreated",n="nativeTransFail",r="nativeTransReady";console;if("object"!=typeof e.ntrans)return e.__nativeTransEnabled__=!1,{enabled:!1,EVT_WV_CREATED:t,EVT_NTRANS_FAIL:n};e.__nativeTransEnabled__=!0;var o=e.ntrans,i=o.id,a=i===o.serviceId,s={};function c(e){a?e(o.serviceId):Foundation.onConfigReady((function(){e(o.serviceId)}))}function l(e,t){var n=s[e]=s[e]||{connectedTime:0,dataQueue:[],initTime:Date.now()};return"number"==typeof t&&(n.id=t),s[e]}function d(e,t){return{event:e,param:t,id:i,sendTime:Date.now()}}return c((function(){delete e.ntrans})),{enabled:!0,publishToTargetWithQueue:function(e,t,n){var r=l(e),i=d(t,n);r.connectedTime?o.postMessage(r.id,i):Date.now()-r.initTime>3e5?r.dataQueue=[]:r.dataQueue.push(i)},packMessage:d,broadcastMessage:function(e,t){o.broadcastMessage(e,t)},onMessage:function(e,t){t!==i&&(o.setMessageListener(),i=t),o.setMessageListener(t,(function(t){"function"==typeof e&&e(t.event,t.param,t.id,t.sendTime)}))},registerTarget:function(e,t){var n=l(e,t);n.connectedTime=Date.now(),o.postMessage(n.id,d(r)),n.dataQueue.forEach((function(e){e.sendTime=Date.now(),o.postMessage(n.id,e)})),n.dataQueue=[]},onceServiceConfirmed:c,revertTargets:function(){for(var e in s)s[e].dataQueue.forEach((function(t){WeixinJSBridge.publish(t.event,t.param,[e])})),s[e].dataQueue=[];s={}},isService:a,get id(){return i},SERVICE_TAG:"AppService",EVT_NTRANS_READY:r,EVT_WV_CREATED:t,EVT_NTRANS_FAIL:n,version:o.version,addGroup:o.addGroup.bind(o)}}(this),WeixinJSBridge=function(e){"use strict";"function"==typeof logxx&&logxx("jsbridge start");var t="undefined"!=typeof __devtoolssubcontext&&__devtoolssubcontext;if(e.navigator&&e.navigator.userAgent){var n=e.navigator.userAgent;(n.indexOf("appservice")>-1||n.indexOf("wechatdevtools")>-1)&&(t=!0)}if(t&&!Foundation.env.isWorker||e.useGlobalJSBridge){var r=e.WeixinJSBridge;return delete e.WeixinJSBridge,r}if(e.OSUseGlobalJSBridge)return r=e.WeixinJSBridge;var o=e.__wxConfig||{},i=o.isWK,a={},s=0,c={},l={},d="custom_event_",u={},p=e.webkit,h=e.WeixinJSCore;"object"==typeof h&&"function"!=typeof h.publishHandler&&(h.publishHandler=function(){}),Foundation.env.isWorker&&Foundation.env.isSupportWorkerAPI&&(h={invokeHandler:e.workerInvokeJsApi},s=1<<25),delete e.webkit,e.WeixinJSCore={invokeHandler:function(){},publishHandler:function(){},setTimerHandler:function(){},clearTimerHandler:function(){}};var f=JSON.parse,g=JSON.stringify,_=function(e,t){if(void 0!==e&&"function"==typeof a[t]&&""!==e&&null!==e){if("string"==typeof e)try{e=f(e),e=WeixinNativeBuffer.unpack(e)}catch(t){e={}}var n=a[t];delete a[t],"function"==typeof n&&n(e)}},m=function(e,t,n,r=!1){var o=t;r||(t=WeixinNativeBuffer.pack(t),o=g(t||{}));var c=++s;a[c]=n,function(e,t,n){if(h)o=h.invokeHandler(e,t,n),_(o,n);else{var r={event:e,paramsString:t,callbackId:n};if(i){var o=prompt("webgame_invoke",g(r));_(o,n)}else p.messageHandlers.invokeHandler.postMessage(r)}}(e,o,c)},y=function(e,t){t=WeixinNativeBuffer.unpack(t);var n=a[e];delete a[e],"function"==typeof n&&n(t)},v=function(e,t){c[e]=t},A=function(e,t,n){!function(e,t,n){h?h.publishHandler(e,g(t),g(n)):p.messageHandlers.publishHandler.postMessage({event:e,paramsString:g(t),webviewIds:g(n)})}(d+e,t,n)},b=function(e,t){u[d+e]=t},w=function(e,t,n,r){var o,i;t=WeixinNativeBuffer.unpack(t),-1!=e.indexOf(d)?o=u[e]:(o=c[e],i=l[e]),"function"==typeof o&&o(t,n,r),i&&i.forEach((e=>e(t,n,r)))};return e.WeixinJSBridge={get invokeCallbackHandler(){return y},get subscribeHandler(){return w}},o&&o.clientDebug&&(e.WeixinJSBridge={on:v,publish:A,invoke:m,subscribe:b,get invokeCallbackHandler(){return y},get subscribeHandler(){return w}}),{on:v,publish:A,invoke:m,subscribe:b,loadJsFiles:function(e,t){m("loadJsFiles",{paths:e},t)},addEventListener:function(e,t){l[e]?l[e].add(t):l[e]=new Set([t])},removeEventListener:function(e,t){l[e]&&(t?l[e].delete(t):delete l[e])},get invokeCallbackHandler(){return y},get subscribeHandler(){return w}}}(this);Foundation.onBridgeReady((function(){var e,t=String.prototype.replace,n=WeixinJSBridge.publish,r=[];WeixinJSBridge.publish=function(o,i,a){var s;Foundation.isConfigReady||nativeTrans.enabled?(a=function(e){if(Array.isArray(e)){var t=e.filter((function(e){return null!=e}));if(0===e.length||0!==t.length)return t}}(a||[]))&&(s=o||"",o=t.call(s,/["'\\]/g,""),e&&e(o,i,a)||n.call(WeixinJSBridge,o,i,a)):r.push([o,i,a])},Foundation.onConfigReady((function(){r.forEach((function(e){WeixinJSBridge.publish.apply(WeixinJSBridge,e)})),r=[]})),WeixinJSBridge.setCustomPublishHandler=function(t){e=t}})),function(){var e=nativeTrans.enabled;if(Foundation.onBridgeReady((function(){WeixinJSBridge.subscribe(nativeTrans.EVT_WV_CREATED,(function(t){e&&t.enableNTrans?(wxNativeConsole.warn("[NTrans][Master] receive webviewCreated: "+t.id),nativeTrans.registerTarget(t.id+"",t.id)):e&&!t.enableNTrans?(e=!1,wxNativeConsole.warn("[NTrans][Master] webView not support nTrans, revert channel."),WeixinJSBridge.setCustomPublishHandler(null),nativeTrans.revertTargets()):!e&&t.enableNTrans&&(wxNativeConsole.warn("[NTrans][Master] receive webviewCreated: "+t.id+", but service not support nTrans."),WeixinJSBridge.publish(nativeTrans.EVT_NTRANS_FAIL,{},[t.id+""]))})),global.__WeixinJSBridge=WeixinJSBridge})),e){var t={},n=["log","warn","error","info","debug"];console.warn("[NTrans][Master] init "+nativeTrans.id+" "+nativeTrans.version),WeixinJSBridge.setCustomPublishHandler((function(e,r,o){if(o&&0!==o.length)o.forEach((function(o){n.indexOf(e)<0&&!t[o]&&wxNativeConsole&&wxNativeConsole.info("[NTrans][Master] publish event["+e+"] dest ["+o+"]"),nativeTrans.publishToTargetWithQueue(o+"",e,r)}));else{var i=nativeTrans.packMessage(e,r);nativeTrans.broadcastMessage(nativeTrans.id,i)}return!0})),nativeTrans.onMessage((function(e,n,r,o){e!==nativeTrans.EVT_NTRANS_READY&&("PAGE_EVENT"===e&&n&&"__DOMReady"===n.eventName&&(t[r]=!0),WeixinJSBridge.subscribeHandler("custom_event_"+e,n,r,{nativeTime:o||Date.now()}))}),nativeTrans.id)}else __wxConfig&&"android"==__wxConfig.platform&&console.warn("[NTrans][Master] nTrans diasbled.")}(),function(e){"use strict";var t=JSON.parse,n=JSON.stringify,r=Object.defineProperty,o=Foundation.env.isSubContext,i=Foundation.env.isSafeEnv,a={},s=(Foundation.env.isWXLibWorker,["env","appLaunchInfo","ext","wxAppInfo","debug","entryPagePath","envVersion","tabBar","pages","page","accountInfo","global","platform","system","appType","networkTimeout","navigateToMiniProgramAppIdList","plugins","extAppid","host","prerender"]);function c(e,t,n,o){r(e,n,{configurable:!0,enumerable:!0,get:function(){if(n in t)return t[n];try{(new Error).stack,"object"==typeof Reporter&&"function"==typeof Reporter.reportKeyValue&&Reporter.reportKeyValue({key:"DeprecatedAPI",value:"__wxConfig."+n,force:!0})}catch(e){}try{return"function"!=typeof o?o:o()}catch(e){return}},set:function(e){t[n]=e}})}function l(e){return t(n(e))}var d=!0===(__wxConfig=void 0!==e.__wxConfig?i?Object.assign({},e.__wxConfig):l(e.__wxConfig):{}).preload,u=!1,p=[],h=[],f=Foundation.env.typeStr;Foundation.env.isSubContext&&(f="SubContext");function g(e,t){try{Date.now();e(t);Date.now()}catch(e){e.message,e.stack,"object"==typeof Reporter&&"function"==typeof Reporter.errorReport&&Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:"at wxConfig.onReady callback"})}}var _=function(e){h.push(e)},m=function(e){u?void 0!==__wxConfig&&g(e,__wxConfig):"function"==typeof e&&p.push(e)},y=function(t){t.tabBar&&t.tabBar.list&&t.tabBar.list.forEach((function(e){delete e.iconData,delete e.selectedIconData})),delete t.permission;var n=t.subPackages||t.subpackages;return n&&n.length>0&&(n.forEach((function(e){delete e.pages})),t.subPackages=t.subpackages=n),u&&(__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(o||(__wxConfig._preloadRule=__wxConfig.preloadRule||{},__wxConfig._page=__wxConfig.page||{},delete __wxConfig.preloadRule,delete __wxConfig.page),__wxConfig.updatePage=function(e,t){__wxConfig.page=__wxConfig.page||{},__wxConfig.page[e]=__wxConfig.page[e+".html"]=t,a[e+".html"]=l(t)},__wxConfig.updatePreloadRule=function(e,t){__wxConfig.preloadRule=__wxConfig.preloadRule||{},__wxConfig.preloadRule[e]=t}),e.__wxConfig.page=e.__wxConfig.page||{},__wxConfig.page=__wxConfig.page||{}),t},v=function(e){return e.onReady=m,e.beforeReady=_,o||(e.preload=d),e.isReady=u,e.isSubContext=o,e.envTag=f,e.isSafeContext=i,e.sdkVersion=e.SDKVersion=Foundation.env.SDKVersion,e.twoPhaseInject=!0,e.platform=Foundation.env.platform,e.brand||"ios"!==e.platform||(e.brand="iPhone"),"number"==typeof e.pixelRatio?e.devicePixelRatio=e.pixelRatio:"number"==typeof e.devicePixelRatio&&(e.pixelRatio=e.devicePixelRatio),e},A=function(){void 0===e.__wxConfig||u||(u=!0,Object.assign(__wxConfig,i?e.__wxConfig:l(e.__wxConfig)),__wxConfig=v(__wxConfig),__wxConfig=y(__wxConfig),function(e){if(!h.length)return e();var t=!1;setTimeout((function(){t||(console.warn("beforeReady timeout"),t=!0,e())}),3e3),Promise.all(h).catch((function(e){console.warn("beforeReady error",e)})).then((function(){t||(t=!0,e())})),h=[]}((function(){__wxConfig.onReadyStart=Date.now(),p.forEach((function(e){g(e,__wxConfig)})),__wxConfig.onReadyEnd=Date.now(),p=[],function(){if(!i){var t=e.__wxConfig,n={},r={};a=t.page||{},__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(a={});try{c(r,n,"deprecated",!0),s.forEach((function(e){if(e in t){var o=t[e];switch(e){case"page":c(r,n,e,a);break;case"env":c(r,n,e,(function(){return console.warn("DeprecationWarning: __wxConfig.env is deprecated, please use wx.env instead."),{USER_DATA_PATH:o.USER_DATA_PATH}}));break;case"accountInfo":c(r,n,e,{appId:o.appId,icon:o.icon,nickname:o.nickname});break;case"appLaunchInfo":c(r,n,e,(function(){return console.warn("DeprecationWarning: __wxConfig.appLaunchInfo is deprecated, please use wx.getLaunchOptionsSync() instead."),wx&&"function"==typeof wx.getLaunchOptionsSync?wx.getLaunchOptionsSync():{}}));break;case"wxAppInfo":c(r,n,e,{maxRequestConcurrent:o.maxRequestConcurrent,maxUploadConcurrent:o.maxUploadConcurrent,maxDownloadConcurrent:o.maxDownloadConcurrent,maxWorkerConcurrent:o.maxWorkerConcurrent,maxWebsocketConnect:o.maxWebsocketConnect});break;default:c(r,n,e,o)}}})),e.__wxConfig=r}catch(n){e.__wxConfig=t}}}()})))};function b(){Foundation.emitConfigReady(__wxConfig)}__wxConfig=v(__wxConfig),__wxConfig=y(__wxConfig),Foundation.onConfigReady((function(){A()})),o?__wxConfig.__readyHandler=b:d?Foundation.onBridgeReady((function(){WeixinJSBridge.on("onWxConfigReady",b)})):Foundation.onLibraryReady(b)}(this),function(e){"use strict";function t(e){Foundation.emit("unhandledRejection",e)||console.error("Uncaught (in promise)",e.reason)}var n,r,o=(n=[],r=[],{set:function(e,t){n.push(e),r.push(t)},get:function(e){var t=n.indexOf(e);if(-1!==t)return r[t]},delete:function(e){var t=n.indexOf(e);-1!==t&&(n.splice(t,1),r.splice(t,1))}});"object"==typeof e&&"function"==typeof e.addEventListener?(e.addEventListener("unhandledrejection",(function(e){t({reason:e.reason,promise:e.promise}),e.preventDefault()})),e.addEventListener("error",(function(e){var t;t=e.error||e.message,Foundation.emit("error",t)||console.error("Uncaught",t),e.preventDefault()}))):void 0===e.onunhandledrejection&&Object.defineProperty(e,"onunhandledrejection",{value:function(e){e=e||{},Object.prototype.hasOwnProperty.call(e,"type")?function(e){var n=o.get(e.promise);if(n)n.event=e;else{var r={event:e};setTimeout((function(){0===r.event.type&&t(r.event),o.delete(r.event.promise)}),0),o.set(e.promise,r)}}({type:e.type,reason:e.reason,promise:e.promise}):t({reason:e.reason,promise:e.promise})}})}(this);var NativeBuffer=function(e){var t=e.WeixinNativeBuffer,n=e.getNativeBufferId,r=e.setNativeBuffer,o=e.getNativeBuffer,i=__wxConfig||{},a=!1;"android"===i.platform||"windows"===i.platform||"mina"===i.platform?a="function"==typeof n&&"function"==typeof r&&"function"==typeof o&&i.nativeBufferEnabled:"ios"!==i.platform&&"mac"!==i.platform||(a=null!=t);var s=function(e){var o={};return a?o.id=function(e){var o=e.__proto__;e.__proto__=ArrayBuffer.prototype;var i=-1;return t?i=t.new(e):"function"==typeof n&&"function"==typeof r&&(i=n(),r(i,e)),e.__proto__=o,i}(e):o.base64=p(e),o},c=function(e){var n;if(null!=e)return a&&void 0!==e.id?(n=e.id,t?t.get(n):"function"==typeof o?o(n):void 0):void 0!==e.base64?h(e.base64):void 0},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=d||function(e){for(var t,n,r=String(e),o="",i=0,a=l;r.charAt(0|i)||(a="=",i%1);o+=a.charAt(63&t>>8-i%1*8)){if((n=r.charCodeAt(i+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|n}return o},u=u||function(e){var t=String(e).replace(/=+$/,""),n="";if(t.length%4==1)throw new Error('"atob" failed');for(var r,o,i=0,a=0;o=t.charAt(a++);~o&&(r=i%4?64*r+o:o,i++%4)?n+=String.fromCharCode(255&r>>(-2*i&6)):0)o=l.indexOf(o);return n},p=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return d(t)},h=function(e){for(var t=u(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer},f=function(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]};return delete e.WeixinNativeBuffer,delete e.getNativeBufferId,delete e.setNativeBuffer,delete e.getNativeBuffer,{new:s,get:c,useCompatibleMode:function(e){t&&t.useCompatibleMode(e)},pack:function(e){if(null==e)return e;var t=[];for(var n in e){var r=e[n];if(void 0!==r&&"ArrayBuffer"===f(r)&&void 0!==r.byteLength)(i=s(r)).key=n,t.push(i)}if(t.length>0){for(var o=0;o<t.length;o++){var i;delete e[(i=t[o]).key]}e.__nativeBuffers__=t}return e},unpack:function(e){if(null==e||null==e.__nativeBuffers__)return e;var t=e.__nativeBuffers__;delete e.__nativeBuffers__;for(var n=0;n<t.length;n++){var r=t[n];if(null!=r){var o=c(r);void 0!==o&&"ArrayBuffer"===f(o)&&(e[r.key]=o)}}return e},packWithBase64:function(e){if(null==e)return e;var t=[];for(var n in e){var r=e[n];if(void 0!==r&&"ArrayBuffer"===f(r)&&void 0!==r.byteLength)(i={base64:p(r)}).key=n,t.push(i)}if(t.length>0){for(var o=0;o<t.length;o++){var i;delete e[(i=t[o]).key]}e.__nativeBuffers__=t}return e}}}(this),WeixinNativeBuffer=NativeBuffer;NativeBuffer=null;var wxConsole=["log","info","warn","error","debug","time","timeEnd","group","groupEnd"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxPerfConsole=["log","info","warn","error","time","timeEnd","trace","profile","profileSync"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxNativeConsole;(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>p});const n=BabelRuntimeHelpers.objectSpread2;var r=e.n(n);const{onConfigReady:o,env:i}=Foundation;let a=["log","info","warn","error","debug","createLogger"].reduce((function(e,t){return e[t]=function(){},e}),{});function s(e,t){this.num=e,this.type=t}const c={ALL:new s(Number.MIN_VALUE,"ALL"),DEBUG:new s(5e3,"DEBUG"),LOG:new s(1e4,"LOG"),INFO:new s(2e4,"INFO"),WARN:new s(3e4,"WARN"),ERROR:new s(4e4,"ERROR"),OFF:new s(Number.MAX_VALUE,"OFF")},l=(e,t)=>({debug:e(c.DEBUG,t),log:e(c.LOG,t),info:e(c.INFO,t),warn:e(c.WARN,t),error:e(c.ERROR,t)});let d=c.INFO;const u=()=>{const e=__wxConfig.platform;let t=[];const n=function(t){const n=("0"+(t.getMonth()+1)).slice(-2),r=("0"+t.getDate()).slice(-2),o=("0"+t.getHours()).slice(-2),i=("0"+t.getMinutes()).slice(-2),a=("0"+t.getSeconds()).slice(-2),s=("00"+t.getMilliseconds()).slice(-3),c=t.getFullYear()+"-"+n+"-"+r,l=o+":"+i+":"+a+"."+s;if("ios"===e){return c+" "+l+"000"+(t.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-")}return c+" "+(t.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+l},i=function(e,n){const r=e.type;return function(...o){if(n&&Array.prototype.unshift.call(o,"["+n+"]"),wxConsole[r.toLowerCase()].call(wxConsole,...o),e.num>=d.num){const e=new Date,n=Array.prototype.slice.call(o).map((e=>{switch(typeof e){case"bigint":case"boolean":case"function":case"number":return e.toString();case"string":return e;case"symbol":return e.toString();case"undefined":return"undefined";case"object":{let t;try{t=JSON.stringify(e)}catch(e){t="[对象含有循环引用]"}return t}default:return}})).join(" ");t&&t.length>1024&&t.shift(),t.push({date:e,type:r,content:n})}}};o((function(){setTimeout((function r(){var o;(setTimeout(r,3e3),0!==t.length)&&(o=t,"ios"===e?WeixinJSBridge.invoke("systemLog",{dataArray:o.map((function(e){return{message:"\n"+n(e.date)+" ["+e.type[0].toUpperCase()+"][wxapplib]] "+e.content}}))}):"android"===e&&WeixinJSBridge.invoke("systemLog",{message:["\n"].concat(o.map((function(e){return"["+e.type[0].toUpperCase()+"]["+n(e.date)+"][wxapplib]] "+e.content}))).join("\n")}),t=[])}),3e3)}));return r()(r()({},l(i)),{},{createLogger:function(e){return l(i,"string"==typeof e?e:"default")},__mergeSubContextLogs:e=>{Array.isArray(e)&&e.forEach((e=>{const{level:t,logs:n,category:r}=e;i(t,r)(n)}))},__isFromMainContext:!0})};if(i.isWorker||i.isWidget){const e=function(){return wxConsole};a=Object.assign({createLogger:e},wxConsole)}else a=i.isSubContext&&i.isIsolateContext?(()=>{let e=[];const t=(t,n)=>(...r)=>{e.push({level:t,logs:r,category:n})},n=()=>{setTimeout((()=>{const t=wxNativeConsole.__isFromMainContext?wxNativeConsole.__mergeSubContextLogs:null;t?(t(e),e=[]):n()}),1e3)};return o(n),r()(r()({},l(t)),{},{createLogger:e=>l(t,"string"==typeof e?e:"default"),__isFromMainContext:!1})})():u();const p=a;wxNativeConsole=t.default})();var WeixinWorker=function(e){var t=["request","createSocketTask","operateSocketTask","onSocketTaskStateChange","createRequestTask","createRequestTaskAsync","operateRequestTask","onRequestTaskStateChange","createDownloadTask","createDownloadTaskAsync","operateDownloadTask","onDownloadTaskStateChange","createUploadTask","createUploadTaskAsync","operateUploadTask","onUploadTaskStateChange","getNetworkType","createAudioInstance","createAudioInstanceAsync","operateAudio","destroyAudioInstance","getAudioState","setAudioState","onAudioStateChange","uploadFile","downloadFile","saveFile","getFileInfo","getSavedFileInfo","getSavedFileList","removeSavedFile","readFile","writeFile","mkdir","readdir","rmdir","access","unlink","stat","copyFile","rename","fs_appendFile","fs_appendFileSync","fs_copyFile","fs_copyFileSync","fs_rename","fs_renameSync","getABTestConfig","reportKeyValue","reportIDKey"],n=!1;if(e.navigator&&e.navigator.userAgent){var r=e.navigator.userAgent;(r.indexOf("appservice")>-1||r.indexOf("wechatdevtools")>-1)&&(n=!0)}var o=e.WeAppWorker,i=e.WeixinWorker,a=[],s=[],c=[],l=[],d=[],u={},p=function(e){return u[e]},h=function(e,t){u[e]=t},f=function(e){e=WeixinNativeBuffer.unpack(e),s.forEach((function(t){"function"==typeof t&&t(e)}))},g=function(e,t){t=WeixinNativeBuffer.unpack(t),a.forEach((function(n){"function"==typeof n&&n(e,t)}))},_=function(e,t){c.forEach((function(n){"function"==typeof n&&n(e,t)}))},m=function(e){l.forEach((function(t){"function"==typeof t&&t(e)}))};Foundation.on("error",m),Foundation.on("unhandledRejection",(function(e){d.forEach((function(t){"function"==typeof t&&t(e)}))}));var y={get appServiceMsgHandler(){return f},get workerMsgHandler(){return g},get workerCreatedHandler(){return _},get errorHandler(){return m},get __workerId__(){return i.__workerId__}},v={create:function(e,n){var r,a,s=!(!(n=n||{}).useExperimentalWorker||!o);if(s?(a=o,r=JSON.stringify(n)):(a=i,r={APIList:t}),"function"==typeof a.create){var c=a.create.call(a,e,r);return h(c,a),{workerId:c,useWKWorker:s}}},createWXLibWorker:function(e,n){var r={APIList:t};n.APIList&&(r.APIList=t.concat(n.APIList)),n.type&&(r.type=n.type);var o=i;if("function"==typeof o.createWXLibWorker){var a=o.createWXLibWorker.call(o,e,JSON.stringify(r));return h(a,o),{workerId:a}}},terminate:function(e){var t=p(e);if("function"==typeof t.terminate)return function(e){delete u[e]}(e),t.terminate.call(t,e)},postMsgToAppService:function(e,t){try{!1!==t&&(e="android"===__wxConfig.platform&&(__wxConfig.clientVersion>=671088640&&__wxConfig.clientVersion<671088697||__wxConfig.clientVersion>=671088704&&__wxConfig.clientVersion<41943120||__wxConfig.clientVersion>=671088736&&__wxConfig.clientVersion<671088896)?WeixinNativeBuffer.packWithBase64(e):WeixinNativeBuffer.pack(e),e=JSON.stringify(e)),i.postMsgToAppService(e)}catch(e){console.error(e)}},postMsgToWorker:function(e,t,n){var r=p(e);try{!1!==n&&(t="android"===__wxConfig.platform&&(__wxConfig.clientVersion>=671088640&&__wxConfig.clientVersion<671088697||__wxConfig.clientVersion>=671088704&&__wxConfig.clientVersion<41943120||__wxConfig.clientVersion>=671088736&&__wxConfig.clientVersion<671088896)?WeixinNativeBuffer.packWithBase64(t):WeixinNativeBuffer.pack(t),t=JSON.stringify(t)),r.postMsgToWorker(e,t)}catch(e){console.error(e)}},onWorkerMsg:function(e){a.push(e)},onWorkerCreated:function(e){c.push(e)},onAppServiceMsg:function(e){s.push(e)},onError:function(e){l.push(e)},onUnhandledRejection:function(e){d.push(e)},get WebAssembly(){return i.WebAssembly}};return n&&(v.appServiceMsgHandler=y.appServiceMsgHandler,v.workerMsgHandler=y.workerMsgHandler,v.errorHandler=y.errorHandler,v.__workerId__=y.__workerId__),e.WeixinWorker=y,e.WeAppWorker=y,v}(this),JSContext,__appServiceConsole__,Protect,__errorTracer__,Reporter,__subContextEngine__,Safeway;(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>j});const n=Object.prototype.toString,r=Object.getPrototypeOf,o=Object.getOwnPropertyNames,i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=e=>n.call(e).split(" ")[1].split("]")[0],c=["constructor","__proto__","__defineGetter__","__defineSetter__"],l="undefined"!=typeof WeakMap?new WeakMap:{},d="undefined"!=typeof WeakMap?new WeakMap:{},u=function(e,t=!1){const n=s(e);return"String"===n||"Number"===n||"Boolean"===n?e.valueOf():"Object"===n?new _(e):"Array"===n?function(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(u(r))}return t}(e):"Function"===n?function(e,t=!1){let n=d.get(e);return void 0!==n||(n=function(...n){for(let e=0;e<n.length;e++){const t=n[e];n[e]=u(t)}const r=t?l.get(this):void 0,o=e.call(r,...n);return u(o)},d.set(e,n)),n}(e,t):"Undefined"!==n&&"Null"===n?null:void 0},p=function(e){return function(){const t=l.get(this);if(void 0===t)return;if(null===t)return null;const n=t[e];return u(n,!0)}},h=function(e){return function(t){const n=l.get(this);if(void 0!==n)return null===n?null:void(n[e]=u(t))}},f=e=>{for(let t=0;t<c.length;t++){if(c[t]===e)return!0}return!1},g=function(){const e=(e=>{const t=[];for(let n=e;n;n=r(n))o(n).forEach((e=>{const r=i(n,e);void 0!==r&&(r.name=e,t.push(r))}));return t})(l.get(this));for(let t=0;t<e.length;t++){const n=e[t],r=n.name;f(r)||(r in this||(delete n.value,delete n.writable,a(this,r,Object.assign(n,{get:p(r),set:h(r)}))))}};class _{constructor(e){l.set(this,e),g.call(this)}}const m=_,y={},v={},A=[];let b,w,C,I,E,S,T=0;const x=[],k=(e,t,n)=>{if(void 0===t||void 0===e||e!==b)return;const r=void 0!==n?n:++T;return v[r]=t,A.push(r),x.forEach((e=>{"function"==typeof e&&e(r)})),r},P=(e,t,n,r)=>{if(void 0===e||e!==b)return;const o=(e=>{const t=A.length;for(let n=0;n<t;n++){const t=A[n];if(v[t]===e)return t}})(t);if(void 0===o)return;const i=y[n];"function"==typeof i&&i(r,o)},D={},O=(e,t,n,r=!1)=>{if(void 0===e||e!==b)return;r||(t=t.valueOf(),n=new m(n));const o=D[t];return"function"==typeof o?o(n):void 0},N={__init__:e=>{void 0===b&&void 0!==e&&(b=e,b.register=k,b.subscribeHandler=P,b.syncMethodHandler=O,w=b.alloc,C=b.create,I=b.destroy,E=b.evaluateScriptFile,S=b.loadJsFiles,delete b.alloc,delete b.create,delete b.destroy,delete b.evaluateScriptFile,delete b.loadJsFiles)},publish:(e,t={},n)=>{const r=s(t);if("Object"!==r&&"Undefined"!==r)throw new Error("params should be an object.");n.forEach((n=>{const r=v[n];r&&r.subscribeHandler(b,e,t)}))},subscribe:(e,t)=>{y[e]=t},onRegister:e=>{x.push(e)},evaluateScriptFile:(e,t,n)=>E(e,t,n),batchLoadJsFiles:(e,t)=>{if(void 0===S||"function"!=typeof S)return"failed: loadJsFiles not supported";try{return S(e,JSON.stringify(t)),"success"}catch(e){return"failed: "+e}},alloc:(e,t)=>"function"==typeof w?w.call(b,e,t):-9999,create:(e,t)=>"function"==typeof C?C.call(b,e,t):-9999,destroy:(e,t)=>"function"==typeof I?I(e,t):-9999,isAsync:()=>b&&!0===b.async,supportAlloc:()=>"function"==typeof w,registerSyncMethod:(e,t)=>{D[e]=t}},R={};let M;const L={subscribeHandler:(e,t,n={})=>{if(void 0===e||e!==M)return;t=t.valueOf();const r=R[t];"function"==typeof r&&r(n)}};const B={__init__:(e,t)=>{void 0===M&&void 0!==e&&(M=e,M.register(e,L,t))},publish:(e,t={})=>{const n=s(t);if("Object"!==n&&"Undefined"!==n)throw new Error("params should be an object.");const r=e.valueOf(),o=t||{};M&&"function"==typeof M.subscribeHandler&&M.subscribeHandler(M,L,r,o)},subscribe:(e,t)=>{R[e]=t},invokeMainContextMethodSync:(e,t={},n=!1)=>{const r=s(t);if("Object"!==r&&"Undefined"!==r)throw new Error("params should be an object.");const o=e.valueOf();let i;return i=n?t||{}:void 0===t?{}:t,M.syncMethodHandler(M,o,i,n)}},F={alloc:()=>-9999,create:()=>-9999,destroy:()=>-9999,publish:()=>{},subscribe:()=>{},supportAlloc:()=>{}};let W;if(void 0===e.g)throw new Error("js-context: global is undefined");if(void 0!==e.g.WeixinJSContext){W=Object.getPrototypeOf(e.g.WeixinJSContext)===Object.prototype?N:B,W.__init__(WeixinJSContext,e.g.WeixinJSContextId)}else W=F;delete W.__init__,delete e.g.WeixinJSContext,delete e.g.WeixinJSContextId;const j=W;JSContext=t.default})(),(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};function n(e){void 0!==WeixinJSBridge?e():"undefined"!=typeof document&&document.addEventListener("WeixinJSBridgeReady",e,!1)}function r(){n((()=>{WeixinJSBridge.publish(...arguments)}))}function o(){n((()=>{WeixinJSBridge.subscribe(...arguments)}))}e.d(t,{default:()=>x});const i=__wxConfig,a=(i.platform,"devtools"===i.platform),s=(i.platform,"ios"===i.platform);i.platform,i.platform,i.platform;function c(){if(i&&"debug"in i&&void 0!==i.debug)return!!i.debug}const l=i.host||{},d=(l.env,l.env,l.env,l.forceUseNativeMap,"object"==typeof window&&window&&window.__wkrenderer_h5,Object.prototype.toString);function u(e){return d.call(e).slice(8,-1)}const p=e=>"Number"===u(e),h=e=>null===e,f=Number.isNaN||(e=>e!=e),g=(Number.isFinite,Array.isArray||(e=>"Array"===u(e))),_=e=>ArrayBuffer.isView(e)&&!(e=>"DataView"===u(e))(e);function m(e){const t=u(e);if("Number"===t){if(f(e))return"NaN";if(p(n=e)&&Math.abs(n)===1/0)return"Infinity"}else if("Object"===t){if(h(e))return"Null"}else if(t.endsWith("Array")&&"Array"!==t&&_(e))return"TypedArray";var n;return t}const y={String:0,NaN:"<NaN>",Infinity:e=>e>0?"<Infinity>":"<-Infinity>",Number:0,Boolean:0,Null:0,Undefined:"<Undefined>",Function:e=>""===e.name?"<Function>":`<Function: ${e.name}>`,Date:e=>`<Date: ${e.toJSON()}>`,RegExp:e=>`<RegExp: ${e.toString()}>`,Error:e=>`<${e.name}: ${e.message}>`,Symbol:e=>`<Symbol: ${e.toString()}>`,Promise:"<Promise>",Map:e=>`<Map: size=${e.size}>`,WeakMap:"<WeakMap>",Set:e=>`<Set: size=${e.size}>`,WeakSet:"<WeakSet>",ArrayBuffer:e=>`<ArrayBuffer: byteLength=${e.byteLength}>`,DataView:e=>`<DataView: byteLength=${e.byteLength}, byteOffset=${e.byteOffset}>`,TypedArray:e=>`<${e.constructor&&e.constructor.name?e.constructor.name:"TypedArray"}: byteLength=${e.byteLength}, length=${e.length}>`};function v(e){const t=new WeakMap;let n=0;return function e(r,o){let i;const[a,s]=function(e){const t=m(e);return t in y?y[t]?"function"!=typeof y[t]?[y[t],!0]:[y[t](e),!0]:[e,!0]:[null,!1]}(r);return s?a:n>3e3?"<Hidden>":t.has(r)?`<Circular: ${t.get(r)}>`:(t.set(r,o),n++,g(r)?r.map(((t,n)=>e(t,`${o}[${n}]`))):(i={},Object.keys(r).forEach((t=>{i[t]=e(r[t],`${o}.${t}`)})),i))}(e,"@")}function A(e){try{return(e=Array.prototype.slice.call(e)).map(v)}catch(e){return void console.warn("[console] This object can not be logged")}}const b=["log","warn","error","info","debug"];let w,C,I;function E(e,t,n){w=e,C=t,I=n}class S{constructor(){Object.keys(I).forEach((e=>{"function"==typeof I[e]&&(this[e]=function(){const t=I[e]||(()=>{});t.apply(I,arguments)})})),b.forEach((e=>{const t=I[e];this[e]=function(){const n=c();if(!1===n){if("warn"!==e&&"error"!==e&&!a)return;return void t.apply(I,arguments)}const o=A(arguments);o&&(C&&C.length>1024&&C.shift(),C&&C.push({method:e,log:o}),n&&w&&w.length>0&&r(e,{log:o},w),t.apply(I,o))}})),this.group=function(){const e=I.group||(()=>{});e.apply(I,arguments)},this.groupEnd=function(){const e=I.groupEnd||(()=>{});e.apply(I,arguments)}}}const T=!s&&!!e.g.__isAppServiceRemoteDebugMode__;if(a||T){if(a||T){E([],[],console)}}else{const e=[],t=[];E(t,e,console),o("GenerateFuncReady",((n,o)=>{t.push(o),c()&&r("initLogs",{logs:e},[o])})),o("webviewClearLog",((n,o)=>{const i=t.filter((e=>e!==o));r("serviceClearLog",{triggerWebViewId:o},i),e.length=0})),i.onReady((()=>{c()&&t.length>0&&r("initLogs",{logs:e},t)})),console=new S}const x={BaseConsole:S};__appServiceConsole__=t.default})(),(()=>{var e={184:(e,t,n)=>{"use strict";n.r(t),n.d(t,{reportDeprecatedAPI:()=>r});const r=e=>{Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=__wxConfig},582:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PLATFORM:()=>o,IS_DEVTOOLS:()=>i,IS_ANDROID:()=>a,IS_IOS:()=>s,IS_WINDOWS:()=>c,IS_MAC:()=>l,IS_MINA:()=>d,IS_PC:()=>u,debugEnabled:()=>p,HOST:()=>h,IS_HOST_SDK:()=>f,IS_HOST_WMPF:()=>g,IS_HOST_WECHAT:()=>_,IS_USE_NATIVE_MAP:()=>m,WK_RENDERER_H5:()=>y});var r=n(665);const o=r.Z.platform,i="devtools"===r.Z.platform,a="android"===r.Z.platform,s="ios"===r.Z.platform,c="windows"===r.Z.platform,l="mac"===r.Z.platform,d="mina"===r.Z.platform,u=c||l;function p(){if(r.Z&&"debug"in r.Z&&void 0!==r.Z.debug)return!!r.Z.debug}const h=r.Z.host||{},f="SDK"===h.env,g="WMPF"===h.env,_="WeChat"===h.env,m=h.forceUseNativeMap||!1,y="object"==typeof window&&window&&window.__wkrenderer_h5},538:(e,t,n)=>{const{reportDeprecatedAPI:r}=n(184),{IS_IOS:o}=n(582);e.exports={hijack:function(e=!0,t=!0){if(void 0!==n.g.Function){const e={};function r(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return t?e:{}}}r.prototype=n.g.Function.prototype,n.g.Function.prototype.constructor=r,n.g.Function=r}const i=globalThis;if("undefined"!=typeof eval&&(o&&n.g.__isAppServiceRemoteDebugMode__||(eval=void 0)),"undefined"!=typeof setTimeout&&e){const e=setTimeout;setTimeout=function(t,n=0){if("function"!=typeof t)throw new TypeError(`setTimeout expects a function as first argument but got ${typeof t}.`);const r=__errorTracer__.surroundThirdByTryCatch(t,"at setTimeout callback function"),o=[].slice.call(arguments,2);return e((function(){r.apply(i,o)}),n)};const t=setInterval;setInterval=function(e,n){if("function"!=typeof e)throw new TypeError(`setInterval expects a function as first argument but got ${typeof e}.`);const r=__errorTracer__.surroundThirdByTryCatch(e,"at setInterval callback function"),o=[].slice.call(arguments,2);return t((function(){r.apply(i,o)}),n)}}},hijackWasm:function(){if("undefined"!=typeof WebAssembly){["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((e=>{if(void 0===WebAssembly[e])return;const t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:()=>(r("globalWa"),t),set:t=>{Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}))}}}},585:()=>{if("undefined"==typeof navigator){try{new Function("\n      var GeneratorFunctionProto = Object.getPrototypeOf(function* () {});\n      Object.defineProperty(GeneratorFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}try{new Function("\n      var AsyncFunctionProto = Object.getPrototypeOf(async function () {});\n      Object.defineProperty(AsyncFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}try{new Function("\n      var AsyncGeneratorFunctionProto = Object.getPrototypeOf(async function* () {});\n      Object.defineProperty(AsyncGeneratorFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{doNotWriteGlobalObjs:()=>l,doNotWriteObj:()=>d,globalEsObjs:()=>t,hijack:()=>u.hijack,hijackWasm:()=>u.hijackWasm,overwriteSetPrototypeOf:()=>c});n(585);var e=n(665);const t=["Array","ArrayBuffer","AsyncFunction","Atomics","Boolean","DataView","Date","EvalError","Float32Array","Float64Array","Function","Generator","GeneratorFunction","Infinity","Int16Array","Int32Array","Int8Array","InternalError","Intl","Intl.Collator","Intl.DateTimeFormat","Intl.NumberFormat","Iterator","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","TypedArray","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","null","parseFloat","parseInt","undefined","unescape","uneval"];"NodeJS"!==e.Z.JSEngineName&&t.push("Error");const o=globalThis,i=n.g.Object.setPrototypeOf,a=(e,t,n,r)=>{if(!e||!t||-1!==t.indexOf("constructor"))return;let o;try{o=e[t]}catch(e){return}if(!o)return;let s=Object.getOwnPropertyDescriptor(e,t);if(!r&&!s&&"__proto__"!==t)return;s=s||{enumerable:!!r,configurable:!0};const c=typeof o;if(o&&("function"===c||"object"===c)&&(s.configurable&&Object.defineProperty(e,t,{get:()=>o,set(s){if("object"==typeof this||"function"==typeof this){if(this!==e)return a(this,t,n,!0),void(this[t]=s);if(o!==s)if(r)try{o=s,"__proto__"===t&&i(this,s)}catch(e){}else console.error(`[non-writable] modification of global variable '${n}' is not allowed when using plugins at app.json.`),"object"==typeof Reporter&&(Reporter.reportKeyValue({key:"GlobalReadOnly",value:n}),Reporter.reportIDKey({key:"global_objs_readonly"}))}},enumerable:s.enumerable,configurable:!!r&&s.configurable}),!r&&"__proto__"!==t)){const e=Object.getOwnPropertyNames(o);"object"==typeof o&&a(o,"__proto__",`${n}.__proto__`,!1);for(let t=0;t<e.length;++t){const r=e[t];a(o,r,`${n}.${r}`,!1)}}},s=t.concat(["getApp","getCurrentPages","define","require","Reporter","Protect","requirePlugin","definePlugin"]),c=function(){Object.defineProperty(o.Object,"setPrototypeOf",{value:(e,t)=>(e.__proto__=t,e),configurable:!0})},l=function(){try{new Date;for(let e=0;e<s.length;++e){const t=s[e];if(o[t]){new Date;a(o,t,t,!1),new Date}}new Date}catch(e){}},d=(e,t,n)=>a(e,t,n,!1);var u=n(538)})(),Protect=r})(),(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{callSystemFunction:()=>c,wrapSystemFunction:()=>l,callMiniProgramOrPluginFunction:()=>d,callThirdPartyFunction:()=>u,wrapMiniProgramOrPluginFunction:()=>p,wrapThirdPartyFunction:()=>h,surroundThirdByTryCatch:()=>f});const n=/[ (@]*https?:\/\/([^/]*)\/+(.*?):(\d+):(\d+)/,r=[];function o(e){if(!e||e.__wxOriginalStack__)return!1;const t=e.stack;if(void 0===t)return!1;let n=t,o=r.length-1,a=0;for(;a>=0&&o>=0;){let e=n.length,t=0;for(const r in i){if(!i[r])continue;const o=n.indexOf(i[r],a);o<0||e<=o||(e=o,t=i[r].length)}if(e>=n.length)break;const s=`at <${r[o--].description}>`;n=n.slice(0,e)+s+n.slice(e+t),a=e+s.length}return Object.defineProperties(e,{__wxOriginalStack__:{value:t,writable:!0,configurable:!0},stack:{value:n,writable:!0,enumerable:!0,configurable:!0}}),!0}const i={wrapSystemFunction:null,wrapMiniProgramOrPluginFunction:null};function a(e){const t=((new Error).stack||"").match(/.+/gm);let r="",o=0;t&&t.forEach((e=>{if(n.test(e)&&(o+=1,2===o)){const t=e.match(/^(\s*)at /),n=t?t[1].length:0;return r=e.slice(n),!1}return!0})),i[e]=r}function s(){let e="";for(let t=r.length-1;t>=0;t--)r[t].pluginAppId&&(e=r[t].pluginAppId);return e}function c(e,t,n,c,d,u=!1){let p;null===i.wrapSystemFunction&&(i.wrapSystemFunction="",l("","",a)("wrapSystemFunction")),r.push({description:t});try{p=n.apply(c,d)}catch(t){if(o(t)){if("AppServiceSdkKnownError"===t.type)throw r.pop(),t;if("ThirdScriptError"===t.type){const e=s();Reporter.thirdErrorReport({error:t,source:e,triggerErrorCallback:!u})}else Reporter.errorReport({key:e,error:t,triggerErrorCallback:!u})}if(u)throw r.pop(),t}return r.pop(),p}function l(e,t,n,r=!1){return function(...o){return c(e,t,n,this,o,r)}}function d(e,t,n,s,c,l=!1){let d;null===i.wrapMiniProgramOrPluginFunction&&(i.wrapMiniProgramOrPluginFunction="",p("","",a)("wrapMiniProgramOrPluginFunction")),r.push({description:t,pluginAppId:e});try{d=n.apply(s,c)}catch(t){if(o(t)&&Reporter.thirdErrorReport({error:t,source:e||"",triggerErrorCallback:!l}),l)throw r.pop(),t}return r.pop(),d}function u(e,t,n,r,o=!1){return d(s(),e,t,n,r,o)}function p(e,t,n,r=!1){return function(...o){return d(e,t,n,this,o,r)}}function h(e,t,n=!1){return function(...r){return d(s(),e,t,this,r,n)}}function f(e,t){const n=(t||"").match(/^\s*(?:at )?([\s\S]*)$/),r=n?n[1]:"",o=e||function(){};return function(...e){return d(s(),r,o,o,e,!1)}}__errorTracer__=t})(),(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};(()=>{e.d(t,{default:()=>H});const n={APP:0,WIDGET:1,GAME:2,GAME_SUBCONTEXT:3},r={login:1,login_cancel:2,login_fail:3,request_fail:4,connectSocket_fail:5,closeSocket_fail:6,sendSocketMessage_fail:7,uploadFile_fail:8,downloadFile_fail:9,redirectTo_fail:10,navigateTo_fail:11,navigateBack_fail:12,appServiceSDKScriptError:13,webviewSDKScriptError:14,jsEnginScriptError:15,thirdScriptError:16,webviewScriptError:17,exparserScriptError:18,widgetEnginScriptError:113,widgetThirdScriptError:114,gameSDKScriptError:135,gameSubContextSDKScriptError:136,gameThirdScriptError:137,gameSubContextThirdScriptError:138,startRecord:19,startRecord_fail:20,getLocation:21,getLocation_fail:22,chooseLocation:23,chooseLocation_fail:24,openAddress:25,openAddress_fail:26,openLocation:27,openLocation_fail:28,makePhoneCall:29,makePhoneCall_fail:30,operateWXData:31,operateWXData_fail:32,checkLogin:33,checkLogin_fail:34,refreshSession:35,refreshSession_fail:36,chooseVideo:37,chooseVideo_fail:38,chooseImage:39,chooseImage_fail:40,verifyPaymentPassword:41,verifyPaymentPassword_fail:42,requestPayment:43,requestPayment_fail:44,bindPaymentCard:45,bindPaymentCard_fail:46,requestPaymentToBank:47,requestPaymentToBank_fail:48,openDocument:49,openDocument_fail:50,chooseContact:51,chooseContact_fail:52,operateMusicPlayer:53,operateMusicPlayer_fail:54,getMusicPlayerState_fail:55,playVoice_fail:56,setNavigationBarTitle_fail:57,switchTab_fail:58,getImageInfo_fail:59,enableCompass_fail:60,enableAccelerometer_fail:61,getStorage_fail:62,setStorage_fail:63,clearStorage_fail:64,removeStorage_fail:65,getStorageInfo_fail:66,getStorageSync_fail:67,setStorageSync_fail:68,addCard_fail:69,openCard_fail:70,openSetting_fail:71,reLaunch_fail:72,getClipboardData_fail:73,setClipboardData_fail:74,showShareMenu_fail:75,hideShareMenu_fail:76,showToast_fail:77,hideToast_fail:78,openBluetoothAdapter_fail:79,closeBluetoothAdapter_fail:80,getBluetoothAdapterState_fail:81,startBluetoothDevicesDiscovery_fail:82,stopBluetoothDevicesDiscovery_fail:83,getBluetoothDevices_fail:84,getConnectedBluetoothDevices_fail:85,createBLEConnection_fail:86,closeBLEConnection_fail:87,getBLEDeviceServices_fail:88,getBLEDeviceCharacteristics_fail:89,notifyBLECharacteristicValueChanged_fail:90,readBLECharacteristicValue_fail:91,checkIsSupportFacialRecognition_fail:92,startFacialRecognitionVerify_fail:93,startFacialRecognitionVerifyAndUploadVideo_fail:94,startBeaconDiscovery_fail:95,stopBeaconDiscovery_fail:96,getBeacons_fail:97,getSetting_fail:98,setScreenBrightness_fail:99,getScreenBrightness_fail:100,vibrateShort_fail:101,vibrateLong_fail:102,shareAppMessage:103,shareAppMessage_fail:104,shareAppMessage_cancel:105,shareAppMessageDirectly:106,shareAppMessageDirectly_fail:107,shareAppMessageDirectly_cancel:108,sendBizRedPacket_fail:109,addPhoneContact_fail:110,saveImageToPhotosAlbum_fail:111,saveVideoToPhotosAlbum_fail:112,setTopBarText_fail:115,setNavigationBarRightButton_fail:116,setEnableDebug_fail:117,captureScreen_fail:118,setKeepScreenOn_fail:119,createRequestTask:120,createRequestTask_fail:121,createDownloadTask:122,createDownloadTask_fail:123,createUploadTask:124,createUploadTask_fail:125,checkIsSupportSoterAuthentication_fail:126,startSoterAuthentication_fail:127,navigateToMiniProgram_fail:128,navigateBackMiniProgram_fail:129,openDeliveryList_fail:130,setNavigationBarColor_fail:131,setStatusBarStyle_fail:132,getFileInfo_fail:133,global_objs_readonly:134,writeBLECharacteristicValue_fail:206,adData_error:140,adExposureReport_fail:141,adClickReport_fail:142,adNavigateToMiniProgram_fail:143,adOpenUrl_fail:144,initGameIsolatedContext:145,initGameIsolatedContext_fail:146,initGameOpenDataContext:147,initGameOpenDataContext_fail:148,initAppIsolatedContext:149,initAppIsolatedContext_fail:150,adFollowReport_fail:151,adAddContact_fail:152,adDownloadAppInternal_fail:153,adGetInstallState_fail:154,adQueryDownloadTask_fail:155,adAddDownloadTaskStraight_fail:156,adPauseDownloadTask_fail:157,adResumeDownloadTask_fail:158,adInstallDownloadTask_fail:159,pluginDisplayInPage:160,functionalPageSuccess:161,functionalPageFail:162,functionalPageReject:163,insertInputToWebLayer_fail:166,insertVideoToWebLayer_fail:167,insertInputToWebLayer_succ:168,insertVideoToWebLayer_succ:169,insertMapToWebLayer_fail:171,insertMapToWebLayer_succ:172,insertLiveToWebLayer_fail:178,insertLiveToWebLayer_succ:179,insertCanvas2dToWebLayer_fail:180,insertCanvas2dToWebLayer_succ:181,insertWebGLToWebLayer_fail:187,insertWebGLToWebLayer_succ:186,insertVideo2ToWebLayer_fail:182,insertVideo2ToWebLayer_succ:183,insertCameraToWebLayer_fail:184,insertCameraToWebLayer_succ:185,insertTextareaToWebLayer_fail:189,insertTextareaToWebLayer_succ:188,audioInstancesCountReach1024:170,bindUDP:173,sendUDPMessage:174,receiveUDPMessage:175,UDPError:176,sendUDPMessageToInvalidAddress:177,clientLibVersionNotMatch:205,subContextLibVersionNotMatch:207,oaAddContact_fail:201,oaReportBehavior_fail:202,oaGetContactData_fail:203,demoEnterHomePage:210,demoConfigRepeat:211,getUserInteractiveStorage:212,modifyFriendInteractiveStorage:213,modifyFriendInteractiveStorageShowModal:214,modifyFriendInteractiveStorageConfirm:215,modifyFriendInteractiveStorageCancel:216,disableLivePlayer:220,disableLivePusher:221,disableVideo:222,asyncApiCost:226,asyncApiCount:227,requestSubscribeMessageWithNative:230,requestSubscribeMessageWithNativeSuccess:231,requestSubscribeMessageWithNativeFail:232,tradeServiceGetPermissionBytesSuccess:235,tradeServiceGetPermissionBytesFail:236,tradeServiceCanUse:237,tradeServiceCanNotUse:238,tradeServiceTapCard:239,midasLaunchFeatureFail:240,createNormalWorker:241,createWKWorker:242,onWorkerWebViewTerminate:244,loadGameIndependentSubPackageFail:243,requestPaymentCheckTicketCount:245,requestPaymentCheckTicketFail:246,requestPaymentCheckTicketTimeout:247,useLaunchExptInfo:249,useOriginLaunchExptInfo:250,useContactExptInfo:251},o={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267,MiniGameOpenDataMonitor:23536},i={webview2AppService:1,appService2Webview:2,funcReady:3,firstGetData:4,firstRenderTime:5,reRenderTime:6,forceUpdateRenderTime:7,appRoute2newPage:8,newPage2pageReady:9,thirdScriptRunTime:10,pageframe:11,WAWebview:12,WAWidget:13,widgetCanvasReady:14,widgetFirstDataPush:15},a={apiCallback:1,pageInvoke:2,widgetInvoke:3},s={appServiceSDKScriptError:1,webviewSDKScriptError:2,jsEnginScriptError:3,thirdScriptError:4,webviewScriptError:5,exparserScriptError:6,widgetEnginScriptError:7,widgetThirdScriptError:8,gameSDKScriptError:10,gameSubContextSDKScriptError:12,gameThirdScriptError:13,gameSubContextThirdScriptError:14},c={[n.APP]:"thirdScriptError",[n.WIDGET]:"widgetThirdScriptError",[n.GAME]:"gameThirdScriptError",[n.GAME_SUBCONTEXT]:"gameSubContextThirdScriptError"},l=__wxConfig,d=(l.platform,"devtools"===l.platform),u=(l.platform,"ios"===l.platform);l.platform,l.platform,l.platform;const p=l.host||{},h=(p.env,p.env,p.env,p.forceUseNativeMap,"object"==typeof window&&window&&window.__wkrenderer_h5,Object.prototype.toString);function f(e){return h.call(e).slice(8,-1)}const g=e=>"Number"===f(e);Number.isNaN,Number.isFinite,Array.isArray;let _=[],m=[],y=[],v=0,A=0,b=0,w=0,C=0;const I={},E={},S={};function T(e){void 0!==WeixinJSBridge?e():"undefined"!=typeof document&&document.addEventListener("WeixinJSBridgeReady",e,!1)}function x(...e){T((()=>{WeixinJSBridge.invoke(...e)}))}function k(){!_||_.length<=0||(x("reportKeyValue",{dataArray:_.slice(0,500)}),_=_.slice(500))}function P(){!m||m.length<=0||(x("reportIDKey",{dataArray:m.slice(0,500)}),m=m.slice(500))}function D(){!y||y.length<=0||(x("systemLog",{dataArray:y}),y=[])}let O=()=>{},N=()=>{},R=()=>{},M=()=>{},L="",B={},F=-1,W=0,j=n.APP,U="";"function"==typeof l.onReady&&l.onReady((()=>{void 0!==l.appType&&(F=l.appType),"object"==typeof l.appLaunchInfo&&(W=l.appLaunchInfo.scene),setTimeout((()=>{WeixinJSBridge.invoke("getNetworkType",{},(e=>{e&&e.networkType&&(U=e.networkType)}))}),0),"function"==typeof WeixinJSBridge.addEventListener&&WeixinJSBridge.addEventListener("onNetworkStatusChange",(e=>{U=e.networkType}))}));const V={surroundThirdByTryCatch:__errorTracer__.surroundThirdByTryCatch,slowReport:({key:e,cost:t,extend:n,force:r})=>{const o=a[e],i=Date.now();if(!o)return;if(!r&&i-C<500)return;if(Object.keys(S).length>50)return;if(S[n]||(S[n]=0),S[n]++,S[n]>3)return;C=i;const s=`${t},${encodeURIComponent(n)},${o},${V.getAppType()}`;V.reportKeyValue({key:"Slow",value:s})},speedReport:({key:e,data:t,timeMark:n,force:r})=>{const o=i[e],a=Date.now();let s=0;const c=n.nativeTime;if(!o)return;if(!r&&a-(I[o]||0)<500)return;if(!n.startTime||!n.endTime)return;if((1===o||2===o)&&!c)return;t&&(s=JSON.stringify(t).length),I[o]=a;const l=`${o},${n.startTime},${c},${c},${n.endTime},${s},${V.getAppType()}`;V.reportKeyValue({key:"Speed",value:l})},reportQualityData(e,t,n,r=[]){x("reportKeyValue",{version:2,dataArray:[{key:o[e],value:[n-t,W,t,n,...r].join(",")}]})},reportKeyValue:({key:e,value:t,immediately:n=!1,number:r=!1})=>{if(r||o[e]){for(n?_.unshift({key:r?e:o[e],value:t}):_.push({key:r?e:o[e],value:t});_.length>5e3;)_.pop();(Date.now()-v>5e3||n)&&(v=Date.now(),k())}},reportIDKey:({id:e,key:t,value:n=1})=>{if(r[t]){for(m.push({id:e||(u?"356":"358"),key:r[t],value:n});m.length>5e3;)m.pop();Date.now()-A>5e3&&(A=Date.now(),P())}},reportIDKeyDirectly:({id:e,key:t,immediately:n=!1})=>{if(t&&"356"!==e&&"358"!==e){for(m.push({id:e,key:t,value:1});m.length>5e3;)m.pop();(Date.now()-A>5e3||n)&&(A=Date.now(),P())}},thirdErrorReport:({key:e=j,error:t,triggerErrorCallback:n=!0,isUnhandledRejection:r=!1,promise:o,source:i=""})=>{V.errorReport({key:c[e],error:t,triggerErrorCallback:n,isThirdScriptError:!0,isUnhandledRejection:r,promise:o,source:i})},errorReport:({key:e,error:t,isThirdScriptError:r=!1,triggerErrorCallback:o=!0,isUnhandledRejection:i=!1,promise:a,source:c=""})=>{if(!s[e])return;if(null==t)return;let u,p;"function"==typeof __wxSourceMapRetrace__&&(t=__wxSourceMapRetrace__(t)),"object"==typeof t&&(t.message||t.stack)?(u=t.message,p=t.stack):(u=function(e){try{return JSON.stringify(e)}catch(e){return e.message,""}}(t),p=f(t));const h=r?"MiniProgramError":`SystemError (${e})`,g=u;let _="";t.name&&0!==p.indexOf(t.name)&&(_="\n"+t.name+": "+g);const m=`${h}\n${g}${_}\n${p}`;if(d){const e=new Error(`${h}\n${g}`);"object"==typeof t&&void 0!==t.name&&Object.defineProperty(e,"name",{value:t.name}),"object"==typeof t&&void 0!==t.stack&&Object.defineProperty(e,"stack",{value:t.stack}),console.error(e)}else i?console.error("(in promise) "+m):console.error(m);if(m.indexOf("subContext.js")>=0)return;if("undefined"!=typeof window&&void 0!==window.__webviewId__?function(...e){T((()=>{WeixinJSBridge.publish(...e)}))}("WEBVIEW_ERROR_MSG",{data:{msg:m},options:{timestamp:Date.now()}}):o&&(V.triggerErrorMessage(m,i,t,a),r&&V.triggerThirdErrorMessage(m,i,t,a)),Object.keys(E).length>50)return;if(i&&"Error"!==f(t))return;let y="",v="";j!==n.APP&&j!==n.GAME||(y=L,v=function(e){let t="";return Object.keys(e).forEach(((n,r)=>{0!==r&&(t+="&");try{t+=`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`}catch(e){}})),t}(B));const A=c.match(/wx[0-9a-f]{16}/)?function(e){const t=l&&l.appContactInfo&&l.appContactInfo.call_plugin_info;if(!t||!Array.isArray(t))return 0;const n=t.find((t=>t.plugin_id===e));return n&&void 0!==n.inner_version?n.inner_version:0}(c):0;if(4===l.appType)try{U=__appServiceSDK__.getGameRelatedContextsExports().game._getCurrentNetworkType()}catch(e){}const b=[s[e],t.name,...[g,p,"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.version||"",V.getAppType(),y,v,"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.updateTime||"","",i?1:0,c,A,U].map((e=>{let t;try{t=encodeURIComponent(e)}catch(n){t=e}return t}))].join(",");E[b]||(E[b]=0),E[b]++,r&&E[b]>3||E[b]>3||(V.reportIDKey({key:e}),V.reportKeyValue({key:"Error",value:b}),P(),k(),D())},log:(e,t)=>{e&&"string"==typeof e&&(!t&&Date.now()-b<50||(b=Date.now(),y.push(e+""),y.length>=50&&D()))},submit:()=>{Date.now()-w<50||(w=Date.now(),P(),k(),D())},registerErrorListener:e=>{"function"==typeof e&&(O=e)},registerThirdErrorListener:e=>{"function"==typeof e&&(N=e)},registerUnhandledRejectionListener:e=>{"function"==typeof e&&(R=e)},registerThirdUnhandledRejectionListener:e=>{"function"==typeof e&&(M=e)},triggerErrorMessage:(e,t=!1,n,r)=>{setTimeout((()=>{try{t?R(n,r):O(e)}catch(e){console.error(e.message,"at onError callback function")}}),0)},triggerThirdErrorMessage:(e,t=!1,n,r)=>{setTimeout((()=>{try{t?M(n,r):N(e)}catch(e){console.error(e.message,"at onError callback function")}}),0)},setAsWidget:()=>{j=n.WIDGET},setAsGame:()=>{j=n.GAME},setAsGameSubContext:()=>{j=n.GAME_SUBCONTEXT},getAppType:()=>-1===F?0:F+1e3},G={};function $(e){Object.defineProperty(G,e,{get(){return t=V[e],function(...e){try{return t.apply(t,e)}catch(e){return void console.error("reporter error:"+e.message,e.stack)}};var t},configurable:!0,enumerable:!0})}Object.keys(V).forEach((e=>{$(e)})),Object.defineProperty(G,"__route__",{set(e){L=e}}),Object.defineProperty(G,"__method__",{set(){}}),Object.defineProperty(G,"__query__",{set(e){B=e}}),G.RunType=n,"undefined"!=typeof window&&Object.defineProperty(window,"onbeforeunload",{configurable:!0,enumerable:!0,writable:!0,value(){V.submit()}});const H=G})(),Reporter=t.default})(),(()=>{var e={146:(e,t,n)=>{var r=n(61),o=n(76);function i(e){e=(0,o.B)(e),(0,r.N0)()?("function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),console.error("Uncaught FrameworkError","\n",e.message,"\n",e.stack)):(0,r.sK)(e,"")}function a(e={}){(0,r.N0)()?("function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),console.error("Uncaught (in promise) FrameworkError","\n",e.reason)):(0,r.sK)(e.reason,"",e.promise||null)}void 0!==WeixinJSBridge&&(WeixinJSBridge.on("onError",i),WeixinJSBridge.on("unhandledRejection",a)),Foundation.on("error",i),Foundation.on("unhandledRejection",a)},676:(e,t,n)=>{n.d(t,{OJ:()=>i,yQ:()=>r,YZ:()=>o});function r(){if(n.g.PerfDog)return n.g.PerfDog}function o(){if(n.g.NativeGlobal&&n.g.NativeGlobal.Profiler)return n.g.NativeGlobal.Profiler}const i=new class{constructor(){this.callbacks=new Map}sendPackage(e,t){const n=this.callbacks.get(e);n&&Array.isArray(n)&&n.forEach((n=>{n(e,t)}))}registerCallback(e,t){if(this.callbacks.get(e)){this.callbacks.get(e).push(t)}else{const n=[t];this.callbacks.set(e,n)}}};n.g.LanDebug=i},495:(e,t,n)=>{var r=n(176);__wxConfig.onReady((()=>{"undefined"!=typeof __wxSourceMap&&(__wxSourceMap.get=function(e){if(__wxSourceMap[e])return __wxSourceMap[e];const t=(0,r.M)();for(let n=0;n<t.length;n++){const r=t[n].contextGlobal.__wxSourceMap;if("object"==typeof r&&r[e]){let t;try{t=JSON.parse(JSON.stringify(r[e]))}catch(e){console.error("[SourceMap] clone soucemap failed.")}return t}}})}))},647:(e,t,n)=>{n.d(t,{Z:()=>v});var r=n(356),o=n.n(r),i=n(61);const a={},s={},c={},l={},d={},u={},p=wxNativeConsole.createLogger("SubContext");let h,f=0;JSContext.subscribe("subContextMessage",((e,t)=>{const n=c[t];n&&n.__onMessageHandler(e)})),JSContext.subscribe("subContextReady",((e,t)=>{(0,i.G$)()||(0,i.oi)()?c[t].__onReadyHandler(t,e):h&&(h.__onReadyHandler(t,e),h=void 0)})),JSContext.subscribe("subContextLibVarReady",((e,t)=>{c[t].__onLibVarReadyHandler(e)}));const g=function(e){const t=JSContext.create(e);return t<=0&&setTimeout((()=>{}),0),a[this.__guid__]=t,t},_=function(e){const t=(0,i.G$)()||JSContext.isAsync()?JSContext.alloc(e):JSContext.alloc();return t<=0&&setTimeout((()=>{}),0),((0,i.G$)()||(0,i.oi)())&&(c[t]=this),a[this.__guid__]=t,t},m=function(e,t){Object.defineProperty(this,e,{value:t,writable:!1,configurable:!1})},y=function(){if(void 0!==s[this.__guid__]){u[this.__guid__].forEach((e=>{this.postMessage(e)})),u[this.__guid__]=[]}};const v=class{constructor({name:e,secure:t=!0,env:n={},entry:r=[],injectAfterAlloc:o=!0}){m.call(this,"__name__",e),m.call(this,"__guid__",f++),m.call(this,"__secure__",t),m.call(this,"__entry__",r),m.call(this,"__injectAfterAlloc__",o),this.contextGlobal=globalThis,this.alreadyLoadedJsFiles=new Set,this.setExportEnv(n),d[this.__guid__]=[],u[this.__guid__]=[]}init(){var e=this;if(h=this,!JSContext.supportAlloc())return g.call(this,this.__entry__);if(_.call(this,this.__name__),this.__injectAfterAlloc__){if(((0,i.G$)()||JSContext.isAsync())&&(0,i.N0)())return o()((function*(){for(let t=0,n=e.__entry__.length;t<n;t++)yield e.evaluateScriptFile(e.__entry__[t])}))();this.__entry__.forEach((e=>this.evaluateScriptFile(e)))}}unShiftEntries(e){p.log("unShiftEntries",e),this.__entry__.unshift(...e)}onMessage(e){if(this.__onMsgCallback=e,"function"==typeof this.__onMsgCallback){d[this.__guid__].forEach((e=>{this.__onMsgCallback(e)})),d[this.__guid__]=[]}}postMessage(e){const t=s[this.__guid__];if(void 0!==t)JSContext.publish("mainContextMessage",e,[t]);else{u[this.__guid__].push(e)}}onInitReady(e){this.__onInitReadyCallbacks=this.__onInitReadyCallbacks||[],this.__onInitReadyCallbacks.push(e)}setExportEnv(e){e.contextName=this.__name__,e.contextSecure=this.__secure__,l[this.__guid__]=e}setEntry(e){this.__entry__.splice(0,this.__entry__.length),this.__entry__.push(...e)}getEntry(){return this.__entry__}refreshExportEnv(e){return new Promise((t=>{if(!e)throw Error("refreshExportEnv: missing arguments.");this.setExportEnv(e);const n=l[this.__guid__],r=s[this.__guid__];JSContext.publish("subContextEnvReady",n,[r],!0),JSContext.subscribe("subContextRefreshEnvReady",((e,n)=>{r===n&&t()}))}))}refreshWxConfig(e,t){const n=s[this.__guid__];JSContext.publish("subContextRefreshWxConfig",{key:e,value:t},[n])}dynamicExportGlobal(e={name:"",value:"",needCondom:!0},t){const n=()=>{const n=s[this.__guid__];JSContext.publish("exportGlobalRequire",e,[n]),t&&t()};void 0!==a[this.__guid__]?n():this.onInitReady(n)}evaluateScriptFile(e){p.log(`evaluateScriptFile, scriptFilePath=${e}`),p.log("evaluateScriptFile, clientIds",a),p.log(`evaluateScriptFile, __guid__=${this.__guid__}`,typeof this.__guid__);const t=a[this.__guid__];if(p.log(`evaluateScriptFile, clientId=${t}, __guid__=${this.__guid__}, ${a[this.__guid__]}`,a),void 0!==t){if(((0,i.G$)()||JSContext.isAsync())&&(0,i.N0)())return p.log("evaluateScriptFile, (isDevtools || JSContext.isAsync) && isIsolatedContext"),new Promise((n=>{const r=JSContext.evaluateScriptFile(t,e,(()=>n(r)));if(p.log(`JSContext.evaluateScriptFile ret=${r}`),1!==r)throw new Error(`SubContext evaluateScriptFile "${e}" failed: error code ${r}`)}));const n=JSContext.evaluateScriptFile(t,e);if(p.log(`JSContext.evaluateScriptFile ret=${n}`),1!==n)throw new Error(`SubContext evaluateScriptFile "${e}" failed: error code ${n}`);this.alreadyLoadedJsFiles.add(e)}}loadJsFiles(e){e=e.map((e=>"/"===e[0]?e:"/"+e));const t=a&&a[this.__guid__],n=e.filter((e=>this.alreadyLoadedJsFiles.has(e)));if(n.length>0&&wxNativeConsole.info("[SubContext] loadJsFiles ignored loaded: "+n.join(",")),0!==(e=e.filter((e=>!this.alreadyLoadedJsFiles.has(e)))).length){if(void 0!==t&&JSContext&&JSContext.batchLoadJsFiles)try{const n=Date.now();wxNativeConsole.info("[SubContext] loadJsFiles: "+e.join(",")),JSContext.batchLoadJsFiles(t,e),wxNativeConsole.info("[SubContext] loadJsFiles done, cost "+(Date.now()-n)),e.forEach((e=>this.alreadyLoadedJsFiles.add(e)))}catch(t){throw new Error(`SubContext loadJsFiles "${e}" failed: error ${t}`)}}else wxNativeConsole.info("[SubContext] loadJsFiles have no files to load, return")}destroy(){const e=a[this.__guid__],t=s[this.__guid__];e>0&&(JSContext.publish("subContextDestroy",{},[t]),JSContext.destroy(e)),delete c[t],delete a[this.__guid__],delete s[this.__guid__],delete l[this.__guid__],delete d[this.__guid__],delete u[this.__guid__],delete this.__guid__,delete this.contextGlobal}__onMessageHandler(e){if("function"==typeof this.__onMsgCallback)this.__onMsgCallback(e);else{d[this.__guid__].push(e)}}__onReadyHandler(e,t){c[e]=this,s[this.__guid__]=e,this.contextGlobal=t.contextGlobal;const n=l[this.__guid__];n&&JSContext.publish("subContextEnvReady",n,[e],!0),this.__onInitReadyCallbacks&&(this.__onInitReadyCallbacks.forEach((e=>{e(t)})),delete this.__onInitReadyCallbacks),delete this.__onReadyHandler,y.call(this)}}},176:(e,t,n)=>{n.d(t,{z:()=>o,M:()=>i});const r=[],o=function(e){r.push(e)},i=function(){return r}},61:(e,t,n)=>{n.d(t,{xJ:()=>i,N0:()=>s,F:()=>c,QT:()=>l,sK:()=>d,Hw:()=>u,G$:()=>p,gn:()=>h,cF:()=>f,NG:()=>g,Qj:()=>_,c6:()=>m,oi:()=>y});var r=n(356),o=n.n(r);const i=globalThis;function a(e){e===i&&p()||(Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){let n;try{n=e[t]}catch(e){}"object"!=typeof n&&"function"!=typeof n||Object.isFrozen(n)||a(n)})))}const s=function(){return void 0!==__wxConfig&&__wxConfig.isIsolateContext},c=function(){const e=i;Protect.globalEsObjs.concat(["console"]).forEach((function(t){e[t]&&(a(e[t]),Object.defineProperty(e,t,{value:e[t],configurable:!1,writable:!1}))}))},l=function(){var e=o()((function*(e,t){Reporter.reportIDKey({key:t});try{yield e()}catch(e){Reporter.reportIDKey({key:`${t}_fail`,force:!0});const n=t.indexOf("initGame")>=0?"gameSDKScriptError":"appServiceSDKScriptError";Reporter.errorReport({key:n,error:e,extend:""})}}));return function(t,n){return e.apply(this,arguments)}}(),d=function(e,t,n){void 0!==n?Reporter.thirdErrorReport({error:e,isUnhandledRejection:!0,promise:n,extend:t}):Reporter.thirdErrorReport({error:e,isUnhandledRejection:!1,extend:t})},u=function(e,t){return function(){try{return t.apply(t,arguments)}catch(t){Reporter.errorReport({key:e,error:t,extend:""})}}},p=function(){return"devtools"===__wxConfig.platform},h=function(){return"ios"===__wxConfig.platform},f=e=>{let t;if(WeixinJSBridge.invoke("accessSync",{path:e},(e=>{/:fail/.test(e.errMsg)&&(t=e.errMsg)})),t)throw new Error(t)},g=e=>{let t,n;if(WeixinJSBridge.invoke("readFileSync",{filePath:e,encoding:"utf-8"},(e=>{/:fail/.test(e.errMsg)?n=e.errMsg:t=e.data})),n)throw new Error(n);return t},_=(e="",t=[])=>{if(e&&"string"==typeof e&&!/^index/.test(e)){const n=e.replace(/(^\/+)|(\/+$)/g,"").split("/"),r=t.find((t=>{if(t.independent){const r=t.root||"",o=t.alias||"",i=r.replace(/(^\/+)|(\/+$)/g,"").split("/");if(n.length>=i.length){const e=i.every(((e,t)=>e===n[t]));if(e)return e}if(o&&0===e.indexOf(o))return!0}return!1}));if(r)return r}return!1},m=e=>{const t=[1001,1011,1007,1008,1074,1088,1044,1010,1096,1014,1043,1107,1155].indexOf(e)>=0;return t},y=()=>JSContext.isAsync()},290:(e,t,n)=>{n.d(t,{E:()=>C,F:()=>I});var r=n(503),o=n.n(r),i=n(647),a=n(676),s=n(61),c=n(594);const l="undefined"!=typeof __AppServiceRemoteDebugger__,d=l?__AppServiceRemoteDebugger__(__wxConfig.platform,c.M,c.O,s.NG,n.g.WeixinJSBridge):null;let u={};l&&d&&(u=(0,s.gn)()?d.runtime.getSubContextGlobals():{},u.BaseConsole&&d.runtime.setupConsole(console,u.BaseConsole));const p="app-service.js",h="appservice.app.js",f="common.app.js",g="appservice.js",_=new i.Z({name:"app",secure:!1,entry:[p],injectAfterAlloc:!1}),m=new Set;__wxConfig.onReady((()=>{"develop"!==__wxConfig.envVersion&&"trial"!==__wxConfig.envVersion||(m.add("wx0354ba48aadc0ab2"),m.add("wxfa43a4a7041a84de"))}));const y=e=>wxNativeConsole.info("[injectEntryFile] "+e),v=new Set,A=(e,t)=>{if(v.has(e))return;l&&d&&(0,s.gn)()&&d.runtime.registerScript(e);let n=-1,r=-1;if(v.add(e),y(`isLazyLoad: ${__wxConfig.isLazyLoad}`),y(`moduleName: ${e}`),y(`separatedPlugins: ${JSON.stringify(t)}`),__wxConfig.isLazyLoad){console.info("Lazy code loading is enabled. Only injecting required components.");const o=[];t.forEach((t=>{let n=(e+t.prefix_path+"/").replace(/\/\/$/,"/");t.prefix_path||(n+=`__extended__/${t.plugin_id}/`,m.add(t.plugin_id));try{y(`accessSync path: ${n+f}`),(0,s.cF)(n+f),o.push(n+f,n+h),t.prefix_path||((e,t)=>{const n=(0,s.NG)(t);if(!n)return;let r;try{r=JSON.parse(n)}catch(e){r={}}(__wxConfig.subPackages||[]).forEach((t=>{"/"+t.root===e&&t.useExtendedLib&&r.allExtendedComponents&&(t.allExtendedComponents=r.allExtendedComponents)})),_.refreshWxConfig("subPackages",__wxConfig.subPackages)})(e,n+"plugin.json")}catch(e){o.push(n+g)}})),o.push(e+f,e+h),y(`using separated plugins: ${JSON.stringify(o)}`),n=Date.now(),_.loadJsFiles(o),r=Date.now()}else{const o=t.map((t=>{let n=(e+t.prefix_path+"/").replace(/\/\/$/,"/");return t.prefix_path||(n+=`__extended__/${t.plugin_id}/`,m.add(t.plugin_id)),n+g}));o.push(e+p),y(`using separated plugins: ${JSON.stringify(o)}`),n=Date.now(),o.forEach((e=>{e="/"===e[0]?e:"/"+e,_.alreadyLoadedJsFiles.has(e)||(_.evaluateScriptFile(e),_.alreadyLoadedJsFiles.add(e))})),r=Date.now()}_.refreshWxConfig("extendedLibList",Array.from(m)),n>0&&r>0&&(y("time cost: "+(r-n)),b.send({type:"evaluateScript",moduleName:e,startTime:n,endTime:r}))},b=function(){let e;return{setReceiver(t){e=t},send(t){"function"==typeof e&&e(t)}}}(),w=(0,s.Hw)("appServiceSDKScriptError",((e,t)=>{let n=t.moduleName;const r="__APP__"===n,o=t.separatedPlugins||[];"string"!=typeof n&&console.error("SubContext onSubPackageReady error: moduleName is empty"),n.endsWith("/")||(n=`${n}/`),__wxConfig.onReady((()=>{(0,s.gn)()&&l?(n=r?"":n,d.runtime.isInitialInject()?(d.runtime.startBufferBridgeMessages(),d.runtime.runAfterAttached((()=>{A(n,o),d.runtime.dispatchBridgeMessages()}))):A(n,o)):A(r?"":n,o)}))})),C=function(){var e;let t={};l&&d&&(t=o()({__isAppServiceRemoteDebugMode__:!0,__remoteDebug__:d.__remoteDebug__},u));const r=new Safeway(_),i=(null===(e=__libVersionInfo__)||void 0===e?void 0:e.version)||"9.9.9",s=o()(o()({wxLibVersion:i,__Function__:__Function__,console:Object.assign({group:()=>{},groupEnd:()=>{}},console),setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,safeway:r,__wxConfig:__wxConfig,Reporter:Reporter,BaseConsole:__appServiceConsole__.BaseConsole,NativeGlobal:n.g.NativeGlobal,WeixinCanvas:n.g.WeixinCanvas,WeixinArrayBuffer:n.g.WeixinArrayBuffer,wxNativeConsole:wxNativeConsole,getWxSourceMap(){if("undefined"!=typeof __wxSourceMap)return __wxSourceMap},Canvas:n.g.Canvas,Image:n.g.Image,ImageData:n.g.ImageData,Path2D:n.g.Path2D,SkiaCanvasExternalTexture:n.g.SkiaCanvasExternalTexture,skiacanvasLoadNewFont:n.g.skiacanvasLoadNewFont,SkiaCanvas:NativeGlobal.SkiaCanvas,SkiaCanvasRequestAnimationFrame:NativeGlobal.SkiaCanvasRequestAnimationFrame,SkiaCanvasCancelAnimationFrame:NativeGlobal.SkiaCanvasCancelAnimationFrame,SkiaImageData:NativeGlobal.SkiaImageData,HTMLCanvasView:NativeGlobal.HTMLCanvasView,HTMLCanvasElement:NativeGlobal.HTMLCanvasElement,SkiaImage:NativeGlobal.SkiaImages,SkiaPath2D:NativeGlobal.SkiaPath2D,SkiaCanvasLoadNewFont:NativeGlobal.SkiaCanvasLoadNewFont,originConsole:console},t),{},{performanceChannel:b,debuggerMessager:c.O,__sclEngine__:__sclEngine__,LanDebug:a.OJ,getPerfDog:a.yQ,getProfiler:a.YZ});r.onSubpackageReady(w),_.setExportEnv(s),_.init()},I=function(){return _};JSContext&&JSContext.registerSyncMethod&&JSContext.registerSyncMethod("injectEntryFile",(e=>{A(e.moduleName,e.separatedPlugins)}))},594:(e,t,n)=>{n.d(t,{M:()=>i,O:()=>o});const r=[],o="undefined"!=typeof DebuggerConnection?DebuggerConnection:{};o.registerCallback=e=>{"function"==typeof e&&r.push(e)},o.onCustomMessage=(e,t)=>{r.forEach((n=>{try{n(e,t)}catch(e){}}))};const i="undefined"!=typeof JSThread?JSThread:null},309:(e,t,n)=>{n.d(t,{M:()=>d,e:()=>u});var r=n(647),o=n(61),i=n(676),a=n(594);n.g.LanDebug=i.OJ,n.g.getPerfDog=i.yQ,n.g.__debuggerMessager__=a.O;const s=new r.Z({name:"game",secure:!1,entry:["game.js"]}),c=wxNativeConsole.createLogger("initGameContext");function l(){__appServiceSDK__.getABTestConfig({experimentId:(0,o.gn)()?"clicfg_appbrand_ios_game_split_multi_plugincode":"clicfg_appbrand_game_split_multi_plugincode",experimentType:"Expt",success(e){c.log(`testConfig result=${e.testConfig}`),e&&1===Number(e.testConfig)&&function(){const e=__wxConfig.plugins||__wxConfig.gamePlugins;if(c.log("plugins",e),e){const t=Object.keys(e).filter((t=>{const{contexts:n}=e[t];return c.log("contexts",n),!n||n.some((e=>"gameContext"===e.type))})).map((t=>e[t]));c.log("gameContextPlugins",t),s.unShiftEntries(t.map((e=>{const{provider:t}=e,n=`__plugin__/${t}/plugin.js`;return c.log(`evaluate game plugin script file: ${n}`),n})))}}()},fail(e){c.error("getABTestConfig fail",e)}})}const d=function(e){return e.__wxConfig=__wxConfig,s.setExportEnv(e),c.log("__appServiceSDK__",__appServiceSDK__),(0,o.G$)()||JSContext.isAsync()||l(),s.init()},u=function(){return s}},945:(e,t,n)=>{n.d(t,{J:()=>s,r:()=>c});var r=n(647),o=n(61);const i=new r.Z({name:"gameOpenData",secure:!0,entry:["subContext.js"]}),a=wxNativeConsole.createLogger("initOpenDataContext");const s=e=>(e.__wxConfig=__wxConfig,i.setExportEnv(e),(0,o.G$)()||JSContext.isAsync()||function(){const e=__wxConfig.plugins||__wxConfig.gamePlugins;if(a.log("plugins",e),e){const t=Object.keys(e).filter((t=>{const{contexts:n}=e[t];return a.log("contexts",n),!!n&&n.some((e=>"openDataContext"===e.type))})).map((t=>e[t]));a.log("gameContextPlugins",t),i.unShiftEntries(t.map((e=>{const{provider:t}=e,n=`__plugin__/${t}/plugin.js`;return a.log(`evaluate opendata plugin script file: ${n}`),n})))}}(),i.init()),c=function(){return i}},813:(e,t,n)=>{n.d(t,{dr:()=>g,qo:()=>_,hS:()=>y,K0:()=>m});var r=n(356),o=n.n(r),i=n(503),a=n.n(i),s=n(647),c=n(176),l=n(61),d=n(309),u=n(945);const p={},h={isolatedContext:{},gameContext:{},gameOpenDataContext:{},unknown:{}},f=e=>`__plugin__/${e}/plugin.js`,g=(e={provider:"",secure:!0,env:null,isPreload:!1})=>{const{env:t,provider:n,secure:r,isPreload:i}=e;if(!1===(0,l.N0)())throw new Error("isn't isolateContext mode!");const d=p[n];let u;if(d)return u=d.contextGlobal.__require,!0===d.__isCompleted||!1===d.__isCompleted&&(d.dynamicExportGlobal({name:"pluginEnv",value:t}),h.isolatedContext[n]=u),u;const g=`gamePlugin_${n}`,_=f(n),m=new s.Z({name:g,secure:r,entry:[_]}),y=e=>(e.__wxConfig=__wxConfig,m.setExportEnv(a()(a()({},e),{},{pluginEnv:t})),m.init());return((0,l.G$)()||JSContext.isAsync())&&!0===i?o()((function*(){return yield(0,l.QT)(o()((function*(){(0,c.z)(m),yield y(__appServiceSDK__.getIsolatedGamePluginContextEnv(e)),u=m.contextGlobal.__require,m.__isCompleted=!1,p[n]=m})),"initGamePluginContext"),u}))():((0,l.QT)((()=>{(0,c.z)(m),y(__appServiceSDK__.getIsolatedGamePluginContextEnv(e)),u=m.contextGlobal.__require,m.__isCompleted=!0,p[n]=m}),"initGamePluginContext"),h.isolatedContext[n]=u,u)},_=(e,t,n)=>{const r=wxNativeConsole.createLogger("injectGamePlugin"),{__name__:i}=e,a=f(t),s="game"===i?"gameContext":"gameOpenData"===i?"gameOpenDataContext":"unknown";return r.log(`invoke, provider=${t}, isPreload=${n}, contextName=${i}, entry=${a}, contextType=${s}`),r.log(`invoke, provider=${t}, isPreload=${n}, contextName=${i}, entry=${a}, contextType=${s}`),((0,l.G$)()||JSContext.isAsync())&&!0===n?(r.log("(isDevtools || JSContext.isAsync) && isPreload"),o()((function*(){return yield e.evaluateScriptFile(a),h[s][t]=e.contextGlobal.__require,{provider:t,requireFunc:e.contextGlobal.__require,contextType:s}}))()):(r.log("will evaluateScriptFile"),e.evaluateScriptFile(a),h[s][t]=e.contextGlobal.__require,{provider:t,requireFunc:e.contextGlobal.__require,contextType:s})},m=function(){var e=o()((function*(){const e=(()=>{const e=__wxConfig.gamePlugins||__wxConfig.plugins||{},t=[];return Object.keys(e).forEach((n=>{e[n].contexts?e[n].contexts.forEach((r=>{t.push(a()(a()({},e[n]),{},{context:r,contexts:null}))})):t.push(a()(a()({},e[n]),{},{context:{type:"gameContext"},contexts:null}))})),t})(),t=(e,t)=>e.getEntry().unshift(t);return Promise.all(e.map((e=>{const{provider:n,context:r}=e;switch(r.type){case"isolatedContext":return g(a()(a()({},e),{},{isPreload:!0}));case"gameContext":return t((0,d.e)(),f(n));case"openDataContext":return t((0,u.r)(),f(n));default:throw new Error(`pluginConf error: invalid context name: ${r.type}`)}})))}));return function(){return e.apply(this,arguments)}}(),y=()=>h},228:(e,t,n)=>{var r=n(176);JSContext&&JSContext.registerSyncMethod&&JSContext.registerSyncMethod("loadJsFiles",(e=>{const t=(0,r.M)().find((t=>t.__name__===e.contextName));t?t.loadJsFiles(e.paths):wxNativeConsole.warn(`[MainContext] context name with ${e.contextName} not found, loadJsFiles fail`)}))},76:(e,t,n)=>{n.d(t,{B:()=>r});const r=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.replace(/"/g,'\\"').replace(/'/g,'"').replace(/\n/g,"\\n"))}catch(t){return{message:e,stack:""}}}},356:e=>{e.exports=BabelRuntimeHelpers.asyncToGenerator},503:e=>{e.exports=BabelRuntimeHelpers.objectSpread2}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{initAppRelatedContexts:()=>u,initGameRelatedContexts:()=>p,getAppContext:()=>o.F,getGameContext:()=>i.e,createGameOpenDataContext:()=>_,getGameOpenDataContext:()=>a.r,createIsolatedGamePlugin:()=>s.dr,injectGamePlugin:()=>s.qo,getGamePlugins:()=>s.hS,isIsolateContext:()=>c.N0,initGameJS:()=>f,initFunctionalPage:()=>h,getPool:()=>l.M,isValidGameIndependentSubpackagePath:()=>c.Qj,loadJsFiles:()=>m});var e=n(356),t=n.n(e),o=(n(146),n(290)),i=n(309),a=n(945),s=n(813),c=n(61),l=n(176);n(228),n(495);const d=Object.keys,u=function(e){(0,c.N0)();const t=d(e);for(let n=0;n<t.length;n++){const r=t[n];c.xJ[r]=e[r]}(0,c.N0)()&&(0,c.QT)((function(){Protect.hijack(),(0,c.F)(),(0,l.z)((0,o.F)()),(0,o.E)(e)}),"initAppIsolatedContext"),__wxConfig.onReady((()=>{!(0,c.N0)()&&__wxConfig.plugins&&(Protect.overwriteSetPrototypeOf(),Protect.doNotWriteGlobalObjs())}))},p=()=>{__wxConfig.onReady(t()((function*(){const e=__appServiceSDK__.getGameRelatedContextsExports();((0,c.G$)()||JSContext.isAsync())&&(0,c.N0)()&&(yield(0,s.K0)()),(0,c.N0)();const t=e.game.FunctionalPage,n=__wxConfig.appLaunchInfo,r=t.parseCompletePath(n.path);if(r.isFunctionalPage&&t.VALID_SCENE.includes(n.scene))h(e);else if((0,c.c6)(n.scene)){const t=(0,c.Qj)(n.path,__wxConfig.subPackages);if(t){const n=(0,i.e)();let r=t.root;r.endsWith(".js")||(r.endsWith("/")||(r=`${r}/`),r=`${r}game.js`),wxNativeConsole.info("[Independent subPackagePath]",r),n.setEntry([r]),g(e,(e=>{e&&(console.error(e),console.error("then load main package"),wxNativeConsole.error("run game independent subpackage fail",e),n.evaluateScriptFile("game.js"),Reporter.reportIDKey({key:"loadGameIndependentSubPackageFail"}))}))}else g(e)}else g(e)})))};function h(e){(e=e||__appServiceSDK__.getGameRelatedContextsExports()).game.FunctionalPage.initFunctionalPage()}function f(e){e=e||__appServiceSDK__.getGameRelatedContextsExports();(0,l.M)().length>0||g(e)}function g(e,n){e=e||__appServiceSDK__.getGameRelatedContextsExports(),(0,c.N0)()&&(0,c.QT)(t()((function*(){let t;(0,c.F)(),(0,l.z)((0,i.e)());try{yield(0,i.M)(e.game)}catch(e){t=e}"function"==typeof n&&n(t)})),"initGameIsolatedContext")}function _(e){e=e||__appServiceSDK__.getGameRelatedContextsExports(),(0,c.QT)(t()((function*(){(0,l.z)((0,a.r)());try{yield(0,a.J)(e.gameOpenData)}catch(e){}})),"initGameOpenDataContext")}const m=()=>{}})(),__subContextEngine__=r})(),(()=>{"use strict";var e=(e,t,n)=>{n.d(t,{default:()=>J});let r=null;const o=()=>null!==r;let i=[];WeixinJSBridge.subscribe("batchGetPluginPermissionBytes",(e=>{r=e.data.pluginPermissionBytes,i.forEach((e=>e())),i=[]}));const a=e=>e.split("/",1)[0];function s(e,t){if(delete t.permissionBytes,void 0===t.pluginId)return t;const n=((e,t)=>{e=a(e);let n=r&&r[e]&&r[e][t];return null==n?n=[0,0,0]:"object"!=typeof n&&(n=[n,n,n]),n})(t.pluginId,e);return t.permissionBytes=n,t.privateData=JSON.stringify({pluginId:t.pluginId}),t}function c(e,t,n,r){n=parseInt(n,10),d(e,t,(e=>{r(e[0]===n)}))}function l(e,t,n,r){n=parseInt(n,10),d(e,t,(e=>{r(e[0]!==n)}))}function d(e,t,n){var s;s=()=>{e=a(e);let o=r&&r[e]&&r[e][t];null==o?o=[0,0,0]:"object"!=typeof o&&(o=[o,o,o]),n(o)},o()?s():i.push(s)}const u=BabelRuntimeHelpers.objectSpread2;var p=n.n(u);const h=Function.prototype.call,f=h.bind(String.prototype.indexOf),g=h.bind(String.prototype.slice),_=h.bind(Array.prototype.sort),m=h.bind(Number.prototype.toString),y=h.bind(Object.prototype.toString),v=Object.keys,A=Array.isArray||function(e){return"[object Array]"===y(e)},b=e=>{if("string"==typeof e)return e;if("number"==typeof e){let t=m(e,10);const n=f(t,".");return n>0&&(t=g(t,0,n+5)),t}if("boolean"==typeof e)return!0===e?"true":"false";if(A(e)){let t="";for(let n=0;n<e.length;n++)t+=b(e[n])+";";return`[${t}]`}if("object"==typeof e){let t="";const n=v(e);_(n);for(let r=0;r<n.length;++r)t+=n[r]+":"+b(e[n[r]])+";";return`{${t}}`}return""},w=({apiName:e,args:t,argsList:n,seq:r})=>{let o=e;for(let e=0;e<n.length;e++)o+="|"+b(t[n[e]]);return o+=r,o},C=JSON.parse('{"i":{"createRequestTask":["__skipDomainCheck__","url"],"installDownloadTask":["downloadId"],"downloadAppInternal":["appUrl"],"addDownloadTaskStraight":["taskName","taskUrl","fileMd5"],"getInstallState":["packageName","packageNameArray"],"setClipboardData":["data"],"getClipboardData":[],"navigateBackApplication":[]}}'),I=Math.floor,E=Math.random,S=function(){var e,t,n=Function.prototype.call.bind(String.prototype.charAt),r=Function.prototype.call.bind(String.prototype.indexOf),o=(e=Function.prototype.call.bind(String.fromCharCode),t=String,function(...n){return e(t,...n)});return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,i){i.r(t),i.d(t,"memory",(function(){return p})),i.d(t,"sha1",(function(){return h})),i.d(t,"setSalt",(function(){return f})),i.d(t,"main",(function(){return g})),i.d(t,"__wbindgen_malloc",(function(){return _})),i.d(t,"__wbindgen_realloc",(function(){return m})),i.d(t,"__wbindgen_free",(function(){return y})),i.d(t,"__wbindgen_start",(function(){return v}));var a=new ArrayBuffer(8),s=new Int32Array(a);new Float32Array(a),new Float64Array(a);var c,l=new ArrayBuffer(1114112),d=(c=new Uint8Array(l),function(e,t){var i,a;if("undefined"==typeof Buffer)for(i=function(e){for(var t,i,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0;l<e.length;)t=r(s,n(e,l++))<<18|r(s,n(e,l++))<<12|(i=r(s,n(e,l++)))<<6|(a=r(s,n(e,l++))),c+=64===i?o(t>>16&255):64===a?o(t>>16&255,t>>8&255):o(t>>16&255,t>>8&255,255&t);return c}(t),a=0;a<i.length;a++)c[e+a]=i.charCodeAt(a);else for(i=Buffer.from(t,"base64"),a=0;a<i.length;a++)c[e+a]=i[a]});d(1048576,"VHJpZWQgdG8gc2hyaW5rIHRvIGEgbGFyZ2VyIGNhcGFjaXR5c3JjL2xpYmFsbG9jL3Jhd192ZWMucnMAAAAQACQAAAAkABAAFwAAAF0CAAAJAAAAaW50ZXJuYWwgZXJyb3I6IGVudGVyZWQgdW5yZWFjaGFibGUgY29kZVQAEAAoAAAAJAAQABcAAAAKAgAAJwAAADAAAAAxAAAAMgAAADMAAAA0AAAANQAAADYAAAA3AAAAOAAAADkAAABhAAAAYgAAAGMAAABkAAAAZQAAAGYAAABzcmMvbGliY29yZS9zbGljZS9tb2QucnNhc3NlcnRpb24gZmFpbGVkOiBgKGxlZnQgPT0gcmlnaHQpYAogIGxlZnQ6IGBgLAogcmlnaHQ6IGBgOiDsABAALQAAABkBEAAMAAAAJQEQAAMAAABkZXN0aW5hdGlvbiBhbmQgc291cmNlIHNsaWNlcyBoYXZlIGRpZmZlcmVudCBsZW5ndGhzQAEQADQAAADUABAAGAAAAFoIAAAJAAAAY2Fubm90IGFjY2VzcyBhIFRMUyB2YWx1ZSBkdXJpbmcgb3IgYWZ0ZXIgaXQgaXMgZGVzdHJveWVkYWxyZWFkeSBib3Jyb3dlZGFscmVhZHkgbXV0YWJseSBib3Jyb3dlZAAAAAUAAAAAAAAAAQAAAAYAAAAHAAAAAAAAAAEAAAAIAAAACQAAAAAAAAABAAAACgAAACACEAAAAAAAIAIQAAAAAAAMAAAAMAAAADEAAAAyAAAAMwAAADQAAAA1AAAANgAAADcAAAA4AAAAOQAAAGEAAABiAAAAYwAAAGQAAABlAAAAZgAAAA0AAAAIAAAABAAAAA4AAAAPAAAAEAAAAAgAAAAEAAAAEQAAABIAAAAAAAAAAQAAABMAAABydXN0LWNyeXB0by9zcmMvY3J5cHRvdXRpbC5ycwAAAKgCEAAdAAAALAAAAAUAAABhc3NlcnRpb24gZmFpbGVkOiBkc3QubGVuKCkgPT0gNKgCEAAdAAAAQQAAAAUAAABhc3NlcnRpb24gZmFpbGVkOiBkc3QubGVuKCkgKiA0ID09IGlucHV0LmxlbigpAACoAhAAHQAAAFIAAAAFAAAAYXNzZXJ0aW9uIGZhaWxlZDogZHN0LmxlbigpID49IHNyYy5sZW4oKagCEAAdAAAAowAAAAkAAABOdW1lcmljIG92ZXJmbG93IG9jY3VyZWQuAAAAAAAAAHJ1c3QtY3J5cHRvL3NyYy9jcnlwdG91dGlsLnJzAAAAoAMQAB0AAABNAQAACQAAAKgCEAAdAAAAMQEAAAEAAABhc3NlcnRpb24gZmFpbGVkOiBpZHggPj0gc2VsZi5idWZmZXJfaWR4YXNzZXJ0aW9uIGZhaWxlZDogc2VsZi5idWZmZXJfaWR4ID09IDY0cnVzdC1jcnlwdG8vc3JjL3NoYTEucnMAAC8EEAAXAAAAhAAAAA4AAAB1bmtub3duIGljb3Nhcm91bmQgaW5kZXhAAAAAYXNzZXJ0aW9uIGZhaWxlZDogYChsZWZ0ID09IHJpZ2h0KWAKICBsZWZ0OiBgYCwKIHJpZ2h0OiBgYAAAdAQQAC0AAAChBBAADAAAAK0EEAABAAAALwQQABcAAABdAQAABQAAAC8EEAAXAAAAZAEAAAUAAABhc3NlcnRpb24gZmFpbGVkOiAoIXN0LmNvbXB1dGVkKRUAAAAXAAAABAAAAAQAAAAYAAAAGQAAABoAAAAbAAAAAAAAAAEAAAAcAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZXNyYy9saWJjb3JlL29wdGlvbi5yczQFEAArAAAAXwUQABUAAAB6AQAAFQAAAEFjY2Vzc0Vycm9yAB0AAAAQAAAABAAAAB4AAAAfAAAAIAAAAAwAAAAEAAAAIQAAACIAAAAEAAAABAAAACMAAAAkAAAAJQ=="),d(1050080,"L3J1c3RjLzQ1NjBlYTc4OGNiNzYwZjBhMzQxMjcxNTZjNzhlMjU1Mjk0OWY3MzQvc3JjL2xpYmNvcmUvZm10L21vZC5ycwAA4AUQAEYAAABjAQAAEwAAACYAAAAAAAAAAQAAACcAAABzcmMvbGliYWxsb2MvcmF3X3ZlYy5yc2NhcGFjaXR5IG92ZXJmbG93XwYQABEAAABIBhAAFwAAAAkDAAAFAAAAYSBmb3JtYXR0aW5nIHRyYWl0IGltcGxlbWVudGF0aW9uIHJldHVybmVkIGFuIGVycm9yQm9ycm93RXJyb3JCb3Jyb3dNdXRFcnJvciwAAAAAAAAAAQAAAC0AAABpbmRleCBvdXQgb2YgYm91bmRzOiB0aGUgbGVuIGlzICBidXQgdGhlIGluZGV4IGlzIAAA5AYQACAAAAAEBxAAEgAAAGNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWVzcmMvbGliY29yZS9vcHRpb24ucnMoBxAAKwAAAFMHEAAVAAAAegEAABUAAAC7BhAAAAAAAFMHEAAVAAAApgQAAAUAAAA6IAAAuwYQAAAAAACYBxAAAgAAAHNyYy9saWJjb3JlL3Jlc3VsdC5ycwAAAKwHEAAVAAAAjQQAAAUAAABzcmMvbGliY29yZS9zbGljZS9tb2QucnNpbmRleCAgb3V0IG9mIHJhbmdlIGZvciBzbGljZSBvZiBsZW5ndGgg7AcQAAYAAADyBxAAIgAAANQHEAAYAAAAGQoAAAUAAABzbGljZSBpbmRleCBzdGFydHMgYXQgIGJ1dCBlbmRzIGF0IAA0CBAAFgAAAEoIEAANAAAA1AcQABgAAAAfCgAABQAAADB4MDAwMTAyMDMwNDA1MDYwNzA4MDkxMDExMTIxMzE0MTUxNjE3MTgxOTIwMjEyMjIzMjQyNTI2MjcyODI5MzAzMTMyMzMzNDM1MzYzNzM4Mzk0MDQxNDI0MzQ0NDU0NjQ3NDg0OTUwNTE1MjUzNTQ1NTU2NTc1ODU5NjA2MTYyNjM2NDY1NjY2NzY4Njk3MDcxNzI3Mzc0NzU3Njc3Nzg3OTgwODE4MjgzODQ4NTg2ODc4ODg5OTA5MTkyOTM5NDk1OTY5Nzk4OTl9IH0="),d(1050960,"c3JjL2xpYmNvcmUvZm10L21vZC5ycwAAUAkQABYAAABWBAAAKAAAAFAJEAAWAAAAYgQAABEAAABFcnJvcg==");var u=function(e,t,n){var r=new e.Int8Array(n),o=(new e.Int16Array(n),new e.Int32Array(n)),i=new e.Uint8Array(n),a=(new e.Uint16Array(n),new e.Uint32Array(n)),c=(new e.Float32Array(n),new e.Float64Array(n),e.Math.imul),l=(e.Math.fround,e.Math.abs,e.Math.clz32),d=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,t.abort),u=(e.NaN,e.Infinity,1048576),p=0;function h(e){var t=0,n=0,r=0,i=0,s=0,c=0,d=0,u=0,p=0,h=0,f=0,g=0;e:{t:{n:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(i=-8&(e=e+11|0),!(u=o[262772]))break n;s=0-i|0,d=0,(e>>>=8)&&(d=31,i>>>0>16777215||(d=62+((i>>>(6-(e=l(e))&31)&1)-(e<<1)|0)|0));r:{o:{if(e=o[1051356+(d<<2)>>2]){for(r=i<<(31==(0|d)?0:25-(d>>>1)&31);;){if(!((n=-8&o[e+4>>2])>>>0<i>>>0||(n=n-i|0)>>>0>=s>>>0||(c=e,s=n,n))){s=0;break o}if(n=o[e+20>>2],e=o[16+((r>>>29&4)+e|0)>>2],t=n&&(0|n)!=(0|e)?n:t,r<<=1,!e)break}if(t){e=t;break o}if(c)break r}if(c=0,!(e=u&(0-(e=2<<(31&d))|e)))break n;if(!(e=o[1051356+(we(e&0-e)<<2)>>2]))break n}for(;c=(t=(n=(t=-8&o[e+4>>2])-i|0)>>>0<s>>>0&t>>>0>=i>>>0)?e:c,s=t?n:s,e=(t=o[e+16>>2])||o[e+20>>2];);if(!c)break n}if(s>>>0>=(e=o[262871])-i>>>0&&e>>>0>=i>>>0)break n;C(c);r:if(s>>>0>=16){if(o[c+4>>2]=3|i,o[4+(r=i+c|0)>>2]=1|s,o[s+r>>2]=s,s>>>0>=256){b(r,s);break r}n=1051092+((e=s>>>3)<<3)|0,t=o[262771],e=1<<(31&e),d=o[n+8>>2],t&e||(o[262771]=e|t,d=n),e=d,o[n+8>>2]=r,o[e+12>>2]=r,o[r+12>>2]=n,o[r+8>>2]=e}else e=i+s|0,o[c+4>>2]=3|e,o[4+(e=e+c|0)>>2]=1|o[e+4>>2];return c+8|0}r:{o:{if(!(3&(n=(r=o[262771])>>>(t=31&(e=(i=e>>>0<11?16:e+11&-8)>>>3))))){if(i>>>0<=a[262871])break n;if(n)break o;if(!(e=o[262772]))break n;for(t=o[1051356+(we(e&0-e)<<2)>>2],s=(-8&o[t+4>>2])-i|0,r=t;;){if(!(e=o[t+16>>2])&&!(e=o[t+20>>2]))break r;s=(n=(t=(-8&o[e+4>>2])-i|0)>>>0<s>>>0)?t:s,r=n?e:r,t=e}}s=(c=o[16+(e=1051084+((n=e+(1&(-1^n))|0)<<3)|0)>>2])+8|0,(0|(t=o[c+8>>2]))==(0|(e=e+8|0))?(f=1051084,g=Ce(-2,n)&r,o[f>>2]=g):(o[t+12>>2]=e,o[e+8>>2]=t),e=n<<3,o[c+4>>2]=3|e,o[4+(e=e+c|0)>>2]=1|o[e+4>>2];break t}return c=we(0-(e=(0-(e=2<<t)|e)&n<<t)&e),u=o[16+(e=1051084+(c<<3)|0)>>2],(0|(t=o[u+8>>2]))==(0|(e=e+8|0))?(f=1051084,g=Ce(-2,c)&r,o[f>>2]=g):(o[t+12>>2]=e,o[e+8>>2]=t),o[u+4>>2]=3|i,c=(e=c<<3)-i|0,o[4+(n=i+u|0)>>2]=1|c,o[e+u>>2]=c,(e=o[262871])&&(s=o[262873],r=1051092+((e>>>=3)<<3)|0,t=o[262771],e=1<<(31&e),d=o[r+8>>2],t&e||(o[262771]=e|t,d=r),e=d,o[r+8>>2]=s,o[e+12>>2]=s,o[s+12>>2]=r,o[s+8>>2]=e),o[262873]=n,o[262871]=c,u+8|0}return C(r),s>>>0>=16?(o[r+4>>2]=3|i,o[4+(n=i+r|0)>>2]=1|s,o[n+s>>2]=s,(e=o[262871])&&(u=o[262873],c=1051092+((e>>>=3)<<3)|0,t=o[262771],e=1<<(31&e),d=o[c+8>>2],t&e||(o[262771]=e|t,d=c),e=d,o[c+8>>2]=u,o[e+12>>2]=u,o[u+12>>2]=c,o[u+8>>2]=e),o[262873]=n,o[262871]=s):(e=i+s|0,o[r+4>>2]=3|e,o[4+(e=e+r|0)>>2]=1|o[e+4>>2]),r+8|0}n:{r:{o:{i:{if((n=o[262871])>>>0<i>>>0){if((e=o[262872])>>>0>i>>>0)break e;if(s=0,-1==(0|(e=Ee((t=i+65583|0)>>>16))))break t;if(!(p=e<<16))break t;if(t=(u=-65536&t)+o[262875]|0,o[262875]=t,e=o[262876],o[262876]=e>>>0>t>>>0?e:t,!(h=o[262874]))break i;for(e=1051508;;){if((0|p)==((n=o[e>>2])+(t=o[e+4>>2])|0))break o;if(!(e=o[e+8>>2]))break}break r}return c=o[262873],(t=n-i|0)>>>0<=15?(o[262873]=0,o[262871]=0,o[c+4>>2]=3|n,i=4+(e=n+c|0)|0,s=1|o[e+4>>2]):(o[262871]=t,e=i+c|0,o[262873]=e,o[e+4>>2]=1|t,o[n+c>>2]=t,s=3|i,i=c+4|0),o[i>>2]=s,c+8|0}for((e=o[262882])>>>0<=p>>>0&&e||(o[262882]=p),o[262883]=4095,o[262877]=p,e=0,o[262880]=0,o[262878]=u;t=8+(n=e+1051084|0)|0,o[n+16>>2]=t,o[n+20>>2]=t,256!=(0|(e=e+8|0)););o[262874]=p,e=u+-40|0,o[262872]=e,o[p+4>>2]=1|e,o[4+(e+p|0)>>2]=40,o[262881]=2097152;break n}if(!(o[e+12>>2]|p>>>0<=h>>>0|n>>>0>h>>>0)){o[e+4>>2]=t+u,n=(c=o[262874])+15&-8,o[262874]=n+-8,e=8+((t=u+o[262872]|0)+(c-n|0)|0)|0,o[262872]=e,o[n+-4>>2]=1|e,o[4+(t+c|0)>>2]=40,o[262881]=2097152;break n}}e=o[262882],o[262882]=e>>>0<p>>>0?e:p,r=u+p|0,e=1051508;r:{for(;;){if((0|r)!=o[e>>2]){if(e=o[e+8>>2])continue;break r}break}if(!o[e+12>>2]){o[e>>2]=p,o[e+4>>2]=u+o[e+4>>2],o[p+4>>2]=3|i,s=i+p|0,i=(r-p|0)-i|0;o:{i:{if((0|r)!=o[262874]){if(o[262873]==(0|r))break i;if(1==(3&(c=o[r+4>>2]))&&((n=-8&c)>>>0>=256?C(r):(0|(t=o[r+12>>2]))==(0|(e=o[r+8>>2]))?(f=1051084,g=o[262771]&Ce(-2,c>>>3),o[f>>2]=g):(o[e+12>>2]=t,o[t+8>>2]=e),i=n+i|0,r=n+r|0),o[r+4>>2]=-2&o[r+4>>2],o[s+4>>2]=1|i,o[i+s>>2]=i,i>>>0>=256){b(s,i);break o}n=1051092+((e=i>>>3)<<3)|0,t=o[262771],e=1<<(31&e),r=o[n+8>>2],t&e||(o[262771]=e|t,r=n),e=r,o[n+8>>2]=s,o[e+12>>2]=s,o[s+12>>2]=n,o[s+8>>2]=e;break o}o[262874]=s,e=o[262872]+i|0,o[262872]=e,o[s+4>>2]=1|e;break o}o[262873]=s,e=o[262871]+i|0,o[262871]=e,o[s+4>>2]=1|e,o[e+s>>2]=e}return p+8|0}}for(e=1051508;!((t=o[e>>2])>>>0<=h>>>0&&(r=t+o[e+4>>2]|0)>>>0>h>>>0);)e=o[e+8>>2];for(o[262874]=p,e=u+-40|0,o[262872]=e,o[p+4>>2]=1|e,o[4+(e+p|0)>>2]=40,o[262881]=2097152,o[(d=(e=(r+-32&-8)-8|0)>>>0<h+16>>>0?h:e)+4>>2]=27,c=o[262877],n=o[262878],t=o[262880],o[(e=d+16|0)>>2]=o[262879],o[e+4>>2]=t,o[d+8>>2]=c,o[d+12>>2]=n,o[262880]=0,o[262878]=u,o[262877]=p,o[262879]=d+8,e=d+28|0;o[e>>2]=7,r>>>0>(e=e+4|0)>>>0;);(0|d)!=(0|h)&&(o[d+4>>2]=-2&o[d+4>>2],e=d-h|0,o[h+4>>2]=1|e,o[d>>2]=e,e>>>0>=256?b(h,e):(n=1051092+((e>>>=3)<<3)|0,t=o[262771],e=1<<(31&e),r=o[n+8>>2],t&e||(o[262771]=e|t,r=n),e=r,o[n+8>>2]=h,o[e+12>>2]=h,o[h+12>>2]=n,o[h+8>>2]=e))}if(!((e=o[262872])>>>0<=i>>>0))break e}return s}return t=e-i|0,o[262872]=t,e=(n=o[262874])+i|0,o[262874]=e,o[e+4>>2]=1|t,o[n+4>>2]=3|i,n+8|0}function f(e,t,n){var a,s=0,c=0,l=0,p=0,h=0,f=0,g=0;u=a=u+-64|0,o[a+36>>2]=t,s=o[n+20>>2],o[a+52>>2]=s,r[a+56|0]=3,c=o[n+16>>2],o[a+44>>2]=c+(s<<3),o[a+8>>2]=0,o[a+12>>2]=32,o[a+32>>2]=e,o[a+24>>2]=0,o[a+16>>2]=0,o[a+48>>2]=c,o[a+40>>2]=c;e:{t:{n:{r:{if(!(l=o[n+8>>2])){if(h=o[n>>2],!(l=s>>>0>(f=o[n+4>>2])>>>0?f:s))break r;if(s=1,Ie[o[t+12>>2]](e,o[h>>2],o[h+4>>2]))break e;for(n=h+12|0,p=1;;){if(Ie[o[c+4>>2]](o[c>>2],a+8|0))break e;if(p>>>0>=l>>>0)break r;if(e=n+-4|0,t=o[n>>2],n=n+8|0,c=c+8|0,p=p+1|0,Ie[o[o[a+36>>2]+12>>2]](o[a+32>>2],o[e>>2],t))break}break e}if(h=o[n>>2],f=o[n+4>>2],g=(n=o[n+12>>2])>>>0>f>>>0?f:n){if(s=1,Ie[o[t+12>>2]](e,o[h>>2],o[h+4>>2]))break e;for(n=h+12|0,c=l+16|0,p=1;;){o[a+12>>2]=o[c+-8>>2],r[a+56|0]=i[c+16|0],o[a+8>>2]=o[c+-4>>2],t=0,s=0;o:{i:switch(o[c+8>>2]-1|0){default:e=o[c+12>>2],s=1;break o;case 0:if((l=o[c+12>>2])>>>0<(s=o[a+52>>2])>>>0){if(s=0,l=o[a+48>>2]+(l<<3)|0,41!=o[l+4>>2])break o;e=o[o[l>>2]>>2],s=1;break o}P(1051e3,l,s),d();case 1:break i;case 2:break o}(0|(l=o[a+40>>2]))!=o[a+44>>2]&&(o[a+40>>2]=l+8,41==o[l+4>>2]&&(e=o[o[l>>2]>>2],s=1))}o[a+20>>2]=e,o[a+16>>2]=s;o:{i:{a:{s:{c:{l:switch(o[c>>2]-1|0){case 1:if((0|(e=o[a+40>>2]))!=o[a+44>>2])break c;break o;case 2:break o;case 0:break l;default:break a}if((e=o[c+4>>2])>>>0>=(s=o[a+52>>2])>>>0)break s;if(e=o[a+48>>2]+(e<<3)|0,41!=o[e+4>>2])break o;s=o[o[e>>2]>>2];break i}if(o[a+40>>2]=e+8,41!=o[e+4>>2])break o;s=o[o[e>>2]>>2];break i}P(1051e3,e,s),d()}s=o[c+4>>2]}t=1}if(o[a+28>>2]=s,o[a+24>>2]=t,1==o[c+-16>>2]){if((e=o[c+-12>>2])>>>0>=(t=o[a+52>>2])>>>0)break t;s=o[a+48>>2]+(e<<3)|0}else{if((0|(s=o[a+40>>2]))==o[a+44>>2])break n;o[a+40>>2]=s+8}if(Ie[o[s+4>>2]](o[s>>2],a+8|0)){s=1;break e}if(p>>>0>=g>>>0)break r;if(e=n+-4|0,t=o[n>>2],n=n+8|0,c=c+36|0,s=1,p=p+1|0,Ie[o[o[a+36>>2]+12>>2]](o[a+32>>2],o[e>>2],t))break}break e}}if(f>>>0>p>>>0&&(s=1,e=(p<<3)+h|0,Ie[o[o[a+36>>2]+12>>2]](o[a+32>>2],o[e>>2],o[e+4>>2])))break e;s=0;break e}M(1050472),d()}P(1050984,e,t),d()}return u=a- -64|0,s}function g(e,t,n){var a=0,s=0,c=0,l=0,d=0,u=0,p=0,h=0,f=0,g=0,_=0,m=0;a=o[e+16>>2];e:{t:{n:{r:{if(1!=(0|(g=o[e+8>>2]))){if(a)break r;a=0|Ie[o[o[e+28>>2]+12>>2]](o[e+24>>2],t,n);break t}if(!a)break n}r:if(n){for(d=t+n|0,h=o[e+20>>2]+1|0,_=a=t;;){c=a+1|0;o:{i:{if((0|(s=r[0|a]))<=-1){if((0|c)!=(0|d)?(p=63&i[a+1|0],a=c=a+2|0):(p=0,a=d),u=(f=31&s)<<6|p,(m=255&s)>>>0<=223)break i;if((0|a)!=(0|d)?(u=63&i[0|a],s=c=a+1|0):(u=0,s=d),u=(p=p<<6|u)|f<<12,m>>>0<240)break i;if((0|s)!=(0|d)?(a=s+1|0,s=63&i[0|s]):(a=c,s=0),1114112!=(0|(s=s|f<<18&1835008|p<<6)))break o;break r}u=255&s}s=u,a=c}if(h=h+-1|0){if(l=(l-_|0)+a|0,_=a,(0|a)!=(0|d))continue;break r}break}1114112!=(0|s)&&(s=l,c=n,!(!l|(0|n)==(0|l))&&(a=0,r[t+l|0]<-64|l>>>0>=n>>>0)||(a=t),n=a?s:c,t=a||t)}else n=0;if(!g)break e}if(c=0,n)for(s=n,a=t;c=(128==(192&i[0|a]))+c|0,a=a+1|0,s=s+-1|0;);if(n-c>>>0>=(d=o[e+12>>2])>>>0)break e;if(l=0,c=0,n)for(s=n,a=t;c=(128==(192&i[0|a]))+c|0,a=a+1|0,s=s+-1|0;);s=d+(c-n|0)|0;n:{r:{o:switch((3==(0|(a=i[e+48|0]))?0:a)-1|0){case 1:break r;case 0:case 2:break o;default:break n}l=s,s=0;break n}l=s>>>1,s=s+1>>>1}a=l+1|0;n:{for(;;){if(!(a=a+-1|0))break n;if(Ie[o[o[e+28>>2]+16>>2]](o[e+24>>2],o[e+4>>2]))break}return 1}if(c=o[e+4>>2],a=1,!Ie[o[o[e+28>>2]+12>>2]](o[e+24>>2],t,n)){for(a=s+1|0,t=o[e+28>>2],e=o[e+24>>2];;){if(!(a=a+-1|0))return 0;if(Ie[o[t+16>>2]](e,c))break}return 1}}return a}return 0|Ie[o[o[e+28>>2]+12>>2]](o[e+24>>2],t,n)}function _(e){var t=0,n=0,r=0,i=0,a=0,s=0,c=0;n=(t=e+-8|0)+(e=-8&(i=o[e+-4>>2]))|0;e:{t:{n:{r:if(!(1&i)){if(!(3&i))break n;if(e=(i=o[t>>2])+e|0,(0|(t=t-i|0))==o[262873]){if(3!=(3&o[n+4>>2]))break r;return o[262871]=e,o[n+4>>2]=-2&o[n+4>>2],o[t+4>>2]=1|e,void(o[e+t>>2]=e)}i>>>0>=256?C(t):(0|(r=o[t+8>>2]))==(0|(a=o[t+12>>2]))?(s=1051084,c=o[262771]&Ce(-2,i>>>3),o[s>>2]=c):(o[r+12>>2]=a,o[a+8>>2]=r)}if(2&(i=o[n+4>>2]))o[n+4>>2]=-2&i,o[t+4>>2]=1|e,o[e+t>>2]=e;else{r:{if(o[262874]!=(0|n)){if((0|n)!=o[262873])break r;return o[262873]=t,e=o[262871]+e|0,o[262871]=e,o[t+4>>2]=1|e,void(o[e+t>>2]=e)}if(o[262874]=t,e=o[262872]+e|0,o[262872]=e,o[t+4>>2]=1|e,(0|t)==o[262873]&&(o[262871]=0,o[262873]=0),(n=o[262881])>>>0>=e>>>0)break n;if(!(e=o[262874]))break n;o:if(!((i=o[262872])>>>0<41))for(t=1051508;;){if((r=o[t>>2])+o[t+4>>2]>>>0>e>>>0&&r>>>0<=e>>>0)break o;if(!(t=o[t+8>>2]))break}if(r=4095,e=o[262879]){for(t=0;t=t+1|0,e=o[e+8>>2];);r=t>>>0>4095?t:4095}if(o[262883]=r,i>>>0<=n>>>0)break n;return void(o[262881]=-1)}if(e=(r=-8&i)+e|0,r>>>0>=256?C(n):(0|(r=o[n+12>>2]))==(0|(n=o[n+8>>2]))?(s=1051084,c=o[262771]&Ce(-2,i>>>3),o[s>>2]=c):(o[n+12>>2]=r,o[r+8>>2]=n),o[t+4>>2]=1|e,o[e+t>>2]=e,o[262873]==(0|t)){o[262871]=e;break n}}if(e>>>0<256)break t;if(b(t,e),e=o[262883]+-1|0,o[262883]=e,!e){if(e=o[262879])break e;return void(o[262883]=4095)}}return}return e=1051092+((n=e>>>3)<<3)|0,i=o[262771],n=1<<(31&n),r=o[e+8>>2],i&n||(o[262771]=n|i,r=e),n=r,o[e+8>>2]=t,o[n+12>>2]=t,o[t+12>>2]=e,void(o[t+8>>2]=n)}for(t=0;t=t+1|0,e=o[e+8>>2];);o[262883]=t>>>0>4095?t:4095}function m(e,t,n,a,s){var c,l,d=0,u=0,p=0,h=0;if(c=(d=1&(l=o[e>>2]))?43:1114112,h=s+d|0,4&l){if(n)for(p=n,d=t;u=(128==(192&i[0|d]))+u|0,d=d+1|0,p=p+-1|0;);h=(n+h|0)-u|0}else t=0;e:{t:{if(1!=o[e+8>>2]){if(B(e,c,t,n))break t;break e}if((d=o[e+12>>2])>>>0<=h>>>0){if(B(e,c,t,n))break t;break e}n:{if(!(8&l)){u=d-h|0,d=0;r:{o:{i:switch((3==(0|(p=i[e+48|0]))?1:p)-1|0){case 1:break o;case 0:case 2:break i;default:break r}d=u,u=0;break r}d=u>>>1,u=u+1>>>1}for(d=d+1|0;;){if(!(d=d+-1|0))break n;if(Ie[o[o[e+28>>2]+16>>2]](o[e+24>>2],o[e+4>>2]))break}return 1}if(r[e+48|0]=1,o[e+4>>2]=48,B(e,c,t,n))break t;u=d-h|0,d=0;r:{o:{i:switch((3==(0|(t=i[e+48|0]))?1:t)-1|0){case 1:break o;case 0:case 2:break i;default:break r}d=u,u=0;break r}d=u>>>1,u=u+1>>>1}d=d+1|0;r:{for(;;){if(!(d=d+-1|0))break r;if(Ie[o[o[e+28>>2]+16>>2]](o[e+24>>2],o[e+4>>2]))break}return 1}if(t=o[e+4>>2],Ie[o[o[e+28>>2]+12>>2]](o[e+24>>2],a,s))break t;for(u=u+1|0,n=o[e+28>>2],e=o[e+24>>2];;){if(!(u=u+-1|0))return 0;if(Ie[o[n+16>>2]](e,t))break}break t}if(d=o[e+4>>2],!B(e,c,t,n)&&!Ie[o[o[e+28>>2]+12>>2]](o[e+24>>2],a,s))for(u=u+1|0,t=o[e+28>>2],e=o[e+24>>2];;){if(!(u=u+-1|0))return 0;if(Ie[o[t+16>>2]](e,d))break}}return 1}return 0|Ie[o[o[e+28>>2]+12>>2]](o[e+24>>2],a,s)}function y(e,t,n,r){var i,a=0,s=0,c=0,l=0,p=0,h=0;u=i=u-32|0;e:{t:{n:{r:{o:{if((r&=255)>>>0<=3)switch(r-1|0){case 2:break t;case 1:break n;case 0:break r;default:break o}K(1049688,24,1049672),d()}c=Ce(a=o[t>>2],5),s=o[t+12>>2],r=o[t+8>>2],t=o[t+4>>2],l=Ce(c=1518500249+((c+o[n>>2]|0)+((s^r)&t^s)|0)|0,30),o[e+12>>2]=l,s=1518500249+(((s+(r^a&((t=Ce(t,30))^r))|0)+o[n+4>>2]|0)+Ce(c,5)|0)|0,p=e,h=Ce(s,30),o[p+8>>2]=h,a=1518500249+(((r+o[n+8>>2]|0)+(t^c&((r=Ce(a,30))^t))|0)+Ce(s,5)|0)|0,o[e+4>>2]=a,p=e,h=1518500249+(((t+o[n+12>>2]|0)+(r^s&(r^l))|0)+Ce(a,5)|0)|0,o[p>>2]=h;break e}s=o[4+(a=t+8|0)>>2],o[(r=i+8|0)>>2]=o[a>>2],o[r+4>>2]=s,r=o[t+4>>2],o[i>>2]=o[t>>2],o[i+4>>2]=r,o[i+28>>2]=o[n+12>>2]+1859775393,o[i+24>>2]=o[n+8>>2]+1859775393,o[i+20>>2]=o[n+4>>2]+1859775393,o[i+16>>2]=o[n>>2]+1859775393,S(e,i,i+16|0);break e}c=Ce(a=o[t>>2],5),s=o[t+12>>2],r=o[t+8>>2],t=o[t+4>>2],l=Ce(c=((c+o[n>>2]|0)+((s^r)&t^r&s)|0)-1894007588|0,30),o[e+12>>2]=l,s=(((s+(a&((t=Ce(t,30))^r)^t&r)|0)+o[n+4>>2]|0)+Ce(c,5)|0)-1894007588|0,p=e,h=Ce(s,30),o[p+8>>2]=h,a=(((r+o[n+8>>2]|0)+(c&((r=Ce(a,30))^t)^t&r)|0)+Ce(s,5)|0)-1894007588|0,o[e+4>>2]=a,p=e,h=(((t+o[n+12>>2]|0)+(s&(r^l)^r&l)|0)+Ce(a,5)|0)-1894007588|0,o[p>>2]=h;break e}s=o[4+(a=t+8|0)>>2],o[(r=i+8|0)>>2]=o[a>>2],o[r+4>>2]=s,r=o[t+4>>2],o[i>>2]=o[t>>2],o[i+4>>2]=r,o[i+28>>2]=o[n+12>>2]+-899497514,o[i+24>>2]=o[n+8>>2]+-899497514,o[i+20>>2]=o[n+4>>2]+-899497514,o[i+16>>2]=o[n>>2]+-899497514,S(e,i,i+16|0)}u=i+32|0}function v(e,t){var n=0,r=0,i=0,a=0,s=0,c=0;n=e+t|0;e:{t:{n:if(!(1&(r=o[e+4>>2]))){if(!(3&r))break t;if(t=(r=o[e>>2])+t|0,(0|(e=e-r|0))==o[262873]){if(3!=(3&o[n+4>>2]))break n;return o[262871]=t,o[n+4>>2]=-2&o[n+4>>2],o[e+4>>2]=1|t,void(o[n>>2]=t)}r>>>0>=256?C(e):(0|(i=o[e+8>>2]))==(0|(a=o[e+12>>2]))?(s=1051084,c=o[262771]&Ce(-2,r>>>3),o[s>>2]=c):(o[i+12>>2]=a,o[a+8>>2]=i)}if(2&(r=o[n+4>>2])){o[n+4>>2]=-2&r,o[e+4>>2]=1|t,o[e+t>>2]=t;break e}n:{if(o[262874]!=(0|n)){if((0|n)!=o[262873])break n;return o[262873]=e,t=o[262871]+t|0,o[262871]=t,o[e+4>>2]=1|t,void(o[e+t>>2]=t)}if(o[262874]=e,t=o[262872]+t|0,o[262872]=t,o[e+4>>2]=1|t,o[262873]!=(0|e))break t;return o[262871]=0,void(o[262873]=0)}if(t=(i=-8&r)+t|0,i>>>0>=256?C(n):(0|(i=o[n+12>>2]))==(0|(n=o[n+8>>2]))?(s=1051084,c=o[262771]&Ce(-2,r>>>3),o[s>>2]=c):(o[n+12>>2]=i,o[i+8>>2]=n),o[e+4>>2]=1|t,o[e+t>>2]=t,o[262873]!=(0|e))break e;o[262871]=t}return}t>>>0>=256?b(e,t):(t=1051092+((n=t>>>3)<<3)|0,r=o[262771],n=1<<(31&n),i=o[t+8>>2],r&n||(o[262771]=n|r,i=t),n=i,o[t+8>>2]=e,o[n+12>>2]=e,o[e+12>>2]=t,o[e+8>>2]=n)}function A(e,t){var n=0,r=0,i=0,a=0,s=0;return-65587-(e=e>>>0>16?e:16)>>>0<=t>>>0||(n=h(12+((i=t>>>0<11?16:t+11&-8)+e|0)|0))&&(t=n+-8|0,(r=e+-1|0)&n?(r=(-8&(s=o[(a=n+-4|0)>>2]))-(n=(e=(n=(n+r&0-e)-8|0)-t>>>0>16?n:e+n|0)-t|0)|0,3&s?(o[e+4>>2]=r|1&o[e+4>>2]|2,o[4+(r=e+r|0)>>2]=1|o[r+4>>2],o[a>>2]=n|1&o[a>>2]|2,o[e+4>>2]=1|o[e+4>>2],v(t,n)):(t=o[t>>2],o[e+4>>2]=r,o[e>>2]=t+n)):e=t,3&(t=o[e+4>>2])&&((n=-8&t)>>>0<=i+16>>>0||(o[e+4>>2]=i|1&t|2,t=e+i|0,i=n-i|0,o[t+4>>2]=3|i,o[4+(n=e+n|0)>>2]=1|o[n+4>>2],v(t,i))),r=e+8|0),r}function b(e,t){var n=0,r=0,i=0,a=0;o[e+16>>2]=0,o[e+20>>2]=0,a=e,r=0,(n=t>>>8)&&(r=31,t>>>0>16777215||(r=62+((t>>>(6-(n=l(n))&31)&1)-(n<<1)|0)|0)),i=r,o[a+28>>2]=i,a=1051356+(i<<2)|0;e:{t:{n:{r:{if((r=1<<(31&i))&(n=o[262772])){if(n=o[a>>2],(-8&o[n+4>>2])!=(0|t))break r;r=n;break n}o[262772]=n|r,o[a>>2]=e,o[e+24>>2]=a;break e}for(i=t<<(31==(0|i)?0:25-(i>>>1)&31);;){if(!(r=o[(a=16+((i>>>29&4)+n|0)|0)>>2]))break t;if(i<<=1,(-8&o[(n=r)+4>>2])==(0|t))break}}return t=o[r+8>>2],o[t+12>>2]=e,o[r+8>>2]=e,o[e+24>>2]=0,o[e+12>>2]=r,void(o[e+8>>2]=t)}o[a>>2]=e,o[e+24>>2]=n}o[e+12>>2]=e,o[e+8>>2]=e}function w(e,t,n){var a,s=0,c=0;u=a=u-80|0,i[e+96|0]||(o[a+76>>2]=e+8,function(e,t){var n;if(u=n=u-16|0,W(n+8|0,e,1),o[n+12>>2])return r[o[n+8>>2]]=128,64-o[e>>2]>>>0<8&&(N(e,64),L(n,e),E(o[t>>2],o[n>>2],o[n+4>>2])),N(e,56),void(u=n+16|0);P(1049536,0,0),d()}(s=e+28|0,a+76|0),W(a- -64|0,s,4),F(o[a+64>>2],o[a+68>>2],o[e+4>>2]),W(a+56|0,s,4),F(o[a+56>>2],o[a+60>>2],o[e>>2]),c=o[a+76>>2],L(a+48|0,s),E(c,o[a+48>>2],o[a+52>>2]),r[e+96|0]=1),V(a+40|0,t,n,0,4),F(o[a+40>>2],o[a+44>>2],o[e+8>>2]),V(a+32|0,t,n,4,8),F(o[a+32>>2],o[a+36>>2],o[e+12>>2]),V(a+24|0,t,n,8,12),F(o[a+24>>2],o[a+28>>2],o[e+16>>2]),V(a+16|0,t,n,12,16),F(o[a+16>>2],o[a+20>>2],o[e+20>>2]),V(a+8|0,t,n,16,20),F(o[a+8>>2],o[a+12>>2],o[e+24>>2]),u=a+80|0}function C(e){var t,n=0,r=0,i=0,a=0,s=0,c=0;t=o[e+24>>2];e:{t:{if((0|e)==(0|(n=o[e+12>>2]))){if(i=o[(n=e+20|0)>>2],r=o[(i?20:16)+e>>2])break t;n=0;break e}r=o[e+8>>2],o[r+12>>2]=n,o[n+8>>2]=r;break e}for(i=i?n:e+16|0;a=i,(r=o[(i=(n=r)+20|0)>>2])||(i=n+16|0,r=o[n+16>>2]),r;);o[a>>2]=0}e:if(t){r=1051356+(o[e+28>>2]<<2)|0;t:{if((0|e)==o[r>>2]){if(o[r>>2]=n,n)break t;return s=1051088,c=o[262772]&Ce(-2,o[e+28>>2]),void(o[s>>2]=c)}if(o[(o[t+16>>2]==(0|e)?16:20)+t>>2]=n,!n)break e}o[n+24>>2]=t,(r=o[e+16>>2])&&(o[n+16>>2]=r,o[r+24>>2]=n),(e=o[e+20>>2])&&(o[n+20>>2]=e,o[e+24>>2]=n)}}function I(e,t,n,r){var i,a,s=0,c=0,l=0;u=i=u+-64|0,c=1,s=o[r+12>>2],l=o[r+8>>2],a=o[r+4>>2],r=o[r>>2];e:{t:{if(1==o[262884]){if(c=o[262885]+1|0,o[262885]=c,c>>>0>2)break t}else o[262884]=1,o[262885]=1;if(ee(i+48|0,r,a,l,s),s=o[4+(r=i+56|0)>>2],o[(l=i+36|0)>>2]=o[r>>2],o[l+4>>2]=s,o[i+24>>2]=n,o[i+20>>2]=1049892,o[i+16>>2]=1,n=o[i+52>>2],o[i+28>>2]=o[i+48>>2],o[i+32>>2]=n,!((0|(n=o[262768]))<=-1)&&(n=n+1|0,o[262768]=n,(r=o[262770])&&(n=o[262769],Ie[o[t+16>>2]](i+8|0,e),s=o[i+12>>2],o[i+16>>2]=o[i+8>>2],o[i+20>>2]=s,Ie[o[r+12>>2]](n,i+16|0),n=o[262768]),o[262768]=n+-1,c>>>0<=1))break e}d()}u=n=u-16|0,o[n+12>>2]=t,o[n+8>>2]=e,d()}function E(e,t,n){var r;if(u=r=u-96|0,o[r+4>>2]=n,64==(0|n))return J(r+32|0,64),function(e,t){var n=0,r=0;for(r=16;r;)n=i[0|t]|i[t+1|0]<<8|i[t+2|0]<<16|i[t+3|0]<<24,o[e>>2]=n<<24|n<<8&16711680|n>>>8&65280|n>>>24,r=r+-1|0,t=t+4|0,e=e+4|0}(r+32|0,t),function(e,t){var n,r=0,i=0,a=0,s=0,c=0,l=0,d=0,p=0,h=0,f=0,g=0,_=0,m=0,v=0,A=0,b=0,w=0,C=0,I=0,E=0,S=0,T=0,x=0,k=0,P=0;u=n=u+-64|0,h=o[t>>2],c=o[t+4>>2],l=o[t+8>>2],d=o[t+12>>2],m=o[e>>2],f=o[e+8>>2],p=o[e+4>>2],o[n+44>>2]=o[e+12>>2],o[n+36>>2]=p,o[n+40>>2]=f,o[n+32>>2]=m,o[n+60>>2]=d,o[n+56>>2]=l,o[n+52>>2]=c,o[n+48>>2]=h+o[e+16>>2],y(n,n+32|0,n+48|0,0),v=o[t+16>>2],g=o[t+20>>2],I=o[t+24>>2],A=o[t+28>>2],a=o[4+(p=n+8|0)>>2],o[(i=f=n+40|0)>>2]=o[p>>2],o[i+4>>2]=a,i=o[n+4>>2],o[n+32>>2]=o[n>>2],o[n+36>>2]=i,o[n+60>>2]=A,o[n+56>>2]=I,o[n+52>>2]=g,k=n,P=Ce(m,30)+v|0,o[k+48>>2]=P,y(n+16|0,n+32|0,n+48|0,0),s=o[n+16>>2],m=o[n+20>>2],i=o[n+24>>2],a=o[t+32>>2],b=o[t+36>>2],w=o[t+40>>2],C=o[t+44>>2],o[n+44>>2]=o[n+28>>2],o[n+36>>2]=m,o[n+40>>2]=i,o[n+32>>2]=s,o[n+60>>2]=C,o[n+56>>2]=w,o[n+52>>2]=b,k=n,P=Ce(o[n>>2],30)+a|0,o[k+48>>2]=P,y(n+16|0,n+32|0,n+48|0,0),_=o[4+(i=m=n+24|0)>>2],E=o[i>>2],o[p>>2]=E,o[p+4>>2]=_,r=o[n+20>>2],S=o[n+16>>2],o[n>>2]=S,o[n+4>>2]=r,T=o[t+48>>2],i=o[t+52>>2],x=o[t+56>>2],t=o[t+60>>2],o[f>>2]=E,o[f+4>>2]=_,o[n+32>>2]=S,o[n+36>>2]=r,o[n+60>>2]=t,o[n+56>>2]=x,o[n+52>>2]=i,k=n,P=Ce(s,30)+T|0,o[k+48>>2]=P,y(n+16|0,n+32|0,n+48|0,0),_=o[n+16>>2],s=o[n+20>>2],r=o[n+24>>2],o[n+44>>2]=o[n+28>>2],o[n+36>>2]=s,o[n+40>>2]=r,o[n+32>>2]=_,r=Ce(o[n>>2],30),h=Ce(i^a^h^l,1),o[n+48>>2]=r+h,s=Ce(h^C^d^g,1),o[n+60>>2]=s,l=Ce(t^w^l^v,1),o[n+56>>2]=l,d=Ce(x^b^c^d,1),o[n+52>>2]=d,y(n+16|0,n+32|0,n+48|0,0),c=o[m+4>>2],E=o[m>>2],o[p>>2]=E,o[p+4>>2]=c,r=o[n+20>>2],S=o[n+16>>2],o[n>>2]=S,o[n+4>>2]=r,o[f>>2]=E,o[f+4>>2]=c,o[n+32>>2]=S,o[n+36>>2]=r,r=Ce(_,30),v=Ce(d^T^v^I,1),o[n+48>>2]=r+v,I=Ce(s^x^a^I,1),o[n+56>>2]=I,c=Ce(v^t^A^b,1),o[n+60>>2]=c,g=Ce(l^i^g^A,1),o[n+52>>2]=g,y(n+16|0,n+32|0,n+48|0,1),_=o[n+16>>2],A=o[n+20>>2],r=o[n+24>>2],o[n+44>>2]=o[n+28>>2],o[n+36>>2]=A,o[n+40>>2]=r,o[n+32>>2]=_,r=Ce(o[n>>2],30),a=Ce(g^h^a^w,1),o[n+48>>2]=r+a,w=Ce(c^l^w^T,1),o[n+56>>2]=w,A=Ce(a^s^i^C,1),o[n+60>>2]=A,b=Ce(I^d^C^b,1),o[n+52>>2]=b,y(n+16|0,n+32|0,n+48|0,1),C=o[m+4>>2],E=o[m>>2],o[p>>2]=E,o[p+4>>2]=C,r=o[n+20>>2],S=o[n+16>>2],o[n>>2]=S,o[n+4>>2]=r,o[f>>2]=E,o[f+4>>2]=C,o[n+32>>2]=S,o[n+36>>2]=r,r=Ce(_,30),C=Ce(b^v^x^T,1),o[n+48>>2]=r+C,x=Ce(A^I^h^x,1),o[n+56>>2]=x,T=Ce(C^c^t^d,1),o[n+60>>2]=T,t=Ce(w^g^t^i,1),o[n+52>>2]=t,y(n+16|0,n+32|0,n+48|0,1),_=o[n+16>>2],i=o[n+20>>2],r=o[n+24>>2],o[n+44>>2]=o[n+28>>2],o[n+36>>2]=i,o[n+40>>2]=r,o[n+32>>2]=_,r=Ce(o[n>>2],30),i=Ce(t^a^h^l,1),o[n+48>>2]=r+i,h=Ce(i^A^s^g,1),o[n+60>>2]=h,l=Ce(T^w^l^v,1),o[n+56>>2]=l,s=Ce(x^b^s^d,1),o[n+52>>2]=s,y(n+16|0,n+32|0,n+48|0,1),d=o[m+4>>2],E=o[m>>2],o[p>>2]=E,o[p+4>>2]=d,r=o[n+20>>2],S=o[n+16>>2],o[n>>2]=S,o[n+4>>2]=r,o[f>>2]=E,o[f+4>>2]=d,o[n+32>>2]=S,o[n+36>>2]=r,r=Ce(_,30),d=Ce(s^C^v^I,1),o[n+48>>2]=r+d,v=Ce(h^x^a^I,1),o[n+56>>2]=v,I=Ce(d^T^c^b,1),o[n+60>>2]=I,c=Ce(l^t^c^g,1),o[n+52>>2]=c,y(n+16|0,n+32|0,n+48|0,1),_=o[n+16>>2],g=o[n+20>>2],r=o[n+24>>2],o[n+44>>2]=o[n+28>>2],o[n+36>>2]=g,o[n+40>>2]=r,o[n+32>>2]=_,r=Ce(o[n>>2],30),a=Ce(c^i^a^w,1),o[n+48>>2]=r+a,w=Ce(I^l^C^w,1),o[n+56>>2]=w,g=Ce(a^h^t^A,1),o[n+60>>2]=g,b=Ce(v^s^A^b,1),o[n+52>>2]=b,y(n+16|0,n+32|0,n+48|0,2),A=o[m+4>>2],E=o[m>>2],o[p>>2]=E,o[p+4>>2]=A,r=o[n+20>>2],S=o[n+16>>2],o[n>>2]=S,o[n+4>>2]=r,o[f>>2]=E,o[f+4>>2]=A,o[n+32>>2]=S,o[n+36>>2]=r,r=Ce(_,30),C=Ce(b^d^x^C,1),o[n+48>>2]=r+C,x=Ce(g^v^i^x,1),o[n+56>>2]=x,A=Ce(C^I^s^T,1),o[n+60>>2]=A,t=Ce(w^c^t^T,1),o[n+52>>2]=t,y(n+16|0,n+32|0,n+48|0,2),_=o[n+16>>2],T=o[n+20>>2],r=o[n+24>>2],o[n+44>>2]=o[n+28>>2],o[n+36>>2]=T,o[n+40>>2]=r,o[n+32>>2]=_,r=Ce(o[n>>2],30),i=Ce(t^a^i^l,1),o[n+48>>2]=r+i,T=Ce(i^g^c^h,1),o[n+60>>2]=T,l=Ce(A^w^d^l,1),o[n+56>>2]=l,h=Ce(x^b^s^h,1),o[n+52>>2]=h,y(n+16|0,n+32|0,n+48|0,2),s=o[m+4>>2],E=o[m>>2],o[p>>2]=E,o[p+4>>2]=s,r=o[n+20>>2],S=o[n+16>>2],o[n>>2]=S,o[n+4>>2]=r,o[f>>2]=E,o[f+4>>2]=s,o[n+32>>2]=S,o[n+36>>2]=r,r=Ce(_,30),s=Ce(h^C^d^v,1),o[n+48>>2]=r+s,d=Ce(T^x^a^v,1),o[n+56>>2]=d,v=Ce(s^A^I^b,1),o[n+60>>2]=v,I=Ce(l^t^c^I,1),o[n+52>>2]=I,y(n+16|0,n+32|0,n+48|0,2),_=o[n+16>>2],c=o[n+20>>2],r=o[n+24>>2],o[n+44>>2]=o[n+28>>2],o[n+36>>2]=c,o[n+40>>2]=r,o[n+32>>2]=_,r=Ce(o[n>>2],30),a=Ce(I^i^a^w,1),o[n+48>>2]=r+a,w=Ce(v^l^C^w,1),o[n+56>>2]=w,c=Ce(a^T^t^g,1),o[n+60>>2]=c,b=Ce(d^h^g^b,1),o[n+52>>2]=b,y(n+16|0,n+32|0,n+48|0,2),g=o[m+4>>2],E=o[m>>2],o[p>>2]=E,o[p+4>>2]=g,r=o[n+20>>2],S=o[n+16>>2],o[n>>2]=S,o[n+4>>2]=r,o[f>>2]=E,o[f+4>>2]=g,o[n+32>>2]=S,o[n+36>>2]=r,r=Ce(_,30),C=Ce(b^s^x^C,1),o[n+48>>2]=r+C,x=Ce(c^d^i^x,1),o[n+56>>2]=x,g=Ce(C^v^h^A,1),o[n+60>>2]=g,t=Ce(w^I^t^A,1),o[n+52>>2]=t,y(n+16|0,n+32|0,n+48|0,3),A=o[n+16>>2],_=o[n+20>>2],r=o[n+24>>2],o[n+44>>2]=o[n+28>>2],o[n+36>>2]=_,o[n+40>>2]=r,o[n+32>>2]=A,r=Ce(o[n>>2],30),i=Ce(t^a^i^l,1),o[n+48>>2]=r+i,_=Ce(i^c^I^T,1),o[n+60>>2]=_,l=Ce(g^w^s^l,1),o[n+56>>2]=l,T=Ce(x^b^h^T,1),o[n+52>>2]=T,y(n+16|0,n+32|0,n+48|0,3),h=o[m+4>>2],E=o[m>>2],o[p>>2]=E,o[p+4>>2]=h,r=o[n+20>>2],S=o[n+16>>2],o[n>>2]=S,o[n+4>>2]=r,o[f>>2]=E,o[f+4>>2]=h,o[n+32>>2]=S,o[n+36>>2]=r,r=Ce(A,30),h=Ce(T^C^s^d,1),o[n+48>>2]=r+h,s=Ce(_^x^a^d,1),o[n+56>>2]=s,d=Ce(h^g^v^b,1),o[n+60>>2]=d,v=Ce(l^t^v^I,1),o[n+52>>2]=v,y(n+16|0,n+32|0,n+48|0,3),I=o[n+16>>2],A=o[n+20>>2],r=o[n+24>>2],o[n+44>>2]=o[n+28>>2],o[n+36>>2]=A,o[n+40>>2]=r,o[n+32>>2]=I,r=Ce(o[n>>2],30),a=Ce(v^i^a^w,1),o[n+48>>2]=r+a,w=Ce(d^l^C^w,1),o[n+56>>2]=w,l=Ce(a^_^t^c,1),o[n+60>>2]=l,b=Ce(s^T^c^b,1),o[n+52>>2]=b,y(n+16|0,n+32|0,n+48|0,3),a=o[m+4>>2],m=o[m>>2],o[p>>2]=m,o[p+4>>2]=a,p=o[n+20>>2],c=o[n+16>>2],o[n>>2]=c,o[n+4>>2]=p,o[f>>2]=m,o[f+4>>2]=a,o[n+32>>2]=c,o[n+36>>2]=p,f=Ce(b^h^x^C,1),k=n,P=Ce(f^d^g^T,1),o[k+60>>2]=P,k=n,P=Ce(l^s^i^x,1),o[k+56>>2]=P,k=n,P=Ce(w^v^t^g,1),o[k+52>>2]=P,k=n,P=Ce(I,30)+f|0,o[k+48>>2]=P,y(n+16|0,n+32|0,n+48|0,3),t=o[n+28>>2],f=o[n+24>>2],p=o[n+20>>2],o[e>>2]=o[e>>2]+o[n+16>>2],o[e+4>>2]=p+o[e+4>>2],o[e+8>>2]=f+o[e+8>>2],o[e+12>>2]=t+o[e+12>>2],k=e,P=o[e+16>>2]+Ce(o[n>>2],30)|0,o[k+16>>2]=P,u=n- -64|0}(e,r+32|0),void(u=r+96|0);o[r+20>>2]=1,o[r+52>>2]=2,o[r+36>>2]=3,o[r+40>>2]=0,o[r+32>>2]=1049776,o[r+12>>2]=1,o[r+24>>2]=r+4,o[r+28>>2]=1049712,o[r+48>>2]=r+8,o[r+16>>2]=r+28,o[r+8>>2]=r+24,function(e){var t,n,r,i;u=t=u-48|0,ee(t+32|0,o[262450],o[262451],o[262452],o[262453]),i=o[4+(n=t+40|0)>>2],o[(r=t+20|0)>>2]=o[n>>2],o[r+4>>2]=i,o[t+8>>2]=e,o[t+4>>2]=1049892,o[t>>2]=1,e=o[t+36>>2],o[t+12>>2]=o[t+32>>2],o[t+16>>2]=e,k(t),d()}(r+32|0),d()}function S(e,t,n){var r,i,a=0,s=0,c=0,l=0,d=0;r=(((s=o[t+12>>2])^(a=o[t+8>>2])^(c=o[t+4>>2]))+Ce(t=o[t>>2],5)|0)+o[n>>2]|0,i=Ce(r,30),o[e+12>>2]=i,s=((s+(a^(c=Ce(c,30))^t)|0)+o[n+4>>2]|0)+Ce(r,5)|0,l=e,d=Ce(s,30),o[l+8>>2]=d,a=((a=a+o[n+8>>2]|0)+((t=Ce(t,30))^c^r)|0)+Ce(s,5)|0,o[e+4>>2]=a,l=e,d=((c+o[n+12>>2]|0)+(s^t^i)|0)+Ce(a,5)|0,o[l>>2]=d}function T(e,t){var n=0,r=0;e:{t:{if((n=o[e+4>>2])-(r=o[e+8>>2])>>>0<t>>>0){if((t=t+r|0)>>>0<r>>>0)break e;if((0|(t=(r=n<<1)>>>0>t>>>0?r:t))<0)break e;if(!(n=n?oe(o[e>>2],n,1,t):ce(t,1)))break t;o[e+4>>2]=t,o[e>>2]=n}return}he(t,1),d()}ge(),d()}function x(e,t,n,r){var i;u=i=u+-64|0,o[i+12>>2]=t,o[i+8>>2]=e,o[i+20>>2]=r,o[i+16>>2]=n,o[i+44>>2]=2,o[i+60>>2]=43,o[i+28>>2]=2,o[i+32>>2]=0,o[i+24>>2]=1050524,o[i+52>>2]=42,o[i+40>>2]=i+48,o[i+56>>2]=i+16,o[i+48>>2]=i+8,G(i+24|0,1050564),d()}function k(e){var t,n,r,i,a=0,s=0;u=t=u-48|0,n=ae(e+12|0),r=ae(o[e+8>>2]),s=o[n+4>>2],o[(a=t+8|0)>>2]=o[n>>2],o[a+4>>2]=s,s=o[t+12>>2],a=o[t+8>>2],i=o[n+8>>2],o[t+28>>2]=o[n+12>>2],o[t+24>>2]=i,o[t+16>>2]=a,o[t+20>>2]=s,o[t+36>>2]=0,o[t+32>>2]=r,I(t+32|0,1050008,o[e+8>>2],t+16|0),d()}function P(e,t,n){var r;u=r=u-48|0,o[r+4>>2]=n,o[r>>2]=t,o[r+28>>2]=2,o[r+44>>2]=40,o[r+12>>2]=2,o[r+16>>2]=0,o[r+8>>2]=1050392,o[r+36>>2]=40,o[r+24>>2]=r+32,o[r+40>>2]=r,o[r+32>>2]=r+4,G(r+8|0,e),d()}function D(e,t){var n;u=n=u-48|0,o[n+4>>2]=t,o[n>>2]=e,o[n+28>>2]=2,o[n+44>>2]=40,o[n+12>>2]=2,o[n+16>>2]=0,o[n+8>>2]=1050644,o[n+36>>2]=40,o[n+24>>2]=n+32,o[n+40>>2]=n+4,o[n+32>>2]=n,G(n+8|0,1050660),d()}function O(e,t){var n;u=n=u-48|0,o[n+4>>2]=t,o[n>>2]=e,o[n+28>>2]=2,o[n+44>>2]=40,o[n+12>>2]=2,o[n+16>>2]=0,o[n+8>>2]=1050712,o[n+36>>2]=40,o[n+24>>2]=n+32,o[n+40>>2]=n+4,o[n+32>>2]=n,G(n+8|0,1050728),d()}function N(e,t){var n,r;if(u=n=u-16|0,(r=o[e>>2])>>>0<=t>>>0)return V(n+8|0,e+4|0,64,r,t),J(o[n+8>>2],o[n+12>>2]),o[e>>2]=t,void(u=n+16|0);K(1049568,40,1049552),d()}function R(e){var t;for(u=t=u-32|0,o[t+24>>2]=e;j(t+16|0,t+24|0),1&r[t+16|0];);le(t+8|0,o[e>>2],o[e+4>>2]),e=o[t+12>>2],o[t+24>>2]=o[t+8>>2],o[t+28>>2]=e,te(t+24|0),u=t+32|0}function M(e){var t,n,r,i,a,s;u=t=u-48|0,n=o[e+8>>2],r=o[e+12>>2],i=o[e+16>>2],a=o[e+20>>2],s=o[e>>2],e=o[e+4>>2],o[t+16>>2]=4,o[t+20>>2]=0,o[t+4>>2]=1,o[t+8>>2]=0,o[t+24>>2]=s,o[t+28>>2]=e,o[t>>2]=t+24,o[t+40>>2]=i,o[t+44>>2]=a,o[t+32>>2]=n,o[t+36>>2]=r,G(t,t+32|0),d()}function L(e,t){var n;if(u=n=u-16|0,64==o[t>>2])return o[t>>2]=0,z(n+8|0,t+4|0,64,64),t=o[n+12>>2],o[e>>2]=o[n+8>>2],o[e+4>>2]=t,void(u=n+16|0);K(1049608,39,1049552),d()}function B(e,t,n,r){var i=0;if(1114112==(0|t)||(i=1,!Ie[o[o[e+28>>2]+16>>2]](o[e+24>>2],t))){if(!n)return 0;i=0|Ie[o[o[e+28>>2]+12>>2]](o[e+24>>2],n,r)}return i}function F(e,t,n){if(4==(0|t))return t=n<<8&16711680|n<<24|n>>>8&65280|n>>>24,r[0|e]=t,r[e+1|0]=t>>>8,r[e+2|0]=t>>>16,void(r[e+3|0]=t>>>24);K(1049304,32,1049288),d()}function W(e,t,n){var r,i=0;u=r=u-16|0,i=(i=n)+(n=o[t>>2])|0,o[t>>2]=i,V(r+8|0,t+4|0,64,n,i),t=o[r+12>>2],o[e>>2]=o[r+8>>2],o[e+4>>2]=t,u=r+16|0}function j(e,t){var n=0,a=0;t=o[t>>2],a=0,(0|(n=o[t+8>>2]))!=o[t+12>>2]&&(o[t+8>>2]=n+1,t=i[0|n],a=1),n=a,r[e+1|0]=t,r[0|e]=n}function U(e,t,n){var i;u=i=u-16|0,o[i+8>>2]=0,o[i>>2]=1,o[i+4>>2]=0,ue(i,n-t>>>2),function(e,t,n){var i,a=0,s=0,c=0;for(u=i=u-16|0;(0|e)!=(0|t);)a=e+4|0,(e=o[e>>2])>>>0>=128?(o[i+12>>2]=0,s=n,c=i+12|0,e>>>0<=2047?(r[i+13|0]=63&e|128,r[i+12|0]=e>>>6&31|192,e=2):e>>>0<=65535?(r[i+14|0]=63&e|128,r[i+13|0]=e>>>6&63|128,r[i+12|0]=e>>>12&15|224,e=3):(r[i+15|0]=63&e|128,r[i+12|0]=e>>>18|240,r[i+14|0]=e>>>6&63|128,r[i+13|0]=e>>>12&63|128,e=4),se(s,c,e),e=a):(o[n+8>>2]==o[n+4>>2]&&ue(n,1),r[o[n>>2]+o[n+8>>2]|0]=e,o[n+8>>2]=o[n+8>>2]+1,e=a);u=i+16|0}(t,n,i),o[e+8>>2]=o[i+8>>2],t=o[i+4>>2],o[e>>2]=o[i>>2],o[e+4>>2]=t,u=i+16|0}function V(e,t,n,r,i){e:{if(i>>>0>=r>>>0){if(n>>>0<i>>>0)break e;return o[e+4>>2]=i-r,void(o[e>>2]=t+r)}O(r,i),d()}D(i,n),d()}function G(e,t){var n,r,i,a,s;u=n=u-32|0,i=o[t>>2],a=o[t+4>>2],s=o[t+12>>2],o[(r=n+20|0)>>2]=o[t+8>>2],o[r+4>>2]=s,o[n+12>>2]=i,o[n+16>>2]=a,o[n+8>>2]=e,o[n+4>>2]=1050324,o[n>>2]=1,k(n),d()}function $(e){var t,n;e|=0,u=t=u-16|0,function(e){var t,n=0;u=t=u-32|0,o[4+(n=t+8|0)>>2]=0,o[n>>2]=1,o[t+24>>2]=0,n=o[t+12>>2],o[t+16>>2]=o[t+8>>2],o[t+20>>2]=n,se(t+16|0,1049136,0),o[e+8>>2]=o[t+24>>2],n=o[t+20>>2],o[e>>2]=o[t+16>>2],o[e+4>>2]=n,u=t+32|0}(t),o[e>>2]=0,n=o[t+4>>2],o[e+4>>2]=o[t>>2],o[e+8>>2]=n,o[e+12>>2]=o[t+8>>2],u=t+16|0}function H(e,t,n,r,i){e:{if(n>>>0>=t>>>0){if(i>>>0>=n>>>0)break e;D(n,i),d()}O(t,n),d()}o[e+4>>2]=n-t,o[e>>2]=t+r}function Z(e,t,n){var r;u=r=u-32|0,re(r+16|0,t,n,n),Y(r+8|0,r+16|0),t=o[r+12>>2],o[e>>2]=o[r+8>>2],o[e+4>>2]=t,u=r+32|0}function Q(e,t,n){var o=0;if(n)for(o=e;r[0|o]=i[0|t],o=o+1|0,t=t+1|0,n=n+-1|0;);return e}function Y(e,t){var n,r;u=n=u-16|0,(0|(r=o[t+8>>2]))!=o[t+4>>2]&&function(e,t){var n=0;e:{t:{n:{if((n=o[e+4>>2])>>>0>=t>>>0){if(t){if((0|t)==(0|n))break e;if(n=oe(o[e>>2],n,1,t))break n;he(t,1),d()}te(e),o[e>>2]=1,t=0;break t}M(1048636),d()}o[e>>2]=n}o[e+4>>2]=t}}(t,r),function(e,t,n){var r;u=r=u-16|0,o[r+12>>2]=n,o[r+8>>2]=t,o[e>>2]=o[r+8>>2],o[e+4>>2]=o[r+12>>2],u=r+16|0}(n+8|0,o[t>>2],o[t+4>>2]),t=o[n+12>>2],o[e>>2]=o[n+8>>2],o[e+4>>2]=t,u=n+16|0}function z(e,t,n,r){var i;u=i=u-16|0,H(i+8|0,0,r,t,n),t=o[i+12>>2],o[e>>2]=o[i+8>>2],o[e+4>>2]=t,u=i+16|0}function q(e,t,n){var r;return t|=0,n|=0,T(e=o[(e|=0)>>2],n),r=o[e+8>>2],o[e+8>>2]=r+n,Q(o[e>>2]+r|0,t,n),0}function J(e,t){if(t)for(;r[0|e]=0,e=e+1|0,t=t+-1|0;);}function K(e,t,n){var r;u=r=u-16|0,o[r+12>>2]=t,o[r+8>>2]=e,I(r+8|0,1049204,0,n),d()}function X(e,t,n,r){r>>>0>=t>>>0?Q(n,e,t):(K(1049416,40,1049400),d())}function ee(e,t,n,r,i){o[e+12>>2]=i,o[e+8>>2]=r,o[e+4>>2]=n,o[e>>2]=t}function te(e){o[e+4>>2]&&_(o[e>>2])}function ne(e){o[4+(e|=0)>>2]=0,o[e+8>>2]=0,o[e>>2]=4,o[(e=e+12|0)>>2]=0,o[e+4>>2]=0}function re(e,t,n,r){o[e+8>>2]=n,o[e+4>>2]=r,o[e>>2]=t}function oe(e,t,n,r){return function(e,t,n,r){e:{if(8<n>>>0){if(n=8<n>>>0?A(n,r):h(r))break e;return 0}return function(e,t){var n=0,r=0,i=0,a=0,s=0,c=0,l=0,d=0,u=0,p=0;t:if(!(t>>>0>4294901708)){n=t>>>0<11?16:t+11&-8,r=-8&(c=o[(s=e+-4|0)>>2]);n:{r:{o:{i:{a:{s:{if(3&c){if(a=r+(l=e+-8|0)|0,r>>>0>=n>>>0)break s;if((0|a)==o[262874])break a;if((0|a)==o[262873])break i;if(2&(c=o[a+4>>2]))break n;if((r=r+(d=-8&c)|0)>>>0>=n>>>0)break o;break n}if(n>>>0<256|r>>>0<(4|n)>>>0|r-n>>>0>=131073)break n;break r}if((t=r-n|0)>>>0<16)break r;o[s>>2]=n|1&c|2,o[4+(i=n+l|0)>>2]=3|t,o[a+4>>2]=1|o[a+4>>2],v(i,t);break r}if((r=r+o[262872]|0)>>>0<=n>>>0)break n;o[s>>2]=n|1&c|2,i=r-n|0,o[4+(t=n+l|0)>>2]=1|i,o[262872]=i,o[262874]=t;break r}if((r=r+o[262871]|0)>>>0<n>>>0)break n;(t=r-n|0)>>>0<=15?(o[s>>2]=r|1&c|2,o[4+(t=r+l|0)>>2]=1|o[t+4>>2],t=0):(o[s>>2]=n|1&c|2,o[4+(i=n+l|0)>>2]=1|t,o[(n=r+l|0)>>2]=t,o[n+4>>2]=-2&o[n+4>>2]),o[262873]=i,o[262871]=t;break r}t=r-n|0,d>>>0>=256?C(a):(0|(i=o[a+12>>2]))==(0|(a=o[a+8>>2]))?(u=1051084,p=o[262771]&Ce(-2,c>>>3),o[u>>2]=p):(o[a+12>>2]=i,o[i+8>>2]=a),t>>>0>=16?(o[s>>2]=n|1&o[s>>2]|2,o[4+(i=n+l|0)>>2]=3|t,o[4+(n=r+l|0)>>2]=1|o[n+4>>2],v(i,t)):(o[s>>2]=r|1&o[s>>2]|2,o[4+(t=r+l|0)>>2]=1|o[t+4>>2])}i=e;break t}if(n=h(t))return t=Q(n,e,(i=(-8&(i=o[s>>2]))-(3&i?4:8)|0)>>>0>t>>>0?t:i),_(e),t}return i}(e,r)}return t=Q(n,e,t>>>0>r>>>0?r:t),_(e),t}(e,t,n,r)}function ie(e,t){o[e+4>>2]=o[t+8>>2],o[e>>2]=o[t>>2]}function ae(e){return e||(M(1049972),d()),e}function se(e,t,n){!function(e,t,n){var r,i;u=r=u-16|0,ue(e,n=n-t|0),i=o[e+8>>2],o[e+8>>2]=n+i,ie(r+8|0,e),function(e,t,n,r){var i;if(u=i=u-112|0,o[i+24>>2]=t,o[i+28>>2]=r,(0|t)==(0|r))return Q(e,n,t),void(u=i+112|0);o[i+80>>2]=i+24,o[i+84>>2]=i+28,o[i+104>>2]=4,o[i+108>>2]=0,o[i+92>>2]=1,o[i+96>>2]=0,o[i+88>>2]=1048948,le(i+16|0,i+80|0,1),e=o[i+20>>2],t=o[i+16>>2],le(i+8|0,i+84|0,1),o[i+76>>2]=2,o[i+52>>2]=3,o[i+56>>2]=t,o[i+60>>2]=e,o[i+36>>2]=3,o[i+40>>2]=0,o[i+32>>2]=1048872,e=o[i+12>>2],o[i+64>>2]=o[i+8>>2],o[i+68>>2]=e,o[i+72>>2]=i+88,o[i+48>>2]=i+56,G(i+32|0,1048956),d()}(o[r+8>>2]+i|0,o[r+12>>2]-i|0,t,n),u=r+16|0}(e,t,t+n|0)}function ce(e,t){return 8<t>>>0?A(t,e):h(e)}function le(e,t,n){o[e+4>>2]=n,o[e>>2]=t}function de(e,t,n){E(o[o[e>>2]>>2],t,n)}function ue(e,t){!function(e,t,n){var r;u=r=u-16|0,function(e,t,n,r){var i,a=0;u=i=u-48|0,o[t+4>>2]-n>>>0>=r>>>0||(function(e,t,n,r){var i,a;u=i=u-16|0,a=e,(r=n+r|0)>>>0<n>>>0?(le(i+8|0,r,0),n=o[i+8>>2],o[e+8>>2]=o[i+12>>2],t=1):(n=(t=o[t+4>>2]<<1)>>>0>r>>>0?t:r,t=0),o[a>>2]=t,o[e+4>>2]=n,u=i+16|0}(i+32|0,t,n,r),a=1,n=o[i+36>>2],1!=o[i+32>>2]?(0|n)<=-1?(le(i+8|0,i,0),t=o[i+12>>2],o[e+4>>2]=o[i+8>>2],o[e+8>>2]=t):(r=i+16|0,a=o[t+4>>2],o[r>>2]=a,o[r+4>>2]=0!=(0|a),(r=(r=o[i+20>>2])?oe(o[t>>2],o[i+16>>2],r,n):ce(n,1))||(he(n,1),d()),o[t+4>>2]=n,o[t>>2]=r,a=0):(le(i,n,o[i+40>>2]),t=o[i+4>>2],o[e+4>>2]=o[i>>2],o[e+8>>2]=t)),o[e>>2]=a,u=i+48|0}(r,e,t,n);e:{if(1==o[r>>2]){if(!o[r+8>>2])break e;M(1048700),d()}return void(u=r+16|0)}ge(),d()}(e,o[e+8>>2],t)}function pe(e,t){return t|=0,0|function(e,t){var n,o=0,a=0,s=0,l=0,d=0,h=0,f=0,g=0,_=0;if(u=n=u-48|0,a=39,e>>>0<1e4)o=e;else for(;o=be(e,l),_=s=p,f=(d=(n+9|0)+a|0)-4|0,s=e-Ae(o,s)|0,h=i[0|(h=1050746+((g=((65535&s)>>>0)/100|0)<<1)|0)]|i[h+1|0]<<8,r[0|f]=h,r[f+1|0]=h>>>8,d=d+-2|0,s=1050746+((s-c(g,100)&65535)<<1)|0,s=i[0|s]|i[s+1|0]<<8,r[0|d]=s,r[d+1|0]=s>>>8,a=a+-4|0,s=!l&e>>>0>99999999|l>>>0>0,e=o,l=_,s;);return(0|o)>99&&(l=(a=a+-2|0)+(n+9|0)|0,e=1050746+(((e=o)-c(o=((65535&e)>>>0)/100|0,100)&65535)<<1)|0,e=i[0|e]|i[e+1|0]<<8,r[0|l]=e,r[l+1|0]=e>>>8),(0|o)>=10?(e=(a=a+-2|0)+(n+9|0)|0,o=i[0|(o=1050746+(o<<1)|0)]|i[o+1|0]<<8,r[0|e]=o,r[e+1|0]=o>>>8):r[(a=a+-1|0)+(n+9|0)|0]=o+48,e=m(t,1050299,0,(n+9|0)+a|0,39-a|0),u=n+48|0,e}(o[(e|=0)>>2],t)}function he(e,t){var n;n=e,e=o[262767],Ie[e||22](n,t),d()}function fe(e,t,n){return g(n,e,t)}function ge(){M(1050224),d()}function _e(e){return p=1468863706,-1546811115}function me(e){}function ye(){}function ve(e,t){var n,r;n=0|e,r=0|t,s[0]=n,s[1]=r}function Ae(e,t){var n,r=0,o=0;return n=c(r=e>>>16,0),e=65535&(o=(o=c(r,1e4))+((r=c(65535&e,1e4))>>>16)|0),p=((n+c(t,1e4)|0)+(o>>>16)|0)+(e>>>16)|0,65535&r|e<<16}function be(e,t){var n=0,r=0,o=0,i=0,a=0,s=0,d=0;if(!t)return ve((t=e)-c(e=(e>>>0)/1e4|0,1e4)|0,0),p=0,e;if(o=0-(a=51-l(t)|0)|0,n=31&(r=63&a),32<=r>>>0?(r=0,i=t>>>n):(r=t>>>n,i=((1<<n)-1&t)<<32-n|e>>>n),n=31&(o&=63),32<=o>>>0?(t=e<<n,e=0):(t=(1<<n)-1&e>>>32-n|t<<n,e<<=n),a)for(;o=r<<1|i>>>31,i=(r=i<<1|t>>>31)-(n=1e4&(s=(i=0-(o+(9999<r>>>0)|0)|0)>>31))|0,r=o-(r>>>0<n>>>0)|0,t=t<<1|e>>>31,e=d|e<<1,d=s&=1,a=a+-1|0;);return ve(i,r),p=t<<1|e>>>31,s|e<<1}function we(e){return e?31-l(e+-1^e)|0:32}function Ce(e,t){var n=0;return(-1>>>(n=31&t)&e)<<n|((n=e)&-1<<(e=0-t&31))>>>e}var Ie=[null,function(e,t){return t|=0,e=o[(e|=0)>>2],(16&i[0|t])>>>4?0|function(e,t){var n,i=0,a=0;for(u=n=u-128|0,i=o[e>>2],e=0;a=15&i,r[127+(e+n|0)|0]=a>>>0<10?48|a:a+87|0,e=e+-1|0,i>>>=4;);return(i=e+128|0)>>>0>=129&&(O(i,128),d()),e=m(t,1050744,2,128+(e+n|0)|0,0-e|0),u=n+128|0,e}(e,t):(32&i[0|t])>>>5?0|function(e,t){var n,i=0,a=0;for(u=n=u-128|0,i=o[e>>2],e=0;a=15&i,r[127+(e+n|0)|0]=a>>>0<10?48|a:a+55|0,e=e+-1|0,i>>>=4;);return(i=e+128|0)>>>0>=129&&(O(i,128),d()),e=m(t,1050744,2,128+(e+n|0)|0,0-e|0),u=n+128|0,e}(e,t):0|pe(e,t)},function(e,t){e|=0;var n,r,i=0,a=0,s=0;return u=n=u-32|0,r=o[28+(t|=0)>>2],t=o[t+24>>2],s=o[4+(a=e+16|0)>>2],o[(i=n+24|0)>>2]=o[a>>2],o[i+4>>2]=s,s=o[4+(a=e+8|0)>>2],o[(i=n+16|0)>>2]=o[a>>2],o[i+4>>2]=s,i=o[e+4>>2],o[n+8>>2]=o[e>>2],o[n+12>>2]=i,e=f(t,r,n+8|0),u=n+32|0,0|e},function(e,t){return t|=0,0|fe(o[(e|=0)>>2],o[e+4>>2],t)},function(e,t){var n;return t|=0,u=n=u-16|0,ie(n+8|0,o[(e|=0)>>2]),e=fe(o[n+8>>2],o[n+12>>2],t),u=n+16|0,0|e},me,function(e,t){return e|=0,u=e=u-16|0,function(e,t){var n;n=0|Ie[o[o[t+28>>2]+12>>2]](o[t+24>>2],1049996,11),r[e+5|0]=0,r[e+4|0]=n,o[e>>2]=t}(e+8|0,t|=0),t=function(e){var t=0,n=0,a=0;return t=i[e+4|0],i[e+5|0]&&(n=255&t,a=e,t=1,n||(t=o[e>>2],n=o[o[t+28>>2]+12>>2],e=o[t+24>>2],t=4&i[0|t]?0|Ie[n](e,1050946,1):0|Ie[n](e,1050947,2)),r[a+4|0]=t),0!=(255&t)}(e+8|0),u=e+16|0,0|t},me,function(e,t){return 0|Ie[o[o[28+(t|=0)>>2]+12>>2]](o[t+24>>2],1050299,11)},me,function(e,t){return 0|Ie[o[o[28+(t|=0)>>2]+12>>2]](o[t+24>>2],1050310,14)},$,function(){return 0|(o[262757]?1051024:function(){var e,t,n=0,r=0,i=0;return u=e=u-32|0,$(e),i=o[262759],o[(n=e+24|0)>>2]=o[262758],o[n+4>>2]=i,i=o[262756],n=o[262757],r=o[e+4>>2],o[262756]=o[e>>2],o[262757]=r,t=o[4+(r=e+8|0)>>2],o[262758]=o[r>>2],o[262759]=t,o[e+16>>2]=i,o[e+20>>2]=n,o[e+20>>2]&&te(e+16|4),u=e+32|0,1051024}())},me,function(e,t){e|=0;var n=0,r=0,i=0;n=o[(t|=0)>>2],o[t>>2]=0;e:{if(r=e,n){if(i=o[t+4>>2],!(t=ce(8,4)))break e;o[t+4>>2]=i,o[t>>2]=n,n=1049224}else t=1,n=1049240;return o[r+4>>2]=n,void(o[e>>2]=t)}he(8,4),d()},function(e,t){var n;e|=0,n=o[(t|=0)>>2],o[e+4>>2]=n?1049224:1049240,o[e>>2]=n?t:1},me,function(e){return p=286299353,1890621284},me,function(e){return p=1757840133,-801715452},ne,function(){return 0|(o[262762]?1051048:function(){var e,t,n=0,r=0,i=0;return u=e=u-48|0,ne(e),o[e+40>>2]=o[262766],n=o[262765],o[(r=e+32|0)>>2]=o[262764],o[r+4>>2]=n,n=o[262762],r=o[262763],i=o[e+4>>2],o[262762]=o[e>>2],o[262763]=i,t=o[4+(i=e+8|0)>>2],o[262764]=o[i>>2],o[262765]=t,o[262766]=o[e+16>>2],o[e+24>>2]=n,o[e+28>>2]=r,n&&o[4+(n=e+24|0)>>2]&&_(o[n>>2]),u=e+48|0,1051048}())},function(e,t){},me,q,function(e,t){t|=0;var n,i=0;u=n=u-16|0,i=e=o[(e|=0)>>2];e:{t:{n:{if(t>>>0>=128){if(o[n+12>>2]=0,t>>>0<2048)break n;if(t>>>0<65536){r[n+14|0]=63&t|128,r[n+13|0]=t>>>6&63|128,r[n+12|0]=t>>>12&15|224,t=3;break t}r[n+15|0]=63&t|128,r[n+12|0]=t>>>18|240,r[n+14|0]=t>>>6&63|128,r[n+13|0]=t>>>12&63|128,t=4;break t}(0|(i=o[e+8>>2]))==o[e+4>>2]&&(T(e,1),i=o[e+8>>2]),r[i+o[e>>2]|0]=t,o[e+8>>2]=o[e+8>>2]+1;break e}r[n+13|0]=63&t|128,r[n+12|0]=t>>>6&31|192,t=2}T(i,t),i=o[e+8>>2],o[e+8>>2]=i+t,Q(i+o[e>>2]|0,n+12|0,t)}return u=n+16|0,0},function(e,t){e|=0,t|=0;var n,r=0,i=0;return u=n=u-32|0,o[n+4>>2]=o[e>>2],i=o[4+(r=t+16|0)>>2],o[(e=n+24|0)>>2]=o[r>>2],o[e+4>>2]=i,i=o[4+(r=t+8|0)>>2],o[(e=n+16|0)>>2]=o[r>>2],o[e+4>>2]=i,e=o[t+4>>2],o[n+8>>2]=o[t>>2],o[n+12>>2]=e,e=f(n+4|0,1049868,n+8|0),u=n+32|0,0|e},me,_e,function(e){var t;!(t=o[4+(e|=0)>>2])|!o[e+8>>2]||_(t)},function(e,t){e|=0;var n,r=0,i=0,a=0,s=0;u=n=u+-64|0,(r=o[4+(t|=0)>>2])||(r=o[t>>2],o[n+32>>2]=0,o[n+24>>2]=1,o[n+28>>2]=0,o[n+36>>2]=n+24,a=o[4+(i=r+16|0)>>2],o[(s=n+56|0)>>2]=o[i>>2],o[s+4>>2]=a,a=o[4+(i=r+8|0)>>2],o[(s=n+48|0)>>2]=o[i>>2],o[s+4>>2]=a,i=o[r+4>>2],o[n+40>>2]=o[r>>2],o[n+44>>2]=i,f(n+36|0,1049868,n+40|0),o[(i=n+16|0)>>2]=o[n+32>>2],r=o[n+28>>2],o[n+8>>2]=o[n+24>>2],o[n+12>>2]=r,!(r=o[t+4>>2])|!o[t+8>>2]||_(r),a=o[n+12>>2],o[(r=t+4|0)>>2]=o[n+8>>2],o[r+4>>2]=a,o[r+8>>2]=o[i>>2],r=o[r>>2]),o[t+4>>2]=1,i=o[t+12>>2],a=o[(t=t+8|0)>>2],o[t>>2]=0,o[t+4>>2]=0,(t=ce(12,4))||(he(12,4),d()),o[t+8>>2]=i,o[t+4>>2]=a,o[t>>2]=r,o[e+4>>2]=1050028,o[e>>2]=t,u=n- -64|0},function(e,t){e|=0;var n,r,i=0,a=0,s=0,c=0;u=n=u+-64|0,r=4+(t|=0)|0,o[t+4>>2]||(a=o[t>>2],o[n+32>>2]=0,o[n+24>>2]=1,o[n+28>>2]=0,o[n+36>>2]=n+24,c=o[4+(i=a+16|0)>>2],o[(s=n+56|0)>>2]=o[i>>2],o[s+4>>2]=c,c=o[4+(i=a+8|0)>>2],o[(s=n+48|0)>>2]=o[i>>2],o[s+4>>2]=c,i=o[a+4>>2],o[n+40>>2]=o[a>>2],o[n+44>>2]=i,f(n+36|0,1049868,n+40|0),o[(a=n+16|0)>>2]=o[n+32>>2],i=o[n+28>>2],o[n+8>>2]=o[n+24>>2],o[n+12>>2]=i,!(i=o[t+4>>2])|!o[t+8>>2]||_(i),t=o[n+12>>2],o[r>>2]=o[n+8>>2],o[r+4>>2]=t,o[r+8>>2]=o[a>>2]),o[e+4>>2]=1050028,o[e>>2]=r,u=n- -64|0},te,function(e){return p=-679582923,428379921},me,q,function(e,t){return t|=0,function(e,t){var n,i=0;u=n=u-16|0,i=e;e:{t:{n:{if(t>>>0>=128){if(o[n+12>>2]=0,t>>>0<2048)break n;if(t>>>0<65536){r[n+14|0]=63&t|128,r[n+13|0]=t>>>6&63|128,r[n+12|0]=t>>>12&15|224,t=3;break t}r[n+15|0]=63&t|128,r[n+12|0]=t>>>18|240,r[n+14|0]=t>>>6&63|128,r[n+13|0]=t>>>12&63|128,t=4;break t}(0|(i=o[e+8>>2]))==o[e+4>>2]&&(T(e,1),i=o[e+8>>2]),r[i+o[e>>2]|0]=t,o[e+8>>2]=o[e+8>>2]+1;break e}r[n+13|0]=63&t|128,r[n+12|0]=t>>>6&31|192,t=2}T(i,t),i=o[e+8>>2],o[e+8>>2]=i+t,Q(i+o[e>>2]|0,n+12|0,t)}u=n+16|0}(o[(e|=0)>>2],t),0},function(e,t){e|=0,t|=0;var n,r=0,i=0;return u=n=u-32|0,o[n+4>>2]=o[e>>2],i=o[4+(r=t+16|0)>>2],o[(e=n+24|0)>>2]=o[r>>2],o[e+4>>2]=i,i=o[4+(r=t+8|0)>>2],o[(e=n+16|0)>>2]=o[r>>2],o[e+4>>2]=i,e=o[t+4>>2],o[n+8>>2]=o[t>>2],o[n+12>>2]=e,e=f(n+4|0,1050044,n+8|0),u=n+32|0,0|e},me,function(e,t){return 0|Ie[o[o[28+(t|=0)>>2]+12>>2]](o[t+24>>2],1051016,5)},pe,pe,function(e,t){return 0|g(t|=0,o[(e|=0)>>2],o[e+4>>2])},function(e,t){return t|=0,0|Ie[o[o[4+(e|=0)>>2]+12>>2]](o[e>>2],t)},me,_e];function Ee(t){t|=0;var s=0|n.byteLength/65536,l=s+t|0;if(s<l&&l<65536){var d=new ArrayBuffer(c(l,65536)),u=new e.Int8Array(d);u.set(r),r=u,r=new e.Int8Array(d),new e.Int16Array(d),o=new e.Int32Array(d),i=new e.Uint8Array(d),new e.Uint16Array(d),a=new e.Uint32Array(d),new e.Float32Array(d),new e.Float64Array(d),n=d}return s}return{memory:Object.create(Object.prototype,{grow:{value:Ee},buffer:{get:function(){return n}}}),sha1:function(e,t,n){var r;e|=0,u=r=u-80|0,Z(r+24|0,t|=0,n|=0),function(e,t,n){var r;u=r=u-16|0,o[r+12>>2]=n,o[r+8>>2]=t,function(e,t){var n;u=n=u-32|0,function(e,t){var n,r,a=0;u=n=u-176|0,(r=0|Ie[o[262284]]())?(function(e){var t;o[e+8>>2]=1732584193,o[e+12>>2]=-271733879,o[e>>2]=0,o[e+4>>2]=0,o[e+24>>2]=-1009589776,o[(t=e+16|0)>>2]=-1732584194,o[t+4>>2]=271733878,J(e+28|0,69)}(n+8|0),(0|(a=o[r>>2]+1|0))<=0&&(x(1049045,24,n+128|0,1049088),d()),o[r>>2]=a,o[n+164>>2]=3,o[n+148>>2]=2,o[n+132>>2]=2,o[n+136>>2]=0,o[n+128>>2]=1049120,o[n+172>>2]=r,o[n+168>>2]=r+4,o[n+160>>2]=t,o[n+156>>2]=4,o[n+144>>2]=n+152,o[n+152>>2]=n+168,function(e,t){var n,r,i=0,a=0,s=0,c=0;if(u=n=u-48|0,c=o[t>>2],a=(r=o[t+4>>2])<<3)for(i=c+4|0;s=o[i>>2]+s|0,i=i+8|0,a=a+-8|0;);e:{t:{n:{r:{if(o[t+20>>2]){if(r||(P(1050152,0,0),d()),!o[c+4>>2]&&s>>>0<=15||!((i=s+s|0)>>>0>=s>>>0)){a=1,i=0,s=n+8|0;break r}}else i=s;if((0|i)<=-1)break n;if(s=n+8|0,i){if(!(a=ce(i,1)))break t}else a=1,i=0}if(o[n+16>>2]=0,o[n+12>>2]=i,o[n+8>>2]=a,o[n+20>>2]=n+8,a=o[4+(i=t+16|0)>>2],o[(c=n+40|0)>>2]=o[i>>2],o[c+4>>2]=a,a=o[4+(i=t+8|0)>>2],o[(c=n+32|0)>>2]=o[i>>2],o[c+4>>2]=a,i=o[t+4>>2],o[n+24>>2]=o[t>>2],o[n+28>>2]=i,f(n+20|0,1050044,n+24|0))break e;return t=o[s+4>>2],o[e>>2]=o[s>>2],o[e+4>>2]=t,o[e+8>>2]=o[s+8>>2],void(u=n+48|0)}ge(),d()}he(i,1),d()}x(1050248,51,n+24|0,1050168),d()}(n+112|0,n+128|0),ie(n,n+112|0),function(e,t,n){var r,a,s;u=r=u-16|0,i[e+96|0]&&(K(1049832,32,1049816),d()),a=e,s=function(e,t,n){var r,i,a=0;if(r=1+(a=(n>>>29)+t|0)|0,i=a,!((0|(n=(a=(n<<=3)+e|0)>>>0<n>>>0?r:i))==(0|t)&a>>>0<e>>>0|n>>>0<t>>>0))return p=n,a;(function(){var e;u=e=u-48|0,o[e+12>>2]=25,o[e+8>>2]=1049472,o[e+36>>2]=1,o[e+20>>2]=1,o[e+24>>2]=0,o[e+16>>2]=1050496,o[e+44>>2]=42,o[e+32>>2]=e+40,o[e+40>>2]=e+8,G(e+16|0,1050504),d()})(),d()}(o[e>>2],o[e+4>>2],n),o[a>>2]=s,o[e+4>>2]=p,o[r+12>>2]=e+8,function(e,t,n,r){var i,a=0,s=0,c=0;u=i=u+-64|0,o[i+60>>2]=r;e:{if(r=o[e>>2]){if((a=64-r|0)>>>0>n>>>0){V(i+32|0,e+4|0,64,r,n+r|0),X(t,n,o[i+32>>2],o[i+36>>2]);break e}z(i+48|0,t,n,a),r=o[i+52>>2],s=o[i+48>>2],V(i+40|0,c=e+4|0,64,o[e>>2],64),X(s,r,o[i+40>>2],o[i+44>>2]),o[e>>2]=0,de(i+60|0,c,64)}for(r=n-a|0;!(r>>>0<=63);)H(i+8|0,s=a,a=a- -64|0,t,n),de(i+60|0,o[i+8>>2],o[i+12>>2]),r=r+-64|0;H(i+24|0,a,n,t,n),t=o[i+28>>2],n=o[i+24>>2],V(i+16|0,e+4|0,64,0,r),X(n,t,o[i+16>>2],o[i+20>>2]),n=r}o[e>>2]=o[e>>2]+n,u=i- -64|0}(e+28|0,t,n,r+12|0),u=r+16|0}(n+8|0,o[n>>2],o[n+4>>2]),te(n+112|0),t=o[n+172>>2],o[t>>2]=o[t>>2]+-1,function(e,t){var n,r,a=0;u=n=u-48|0,function(e,t){var n;u=n=u-16|0,o[n+8>>2]=0,o[n>>2]=1,o[n+4>>2]=0,function(e,t){var n,r=0;ue(e,t),n=o[e>>2],t&&(J(n+(r=o[e+8>>2])|0,t),o[e+8>>2]=t+r)}(n,t),o[e+8>>2]=o[n+8>>2],t=o[n+4>>2],o[e>>2]=o[n>>2],o[e+4>>2]=t,u=n+16|0}(n+16|0,20),ie(n+8|0,n+16|0),w(t,o[n+8>>2],o[n+12>>2]),o[(t=n+40|0)>>2]=o[n+24>>2],a=o[n+20>>2],o[n+32>>2]=o[n+16>>2],o[n+36>>2]=a,a=o[n+36>>2],r=o[t>>2],t=o[n+32>>2],o[n+44>>2]=r+t,o[n+40>>2]=t,o[n+36>>2]=a,o[n+32>>2]=t,function(e,t){var n,r=0,a=0,s=0;u=n=u+-64|0,a=o[4+(r=t+8|0)>>2],s=n+8|0,r=o[r>>2],o[s>>2]=r,o[s+4>>2]=a,a=o[t+4>>2],o[n>>2]=o[t>>2],o[n+4>>2]=a;e:{t:{if(o[n+12>>2]!=(0|r)){if(o[n+8>>2]=r+1,function(e,t){var n;u=n=u-16|0,o[n+12>>2]=o[1048724+((15&t)<<2)>>2],o[n+8>>2]=o[1048724+((240&t)>>>2)>>2],U(e,n+8|0,n+16|0),u=n+16|0}(n+16|0,i[0|r]),o[n+16>>2])break t}else o[n+16>>2]=0;if(o[e+8>>2]=0,o[e>>2]=1,o[e+4>>2]=0,R(n),!o[n+16>>2])break e;te(n+16|0);break e}o[(t=n+40|0)>>2]=o[n+24>>2],r=o[n+20>>2],o[n+32>>2]=o[n+16>>2],o[n+36>>2]=r,a=o[4+(r=n+8|0)>>2],o[(s=n+56|0)>>2]=o[r>>2],o[s+4>>2]=a,r=o[n+4>>2],o[n+48>>2]=o[n>>2],o[n+52>>2]=r,function(e,t){var n,r,a,s=0;u=n=u-16|0,a=o[4+(r=t+8|0)>>2],o[(s=n+8|0)>>2]=o[r>>2],o[s+4>>2]=a,s=o[t+4>>2],o[n>>2]=o[t>>2],o[n+4>>2]=s,function(e,t){var n,r,a,s=0;for(u=n=u+-64|0,a=o[4+(s=e+8|0)>>2],o[(r=n+24|0)>>2]=o[s>>2],o[r+4>>2]=a,s=o[e+4>>2],o[n+16>>2]=o[e>>2],o[n+20>>2]=s,e=n+56|0;(0|(s=o[n+24>>2]))!=o[n+28>>2];)o[n+24>>2]=s+1,s=i[0|s],o[n+52>>2]=o[1049140+((15&s)<<2)>>2],o[n+48>>2]=o[1049140+(s>>>2&60)>>2],U(n+32|0,n+48|0,e),o[e>>2]=o[n+40>>2],s=o[n+36>>2],o[n+48>>2]=o[n+32>>2],o[n+52>>2]=s,ie(n+8|0,n+48|0),se(t,o[n+8>>2],o[n+12>>2]),te(n+48|0);R(n+16|0),u=n- -64|0}(n,e),u=n+16|0}(n+32|0,n+48|0),o[e+8>>2]=o[t>>2],t=o[n+36>>2],o[e>>2]=o[n+32>>2],o[e+4>>2]=t}u=n- -64|0}(e,n+32|0),u=n+48|0}(e,n+8|0)):o[e>>2]=0,u=n+176|0}(n+8|0,t),o[n+8>>2]||(x(1048972,57,n+24|0,1049072),d()),t=o[n+12>>2],o[e>>2]=o[n+8>>2],o[e+4>>2]=t,o[e+8>>2]=o[n+16>>2],u=n+32|0}(e,r+8|0),u=r+16|0}(r+32|0,t=o[r+24>>2],n=o[r+28>>2]),n&&_(t),o[(t=r+56|0)>>2]=o[r+40>>2],n=o[r+36>>2],o[r+48>>2]=o[r+32>>2],o[r+52>>2]=n,ie(r+16|0,r+48|0),o[r+72>>2]=o[t>>2],t=o[r+52>>2],o[r+64>>2]=o[r+48>>2],o[r+68>>2]=t,Y(r+8|0,r- -64|0),t=o[r+12>>2],o[e>>2]=o[r+8>>2],o[e+4>>2]=t,u=r+80|0},setSalt:function(e,t){var n;u=n=u-48|0,Z(n+8|0,e|=0,t|=0),e=o[n+12>>2],re(n+16|0,o[n+8>>2],e,e),o[n+40>>2]=o[n+24>>2],e=o[n+20>>2],o[n+32>>2]=o[n+16>>2],o[n+36>>2]=e,function(e){var t,n;u=t=u-16|0,o[t+8>>2]=o[e+8>>2],n=o[e+4>>2],o[t>>2]=o[e>>2],o[t+4>>2]=n,function(e){var t,n;u=t=u-32|0,o[t+16>>2]=o[e+8>>2],n=o[e+4>>2],o[t+8>>2]=o[e>>2],o[t+12>>2]=n,function(e){var t,n,r=0,i=0;return u=n=u-32|0,(t=0|Ie[o[262284]]())?(o[(r=n+16|0)>>2]=o[e+8>>2],i=o[e+4>>2],o[n+8>>2]=o[e>>2],o[n+12>>2]=i,o[t>>2]&&(x(1049029,16,n+24|0,1049104),d()),o[t>>2]=-1,te(t+4|0),o[t+12>>2]=o[r>>2],e=o[n+12>>2],o[t+4>>2]=o[n+8>>2],o[t+8>>2]=e,o[t>>2]=o[t>>2]+1,e=0):(te(e),e=1),u=n+32|0,e}(t+8|0)&&(x(1048972,57,t+24|0,1049072),d()),u=t+32|0}(t),u=t+16|0}(n+32|0),u=n+48|0},main:ye,__wbindgen_malloc:function(e){if(!((e|=0)>>>0>4294967292)){if(!e)return 4;if(e=ce(e,(e>>>0<4294967293)<<2))return 0|e}d()},__wbindgen_realloc:function(e,t,n){if(e|=0,!((t|=0)>>>0>4294967292)&&(e=oe(e,t,4,n|=0)))return 0|e;d()},__wbindgen_free:function(e,t){(t|=0)&&_(e|=0)},__wbindgen_start:ye}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},{abort:function(){throw new Error("abort")}},l),p=u.memory,h=u.sha1,f=u.setSalt,g=u.main,_=u.__wbindgen_malloc,m=u.__wbindgen_realloc,y=u.__wbindgen_free,v=u.__wbindgen_start},function(e,t,n){function r(){}function o(){}n.r(t),r.prototype.encode=function(e){for(var t=[],n=e.length,r=0;r<n;){var o=e.codePointAt(r),i=0,a=0;for(o<=127?(i=0,a=0):o<=2047?(i=6,a=192):o<=65535?(i=12,a=224):o<=2097151&&(i=18,a=240),t.push(a|o>>i),i-=6;i>=0;)t.push(128|o>>i&63),i-=6;r+=o>=65536?2:1}return t},o.prototype.decode=function(e){if(void 0===e)return"";for(var t="",n=0;n<e.length;){var r=e[n],o=0,i=0;if(r<=127?(o=0,i=255&r):r<=223?(o=1,i=31&r):r<=239?(o=2,i=15&r):r<=244&&(o=3,i=7&r),e.length-n-o>0)for(var a=0;a<o;)i=i<<6|63&(r=e[n+a+1]),a+=1;else i=65533,o=e.length-n;t+=String.fromCodePoint(i),n+=o+1}return t},n.d(t,"sha1",(function(){return h})),n.d(t,"setSalt",(function(){return f})),n.d(t,"main",(function(){return g})),n.d(t,"memory",(function(){return m}));var i=0,a=new r("utf-8"),s="function"==typeof a.encodeInto?function(e,t){return a.encodeInto(e,t)}:function(e,t){var n=a.encode(e);return t.set(n),{read:e.length,written:n.length}},c=null;function l(){return null!==c&&c.buffer===_.memory.buffer||(c=new Uint8Array(_.memory.buffer)),c}function d(e){for(var t=e.length,n=_.__wbindgen_malloc(t),r=l(),o=0;o<t;o++){var a=e.charCodeAt(o);if(a>127)break;r[n+o]=a}if(o!==t){0!==o&&(e=e.slice(o)),n=_.__wbindgen_realloc(n,t,t=o+3*e.length);var c=l().subarray(n+o,n+t);o+=s(e,c).written}return i=o,n}var u=null,p=new o("utf-8",{ignoreBOM:!0,fatal:!0});function h(e){_.sha1(8,d(e),i);var t,n,r=(null!==u&&u.buffer===_.memory.buffer||(u=new Int32Array(_.memory.buffer)),u),o=(t=r[2],n=r[3],p.decode(l().subarray(t,t+n))).slice();return _.__wbindgen_free(r[2],1*r[3]),o}function f(e){_.setSalt(d(e),i)}function g(){_.main()}p.decode();var _=n(0),m=_.memory;_.__wbindgen_start()}])}();(()=>{const e=(({bits:e,PRNG:t=E})=>{const n=I(e/16);let r="";for(let e=0;e<n;++e)r+="0123456789abcdef"[I(16*t())];return r})({bits:256});S.setSalt(e)})();const T=e=>C.i[e];let x=0;const k=(e,t)=>{const n=p()({},t);if(void 0!==n.apiSignature)return n;if(void 0===T(e))return n;const r=w({apiName:e,args:n,argsList:C.i[e],seq:x});return n.apiSignature=S.sha1(r),n.apiSigningSeq=x,n.apiSignature,x+=1,n},P=0,D=1,O=2,N=3,R={[D]:"sign error",[O]:"sign seq error",[N]:"sign missing"},M=new Set,L=Function.prototype.call,B=L.bind(Set.prototype.has),F=L.bind(Set.prototype.add);function W(e,t,n,r){const o=`api sign failed: ${R[e]}; apiName: ${t}; args: ${JSON.stringify(n)}; signature: ${r}`;throw new Error(o)}const j=Object.create(null);function U(){return{invoke(e,t,n,r){if(((e,t)=>{if(void 0===T(e))return P;null!==t.apiSigningSeq&&void 0!==t.apiSigningSeq&&null!==t.apiSignature&&void 0!==t.apiSignature||W(N,e,t,"not checked"),t.apiSigningSeq=parseInt(t.apiSigningSeq,10),B(M,t.apiSigningSeq)&&W(O,e,t,"not checked"),F(M,t.apiSigningSeq);const n=w({apiName:e,args:t,argsList:C.i[e],seq:t.apiSigningSeq}),r=S.sha1(n);r!==t.apiSignature&&W(D,e,t,r)})(e,t),void 0===t.pluginId)return WeixinJSBridge.invoke(e,t,n,r);if(o()){const o=s(e,t);return WeixinJSBridge.invoke(e,o,n,r)}return function(e,t,n){delete t.permissionBytes,void 0===t.pluginId&&n(t),d(t.pluginId,e,(e=>{t.permissionBytes=e,t.privateData=JSON.stringify({pluginId:t.pluginId}),n(t)}))}(t,(t=>{WeixinJSBridge.invoke(e,t,n,r)}))},on:(e,t)=>j[e]instanceof Array?(j[e].push(t),null):(j[e]=null,WeixinJSBridge.on(e,t)),publish:(e,t,n)=>WeixinJSBridge.publish(e,t,n),subscribe:(e,t)=>WeixinJSBridge.subscribe(e,t)}}let V=!1;const G=[],$=function(e){G.push(e),V||(this.bridge.on("onSubPackageReady",(e=>{G.forEach((t=>{"function"==typeof t&&t(void 0,e)}))})),V=!0)};function H(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}const Z=(e,{stringify:t=JSON.stringify,parse:n=JSON.parse,arrayBufferProto:r=ArrayBuffer.prototype}={})=>{if(!e)return e;const o=typeof e;if("function"===o)throw new Error("[Safeway] not allow to pass function.");if("object"!==o)return e.valueOf();const i=Object.keys(e),a={};for(let t=0;t<i.length;t++){const n=i[t],o=e[n];void 0!==o&&"ArrayBuffer"===H(o)&&void 0!==o.byteLength&&(Object.setPrototypeOf(o,r),a[n]=o)}let s;try{s=n(t(e))}catch(e){throw new Error(`[Safeway] data clone error ${e.toString()}`)}const c=Object.keys(a);for(let e=0;e<c.length;e++){const t=c[e];s[t]=a[t]}return s};function Q(e,t){return function(...n){const r=[];for(let t=0;t<n.length;t++)r[t]=Z(n[t],{parse:e.contextGlobal.jsonParse,stringify:e.contextGlobal.jsonStringify,arrayBufferProto:e.contextGlobal.arrayBufferProto});t.apply(this,r)}}function Y(e,t,{cloneArgs:n=!0}={}){return function(...r){const o=[];for(let t=0;t<r.length;t++)"function"==typeof r[t]?o[t]=new Q(e,r[t]):o[t]=n?Z(r[t],{parse:JSON.parse,stringify:JSON.stringify,arrayBufferProto:ArrayBuffer.prototype}):r[t];const i=t.apply(this,o);return Z(i,{parse:e.contextGlobal.jsonParse,stringify:e.contextGlobal.jsonStringify,arrayBufferProto:e.contextGlobal.arrayBufferProto})}}function z(e,t,n,r=!0){const o=Object.keys(e);for(let i=0;i<o.length;i++){const a=o[i],s=e[a];if("function"!=typeof s)throw new Error(`Export value of Safeway must be a function, key ${a} func ${typeof s}`);n&&void 0!==__subContextEngine__&&__subContextEngine__.isIsolateContext()?t[a]=new Y(n,s,{cloneArgs:r}):t[a]=s}}function q(e){const t=U(),n={create:(e,t)=>WeixinWorker.create(e,t),onWorkerMsg:e=>WeixinWorker.onWorkerMsg(e),postMsgToWorker:(e,t,n)=>WeixinWorker.postMsgToWorker(e,t,n),terminate:e=>WeixinWorker.terminate(e)},r={makeApiSign:k},o={ifIs:c,ifIsNot:l};z(t,t,e,{cloneArgs:!1}),z(n,n,e),z(o,o,e),this.bridge=t,this.worker=n,this.apiSign=r,this.pluginPermissionBytes=o;z({onSubpackageReady:$},this,e)}const J=class{constructor(e){q.call(this,e)}static splitOnBridgeListener(e){return function(e){return null===j[e]?(console.error("`splitOnBridgeListener` should be called before any listeners attached to it. Ignored."),null):(j[e]=[],WeixinJSBridge.on(e,((...t)=>{const n=j[e];for(const e of n)if(!1===e(...t))break})),t=>{j[e].unshift(t)})}(e)}}},t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},n={};e(0,n,t),Safeway=n.default})();var __safeway__=new Safeway,__sclEngine__;(()=>{var e={821:(e,t,n)=>{"use strict";n.r(t),n.d(t,{exparser:()=>i,onThemeChange:()=>m,onViewportResize:()=>y,timestamp:()=>A,timestampMs:()=>b,getEngineConfig:()=>w,getWindowWidth:()=>C,getWindowHeight:()=>I,getTheme:()=>E,getDevicePixelRatio:()=>S,getSafeArea:()=>T,invoke:()=>x,subscribe:()=>k,timeoutCallback:()=>P});var r=n(995),o=n(404);r.globalOptions.publicProperties=!0,r.globalOptions.renderingMode="full",r.globalOptions.classPrefix="",r.globalOptions.templateEngine=o.GlassEaselTemplate;const i=r,a=WeixinJSBridge,s=[],c=[];let l=0,d=0,u=0,p=null,h=null;const f={};["onViewDidResize","onAppRouteResized","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onTextViewDrag","onImageViewLoad","onScrollViewScroll","onThemeChange"].forEach((e=>{f[e]=Safeway.splitOnBridgeListener(e)}));const g=e=>e?{left:e.left,top:e.top,right:Math.max(l-e.right,0),bottom:Math.max(d-e.bottom,0)}:e,_=e=>{l=e.size.framesetWidth||e.size.screenWidth,d=e.size.framesetHeight||e.size.screenHeight,a.invoke("getSystemInfo",{},(e=>{h=g(e.safeArea),s.forEach((t=>{t(e)}))}))};f.onViewDidResize(_),f.onAppRouteResized(_),f.onThemeChange((e=>{p!==e.theme&&n.g.__wxConfig.darkmode&&(p=e.theme,r.triggerRender((()=>{c.forEach((e=>e({theme:p})))})))}));const m=function(e){c.push(e)},y=function(e){s.push(e)},v=function(){u&&l&&d||a.invoke("getSystemInfo",{},(e=>{u=e.pixelRatio,l&&d||(l=e.framesetWidth||e.screenWidth,d=e.framesetHeight||e.screenHeight),h=g(e.safeArea)}))},A=function(){return Math.floor(Date.now()/1e3)},b=function(){return Date.now()%1e3},w=function(){return{relativeToParentContent:!1}},C=function(){return v(),l},I=function(){return v(),d},E=function(){return function(){if(!p){const e=n.g.__wxConfig,{darkmode:t}=e;p=t?e.theme:"light"}}(),p||"light"},S=function(){return u},T=function(){return h},x=function(e,t,n){a.invoke(e,t,(e=>{n&&n.exec(e)}))},k=function(e,t){f[e]((e=>{if(!t)return;return t.exec(e)}))},P=function(e,t){t&&setTimeout((e=>{t.exec(e)}),e)}},57:(e,t,n)=>{"use strict";n.d(t,{W:()=>r,J:()=>o});const r=[],o=[]},404:(e,t,n)=>{e.exports=(()=>{"use strict";var e={674:(e,t,r)=>{r.r(t),r.d(t,{GlassEaselTemplate:()=>E});var o,i=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];if(!0===n)return!0;if(!n)continue;if(i(n))return!0}return!1},a=function(e,t,r,o,a,s,c){if("object"==typeof e){var l=[],d=function(e,t){var r=e;return n(995).safeCallback("Template Function",r,null,t)},u=function(n){if(void 0===l[n]){var o=(0,e.I[n])(t,r,u,d);l[n]=void 0===o?null:o}return l[n]},p=!0===o||e.L(o,a,u);if(c||!0===p||p&&i(p)){var h=e.F(t,r,u,d),f=null;if(e.M){var g=e.M;f=[];for(var _=0;_<g.length;_+=1){var m=g[_];if("number"==typeof m)if(0===_){if(!s[m]){f=null;break}f.push.apply(f,s[m])}else{var y=u(m);f.push("number"==typeof y?y:y.toString())}else f.push(m)}}return[h,p,f]}}else if(c)return[e,void 0,null];return null},s=function(e,t,r,o){if("object"==typeof e){var i=[],a=function(e,t){var r=e;return n(995).safeCallback("Template Function",r,null,t)},s=function(n){if(void 0===i[n]){var o=(0,e.I[n])(t,r,s,a);i[n]=void 0===o?null:o}return i[n]},c=e.F(t,r,s,a),l=null;if(e.M){var d=e.M;l=[];for(var u=0;u<d.length;u+=1){var p=d[u];if("number"==typeof p)if(0===u){if(!o[p]){l=null;break}l.push.apply(l,o[p])}else{var h=s(p);l.push("number"==typeof h?h:h.toString())}else l.push(p)}}return[c,l]}return[e,null]},c=function(e){return null==e?"":e.toString()};!function(e){e[e.ATTR=0]="ATTR"}(o||(o={}));var l,d=function(e){return e.indexOf("-")<=0?e:e.replace(/-[a-z]/g,(function(e){return e[1].toUpperCase()}))},u=function(e,t,r,i,a,s,l){var u=n(995),p=u.dataUtils.deepCopy(r);if(e instanceof u.VirtualNode&&"slot"===e.is&&"name"===t)return u.Element.setSlotName(e,c(p)),!1;if("id"===t)return e.id=c(p),!1;if("slot"===t)return e.slot=c(p),!1;if("class"===t){if(s)e.hasExternalClass("class")?e.setExternalClass("class",c(p)):e.class=c(p);else e.class=c(p);return!1}if(s){var h=d(t);if(u.Component.hasPublicProperty(e,h))return a.scheduleReplace([h],p,null),!0;if("model:"===t.slice(0,6)){i||console.warn('Cannot apply reverse binding to property "'+t+'" because the binding expression is not a valid lvalue');var f=h.slice(6);if(u.Component.hasPublicProperty(e,f))return a.scheduleReplace([f],p,null),l.push([f,i]),!0}}if("style"===t)return e.setNodeStyle(c(p),o.ATTR),!1;if(/^data:/.test(t)){var g=t.slice(5);return e.dataset[g]=p,!1}if(/^data-/.test(t)){g=d(t.slice(5).toLowerCase());return e.dataset[g]=p,!1}var _=/^(capture-)?(mut-)?(bind|catch):?(.+)$/.exec(t);if(_){var m=c(p);return e.addListener(_[4],(function(t){var n,r=e.ownerShadowRoot.getHostNode();if("object"==typeof r){var o=u.Element.getMethodCaller(r)||r,i=o[m];"function"==typeof i&&(n=i.call(o,t))}return n})),!1}return/^mark:/.test(t)?(e.setMark(t.slice(5),p),!1):s&&e.hasExternalClass(t)?(e.setExternalClass(t,c(p)),!1):e instanceof u.NativeNode&&("boolean"==typeof p?!0===p?e.setAttribute(t,""):e.removeAttribute(t):e.setAttribute(t,c(p)),!1)},p=function(e,t,r,o,i,c,l){var d;e.dataset=e.dataset||{};var p=!1,h=[],f=n(995),g=e instanceof f.Component,_=g?f.Component.getDataProxy(e):null;for(var m in t)if(Object.prototype.hasOwnProperty.call(t,m)){var y=t[m],v=void 0,A=null;if(l){var b=a(y,r,o,c,l,i,!1);if(!b)continue;v=b[0],A=b[2]}else v=(d=s(y,r,o,i))[0],A=d[1];u(e,m,v,A,_,g,h)&&(p=!0)}if(p&&_.doUpdates(null,!0),g)for(var w=function(t){var n=h[t],r=n[0],o=n[1];e.setPropertyChangeListener(r,(function(t){var n=e.ownerShadowRoot.getHostNode(),r=f.Component.getDataProxy(n);r.scheduleReplace(o,t,null),r.doUpdates(null,!1)}))},C=0;C<h.length;C+=1)w(C)},h=function(e,t,r,o){e.dataset=e.dataset||{};var i=[],a=n(995),c=e instanceof a.Component,l=c?a.Component.getDataProxy(e):null,d=s(r,o,null,null),p=d[0],h=d[1];if(u(e,t,p,h,l,c,i)&&l.doUpdates(null,!0),c)for(var f=function(t){var n=i[t],r=n[0],o=n[1];e.setPropertyChangeListener(r,(function(t){var n=e.ownerShadowRoot.getHostNode(),r=a.Component.getDataProxy(n);r.scheduleReplace(o,t,null),r.doUpdates(null,!1)}))},g=0;g<i.length;g+=1)f(g)},f=function(e,t,n){for(var r=function(e){for(var t={},n=0;n<e.length;n+=1){var r=e[n];r?Object.prototype.hasOwnProperty.call(t,r)?e[n]=void 0:t[c(r)]=n:Number.isNaN(r)&&(e[n]=void 0)}return t}(e),o=function(e){for(var t={},n=[],r=0;r<e.length;r+=1){var o=e[r];o?Object.prototype.hasOwnProperty.call(t,o)?(e[r]=void 0,n.push(r)):t[c(o)]=r:(Number.isNaN(o)&&(e[r]=void 0),n.push(r))}return[t,n]}(t),i=o[0],a=o[1],s=[],l=new Array(e.length),d=new Array(e.length),u=[],p=[],h=0,f=0,g=0;g<e.length;g+=1){var _=e[g];if(_)if(Object.prototype.hasOwnProperty.call(i,_)){var m=i[c(_)];s.push(t[m]),l[g]=n[m],d[g]=g!==m}else u.push(g-f),f+=1,s.push(null),l[g]=null;else if(h<a.length){m=a[h];s.push(t[m]),l[g]=n[m],h+=1,d[g]=g!==m}else u.push(g-f),f+=1,s.push(null),l[g]=null}for(var y=0,v=[],A=0;A<t.length;){for(var b=t[A],w=s[y];null===w;)w=s[y+=1];y>=s.length?(p.push({oldIndex:r[c(b)],index:A,pos:-1}),y+=1,A+=1):w===b?(v.push(y),y+=1,A+=1):b?(w?i[c(w)]===A+1?p.push({oldIndex:r[c(b)],index:A,pos:y}):(w=s[y+=1])===b?(v.push(y),y+=1):(y-=1,p.push({oldIndex:r[c(b)],index:A,pos:y})):p.push({oldIndex:r[c(b)],index:A,pos:y}),A+=1):y+=1}var C=0;for(g=0;g<p.length;g+=1){var I=p[g].pos;if(-1===I)break;for(;C<v.length&&I>v[C];)C+=1;C>=v.length?p[g].pos=-1:p[g].pos=v[C]}return{children:l,indexChanged:d,removes:u,inserts:p}};!function(e){e[e.PURE=0]="PURE",e[e.IF=1]="IF",e[e.FOR=2]="FOR",e[e.TEMPLATE_IS=3]="TEMPLATE_IS",e[e.SHADOW_ROOT=4]="SHADOW_ROOT",e[e.SLOT=5]="SLOT",e[e.INCLUDE=6]="INCLUDE",e[e.BLOCK_SLOT=7]="BLOCK_SLOT"}(l||(l={}));var g=function(e,t,n,r,o,i,a){if(n)for(var l=0;l<n.length;l+=1){var d=n[l];if(null!=d)if(void 0===d.S){var u=_(e,d,r,o,i,null,a);t.appendChild(u)}else{var p=s(d.S,r,o,i)[0];u=a.createTextNode(c(p));t.appendChild(u)}}},_=function(e,t,r,o,i,a,d){var u=null;if(void 0!==t.V){var h=t;if(h.V===l.IF){var f="wx:if",_=d.createVirtualNode(f);_.__templateArgs={},(R=n(995)).Element.setInheritSlots(_);for(var m=h.B,y=0;y<m.length;y+=1){var v=m[y];if(s(v.B,r,o,i)[0]){g(e,_,v.C,r,o,i,d),_.__templateArgs.key=y;break}}return _}if(h.V===l.FOR){f="wx:for";var A=d.createVirtualNode(f);A.__templateArgs={},(R=n(995)).Element.setInheritSlots(A);var b=A.__templateArgs.keyList=[],w=h.K,C=function(t,n,a){"*this"===w?b.push(t):b.push(null==t?void 0:t[w]);var s=d.createVirtualNode("wx:for-item");R.Element.setInheritSlots(s),o.push(t),o.push(n),i.push(a),i.push(null),g(e,s,h.C,r,o,i,d),i.pop(),i.pop(),o.pop(),o.pop(),A.appendChild(s)},I=s(h.L,r,o,i),E=I[0],S=I[1];if(E instanceof Array)for(y=0;y<E.length;y+=1)S&&S.push(y),C(E[y],y,S),S&&S.pop();else if("object"==typeof E)for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(S&&S.push(T),C(E[T],T,S),S&&S.pop());else if("string"==typeof E)for(y=0;y<E.length;y+=1)S&&S.push(y),C(E[y],y,S),S&&S.pop();else if("number"==typeof E)for(y=0;y<E;y+=1)S&&S.push(y),C(y,y,S),S&&S.pop();return A}if(h.V===l.TEMPLATE_IS){var x=d.createVirtualNode("template");x.__templateArgs={},(R=n(995)).Element.setInheritSlots(x);var k=s(h.N,r,o,i)[0],P=x.__templateArgs.key=c(k),D=e(P);if(D){var O=s(h.D,r,o,i)[0];g(e,x,D.C,O,[],[],d)}return x}if(h.V===l.INCLUDE){var N=d.createVirtualNode("include");return(R=n(995)).Element.setInheritSlots(N),N}if(h.V===l.SHADOW_ROOT){var R=n(995);u=d=R.ShadowRoot.create(a)}else if(h.V===l.SLOT){var M=u=d.createVirtualNode("slot"),L=s(h.N,r,o,i)[0];(R=n(995)).Element.setSlotName(M,c(L))}else if(h.V===l.BLOCK_SLOT){M=u=d.createVirtualNode("virtual");var B=s(h.N,r,o,i)[0];M.slot=c(B)}else if(h.V===l.PURE){M=u=d.createVirtualNode("virtual");(R=n(995)).Element.setInheritSlots(M)}}else{var F=(W=t).T;u=d.tagNameUsed(F)||F.indexOf("-")>=0?d.createComponent(F,void 0,W.G):d.createNativeNode(F)}if(u instanceof(R=n(995)).Element){var W,j=t.SD;if(void 0!==j){u.__templateArgs||(u.__templateArgs={});var U=s(j,r,o,i)[0];u.__templateArgs.scopeData=U}if((W=t).EA)for(var V in W.EA)u.setAttribute(V,W.EA[V]);var G=W.A;G&&p(u,G,r,o,i);var $=t.C;$&&g(e,u,$,r,o,i,d)}return u},m=function(e,t,n,r,o,i,s,l,d){if(n)for(var u=0;u<n.length;u+=1){var p=n[u];if(null!=p)if(void 0===p.S)y(e.childNodes[u],t,p,r,o,i,s,l,d);else{var h=a(p.S,r,o,i,s,l,!1);if(h){var f=h[0];e.childNodes[u].textContent=c(f)}}}},y=function(e,t,r,o,i,s,d,u,h){if(void 0!==r.V){var v=r;if(v.V===l.IF){for(var A=function(r,a){var s=h.createVirtualNode("wx:if");s.__templateArgs={},n(995).Element.setInheritSlots(s),s.__templateArgs.key=r,a&&g(t,s,a,o,i,u,h),e.parentNode.replaceChild(s,e)},b=v.B,w=0;w<b.length;w+=1){var C=b[w];if(a(C.B,o,i,s,d,u,!0)[0])return void(e.__templateArgs.key===w?y(e,t,C,o,i,s,d,u,h):A(w,C.C))}return void(-1!==e.__templateArgs.key&&A(-1))}if(v.V===l.FOR){var I=e.__templateArgs.keyList,E=e.__templateArgs.keyList=[],S=v.K,T=function(e){"*this"===S?E.push(e):E.push(null==e?void 0:e[S])},x=function(e,n,r,a,c,l){i.push(e),i.push(n),d.push(r),d.push(!!c||void 0),u.push(a),u.push(null);var p=v.C;m(l,t,p,o,i,s,d,u,h),u.pop(),u.pop(),d.pop(),d.pop(),i.pop(),i.pop()},k=a(v.L,o,i,s,d,u,!0),P=k[0],D=k[1],O=k[2],N=!1,R=[];if(P instanceof Array)for(w=0;w<P.length;w+=1)T(P[w]),R.push({item:P[w],index:w});else if("object"==typeof P)for(var M in N=!0,P)T(P[M]),R.push({item:P[M],index:M});else if("string"==typeof P)for(w=0;w<P.length;w+=1)T(P[w]),R.push({item:P[w],index:w});else if("number"==typeof P)for(w=0;w<P;w+=1)T(w),R.push({item:w,index:w});var L=f(I,E,R),B=L.children,F=L.indexChanged,W=L.inserts,j=L.removes;for(w=0;w<B.length;w+=1){var U=B[w];if(U){var V=void 0;!0===D?V=!0:D&&(V=D[U.index]),O&&O.push(U.index),x(U.item,U.index,V,O,N||F[w],e.childNodes[w]),O&&O.pop()}}return void function(e,t,n,r,o,i){for(var a=n.childNodes,s=[],c=0;c<t.length;c+=1){var l=t[c];s.push({node:void 0!==l.oldIndex?a[l.oldIndex]:null,before:l.pos>=0?a[l.pos]:void 0,index:l.index})}for(c=0;c<e.length;c+=1){var d=a[h=e[c]];n.removeChild(d)}for(c=0;c<s.length;c+=1){var u=s[c],p=u.before,h=u.index;if(null===(d=s[c].node)){var f=r[h],g=f.item,_=f.index;o&&o.push(_),d=i(g,_,o),o&&o.pop()}n.insertBefore(d,p)}}(j,W,e,R,O,(function(e,r,a){var s=h.createVirtualNode("wx:for-item");return n(995).Element.setInheritSlots(s),i.push(e),i.push(r),u.push(a),u.push(null),g(t,s,v.C,o,i,u,h),u.pop(),u.pop(),i.pop(),i.pop(),s}))}if(v.V===l.TEMPLATE_IS){if((z=a(v.N,o,i,s,d,u,!1))&&e.__templateArgs.key!==z[0]){var G=_(t,v,o,i,u,null,h);e.parentNode.replaceChild(G,e)}else{var $=e.__templateArgs.key,H=t($),Z=a(v.D,o,i,s,d,u,!0),Q=Z[0],Y=Z[1];m(e,t,H.C,Q,[],Y,[],[],h)}return}if(v.V===l.SLOT){if(z=a(v.N,o,i,s,d,u,!1))(q=n(995)).Element.setSlotName(e,c(z[0]))}else{if(v.V===l.INCLUDE)return;var z;v.V===l.BLOCK_SLOT&&(z=a(v.N,o,i,s,d,u,!1))&&(e.slot=c(z[0]))}}var q=n(995);if(e instanceof q.Element){var J=r.A;J&&p(e,J,o,i,u,s,d),(B=r.C)&&m(e,t,B,o,i,s,d,u,h)}},v=function(){return{P:"",C:[{V:l.SLOT,N:"",C:[]}]}},A=function(){function e(e,t,r,o){if(this.data=t,this.innerData=r,"string"==typeof e.template){var i=n(995);this.genObjectGroup=i.precompileTemplate(e.template).content[""]}else{var a=e.template||{content:v};this.genObjectGroup=a.content}this.updateMode=""}return e.create=function(t,n,r,o){return new e(t,n,r,o)},e.prototype.createInstance=function(e,t){var r=new b;r.template=this;var o=r.template.genObjectGroup("");r.genObject={V:l.SHADOW_ROOT,C:o.C},r.bindingMap=o.BM;var i=n(995);r.data=i.dataUtils.deepCopy(this.data),r.idMap=Object.create(null);var a=Object.create(null);a[""]=null;var s=w(e,r.genObject,r.data,r.idMap,a);if(null===a[""]&&s.childNodes.length>0){var c=document.createElement("virtual");s.appendChild(c),a[""]=c}return r.shadowRoot=s,r.slots=a,r.listeners=[],r},e}(),b=function(){function e(){}return e.prototype.updateValues=function(e,t,n,r,o,i){if(!this.bindingMapInstance){var a={};for(var l in this.bindingMap)if(Object.prototype.hasOwnProperty.call(this.bindingMap,l)){for(var d=this.bindingMap[l],u=new Array(d.length),p=0;p<d.length;p+=1){for(var h=d[p],f=e.shadowRoot,g=this.genObject,_=null,m=0;m<h.length;m+=1){var y=h[m];if("number"!=typeof y){_=y;break}f=f.childNodes[y],g=g.C[y]}var v=null===_?g.S:g.A[_];_&&("id"===_||_.indexOf(":")>=0)?u[p]=[f,"illegal-update:"+_,v]:u[p]=[f,_,v]}a[l]=u}this.bindingMapInstance=a}var A=this.bindingMapInstance;for(p=0;p<n.length;p+=1){var b=A[n[p][0]];if(void 0!==b)for(m=0;m<b.length;m+=1){var w=b[m],C=w[0],I=(_=w[1],v=w[2],s(v,t,null,null)[0]);null!==_?"boolean"==typeof I?!0===I?C.setAttribute(_,""):C.removeAttribute(_):C.setAttribute(_,c(I)):C.textContent=c(I)}}},e}(),w=function(e,t,r,o,i){var a,d=!1;if(void 0!==t.V){var u=t;if(u.V===l.SHADOW_ROOT&&(a=document.createDocumentFragment(),d=!0),u.V===l.SLOT)return i[""]=document.createElement("virtual")}else{var p=t,h=p.T;a=document.createElement(h);var f=p.A,g=function(t){if(!Object.prototype.hasOwnProperty.call(f,t))return"continue";var i=f[t],l=s(i,r,null,null)[0];if("id"===t)o[c(l)]=a;else{var d=t.split(":",2),u=d[0],p=d[1];if(p){if("bind"===u){var h=c(l);n(995).addListenerToElement(a,p,(function(t){var n;if("object"==typeof e){var r=e[h];"function"==typeof r&&(n=r.call(e,t))}return n}))}}else"boolean"==typeof l?!0===l?a.setAttribute(t,""):a.removeAttribute(t):a.setAttribute(u,c(l))}};for(var _ in f)g(_)}var m=t.C;if(1===m.length&&m[0].V===l.SLOT)d||(i[""]=a);else for(var y=0;y<m.length;y+=1){var v=m[y];if(void 0===v.S){var A=w(e,v,r,o,i);a.appendChild(A)}else{var b=s(v.S,r,null,null)[0];A=document.createTextNode(c(b));a.appendChild(A)}}return a},C=function(){return{P:"",C:[{V:l.SLOT,N:"",C:[]}]}},I=function(e,t,r){for(var o=e.childNodes,i=0;i<o.length;i+=1){var a=o[i];a instanceof n(995).Element&&(a.__id&&(t[a.__id]=a),void 0!==a.__slotName&&(r[a.__slotName]=a),I(a,t,r))}},E=function(){function e(e,t,r,o){if(this.data=t,this.innerData=r,"string"==typeof e.template){var i=n(995);this.genObjectGroup=i.precompileTemplate(e.template).content[""],this.updateMode=""}else{var a=e.template||{content:C};this.genObjectGroup=a.content,this.updateMode=a.updateMode||""}}return e.create=function(t,n,r,o){return"native"===o.renderingMode?new A(t,n,r,o):new e(t,n,r,o)},e.prototype.createInstance=function(e,t){var r=new S;r.template=this;var o=r.template.genObjectGroup("");r.genObject={V:l.SHADOW_ROOT,C:o.C},""!==this.updateMode&&"bindingMap"!==this.updateMode||(r.bindingMap=o.BM,"bindingMap"===this.updateMode&&(r.forceBindingMapUpdate=!0));var i=n(995);return r.data=i.dataUtils.deepCopy(this.data),r.idMap=Object.create(null),r.slots=Object.create(null),r.shadowRoot=_(r.template.genObjectGroup,r.genObject,this.innerData,[],[],e,null),I(r.shadowRoot,r.idMap,r.slots),r.listeners=[],r},e}(),S=function(){function e(){}return e.prototype.updateValues=function(e,t,n,r,o,i){if(this.forceBindingMapUpdate)this.tryBindingMapUpdate(e,t,n);else if(!(n.length<=1&&this.bindingMap&&this.tryBindingMapUpdate(e,t,n))){for(var a=Object.create(null),s=0;s<n.length;s+=1)for(var c=n[s],l=a,d=0;d<c.length;d+=1){var u=c[d];if(!0===l[u])break;if(d===c.length-1){l[u]=!0;break}l[u]||(l[u]=Object.create(null)),l=l[u]}y(this.shadowRoot,this.template.genObjectGroup,this.genObject,t,[],a,[],[],e.shadowRoot)}},e.prototype.tryBindingMapUpdate=function(e,t,n){if(!this.bindingMapInstance){var r={};for(var o in this.bindingMap)if(Object.prototype.hasOwnProperty.call(this.bindingMap,o)){for(var i=this.bindingMap[o],a=new Array(i.length),l=0;l<i.length;l+=1){for(var d=i[l],u=e.shadowRoot,p=this.genObject,f=null,g=0;g<d.length;g+=1){var _=d[g];if("number"!=typeof _){f=_;break}u=u.childNodes[_],p=p.C[_]}var m=null===f?p.S:p.A[f];a[l]=[u,f,m]}r[o]=a}this.bindingMapInstance=r}var y=this.bindingMapInstance;for(l=0;l<n.length;l+=1){if(1!==(v=n[l]).length)return!1;if(void 0===(A=y[v[0]]))return!1}for(l=0;l<n.length;l+=1){var v,A=y[(v=n[l])[0]];for(g=0;g<A.length;g+=1){var b=A[g],w=b[0];f=b[1],m=b[2];if(null!==f)h(w,f,m,t);else{var C=s(m,t,null,null)[0];w.textContent=c(C)}}}return!0},e}()}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(674)})()},995:e=>{var t=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,n,r){var o=r(1),i=r(3),a=r(5),s=r(6),c=r(7),l=r(8),d=r(9),u=r(15),p=r(12),h=r(17),f=r(18),g=r(19),_=r(16),m=r(10),y=r(20),v=r(14),A=r(21),b=r(4),w=r(13),C=r(22);n.FreeTmpl=C,n.precompileTemplate=C.precompiler?C.precompiler.compile:null,n.precompiler=C.precompiler?C.precompiler:null,n.HtmlLLParser=C.htmlParser?C.htmlParser:null,n.LLParser=o,n.dataPath=c,n.dataUtils=a,n.Event=s,n.Element=d,n.TextNode=p,n.NativeNode=h,n.VirtualNode=f,n.ShadowRoot=g,n.Behavior=l,n.Component=u,n.Observer=m,n.DataGroup=_,n.ElementIterator=y,n.FakeDomElement=v,n.registerBehavior=l.create,n.registerElement=u.register,n.createElement=u.create,n.createTextNode=p.create,n.createVirtualNode=f.create,n.appendChild=d.appendChild,n.insertBefore=d.insertBefore,n.removeChild=d.removeChild,n.replaceChild=d.replaceChild,n.addListenerToElement=s.addListenerToElement,n.removeListenerFromElement=s.removeListenerFromElement,n.triggerEvent=s.triggerEvent,n.triggerRender=A.triggerRender,n.safeCallback=i.safeCallback,n.addGlobalErrorListener=i.addGlobalErrorListener,n.removeGlobalErrorListener=i.removeGlobalErrorListener,n.addGlobalWarningListener=i.addGlobalWarningListener,n.removeGlobalWarningListener=i.removeGlobalWarningListener,n.globalOptions=b,n.globalState=w,u._setDefaultTemplateEngine(C);var I=n.updateDefaultComponent=function(){delete u._list[""],u.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})};I(),n.initBackend=function(){I()};var E=function(e){var n="";if(e instanceof t.Element&&(e.id&&(n+=' id="'+e.id+'"'),e.slot&&(n+=' slot="'+e.slot+'"'),e.__slotName&&(n+=' name="'+e.__slotName+'"'),e.classList&&(n+=' class="'+e.class+'"'),"dom"===b.documentBackend&&e.$$&&e.$$.getAttribute("style")&&(n+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof t.VirtualNode)return n;if(e instanceof t.Component)return u.listPublicProperties(e).forEach((function(t){n+=" "+t+"="+JSON.stringify(e[t])})),n;for(var r=e.attributes,o=0;o<r.length;o++)n+=" "+r[o].name+'="'+r[o].value+'"';return n},S=n.dumpElementToString=function(e,n,r){var o=null;"dom"===b.documentBackend&&(o=window);var i=0,a="";for(i=r=r||0;i;i--)a+="  ";var s="";if(e instanceof t.Element)s+=a+"<"+("dom"===b.documentBackend&&e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+E(e)+">",s+=e instanceof t.VirtualNode?" [Exp-Virtual]":e instanceof t.NativeNode?" [Exp-Native]":" [Exp-Component]",s+="\n"+S(n?e.__wxSlotChildren:e.childNodes,n,r+1);else if(e instanceof t.TextNode)s+=a+e.textContent+" [Exp-Text]\n";else if(o&&o.HTMLElement&&e instanceof o.HTMLElement)s+=a+"<"+e.tagName.toLowerCase()+E(e)+"> [DOM-Element]",s+="\n"+S(n&&e.__wxSlotChildren||e.childNodes,n,r+1);else if(o&&o.Text&&e instanceof o.Text)s+=a+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(i=0;i<e.length;i++)s+=S(e[i],n,r);else s=a+"[unknown node]\n";return s};n.dumpElement=function(e,t){console.log(S(e,t))}},function(e,t,n){var r=null,o=function(){},i=o.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return r.llparser_create_descriptor(e,1)},s=function(e,t){var n=r.llparser_create_descriptor(e,0),o=!1;"^"===t[0]&&(o=!0);for(var i=o?1:0;i<t.length;i++){var a=t.charCodeAt(i);if("-"===t[i+1]){var s=t.charCodeAt(i+2);a<=s?(r.llparser_descriptor_add_range(n,a,s),i+=2):r.llparser_descriptor_add_char(n,a)}else r.llparser_descriptor_add_char(n,a)}return o&&r.llparser_descriptor_revert(n),n};o.create=function(e,t,i){r||(r=n(2));var c=new o;i=i||16384;var l=c._llp=r.llparser_create(i,128,128),d={},u={},p="";for(p in d.ALL=r.llparser_create_descriptor(l,0),r.llparser_descriptor_set_all(d.ALL),d.NULL=r.llparser_create_descriptor(l,0),r.llparser_descriptor_set_nil(d.NULL),e)d[p]=a(l);for(p in e)for(var h=e[p],f=d[p],g=0;g<h.length;g++){for(var _=h[g].id,m=h[g].states,y=[],v=0;v<m.length;v++){var A=m[v];d[A]||(d[A]=s(l,A)),y.push(d[A])}var b=0;"_raw"===_?b=1:"_jump"===_?b=65536:"_blank"===_&&(b=65537);var w=r.llparser_add_rule(l,b,f,y.length,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7]);0===b&&(u[w]=t[_])}return r.llparser_prepare(l),c._inputPtr=r.llparser_get_input_buffer(l),c._resultPtr=r.llparser_get_result(l),c._stateIdMap=d,c._ruleCbMap=u,c._charCountLimit=i,c};o.prototype.parse=function(e,t){var n=Date.now();(function(e,t,n,r){for(var o=r>e.length?e.length:r,i=0;i<o;i++)t[n+i]=e.charCodeAt(i);t[n+o]=0})(t,new Uint16Array(r.memory.buffer),this._inputPtr>>1,this._charCountLimit),i.copyIn=i.copyIn+Date.now()-n,n=Date.now();var o=r.llparser_parse(this._llp,this._stateIdMap[e]);if(i.parse=i.parse+Date.now()-n,n=Date.now(),o)throw new Error("Parsing failed at character position "+(o-1)+' near "'+t.slice(o-20,o)+'"');var a=function(e,t,n,r,o){for(var i=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,c=o.pos,l=!1,d=!1,u=!1;;){var p=t[c],h=t[c+1];if(h<0?(d=!0,h=-h-1):d=!1,p>=0){u=!0;var f=n.slice(p,h);s.c.push(f),l=d}else{if(-1===p&&0===h)break;u=!1;var g=-p,_=h,m={i:s.c.length-(l?1:0),r:g,n:d,cc:_,c:[]};if(l){var y=s.c.length-1,v=s.c[y];m.c.push(v),s.c[y]=m}else s.c.push(m);i.push(s),s=m,l=!1}if(!u||!l)for(;s.c.length===s.cc;){l=s.n;var A=i.pop();if(A.c[s.i]=r[s.r].call(e,s.c),s=A,l)break}c+=2}return a.c[0]}(this,new Int32Array(r.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return i.constructOut=i.constructOut+Date.now()-n,a},o.prototype.destroy=function(){r.llparser_destroy(this._llp)},e.exports=o},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t,n){return m.llparser_create(e,t,n)}function o(e){m.llparser_destroy(e)}function i(e,t){return m.llparser_create_descriptor(e,t)}function a(e){m.llparser_descriptor_set_all(e)}function s(e){m.llparser_descriptor_set_nil(e)}function c(e,t){m.llparser_descriptor_add_char(e,t)}function l(e,t,n){m.llparser_descriptor_add_range(e,t,n)}function d(e){m.llparser_descriptor_revert(e)}function u(e,t,n,r,o,i,a,s,c,l,d,u){return m.llparser_add_rule(e,t,n,r,o,i,a,s,c,l,d,u)}function p(e){m.llparser_prepare(e)}function h(e,t){return m.llparser_parse(e,t)}function f(e){return m.llparser_get_input_buffer(e)}function g(e){return m.llparser_get_result(e)}function _(){m.wasm_main()}n.r(t),n.d(t,"llparser_create",(function(){return r})),n.d(t,"llparser_destroy",(function(){return o})),n.d(t,"llparser_create_descriptor",(function(){return i})),n.d(t,"llparser_descriptor_set_all",(function(){return a})),n.d(t,"llparser_descriptor_set_nil",(function(){return s})),n.d(t,"llparser_descriptor_add_char",(function(){return c})),n.d(t,"llparser_descriptor_add_range",(function(){return l})),n.d(t,"llparser_descriptor_revert",(function(){return d})),n.d(t,"llparser_add_rule",(function(){return u})),n.d(t,"llparser_prepare",(function(){return p})),n.d(t,"llparser_parse",(function(){return h})),n.d(t,"llparser_get_input_buffer",(function(){return f})),n.d(t,"llparser_get_result",(function(){return g})),n.d(t,"wasm_main",(function(){return _})),n.d(t,"memory",(function(){return y}));var m=n(1),y=m.memory;m.__wbindgen_start()},function(e,t,n){"use strict";n.r(t),n.d(t,"memory",(function(){return i})),n.d(t,"rust_calloc",(function(){return a})),n.d(t,"rust_free",(function(){return s})),n.d(t,"llparser_create",(function(){return c})),n.d(t,"llparser_destroy",(function(){return l})),n.d(t,"llparser_create_descriptor",(function(){return d})),n.d(t,"llparser_descriptor_set_all",(function(){return u})),n.d(t,"llparser_descriptor_set_nil",(function(){return p})),n.d(t,"llparser_descriptor_add_char",(function(){return h})),n.d(t,"llparser_descriptor_add_range",(function(){return f})),n.d(t,"llparser_descriptor_revert",(function(){return g})),n.d(t,"llparser_add_rule",(function(){return _})),n.d(t,"llparser_prepare",(function(){return m})),n.d(t,"llparser_parse",(function(){return y})),n.d(t,"llparser_get_input_buffer",(function(){return v})),n.d(t,"llparser_get_result",(function(){return A})),n.d(t,"wasm_main",(function(){return b})),n.d(t,"__wbindgen_start",(function(){return w}));var r=new ArrayBuffer(1114112),o=function(e,t,n){function r(e){var t=0,n=0,r=0,o=0,i=0,c=0,l=0;n=(t=e+-8|0)+(e=-8&(o=f[e+-4>>2]))|0;e:{t:{n:{r:{o:if(!(1&o)){if(!(3&o))break r;if(e=(o=f[t>>2])+e|0,(0|(t=t-o|0))==f[262246]){if(3!=(3&f[n+4>>2]))break o;return f[262244]=e,f[n+4>>2]=-2&f[n+4>>2],f[t+4>>2]=1|e,void(f[e+t>>2]=e)}o>>>0>=256?s(t):(0|(r=f[t+8>>2]))==(0|(i=f[t+12>>2]))?(c=1048576,l=f[262144]&u(o>>>3),f[c>>2]=l):(f[r+12>>2]=i,f[i+8>>2]=r)}if(2&(o=f[n+4>>2]))f[n+4>>2]=-2&o,f[t+4>>2]=1|e,f[e+t>>2]=e;else{o:{if(f[262247]!=(0|n)){if((0|n)!=f[262246])break o;return f[262246]=t,e=f[262244]+e|0,f[262244]=e,f[t+4>>2]=1|e,void(f[e+t>>2]=e)}if(f[262247]=t,e=f[262245]+e|0,f[262245]=e,f[t+4>>2]=1|e,(0|t)==f[262246]&&(f[262244]=0,f[262246]=0),(n=f[262254])>>>0>=e>>>0)break r;if(!(e=f[262247]))break r;i:if(!((o=f[262245])>>>0<41))for(t=1049e3;;){if((r=f[t>>2])+f[t+4>>2]>>>0>e>>>0&&r>>>0<=e>>>0)break i;if(!(t=f[t+8>>2]))break}if(r=4095,e=f[262252]){for(t=0;t=t+1|0,e=f[e+8>>2];);r=t>>>0>4095?t:4095}if(f[262256]=r,o>>>0<=n>>>0)break r;return void(f[262254]=-1)}if(e=(r=-8&o)+e|0,r>>>0>=256?s(n):(0|(r=f[n+12>>2]))==(0|(n=f[n+8>>2]))?(c=1048576,l=f[262144]&u(o>>>3),f[c>>2]=l):(f[n+12>>2]=r,f[r+8>>2]=n),f[t+4>>2]=1|e,f[e+t>>2]=e,f[262246]==(0|t)){f[262244]=e;break r}}if(e>>>0<256)break n;if(a(t,e),e=f[262256]+-1|0,f[262256]=e,!e){if(e=f[262252])break t;e=4095;break e}}return}return e=1048584+((n=e>>>3)<<3)|0,o=f[262144],n=1<<(31&n),r=f[e+8>>2],o&n||(f[262144]=n|o,r=e),n=r,f[e+8>>2]=t,f[n+12>>2]=t,f[t+12>>2]=e,void(f[t+8>>2]=n)}for(t=0;t=t+1|0,e=f[e+8>>2];);e=t>>>0>4095?t:4095}f[262256]=e}function o(e,t,n,r,i){var a;if(A=a=A-48|0,f[a+44>>2]=e,f[a+40>>2]=t,f[a+36>>2]=n,f[a+32>>2]=r,f[a+28>>2]=i,f[f[a+40>>2]>>2]!=f[a+36>>2])for(f[f[a+40>>2]>>2]=f[a+36>>2],f[a+24>>2]=f[f[a+40>>2]+136>>2],f[a+20>>2]=1&(0!=f[a+28>>2]^-1^-1);f[a+24>>2];){for(f[a+20>>2]||(f[a+28>>2]=f[a+24>>2]),f[a+16>>2]=f[f[f[a+24>>2]>>2]+8>>2],1==f[f[a+16>>2]+4>>2]&&o(f[a+44>>2],f[a+16>>2],f[a+36>>2],f[a+32>>2],f[a+28>>2]),f[a+12>>2]=0;!(f[a+12>>2]>=128);)g[f[a+12>>2]+(f[a+16>>2]+8|0)|0]&&(m[f[a+28>>2]>>2]>=m[f[a+32>>2]+(f[a+12>>2]<<2)>>2]&&f[f[a+32>>2]+(f[a+12>>2]<<2)>>2]||(f[f[a+32>>2]+(f[a+12>>2]<<2)>>2]=f[f[a+28>>2]>>2])),f[a+12>>2]=f[a+12>>2]+1;f[a+24>>2]=f[f[a+24>>2]+4>>2]}A=a+48|0}function i(e,t,n,r){var o;for(f[44+(o=A-48|0)>>2]=e,f[o+40>>2]=t,f[o+36>>2]=n,f[o+32>>2]=r,f[o+28>>2]=f[f[o+40>>2]+136>>2];f[o+28>>2];){if(f[o+24>>2]=f[f[f[o+28>>2]>>2]+8>>2],f[o+24>>2]==f[o+40>>2])for(f[o+20>>2]=f[f[f[o+28>>2]>>2]+12>>2],f[o+16>>2]=0;!(f[o+16>>2]>=128);){e:{if(1!=f[f[o+20>>2]+4>>2]){if(!g[f[o+16>>2]+(f[o+20>>2]+8|0)|0])break e}else if(f[o+12>>2]=f[f[o+44>>2]+32>>2]+((f[o+20>>2]-f[f[o+44>>2]+24>>2]|0)/140<<9),!f[f[o+12>>2]+(f[o+16>>2]<<2)>>2])break e;m[f[o+28>>2]>>2]>=m[f[o+32>>2]+(f[o+16>>2]<<2)>>2]&&f[f[o+32>>2]+(f[o+16>>2]<<2)>>2]||(f[f[o+32>>2]+(f[o+16>>2]<<2)>>2]=f[f[o+28>>2]>>2])}f[o+16>>2]=f[o+16>>2]+1}f[o+28>>2]=f[f[o+28>>2]+4>>2]}}function a(e,t){var n=0,r=0,o=0,i=0;f[e+16>>2]=0,f[e+20>>2]=0,o=e,n=0,(r=t>>>8)&&(n=31,t>>>0>16777215||(n=62+((t>>>(6-(r=v(r))&31)&1)-(r<<1)|0)|0)),f[o+28>>2]=n,o=1048848+(n<<2)|0;e:{t:{n:{r:{if((i=f[262145])&(r=1<<(31&n))){if(r=f[o>>2],(-8&f[r+4>>2])!=(0|t))break r;n=r;break n}f[262145]=r|i,f[o>>2]=e,f[e+24>>2]=o;break e}for(o=t<<(31==(0|n)?0:25-(n>>>1)&31);;){if(!(n=f[(i=16+((o>>>29&4)+r|0)|0)>>2]))break t;if(o<<=1,r=n,(-8&f[n+4>>2])==(0|t))break}}return t=f[n+8>>2],f[t+12>>2]=e,f[n+8>>2]=e,f[e+24>>2]=0,f[e+12>>2]=n,void(f[e+8>>2]=t)}f[i>>2]=e,f[e+24>>2]=r}f[e+12>>2]=e,f[e+8>>2]=e}function s(e){var t,n=0,r=0,o=0,i=0,a=0,s=0;t=f[e+24>>2];e:{t:{if((0|e)==(0|(n=f[e+12>>2]))){if(o=f[(n=e+20|0)>>2],r=f[(o?20:16)+e>>2])break t;n=0;break e}r=f[e+8>>2],f[r+12>>2]=n,f[n+8>>2]=r;break e}for(o=o?n:e+16|0;i=o,(r=f[(o=(n=r)+20|0)>>2])||(o=n+16|0,r=f[n+16>>2]),r;);f[i>>2]=0}e:if(t){r=1048848+(f[e+28>>2]<<2)|0;t:{if((0|e)==f[r>>2]){if(f[r>>2]=n,n)break t;return a=1048580,s=f[262145]&u(f[e+28>>2]),void(f[a>>2]=s)}if(f[(f[t+16>>2]==(0|e)?16:20)+t>>2]=n,!n)break e}f[n+24>>2]=t,(r=f[e+16>>2])&&(f[n+16>>2]=r,f[r+24>>2]=n),(e=f[e+20>>2])&&(f[n+20>>2]=e,f[e+24>>2]=n)}}function c(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,n=0,r=0,o=0,i=0,c=0,l=0,h=0,g=0,_=0,y=0;e:{t:{n:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(o=-8&(e=e+11|0),!(h=f[262145]))break n;n=0-o|0,l=0,(e>>>=8)&&(l=31,o>>>0>16777215||(l=62+((o>>>(6-(e=v(e))&31)&1)-(e<<1)|0)|0));r:{o:{if(e=f[1048848+(l<<2)>>2]){for(i=o<<(31==(0|l)?0:25-(l>>>1)&31);;){if(!((c=-8&f[e+4>>2])>>>0<o>>>0||(c=c-o|0)>>>0>=n>>>0||(r=e,n=c))){n=0;break o}if(c=f[e+20>>2],e=f[16+((i>>>29&4)+e|0)>>2],t=c&&(0|c)!=(0|e)?c:t,i<<=1,!e)break}if(t){e=t;break o}if(r)break r}if(r=0,!(e=(0-(e=2<<(31&l))|e)&h))break n;if(!(e=f[1048848+(d(e&0-e)<<2)>>2]))break n}for(;r=(c=(i=(t=-8&f[e+4>>2])-o|0)>>>0<n>>>0&t>>>0>=o>>>0)?e:r,n=c?i:n,e=(t=f[e+16>>2])||f[e+20>>2];);if(!r)break n}if(n>>>0>=(e=f[262244])-o>>>0&&e>>>0>=o>>>0)break n;s(r);r:if(n>>>0>=16){if(f[r+4>>2]=3|o,f[4+(t=r+o|0)>>2]=1|n,f[t+n>>2]=n,n>>>0>=256){a(t,n);break r}e=1048584+((n>>>=3)<<3)|0,i=f[262144],n=1<<(31&n),l=f[e+8>>2],i&n||(f[262144]=n|i,l=e),n=l,f[e+8>>2]=t,f[n+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=n}else e=n+o|0,f[r+4>>2]=3|e,f[4+(e=e+r|0)>>2]=1|f[e+4>>2];return r+8|0}r:{o:{if(!(3&(e=(t=f[262144])>>>(r=31&(n=(o=e>>>0<11?16:e+11&-8)>>>3))))){if(o>>>0<=m[262244])break n;if(e)break o;if(!(e=f[262145]))break n;for(t=f[1048848+(d(e&0-e)<<2)>>2],n=(-8&f[t+4>>2])-o|0,i=t;;){if(!(e=f[t+16>>2])&&!(e=f[t+20>>2]))break r;n=(t=(r=(-8&f[e+4>>2])-o|0)>>>0<n>>>0)?r:n,i=t?e:i,t=e}}n=(e=f[1048592+(c=(r=n+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(i=f[e+8>>2]))==(0|(c=c+1048584|0))?(_=1048576,y=u(r)&t,f[_>>2]=y):(f[i+12>>2]=c,f[c+8>>2]=i),t=r<<3,f[e+4>>2]=3|t,f[4+(e=e+t|0)>>2]=1|f[e+4>>2];break t}return r=d(0-(e=(n=e<<r)&(0-(e=2<<r)|e))&e),e=f[1048592+(i=r<<3)>>2],(0|(n=f[e+8>>2]))==(0|(i=i+1048584|0))?(_=1048576,y=u(r)&t,f[_>>2]=y):(f[n+12>>2]=i,f[i+8>>2]=n),i=e+8|0,f[e+4>>2]=3|o,n=(t=r<<3)-o|0,f[4+(c=e+o|0)>>2]=1|n,f[e+t>>2]=n,(e=f[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=f[262246],o=f[262144],r=1<<(31&r),l=f[e+8>>2],o&r||(f[262144]=r|o,l=e),r=l,f[e+8>>2]=t,f[r+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=r),f[262246]=c,f[262244]=n,i}return s(i),n>>>0>=16?(f[i+4>>2]=3|o,f[4+(c=o+i|0)>>2]=1|n,f[n+c>>2]=n,(e=f[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=f[262246],o=f[262144],r=1<<(31&r),l=f[e+8>>2],o&r||(f[262144]=r|o,l=e),r=l,f[e+8>>2]=t,f[r+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=r),f[262246]=c,f[262244]=n):(e=n+o|0,f[i+4>>2]=3|e,f[4+(e=e+i|0)>>2]=1|f[e+4>>2]),i+8|0}n:{r:{o:{i:{if((t=f[262244])>>>0<o>>>0){if((e=f[262245])>>>0>o>>>0)break e;if(n=0,-1==(0|(t=p((e=o+65583|0)>>>16))))break t;if(!(r=t<<16))break t;if(e=(i=-65536&e)+f[262248]|0,f[262248]=e,t=f[262249],f[262249]=t>>>0>e>>>0?t:e,!(n=f[262247]))break i;for(e=1049e3;;){if((0|r)==((t=f[e>>2])+(c=f[e+4>>2])|0))break o;if(!(e=f[e+8>>2]))break}break r}return e=f[262246],(r=t-o|0)>>>0<=15?(f[262246]=0,f[262244]=0,f[e+4>>2]=3|t,o=4+(t=e+t|0)|0,n=1|f[t+4>>2]):(f[262244]=r,n=e+o|0,f[262246]=n,f[n+4>>2]=1|r,f[e+t>>2]=r,n=3|o,o=e+4|0),f[o>>2]=n,e+8|0}for((e=f[262255])>>>0<=r>>>0&&e||(f[262255]=r),e=0,f[262256]=4095,f[262251]=i,f[262250]=r,f[262253]=0;t=e+1048584|0,f[e+1048592>>2]=t,f[e+1048596>>2]=t,256!=(0|(e=e+8|0)););f[262247]=r,e=i+-40|0,f[262245]=e,f[r+4>>2]=1|e,f[4+(e+r|0)>>2]=40,f[262254]=2097152;break n}if(!(f[e+12>>2]|r>>>0<=n>>>0|t>>>0>n>>>0)){f[e+4>>2]=i+c,t=(e=f[262247])+15&-8,f[262247]=t+-8,n=8+((r=i+f[262245]|0)+(e-t|0)|0)|0,f[262245]=n,f[t+-4>>2]=1|n,f[4+(e+r|0)>>2]=40,f[262254]=2097152;break n}}e=f[262255],f[262255]=e>>>0<r>>>0?e:r,t=r+i|0,e=1049e3;r:{for(;;){if((0|t)!=f[e>>2]){if(e=f[e+8>>2])continue;break r}break}if(!f[e+12>>2]){f[e>>2]=r,f[e+4>>2]=i+f[e+4>>2],f[r+4>>2]=3|o,i=r+o|0,o=(t-r|0)-o|0;o:{i:{if((0|t)!=f[262247]){if(f[262246]==(0|t))break i;if(1==(3&(e=f[t+4>>2]))&&((n=-8&e)>>>0>=256?s(t):(0|(c=f[t+12>>2]))==(0|(l=f[t+8>>2]))?(_=1048576,y=f[262144]&u(e>>>3),f[_>>2]=y):(f[l+12>>2]=c,f[c+8>>2]=l),o=n+o|0,t=t+n|0),f[t+4>>2]=-2&f[t+4>>2],f[i+4>>2]=1|o,f[o+i>>2]=o,o>>>0>=256){a(i,o);break o}e=1048584+((t=o>>>3)<<3)|0,n=f[262144],t=1<<(31&t),l=f[e+8>>2],n&t||(f[262144]=t|n,l=e),n=l,f[e+8>>2]=i,f[n+12>>2]=i,f[i+12>>2]=e,f[i+8>>2]=n;break o}f[262247]=i,e=f[262245]+o|0,f[262245]=e,f[i+4>>2]=1|e;break o}f[262246]=i,e=f[262244]+o|0,f[262244]=e,f[i+4>>2]=1|e,f[e+i>>2]=e}return r+8|0}}for(e=1049e3;!((t=f[e>>2])>>>0<=n>>>0&&(c=t+f[e+4>>2]|0)>>>0>n>>>0);)e=f[e+8>>2];for(f[262247]=r,e=i+-40|0,f[262245]=e,f[r+4>>2]=1|e,f[4+(e+r|0)>>2]=40,f[262254]=2097152,f[(t=(e=(c+-32&-8)-8|0)>>>0<n+16>>>0?n:e)+4>>2]=27,e=f[262250],l=f[262251],g=f[262253],f[(h=t+16|0)>>2]=f[262252],f[h+4>>2]=g,f[t+8>>2]=e,f[t+12>>2]=l,f[262251]=i,f[262250]=r,f[262252]=t+8,f[262253]=0,e=t+28|0;f[e>>2]=7,c>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|n)&&(f[t+4>>2]=-2&f[t+4>>2],e=t-n|0,f[n+4>>2]=1|e,f[t>>2]=e,e>>>0>=256?a(n,e):(e=1048584+((t=e>>>3)<<3)|0,r=f[262144],t=1<<(31&t),l=f[e+8>>2],r&t||(f[262144]=t|r,l=e),t=l,f[e+8>>2]=n,f[t+12>>2]=n,f[n+12>>2]=e,f[n+8>>2]=t))}if(n=0,!((e=f[262245])>>>0<=o>>>0))break e}return n}return t=e-o|0,f[262245]=t,r=(e=f[262247])+o|0,f[262247]=r,f[r+4>>2]=1|t,f[e+4>>2]=3|o,e+8|0}(e))|!(3&g[t+-4|0])||function(e,t){if(t)for(;h[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(y(e|=0,t|=0))}function l(){}function d(e){return e?31-v(e+-1^e)|0:32}function u(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function p(t){t|=0;var r=0|n.byteLength/65536,o=r+t|0;if(r<o&&o<65536){var i=new ArrayBuffer(y(o,65536)),a=new e.Int8Array(i);a.set(h),h=a,h=new e.Int8Array(i),new e.Int16Array(i),f=new e.Int32Array(i),g=new e.Uint8Array(i),_=new e.Uint16Array(i),m=new e.Uint32Array(i),new e.Float32Array(i),new e.Float64Array(i),n=i}return r}var h=new e.Int8Array(n),f=(new e.Int16Array(n),new e.Int32Array(n)),g=new e.Uint8Array(n),_=new e.Uint16Array(n),m=new e.Uint32Array(n),y=(new e.Float32Array(n),new e.Float64Array(n),e.Math.imul),v=(e.Math.fround,e.Math.abs,e.Math.clz32),A=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);return{memory:Object.create(Object.prototype,{grow:{value:p},buffer:{get:function(){return n}}}),rust_calloc:c,rust_free:function(e){r(e|=0)},llparser_create:function(e,t,n){return 0|function(e,t,n){var r,o,i;return A=r=A-32|0,f[r+28>>2]=e,f[r+24>>2]=t,f[r+20>>2]=n,e=r,t=f[r+28>>2]?f[r+28>>2]:256,f[e+28>>2]=t,e=r,t=f[r+24>>2]?f[r+24>>2]:256,f[e+24>>2]=t,e=r,t=f[r+20>>2]?f[r+20>>2]:256,f[e+20>>2]=t,o=r,i=c(((((((y(f[r+24>>2],140)+52|0)+y(f[r+20>>2],44)|0)+(f[r+24>>2]<<9)|0)+(f[r+24>>2]<<9)|0)+y(f[r+20>>2],f[r+24>>2]<<3)|0)+(f[r+28>>2]<<1)|0)+(f[r+28>>2]<<3)|0,1),f[o+16>>2]=i,f[f[r+16>>2]+12>>2]=f[r+28>>2],f[f[r+16>>2]+16>>2]=f[r+24>>2],f[f[r+16>>2]+20>>2]=f[r+20>>2],f[f[r+16>>2]+4>>2]=0,f[f[r+16>>2]>>2]=0,f[f[r+16>>2]+8>>2]=0,f[r+12>>2]=f[r+16>>2]+52,f[f[r+16>>2]+24>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+y(f[r+24>>2],140),f[f[r+16>>2]+28>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+y(f[r+20>>2],44),f[f[r+16>>2]+32>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+(f[r+24>>2]<<9),f[f[r+16>>2]+36>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+(f[r+24>>2]<<9),f[f[r+16>>2]+40>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+y(f[r+20>>2],f[r+24>>2]<<3),f[f[r+16>>2]+44>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+(f[r+28>>2]<<1),f[f[r+16>>2]+48>>2]=f[r+12>>2],A=r+32|0,f[r+16>>2]}(e|=0,t|=0,n|=0)},llparser_destroy:function(e){!function(e){var t;A=t=A-16|0,f[t+12>>2]=e,r(f[t+12>>2]),A=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var n,r;return f[12+(n=A-16|0)>>2]=e,f[n+8>>2]=t,t=f[f[n+12>>2]+24>>2],r=f[n+12>>2],e=f[r+4>>2],f[r+4>>2]=e+1,f[n+4>>2]=t+y(e,140),f[f[n+4>>2]+4>>2]=f[n+8>>2]?1:0,f[n+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+4>>2]=-1,h[f[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+4>>2]=-2,h[f[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var n;f[12+(n=A-16|0)>>2]=e,f[n+8>>2]=t,h[f[n+8>>2]+(f[n+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,n){!function(e,t,n){var r;for(f[12+(r=A-16|0)>>2]=e,f[r+8>>2]=t,f[r+4>>2]=n,f[r>>2]=f[r+8>>2];!(f[r>>2]>f[r+4>>2]);)h[f[r>>2]+(f[r+12>>2]+8|0)|0]=1,f[r>>2]=f[r>>2]+1}(e|=0,t|=0,n|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(f[12+(t=A-16|0)>>2]=e,f[t+8>>2]=1;!(f[t+8>>2]>=127);)h[f[t+8>>2]+(f[t+12>>2]+8|0)|0]=1&(0!=g[f[t+8>>2]+(f[t+12>>2]+8|0)|0]^-1),f[t+8>>2]=f[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,n,r,o,i,a,s,c,l,d,u){return 0|function(e,t,n,r,o,i,a,s,c,l,d,u){var p;return A=p=A+-64|0,f[p+60>>2]=e,f[p+56>>2]=t,f[p+52>>2]=n,f[p+48>>2]=r,f[p+44>>2]=o,f[p+40>>2]=i,f[p+36>>2]=a,f[p+32>>2]=s,f[p+28>>2]=c,f[p+24>>2]=l,f[p+20>>2]=d,f[p+16>>2]=u,t=f[f[p+60>>2]+28>>2],n=f[p+60>>2],e=f[n>>2],f[n>>2]=e+1,f[p+12>>2]=t+y(e,44),f[f[p+12>>2]>>2]=f[p+52>>2],f[f[p+12>>2]+4>>2]=f[p+48>>2],f[p+48>>2]>0&&(f[f[p+12>>2]+8>>2]=f[p+44>>2]),f[p+48>>2]>1&&(f[f[p+12>>2]+12>>2]=f[p+40>>2]),f[p+48>>2]>2&&(f[f[p+12>>2]+16>>2]=f[p+36>>2]),f[p+48>>2]>3&&(f[f[p+12>>2]+20>>2]=f[p+32>>2]),f[p+48>>2]>4&&(f[f[p+12>>2]+24>>2]=f[p+28>>2]),f[p+48>>2]>5&&(f[f[p+12>>2]+28>>2]=f[p+24>>2]),f[p+48>>2]>6&&(f[f[p+12>>2]+32>>2]=f[p+20>>2]),f[p+48>>2]>7&&(f[f[p+12>>2]+36>>2]=f[p+16>>2]),f[f[p+12>>2]+40>>2]=f[p+56>>2],f[p+48>>2]>0&&function(e,t,n){var r;f[28+(r=A-32|0)>>2]=e,f[r+24>>2]=t,f[r+20>>2]=n,f[r+16>>2]=(f[r+20>>2]-f[f[r+28>>2]+24>>2]|0)/140,1==f[f[r+20>>2]+4>>2]&&(t=f[f[r+28>>2]+40>>2],n=f[r+28>>2],e=f[n+8>>2],f[n+8>>2]=e+1,f[r+12>>2]=t+(e<<3),f[f[r+12>>2]>>2]=f[r+24>>2],f[f[r+12>>2]+4>>2]=f[f[r+20>>2]+136>>2],f[f[r+20>>2]+136>>2]=f[r+12>>2])}(f[p+60>>2],f[p+12>>2],f[p+52>>2]),A=p- -64|0,f[p+12>>2]}(e|=0,t|=0,n|=0,r|=0,o|=0,i|=0,a|=0,s|=0,c|=0,l|=0,d|=0,u|=0)},llparser_prepare:function(e){!function(e){var t;for(A=t=A-32|0,f[t+28>>2]=e,f[t+24>>2]=0;!(f[t+24>>2]>=f[f[t+28>>2]+4>>2]);)f[t+20>>2]=f[f[t+28>>2]+24>>2]+y(f[t+24>>2],140),1==f[f[t+20>>2]+4>>2]&&o(f[t+28>>2],f[t+20>>2],f[t+20>>2],f[f[t+28>>2]+32>>2]+(f[t+24>>2]<<9)|0,0),f[t+24>>2]=f[t+24>>2]+1;for(f[t+16>>2]=0;!(f[t+16>>2]>=f[f[t+28>>2]+4>>2]);)f[t+12>>2]=f[f[t+28>>2]+24>>2]+y(f[t+16>>2],140),1==f[f[t+12>>2]+4>>2]&&(f[f[t+12>>2]>>2]=0,i(f[t+28>>2],f[t+12>>2],f[t+12>>2],f[f[t+28>>2]+36>>2]+(f[t+16>>2]<<9)|0)),f[t+16>>2]=f[t+16>>2]+1;A=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var n,r,o;return A=n=A-32|0,f[n+24>>2]=e,f[n+20>>2]=t,f[n+16>>2]=0,f[n+12>>2]=0,r=n,o=function e(t,n,r,o,i,a,s){var c,l=0,d=0;A=c=A-96|0,f[c+88>>2]=t,f[c+84>>2]=n,f[c+80>>2]=r,f[c+76>>2]=o,f[c+72>>2]=i,f[c+68>>2]=a,f[c+64>>2]=s,f[c+60>>2]=_[f[c+80>>2]+(f[f[c+76>>2]>>2]<<1)>>1],m[c+60>>2]>=128&&(f[c+60>>2]=1);e:if(f[f[c+72>>2]>>2]>(f[c+64>>2]-4|0))f[c+92>>2]=-1;else if(1==f[f[c+84>>2]+4>>2])if(f[c+56>>2]=f[f[c+76>>2]>>2],f[c+52>>2]=f[f[c+72>>2]>>2],f[c+48>>2]=0,f[c+44>>2]=0,f[c+40>>2]=f[f[c+88>>2]+32>>2]+((f[c+84>>2]-f[f[c+88>>2]+24>>2]|0)/140<<9),f[c+36>>2]=0,!f[f[c+40>>2]+(f[c+60>>2]<<2)>>2]|m[c+60>>2]<=0|m[c+60>>2]>=127?!f[c+60>>2]|!f[f[c+40>>2]+508>>2]?f[f[c+40>>2]>>2]&&(f[c+36>>2]=f[f[c+40>>2]>>2]):f[c+36>>2]=f[f[c+40>>2]+508>>2]:f[c+36>>2]=f[f[c+40>>2]+(f[c+60>>2]<<2)>>2],f[c+36>>2]){for(f[c+68>>2]||f[f[c+36>>2]+40>>2]||(f[c+48>>2]=f[f[c+72>>2]>>2],t=f[c+72>>2],f[t>>2]=f[t>>2]+2),f[c+32>>2]=0;f[c+32>>2]<f[f[c+36>>2]+4>>2];){if(f[c+28>>2]=f[c+68>>2],f[c+68>>2]||!f[f[c+36>>2]+40>>2]|f[f[c+36>>2]+40>>2]==(f[c+32>>2]+65536|0)||(f[c+28>>2]=1),l=c,d=e(f[c+88>>2],f[(f[c+36>>2]+8|0)+(f[c+32>>2]<<2)>>2],f[c+80>>2],f[c+76>>2],f[c+72>>2],f[c+28>>2],f[c+64>>2]),f[l+24>>2]=d,f[c+24>>2]<0){f[c+92>>2]=-1;break e}f[c+68>>2]|f[f[c+36>>2]+40>>2]!=(f[c+32>>2]+65536|0)||(f[c+44>>2]=f[c+24>>2]),f[c+32>>2]=f[c+32>>2]+1}for(f[c+68>>2]||(f[f[c+36>>2]+40>>2]?1==f[f[c+36>>2]+40>>2]&&(n=f[c+56>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n,f[c+44>>2]=f[f[c+72>>2]>>2],n=f[f[c+76>>2]>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n):(f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]<<2)>>2]=0-f[c+36>>2],f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]+1<<2)>>2]=f[f[c+36>>2]+4>>2],f[c+44>>2]=f[c+48>>2]+1));;){if(f[f[c+72>>2]>>2]>(f[c+64>>2]-4|0)){f[c+92>>2]=-1;break e}if(f[c+20>>2]=f[f[c+88>>2]+36>>2]+((f[c+84>>2]-f[f[c+88>>2]+24>>2]|0)/140<<9),f[c+16>>2]=0,f[c+60>>2]=_[f[c+80>>2]+(f[f[c+76>>2]>>2]<<1)>>1],m[c+60>>2]>=128&&(f[c+60>>2]=1),!f[f[c+20>>2]+(f[c+60>>2]<<2)>>2]|m[c+60>>2]<=0|m[c+60>>2]>=127?!f[c+60>>2]|!f[f[c+20>>2]+508>>2]||(f[c+16>>2]=f[f[c+20>>2]+508>>2]):f[c+16>>2]=f[f[c+20>>2]+(f[c+60>>2]<<2)>>2],!f[c+16>>2])break;for(f[c+68>>2]||(f[f[c+16>>2]+40>>2]?65536!=f[f[c+16>>2]+40>>2]&&(f[f[c+72>>2]>>2]=f[c+52>>2]):(f[f[f[c+88>>2]+48>>2]+(f[c+44>>2]<<2)>>2]=(0-f[f[f[c+88>>2]+48>>2]+(f[c+44>>2]<<2)>>2]|0)-1,f[c+48>>2]=f[f[c+72>>2]>>2],t=f[c+72>>2],f[t>>2]=f[t>>2]+2)),f[c+12>>2]=1;f[c+12>>2]<f[f[c+16>>2]+4>>2];){if(f[c+8>>2]=f[c+68>>2],f[c+68>>2]||!f[f[c+16>>2]+40>>2]|f[f[c+16>>2]+40>>2]==(f[c+12>>2]+65536|0)||(f[c+8>>2]=1),l=c,d=e(f[c+88>>2],f[(f[c+16>>2]+8|0)+(f[c+12>>2]<<2)>>2],f[c+80>>2],f[c+76>>2],f[c+72>>2],f[c+8>>2],f[c+64>>2]),f[l+4>>2]=d,f[c+4>>2]<0){f[c+92>>2]=-1;break e}f[c+68>>2]|f[f[c+16>>2]+40>>2]!=(f[c+12>>2]+65536|0)||(f[c+44>>2]=f[c+4>>2]),f[c+12>>2]=f[c+12>>2]+1}f[c+68>>2]||(f[f[c+16>>2]+40>>2]?1==f[f[c+16>>2]+40>>2]&&(n=f[c+56>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n,f[c+44>>2]=f[f[c+72>>2]>>2],n=f[f[c+76>>2]>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n):(f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]<<2)>>2]=0-f[c+16>>2],f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]+1<<2)>>2]=f[f[c+16>>2]+4>>2],f[c+44>>2]=f[c+48>>2]+1))}f[c+92>>2]=f[c+44>>2]}else f[c+92>>2]=-1;else{if(f[c+60>>2]&&(-1==f[f[c+84>>2]+4>>2]&&(t=f[c+76>>2],f[t>>2]=f[t>>2]+1),!f[f[c+84>>2]+4>>2])){if(!g[f[c+60>>2]+(f[c+84>>2]+8|0)|0]){f[c+92>>2]=-1;break e}t=f[c+76>>2],f[t>>2]=f[t>>2]+1}f[c+68>>2]||(n=f[f[c+76>>2]>>2],r=f[f[c+84>>2]+4>>2],o=f[f[c+88>>2]+48>>2],i=f[c+72>>2],t=f[i>>2],f[i>>2]=t+1,f[o+(t<<2)>>2]=n-(-2==(0|r)?0:1),n=f[f[c+76>>2]>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n),f[c+92>>2]=f[f[c+72>>2]>>2]-1}return A=c+96|0,f[c+92>>2]}(f[n+24>>2],f[n+20>>2],f[f[n+24>>2]+44>>2],n+12|0,n+16|0,0,f[f[n+24>>2]+12>>2]<<1),f[r+8>>2]=o,e=f[f[n+24>>2]+48>>2],t=f[n+16>>2],f[n+16>>2]=t+1,f[e+(t<<2)>>2]=-1,e=f[f[n+24>>2]+48>>2],t=f[n+16>>2],f[n+16>>2]=t+1,f[e+(t<<2)>>2]=0,_[f[f[n+24>>2]+44>>2]+(f[n+12>>2]<<1)>>1]|f[n+8>>2]<0?f[n+28>>2]=f[n+12>>2]+1:f[n+28>>2]=0,A=n+32|0,f[n+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+48>>2]},wasm_main:l,__wbindgen_start:l}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,r),i=o.memory,a=o.rust_calloc,s=o.rust_free,c=o.llparser_create,l=o.llparser_destroy,d=o.llparser_create_descriptor,u=o.llparser_descriptor_set_all,p=o.llparser_descriptor_set_nil,h=o.llparser_descriptor_add_char,f=o.llparser_descriptor_add_range,g=o.llparser_descriptor_revert,_=o.llparser_add_rule,m=o.llparser_prepare,y=o.llparser_parse,v=o.llparser_get_input_buffer,A=o.llparser_get_result,b=o.wasm_main,w=o.__wbindgen_start}])},function(e,t,n){var r=n(4),o=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};o.create=function(e){return new o(e)},o.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},o.prototype.remove=function(e){var t=this._arr,n=0;if("function"==typeof e)for(n=0;n<t.length;n++){var r=t[n].func;if(r===e)return t.splice(n,1),this.empty=!t.length,r}else for(n=0;n<t.length;n++)if(t[n].id===e){var o=t[n].func;return t.splice(n,1),this.empty=!t.length,o}return null},o.prototype.call=function(e,t,n){for(var r=this._arr,o=!1,i=0;i<r.length;i++){!1===a(this._type,r[i].func,e,t,n)&&(o=!0)}if(o)return!1};var i=function(e,t){if(!t.type||!1!==s.call(null,[e,t])){if(r.throwGlobalError)throw e;console.error(e.stack)}},a=o.safeCallback=function(e,t,n,r,o){try{return t.apply(n,r)}catch(s){var a="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";n&&n.is&&(a+=n.is),a+="#"+(t.name||"(anonymous)"),o&&o.triggerLifeTime("error",[s]),i(s,{message:a,type:e,element:n,method:t,args:r})}},s=o.create();o.addGlobalErrorListener=function(e){return s.add(e)},o.removeGlobalErrorListener=function(e){return s.remove(e)};var c=null;o.addGlobalWarningListener=function(e){return(c=o.create()).add(e)},o.removeGlobalWarningListener=function(e){if(c){var t=c.remove(e);return c.empty&&(c=null),t}return null},o.hasGlobalWarningListeners=function(){return!!c},o.triggerWarning=function(e){var t="[Exparser] [Warning] [Component] "+e;c.call(null,[t],null)},e.exports=o},function(e,t){var n={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,styleScope:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"undefined"!=typeof window&&"undefined"!=typeof document?"dom":"none",hasDOMBackend:!("undefined"==typeof window||"undefined"==typeof document),customContext:null};e.exports=n},function(e,t){var n=Object.prototype.hasOwnProperty,r=function(e,t){var o=typeof e;if("object"===o&&null!==e){var i=t?t.get(e):void 0;if(void 0!==i)return i;if(e instanceof Array){i=[],t&&t.set(e,i);for(var a=0;a<e.length;a++)i[a]=r(e[a],t)}else for(var s in i={},t&&t.set(e,i),e)n.call(e,s)&&(i[s]=r(e[s],t));return i}if("symbol"!==o)return e};t.deepCopy=function(e,t){var n=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return r(e,n)}},function(e,t,n){var r=n(3),o=(Object.prototype.hasOwnProperty,function(){});o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}});var i=null;o._setElementSystem=function(e){i=e,o._setElementSystem=null};var a=null;o._setComponent=function(e){a=e,o._setComponent=null};var s=Date.now();o.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},o.getInitTimeStamp=function(e){return s},o.create=function(e,t,n){var r=(n=n||{}).originalEvent,i=n.extraFields||{},a=Date.now()-s,c=new o;for(var l in c.currentTarget=null,c.type=e,c.timeStamp=a,c.mark=null,c.detail=t,c.bubbles=!!n.bubbles,c.composed=!!n.composed,c.__originalEvent=r,c.__hasCapture=!!n.capturePhase,c.__stopped=!1,c.__dispatched=!1,i)c[l]=i[l];return c},o.prototype.preventDefault=function(){this.__originalEvent&&this.__originalEvent.preventDefault()},o.prototype.stopPropagation=function(){this.__stopped=!0},o.prototype.isStopped=function(){return!!this.__stopped},o.prototype.markMutated=function(){this.__mutatedMarked=!0},o.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var c=function(e,t,n,r){for(var o=e,a=e instanceof i?e.collectMarks():{},s=[],c=[],l=e;l;){if(o!==l&&(s.push(e),e=l,c.push(a),a=e instanceof i?e.collectMarks():{}),o=l.parentNode,!1===r(l,e,a))return;if(l.__wxHost){if(n)break;e=s.pop()||l.__wxHost,a=c.pop()||(e instanceof i?e.collectMarks():{}),o=l=l.__wxHost}else{var d=!0;l instanceof i&&(d=!1),l=d||n?l.parentNode:l.__wxSlotParent}}};o.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&((e=e.__wxElement).shadowRoot instanceof i&&(e=e.shadowRoot)),t.target=e instanceof i?e.__methodCaller:e;var n=function(e,n,r){if(!(n&&n.length&&t.mutatedMarked())){var o=t.currentTarget=r instanceof i?r.__methodCaller:r,s=e.call(o,[t],r instanceof a?r:void 0);n&&n.length&&t.markMutated(),!1===s&&(t.__originalEvent&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},r=t.type,o=!t.composed;if(t.__hasCapture){var s=[];c(e,0,o,(function(e,t,n){return e.__wxCaptureEvents&&e.__wxCaptureEvents[r]&&s.push([e,t,n]),!0}));for(var l=s.length-1;l>=0;l--){var d=s[l],u=d[0],p=d[1];t.target=p instanceof i?p.__methodCaller:p,t.mark=d[2];var h=u.__wxCaptureMutated&&u.__wxCaptureMutated[r];if(n(u.__wxCaptureEvents[r],h,u),t.__stopped)break}}if(t.target=e instanceof i?e.__methodCaller:e,!t.__stopped){var f=!t.bubbles;c(e,0,o,(function(e,o,a){t.target=o instanceof i?o.__methodCaller:o,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[r];return e.__wxEvents&&e.__wxEvents[r]&&n(e.__wxEvents[r],s,e),!f&&!t.__stopped}))}}},o.triggerEvent=function(e,t,n,r){var i=o.create(t,n,r);o.dispatchEvent(e,i)},o.addListenerToElement=function(e,t,n,o){var i=o&&o.mutated;if(i){var s=n;n=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var c=void 0;return o&&(o.useCapture||o.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=r.create("Event Listener")),c=e.__wxCaptureEvents[t].add(n),i&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(c))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=r.create("Event Listener")),c=e.__wxEvents[t].add(n),i&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(c))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,n,o]),c},o.removeListenerFromElement=function(e,t,n,r){var o=null;if(r&&(r.useCapture||r.capture))e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(o=e.__wxCaptureEvents[t].remove(n)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(i=e.__wxCaptureMutated[t].indexOf(n))&&e.__wxCaptureMutated[t].splice(i,1);else if(e.__wxEvents&&e.__wxEvents[t]&&(o=e.__wxEvents[t].remove(n)),e.__wxMutated&&e.__wxMutated[t]){var i;-1!==(i=e.__wxMutated[t].indexOf(n))&&e.__wxMutated[t].splice(i,1)}o&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,o,r])},e.exports=o},function(e,t,n){var r=n(1),o=" \n\r\t\f",i=null;t.parseMultiPaths=function(e){return i||(i=r.create({MULTIPLE_PATHS:[{id:"arrayConcat",states:["MULTIPLE_PATHS",",","SINGLE_PATH"]},{id:"array",states:["SINGLE_PATH"]}],SINGLE_PATH:[{id:"arrayConcat",states:["SINGLE_PATH",".","VAR_NAME"]},{id:"arrayConcat",states:["SINGLE_PATH","[","INT","]"]},{id:"array",states:["VAR_NAME"]},{id:"_jump",states:["SINGLE_PATH",o]}],VAR_NAME:[{id:"_blank",states:[o,"VAR_NAME"]},{id:"_jump",states:["VAR_NAME",o]},{id:"_raw",states:["*","*"]},{id:"_raw",states:["_a-zA-Z$","VAR_NAME_AFTER"]}],VAR_NAME_AFTER:[{id:"_raw",states:["_a-zA-Z0-9$","VAR_NAME_AFTER"]},{id:"_raw",states:["NULL"]}],INT:[{id:"_blank",states:[o,"INT"]},{id:"_jump",states:["INT",o]},{id:"toNumber",states:["0-9","INT_AFTER"]}],INT_AFTER:[{id:"_raw",states:["0-9","INT_AFTER"]},{id:"_raw",states:["NULL"]}]},{arrayConcat:function(e){return e[0].push(e[2]),e[0]},array:function(e){return e},toNumber:function(e){return parseInt(e[0]+e[1],10)}})),i.parse("MULTIPLE_PATHS",e)},t.parseSinglePath=function(e){for(var t=e.length,n=[],r="",o=0,i=!1,a=!1,s=0;s<t;s++){var c=e[s];if("\\"===c)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1]||"\\"===e[s+1])?(r+=e[s+1],s++):r+="\\";else if("."===c)r&&(n.push(r),r="");else if("["===c){if(r&&(n.push(r),r=""),0===n.length)throw new Error("The path string should not start with []: "+e);a=!0,i=!1}else if("]"===c){if(!i)throw new Error("There should be digits inside [] in the path string: "+e);a=!1,n.push(o),o=0}else if(a){if(c<"0"||c>"9")throw new Error("Only digits (0-9) can be put inside [] in the path string: "+e);i=!0,o=10*o+c.charCodeAt(0)-48}else r+=c}if(r&&n.push(r),0===t)throw new Error("The path string should not be empty");return n}},function(e,t,n){var r=n(3),o=n(4),i=n(7),a=["created","ready","cacheAttached","attached","moved","detached","route","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],c=function(){},l=i.parseMultiPaths,d=function(){};d.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(null===t||t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0};var u=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},p=function(e){var t={};for(var n in e)t[n]=e[n];return t},h=function(e,t){for(var n in t)hasOwnProperty.call(e,n)?(r.hasGlobalWarningListeners()&&"_"===n.charAt(0)&&r.triggerWarning('data field "'+n+'" from different behaviors is overriding or merging.'),"object"!=typeof e[n]||"object"!=typeof t[n]||null===t[n]||t[n]instanceof Array?e[n]=t[n]:(e[n]instanceof Array?e[n]=u(e[n]):e[n]=p(e[n]),h(e[n],t[n]))):e[n]=t[n]};d.create=function(e){var t=new d;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:o.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:o.lazyRegistration)||d.prepare(t),e.is&&(d._list[e.is]=t),t},d.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.ancestors,o="",i=0;for(i=0;i<(t.behaviors||[]).length;i++){var u=t.behaviors[i],p=u;for(o in"string"==typeof p&&(p=d._list[u],r.hasGlobalWarningListeners()&&(p instanceof d||r.triggerWarning('behavior "'+u+'" is not found (when preparing behavior "'+e.is+'").'))),p._unprepared&&d.prepare(p),"object"==typeof p.data&&(null===e.data?e.data=p.data:h(e.data,p.data)),p.generics){var f=p.generics[o];"object"!=typeof f&&(f={}),e.generics[o]={default:f.default}}for(o in p.properties)r.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&r.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.properties[o]=p.properties[o];for(o in p.relations)e.relations[o]=p.relations[o];for(o in p.methods)r.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&r.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.methods[o]=p.methods[o];for(var g=0;g<p.ancestors.length;g++)n.indexOf(p.ancestors[g])<0&&n.push(p.ancestors[g])}for(o in"object"==typeof t.data&&(null===e.data?e.data=t.data:h(e.data,t.data)),t.properties){r.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&r.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").');var _=t.properties[o];s.indexOf(_)>=0?_={type:_}:s.indexOf(_.type)<0&&_.optionalTypes&&_.optionalTypes.length>0&&(_.type=_.optionalTypes[0]),r.hasGlobalWarningListeners()&&s.indexOf(_.type)<0&&r.triggerWarning('the type of property "'+o+'" is illegal (when preparing behavior "'+e.is+'").'),void 0===_.value&&(_.type===String?_.value="":_.type===Number?_.value=0:_.type===Boolean?_.value=!1:_.type===Array?_.value=[]:_.value=null),e.properties[o]={type:_.type,optionalTypes:_.optionalTypes,value:_.value,filter:_.filter,observer:_.observer,public:!!(void 0===_.public?e.options.publicProperties:_.public),availability:_.availability,observeAssignments:!!_.observeAssignments}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(o in t.lifetimes)e.lifetimes[o]=t.lifetimes[o];for(i=0;i<a.length;i++)void 0===e.lifetimes[a[i]]&&(e.lifetimes[a[i]]=t[a[i]]);for(o in t.listeners)e.listeners[o]=t.listeners[o];var m=t.observers;if(m instanceof Array)for(i=0;i<m.length;i++){var y=m[i];e.observers.push({paths:l(y.fields||"**"),observer:y.observer})}else for(o in m)e.observers.push({paths:l(o),observer:m[o]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(o in t.pageLifetimes)e.pageLifetimes[o]=t.pageLifetimes[o];for(o in t.relations){var v=t.relations[o];e.relations[o]={target:v.target||o,type:v.type,linked:v.linked||c,linkChanged:v.linkChanged||c,unlinked:v.unlinked||c,linkFailed:v.linkFailed||c}}for(o in t.methods)"function"==typeof t.methods[o]&&(r.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&r.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.methods[o]=t.methods[o]);n.push(e)}},d._list=Object.create(null),d.prototype.hasBehavior=function(e){this._unprepared&&d.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof d){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===d._list[e])return!0;return!1},d.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var r=this.ancestors[n];for(var o in r.listeners)Object.prototype.hasOwnProperty.call(e,o)?e[o].push(r.listeners[o]):e[o]=[r.listeners[o]]}return e},d.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,n=0;n<t.length;n++)for(var r=this.ancestors[n].observers,o=0;o<r.length;o++){var i=r[o];e.addObserver(i.observer,i.paths)}},d.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=r.create("Lifetime Method")}));for(var n=0;n<t.length;n++){var o=t[n];for(var i in o.lifetimes)o.lifetimes[i]&&(e[i]||(e[i]=r.create("Lifetime Method")),e[i].add(o.lifetimes[i]))}return e},d.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var o=t[n];for(var i in o.pageLifetimes)o.pageLifetimes[i]&&(e[i]||(e[i]=r.create("Page Lifetime Method")),e[i].add(o.pageLifetimes[i]))}return e},d.callDefinitionFilter=function(e){var t=e.definitionFilter,n=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?d._list[t]:t)&&t.definitionFilter&&(n.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,n)}:null},e.exports=d},function(e,t,n){var r=n(3),o=n(6),i=n(10),a=n(11),s=n(12),c=n(14),l=n(4),d=n(13),u=function(e){p(this,e||null)};u.prototype=Object.create(Object.prototype,{constructor:{value:u,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var n=this.ownerShadowRoot.__wxHost;n.__idCacheDirty=!0,this.__domElement&&n.__componentOptions.writeIdToDOM&&("dom"===l.documentBackend?this.__domElement.id=t:"custom"===l.documentBackend&&this.__domElement.setId(t))}l.writeExtraInfoToAttr&&this.__domElement&&"dom"===l.documentBackend&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){if(e=String(e),this.__slot!==e){if(this.__inheritSlots)return void(r.hasGlobalWarningListeners()&&r.triggerWarning('slots-inherited nodes do not support "slot" attribute.'));this.__slot=e,b(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})}},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return k.call(this,e)},configurable:!0}}),o._setElementSystem(u),a._setElementSystem(u);var p=u.initialize=function(e,t,n){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=d.backendExtractedDefault,e.__domElement=t,e.__autoDestroy=!0,e.$$=t,t&&(t.__wxElement=e)};u._clone=function(e,t,n,r){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var o in t.__marks)e.__marks[o]=t.__marks[o];for(var i in e.__attributes=Object.create(null),t.__attributes)e.__attributes[i]=t.__attributes[i];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=d.backendExtractedDefault,e.__domElement=n,e.$$=n,n&&(n.__wxElement=e)},u.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},u.prototype.destroy=function(){"custom"!==l.documentBackend||this.__virtual||(this.__domElement.release(),this.__domElement=null)};var h=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof u){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof u&&t(e.shadowRoot);for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r])}};t(e)}},f=function(e){if(e.__attached){var t=function(e){if(e instanceof u){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r]);e.shadowRoot instanceof u&&t(e.shadowRoot),e.__attached=!1,e.__autoDestroy&&e.destroy(),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}else e.__autoDestroy&&e.destroy()};t(e)}},g=function(e){if(!e.__attached)return h(e);var t=function(e){if(e instanceof u){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r]);e.shadowRoot instanceof u&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)},_=function(e,t,n){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var r,o=[n];r="add"===t?{type:"childList",target:e,addedNodes:o}:"remove"===t?{type:"childList",target:e,removedNodes:o}:{type:"childList",target:e,addedNodes:o,removedNodes:o},i._callObservers(e,"__childObservers",r)}},m=function(e,t){if(e instanceof u&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var n=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var r=e.childNodes,o=0;o<r.length;o++){var i=r[o];i instanceof u&&n(i)}};n(e)}};u._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var n=e.__idCache=Object.create(null),r=function(e){e.__id&&(n[e.__id]||(n[e.__id]=e));for(var t=e.childNodes,o=0;o<t.length;o++)t[o]instanceof u&&r(t[o])};r(t)}};var y=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t,n=e.__wxHost,o=Object.create(null);t=void 0!==n.__singleSlot?{"":n.__singleSlot}:n.__slots;var i=function(e){void 0!==e.__slotName&&(o[e.__slotName]?r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+e.__slotName+'" duplication is found under a single shadow root. The first one was accepted.'):o[e.__slotName]=e);for(var t=e.childNodes,n=0;n<t.length;n++)t[n]instanceof u&&i(t[n])};i(e),void 0!==n.__singleSlot?n.__singleSlot!==o[""]&&(o[""]&&(o[""].__wxSlotChildren=n.childNodes),v(n,o,t,!0),n.__singleSlot&&(n.__singleSlot.__wxSlotChildren=[]),n.__singleSlot=o[""]||null):(v(n,o,t,!1),n.__slots=o)}},v=function(e,t,n,r){var o=e.childNodes,i=0;if(r){var a=t[""];if(a)for(;i<o.length;i++)w(a,o[i],null,!1,!1,!1,-1);else if(a=n[""])for(;i<o.length;i++)w(a,null,o[i],!0,!1,!1,i)}else{var s=function(e){for(var r=0;r<e.length;r++){var o=e[r],i=o.__slot||"",a=t[i];a?w(a,o,null,!1,!0,!0):(a=n[i])&&w(a,null,o,!0,!0,!0),o.__inheritSlots&&s(o.childNodes)}};s(o)}},A=function(e,t,n,r){for(var o=function(e,t,r){var i=e.childNodes,a=0;for(t&&(a=i.indexOf(t)+(r?0:1));a<i.length;a++){var s=i[a];if(s.__slot===n)return s;if(s.__inheritSlots){var c=o(s,null,!1);if(c)return c}}return null};t!==e;t=t.parentNode){var i=o(t.parentNode,t,r);if(i)return i;r=!1}return null},b=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var n=e.__slot||"",o=t.__slots[n];if(o){var i=A(t,e,n,!1);w(o,e,i,!1,!0,!0)}else r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+n+'" is not found.'),(o=e.__wxSlotParent)&&w(o,null,e,!0,!0,!0)}},w=function(e,t,n,r,o,i,a){if(r&&(n.__wxSlotParent=null),o&&(a=e.__wxSlotChildren.indexOf(n)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&i){var c=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(c,1),s===e&&c<a&&a--}}var d=!1;(t&&t.__backendExtracted||n&&n.__backendExtracted)&&(d=!0),"dom"===l.documentBackend?d||function(e,t,n,r,o){var i=e;if(i instanceof u){for(;i.__virtual;){var a=i.__wxSlotParent;if(!a){i=null;break}if(t&&!n){var s=a.__wxSlotChildren.indexOf(i);n=a.__wxSlotChildren[s+1]}i=a}i instanceof u&&(i=i.__domElement)}if(i){var c=r,l=null,d=null;if(t)if(t.__virtual){var p=document.createDocumentFragment(),h=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?h(n):p.appendChild(n.__domElement)}};h(t),l=p}else l=t.__domElement;if(n)if(n.__virtual){var f=e,g=0;if(r){var _=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?_(n):i.removeChild(n.__domElement)}};_(n),c=!1,g=o+1}else f=n.__wxSlotParent,g=n===t?o:f.__wxSlotChildren.indexOf(n);if(t){var m=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];if(!n.__virtual)return n;var r=m(n,0);if(r)return r}};n=null;for(var y=f;!(n=m(y,g))&&y.__virtual;y=y.__wxSlotParent)g=y.__wxSlotParent.__wxSlotChildren.indexOf(y)+1;n&&(d=n.__domElement)}}else d=n.__domElement;c?l?i.replaceChild(l,d):i.removeChild(d):l&&(d?i.insertBefore(l,d):i.appendChild(l))}else if(t&&t.__wxSlotParent){var v=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)v(e.__wxSlotChildren[t]);else{var n=e.__domElement;n&&n.parentNode&&n.parentNode.removeChild(n)}};v(t)}}(e,t,n,r,a):"custom"===l.documentBackend&&function(e,t,n,r,o){var i=e;if(i instanceof u){for(;i.__virtual;){var a=i.__wxSlotParent;if(!a){i=null;break}if(t&&!n){var s=a.__wxSlotChildren.indexOf(i);n=a.__wxSlotChildren[s+1]}i=a}i instanceof u&&(i=i.__domElement)}if(i)if(!t||n||t.__virtual){var c=l.customContext.createElement("fragment",""),d=0,p=-1;if(t){var h=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];h(n)}else c.appendChild(e.__domElement)};h(t)}if(n){var f=e,g=0,_=null;if(r){var m=function(e){if(e.__virtual){for(var t=0,n=0;n<e.__wxSlotChildren.length;n++)t+=m(e.__wxSlotChildren[n]);return t}return _||(_=e),1};d=m(n),g=o+1}else f=n.__wxSlotParent,g=n===t?o:f.__wxSlotChildren.indexOf(n);if(t&&!_)for(var y=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];if(!n.__virtual)return n;var r=y(n,0);if(r)return r}return null},v=f;!(_=y(v,g))&&v.__virtual;v=v.__wxSlotParent)g=v.__wxSlotParent.__wxSlotChildren.indexOf(v)+1;_&&(p=i.findChildPosition(_.__domElement))}i.splice(p,d,c),c.release()}else i.appendChild(t.__domElement);else if(t&&t.__wxSlotParent){for(var A=t.__wxSlotParent;A.__virtual&&(A=A.__wxSlotParent););if(A){var b=null,w=function(e){if(e.__virtual){for(var t=0,n=0;n<e.__wxSlotChildren.length;n++)t+=w(e.__wxSlotChildren[n]);return t}return b||(b=e),1};A.__domElement.splice(A.__domElement.findChildPosition(b.__domElement),w(t),null)}}}(e,t,n,r,a),l.writeExtraInfoToAttr&&"dom"===l.documentBackend&&(r&&n instanceof u&&n.__domElement&&n.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof u&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),o&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,r?1:0,t):e.__wxSlotChildren.splice(a,r?1:0))},C=function(e,t){for(var n=e.childNodes,r=0;r<n.length;r++){var o=n[r];t(e,o),o.__inheritSlots&&C(o,t)}},I=u.insertChildToElement=function(e,t,n,o){if(void 0!==e.__slotName)return!1;var a=n>=0?e.childNodes[n]:null;o&&t===a&&(o=!1);var s=null,c=e,l=e;if(t){s=t.parentNode,t.parentNode=e;var d=e.__subtreeObserversCount;if(s){var u=s.childNodes.indexOf(t);s.childNodes.splice(u,1),s===e&&u<n&&n--,d-=s.__subtreeObserversCount}d&&i._updateSubtreeCaches(t,d)}for(var p=e;p&&p.__inheritSlots;)p=p.parentNode;for(var v=!p||!p.__slots,b=!v||e.__inheritSlots,I=s;I&&I.__inheritSlots;)I=I.parentNode;var E=!I||!I.__slots,S=!E||s&&s.__inheritSlots;if(v)void 0!==e.__singleSlot&&(c=l=e.__singleSlot,r.hasGlobalWarningListeners()&&(c||r.triggerWarning("slot is not found."))),c?w(c,t,a,o,b,S,n):t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,S,!1),t&&!E&&t.__inheritSlots&&C(t,(function(e,t){w(e,t,null,!1,!0,!0,-1)}));else{var T="";if(t&&(T=t.__slot||"",c=p.__slots[T]||null,r.hasGlobalWarningListeners()&&(c||r.triggerWarning('slot "'+T+'" is not found.'))),a&&(l=p.__slots[a.__slot||""]||null),a&&l&&o&&w(l,null,a,o,!0,!1),t)if(c){var x=a?A(p,a,T,!o):A(p,e,T,!1);w(c,t,x,!1,!0,S)}else t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,S,!1);a&&o&&a.__inheritSlots&&C(a,(function(e,t){w(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&C(t,(function(t,n){var i=n.__slot||"",s=p.__slots[i]||null;if(s){var c=a?A(p,a,i,!o):A(p,e,i,!1);w(s,n,c,!1,!0,!0)}else r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+i+'" is not found.'),n.__wxSlotParent&&w(n.__wxSlotParent,null,n,!0,!0,!1)}))}return o&&(e.__subtreeObserversCount&&i._updateSubtreeCaches(a,-e.__subtreeObserversCount),a.parentNode=null),-1===n&&(n=e.childNodes.length),t?e.childNodes.splice(n,o?1:0,t):e.childNodes.splice(n,o?1:0),e.ownerShadowRoot&&(o&&m(a,e.ownerShadowRoot),t&&m(t,e.ownerShadowRoot),y(e.ownerShadowRoot)),o&&(f(a),_(e,"remove",a)),t&&(s?g(t):h(t),s===e?_(e,"move",t):(s&&_(s,"remove",t),_(e,"add",t))),!0},E=function(e,t,n,r){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var o=r?n:t,i=-1;return n&&(i=e.childNodes.indexOf(n))<0?null:I(e,t,i,r)?o:null};u._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],w(t,e,null,!1,!1,0),e.__hostAssociated=!0,y(e)},u.appendChild=function(e,t){return E(e,t,null,!1)},u.insertBefore=function(e,t,n){return E(e,t,n,!1)},u.removeChild=function(e,t){return E(e,null,t,!0)},u.replaceChild=function(e,t,n){return E(e,t,n,!0)},u.prototype.appendChild=function(e){return E(this,e,null,!1)},u.prototype.insertBefore=function(e,t){return E(this,e,t,!1)},u.prototype.removeChild=function(e){return E(this,null,e,!0)},u.prototype.replaceChild=function(e,t){return E(this,e,t,!0)};var S=function(e){var t=!0,n=!0;if(e instanceof u?(e.__backendExtracted=!0,e.$$=e.__domElement=null,n=!1):e instanceof s&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,n=!1),t&&e.__wxSlotChildren)for(var r=0;r<e.__wxSlotChildren.length;r++){var o=e.__wxSlotChildren[r];S(o)}else if(n&&e.childNodes)for(var i=0;i<e.childNodes.length;i++)S(e.childNodes[i])};u.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return S(e),t};var T=function(e,t){if(!t){var n=c.toElement(e.__domElement);return e.$$=e.__domElement=n,n}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var r=c.toElement(e.__domElement);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null},x=function(e,t,n){var r=e instanceof u&&e.__virtual,o=t?t.childNodes[n]:void 0,i=!0,a=!0,c=null;if(e instanceof u)e.__backendExtracted=!1,r||(c=T(e,o)),a=!1;else if(e instanceof s)e.__backendExtracted=!1,c=function(e,t){if(!t){var n=document.createTextNode(e.textContent);return e.$$=e.__domElement=n,n}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var r=document.createTextNode(e.textContent);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null}(e,o),i=!1,a=!1;else{var l=document.createDocumentFragment();if(l.__wxSlotChildren=e.__wxSlotChildren,o&&o.childNodes)for(;o.childNodes.length;)l.appendChild(o.childNodes[0]);c=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,o),e=l}c?(t.appendChild(c),o=c):o=t?t.childNodes[n]:void 0;var d=0;if(i&&e.__wxSlotChildren)for(var p=0;p<e.__wxSlotChildren.length;p++){var h=e.__wxSlotChildren[p];if(r)n=x(h,t,n);else if(h.asShadowRoot){for(var f=0;f<h.asShadowRoot.childNodes.length;f++)d=x(h.asShadowRoot.childNodes[f],o,d);e.shadowRoot=o,o.__wxHost=e,e.__wxSlotChildren[0]=o,o.__wxSlotParent=e,e.__singleSlot===h&&(e.__singleSlot=o)}else d=x(h,o,d)}else if(a&&e.childNodes)for(var g=0;g<e.childNodes.length;g++)d=x(e.childNodes[g],o,d);if(r)return n;for(;o.childNodes.length>d;)o.removeChild(o.childNodes[d]);return n+1};u.injectBackend=function(e,t){if(e.__backendExtracted){var n=document.createDocumentFragment();n.appendChild(t),x(e,n,0)}},u.prototype.triggerEvent=function(e,t,n){o.triggerEvent(this,e,t,n)},u.prototype.dispatchEvent=function(e){o.dispatchEvent(this,e)},u.prototype.addListener=function(e,t,n){o.addListenerToElement(this,e,t,n)},u.prototype.removeListener=function(e,t,n){o.removeListenerFromElement(this,e,t,n)},u.setMethodCaller=function(e,t){e.__methodCaller=t},u.getMethodCaller=function(e){return e.__methodCaller},u.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},u.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]!==t&&(this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute&&this.__domElement.setAttribute(e,t))},u.prototype.setStyle=function(e){this.__domElement&&"custom"===l.documentBackend&&this.__domElement.setStyle(e)},u.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&"dom"===l.documentBackend&&this.__domElement.removeAttribute(e))},u.prototype.getBoundingClientRect=function(){return this.__domElement?this.__domElement.getBoundingClientRect():{left:0,top:0,width:0,height:0}},u.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},u.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var n in t.__marks)hasOwnProperty.call(e,n)||(e[n]=t.__marks[n]);return e};var k=u.prototype.setNodeStyle=function(e,t){if(this.__styleSegments[t||0]!==e){this.__styleSegments[t||0]=e;var n=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var r=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof r)return void("dom"===l.documentBackend?this.__domElement.setAttribute("style",r.call(this,n)):"custom"===l.documentBackend&&this.__domElement.setStyle(r.call(this,n)))}this.__domElement&&("dom"===l.documentBackend?this.__domElement.setAttribute("style",n):"custom"===l.documentBackend&&this.__domElement.setStyle(n)),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})}};u.replaceDocumentElement=function(e,t,n){e.__attached||("dom"===l.documentBackend?t.parentNode.replaceChild(e.__domElement,t):"custom"===l.documentBackend&&t.replaceChild(e.__domElement,n),h(e))},u.pretendAttached=function(e){e.__attached||h(e)},u.pretendDetached=function(e){e.__attached&&f(e)},u.isAttached=function(e){return e.__attached},u.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,y(e.ownerShadowRoot))},u.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},u.getInheritSlots=function(e){return e.__inheritSlots};var P=function(e,t){var n=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!n)return null;var r=n[1].slice(1),o=n[2].split(".");return o.shift(),r||o.length?{id:r,classes:o,relation:t||""}:null},D=u.parseSelector=function(e){for(var t=String(e||"").split(","),n=[],r=!1,o=0;o<t.length;o++){for(var i=t[o].split(/( |\t|>+)/g),a=[],s="",c=0;c<i.length;c++){var l=i[c];if(l&&" "!==l&&"\t"!==l)if(">"!==l[0]){var d=P(l,s);if(s="",!d)break;a.push(d)}else{if(""!==s)break;s=l,">>>"===l&&(r=!0)}}c===i.length&&a.length&&n.push(a)}return n.length?{crossShadow:r,union:n}:null},O=function(e,t,n,r,o){if(t===e)return!1;var i=n[r],a=!0;i.id&&i.id!==t.__id&&(a=!1);for(var s=i.classes,c=0;a&&c<s.length;c++)t.classList.contains(s[c])||(a=!1);if(!a&&">"===o)return!1;var l=t;if(a&&0===r){if(null===e)return!0;for(l=l.parentNode;l;l=l.parentNode)if(l===e)return!0;if(">>>"!==o)return!1;l=t,a=!1}var d=a?i.relation:o;do{l.parentNode?l=l.parentNode:">>>"===d?l=l.__wxHost:">>>"===o?(a=!1,l=l.__wxHost):l=null,l===e&&(l=null)}while(l&&l.__virtual);if(!l)return!1;if(a){if(O(e,l,n,r-1,d))return!0;if(">>>"!==o)return!1}return O(e,l,n,r,o)},N=function(e,t,n){if(n.__virtual)return!1;for(var r=e.union,o=0;o<r.length;o++){var i=r[o];if(O(t,n,i,i.length-1,">"))return!0}return!1},R=function(e,t,n,r,o){if(N(t,n,r)&&(e.push(r),o))return!0;if(r.shadowRoot&&t.crossShadow&&((r.ownerShadowRoot?r.ownerShadowRoot.__wxHost.__componentOptions.domain:l.domain)===r.__componentOptions.domain&&R(e,t,n,r.shadowRoot,o)&&o))return!0;for(var i=r.childNodes,a=0;a<i.length;a++)if(i[a]instanceof u&&R(e,t,n,i[a],o)&&o)return!0;return!1};u.prototype.querySelector=function(e){var t="object"==typeof e?e:D(e);if(!t)return null;var n=[];return R(n,t,this,this,!0),n[0]||null},u.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:D(e),n=[];return t?(R(n,t,this,this,!1),n):[]},u.matchSelector=function(e,t){var n="object"==typeof e?e:D(e);return!!n&&N(n,null,t)},u.prototype.matchSelector=function(e,t){var n="object"==typeof e?e:D(e);return!!n&&N(n,this,t)},e.exports=u},function(e,t,n){var r=n(3),o=function(){};o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),o.create=function(e){var t=new o;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},o.prototype.observe=function(e,t){var n=0,o=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(o),subtree:t.subtree?e:null}),n++),t.childList&&(e.__childObservers||(e.__childObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(o),subtree:t.subtree?e:null}),n++),t.characterData&&(e.__textObservers||(e.__textObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(o),subtree:t.subtree?e:null}),n++),t.subtree&&i(e,n),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(o),subtree:null}))},o.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var n=e[t];n.funcArr.remove(n.id),n.subtree&&i(n.subtree,-1)}this._binded=[]};var i=o._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var n=e.childNodes;if(n)for(var r=0;r<n.length;r++)i(n[r],t)};o._callObservers=function(e,t,n){do{e[t]&&e[t].call(e,[n]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},o._callSingleObserver=function(e,t,n){e[t]&&e[t].call(e,[n])},e.exports=o},function(e,t,n){var r=n(4),o=function(){},i=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,a=null;o._setElementSystem=function(e){a=e,o._setElementSystem=null};var s=Object.prototype.hasOwnProperty;o.create=function(e,t){var n=new o;for(var r in n._prefix="",n._addOriginalClass=!1,n._alias=t,n._resolvedAlias={},t)n._resolvedAlias[r]="";return n._rawNames=[],n._elem=e,n._owner=null,n._prevGenNames="",n};var c=function(e){var t="",n=e._rawNames,r=e._prefix,o=e._owner?e._owner._resolvedAlias:null,i=e._addOriginalClass;r&&(r+="--");for(var a=0;a<n.length;a++){var c=n[a];if(a&&(t+=" "),o&&s.call(o,c))t+=o[c];else if("~"===c[0])t+=c.slice(1);else if("^"===c[0]){c=c.slice(1);for(var l=e._owner||null;"^"===c[0];)c=c.slice(1),l=l?l._owner:null;var d=l?l._prefix:"";d&&(d+="--"),t+=d+c}else i&&(t+=c+" "),t+=r+c}return t},l=function(e){var t=e._elem.__domElement;if(t){var n=c(e);if("dom"===r.documentBackend)n?t.setAttribute("class",n):t.removeAttribute("class");else if("custom"===r.documentBackend){if(e._prevGenNames===n)return;e._prevGenNames=n,t.setClass(n)}}},d=function(e){var t=e.classList;t instanceof o&&(t._alias&&u(t),l(t));for(var n=e.childNodes,r=0;r<n.length;r++)n[r]instanceof a&&d(n[r])},u=function(e){var t=e._owner;if(!t)return!1;var n=!1;for(var r in e._alias){var o=e._alias[r],i=[];if(o)for(var c=0;c<o.length;c++){var l=o[c];if(s.call(t._alias,l)){var u=t._resolvedAlias[l];i.push(u)}else{var p=e._prefix&&l?e._prefix+"--"+l:l;i.push(p)}}var h=i.join(" ");e._resolvedAlias[r]!==h&&(n=!0,e._resolvedAlias[r]=h)}n&&e._elem.shadowRoot instanceof a&&d(e._elem.shadowRoot)};o.prototype.toggle=function(e,t){var n=this._rawNames.indexOf(e);void 0===t&&(t=n<0),t?n<0&&(this._rawNames.push(e),l(this)):n>=0&&(this._rawNames.splice(n,1),l(this))},o.prototype.contains=function(e){for(var t=this._rawNames,n=0;n<t.length;n++){var r=t[n];if("~"===r[0]){if(r.slice(1)===e)return!0}else if("^"===r[0]){for(var o=1;"^"===r[o];)o++;if(r.slice(o)===e)return!0}else if(r===e)return!0}return!1},o.prototype._setOwnerOptions=function(e,t,n){var r=this._prefix;this._prefix=t,r!==t&&(this._addOriginalClass=n,this._owner=e,this._alias&&u(this),l(this))},o.prototype._setAlias=function(e,t){var n=this._owner,r=String(t).match(i);this._alias[e]=r;var o=[];if(r)for(var a=0;a<r.length;a++){var c=r[a];n&&s.call(n._alias,c)?o.push(n._resolvedAlias[c]):o.push(this._prefix?this._prefix+"--"+c:c)}this._resolvedAlias[e]=o.join(" "),d(this._elem.shadowRoot)},o.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(i)||[],l(this)},o.prototype.getClassNames=function(){return c(this)},o.prototype.getPrefix=function(){return this._prefix},o.prototype.getAddOriginalClass=function(){return this._addOriginalClass},e.exports=o},function(e,t,n){var r=n(10),o=n(4),i=n(13),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t){var n=new a;n.__slot="";var r=null;return i.backendExtractedDefault||"dom"!==o.documentBackend?"custom"===o.documentBackend?((r=o.customContext.createElement("text","")).setText(e||""),r.textContent=e,r.__wxElement=n):n.__textContent=e:(r=document.createTextNode(e||"")).__wxElement=n,n.$$=n.__domElement=r,n.__backendExtracted=i.backendExtractedDefault,n.__subtreeObserversCount=0,n.__autoDestroy=!0,n.parentNode=null,n.ownerShadowRoot=t,n};a.create=function(e){return s(e,null)},a.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},a.prototype.destroy=function(){"custom"===o.documentBackend&&(this.__domElement.release(),this.__domElement=null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){if(e=String(e),this.__domElement){if(this.__domElement.textContent===e)return;this.__domElement.textContent=e,"custom"===o.documentBackend&&this.__domElement.setText(e)}else{if(this.__textContent===e)return;this.__textContent=e}(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&r._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),e.exports=a},function(e,t){t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},function(e,t){var n=function(e){this.tagName=e,this.id="",this.attrs={}};n.toElement=function(e){var t=document.createElement(e.tagName);for(var n in e.id&&(t.id=e.id),e.attrs)t.setAttribute(n,e.attrs[n]);return t},n.fromElement=function(e){var t=new n(e.tagName);t.id=e.id;for(var r=e.attributes,o=0;o<r.length;o++)t.attrs[r[o].name]=r[o].value;return t},n.prototype.cloneNode=function(){var e=new n;for(var t in e.id=this.id,this.attrs)e.attrs[t]=this.attrs[t];return e},n.prototype.removeAttribute=function(e,t){delete this.attrs[e]},n.prototype.setAttribute=function(e,t){this.attrs[e]=t},n.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=n},function(e,t,n){var r=n(3),o=n(5),i=n(16),a=n(6),s=n(8),c=n(9),l=n(17),d=n(10),u=n(11),p=n(14),h=n(4),f=n(13),g=n(7),_=a.addListenerToElement,m=g.parseSinglePath,y=o.deepCopy,v=function(){};v.prototype=Object.create(c.prototype,{constructor:{value:v,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace([n],e[n]);t.doUpdates()},configurable:!0},$:{get:function(){return c._updateIdMap(this),this.__idCache},set:function(){}}});var A=function(){};A.prototype=Object.create(Object.prototype),a._setComponent(v);var b=null;v._setDefaultTemplateEngine=function(e){b=e,v._setDefaultTemplateEngine=null};var w=function(e,t,n){if(n)for(var o=0;o<n.length;o++)if(s.matchTypeWithValue(n[o],e))return e;return t===String?null==e?(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <String> but get null value. Used empty string instead."),""):(r.hasGlobalWarningListeners()&&"object"==typeof e&&r.triggerWarning("property received type-uncompatible value: expected <String> but got object-typed value. Forcely converted."),String(e)):t===Number?isFinite(e)?Number(e):(r.hasGlobalWarningListeners()&&("number"==typeof e?r.triggerWarning("property received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead."):r.triggerWarning("property received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.")),0):t===Boolean?!!e:t===Array?e instanceof Array?e:(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead."),[]):t===Object?"object"==typeof e?e:(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <Object> but got non-object value. Used null instead."),null):void 0===e?null:e};i.setPropUpdater((function(e,t,n,o){var i=e[0],a=this.__propData[i];if(n=w(n,t.type,t.optionalTypes),!(!t.availability||function(e,t,n,o){var i=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,o?void 0:n];return!!r.safeCallback("Availablity Controller",t,e.__methodCaller,i,e)}(this,t.availability,n,o)))return r.hasGlobalWarningListeners()&&r.triggerWarning('the new value for property "'+i+'" in component "'+(this.is||"")+'" is currently not available. The value is not changed.'),a;if(t.filter){var s=r.safeCallback("Property Filter",t.filter,this.__methodCaller,o?[]:[n,a,e],this);void 0!==s&&(n=s)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[i]&&function(e,t,n){if("dom"===h.documentBackend){var r=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),o=typeof n;"boolean"===o?n?e.__domElement.setAttribute(r,""):e.__domElement.removeAttribute(r):"object"===o?e.__domElement.setAttribute(r,JSON.stringify(n)):e.__domElement.setAttribute(r,n)}}(this,i,n),n})),i.setPropObserver((function(e,t,n,o,i,a){if(o.observeAssignments||e!==t){var s=n[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&r.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),o.observer&&r.safeCallback("Property Observer",o.observer,this.__methodCaller,i?[]:[e,t,n],this),o.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&d._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var C=function(e,t,n){t.__relationLinks||(t.__relationLinks={});for(var r=t.__relationLinks[n]=[],o=0;o<e.length;o++)r.push(null)},I=function(e,t,n,o,i){for(var a=v.prototype.hasBehavior,c="parent"===o,l="shadowHost"===o,d=0;d<e.length;d++){var u,p=e[d];if(u="object"!=typeof p.target?s._list[p.target]:p.target){var h=t[d],f=null;if(!i)for(var g=l?n.ownerShadowRoot&&n.ownerShadowRoot.__wxHost:n.parentNode;g;g=l?g.ownerShadowRoot&&g.ownerShadowRoot.__wxHost:g.parentNode)if(!g.__virtual){if(a.call(g,u)){var _;_=c?g.__relationMap.child:l?g.__relationMap.shadowContent:g.__relationMap.descendant;for(var m=0;m<_.length;m++){var y,A=_[m];if((y="object"!=typeof A.target?s._list[A.target]:A.target)&&a.call(n,y)){f={parent:g,relation:A};break}}}if(c||f)break}t[d]=f,!h||f&&h.parent===f.parent||(r.safeCallback("Relation Unlinked Callback",h.relation.unlinked,h.parent.__methodCaller,[n.__methodCaller],h.parent),r.safeCallback("Relation Unlinked Callback",p.unlinked,n.__methodCaller,[h.parent.__methodCaller],n)),!f||h&&h.parent===f.parent||(r.safeCallback("Relation Linked Callback",f.relation.linked,f.parent.__methodCaller,[n.__methodCaller],f.parent),r.safeCallback("Relation Linked Callback",p.linked,n.__methodCaller,[f.parent.__methodCaller],n)),h&&f&&h.parent===f.parent&&(r.safeCallback("Relation Link Changed Callback",f.relation.linkChanged,f.parent.__methodCaller,[n.__methodCaller],f.parent),r.safeCallback("Relation Link Changed Callback",p.linkChanged,n.__methodCaller,[f.parent.__methodCaller],n)),i||f||r.safeCallback("Relation Link Failed Callback",p.linkFailed,n.__methodCaller,[],n)}}},E=function(e,t,n){if(e instanceof c){var r=0,o=null;if(e instanceof v){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,n||[]),o=e.childNodes,r=0;r<o.length;r++)E(o[r],t,n);e=e.shadowRoot}for(o=e.childNodes,r=0;r<o.length;r++)E(o[r],t,n)}};v._list={},v.register=function(e){var t=e.options||{},n=s.create(e),r=void 0!==t.classPrefix?t.classPrefix:h.classPrefix;null!=r||(r=n.is||"");var o=new A;return o._unprepared=n,o.is=e.is||"",o.behavior=n,o.protoFunc=null,o.props=null,o.template=null,o.innerEvents=null,o.generics=n.generics,o.initiator=n.initiator||null,o.options={availability:t.availability||h.availability,domain:t.domain||h.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:h.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:h.allowInWriteOnly),classPrefix:r,styleScope:t.styleScope||h.styleScope,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:h.addGlobalClass),templateEngine:t.templateEngine||h.templateEngine||b,renderingMode:t.renderingMode||h.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:h.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:h.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:h.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:h.writeIdToDOM),separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:h.separateInnerData),innerDataExclude:t.innerDataExclude||h.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:h.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:h.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:h.virtualHost)},n._unprepared||v.prepare(o),void 0!==e.is&&(v._list[n.is]=o),o},v.isPrepared=function(e){return!e._unprepared},v.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.options,o={};t._unprepared&&s.prepare(t),n.writeOnly&&(o.data={value:null});var a=e.props={};Object.keys(t.properties).forEach((function(e){var r=t.properties[e];a[e]={type:r.type,optionalTypes:r.optionalTypes,value:r.value,filter:"function"==typeof r.filter?r.filter:null==r.filter?null:t.methods[r.filter],observer:"function"==typeof r.observer?r.observer:null==r.observer?null:t.methods[r.observer],public:r.public,availability:r.availability,observeAssignments:r.observeAssignments},n.writeFieldsToNode&&(o[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var n=this.__dataProxy;n.scheduleReplace([e],t),n.doUpdates()}})}));var c=function(){};e.protoFunc=c;var l=c.prototype=Object.create(v.prototype,o);if(l.is=e.is,l.__componentOptions=n,l.__using=t.using,e.dataGroupObserverTree=i._createObserverTree(a),t._addObserversToDataProxy(e.dataGroupObserverTree),l.__behavior=t,n.writeFieldsToNode)for(var d in t.methods)l[d]=t.methods[d];l.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),l.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var u=t.relations,p=l.__relationMap={};for(var h in u){var f=u[h],g=f.type;p[g]?p[g].push(f):p[g]=[f]}var _=[];p.parent&&_.push((function(e){I(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),p.ancestor&&_.push((function(e){I(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),p.shadowHost&&_.push((function(e){I(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<_.length;t++)_[t].call(this,e)};var m={},y={},A=t.data,b="";for(b in A)y[b]=A[b];for(b in a){var w=a[b];r.hasGlobalWarningListeners()&&void 0!==y[b]&&r.triggerWarning('data field "'+b+'" is overwritten by property with the same name.'),y[b]=w.value,m[b]=w.public}var C=y,E=n.separateInnerData,S=n.innerDataExclude;if(S){for(var T in C={},y)S.test(T)||(C[T]=y[T]);E||(y=C)}var x=n.templateEngine;e.template=x.create(t,y,C,n),l.__propPublic=m;var k=t._getAllListeners(),P=e.innerEvents=[];for(var D in k){for(var O=k[D],N=D.indexOf("."),R=D.slice(N+1),M=N<1?"":D.slice(0,N),L=[],B=0;B<O.length;B++){var F=O[B];"function"!=typeof F&&(F=null==F?null:t.methods[F]),L.push(F)}P.push({id:M,name:R,funcs:L})}}};var S=1,T=Object.prototype.hasOwnProperty,x=function(e,t){return function(n){return e.call(t.__methodCaller,n,t)}},k=v._advancedCreate=function(e,t,n,o,a){var s=t;s._unprepared&&v.prepare(s);var l=s.options;!l.availability||function(e,t,n){var o=[t?t.__wxHost.__componentOptions.domain:void 0];return!!r.safeCallback("Availablity Controller",n,e,o)}(s,n,l.availability)||(r.hasGlobalWarningListeners()&&r.triggerWarning('the component "'+(s.is||"")+'" is currently not available. The default component is used instead.'),s=v._list[""]);var d=new(0,s.protoFunc),g=s.generics;d.__generics=g?function(e,t,n){var o={};for(var i in e){var a=e[i],s=t[i];"object"!=typeof s&&(s=v._list[s]),"object"!=typeof s&&null!=a.default&&(s=v._list[a.default]),r.hasGlobalWarningListeners()&&(s||r.triggerWarning('generic "'+i+'" is not instantiated. The default component is used instead.')),s&&(o[i]=s)}if(r.hasGlobalWarningListeners())for(var c in t)void 0===e[c]&&r.triggerWarning('generic "'+c+'" is not defined. It will be ignored.');return o}(g,o||{}):{};var m=null,A=h.documentBackend;if(l.virtualHost){m=null;"dom"===h.documentBackend&&(m=void 0),c.initialize(d,m,n),d.__virtual=!0}else"dom"===A?(m=f.backendExtractedDefault?new p(e):document.createElement(e),c.initialize(d,m,n)):"custom"===A?(m=h.customContext.createElement("empty",e),c.initialize(d,m,n)):c.initialize(d,null,n);var b=0,w=d.__externalClassAlias={};if(s.behavior.externalClasses){var I=s.behavior.externalClasses;for(b=0;b<I.length;b++)w[I[b]]=null}if(d.classList=u.create(d,w),n){var E=n.__wxHost;m&&"custom"===A&&E.__componentOptions.styleScope&&m.setStyleScope(E.__componentOptions.styleScope),d.classList._setOwnerOptions(E.classList,E.__componentOptions.classPrefix,E.__componentOptions.addGlobalClass),h.writeExtraInfoToAttr&&m&&m.setAttribute("exparser:info-class-prefix",E.__componentOptions.classPrefix&&E.__componentOptions.classPrefix+"--")}"dom"===A&&h.writeExtraInfoToAttr&&m&&(d.__componentInstanceId=S++,m.setAttribute("exparser:info-component-id",d.__componentInstanceId));var T=d.__templateInstance=s.template.createInstance(d,a);d.__propData=T.data;var k=l.separateInnerData;d.__innerData=k?y(d.__propData):null;var P=l.innerDataExclude;if(k&&P){var D={};for(var O in d.__innerData)P.test(O)||(D[O]=d.__innerData[O]);d.__innerData=D}d.__dataProxy=i._advancedCreate(d,d.__propData,d.__innerData,P,s.dataGroupObserverTree,(function(e,t,n,r){d.__templateInstance.updateValues(d,k?d.__innerData:d.__propData,e,t,n,r)})),T.beforeMergeValues&&d.__dataProxy.setBeforeMergeCb((function(e,t,n){d.__templateInstance.beforeMergeValues(e,t,n)})),T.beforeUpdateValues&&d.__dataProxy.setBeforeUpdateCb((function(e){d.__templateInstance.beforeUpdateValues(d,k?d.__innerData:d.__propData,e)})),l.writeOnly&&d.__dataProxy.setHidingValue(!0),d.__idCacheDirty=!1,d.__idCache=T.idMap,null===T.slots[""]&&(T.slots[""]=m),s.options.multipleSlots?d.__slots=T.slots:(d.__singleSlot=T.slots[""]||null,d.__singleSlot&&(d.__singleSlot.__wxSlotChildren=d.childNodes)),T.shadowRoot instanceof c?(d.shadowRoot=T.shadowRoot,c._attachShadowRoot(T.shadowRoot)):m instanceof p?(d.shadowRoot=m,m.__wxHost=d,d.__domElement.asShadowRoot=T.shadowRoot,d.__wxSlotChildren=[m],m.__wxSlotParent=d):(d.shadowRoot=m,m.__wxHost=d,""!==h.documentBackend&&d.__domElement.appendChild(T.shadowRoot),d.__wxSlotChildren=[m],m.__wxSlotParent=d);for(var N=T.listeners,R=0;R<N.length;R++){var M=N[R];_(M.target,M.name,x(M.func,d))}var L=s.innerEvents;for(b=0;b<L.length;b++){var B=L[b],F=B.id?"this"===B.id?d:d.__idCache[B.id]:d.shadowRoot;if(F)for(var W=B.name,j=B.funcs,U=0;U<j.length;U++)_(F,W,x(j[U],d))}var V=d.__relationMap;return V.parent&&(C(V.parent,d,"parent"),d.__relationHandler=s.relationHandler),V.ancestor&&(C(V.ancestor,d,"ancestor"),d.__relationHandler=s.relationHandler),V.shadowHost&&(C(V.shadowHost,d,"shadowHost"),d.__relationHandler=s.relationHandler),d.__propertyChangeListeners=null,"custom"===A&&m&&m.associateComponent(d),s.initiator&&r.safeCallback("Component Initiator",s.initiator,d.__methodCaller,[],d),d.__lifeTimeFuncs.created.call(d.__methodCaller,[],d),d};v.createWithGenerics=function(e,t,n,o){return"object"==typeof e?k(e.is,e,null,n,o):e?e.indexOf("-")<0&&!t?l.create(e):(r.hasGlobalWarningListeners()&&(t||T.call(v._list,e)||"virtual"===e||r.triggerWarning('component "'+e+'" is not found. The default component is used instead.')),k(e.toLowerCase(),t||T.call(v._list,e)&&v._list[e]||v._list[""],null,n,o)):k("virtual",v._list[""],null,n,o)},v.create=function(e,t,n){return v.createWithGenerics(e,t,null,n)},v.listProperties=function(e){var t=[];for(var n in e.__propPublic)void 0!==e.__propPublic[n]&&t.push(n);return t},v.listPublicProperties=function(e){var t=[];for(var n in e.__propPublic)!0===e.__propPublic[n]&&t.push(n);return t},v.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},v.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},v.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},v.getMethod=function(e,t){return e.__behavior.methods[t]},v.getComponentOptions=function(e){return e.__componentOptions},v.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},v.prototype.triggerPageLifeTime=function(e,t){E(this,e,t)},v.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},v.prototype.getRootBehavior=function(){return this.__behavior},v.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var n=this.__relationMap[t.type],r=0;r<n.length&&n[r]!==t;r++);return this.__relationLinks[t.type][r]?[this.__relationLinks[t.type][r].parent]:[]}return function(e,t){var n=[],r=t.type,o="child"===r,i="shadowContent"===r,a=function(r){for(var s=r.childNodes,l=0;l<s.length;l++){var d=s[l];if(d instanceof c)if(d.__virtual)a(d);else{var u;if(d.__relationLinks)if(u=o?d.__relationLinks.parent:i?d.__relationLinks.shadowHost:d.__relationLinks.ancestor)for(var p=0;p<u.length;p++){var h=u[p];if(h&&h.parent===e&&h.relation===t){n.push(d);break}}i&&d instanceof v&&a(d.shadowRoot),o||a(d)}}};return a(i?e.shadowRoot:e),n}(this,t)},v.prototype.hasExternalClass=function(e){return T.call(this.__externalClassAlias,e)},v.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},v.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},v.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},v.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},v.getInnerData=function(e){return e.__innerData},v.getDataProxy=function(e){return e.__dataProxy},v.replaceWholeData=function(e,t,n){e.__propData=t,e.__dataProxy.replaceWholeData(t,n)},v.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},v.prototype.setData=function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace(m(n),e[n]);t.doUpdates()},e.exports=v},function(e,t,n){var r=n(3),o=n(5),i=null,a=null,s=Object.prototype.hasOwnProperty,c=o.deepCopy,l=function(e,t,n,r,o,i){this._data=t,this._innerData=n,this._innerDataExclude=r,this._comp=e,this._updateCb=i,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=o._propFields,this._observers=o._observers,this._observerTree=o._observerTree,this._relatedObserverTreeObj=o,this._observerStatus=[]};l._advancedCreate=function(e,t,n,r,o,i){return new l(e,t,n,r,o,i)};var d=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};l._createObserverTree=function(e){return new d(e)},l.create=function(e,t,n){var r=new d({});return new l({__methodCaller:e},t,null,null,r,n)},l.setPropUpdater=function(e){i=e},l.setPropObserver=function(e){a=e},l.prototype.replaceWholeData=function(e,t){this._data=e},l.prototype.setHidingValue=function(e){this._hidingValue=!!e},l.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},l.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var u=function(e,t,n){for(var o=e,i=0;i<t.length;i++){var a=t[i];if("**"===a)return r.hasGlobalWarningListeners()&&i!==t.length-1&&r.triggerWarning('"**" can only be used at the end of a path descriptor.'),o["**"]||(o["**"]=[]),void o["**"].push(n);o[a]||(o[a]={}),o=o[a]}o["~"]||(o["~"]=[]),o["~"].push(n)},p=function(e,t,n){for(var r=0;r<t.length;r++)u(e,t[r],n)},h=function(e,t,n){for(var r=e,o=0,i="";o<t.length&&"**"!==(i=t[o]);o++){if(!r)return;r=r[i]}var a="**"===i?r["**"]:r["~"];if(a)for(o=0;o<a.length;o++)if(a[o]===n){a.splice(o,1);break}},f=function(e,t,n){for(var r=0;r<t.length;r++)h(e,t[r],n)};d.prototype.addObserver=function(e,t){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},p(this._observerTree,t,n),n},d.prototype.removeObserver=function(e){var t=this._observers[e];f(this._observerTree,t.pathObj,e),this._observers[e]=null},d.prototype.moveObserver=function(e,t){var n=this._observers[e];f(this._observerTree,n.pathObj,e),n.pathObj=t,p(this._observerTree,t,e)},l.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var g=function(e,t,n){for(var o=[],i=n.pathObj,a=0;a<i.length;a++){for(var s=i[a],c=t,l=0;l<s.length;l++){var d=s[l];if("**"===d)break;if("object"!=typeof c){c=void 0;break}c=c[d]}o[a]=c}r.safeCallback("Data Observer",n.func,e.__methodCaller,o,e)},_=function(e,t){var n=null,r=0;for(var o in e)if("~"!==o)if("**"!==o)_(e[o],t);else for(n=e["**"],r=0;r<n.length;r++)t[n[r]]=!0;else for(n=e["~"],r=0;r<n.length;r++)t[n[r]]=!0},m=function(e,t,n){for(var r=e,o=0;o<n.length;o++){if(r["**"])for(var i=r["**"],a=0;a<i.length;a++){t[i[a]]=!0}var c=n[o];if("number"==typeof c){if(!s.call(r,c)){r=null;break}}else if(!/^[_a-zA-Z]/.test(c)||!s.call(r,c)){r=null;break}r=r[c]}r&&_(r,t)},y=function(e,t,n,r,o){for(var i=0;i<e.length;i++){var a=e[i],s=t[i];s&&s&&(t[i]=!1,g(n,o?void 0:r,a))}};l.prototype.scheduleReplace=function(e,t,n){this._changes.push([e,t,n])},l.prototype.setChanges=function(e){this._changes=e},l.prototype.getChanges=function(){return this._changes},l.prototype.doUpdates=function(e,t){var n=this._propFields,r=this._comp,o=this._hidingValue,l=this._innerDataExclude,d=!!this._doingUpdates,u=this._relatedObserverTreeObj._observerIdInc,p=null,h=null,f=null;u?(d||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),p=this._doingUpdates.changedPaths,h=this._doingUpdates.changedValues,f=this._doingUpdates.combinedChanges):(p=[],h=[],f=[]);var g=this._changes;this._changes=[];var _=[];this._beforeMergeCb&&this._beforeMergeCb(g,_,e);for(var v=0;v<g.length;v++){var A=g[v],b=A[0],w=A[1],C=w,I=void 0,E=b[0],S=!!l&&l.test(E),T=n[E];if(T&&1===b.length)I=this._data[E],w=i.call(this._comp,b,T,w,this._hidingValue),S||(this._innerData?(C=c(w),_[v]||(this._innerData[E]=C)):C=w,A[1]=C),S&&!this._innerData||(this._data[E]=w);else{var x=this._data,k=E,P=null,D=1;if(!S||this._innerData){for(;D<b.length;D++)"number"==typeof(P=b[D])&&isFinite(P)?s.call(x,k)&&x[k]instanceof Array||(x[k]=[]):(!s.call(x,k)||null===x[k]||"object"!=typeof x[k]||x[k]instanceof Array)&&(x[k]={}),x=x[k],k=P;x[k]=w}if(this._innerData&&(x=this._innerData,k=E,!S)){for(D=1;D<b.length;D++)"number"==typeof(P=b[D])&&isFinite(P)?s.call(x,k)&&x[k]instanceof Array||(x[k]=[]):(!s.call(x,k)||null===x[k]||"object"!=typeof x[k]||x[k]instanceof Array)&&(x[k]={}),x=x[k],k=P;C=c(w),_[v]||(x[k]=C),A[1]=C}}m(this._observerTree,this._observerStatus,b),S||(p.push(b),h.push([C,I,w]),f.push(A)),u&&(this._doingUpdates.changesTotal+=1)}if(!d){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),u){var O=0;do{O=this._doingUpdates.changesTotal,y(this._observers,this._observerStatus,r,this._data,o)}while(O!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(p,h,f,e);for(var N=0;N<h.length;N++){var R=h[N];if(R){var M=p[N],L=n[M[0]];L&&a.call(r,R[2],R[1],M,L,o,t)}}}},e.exports=l},function(e,t,n){var r=n(9),o=n(11),i=n(14),a=n(4),s=n(13),c=function(){};c.prototype=Object.create(r.prototype,{constructor:{value:c,writable:!0,configurable:!0}});var l=c._advancedCreate=function(e,t){var n=new c;n.is=e.toLowerCase();var l=null;if("dom"===a.documentBackend?l=s.backendExtractedDefault?new i(e):document.createElement(e):"custom"===a.documentBackend&&(l=a.customContext.createElement("image"===e?e:"empty",e)),r.initialize(n,l,t),n.classList=o.create(n,null),"custom"===a.documentBackend&&l.associateComponent(n),t){var d=t.__wxHost;l&&"custom"===a.documentBackend&&d.__componentOptions.styleScope&&l.setStyleScope(d.__componentOptions.styleScope),n.classList._setOwnerOptions(d.classList,d.__componentOptions.classPrefix,d.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&l&&l.setAttribute("exparser:info-class-prefix",d.__componentOptions.classPrefix&&d.__componentOptions.classPrefix+"--")}return n};c.create=function(e){return l(e,null)};var d=c._advancedClone=function(e,t){var n=new c;n.is=e.is;var l=null;if(e.__domElement&&("dom"===a.documentBackend?l=e.__domElement instanceof i?s.backendExtractedDefault?e.__domElement.cloneNode():i.toElement(e.__domElement):s.backendExtractedDefault?i.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1):"custom"===a.documentBackend&&(l=e.__domElement.cloneNode())),r._clone(n,e,l,t),n.classList=o.create(n,null),"custom"===a.documentBackend&&l.associateComponent(n),t){var d=t.__wxHost;n.classList._setOwnerOptions(d.classList,d.__componentOptions.classPrefix,d.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&l&&l.setAttribute("exparser:info-class-prefix",d.__componentOptions.classPrefix&&d.__componentOptions.classPrefix+"--")}return n};c.cloneNode=function(e){return d(e,null)},e.exports=c},function(e,t,n){var r=n(9),o=n(4),i=function(e,t){a(this,e,t)};i.prototype=Object.create(r.prototype);var a=i.initialize=function(e,t,n){e.is=t||"";var i=null;"dom"!==o.documentBackend&&"custom"!==o.documentBackend||(i=void 0),r.initialize(e,i,n),e.__virtual=!0};i._advancedCreate=function(e,t){return new i(e,t)},i.create=function(e){return new i(e,null)},e.exports=i},function(e,t,n){var r=n(9),o=n(15),i=n(18),a=n(17),s=n(12),c=Object.prototype.hasOwnProperty,l=function(e){i.initialize(this,"shadow",this),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};l.prototype=Object.create(i.prototype),l.create=function(e){var t=new l(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var n in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[n]||(t.__childrenPropsFilter[n]=e.ownerShadowRoot.__childrenPropsFilter[n]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};l.prototype.createTextNode=function(e){return s._advancedCreate(e,this)},l.prototype.createNativeNode=function(e){return a._advancedCreate(e,this)},l.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},l.prototype.createVirtualNode=function(e){return i._advancedCreate(e,this)},l.prototype.createComponent=function(e,t,n,r){var i=null;i=void 0===t?e:t;var a=this.__wxHost;return"object"!=typeof i&&(c.call(a.__using,i)?i=a.__using[i]:c.call(a.__generics,i)&&(i=a.__generics[i]),"object"!=typeof i&&(i=o._list[i]||o._list[""])),n&&(n=function(e,t){var n={};for(var r in e){var i=e[r];"object"!=typeof i&&(c.call(t.__using,i)?i=t.__using[i]:c.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),n[r]=i)}return n}(n,a)),"object"==typeof e&&(e=i.is),a.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",n=0;n<8;n++){var r=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[r]}return t}()),a.__componentOptions.writeOnly&&!i.options.allowInWriteOnly&&(i=o._list[""]),o._advancedCreate(e,i,this,n,r)},l.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!c.call(t.__using,e)||!!c.call(t.__generics,e)},l.prototype.getHostNode=function(){return this.__wxHost},l.prototype.getElementById=function(e){return r._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},e.exports=l},function(e,t,n){var r=n(9),o=n(12),i=function(){};i.create=function(e,t,n){var a=new i;if(!(e instanceof r||e instanceof o))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=n||r;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,n,r,o){if(r<0&&e instanceof t&&!1===o(e))return!1;var i=n&&e.__wxSlotChildren||e.childNodes;if(i)for(var s=0;s<i.length;s++)if(!1===a(i[s],t,n,r,o))return!1;return!(r>0&&e instanceof t&&!1===o(e))};i.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,n,r){for(;e;e=n&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===r(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=i},function(e,t,n){var r=n(4),o=n(3),i=!1,a=[],s=function(e){var t=a;a=[],i=!0,r.customContext.render((function(){i=!1,a.length&&(r.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(s):setTimeout(s,16));for(var e=0;e<t.length;e++)"function"==typeof t[e]&&o.safeCallback("render",t[e],null,[])}))};t.triggerRender=function(e){"custom"===r.documentBackend&&(a.push(e||null),i||1!==a.length||(r.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(s):setTimeout(s,16)))}},function(e,t,n){(function(t){var r=n(4),o=n(3),i=n(9),a=n(17),s=n(12),c=n(19),l=n(15),d=n(24),u=n(25),p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var h=function(){};h.prototype=Object.create(Object.prototype,{constructor:{value:h,writable:!0,configurable:!0}});var f=null;p.precompiler=f,p.htmlParser=null;var g=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},_=Object.prototype.hasOwnProperty,m=function(e,t){if(null!==e&&"object"==typeof e&&_.call(e,t))return e[t]},y=function(e,t,n,r){if(_.call(t,n)){var i=t[n];if("function"==typeof i)return o.safeCallback("Template Method",i,e,r)}},v={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},A=function(e,t,n){e.classList.toggle(t,!!n)},b=function(e,t,n){e[t]=n},w=function(e,t,n){var r=e.__dataProxy;r.scheduleReplace([t],n),r.doUpdates()},C=function(e,t,n){e.class=n},I=function(e,t,n){"dom"===r.documentBackend?e.setAttribute("style",n):"custom"===r.documentBackend&&e.setStyle(n)},E=function(e,t,n){e.setAttribute("class",n)},S=function(e,t,n){e.textContent=n},T=function(e,t,n){e.dataset||(e.dataset={}),e.dataset[t]=n},x={$:function(e,t,n){!0===n?e.setAttribute(t,""):!1===n||null==n?e.removeAttribute(t):e.setAttribute(t,n)},":":b,c:A,s:function(e,t,n){var r=e.style;r&&(r[t]=n)},d:T},k=function(e,t,n){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};p.create=function(e,n,r,i){var a=void 0===e.template?k:e.template,s=a;"function"!=typeof a&&(void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node?s=p.precompileAndGetCreator(a):(o.hasGlobalWarningListeners()&&o.triggerWarning("Non-precompiled template is not usable in this environment. Empty template is used instead."),s=k));var c=Object.create(p.prototype);return c._initValuesJSON=JSON.stringify(r),c._dataJSON=n!==r?JSON.stringify(n):null,c._tagTreeRoot=P(s,r,e.methods,i),c._renderingMode=i.renderingMode,c};var P=function(e,t,n,o){var i="native"===o.renderingMode,s=i,c=!1,l=Object.create(null);i&&!r.hasDOMBackend&&(e=k);var d={},p=e(m,y,n),h=function(e){for(var n=0;n<e.length;n++){var o=e[n];if(3!==o.t){var l=o.n,p=!(i||"string"==typeof l&&l.indexOf("-")<0);"slot"===l&&""===o.sn&&(c=!0),o.n=l;var f=o.st;f&&f.e&&(f.o=I,s&&(f.v=f.e(t,d,null)));var _=o.cl;_&&_.e&&(_.o=i?E:C,s&&(_.v=_.e(t,d,null)));var m=null;p||(o.p=m=i?document.createElement(o.n):a.create(o.n),f&&void 0!==f.v&&("dom"===r.documentBackend?m.setAttribute("style",f.v):"custom"===r.documentBackend&&m.__domElement.setStyle(f.v)),i&&_&&void 0!==_.v&&m.setAttribute("class",_.v));for(var y=o.a,v=0;v<y.length;v++){var T=y[v];if(T.d)i||u[T.n].register(T.n,T,o);else{i||("bind"===T.n.slice(0,4)?(T.evCatch=!1,T.ev=g(T.n.slice(4)),":"===T.ev[0]&&(T.ev=T.ev.slice(1))):"catch"===T.n.slice(0,5)&&(T.evCatch=!0,T.ev=g(T.n.slice(5)),":"===T.ev[0]&&(T.ev=T.ev.slice(1))));var k=T.o;if(p)k?T.o="&"===k?x[":"]:x[k]:(T.o=x[":"],T.n=g(T.n)),T.o===b&&(T.o=w),s&&T.e&&(T.v=T.e(t,d,null));else if(!T.ev){var P=x;T.o=k?"&"===k?P[":"]:P[k]:P.$,s?(T.e&&(T.v=T.e(t,d,null)),(T.o!==A||i)&&T.o(m,T.n,T.v)):T.e||T.o(m,T.n,T.v)}}}h(o.c),i&&(1!==o.c.length||void 0===o.c[0].sn||o.c[0].compressed||(o.sn=o.c[0].sn,o.compressed=!0,o.c.pop()))}else o.e&&(o.o=S,o.c=s?o.e(t,d,null):"")}};return h(p,l,!0),i&&(c||p.push(v),1!==p.length||""!==p[0].sn||p[0].compressed||p.pop()),p},D=function(e,t){return function(n){if(this[e](n),t)return!1}},O=function(e,t,n,o,a,s,c,p){for(var h=null,f=0,g=null,_=0;_<e.length;_++){var m=c,y=e[_];if(3===y.t)h=y.e?t.createTextNode(y.e(o,a,null)):t.createTextNode(y.c),y.e&&d.addBindings(s,m,y.b,h,y),i.appendChild(n,h);else{var v=y.cl,C=y.st,I=y.a,E=!1;for(f=0;f<I.length;f++)if((g=I[f]).d){var S=u[g.n].create(g.n,g,y,o,a,s,m,p,t,O,n);if(u[g.n].requireBlock){h=S,i.appendChild(n,h),E=!0;break}}if(E)continue;if(y.v)h=t.createVirtualNode(y.n);else if(y.p){for(h=t.cloneNativeNode(y.p),f=0;f<I.length;f++)(g=I[f]).d||(g.ev?p(h,g.ev,g.v,g.evCatch):g.o===b?h.__domElement&&(g.o(h.__domElement,g.n,g.e(o,a,null)),d.addBindings(s,m,g.b,h.__domElement,g)):(g.e&&g.o(h,g.n,g.e(o,a,null)),(g.e||g.o===A||g.o===T)&&d.addBindings(s,m,g.b,h,g)));C&&C.e&&("dom"===r.documentBackend?h.setAttribute("style",C.e(o,a,null)):"custom"===r.documentBackend&&h.__domElement.setStyle(C.e(o,a,null)),d.addBindings(s,m,C.b,h,C))}else{if(y.cpf){var x={},k=t.__wxHost;for(var P in y.cpf)!function(e){var t=y.cpf[e];x[e]=k.__behavior.methods[t]}(P);t.__childrenPropsFilter=x}for(h=t.createComponent(y.n,void 0,y.g,void 0),f=0;f<I.length;f++)if(!(g=I[f]).d){var D=g.v;g.o===w&&l.hasPublicProperty(h,g.n)?(g.e&&(D=g.e(o,a,null),d.addBindings(s,m,g.b,h,g)),g.e?w(h,g.n,D):h.__behavior.properties[g.n].type===Boolean?w(h,g.n,!0):w(h,g.n,D)):g.ev?p(h,g.ev,D,g.evCatch):g.o!==w&&(g.e&&(D=g.e(o,a,null),d.addBindings(s,m,g.b,h,g)),g.o(h,g.n,D))}C&&(C.e?("dom"===r.documentBackend?h.__domElement.setAttribute("style",C.e(o,a,null)):"custom"===r.documentBackend&&h.__domElement.setStyle(C.e(o,a,null)),d.addBindings(s,m,C.b,h.__domElement,C)):"dom"===r.documentBackend?h.__domElement.setAttribute("style",C.v):"custom"===r.documentBackend&&h.__domElement.setStyle(C.v))}y.id&&(h.id=y.id),v&&(v.e?h.class=v.e(o,a,null):h.class=v.v,v.o&&d.addBindings(s,m,v.b,h,v)),y.sl&&(h.slot=y.sl),void 0!==y.sn&&i.setSlotName(h,y.sn),i.appendChild(n,h),O(y.c,t,h,o,a,s,m,p)}}},N=function(e,t,n){for(var r=e.childNodes,o=0;o<r.length;o++){var i=r[o];i instanceof s||(i.__id&&(t[i.__id]=i),void 0!==i.__slotName&&(n[i.__slotName]=i),N(i,t,n))}},R=function(e,t,n,r,o,i){for(var a=null,s=0,c=null,l=0;l<e.length;l++){var u=e[l];if(void 0===u.n)a=document.createTextNode(u.c),u.e&&d.addBindings(o,i,u.b,a,u),t.appendChild(a);else{var p=u.cl,h=u.st,f=u.a;for(a=u.v?document.createElement("virtual"):document.importNode?document.importNode(u.p,!1):u.p.cloneNode(!1),s=0;s<f.length;s++)(c=f[s]).e&&d.addBindings(o,i,c.b,a,c);t.appendChild(a),u.id&&(n[u.id]=a),p&&p.e&&d.addBindings(o,i,p.b,a,p),h&&h.e&&d.addBindings(o,i,h.b,a,h),void 0!==u.sn&&(r[u.sn]=a),R(u.c,a,n,r,o,i)}}};p.prototype.createInstance=function(e){var t=Object.create(h.prototype),n=JSON.parse(this._initValuesJSON),o=null===this._dataJSON?n:JSON.parse(this._dataJSON),i=Object.create(null),a=Object.create(null),s=[],l=d.create("",null,null,null,null,[],(function(e,t){})),u=null;if("native"===this._renderingMode)"dom"===r.documentBackend&&(u=document.createDocumentFragment()),R(this._tagTreeRoot,u,i,a,l,{}),a[""]||(a[""]=null);else{if(u=c.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(u.__childrenPropsFilter)for(var p in e.ownerShadowRoot.__childrenPropsFilter)u.__childrenPropsFilter[p]||(u.__childrenPropsFilter[p]=e.ownerShadowRoot.__childrenPropsFilter[p]);else u.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;O(this._tagTreeRoot,u,u,n,{},l,{},(function(e,t,n,r){u.__wxHost?e.addListener(t,D(n,r).bind(u.__wxHost)):s.push({target:e,name:t,func:D(n,r)})})),N(u,i,a)}return t.data=o,t.shadowRoot=u,t.idMap=i,t.slots=a,t.listeners=s,t._topScope=l,t},h.prototype.updateValues=function(e,t,n){for(var r=i.getMethodCaller(e),o=0;o<n.length;o++){var a=n[o];d.updateBinding(this._topScope,a,t,{},r)}},e.exports=p}).call(t,n(23))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(){f&&p&&(f=!1,p.length?h=p.concat(h):g=-1,h.length&&a())}function a(){if(!f){var e=o(i);f=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,f=!1,function(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,d,u=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var p,h=[],f=!1,g=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||f||o(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=c,u.addListener=c,u.once=c,u.off=c,u.removeListener=c,u.removeAllListeners=c,u.emit=c,u.prependListener=c,u.prependOnceListener=c,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t){var n={create:function(e,t,n,o,i,a,s){for(var c={inc:1,name:e,exp:o,lp:i,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},l=0;l<a.length;l++){var d=a[l];null===d[0]?r(t,d,null,c):r(n[d[0]],d,null,c)}return c},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return r(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var n in e)t[n]={inc:1,linked:e[n],scopes:{},targets:{},children:null,__scopeBinded:[]},r(e[n],[null],null,t[n]);return t}},r=n.addBinding=function(e,t,n,r){for(var o=e,i=1;i<t.length;i++){var a=t[i];o.children||(o.children=Object.create(null));var s=o.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),o=s[a]}var c=e.inc++;return n?o.targets[c]=[n,r]:(o.scopes[c]=r,r.__scopeBinded.push([o,c])),c};n.addBindings=function(e,t,n,o,i){for(var a=0;a<n.length;a++){var s=n[a];s[0]?r(t[s[0]],s,o,i):r(e,s,o,i)}},n.updateLvaluePath=function(e,t){e.lp=t},n.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,n=0;n<t.length;n++){var r=t[n];delete r[0].scopes[r[1]]}};var o=function(e,t,n,r,o){if(e.linked)i(e,t,n,r,o);else{var a=r[e.name];r[e.name]=e.exp(n,r,o),i(e,t,n,r,o),r[e.name]=a}},i=n.updateBinding=function(e,t,n,r,i){for(var a=e,s=0,c=0;c<t.length;c++){for(s in a.scopes)o(a.scopes[s],t,n,r,i);var l=t[c];if(!a.children)return;var d=a.children;if(!d[l])return;a=d[l]}var u=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(n,r,i))}for(s in e.scopes)o(e.scopes[s],[],n,r,i);for(s in e.children)u(e.children[s])};u(a)};e.exports=n},function(e,t,n){e.exports={if:n(26),elif:n(26),else:n(26),for:n(28),key:n(29),"for-index":n(30),"for-item":n(31),alias:n(32)}},function(e,t,n){var r=n(24),o=n(27).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,register:function(e,t,n){},create:function(e,t,n,o,i,a,s,c,l,d,u){var p=l.createVirtualNode("wx:"+e);p.__wxIfCondValue=!0,p.__wxIfNextNode=null,p.__wxIfHasTrueCond=!0;var h=null;"if"!==e&&("wx:if"!==(h=u.childNodes[u.childNodes.length-1]).is&&"wx:elif"!==h.is?h=null:h.__wxIfNextNode=p),n.id&&(p.id=n.id);var f=p.__wxIfUpdateNode=function(){var e=p.__wxIfCondValue;if(h&&h.__wxIfHasTrueCond&&(e=!1),e&&!p.childNodes.length){var t=r.proxyTopScope(a),u=r.proxySubScopes(s);p.__wxTopScope=t,p.__wxSubScopes=u,d(n.c,l,p,o,i,t,u,c)}else if(!e&&p.childNodes.length){for(var f in r.removeBindingsForScope(p.__wxTopScope),p.__wxSubScopes)r.removeBindingsForScope(p.__wxSubScopes[f]);for(;p.childNodes.length;)p.removeChild(p.childNodes[0])}p.__wxIfNextNode&&p.__wxIfNextNode.__wxIfUpdateNode()},g=function(e){p.__wxIfCondValue=!!e,p.__wxIfHasTrueCond=p.__wxIfCondValue||h&&h.__wxIfHasTrueCond,f()};return"else"===e?g(!0):(r.addBindings(a,s,t.b,p,{e:t.d,o:function(e,t,n){g(n)}}),g(t.d(o,i,null))),p}}},function(e,t){t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var n=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},r=t.STRING_ESCAPE_MAP={},o="";for(var i in n)r[n[i]]=i,o+=n[i];t.STRING_ESCAPE_REGEXP=new RegExp("["+o+"]","g")},function(e,t,n){var r=(n(18),n(24)),o=n(27).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],register:function(e,t,n){},create:function(e,t,n,o,i,a,s,c,l,d){var u=n._wxForIndex||"index",p=n._wxForItem||"item",h=n._wxKey,f=l.createVirtualNode("wx:for:list");n.id&&(f.id=n.id),r.create("",a,s,(function(e,n,r){var o=t.d(e,n,null);return v(o,e,n,r),o}),t.l,t.b);var g=function(e,t,o,i,h){var g=l.createVirtualNode("wx:for:item"),_=r.proxyTopScope(a),m=r.proxySubScopes(s);g.__wxTopScope=_,g.__wxSubScopes=m,g.__wxForToRemove=!1,g.__wxForKeyStr="";var y=r.create(u,_,m,null,null,[]),v=r.create(p,_,m,null,[o],[]);return m[u]=y,m[p]=v,t[u]=o,t[p]=i,d(n.c,l,g,e,t,_,m,c),void 0===h?f.appendChild(g):f.insertBefore(g,h),g},_=function(e,t,n,i,a,s){var c=e.__wxSubScopes[p];r.updateLvaluePath(c,[i]),a&&(s?f.insertBefore(e,s):f.appendChild(e));var l=e.__wxSubScopes[u];n[u]=i,r.updateBinding(l,[],o,n,t)},m=function(e,t,n,o,i,a){o[p]=i,r.updateBinding(e.__wxSubScopes[p],t,n,o,a)},y=function(e){for(var t in r.removeBindingsForScope(e.__wxTopScope),f.__wxSubScopes)r.removeBindingsForScope(e.__wxSubScopes[t]);f.removeChild(e)},v=function(e,t,n,r){var o="",i=e;"object"==typeof e&&null!==e||(i=[]);var a={};for(o in n)a[o]=n[o];var s=0;if(h){var c=[],l=e instanceof Array,d=[];if(!l){var u=i;for(o in i=[],u)i.push(u[o]),d.push(o)}for(s=0;s<i.length;s++)c.push(String(i[s][h]));if(0===i.length)for(;f.childNodes.length;)y(f.childNodes[0]);else{var p=Object.create(null),v=Object.create(null),A=f.childNodes,b=null,w="";for(s=0;s<A.length;s++)p[w=(b=A[s]).__wxForKeyStr]>=0?(y(b),s--):(p[w]=s,v[w]=b,b.__wxForToRemove=!0);var C=-1,I=0,E=1,S=[];for((I=p[i[0][h]])>=0||(I=-1),A[I]&&(A[I].__wxForToRemove=!1),s=1;s<i.length;s++)(E=p[i[s][h]])>=0&&(C<I&&(I<E||C>E)&&(S.push(A[I]),C=I),A[I=E]&&(A[I].__wxForToRemove=!1));for(C<I&&S.push(A[I]),s=0;s<A.length;s++)(b=A[s]).__wxForToRemove&&(y(b),s--);var T=S.shift(),x=0;for(s=0;s<i.length;s++){var k=i[s],P=v[k[h]];if(v[k[h]]=null,P){var D=!0;if(P===T){for(;A[x]!==T;)x++;x++,T=S.shift(),D=!1}_(b=P,r,a,l?s:d[s],D,A[x]),D&&A[x]===b&&x++,m(b,[],t,a,i[s],r)}else b=g(t,a,l?s:d[s],i[s],A[x]),x++,b.__wxForKeyStr=String(k[h])}}}else{for(;f.childNodes.length;)y(f.childNodes[0]);if(e instanceof Array)for(s=0;s<i.length;s++)g(t,a,s,i[s]);else for(o in i)g(t,a,o,i[o])}};return v(t.d(o,i,null),o,i,null),f}}},function(e,t){e.exports={attachedToBlock:!0,register:function(e,t,n){n._wxKey=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,n){n._wxForIndex=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,n){n._wxForItem=t.d},create:function(){}}},function(e,t,n){var r=n(24),o=n(27).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,register:function(e,t,n){},create:function(e,t,n,o,i,a,s,c,l,d){var u=t.s[0],p=r.create(u,a,s,t.d,t.l,t.b),h={},f="";for(f in s)h[f]=s[f];h[u]=p;var g={};for(f in i)g[f]=i[f];g[u]=t.d(o,i,null);var _=l.createVirtualNode("wx:alias");return n.id&&(_.id=n.id),d(n.c,l,_,o,g,a,h,c),_}}}]);e.exports=t},446:(e,t,n)=>{var r=n(821);e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){var r=null;"undefined"!=typeof NativeGlobal&&void 0!==NativeGlobal.WebAssembly?r=NativeGlobal.WebAssembly:"undefined"!=typeof WebAssembly&&(r=WebAssembly),t.wasm_initialize=function(e,o){var i=e.bin,a=new r.Memory({initial:16}),s={js:{mem:a},"./exparser_scl_backend_bg.js":n(3)},c=function(e){for(var n in e.instance.exports)t[n]=e.instance.exports[n];t.memory||(t.memory=a),t.wasm_initialize=null,o(t)},l=r.instantiate(i,s);"function"==typeof l.then?l.then(c):c(l)}},function(e,t,n){"use strict";function r(){}function o(){}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),r.prototype.encode=function(e){for(var t=[],n=e.length,r=0;r<n;){var o=e.codePointAt(r),i=0,a=0;for(o<=127?(i=0,a=0):o<=2047?(i=6,a=192):o<=65535?(i=12,a=224):o<=2097151&&(i=18,a=240),t.push(a|o>>i),i-=6;i>=0;)t.push(128|o>>i&63),i-=6;r+=o>=65536?2:1}return t},o.prototype.decode=function(e){if(void 0===e)return"";for(var t="",n=0;n<e.length;){var r=e[n],o=0,i=0;if(r<=127?(o=0,i=255&r):r<=223?(o=1,i=31&r):r<=239?(o=2,i=15&r):r<=244&&(o=3,i=7&r),e.length-n-o>0)for(var a=0;a<o;)i=i<<6|63&(r=e[n+a+1]),a+=1;else i=65533,o=e.length-n;t+=String.fromCodePoint(i),n+=o+1}return t}},function(e,t,n){"use strict";n.r(t),n.d(t,"setErrorListener",(function(){return o})),n.d(t,"consoleErrorReport",(function(){return i}));var r=null,o=function(e){r=e},i=function(e){if(r){var t=e.split("\nStack:\n",2)[0].trim();r(new Error(t))}else console.error(e)}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"wasm_main",(function(){return x})),n.d(t,"compileStyleSheetToJson",(function(){return R})),n.d(t,"compileStyleSheetToBincode",(function(){return M})),n.d(t,"BoundingClientRect",(function(){return L})),n.d(t,"Callback",(function(){return B})),n.d(t,"Context",(function(){return F})),n.d(t,"Element",(function(){return W})),n.d(t,"Listener",(function(){return j})),n.d(t,"ScrollPosition",(function(){return U})),n.d(t,"StyleSheetGroup",(function(){return V})),n.d(t,"__wbg_instanceof_ExparserElement_74ace43f429ed53b",(function(){return G})),n.d(t,"__wbg_invoke_e595dd16845dff2f",(function(){return $})),n.d(t,"__wbindgen_object_drop_ref",(function(){return H})),n.d(t,"__wbg_subscribe_76e57ecbbf87c182",(function(){return Z})),n.d(t,"__wbg_setTimeout_73cd22a52998d9f8",(function(){return Q})),n.d(t,"__wbg_timeoutCallback_5a0fccae410eec7e",(function(){return Y})),n.d(t,"__wbg_triggerRender_8291f7e41c9ba309",(function(){return z})),n.d(t,"__wbg_triggerEvent_fe8e7714c046228c",(function(){return q})),n.d(t,"__wbindgen_json_parse",(function(){return J})),n.d(t,"__wbindgen_json_serialize",(function(){return K})),n.d(t,"__wbg_getTheme_6ee867e661a1fe00",(function(){return X})),n.d(t,"__wbg_getWindowWidth_5d3459d21d0fb732",(function(){return ee})),n.d(t,"__wbg_getWindowHeight_5055bbf1cbab7ad7",(function(){return te})),n.d(t,"__wbg_getDevicePixelRatio_bad18211fbb2a2d3",(function(){return ne})),n.d(t,"__wbg_getSafeArea_e02a51c464e82ae4",(function(){return re})),n.d(t,"__wbg_getEngineConfig_d071336fb0f35c81",(function(){return oe})),n.d(t,"__wbindgen_object_clone_ref",(function(){return ie})),n.d(t,"__wbg_new_59cb74e423758ede",(function(){return ae})),n.d(t,"__wbg_stack_558ba5917b466edd",(function(){return se})),n.d(t,"__wbg_error_4bb6c2a97407129a",(function(){return ce})),n.d(t,"__wbindgen_string_new",(function(){return le})),n.d(t,"__wbg_debug_733679f61d937b18",(function(){return de})),n.d(t,"__wbg_error_c81c8d172df3cb18",(function(){return ue})),n.d(t,"__wbg_info_23f7f04053448bbc",(function(){return pe})),n.d(t,"__wbg_log_8485ead621ceded9",(function(){return he})),n.d(t,"__wbg_warn_eb158fa0859088bf",(function(){return fe})),n.d(t,"__wbindgen_debug_string",(function(){return ge})),n.d(t,"__wbindgen_throw",(function(){return _e}));var o=n(1),i=n(2),a=n(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=new Array(32).fill(void 0);function p(e){return u[e]}u.push(void 0,null,!0,!1);var h=u.length;function f(e){var t=p(e);return function(e){e<36||(u[e]=h,h=e)}(e),t}var g=new(void 0===o.a?(0,e.require)("util").TextDecoder:o.a)("utf-8",{ignoreBOM:!0,fatal:!0});g.decode();var _=null;function m(){return null!==_&&_.buffer===a.memory.buffer||(_=new Uint8Array(a.memory.buffer)),_}function y(e,t){return g.decode(m().subarray(e,e+t))}function v(e){h===u.length&&u.push(u.length+1);var t=h;return h=u[t],u[t]=e,t}var A=0,b=new(void 0===o.b?(0,e.require)("util").TextEncoder:o.b)("utf-8"),w="function"==typeof b.encodeInto?function(e,t){return b.encodeInto(e,t)}:function(e,t){var n=b.encode(e);return t.set(n),{read:e.length,written:n.length}};function C(e,t,n){if(void 0===n){var r=b.encode(e),o=t(r.length);return m().subarray(o,o+r.length).set(r),A=r.length,o}for(var i=e.length,a=t(i),s=m(),c=0;c<i;c++){var l=e.charCodeAt(c);if(l>127)break;s[a+c]=l}if(c!==i){0!==c&&(e=e.slice(c)),a=n(a,i,i=c+3*e.length);var d=m().subarray(a+c,a+i);c+=w(e,d).written}return A=c,a}var I=null;function E(){return null!==I&&I.buffer===a.memory.buffer||(I=new Int32Array(a.memory.buffer)),I}function S(e){return function(){try{return e.apply(this,arguments)}catch(e){a.__wbindgen_exn_store(v(e))}}}function T(e){return function(){throw new Error("".concat(e," is not defined"))}}function x(){a.wasm_main()}function k(e){return null==e}function P(e,t){var n=t(1*e.length);return m().set(e,n/1),A=e.length,n}var D=32;function O(e){if(1==D)throw new Error("out of js stack");return u[--D]=e,D}function N(e,t){if(!(e instanceof t))throw new Error("expected instance of ".concat(t.name));return e.ptr}function R(e,t){try{var n=a.__wbindgen_add_to_stack_pointer(-16),r=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),o=A,i=C(t,a.__wbindgen_malloc,a.__wbindgen_realloc),s=A;a.compileStyleSheetToJson(n,r,o,i,s);var c=E()[n/4+0],l=E()[n/4+1];return y(c,l)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(c,l)}}function M(e,t){try{var n=a.__wbindgen_add_to_stack_pointer(-16),r=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),o=A,i=C(t,a.__wbindgen_malloc,a.__wbindgen_realloc),s=A;a.compileStyleSheetToBincode(n,r,o,i,s);var c=E()[n/4+0],l=E()[n/4+1],d=(u=c,p=l,m().subarray(u/1,u/1+p)).slice();return a.__wbindgen_free(c,1*l),d}finally{a.__wbindgen_add_to_stack_pointer(16)}var u,p}var L=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_boundingclientrect_free(e)}},{key:"left",get:function(){return a.__wbg_get_boundingclientrect_left(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_left(this.ptr,e)}},{key:"top",get:function(){return a.__wbg_get_boundingclientrect_top(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_top(this.ptr,e)}},{key:"width",get:function(){return a.__wbg_get_boundingclientrect_width(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_width(this.ptr,e)}},{key:"height",get:function(){return a.__wbg_get_boundingclientrect_height(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_height(this.ptr,e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),B=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_callback_free(e)}},{key:"exec",value:function(e){try{var t=this.__destroy_into_raw();a.callback_exec(t,O(e))}finally{u[D++]=void 0}}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),F=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_context_free(e)}},{key:"getWindowWidth",value:function(){return a.context_getWindowWidth(this.ptr)}},{key:"getWindowHeight",value:function(){return a.context_getWindowHeight(this.ptr)}},{key:"getDevicePixelRatio",value:function(){return a.context_getDevicePixelRatio(this.ptr)}},{key:"getTheme",value:function(){try{var e=a.__wbindgen_add_to_stack_pointer(-16);a.context_getTheme(e,this.ptr);var t=E()[e/4+0],n=E()[e/4+1];return y(t,n)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(t,n)}}},{key:"appendStyleSheet",value:function(e){var t=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;return a.context_appendStyleSheet(this.ptr,t,n)>>>0}},{key:"appendStyleSheetJson",value:function(e,t){var n=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=A,o=k(t)?0:C(t,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A;return a.context_appendStyleSheetJson(this.ptr,n,r,o,i)>>>0}},{key:"appendStyleSheetBincode",value:function(e,t){var n=P(e,a.__wbindgen_malloc),r=A,o=k(t)?0:C(t,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A;return a.context_appendStyleSheetBincode(this.ptr,n,r,o,i)>>>0}},{key:"replaceStyleSheet",value:function(e,t){var n=C(t,a.__wbindgen_malloc,a.__wbindgen_realloc),r=A;a.context_replaceStyleSheet(this.ptr,e,n,r)}},{key:"replaceStyleSheetJson",value:function(e,t,n){var r=C(t,a.__wbindgen_malloc,a.__wbindgen_realloc),o=A,i=k(n)?0:C(n,a.__wbindgen_malloc,a.__wbindgen_realloc),s=A;a.context_replaceStyleSheetJson(this.ptr,e,r,o,i,s)}},{key:"replaceStyleSheetBincode",value:function(e,t,n){var r=P(t,a.__wbindgen_malloc),o=A,i=k(n)?0:C(n,a.__wbindgen_malloc,a.__wbindgen_realloc),s=A;a.context_replaceStyleSheetBincode(this.ptr,e,r,o,i,s)}},{key:"clearStyleSheets",value:function(){a.context_clearStyleSheets(this.ptr)}},{key:"render",value:function(e){try{a.context_render(this.ptr,O(e))}finally{u[D++]=void 0}}},{key:"bindRootNode",value:function(e){N(e,W),a.context_bindRootNode(this.ptr,e.ptr)}},{key:"getRootNode",value:function(){var e=a.context_getRootNode(this.ptr);return 0===e?void 0:W.__wrap(e)}},{key:"createElement",value:function(e,t){var n=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=A,o=C(t,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A,s=a.context_createElement(this.ptr,n,r,o,i);return W.__wrap(s)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"create",value:function(){var t=a.context_create();return e.__wrap(t)}},{key:"getNodeUnderPoint",value:function(e,t){var n=a.context_getNodeUnderPoint(e,t);return W.__wrap(n)}},{key:"getExparserElementByViewId",value:function(e){return f(a.context_getExparserElementByViewId(e))}}]),e}(),W=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_element_free(e)}},{key:"release",value:function(){var e=this.__destroy_into_raw();a.element_release(e)}},{key:"associateComponent",value:function(e){a.element_associateComponent(this.ptr,v(e))}},{key:"cloneNode",value:function(){var t=a.element_cloneNode(this.ptr);return e.__wrap(t)}},{key:"equal",value:function(t){return N(t,e),0!==a.element_equal(this.ptr,t.ptr)}},{key:"getParentNode",value:function(){var t=a.element_getParentNode(this.ptr);return 0===t?void 0:e.__wrap(t)}},{key:"getChildNode",value:function(t){var n=a.element_getChildNode(this.ptr,t);return 0===n?void 0:e.__wrap(n)}},{key:"appendChild",value:function(t){N(t,e),a.element_appendChild(this.ptr,t.ptr)}},{key:"insertChild",value:function(t,n){N(t,e),a.element_insertChild(this.ptr,t.ptr,n)}},{key:"removeChild",value:function(e){a.element_removeChild(this.ptr,e)}},{key:"replaceChild",value:function(t,n){N(t,e),a.element_replaceChild(this.ptr,t.ptr,n)}},{key:"splice",value:function(t,n,r){N(r,e),a.element_splice(this.ptr,t,n,r.ptr)}},{key:"findChildPosition",value:function(t){return N(t,e),a.element_findChildPosition(this.ptr,t.ptr)}},{key:"length",value:function(){return a.element_length(this.ptr)>>>0}},{key:"getBoundingClientRect",value:function(){var e=a.element_getBoundingClientRect(this.ptr);return 0===e?void 0:L.__wrap(e)}},{key:"getScrollPosition",value:function(){var e=a.element_getScrollPosition(this.ptr);return U.__wrap(e)}},{key:"setScrollPosition",value:function(e,t,n){a.element_setScrollPosition(this.ptr,!k(e),k(e)?0:e,!k(t),k(t)?0:t,!k(n),k(n)?0:n)}},{key:"setId",value:function(e){var t=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;a.element_setId(this.ptr,t,n)}},{key:"setClass",value:function(e){var t=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;a.element_setClass(this.ptr,t,n)}},{key:"setStyle",value:function(e){var t=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;a.element_setStyle(this.ptr,t,n)}},{key:"setStyleScope",value:function(e){var t=k(e)?0:C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;a.element_setStyleScope(this.ptr,t,n)}},{key:"setAttribute",value:function(e,t){var n=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=A,o=C(t,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A;a.element_setAttribute(this.ptr,n,r,o,i)}},{key:"getAttribute",value:function(e){try{var t=a.__wbindgen_add_to_stack_pointer(-16),n=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=A;a.element_getAttribute(t,this.ptr,n,r);var o=E()[t/4+0],i=E()[t/4+1];return y(o,i)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(o,i)}}},{key:"setText",value:function(e){var t=C(e,a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;a.element_setText(this.ptr,t,n)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),j=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_listener_free(e)}},{key:"exec",value:function(e){try{return 0!==a.listener_exec(this.ptr,O(e))}finally{u[D++]=void 0}}},{key:"release",value:function(){var e=this.__destroy_into_raw();a.__wbg_callback_free(e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),U=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_scrollposition_free(e)}},{key:"scrollLeft",get:function(){return a.__wbg_get_boundingclientrect_left(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_left(this.ptr,e)}},{key:"scrollTop",get:function(){return a.__wbg_get_boundingclientrect_top(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_top(this.ptr,e)}},{key:"scrollWidth",get:function(){return a.__wbg_get_boundingclientrect_width(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_width(this.ptr,e)}},{key:"scrollHeight",get:function(){return a.__wbg_get_boundingclientrect_height(this.ptr)},set:function(e){a.__wbg_set_boundingclientrect_height(this.ptr,e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),V=function(){function e(){s(this,e)}return l(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.__wbg_stylesheetgroup_free(e)}}]),e}(),G=function(e){return p(e)instanceof r.exparser.Element},$=S((function(e,t,n,o){r.invoke(y(e,t),f(n),0===o?void 0:B.__wrap(o))})),H=function(e){f(e)},Z=S((function(e,t,n){r.subscribe(y(e,t),0===n?void 0:j.__wrap(n))})),Q=function(e,t){return setTimeout(p(e),t>>>0)},Y=function(e,t){r.timeoutCallback(e>>>0,B.__wrap(t))},z="function"==typeof r.exparser.triggerRender?r.exparser.triggerRender:T("__exparserSclEngine__.exparser.triggerRender"),q=function(e,t,n,o,i){r.exparser.triggerEvent(p(e),y(t,n),f(o),f(i))},J=function(e,t){return v(JSON.parse(y(e,t)))},K=function(e,t){var n=p(t),r=C(JSON.stringify(void 0===n?null:n),a.__wbindgen_malloc,a.__wbindgen_realloc),o=A;E()[e/4+1]=o,E()[e/4+0]=r},X=function(e){var t=C(r.getTheme(),a.__wbindgen_malloc,a.__wbindgen_realloc),n=A;E()[e/4+1]=n,E()[e/4+0]=t},ee="function"==typeof r.getWindowWidth?r.getWindowWidth:T("__exparserSclEngine__.getWindowWidth"),te="function"==typeof r.getWindowHeight?r.getWindowHeight:T("__exparserSclEngine__.getWindowHeight"),ne="function"==typeof r.getDevicePixelRatio?r.getDevicePixelRatio:T("__exparserSclEngine__.getDevicePixelRatio"),re=function(){return v(r.getSafeArea())},oe=function(){return v(r.getEngineConfig())},ie=function(e){return v(p(e))},ae=function(){return v(new Error)},se=function(e,t){var n=C(p(t).stack,a.__wbindgen_malloc,a.__wbindgen_realloc),r=A;E()[e/4+1]=r,E()[e/4+0]=n},ce=function(e,t){try{Object(i.consoleErrorReport)(y(e,t))}finally{a.__wbindgen_free(e,t)}},le=function(e,t){return v(y(e,t))},de=function(e){console.debug(p(e))},ue=function(e){Object(i.consoleErrorReport)(p(e))},pe=function(e){console.info(p(e))},he=function(e){console.log(p(e))},fe=function(e){console.warn(p(e))},ge=function(e,t){var n=C(function e(t){var n=d(t);if("number"==n||"boolean"==n||null==t)return"".concat(t);if("string"==n)return'"'.concat(t,'"');if("symbol"==n){var r=t.description;return null==r?"Symbol":"Symbol(".concat(r,")")}if("function"==n){var o=t.name;return"string"==typeof o&&o.length>0?"Function(".concat(o,")"):"Function"}if(Array.isArray(t)){var i=t.length,a="[";i>0&&(a+=e(t[0]));for(var s=1;s<i;s++)a+=", "+e(t[s]);return a+"]"}var c,l=/\[object ([^\]]+)\]/.exec(toString.call(t));if(!(l.length>1))return toString.call(t);if("Object"==(c=l[1]))try{return"Object("+JSON.stringify(t)+")"}catch(e){return"Object"}return t instanceof Error?"".concat(t.name,": ").concat(t.message,"\n").concat(t.stack):c}(p(t)),a.__wbindgen_malloc,a.__wbindgen_realloc),r=A;E()[e/4+1]=r,E()[e/4+0]=n},_e=function(e,t){throw new Error(y(e,t))}}.call(this,n(5)(e))},function(e,t,n){var r=n(2),o=n(0);e.exports=n(3);var i=function(){e.exports.memory=o.memory,"function"==typeof o.__wbindgen_start?o.__wbindgen_start():"function"==typeof o.wasm_main&&o.wasm_main()},a=null;e.exports.wasm_initialize=function(e,t){void 0===t&&(t=e,e=void 0),o.wasm_initialize?a?a.push(t):(a=[t],o.wasm_initialize(e,(function(){i();var e=a;a=null,e.forEach((function(e){e()}))}))):t&&setTimeout(t,0)},o.wasm_initialize||i(),e.exports.setErrorListener=r.setErrorListener},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}])},668:(e,t,n)=>{n(57).J.push("AftQA21wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLW1hc2ttcC1idWJibGUtYWN0aW9uLXNoZWV0LS1tZW51bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tY2VsbG1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGxfX2hvdmVybXAtYnViYmxlLWFjdGlvbi1zaGVldC0tY2VsbC1pbWdtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1jZWxsLWRlc2NtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1mb290bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uc2FmZS1hcmVhLWluc2V0LWJvdHRvbW1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWJ1dHRvbl9fYmVmb3JlbXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uX19jb250ZW50bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uX19ob3Zlcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNvbnRlbnRtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1jb250ZW50bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tbWVudW1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGxfX2hvdmVybXAtYnViYmxlLWFjdGlvbi1zaGVldC0tY2VsbC1kZXNjbXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9ubXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uX19iZWZvcmVtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1idXR0b25fX2NvbnRlbnRtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1idXR0b25fX2hvdmVy+8ADFi4ODAEKAAAAAAMBABwAABAcBQIDAC8CAAAAAC4CAAAAAC0CAAAAADACAAAAAAAAWA4MAQocABwAAwEcHAAAEEYOJgMAIgPt7e3/AgIALwIAAAAALgIAAAAAKAIAAApDJwgAAIA/MwIAAMBBNAIAAMBBMgIAAMBBMQIAAMBBAQMACAEADQYAAAAWDgwBCjgAOAADATgcAAAQBAECAgAAAFgODAEKVABUAAMBVCoAABBGDCYDACcCAABgQigCAABgQjMCAABAQTQCAABAQTICAABAQTECAABAQSID/////0UCAABAQUYCAABAQUcCAABAQUgCAABAQQAAIxgWARR+AH4AAwF+KgEKqACoAAMBqCMAACAHASID7Ozs/wAAHw4MAQrLAMsAAwHLIAAAEA0CJwIAAABCKAIAAABCAAAoDgwBCusA6wADAeshAAAQFgQWAgAAIEETAwAAAIAYAgA3AgAAAEEAACIUEgEQ+wwBAPsMAQAFAfsMARwAABAKAgICACcIAACAPwAAKxQSARD7KAEA+ygBAAUB+ygBHgAAEBMDAgIANAkB+0YBFgAAIgP/////AABHFBIBEPtcAQD7XAEABQH7XAEmAAAQLwcCAwAvAgAAAAAtAgAAAAAuAgAAAAAoAgAAgD8iAwAAABpJAQoBAwAAgD8AAAA/AABSFBIBEPuCAQD7ggEABQH7ggEnAAAQOgsmAwAzAgAAAAA0AgAAAAAyAgAAgEExAgAAgEEYAgAWAgAAiEEXAgAAYEIeAwATAwAAAOYoAgAAYEIAAB8UEgEQ+6kBAPupAQAFAfupASUAABAHASID7Ozs/wAAHxQSARD7zgEA+84BAAUB+84BHwAAEAcBJwMAAMhCAQAfFBIBEPvtAQD77QEABQH77QEfAAAQBwEnBAAAyEIBAR8UEgEQ+wwCAPsMAgAFAfsMAhwAABAHASIDERER/wECHxQSARD7KAIA+ygCAAUB+ygCKgAAEAcBIgMfHx//AQIvJCIBIPtSAgD7UgIABQH7UgIqARD7fAIA+3wCAAUB+3wCIwAAIAcBIgM3Nzf/AQIfFBIBEPufAgD7nwIABQH7nwIhAAAQBwETA////4ABAh8UEgEQ+8ACAPvAAgAFAfvAAh4AABAHASIDHx8f/wECHxQSARD73gIA+94CAAUB+94CJgAAEAcBIgP///8NAQIfFBIBEPsEAwD7BAMABQH7BAMnAAAQBwETA////8wBAh8UEgEQ+ysDAPsrAwAFAfsrAyUAABAHASIDNzc3/wECKAMMAAAJAQcAAAQBAgEADAAACQEHAAAEAQICAAwAAAkBBwAABAEJAgA=")},574:(e,t,n)=>{n(57).J.push("AfvjAW1wLWRpYWxvZy0tcm9vdG1wLWRpYWxvZy0tbWFza21wLWRpYWxvZy0tbWFza19faW5tcC1kaWFsb2ctLWNvbnRhaW5lcm1wLWRpYWxvZy0tY29udGVudG1wLWRpYWxvZy0tY29udGVudF9faW5tcC1kaWFsb2ctLWhlYWRtcC1kaWFsb2ctLXRpdGxlbXAtZGlhbG9nLS1ib2R5bXAtZGlhbG9nLS1mb290bXAtZGlhbG9nLS1mb290bXAtZGlhbG9nLS1mb290X19hZnRlcm1wLWRpYWxvZy0tYnV0dG9ubXAtZGlhbG9nLS1idXR0b25fX2FjdGl2ZW1wLWRpYWxvZy0tYnV0dG9uX19hZnRlcm1wLWRpYWxvZy0tYnV0dG9uX19maXJzdC1jaGlsZF9fYWZ0ZXJtcC1kaWFsb2ctLWJ1dHRvbl9fZGVmYXVsdG1wLWRpYWxvZy0tY29udGVudG1wLWRpYWxvZy0tYm9keW1wLWRpYWxvZy0tYnV0dG9ubXAtZGlhbG9nLS1idXR0b25fX2RlZmF1bHRtcC1kaWFsb2ctLWJ1dHRvbl9fYWN0aXZlbXAtZGlhbG9nLS1mb290X19hZnRlcm1wLWRpYWxvZy0tYnV0dG9uX19hZnRlcvvqAxc5DgwBCgAAAAADAQAPAAAQJwkoBAAAyEInAwAAyEIBAwAWAgAAgEEDAgAEAgAIAwAKAgAVAEB6RAAASw4MAQoPAA8AAwEPDwAAEDkLAgMALwIAAAAALgIAAAAALQIAAAAAMAIAAAAAIgMAAACZFAAAAABKAwECAEsCAchMAwEDAE0CAQAAABgODAEKHgAeAAMBHhMAABAGARQAAIA/AAA3DgwBCjEAMQADATEUAAAQJQgCAwAvAgAAAAAuAgAAAAAtAgAAAAAwAgAAAAABAwANAQAKAgAAAF0ODAEKRQBFAAMBRRIAABBLECID/////xgCAEUCAAAAQUYCAAAAQUcCAAAAQUgCAAAAQQMCAAQCAAEDAAgDACcCAACgQxQAAAAASgMBAgBLAgHITAMBAwBNAgEAAAAYDgwBClcAVwADAVcWAAAQBgEUAACAPwAAMQ4MAQptAG0AAwFtDwAAEB8FNwIAAABCNQIAAMBBOAIAAAAANgIAAMBBKAIAAMBBAAAcDgwBCnwAfAADAXwQAAAQCgIZAgAWAgAAiEEAACsODAEKjACMAAMBjA8AABAZBDECAADAQTICAADAQRYCAACIQRMDAAAAgAAAFg4MAQqbAJsAAwGbDwAAEAQBAQMAAAAoDgwBCqoAqgADAaoPAAAQFgQCAgAoAgAAYEIXAgAAYEIWAgAAiEEAAEEODAEKuQC5AAMBuRYAABAvBwIDAC0CAAAAAC8CAAAAAC4CAAAAACgCAACAPyIDAAAAGkkBCgEDAACAPwAAAD8AACcODAEKzwDPAAMBzxEAABAVBQECAA4AAIA/EwNXa5X/GQIAAgIAAAAZDgwBCuAA4AADAeAZAAAQBwEiA+zs7P8AAEEODAEK+QD5AAMB+RgAABAvBwIDAC0CAAAAAC8CAACAPycCAACAPzACAAAAACIDAAAAGkkBCgEDAAAAPwAAgD8AABwUEgEQ+xEBAPsRAQAFAfsRASUAABAEAQEBAAAAHxQSARD7NgEA+zYBAAUB+zYBGgAAEAcBEwMAAADmAAAlFBIBEPtQAQD7UAEABQH7UAESAAAQDQIiAx4eHv8TA/////8BACUUEgEQ+2IBAPtiAQAFAftiAQ8AABANAiIDHh4e/xMD////gAEAHxQSARD7cQEA+3EBAAUB+3EBEQAAEAcBEwN9kKn/AQAfFBIBEPuCAQD7ggEABQH7ggEaAAAQBwETA////5kBAB8UEgEQ+5wBAPucAQAFAfucARkAABAHASIDNzc3/wEAMCUjAhD7tQEA+7UBAAUB+7UBFgAAEPvLAQD7ywEABQH7ywEYAAAQBwEiA////w0BAA4BDAAACQEHAAAEAQkCAA==")},81:(e,t,n)=>{n(57).J.push("Aft3Am1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tY29udGVudHNhZmUtYXJlYS1pbnNldC1ib3R0b21tcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWhlYWRtcC1oYWxmLXNjcmVlbi1kaWFsb2ctLXRpdGxlbXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1ib2R5bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1mb290bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25tcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbm1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9uX19hY3RpdmVtcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbl9fcHJpbWFyeW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9uX19wcmltYXJ5bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25fX2FjdGl2ZW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0taGVhZG1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYm9keW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9ubXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25tcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbl9fYWN0aXZlbXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25fX3ByaW1hcnltcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbl9fcHJpbWFyeW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9uX19hY3RpdmX7dwIPOw4MAQoAAAAAAwEAHgAAECkHOAkBHhYAABgCADMCAADAQTQCAADAQTICAADAQTECAADAQScIAACAPwAAJQ4MAQo0ADQAAwE0GwAAEBMDNwIAAABBLAIAAEBCEwMAAADmAAAcDgwBCk8ATwADAU8cAAAQCgIZAgAWAgAAiEEAACsODAEKawBrAAMBaxsAABAZBDECAADAQTICAADAQRYCAACIQRMDAAAA5gAAKA4MAQqGAIYAAwGGGwAAEBYFAQMAAgIANwIAAMBBFgIAAIhBDQEAAABnDgwBCqEAoQADAaEdAAAQVRAoAgAAIEInAgAA8EIXAgAAIEJFAgAAgEBGAgAAgEBHAgAAgEBIAgAAgEAiA/Ly8v8BAgATAwauVv8ZAgACAgAfAgAAgD8YAgA1AgAAAEE2AgAAAEEAABsQDgEMvgC+AAUCvh3bJQAAIAcBIgPm5ub/AAAlFBIBEPsAAQD7AAEABQH7AAEmAAAQDQIiAwfBYP8TA/////8AACMYFgEU+yYBAPsmAQAJAvsmASb7TAElAAAgBwEiAwauVv8AAB8UEgEQ+3EBAPtxAQAFAftxARsAABAHARMD////zAEAHxQSARD7jAEA+4wBAAUB+4wBGwAAEAcBEwP////MAQAlFBIBEPunAQD7pwEABQH7pwEdAAAQDQIiA////xQTA9bW1v8BACMYFgEU+8QBAPvEAQAJAvvEAR374QElAAAgBwEiA////yABACUUEgEQ+wYCAPsGAgAFAfsGAiYAABANAiIDB8Fg/xMD/////wEAIxgWART7LAIA+ywCAAkC+ywCJvtSAiUAACAHASIDBq5WmQEADgEMAAAJAQcAAAQBCQIA")},741:(e,t,n)=>{n(57).J.push("AfsIAW1wLWhhbGYtc2NyZWVuLXBvcHVwLS1yb290bXAtaGFsZi1zY3JlZW4tcG9wdXAtLW1hc2ttcC1oYWxmLXNjcmVlbi1wb3B1cC0tbWFza19faW5tcC1oYWxmLXNjcmVlbi1wb3B1cC0tY29udGFpbmVybXAtaGFsZi1zY3JlZW4tcG9wdXAtLWNvbnRhaW5lcl9faW5tcC1oYWxmLXNjcmVlbi1wb3B1cC0tY29udGVudG1wLWhhbGYtc2NyZWVuLXBvcHVwLS1jb250ZW50bXAtaGFsZi1zY3JlZW4tcG9wdXAtLWNvbnRlbnRtcC1oYWxmLXNjcmVlbi1wb3B1cC0tY29udGVudPu9AQkwDgwBCgAAAAADAQAaAAAQHgYoBAAAyEInAwAAyEIWAgAAgEEDAgAEAgAVAEB6RAAASw4MAQoaABoAAwEaGgAAEDkLAgMALwIAAAAALgIAAAAALQIAAAAAMAIAAAAAIgMAAACZFAAAAABKAwECAEsCAchMAwEDAE0CAQAAABgODAEKNAA0AAMBNB4AABAGARQAAIA/AABYDgwBClIAUgADAVIfAAAQRg0CAwBKAwEBAEsCAchMAwEBAE0CAQAnCAAAgD8vCAAAgD8tAgAAAAAuAgAAAABJAQwBAgIAAAAACAAAAAABAwAIAQANAQAAACIODAEKcQBxAAMBcSMAABAQAUkBDAECAgAAAAAIAACAvwAAVQ4MAQqUAJQAAwGUHQAAEEMNJgMAJwMAAMhCIgP/////EwMAAAD/RQIAAEBBRgIAAEBBRwIAAEBBSAIAAEBBAgIAOAIAAEDBNAIAAEBBAwIABAIAAAAZDgwBCrEAsQADAbEdAAAQBwEnAwAAyEIBABkODAEKzgDOAAMBzh0AABAHAScEAADIQgEBHw4MAQrrAOsAAwHrHQAAEA0CIgMZGRn/EwP/////AQIoAwwAAAkBBwAABAECAQAMAAAJAQcAAAQBAgIADAAACQEHAAAEAQkCAA==")},161:(e,t,n)=>{n(57).J.push("AftpBG1wLWhvcml6b25hbC1idWJibGUtLXJvb3RtcC1ob3Jpem9uYWwtYnViYmxlLS1tYXNrbXAtaG9yaXpvbmFsLWJ1YmJsZS0tbWFza19faW5tcC1ob3Jpem9uYWwtYnViYmxlLS1jb250ZW50bXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2xvc2UtY29udGFpbmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2xvc2UtY29udGFpbmVyX19pbm1wLWhvcml6b25hbC1idWJibGUtLWNsb3NlLWJ0bm1wLWhvcml6b25hbC1idWJibGUtLWNsb3NlLWJ0bi1pbWdtcC1ob3Jpem9uYWwtYnViYmxlLS1jbG9zZS1idG5fX2hvdmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY29udGVudC1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLW1lbnUtY29udGFpbmVyX19pbm1wLWhvcml6b25hbC1idWJibGUtLW1lbnVtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWJlZm9yZW1wLWhvcml6b25hbC1idWJibGUtLW1lbnUtaW5uZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWFmdGVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2VsbG1wLWhvcml6b25hbC1idWJibGUtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLWNlbGxfX2hvdmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2VsbC1pbWdtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsLWRlc2NtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsLWltZy1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsLWltZy1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsX19ob3Zlcm1wLWhvcml6b25hbC1idWJibGUtLWNlbGwtZGVzY21wLWhvcml6b25hbC1idWJibGUtLW1lbnUtaW5uZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWlubmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2xvc2UtY29udGFpbmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tbWVudS1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1jb250ZW50LWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLWNsb3NlLWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLW1lbnUtY29udGFpbmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY29udGVudC1jb250YWluZXL7WQUeMA4MAQoAAAAAAwEAGQAAEB4GKAQAAMhCJwMAAMhCFgIAAIBBAwIABAIAFQBAekQAAEsODAEKGQAZAAMBGRkAABA5CwIDAC8CAAAAAC4CAAAAAC0CAAAAADACAAAAACIDAAAA2RQAAAAASgMBAgBLAgHITAMBAwBNAgEAAAAYDgwBCjIAMgADATIdAAAQBgEUAACAPwAAIg4MAQpPAE8AAwFPHAAAEBADAQMAKAQAAMhCJwMAAMhCAAA9DgwBCmsAawADAWskAAAQKwcCAgAoBAAAyEJKAwEBAEsCAchMAwEBAE0CAQBJAQwBAggAAIC/AgAAAAAAACIODAEKjwCPAAMBjygAABAQAUkBDAECCAAAAAACAAAAAAAAbQ4MAQq3ALcAAwG3HgAAEFsRJgMAAgMALQIAAJhCMAIAABRCKAIAAABCJwIAAABCMwIAAIBANAIAAIBAMgIAAIBAMQIAAIBARQIAAIBBRgIAAIBBRwIAAIBBSAIAAIBBAwIABAIAIgM+PD//AAAfDgwBCtUA1QADAdUiAAAQDQIoAgAAwEEnAgAAwEEAABkODAEK9wD3AAMB9yUAABAHASIDNzc3/wAAHxQSARD7HAEA+xwBAAUB+xwBJgAAEAcBKAQAAMhCAABAFBIBEPtCAQD7QgEABQH7QgEjAAAQKAYoBAAAyEJKAwEBAEsCAchMAwEBAE0CAQBJAQwBAggAAIA/AgAAAAAAACgUEgEQ+2UBAPtlAQAFAftlAScAABAQAUkBDAECCAAAAAACAAAAAAAAJRQSARD7jAEA+4wBAAUB+4wBGQAAEA0DKAgAAIA/AQMACAEAAAAeFBIBEPulAQD7pQEABQH7pQEgAAAQBgEOAACAPwAALRQSARD7xQEA+8UBAAUB+8UBHwAAEBUFDgAAAAAoCAAAgD8BAwAIAwANBAAAAB4UEgEQ++QBAPvkAQAFAfvkAR8AABAGAQ4AAEBAAAAcFBIBEPsDAgD7AwIABQH7AwIZAAAQBAECAgAAAF4UEgEQ+xwCAPscAgAFAfscAicAABBGDCYDACcCAABgQigCAABgQjMCAABAQTQCAABAQTICAABAQTECAABAQSID/////0UCAABAQUYCAABAQUcCAABAQUgCAABAQQAALyQiASD7QwIA+0MCAAUB+0MCJwEQ+2oCAPtqAgAFAftqAiAAACAHASID7Ozs/wAAJRQSARD7igIA+4oCAAUB+4oCHQAAEA0CJwIAAABCKAIAAABCAAA0FBIBEPunAgD7pwIABQH7pwIeAAAQHAUWAgAAIEETA////4AYAgA3AgAAAEEoAgAAYEEAAB8UEgEQ+8UCAPvFAgAFAfvFAicAABAHASIDHx8f/wAALyQiASD77AIA++wCAAUB++wCJwEQ+xMDAPsTAwAFAfsTAyAAACAHASIDNzc3/wAAHxQSARD7MwMA+zMDAAUB+zMDHgAAEAcBEwP///+AAAAoFBIBEPtRAwD7UQMABQH7UQMfAAAQEAMmAwAzAgAAiEI0AgAAwEEBACgUEgEQ+3ADAPtwAwAFAftwAx8AABAQAyYDADMCAAAwQjQCAADAQQEBNSUjAhD7jwMA+48DAAUB+48DJAAAEPuzAwD7swMABQH7swMjAAAQDAIOAACAPxACAAAAAAECHxQSARD71gMA+9YDAAUB+9YDJgAAEAcBJwIAAK9DAQI1JSMCEPv8AwD7/AMABQH7/AMkAAAQ+yAEAPsgBAAFAfsgBCMAABAMAicCAAAeQw4AAAAAAQMkFBIBEPtDBAD7QwQABQH7QwQmAAAQDAIOAACAPxACAAAAAAEDPQQOAAALAQkAAAYBBwAAr0MOAAALAQkAAAYBCAAAr0MOAAALAQkAAAYBBADAJkQOAAALAQkAAAYBBQDAJkQ=")},521:(e,t,n)=>{n(57).J.push("AUhhZC1za2lwLWNhcmQtLXJvb3RhZC1za2lwLWNhcmQtLWljb25hZC1za2lwLWNhcmQtLXRpdGxlYWQtc2tpcC1jYXJkLS1zdWK1BDYODAEKAAAAAAMBABIAABAkCCgEAADIQicDAADIQgEDAAgDAAoCAA0BACIDAAAAmRUAQHpEAAAlDgwBChIAEgADARISAAAQEwMnAgCAu0MoAgAAcEM4AgAAwEEAACgODAEKJAAkAAMBJBMAABAWBBMD/////xYCAACIQTgCAAAAQRgCAAAALQ4MAQo3ADcAAwE3EQAAEBsFFM3MTD8TA/////8WAgAAYEE4AgAAwEAYAgAAAAEA")},431:(e,t,n)=>{n(57).J.push("AftzAWF1dGhvcml6ZS0tcm9vdGF1dGhvcml6ZS0tbWFza2F1dGhvcml6ZS0tbWFzay1pbmF1dGhvcml6ZS0tY29udGFpbmVyYXV0aG9yaXplLS1jb250ZW50YXV0aG9yaXplLS1jb250ZW50LWluYXV0aG9yaXplLS1oZWFkYXV0aG9yaXplLS1pY29uYXV0aG9yaXplLS10aXRsZWF1dGhvcml6ZS0tYm9keWF1dGhvcml6ZS0tYXBwbHktaW5mb2F1dGhvcml6ZS0tYnV0dG9uc2F1dGhvcml6ZS0tYnV0dG9uYXV0aG9yaXplLS1jYW5jZWxhdXRob3JpemUtLWNvbmZpcm1hdXRob3JpemUtLWNvbnRhaW5lcmF1dGhvcml6ZS0tY29udGFpbmVyYXV0aG9yaXplLS1jb250ZW50YXV0aG9yaXplLS10aXRsZWF1dGhvcml6ZS0tYXBwbHktaW5mb2F1dGhvcml6ZS0tY2FuY2Vs++4DFTkODAEKAAAAAAMBAA8AABAnCSgEAADIQicDAADIQgEDABYCAACAQQMCAAQCAAgDAAoCABUAQHpEAAA8DgwBCg8ADwADAQ8PAAAQKggnCAAAgD8oCAAAgD8iAwAAAP8UAAAAAEoDAQIASwIByEwDAQEATQIBAAAAGA4MAQoeAB4AAwEeEgAAEAYBFM3MzD4AAD0ODAEKMAAwAAMBMBQAABArBwMCAAQCACgIAACAPwIDAC0IAAAAPzACAABAwUkBDAECCAAAAL8CAAAAAAAAfA4MAQpEAEQAAwFEEgAAEGoUAQMACAMASgMBAQBLAgHITAMBAQBNAgEAMwIAAAAANAIAAAAAMgIAAMBBMQIAAMBBJwgAAIA/KAIAAHpDRQIAAEBBRgIAAEBBRwIAAEBBSAIAAEBBIgP/////AgMALwgAAIA/LQIAAAAAAAAiDgwBClYAVgADAVYVAAAQEAFJAQwBAgIAAAAACAAAgL8AAB8ODAEKawBrAAMBaw8AABANAygCAACAQgEDAAoCAAAAHw4MAQp6AHoAAwF6DwAAEA0CJwIAAMBBKAIAAMBBAAA+DgwBCokAiQADAYkQAAAQLAg1AgAAAEEUZmZmPxMDAAAA/xYCAABwQRkCACgCAACoQRcCAACoQQ4AAIA/AAAhDgwBCpkAmQADAZkPAAAQDwMOAACAPwgDADcCAACAQAAAMw4MAQqoAKgAAwGoFQAAECEGFGZmZj8WAgAAiEETAwAAAP8ZAgAoAmZmvkEXAmZmvkEAAEAODAEKvQC9AAMBvRIAABAuCicIAACAPygCAAAgQgIDADACAACcQi0CAAAAABYCAACIQRkCAAEDAAgBAA0BAAAAWA4MAQrPAM8AAwHPEQAAEEYMJwIAAPBCKAIAACBCFwIAACBCGAIANwIAAAAAOAIAAAAANgIAAABBNQIAAABBRQIAAIBARgIAAIBARwIAAIBASAIAAIBAAAAfDgwBCuAA4AADAeARAAAQDQIiA/Ly8v8TAwfBYP8AAB8ODAEK8QDxAAMB8RIAABANAiIDBMFg/xMD/////wAAHxQSARD7AwEA+wMBAAUB+wMBFAAAEAcBJwMAAMhCAQAfFBIBEPsXAQD7FwEABQH7FwEUAAAQBwEnBAAAyEIBAR8UEgEQ+ysBAPsrAQAFAfsrARIAABAHASIDLCws/wECJBQSARD7PQEA+z0BAAUB+z0BEAAAEAwCFM3MTD8TA/////8BAiQUEgEQ+00BAPtNAQAFAftNARUAABAMAhTNzEw/EwP/////AQIlFBIBEPtiAQD7YgEABQH7YgERAAAQDQIiA////xQTA/////8BAigDDAAACQEHAAAEAQIBAAwAAAkBBwAABAECAgAMAAAJAQcAAAQBCQIA")},172:(e,t,n)=>{n(57).J.push("AedmcmFtZXNldC0taGlkZGVuZnJhbWVzZXQtLXJvb3RmcmFtZXNldC0tdGFic2ZyYW1lc2V0LS1wYW5lbHNmcmFtZXNldC0tbGVmdC1wYW5lbGZyYW1lc2V0LS1sZWZ0LXBhZ2VmcmFtZXNldC0tcmlnaHQtcGFuZWxmcmFtZXNldC0tcmlnaHQtcGxhY2Vob2xkZXJmcmFtZXNldC0tcmlnaHQtcGFnZWZyYW1lc2V0LS1yaWdodC1wYWdlLWluZnJhbWVzZXQtLWxlZnQtcGFuZWxmcmFtZXNldC0tcmlnaHQtcGFuZWz72AEMFg4MAQoAAAAAAwEAEAAAEAQBBwIAAAAcDgwBChAAEAADARAOAAAQCgIBAwAoBAAAyEIAAB8ODAEKHgAeAAMBHg4AABANAycCAABwQgMCAAQCAAAAGw4MAQosACwAAwEsEAAAEAkCDgAAgD8BAwAAADEODAEKPAA8AAMBPBQAABAfBScCAADPQzcCAAAAADgCAAAAADYCAACAPzUCAACAPwAALg4MAQpQAFAAAwFQEwAAEBwFAgMALQIAAAAALwIAAAAAJwgAAIA/KAgAAIA/AAAYDgwBCmMAYwADAWMVAAAQBgEOAACAPwAAMQ4MAQp4AHgAAwF4GwAAEB8EAgMALQgAAAA/LwgAAAA/SQEMAQIIAAAAvwgAAAC/AABRDgwBCpMAkwADAZMUAAAQPwoCAwAtAgAAAAAvAgAAAAAnCAAAgD8oCAAAgD9JAQwBAggAAIA/AgAAAABKAwEBAEsEAfuQAUwDAQQATQIBAAAAIg4MAQqnAKcAAwGnFwAAEBABSQEMAQICAAAAAAIAAAAAAAAWDgwBCr4AvgADAb4UAAAQBAEnAQABAC4ODAEK0gDSAAMB0hUAABAcBQIDAC0CAAAAAC8CAAAAACcIAACAPygIAACAPwEAEAEOAAALAQkAAAYBBQBAJ0Q=")},78:(e,t,n)=>{n(57).J.push("AftcAWdhbWUtcmFua2xpc3QtLXJvb3RnYW1lLXJhbmtsaXN0LS1jb250ZW50Z2FtZS1yYW5rbGlzdC0tbGluZWdhbWUtcmFua2xpc3QtLWhlYWRnYW1lLXJhbmtsaXN0LS1jbG9zZWdhbWUtcmFua2xpc3QtLXRpdGxlZ2FtZS1yYW5rbGlzdC0tYm9keWdhbWUtcmFua2xpc3QtLWl0ZW1nYW1lLXJhbmtsaXN0LS1pY29uZ2FtZS1yYW5rbGlzdC0tbmFtZWdhbWUtcmFua2xpc3QtLXNjb3JlZ2FtZS1yYW5rbGlzdC0tYnV0dG9uc2dhbWUtcmFua2xpc3QtLWJ1dHRvbmdhbWUtcmFua2xpc3QtLWJ0bi1pY29uZ2FtZS1yYW5rbGlzdC0tZGlzYWJsZWRnYW1lLXJhbmtsaXN0LS1jb250ZW50Z2FtZS1yYW5rbGlzdC0tY29udGVudPtbAxFODgwBCgAAAAADAQATAAAQPA0oBAAAyEInAwAAyEIBAwAWAgAAgEEDAgAEAgAIAwAKAgANBQAVAEB6RCcIAACAPygIAACAPyIDAAAAgAAAMQ4MAQoTABMAAwETFgAAEB8FRQIAAIBARgIAAIBARwIAAIBASAIAAIBAIgP/////AAAfDgwBCikAKQADASkTAAAQDQIoAgAAgD8iAwAAAA0AADoODAEKPAA8AAMBPBMAABAoCCgCAAA0QgEDAAoCAA0EADMCAAAAADQCAAAAADICAACgQTECAACgQQAAJA4MAQpPAE8AAwFPFAAAEBIDJwIAAIBBKAIAAIBBFAAAAD8AADcODAEKYwBjAAMBYxQAABAlBxMDAAAA5hYCAABgQRkCACgCAACgQRcCAACgQScIzcxMPxgCAAAAKw4MAQp3AHcAAwF3EwAAEBkEMwIAAAAANAIAAAAAMgIAAIBBMQIAAIBBAAAiDgwBCooAigADAYoTAAAQEAQoAgAAjEIBAwAIAQAKAgAAADcODAEKnQCdAAMBnRMAABAlBicCAAAgQigCAAAgQkUCAACAQEYCAACAQEcCAACAQEgCAACAQAAAVQ4MAQqwALAAAwGwEwAAEEMNJwgAAAA/NwIAAEBBOAIAAEBBNgIAAEBBNQIAAEBBFgIAAIhBKAIAAMBBFwIAAMBBAwIABAIAGwIAHAIAEwMAAADmAAAzDgwBCsMAwwADAcMUAAAQIQYOAACAPxYCAABgQSgCAACgQRcCAACgQRMDAAAAgBgDAAAAQw4MAQrXANcAAwHXFgAAEDEKKAIAADBCAQMACAEACgIADQUAIgP39/f/MwIAAAAANAIAAAAAMgjNzEw+MQjNzEw+AABGDgwBCu0A7QADAe0VAAAQNAonAgAAwEEoAgAAwEFFAgAAQEFGAgAAQEFHAgAAQEFIAgAAQEEBAwAKAgANAQAiA+rq6v8AACUUEgEQ+wIBAPsCAQAFAfsCARcAABANAicCAADAQCgCAABAQQAAHhQSARD7GQEA+xkBAAUB+xkBFwAAEAYBFAAAAD8AAB8UEgEQ+zABAPswAQAFAfswARYAABAHAScDAACqQgEAHxQSARD7RgEA+0YBAAUB+0YBFgAAEAcBJwQAAKpCAQEbAgwAAAkBBwAABAECAQAMAAAJAQcAAAQBAgIA")},261:(e,t,n)=>{n(57).J.push("AZhuYXZpZ2F0ZS10by1tcC0tYm9keW5hdmlnYXRlLXRvLW1wLS1ib2R5LXBsYWNlaG9sZGVybmF2aWdhdGUtdG8tbXAtLWxvZ29uYXZpZ2F0ZS10by1tcC0tbmFtZW5hdmlnYXRlLXRvLW1wLS1kZXNjbmF2aWdhdGUtdG8tbXAtLW5hbWVuYXZpZ2F0ZS10by1tcC0tZGVzY/syAQcoDgwBCgAAAAADAQAUAAAQFgUBAwAzAgAAwEE0AgAAQEEIAwAKAgAAABkODAEKFAAUAAMBFCAAABAHATMCAACAQQAAQw4MAQo0ADQAAwE0FAAAEDEJKAIAAEBCJwIAAEBCOAIAAABBRQIAAMBBRgIAAMBBRwIAAMBBSAIAAMBBAwIABAIAAAA9DgwBCkgASAADAUgUAAAQKwgQAQABAgATAwAAAOYWAgAAiEEXAgAAsEE3AgAAAEEoAgAAsEEnCAAAgD8AADcODAEKXABcAAMBXBQAABAlBxABAAECABMDAAAATRYCAABgQRcCAACgQSgCAACgQScIAACAPwAAGQ4MAQpwAHAAAwFwFAAAEAcBEwP////mAQAZDgwBCoQAhAADAYQUAAAQBwETA////00BAA4BDAAACQEHAAAEAQkCAA==")},426:(e,t,n)=>{n(57).J.push("AfuuAXNoYXJlLWltYWdlLS1tYXNrc2hhcmUtaW1hZ2UtLW1hc2tfX2luc2hhcmUtaW1hZ2UtLWNvbnRhaW5lcnNoYXJlLWltYWdlLS1sYW5kc2NhcGUtY29udGFpbmVyc2hhcmUtaW1hZ2UtLWNvbnRhaW5lcl9faW5zaGFyZS1pbWFnZS0tbGFuZHNjYXBlLWNvbnRhaW5lcl9faW5zaGFyZS1pbWFnZS0tY29udGFpbmVyc2FmZS1hcmVhLWluc2V0LWxlZnRzYWZlLWFyZWEtaW5zZXQtYm90dG9tc2FmZS1hcmVhLWluc2V0LXJpZ2h0c2hhcmUtaW1hZ2UtLWxhbmRzY2FwZS1jb250YWluZXJzaGFyZS1pbWFnZS0tc2Nyb2xsZXItY29udGFpbmVyc2hhcmUtaW1hZ2UtLXNjcm9sbGVyc2hhcmUtaW1hZ2UtLWltZ3NoYXJlLWltYWdlLS1pbWctd3JhcHBlcnNoYXJlLWltYWdlLS1jb250YWluZXJzaGFyZS1pbWFnZS0tc2Nyb2xsZXJzaGFyZS1pbWFnZS0taW1nLXdyYXBwZXL7zAINSw4MAQoAAAAAAwEAEQAAEDkLAgMALwIAAAAALgIAAAAALQIAAAAAMAIAAAAAIgMAAADZFAAAAABKAwECAEsCAchMAwEDAE0CAQAAABgODAEKEQARAAMBERUAABAGARQAAIA/AAA+GRcCCiYAJgADASYWAAAKPAA8AAMBPCAAABAhCBQAAAAASgMBAgBLAgHITAMBAwBNAgEAAQMACAEADQEAAAAjGRcCClwAXAADAVwaAAAKdgB2AAMBdiQAABAGARQAAIA/AAA6DgwBCpoAmgADAZoWAAAQKAcmAwACAwAvAgAAAAAtCQGwFAAAMAkBxBYAAC4JAdoVAAA0AgAAQkMAAB8ODAEK7wDvAAMB7yAAABANAicIAACAPygIAACAPwAAWBQSARD7DwEA+w8BAAUB+w8BHwAAEEAMJwgAAIA/MwIAAAAANAIAAAAAMgIAAAAAMQIAAAAANwIAAAAAOAIAAAAANgIAAAAANQIAAAAAAQMACAMADQEAAABVFBIBEPsuAQD7LgEABQH7LgEVAAAQPQonCAAAgD8sCAAAgD8zAgAAAAA0AgAAAAAyAgAAAAAxAgAAAAA3AgAAAAA4AgAAAAA2AgAAAAA1AgAAAAAAADcUEgEQ+0MBAPtDAQAFAftDARAAABAfBkUCAABAQUYCAABAQUcCAABAQUgCAABAQQMCAAQCAAAAPxQSARD7UwEA+1MBAAUB+1MBGAAAECcHJgMAMwIAADBCNAIAAABCMQIAAABCMgIAAABCJwgAAIA/DwAAAAAAACUUEgEQ+2sBAPtrAQAFAftrARYAABANAjQCAAAAADACAAAAAAEAHxQSARD7gQEA+4EBAAUB+4EBFQAAEAcBJwgAAIA/AQA6FBIBEPuWAQD7lgEABQH7lgEYAAAQIgYmAwAzAgAAwEE0AgAAwEExAgAAAAAyAgAAAAAnCAAAgD8BAA4BDAAACQEHAAAEAQICAA==")},13:(e,t,n)=>{n(57).J.push("ATN0b2FzdC0tcm9vdHRvYXN0LS1jb250ZW50dG9hc3QtLWxvYWRpbmd0b2FzdC0tdGl0bGXLBCgODAEKAAAAAAMBAAsAABAWBScDAADIQigEAADIQgEDAAoCAA0BAAAAVQ4MAQoLAAsAAwELDgAAEEMMKAIAADBCMwIAAAAANAIAAAAAMgIAAKBBMQIAAKBBRQIAAABBRgIAAABBRwIAAABBSAIAAABBIgNMTEz/CgIAAQMAAAAlDgwBChkAGQADARkOAAAQEwMnAgAAgEEoAgAAgEE2AgAAgEAAACQODAEKJwAnAAMBJwwAABASAxRmZmY/FgIAAGBBEwP/////AAABAA==")},164:(e,t,n)=>{n(57).J.push("AftGBHVzZXItcHJvZmlsZS0tcm9vdHVzZXItcHJvZmlsZS0taGlkZXVzZXItcHJvZmlsZS0tbWFza3VzZXItcHJvZmlsZS0tbWFzay1pbnVzZXItcHJvZmlsZS0tY29udGFpbmVydXNlci1wcm9maWxlLS1jb250ZW50dXNlci1wcm9maWxlLS1jb250ZW50LWludXNlci1wcm9maWxlLS1oZWFkdXNlci1wcm9maWxlLS1ib2R5dXNlci1wcm9maWxlLS1idXR0b25zdXNlci1wcm9maWxlLS1pY29udXNlci1wcm9maWxlLS10aXRsZXVzZXItcHJvZmlsZS0tYXBwbHktaW5mb3VzZXItcHJvZmlsZS0tc3BsaXQtbGluZXVzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZHVzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZF9fcGx1c3VzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZF9fdGV4dHVzZXItcHJvZmlsZS0taW5mby1pdGVtdXNlci1wcm9maWxlLS1pbmZvLWl0ZW1fX2xlZnR1c2VyLXByb2ZpbGUtLWluZm8taXRlbV9fYXZhdGFydXNlci1wcm9maWxlLS1pbmZvLWl0ZW1fX2Rlc2NfX3dycHVzZXItcHJvZmlsZS0taW5mby1pdGVtX19uaWNrbmFtZXVzZXItcHJvZmlsZS0taW5mby1pdGVtX19kZXNjdXNlci1wcm9maWxlLS1pbmZvLWl0ZW1fX3JpZ2h0dXNlci1wcm9maWxlLS1pY29uLWNoZWNrZWR1c2VyLXByb2ZpbGUtLWV4Y2VlZC10aXB1c2VyLXByb2ZpbGUtLXVzZS1vdGhlci1hdmF0YXJ1c2VyLXByb2ZpbGUtLWJ1dHRvbnVzZXItcHJvZmlsZS0tY2FuY2VsdXNlci1wcm9maWxlLS1jb25maXJtdXNlci1wcm9maWxlLS1leGNlZWQtdGlwdXNlci1wcm9maWxlLS1jb250YWluZXJ1c2VyLXByb2ZpbGUtLWNvbnRhaW5lcnVzZXItcHJvZmlsZS0taGVhZHVzZXItcHJvZmlsZS0tYnV0dG9uc3VzZXItcHJvZmlsZS0tY29udGVudHVzZXItcHJvZmlsZS0tdGl0bGV1c2VyLXByb2ZpbGUtLWluZm8taXRlbV9fbmlja25hbWV1c2VyLXByb2ZpbGUtLWluZm8taXRlbV9fZGVzY3VzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZF9fdGV4dHVzZXItcHJvZmlsZS0tYXBwbHktaW5mb3VzZXItcHJvZmlsZS0tdXNlLW90aGVyLWF2YXRhcnVzZXItcHJvZmlsZS0tY2FuY2VsdXNlci1wcm9maWxlLS1leGNlZWQtdGlwdXNlci1wcm9maWxlLS1zcGxpdC1saW5l+0kILTkODAEKAAAAAAMBABIAABAnCSgEAADIQicDAADIQgEDABYCAABgQQMCAAQCAAgDAAoCABUAQHpEAAAZDgwBChIAEgADARISAAAQBwEoAgAAAAAAADwODAEKJAAkAAMBJBIAABAqCCcIAACAPygIAACAPyIDAAAA/xQAAAAASgMBAgBLAgHITAMBAQBNAgEAAAAYDgwBCjYANgADATYVAAAQBgEUAAAAPwAAPQ4MAQpLAEsAAwFLFwAAECsHAwIABAIAKAgAAIA/AgMALQgAAAA/MAIAAEDBSQEMAQIIAAAAvwIAAAAAAAB/DgwBCmIAYgADAWIVAAAQbRUBAwAnCAAAgD8mAwAzAgAAAAA0AgAAAAAyAgAAwEExAgAAwEEIAwBKAwEBAEsCAchMAwEBAE0CAQA0AgAAQEFFAgAAQEFGAgAAQEFHAgAAQEFIAgAAQEEiA/////8CAwAvCAAAgD8tAgAAAAAAACIODAEKdwB3AAMBdxgAABAQAUkBDAECAgAAAAAIAACAvwAAKw4MAQqPAI8AAwGPEgAAEBkFNwIAAABCOAIAAIBBKAIAAMBBAQMACgIAAAAhDgwBCqEAoQADAaESAAAQDwMOAACAPwgDADQCAABCQwAARg4MAQqzALMAAwGzFQAAEDQLNQIAAMBBJwgAAIA/KAIAACBCAgMAMAIAAMRCLQIAAAAAFgIAAIhBGQIAAQMACAEADQEAAAA3DgwBCsgAyAADAcgSAAAQJQYnAgAAwEEoAgAAwEFFCAAAAD9GCAAAAD9HCAAAAD9ICAAAAD8AAD4ODAEK2gDaAAMB2hMAABAsCDUCAAAgQRRmZmY/EwMAAAD/FgIAAHBBGQIAKAIAAKhBFwIAAKhBDgAAgD8AAEUODAEK7QDtAAMB7RgAABAzCScIAACAPygCAABAQhRmZmY/FgIAAIhBEwMAAAD/GQIAFwJmZr5BNwIAAABBOAIAAIBBAAArFBIBEPsFAQD7BQEABQH7BQEYAAAQEwMnCAAAgD8oAgAAgD8iAwAAAA0AACUUEgEQ+x0BAPsdAQAFAfsdARsAABANAygCAACAQgEDAAoCAAAAMRQSARD7OAEA+zgBAAUB+zgBIQAAEBkEJwIAAMBBKAIAAMBBNQIAAABBNgIAAIBBAAA2FBIBEPtZAQD7WQEABQH7WQEhAAAQHgUOAACAPygCAADAQRcCAADAQRYCAACIQRMDAAAA5gAAKBQSARD7egEA+3oBAAUB+3oBFwAAEBAEKAIAAIBCAQMACgIADQQAAAAqFBIBEPuRAQD7kQEABQH7kQEdAAAQEgQoCAAAgD8BAwAKAgAOAACAPwAARhQSARD7rgEA+64BAAUB+64BHwAAEC4IAQUANgIAAABBJwIAACBCKAIAACBCRQIAAIBARgIAAIBARwIAAIBASAIAAIBAAAAtFBIBEPvNAQD7zQEABQH7zQEiAAAQFQUBAwAoCAAAgD8IAwANAQAOAACAPwAAMRQSARD77wEA++8BAAUB++8BIQAAEBkEKAIAAMBBFwIAAMBBEwMAAADmFgIAAIhBAAA8FBIBEPsQAgD7EAIABQH7EAIdAAAQJAY3AgAAAEAoAgAAoEEXAgAAoEEWAgAAYEETAwAAAP8UmpmZPgAAOhQSARD7LQIA+y0CAAUB+y0CHgAAECIIJwIAAMBBKAIAAMBBAwIABAIANgIAAABBAQMACgIADQEAAAAlFBIBEPtLAgD7SwIABQH7SwIaAAAQDQInAgAAwEEoAgAAwEEAAD0UEgEQ+2UCAPtlAgAFAftlAhgAABAlBicIAACAPygCAACgQRcCAACgQTcCAAAAQRYCAABgQRMDAAAATQAAPRQSARD7fQIA+30CAAUB+30CHgAAECUGJwgAAIA/KAIAAKBBFwIAAKBBNwIAAABBFgIAAGBBEwNZa5X/AABeFBIBEPubAgD7mwIABQH7mwIUAAAQRgwnAgAA8EIoAgAAIEIXAgAAIEIYAgA3AgAAAAA4AgAAAAA2AgAAAEE1AgAAAEFFAgAAgEBGAgAAgEBHAgAAgEBIAgAAgEAAACUUEgEQ+68CAPuvAgAFAfuvAhQAABANAiIDAAAADRMDB8Fg/wAAJRQSARD7wwIA+8MCAAUB+8MCFQAAEA0CIgMHwWD/EwP/////AAAfFBIBEPvYAgD72AIABQH72AIYAAAQBwETAwAAAE0AAB8UEgEQ+/ACAPvwAgAFAfvwAhcAABAHAScDAADIQgEAHxQSARD7BwMA+wcDAAUB+wcDFwAAEAcBJwQAAMhCAQEfFBIBEPseAwD7HgMABQH7HgMSAAAQBwE3AgAAwEEBAR8UEgEQ+zADAPswAwAFAfswAxUAABAHATACAABUQgEBHxQSARD7RQMA+0UDAAUB+0UDFQAAEAcBIgMeHh7/AQIkFBIBEPtaAwD7WgMABQH7WgMTAAAQDAIUzcxMPxMD/////wECHxQSARD7bQMA+20DAAUB+20DIQAAEAcBEwP////MAQIfFBIBEPuOAwD7jgMABQH7jgMdAAAQBwETA////00BAh8UEgEQ+6sDAPurAwAFAfurAyEAABAHARMD////zAECJBQSARD7zAMA+8wDAAUB+8wDGAAAEAwCFM3MTD8TA/////8BAh8UEgEQ++QDAPvkAwAFAfvkAx4AABAHARMDfZCp/wECJRQSARD7AgQA+wIEAAUB+wIEFAAAEA0CIgP///8UEwP/////AQIfFBIBEPsWBAD7FgQABQH7FgQYAAAQBwETA////00BAh8UEgEQ+y4EAPsuBAAFAfsuBBgAABAHASID////DQECKAMMAAAJAQcAAAQBAgEADAAACQEHAAAEAQICAAwAAAkBBwAABAEJAgA=")},300:(e,t,n)=>{n(57).J.push("AUB2ZXJpZnktdGlwLS1yb290dmVyaWZ5LXRpcC0tY29udGVudHZlcmlmeS10aXAtLWNkdmVyaWZ5LXRpcC0tbXNnzAQfDgwBCgAAAAADAQAQAAAQDQInAwAAyEIoBAAAyEIAAEYODAEKEAAQAAMBEBMAABA0CRYCAAAwQRcCAACAQRMD/////0UCAAAgQUYCAAAgQUcCAAAgQUgCAAAgQSIDAAAAMwIDAAAAKw4MAQojACMAAwEjDgAAEBkGJwIAAKBCKAIAAKBBAQMACAEACgIADQEAAAA3DgwBCjEAMQADATEPAAAQJQYnAgAA8EIoAgAAIEIzAgAAQEA0AgAAQEAyAgAAwEAxAgAAwEAAAAEA")},605:(e,t,n)=>{n(57).J.push("AfsMAndlcnVuLS1yb290d2VydW4tLW1hc2t3ZXJ1bi0tbWFzay1pbndlcnVuLS1jb250YWluZXJ3ZXJ1bi0tY29udGVudHdlcnVuLS1jb250ZW50LWlud2VydW4tLW5vdGUtY29udGVudHdlcnVuLS1ub3RlLWNvbnRlbnQtaW53ZXJ1bi0tbm90ZS1iYWNrd2VydW4tLW5vdGUtYmFjay13cnB3ZXJ1bi0tbm90ZS10aXRsZXdlcnVuLS1ub3RlLWRldGFpbHdlcnVuLS1ub3RlLWd1aWRld2VydW4tLW5vdGUtZ3VpZGUtd3JhcHdlcnVuLS1oZWFkd2VydW4tLXRpdGxld2VydW4tLWluZm93ZXJ1bi0taW5mby13cnB3ZXJ1bi0tYm9keXdlcnVuLS1zcG9ydC1saXN0d2VydW4tLXNwb3J0LWl0ZW13ZXJ1bi0tYnV0dG9uc3dlcnVuLS1idXR0b253ZXJ1bi0tY2FuY2Vsd2VydW4tLWNvbmZpcm13ZXJ1bi0tY29udGFpbmVyd2VydW4tLWNvbnRhaW5lcndlcnVuLS1jb250ZW50d2VydW4tLW5vdGUtY29udGVudHdlcnVuLS10aXRsZXdlcnVuLS1ub3RlLXRpdGxld2VydW4tLW5vdGUtZGV0YWlsd2VydW4tLXNwb3J0LWxpc3R3ZXJ1bi0tY2FuY2Vs+5sGIjkODAEKAAAAAAMBAAsAABAnCSgEAADIQicDAADIQgEDABYCAACAQQMCAAQCAAgDAAoCABUAQHpEAAA8DgwBCgsACwADAQsLAAAQKggnCAAAgD8oCAAAgD8iAwAAAP8UAAAAAEoDAQIASwIByEwDAQEATQIBAAAAGA4MAQoWABYAAwEWDgAAEAYBFM3MzD4AAD0ODAEKJAAkAAMBJBAAABArBwMCAAQCACgIAACAPwIDAC0IAAAAPzACAABAwUkBDAECCAAAAL8CAAAAAAAAZA4MAQo0ADQAAwE0DgAAEFIQAQMACAMASgMBAQBLAgHITAMBAQBNAgEAJwgAAIA/KAIAALNDRQIAAEBBRgIAAEBBRwIAAEBBSAIAAEBBIgP/////AgMALwgAAIA/LQIAAAAAAAAiDgwBCkIAQgADAUIRAAAQEAFJAQwBAgIAAAAACAAAgL8AAGQODAEKUwBTAAMBUxMAABBSEAIDADACAAAAAC0IAACAPycIAACAPygCAACpQyID/////0UCAABAQUYCAABAQUcCAABAQUgCAABAQQEDAAgDAEoDAQEASwIByEwDAQQATQIBAAAAIg4MAQpmAGYAAwFmFgAAEBABSQEMAQIIAACAvwIAAAAAAAAiDgwBCnwAfAADAXwQAAAQEAMBBQAnAgAAMEEoAgAAwEEAADcODAEKjACMAAMBjBQAABAlCAIDAC0CAAAAAC8CAAAAACcCAAAkQigCAACAQgEDAA0BAAoCAAAAPA4MAQqgAKAAAwGgEQAAECoIFGZmZj8WAgAAcEEnCAAAgD8oAgAAqEEXAgAAqEETAwAAAP8YAgAZAgAAAEkODAEKsQCxAAMBsRIAABA3CRYCAABgQSgCAAA4QjcCAABAQTYCAAAAADgCAACgQTUCAAAAADECAADAQTICAADAQRMDAAAA5gAAHw4MAQrDAMMAAwHDEQAAEA0CJwIAAIxDKAIAAOxCAAAlDgwBCtQA1AADAdQWAAAQEwQoAgAA7EInCAAAgD8BAwANAQAAAB8ODAEK6gDqAAMB6gsAABANAygCAACAQgEDAAoCAAAAPg4MAQr1APUAAwH1DAAAECwINQIAAMBBFGZmZj8TAwAAAP8WAgAAcEEZAgAoAgAAqEEXAgAAqEEOAACAPwAAKBQSARD7AQEA+wEBAAUB+wEBCwAAEBADAQUAJwIAAKBBKAIAAKBBAABSFBIBEPsMAQD7DAEABQH7DAEPAAAQOgsCAwAuAgAAAAAvAgAAAAAzAgAAIEE0AgAAIEEyAgAAIEExAgAAIEEnAgAAQEIoCAAAgD8BAwAKAgAAACEUEgEQ+xsBAPsbAQAFAfsbAQsAABAJAg4AAIA/CAMAAABDFBIBEPsmAQD7JgEABQH7JgERAAAQKwgBAwA3AgAAgEA2AgAAAAA4AgAAAAA1AgAAoEEIAwATAwAAAIAWAgAAYEEAACsUEgEQ+zcBAPs3AQAFAfs3AREAABATAzgCAAAAQSgCAACgQRcCAACgQQAARhQSARD7SAEA+0gBAAUB+0gBDgAAEC4KJwgAAIA/KAIAACBCAgMAMAIAAJxCLQIAAAAAFgIAAIhBGQIAAQMACAEADQEAAABeFBIBEPtWAQD7VgEABQH7VgENAAAQRgwnAgAA8EIoAgAAIEIXAgAAIEIYAgA3AgAAAAA4AgAAAAA2AgAAAEE1AgAAAEFFAgAAgEBGAgAAgEBHAgAAgEBIAgAAgEAAACUUEgEQ+2MBAPtjAQAFAftjAQ0AABANAiID8vLy/xMDB8Fg/wAAJRQSARD7cAEA+3ABAAUB+3ABDgAAEA0CIgMEwWD/EwP/////AAAfFBIBEPt+AQD7fgEABQH7fgEQAAAQBwEnAwAAyEIBAB8UEgEQ+44BAPuOAQAFAfuOARAAABAHAScEAADIQgEBHxQSARD7ngEA+54BAAUB+54BDgAAEAcBIgMsLCz/AQIfFBIBEPusAQD7rAEABQH7rAETAAAQBwEiAywsLP8BAiQUEgEQ+78BAPu/AQAFAfu/AQwAABAMAhTNzEw/EwP/////AQIkFBIBEPvLAQD7ywEABQH7ywERAAAQDAIUzcxMPxMD/////wECJBQSARD73AEA+9wBAAUB+9wBEgAAEAwCFM3MTD8TA/////8BAh8UEgEQ++4BAPvuAQAFAfvuAREAABAHARMD////gAECJRQSARD7/wEA+/8BAAUB+/8BDQAAEA0CIgP///8UEwP/////AQIoAwwAAAkBBwAABAECAQAMAAAJAQcAAAQBAgIADAAACQEHAAAEAQkCAA==")},730:(e,t,n)=>{n(57).J.push("AYhfX3d4X3NjbF9fcm9vdF9ub2RlX193eF9zY2xfX2xheWVycm9vdHJvb3QtaW5jb250ZW50cm9vdGNvbnRlbnRjb250ZW50LWlucm9vdGNvbnRlbnRjb250ZW50LWludGl0bGVib2R5YnV0dG9uc2J1dHRvbm9rb2staG92ZXJkZW55LWhvdmVy+2MDEhkODAEKAAAAAAMBABMAABAHAScDAADIQgAAGA4MAQoTABMAAwETDwAAEAYBFQBAekQAAEUODAEKIgAiAAMBIgQAABAzCygEAADIQgEDACIDICAgvwMCAAQCABYCAACAQRTNzMw9SgMBAgBLAgHITAMBBABNAgEAAAAYDgwBCiYAJgADASYHAAAQBgEUAACAPwAAUg4MAQotAC0AAwEtBwAAEEAMIgP4+Pj/EwNERET/RQIAACBBRgIAACBBRwIAACBBSAIAACBBSgMBAQBLAgHITAMBBABNAgEANAIAACBBGAIAAAAWDgwBCjQANAADATQEAAAQBAEIBAABACgODAEKOAA4AAMBOAcAABAWAigCAACbQ0kBDAECAgAAAAACAACbQwEAIg4MAQo/AD8AAwE/CgAAEBABSQEMAQICAAAAAAIAACBBAQAWDgwBCkkASQADAUkEAAAQBAEIAgABAS4ODAEKTQBNAAMBTQcAABAcAygEAADIQicCAADNQ0kBDAECAgAAzUMCAAAAAAEBIg4MAQpUAFQAAwFUCgAAEBABSQEMAQICAAAgQQIAAAAAAQEiDgwBCl4AXgADAV4FAAAQEAMZAgAWBwAAwD8XBwAAAEAAADYODAEKYwBjAAMBYwQAABAkBg4AAIA/FgeamZk/NwIAAEhCOAIAAEhCNgIAAAAANQIAAAAAAAAoDgwBCmcAZwADAWcHAAAQFgUWB5qZmT8BAwAIAQANAQA0AgAASEIAAKMODAEKbgBuAAMBbgYAABCRGicCAADwQjMHAAAAPzQHAAAAPzIHzczMPTEHzczMPSID/////zcCAAAAADgCAAAAADYCAACgQTUCAACgQUUCAACAQEYCAACAQEcCAACAQEgCAACAQDkCAACAPzwCAACAPz8CAACAP0ICAACAPzoBAD0BAEABAEMBADsDzMzM/z4DzMzM/0EDzMzM/0QDzMzM/wAAVQ4MAQp0AHQAAwF0AgAAEEMNIgMA/9L/OQIAAIA/PAIAAIA/PwIAAIA/QgIAAIA/OgEAPQEAQAEAQwEAOwMAzKr/PgMAzKr/QQMAzKr/RAMAzKr/AAAZDgwBCnYAdgADAXYIAAAQBwEiAwDMqv8AABkODAEKfgB+AAMBfgoAABAHASIDzMzM/wAAGwIMAAAJAQcAAAQBAgEADAAACQEHAAAEAQICAA==")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{exparser:()=>e.exparser,getExparserElementByViewId:()=>F,getMainRoot:()=>R,initScl:()=>B,onViewportResize:()=>M,triggerRender:()=>W});var e=n(821),t=(n(730),n(995));const o=[];e.onThemeChange((e=>{o.forEach((t=>t(e)))})),t.registerBehavior({is:"wx-theme",data:{theme:"light"},created(){this._onThemeChange({theme:e.getTheme()})},attached(){this.__onThemeChange=this._onThemeChange.bind(this),o.push(this.__onThemeChange)},detached(){o.splice(o.indexOf(this.__onThemeChange),1)},methods:{_onThemeChange({theme:e}){this.setData({theme:e})}}});var i=function(e){return null==e?Object.create(null):e},a=function(e,t){return!0===e||(e?e[t]:void 0)};n(668);e.exparser.registerElement({is:"mp-bubble-action-sheet",behaviors:["wx-theme"],options:{multipleSlots:!0,classPrefix:"mp-bubble-action-sheet",writeIdToDOM:!0},template:{content:(s={},c={P:"",C:[{T:"mp-half-screen-popup",A:{show:{L:function(e,t,n){return e.show},F:function(e,t,n,r){return e.show}},mask:{L:function(e,t,n){return e.mask},F:function(e,t,n,r){return e.mask}},"mask-closable":{L:function(e,t,n){return e.maskClosable},F:function(e,t,n,r){return e.maskClosable}},"bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{class:"mask",slot:"mask"},C:[{V:5,N:"mask",C:[]}]},{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:"menu"},C:[{V:1,B:[{B:{L:function(e,t,n){return!!e.theme||void 0},F:function(e,t,n,r){return"light"===e.theme}},C:[{V:2,L:{M:["actions"],L:function(e,t,n){return e.actions},F:function(e,t,n,r){return e.actions}},K:"index",C:[{T:"wx-view",A:{class:"cell","hover-class":"cell__hover","data-index":{L:function(e,t,n){return t[1]},F:function(e,t,n,r){return t[1]}},"bind:tap":"buttonTap"},C:[{T:"wx-view",A:{class:"cell-img-container"},C:[{T:"wx-image",A:{class:"cell-img",src:{L:function(e,t,n){return a(t[0],"imageSrc")},F:function(e,t,n,r){return i(t[0]).imageSrc}}},C:[]}]},{T:"wx-view",A:{class:"cell-desc"},C:[{S:{L:function(e,t,n){return a(t[0],"text")},F:function(e,t,n,r){return i(t[0]).text}}}]}]}]}]},{B:{L:function(e,t,n){return!!e.theme||void 0},F:function(e,t,n,r){return"dark"===e.theme}},C:[{V:2,L:{M:["actions"],L:function(e,t,n){return e.actions},F:function(e,t,n,r){return e.actions}},K:"index",C:[{T:"wx-view",A:{class:"cell","hover-class":"cell__hover","data-index":{L:function(e,t,n){return t[1]},F:function(e,t,n,r){return t[1]}},"bind:tap":"buttonTap"},C:[{T:"wx-view",A:{class:"cell-img-container"},C:[{T:"wx-image",A:{class:"cell-img",src:{L:function(e,t,n){return a(t[0],"imageDarkSrc")},F:function(e,t,n,r){return i(t[0]).imageDarkSrc}}},C:[]}]},{T:"wx-view",A:{class:"cell-desc"},C:[{S:{L:function(e,t,n){return a(t[0],"text")},F:function(e,t,n,r){return i(t[0]).text}}}]}]}]}]}]}]},{T:"wx-view",A:{class:"foot"},C:[{T:"wx-view",A:{class:"button","hover-class":"button__hover","bind:tap":"handleClose"},C:[{T:"wx-view",A:{class:"button__before"},C:[]},{T:"wx-view",A:{class:"button__content"},C:[{S:{L:function(e,t,n){return e.cancelText},F:function(e,t,n,r){return e.cancelText}}}]}]}]}]}]}],BM:{maskClosable:[[0,"mask-closable"]],mask:[[0,"mask"]],show:[[0,"show"]],cancelText:[[0,1,1,0,1,0]]}},s[""]=function(){return c},function(e){var t=s[e];return t?t():null})},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},cancelText:{type:String,value:"取消"},actions:{type:Array,value:[]}},methods:{buttonTap(e){const{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.actions[t]},{})},handleClose(){this.triggerEvent("close",{},{})},handleClosed(){this.triggerEvent("closed",{},{})},stopEvent(){}}});var s,c;n(574);t.registerElement({is:"mp-dialog",options:{multipleSlots:!0,classPrefix:"mp-dialog",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.mask},F:function(e,t,n,r){return e.mask}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,r){return"mask "+(e.show?"mask__in":"")}},"bind:tap":"handleClose"},C:[]}]}]},{T:"wx-view",A:{class:"container","bind:tap":"handleClose"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,r){return"content "+(e.show?"content__in":"")}},"catch:tap":"stopEvent"},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-view",A:{class:"title"},C:[{V:5,N:"title",C:[]}]}]},{T:"wx-view",A:{class:"body"},C:[{V:5,N:"body",C:[]}]},{T:"wx-view",A:{class:"foot"},C:[{V:1,B:[{B:{L:function(e,t,n){return!(!e.innerButtons&&!a(e.innerButtons,"length"))||void 0},F:function(e,t,n,r){return e.innerButtons&&i(e.innerButtons).length}},C:[{V:2,L:{M:["innerButtons"],L:function(e,t,n){return e.innerButtons},F:function(e,t,n,r){return e.innerButtons}},K:"index",C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!a(t[0],"className")||void 0},F:function(e,t,n,r){return"button "+i(t[0]).className}},"hover-class":"button__active","data-index":{L:function(e,t,n){return t[1]},F:function(e,t,n,r){return t[1]}},"bind:tap":"buttonTap"},C:[{S:{L:function(e,t,n){return!!a(t[0],"text")||void 0},F:function(e,t,n,r){return"\n                  "+i(t[0]).text+"\n                  "}}},{V:1,B:[{B:{L:function(e,t,n){return!!t[1]||void 0},F:function(e,t,n,r){return t[1]>0}},C:[{T:"wx-view",A:{class:"button__after"},C:[]}]}]}]}]}]}]},{V:5,N:"footer",C:[]},{T:"wx-view",A:{class:"foot__after"},C:[]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{title:{type:String,value:""},maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},buttons:{type:Array,value:[]}},data:{innerButtons:[]},attached(){this.attached=!0},observers:{buttons(e){const t=e.length;this.setData({innerButtons:e.map(((e,n)=>{const r=e.type||(t>=1&&0===n?"default":"primary");return{className:(e.className||"")+" button__"+r,text:e.text}}))})},show(e){this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((()=>{this.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((()=>{this.triggerEvent("closed",{},{})}),200))}},methods:{buttonTap(e){const{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.buttons[t]},{})},handleClose(){this.data.maskClosable&&this.triggerEvent("close",{},{})},stopEvent(){}}});n(81);t.registerElement({is:"mp-half-screen-dialog",options:{multipleSlots:!0,classPrefix:"mp-half-screen-dialog",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"mp-half-screen-popup",A:{show:{L:function(e,t,n){return e.show},F:function(e,t,n,r){return e.show}},mask:{L:function(e,t,n){return e.mask},F:function(e,t,n,r){return e.mask}},"mask-closable":{L:function(e,t,n){return e.maskClosable},F:function(e,t,n,r){return e.maskClosable}},"bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-view",A:{class:"title"},C:[{V:5,N:"title",C:[]}]}]},{T:"wx-view",A:{class:"body"},C:[{V:5,N:"body",C:[]}]},{T:"wx-view",A:{class:"foot"},C:[{V:1,B:[{B:{L:function(e,t,n){return!(!e.innerButtons&&!a(e.innerButtons,"length"))||void 0},F:function(e,t,n,r){return e.innerButtons&&i(e.innerButtons).length}},C:[{V:2,L:{M:["innerButtons"],L:function(e,t,n){return e.innerButtons},F:function(e,t,n,r){return e.innerButtons}},K:"index",C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!a(t[0],"className")||void 0},F:function(e,t,n,r){return"button "+i(t[0]).className}},"hover-class":"button__active","data-index":{L:function(e,t,n){return t[1]},F:function(e,t,n,r){return t[1]}},"bind:tap":"buttonTap"},C:[{S:{L:function(e,t,n){return!!a(t[0],"text")||void 0},F:function(e,t,n,r){return"\n                "+i(t[0]).text+"\n              "}}}]}]}]}]},{V:5,N:"footer",C:[]}]}]}]}],BM:{maskClosable:[[0,"mask-closable"]],mask:[[0,"mask"]],show:[[0,"show"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{title:{type:String,value:""},maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},buttons:{type:Array,value:[]}},data:{innerShow:!1,innerButtons:[]},observers:{buttons(e){const t=e.length;this.setData({innerButtons:e.map(((e,n)=>{const r=e.type||(t>=1&&0===n?"default":"primary");return{className:(e.className||"")+" button__"+r,text:e.text}}))})}},methods:{buttonTap(e){const{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.buttons[t]},{})},handleClose(){this.triggerEvent("close",{},{})},handleClosed(){this.triggerEvent("closed",{},{})},stopEvent(){}}});n(741);t.registerElement({is:"mp-half-screen-popup",options:{multipleSlots:!0,classPrefix:"mp-half-screen-popup",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.mask},F:function(e,t,n,r){return e.mask}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,r){return"mask "+(e.show?"mask__in":"")}},"bind:tap":"handleClose"},C:[]}]}]},{V:5,N:"mask",C:[]},{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,r){return"container "+(e.show?"container__in":"")}},"bind:tap":"handleClose"},C:[{T:"wx-view",A:{class:"content","catch:tap":"stopEvent"},C:[{V:5,N:"",C:[]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1}},attached(){this.attached=!0},observers:{show(e){this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((()=>{this.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((()=>{this.triggerEvent("closed",{},{})}),200))}},methods:{handleClose(){this.data.maskClosable&&this.triggerEvent("close",{},{})},stopEvent(){}}});n(161);t.registerElement({is:"mp-horizonal-bubble",options:{multipleSlots:!0,classPrefix:"mp-horizonal-bubble",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.mask},F:function(e,t,n,r){return e.mask}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,r){return"mask "+(e.show?"mask__in":"")}}},C:[]}]}]},{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,r){return"close-container "+(e.show?"close-container__in":"")}}},C:[{T:"wx-view",A:{class:"close-btn","hover-class":"close-btn__hover","bind:tap":"handleClose"},C:[{T:"wx-image",A:{class:"close-btn-img",src:{L:function(e,t,n){return e.closeBtn},F:function(e,t,n,r){return e.closeBtn}}},C:[]}]}]},{T:"wx-view",A:{class:"content-container"},C:[{V:5,N:"content",C:[]}]},{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,r){return"menu-container "+(e.show?"menu-container__in":"")}}},C:[{T:"wx-view",A:{class:"menu"},C:[{T:"wx-view",A:{class:"menu-before"},C:[]},{T:"wx-view",A:{class:"menu-inner"},C:[{V:2,L:{M:["actions"],L:function(e,t,n){return e.actions},F:function(e,t,n,r){return e.actions}},K:"index",C:[{T:"wx-view",A:{class:"cell","hover-class":"cell__hover","data-index":{L:function(e,t,n){return t[1]},F:function(e,t,n,r){return t[1]}},"bind:tap":"buttonTap"},C:[{T:"wx-view",A:{class:"cell-img-container"},C:[{T:"wx-image",A:{class:"cell-img",src:{L:function(e,t,n){return a(t[0],"imageDarkSrc")},F:function(e,t,n,r){return i(t[0]).imageDarkSrc}}},C:[]}]},{T:"wx-view",A:{class:"cell-desc"},C:[{S:{L:function(e,t,n){return a(t[0],"text")},F:function(e,t,n,r){return i(t[0]).text}}}]}]}]}]},{T:"wx-view",A:{class:"menu-after"},C:[]}]}]}]}]}],BM:{closeBtn:[[0,1,0,0,0,"src"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},cancelText:{type:String,value:"取消"},actions:{type:Array,value:[]}},attached(){this.attached=!0,t.triggerRender((()=>{this.setData({closeBtn:"https://res.wx.qq.com/op_res/hlMx1wXYJya8ib3DpW10m6aLCGf7RoluABX1QvNEAxVIyhhGuY0iI62dzv56y5rq9nBrd-H44CqoH5dM9JTr0g"})}))},observers:{show(e){this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((()=>{this.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((()=>{this.triggerEvent("closed",{},{})}),200))}},methods:{buttonTap(e){const{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.actions[t]},{})},handleClose(){this.triggerEvent("close",{},{})},stopEvent(){}}}),t.registerElement({is:"wx-view",template:{content:function(){var e={},t={P:"",C:[{V:5,N:"",C:[]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{hoverClass:String},listeners:{"this.touchstart":function(){this.hoverStart()},"this.touchend":function(){this.hoverEnd()},"this.canceltap":function(){this.hoverEnd()}},methods:{hoverStart(){this.data.hoverClass&&(this.classList.toggle(this.data.hoverClass,!0),t.triggerRender())},hoverEnd(){this.data.hoverClass&&(this.classList.toggle(this.data.hoverClass,!1),t.triggerRender())}}}),t.registerElement({is:"wx-image",template:{content:function(){var e={},t={P:"",C:[{T:"image",A:{src:{L:function(e,t,n){return e.src},F:function(e,t,n,r){return e.src}},style:"width: 100%; height: 100%;"},C:[]}],BM:{src:[[0,"src"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{src:{type:String,public:!0}}}),t.registerElement({is:"wx-adaptive-image",template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{id:"wrapper",style:"width: 100%; height: 100%; display: flex; flex-direction: column; flex-shrink: 0; align-items: center;"},C:[{T:"image",A:{src:{L:function(e,t,n){return e.src},F:function(e,t,n,r){return e.src}},style:{L:function(e,t,n){return!(!e.imgStyleWidth&&!e.imgStyleHeight)||void 0},F:function(e,t,n,r){return"width: "+e.imgStyleWidth+"px; height: "+e.imgStyleHeight+"px;"}}},C:[]}]}],BM:{src:[[0,0,"src"]],imgStyleHeight:[[0,0,"style"]],imgStyleWidth:[[0,0,"style"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{src:{type:String,public:!0},srcWidth:{type:Number,public:!0,value:0,observer:"_onSrcSizeChange"},srcHeight:{type:Number,public:!0,value:0,observer:"_onSrcSizeChange"}},data:{imgStyleWidth:0,imgStyleHeight:0},attached(){this.attached=!0,this._onSrcSizeChange()},detached(){this.attached=!1},methods:{_onSrcSizeChange(){if(!this.attached)return;const e=this.$$.getBoundingClientRect(),t=Math.min(e.width,this.data.srcWidth),n=t*this.data.srcHeight/this.data.srcWidth;this.setData({imgStyleWidth:t,imgStyleHeight:n})}}}),t.registerElement({is:"wx-scroll-view",template:{content:function(){var e={},t={P:"",C:[{T:"scrollview",A:{"scroll-x":{L:function(e,t,n){return!!e.scrollX||void 0},F:function(e,t,n,r){return e.scrollX?"1":""}},"scroll-y":{L:function(e,t,n){return!!e.scrollY||void 0},F:function(e,t,n,r){return e.scrollY?"1":""}},style:"width: 100%; height: 100%"},C:[{T:"view",A:{},C:[{V:5,N:"",C:[]}]}]}],BM:{scrollX:[[0,"scroll-x"]],scrollY:[[0,"scroll-y"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{scrollX:{type:Boolean,public:!0,value:!1},scrollY:{type:Boolean,public:!0,value:!1}}}),t.registerElement({is:"example",template:{content:function(){var e={},t={P:"",C:[{V:1,B:[{B:{L:function(e,t,n){return!!e.hidden||void 0},F:function(e,t,n,r){return!e.hidden}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.contentIn||void 0},F:function(e,t,n,r){return"root "+(e.contentIn?"root-in":"")}}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.contentIn||void 0},F:function(e,t,n,r){return"content "+(e.contentIn?"content-in":"")}}},C:[{T:"wx-view",A:{class:"title"},C:[{S:"\n          弹框标题\n        "}]},{T:"wx-view",A:{class:"body"},C:[{S:"\n          小程序需要访问你的用户信息\n        "}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button ok","hover-class":"ok-hover","bind:tap":"hide"},C:[{S:"允许"}]},{T:"wx-view",A:{class:"button deny","hover-class":"deny-hover","bind:tap":"hide"},C:[{S:"拒绝"}]}]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},attached(){t.triggerRender((()=>{this.setData({contentIn:!0})}))},methods:{hide(){this.triggerEvent("destroy")}}}),t.registerElement({is:"drag",template:{content:function(){var e={},t={P:"",C:[{T:"view",A:{id:"inner",draggable:"1",class:"button ok","bind:tap":"hide","bind:dragstart":"dragStart","bind:dragmove":"dragMove","bind:dragend":"dragEnd",style:{L:function(e,t,n){return!(!e.dx&&!e.dy)||void 0},F:function(e,t,n,r){return"width: 200px; height: 100px; padding: 20px; -wx-engine-touch-event: none; transform: translate("+e.dx+"px, "+e.dy+"px)"}}},C:[{T:"view",A:{"bind:touchstart":"hoverStart","bind:touchend":"hoverEnd",style:"background: yellow; width: 150px; height: 40px;"},C:[{S:"\n        可拖动按钮\n      "}]}]}],BM:{dx:[[0,"style"]],dy:[[0,"style"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},attached(){},data:{dx:0,dy:0},methods:{hide(){this.triggerEvent("destroy")},dragStart(){console.warn("dragStart")},dragMove(){console.warn("dragMove")},dragEnd(e){console.warn("dragEnd"),this.setData({dx:e.detail.draggedLeft-e.detail.originalLeft,dy:e.detail.draggedTop-e.detail.originalTop})},hoverStart(){console.warn("hoverStart"),this.$.inner.classList.toggle("ok-hover",!0),t.triggerRender()},hoverEnd(){console.warn("hoverEnd"),this.$.inner.classList.toggle("ok-hover",!1),t.triggerRender()}}}),t.registerElement({is:"scroll",template:{content:function(){var e={},t={P:"",C:[{T:"scrollview",A:{"scroll-y":"1",style:"height: 200px; width: 50%; background: yellow"},C:[{T:"wx-view",A:{},C:[{V:2,L:{M:["list"],L:function(e,t,n){return e.list},F:function(e,t,n,r){return e.list}},K:null,C:[{T:"wx-view",A:{style:"height: 40px; background: rgba(0, 255, 0, 0.1)"},C:[{S:{L:function(e,t,n){return!!t[1]||void 0},F:function(e,t,n,r){return"AAA "+t[1]}}}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},data:{list:[1,2,3,4,5,6,7,8,9,10]},attached(){},methods:{hide(){this.triggerEvent("destroy")}}});const l=t.registerElement({template:{content:function(){var e={},t={P:"",C:[{V:5,N:"",C:[]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},methods:{append(e,n){const r=this.shadowRoot.createComponent(e);return r.classList.toggle("__wx_scl__layer",!0),r.addListener("destroy",(e=>{e.target===r&&this.remove(r)})),n&&r.setData(n),this.shadowRoot.appendChild(r),t.triggerRender(),r},remove(e){e.is,this.shadowRoot.removeChild(e)}}}),d=BabelRuntimeHelpers.objectSpread2;var u=n.n(d);n(605);const p="http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFSnFBqI0TCnqPr9BWu0PoOWibkNvL6TVxte3E8icyiaVGJqkWEGytEVb9A/0?wx_fmt=png",h="http://mmbiz.qpic.cn/sz_mmbiz_jpg/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFiawcLL2BcFTKggEbIdxtwdK6pmOgfVhErWicRib2huw7Z5zadjVtJVQJQ/0?wx_fmt=jpeg",f="http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFLT4OSfr939t6n2t2uLIvhprQIEsnS4F73XToyIDQYaKCmw4tAv212w/0?wx_fmt=png";t.registerElement({is:"werun",options:{classPrefix:"werun",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,r){return"mask "+(e.enter?"mask-in":"")}}},C:[]},{T:"wx-view",A:{class:"container"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,r){return"content "+(e.enter?"content-in":"")}},style:{L:function(e,t,n){return!!e.contentHeight||void 0},F:function(e,t,n,r){return"height: "+e.contentHeight+"px"}}},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return e.title},F:function(e,t,n,r){return e.title}}}]},{T:"wx-view",A:{class:"info-wrp","bind:tap":"showNote"},C:[{T:"wx-image",A:{class:"info",src:{L:function(e,t,n){return e.iconInfo},F:function(e,t,n,r){return e.iconInfo}}},C:[]}]}]},{T:"wx-view",A:{class:"body"},C:[{T:"wx-view",A:{class:"sport-list"},C:[{V:2,L:{M:["sport_name"],L:function(e,t,n){return e.sport_name},F:function(e,t,n,r){return e.sport_name}},K:null,C:[{T:"wx-view",A:{class:"sport-item"},C:[{S:{L:function(e,t,n){return!!t[0]||void 0},F:function(e,t,n,r){return"・ "+t[0]}}}]}]}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button cancel","bind:tap":"handleCancel"},C:[{S:"取消"}]},{T:"wx-view",A:{class:"button confirm","bind:tap":"handleConfirm"},C:[{S:"确定"}]}]}]},{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.noteEnter||void 0},F:function(e,t,n,r){return"note-content "+(e.noteEnter?"note-content-in":"")}},style:{L:function(e,t,n){return!!e.noteContentHeight||void 0},F:function(e,t,n,r){return"height: "+e.noteContentHeight+"px"}}},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-view",A:{class:"note-title"},C:[{S:{L:function(e,t,n){return e.note_title},F:function(e,t,n,r){return e.note_title}}}]},{T:"wx-view",A:{class:"note-back-wrp","bind:tap":"hideNote"},C:[{T:"wx-image",A:{class:"note-back",src:{L:function(e,t,n){return e.iconBack},F:function(e,t,n,r){return e.iconBack}}},C:[]}]}]},{T:"wx-view",A:{class:"body"},C:[{T:"wx-view",A:{class:"note-detail"},C:[{S:{L:function(e,t,n){return e.note_detail},F:function(e,t,n,r){return e.note_detail}}}]},{T:"wx-view",A:{class:"note-guide-wrap"},C:[{T:"wx-image",A:{class:"note-guide",src:{L:function(e,t,n){return e.iconGuide},F:function(e,t,n,r){return e.iconGuide}}},C:[]}]}]}]}]}]}],BM:{noteContentHeight:[[0,1,1,"style"]],title:[[0,1,0,0,0,0]],noteEnter:[[0,1,1,"class"]],note_detail:[[0,1,1,1,0,0]],note_title:[[0,1,1,0,0,0]],enter:[[0,0,"class"],[0,1,0,"class"]],iconGuide:[[0,1,1,1,1,0,"src"]],iconBack:[[0,1,1,0,1,0,"src"]],iconInfo:[[0,1,0,0,1,0,"src"]],contentHeight:[[0,1,0,"style"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{title:{type:String,value:"将本次健身数据分享到微信运动"},sport_name:{type:Array,value:[]},note_detail:{type:String,value:"分享后，朋友将可以在微信运动排行榜上看到你的身体情况。"},note_title:{type:String,value:"数据分享说明"},theme:{type:String,value:"light"},input:{type:String,value:""}},data:{enter:!1,noteEnter:!1,dark:!1,duration:300,contentHeight:358,noteContentHeight:338,clickMoreCount:0,iconInfo:f,iconBack:p,iconGuide:h},observers:{dark(e){const t=e?"http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFicwaUzmY9aicOlBBB48mlqnBBZpiaApuc0A0JictujwKmRMFhznZ4icRxIQ/0?wx_fmt=png":f,n=e?"http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFGTakK9zJelrNNu9dwibzP7pibT397icnFKwvccOcicGst5z6Ja0btqpELA/0?wx_fmt=png":p,r=e?"http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFmG4UmtBrK7zrJZ2oFicwTBXY81xn0GprVhSp5rMYEicXjYJEBRV9IQMg/0?wx_fmt=png":h;this.setData({iconInfo:t,iconBack:n,iconGuide:r})},theme(e){this.setData({dark:"dark"===e})},input(e){if(!e)return;const t=JSON.parse(e),n=358-28*(5-t.sport_name.length),r=Math.max(n,338);this.setData(u()(u()({},t),{},{contentHeight:n,noteContentHeight:r}))}},attached(){t.triggerRender((()=>{this.setData({enter:!0})}))},methods:{showNote(){this.data.clickMoreCount++,t.triggerRender((()=>{this.setData({noteEnter:!0})}))},hideNote(){t.triggerRender((()=>{this.setData({noteEnter:!1})}))},handleCancel(){this.triggerEvent("cancel",{clickMoreCount:this.data.clickMoreCount}),this.destory()},handleConfirm(){this.triggerEvent("confirm",{clickMoreCount:this.data.clickMoreCount}),this.destory()},destory(){this.setData({enter:!1}),setTimeout((()=>{this.triggerEvent("destroy")}),this.data.duration)}}});n(431);t.registerElement({is:"authorize",options:{classPrefix:"authorize",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.overlay},F:function(e,t,n,r){return e.overlay}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,r){return"mask "+(e.enter?"mask-in":"")}}},C:[]}]}]},{T:"wx-view",A:{class:"container"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,r){return"content "+(e.enter?"content-in":"")}}},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-image",A:{class:"icon",src:{L:function(e,t,n){return e.icon},F:function(e,t,n,r){return e.icon}}},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return!!e.nickname||void 0},F:function(e,t,n,r){return e.nickname+" 申请"}}}]}]},{T:"wx-view",A:{class:"body"},C:[{T:"wx-view",A:{class:"apply-info"},C:[{S:{L:function(e,t,n){return e.apply},F:function(e,t,n,r){return e.apply}}}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button cancel","bind:tap":"handleCancel"},C:[{S:"拒绝"}]},{T:"wx-view",A:{class:"button confirm","bind:tap":"handleConfirm"},C:[{S:"允许"}]}]}]}]}]}],BM:{nickname:[[0,1,0,0,1,0]],apply:[[0,1,0,1,0,0]],icon:[[0,1,0,0,0,"src"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{nickname:{type:String,value:""},icon:{type:String,value:""},overlay:{type:Boolean,value:!0},apply:{type:String,value:""},input:{type:String,value:""}},data:{enter:!1,duration:300},observers:{input(e){if(!e)return;const t=JSON.parse(e);this.setData(t)}},attached(){t.triggerRender((()=>{this.setData({enter:!0})}))},methods:{handleCancel(){this.triggerEvent("cancel"),this.destory()},handleConfirm(){this.triggerEvent("confirm"),this.destory()},destory(){this.setData({enter:!1}),setTimeout((()=>{this.triggerEvent("destroy")}),this.data.duration)}}});n(261);t.registerElement({is:"navigateToMp",options:{classPrefix:"navigate-to-mp",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{V:1,B:[{B:{L:function(e,t,n){return!!e.type||void 0},F:function(e,t,n,r){return 1===e.type}},C:[{T:"mp-dialog",A:{show:{L:function(e,t,n){return e.show},F:function(e,t,n,r){return e.show}},buttons:{L:function(e,t,n){return e.buttons},F:function(e,t,n,r){return e.buttons}},"bind:close":"handleClose","bind:closed":"handleClosed","bind:buttontap":"handleTapButton","mask-closable":{L:function(e,t,n){},F:function(e,t,n,r){return!1}}},C:[{T:"wx-view",A:{class:"title",slot:"title"},C:[{S:{L:function(e,t,n){return e.title},F:function(e,t,n,r){return e.title}}}]},{V:7,N:"body",C:[{V:1,B:[{B:{L:function(e,t,n){return!(!e.logo&&!e.name)||void 0},F:function(e,t,n,r){return e.logo||e.name}},C:[{T:"wx-view",A:{class:"body"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.logo},F:function(e,t,n,r){return e.logo}},C:[{T:"wx-image",A:{class:"logo",src:{L:function(e,t,n){return e.logo},F:function(e,t,n,r){return e.logo}}},C:[]}]}]},{V:1,B:[{B:{L:function(e,t,n){return e.name},F:function(e,t,n,r){return e.name}},C:[{T:"wx-view",A:{class:"name"},C:[{S:{L:function(e,t,n){return e.name},F:function(e,t,n,r){return e.name}}}]}]}]},{T:"wx-view",A:{class:"desc"},C:[{S:{L:function(e,t,n){return e.desc},F:function(e,t,n,r){return e.desc}}}]}]}]},{B:1,C:[{T:"wx-view",A:{class:"body-placeholder"},C:[]}]}]}]}]}]},{B:{L:function(e,t,n){return!!e.type||void 0},F:function(e,t,n,r){return 2===e.type}},C:[{T:"mp-half-screen-dialog",A:{show:{L:function(e,t,n){return e.show},F:function(e,t,n,r){return e.show}},buttons:{L:function(e,t,n){return e.buttons},F:function(e,t,n,r){return e.buttons}},"bind:close":"handleClose","bind:closed":"handleClosed","bind:buttontap":"handleTapButton","mask-closable":{L:function(e,t,n){},F:function(e,t,n,r){return!1}}},C:[{T:"wx-view",A:{class:"title",slot:"title"},C:[{S:{L:function(e,t,n){return e.title},F:function(e,t,n,r){return e.title}}}]},{V:7,N:"body",C:[{V:1,B:[{B:{L:function(e,t,n){return!(!e.logo&&!e.name)||void 0},F:function(e,t,n,r){return e.logo||e.name}},C:[{T:"wx-view",A:{class:"body"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.logo},F:function(e,t,n,r){return e.logo}},C:[{T:"wx-image",A:{class:"logo",src:{L:function(e,t,n){return e.logo},F:function(e,t,n,r){return e.logo}}},C:[]}]}]},{V:1,B:[{B:{L:function(e,t,n){return e.name},F:function(e,t,n,r){return e.name}},C:[{T:"wx-view",A:{class:"name"},C:[{S:{L:function(e,t,n){return e.name},F:function(e,t,n,r){return e.name}}}]}]}]},{T:"wx-view",A:{class:"desc"},C:[{S:{L:function(e,t,n){return e.desc},F:function(e,t,n,r){return e.desc}}}]}]}]},{B:1,C:[{T:"wx-view",A:{class:"body-placeholder"},C:[]}]}]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{type:{type:Number},title:{type:String,value:"即将打开以下小程序"},logo:{type:String,value:""},name:{type:String,value:""},desc:{type:String,value:""},confirmText:{type:String,value:"允许"},cancelText:{type:String,value:"取消"},maskClosable:{type:Boolean,value:!1}},observers:{confirmText(e){this.setData({buttons:this.getButtons(e,this.data.cancelText)})},cancelText(e){this.setData({buttons:this.getButtons(this.data.confirmText,e)})}},data:{show:!1,buttons:[]},attached(){t.triggerRender((()=>{this.setData({buttons:this.getButtons(this.data.confirmText,this.data.cancelText),show:!0})}))},methods:{getButtons:(e,t)=>[{type:"default",text:t},{type:"primary",text:e}],handleTapButton(e){1===e.detail.index?this.handleConfirm():this.handleCancel()},handleClose(){this.handleCancel()},handleCancel(){this.triggerEvent("cancel"),this.triggerDestroy()},handleConfirm(){this.triggerEvent("confirm"),this.triggerDestroy()},handleClosed(){this.triggerEvent("destroy")},triggerDestroy(){this.setData({show:!1})}}});n(172);const g=e=>e.split("?",2)[0],_=e=>".html"===e.slice(-5)?e.slice(0,-5):e,m=(e,t)=>("/"!==(e=_(e))[0]&&(e="/"+e),_(e)===_(g(t)));t.registerElement({is:"frameset",options:{classPrefix:"frameset",virtualHost:!0},template:{content:function(){var e={},t={P:"",C:[{T:"virtuallayout",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.hasTabs},F:function(e,t,n,r){return e.hasTabs}},C:[{T:"tabbar",A:{class:"tabs",direction:"vertical"},C:[]}]}]},{T:"virtuallayout",A:{class:"panels"},C:[{T:"virtuallayout",A:{class:"left-panel"},C:[{V:2,L:{M:["tabs"],L:function(e,t,n){return e.tabs},F:function(e,t,n,r){return e.tabs}},K:"i",C:[{V:2,L:{M:[0,"pages"],L:function(e,t,n){return a(t[0],"pages")},F:function(e,t,n,r){return i(t[0]).pages}},K:"i",C:[{T:"frame",A:{class:{L:function(e,t,n){return!!a(t[0],"hidden")||void 0},F:function(e,t,n,r){return"left-page "+(i(t[0]).hidden?"hidden":"")}},"back-button":{L:function(e,t,n){return!!t[3]||void 0},F:function(e,t,n,r){return t[3]>0?"true":""}},url:{L:function(e,t,n){return a(t[2],"url")},F:function(e,t,n,r){return i(t[2]).url}},"margin-left":"1","margin-right":"1","data-side":{L:function(e,t,n){},F:function(e,t,n,r){return"left"}},"bind:navigateBack":"navigateBack","bind:resize":"triggerPageOnResize"},C:[]}]}]}]},{T:"virtuallayout",A:{class:"right-panel"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.placeholderImage},F:function(e,t,n,r){return e.placeholderImage}},C:[{T:"image",A:{src:{L:function(e,t,n){return e.placeholderImage},F:function(e,t,n,r){return e.placeholderImage}},class:"right-placeholder"},C:[]}]}]},{V:2,L:{M:["mainPages"],L:function(e,t,n){return e.mainPages},F:function(e,t,n,r){return e.mainPages}},K:"i",C:[{T:"frame",A:{class:{L:function(e,t,n){return!!a(t[0],"aniIn")||void 0},F:function(e,t,n,r){return"right-page "+(i(t[0]).aniIn?"right-page-in":"")}},"back-button":"true",url:{L:function(e,t,n){return a(t[0],"url")},F:function(e,t,n,r){return i(t[0]).url}},"data-side":{L:function(e,t,n){},F:function(e,t,n,r){return"right"}},"bind:navigateBack":"navigateBack","bind:resize":"triggerPageOnResize"},C:[]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},lifetimes:{route({method:e,url:t,args:n}){this[e](t,n)}},data:{hasTabs:!1,tabs:[],mainPages:[]},created(){this.globalShowStatus=!0,this.shownTabDepths=[],this.shownMainPagesDepth=-1,this.pageLifeTimeCallback=()=>{}},observers:{"hasTabs, tabs.**, mainPages.**":function(){this.triggerShowHideEvents()}},methods:{normalizeUrl:e=>("/"!==e[0]&&(e="/"+e),(e=>{const t=e.indexOf("?");return-1===t?e+".html":e.slice(0,t)+".html"+e.slice(t)})(e)),appLaunch(e,{tabBarConfig:t,entryPagePath:n}){const r=t&&t.list&&t.list.length>0&&!t.custom,o=this.normalizeUrl(e);let i=null;if(r)t.list.forEach((e=>{m(e.pagePath,o)&&(i=o)}));else{if(!m(n,o))return;i=this.normalizeUrl(_(n))}null===i?this.setData({hasTabs:r,tabs:[{i:0,hidden:!1,pages:[{i:0,url:this.normalizeUrl(_(n))}]}],mainPages:[{i:0,url:o,aniIn:!0}]}):this.setData({hasTabs:r,tabs:[{i:0,hidden:!1,pages:[{i:0,url:i}]}],mainPages:[]})},reLaunch(e){e=this.normalizeUrl(e),this.setData({tabs:[{i:0,hidden:!1,pages:[{i:0,url:e}]}],mainPages:[]})},switchTab(e){e=this.normalizeUrl(e);let t=!1;this.data.tabs.forEach((n=>{g(n.pages[0].url)===g(e)?(n.hidden=!1,t=!0):n.hidden=!0})),t||this.data.tabs.push({i:this.data.tabs.length,hidden:!1,pages:[{i:0,url:e}]}),this.setData({tabs:this.data.tabs,mainPages:[]})},navigateBack(e){let t="right";e&&(t=e.currentTarget.dataset.side),"left"===t?(this.data.tabs.forEach((e=>{!e.hidden&&e.pages.length>1&&e.pages.pop()})),this.setData({tabs:this.data.tabs})):(this.aniOut(),setTimeout((()=>{this.setData({mainPages:this.data.mainPages.slice(0,-1)})}),500))},navigateTo(e){e=this.normalizeUrl(e);const t=this.data.mainPages.length;this.setData({mainPages:this.data.mainPages.concat([{i:t,url:e}])}),this.aniIn()},redirectTo(e){e=this.normalizeUrl(e);const t=this.data.mainPages.length-1;this.setData({mainPages:this.data.mainPages.slice(0,-1).concat([{i:t,url:e}])}),this.aniIn()},aniIn(){const e=this.data.mainPages.length-1;t.triggerRender((()=>{this.setData({[`mainPages[${e}].aniIn`]:!0})}))},aniOut(){const e=this.data.mainPages.length-1;this.setData({[`mainPages[${e}].aniIn`]:!1})},setPlaceholderImage(e){this.setData({placeholderImage:e})},triggerShowHideEvents(){const e=this.data.tabs.map((({pages:e,hidden:t})=>t||!this.globalShowStatus?-1:e.length-1)),t=this.globalShowStatus?this.data.mainPages.length-1:-1;if(e.forEach(((e,t)=>{const n=this.shownTabDepths[t]||0;if(n<e&&n>=0){const e=this.$.tabList.childNodes[t].querySelector(".left-page")[n].$$.getAttribute("-view-id");this.pageLifeTimeCallback(e,"Hide")}else if(e<n&&e>=0){const n=this.$.tabList.childNodes[t].querySelector(".left-page")[e].$$.getAttribute("-view-id");this.pageLifeTimeCallback(n,"Show")}})),this.shownMainPagesDepth<t&&this.shownMainPagesDepth>=0){const e=this.$.pageList.childNodes[this.shownMainPagesDepth].querySelector(".right-page").$$.getAttribute("-view-id");this.pageLifeTimeCallback(e,"Hide")}else if(t<this.shownMainPagesDepth&&t>=0){const e=this.$.pageList.childNodes[t].querySelector(".right-page").$$.getAttribute("-view-id");this.pageLifeTimeCallback(e,"Show")}this.shownTabDepths=e,this.shownMainPagesDepth=t},setGlobalShowStatus(e){this.globalShowStatus!==e&&(this.globalShowStatus=e,this.triggerShowHideEvents())},triggerPageOnResize(e){const{viewId:t,size:n}=e.detail;this.pageLifeTimeCallback(t,"Resize",{size:n})},setPageLifeTimeCallback(e){this.pageLifeTimeCallback=e}}});n(78);let y=3;t.registerElement({is:"game-ranklist",options:{classPrefix:"game-ranklist",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-image",A:{class:"close",src:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png","bind:tap":"close"},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return e.title},F:function(e,t,n,r){return e.title}}}]},{T:"wx-view",A:{class:"close"},C:[]}]},{T:"wx-view",A:{class:"line"},C:[]},{T:"wx-view",A:{class:"body"},C:[{V:2,L:{M:["show"],L:function(e,t,n){return e.show},F:function(e,t,n,r){return e.show}},K:"index",C:[{T:"wx-view",A:{},C:[{T:"wx-view",A:{class:"item"},C:[{T:"wx-image",A:{class:"icon",src:{L:function(e,t,n){return a(t[0],"head_img_url")},F:function(e,t,n,r){return i(t[0]).head_img_url}}},C:[]},{T:"wx-view",A:{class:"name"},C:[{S:{L:function(e,t,n){return a(t[0],"user_name")},F:function(e,t,n,r){return i(t[0]).user_name}}}]},{T:"wx-view",A:{class:"score"},C:[{S:{L:function(e,t,n){return a(t[0],"score_desc")},F:function(e,t,n,r){return i(t[0]).score_desc}}}]}]},{T:"wx-view",A:{class:"line"},C:[]}]}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button","bind:tap":"left"},C:[{T:"wx-image",A:{class:{L:function(e,t,n){return!!e.canl||void 0},F:function(e,t,n,r){return"btn-icon "+(e.canl?"":"disabled")}},src:"https://res.wx.qq.com/a/fed_upload/d71d0af9-0fb5-4fd6-aa3c-f9ff1494435e/left.png"},C:[]}]},{T:"wx-view",A:{class:"button","bind:tap":"right"},C:[{T:"wx-image",A:{class:{L:function(e,t,n){return!!e.canr||void 0},F:function(e,t,n,r){return"btn-icon "+(e.canr?"":"disabled")}},src:"https://res.wx.qq.com/a/fed_upload/dfbbd68d-9cfc-4ddc-a77a-3f049f3757f5/right.png"},C:[]}]}]}]}]}],BM:{canl:[[0,0,3,0,0,"class"]],title:[[0,0,0,1,0]],canr:[[0,0,3,1,0,"class"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{title:{type:String,value:""},list:{type:Array,value:[]}},data:{page:0,canl:!1,canr:!1,show:[],all:[]},observers:{list(e){y="portrait"===n.g.__wxConfig.deviceOrientation?5:3,Array.isArray(e)&&this.setData({page:0,all:e,canr:e.length>y,show:e.slice(0,y)})}},methods:{left(){if(!this.data.canl)return;const e=this.data.page-1;this.setData({page:e,canl:e>0,canr:this.data.all.length>y*(e+1),show:this.data.all.slice(y*e,y*(e+1))})},right(){if(!this.data.canr)return;const e=this.data.page+1;this.setData({page:e,canl:e>0,canr:this.data.all.length>y*(e+1),show:this.data.all.slice(y*e,y*(e+1))})},close(){this.triggerEvent("destroy")}}});n(426);const v=[];e.onViewportResize((e=>{v.forEach((t=>t(e)))}));t.registerElement({is:"share-image",behaviors:["wx-theme"],options:{multipleSlots:!0,classPrefix:"share-image",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{V:1,B:[{B:{L:function(e,t,n){return!!e.orientation||void 0},F:function(e,t,n,r){return"portrait"===e.orientation}},C:[{T:"mp-bubble-action-sheet",A:{actions:{L:function(e,t,n){return e.actionsArr},F:function(e,t,n,r){return e.actionsArr}},show:{L:function(e,t,n){return e.show},F:function(e,t,n,r){return e.show}},mask:{L:function(e,t,n){},F:function(e,t,n,r){return!1}},"bind:buttontap":"onButtonTap","bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,r){return"mask "+(e.show?"mask__in":"")}},slot:"mask"},C:[]},{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,r){return"container "+(e.show?"container__in":"")}},slot:"mask"},C:[{T:"wx-view",A:{class:"scroller-container"},C:[{T:"scrollview",A:{class:"scroller","scroll-y":"1"},C:[{T:"wx-view",A:{class:"img-wrapper"},C:[{T:"wx-adaptive-image",A:{class:"img",src:{L:function(e,t,n){return e.imgPath},F:function(e,t,n,r){return e.imgPath}},srcHeight:{L:function(e,t,n){return e.height},F:function(e,t,n,r){return e.height}},srcWidth:{L:function(e,t,n){return e.width},F:function(e,t,n,r){return e.width}}},C:[]}]}]}]}]}]}]},{B:1,C:[{T:"mp-horizonal-bubble",A:{actions:{L:function(e,t,n){return e.actionsArr},F:function(e,t,n,r){return e.actionsArr}},show:{L:function(e,t,n){return e.show},F:function(e,t,n,r){return e.show}},"bind:buttontap":"onButtonTap","bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{slot:"content"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.show||void 0},F:function(e,t,n,r){return"landscape-container "+(e.show?"container__in":"")}}},C:[{T:"wx-view",A:{class:"scroller-container"},C:[{T:"scrollview",A:{class:"scroller","scroll-y":"1"},C:[{T:"wx-view",A:{class:"img-wrapper"},C:[{T:"wx-adaptive-image",A:{class:"img",src:{L:function(e,t,n){return e.imgPath},F:function(e,t,n,r){return e.imgPath}},srcHeight:{L:function(e,t,n){return e.height},F:function(e,t,n,r){return e.height}},srcWidth:{L:function(e,t,n){return e.width},F:function(e,t,n,r){return e.width}}},C:[]}]}]}]}]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{imgPath:{type:String,public:!0,value:""},height:{type:Number,public:!0,value:0},width:{type:Number,public:!0,value:0},actions:{type:String,public:!0,value:"[]"}},data:{show:!1,actionsArr:[],imgHeight:0,imgWidth:0,orientation:"portrait"},observers:{actions(){this.getActions(this.data.actions)}},created(){this.onViewportResize()},attached(){t.triggerRender((()=>{this.setData({show:!0})})),this._onViewportResize=this.onViewportResize.bind(this),v.push(this._onViewportResize);try{t.dumpElementToString(this,1)}catch(e){e.stack}},detached(){v.splice(v.indexOf(this._onViewportResize),1)},methods:{onViewportResize(){const t=e.getWindowWidth(),n=e.getWindowHeight();this.updateOrientation(t,n)},updateOrientation(e,t){this.setData({orientation:e<=t?"portrait":"landscape"})},getActions(e){const t=JSON.parse(e);this.setData({actionsArr:t})},onButtonTap(e){const{item:t}=e.detail;this.triggerEvent(t.action),this.triggerDestroy()},handleClose(){this.data.show&&(this.triggerEvent("cancel"),this.triggerDestroy())},handleClosed(){this.triggerEvent("destroy")},triggerDestroy(){this.setData({show:!1})}}});n(13);t.registerElement({is:"toast",options:{classPrefix:"toast",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{T:"wx-view",A:{class:"content"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.loading},F:function(e,t,n,r){return e.loading}},C:[{T:"wx-image",A:{src:"https://res.wx.qq.com/op_res/4gTGxmOnjTG1Pmsfj7JwUaZHfOb677UMxDEVI8p20yTosmcwujlY9-UEvMZm0ePGFGKS_PoQJNEN_S9YFfGTWA",class:"loading"},C:[]}]}]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return e.title},F:function(e,t,n,r){return e.title}}}]}]}]}],BM:{title:[[0,0,1,0]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{loading:{type:Boolean,value:!1},title:{type:String}},methods:{close(){this.triggerEvent("destroy")}}});n(164);const A=e.exparser,b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAABEElEQVR4Ae3aQQqCQACF4Yp2XaQDdP8T1L6LtC4FXf8RWhLfQIzwYBw/X250tzMIECBAgAABAgQIbFzgOuzvOf3G402MwyZ2seFNAIqbAwhQCESsQYBCIGINAhQCEWsQoBCIWIMAhUDEGgQoBCLWIEAhELEGAQqBiDUIUAhErEGAQiBiDQIUAhHvI5/jb7zIOw8nO00nfAzzfT75ivOl1n4XaHzj+Y8jr98zKG77MfI5vs0HK86/+IuteDnLL+3jheVN11/RMyiMAQEKgYg1CFAIRKxBgEIgYg0CFAIRaxCgEIhYgwCFQMQaBCgEItYgQCEQsQYBCoGINQhQCESsQYBCQEyAAAECBAgQIEDgE4EXsiEOYoSfPhkAAAAASUVORK5CYII=",w=[];e.onViewportResize((e=>{w.forEach((t=>t(e)))}));A.registerElement({is:"user-profile",options:{classPrefix:"user-profile",writeIdToDOM:!0},behaviors:["wx-theme"],template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.hide||void 0},F:function(e,t,n,r){return"root "+(e.hide?"hide":"")}}},C:[{V:1,B:[{B:{L:function(e,t,n){return e.overlay},F:function(e,t,n,r){return e.overlay}},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,r){return"mask "+(e.enter?"mask-in":"")}}},C:[]}]}]},{T:"wx-view",A:{class:"container"},C:[{T:"wx-view",A:{class:{L:function(e,t,n){return!!e.enter||void 0},F:function(e,t,n,r){return"content "+(e.enter?"content-in":"")}}},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-image",A:{class:"icon",src:{L:function(e,t,n){return e.appIcon},F:function(e,t,n,r){return e.appIcon}}},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return!!e.appName||void 0},F:function(e,t,n,r){return e.appName+" 申请"}}}]}]},{T:"wx-view",A:{class:"body",style:{L:function(e,t,n){return!!e.paddingBottom||void 0},F:function(e,t,n,r){return"padding-bottom: "+e.paddingBottom+"px"}}},C:[{T:"wx-view",A:{class:"apply-info"},C:[{S:"使用你的头像、昵称、性别及地区，用于个人信息展示。"}]},{T:"wx-view",A:{class:"info-list"},C:[{T:"wx-scroll-view",A:{"scroll-y":{L:function(e,t,n){},F:function(e,t,n,r){return!0}},style:{L:function(e,t,n){return!!e.scrollHeight||void 0},F:function(e,t,n,r){return"height: "+e.scrollHeight+"px;"}}},C:[{V:2,L:{M:["infoList"],L:function(e,t,n){return e.infoList},F:function(e,t,n,r){return e.infoList}},K:"id",C:[{T:"wx-view",A:{"bind:tap":"handleChoose","data-id":{L:function(e,t,n){return a(t[0],"id")},F:function(e,t,n,r){return i(t[0]).id}},style:"flex-shrink: 0;"},C:[{T:"wx-view",A:{class:"split-line"},C:[]},{T:"wx-view",A:{class:"info-item",id:{L:function(e,t,n){return!!a(t[0],"id")||void 0},F:function(e,t,n,r){return"item_"+i(t[0]).id}}},C:[{T:"wx-view",A:{class:"info-item__left"},C:[{T:"wx-image",A:{class:"info-item__avatar",src:{L:function(e,t,n){return a(t[0],"avatar")},F:function(e,t,n,r){return i(t[0]).avatar}}},C:[]},{T:"wx-view",A:{class:"info-item__desc__wrp"},C:[{T:"wx-view",A:{class:"info-item__nickname"},C:[{S:{L:function(e,t,n){return a(t[0],"nickname")},F:function(e,t,n,r){return i(t[0]).nickname}}}]},{V:1,B:[{B:{L:function(e,t,n){return a(t[0],"desc")},F:function(e,t,n,r){return i(t[0]).desc}},C:[{T:"wx-view",A:{class:"info-item__desc"},C:[{S:{L:function(e,t,n){return a(t[0],"desc")},F:function(e,t,n,r){return i(t[0]).desc}}}]}]}]}]}]},{V:1,B:[{B:{L:function(e,t,n){return!(!e.selected&&!a(t[0],"id"))||void 0},F:function(e,t,n,r){return e.selected===i(t[0]).id}},C:[{T:"wx-view",A:{class:"info-item__right"},C:[{T:"wx-image",A:{class:"icon-checked",src:{L:function(e,t,n){return e.iconChecked},F:function(e,t,n,r){return e.iconChecked}}},C:[]}]}]}]}]}]}]},{T:"wx-view",A:{class:"split-line"},C:[]}]},{V:1,B:[{B:{L:function(e,t,n){return!!(e.showType||e.exceed||e.isBanModifyAvatar)||void 0},F:function(e,t,n,r){return 1===e.showType&&!e.exceed&&!e.isBanModifyAvatar}},C:[{T:"wx-view",A:{class:"use-other-avatar","bind:tap":"handleCreate"},C:[{S:"使用其它头像和昵称"}]}]}]},{V:1,B:[{B:{L:function(e,t,n){return!!(e.showType||e.exceed||e.isBanModifyAvatar)||void 0},F:function(e,t,n,r){return 2===e.showType&&!e.exceed&&!e.isBanModifyAvatar}},C:[{T:"wx-view",A:{class:"info-item-add","bind:tap":"handleCreate"},C:[{T:"wx-image",A:{class:"info-item-add__plus",src:{L:function(e,t,n){return e.iconPlus},F:function(e,t,n,r){return e.iconPlus}}},C:[]},{T:"wx-view",A:{class:"info-item-add__text"},C:[{S:"使用其它头像和昵称"}]}]},{T:"wx-view",A:{class:"split-line"},C:[]}]}]},{V:1,B:[{B:{L:function(e,t,n){return e.exceed},F:function(e,t,n,r){return e.exceed}},C:[{T:"wx-view",A:{class:"exceed-tip"},C:[{S:"数量已达上限，无法新增"}]}]}]}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button cancel","bind:tap":"handleCancel","hover-class":"hand-over"},C:[{S:"取消"}]},{T:"wx-view",A:{class:"button confirm","bind:tap":"handleConfirm","hover-class":"hand-over"},C:[{S:"允许"}]}]}]}]}]}],BM:{scrollHeight:[[0,1,0,1,1,0,"style"]],appName:[[0,1,0,0,1,0]],appIcon:[[0,1,0,0,0,"src"]],hide:[[0,"class"]],paddingBottom:[[0,1,0,1,"style"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},data:{overlay:!0,enter:!1,hide:!1,duration:200,appName:"",appIcon:"",infoList:[],input:"",iconChecked:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAACT0lEQVR4Ae3asUoDMRgH8ORaqgh26CYOujk4uUlBBRFXVxcXfQJfQOqDWHyBIiI4SEEEKW4OPoduWqtt4n3IQSntXa6XpEn6D7TXHl+OfD+SI5cLYygQgAAEIAABCEAAAhCAAAQgAAEIQAACPgs0ZCPK036eJ9j32OXn040fIVqlcunkq371qpJPLk2VC7oaQzi/QjwyyTZFX7SXOmdbKm2dix6U4EjJVhIUzvlHVI4OsnpS8D1oHA4hxVhVOZDrCdikY9BAk3AY4/2I8+PuTvNmEkxyPtghlomz22wlCGnHIIF04RBccEA6cYID0o0TFJAJnGCATOEEAWQSx3sg0zheA9nA8RbIFo6XQDZxvAOyjeMV0CxwlIGqnbPaT1/cSckve3vNB6pos8wKh3LMfBYjnN6vaMcrKLQC981YdGQTaZY4mUAjOBRPxRrSrHEo2dQFswEbrHLO1ihwqCwyJm4Xnk4Ph85p/+kCDiWVCvRZv36jdVtavx0RMIrkCg7lnHkPoiB6A0BvAqSUNfo/VLQPN5dwKE8lIAq0geQaTi4g00gu4uQGMoXkKs5UQLqRXMaZGkgXkus4hYCKIvmAUxhoWiRfcLQA5UXyCUcbkCqSbzhagTKReHTOmbgY3oJCdeK56v9GAsV35f917H0rz6RVm5Qy4x5zCbdxqMHageiiakju4xgDykbyA8co0GQkf3Aoh9T1IAooUmj/X6Uit+ORfB+P5ff488JLcr/r6A25SK6oCwEIQAACEIAABCAAAQhAAAIQgAAEIACBuRD4AzKlWWPvanSJAAAAAElFTkSuQmCC",iconPlus:b,scrollHeight:66,screenHeight:812,screenWidth:375,showType:1,selected:0,limit:4,exceed:!1,isBanModifyAvatar:!1,paddingBottom:194},observers:{input(e){if(!e)return;const t=JSON.parse(e);this.setData(t)},infoList(e=[]){console.log("[user-profile]: infoListChanged");const t=e.length,n=this.data.limit;this.setData({exceed:t>=n}),this.didChangeScrollHeight()}},created(){console.log("[user-profile]: created"),this.onViewportResize()},attached(){console.log("[user-profile]: attached"),A.triggerRender((()=>{this.setData({enter:!0})})),this._onViewportResize=this.onViewportResize.bind(this),w.push(this._onViewportResize)},detached(){w.splice(w.indexOf(this._onViewportResize),1)},methods:{_onThemeChange({theme:e}){console.log("[user-profile] _onThemeChange: ",e),"dark"===e?this.setData({iconPlus:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAABT0lEQVR4Ae3aMQ6CQBRFUcdYuAxKF+XyXBSly7BDTMaQ3EzyJiLQXBt4fJjBkw/NcDr5U0ABBRRQQAEFFFCgIVAaxw45NE3TY574VicfSyn3Q24Ek56RjRAQCCCMAlEEWSCAMApEEWSBAMIoEEWQBQIIo0AUQRYIIIwCUQRZIIAwCkQRZIEAwigQRZAFAgijQBRBFgggjAJRBFkggDAKRBFkgQDCKBBFkAUCCGPXwmFd1OO1/87DPOC1Dvqat8+6v9mmZ3Hy0jn7d8Wz8/TVp32g9p6zedM+Yk2W5WBvB43LJZvtDfPIuz5iPf+k6x3UM9Dac/x4Ya3gQdf7DgrwAgkUBELZDhIoCISyHSRQEAhlO0igIBDKdpBAQSCU7SCBgkAo20ECBYFQtoMECgKhbAcJFARC2Q4SKAiEsh0kUBCwrIACCiiggAIKKKDALwJvdcMTni08WagAAAAASUVORK5CYII="}):this.setData({iconPlus:b})},didChangeScrollHeight(){const{screenHeight:e,screenWidth:t}=this.data;let n=65*this.data.infoList.length+1;const r=e>t,o=r?.75*e:.9*e,i=r?194:118,a=r?361:277;a+n>o&&(n=o-a),console.log("[user-profile]: screenHeight",e,"scrollHeight: ",n),this.setData({scrollHeight:n,paddingBottom:i})},onViewportResize(){console.log("[user-profile]: onViewportResize");const t=e.getWindowHeight(),n=e.getWindowWidth();this.setData({screenHeight:t,screenWidth:n}),this.didChangeScrollHeight()},handleCancel(){this.triggerEvent("cancel"),this.destory()},handleConfirm(){const e=this.data.selected;this.triggerEvent("confirm",{selected:e}),this.destory()},handleCreate(){this.data.exceed||(this.setData({hide:!0}),this.triggerEvent("create"))},handleChoose(e){const t=e.currentTarget.dataset.id;t!==this.data.selected&&this.setData({selected:t})},destory(){this.setData({enter:!1}),setTimeout((()=>{this.triggerEvent("destroy")}),this.data.duration)}}});n(300);const C=e=>e<10?`0${e}`:`${e}`;const I=n(821).exparser;let E=!1,S=null;I.registerElement({is:"verify-tip",options:{classPrefix:"verify-tip",writeIdToDOM:!0,virtualHost:!0},template:{content:function(){var e={},t={P:"",C:[{T:"virtuallayout",A:{class:"root"},C:[{T:"wx-view",A:{class:"content",style:{L:function(e,t,n){return!(!e.top&&!e.right)||void 0},F:function(e,t,n,r){return"top:"+e.top+"px;right:"+e.right+"px"}},"bind:tap":"tap"},C:[{V:1,B:[{B:{L:function(e,t,n){return e.showSeconds},F:function(e,t,n,r){return e.showSeconds}},C:[{T:"wx-view",A:{class:"cd"},C:[{T:"wx-view",A:{style:"margin-right:4px"},C:[{S:{L:function(e,t,n){return a(e.urlInfo,"name")},F:function(e,t,n,r){return i(e.urlInfo).name}}}]},{T:"wx-view",A:{style:{L:function(e,t,n){return!!e.remainSeconds||void 0},F:function(e,t,n,r){return"overflow-wrap:normal;color:"+(e.remainSeconds<300?"#fa5151":"#fff")}}},C:[{S:{L:function(e,t,n){return e.remainStr},F:function(e,t,n,r){return e.remainStr}}}]}]}]},{B:1,C:[{T:"wx-view",A:{class:"msg"},C:[{S:{L:function(e,t,n){return!(!e.miniAlertLongMsg&&!a(e.urlInfo,"name"))||void 0},F:function(e,t,n,r){return"\n        "+e.miniAlertLongMsg+i(e.urlInfo).name+"›\n      "}}}]}]}]},{T:"wx-view",A:{},C:[]}]}]}],BM:{right:[[0,0,"style"]],top:[[0,0,"style"]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{top:{type:Number,value:20},right:{type:Number,value:100},info:{type:String,value:"{}"}},data:{showSeconds:E,miniAlertLongMsg:"尚未实名认证",remainStr:"00:00",remainSeconds:-1,urlInfo:{name:"去实名"}},observers:{info(e){this.setData(JSON.parse(e))},remainSeconds(e){e<0&&(e=0);const t=e%60,n=Math.floor(e/60);this.setData({remainStr:C(n)+":"+C(t)})}},attached(){this.setData({showSeconds:E}),E||setTimeout((()=>{E=!0,this.setData({showSeconds:!0})}),1e4),S=setInterval((()=>{let{remainSeconds:e}=this.data;e&&(e--,this.setData({remainSeconds:e}),e||this.triggerEvent("stop"))}),1e3)},methods:{tap(){this.triggerEvent("click")},destroy(){clearInterval(S),this.triggerEvent("destroy")}}});n(521);t.registerElement({is:"ad-skip-card",options:{classPrefix:"ad-skip-card",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root","bind:tap":"close"},C:[{T:"wx-image",A:{class:"icon",src:"https://res.wx.qq.com/t/fed_upload/d3b06ed8-7ff2-4477-ae39-c37621d06f20/Frame%20348.png"},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,n){return!!e.amount||void 0},F:function(e,t,n,r){return"恭喜获得 广告跳过卡x"+e.amount}}}]},{T:"wx-view",A:{class:"sub"},C:[{S:"在小游戏中使用可跳过对应视频广告"}]},{T:"wx-view",A:{class:"sub"},C:[{S:"点击任意处关闭"}]}]}],BM:{amount:[[0,1,0]]}};return e[""]=function(){return t},function(t){var n=e[t];return n?n():null}}()},properties:{amount:{type:Number,value:1}},methods:{close(){this.triggerEvent("destroy")}}});var T=n(57);const x=n(446);let k=null,P=null,D=[],O=!1;const N=e=>{D?(D.push(e),1===D.length&&(x.setErrorListener((e=>{Reporter.errorReport({key:"exparserScriptError",error:e})})),WeixinJSBridge.invoke("loadWAFile",{filename:"WASclBackend.wasm"},(e=>{let t=e.arrayBuffer;O&&(t=e.arrayBuffer[__wxConfig.minaVmToken]||t),x.wasm_initialize({bin:t},(()=>{const e=D;D=null,e.forEach((e=>e()))}))})))):e()},R=()=>P,M=t=>{e.onViewportResize(t)},L=globalThis.atob||function(e){const t=String(e).replace(/[=]+$/,"");let n="";if(t.length%4==1)throw new Error('"atob" failed');for(let e,r,o=0,i=0;r=t.charAt(i++);~r&&(e=o%4?64*e+r:r,o++%4)?n+=String.fromCharCode(255&e>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return n},B=e=>{const t=()=>{e({mainRoot:P})};if(k)return void setTimeout(t,0);N((()=>{try{M((()=>{n(995).triggerRender()}));const r=x.Context.create();k=r.createElement("empty","virtuallayout"),r.bindRootNode(k),k.setClass("__wx_scl__root_node");var e=n(995);e.globalOptions.documentBackend="custom",e.globalOptions.customContext=r,e.initBackend(),T.W.length&&r.appendStyleSheet(T.W.join("")),T.J.length&&T.J.forEach((e=>r.appendStyleSheetBincode((e=>{const t=L(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return r})(e))));const o=r.createElement("empty","virtuallayout");k.appendChild(o),o.release(),P=e.createElement("virtuallayout",l),P.classList.toggle("__wx_scl__main_root",!0),e.Element.replaceDocumentElement(P,k,0),setTimeout(t,0)}catch(e){e.stack}}))},F=e=>n(995).globalOptions.customContext.constructor.getExparserElementByViewId(e),W=()=>{n(995).triggerRender()};void 0!==__wxConfig&&"ios"!==__wxConfig.platform&&"function"==typeof __wxConfig.onReady?(O="mina"===__wxConfig.platform,__wxConfig.onReady((()=>{setTimeout((()=>{__wxConfig.platform,N((()=>{}))}),3e3)}))):__wxConfig.platform})(),__sclEngine__=r})();var __waServiceInit__=function(){var e,t;(()=>{var r={781:e=>{"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),r=0,o=2,i=!0;for(;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,a){n[r]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,a(e))}}))}},26:(e,t)=>{"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),i=0;i<64;)o[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(e,t,n){for(var o,i=null,a=[],s=0,c=0;t<n;){var l=e[t++];switch(c){case 0:a[s++]=r[l>>2],o=(3&l)<<4,c=1;break;case 1:a[s++]=r[o|l>>4],o=(15&l)<<2,c=2;break;case 2:a[s++]=r[o|l>>6],a[s++]=r[63&l],c=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=r[o],a[s++]=61,1===c&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var a="invalid encoding";n.decode=function(e,t,n){for(var r,i=n,s=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&s>1)break;if(void 0===(l=o[l]))throw Error(a);switch(s){case 0:r=l,s=1;break;case 1:t[n++]=r<<2|(48&l)>>4,r=l,s=2;break;case 2:t[n++]=(15&r)<<4|(60&l)>>2,r=l,s=3;break;case 3:t[n++]=(3&r)<<6|l,s=0}}if(1===s)throw Error(a);return n-i},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},570:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},298:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function i(e,r,o){t[0]=e,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function s(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?o:i,e.writeFloatBE=r?i:o,e.readFloatLE=r?a:s,e.readFloatBE=r?s:a}():function(){function t(e,t,n,r){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function a(e,t,n){var r=e(t,n),o=2*(r>>31)+1,i=r>>>23&255,a=8388607&r;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=a.bind(null,o),e.readFloatBE=a.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function i(e,r,o){t[0]=e,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function s(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?o:i,e.writeDoubleBE=r?i:o,e.readDoubleLE=r?a:s,e.readDoubleBE=r?s:a}():function(){function t(e,t,n,r,o,i){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,o,i+t),e(1/r>0?0:2147483648,o,i+n);else if(isNaN(r))e(0,o,i+t),e(2146959360,o,i+n);else if(r>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+n);else{var s;if(r<22250738585072014e-324)e((s=r/5e-324)>>>0,o,i+t),e((a<<31|s/4294967296)>>>0,o,i+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=r*Math.pow(2,-c))>>>0,o,i+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,o,i+n)}}}function a(e,t,n,r,o){var i=e(r,o+t),a=e(r,o+n),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+i;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=a.bind(null,o,0,4),e.readDoubleBE=a.bind(null,i,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},116:e=>{"use strict";function t(e){try{var t=eval("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}e.exports=t},804:e=>{"use strict";e.exports=function(e,t,n){var r=n||8192,o=r>>>1,i=null,a=r;return function(n){if(n<1||n>o)return e(n);a+n>r&&(i=e(r),a=0);var s=t.call(i,a,a+=n);return 7&a&&(a=1+(7|a)),s}}},958:(e,t)=>{"use strict";var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,o=null,i=[],a=0;t<n;)(r=e[t++])<128?i[a++]=r:r>191&&r<224?i[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(r>>10),i[a++]=56320+(1023&r)):i[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},n.write=function(e,t,n){for(var r,o,i=n,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&o),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-i}},882:(e,t,n)=>{"use strict";var r=n(737),o=r.Reader,i=r.Writer,a=r.util,s=r.roots.default||(r.roots.default={});s.HTTPRequest=function(){function e(e){if(this.header=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.method="",e.prototype.header=a.emptyArray,e.prototype.body=a.newBuffer([]),e.prototype.callId="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(10).string(e.method),null!=e.header&&e.header.length)for(var n=0;n<e.header.length;++n)s.HTTPHeader.encode(e.header[n],t.uint32(18).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(26).bytes(e.body),null!=e.callId&&Object.hasOwnProperty.call(e,"callId")&&t.uint32(34).string(e.callId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.HTTPRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.method=e.string();break;case 2:r.header&&r.header.length||(r.header=[]),r.header.push(s.HTTPHeader.decode(e,e.uint32()));break;case 3:r.body=e.bytes();break;case 4:r.callId=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.method&&e.hasOwnProperty("method")&&!a.isString(e.method))return"method: string expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var n=s.HTTPHeader.verify(e.header[t]);if(n)return"header."+n}}return null!=e.body&&e.hasOwnProperty("body")&&!(e.body&&"number"==typeof e.body.length||a.isString(e.body))?"body: buffer expected":null!=e.callId&&e.hasOwnProperty("callId")&&!a.isString(e.callId)?"callId: string expected":null},e.fromObject=function(e){if(e instanceof s.HTTPRequest)return e;var t=new s.HTTPRequest;if(null!=e.method&&(t.method=String(e.method)),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPRequest.header: array expected");t.header=[];for(var n=0;n<e.header.length;++n){if("object"!=typeof e.header[n])throw TypeError(".HTTPRequest.header: object expected");t.header[n]=s.HTTPHeader.fromObject(e.header[n])}}return null!=e.body&&("string"==typeof e.body?a.base64.decode(e.body,t.body=a.newBuffer(a.base64.length(e.body)),0):e.body.length&&(t.body=e.body)),null!=e.callId&&(t.callId=String(e.callId)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.header=[]),t.defaults&&(n.method="",t.bytes===String?n.body="":(n.body=[],t.bytes!==Array&&(n.body=a.newBuffer(n.body))),n.callId=""),null!=e.method&&e.hasOwnProperty("method")&&(n.method=e.method),e.header&&e.header.length){n.header=[];for(var r=0;r<e.header.length;++r)n.header[r]=s.HTTPHeader.toObject(e.header[r],t)}return null!=e.body&&e.hasOwnProperty("body")&&(n.body=t.bytes===String?a.base64.encode(e.body,0,e.body.length):t.bytes===Array?Array.prototype.slice.call(e.body):e.body),null!=e.callId&&e.hasOwnProperty("callId")&&(n.callId=e.callId),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),s.HTTPResponse=function(){function e(e){if(this.header=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.statusCode=0,e.prototype.header=a.emptyArray,e.prototype.bodyBuffer=a.newBuffer([]),e.prototype.bodyString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.statusCode&&Object.hasOwnProperty.call(e,"statusCode")&&t.uint32(8).uint32(e.statusCode),null!=e.header&&e.header.length)for(var n=0;n<e.header.length;++n)s.HTTPHeader.encode(e.header[n],t.uint32(18).fork()).ldelim();return null!=e.bodyBuffer&&Object.hasOwnProperty.call(e,"bodyBuffer")&&t.uint32(26).bytes(e.bodyBuffer),null!=e.bodyString&&Object.hasOwnProperty.call(e,"bodyString")&&t.uint32(34).string(e.bodyString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.HTTPResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.statusCode=e.uint32();break;case 2:r.header&&r.header.length||(r.header=[]),r.header.push(s.HTTPHeader.decode(e,e.uint32()));break;case 3:r.bodyBuffer=e.bytes();break;case 4:r.bodyString=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.statusCode&&e.hasOwnProperty("statusCode")&&!a.isInteger(e.statusCode))return"statusCode: integer expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var n=s.HTTPHeader.verify(e.header[t]);if(n)return"header."+n}}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&!(e.bodyBuffer&&"number"==typeof e.bodyBuffer.length||a.isString(e.bodyBuffer))?"bodyBuffer: buffer expected":null!=e.bodyString&&e.hasOwnProperty("bodyString")&&!a.isString(e.bodyString)?"bodyString: string expected":null},e.fromObject=function(e){if(e instanceof s.HTTPResponse)return e;var t=new s.HTTPResponse;if(null!=e.statusCode&&(t.statusCode=e.statusCode>>>0),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPResponse.header: array expected");t.header=[];for(var n=0;n<e.header.length;++n){if("object"!=typeof e.header[n])throw TypeError(".HTTPResponse.header: object expected");t.header[n]=s.HTTPHeader.fromObject(e.header[n])}}return null!=e.bodyBuffer&&("string"==typeof e.bodyBuffer?a.base64.decode(e.bodyBuffer,t.bodyBuffer=a.newBuffer(a.base64.length(e.bodyBuffer)),0):e.bodyBuffer.length&&(t.bodyBuffer=e.bodyBuffer)),null!=e.bodyString&&(t.bodyString=String(e.bodyString)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.header=[]),t.defaults&&(n.statusCode=0,t.bytes===String?n.bodyBuffer="":(n.bodyBuffer=[],t.bytes!==Array&&(n.bodyBuffer=a.newBuffer(n.bodyBuffer))),n.bodyString=""),null!=e.statusCode&&e.hasOwnProperty("statusCode")&&(n.statusCode=e.statusCode),e.header&&e.header.length){n.header=[];for(var r=0;r<e.header.length;++r)n.header[r]=s.HTTPHeader.toObject(e.header[r],t)}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&(n.bodyBuffer=t.bytes===String?a.base64.encode(e.bodyBuffer,0,e.bodyBuffer.length):t.bytes===Array?Array.prototype.slice.call(e.bodyBuffer):e.bodyBuffer),null!=e.bodyString&&e.hasOwnProperty("bodyString")&&(n.bodyString=e.bodyString),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),s.HTTPHeader=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.HTTPHeader;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!a.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!a.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof s.HTTPHeader)return e;var t=new s.HTTPHeader;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",n.value=""),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(n.value=e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.exports=s},795:(e,t,n)=>{e.exports=function(e){var t=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i=!1;function a(){i=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=e.length;n<o;++n)t[n]=e[n],r[e.charCodeAt(n)]=n;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63}function s(e){var t,n,s,c,l,d;i||a();var u=e.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");l="="===e[u-2]?2:"="===e[u-1]?1:0,d=new o(3*u/4-l),s=l>0?u-4:u;var p=0;for(t=0,n=0;t<s;t+=4,n+=3)c=r[e.charCodeAt(t)]<<18|r[e.charCodeAt(t+1)]<<12|r[e.charCodeAt(t+2)]<<6|r[e.charCodeAt(t+3)],d[p++]=c>>16&255,d[p++]=c>>8&255,d[p++]=255&c;return 2===l?(c=r[e.charCodeAt(t)]<<2|r[e.charCodeAt(t+1)]>>4,d[p++]=255&c):1===l&&(c=r[e.charCodeAt(t)]<<10|r[e.charCodeAt(t+1)]<<4|r[e.charCodeAt(t+2)]>>2,d[p++]=c>>8&255,d[p++]=255&c),d}function c(e){return t[e>>18&63]+t[e>>12&63]+t[e>>6&63]+t[63&e]}function l(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(c(r));return o.join("")}function d(e){var n;i||a();for(var r=e.length,o=r%3,s="",c=[],d=16383,u=0,p=r-o;u<p;u+=d)c.push(l(e,u,u+d>p?p:u+d));return 1===o?(n=e[r-1],s+=t[n>>2],s+=t[n<<4&63],s+="=="):2===o&&(n=(e[r-2]<<8)+e[r-1],s+=t[n>>10],s+=t[n>>4&63],s+=t[n<<2&63],s+="="),c.push(s),c.join("")}function u(e,t,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,l=c>>1,d=-7,u=n?o-1:0,p=n?-1:1,h=e[t+u];for(u+=p,i=h&(1<<-d)-1,h>>=-d,d+=s;d>0;i=256*i+e[t+u],u+=p,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=r;d>0;a=256*a+e[t+u],u+=p,d-=8);if(0===i)i=1-l;else{if(i===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=l}return(h?-1:1)*a*Math.pow(2,i-r)}function p(e,t,n,r,o,i){var a,s,c,l=8*i-o-1,d=(1<<l)-1,u=d>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+u>=1?p/c:p*Math.pow(2,1-u))*c>=2&&(a++,c/=2),a+u>=d?(s=0,a=d):a+u>=1?(s=(t*c-1)*Math.pow(2,o),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&s,h+=f,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;e[n+h]=255&a,h+=f,a/=256,l-=8);e[n+h-f]|=128*g}var h={}.toString,f=Array.isArray||function(e){return"[object Array]"==h.call(e)},g=50;v.TYPED_ARRAY_SUPPORT=void 0===n.g.TYPED_ARRAY_SUPPORT||n.g.TYPED_ARRAY_SUPPORT;var _=m();function m(){return v.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function y(e,t){if(m()<t)throw new RangeError("Invalid typed array length");return v.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=v.prototype:(null===e&&(e=new v(t)),e.length=t),e}function v(e,t,n){if(!(v.TYPED_ARRAY_SUPPORT||this instanceof v))return new v(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return C(this,e)}return A(this,e,t,n)}function A(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?S(e,t,n,r):"string"==typeof t?I(e,t,n):T(e,t)}function b(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function w(e,t,n,r){return b(t),t<=0?y(e,t):void 0!==n?"string"==typeof r?y(e,t).fill(n,r):y(e,t).fill(n):y(e,t)}function C(e,t){if(b(t),e=y(e,t<0?0:0|x(t)),!v.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function I(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!v.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|D(t,n),o=(e=y(e,r)).write(t,n);return o!==r&&(e=e.slice(0,o)),e}function E(e,t){var n=t.length<0?0:0|x(t.length);e=y(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function S(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),v.TYPED_ARRAY_SUPPORT?(e=t).__proto__=v.prototype:e=E(e,t),e}function T(e,t){if(P(t)){var n=0|x(t.length);return 0===(e=y(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||pe(t.length)?y(e,0):E(e,t);if("Buffer"===t.type&&f(t.data))return E(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function x(e){if(e>=m())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m().toString(16)+" bytes");return 0|e}function k(e){return+e!=e&&(e=0),v.alloc(+e)}function P(e){return!(null==e||!e._isBuffer)}function D(e,t){if(P(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return se(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return de(e).length;default:if(r)return se(e).length;t=(""+t).toLowerCase(),r=!0}}function O(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Y(this,t,n);case"utf8":case"utf-8":return G(this,t,n);case"ascii":return Z(this,t,n);case"latin1":case"binary":return Q(this,t,n);case"base64":return V(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function N(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function R(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=v.from(t,r)),P(t))return 0===t.length?-1:M(e,t,n,r,o);if("number"==typeof t)return t&=255,v.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):M(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function M(e,t,n,r,o){var i,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var d=-1;for(i=n;i<s;i++)if(l(e,i)===l(t,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===c)return d*a}else-1!==d&&(i-=i-d),d=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var u=!0,p=0;p<c;p++)if(l(e,i+p)!==l(t,p)){u=!1;break}if(u)return i}return-1}function L(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function B(e,t,n,r){return ue(se(t,e.length-n),e,n,r)}function F(e,t,n,r){return ue(ce(t),e,n,r)}function W(e,t,n,r){return F(e,t,n,r)}function j(e,t,n,r){return ue(de(t),e,n,r)}function U(e,t,n,r){return ue(le(t,e.length-n),e,n,r)}function V(e,t,n){return 0===t&&n===e.length?d(e):d(e.slice(t,n))}function G(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,c,l=e[o],d=null,u=l>239?4:l>223?3:l>191?2:1;if(o+u<=n)switch(u){case 1:l<128&&(d=l);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&l)<<6|63&i)>127&&(d=c);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(c=(15&l)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(d=c)}null===d?(d=65533,u=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),o+=u}return H(r)}v.poolSize=8192,v._augment=function(e){return e.__proto__=v.prototype,e},v.from=function(e,t,n){return A(null,e,t,n)},v.TYPED_ARRAY_SUPPORT&&(v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array),v.alloc=function(e,t,n){return w(null,e,t,n)},v.allocUnsafe=function(e){return C(null,e)},v.allocUnsafeSlow=function(e){return C(null,e)},v.isBuffer=he,v.compare=function(e,t){if(!P(e)||!P(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},v.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(e,t){if(!f(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return v.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=v.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!P(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},v.byteLength=D,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)N(this,t,t+1);return this},v.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)N(this,t,t+3),N(this,t+1,t+2);return this},v.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)N(this,t,t+7),N(this,t+1,t+6),N(this,t+2,t+5),N(this,t+3,t+4);return this},v.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?G(this,0,e):O.apply(this,arguments)},v.prototype.equals=function(e){if(!P(e))throw new TypeError("Argument must be a Buffer");return this===e||0===v.compare(this,e)},v.prototype.inspect=function(){var e="",t=g;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},v.prototype.compare=function(e,t,n,r,o){if(!P(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),c=this.slice(r,o),l=e.slice(t,n),d=0;d<s;++d)if(c[d]!==l[d]){i=c[d],a=l[d];break}return i<a?-1:a<i?1:0},v.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},v.prototype.indexOf=function(e,t,n){return R(this,e,t,n,!0)},v.prototype.lastIndexOf=function(e,t,n){return R(this,e,t,n,!1)},v.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return L(this,e,t,n);case"utf8":case"utf-8":return B(this,e,t,n);case"ascii":return F(this,e,t,n);case"latin1":case"binary":return W(this,e,t,n);case"base64":return j(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;function H(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}function Z(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function Q(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function Y(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=ae(e[i]);return o}function z(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function q(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function J(e,t,n,r,o,i){if(!P(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function K(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function X(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function ee(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function te(e,t,n,r,o){return o||ee(e,t,n,4,34028234663852886e22,-34028234663852886e22),p(e,t,n,r,23,4),n+4}function ne(e,t,n,r,o){return o||ee(e,t,n,8,17976931348623157e292,-17976931348623157e292),p(e,t,n,r,52,8),n+8}v.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),v.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=v.prototype;else{var o=t-e;n=new v(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},v.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||q(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},v.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||q(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},v.prototype.readUInt8=function(e,t){return t||q(e,1,this.length),this[e]},v.prototype.readUInt16LE=function(e,t){return t||q(e,2,this.length),this[e]|this[e+1]<<8},v.prototype.readUInt16BE=function(e,t){return t||q(e,2,this.length),this[e]<<8|this[e+1]},v.prototype.readUInt32LE=function(e,t){return t||q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},v.prototype.readUInt32BE=function(e,t){return t||q(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},v.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||q(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},v.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||q(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},v.prototype.readInt8=function(e,t){return t||q(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},v.prototype.readInt16LE=function(e,t){t||q(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},v.prototype.readInt16BE=function(e,t){t||q(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},v.prototype.readInt32LE=function(e,t){return t||q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},v.prototype.readInt32BE=function(e,t){return t||q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},v.prototype.readFloatLE=function(e,t){return t||q(e,4,this.length),u(this,e,!0,23,4)},v.prototype.readFloatBE=function(e,t){return t||q(e,4,this.length),u(this,e,!1,23,4)},v.prototype.readDoubleLE=function(e,t){return t||q(e,8,this.length),u(this,e,!0,52,8)},v.prototype.readDoubleBE=function(e,t){return t||q(e,8,this.length),u(this,e,!1,52,8)},v.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||J(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},v.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||J(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},v.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,1,255,0),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},v.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):K(this,e,t,!0),t+2},v.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):K(this,e,t,!1),t+2},v.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):X(this,e,t,!0),t+4},v.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):X(this,e,t,!1),t+4},v.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);J(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},v.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);J(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},v.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,1,127,-128),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},v.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):K(this,e,t,!0),t+2},v.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):K(this,e,t,!1),t+2},v.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,4,2147483647,-2147483648),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):X(this,e,t,!0),t+4},v.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||J(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):X(this,e,t,!1),t+4},v.prototype.writeFloatLE=function(e,t,n){return te(this,e,t,!0,n)},v.prototype.writeFloatBE=function(e,t,n){return te(this,e,t,!1,n)},v.prototype.writeDoubleLE=function(e,t,n){return ne(this,e,t,!0,n)},v.prototype.writeDoubleBE=function(e,t,n){return ne(this,e,t,!1,n)},v.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!v.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},v.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!v.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=P(e)?e:se(new v(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var re=/[^+\/0-9A-Za-z-_]/g;function oe(e){if((e=ie(e).replace(re,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function ie(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function ae(e){return e<16?"0"+e.toString(16):e.toString(16)}function se(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function ce(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function le(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}function de(e){return s(oe(e))}function ue(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function pe(e){return e!=e}function he(e){return null!=e&&(!!e._isBuffer||fe(e)||ge(e))}function fe(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function ge(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&fe(e.slice(0,0))}var _e=Object.freeze({INSPECT_MAX_BYTES:g,kMaxLength:_,Buffer:v,SlowBuffer:k,isBuffer:he});function me(e,t){return e(t={exports:{}},t.exports),t.exports}var ye=Map,ve=be,Ae=null;function be(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function we(e){return!0===(e&&e.__isLong__)}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=we;var Ce={},Ie={};function Ee(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=Ie[e])?r:(n=Te(e,(0|e)<0?-1:0,!0),o&&(Ie[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=Ce[e])?r:(n=Te(e,e<0?-1:0,!1),o&&(Ce[e]=n),n)}function Se(e,t){if(isNaN(e))return t?Fe:Be;if(t){if(e<0)return Fe;if(e>=Re)return Ge}else{if(e<=-Me)return $e;if(e+1>=Me)return Ve}return e<0?Se(-e,t).neg():Te(e%Ne|0,e/Ne|0,t)}function Te(e,t,n){return new be(e,t,n)}be.fromInt=Ee,be.fromNumber=Se,be.fromBits=Te;var xe=Math.pow;function ke(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return Be;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return ke(e.substring(1),t,n).neg();for(var o=Se(xe(n,8)),i=Be,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+s),n);if(s<8){var l=Se(xe(n,s));i=i.mul(l).add(Se(c))}else i=(i=i.mul(o)).add(Se(c))}return i.unsigned=t,i}function Pe(e,t){return"number"==typeof e?Se(e,t):"string"==typeof e?ke(e,t):Te(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}be.fromString=ke,be.fromValue=Pe;var De=65536,Oe=1<<24,Ne=De*De,Re=Ne*Ne,Me=Re/2,Le=Ee(Oe),Be=Ee(0);be.ZERO=Be;var Fe=Ee(0,!0);be.UZERO=Fe;var We=Ee(1);be.ONE=We;var je=Ee(1,!0);be.UONE=je;var Ue=Ee(-1);be.NEG_ONE=Ue;var Ve=Te(-1,2147483647,!1);be.MAX_VALUE=Ve;var Ge=Te(-1,-1,!0);be.MAX_UNSIGNED_VALUE=Ge;var $e=Te(0,-2147483648,!1);be.MIN_VALUE=$e;var He=be.prototype;He.toInt=function(){return this.unsigned?this.low>>>0:this.low},He.toNumber=function(){return this.unsigned?(this.high>>>0)*Ne+(this.low>>>0):this.high*Ne+(this.low>>>0)},He.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq($e)){var t=Se(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=Se(xe(e,6),this.unsigned),i=this,a="";;){var s=i.div(o),c=(i.sub(s.mul(o)).toInt()>>>0).toString(e);if((i=s).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},He.getHighBits=function(){return this.high},He.getHighBitsUnsigned=function(){return this.high>>>0},He.getLowBits=function(){return this.low},He.getLowBitsUnsigned=function(){return this.low>>>0},He.getNumBitsAbs=function(){if(this.isNegative())return this.eq($e)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},He.isZero=function(){return 0===this.high&&0===this.low},He.eqz=He.isZero,He.isNegative=function(){return!this.unsigned&&this.high<0},He.isPositive=function(){return this.unsigned||this.high>=0},He.isOdd=function(){return 1==(1&this.low)},He.isEven=function(){return 0==(1&this.low)},He.equals=function(e){return we(e)||(e=Pe(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},He.eq=He.equals,He.notEquals=function(e){return!this.eq(e)},He.neq=He.notEquals,He.ne=He.notEquals,He.lessThan=function(e){return this.comp(e)<0},He.lt=He.lessThan,He.lessThanOrEqual=function(e){return this.comp(e)<=0},He.lte=He.lessThanOrEqual,He.le=He.lessThanOrEqual,He.greaterThan=function(e){return this.comp(e)>0},He.gt=He.greaterThan,He.greaterThanOrEqual=function(e){return this.comp(e)>=0},He.gte=He.greaterThanOrEqual,He.ge=He.greaterThanOrEqual,He.compare=function(e){if(we(e)||(e=Pe(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},He.comp=He.compare,He.negate=function(){return!this.unsigned&&this.eq($e)?$e:this.not().add(We)},He.neg=He.negate,He.add=function(e){we(e)||(e=Pe(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,i=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=0,l=0,d=0,u=0;return d+=(u+=o+(65535&e.low))>>>16,l+=(d+=r+s)>>>16,c+=(l+=n+a)>>>16,c+=t+i,Te((d&=65535)<<16|(u&=65535),(c&=65535)<<16|(l&=65535),this.unsigned)},He.subtract=function(e){return we(e)||(e=Pe(e)),this.add(e.neg())},He.sub=He.subtract,He.multiply=function(e){if(this.isZero())return Be;if(we(e)||(e=Pe(e)),Ae)return Te(Ae.mul(this.low,this.high,e.low,e.high),Ae.get_high(),this.unsigned);if(e.isZero())return Be;if(this.eq($e))return e.isOdd()?$e:Be;if(e.eq($e))return this.isOdd()?$e:Be;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Le)&&e.lt(Le))return Se(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,i=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=65535&e.low,l=0,d=0,u=0,p=0;return u+=(p+=o*c)>>>16,d+=(u+=r*c)>>>16,u&=65535,d+=(u+=o*s)>>>16,l+=(d+=n*c)>>>16,d&=65535,l+=(d+=r*s)>>>16,d&=65535,l+=(d+=o*a)>>>16,l+=t*c+n*s+r*a+o*i,Te((u&=65535)<<16|(p&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},He.mul=He.multiply,He.divide=function(e){if(we(e)||(e=Pe(e)),e.isZero())throw Error("division by zero");var t,n,r;if(Ae)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?Te((this.unsigned?Ae.div_u:Ae.div_s)(this.low,this.high,e.low,e.high),Ae.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Fe:Be;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Fe;if(e.gt(this.shru(1)))return je;r=Fe}else{if(this.eq($e))return e.eq(We)||e.eq(Ue)?$e:e.eq($e)?We:(t=this.shr(1).div(e).shl(1)).eq(Be)?e.isNegative()?We:Ue:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq($e))return this.unsigned?Fe:Be;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=Be}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),i=o<=48?1:xe(2,o-48),a=Se(t),s=a.mul(e);s.isNegative()||s.gt(n);)s=(a=Se(t-=i,this.unsigned)).mul(e);a.isZero()&&(a=We),r=r.add(a),n=n.sub(s)}return r},He.div=He.divide,He.modulo=function(e){return we(e)||(e=Pe(e)),Ae?Te((this.unsigned?Ae.rem_u:Ae.rem_s)(this.low,this.high,e.low,e.high),Ae.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},He.mod=He.modulo,He.rem=He.modulo,He.not=function(){return Te(~this.low,~this.high,this.unsigned)},He.and=function(e){return we(e)||(e=Pe(e)),Te(this.low&e.low,this.high&e.high,this.unsigned)},He.or=function(e){return we(e)||(e=Pe(e)),Te(this.low|e.low,this.high|e.high,this.unsigned)},He.xor=function(e){return we(e)||(e=Pe(e)),Te(this.low^e.low,this.high^e.high,this.unsigned)},He.shiftLeft=function(e){return we(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?Te(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Te(0,this.low<<e-32,this.unsigned)},He.shl=He.shiftLeft,He.shiftRight=function(e){return we(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?Te(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Te(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},He.shr=He.shiftRight,He.shiftRightUnsigned=function(e){if(we(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?Te(this.low>>>e|t<<32-e,t>>>e,this.unsigned):Te(32===e?t:t>>>e-32,0,this.unsigned)},He.shru=He.shiftRightUnsigned,He.shr_u=He.shiftRightUnsigned,He.toSigned=function(){return this.unsigned?Te(this.low,this.high,!1):this},He.toUnsigned=function(){return this.unsigned?this:Te(this.low,this.high,!0)},He.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},He.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},He.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},be.fromBytes=function(e,t,n){return n?be.fromBytesLE(e,t):be.fromBytesBE(e,t)},be.fromBytesLE=function(e,t){return new be(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},be.fromBytesBE=function(e,t){return new be(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},ve.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},ve.fromExtendedJSON=function(e,t){var n=ve.fromString(e.$numberLong);return t&&t.relaxed?n.toNumber():n},Object.defineProperty(ve.prototype,"_bsontype",{value:"Long"});var Ze=ve;function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t,n){return t&&Ye(e.prototype,t),n&&Ye(e,n),e}var qe=function(){function e(t){Qe(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return ze(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:{$numberDouble:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,n){return n&&n.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),e}();Object.defineProperty(qe.prototype,"_bsontype",{value:"Double"});var Je=qe;function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t,n){return t&&et(e.prototype,t),n&&et(e,n),e}function nt(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?rt(e):t}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var st=function(e){function t(e,n){var r;return Xe(this,t),r=Ze.isLong(e)?nt(this,ot(t).call(this,e.low,e.high,!0)):nt(this,ot(t).call(this,e,n,!0)),nt(r)}return it(t,e),tt(t,[{key:"toJSON",value:function(){return{$timestamp:this.toString()}}},{key:"toExtendedJSON",value:function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}}],[{key:"fromInt",value:function(e){return new t(Ze.fromInt(e,!0))}},{key:"fromNumber",value:function(e){return new t(Ze.fromNumber(e,!0))}},{key:"fromBits",value:function(e,n){return new t(e,n)}},{key:"fromString",value:function(e,n){return new t(Ze.fromString(e,n,!0))}},{key:"fromExtendedJSON",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),t}(Ze);Object.defineProperty(st.prototype,"_bsontype",{value:"Timestamp"}),st.MAX_VALUE=st.MAX_UNSIGNED_VALUE;var ct=st,lt={};function dt(e){return e.toString().replace("function(","function (")}function ut(e){for(var t=new Uint8Array(e),n=0;n<e;++n)t[n]=Math.floor(256*Math.random());return t}var pt=ut;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)pt=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{pt=lt.randomBytes}catch(e){}null==pt&&(pt=ut)}var ht={normalizedFunctionString:dt,randomBytes:pt};function ft(){throw new Error("setTimeout has not been defined")}function gt(){throw new Error("clearTimeout has not been defined")}var _t=ft,mt=gt;function yt(e){if(_t===setTimeout)return setTimeout(e,0);if((_t===ft||!_t)&&setTimeout)return _t=setTimeout,setTimeout(e,0);try{return _t(e,0)}catch(t){try{return _t.call(null,e,0)}catch(t){return _t.call(this,e,0)}}}function vt(e){if(mt===clearTimeout)return clearTimeout(e);if((mt===gt||!mt)&&clearTimeout)return mt=clearTimeout,clearTimeout(e);try{return mt(e)}catch(t){try{return mt.call(null,e)}catch(t){return mt.call(this,e)}}}"function"==typeof n.g.setTimeout&&(_t=setTimeout),"function"==typeof n.g.clearTimeout&&(mt=clearTimeout);var At=[],bt=!1,wt,Ct=-1;function It(){bt&&wt&&(bt=!1,wt.length?At=wt.concat(At):Ct=-1,At.length&&Et())}function Et(){if(!bt){var e=yt(It);bt=!0;for(var t=At.length;t;){for(wt=At,At=[];++Ct<t;)wt&&wt[Ct].run();Ct=-1,t=At.length}wt=null,bt=!1,vt(e)}}function St(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];At.push(new Tt(e,t)),1!==At.length||bt||yt(Et)}function Tt(e,t){this.fun=e,this.array=t}Tt.prototype.run=function(){this.fun.apply(null,this.array)};var xt="browser",kt="browser",Pt=!0,Dt={},Ot=[],Nt="",Rt={},Mt={},Lt={};function Bt(){}var Ft=Bt,Wt=Bt,jt=Bt,Ut=Bt,Vt=Bt,Gt=Bt,$t=Bt;function Ht(e){throw new Error("process.binding is not supported")}function Zt(){return"/"}function Qt(e){throw new Error("process.chdir is not supported")}function Yt(){return 0}var zt=n.g.performance||{},qt=zt.now||zt.mozNow||zt.msNow||zt.oNow||zt.webkitNow||function(){return(new Date).getTime()};function Jt(e){var t=.001*qt.call(zt),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}var Kt=new Date;function Xt(){return(new Date-Kt)/1e3}var en={nextTick:St,title:xt,browser:Pt,env:Dt,argv:Ot,version:Nt,versions:Rt,on:Ft,addListener:Wt,once:jt,off:Ut,removeListener:Vt,removeAllListeners:Gt,emit:$t,binding:Ht,cwd:Zt,chdir:Qt,umask:Yt,hrtime:Jt,platform:kt,release:Mt,config:Lt,uptime:Xt},tn;tn="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var nn=tn;function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var on=/%[sdj%]/g;function an(e){if(!Sn(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(un(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,i=String(e).replace(on,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),a=r[n];n<o;a=r[++n])Cn(a)||!Pn(a)?i+=" "+a:i+=" "+un(a);return i}function sn(e,t){if(xn(n.g.process))return function(){return sn(e,t).apply(this,arguments)};var r=!1;return function(){return r||(console.error(t),r=!0),e.apply(this,arguments)}}var cn={},ln;function dn(e){if(xn(ln)&&(ln=en.env.NODE_DEBUG||""),e=e.toUpperCase(),!cn[e])if(new RegExp("\\b"+e+"\\b","i").test(ln)){cn[e]=function(){var t=an.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else cn[e]=function(){};return cn[e]}function un(e,t){var n={seen:[],stylize:hn};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),wn(t)?n.showHidden=t:t&&Un(n,t),xn(n.showHidden)&&(n.showHidden=!1),xn(n.depth)&&(n.depth=2),xn(n.colors)&&(n.colors=!1),xn(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=pn),gn(n,e,n.depth)}function pn(e,t){var n=un.styles[t];return n?"["+un.colors[n][0]+"m"+e+"["+un.colors[n][1]+"m":e}function hn(e,t){return e}function fn(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function gn(e,t,n){if(e.customInspect&&t&&Nn(t.inspect)&&t.inspect!==un&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return Sn(r)||(r=gn(e,r,n)),r}var o=_n(e,t);if(o)return o;var i=Object.keys(t),a=fn(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),On(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return mn(t);if(0===i.length){if(Nn(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(kn(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Dn(t))return e.stylize(Date.prototype.toString.call(t),"date");if(On(t))return mn(t)}var c,l="",d=!1,u=["{","}"];(bn(t)&&(d=!0,u=["[","]"]),Nn(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return kn(t)&&(l=" "+RegExp.prototype.toString.call(t)),Dn(t)&&(l=" "+Date.prototype.toUTCString.call(t)),On(t)&&(l=" "+mn(t)),0!==i.length||d&&0!=t.length?n<0?kn(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=d?yn(e,t,n,a,i):i.map((function(r){return vn(e,t,n,a,r,d)})),e.seen.pop(),An(c,l,u)):u[0]+l+u[1]}function _n(e,t){if(xn(t))return e.stylize("undefined","undefined");if(Sn(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return En(t)?e.stylize(""+t,"number"):wn(t)?e.stylize(""+t,"boolean"):Cn(t)?e.stylize("null","null"):void 0}function mn(e){return"["+Error.prototype.toString.call(e)+"]"}function yn(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)Vn(t,String(a))?i.push(vn(e,t,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(vn(e,t,n,r,o,!0))})),i}function vn(e,t,n,r,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),Vn(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=Cn(n)?gn(e,c.value,null):gn(e,c.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),xn(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function An(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function bn(e){return Array.isArray(e)}function wn(e){return"boolean"==typeof e}function Cn(e){return null===e}function In(e){return null==e}function En(e){return"number"==typeof e}function Sn(e){return"string"==typeof e}function Tn(e){return"symbol"===rn(e)}function xn(e){return void 0===e}function kn(e){return Pn(e)&&"[object RegExp]"===Ln(e)}function Pn(e){return"object"===rn(e)&&null!==e}function Dn(e){return Pn(e)&&"[object Date]"===Ln(e)}function On(e){return Pn(e)&&("[object Error]"===Ln(e)||e instanceof Error)}function Nn(e){return"function"==typeof e}function Rn(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===rn(e)||void 0===e}function Mn(e){return Buffer.isBuffer(e)}function Ln(e){return Object.prototype.toString.call(e)}function Bn(e){return e<10?"0"+e.toString(10):e.toString(10)}un.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},un.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Fn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Wn(){var e=new Date,t=[Bn(e.getHours()),Bn(e.getMinutes()),Bn(e.getSeconds())].join(":");return[e.getDate(),Fn[e.getMonth()],t].join(" ")}function jn(){console.log("%s - %s",Wn(),an.apply(null,arguments))}function Un(e,t){if(!t||!Pn(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function Vn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Gn={inherits:nn,_extend:Un,log:jn,isBuffer:Mn,isPrimitive:Rn,isFunction:Nn,isError:On,isDate:Dn,isObject:Pn,isRegExp:kn,isUndefined:xn,isSymbol:Tn,isString:Sn,isNumber:En,isNullOrUndefined:In,isNull:Cn,isBoolean:wn,isArray:bn,inspect:un,deprecate:sn,format:an,debuglog:dn};function $n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zn(e,t,n){return t&&Hn(e.prototype,t),n&&Hn(e,n),e}var Qn=_e.Buffer,Yn=ht.randomBytes,zn=Gn.deprecate,qn=Yn(5),Jn=new RegExp("^[0-9a-fA-F]{24}$"),Kn=!1;try{Qn&&Qn.from&&(Kn=!0)}catch(e){Kn=!1}for(var Xn=[],er=0;er<256;er++)Xn[er]=(er<=15?"0":"")+er.toString(16);for(var tr=[],nr=0;nr<10;)tr[48+nr]=nr++;for(;nr<16;)tr[55+nr]=tr[87+nr]=nr++;var rr=Qn;function or(e){return e.toString("hex")}function ir(e,t){var n=e[t];return new TypeError('ObjectId string "'.concat(e,'" contains invalid character "').concat(n,'" with character code (').concat(e.charCodeAt(t),"). All character codes for a non-hex string must be less than 256."))}var ar=function(){function e(t){if($n(this,e),t instanceof e)return t;if(null==t||"number"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var n=e.isValid(t);if(!n&&null!=t)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(n&&"string"==typeof t&&24===t.length&&Kn)return new e(Qn.from(t,"hex"));if(n&&"string"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t,e.cacheHexString&&(this.__id=this.toString("hex"))}return Zn(e,[{key:"toHexString",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof rr)return t=or(this.id),e.cacheHexString&&(this.__id=t),t;for(var n=0;n<this.id.length;n++){var r=Xn[this.id.charCodeAt(n)];if("string"!=typeof r)throw ir(this.id,n);t+=r}return e.cacheHexString&&(this.__id=t),t}},{key:"toString",value:function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()}},{key:"toJSON",value:function(){return this.toHexString()}},{key:"equals",value:function(t){return t instanceof e?this.toString()===t.toString():"string"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof rr?t===this.id.toString("binary"):"string"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:"getTimestamp",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:"toExtendedJSON",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}}],[{key:"getInc",value:function(){return e.index=(e.index+1)%16777215}},{key:"generate",value:function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var n=e.getInc(),r=Qn.alloc(12);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,r[4]=qn[0],r[5]=qn[1],r[6]=qn[2],r[7]=qn[3],r[8]=qn[4],r[11]=255&n,r[10]=n>>8&255,r[9]=n>>16&255,r}},{key:"createPk",value:function(){return new e}},{key:"createFromTime",value:function(t){var n=Qn.from([0,0,0,0,0,0,0,0,0,0,0,0]);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,new e(n)}},{key:"createFromHexString",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(Kn)return new e(Qn.from(t,"hex"));for(var n=new rr(12),r=0,o=0;o<24;)n[r++]=tr[t.charCodeAt(o++)]<<4|tr[t.charCodeAt(o++)];return new e(n)}},{key:"isValid",value:function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&Jn.test(t):t instanceof e||(t instanceof rr&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&Jn.test(t.id)))))}},{key:"fromExtendedJSON",value:function(t){return new e(t.$oid)}}]),e}();ar.get_inc=zn((function(){return ar.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ar.prototype.get_inc=zn((function(){return ar.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ar.prototype.getInc=zn((function(){return ar.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ar.prototype.generate=zn((function(e){return ar.generate(e)}),"Please use the static `ObjectId.generate(time)` instead"),Object.defineProperty(ar.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),ar.prototype[Gn.inspect.custom||"inspect"]=ar.prototype.toString,ar.index=~~(16777215*Math.random()),Object.defineProperty(ar.prototype,"_bsontype",{value:"ObjectID"});var sr=ar;function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dr(e,t,n){return t&&lr(e.prototype,t),n&&lr(e,n),e}function ur(e){return e.split("").sort().join("")}var pr=function(){function e(t,n){cr(this,e),this.pattern=t||"",this.options=n?ur(n):"";for(var r=0;r<this.options.length;r++)if("i"!==this.options[r]&&"m"!==this.options[r]&&"x"!==this.options[r]&&"l"!==this.options[r]&&"s"!==this.options[r]&&"u"!==this.options[r])throw new Error("The regular expression option [".concat(this.options[r],"] is not supported"))}return dr(e,[{key:"toExtendedJSON",value:function(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:"parseOptions",value:function(e){return e?e.split("").sort().join(""):""}},{key:"fromExtendedJSON",value:function(t){return t.$regex?"BSONRegExp"===t.$regex._bsontype?t:new e(t.$regex,e.parseOptions(t.$options)):new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options))}}]),e}();Object.defineProperty(pr.prototype,"_bsontype",{value:"BSONRegExp"});var hr=pr;function fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _r(e,t,n){return t&&gr(e.prototype,t),n&&gr(e,n),e}var mr=function(){function e(t){fr(this,e),this.value=t}return _r(e,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"inspect",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(){return{$symbol:this.value}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$symbol)}}]),e}();Object.defineProperty(mr.prototype,"_bsontype",{value:"Symbol"});var yr=mr;function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e,t,n){return t&&Ar(e.prototype,t),n&&Ar(e,n),e}var wr=function(){function e(t){vr(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return br(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,n){return n&&n.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),e}();Object.defineProperty(wr.prototype,"_bsontype",{value:"Int32"});var Cr=wr;function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sr(e,t,n){return t&&Er(e.prototype,t),n&&Er(e,n),e}var Tr=function(){function e(t,n){Ir(this,e),this.code=t,this.scope=n}return Sr(e,[{key:"toJSON",value:function(){return{scope:this.scope,code:this.code}}},{key:"toExtendedJSON",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$code,t.$scope)}}]),e}();Object.defineProperty(Tr.prototype,"_bsontype",{value:"Code"});var xr=Tr,kr=_e.Buffer,Pr=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Dr=/^(\+|-)?(Infinity|inf)$/i,Or=/^(\+|-)?NaN$/i,Nr=6111,Rr=-6176,Mr=6176,Lr=34,Br=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Fr=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Wr=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),jr=/^([-+])?(\d+)?$/;function Ur(e){return!isNaN(parseInt(e,10))}function Vr(e){var t=Ze.fromNumber(1e9),n=Ze.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:n};for(var r=0;r<=3;r++)n=(n=n.shiftLeft(32)).add(new Ze(e.parts[r],0)),e.parts[r]=n.div(t).low,n=n.modulo(t);return{quotient:e,rem:n}}function Gr(e,t){if(!e&&!t)return{high:Ze.fromNumber(0),low:Ze.fromNumber(0)};var n=e.shiftRightUnsigned(32),r=new Ze(e.getLowBits(),0),o=t.shiftRightUnsigned(32),i=new Ze(t.getLowBits(),0),a=n.multiply(o),s=n.multiply(i),c=r.multiply(o),l=r.multiply(i);return a=a.add(s.shiftRightUnsigned(32)),s=new Ze(s.getLowBits(),0).add(c).add(l.shiftRightUnsigned(32)),{high:a=a.add(s.shiftRightUnsigned(32)),low:l=s.shiftLeft(32).add(new Ze(l.getLowBits(),0))}}function $r(e,t){var n=e.high>>>0,r=t.high>>>0;return n<r||n===r&&e.low>>>0<t.low>>>0}function Hr(e,t){throw new TypeError('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}function Zr(e){this.bytes=e}Zr.fromString=function(e){var t,n=!1,r=!1,o=!1,i=0,a=0,s=0,c=0,l=0,d=[0],u=0,p=0,h=0,f=0,g=0,_=0,m=[0,0],y=[0,0],v=0;if(e.length>=7e3)throw new TypeError(e+" not a valid Decimal128 string");var A=e.match(Pr),b=e.match(Dr),w=e.match(Or);if(!A&&!b&&!w||0===e.length)throw new TypeError(e+" not a valid Decimal128 string");if(A){var C=A[2],I=A[4],E=A[5],S=A[6];I&&void 0===S&&Hr(e,"missing exponent power"),I&&void 0===C&&Hr(e,"missing exponent base"),void 0===I&&(E||S)&&Hr(e,"missing e before exponent")}if("+"!==e[v]&&"-"!==e[v]||(n="-"===e[v++]),!Ur(e[v])&&"."!==e[v]){if("i"===e[v]||"I"===e[v])return new Zr(kr.from(n?Fr:Wr));if("N"===e[v])return new Zr(kr.from(Br))}for(;Ur(e[v])||"."===e[v];)"."!==e[v]?(u<34&&("0"!==e[v]||o)&&(o||(l=a),o=!0,d[p++]=parseInt(e[v],10),u+=1),o&&(s+=1),r&&(c+=1),a+=1,v+=1):(r&&Hr(e,"contains multiple periods"),r=!0,v+=1);if(r&&!a)throw new TypeError(e+" not a valid Decimal128 string");if("e"===e[v]||"E"===e[v]){var T=e.substr(++v).match(jr);if(!T||!T[2])return new Zr(kr.from(Br));g=parseInt(T[0],10),v+=T[0].length}if(e[v])return new Zr(kr.from(Br));if(h=0,u){if(f=u-1,1!==(i=s))for(;"0"===e[l+i-1];)i-=1}else h=0,f=0,d[0]=0,s=1,u=1,i=0;for(g<=c&&c-g>16384?g=Rr:g-=c;g>Nr;){if((f+=1)-h>Lr){if(d.join("").match(/^0+$/)){g=Nr;break}Hr(e,"overflow")}g-=1}for(;g<Rr||u<s;){if(0===f&&i<u){g=Rr,i=0;break}if(u<s?s-=1:f-=1,g<Nr)g+=1;else{if(d.join("").match(/^0+$/)){g=Nr;break}Hr(e,"overflow")}}if(f-h+1<i){var x=a;r&&(l+=1,x+=1),n&&(l+=1,x+=1);var k=parseInt(e[l+f+1],10),P=0;if(k>=5&&(P=1,5===k))for(P=d[f]%2==1,_=l+f+2;_<x;_++)if(parseInt(e[_],10)){P=1;break}if(P)for(var D=f;D>=0;D--)if(++d[D]>9&&(d[D]=0,0===D)){if(!(g<Nr))return new Zr(kr.from(n?Fr:Wr));g+=1,d[D]=1}}if(m=Ze.fromNumber(0),y=Ze.fromNumber(0),0===i)m=Ze.fromNumber(0),y=Ze.fromNumber(0);else if(f-h<17){var O=h;for(y=Ze.fromNumber(d[O++]),m=new Ze(0,0);O<=f;O++)y=(y=y.multiply(Ze.fromNumber(10))).add(Ze.fromNumber(d[O]))}else{var N=h;for(m=Ze.fromNumber(d[N++]);N<=f-17;N++)m=(m=m.multiply(Ze.fromNumber(10))).add(Ze.fromNumber(d[N]));for(y=Ze.fromNumber(d[N++]);N<=f;N++)y=(y=y.multiply(Ze.fromNumber(10))).add(Ze.fromNumber(d[N]))}var R=Gr(m,Ze.fromString("100000000000000000"));R.low=R.low.add(y),$r(R.low,y)&&(R.high=R.high.add(Ze.fromNumber(1))),t=g+Mr;var M={low:Ze.fromNumber(0),high:Ze.fromNumber(0)};R.high.shiftRightUnsigned(49).and(Ze.fromNumber(1)).equals(Ze.fromNumber(1))?(M.high=M.high.or(Ze.fromNumber(3).shiftLeft(61)),M.high=M.high.or(Ze.fromNumber(t).and(Ze.fromNumber(16383).shiftLeft(47))),M.high=M.high.or(R.high.and(Ze.fromNumber(0x7fffffffffff)))):(M.high=M.high.or(Ze.fromNumber(16383&t).shiftLeft(49)),M.high=M.high.or(R.high.and(Ze.fromNumber(562949953421311)))),M.low=R.low,n&&(M.high=M.high.or(Ze.fromString("9223372036854775808")));var L=kr.alloc(16);return v=0,L[v++]=255&M.low.low,L[v++]=M.low.low>>8&255,L[v++]=M.low.low>>16&255,L[v++]=M.low.low>>24&255,L[v++]=255&M.low.high,L[v++]=M.low.high>>8&255,L[v++]=M.low.high>>16&255,L[v++]=M.low.high>>24&255,L[v++]=255&M.high.low,L[v++]=M.high.low>>8&255,L[v++]=M.high.low>>16&255,L[v++]=M.high.low>>24&255,L[v++]=255&M.high.high,L[v++]=M.high.high>>8&255,L[v++]=M.high.high>>16&255,L[v++]=M.high.high>>24&255,new Zr(L)};var Qr=31,Yr=16383,zr=30,qr=31;Zr.prototype.toString=function(){for(var e,t,n,r,o,i,a=0,s=new Array(36),c=0;c<s.length;c++)s[c]=0;var l,d,u,p,h,f=0,g=!1,_={parts:new Array(4)},m=[];f=0;var y=this.bytes;if(r=y[f++]|y[f++]<<8|y[f++]<<16|y[f++]<<24,n=y[f++]|y[f++]<<8|y[f++]<<16|y[f++]<<24,t=y[f++]|y[f++]<<8|y[f++]<<16|y[f++]<<24,e=y[f++]|y[f++]<<8|y[f++]<<16|y[f++]<<24,f=0,{low:new Ze(r,n),high:new Ze(t,e)}.high.lessThan(Ze.ZERO)&&m.push("-"),(o=e>>26&Qr)>>3==3){if(o===zr)return m.join("")+"Infinity";if(o===qr)return"NaN";i=e>>15&Yr,u=8+(e>>14&1)}else u=e>>14&7,i=e>>17&Yr;if(l=i-Mr,_.parts[0]=(16383&e)+((15&u)<<14),_.parts[1]=t,_.parts[2]=n,_.parts[3]=r,0===_.parts[0]&&0===_.parts[1]&&0===_.parts[2]&&0===_.parts[3])g=!0;else for(h=3;h>=0;h--){var v=0,A=Vr(_);if(_=A.quotient,v=A.rem.low)for(p=8;p>=0;p--)s[9*h+p]=v%10,v=Math.floor(v/10)}if(g)a=1,s[f]=0;else for(a=36;!s[f];)a-=1,f+=1;if((d=a-1+l)>=34||d<=-7||l>0){if(a>34)return m.push(0),l>0?m.push("E+"+l):l<0&&m.push("E"+l),m.join("");m.push(s[f++]),(a-=1)&&m.push(".");for(var b=0;b<a;b++)m.push(s[f++]);m.push("E"),d>0?m.push("+"+d):m.push(d)}else if(l>=0)for(var w=0;w<a;w++)m.push(s[f++]);else{var C=a+l;if(C>0)for(var I=0;I<C;I++)m.push(s[f++]);else m.push("0");for(m.push(".");C++<0;)m.push("0");for(var E=0;E<a-Math.max(C-1,0);E++)m.push(s[f++])}return m.join("")},Zr.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},Zr.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},Zr.fromExtendedJSON=function(e){return Zr.fromString(e.$numberDecimal)},Object.defineProperty(Zr.prototype,"_bsontype",{value:"Decimal128"});var Jr=Zr;function Kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eo(e,t,n){return t&&Xr(e.prototype,t),n&&Xr(e,n),e}var to=function(){function e(){Kr(this,e)}return eo(e,[{key:"toExtendedJSON",value:function(){return{$minKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),e}();Object.defineProperty(to.prototype,"_bsontype",{value:"MinKey"});var no=to;function ro(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function io(e,t,n){return t&&oo(e.prototype,t),n&&oo(e,n),e}var ao=function(){function e(){ro(this,e)}return io(e,[{key:"toExtendedJSON",value:function(){return{$maxKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),e}();Object.defineProperty(ao.prototype,"_bsontype",{value:"MaxKey"});var so=ao;function co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uo(e,t,n){return t&&lo(e.prototype,t),n&&lo(e,n),e}var po=function(){function e(t,n,r,o){co(this,e);var i=t.split(".");2===i.length&&(r=i.shift(),t=i.shift()),this.collection=t,this.oid=n,this.db=r,this.fields=o||{}}return uo(e,[{key:"toJSON",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:"toExtendedJSON",value:function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}}],[{key:"fromExtendedJSON",value:function(t){var n=Object.assign({},t);return["$ref","$id","$db"].forEach((function(e){return delete n[e]})),new e(t.$ref,t.$id,t.$db,n)}}]),e}();Object.defineProperty(po.prototype,"_bsontype",{value:"DBRef"}),Object.defineProperty(po.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1});var ho=po;function fo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _o(e,t,n){return t&&go(e.prototype,t),n&&go(e,n),e}var mo=_e.Buffer,yo=function(){function e(t,n){if(fo(this,e),!(null==t||"string"==typeof t||mo.isBuffer(t)||t instanceof Uint8Array||Array.isArray(t)))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");if(this.sub_type=null==n?vo:n,this.position=0,null==t||t instanceof Number)void 0!==mo?this.buffer=mo.alloc(e.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if("string"==typeof t)if(void 0!==mo)this.buffer=mo.from(t);else{if("undefined"==typeof Uint8Array&&!Array.isArray(t))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=bo(t)}else this.buffer=t;this.position=t.length}}return _o(e,[{key:"put",value:function(t){if(null!=t.length&&"number"!=typeof t&&1!==t.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof t&&t<0||t>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var n=null;if(n="string"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=n;else if(void 0!==mo&&mo.isBuffer(this.buffer)){var r=mo.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r,this.buffer[this.position++]=n}else{var o=null;o=Ao(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var i=0;i<this.buffer.length;i++)o[i]=this.buffer[i];this.buffer=o,this.buffer[this.position++]=n}}},{key:"write",value:function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if(void 0!==mo&&mo.isBuffer(this.buffer))n=mo.alloc(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if(Ao(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var r=0;r<this.position;r++)n[r]=this.buffer[r]}this.buffer=n}if(void 0!==mo&&mo.isBuffer(e)&&mo.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==mo&&"string"==typeof e&&mo.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if(Ao(e)||Array.isArray(e)&&"string"!=typeof e){for(var o=0;o<e.length;o++)this.buffer[t++]=e[o];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var i=0;i<e.length;i++)this.buffer[t++]=e.charCodeAt(i);this.position=t>this.position?t:this.position}}},{key:"read",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var n="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),r=0;r<t;r++)n[r]=this.buffer[e++];return n}},{key:"value",value:function(e){if((e=null!=e&&e)&&void 0!==mo&&mo.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==mo&&mo.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=Ao(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return wo(this.buffer,0,this.position)}},{key:"length",value:function(){return this.position}},{key:"toJSON",value:function(){return null!=this.buffer?this.buffer.toString("base64"):""}},{key:"toString",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""}},{key:"toExtendedJSON",value:function(e){e=e||{};var t=mo.isBuffer(this.buffer)?this.buffer.toString("base64"):mo.from(this.buffer).toString("base64"),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===n.length?"0"+n:n}:{$binary:{base64:t,subType:1===n.length?"0"+n:n}}}}],[{key:"fromExtendedJSON",value:function(t,n){var r,o;return(n=n||{}).legacy?(o=t.$type?parseInt(t.$type,16):0,r=mo.from(t.$binary,"base64")):(o=t.$binary.subType?parseInt(t.$binary.subType,16):0,r=mo.from(t.$binary.base64,"base64")),new e(r,o)}}]),e}(),vo=0;function Ao(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function bo(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function wo(e,t,n){for(var r="",o=t;o<n;o++)r+=String.fromCharCode(e[o]);return r}yo.BUFFER_SIZE=256,yo.SUBTYPE_DEFAULT=0,yo.SUBTYPE_FUNCTION=1,yo.SUBTYPE_BYTE_ARRAY=2,yo.SUBTYPE_UUID_OLD=3,yo.SUBTYPE_UUID=4,yo.SUBTYPE_MD5=5,yo.SUBTYPE_USER_DEFINED=128,Object.defineProperty(yo.prototype,"_bsontype",{value:"Binary"});var Co=yo,Io={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,BSON_INT64_MAX:Math.pow(2,63)-1,BSON_INT64_MIN:-Math.pow(2,63),JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992,BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_DBPOINTER:12,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128};function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var So={$oid:sr,$binary:Co,$symbol:yr,$numberInt:Cr,$numberDecimal:Jr,$numberDouble:Je,$numberLong:Ze,$minKey:no,$maxKey:so,$regex:hr,$regularExpression:hr,$timestamp:ct};function To(e,t,n,r){if("number"==typeof n){if(r.relaxed||r.legacy)return n;if(Math.floor(n)===n){if(n>=Po&&n<=ko)return new Cr(n);if(n>=Oo&&n<=Do)return new Ze.fromNumber(n)}return new Je(n)}if(null==n||"object"!==Eo(n))return n;if(n.$undefined)return null;for(var o=Object.keys(n).filter((function(e){return e.startsWith("$")&&null!=n[e]})),i=0;i<o.length;i++){var a=So[o[i]];if(a)return a.fromExtendedJSON(n,r)}if(null!=n.$date){var s=n.$date,c=new Date;return r.legacy?"number"==typeof s?c.setTime(s):"string"==typeof s&&c.setTime(Date.parse(s)):"string"==typeof s?c.setTime(Date.parse(s)):Ze.isLong(s)?c.setTime(s.toNumber()):"number"==typeof s&&r.relaxed&&c.setTime(s),c}if(null!=n.$code){var l=Object.assign({},n);return n.$scope&&(l.$scope=To(e,null,n.$scope)),xr.fromExtendedJSON(n)}if(null!=n.$ref||null!=n.$dbPointer){var d=n.$ref?n:n.$dbPointer;if(d instanceof ho)return d;var u=Object.keys(d).filter((function(e){return e.startsWith("$")})),p=!0;if(u.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(p=!1)})),p)return ho.fromExtendedJSON(d)}return n}function xo(e,t){var n=this;return"boolean"==typeof(t=Object.assign({},{relaxed:!0,legacy:!1},t)).relaxed&&(t.strict=!t.relaxed),"boolean"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,r){return To(n,e,r,t)}))}var ko=2147483647,Po=-2147483648,Do=0x8000000000000000,Oo=-0x8000000000000000;function No(e,t,n,r){null!=n&&"object"===Eo(n)&&(r=n,n=0),null==t||"object"!==Eo(t)||Array.isArray(t)||(r=t,t=null,n=0),r=Object.assign({},{relaxed:!0,legacy:!1},r);var o=Array.isArray(e)?Lo(e,r):jo(e,r);return JSON.stringify(o,t,n)}function Ro(e,t){return t=t||{},JSON.parse(No(e,t))}function Mo(e,t){return t=t||{},xo(JSON.stringify(e),t)}function Lo(e,t){return e.map((function(e){return Fo(e,t)}))}function Bo(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function Fo(e,t){if(Array.isArray(e))return Lo(e,t);if(void 0===e)return null;if(e instanceof Date){var n=e.getTime(),r=n>-1&&n<2534023188e5;return t.legacy?t.relaxed&&r?{$date:e.getTime()}:{$date:Bo(e)}:t.relaxed&&r?{$date:Bo(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var o=e>=Oo&&e<=Do;if(e>=Po&&e<=ko)return{$numberInt:e.toString()};if(o)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var i=e.flags;return void 0===i&&(i=e.toString().match(/[gimuy]*$/)[0]),new hr(e.source,i).toExtendedJSON(t)}return null!=e&&"object"===Eo(e)?jo(e,t):e}var Wo={Binary:function(e){return new Co(e.value(),e.subtype)},Code:function(e){return new xr(e.code,e.scope)},DBRef:function(e){return new ho(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new Jr(e.bytes)},Double:function(e){return new Je(e.value)},Int32:function(e){return new Cr(e.value)},Long:function(e){return Ze.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new so},MinKey:function(){return new no},ObjectID:function(e){return new sr(e)},ObjectId:function(e){return new sr(e)},BSONRegExp:function(e){return new hr(e.pattern,e.options)},Symbol:function(e){return new yr(e.value)},Timestamp:function(e){return ct.fromBits(e.low,e.high)}};function jo(e,t){if(null==e||"object"!==Eo(e))throw new Error("not an object instance");var n=e._bsontype;if(void 0===n){var r={};for(var o in e)r[o]=Fo(e[o],t);return r}if("string"==typeof n){var i=e;if("function"!=typeof i.toExtendedJSON){var a=Wo[n];if(!a)throw new TypeError("Unrecognized or invalid _bsontype: "+n);i=a(i)}return"Code"===n&&i.scope?i=new xr(i.code,Fo(i.scope,t)):"DBRef"===n&&i.oid&&(i=new ho(i.collection,Fo(i.oid,t),i.db,i.fields)),i.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+Eo(n))}var Uo={parse:xo,deserialize:Mo,serialize:Ro,stringify:No},Vo=128,Go=192,$o=224,Ho=240,Zo=248,Qo=192,Yo=224,zo=240,qo=128;function Jo(e,t,n){for(var r=0,o=t;o<n;o+=1){var i=e[o];if(r){if((i&Go)!==qo)return!1;r-=1}else if(i&Vo)if((i&$o)===Qo)r=1;else if((i&Ho)===Yo)r=2;else{if((i&Zo)!==zo)return!1;r=3}}return!r}var Ko=Jo,Xo={validateUtf8:Ko},ei=_e.Buffer,ti=Xo.validateUtf8,ni=Ze.fromNumber(Io.JS_INT_MAX),ri=Ze.fromNumber(Io.JS_INT_MIN),oi={};function ii(e,t,n){var r=(t=null==t?{}:t)&&t.index?t.index:0,o=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;if(o<5)throw new Error("bson size must be >= 5, is ".concat(o));if(t.allowObjectSmallerThanBufferSize&&e.length<o)throw new Error("buffer length ".concat(e.length," must be >= bson size ").concat(o));if(!t.allowObjectSmallerThanBufferSize&&e.length!==o)throw new Error("buffer length ".concat(e.length," must === bson size ").concat(o));if(o+r>e.length)throw new Error("(bson size ".concat(o," + options.index ").concat(r," must be <= buffer length ").concat(ei.byteLength(e),")"));if(0!==e[r+o-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return ai(e,r,t,n)}function ai(e,t,n,r){var o=null!=n.evalFunctions&&n.evalFunctions,i=null!=n.cacheFunctions&&n.cacheFunctions,a=null!=n.cacheFunctionsCrc32&&n.cacheFunctionsCrc32;if(!a)var s=null;var c=null==n.fieldsAsRaw?null:n.fieldsAsRaw,l=null!=n.raw&&n.raw,d="boolean"==typeof n.bsonRegExp&&n.bsonRegExp,u=null!=n.promoteBuffers&&n.promoteBuffers,p=null==n.promoteLongs||n.promoteLongs,h=null==n.promoteValues||n.promoteValues,f=t;if(e.length<5)throw new Error("corrupt bson message < 5 bytes long");var g=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(g<5||g>e.length)throw new Error("corrupt bson message");for(var _=r?[]:{},m=0;;){var y=e[t++];if(0===y)break;for(var v=t;0!==e[v]&&v<e.length;)v++;if(v>=ei.byteLength(e))throw new Error("Bad BSON Document: illegal CString");var A=r?m++:e.toString("utf8",t,v);if(t=v+1,y===Io.BSON_DATA_STRING){var b=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(b<=0||b>e.length-t||0!==e[t+b-1])throw new Error("bad string length in bson");if(!ti(e,t,t+b-1))throw new Error("Invalid UTF-8 string in BSON document");var w=e.toString("utf8",t,t+b-1);_[A]=w,t+=b}else if(y===Io.BSON_DATA_OID){var C=ei.alloc(12);e.copy(C,0,t,t+12),_[A]=new sr(C),t+=12}else if(y===Io.BSON_DATA_INT&&!1===h)_[A]=new Cr(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(y===Io.BSON_DATA_INT)_[A]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(y===Io.BSON_DATA_NUMBER&&!1===h)_[A]=new Je(e.readDoubleLE(t)),t+=8;else if(y===Io.BSON_DATA_NUMBER)_[A]=e.readDoubleLE(t),t+=8;else if(y===Io.BSON_DATA_DATE){var I=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,E=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;_[A]=new Date(new Ze(I,E).toNumber())}else if(y===Io.BSON_DATA_BOOLEAN){if(0!==e[t]&&1!==e[t])throw new Error("illegal boolean type value");_[A]=1===e[t++]}else if(y===Io.BSON_DATA_OBJECT){var S=t,T=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(T<=0||T>e.length-t)throw new Error("bad embedded document length in bson");_[A]=l?e.slice(t,t+T):ai(e,S,n,!1),t+=T}else if(y===Io.BSON_DATA_ARRAY){var x=t,k=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,P=n,D=t+k;if(c&&c[A]){for(var O in P={},n)P[O]=n[O];P.raw=!0}if(_[A]=ai(e,x,P,!0),0!==e[(t+=k)-1])throw new Error("invalid array terminator byte");if(t!==D)throw new Error("corrupted array bson")}else if(y===Io.BSON_DATA_UNDEFINED)_[A]=void 0;else if(y===Io.BSON_DATA_NULL)_[A]=null;else if(y===Io.BSON_DATA_LONG){var N=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,R=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,M=new Ze(N,R);_[A]=p&&!0===h&&M.lessThanOrEqual(ni)&&M.greaterThanOrEqual(ri)?M.toNumber():M}else if(y===Io.BSON_DATA_DECIMAL128){var L=ei.alloc(16);e.copy(L,0,t,t+16),t+=16;var B=new Jr(L);_[A]=B.toObject?B.toObject():B}else if(y===Io.BSON_DATA_BINARY){var F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,W=F,j=e[t++];if(F<0)throw new Error("Negative binary type element size found");if(F>ei.byteLength(e))throw new Error("Binary type size larger than document size");if(null!=e.slice){if(j===Co.SUBTYPE_BYTE_ARRAY){if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(F>W-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(F<W-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}_[A]=u&&h?e.slice(t,t+F):new Co(e.slice(t,t+F),j)}else{var U="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(F)):new Array(F);if(j===Co.SUBTYPE_BYTE_ARRAY){if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(F>W-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(F<W-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(v=0;v<F;v++)U[v]=e[t+v];_[A]=u&&h?U:new Co(U,j)}t+=F}else if(y===Io.BSON_DATA_REGEXP&&!1===d){for(v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error("Bad BSON Document: illegal CString");var V=e.toString("utf8",t,v);for(v=t=v+1;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error("Bad BSON Document: illegal CString");var G=e.toString("utf8",t,v);t=v+1;var $=new Array(G.length);for(v=0;v<G.length;v++)switch(G[v]){case"m":$[v]="m";break;case"s":$[v]="g";break;case"i":$[v]="i"}_[A]=new RegExp(V,$.join(""))}else if(y===Io.BSON_DATA_REGEXP&&!0===d){for(v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error("Bad BSON Document: illegal CString");var H=e.toString("utf8",t,v);for(v=t=v+1;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error("Bad BSON Document: illegal CString");var Z=e.toString("utf8",t,v);t=v+1,_[A]=new hr(H,Z)}else if(y===Io.BSON_DATA_SYMBOL){var Q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Q<=0||Q>e.length-t||0!==e[t+Q-1])throw new Error("bad string length in bson");_[A]=e.toString("utf8",t,t+Q-1),t+=Q}else if(y===Io.BSON_DATA_TIMESTAMP){var Y=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,z=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;_[A]=new ct(Y,z)}else if(y===Io.BSON_DATA_MIN_KEY)_[A]=new no;else if(y===Io.BSON_DATA_MAX_KEY)_[A]=new so;else if(y===Io.BSON_DATA_CODE){var q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(q<=0||q>e.length-t||0!==e[t+q-1])throw new Error("bad string length in bson");var J=e.toString("utf8",t,t+q-1);if(o)if(i){var K=a?s(J):J;_[A]=si(oi,K,J,_)}else _[A]=ci(J);else _[A]=new xr(J);t+=q}else if(y===Io.BSON_DATA_CODE_W_SCOPE){var X=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(X<13)throw new Error("code_w_scope total size shorter minimum expected length");var ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ee<=0||ee>e.length-t||0!==e[t+ee-1])throw new Error("bad string length in bson");var te=e.toString("utf8",t,t+ee-1),ne=t+=ee,re=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,oe=ai(e,ne,n,!1);if(t+=re,X<8+re+ee)throw new Error("code_w_scope total size is to short, truncating scope");if(X>8+re+ee)throw new Error("code_w_scope total size is to long, clips outer document");if(o){if(i){var ie=a?s(te):te;_[A]=si(oi,ie,te,_)}else _[A]=ci(te);_[A].scope=oe}else _[A]=new xr(te,oe)}else{if(y!==Io.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+y.toString(16)+' for fieldname "'+A+'", are you using the latest BSON parser?');var ae=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ae<=0||ae>e.length-t||0!==e[t+ae-1])throw new Error("bad string length in bson");if(!ti(e,t,t+ae-1))throw new Error("Invalid UTF-8 string in BSON document");var se=e.toString("utf8",t,t+ae-1);t+=ae;var ce=ei.alloc(12);e.copy(ce,0,t,t+12);var le=new sr(ce);t+=12,_[A]=new ho(se,le)}}if(g!==t-f){if(r)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}var de=Object.keys(_).filter((function(e){return e.startsWith("$")})),ue=!0;if(de.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(ue=!1)})),!ue)return _;if(null!=_.$id&&null!=_.$ref){var pe=Object.assign({},_);return delete pe.$ref,delete pe.$id,delete pe.$db,new ho(_.$ref,_.$id,_.$db||null,pe)}return _}function si(e,t,n,r){var o=null;return null==e[t]&&(eval("value = "+n),e[t]=o),e[t].bind(r)}function ci(e){var t=null;return eval("value = "+e),t}var li=ii;function di(e,t,n,r,o){var i,a,s="big"===n,c=8*o-r-1,l=(1<<c)-1,d=l>>1,u=-7,p=s?0:o-1,h=s?1:-1,f=e[t+p];for(p+=h,i=f&(1<<-u)-1,f>>=-u,u+=c;u>0;i=256*i+e[t+p],p+=h,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=r;u>0;a=256*a+e[t+p],p+=h,u-=8);if(0===i)i=1-d;else{if(i===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),i-=d}return(f?-1:1)*a*Math.pow(2,i-r)}function ui(e,t,n,r,o,i){var a,s,c,l="big"===r,d=8*i-o-1,u=(1<<d)-1,p=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=l?i-1:0,g=l?-1:1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+p>=1?h/c:h*Math.pow(2,1-p))*c>=2&&(a++,c/=2),a+p>=u?(s=0,a=u):a+p>=1?(s=(t*c-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0)),isNaN(t)&&(s=0);o>=8;)e[n+f]=255&s,f+=g,s/=256,o-=8;for(a=a<<o|s,isNaN(t)&&(a+=8),d+=o;d>0;)e[n+f]=255&a,f+=g,a/=256,d-=8;e[n+f-g]|=128*_}var pi={readIEEE754:di,writeIEEE754:ui};function hi(e){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fi=_e.Buffer,gi=pi.writeIEEE754,_i=ht.normalizedFunctionString,mi=/\x00/,yi=new Set(["$db","$ref","$id","$clusterTime"]),vi=function(e){return"object"===hi(e)&&"[object Date]"===Object.prototype.toString.call(e)},Ai=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)};function bi(e,t,n,r,o){e[r++]=Io.BSON_DATA_STRING;var i=o?e.write(t,r,"ascii"):e.write(t,r,"utf8");e[(r=r+i+1)-1]=0;var a=e.write(n,r+4,"utf8");return e[r+3]=a+1>>24&255,e[r+2]=a+1>>16&255,e[r+1]=a+1>>8&255,e[r]=a+1&255,r=r+4+a,e[r++]=0,r}function wi(e,t,n,r,o){if(Math.floor(n)===n&&n>=Io.JS_INT_MIN&&n<=Io.JS_INT_MAX)if(n>=Io.BSON_INT32_MIN&&n<=Io.BSON_INT32_MAX)e[r++]=Io.BSON_DATA_INT,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255;else if(n>=Io.JS_INT_MIN&&n<=Io.JS_INT_MAX){e[r++]=Io.BSON_DATA_NUMBER,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,gi(e,n,r,"little",52,8),r+=8}else{e[r++]=Io.BSON_DATA_LONG,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=Ze.fromNumber(n),a=i.getLowBits(),s=i.getHighBits();e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255}else e[r++]=Io.BSON_DATA_NUMBER,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,gi(e,n,r,"little",52,8),r+=8;return r}function Ci(e,t,n,r,o){return e[r++]=Io.BSON_DATA_NULL,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,r}function Ii(e,t,n,r,o){return e[r++]=Io.BSON_DATA_BOOLEAN,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=n?1:0,r}function Ei(e,t,n,r,o){e[r++]=Io.BSON_DATA_DATE,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=Ze.fromNumber(n.getTime()),a=i.getLowBits(),s=i.getHighBits();return e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,r}function Si(e,t,n,r,o){if(e[r++]=Io.BSON_DATA_REGEXP,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,n.source&&null!=n.source.match(mi))throw Error("value "+n.source+" must not contain null bytes");return r+=e.write(n.source,r,"utf8"),e[r++]=0,n.ignoreCase&&(e[r++]=105),n.global&&(e[r++]=115),n.multiline&&(e[r++]=109),e[r++]=0,r}function Ti(e,t,n,r,o){if(e[r++]=Io.BSON_DATA_REGEXP,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,null!=n.pattern.match(mi))throw Error("pattern "+n.pattern+" must not contain null bytes");return r+=e.write(n.pattern,r,"utf8"),e[r++]=0,r+=e.write(n.options.split("").sort().join(""),r,"utf8"),e[r++]=0,r}function xi(e,t,n,r,o){return null===n?e[r++]=Io.BSON_DATA_NULL:"MinKey"===n._bsontype?e[r++]=Io.BSON_DATA_MIN_KEY:e[r++]=Io.BSON_DATA_MAX_KEY,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,r}function ki(e,t,n,r,o){if(e[r++]=Io.BSON_DATA_OID,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,"string"==typeof n.id)e.write(n.id,r,"binary");else{if(!n.id||!n.id.copy)throw new TypeError("object ["+JSON.stringify(n)+"] is not a valid ObjectId");n.id.copy(e,r,0,12)}return r+12}function Pi(e,t,n,r,o){e[r++]=Io.BSON_DATA_BINARY,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=n.length;return e[r++]=255&i,e[r++]=i>>8&255,e[r++]=i>>16&255,e[r++]=i>>24&255,e[r++]=Io.BSON_BINARY_SUBTYPE_DEFAULT,n.copy(e,r,0,i),r+=i}function Di(e,t,n,r,o,i,a,s,c,l){for(var d=0;d<l.length;d++)if(l[d]===n)throw new Error("cyclic dependency detected");l.push(n),e[r++]=Array.isArray(n)?Io.BSON_DATA_ARRAY:Io.BSON_DATA_OBJECT,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var u=Ui(e,n,o,r,i+1,a,s,l);return l.pop(),u}function Oi(e,t,n,r,o){return e[r++]=Io.BSON_DATA_DECIMAL128,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,n.bytes.copy(e,r,0,16),r+16}function Ni(e,t,n,r,o){e[r++]="Long"===n._bsontype?Io.BSON_DATA_LONG:Io.BSON_DATA_TIMESTAMP,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=n.getLowBits(),a=n.getHighBits();return e[r++]=255&i,e[r++]=i>>8&255,e[r++]=i>>16&255,e[r++]=i>>24&255,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,r}function Ri(e,t,n,r,o){return e[r++]=Io.BSON_DATA_INT,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255,r}function Mi(e,t,n,r,o){return e[r++]=Io.BSON_DATA_NUMBER,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,gi(e,n.value,r,"little",52,8),r+=8}function Li(e,t,n,r,o,i,a){e[r++]=Io.BSON_DATA_CODE,r+=a?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var s=_i(n),c=e.write(s,r+4,"utf8")+1;return e[r]=255&c,e[r+1]=c>>8&255,e[r+2]=c>>16&255,e[r+3]=c>>24&255,r=r+4+c-1,e[r++]=0,r}function Bi(e,t,n,r,o,i,a,s,c){if(n.scope&&"object"===hi(n.scope)){e[r++]=Io.BSON_DATA_CODE_W_SCOPE,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var l=r,d="string"==typeof n.code?n.code:n.code.toString();r+=4;var u=e.write(d,r+4,"utf8")+1;e[r]=255&u,e[r+1]=u>>8&255,e[r+2]=u>>16&255,e[r+3]=u>>24&255,e[r+4+u-1]=0,r=r+u+4;var p=Ui(e,n.scope,o,r,i+1,a,s);r=p-1;var h=p-l;e[l++]=255&h,e[l++]=h>>8&255,e[l++]=h>>16&255,e[l++]=h>>24&255,e[r++]=0}else{e[r++]=Io.BSON_DATA_CODE,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var f=n.code.toString(),g=e.write(f,r+4,"utf8")+1;e[r]=255&g,e[r+1]=g>>8&255,e[r+2]=g>>16&255,e[r+3]=g>>24&255,r=r+4+g-1,e[r++]=0}return r}function Fi(e,t,n,r,o){e[r++]=Io.BSON_DATA_BINARY,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=n.value(!0),a=n.position;return n.sub_type===Co.SUBTYPE_BYTE_ARRAY&&(a+=4),e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=n.sub_type,n.sub_type===Co.SUBTYPE_BYTE_ARRAY&&(a-=4,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255),i.copy(e,r,0,n.position),r+=n.position}function Wi(e,t,n,r,o){e[r++]=Io.BSON_DATA_SYMBOL,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=e.write(n.value,r+4,"utf8")+1;return e[r]=255&i,e[r+1]=i>>8&255,e[r+2]=i>>16&255,e[r+3]=i>>24&255,r=r+4+i-1,e[r++]=0,r}function ji(e,t,n,r,o,i,a){e[r++]=Io.BSON_DATA_OBJECT,r+=a?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var s,c=r,l={$ref:n.collection||n.namespace,$id:n.oid};null!=n.db&&(l.$db=n.db);var d=(s=Ui(e,l=Object.assign(l,n.fields),!1,r,o+1,i))-c;return e[c++]=255&d,e[c++]=d>>8&255,e[c++]=d>>16&255,e[c++]=d>>24&255,s}function Ui(e,t,n,r,o,i,a,s){r=r||0,(s=s||[]).push(t);var c=r+4;if(Array.isArray(t))for(var l=0;l<t.length;l++){var d=""+l,u=t[l];if(u&&u.toBSON){if("function"!=typeof u.toBSON)throw new TypeError("toBSON is not a function");u=u.toBSON()}var p=hi(u);if("string"===p)c=bi(e,d,u,c,!0);else if("number"===p)c=wi(e,d,u,c,!0);else if("boolean"===p)c=Ii(e,d,u,c,!0);else if(u instanceof Date||vi(u))c=Ei(e,d,u,c,!0);else if(void 0===u)c=Ci(e,d,u,c,!0);else if(null===u)c=Ci(e,d,u,c,!0);else if("ObjectId"===u._bsontype||"ObjectID"===u._bsontype)c=ki(e,d,u,c,!0);else if(fi.isBuffer(u))c=Pi(e,d,u,c,!0);else if(u instanceof RegExp||Ai(u))c=Si(e,d,u,c,!0);else if("object"===p&&null==u._bsontype)c=Di(e,d,u,c,n,o,i,a,!0,s);else if("object"===p&&"Decimal128"===u._bsontype)c=Oi(e,d,u,c,!0);else if("Long"===u._bsontype||"Timestamp"===u._bsontype)c=Ni(e,d,u,c,!0);else if("Double"===u._bsontype)c=Mi(e,d,u,c,!0);else if("function"==typeof u&&i)c=Li(e,d,u,c,n,o,i,!0);else if("Code"===u._bsontype)c=Bi(e,d,u,c,n,o,i,a,!0);else if("Binary"===u._bsontype)c=Fi(e,d,u,c,!0);else if("Symbol"===u._bsontype)c=Wi(e,d,u,c,!0);else if("DBRef"===u._bsontype)c=ji(e,d,u,c,o,i,!0);else if("BSONRegExp"===u._bsontype)c=Ti(e,d,u,c,!0);else if("Int32"===u._bsontype)c=Ri(e,d,u,c,!0);else if("MinKey"===u._bsontype||"MaxKey"===u._bsontype)c=xi(e,d,u,c,!0);else if(void 0!==u._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+u._bsontype)}else if(t instanceof ye)for(var h=t.entries(),f=!1;!f;){var g=h.next();if(!(f=g.done)){var _=g.value[0],m=g.value[1],y=hi(m);if("string"==typeof _&&!yi.has(_)){if(null!=_.match(mi))throw Error("key "+_+" must not contain null bytes");if(n){if("$"===_[0])throw Error("key "+_+" must not start with '$'");if(~_.indexOf("."))throw Error("key "+_+" must not contain '.'")}}if("string"===y)c=bi(e,_,m,c);else if("number"===y)c=wi(e,_,m,c);else if("boolean"===y)c=Ii(e,_,m,c);else if(m instanceof Date||vi(m))c=Ei(e,_,m,c);else if(null===m||void 0===m&&!1===a)c=Ci(e,_,m,c);else if("ObjectId"===m._bsontype||"ObjectID"===m._bsontype)c=ki(e,_,m,c);else if(fi.isBuffer(m))c=Pi(e,_,m,c);else if(m instanceof RegExp||Ai(m))c=Si(e,_,m,c);else if("object"===y&&null==m._bsontype)c=Di(e,_,m,c,n,o,i,a,!1,s);else if("object"===y&&"Decimal128"===m._bsontype)c=Oi(e,_,m,c);else if("Long"===m._bsontype||"Timestamp"===m._bsontype)c=Ni(e,_,m,c);else if("Double"===m._bsontype)c=Mi(e,_,m,c);else if("Code"===m._bsontype)c=Bi(e,_,m,c,n,o,i,a);else if("function"==typeof m&&i)c=Li(e,_,m,c,n,o,i);else if("Binary"===m._bsontype)c=Fi(e,_,m,c);else if("Symbol"===m._bsontype)c=Wi(e,_,m,c);else if("DBRef"===m._bsontype)c=ji(e,_,m,c,o,i);else if("BSONRegExp"===m._bsontype)c=Ti(e,_,m,c);else if("Int32"===m._bsontype)c=Ri(e,_,m,c);else if("MinKey"===m._bsontype||"MaxKey"===m._bsontype)c=xi(e,_,m,c);else if(void 0!==m._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+m._bsontype)}}else{if(t.toBSON){if("function"!=typeof t.toBSON)throw new TypeError("toBSON is not a function");if(null!=(t=t.toBSON())&&"object"!==hi(t))throw new TypeError("toBSON function did not return an object")}for(var v in t){var A=t[v];if(A&&A.toBSON){if("function"!=typeof A.toBSON)throw new TypeError("toBSON is not a function");A=A.toBSON()}var b=hi(A);if("string"==typeof v&&!yi.has(v)){if(null!=v.match(mi))throw Error("key "+v+" must not contain null bytes");if(n){if("$"===v[0])throw Error("key "+v+" must not start with '$'");if(~v.indexOf("."))throw Error("key "+v+" must not contain '.'")}}if("string"===b)c=bi(e,v,A,c);else if("number"===b)c=wi(e,v,A,c);else if("boolean"===b)c=Ii(e,v,A,c);else if(A instanceof Date||vi(A))c=Ei(e,v,A,c);else if(void 0===A)!1===a&&(c=Ci(e,v,A,c));else if(null===A)c=Ci(e,v,A,c);else if("ObjectId"===A._bsontype||"ObjectID"===A._bsontype)c=ki(e,v,A,c);else if(fi.isBuffer(A))c=Pi(e,v,A,c);else if(A instanceof RegExp||Ai(A))c=Si(e,v,A,c);else if("object"===b&&null==A._bsontype)c=Di(e,v,A,c,n,o,i,a,!1,s);else if("object"===b&&"Decimal128"===A._bsontype)c=Oi(e,v,A,c);else if("Long"===A._bsontype||"Timestamp"===A._bsontype)c=Ni(e,v,A,c);else if("Double"===A._bsontype)c=Mi(e,v,A,c);else if("Code"===A._bsontype)c=Bi(e,v,A,c,n,o,i,a);else if("function"==typeof A&&i)c=Li(e,v,A,c,n,o,i);else if("Binary"===A._bsontype)c=Fi(e,v,A,c);else if("Symbol"===A._bsontype)c=Wi(e,v,A,c);else if("DBRef"===A._bsontype)c=ji(e,v,A,c,o,i);else if("BSONRegExp"===A._bsontype)c=Ti(e,v,A,c);else if("Int32"===A._bsontype)c=Ri(e,v,A,c);else if("MinKey"===A._bsontype||"MaxKey"===A._bsontype)c=xi(e,v,A,c);else if(void 0!==A._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+A._bsontype)}}s.pop(),e[c++]=0;var w=c-r;return e[r++]=255&w,e[r++]=w>>8&255,e[r++]=w>>16&255,e[r++]=w>>24&255,c}var Vi=Ui;function Gi(e){return(Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $i=_e.Buffer,Hi=ht.normalizedFunctionString;function Zi(e){return"object"===Gi(e)&&"[object Date]"===Object.prototype.toString.call(e)}function Qi(e,t,n){var r=5;if(Array.isArray(e))for(var o=0;o<e.length;o++)r+=Yi(o.toString(),e[o],t,!0,n);else for(var i in e.toBSON&&(e=e.toBSON()),e)r+=Yi(i,e[i],t,!1,n);return r}function Yi(e,t,n,r,o){switch(t&&t.toBSON&&(t=t.toBSON()),Gi(t)){case"string":return 1+$i.byteLength(e,"utf8")+1+4+$i.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=Io.JS_INT_MIN&&t<=Io.JS_INT_MAX&&t>=Io.BSON_INT32_MIN&&t<=Io.BSON_INT32_MAX?(null!=e?$i.byteLength(e,"utf8")+1:0)+5:(null!=e?$i.byteLength(e,"utf8")+1:0)+9;case"undefined":return r||!o?(null!=e?$i.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(null!=e?$i.byteLength(e,"utf8")+1:0)+2;case"object":if(null==t||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?$i.byteLength(e,"utf8")+1:0)+1;if("ObjectId"===t._bsontype||"ObjectID"===t._bsontype)return(null!=e?$i.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||Zi(t))return(null!=e?$i.byteLength(e,"utf8")+1:0)+9;if(void 0!==$i&&$i.isBuffer(t))return(null!=e?$i.byteLength(e,"utf8")+1:0)+6+t.length;if("Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?$i.byteLength(e,"utf8")+1:0)+9;if("Decimal128"===t._bsontype)return(null!=e?$i.byteLength(e,"utf8")+1:0)+17;if("Code"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?$i.byteLength(e,"utf8")+1:0)+1+4+4+$i.byteLength(t.code.toString(),"utf8")+1+Qi(t.scope,n,o):(null!=e?$i.byteLength(e,"utf8")+1:0)+1+4+$i.byteLength(t.code.toString(),"utf8")+1;if("Binary"===t._bsontype)return t.sub_type===Co.SUBTYPE_BYTE_ARRAY?(null!=e?$i.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(null!=e?$i.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if("Symbol"===t._bsontype)return(null!=e?$i.byteLength(e,"utf8")+1:0)+$i.byteLength(t.value,"utf8")+4+1+1;if("DBRef"===t._bsontype){var i=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(i.$db=t.db),(null!=e?$i.byteLength(e,"utf8")+1:0)+1+Qi(i,n,o)}return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)?(null!=e?$i.byteLength(e,"utf8")+1:0)+1+$i.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:"BSONRegExp"===t._bsontype?(null!=e?$i.byteLength(e,"utf8")+1:0)+1+$i.byteLength(t.pattern,"utf8")+1+$i.byteLength(t.options,"utf8")+1:(null!=e?$i.byteLength(e,"utf8")+1:0)+Qi(t,n,o)+1;case"function":if(t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)||"[object RegExp]"===String.call(t))return(null!=e?$i.byteLength(e,"utf8")+1:0)+1+$i.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(n&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?$i.byteLength(e,"utf8")+1:0)+1+4+4+$i.byteLength(Hi(t),"utf8")+1+Qi(t.scope,n,o);if(n)return(null!=e?$i.byteLength(e,"utf8")+1:0)+1+4+$i.byteLength(Hi(t),"utf8")+1}return 0}var zi=Qi,qi=_e.Buffer,Ji=function(e){if(e instanceof qi)return e;if(e instanceof Uint8Array)return qi.from(e.buffer);throw new TypeError("Must use either Buffer or Uint8Array")},Ki=_e.Buffer,Xi=17825792,ea=Ki.alloc(Xi);function ta(e){ea.length<e&&(ea=Ki.alloc(e))}function na(e,t){var n="boolean"==typeof(t=t||{}).checkKeys&&t.checkKeys,r="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,o="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,i="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:Xi;ea.length<i&&(ea=Ki.alloc(i));var a=Vi(ea,e,n,0,0,r,o,[]),s=Ki.alloc(a);return ea.copy(s,0,0,s.length),s}function ra(e,t,n){var r="boolean"==typeof(n=n||{}).checkKeys&&n.checkKeys,o="boolean"==typeof n.serializeFunctions&&n.serializeFunctions,i="boolean"!=typeof n.ignoreUndefined||n.ignoreUndefined,a="number"==typeof n.index?n.index:0,s=Vi(ea,e,r,0,0,o,i);return ea.copy(t,a,0,s),a+s-1}function oa(e,t){return e=Ji(e),li(e,t)}function ia(e,t){var n="boolean"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,r="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return zi(e,n,r)}function aa(e,t,n,r,o,i){i=Object.assign({allowObjectSmallerThanBufferSize:!0},i),e=Ji(e);for(var a=t,s=0;s<n;s++){var c=e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]<<24;i.index=a,r[o+s]=li(e,i),a+=c}return a}var sa={BSON_INT32_MAX:Io.BSON_INT32_MAX,BSON_INT32_MIN:Io.BSON_INT32_MIN,BSON_INT64_MAX:Io.BSON_INT64_MAX,BSON_INT64_MIN:Io.BSON_INT64_MIN,JS_INT_MAX:Io.JS_INT_MAX,JS_INT_MIN:Io.JS_INT_MIN,BSON_DATA_NUMBER:Io.BSON_DATA_NUMBER,BSON_DATA_STRING:Io.BSON_DATA_STRING,BSON_DATA_OBJECT:Io.BSON_DATA_OBJECT,BSON_DATA_ARRAY:Io.BSON_DATA_ARRAY,BSON_DATA_BINARY:Io.BSON_DATA_BINARY,BSON_DATA_UNDEFINED:Io.BSON_DATA_UNDEFINED,BSON_DATA_OID:Io.BSON_DATA_OID,BSON_DATA_BOOLEAN:Io.BSON_DATA_BOOLEAN,BSON_DATA_DATE:Io.BSON_DATA_DATE,BSON_DATA_NULL:Io.BSON_DATA_NULL,BSON_DATA_REGEXP:Io.BSON_DATA_REGEXP,BSON_DATA_DBPOINTER:Io.BSON_DATA_DBPOINTER,BSON_DATA_CODE:Io.BSON_DATA_CODE,BSON_DATA_SYMBOL:Io.BSON_DATA_SYMBOL,BSON_DATA_CODE_W_SCOPE:Io.BSON_DATA_CODE_W_SCOPE,BSON_DATA_INT:Io.BSON_DATA_INT,BSON_DATA_TIMESTAMP:Io.BSON_DATA_TIMESTAMP,BSON_DATA_LONG:Io.BSON_DATA_LONG,BSON_DATA_DECIMAL128:Io.BSON_DATA_DECIMAL128,BSON_DATA_MIN_KEY:Io.BSON_DATA_MIN_KEY,BSON_DATA_MAX_KEY:Io.BSON_DATA_MAX_KEY,BSON_BINARY_SUBTYPE_DEFAULT:Io.BSON_BINARY_SUBTYPE_DEFAULT,BSON_BINARY_SUBTYPE_FUNCTION:Io.BSON_BINARY_SUBTYPE_FUNCTION,BSON_BINARY_SUBTYPE_BYTE_ARRAY:Io.BSON_BINARY_SUBTYPE_BYTE_ARRAY,BSON_BINARY_SUBTYPE_UUID:Io.BSON_BINARY_SUBTYPE_UUID,BSON_BINARY_SUBTYPE_MD5:Io.BSON_BINARY_SUBTYPE_MD5,BSON_BINARY_SUBTYPE_USER_DEFINED:Io.BSON_BINARY_SUBTYPE_USER_DEFINED,Code:xr,Map:ye,BSONSymbol:yr,DBRef:ho,Binary:Co,ObjectId:sr,Long:Ze,Timestamp:ct,Double:Je,Int32:Cr,MinKey:no,MaxKey:so,BSONRegExp:hr,Decimal128:Jr,serialize:na,serializeWithBufferAndIndex:ra,deserialize:oa,calculateObjectSize:ia,deserializeStream:aa,setInternalBufferSize:ta,ObjectID:sr,EJSON:Uo},ca=sa.BSON_INT32_MAX,la=sa.BSON_INT32_MIN,da=sa.BSON_INT64_MAX,ua=sa.BSON_INT64_MIN,pa=sa.JS_INT_MAX,ha=sa.JS_INT_MIN,fa=sa.BSON_DATA_NUMBER,ga=sa.BSON_DATA_STRING,_a=sa.BSON_DATA_OBJECT,ma=sa.BSON_DATA_ARRAY,ya=sa.BSON_DATA_BINARY,va=sa.BSON_DATA_UNDEFINED,Aa=sa.BSON_DATA_OID,ba=sa.BSON_DATA_BOOLEAN,wa=sa.BSON_DATA_DATE,Ca=sa.BSON_DATA_NULL,Ia=sa.BSON_DATA_REGEXP,Ea=sa.BSON_DATA_DBPOINTER,Sa=sa.BSON_DATA_CODE,Ta=sa.BSON_DATA_SYMBOL,xa=sa.BSON_DATA_CODE_W_SCOPE,ka=sa.BSON_DATA_INT,Pa=sa.BSON_DATA_TIMESTAMP,Da=sa.BSON_DATA_LONG,Oa=sa.BSON_DATA_DECIMAL128,Na=sa.BSON_DATA_MIN_KEY,Ra=sa.BSON_DATA_MAX_KEY,Ma=sa.BSON_BINARY_SUBTYPE_DEFAULT,La=sa.BSON_BINARY_SUBTYPE_FUNCTION,Ba=sa.BSON_BINARY_SUBTYPE_BYTE_ARRAY,Fa=sa.BSON_BINARY_SUBTYPE_UUID,Wa=sa.BSON_BINARY_SUBTYPE_MD5,ja=sa.BSON_BINARY_SUBTYPE_USER_DEFINED,Ua=sa.Code,Va=sa.BSONSymbol,Ga=sa.DBRef,$a=sa.Binary,Ha=sa.ObjectId,Za=sa.Long,Qa=sa.Timestamp,Ya=sa.Double,za=sa.Int32,qa=sa.MinKey,Ja=sa.MaxKey,Ka=sa.BSONRegExp,Xa=sa.Decimal128,es=sa.serialize,ts=sa.serializeWithBufferAndIndex,ns=sa.deserialize,rs=sa.calculateObjectSize,os=sa.deserializeStream,is=sa.setInternalBufferSize,as=sa.ObjectID,ss=sa.EJSON;return e.default=sa,e.BSON_INT32_MAX=ca,e.BSON_INT32_MIN=la,e.BSON_INT64_MAX=da,e.BSON_INT64_MIN=ua,e.JS_INT_MAX=pa,e.JS_INT_MIN=ha,e.BSON_DATA_NUMBER=fa,e.BSON_DATA_STRING=ga,e.BSON_DATA_OBJECT=_a,e.BSON_DATA_ARRAY=ma,e.BSON_DATA_BINARY=ya,e.BSON_DATA_UNDEFINED=va,e.BSON_DATA_OID=Aa,e.BSON_DATA_BOOLEAN=ba,e.BSON_DATA_DATE=wa,e.BSON_DATA_NULL=Ca,e.BSON_DATA_REGEXP=Ia,e.BSON_DATA_DBPOINTER=Ea,e.BSON_DATA_CODE=Sa,e.BSON_DATA_SYMBOL=Ta,e.BSON_DATA_CODE_W_SCOPE=xa,e.BSON_DATA_INT=ka,e.BSON_DATA_TIMESTAMP=Pa,e.BSON_DATA_LONG=Da,e.BSON_DATA_DECIMAL128=Oa,e.BSON_DATA_MIN_KEY=Na,e.BSON_DATA_MAX_KEY=Ra,e.BSON_BINARY_SUBTYPE_DEFAULT=Ma,e.BSON_BINARY_SUBTYPE_FUNCTION=La,e.BSON_BINARY_SUBTYPE_BYTE_ARRAY=Ba,e.BSON_BINARY_SUBTYPE_UUID=Fa,e.BSON_BINARY_SUBTYPE_MD5=Wa,e.BSON_BINARY_SUBTYPE_USER_DEFINED=ja,e.Code=Ua,e.BSONSymbol=Va,e.DBRef=Ga,e.Binary=$a,e.ObjectId=Ha,e.Long=Za,e.Timestamp=Qa,e.Double=Ya,e.Int32=za,e.MinKey=qa,e.MaxKey=Ja,e.BSONRegExp=Ka,e.Decimal128=Xa,e.serialize=es,e.serializeWithBufferAndIndex=ts,e.deserialize=ns,e.calculateObjectSize=rs,e.deserializeStream=os,e.setInternalBufferSize=is,e.ObjectID=as,e.EJSON=ss,e}({})},96:e=>{var t={};!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){var n=t[a][1][e];return o(n||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,r){t.uncompress=e("./index").uncompress,t.compress=e("./index").compress},{"./index":2}],2:[function(e,t,n){"use strict";function r(){return"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node}function o(e){return e instanceof Uint8Array&&(!r()||!Buffer.isBuffer(e))}function i(e){return e instanceof ArrayBuffer}function a(e){return!!r()&&Buffer.isBuffer(e)}var s=e("./snappy_decompressor").SnappyDecompressor,c=e("./snappy_compressor").SnappyCompressor,l="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";n.uncompress=function(e){if(!o(e)&&!i(e)&&!a(e))throw new TypeError(l);var t=!1,n=!1;o(e)?t=!0:i(e)&&(n=!0,e=new Uint8Array(e));var r,c,d=new s(e),u=d.readUncompressedLength();if(-1===u)throw new Error("Invalid Snappy bitstream");if(t){if(r=new Uint8Array(u),!d.uncompressToBuffer(r))throw new Error("Invalid Snappy bitstream")}else if(n){if(r=new ArrayBuffer(u),c=new Uint8Array(r),!d.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream")}else if(r=Buffer.alloc(u),!d.uncompressToBuffer(r))throw new Error("Invalid Snappy bitstream");return r},n.compress=function(e){if(!o(e)&&!i(e)&&!a(e))throw new TypeError(l);var t=!1,n=!1;o(e)?t=!0:i(e)&&(n=!0,e=new Uint8Array(e));var r,s,d,u=new c(e),p=u.maxCompressedLength();return t?(r=new Uint8Array(p),d=u.compressToBuffer(r)):n?(r=new ArrayBuffer(p),s=new Uint8Array(r),d=u.compressToBuffer(s)):(r=Buffer.alloc(p),d=u.compressToBuffer(r)),r.slice(0,d)}},{"./snappy_compressor":3,"./snappy_decompressor":4}],3:[function(e,t,n){"use strict";function r(e,t){return 506832829*e>>>t}function o(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function i(e,t,n){return e[t]===e[n]&&e[t+1]===e[n+1]&&e[t+2]===e[n+2]&&e[t+3]===e[n+3]}function a(e,t,n,r,o){return n<=60?(r[o]=n-1<<2,o+=1):n<256?(r[o]=240,r[o+1]=n-1,o+=2):(r[o]=244,r[o+1]=n-1&255,r[o+2]=n-1>>>8,o+=3),function(e,t,n,r,o){var i;for(i=0;i<o;i++)n[r+i]=e[t+i]}(e,t,r,o,n),o+n}function s(e,t,n,r){return r<12&&n<2048?(e[t]=1+(r-4<<2)+(n>>>8<<5),e[t+1]=255&n,t+2):(e[t]=2+(r-1<<2),e[t+1]=255&n,e[t+2]=n>>>8,t+3)}function c(e,t,n,r){for(;r>=68;)t=s(e,t,n,64),r-=64;return r>64&&(t=s(e,t,n,60),r-=60),s(e,t,n,r)}function l(e,t,n,s,l){for(var d=1;1<<d<=n&&d<=u;)d+=1;var h=32-(d-=1);void 0===p[d]&&(p[d]=new Uint16Array(1<<d));var f,g=p[d];for(f=0;f<g.length;f++)g[f]=0;var _,m,y,v,A,b,w,C,I,E,S=t+n,T=t,x=t,k=!0;if(n>=15)for(_=S-15,y=r(o(e,t+=1),h);k;){b=32,v=t;do{if(m=y,w=b>>>5,b+=1,v=(t=v)+w,t>_){k=!1;break}y=r(o(e,v),h),A=T+g[m],g[m]=t-T}while(!i(e,t,A));if(!k)break;l=a(e,x,t-x,s,l);do{for(C=t,I=4;t+I<S&&e[t+I]===e[A+I];)I+=1;if(t+=I,l=c(s,l,C-A,I),x=t,t>=_){k=!1;break}g[r(o(e,t-1),h)]=t-1-T,A=T+g[E=r(o(e,t),h)],g[E]=t-T}while(i(e,t,A));if(!k)break;y=r(o(e,t+=1),h)}return x<S&&(l=a(e,x,S-x,s,l)),l}function d(e){this.array=e}var u=14,p=new Array(u+1);d.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)},d.prototype.compressToBuffer=function(e){var t,n=this.array,r=n.length,o=0,i=0;for(i=function(e,t,n){do{t[n]=127&e,(e>>>=7)>0&&(t[n]+=128),n+=1}while(e>0);return n}(r,e,i);o<r;)i=l(n,o,t=Math.min(r-o,65536),e,i),o+=t;return i},n.SnappyCompressor=d},{}],4:[function(e,t,n){"use strict";function r(e,t,n,r,o){var i;for(i=0;i<o;i++)n[r+i]=e[t+i]}function o(e,t,n,r){var o;for(o=0;o<r;o++)e[t+o]=e[t-n+o]}function i(e){this.array=e,this.pos=0}var a=[0,255,65535,16777215,4294967295];i.prototype.readUncompressedLength=function(){for(var e,t,n=0,r=0;r<32&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,(t=127&e)<<r>>>r!==t)return-1;if(n|=t<<r,e<128)return n;r+=7}return-1},i.prototype.uncompressToBuffer=function(e){for(var t,n,i,s,c=this.array,l=c.length,d=this.pos,u=0;d<c.length;)if(t=c[d],d+=1,0==(3&t)){if((n=1+(t>>>2))>60){if(d+3>=l)return!1;i=n-60,n=1+((n=c[d]+(c[d+1]<<8)+(c[d+2]<<16)+(c[d+3]<<24))&a[i]),d+=i}if(d+n>l)return!1;r(c,d,e,u,n),d+=n,u+=n}else{switch(3&t){case 1:n=4+(t>>>2&7),s=c[d]+(t>>>5<<8),d+=1;break;case 2:if(d+1>=l)return!1;n=1+(t>>>2),s=c[d]+(c[d+1]<<8),d+=2;break;case 3:if(d+3>=l)return!1;n=1+(t>>>2),s=c[d]+(c[d+1]<<8)+(c[d+2]<<16)+(c[d+3]<<24),d+=4}if(0===s||s>u)return!1;o(e,u,s,n),u+=n}return!0},n.SnappyDecompressor=i},{}]},{},[1]),e.exports=t},737:(e,t,n)=>{"use strict";e.exports=n(536)},536:(e,t,n)=>{"use strict";var r=t;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(123),r.BufferWriter=n(673),r.Reader=n(799),r.BufferReader=n(38),r.util=n(165),r.rpc=n(963),r.roots=n(9),r.configure=o,o()},799:(e,t,n)=>{"use strict";e.exports=c;var r,o=n(165),i=o.LongBits,a=o.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new r(e):d(e)})(e)}:d};function p(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new i(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=u(),r._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},38:(e,t,n)=>{"use strict";e.exports=i;var r=n(799);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(165);function i(e){r.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},9:e=>{"use strict";e.exports={}},963:(e,t,n)=>{"use strict";t.Service=n(548)},548:(e,t,n)=>{"use strict";e.exports=o;var r=n(165);function o(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,n,o,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(e,s,t,n,o,i);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return s.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof o))try{n=o[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",n,t),a(null,n)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},697:(e,t,n)=>{"use strict";e.exports=o;var r=n(165);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new o(n,r)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(r.isString(e)){if(!r.Long)return o.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;o.fromHash=function(e){return e===a?i:new o((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},165:function(e,t,n){"use strict";var r=t;function o(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function i(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(781),r.base64=n(26),r.EventEmitter=n(570),r.float=n(298),r.inquire=n(116),r.utf8=n(958),r.pool=n(804),r.LongBits=n(697),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=o,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},123:(e,t,n)=>{"use strict";e.exports=u;var r,o=n(165),i=o.LongBits,a=o.base64,s=o.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var p=function(){return o.Buffer?function(){return(u.create=function(){return new r})()}:function(){return new u}};function h(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function _(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=p(),u.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(u.alloc=o.pool(u.alloc,o.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(g,10,i.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=i.from(e);return this._push(g,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(g,t.length(),t)},u.prototype.bool=function(e){return this._push(h,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(_,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=i.from(e);return this._push(_,4,t.lo)._push(_,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var m=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(o.isString(e)){var n=u.alloc(t=a.length(e));a.decode(e,n,0),e=n}return this.uint32(t)._push(m,t,e)},u.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(h,1,0)},u.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(l,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){r=e,u.create=p(),r._configure()}},673:(e,t,n)=>{"use strict";e.exports=i;var r=n(123);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(165);function i(){r.call(this)}function a(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},i.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},i._configure()}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e].call(n.exports,n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{"use strict";i.r(a),i.d(a,{DefaultCloud:()=>jd,InstanceCloud:()=>Ud,getCloudAPI:()=>Wd,getCloudInstance:()=>Fd,getServiceMarketAPI:()=>hu});var e={};i.r(e),i.d(e,{GeoLineString:()=>_a,GeoMultiLineString:()=>ya,GeoMultiPoint:()=>fa,GeoMultiPolygon:()=>wa,GeoPoint:()=>pa,GeoPolygon:()=>Aa,LineString:()=>ga,MultiLineString:()=>ma,MultiPoint:()=>ha,MultiPolygon:()=>ba,Point:()=>ua,Polygon:()=>va,__safe_props__:()=>Ia});var r={};i.r(r),i.d(r,{AggregateOperatorMap:()=>zl,AggregateSerializer:()=>Kl,Decoder:()=>dd,OperatorMap:()=>Yl,ProjectionSerializer:()=>ld,QuerySerializer:()=>ed,UpdateSerializer:()=>ad,aggregateOperatorToString:()=>Jl,decodeInternalDataType:()=>qa,encode:()=>td,encodeInternalDataType:()=>za,extractQueryOptions:()=>Ja,flattenObject:()=>Za,flattenQueryObject:()=>Ha,getProjectionDefinition:()=>Xa,isConversionRequired:()=>Ya,mergeConditionAfterEncode:()=>Qa,operatorToString:()=>ql});const o=BabelRuntimeHelpers.objectSpread2;var s=i.n(o);const c=BabelRuntimeHelpers.asyncToGenerator;var l=i.n(c);const d=function(){this.__data__=[],this.size=0};const u=function(e,t){return e===t||e!=e&&t!=t};const p=function(e,t){for(var n=e.length;n--;)if(u(e[n][0],t))return n;return-1};var h=Array.prototype.splice;const f=function(e){var t=this.__data__,n=p(t,e);return!(n<0)&&(n==t.length-1?t.pop():h.call(t,n,1),--this.size,!0)};const g=function(e){var t=this.__data__,n=p(t,e);return n<0?void 0:t[n][1]};const _=function(e){return p(this.__data__,e)>-1};const m=function(e,t){var n=this.__data__,r=p(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}y.prototype.clear=d,y.prototype.delete=f,y.prototype.get=g,y.prototype.has=_,y.prototype.set=m;const v=y;const A=function(){this.__data__=new v,this.size=0};const b=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const w=function(e){return this.__data__.get(e)};const C=function(e){return this.__data__.has(e)};const I="object"==typeof global&&global&&global.Object===Object&&global;var E="object"==typeof self&&self&&self.Object===Object&&self;const S=I||E||Function("return this")();const T=S.Symbol;var x=Object.prototype,k=x.hasOwnProperty,P=x.toString,D=T?T.toStringTag:void 0;const O=function(e){var t=k.call(e,D),n=e[D];try{e[D]=void 0;var r=!0}catch(e){}var o=P.call(e);return r&&(t?e[D]=n:delete e[D]),o};var N=Object.prototype.toString;const R=function(e){return N.call(e)};var M=T?T.toStringTag:void 0;const L=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":M&&M in Object(e)?O(e):R(e)};const B=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const F=function(e){if(!B(e))return!1;var t=L(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const W=S["__core-js_shared__"];var j,U=(j=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"";const V=function(e){return!!U&&U in e};var G=Function.prototype.toString;const $=function(e){if(null!=e){try{return G.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var H=/^\[object .+?Constructor\]$/,Z=Function.prototype,Q=Object.prototype,Y=Z.toString,z=Q.hasOwnProperty,q=RegExp("^"+Y.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const J=function(e){return!(!B(e)||V(e))&&(F(e)?q:H).test($(e))};const K=function(e,t){return null==e?void 0:e[t]};const X=function(e,t){var n=K(e,t);return J(n)?n:void 0};const ee=X(S,"Map");const te=X(Object,"create");const ne=function(){this.__data__=te?te(null):{},this.size=0};const re=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var oe=Object.prototype.hasOwnProperty;const ie=function(e){var t=this.__data__;if(te){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return oe.call(t,e)?t[e]:void 0};var ae=Object.prototype.hasOwnProperty;const se=function(e){var t=this.__data__;return te?void 0!==t[e]:ae.call(t,e)};const ce=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=te&&void 0===t?"__lodash_hash_undefined__":t,this};function le(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}le.prototype.clear=ne,le.prototype.delete=re,le.prototype.get=ie,le.prototype.has=se,le.prototype.set=ce;const de=le;const ue=function(){this.size=0,this.__data__={hash:new de,map:new(ee||v),string:new de}};const pe=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const he=function(e,t){var n=e.__data__;return pe(t)?n["string"==typeof t?"string":"hash"]:n.map};const fe=function(e){var t=he(this,e).delete(e);return this.size-=t?1:0,t};const ge=function(e){return he(this,e).get(e)};const _e=function(e){return he(this,e).has(e)};const me=function(e,t){var n=he(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ye.prototype.clear=ue,ye.prototype.delete=fe,ye.prototype.get=ge,ye.prototype.has=_e,ye.prototype.set=me;const ve=ye;const Ae=function(e,t){var n=this.__data__;if(n instanceof v){var r=n.__data__;if(!ee||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ve(r)}return n.set(e,t),this.size=n.size,this};function be(e){var t=this.__data__=new v(e);this.size=t.size}be.prototype.clear=A,be.prototype.delete=b,be.prototype.get=w,be.prototype.has=C,be.prototype.set=Ae;const we=be;const Ce=function(){try{var e=X(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();const Ie=function(e,t,n){"__proto__"==t&&Ce?Ce(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};const Ee=function(e,t,n){(void 0!==n&&!u(e[t],n)||void 0===n&&!(t in e))&&Ie(e,t,n)};const Se=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}();var Te="object"==typeof exports&&exports&&!exports.nodeType&&exports,xe=Te&&"object"==typeof module&&module&&!module.nodeType&&module,ke=xe&&xe.exports===Te?S.Buffer:void 0,Pe=ke?ke.allocUnsafe:void 0;const De=function(e,t){if(t)return e.slice();var n=e.length,r=Pe?Pe(n):new e.constructor(n);return e.copy(r),r};const Oe=S.Uint8Array;const Ne=function(e){var t=new e.constructor(e.byteLength);return new Oe(t).set(new Oe(e)),t};const Re=function(e,t){var n=t?Ne(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const Me=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var Le=Object.create;const Be=function(){function e(){}return function(t){if(!B(t))return{};if(Le)return Le(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Fe=function(e,t){return function(n){return e(t(n))}};const We=Fe(Object.getPrototypeOf,Object);var je=Object.prototype;const Ue=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||je)};const Ve=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:Be(We(e))};const Ge=function(e){return null!=e&&"object"==typeof e};const $e=function(e){return Ge(e)&&"[object Arguments]"==L(e)};var He=Object.prototype,Ze=He.hasOwnProperty,Qe=He.propertyIsEnumerable;const Ye=$e(function(){return arguments}())?$e:function(e){return Ge(e)&&Ze.call(e,"callee")&&!Qe.call(e,"callee")};const ze=Array.isArray;const qe=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};const Je=function(e){return null!=e&&qe(e.length)&&!F(e)};const Ke=function(e){return Ge(e)&&Je(e)};const Xe=function(){return!1};var et="object"==typeof exports&&exports&&!exports.nodeType&&exports,tt=et&&"object"==typeof module&&module&&!module.nodeType&&module,nt=tt&&tt.exports===et?S.Buffer:void 0;const rt=(nt?nt.isBuffer:void 0)||Xe;var ot=Function.prototype,it=Object.prototype,at=ot.toString,st=it.hasOwnProperty,ct=at.call(Object);const lt=function(e){if(!Ge(e)||"[object Object]"!=L(e))return!1;var t=We(e);if(null===t)return!0;var n=st.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&at.call(n)==ct};var dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt["[object Arguments]"]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object Boolean]"]=dt["[object DataView]"]=dt["[object Date]"]=dt["[object Error]"]=dt["[object Function]"]=dt["[object Map]"]=dt["[object Number]"]=dt["[object Object]"]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object WeakMap]"]=!1;const ut=function(e){return Ge(e)&&qe(e.length)&&!!dt[L(e)]};const pt=function(e){return function(t){return e(t)}};var ht="object"==typeof exports&&exports&&!exports.nodeType&&exports,ft=ht&&"object"==typeof module&&module&&!module.nodeType&&module,gt=ft&&ft.exports===ht&&I.process;const _t=function(){try{var e=ft&&ft.require&&ft.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(e){}}();var mt=_t&&_t.isTypedArray;const yt=mt?pt(mt):ut;const vt=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var At=Object.prototype.hasOwnProperty;const bt=function(e,t,n){var r=e[t];At.call(e,t)&&u(r,n)&&(void 0!==n||t in e)||Ie(e,t,n)};const wt=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),o?Ie(n,s,c):bt(n,s,c)}return n};const Ct=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var It=/^(?:0|[1-9]\d*)$/;const Et=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&It.test(e))&&e>-1&&e%1==0&&e<t};var St=Object.prototype.hasOwnProperty;const Tt=function(e,t){var n=ze(e),r=!n&&Ye(e),o=!n&&!r&&rt(e),i=!n&&!r&&!o&&yt(e),a=n||r||o||i,s=a?Ct(e.length,String):[],c=s.length;for(var l in e)!t&&!St.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Et(l,c))||s.push(l);return s};const xt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var kt=Object.prototype.hasOwnProperty;const Pt=function(e){if(!B(e))return xt(e);var t=Ue(e),n=[];for(var r in e)("constructor"!=r||!t&&kt.call(e,r))&&n.push(r);return n};const Dt=function(e){return Je(e)?Tt(e,!0):Pt(e)};const Ot=function(e){return wt(e,Dt(e))};const Nt=function(e,t,n,r,o,i,a){var s=vt(e,n),c=vt(t,n),l=a.get(c);if(l)Ee(e,n,l);else{var d=i?i(s,c,n+"",e,t,a):void 0,u=void 0===d;if(u){var p=ze(c),h=!p&&rt(c),f=!p&&!h&&yt(c);d=c,p||h||f?ze(s)?d=s:Ke(s)?d=Me(s):h?(u=!1,d=De(c,!0)):f?(u=!1,d=Re(c,!0)):d=[]:lt(c)||Ye(c)?(d=s,Ye(s)?d=Ot(s):B(s)&&!F(s)||(d=Ve(c))):u=!1}u&&(a.set(c,d),o(d,c,r,i,a),a.delete(c)),Ee(e,n,d)}};const Rt=function e(t,n,r,o,i){t!==n&&Se(n,(function(a,s){if(i||(i=new we),B(a))Nt(t,n,s,r,e,o,i);else{var c=o?o(vt(t,s),a,s+"",t,n,i):void 0;void 0===c&&(c=a),Ee(t,s,c)}}),Dt)};const Mt=function(e){return e};const Lt=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Bt=Math.max;const Ft=function(e,t,n){return t=Bt(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Bt(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),Lt(e,this,s)}};const Wt=function(e){return function(){return e}};const jt=Ce?function(e,t){return Ce(e,"toString",{configurable:!0,enumerable:!1,value:Wt(t),writable:!0})}:Mt;var Ut=Date.now;const Vt=function(e){var t=0,n=0;return function(){var r=Ut(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(jt);const Gt=function(e,t){return Vt(Ft(e,t,Mt),e+"")};const $t=function(e,t,n){if(!B(n))return!1;var r=typeof t;return!!("number"==r?Je(n)&&Et(t,n.length):"string"==r&&t in n)&&u(n[t],e)};const Ht=function(e){return Gt((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&$t(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t}))}((function(e,t,n){Rt(e,t,n)})),Zt=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),Qt=e=>"object"===Zt(e),Yt=e=>"string"===Zt(e),zt=e=>"number"===Zt(e),qt=e=>"function"==typeof e,Jt=e=>Array.isArray(e),Kt=e=>"date"===Zt(e),Xt=e=>"regexp"===Zt(e),en=e=>e&&"symbol"===Zt(e._internalType),tn={"-1":"",UNKNOWN_ERROR:-1,"-401001":"api permission denied",SDK_API_PERMISSION_DENIED:-401001,"-401002":"api parameter error",SDK_API_PARAMETER_ERROR:-401002,"-401003":"api parameter type error",SDK_API_PARAMETER_TYPE_ERROR:-401003,"-402001":"circular reference detected",SDK_DATABASE_CIRCULAR_REFERENCE:-402001,"-402002":"realtime listener init watch fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:-402002,"-402003":"realtime listener reconnect ws fail",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL:-402003,"-402004":"realtime listener rebuild watch fail",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:-402004,"-402005":"realtime listener close watch fail",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:-402005,"-402006":"realtime listener receive server error msg",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:-402006,"-402007":"realtime listener receive invalid server data",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:-402007,"-402008":"realtime listener websocket connection error",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:-402008,"-402009":"realtime listener websocket connection closed",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:-402009,"-402010":"realtime listener check last fail",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:-402010,"-402011":"realtime listener unexpected fatal error",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:-402011,"-402012":"realtime listener init ws fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL:-402012,"-403001":"max upload file size exceeded",SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE:-403001,"-403002":"internal server error: empty upload url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL:-403002,"-403003":"internal server error: empty download url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL:-403003,"-404001":"empty call result",SDK_FUNCTIONS_EMPTY_CALL_RESULT:-404001,"-404002":"empty event id",SDK_FUNCTIONS_EMPTY_EVENT_ID:-404002,"-404003":"empty poll url",SDK_FUNCTIONS_EMPTY_POLL_URL:-404003,"-404004":"empty poll result json",SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON:-404004,"-404005":"exceed max poll retry",SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY:-404005,"-404006":"empty poll result base resp",SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP:-404006,"-404007":"poll result base resp ret abnormal",SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-404007,"-404008":"poll result status code error",SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR:-404008,"-404009":"poll error",SDK_FUNCTIONS_POLL_ERROR:-404009,"-404010":"result expired",SDK_FUNCTIONS_POLL_RESULT_EXPIRED:-404010,"-404011":"cloud function execution error",SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR:-404011,"-404012":"polling exceed max timeout retry",SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY:-404012,"-404013":"polling exceed max system error retry",SDK_FUNCTIONS_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-404013,"-405001":"empty call result",SDK_CONTAINER_EMPTY_CALL_RESULT:-405001,"-405002":"empty event id",SDK_CONTAINER_EMPTY_EVENT_ID:-405002,"-405003":"empty poll url",SDK_CONTAINER_EMPTY_POLL_URL:-405003,"-405004":"empty poll result json",SDK_CONTAINER_EMPTY_POLL_RESULT_JSON:-405004,"-405005":"exceed max poll retry",SDK_CONTAINER_EXCEED_MAX_POLL_RETRY:-405005,"-405006":"empty poll result base resp",SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP:-405006,"-405007":"poll result base resp ret abnormal",SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-405007,"-405008":"poll result status code error",SDK_CONTAINER_POLL_RESULT_STATUS_CODE_ERROR:-405008,"-405009":"poll error",SDK_CONTAINER_POLL_ERROR:-405009,"-405010":"result expired",SDK_CONTAINER_POLL_RESULT_EXPIRED:-405010,"-405012":"polling exceed max timeout retry",SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY:-405012,"-405013":"polling exceed max system error retry",SDK_CONTAINER_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-405013,"-405014":"cannot download result (cdn)",SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL:-405014,"-601001":"system error",WX_SYSTEM_ERROR:-601001,"-601002":"system args error",WX_SYSTEM_ARGS_ERROR:-601002,"-601003":"system network error",WX_SYSTEM_NETWORK_ERROR:-601003,"-601004":"api permission denied",WX_API_PERMISSION_DENIED:-601004,"-601005":"invalid cloudID",WX_INVALID_CLOUDID:-601005,"-601006":"cloudID expired",WX_CLOUDID_EXPIRED:-601006,"-601007":"cloudID and calling user does not match",WX_CLOUDID_USER_NOT_MATCH:-601007,"-601008":"server-side request timedout",WX_SERVER_REQUEST_TIMEOUT:-601008,"-601009":"missing mobile phone",WX_MISSING_MOBILE_PHONE:-601009,"-601010":"no write permission",WX_NO_WRITE_PERMISSION:-601010,"-601011":"no privilege permission",WX_NO_PRIVILEGE_PERMISSION:-601011,"-601012":"unauthorized env",WX_UNAUTHORIZED_ENV:-601012,"-601013":"no multiend permission",WX_NO_MULTIEND_PERMISSION:-601013,"-601015":"access denied (cloudfunction cloudbase_auth returns empty errCode)",WX_CLOUDBASE_AUTH_RETURN_EMPTY_ERRCODE:-601015,"-601016":"missing env auth info",WX_MISSING_ENV_AUTH_INFO:-601016,"-601017":"access denied (cloudbase_auth returns non-zero errCode)",WX_CLOUDBASE_AUTH_RETURN_NON_ZERO_ERRCODE:-601017,"-602018":"unauthorized API",WX_UNAUTHORIZED_API:-601018,"-602001":"database query result size exceed limit (1MB)",WX_DATABASE_QUERY_SIZE_EXCEED_LIMIT:-602001,"-604001":"cloudfunction result size exceed limit (1MB)",WX_CLOUDFUNCTION_RESULT_SIZE_EXCEED_LIMIT:-604001,"-501001":"resource system error",TCB_RESOURCE_SYSTEM_ERROR:-501001,"-501002":"resource server timeout",TCB_RESOURCE_SERVER_TIMEOUT:-501002,"-501003":"exceed request limit",TCB_EXCEED_REQUEST_LIMIT:-501003,"-501004":"exceed concurrent request limit",TCB_EXCEED_CONCURRENT_REQUEST_LIMIT:-501004,"-501005":"invalid env",TCB_INVALID_ENV:-501005,"-501006":"invalid common parameters",TCB_INVALID_COMMON_PARAM:-501006,"-501007":"invalid parameters",TCB_INVALID_PARAM:-501007,"-501008":"invalid request source",TCB_INVALID_REQUEST_SOURCE:-501008,"-501009":"resource not initialized",TCB_RESOURCE_NOT_INITIALIZED:-501009,"-501010":"tencentcloud key signature verification fail",TCB_KEY_SIGNATURE_VERIFICATION_FAIL:-501010,"-501011":"invalid env status",TCB_INVALID_ENV_STATUS:-501011,"-501012":"invalid api name",TCB_INVALID_API_NAME:-501012,"-501013":"request data size exceeds limit (5M)",TCB_REQ_DATA_EXCEED_LIMIT_5M:-501013,"-501014":"upload file size exceeds limit (5M)",TCB_UPLOAD_FILE_SIZE_EXCEED_LIMIT_5M:-501014,"-501023":"permission denied",TCB_PERMISSION_DENIED:-501023,"-502001":"database request fail",TCB_DB_REQUEST_FAIL:-502001,"-502002":"database invalid command",TCB_DB_INVALID_COMMAND:-502002,"-502003":"database permission denied",TCB_DB_PERMISSION_DENIED:-502003,"-502004":"database exceed collection limit",TCB_DB_EXCEED_COLLECTION_LIMIT:-502004,"-502005":"database collection not exists",TCB_DB_COLLECTION_NOT_EXISTS:-502005,"-503001":"storage request fail",TCB_STORAGE_REQUEST_FAIL:-503001,"-503002":"storage permission denied",TCB_STORAGE_PERMISSION_DENIED:-503002,"-503003":"storage file not exists",TCB_STORAGE_FILE_NOT_EXISTS:-503003,"-503004":"storage invalid sign parameter",TCB_STORAGE_INVALID_SIGN_PARAM:-503004,"-504001":"functions request fail",TCB_FUNCTIONS_REQUEST_FAIL:-504001,"-504002":"functions execute fail",TCB_FUNCTIONS_EXEC_FAIL:-504002};class nn extends Error{constructor(e){super(e.errMsg),this.errCode=-1,this.errMsg=void 0,this.requestID=void 0,Object.defineProperties(this,{message:{get(){return`errCode: ${this.errCode} ${tn[this.errCode]||""} | errMsg: `+this.errMsg},set(e){this.errMsg=e}}}),this.errCode=e.errCode||-1,this.errMsg=e.errMsg}get message(){return`errCode: ${this.errCode} | errMsg: `+this.errMsg}set message(e){this.errMsg=e}}function rn(e){return e&&e instanceof Error&&Yt(e.errMsg)}function on(e,t){return an(e,t)}function an(e,t){if(e){if(rn(e))return e;const n=`${t}:fail `;let r;if(e instanceof Error)e.message=`${n}${e.message}`,e.stack=e.stack?e.stack.slice(0,7)+n+e.stack.slice(7):e.stack,r=e,r.errCode=-1;else if("string"==typeof e)r=new Error(`${n}${e}`),r.errCode=-1;else{const n=e.errMsg||"";r=new Error(`${t}:fail ${e.errCode} ${tn[e.errCode]||""}. ${n}`),r.errCode=e.errCode||-1}return r.errMsg=r.message+"",r}const n=new Error(`${t}:fail`);return n.errCode=-1,n.errMsg=n.message+"",n}class sn extends Error{constructor(e,t){super(e),this.type="timeout",this.payload=void 0,this.generic=!0,this.payload=t}}const cn=e=>"timeout"===e.type;class ln extends Error{constructor(e,t){super(e),this.type="cancelled",this.payload=void 0,this.generic=!0,this.payload=t}}const dn=e=>"cancelled"===e.type;let un;const pn={surroundThirdByTryCatch:(e,t)=>function(...n){return vn((()=>{try{return e.apply(e,n)}catch(n){throw console.error(JSON.stringify(n)+`; ${t}\n`+n.stack),console.error(e.toString()),n}}),t)},reportIDKey:(...e)=>{},reportIDKeyDirectly:(...e)=>{},reportKeyValue:(...e)=>{}};let hn=!1,fn=10;function gn(){try{return hn?Reporter:(fn<=0||(fn--,Reporter.surroundThirdByTryCatch,un=Reporter,hn=!0),un)}catch(e){return un=pn,un}}const _n=(e,t)=>gn().surroundThirdByTryCatch(e,t),mn=e=>gn().reportIDKeyDirectly(e),yn=e=>gn().reportKeyValue(e);function vn(e,t=""){try{return e()}catch(e){if(rn(e))return e.errMsg+=t,e;const n=(e?e.toString():"")+t;return new nn({errMsg:n})}}function An(e,t=""){return function(...n){return vn((()=>e.apply(e,n)),t)}}function bn(e){const t=e.param;t&&(t.success&&qt(t.success)&&(t.success=_n(t.success,`at api ${e.apiName} success callback function`)),t.fail&&qt(t.fail)&&(t.fail=_n(t.fail,`at api ${e.apiName} fail callback function`)),t.complete&&qt(t.complete)&&(t.complete=_n(t.complete,`at api ${e.apiName} complete callback function`)))}function wn(e,t,n){if(t.complete&&qt(t.complete)){An(t.complete,`at api ${e} complete callback function;`)(n)}}function Cn(e,t,n){!function(e,t,n){t.success&&qt(t.success)&&An(t.success,`at api ${e} success callback function;`)(n)}(e,t,n),wn(e,t,n)}function In(e,t,n){!function(e,t,n){t.fail&&qt(t.fail)&&An(t.fail,`at api ${e} fail callback function;`)(n)}(e,t,n),wn(e,t,n)}function En(e){return e&&(e.success||e.fail||e.complete)}function Sn(e,t,n="parameter",r=nn){const o=function(e,t,n="parameter"){const r=function e(t,n,r){const o=Zt(t),i=Zt(n);if("string"===i)return o!==n?`${r} should be ${n} instead of ${o};`:"";{if(o!==i)return`${r} should be ${i} instead of ${o}; `;let a="";switch(o){case"object":for(const o in n)a+=e(t[o],n[o],`${r}.${o}`);break;case"array":for(let o=0;o<n.length;o++)a+=e(t[o],n[o],`${r}[${o}]`)}return a}}(e,t,n);return{passed:!r,reason:r}}(e,t,n);if(!o.passed)throw new r({errCode:tn.SDK_API_PARAMETER_TYPE_ERROR,errMsg:o.reason})}function Tn(e,t,n,r=nn){if(null==e)throw new r({errCode:tn.SDK_API_PARAMETER_ERROR,errMsg:`parameter ${t} of function ${n} must be provided`})}function xn({name:e,input:t,max:n,maxWording:r="",ErrorClass:o=nn}){if(t.length>n)throw new o({errCode:tn.SDK_API_PARAMETER_ERROR,errMsg:`${e} size must be less than ${r||n}`})}function kn({target:e,name:t,ErrorClass:n=nn}){if(0===Object.keys(e).length)throw new n({errCode:tn.SDK_API_PARAMETER_ERROR,errMsg:`${t} must not be empty`})}function Pn(e,t=!1){if(t)return function(e){switch(Zt(e)){case"object":return s()({},e);case"array":return e.slice();case"number":return e instanceof Number?new Number(e):e;case"string":return e instanceof String?new String(e):e;case"boolean":return e instanceof Boolean?new Boolean(e):e;case"date":return new e.constructor(+e);case"map":return new Map(e);case"set":return new Set(e);default:return e}}(e);if((e=>{if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t})(e))return s()({},e);switch(Zt(e)){case"object":return e;case"array":return e.slice();default:return e}}const Dn=new WeakMap;let On;function Nn(){var e;return null!==(e=On)&&void 0!==e?e:void 0!==t?t:void 0}const Rn=e=>{if(!e)return Nn();const t=Dn.get(e);return t&&t||Nn()};const Mn=function(){return S.Date.now()};var Ln=/\s/;const Bn=function(e){for(var t=e.length;t--&&Ln.test(e.charAt(t)););return t};var Fn=/^\s+/;const Wn=function(e){return e?e.slice(0,Bn(e)+1).replace(Fn,""):e};const jn=function(e){return"symbol"==typeof e||Ge(e)&&"[object Symbol]"==L(e)};var Un=/^[-+]0x[0-9a-f]+$/i,Vn=/^0b[01]+$/i,Gn=/^0o[0-7]+$/i,$n=parseInt;const Hn=function(e){if("number"==typeof e)return e;if(jn(e))return NaN;if(B(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=B(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Wn(e);var n=Vn.test(e);return n||Gn.test(e)?$n(e.slice(2),n?2:8):Un.test(e)?NaN:+e};var Zn=Math.max,Qn=Math.min;const Yn=function(e,t,n){var r,o,i,a,s,c,l=0,d=!1,u=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=r,i=o;return r=o=void 0,l=t,a=e.apply(i,n)}function f(e){return l=e,s=setTimeout(_,t),d?h(e):a}function g(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-l>=i}function _(){var e=Mn();if(g(e))return m(e);s=setTimeout(_,function(e){var n=t-(e-c);return u?Qn(n,i-(e-l)):n}(e))}function m(e){return s=void 0,p&&r?h(e):(r=o=void 0,a)}function y(){var e=Mn(),n=g(e);if(r=arguments,o=this,c=e,n){if(void 0===s)return f(c);if(u)return clearTimeout(s),s=setTimeout(_,t),h(c)}return void 0===s&&(s=setTimeout(_,t)),a}return t=Hn(t)||0,B(n)&&(d=!!n.leading,i=(u="maxWait"in n)?Zn(Hn(n.maxWait)||0,t):i,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=o=s=void 0},y.flush=function(){return void 0===s?a:m(Mn())},y};let zn=!1,qn=[],Jn="unknown";const Kn=()=>{for(const e of qn)try{e()}catch(e){0}qn=[]},Xn=e=>{setTimeout((()=>{try{if(!(e=>!(e.tunnelStartTime&&e.tunnelEndTime&&e.tunnelEndTime<e.tunnelStartTime||!(e.apiStartTime&&e.apiEndTime&&e.apiEndTime>e.apiStartTime)))(e))return;if(!zn&&qn.length<100)return void qn.push(Xn.bind(null,e));const t=e.apiEndTime-e.apiStartTime,n=e.tunnelEndTime?e.tunnelEndTime-e.tunnelStartTime:0,r=[0,e.apiName,t,n,(e.pollStartTime&&e.pollEndTime&&e.pollEndTime>e.pollStartTime?e.pollEndTime-e.pollStartTime:0)||0,Jn,e.tunnelTimeNoCSNetCost?t-e.tunnelTimeNoCSNetCost:0,e.tunnelTimeNoCSNetCost?n-e.tunnelTimeNoCSNetCost:0,e.funcExecTime?e.funcExecTime:0];yn({key:"CloudReport",value:r.join(","),force:!0})}catch(e){}}))},er=(e,t,n,r)=>{mn({id:e,key:t,force:n,immediately:r})};let tr;let nr=[];const rr=(e,t,n)=>{nr.push({log_id:e,version:t,user_log_list:n}),tr&&or()},or=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return B(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Yn(e,t,{leading:r,maxWait:t,trailing:o})}((()=>{Rn()._requestSkipCheckDomain({url:`https://servicewechat.com/wxa-qbase/report?token=${tr}`,method:"POST",header:{},enableHttp2:!0,data:JSON.stringify({report_info_list:nr})}),nr=[]}),3e4),ir=(e,t)=>{const n=qt(e);function r(...r){if(t.samplePicker&&!t.samplePicker.next())return n?e.apply(this,r):e;const i=Date.now();let a=!0;try{if(t.condition&&t.condition.emptyKey&&t.timing[t.startKey])return n?e.apply(this,r):e;let s;if(n){const t=e.apply(this,r);if("promise"!==Zt(t))return a=!1,t;s=t}else s=e;return s.then((()=>o(i))).catch((()=>o(i))),s}catch(e){throw a=!1,e}finally{a||o(i)}}function o(e){t.timing[t.startKey]=e,t.timing[t.endKey]=Date.now(),t.autoReport&&Xn(s()(s()({},t.timing),{},{apiName:t.autoReport}))}return n?r:r()},ar=(sr=10,cr=!0,function*(){const e=()=>parseInt(Math.round(2*Math.random()*sr),10);let t=cr?0:e();for(;;)t>0?(t--,yield!1):(t=e(),yield!0)})();var sr,cr;function lr(e){return`${e}:ok`}function dr(e,t){return JSON.stringify(e,((e,n)=>{if(t&&t.has(n))return t.get(n);switch(Zt(n)){case"arraybuffer":return{type:"Buffer",data:[...new Uint8Array(n)]}}return n}))}function ur(e){return pr(JSON.parse(e))}function pr(e){switch(Zt(e)){case"object":return hr(e);case"array":return e.map(pr);default:return e}}function hr(e){const t=e,n=fr(t);if(t!==n)return n;for(const e in t){const n=t[e];switch(Zt(n)){case"object":{const r=fr(n);t[e]=r!==n?r:hr(t[e]);break}case"array":{const r=pr(n);r!==n&&(t[e]=r);break}default:continue}}return t}function fr(e){for(const t in e)switch(t){case"type":switch(e.type){case"Buffer":if(Jt(e.data)&&zt(e.data[0]))try{return new Uint8Array(e.data).buffer}catch(t){return e}}}return e}const gr=Symbol.for("CLOUD_ID"),_r=Symbol("CDN");function mr(e){const t=[];for(const n in e)Qt(e[n])&&e[n]._internalType===gr&&t.push({key:n,cloudID:e[n].cloudID});return t}const yr=(e=0)=>new Promise((t=>setTimeout(t,e)));let vr,Ar=!1;const br=[],wr=()=>new Promise(((e,t)=>{if(vr)e(vr);else{0;try{Rn().wx.getNetworkType({success:t=>{vr={networkType:t.networkType,isConnected:"none"!==t.networkType},e(vr),Ar||(Rn().wx.onNetworkStatusChange((e=>{if(vr.networkType=e.networkType,vr.isConnected=e.isConnected,e.isConnected&&br.length)for(;br.length;)try{br.shift()()}catch(e){}})),Ar=!0)},fail:t})}catch(e){t(e)}}}));let Cr,Ir=!1;const Er=new Set;function Sr(e){Rn().wx.onAppShow&&(Ir||(!function(){const e=Rn().wx;e.onAppShow&&e.onAppHide&&(e.onAppShow((()=>{Cr="visible";for(const e of Er)try{e("show")}catch(e){0}})),e.onAppHide((()=>{Cr="hidden";for(const e of Er)try{e("hide")}catch(e){0}})))}(),Ir=!0),Er.size>50&&Er.clear(),Er.add(e))}function Tr(e){Er.delete(e)}let xr;function kr(){if(xr)return xr;const e=Rn().wx;return xr=e.getSystemInfoSync(),xr}function Pr(e){try{return JSON.parse(e)}catch(t){return e}}const Dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Or(e){let t="";const n=new Uint8Array(e),r=n.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(n[e]);return function(e){const t=String(e);let n="";for(let e,r,o=0,i=Dr;t.charAt(0|o)||(i="=",o%1);n+=i.charAt(63&e>>8-o%1*8)){if(r=t.charCodeAt(o+=3/4),r>255)throw new Error('"btoa" failed');e=e<<8|r}return n}(t)}function Nr(e){const t=function(e){const t=String(e).replace(/=+$/,"");let n="";if(t.length%4==1)throw new Error('"atob" failed');for(let e,r,o=0,i=0;r=t.charAt(i++);~r&&(e=o%4?64*e+r:r,o++%4)?n+=String.fromCharCode(255&e>>(-2*o&6)):0)r=Dr.indexOf(r);return n}(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return r.buffer}function Rr(e){return Lr(new Uint8Array(e))}function Mr(e){return function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return new Uint8Array(t)}(e).buffer}const Lr=function(){let e=new Array(128),t=String.fromCodePoint||String.fromCharCode,n=[];return function(r){var o,i,a=r.length;n.length=0;for(var s=0;s<a;)(i=r[s++])<=127?o=i:i<=223?o=(31&i)<<6|63&r[s++]:i<=239?o=(15&i)<<12|(63&r[s++])<<6|63&r[s++]:String.fromCodePoint?o=(7&i)<<18|(63&r[s++])<<12|(63&r[s++])<<6|63&r[s++]:(o=63,s+=3),n.push(e[o]||(e[o]=t(o)));return n.join("")}}();let Br;try{__wxConfig.platform,Br=s()({},__wxConfig),__wxConfig.onReady((()=>{Br=Object.assign(Br,__wxConfig)}))}catch(e){Br={platform:"ios",appLaunchInfo:{mode:""},onReady:e=>{setTimeout((()=>{e()}))}}}const Fr=Br,Wr=()=>"devtools"===Br.platform,jr=2e4,Ur=e=>{const t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},Vr=e=>e.join("->");function Gr(e){return function(){var t=l()((function*(t){const n=s()({},t.data),r=mr(n).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(r.length)for(const e of r)delete n[e.key_name];const o=dr(n,yield t.cdnMapPromise);xn({input:o,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});const i=`${+new Date}-${Math.random()}`;t.context.tunnelStartTime=+new Date;const{result:a,requestID:c}=yield function(e,t,n,r){return d.apply(this,arguments)}(t,o,r,i);return t.context.tunnelEndTime=+new Date,{errMsg:lr(Kr),result:a,requestID:c};function d(){return(d=l()((function*(t,n,r,o){return new Promise(((i,a)=>{const s=[Ur("start")],{resolve:c,reject:l}=h(s,i,a);u({param:t,functionName:t.name,data:n,cloudIDList:r,callID:o,action:zr.CALL,scene:qr.INITIATE_CALL,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,trace:s,resolve:c,reject:l})}))}))).apply(this,arguments)}function u(e){return p.apply(this,arguments)}function p(){return(p=l()((function*(n){const{functionName:o,data:i,callID:a,action:c,scene:d,tryCount:p,trace:h,systemErrorRetry:f,timeoutErrorRetry:g,resolve:_,reject:m}=n,y=c===zr.CALL&&Wr()?t.localDebugNoTimeout:void 0,v=dr({function_name:o,data:c===zr.CALL?i:void 0,action:c,scene:d,call_id:a,cloudid_list:c===zr.CALL?r:[],local_debug_no_timeout:y});let A=!1,b=!1;const w=()=>{clearTimeout(I),b=!0},C=+new Date,I=y?void 0:setTimeout(l()((function*(){const t=e.appConfig.clientPollTimeout||jr;if(!(+new Date-C>t&&(yield yr(),b))){if(!Wr()&&+new Date-C>e.appConfig.maxStartRetryGap)return h.push(Ur("timeout, exceed max retry gap")),m(an({errCode:tn.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${a}) (trace: ${Vr(h)})`},Kr));A=!0,n.timeoutErrorRetry>0?(h.push(Ur("timeout, retry")),u(s()(s()({},n),{},{scene:qr.TIMEOUT_RETRY,tryCount:p-1,timeoutErrorRetry:g-1}))):(h.push(Ur("timeout, abort")),m(an({errCode:tn.SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${a}) (trace: ${Vr(h)})`},Kr)))}})),e.appConfig.clientPollTimeout||jr);e.request(s()(s()({},t.config),{},{apiName:"tcbapi_slowcallfunction_v2",serviceName:e.name,serializedReqData:v,env:t.config&&t.config.env||e.env})).then((function(e){try{if(A)return;w(),(e=>{const n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&(n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time),n.baseresponse.stat.func_exec_cost_time&&(t.context.funcExecTime=n.baseresponse.stat.func_exec_cost_time))})(e);const r=e.data;if(!r)return h.push(Ur("empty resp")),m(an({errCode:tn.SDK_FUNCTIONS_EMPTY_CALL_RESULT},Kr));if(!r.baseresponse||0!==r.baseresponse.errcode)return r.baseresponse?0!==r.baseresponse.errcode?m(an({errCode:tn.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${r.baseresponse.errcode} errmsg ${r.baseresponse.errmsg} (callId: ${a})`},Kr)):m(an({errCode:tn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(r.baseresponse)} (callId: ${a})`},Kr)):m(an({errCode:tn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP},Kr));if(0!==r.status){if(1===r.status){if(0!==r.service_errcode){if(r.service_errcode===tn.TCB_FUNCTIONS_EXEC_FAIL){let e=r.service_errmsg||"";try{const t=e.split("\n");let n=[];for(let e=0;e<t.length;e++)t[e].startsWith("Error: ")&&n.push([t[e],e]);if(n.length%2==1){let r=n[Math.floor(n.length/2)][1];e=t.slice(r).join("\n")}}catch(e){}const t=an({errCode:tn.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`云函数执行错误\n云端堆栈信息(error stack)(${r.func_request_id?`requestId ${r.func_request_id}, `:""}callid ${a}):\n${e}`},Kr);return t.stack=`Error: ${t.message}`,t.requestID=r.func_request_id,m(t)}{const e=an({errCode:tn.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`\n云函数调用失败(${r.func_request_id?`requestId ${r.func_request_id}, `:""}callid ${a}):\n${r.service_errcode} ${r.service_errmsg}`},Kr);return e.stack=`Error: ${e.message}`,e.requestID=r.func_request_id,m(e)}}{let e=r.data;try{e=ur(e)}catch(t){try{e=JSON.parse(e)}catch(e){}}return _({result:e,requestID:r.func_request_id})}}return h.push(Ur("poll result expired")),m(an({errCode:tn.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${a}) (trace: ${Vr(h)})`},Kr))}if(!(p>=0))return h.push(Ur("too many polls, abort")),m(an({errCode:tn.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${a}) (trace: ${Vr(h)})`},Kr));h.push(Ur("normal poll")),u(s()(s()({},n),{},{action:zr.POLL,scene:qr.NORMAL_POLL_RETRY,tryCount:p-1}))}catch(e){m(an({errCode:tn.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${a})`},Kr))}})).catch((e=>{A||(w(),e&&e.operateWXDataFail&&f>0?(h.push(Ur(`system error (${e}), retry`)),u(s()(s()({},n),{},{scene:qr.SYSTEM_ERROR_RETRY,tryCount:p-1,systemErrorRetry:f-1}))):(h.push(Ur(`system error (${e}), abort`)),m(an(`${e} (callId: ${a}) (trace: ${Vr(h)})`,Kr))))}))}))).apply(this,arguments)}function h(e,t,n){const r=t=>{e.push(Ur(`app ${t}`))};Sr(r);return{resolve:e=>{Tr(r),t(e)},reject:e=>{Tr(r),n(e)}}}}));return function(e){return t.apply(this,arguments)}}()}function $r(e){const t=new WeakMap,n=[];if(e&&(JSON.stringify(e,((e,r)=>r&&r._internalType===_r?void n.push(new Promise(((e,n)=>{const o={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},i=r;switch(Zt(i.target)){case"object":if(!i.target.filePath)throw new Error("filePath must be provided");o.filePath=i.target.filePath;break;default:o.fileData=i.target}e(Hr(o).then((e=>{t.set(r,e.fileUrl)})))}))):r)),n.length))return Promise.all(n).then((()=>t))}function Hr(e){return new Promise(((t,n)=>{const r=s()(s()({},e),{},{appType:e.appType||301,fileType:e.fileType||20303,fileKey:e.fileKey||`file_${Math.random()}`});Rn().uploadToCommonCDN(s()(s()({},r),{},{success:t,fail:n}))}))}const Zr=e=>s()(s()({},e),{},{errMsg:void 0}),Qr=e=>{try{Wr()&&"undefined"!=typeof __global&&__global.networkLog&&__global.networkLog(s()(s()({},e),{},{domain:"cloud",method:"POST",timestampMs:e.timestampMs||+new Date,callFramesIgnoreLength:e.hasOwnProperty("callFramesIgnoreLength")?e.callFramesIgnoreLength:1}))}catch(e){}},Yr=(e,t)=>{try{if(Wr()&&"undefined"!=typeof __global&&__global.networkLog){const n=t(),r=`${Math.random()}-${+new Date}`,o=n.console||!1,i=n.resultGetter||Zr;Qr({reqId:r,type:"requestWillBeSent",url:n.url,headers:n.headers||{},body:n.reqBody,console:o,callFramesIgnoreLength:2,timestampMs:n.timestampMs}),e.then(function(){var e=l()((function*(e){try{yield((e=0)=>new Promise((t=>setTimeout(t,e))))(),Qr({reqId:r,type:"loadingFinished",body:JSON.stringify(i(e),null,2),console:o,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}));return function(t){return e.apply(this,arguments)}}()).catch((e=>{try{Qr({reqId:r,type:"loadingFailed",errorCode:e&&e.errCode||-1,errorMsg:Qt(e)?e.errMsg||JSON.stringify(e):e.toString(),console:o,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}))}}catch(e){0}};let zr,qr,Jr;!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(zr||(zr={})),function(e){e[e.INITIATE_CALL=1]="INITIATE_CALL",e[e.NORMAL_POLL_RETRY=2]="NORMAL_POLL_RETRY",e[e.SYSTEM_ERROR_RETRY=3]="SYSTEM_ERROR_RETRY",e[e.TIMEOUT_RETRY=4]="TIMEOUT_RETRY"}(qr||(qr={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(Jr||(Jr={}));const Kr="cloud.callFunction",Xr="cloud.callFunction_real_v2";function eo(e){let t,n;function r(){return t||(t=function(e){return function(){var t=l()((function*(t){const n=s()({},t.data),r=mr(n).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(r.length)for(const e of r)delete n[e.key_name];const o=dr(n,yield t.cdnMapPromise);xn({input:o,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});const i=dr({function_name:t.name,data:o,cloudid_list:r});t.context.tunnelStartTime=+new Date;const a=yield e.request(s()(s()({},t.config),{},{apiName:"tcbapi_slowcallfunction",serviceName:e.name,serializedReqData:i,env:t.config&&t.config.env||e.env}));t.context.tunnelEndTime=+new Date;const c=a.data;if(!c)throw on({errCode:tn.SDK_FUNCTIONS_EMPTY_CALL_RESULT,errMsg:tn[tn.SDK_FUNCTIONS_EMPTY_CALL_RESULT]},Kr);if(c.event_id,!c.poll_url)throw on({errCode:tn.SDK_FUNCTIONS_EMPTY_POLL_URL,errMsg:tn[tn.SDK_FUNCTIONS_EMPTY_POLL_URL]},Kr);c.poll_url.indexOf("?")>-1?c.poll_url+="&devtools_ignore=true&skip_domain_check=true":c.poll_url+="?devtools_ignore=true&skip_domain_check=true",t.context.pollStartTime=+new Date;const{result:d,requestID:u}=yield function(e){return p.apply(this,arguments)}(c.poll_url);return t.context.pollEndTime=+new Date,{errMsg:lr(Kr),result:d,requestID:u};function p(){return(p=l()((function*(t){return new Promise(((n,r)=>{h(t,e.appConfig.maxPollRetry||50,n,r)}))}))).apply(this,arguments)}function h(e,t,n,r){return f.apply(this,arguments)}function f(){return(f=l()((function*(t,n,r,o){Rn(e.identifiers)._requestSkipCheckDomain({url:t,success:e=>{try{if(200!==e.statusCode)return o(on({errCode:tn.SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR,errMsg:`polling status code ${e.statusCode}`},Kr));{const i=e.data;if(!i)return o(on({errCode:tn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON,errMsg:tn[tn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON]},Kr));if(i.base_resp&&0===i.base_resp.ret){if(0!==i.status){if(1===i.status){if(0!==i.service_errcode){const e=on({errCode:tn.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`requestID ${i.func_req_id}, cloud function service error code ${i.service_errcode||"unknown"}, error message ${i.service_errmsg||"unknown"}`},Kr);return e.requestID=i.func_req_id,o(e)}{let e=i.content;try{e=ur(e)}catch(t){try{e=JSON.parse(e)}catch(e){}}return r({result:e,requestID:i.func_req_id})}}return o(on({errCode:tn.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching"},Kr))}if(!(n>=0))return o(on({errCode:tn.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:tn[tn.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY]},Kr));h(t,n-1,r,o)}else{if(!i.base_resp)return o(on({errCode:tn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:tn[tn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP]},Kr));if(0!==i.base_resp.ret)return o(on({errCode:tn.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.ret ${i.base_resp.ret}`},Kr))}}}catch(e){o(on({errCode:tn.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e}`},Kr))}},fail:e=>{o(on(e,Kr))}})}))).apply(this,arguments)}}));return function(e){return t.apply(this,arguments)}}()}(e)),t}function o(){return n||(n=Gr(e)),n}return function(e){const t=+new Date;Sn(e,"object");const n=Pn(e);return n.data||(n.data={}),n.context={tunnelTimeNoCSNetCost:0},n.context.apiStartTime=t,En(n)?function(e){bn({apiName:Kr,param:e}),a(e).then((t=>{Cn(Kr,e,t)})).catch((t=>{In(Kr,e,t)}))}(n):a(n)};function i(e){Sn(e,{name:"string"}),e.data&&Sn(e.data,"object"),e.config&&e.config.env&&Sn(e.config.env,"string")}function a(e){return c.apply(this,arguments)}function c(){return(c=l()((function*(t){try{i(t);{let i;if(t.cdnMapPromise=$r(t.data),i=n()?r()(t):o()(t),Wr()){const n=Date.now();Yr(i,(()=>{var r;return{url:`wx.cloud.callFunction.${t.name}`,headers:{Env:e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env},reqBody:dr(t.data),timestampMs:n,console:e.debug}}))}return yield i}}catch(e){throw on(e,Kr)}finally{Xn(s()(s()({},t.context),{},{apiEndTime:+new Date,apiName:n()?Kr:Xr}))}function n(){return 1===t.version}}))).apply(this,arguments)}}function to(e){return{callFunction:eo(e)}}const no="functions";function ro(e){e.registerService(function(e){const t={name:no,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(no)},appConfig:{get maxReqDataSize(){return e.appConfig.call_function_max_req_data_size},get maxPollRetry(){return e.appConfig.call_function_poll_max_retry},get maxStartRetryGap(){return e.appConfig.call_function_valid_start_retry_gap},get clientPollTimeout(){return e.appConfig.call_function_client_poll_timeout}}};return{name:no,context:t,getAPIs:to.bind(null,t)}}(e))}var oo=i(882);"undefined"!=typeof Float64Array?Float64Array:Float32Array;function io(e){return"number"==typeof e}function ao(e){return e instanceof Uint8Array}function so(e,t,n){var r=t?t.byteLength:n||65536;if(4095&r||r<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return t=t||new e(new ArrayBuffer(r))}function co(e,t,n,r,o){var i=e.length-t,a=i<o?i:o;return e.set(n.subarray(r,r+a),t),a}var lo=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}}),e})(),uo=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"SecurityError"}}),e})(),po=(()=>{var e,t,n=!1;function r(n,r){var o=e[(t[n]+t[r])%255];return 0!==n&&0!==r||(o=0),o}var o,i,a,s;function c(){function c(n){var r,o,i;for(o=i=function(n){var r=e[255-t[n]];return 0===n&&(r=0),r}(n),r=0;r<4;r++)i^=o=255&(o<<1|o>>>7);return i^=99}n||function(){e=[],t=[];var r,o,i=1;for(r=0;r<255;r++)e[r]=i,o=128&i,i<<=1,i&=255,128===o&&(i^=27),i^=e[r],t[e[r]]=r;e[255]=e[0],t[0]=0,n=!0}(),o=[],i=[],a=[[],[],[],[]],s=[[],[],[],[]];for(var l=0;l<256;l++){var d=c(l);o[l]=d,i[d]=l,a[0][l]=r(2,d)<<24|d<<16|d<<8|r(3,d),s[0][d]=r(14,l)<<24|r(9,l)<<16|r(13,l)<<8|r(11,l);for(var u=1;u<4;u++)a[u][l]=a[u-1][l]>>>8|a[u-1][l]<<24,s[u][d]=s[u-1][d]>>>8|s[u-1][d]<<24}}var l=function(e,t){c();var n=new Uint32Array(t);n.set(o,512),n.set(i,768);for(var r=0;r<4;r++)n.set(a[r],4096+1024*r>>2),n.set(s[r],8192+1024*r>>2);var l=function(e,t,n){"use asm";var r=0,o=0,i=0,a=0,s=0,c=0,l=0,d=0,u=0,p=0,h=0,f=0,g=0,_=0,m=0,y=0,v=0,A=0,b=0,w=0,C=0;var I=new e.Uint32Array(n),E=new e.Uint8Array(n);function S(e,t,n,s,c,l,d,u){e=e|0;t=t|0;n=n|0;s=s|0;c=c|0;l=l|0;d=d|0;u=u|0;var p=0,h=0,f=0,g=0,_=0,m=0,y=0,v=0;p=n|0x400,h=n|0x800,f=n|0xc00;c=c^I[(e|0)>>2],l=l^I[(e|4)>>2],d=d^I[(e|8)>>2],u=u^I[(e|12)>>2];for(v=16;(v|0)<=s<<4;v=v+16|0){g=I[(n|c>>22&1020)>>2]^I[(p|l>>14&1020)>>2]^I[(h|d>>6&1020)>>2]^I[(f|u<<2&1020)>>2]^I[(e|v|0)>>2],_=I[(n|l>>22&1020)>>2]^I[(p|d>>14&1020)>>2]^I[(h|u>>6&1020)>>2]^I[(f|c<<2&1020)>>2]^I[(e|v|4)>>2],m=I[(n|d>>22&1020)>>2]^I[(p|u>>14&1020)>>2]^I[(h|c>>6&1020)>>2]^I[(f|l<<2&1020)>>2]^I[(e|v|8)>>2],y=I[(n|u>>22&1020)>>2]^I[(p|c>>14&1020)>>2]^I[(h|l>>6&1020)>>2]^I[(f|d<<2&1020)>>2]^I[(e|v|12)>>2];c=g,l=_,d=m,u=y}r=I[(t|c>>22&1020)>>2]<<24^I[(t|l>>14&1020)>>2]<<16^I[(t|d>>6&1020)>>2]<<8^I[(t|u<<2&1020)>>2]^I[(e|v|0)>>2],o=I[(t|l>>22&1020)>>2]<<24^I[(t|d>>14&1020)>>2]<<16^I[(t|u>>6&1020)>>2]<<8^I[(t|c<<2&1020)>>2]^I[(e|v|4)>>2],i=I[(t|d>>22&1020)>>2]<<24^I[(t|u>>14&1020)>>2]<<16^I[(t|c>>6&1020)>>2]<<8^I[(t|l<<2&1020)>>2]^I[(e|v|8)>>2],a=I[(t|u>>22&1020)>>2]<<24^I[(t|c>>14&1020)>>2]<<16^I[(t|l>>6&1020)>>2]<<8^I[(t|d<<2&1020)>>2]^I[(e|v|12)>>2]}function T(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;S(0x0000,0x0800,0x1000,C,e,t,n,r)}function x(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;S(0x0400,0x0c00,0x2000,C,e,r,n,t);i=o,o=a,a=i}function k(e,t,n,u){e=e|0;t=t|0;n=n|0;u=u|0;S(0x0000,0x0800,0x1000,C,s^e,c^t,l^n,d^u);s=r,c=o,l=i,d=a}function P(e,t,n,u){e=e|0;t=t|0;n=n|0;u=u|0;var p=0;S(0x0400,0x0c00,0x2000,C,e,u,n,t);p=o,o=a,a=p;r=r^s,o=o^c,i=i^l,a=a^d;s=e,c=t,l=n,d=u}function D(e,t,n,u){e=e|0;t=t|0;n=n|0;u=u|0;S(0x0000,0x0800,0x1000,C,s,c,l,d);s=r=r^e,c=o=o^t,l=i=i^n,d=a=a^u}function O(e,t,n,u){e=e|0;t=t|0;n=n|0;u=u|0;S(0x0000,0x0800,0x1000,C,s,c,l,d);r=r^e,o=o^t,i=i^n,a=a^u;s=e,c=t,l=n,d=u}function N(e,t,n,u){e=e|0;t=t|0;n=n|0;u=u|0;S(0x0000,0x0800,0x1000,C,s,c,l,d);s=r,c=o,l=i,d=a;r=r^e,o=o^t,i=i^n,a=a^u}function R(e,t,n,s){e=e|0;t=t|0;n=n|0;s=s|0;S(0x0000,0x0800,0x1000,C,u,p,h,f);f=~y&f|y&f+1;h=~m&h|m&h+((f|0)==0);p=~_&p|_&p+((h|0)==0);u=~g&u|g&u+((p|0)==0);r=r^e;o=o^t;i=i^n;a=a^s}function M(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,i=0,a=0,u=0,p=0,h=0,f=0,g=0,_=0,m=0;e=e^s,t=t^c,n=n^l,r=r^d;o=v|0,i=A|0,a=b|0,u=w|0;for(;(_|0)<128;_=_+1|0){if(o>>>31){p=p^e,h=h^t,f=f^n,g=g^r}o=o<<1|i>>>31,i=i<<1|a>>>31,a=a<<1|u>>>31,u=u<<1;m=r&1;r=r>>>1|n<<31,n=n>>>1|t<<31,t=t>>>1|e<<31,e=e>>>1;if(m)e=e^0xe1000000}s=p,c=h,l=f,d=g}function L(e){e=e|0;C=e}function B(e,t,n,s){e=e|0;t=t|0;n=n|0;s=s|0;r=e,o=t,i=n,a=s}function F(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;s=e,c=t,l=n,d=r}function W(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;u=e,p=t,h=n,f=r}function j(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;g=e,_=t,m=n,y=r}function U(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;f=~y&f|y&r,h=~m&h|m&n,p=~_&p|_&t,u=~g&u|g&e}function V(e){e=e|0;if(e&15)return-1;E[e|0]=r>>>24,E[e|1]=r>>>16&255,E[e|2]=r>>>8&255,E[e|3]=r&255,E[e|4]=o>>>24,E[e|5]=o>>>16&255,E[e|6]=o>>>8&255,E[e|7]=o&255,E[e|8]=i>>>24,E[e|9]=i>>>16&255,E[e|10]=i>>>8&255,E[e|11]=i&255,E[e|12]=a>>>24,E[e|13]=a>>>16&255,E[e|14]=a>>>8&255,E[e|15]=a&255;return 16}function G(e){e=e|0;if(e&15)return-1;E[e|0]=s>>>24,E[e|1]=s>>>16&255,E[e|2]=s>>>8&255,E[e|3]=s&255,E[e|4]=c>>>24,E[e|5]=c>>>16&255,E[e|6]=c>>>8&255,E[e|7]=c&255,E[e|8]=l>>>24,E[e|9]=l>>>16&255,E[e|10]=l>>>8&255,E[e|11]=l&255,E[e|12]=d>>>24,E[e|13]=d>>>16&255,E[e|14]=d>>>8&255,E[e|15]=d&255;return 16}function $(){T(0,0,0,0);v=r,A=o,b=i,w=a}function H(e,t,n){e=e|0;t=t|0;n=n|0;var s=0;if(t&15)return-1;while((n|0)>=16){Q[e&7](E[t|0]<<24|E[t|1]<<16|E[t|2]<<8|E[t|3],E[t|4]<<24|E[t|5]<<16|E[t|6]<<8|E[t|7],E[t|8]<<24|E[t|9]<<16|E[t|10]<<8|E[t|11],E[t|12]<<24|E[t|13]<<16|E[t|14]<<8|E[t|15]);E[t|0]=r>>>24,E[t|1]=r>>>16&255,E[t|2]=r>>>8&255,E[t|3]=r&255,E[t|4]=o>>>24,E[t|5]=o>>>16&255,E[t|6]=o>>>8&255,E[t|7]=o&255,E[t|8]=i>>>24,E[t|9]=i>>>16&255,E[t|10]=i>>>8&255,E[t|11]=i&255,E[t|12]=a>>>24,E[t|13]=a>>>16&255,E[t|14]=a>>>8&255,E[t|15]=a&255;s=s+16|0,t=t+16|0,n=n-16|0}return s|0}function Z(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;if(t&15)return-1;while((n|0)>=16){Y[e&1](E[t|0]<<24|E[t|1]<<16|E[t|2]<<8|E[t|3],E[t|4]<<24|E[t|5]<<16|E[t|6]<<8|E[t|7],E[t|8]<<24|E[t|9]<<16|E[t|10]<<8|E[t|11],E[t|12]<<24|E[t|13]<<16|E[t|14]<<8|E[t|15]);r=r+16|0,t=t+16|0,n=n-16|0}return r|0}var Q=[T,x,k,P,D,O,N,R];var Y=[k,M];return{set_rounds:L,set_state:B,set_iv:F,set_nonce:W,set_mask:j,set_counter:U,get_state:V,get_iv:G,gcm_init:$,cipher:H,mac:Z}}({Uint8Array:Uint8Array,Uint32Array:Uint32Array},e,t);return l.set_key=function(e,t,r,i,a,c,d,u,p){var h=n.subarray(0,60),f=n.subarray(256,316);h.set([t,r,i,a,c,d,u,p]);for(var g=e,_=1;g<4*e+28;g++){var m=h[g-1];(g%e==0||8===e&&g%e==4)&&(m=o[m>>>24]<<24^o[m>>>16&255]<<16^o[m>>>8&255]<<8^o[255&m]),g%e==0&&(m=m<<8^m>>>24^_<<24,_=_<<1^(128&_?27:0)),h[g]=h[g-e]^m}for(var y=0;y<g;y+=4)for(var v=0;v<4;v++){m=h[g-(4+y)+(4-v)%4];f[y+v]=y<4||y>=g-4?m:s[0][o[m>>>24]]^s[1][o[m>>>16&255]]^s[2][o[m>>>8&255]]^s[3][o[255&m]]}l.set_rounds(e+5)},l};return l.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},l.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},l.MAC={CBC:0,GCM:1},l.HEAP_DATA=16384,l})(),ho=new Uint8Array(1048576),fo=(()=>po(null,ho.buffer))();class go{constructor(e,t,n,r,o){this.nonce=null,this.counter=0,this.counterSize=0,this.heap=so(Uint8Array,r).subarray(po.HEAP_DATA),this.asm=o||po(null,this.heap.buffer),this.mode=null,this.key=null,this.AES_reset(e,t,n)}AES_set_key(e){if(void 0!==e){if(!ao(e))throw new TypeError("unexpected key type");var t=e.length;if(16!==t&&24!==t&&32!==t)throw new lo("illegal key size");var n=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_key(t>>2,n.getUint32(0),n.getUint32(4),n.getUint32(8),n.getUint32(12),t>16?n.getUint32(16):0,t>16?n.getUint32(20):0,t>24?n.getUint32(24):0,t>24?n.getUint32(28):0),this.key=e}else if(!this.key)throw new Error("key is required")}AES_CTR_set_options(e,t,n){if(void 0!==n){if(n<8||n>48)throw new lo("illegal counter size");this.counterSize=n;var r=Math.pow(2,n)-1;this.asm.set_mask(0,0,r/4294967296|0,0|r)}else this.counterSize=n=48,this.asm.set_mask(0,0,65535,4294967295);if(void 0===e)throw new Error("nonce is required");if(!ao(e))throw new TypeError("unexpected nonce type");var o=e.length;if(!o||o>16)throw new lo("illegal nonce size");this.nonce=e;var i=new DataView(new ArrayBuffer(16));if(new Uint8Array(i.buffer).set(e),this.asm.set_nonce(i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)),void 0!==t){if(!io(t))throw new TypeError("unexpected counter type");if(t<0||t>=Math.pow(2,n))throw new lo("illegal counter value");this.counter=t,this.asm.set_counter(0,0,t/4294967296|0,0|t)}else this.counter=0}AES_set_iv(e){if(void 0!==e){if(!ao(e))throw new TypeError("unexpected iv type");if(16!==e.length)throw new lo("illegal iv size");var t=new DataView(e.buffer,e.byteOffset,e.byteLength);this.iv=e,this.asm.set_iv(t.getUint32(0),t.getUint32(4),t.getUint32(8),t.getUint32(12))}else this.iv=null,this.asm.set_iv(0,0,0,0)}AES_set_padding(e){this.padding=void 0===e||!!e}AES_reset(e,t,n){return this.result=null,this.pos=0,this.len=0,this.AES_set_key(e),this.AES_set_iv(t),this.AES_set_padding(n),this}AES_Encrypt_process(e){if(!ao(e))throw new TypeError("data isn't of expected type");for(var t=this.asm,n=this.heap,r=po.ENC[this.mode],o=po.HEAP_DATA,i=this.pos,a=this.len,s=0,c=e.length||0,l=0,d=0,u=new Uint8Array(a+c&-16);c>0;)a+=d=co(n,i+a,e,s,c),s+=d,c-=d,(d=t.cipher(r,o+i,a))&&u.set(n.subarray(i,i+d),l),l+=d,d<a?(i+=d,a-=d):(i=0,a=0);return this.result=u,this.pos=i,this.len=a,this}AES_Encrypt_finish(e){var t=null,n=0;void 0!==e&&(n=(t=this.AES_Encrypt_process(e).result).length);var r=this.asm,o=this.heap,i=po.ENC[this.mode],a=po.HEAP_DATA,s=this.pos,c=this.len,l=16-c%16,d=c;if(this.hasOwnProperty("padding")){if(this.padding){for(var u=0;u<l;++u)o[s+c+u]=l;d=c+=l}else if(c%16)throw new lo("data length must be a multiple of the block size")}else c+=l;var p=new Uint8Array(n+d);return n&&p.set(t),c&&r.cipher(i,a+s,c),d&&p.set(o.subarray(s,s+d),n),this.result=p,this.pos=0,this.len=0,this}AES_Decrypt_process(e){if(!ao(e))throw new TypeError("data isn't of expected type");var t=this.asm,n=this.heap,r=po.DEC[this.mode],o=po.HEAP_DATA,i=this.pos,a=this.len,s=0,c=e.length||0,l=0,d=a+c&-16,u=0,p=0;this.padding&&(d-=u=a+c-d||16);for(var h=new Uint8Array(d);c>0;)a+=p=co(n,i+a,e,s,c),s+=p,c-=p,(p=t.cipher(r,o+i,a-(c?0:u)))&&h.set(n.subarray(i,i+p),l),l+=p,p<a?(i+=p,a-=p):(i=0,a=0);return this.result=h,this.pos=i,this.len=a,this}AES_Decrypt_finish(e){var t=null,n=0;void 0!==e&&(n=(t=this.AES_Decrypt_process(e).result).length);var r=this.asm,o=this.heap,i=po.DEC[this.mode],a=po.HEAP_DATA,s=this.pos,c=this.len,l=c;if(c>0){if(c%16){if(this.hasOwnProperty("padding"))throw new lo("data length must be a multiple of the block size");c+=16-c%16}if(r.cipher(i,a+s,c),this.hasOwnProperty("padding")&&this.padding){var d=o[s+l-1];if(d<1||d>16||d>l)throw new uo("bad padding");for(var u=0,p=d;p>1;p--)u|=d^o[s+l-p];if(u)throw new uo("bad padding");l-=d}}var h=new Uint8Array(n+l);return n>0&&h.set(t),l>0&&h.set(o.subarray(s,s+l),n),this.result=h,this.pos=0,this.len=0,this}}var _o=(()=>{class e extends go{constructor(e,t=null,n=!0,r,o){super(e,t,n,r,o),this.mode="CBC",this.BLOCK_SIZE=16}encrypt(e){return this.AES_Encrypt_finish(e)}decrypt(e){return this.AES_Decrypt_finish(e)}}return e.encrypt=mo,e.decrypt=yo,e})();function mo(e,t,n,r){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new _o(t,r,n,ho,fo).encrypt(e).result}function yo(e,t,n,r){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new _o(t,r,n,ho,fo).decrypt(e).result}"undefined"!=typeof console&&console;var vo=Date.now,Ao=(Math.random,"undefined"!=typeof performance?performance:void 0),bo="undefined"!=typeof crypto?crypto:"undefined"!=typeof msCrypto?msCrypto:void 0;void 0!==bo&&bo.getRandomValues;if(void 0!==Ao)(function(){return 1e3*Ao.now()|0});else{var wo=1e3*vo()|0;(function(){return 1e3*vo()-wo|0})}Uint32Array,Math;var Co="undefined"!=typeof console?console:void 0;"undefined"==typeof location||!location.protocol.search(/https:|file:|chrome:|chrome-extension:|moz-extension:/)||void 0===Co||Co.warn("asmCrypto seems to be load from an insecure origin; this may cause to MitM-attack vulnerability. Consider using secure transport protocol.");new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);const Io="cloud.callContainer";function Eo(e){return function(){var n=l()((function*(n){let r=e.serviceEndpoint.getEndpointSync("container"),o=new WeakMap;if(n.cdnMapPromise||!r){const t=yield Promise.all([n.cdnMapPromise,So(e.serviceEndpoint.getEndpoint("container"),n.stats,"getServiceEndpoint")]);t[0]&&(o=t[0]),r=t[1]}else n.stats.getServiceEndpoint=0;return n.shouldSerialize&&(n.data=dr(n.data,o)),r.http?function(t,n){return new Promise(((r,o)=>{var a;n.stats.tsCallContainerImplStart=Date.now();const c=Rn(e.identifiers),l={"X-WX-ENCRYPTION-VERSION":2,"X-WX-ENCRYPTION-TIMESTAMP":t.timestamp+"","X-WX-COMPRESSION":"snappy","X-WX-USER-TIMEOUT":n.timeout||"","X-WX-LIB-BUILD-TS":1626833913113,"X-WX-RESPONSE-CONTENT-ACCEPT-ENCODING":"PB, JSON","Content-Type":"application/octet-stream"},d=`${Math.random()}_${Date.now()}`,u=s()(s()({},n.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(a=n.config)||void 0===a?void 0:a.env)||e.env,"X-WX-SERVICE":n.service,"X-WX-CONTAINER-PATH":n.path,"X-WX-CALL-ID":d});e.appid&&(u["X-WX-RESOURCE-APPID"]=e.appid);const p=n.stats;p.callid=d;let h=Date.now();const f=[];for(const e in u)void 0!==u[e]&&null!==u[e]&&f.push({key:e.toLowerCase(),value:u[e]+""});let g,_,m=!1;if(n.data){const e=Zt(n.data);"object"===e?g=JSON.stringify(n.data):"arraybuffer"!==e?g=n.data+"":(g=n.data,m=!0)}else g=void 0;h=Date.now(),m?(_=oo.HTTPRequest.encode({method:n.method||"GET",header:f,body:new Uint8Array(g),callId:d}).finish(),p.encodePb=Date.now()-h,l["X-WX-REQUEST-CONTENT-ENCODING"]="PB"):(_=new Uint8Array(Mr(JSON.stringify({method:n.method||"GET",header:f,body:g,call_id:d}))),p.stringToBuffer=Date.now()-h,l["X-WX-REQUEST-CONTENT-ENCODING"]="JSON"),h=Date.now();const y=i(96),v=y.compress(_);p.compress=Date.now()-h,h=Date.now(),p.loadAsmcrypto=Date.now()-h,h=Date.now();const A=new Uint8Array(c.wx.base64ToArrayBuffer(t.key)),b=_o.encrypt(v,A,void 0,A);p.encrypt=Date.now()-h,h=Date.now();let w=!0;!t.localDNSTrusted&&t.vip&&(w=!1,l.host="servicewechat.com",p.ip=t.vip);let C=w?t.url:`http://${t.vip}/wxa-qbase/container_service?token=${t.token}`;n.rdm?C=`https://wxardm.weixin.qq.com/wxa-qbase/container_service?token=${t.token}`:n.ecdn&&(C=`https://cloudbase.servicewechat.com/wxa-qbase/container_service?token=${t.token}`),n.verbose&&console.log(`[cloud.callContainer] url ${C}`),w&&t.domain&&(n.stats.domain=t.domain),p.requestBodyBytes=b.byteLength,p.requestStartTs=Date.now(),c._requestSkipCheckDomain({url:C,method:"POST",header:l,data:b.buffer,dataType:"arraybuffer",responseType:"arraybuffer",timeout:n.timeout,enableHttp2:w,success:e=>{try{for(const t in e.header)if("x-nws-log-uuid"===t.toLowerCase()&&(n.verbose&&console.log(`[cloud.callContainer] x-nws-log-uuid ${e.header[t]}`),n.stats.ecdnId=e.header[t]),"x-edge-timing"===t.toLowerCase()&&(n.stats.ecdnEdgeTiming=e.header[t]),"x-wx-system-error"===t.toLowerCase()){const n=Number(e.header[t]);return void o({errCode:n,errMsg:`${Io}:fail system error. code: ${n}`})}if(p.profile=e.profile,p.httpRequest=Date.now()-h,200===e.statusCode){let t=e.data;p.responseBodyBytes=t.byteLength,h=Date.now();let i=_o.decrypt(new Uint8Array(t),A,void 0,A);p.decrypt=Date.now()-h;let a,s,c="pb";for(const t in e.header)if("x-wx-compression"===t.toLowerCase()&&"snappy"===e.header[t]&&(h=Date.now(),i=y.uncompress(i),p.uncompress=Date.now()-h),"x-wx-response-content-encoding"===t.toLowerCase()&&"json"===e.header[t].toLowerCase()&&(c="json"),"x-wx-server-timing"===t.toLowerCase()){const n=(e.header[t]||"").split(",");n.length>=2&&(p.serverStartTs=Number(n[0]),p.serverEndTs=Number(n[1]))}if(h=Date.now(),"json"===c){const e=JSON.parse(Rr(i));a={statusCode:e.status_code,header:e.header,bodyBuffer:e.body_buffer,bodyString:e.body_string},p.decodeJson=Date.now()-h}else a=oo.HTTPResponse.decode(i),p.decodePb=Date.now()-h;if(h=Date.now(),"json"===n.dataType){const e=a.bodyString||(a.bodyBuffer?Rr(a.bodyBuffer):"{}");try{s=JSON.parse(e)}catch(t){return void o({errCode:-1,errMsg:`${Io}:fail parse response body as JSON failed: ${t}. input: ${e}`})}}else s="text"===n.responseType?a.bodyString||(a.bodyBuffer?Rr(a.bodyBuffer):""):"arraybuffer"===n.responseType&&a.bodyString?Mr(a.bodyString):a.bodyString||a.bodyBuffer;p.decodeBody=Date.now()-h,r({statusCode:a.statusCode,header:a.header.reduce(((e,t)=>(e[t.key+""]=t.value+"",e)),{}),data:s,stats:p,callID:d,errMsg:`${Io}:ok`})}else{let t=-1;for(const n in e.header)"x-wx-system-error"===n.toLowerCase()&&(t=Number(e.header[n]));o({errCode:t,errMsg:`${Io}:fail system error, status ${e.statusCode}. code: ${t}`})}}catch(e){o({errCode:-1,errMsg:`${Io}:fail error while processing internal response ${e}`})}},fail:e=>{o(s()(s()({},e),{},{errMsg:e.errMsg.replace(/^request/,Io)}))}})}))}(r,n):function(e,n){return t.apply(this,arguments)}(r.url,n)}));return function(e){return n.apply(this,arguments)}}();function t(){return(t=l()((function*(t,n){return new Promise(((r,o)=>{var i;const a=Rn(e.identifiers),c=s()(s()({},n.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(i=n.config)||void 0===i?void 0:i.env)||e.env,"X-WX-SERVICE":n.service,"X-WX-CONTAINER-PATH":n.path,"X-WX-CALL-ID":`${Math.random()}_${Date.now()}`,"X-WX-USER-TIMEOUT":n.timeout});e.appid&&(c["X-WX-RESOURCE-APPID"]=e.appid),a._requestSkipCheckDomain({url:t,method:n.method,header:c,data:n.data,dataType:n.dataType,responseType:n.responseType,timeout:n.timeout,success:e=>{r(s()(s()({},e),{},{errMsg:`${Io}:ok`}))},fail:e=>{o(s()(s()({},e),{},{errMsg:e.errMsg.replace(/^request/,Io)}))}})}))}))).apply(this,arguments)}}function So(e,t,n){const r=Date.now();return e.then((()=>t[n]=Date.now()-r)).catch((()=>t[n]=Date.now()-r)),e}let To,xo,ko,Po;!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(To||(To={})),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Timeout=2]="Timeout"}(xo||(xo={})),function(e){e[e.RAW=0]="RAW",e[e.BASE64=1]="BASE64",e[e.CDN_URL=2]="CDN_URL"}(ko||(ko={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(Po||(Po={}));const Do=e=>{const t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},Oo=e=>e.join("->"),No=2e4,Ro=1e5,Mo="cloud.callContainer";const Lo="cloud.callContainer";function Bo(e){let t,n;function r(){return t||(t=Eo(e)),t}function o(){return n||(n=function(e){return function(){var t=l()((function*(t){var n,r;if(t.shouldSerialize){const e=yield t.cdnMapPromise;t.data=dr(t.data,e)}let o=ko.RAW;const i=(null===(n=t.method)||void 0===n?void 0:n.toUpperCase())||"GET";if(t.data&&/^(POST|PUT|PATCH)$/.test(i)){const e=Zt(t.data);if("object"===e)if(t.isReqHeaderContentTypeJSON)t.data=JSON.stringify(t.data);else if(t.isReqHeaderContentTypeURLEncoded){let e="";for(const n in t.data)e+=`${e.length?"&":""}${encodeURIComponent(n)}=${encodeURIComponent(t.data[n])}`;t.data=e}else t.data=JSON.stringify(t.data);else{if("arraybuffer"!==e&&"string"!==e)throw new Error(`input data type is not supported: ${e}`);{let n=!1;if("string"===e)n=t.data.length>Ro;else if(t.data.byteLength>Ro)n=!0;else{const e=Or(t.data);e.length>Ro?n=!0:(t.data=e,o=ko.BASE64)}if(n)throw new Error("input data size too large (> 100KB)")}}}else if("GET"===i&&t.data&&Qt(t.data)){for(const e in t.data){const n=`&${e}=${t.data[e]}`;t.path+=`${t.path.includes("?")?"&":"?"}${n}`}t.data=void 0}else t.data=void 0;const a=`${+new Date}-${Math.random()}`;t.header=s()(s()({},t.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env,"X-WX-CONTAINER-PATH":t.path}),t.service&&(t.header["X-WX-SERVICE"]=t.service);for(const e in t.header)null!==t.header[e]&&void 0!==t.header[e]&&(t.header[e]+="");t.context.tunnelStartTime=+new Date;const{result:c}=yield function(e,t,n,r){return d.apply(this,arguments)}(t,t.data,o,a);return t.context.tunnelEndTime=+new Date,s()(s()({},c),{},{errMsg:lr(Mo),callID:a});function d(){return(d=l()((function*(t,n,r,o){let i,a=!1;t.hasOwnProperty("timeout")&&(i=new Promise(((e,n)=>{setTimeout((()=>{a=!0,n(`timeout (options.timeout == ${t.timeout})`)}),t.timeout)})));const s=new Promise(((s,c)=>{const l=[Do("start")],{resolve:d,reject:p}=h(l,s,c);u({param:t,data:n,dataType:r,callID:o,action:To.CALL,retryType:xo.None,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,userTimeout:{get reached(){return!!i&&a}},trace:l,resolve:d,reject:p})}));return i?Promise.race([s,i]):s}))).apply(this,arguments)}function u(e){return p.apply(this,arguments)}function p(){return(p=l()((function*(n){const{data:r,dataType:o,callID:i,action:a,retryType:c,tryCount:d,trace:p,systemErrorRetry:h,timeoutErrorRetry:f,userTimeout:g,resolve:_,reject:m}=n,y=[];for(const e in t.header)y.push({k:e,v:t.header[e]});const v=dr(a===To.CALL?{method:t.method||"GET",headers:y,data:a===To.CALL?r:void 0,data_type:o,action:a,retryType:c,call_id:i,user_timeout:t.timeout}:{call_id:i,action:a,retryType:c});let A=!1,b=!1;const w=()=>{clearTimeout(I),b=!0},C=+new Date,I=setTimeout(l()((function*(){const t=e.appConfig.clientPollTimeout||No;if(!(+new Date-C>t&&(yield yr(),b)||g.reached)){if(!Wr()&&+new Date-C>e.appConfig.maxStartRetryGap)return p.push(Do("timeout, exceed max retry gap")),m(an({errCode:tn.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${i}) (trace: ${Oo(p)})`},Mo));A=!0,n.timeoutErrorRetry>0?(p.push(Do("timeout, retry")),u(s()(s()({},n),{},{retryType:xo.Timeout,tryCount:d-1,timeoutErrorRetry:f-1}))):(p.push(Do("timeout, abort")),m(an({errCode:tn.SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${i}) (trace: ${Oo(p)})`},Mo)))}})),e.appConfig.clientPollTimeout||No),E=e=>{const n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time)};function S(){return(S=l()((function*(r){try{if(A||g.reached)return;w(),E(r);const o=r.data;if(!o)return p.push(Do("empty resp")),m(an({errCode:tn.SDK_CONTAINER_EMPTY_CALL_RESULT},Mo));if(!o.baseresponse||0!==o.baseresponse.errcode)return o.baseresponse?0!==o.baseresponse.errcode?m(an({errCode:tn.SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${o.baseresponse.errcode} errmsg ${o.baseresponse.errmsg} (callId: ${i})`},Mo)):m(an({errCode:tn.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(o.baseresponse)} (callId: ${i})`},Mo)):m(an({errCode:tn.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP},Mo));if(0!==o.status){if(1===o.status){let n;if(o.data_type===ko.BASE64)n=Nr(o.data),"json"===t.dataType?n=Pr(Rr(n)):"arraybuffer"!==t.responseType&&(n=Rr(n));else if(o.data_type===ko.CDN_URL)try{const r=Rn(e.identifiers);n=(yield new Promise(((e,n)=>{r._requestSkipCheckDomain({url:o.data,dataType:t.dataType,responseType:t.responseType,success:t=>{200!==t.statusCode?n(`download response status code ${t.statusCode}`):e(t)},fail:e=>{n(e)}})}))).data}catch(e){return m(an({errCode:tn.SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL,errMsg:`error: ${e} \n (callId: ${i}) (trace: ${Oo(p)})`},Mo))}else n=o.data,"arraybuffer"===t.responseType?n=Mr(n):"json"===t.dataType&&(n=Pr(n));return _({result:{data:n,statusCode:o.http_code,header:o.headers.reduce(((e,t)=>(e[t.k]=t.v,e)),{})}})}return p.push(Do("poll result expired")),m(an({errCode:tn.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${i}) (trace: ${Oo(p)})`},Mo))}if(!(d>=0))return p.push(Do("too many polls, abort")),m(an({errCode:tn.SDK_CONTAINER_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${i}) (trace: ${Oo(p)})`},Mo));p.push(Do("normal poll")),u(s()(s()({},n),{},{action:To.POLL,retryType:xo.None,tryCount:d-1}))}catch(e){m(an({errCode:tn.SDK_CONTAINER_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${i})`},Mo))}}))).apply(this,arguments)}g.reached||e.request(s()(s()({},t.config),{},{apiName:"tcbapi_call_container",serviceName:e.name,serializedReqData:v,env:t.config&&t.config.env||e.env})).then((function(e){return S.apply(this,arguments)})).catch((e=>{A||g.reached||(w(),e&&e.operateWXDataFail&&h>0?(p.push(Do(`system error (${e}), retry`)),u(s()(s()({},n),{},{retryType:xo.Error,tryCount:d-1,systemErrorRetry:h-1}))):(p.push(Do(`system error (${e}), abort`)),m(an(`${e} (callId: ${i}) (trace: ${Oo(p)})`,Mo))))}))}))).apply(this,arguments)}function h(e,t,n){const r=t=>{e.push(Do(`app ${t}`))};return Sr(r),{resolve:e=>{Tr(r),t(e)},reject:e=>{Tr(r),n(e)}}}}));return function(e){return t.apply(this,arguments)}}()}(e)),n}return function(e){const t=+new Date;Sn(e,"object");const n=Pn(e);return n.data||(n.data={}),n.dataType||(n.dataType="json"),n.context={tunnelTimeNoCSNetCost:0},n.context.apiStartTime=t,n.stats={apiStartTime:t},En(n)?function(e){bn({apiName:Lo,param:e}),a(e).then((t=>{Cn(Lo,e,t)})).catch((t=>{In(Lo,e,t)}))}(n):a(n)};function i(t){var n;if(t.path||(t.path="/"),t.service,e.isInstance){if(!e.env)throw new Error("envId must be provided")}else if(null!==(n=t.config)&&void 0!==n&&n.env)Sn(t.config.env,"string");else if(!e.env)throw new Error("envId must be provided")}function a(e){return c.apply(this,arguments)}function c(){return(c=l()((function*(t){let n=!1;try{i(t),t.header||(t.header={}),t.dataType||(t.dataType="json"),t.responseType||(t.responseType="text");let a=!1;for(const e in t.header)"content-type"===e.toLowerCase()&&(a=!0,t.header[e].includes("application/json")&&(t.isReqHeaderContentTypeJSON=!0),"application/x-www-form-urlencoded"===t.header[e]&&(t.isReqHeaderContentTypeURLEncoded=!0));if(a||(t.header["content-type"]="application/json",t.isReqHeaderContentTypeJSON=!0),/post|put|patch/i.test(t.method||"")&&t.data&&t.isReqHeaderContentTypeJSON){const e=Zt(t.data);t.shouldSerialize="string"!==e}t.cdnMapPromise=t.shouldSerialize?$r(t.data):void 0;const s=Date.now();let c,l;n=d(t),t.stats.tsBeforeCallContainerImpl=Date.now(),c=n?r()(t):o()(t);const p=t.service||t.header["X-WX-SERVICE"];l=p?`wx.cloud.callContainer.${t.service}${t.path}`:`wx.cloud.callContainer${t.path}`,Yr(c,(()=>{var n;return{url:l,headers:{Env:e.isInstance?e.env:(null===(n=t.config)||void 0===n?void 0:n.env)||e.env},reqBody:dr(t.data),timestampMs:s,console:e.debug}}));const h=yield c;return u(t,n),h}catch(e){throw on(e,Lo)}}))).apply(this,arguments)}function d(e){return 1===e.apiVersion}function u(e,t){e.stats.apiEndTime=Date.now(),Xn(s()(s()({},e.context),{},{apiEndTime:e.stats.apiEndTime,apiName:Lo}));const n=Boolean(e.stats.profile),r=e.stats.profile||{},o=e.stats.serverEndTs-e.stats.serverStartTs,i=e.stats.httpRequest<=6e4?e.stats.httpRequest:6e4,a=e.stats.apiEndTime;let c=a-e.context.apiStartTime;c>9e4&&(c=9e4);let l=e.path||"";l=l.split("?")[0].replace(/\/\d+\//g,"/*/").replace(/\/\d+$/g,"/*"),rr(22601,9,[e.stats.callid,e.context.apiStartTime,a,e.stats.serverStartTs,e.stats.serverEndTs,e.stats.requestBodyBytes,e.stats.responseBodyBytes,e.stats.getServiceEndpoint,e.stats.queryDNS,e.stats.compress,e.stats.loadAsmcrypto,e.stats.encrypt,i,e.stats.decrypt,e.stats.uncompress,e.stats.decodePb,e.stats.decodeBody,e.stats.ip,r.redirectStart,n?r.redirectEnd-r.redirectStart:void 0,r.fetchStart,r.domainLookupStart,n?r.domainLookupEnd-r.domainLookupStart:void 0,r.connectStart,n?r.connectEnd-r.connectStart:void 0,r.SSLconnectionStart,n?r.SSLconnectionEnd-r.SSLconnectionStart:void 0,r.requestStart,n?r.requestEnd-r.requestStart:void 0,r.responseStart,n?r.responseEnd-r.responseStart:void 0,r.rtt,r.estimate_nettype,r.httpRttEstimate,r.transportRttEstimate,r.downstreamThroughputKbpsEstimate,r.throughputKbps,r.peerIP,r.port,n?r.socketReused?1:0:void 0,r.sendBytesCount,r.receivedBytedCount,t?r.protocol:"im",kr().system,c,o>0?o:0,i?c-i:void 0,l,kr().platform,e.stats.requestStartTs,1626833913113,e.stats.ecdnId,e.stats.ecdnEdgeTiming,e.stats.domain,e.stats.stringToBuffer,e.stats.encodePb,e.stats.tsBeforeCallContainerImpl,e.stats.tsCallContainerImplStart,e.stats.decodeJson].join(","))}}function Fo(e){return{callContainer:Bo(e)}}const Wo="container";function jo(e){e.registerService(function(e){const t={name:Wo,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,get debug(){return e.debug},get appid(){return e.isInstance?e.instanceOptions.resourceAppid:void 0},get env(){return e.getEnvForService(Wo)},appConfig:{get maxPollRetry(){return e.appConfig.call_container_poll_max_retry},get clientPollTimeout(){return e.appConfig.call_container_client_poll_timeout},get maxStartRetryGap(){return e.appConfig.call_container_valid_start_retry_gap}}};return{name:Wo,context:t,getAPIs:Fo.bind(null,t)}}(e))}const Uo={},Vo={env:"",platform:""},Go=()=>Vo;if(void 0!==__wxConfig)Vo.env="miniprogram",Vo.platform=__wxConfig.platform;else if(Vo.env="web",window.__wxjs_environment&&"miniprogram"===window.__wxjs_environment)Vo.platform="miniprogram";else{const e=window.navigator.userAgent.toLowerCase();/MicroMessenger/i.test(e)&&(Vo.platform="wxweb")}const $o="cloud.uploadFile";function Ho(e){return function(e){if(En(e=Pn(e)))return function(e){const n={aborted:!1},r=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(n),o={apiStartTime:+new Date};return t(s()(s()({},e),{},{context:n,timing:o,uploadTaskAgent:r})).then((t=>{Cn($o,e,t)})).catch((t=>{In($o,e,t)})),r}(e);{const n={apiStartTime:+new Date};return t(s()(s()({},e),{},{timing:n}))}};function t(e){return new Promise(function(){var t=l()((function*(t,n){try{if(function(e){Sn(e,{cloudPath:"string"}),"miniprogram"===Go().env?Sn(e,{filePath:"string"}):Tn(e,"file","uploadFile")}(e),e.filePath&&function(e){o.apply(this,arguments)}(e.filePath),e.context&&(e.context.abort=function(){n(on({errMsg:"abort"},$o))},e.context.aborted))return n(on({errMsg:"abort"},$o));t(yield function(e){return r.apply(this,arguments)}(e))}catch(e){n(on(e,$o))}finally{Xn(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:"cloud.uploadFile_v2"}))}}));return function(e,n){return t.apply(this,arguments)}}())}function r(){return(r=l()((function*(t){const n=Rn(e.identifiers),r=yield i(t);return new Promise(((e,o)=>{if(t.context&&t.context.aborted)return o(on({errMsg:"abort"},$o));let i,a;if("web"===Go().env){const e=new FormData;e.append("key",t.cloudPath),e.append("signature",r.authorization),e.append("x-cos-security-token",r.token),e.append("x-cos-meta-fileid",r.cos_file_id),e.append("file",t.file),i={url:r.url,timeout:t.timeout,filePath:"",header:t.header,name:"",formData:e}}else i={url:r.url,timeout:t.timeout,filePath:t.filePath,header:t.header,name:"file",formData:{key:t.cloudPath,signature:r.authorization,"x-cos-security-token":r.token,"x-cos-meta-fileid":r.cos_file_id}};a=n._uploadFileSkipCheckDomain(s()(s()({},i),{},{success:t=>{try{if(t.statusCode>=200&&t.statusCode<300)e({errMsg:lr($o),fileID:r.file_id,statusCode:t.statusCode});else{const e=new nn({errMsg:`status ${t.statusCode}, error: ${t.data};`});o(e)}}catch(e){const n=new nn({errMsg:`Error : ${t.data};`});o(n)}},fail:e=>{o(e)}})),a&&(a.onProgressUpdate((function(){t.uploadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&qt(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(n._uploadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=a.abort.bind(a)))}))}))).apply(this,arguments)}function o(){return(o=l()((function*(t){return new Promise(((r,o)=>{n.getFileInfo?n.getFileInfo({filePath:t,success:t=>{t.size>e.appConfig.uploadMaxFileSize?o(new nn({errCode:tn.SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE,errMsg:`exceed max upload file size: ${e.appConfig.uploadMaxFileSize/1024/1024} MB`})):r()},fail:()=>{r()}}):r()}))}))).apply(this,arguments)}function i(e){return a.apply(this,arguments)}function a(){return(a=l()((function*(t){const n=JSON.stringify({path:t.cloudPath}),r=+new Date,o=(yield e.request({apiName:"tcbapi_cos_uploadfile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=r,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=o.baseresponse.stat.qbase_cost_time),!o.url)throw new nn({errCode:tn.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL,errMsg:tn[tn.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL]});return o}))).apply(this,arguments)}}const Zo="cloud.downloadFile";function Qo(e){return function(e){if(En(e=Pn(e)))return function(e){const n={aborted:!1},r=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(n),o={apiStartTime:+new Date};return t(s()(s()({},e),{},{context:n,timing:o,downloadTaskAgent:r})).then((t=>{Cn(Zo,e,t)})).catch((t=>{In(Zo,e,t)})),r}(e);{const n={apiStartTime:+new Date};return t(s()(s()({},e),{},{timing:n}))}};function t(e){return n.apply(this,arguments)}function n(){return(n=l()((function*(e){return new Promise(function(){var t=l()((function*(t,n){try{if(r(e),e.context&&(e.context.abort=function(){n(on({errMsg:"abort"},Zo))},e.context.aborted))return n(on({errMsg:"abort"},Zo));t(yield o(e))}catch(e){n(on(e,Zo))}finally{Xn(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:Zo}))}}));return function(e,n){return t.apply(this,arguments)}}())}))).apply(this,arguments)}function r(e){Sn(e,{fileID:"string"}),e.config&&e.config.env&&Sn(e.config.env,"string")}function o(e){return i.apply(this,arguments)}function i(){return(i=l()((function*(t){const n=Rn(e.identifiers),r=yield a(t);return new Promise(((e,o)=>{if(t.context&&t.context.aborted)return o(on({errMsg:"abort"},Zo));const i=n._downloadFileSkipCheckDomain({url:r,success:t=>{e(t)},fail:e=>{o(e)}});i&&(i.onProgressUpdate((function(){t.downloadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&qt(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(n._downloadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=i.abort.bind(i)))}))}))).apply(this,arguments)}function a(e){return c.apply(this,arguments)}function c(){return(c=l()((function*(t){const n=JSON.stringify({fileid:t.fileID}),r=+new Date,o=(yield e.request({apiName:"tcbapi_downloadfile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=r,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=o.baseresponse.stat.qbase_cost_time),!o.download_url)throw new nn({errCode:tn.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL,errMsg:tn[tn.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL]});return o.download_url.indexOf("?")>-1?o.download_url+="&skip_domain_check=true":o.download_url+="?skip_domain_check=true",o.download_url}))).apply(this,arguments)}}const Yo="cloud.getTempFileURL";function zo(e){return function(e){const t=Pn(e);if(t.timing={apiStartTime:+new Date},En(t))return function(e){n(e).then((t=>{Cn(Yo,e,t)})).catch((t=>{In(Yo,e,t)}))}(t);return n(t)};function t(t){if(Sn(t,{fileList:"array"}),t.config&&t.config.env&&Sn(t.config.env,"string"),e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new nn({errCode:tn.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function n(e){return r.apply(this,arguments)}function r(){return(r=l()((function*(e){try{if(t(e),!e.fileList.length)return{errMsg:lr(Yo),fileList:[]};return yield o(e)}catch(e){throw on(e,Yo)}finally{Xn(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:Yo}))}}))).apply(this,arguments)}function o(e){return i.apply(this,arguments)}function i(){return(i=l()((function*(t){const n={file_list:t.fileList.map((e=>Yt(e)?{fileid:e}:{fileid:e.fileID,max_age:e.maxAge}))},r=JSON.stringify(n);t.timing.tunnelStartTime=+new Date;const o=yield e.request({apiName:"tcbapi_gettempfileurl",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;const i=o.data;return t.timing.tunnelTimeNoCSNetCost=i.baseresponse.stat.qbase_cost_time,{errMsg:lr(Yo),fileList:i.download_list.map((e=>({fileID:e.fileid,tempFileURL:e.download_url,maxAge:e.max_age,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}const qo="cloud.deleteFile";function Jo(e){return function(e){const t=Pn(e);if(t.timing={apiStartTime:+new Date},En(t))return function(e){n(e).then((t=>{Cn(qo,e,t)})).catch((t=>{In(qo,e,t)}))}(t);return n(t)};function t(t){Sn(t,{fileList:"array"}),t.config&&t.config.env&&Sn(t.config.env,"string");for(let e=0,n=t.fileList.length;e<n;e++)Sn(t.fileList[e],"string",`parameter.fileList[${e}]`);if(e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new nn({errCode:tn.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function n(e){return r.apply(this,arguments)}function r(){return(r=l()((function*(e){try{if(t(e),!e.fileList.length)return{errMsg:lr(qo),fileList:[]};return yield o(e)}catch(e){throw on(e,qo)}finally{Xn(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:qo}))}}))).apply(this,arguments)}function o(e){return i.apply(this,arguments)}function i(){return(i=l()((function*(t){const n={fileid_list:t.fileList},r=JSON.stringify(n);t.timing.tunnelStartTime=+new Date;const o=yield e.request({apiName:"tcbapi_deletefile",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;const i=o.data;return t.timing.tunnelTimeNoCSNetCost=i.baseresponse.stat.qbase_cost_time,{errMsg:lr(qo),fileList:i.delete_list.map((e=>({fileID:e.fileid,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}function Ko(e){return{uploadFile:Ho(e),downloadFile:Qo(e),getTempFileURL:zo(e),deleteFile:Jo(e)}}const Xo="storage";function ei(e){e.registerService(function(e){const t={name:Xo,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get env(){return e.getEnvForService(Xo)},get debug(){return e.debug},appConfig:{get uploadMaxFileSize(){return e.appConfig.upload_max_file_size},get getTempFileURLMaxReq(){return e.appConfig.get_temp_file_url_max_requests}}};return{name:Xo,context:t,getAPIs:Ko.bind(null,t)}}(e))}const ti=Symbol.for("UNSET_FIELD_NAME"),ni=Symbol.for("AGGREGATE"),ri=Symbol.for("AGGREGATE_PIPELINE"),oi=Symbol.for("AGGREGATE_PIPELINE_STAGE"),ii=Symbol.for("UPDATE_COMMAND"),ai=Symbol.for("QUERY_COMMAND"),si=Symbol.for("LOGIC_COMMAND"),ci=Symbol.for("AGGREGATE_COMMAND"),li=Symbol.for("PROJECT_COMMAND"),di=Symbol.for("GEO_POINT"),ui=Symbol.for("GEO_LINESTRING"),pi=Symbol.for("GEO_POLYGON"),hi=Symbol.for("GEO_MULTIPOINT"),fi=Symbol.for("GEO_MULTILINESTRING"),gi=Symbol.for("GEO_MULTIPOLYGON"),_i=Symbol.for("SERVER_DATE"),mi=Symbol.for("REGEXP");let yi;!function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"}(yi||(yi={}));const vi=[yi.AND,yi.OR,yi.NOT,yi.NOR],Ai=new Set(vi);class bi{constructor(e,t,n){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=si,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||ti}_setFieldName(e){const t=this.operands.map((t=>t===yi.AND||t===yi.OR?t._setFieldName(e):t));return new bi(this.operator,t,e)}and(...e){Tn(arguments[0],"expressions","and");const t=Jt(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new bi(yi.AND,t,this.fieldName)}or(...e){Tn(arguments[0],"expressions","or");const t=Jt(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new bi(yi.OR,t,this.fieldName)}nor(...e){Tn(arguments[0],"expressions","nor");const t=Jt(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new bi(yi.NOR,t,this.fieldName)}not(e){return Tn(e,"expression","not"),new bi(yi.NOT,[e],this.fieldName)}toJSON(){}}function wi(e){return e&&e instanceof bi&&e._internalType===si}let Ci;!function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects",e.EXISTS="exists",e.MOD="mod",e.ALL="all",e.ELEM_MATCH="elemMatch",e.SIZE="size",e.EXPR="expr"}(Ci||(Ci={}));const Ii=[Ci.EQ,Ci.NEQ,Ci.GT,Ci.GTE,Ci.LT,Ci.LTE,Ci.IN,Ci.NIN,Ci.GEO_NEAR,Ci.GEO_WITHIN,Ci.GEO_INTERSECTS,Ci.EXISTS,Ci.MOD,Ci.ALL,Ci.ELEM_MATCH,Ci.SIZE],Ei=new Set(Ii);new Set([...Ei,...Ai]);class Si extends bi{constructor(e,t,n){super(e,t,n),this.operator=void 0,this.__safe_props__=void 0,this.operator=e,this._internalType=ai}_setFieldName(e){return new Si(this.operator,this.operands,e)}eq(e){const t=new Si(Ci.EQ,[e],this.fieldName);return this.and(t)}neq(e){const t=new Si(Ci.NEQ,[e],this.fieldName);return this.and(t)}gt(e){const t=new Si(Ci.GT,[e],this.fieldName);return this.and(t)}gte(e){const t=new Si(Ci.GTE,[e],this.fieldName);return this.and(t)}lt(e){const t=new Si(Ci.LT,[e],this.fieldName);return this.and(t)}lte(e){const t=new Si(Ci.LTE,[e],this.fieldName);return this.and(t)}in(e){Sn(e,"array");const t=new Si(Ci.IN,e,this.fieldName);return this.and(t)}nin(e){Sn(e,"array");const t=new Si(Ci.NIN,e,this.fieldName);return this.and(t)}geoNear(e){const t=new Si(Ci.GEO_NEAR,[e],this.fieldName);return this.and(t)}geoWithin(e){const t=new Si(Ci.GEO_WITHIN,[e],this.fieldName);return this.and(t)}geoIntersects(e){const t=new Si(Ci.GEO_INTERSECTS,[e],this.fieldName);return this.and(t)}exists(e){const t=new Si(Ci.EXISTS,[e],this.fieldName);return this.and(t)}mod(e,t){const n=new Si(Ci.MOD,[e,t],this.fieldName);return this.and(n)}all(e){const t=new Si(Ci.ALL,e,this.fieldName);return this.and(t)}elemMatch(e){const t=new Si(Ci.ELEM_MATCH,[e],this.fieldName);return this.and(t)}size(e){const t=new Si(Ci.SIZE,[e],this.fieldName);return this.and(t)}}function Ti(e){return e&&e instanceof Si&&e._internalType===ai}let xi;!function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.MIN="min",e.MAX="max",e.RENAME="rename",e.BIT="bit",e.PUSH="push",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.PULL="pull",e.PULL_ALL="pullAll"}(xi||(xi={}));new Set([xi.SET,xi.REMOVE,xi.INC,xi.MUL,xi.MIN,xi.MAX,xi.RENAME,xi.BIT,xi.PUSH,xi.POP,xi.SHIFT,xi.UNSHIFT,xi.ADD_TO_SET,xi.PULL,xi.PULL_ALL]);class ki{constructor(e,t,n){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=ii,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||ti}_setFieldName(e){return new ki(this.operator,this.operands,e)}toJSON(){}}function Pi(e){return e&&e instanceof ki&&e._internalType===ii}let Di;!function(e){e.ABS="abs",e.ADD="add",e.ADDTOSET="addToSet",e.ALLELEMENTSTRUE="allElementsTrue",e.AND="and",e.ANYELEMENTTRUE="anyElementTrue",e.ARRAYELEMAT="arrayElemAt",e.ARRAYTOOBJECT="arrayToObject",e.AVG="avg",e.CEIL="ceil",e.CMP="cmp",e.CONCAT="concat",e.CONCATARRAYS="concatArrays",e.COND="cond",e.CONVERT="convert",e.DATEFROMPARTS="dateFromParts",e.DATETOPARTS="dateToParts",e.DATEFROMSTRING="dateFromString",e.DATETOSTRING="dateToString",e.DAYOFMONTH="dayOfMonth",e.DAYOFWEEK="dayOfWeek",e.DAYOFYEAR="dayOfYear",e.DIVIDE="divide",e.EQ="eq",e.EXP="exp",e.FILTER="filter",e.FIRST="first",e.FLOOR="floor",e.GT="gt",e.GTE="gte",e.HOUR="hour",e.IFNULL="ifNull",e.IN="in",e.INDEXOFARRAY="indexOfArray",e.INDEXOFBYTES="indexOfBytes",e.INDEXOFCP="indexOfCP",e.ISARRAY="isArray",e.ISODAYOFWEEK="isoDayOfWeek",e.ISOWEEK="isoWeek",e.ISOWEEKYEAR="isoWeekYear",e.LAST="last",e.LET="let",e.LITERAL="literal",e.LN="ln",e.LOG="log",e.LOG10="log10",e.LT="lt",e.LTE="lte",e.LTRIM="ltrim",e.MAP="map",e.MAX="max",e.MERGEOBJECTS="mergeObjects",e.META="meta",e.MIN="min",e.MILLISECOND="millisecond",e.MINUTE="minute",e.MOD="mod",e.MONTH="month",e.MULTIPLY="multiply",e.NEQ="ne",e.NOT="not",e.OBJECTTOARRAY="objectToArray",e.OR="or",e.POW="pow",e.PUSH="push",e.RANGE="range",e.REDUCE="reduce",e.REVERSEARRAY="reverseArray",e.RTRIM="rtrim",e.SECOND="second",e.SETDIFFERENCE="setDifference",e.SETEQUALS="setEquals",e.SETINTERSECTION="setIntersection",e.SETISSUBSET="setIsSubset",e.SETUNION="setUnion",e.SIZE="size",e.SLICE="slice",e.SPLIT="split",e.SQRT="sqrt",e.STDDEVPOP="stdDevPop",e.STDDEVSAMP="stdDevSamp",e.STRCASECMP="strcasecmp",e.STRLENBYTES="strLenBytes",e.STRLENCP="strLenCP",e.SUBSTR="substr",e.SUBSTRBYTES="substrBytes",e.SUBSTRCP="substrCP",e.SUBTRACT="subtract",e.SUM="sum",e.SWITCH="switch",e.TOBOOL="toBool",e.TODATE="toDate",e.TODECIMAL="toDecimal",e.TODOUBLE="toDouble",e.TOINT="toInt",e.TOLONG="toLong",e.TOOBJECTID="toObjectId",e.TOSTRING="toString",e.TOLOWER="toLower",e.TOUPPER="toUpper",e.TRIM="trim",e.TRUNC="trunc",e.TYPE="type",e.WEEK="week",e.YEAR="year",e.ZIP="zip"}(Di||(Di={}));Di.ABS,Di.ADD,Di.ADDTOSET,Di.ALLELEMENTSTRUE,Di.AND,Di.ANYELEMENTTRUE,Di.ARRAYELEMAT,Di.ARRAYTOOBJECT,Di.AVG,Di.CEIL,Di.CMP,Di.CONCAT,Di.CONCATARRAYS,Di.COND,Di.CONVERT,Di.DATEFROMPARTS,Di.DATETOPARTS,Di.DATEFROMSTRING,Di.DATETOSTRING,Di.DAYOFMONTH,Di.DAYOFWEEK,Di.DAYOFYEAR,Di.DIVIDE,Di.EQ,Di.EXP,Di.FILTER,Di.FIRST,Di.FLOOR,Di.GT,Di.GTE,Di.HOUR,Di.IFNULL,Di.IN,Di.INDEXOFARRAY,Di.INDEXOFBYTES,Di.INDEXOFCP,Di.ISARRAY,Di.ISODAYOFWEEK,Di.ISOWEEK,Di.ISOWEEKYEAR,Di.LAST,Di.LET,Di.LITERAL,Di.LN,Di.LOG,Di.LOG10,Di.LT,Di.LTE,Di.LTRIM,Di.MAP,Di.MAX,Di.MERGEOBJECTS,Di.META,Di.MIN,Di.MILLISECOND,Di.MINUTE,Di.MOD,Di.MONTH,Di.MULTIPLY,Di.NEQ,Di.NOT,Di.OBJECTTOARRAY,Di.OR,Di.POW,Di.PUSH,Di.RANGE,Di.REDUCE,Di.REVERSEARRAY,Di.RTRIM,Di.SECOND,Di.SETDIFFERENCE,Di.SETEQUALS,Di.SETINTERSECTION,Di.SETISSUBSET,Di.SETUNION,Di.SIZE,Di.SLICE,Di.SPLIT,Di.SQRT,Di.STDDEVPOP,Di.STDDEVSAMP,Di.STRCASECMP,Di.STRLENBYTES,Di.STRLENCP,Di.SUBSTR,Di.SUBSTRBYTES,Di.SUBSTRCP,Di.SUBTRACT,Di.SUM,Di.SWITCH,Di.TOBOOL,Di.TODATE,Di.TODECIMAL,Di.TODOUBLE,Di.TOINT,Di.TOLONG,Di.TOOBJECTID,Di.TOSTRING,Di.TOLOWER,Di.TOUPPER,Di.TRIM,Di.TRUNC,Di.TYPE,Di.WEEK,Di.YEAR,Di.ZIP;class Oi{constructor(e,t,n){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=ci,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||ti}_setFieldName(e){return new Oi(this.operator,this.operands,e)}}function Ni(e){return e&&e instanceof Oi&&e._internalType===ci}let Ri;!function(e){e.SLICE="slice"}(Ri||(Ri={}));new Set([Ri.SLICE]);class Mi{constructor(e,t,n){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this.__safe_props__=void 0,this._internalType=li,this.operator=e,this.operands=t,this.fieldName=n||ti}_setFieldName(e){return new Mi(this.operator,this.operands,e)}}function Li(e){return e&&e instanceof Mi&&e._internalType===li}let Bi,Fi,Wi;function ji(e){return Ui.apply(this,arguments)}function Ui(){return(Ui=l()((function*(e){const{env:t,collectionName:n,data:r,instanceContext:o,timing:i}=e,a=JSON.stringify(r);xn({input:a,max:o.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(o.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});const s={collection_name:n,data:a},c=JSON.stringify(s);i.tunnelStartTime=+new Date;const l=yield o.serviceContext.request({apiName:"tcbapi_db_adddocument",serviceName:o.serviceContext.name,serializedReqData:c,requireDataNotEmpty:!0,env:t||o.serviceContext.env});i.tunnelEndTime=+new Date;const d=l.data;return i.tunnelTimeNoCSNetCost=d.baseresponse.stat.qbase_cost_time,{_id:d._id_type===Fi.NUMBER?d._id_number:d._id}}))).apply(this,arguments)}function Vi(e){return Gi.apply(this,arguments)}function Gi(){return(Gi=l()((function*(e){const{collectionName:t,query:n,options:r,instanceContext:o,timing:a,env:s}=e,c=Wr()?e.explain:void 0,l=r&&r.multi,d=JSON.stringify({collection_name:t,query:JSON.stringify(n),multi:l,query_type:l?Bi.WHERE:Bi.DOC,explain:c});a.tunnelStartTime=+new Date;const u=yield o.serviceContext.request({apiName:"tcbapi_db_deletedocument",serviceName:o.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:s||o.serviceContext.env});if(a.tunnelEndTime=+new Date,c){const{EJSON:e}=i(795);return e.deserialize(u.data)}const p=u.data;return a.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,{removed:p.deleted}}))).apply(this,arguments)}function $i(e){return Hi.apply(this,arguments)}function Hi(){return(Hi=l()((function*(e){const{env:t,collectionName:n,query:r,options:o={},instanceContext:a,timing:s,queryType:c}=e,l=Wr()?e.explain:void 0,d={collection_name:n,query:JSON.stringify(r),query_type:c,explain:l};o.offset&&(d.offset=o.offset),o.limit&&(d.limit=o.limit),o.order&&(d.order=o.order),o.projection&&(d.projection=JSON.stringify(o.projection));const u=JSON.stringify(d);s.tunnelStartTime=+new Date;const p=yield a.serviceContext.request({apiName:"tcbapi_db_querydocument",serviceName:a.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||a.serviceContext.env});if(s.tunnelEndTime=+new Date,l){const{EJSON:e}=i(795);return e.deserialize(p.data)}const h=p.data;s.tunnelTimeNoCSNetCost=h.baseresponse.stat.qbase_cost_time;let f=h.data_list?JSON.parse(h.data_list):[];return f=a.engine.Decoder.decode(f),{list:f,offset:h.offset,limit:h.limit,total:h.total}}))).apply(this,arguments)}function Zi(e){return Qi.apply(this,arguments)}function Qi(){return(Qi=l()((function*(e){const{env:t,collectionName:n,query:r,data:o,options:a={},instanceContext:s,timing:c,queryType:l}=e,d=Wr()?e.explain:void 0,u=JSON.stringify(o);xn({input:u,max:s.serviceContext.appConfig.docSizeLimit,name:"update expression",maxWording:`${(s.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});const p={collection_name:n,query:JSON.stringify(r),data:u,query_type:l,explain:d};p.multi=!1!==a.multi,p.merge=!1!==a.merge,a.upsert&&(p.upsert=a.upsert);const h=JSON.stringify(p);c.tunnelStartTime=+new Date;const f=yield s.serviceContext.request({apiName:"tcbapi_db_updatedocument",serviceName:s.serviceContext.name,serializedReqData:h,requireDataNotEmpty:!0,env:t||s.serviceContext.env});if(c.tunnelEndTime=+new Date,d){const{EJSON:e}=i(795);return e.deserialize(f.data)}const g=f.data;return c.tunnelTimeNoCSNetCost=g.baseresponse.stat.qbase_cost_time,{updated:g.updated}}))).apply(this,arguments)}function Yi(e){return zi.apply(this,arguments)}function zi(){return(zi=l()((function*(e){const{env:t,collectionName:n,_id:r,data:o,options:i={},instanceContext:a,timing:s}=e,c=JSON.stringify(o);xn({input:c,max:a.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(a.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});const l=zt(r),d={collection_name:n,_id_type:l?Fi.NUMBER:Fi.STRING,data:c};l?d._id_number=r:d._id=r;const u=JSON.stringify(d);s.tunnelStartTime=+new Date;const p=yield a.serviceContext.request({apiName:"tcbapi_db_setdocument",serviceName:a.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||a.serviceContext.env});s.tunnelEndTime=+new Date;const h=p.data;return s.tunnelTimeNoCSNetCost=h.baseresponse.stat.qbase_cost_time,{_id:h._id_type===Fi.NUMBER?h._id_number:h._id,updated:h._id?0:1,created:h._id?1:0}}))).apply(this,arguments)}function qi(e){return Ji.apply(this,arguments)}function Ji(){return(Ji=l()((function*(e){const{env:t,collectionName:n,query:r,instanceContext:o,timing:a}=e,s=Wr()?e.explain:void 0,c={collection_name:n,query:JSON.stringify(r),query_type:Bi.WHERE,explain:s},l=JSON.stringify(c);a.tunnelStartTime=+new Date;const d=yield o.serviceContext.request({apiName:"tcbapi_db_countdocument",serviceName:o.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||o.serviceContext.env});if(a.tunnelEndTime=+new Date,s){const{EJSON:e}=i(795);return e.deserialize(d.data)}const u=d.data;return a.tunnelTimeNoCSNetCost=u.baseresponse.stat.qbase_cost_time,{total:u.total}}))).apply(this,arguments)}function Ki(e){return Xi.apply(this,arguments)}function Xi(){return(Xi=l()((function*(e){const{env:t,collectionName:n,stages:r,instanceContext:o,timing:a}=e,s=Wr()?e.explain:void 0,c={collection_name:n,stages:r.map((e=>{for(const t in e)return{stage_key:t,stage_value:JSON.stringify(e[t])};throw new Error(`empty encoded stage (${JSON.stringify(e)})`)})),explain:s},l=JSON.stringify(c);a.tunnelStartTime=+new Date;const d=yield o.serviceContext.request({apiName:"tcbapi_db_aggregate",serviceName:o.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||o.serviceContext.env});if(a.tunnelEndTime=+new Date,s){const{EJSON:e}=i(795);return e.deserialize(d.data)}const u=d.data;a.tunnelTimeNoCSNetCost=u.baseresponse.stat.qbase_cost_time;{const{EJSON:e}=i(795);return{list:JSON.parse(u.list).map((t=>e.parse(t)))}}}))).apply(this,arguments)}function ea(){return(ea=l()((function*(e,t){const n=(yield e.request({apiName:"tcbapi_db_get_realtime_connection",env:t||e.env,serviceName:e.name,serializedReqData:JSON.stringify({}),requireDataNotEmpty:!0})).data;return{envId:n.env_id,secretVersion:n.secret_version,signStr:n.sign_str,wsUrl:n.ws_url}}))).apply(this,arguments)}!function(e){e[e.WHERE=0]="WHERE",e[e.DOC=1]="DOC"}(Bi||(Bi={})),function(e){e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(Fi||(Fi={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(Wi||(Wi={}));const ta=e=>{class t extends ra{constructor(e,t){super(t),this.collection=void 0,this._internalType=ni,this.collection=e}pushStage(e,n){return new t(this.collection,[...this._stages,new na(e,n)])}end(t={}){const n="collection.aggregate",r={apiStartTime:+new Date},o=()=>Ki({env:e.database.config.env,collectionName:this.collection.collectionName,stages:e.engine.AggregateSerializer.encodeStages(this._stages),instanceContext:e,timing:r,explain:t.explain});const i=En(t),a=new Promise(function(){var e=l()((function*(e,i){try{const i=yield o();if(t.explain&&Wr())return e(i);e({list:i.list,errMsg:lr(n)})}catch(e){i(on(e,n))}finally{Xn(s()(s()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{Cn(n,t,e)})).catch((e=>{In(n,t,e)}))}}return t};class na{constructor(e,t){this.stage=void 0,this.val=void 0,this._internalType=oi,this.stage=e,this.val=t}}class ra{constructor(e){this._stages=void 0,this._internalType=ri,this.__safe_props__=void 0,this._stages=e}pushStage(e,t){return new ra([...this._stages,new na(e,t)])}addFields(e){return this.pushStage("addFields",e)}bucket(e){return this.pushStage("bucket",e)}bucketAuto(e){return this.pushStage("bucketAuto",e)}collStats(e){return this.pushStage("collStats",e)}count(e){return this.pushStage("count",e)}facet(e){return this.pushStage("facet",e)}geoNear(e){return this.pushStage("geoNear",e)}graphLookup(e){return this.pushStage("graphLookup",e)}group(e){return this.pushStage("group",e)}indexStats(){return this.pushStage("indexStats",{})}limit(e){return this.pushStage("limit",e)}lookup(e){return this.pushStage("lookup",e)}match(e){return this.pushStage("match",e)}out(e){return this.pushStage("out",e)}project(e){return this.pushStage("project",e)}redact(e){return this.pushStage("redact",e)}replaceRoot(e){return this.pushStage("replaceRoot",e)}sample(e){return this.pushStage("sample",e)}skip(e){return this.pushStage("skip",e)}sort(e){return this.pushStage("sort",e)}sortByCount(e){return this.pushStage("sortByCount",e)}unwind(e){return this.pushStage("unwind",e)}end(){}}class oa extends ra{constructor(e,t=!1){super(e),this._sealed=void 0,this._sealed=t}pushStage(e,t){if(this._sealed)throw new Error("pushing new stage is not allowed after calling 'done()'");return new oa([...this._stages,new na(e,t)])}done(){return new oa(this._stages,!0)}}const ia=e=>e&&e._internalType===ri,aa=e=>e&&e._internalType===oi,sa=new Set(["each","position","slice","sort"]),ca={eq:e=>new Si(Ci.EQ,[e]),neq:e=>new Si(Ci.NEQ,[e]),lt:e=>new Si(Ci.LT,[e]),lte:e=>new Si(Ci.LTE,[e]),gt:e=>new Si(Ci.GT,[e]),gte:e=>new Si(Ci.GTE,[e]),in:e=>new Si(Ci.IN,e),nin:e=>new Si(Ci.NIN,e),geoNear:e=>new Si(Ci.GEO_NEAR,[e]),geoWithin:e=>new Si(Ci.GEO_WITHIN,[e]),geoIntersects:e=>new Si(Ci.GEO_INTERSECTS,[e]),and(...e){const t=Jt(arguments[0])?arguments[0]:Array.from(arguments);return new bi(yi.AND,t)},or(...e){const t=Jt(arguments[0])?arguments[0]:Array.from(arguments);return new bi(yi.OR,t)},nor(...e){const t=Jt(arguments[0])?arguments[0]:Array.from(arguments);return new bi(yi.NOR,t)},not:e=>new bi(yi.NOT,[e]),exists:e=>new Si(Ci.EXISTS,[e]),mod:(e,t)=>new Si(Ci.MOD,[e,t]),all:e=>new Si(Ci.ALL,e),elemMatch:e=>new Si(Ci.ELEM_MATCH,[e]),size:e=>new Si(Ci.SIZE,[e]),expr:e=>new Si(Ci.EXPR,[e]),set:e=>new ki(xi.SET,[e]),remove:()=>new ki(xi.REMOVE,[]),inc:e=>new ki(xi.INC,[e]),mul:e=>new ki(xi.MUL,[e]),min:e=>new ki(xi.MIN,[e]),max:e=>new ki(xi.MAX,[e]),rename:e=>new ki(xi.RENAME,[e]),bit:e=>new ki(xi.BIT,[e]),push(e){let t={};if(Jt(e))t.each=e;else if(Qt(e)&&Jt(e.each)){const n=Object.keys(e);if(1===n.length)t=e;else{let r=!1;for(const e of n)if(!sa.has(e)){r=!0;break}t=r?[e]:e}}else t.each=[e];return new ki(xi.PUSH,[t])},pop:()=>new ki(xi.POP,[]),shift:()=>new ki(xi.SHIFT,[]),unshift(...e){const t=Jt(arguments[0])?arguments[0]:Array.from(arguments);return new ki(xi.UNSHIFT,t)},addToSet:e=>new ki(xi.ADD_TO_SET,[e]),pull:e=>new ki(xi.PULL,[e]),pullAll:e=>new ki(xi.PULL_ALL,[e]),project:{slice:e=>new Mi(Ri.SLICE,[e])},aggregate:{pipeline:()=>new oa([]),abs:e=>new Oi(Di.ABS,[e]),add:e=>new Oi(Di.ADD,[e]),addToSet:e=>new Oi(Di.ADDTOSET,[e]),allElementsTrue:e=>new Oi(Di.ALLELEMENTSTRUE,[e]),and:e=>new Oi(Di.AND,[e]),anyElementTrue:e=>new Oi(Di.ANYELEMENTTRUE,[e]),arrayElemAt:e=>new Oi(Di.ARRAYELEMAT,[e]),arrayToObject:e=>new Oi(Di.ARRAYTOOBJECT,[e]),avg:e=>new Oi(Di.AVG,[e]),ceil:e=>new Oi(Di.CEIL,[e]),cmp:e=>new Oi(Di.CMP,[e]),concat:e=>new Oi(Di.CONCAT,[e]),concatArrays:e=>new Oi(Di.CONCATARRAYS,[e]),cond:e=>new Oi(Di.COND,[e]),convert:e=>new Oi(Di.CONVERT,[e]),dateFromParts:e=>new Oi(Di.DATEFROMPARTS,[e]),dateToParts:e=>new Oi(Di.DATETOPARTS,[e]),dateFromString:e=>new Oi(Di.DATEFROMSTRING,[e]),dateToString:e=>new Oi(Di.DATETOSTRING,[e]),dayOfMonth:e=>new Oi(Di.DAYOFMONTH,[e]),dayOfWeek:e=>new Oi(Di.DAYOFWEEK,[e]),dayOfYear:e=>new Oi(Di.DAYOFYEAR,[e]),divide:e=>new Oi(Di.DIVIDE,[e]),eq:e=>new Oi(Di.EQ,[e]),exp:e=>new Oi(Di.EXP,[e]),filter:e=>new Oi(Di.FILTER,[e]),first:e=>new Oi(Di.FIRST,[e]),floor:e=>new Oi(Di.FLOOR,[e]),gt:e=>new Oi(Di.GT,[e]),gte:e=>new Oi(Di.GTE,[e]),hour:e=>new Oi(Di.HOUR,[e]),ifNull:e=>new Oi(Di.IFNULL,[e]),in:e=>new Oi(Di.IN,[e]),indexOfArray:e=>new Oi(Di.INDEXOFARRAY,[e]),indexOfBytes:e=>new Oi(Di.INDEXOFBYTES,[e]),indexOfCP:e=>new Oi(Di.INDEXOFCP,[e]),isArray:e=>new Oi(Di.ISARRAY,[e]),isoDayOfWeek:e=>new Oi(Di.ISODAYOFWEEK,[e]),isoWeek:e=>new Oi(Di.ISOWEEK,[e]),isoWeekYear:e=>new Oi(Di.ISOWEEKYEAR,[e]),last:e=>new Oi(Di.LAST,[e]),let:e=>new Oi(Di.LET,[e]),literal:e=>new Oi(Di.LITERAL,[e]),ln:e=>new Oi(Di.LN,[e]),log:e=>new Oi(Di.LOG,[e]),log10:e=>new Oi(Di.LOG10,[e]),lt:e=>new Oi(Di.LT,[e]),lte:e=>new Oi(Di.LTE,[e]),ltrim:e=>new Oi(Di.LTRIM,[e]),map:e=>new Oi(Di.MAP,[e]),max:e=>new Oi(Di.MAX,[e]),mergeObjects:e=>new Oi(Di.MERGEOBJECTS,[e]),meta:e=>new Oi(Di.META,[e]),min:e=>new Oi(Di.MIN,[e]),millisecond:e=>new Oi(Di.MILLISECOND,[e]),minute:e=>new Oi(Di.MINUTE,[e]),mod:e=>new Oi(Di.MOD,[e]),month:e=>new Oi(Di.MONTH,[e]),multiply:e=>new Oi(Di.MULTIPLY,[e]),neq:e=>new Oi(Di.NEQ,[e]),not:e=>new Oi(Di.NOT,[e]),objectToArray:e=>new Oi(Di.OBJECTTOARRAY,[e]),or:e=>new Oi(Di.OR,[e]),pow:e=>new Oi(Di.POW,[e]),push:e=>new Oi(Di.PUSH,[e]),range:e=>new Oi(Di.RANGE,[e]),reduce:e=>new Oi(Di.REDUCE,[e]),reverseArray:e=>new Oi(Di.REVERSEARRAY,[e]),rtrim:e=>new Oi(Di.RTRIM,[e]),second:e=>new Oi(Di.SECOND,[e]),setDifference:e=>new Oi(Di.SETDIFFERENCE,[e]),setEquals:e=>new Oi(Di.SETEQUALS,[e]),setIntersection:e=>new Oi(Di.SETINTERSECTION,[e]),setIsSubset:e=>new Oi(Di.SETISSUBSET,[e]),setUnion:e=>new Oi(Di.SETUNION,[e]),size:e=>new Oi(Di.SIZE,[e]),slice:e=>new Oi(Di.SLICE,[e]),split:e=>new Oi(Di.SPLIT,[e]),sqrt:e=>new Oi(Di.SQRT,[e]),stdDevPop:e=>new Oi(Di.STDDEVPOP,[e]),stdDevSamp:e=>new Oi(Di.STDDEVSAMP,[e]),strcasecmp:e=>new Oi(Di.STRCASECMP,[e]),strLenBytes:e=>new Oi(Di.STRLENBYTES,[e]),strLenCP:e=>new Oi(Di.STRLENCP,[e]),substr:e=>new Oi(Di.SUBSTR,[e]),substrBytes:e=>new Oi(Di.SUBSTRBYTES,[e]),substrCP:e=>new Oi(Di.SUBSTRCP,[e]),subtract:e=>new Oi(Di.SUBTRACT,[e]),sum:e=>new Oi(Di.SUM,[e]),switch:e=>new Oi(Di.SWITCH,[e]),toBool:e=>new Oi(Di.TOBOOL,[e]),toDate:e=>new Oi(Di.TODATE,[e]),toDecimal:e=>new Oi(Di.TODECIMAL,[e]),toDouble:e=>new Oi(Di.TODOUBLE,[e]),toInt:e=>new Oi(Di.TOINT,[e]),toLong:e=>new Oi(Di.TOLONG,[e]),toObjectId:e=>new Oi(Di.TOOBJECTID,[e]),toString:e=>new Oi(Di.TOSTRING,[e]),toLower:e=>new Oi(Di.TOLOWER,[e]),toUpper:e=>new Oi(Di.TOUPPER,[e]),trim:e=>new Oi(Di.TRIM,[e]),trunc:e=>new Oi(Di.TRUNC,[e]),type:e=>new Oi(Di.TYPE,[e]),week:e=>new Oi(Di.WEEK,[e]),year:e=>new Oi(Di.YEAR,[e]),zip:e=>new Oi(Di.ZIP,[e])}};function la(e){return new da(e)}class da{constructor(e={offset:0}){this.options=void 0,Sn(e,"object","serverDate.options"),this.options=e}get _internalType(){return _i}toJSON(){return{$date:this.options}}}function ua(e,t){return Da(e)?Ea(e):new pa(e,t)}class pa{constructor(e,t){this.longitude=void 0,this.latitude=void 0,this._internalType=di,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}});const n=e,r=t;Object.defineProperties(this,{longitude:{enumerable:!0,configurable:!1,get:()=>n,set(e){if(Sn(e,"number","longitude"),e>180||e<-180)throw new nn({errMsg:"longitude should be a number ranges from -180 to 180"})}},latitude:{enumerable:!0,configurable:!1,get:()=>r,set(e){if(Sn(e,"number","latitude"),e>90||e<-90)throw new nn({errMsg:"latitude should be a number ranges from -90 to 90"})}}}),this.longitude=n,this.latitude=r}toJSON(){return{type:"Point",coordinates:[(e=this).longitude,e.latitude]};var e}toString(){return JSON.stringify(this.toJSON())}}function ha(e){return Oa(e)?Sa(e):new fa(e)}class fa{constructor(e){this.points=void 0,this._internalType=hi,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"MultiPoint",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function ga(e){return Na(e)?Ta(e):new _a(e)}class _a{constructor(e){this.points=void 0,this._internalType=ui,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"LineString",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function ma(e){return Ra(e)?xa(e):new ya(e)}class ya{constructor(e){this.lines=void 0,this._internalType=fi,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"MultiLineString",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function va(e){return Ma(e)?ka(e):new Aa(e)}class Aa{constructor(e){this.lines=void 0,this._internalType=pi,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"Polygon",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function ba(e){return La(e)?Pa(e):new wa(e)}class wa{constructor(e){this.polygons=void 0,this._internalType=gi,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.polygons=e}toJSON(){return{type:"MultiPolygon",coordinates:this.polygons.map((e=>e.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))))}}toString(){return JSON.stringify(this.toJSON())}}let Ca;const Ia=Ca;function Ea(e){return ua(e.coordinates[0],e.coordinates[1])}function Sa(e){return ha(e.coordinates.map((e=>ua(e[0],e[1]))))}function Ta(e){return ga(e.coordinates.map((e=>ua(e[0],e[1]))))}function xa(e){return ma(e.coordinates.map((e=>ga(e.map((e=>ua(e[0],e[1])))))))}function ka(e){return va(e.coordinates.map((e=>ga(e.map((e=>ua(e[0],e[1])))))))}function Pa(e){return ba(e.coordinates.map((e=>va(e.map((e=>ga(e.map((e=>ua(e[0],e[1]))))))))))}function Da(e){return Qt(e)&&Ba(e.coordinates)}function Oa(e){return Qt(e)&&Fa(e.coordinates)}function Na(e){return Qt(e)&&Wa(e.coordinates)}function Ra(e){return Qt(e)&&ja(e.coordinates)}function Ma(e){return Qt(e)&&Ua(e.coordinates)}function La(e){return Qt(e)&&(t=e.coordinates,Jt(t)&&t.every(Ua));var t}function Ba(e){return Jt(e)&&zt(e[0])&&zt(e[1])}function Fa(e){return Jt(e)&&e.every(Ba)}function Wa(e){return Fa(e)}function ja(e){return Jt(e)&&e.every(Wa)}function Ua(e){return ja(e)}function Va(e){return Ga(e,[e])}function Ga(e,t){if(!en(e)){if(Kt(e))return{$date:+e};if(Xt(e))return{$regex:e.source,$options:e.flags};if(Jt(e))return e.map((e=>{if(t.indexOf(e)>-1)throw new nn({errCode:tn.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});return Ga(e,[...t,e])}));if(Qt(e)){const n=s()({},e);for(const e in n){if(t.indexOf(n[e])>-1)throw new nn({errCode:tn.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});n[e]=Ga(n[e],[...t,n[e]])}return n}return e}switch(e._internalType){case di:case hi:case ui:case fi:case pi:case gi:return e.toJSON();case _i:return{$date:e.options};case mi:return{$regex:e.regexp,$options:e.options};default:return e.toJSON?e.toJSON():e}}function $a(e,t,n,r){const o=s()({},e);for(const i in e){if(/^\$/.test(i))continue;const a=e[i];if(a&&(Qt(a)&&!t(a))){if(r.indexOf(a)>-1)throw new nn({errCode:tn.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});const e=$a(a,t,[...n,i],[...r,a]);o[i]=e;let s=!1;for(const t in e)/^\$/.test(t)?s=!0:(o[`${i}.${t}`]=e[t],delete o[i][t]);s||delete o[i]}}return o}function Ha(e){return $a(e,Ya,[],[e])}function Za(e){return $a(e,(e=>!1),[],[e])}function Qa(e,t,n){t[n]||delete e[n];for(const r in t)e[r]?Jt(e[r])?e[r].push(t[r]):Qt(e[r])?Qt(t[r])?Object.assign(e[r],t[r]):(console.warn(`unmergable condition, query is object but condition is ${Zt(t)}, can only overwrite`,t,n),e[r]=t[r]):(console.warn(`to-merge query is of type ${Zt(e)}, can only overwrite`,e,t,n),e[r]=t[r]):e[r]=t[r]}function Ya(e){return en(e)||Kt(e)||Xt(e)}function za(e){return Va(e)}function qa(e){return function(e){const t=s()({},e);for(const e in t)switch(e){case"$date":switch(Zt(t[e])){case"number":return new Date(t[e]);case"object":return la(t[e])}break;case"type":switch(t.coordinates,t.type){case"Point":if(Da(t))return Ea(t);break;case"MultiPoint":if(Oa(t))return Sa(t);break;case"LineString":if(Na(t))return Ta(t);break;case"MultiLineString":if(Ra(t))return xa(t);break;case"Polygon":if(Ma(t))return ka(t);break;case"MultiPolygon":if(La(t))return Pa(t)}}return e}(e)}function Ja(e,t){return{limit:e._query.limit,offset:e._query.offset,order:Ka(e._query.order||[]),projection:t.engine.ProjectionSerializer.encode(e._field)}}function Ka(e){return e.map((e=>({field:e.fieldPath,direction:e.order===Fl.DESC?Wi.DESC:Wi.ASC})))}function Xa(e){const t=Za(e);for(const e in t)!0===t[e]||1===t[e]?t[e]=1:!1===t[e]||0===t[e]?t[e]=0:delete t[e];return t}let es,ts;!function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED"}(es||(es={})),function(e){e.CONNECTION_START="connectionStart",e.CONNECTION_SUCCESS="connectionSuccess",e.CONNECTION_FAIL="connectionFail",e.DISCONNECT="disconnect"}(ts||(ts={}));const ns={[es.DISCONNECTED]:{transitions:[{accept:ts.CONNECTION_START,to:es.CONNECTING}]},[es.CONNECTING]:{transitions:[{accept:ts.CONNECTION_SUCCESS,to:es.CONNECTED},{accept:ts.CONNECTION_FAIL,to:es.DISCONNECTED},{accept:ts.DISCONNECT,to:es.DISCONNECTED}]},[es.CONNECTED]:{transitions:[{accept:ts.DISCONNECT,to:es.DISCONNECTED},{accept:ts.CONNECTION_FAIL,to:es.DISCONNECTED}]}};var rs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,os=/^\w*$/;const is=function(e,t){if(ze(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!jn(e))||(os.test(e)||!rs.test(e)||null!=t&&e in Object(t))};function as(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(as.Cache||ve),n}as.Cache=ve;const ss=as;var cs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ls=/\\(\\)?/g;const ds=function(e){var t=ss(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(cs,(function(e,n,r,o){t.push(r?o.replace(ls,"$1"):n||e)})),t}));const us=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o};var ps=T?T.prototype:void 0,hs=ps?ps.toString:void 0;const fs=function e(t){if("string"==typeof t)return t;if(ze(t))return us(t,e)+"";if(jn(t))return hs?hs.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};const gs=function(e){return null==e?"":fs(e)};const _s=function(e,t){return ze(e)?e:is(e,t)?[e]:ds(gs(e))};const ms=function(e){if("string"==typeof e||jn(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};const ys=function(e,t,n,r){if(!B(e))return e;for(var o=-1,i=(t=_s(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var c=ms(t[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=a){var d=s[c];void 0===(l=r?r(d,c,s):void 0)&&(l=B(d)?d:Et(t[o+1])?[]:{})}bt(s,c,l),s=s[c]}return e};const vs=function(e,t,n){return null==e?e:ys(e,t,n)};const As=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};const bs=function(e,t){for(var n=0,r=(t=_s(t,e)).length;null!=e&&n<r;)e=e[ms(t[n++])];return n&&n==r?e:void 0};const ws=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};const Cs=function(e,t){return t.length<2?e:bs(e,ws(t,0,-1))};const Is=function(e,t){return t=_s(t,e),null==(e=Cs(e,t))||delete e[ms(As(t))]};const Es=function(e,t){return null==e||Is(e,t)};const Ss=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};const Ts=Fe(Object.keys,Object);var xs=Object.prototype.hasOwnProperty;const ks=function(e){if(!Ue(e))return Ts(e);var t=[];for(var n in Object(e))xs.call(e,n)&&"constructor"!=n&&t.push(n);return t};const Ps=function(e){return Je(e)?Tt(e):ks(e)};const Ds=function(e,t){return e&&wt(t,Ps(t),e)};const Os=function(e,t){return e&&wt(t,Dt(t),e)};const Ns=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};const Rs=function(){return[]};var Ms=Object.prototype.propertyIsEnumerable,Ls=Object.getOwnPropertySymbols;const Bs=Ls?function(e){return null==e?[]:(e=Object(e),Ns(Ls(e),(function(t){return Ms.call(e,t)})))}:Rs;const Fs=function(e,t){return wt(e,Bs(e),t)};const Ws=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e};const js=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ws(t,Bs(e)),e=We(e);return t}:Rs;const Us=function(e,t){return wt(e,js(e),t)};const Vs=function(e,t,n){var r=t(e);return ze(e)?r:Ws(r,n(e))};const Gs=function(e){return Vs(e,Ps,Bs)};const $s=function(e){return Vs(e,Dt,js)};const Hs=X(S,"DataView");const Zs=X(S,"Promise");const Qs=X(S,"Set");const Ys=X(S,"WeakMap");var zs="[object Map]",qs="[object Promise]",Js="[object Set]",Ks="[object WeakMap]",Xs="[object DataView]",ec=$(Hs),tc=$(ee),nc=$(Zs),rc=$(Qs),oc=$(Ys),ic=L;(Hs&&ic(new Hs(new ArrayBuffer(1)))!=Xs||ee&&ic(new ee)!=zs||Zs&&ic(Zs.resolve())!=qs||Qs&&ic(new Qs)!=Js||Ys&&ic(new Ys)!=Ks)&&(ic=function(e){var t=L(e),n="[object Object]"==t?e.constructor:void 0,r=n?$(n):"";if(r)switch(r){case ec:return Xs;case tc:return zs;case nc:return qs;case rc:return Js;case oc:return Ks}return t});const ac=ic;var sc=Object.prototype.hasOwnProperty;const cc=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&sc.call(e,"index")&&(n.index=e.index,n.input=e.input),n};const lc=function(e,t){var n=t?Ne(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var dc=/\w*$/;const uc=function(e){var t=new e.constructor(e.source,dc.exec(e));return t.lastIndex=e.lastIndex,t};var pc=T?T.prototype:void 0,hc=pc?pc.valueOf:void 0;const fc=function(e){return hc?Object(hc.call(e)):{}};const gc=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Ne(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return lc(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Re(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return uc(e);case"[object Set]":return new r;case"[object Symbol]":return fc(e)}};const _c=function(e){return Ge(e)&&"[object Map]"==ac(e)};var mc=_t&&_t.isMap;const yc=mc?pt(mc):_c;const vc=function(e){return Ge(e)&&"[object Set]"==ac(e)};var Ac=_t&&_t.isSet;const bc=Ac?pt(Ac):vc;var wc="[object Arguments]",Cc="[object Function]",Ic="[object Object]",Ec={};Ec[wc]=Ec["[object Array]"]=Ec["[object ArrayBuffer]"]=Ec["[object DataView]"]=Ec["[object Boolean]"]=Ec["[object Date]"]=Ec["[object Float32Array]"]=Ec["[object Float64Array]"]=Ec["[object Int8Array]"]=Ec["[object Int16Array]"]=Ec["[object Int32Array]"]=Ec["[object Map]"]=Ec["[object Number]"]=Ec["[object Object]"]=Ec["[object RegExp]"]=Ec["[object Set]"]=Ec["[object String]"]=Ec["[object Symbol]"]=Ec["[object Uint8Array]"]=Ec["[object Uint8ClampedArray]"]=Ec["[object Uint16Array]"]=Ec["[object Uint32Array]"]=!0,Ec["[object Error]"]=Ec[Cc]=Ec["[object WeakMap]"]=!1;const Sc=function e(t,n,r,o,i,a){var s,c=1&n,l=2&n,d=4&n;if(r&&(s=i?r(t,o,i,a):r(t)),void 0!==s)return s;if(!B(t))return t;var u=ze(t);if(u){if(s=cc(t),!c)return Me(t,s)}else{var p=ac(t),h=p==Cc||"[object GeneratorFunction]"==p;if(rt(t))return De(t,c);if(p==Ic||p==wc||h&&!i){if(s=l||h?{}:Ve(t),!c)return l?Us(t,Os(s,t)):Fs(t,Ds(s,t))}else{if(!Ec[p])return i?t:{};s=gc(t,p,c)}}a||(a=new we);var f=a.get(t);if(f)return f;a.set(t,s),bc(t)?t.forEach((function(o){s.add(e(o,n,r,o,t,a))})):yc(t)&&t.forEach((function(o,i){s.set(i,e(o,n,r,i,t,a))}));var g=u?void 0:(d?l?$s:Gs:l?Dt:Ps)(t);return Ss(g||t,(function(o,i){g&&(o=t[i=o]),bt(s,i,e(o,n,r,i,t,a))})),s};const Tc=function(e){return Sc(e,5)};let xc,kc;!function(e){e.UNINIT="UNINIT",e.CLOSED="CLOSED",e.INIT_LOGGING_IN="INIT_LOGGING_IN",e.INIT_LOGGED_IN="INIT_LOGGED_IN",e.INIT_LOGIN_FAIL="INIT_LOGIN_FAIL",e.INIT_WATCH_PENDING="INIT_WATCH_PENDING",e.INIT_WATCH_FAIL="INIT_WATCH_FAIL",e.INIT_WATCH_SUCCESS="INIT_WATCH_SUCCESS",e.PAUSED="PAUSED",e.ABNORMAL_WATCH_STATUS="ABNORMAL_WATCH_STATUS",e.REBUILD_LOGGING_IN="REBUILD_LOGGING_IN",e.REBUILD_LOGGED_IN="REBUILD_LOGGED_IN",e.REBUILD_LOGIN_FAIL="REBUILD_LOGIN_FAIL",e.REBUILD_WATCH_PENDING="REBUILD_WATCH_PENDING",e.REBUILD_WATCH_FAIL="REBUILD_WATCH_FAIL",e.REBUILD_WATCH_SUCCESS="REBUILD_WATCH_SUCCESS"}(xc||(xc={})),function(e){e.CLOSE="close",e.LOGIN_START="loginStart",e.LOGIN_FAIL="loginFail",e.LOGIN_SUCCESS="loginSuccess",e.INIT_WATCH_START="initWatchStart",e.INIT_WATCH_FAIL="initWatchFail",e.INIT_WATCH_SUCCESS="initWatchSuccess",e.WS_DISCONNECTED="wsDisconnected",e.WS_CONNECTED="wsConnected",e.REBUILD_WATCH_START="rebuildWatchStart",e.REBUILD_WATCH_FAIL="rebuildWatchFail",e.REBUILD_WATCH_SUCCESS="rebuildWatchSuccess",e.NEED_REBUILD_WATCH="needRebuildWatch"}(kc||(kc={}));const Pc={accept:kc.CLOSE,to:xc.CLOSED},Dc={accept:kc.WS_DISCONNECTED,to:xc.CLOSED},Oc={accept:kc.WS_DISCONNECTED,to:xc.PAUSED},Nc={[xc.UNINIT]:{transitions:[{accept:kc.LOGIN_START,to:xc.INIT_LOGGING_IN},Dc,Pc]},[xc.CLOSED]:{transitions:[Pc]},[xc.INIT_LOGGING_IN]:{transitions:[{accept:kc.LOGIN_FAIL,to:xc.INIT_LOGIN_FAIL},{accept:kc.LOGIN_SUCCESS,to:xc.INIT_LOGGED_IN},Dc,Pc]},[xc.INIT_LOGIN_FAIL]:{transitions:[{accept:kc.LOGIN_START,to:xc.INIT_LOGGING_IN},Dc,Pc]},[xc.INIT_LOGGED_IN]:{transitions:[{accept:kc.INIT_WATCH_START,to:xc.INIT_WATCH_PENDING},Dc,Pc]},[xc.INIT_WATCH_PENDING]:{transitions:[{accept:kc.INIT_WATCH_FAIL,to:xc.INIT_WATCH_FAIL},{accept:kc.INIT_WATCH_SUCCESS,to:xc.INIT_WATCH_SUCCESS},Dc,Pc]},[xc.INIT_WATCH_FAIL]:{transitions:[{accept:kc.LOGIN_START,to:xc.INIT_LOGGING_IN},Dc,Pc]},[xc.INIT_WATCH_SUCCESS]:{transitions:[{accept:kc.WS_DISCONNECTED,to:xc.PAUSED},{accept:kc.NEED_REBUILD_WATCH,to:xc.ABNORMAL_WATCH_STATUS},Oc,Pc]},[xc.PAUSED]:{transitions:[{accept:kc.LOGIN_START,to:xc.REBUILD_LOGGING_IN},Oc,Pc]},[xc.ABNORMAL_WATCH_STATUS]:{transitions:[{accept:kc.LOGIN_START,to:xc.REBUILD_LOGGING_IN},Oc,Pc]},[xc.REBUILD_LOGGING_IN]:{transitions:[{accept:kc.LOGIN_FAIL,to:xc.REBUILD_LOGIN_FAIL},{accept:kc.LOGIN_SUCCESS,to:xc.REBUILD_LOGGED_IN},Oc,Pc]},[xc.REBUILD_LOGIN_FAIL]:{transitions:[{accept:kc.LOGIN_START,to:xc.REBUILD_LOGGING_IN},Oc,Pc]},[xc.REBUILD_LOGGED_IN]:{transitions:[{accept:kc.REBUILD_WATCH_START,to:xc.REBUILD_WATCH_PENDING},Oc,Pc]},[xc.REBUILD_WATCH_PENDING]:{transitions:[{accept:kc.REBUILD_WATCH_FAIL,to:xc.REBUILD_WATCH_FAIL},{accept:kc.REBUILD_WATCH_SUCCESS,to:xc.REBUILD_WATCH_SUCCESS},Oc,Pc]},[xc.REBUILD_WATCH_FAIL]:{transitions:[{accept:kc.LOGIN_START,to:xc.REBUILD_LOGGING_IN},Oc,Pc]},[xc.REBUILD_WATCH_SUCCESS]:{transitions:[{accept:kc.NEED_REBUILD_WATCH,to:xc.ABNORMAL_WATCH_STATUS},Oc,Pc]}};class Rc{constructor(e){this.currentState=void 0,this.states=void 0,this.listeners=new Set,this.history=void 0,this.currentState=e.initialState,this.states=new Map;for(const t in e.states)this.states.set(t,{name:t,transitions:new Map(e.states[t].transitions.map((({accept:e,to:t})=>[e,t])))});this.history={options:{enable:!1,limit:100},transitions:[]},e.history&&("boolean"==typeof e.history?e.history&&(this.history.options.enable=!0):Boolean(e.history.enable)&&(void 0===e.history.limit||null===e.history.limit?this.history.options={enable:!0,limit:100}:e.history.limit>0&&(this.history.options={enable:!0,limit:e.history.limit}))),this.history.options.enable&&this.history.transitions.push({state:this.currentState})}transition(e,t){if(t&&(t instanceof Set?!t.has(this.currentState):t!==this.currentState))throw new Mc(`current state (${this.currentState}) != expected from state (${t instanceof Set?JSON.stringify([...t]):t})`,"unexpectedFromState");const n="string"==typeof e?{type:e}:e,r=this.states.get(this.currentState),o=r.transitions.get(n.type);if(!o)throw new Mc(`current state (${this.currentState}) does not accept "${n.type}"`,"unexpectedInput");this.currentState=o,this.history.options.enable&&(this.history.transitions.push({event:n.type,state:this.currentState}),this.history.transitions.length>this.history.options.limit&&(this.history.transitions.length===this.history.options.limit+1?this.history.transitions.shift():this.history.transitions.splice(0,this.history.transitions.length-this.history.options.limit))),this.listeners.forEach((e=>{try{e({event:n,from:r.name,to:this.currentState})}catch(e){console.error("FSM listener exec error: ",e)}}))}canAccept(e){return this.states.get(this.currentState).transitions.has(e)}subscribe(e){this.listeners.add(e)}unsubscribe(e){this.listeners.delete(e)}getHistoryRepresentation(e){if(!this.history.options.enable)return"";return`states: ${(e.limit?this.history.transitions.slice(-e.limit):this.history.transitions).map((({state:e,event:t})=>`${t?`-(${t})->`:""}${e}`)).join("")}`}}class Mc extends Error{constructor(e,t,n){super(e),this.type="transition",this.subtype=void 0,this.payload=void 0,this.generic=!0,this.subtype=t,this.payload=n}}function Lc(e=""){return`${e?`${e}_`:""}${+new Date}_${Math.random()}`}const Bc=1128,Fc=1,Wc=2,jc=3,Uc=4,Vc=5,Gc=6,$c=7,Hc=8,Zc=9,Qc=10,Yc=11,zc=12,qc=13,Jc=14,Kc=15,Xc=16,el=17,tl=18,nl=30,rl=31,ol=32,il=33,al=34,sl=35,cl=36,ll=37,dl=38,ul=39,pl=40,hl=50,fl=51,gl=52,_l=53,ml=54,yl=55,vl=56,Al=57,bl=58,wl=59,Cl=60;class Il{constructor(e){this.close=void 0,this.onChange=void 0,this.onError=void 0,this.close=e.close,this.onChange=e.onChange,this.onError=e.onError,e.debug&&Object.defineProperty(this,"virtualClient",{get:()=>e.virtualClient})}}class El{constructor(e){this.id=void 0,this.docChanges=void 0,this.docs=void 0,this.type=void 0,this.EJSON=void 0,this.requestId=void 0,this.watchId=void 0;const{id:t,docChanges:n,docs:r,type:o,EJSON:i,requestId:a,watchId:s}=e;Object.defineProperties(this,{id:{get:()=>t,enumerable:!0},docChanges:{get:()=>n,enumerable:!0},docs:{get:()=>r,enumerable:!0},type:{get:()=>o,enumerable:!0}}),this.requestId=a,this.watchId=s}}class Sl extends Error{constructor(e){super(`Watch Error ${JSON.stringify(e.msgData)} (requestid: ${e.requestId})`),this.isRealtimeErrorMessageError=!0,this.payload=void 0,this.payload=e}}const Tl=e=>e&&e.isRealtimeErrorMessageError,xl=new Set([xc.REBUILD_LOGGING_IN,xc.INIT_LOGGING_IN]),kl=e=>{0};class Pl{constructor(e){var t=this;this.watchId=void 0,this._parentFSM=void 0,this._fsm=void 0,this.envId=void 0,this.collectionName=void 0,this.query=void 0,this.limit=void 0,this.orderBy=void 0,this.queryType=void 0,this.send=void 0,this.login=void 0,this.isWSConnected=void 0,this.getWaitExpectedTimeoutLength=void 0,this.getEJSON=void 0,this.getServiceContext=void 0,this.onWatchStart=void 0,this.onWatchClose=void 0,this.timing=void 0,this.closeWatchInvoked=!1,this.userOnErrorInvoked=!1,this.debug=void 0,this.wsclient=void 0,this.listener=void 0,this._availableRetries=void 0,this._ackTimeoutId=void 0,this._loginInvalidated=!1,this._errors=[],this._parentFSMListener=void 0,this._FSMListener=void 0,this._wsDisconnectionTS=void 0,this.sessionInfo=void 0,this._waitExpectedTimeoutId=void 0,this._snapshotHistory=[],this._login=function(){var e=l()((function*(e){t._fsm.transition(kc.LOGIN_START);try{const n=yield t.login(t.envId,e||t._loginInvalidated,t.timing);t.envId||(t.envId=n.envId),t._fsm.transition(kc.LOGIN_SUCCESS,xl),t._loginInvalidated=!1}catch(e){t._errors.push(e),t._loginInvalidated=!0;try{t._fsm.transition(kc.LOGIN_FAIL,xl)}catch(e){console.warn("[realtime]",e)}}}));return function(t){return e.apply(this,arguments)}}(),this.initWatch=l()((function*(){const e=Date.now(),n=Lc();try{t._fsm.transition(kc.INIT_WATCH_START,xc.INIT_LOGGED_IN);const r=t.envId,o={watchId:t.watchId,requestId:n,msgType:"INIT_WATCH",msgData:{envId:r,collName:t.collectionName,query:t.query,limit:t.limit,orderBy:t.orderBy,queryType:t.queryType}},i=yield t.send({msg:o,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus();const{events:a,currEvent:s}=i.msgData;if(t.sessionInfo={queryID:i.msgData.queryID,currentEventId:s-1,currentDocs:[],currentEventTS:Date.now()},a.length>0){for(const e of a)e.ID=s;t.handleServerEvents(i)}else{t.sessionInfo.currentEventId=s;const e=new El({id:s,docChanges:[],docs:[],type:"init",EJSON:t.getEJSON(),requestId:i.requestId,watchId:t.watchId});_n((()=>t.listener.onChange(e)))(),t.scheduleSendACK(),t.debug&&t._snapshotHistory.push(e)}t.onWatchStart(t,t.sessionInfo.queryID),t._availableRetries.INIT_WATCH=2,t._wsDisconnectionTS=void 0,er(Bc,Vc,!0),Xn({apiName:"_realtime.initWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(kc.INIT_WATCH_SUCCESS)}catch(r){Xn({apiName:"_realtime.initWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(r,{operationName:"INIT_WATCH",requestId:n})}})),this.rebuildWatch=l()((function*(){const e=Date.now(),n=Lc();try{t._fsm.transition(kc.REBUILD_WATCH_START,xc.REBUILD_LOGGED_IN);const r=t.envId;if(!t.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");if(t._wsDisconnectionTS&&Date.now()-t._wsDisconnectionTS>.9*t.getServiceContext().appConfig.realtimeQueryEventCacheTimeout)throw new sn("query event cache timeout, ws has been disconnected for too long, PLEASE RECONNECT manually",{subtype:"queryEventCacheClientTimeout",retryable:!1});const o={watchId:t.watchId,requestId:n,msgType:"REBUILD_WATCH",msgData:{envId:r,collName:t.collectionName,queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}},i=yield t.send({msg:o,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus(),yield t.handleServerEvents(i),t._availableRetries.REBUILD_WATCH=2,t._wsDisconnectionTS=void 0,er(Bc,$c,!0),Xn({apiName:"_realtime.rebuildWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(kc.REBUILD_WATCH_SUCCESS)}catch(r){Xn({apiName:"_realtime.rebuildWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(r,{operationName:"REBUILD_WATCH",requestId:n})}})),this.handleWatchEstablishmentError=function(){var e=l()((function*(e,n){const r="INIT_WATCH"===n.operationName,o=o=>{const i=`${o||e} (${r?"initWatch":"rebuildWatch"} requestId ${n.requestId})`;if(t.closeWithError(new nn({errCode:r?tn.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:tn.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:i})),er(Bc,r?Gc:Hc,!0),!Tl(e)){if(cn(e)){switch(e.payload.subtype){case"totalConnectionTimeout":er(Bc,r?ml:yl,!0);break;case"queryEventCacheClientTimeout":r||er(Bc,vl,!0)}return}return dn(e)?void er(Bc,r?Al:bl,!0):void er(Bc,r?wl:Cl,!0)}switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":er(Bc,r?hl:fl,!0);break;default:er(Bc,r?gl:_l,!0)}};t._errors.push(e),t.handleCommonError(e,{onSignError:()=>{t._loginInvalidated=!0,t._fsm.transition(t.initialized?kc.REBUILD_WATCH_FAIL:kc.INIT_WATCH_FAIL)},onTimeoutError:e=>{e.payload&&!e.payload.retryable?o(e):t._fsm.transition(t.initialized?kc.REBUILD_WATCH_FAIL:kc.INIT_WATCH_FAIL)},onNotRetryableError:o,onCancelledError:e=>{t._fsm.transition(t.initialized?kc.REBUILD_WATCH_FAIL:kc.INIT_WATCH_FAIL)},onUnknownError:()=>{t._fsm.transition(t.initialized?kc.REBUILD_WATCH_FAIL:kc.INIT_WATCH_FAIL)}})}));return function(t,n){return e.apply(this,arguments)}}(),this.closeWatch=l()((function*(){t.closeWatchInvoked=!0;const e=t.sessionInfo?t.sessionInfo.queryID:"";if(t._fsm.currentState!==xc.CLOSED)try{t._fsm.transition(kc.CLOSE),yield t.sendCloseWatch()}catch(e){console.warn(`[realtime] non-fatal error while closing watch: ${e}`)}finally{t.sessionInfo=void 0,t.onWatchClose(t,e),t._cleanup()}})),this.sendCloseWatch=l()((function*(){const e={watchId:t.watchId,requestId:Lc(),msgType:"CLOSE_WATCH",msgData:null};yield t.send({msg:e})})),this.scheduleSendACK=()=>{this.clearACKSchedule(),this._ackTimeoutId=setTimeout((()=>{this._waitExpectedTimeoutId?this.scheduleSendACK():this.sendACK()}),1e4)},this.clearACKSchedule=()=>{this._ackTimeoutId&&clearTimeout(this._ackTimeoutId)},this.sendACK=l()((function*(){try{if(t._fsm.currentState!==xc.INIT_WATCH_SUCCESS&&t._fsm.currentState!==xc.REBUILD_WATCH_SUCCESS)return void t.scheduleSendACK();if(!t.sessionInfo)return void console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)");const e={watchId:t.watchId,requestId:Lc(),msgType:"CHECK_LAST",msgData:{queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}};yield t.send({msg:e}),t.scheduleSendACK()}catch(e){if(Tl(e)){const n=e.payload;switch(n.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return t._loginInvalidated=!0,void(t._fsm.currentState!==xc.INIT_WATCH_SUCCESS&&t._fsm.currentState!==xc.REBUILD_WATCH_SUCCESS||t._fsm.transition(kc.NEED_REBUILD_WATCH));case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return void t.closeWithError(new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:n.msgData.code}))}}t._availableRetries.CHECK_LAST&&t._availableRetries.CHECK_LAST>0?(t._availableRetries.CHECK_LAST--,t.scheduleSendACK()):t.closeWithError(new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:e}))}})),this.handleCommonError=(e,t)=>{if(Tl(e)){switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":default:return void t.onNotRetryableError(e)}}else{if(cn(e))return void t.onTimeoutError(e);if(dn(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId=`watchid_${+new Date}_${Math.random()}`,this._parentFSM=e.parentFSM,this.envId=e.envId,this.collectionName=e.collectionName,this.query=e.query,this.limit=e.limit,this.orderBy=e.orderBy,this.queryType=e.queryType,this.send=e.send,this.login=e.login,this.isWSConnected=e.isWSConnected,this.getWaitExpectedTimeoutLength=e.getWaitExpectedTimeoutLength,this.getEJSON=e.getEJSON,this.getServiceContext=e.getServiceContext,this.onWatchStart=e.onWatchStart,this.onWatchClose=e.onWatchClose,this.timing=e.timing,this.debug=e.debug,this._availableRetries={INIT_WATCH:2,REBUILD_WATCH:2,CHECK_LAST:2},this._fsm=new Rc({initialState:xc.UNINIT,states:Nc,history:!0}),this._subscribeParentFSMEvents(),this._subscribeFSMEvents(),this.listener=new Il({close:this.closeWatch,onChange:e.onChange,onError:e.onError,debug:this.debug,virtualClient:this}),this._parentFSM.currentState===es.CONNECTED&&this._login(),e.debug&&(this.wsclient=e.wsclient)}get initialized(){return Boolean(this.sessionInfo)}_cleanup(){this._parentFSM.unsubscribe(this._parentFSMListener)}_subscribeParentFSMEvents(){this._parentFSMListener=e=>{const{event:t,from:n,to:r}=e;if(this._fsm.currentState!==xc.CLOSED)if(t.type===ts.DISCONNECT||t.type===ts.CONNECTION_FAIL)switch(this._fsm.currentState){case xc.UNINIT:case xc.INIT_LOGGING_IN:case xc.INIT_LOGIN_FAIL:case xc.INIT_LOGGED_IN:case xc.INIT_WATCH_PENDING:case xc.INIT_WATCH_FAIL:this.closeWithError(t.error||new Error("websocket connection fail"),!1);break;default:t.type===ts.DISCONNECT?(this._wsDisconnectionTS||(this._wsDisconnectionTS=Date.now()),this._fsm.transition(kc.WS_DISCONNECTED)):this.closeWithError(t.error||new Error("websocket connection fail"),!1)}else if(t.type===ts.CONNECTION_SUCCESS)switch(this._fsm.currentState){case xc.UNINIT:case xc.PAUSED:this._login();break;case xc.CLOSED:break;default:console.warn(`[realtime] current state should not be ${this._fsm.currentState} (parent event ${t})`)}},this._parentFSM.subscribe(this._parentFSMListener)}_subscribeFSMEvents(){this._FSMListener=e=>{const{event:t,from:n,to:r}=e;switch(t.type){case kc.WS_CONNECTED:this._login().catch(kl);break;case kc.LOGIN_SUCCESS:n===xc.INIT_LOGGING_IN?this.initWatch().catch(kl):n===xc.REBUILD_LOGGING_IN?this.rebuildWatch().catch(kl):this.closeWithError(new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${n}`}));break;case kc.LOGIN_FAIL:n===xc.INIT_LOGGING_IN?this.useRetryTicket("INIT_WATCH")?this._login().catch(kl):this.closeWithError(new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):n===xc.REBUILD_LOGGING_IN?this.useRetryTicket("REBUILD_WATCH")?this._login().catch(kl):this.closeWithError(new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):this.closeWithError(new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${n}`}));break;case kc.INIT_WATCH_SUCCESS:this._availableRetries.INIT_WATCH=2,this._errors=[];break;case kc.INIT_WATCH_FAIL:this.useRetryTicket("INIT_WATCH")?this._login().catch(kl):this.closeWithError(new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case kc.REBUILD_WATCH_SUCCESS:this._availableRetries.REBUILD_WATCH=2,this._errors=[];break;case kc.REBUILD_WATCH_FAIL:this.useRetryTicket("REBUILD_WATCH")?this._login().catch(kl):this.closeWithError(new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case kc.NEED_REBUILD_WATCH:this._login().catch(kl)}},this._fsm.subscribe(this._FSMListener)}useRetryTicket(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,!0)}assertAsyncTaskStatus(){if(this.closeWatchInvoked)throw new ln("closeWatch",{subtype:"closeWatch"});switch(this._fsm.currentState){case xc.PAUSED:throw new ln("pause",{subtype:"pause"});case xc.CLOSED:throw new ln("close",{subtype:"close"})}}handleServerEvents(e){var t=this;return l()((function*(){try{t.scheduleSendACK(),yield t._handleServerEvents(e),t._postHandleServerEventsValidityCheck(e)}catch(e){throw er(Bc,il,!0),e}}))()}_handleServerEvents(e){var t=this;return l()((function*(){const{requestId:n}=e,{events:r}=e.msgData;if(!r.length||!t.sessionInfo)return;const o=t.sessionInfo;let i;try{i=r.map(Dl)}catch(e){return void t.closeWithError(new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:e}))}let a=[...o.currentDocs],s=!1;for(let r=0,c=i.length;r<c;r++){const l=i[r];if(o.currentEventId>=l.id)!i[r-1]||l.id>i[r-1].id?er(Bc,al,!0):(console.error(`[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ${n})`),er(Bc,sl,!0));else if(o.currentEventId===l.id-1){switch(l.dataType){case"update":if(!l.doc)switch(l.queueType){case"update":case"dequeue":{const e=a.find((e=>e._id===l.docId));if(e){const t=Tc(e);if(l.updatedFields)for(const e in l.updatedFields)vs(t,e,l.updatedFields[e]);if(l.removedFields)for(const e of l.removedFields)Es(t,e);l.doc=t}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated."),er(Bc,cl,!0);break}case"enqueue":{const n=new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId ${e.requestId})`});throw t.closeWithError(n),n}}break;case"limit":if(!l.doc)switch(l.queueType){case"dequeue":{const e=a.find((e=>e._id===l.docId));e?l.doc=e:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType dequeue queueType event where no doc is associated.");break}}break;case"replace":if(!l.doc){const n=new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="replace" (requestId ${e.requestId})`});throw t.closeWithError(n),n}break;case"remove":{const e=a.find((e=>e._id===l.docId));e?l.doc=e:(console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated."),er(Bc,ll,!0));break}}switch(l.queueType){case"init":s?a.push(l.doc):(s=!0,a=[l.doc]);break;case"enqueue":a.push(l.doc);break;case"dequeue":{const e=a.findIndex((e=>e._id===l.docId));e>-1?a.splice(e,1):(console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated."),er(Bc,dl,!0));break}case"update":{const e=a.findIndex((e=>e._id===l.docId));e>-1?a[e]=l.doc:(console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated."),er(Bc,ul,!0));break}}if(r===c-1||i[r+1]&&i[r+1].id!==l.id){const e=[...a],o=i.slice(0,r+1).filter((e=>e.id===l.id));t.sessionInfo.currentEventId=l.id,t.sessionInfo.currentDocs=a,t.sessionInfo.currentEventTS=Date.now();const s=new El({id:l.id,type:"init"===o[0].queueType?"init":void 0,docChanges:t.getEJSON().deserialize(o),docs:t.getEJSON().deserialize(e),EJSON:t.getEJSON(),requestId:n,watchId:t.watchId});_n((()=>t.listener.onChange(s)))(),t.debug&&t._snapshotHistory.push(s)}}else er(Bc,pl,!0),t._fsm.transition(kc.NEED_REBUILD_WATCH)}}))()}_postHandleServerEventsValidityCheck(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn(`[realtime listener] internal non-fatal error: client eventId ${this.sessionInfo.currentEventId} does not match with server event id after server event handling ${e.msgData.currEvent} (requestId ${e.requestId})`)):console.error(`[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur. (requestId ${e.requestId})`)}clearWaitExpectedEvent(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)}onMessage(e){switch(this._fsm.currentState){case xc.INIT_WATCH_SUCCESS:case xc.REBUILD_WATCH_SUCCESS:break;case xc.PAUSED:if("ERROR"!==e.msgType)return;break;default:return void console.warn(`[realtime listener] internal non-fatal error: unexpected message received while state is ${this._fsm.currentState}`)}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":0,this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((()=>{this._fsm.transition(kc.NEED_REBUILD_WATCH)}),this.getWaitExpectedTimeoutLength()));break;case"ERROR":this.closeWithError(new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:`${e.msgData.code} - ${e.msgData.message}`}));break;default:0}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")}closeWithError(e,t=!0){if(this._fsm.currentState!==xc.CLOSED&&this._fsm.transition(kc.CLOSE),this.userOnErrorInvoked)return;const n=this._fsm.getHistoryRepresentation({limit:20});rn(e)?(e.errMsg+=`\nhistory ${n}`,e.history=n):e&&((e=new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`${e} \nhistory ${n}`})).history=n),this.clearACKSchedule(),_n((()=>this.listener.onError(e)))(),this.userOnErrorInvoked=!0,this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),t&&this.sendCloseWatch().catch(kl),this.sessionInfo=void 0}}function Dl(e){const t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=e.removedFields?JSON.parse(e.removedFields):JSON.parse(e.RemovedFields))),t}const Ol={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3004:{code:3004,name:"Client Reconnect on Server Upgrade",description:"The client is terminating the connection in response to server upgrade"},3050:{code:3050,name:"Server Close Unauthenticated Idle Connection",description:"The server is terminating the connection because the connection is idle and not authenticated"},3051:{code:3051,name:"Server Upgrade",description:"The server is terminating the connection because it is upgrading"},3052:{code:3052,name:"Server Requires Authentication",description:"The server is terminating the connection because it has not received authentication message as the connection's first message"}};let Nl;!function(e){e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.ReconnectOnServerUpgrade=3004]="ReconnectOnServerUpgrade",e[e.UnauthenticatedIdleConnection=3050]="UnauthenticatedIdleConnection",e[e.ServerUpgrade=3051]="ServerUpgrade",e[e.AuthenticationRequired=3052]="AuthenticationRequired"}(Nl||(Nl={}));const Rl=(e,t)=>{const n=Ol[e],r=n?`${n.name}, code ${e}, reason ${t||n.description}`:`code ${e}`;return new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:r})},Ml=1;class Ll{constructor(e){var t=this;this._fsm=void 0,this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._totalConnectionTimeoutId=void 0,this._serviceContext=void 0,this._ws=void 0,this._lastPingSendTS=void 0,this._pingFailed=0,this._pongMissed=0,this._pingTimeoutId=void 0,this._pongTimeoutId=void 0,this._logins=new Map,this._signatures=new Map,this._wsResponseWait=new Map,this._rttObserved=[],this._closedWatches=new Set,this._EJSON=void 0,this._defaultEnvId=void 0,this._connectionEnvId=void 0,this.initWebSocketConnection=function(){var e=l()((function*(e,n=t._maxReconnect){let r;if(t._EJSON||(r=function(){return Bl.apply(this,arguments)}().then((e=>t._EJSON=e))),t._fsm.currentState!==es.DISCONNECTED)return;t._fsm.transition(ts.CONNECTION_START),t._logins=new Map,t._wsResponseWait=new Map;let o=!1;const i=[];let a=!1;if(!t._totalConnectionTimeoutId&&t._totalConnectionTimeout&&t._totalConnectionTimeout!==1/0){const e=t._totalConnectionTimeout;t._totalConnectionTimeoutId=setTimeout((()=>{a=!0,t._totalConnectionTimeoutId=void 0;const n=new sn(`reconnect timeout (reach totalConnectionTimeout ${e}s)`,{subtype:"totalConnectionTimeout",retryable:!1});er(Bc,el,!0),t._fsm.transition({type:ts.CONNECTION_FAIL,error:n})}),1e3*e)}for(let n=t._maxReconnect;n>=0;n--)try{if(!(yield wr()).isConnected){if(!e)return void t._fsm.transition({type:ts.CONNECTION_FAIL,error:new Error("network offline")});if(yield new Promise((e=>{vr&&vr.isConnected?e():br.push(e)})),0===t._virtualWSClient.size)return void t.clearTotalReconnectTimeout();Wr()&&(yield yr(100))}if(a)return;0;const n=yield t.getSignature(t._connectionEnvId);if(a)return;0;const i=Date.now();if(yield new Promise(((e,r)=>{t._ws=Rn(t._context.identifiers)._socketSkipCheckDomainFactory().connectSocket({url:n.wsUrl,header:{"content-type":"application/json"},perMessageDeflate:!0,success:e,fail:r})})),a)return;if(Xn({apiName:"_realtime.connectSocket",apiStartTime:i,apiEndTime:Date.now()}),yield t.initWebSocketEvent(),a)return;if(r&&(yield r,a))return;o=!0;break}catch(e){if(i.unshift(e),e.errCode===tn.TCB_PERMISSION_DENIED)break;const{isConnected:n}=yield wr();if(a)return;if(n&&(yield yr(t._reconnectInterval),a))return;if(Wr()&&(yield yr(0),a))return}if(o)return t.clearTotalReconnectTimeout(),er(Bc,e?jc:Fc,!0),void t._fsm.transition(ts.CONNECTION_SUCCESS);t.clearTotalReconnectTimeout(),er(Bc,e?Uc:Wc,!0),e?t._fsm.transition({type:ts.CONNECTION_FAIL,error:new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(i.map((e=>e+"")))}`})}):t._fsm.transition({type:ts.CONNECTION_FAIL,error:new nn({errCode:tn.SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(i.map((e=>e+"")))}`})})}));return function(t){return e.apply(this,arguments)}}(),this.initWebSocketEvent=()=>new Promise(((e,t)=>{if(!this._ws)throw new Error("can not initWebSocketEvent, ws not exists");let n=!1;this._ws.onOpen((t=>{this._context.debug&&console.warn("[realtime] ws event: open",t),n=!0,e()}));let r=null;this._ws.onError((e=>{r=e,this._logins=new Map,n?(this._context.debug&&console.error("[realtime] ws event: error",e),this.clearHeartbeat(),er(Bc,Qc,!0)):(this._context.debug&&console.error("[realtime] ws open failed with ws event: error",e),t(e),er(Bc,Zc,!0))})),this._ws.onClose((e=>{this._logins=new Map,this.clearHeartbeat();const t=r||Rl(e.code);switch(e.code){case Nl.ReconnectOnServerUpgrade:case Nl.ReconnectWebSocket:case Nl.NoRealtimeListeners:this._fsm.transition({type:ts.DISCONNECT,error:t});break;case Nl.HeartbeatPingError:case Nl.HeartbeatPongTimeoutError:case Nl.NormalClosure:case Nl.AbnormalClosure:this._maxReconnect>0?(this._fsm.transition({type:ts.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:ts.CONNECTION_FAIL,error:t}),e.code===Nl.HeartbeatPingError?er(Bc,zc,!0):e.code===Nl.HeartbeatPongTimeoutError?er(Bc,qc,!0):er(Bc,Jc,!0);break;case Nl.UnauthenticatedIdleConnection:this._fsm.transition({type:ts.CONNECTION_FAIL,error:Rl(e.code,e.reason)}),er(Bc,Kc,!0);break;case Nl.ServerUpgrade:this._fsm.transition({type:ts.DISCONNECT,error:t}),this.initWebSocketConnection(!0),er(Bc,tl,!0);break;default:this._maxReconnect>0?(this._fsm.transition({type:ts.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:ts.CONNECTION_FAIL,error:Rl(e.code,e.reason)}),er(Bc,Xc,!0)}er(Bc,Yc,!0)}));const o={timing:{},startKey:"apiStartTime",endKey:"apiEndTime",samplePicker:ar,autoReport:"_realtime.onSocketMessage"};this._ws.onMessage(ir(this.onSocketMessage,o)),this.heartbeat()})),this.isWSConnected=()=>Boolean(this._ws&&this._ws.readyState===Ml),this.onSocketMessage=e=>{const t=e.data;let n;this.heartbeat();try{n=JSON.parse(t)}catch(e){throw new Error(`[realtime] onMessage parse res.data error: ${e}`)}this._context.debug&&console.log(`[realtime] onMessage ${n.msgType} (${(new Date).toLocaleString()})`,n);const r=this._wsResponseWait.get(n.requestId);if(r){try{"ERROR"===n.msgType?r.reject(new Sl(n)):r.resolve(n)}catch(e){this._context.debug&&console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",e)}finally{this._wsResponseWait.delete(n.requestId)}if(r.skipOnMessage)return}if("PONG"===n.msgType){if(this._lastPingSendTS){const e=Date.now()-this._lastPingSendTS;if(e>1e4)return void(this._context.debug&&console.warn(`[realtime] untrusted rtt observed: ${e}`));this._rttObserved.length>=3&&this._rttObserved.splice(0,this._rttObserved.length-3+1),this._rttObserved.push(e)}return}let o=n.watchId&&this._watchIdClientMap.get(n.watchId);if(o)o.onMessage(n);else switch(n.watchId?this._closedWatches.has(n.watchId)?er(Bc,nl,!0):er(Bc,rl,!0):er(Bc,ol,!0),n.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":o=this._queryIdClientMap.get(n.msgData.queryID),o&&o.onMessage(n)}},this.login=function(){var e=l()((function*(e,n,r){if(e=e||t._context.env||t._defaultEnvId,!n)if(e){const n=t._logins.get(e);if(n){if(n.loggedIn&&n.loginResult)return n.loginResult;if(n.loggingInPromise)return n.loggingInPromise}}else{const e=t._logins.get("");if(e&&e.loggingInPromise)return e.loggingInPromise}const o=new Promise(function(){var o=l()((function*(o,i){try{const a=yield r?ir(t.getSignature(e,n),{timing:r,startKey:"tunnelStartTime",endKey:"tunnelEndTime",condition:{emptyKey:!0}}):t.getSignature(e,n),s=(()=>{const e=Rn().wx;let t,n,r;if(e&&e.version){t=e.version.version,n=e.version.updateTime;const o=e.version.updateTime.match(/^(\d+)\.(\d+)\.(\d+)/);return r=o?`${o[1]}-${o[2]}-${o[3]}`:"unknown",{version:t,updateTime:n,updateDateInDashes:r}}return{version:"unknown",updateTime:"unknown",updateDateInDashes:"unknown"}})(),c={watchId:void 0,requestId:Lc(),msgType:"LOGIN",msgData:{envId:a.envId,signStr:a.signStr,secretVersion:a.secretVersion,referrer:"mp",sdkVersion:s.version,dataVersion:s.updateDateInDashes}},l=yield t.send({msg:c,waitResponse:!0,skipOnMessage:!0,timeout:5e3});l.msgData.code?i(new Error(`${l.msgData.code} ${l.msgData.message}`)):o({envId:a.envId})}catch(e){i(e)}}));return function(e,t){return o.apply(this,arguments)}}());let i=e&&t._logins.get(e);const a=Date.now();i?(i.loggedIn=!1,i.loggingInPromise=o,i.loginStartTS=a):(i={loggedIn:!1,loggingInPromise:o,loginStartTS:a},t._logins.set(e||"",i));try{const n=yield o,r=t._logins.get(e||"");if(r&&r===i&&r.loginStartTS===a)return i.loggedIn=!0,i.loggingInPromise=void 0,i.loginStartTS=void 0,i.loginResult=n,n;if(r){if(r.loggedIn&&r.loginResult)return r.loginResult;if(r.loggingInPromise)return r.loggingInPromise;throw new Error("ws unexpected login info")}throw new Error("ws login info reset")}catch(e){throw i.loggedIn=!1,i.loggingInPromise=void 0,i.loginStartTS=void 0,i.loginResult=void 0,e}}));return function(t,n,r){return e.apply(this,arguments)}}(),this.getSignature=function(){var e=l()((function*(e,n){if(e=e||t._context.env||t._defaultEnvId,!n&&e&&t._signatures.has(e)){const n=t._signatures.get(e);if(Date.now()<n.expireTS)return n}else 0;const r=Date.now()+6e4,o=yield function(e,t){return ea.apply(this,arguments)}(t._context,e);if(Date.now()-r>6e4)return t.getSignature(e,n);const i=s()(s()({},o),{},{expireTS:r});return t._signatures.set(i.envId,i),e||(t._defaultEnvId=i.envId),i}));return function(t,n){return e.apply(this,arguments)}}(),this.getWaitExpectedTimeoutLength=()=>this._rttObserved.length?this._rttObserved.reduce(((e,t)=>e+t))/this._rttObserved.length*1.5:5e3,this.ping=l()((function*(){const e={watchId:void 0,requestId:Lc(),msgType:"PING",msgData:null};yield t.send({msg:e}),t._context.debug&&console.log("ping sent")})),this.send=e=>new Promise(function(){var n=l()((function*(n,r){if(t._fsm.currentState!==es.CONNECTED)return r(new Error("websocket not connected"));let o,i=!1,a=!1;const s=e=>{i=!0,o&&clearTimeout(o),n(e)},c=e=>{a=!0,o&&clearTimeout(o),r(e)};e.timeout&&(o=setTimeout(l()((function*(){i&&a||(yield yr(0),i&&a||c(new sn("wsclient.send timedout")))})),e.timeout));try{if(t._context.debug&&console.log(`[realtime] ws send ${e.msg.msgType} (${(new Date).toLocaleString()}): `,e),!t._ws)return void c(new Error("invalid state: ws connection not exists, can not send message"));if(t._ws.readyState!==Ml)return void c(new Error(`ws readyState invalid: ${t._ws.readyState}, can not send message`));e.waitResponse&&t._wsResponseWait.set(e.msg.requestId,{resolve:s,reject:c,skipOnMessage:e.skipOnMessage}),t._ws.send({data:JSON.stringify(e.msg),success:t=>{e.waitResponse||s(t)},fail:n=>{c(n),e.waitResponse&&t._wsResponseWait.delete(e.msg.requestId)}})}catch(e){c(e)}}));return function(e,t){return n.apply(this,arguments)}}()),this.onWatchStart=(e,t)=>{this._queryIdClientMap.set(t,e)},this.onWatchClose=(e,t)=>{t&&this._queryIdClientMap.delete(t),this._watchIdClientMap.delete(e.watchId),this._virtualWSClient.delete(e),this._closedWatches.add(e.watchId),this._virtualWSClient.size||this.close(Nl.NoRealtimeListeners)},this.getEJSON=()=>this._EJSON,this._fsm=new Rc({initialState:es.DISCONNECTED,states:ns}),this._serviceContext=e.serviceContext}get _context(){return this._serviceContext}get _maxReconnect(){return this._context.appConfig.realtimeMaxReconnect}get _reconnectInterval(){return this._context.appConfig.realtimeReconnectInterval}get _totalConnectionTimeout(){return this._context.appConfig.realtimeTotalConnectionTimeout}heartbeat(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout(l()((function*(){try{if(!t._ws||t._ws.readyState!==Ml)return;t._lastPingSendTS=Date.now(),yield t.ping(),t._pingFailed=0,t._pongTimeoutId=setTimeout((()=>{t._context.debug&&console.error("pong timed out"),t._pongMissed<2?(t._pongMissed++,t.heartbeat(!0)):t.close(Nl.HeartbeatPongTimeoutError)}),t._context.appConfig.realtimePongWaitTimeout)}catch(e){t._pingFailed<2?(t._pingFailed++,t.heartbeat()):t.close(Nl.HeartbeatPingError)}})),e?0:this._context.appConfig.realtimePingInterval)}clearHeartbeat(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)}clearTotalReconnectTimeout(){this._totalConnectionTimeoutId&&clearTimeout(this._totalConnectionTimeoutId)}close(e){this.clearHeartbeat(),this._ws&&(this._ws.close({code:e,reason:Ol[e].name}),this._ws=void 0)}watch(e){const t={apiStartTime:Date.now()};let n=!1;const r=()=>{Xn(s()(s()({},t),{},{apiName:e.reportAPIName}))},o=e.onChange,i=e.onError;this._fsm.currentState===es.DISCONNECTED&&(this._connectionEnvId=e.envId,this.initWebSocketConnection(!1));const a=new Pl(s()(s()({},e),{},{parentFSM:this._fsm,send:this.send,login:this.login,isWSConnected:this.isWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,getEJSON:this.getEJSON,getServiceContext:()=>this._context,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,timing:t,debug:this._context.debug,wsclient:this,onChange:l,onError:d}));this._virtualWSClient.add(a),this._watchIdClientMap.set(a.watchId,a);const c=a.listener;return c;function l(...e){n||(n=!0,t.apiEndTime=Date.now(),r()),u(),_n((()=>c.onChange.apply(this,e)))()}function d(...e){n||(n=!0,t.apiEndTime=Date.now(),r()),u(),_n((()=>c.onError.apply(this,e)))()}function u(){c.onChange===l&&(c.onChange=o),c.onError===d&&(c.onError=i)}}}function Bl(){return(Bl=l()((function*(){const e=Date.now(),t=i(795);return Xn({apiName:"_realtime.importBSON",apiStartTime:e,apiEndTime:Date.now()}),t.EJSON}))).apply(this,arguments)}let Fl;!function(e){e.ASC="asc",e.DESC="desc"}(Fl||(Fl={}));const Wl=e=>{class t{constructor(t,r){if(this.collectionName=void 0,this._query=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(Sn(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Ll({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(s()(s()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:this.collectionName,query:JSON.stringify(e.engine.QuerySerializer.encode(this._query.where||{})),limit:this._query.limit,orderBy:this._query.order?this._query.order.reduce(((e,t)=>(e[t.fieldPath]=t.order,e)),{}):void 0,queryType:Bi.WHERE,reportAPIName:"cloud.db.collection.watch"}))),!t)throw new nn({errCode:tn.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"collectionName must be provided"});this.collectionName=t,this._query=new n(r),Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field=r&&r.field||{}}field(e){return Tn(e,"object","field"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{field:e}))}where(e){return Tn(e,"condition","where"),this._query.where?new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{where:ca.and(this._query.where,e)})):new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{where:e}))}orderBy(e,n){return Tn(e,"fieldPath","orderBy"),Tn(n,"order","orderBy"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{order:[...this._query.order||[],{fieldPath:e,order:n}]}))}limit(e){return Tn(e,"max","limit"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{limit:e}))}skip(e){return Tn(e,"offset","skip"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{offset:e}))}get(t){const n="collection.get",r={apiStartTime:+new Date},o=()=>$i({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:Bi.WHERE,options:Ja(this,e),instanceContext:e,timing:r,explain:null==t?void 0:t.explain});const i=En(t),a=new Promise(function(){var e=l()((function*(e,i){try{const i=yield o();if(null!=t&&t.explain&&Wr())return void e(i);e({data:i.list,errMsg:lr(n)})}catch(e){i(on(e,n))}finally{Xn(s()(s()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{Cn(n,t,e)})).catch((e=>{In(n,t,e)}))}update(t){const n="collection.update",r={apiStartTime:+new Date},o=()=>{if(Tn(t,"options","update"),Sn(t,{data:"object"}),!this._query.where)throw new nn({errCode:-1,errMsg:"query condition must be provided"})},i=()=>Zi({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),data:e.engine.UpdateSerializer.encode(t.data),queryType:Bi.WHERE,options:{multi:!1!==t.multi,merge:!0},instanceContext:e,timing:r,explain:t.explain});const a=En(t),c=new Promise(function(){var e=l()((function*(e,a){try{o();const a=yield i();if(null!=t&&t.explain&&Wr())return e(a);e({stats:{updated:a.updated},errMsg:lr(n)})}catch(e){a(on(e,n))}finally{Xn(s()(s()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!a)return c;c.then((e=>{Cn(n,t,e)})).catch((e=>{In(n,t,e)}))}remove(t){const n="collection.remove",r={apiStartTime:+new Date},o=()=>{if(!this._query.where||0===Object.keys(this._query.where).length)throw new nn({errCode:-1,errMsg:"query condition must be provided and not be empty"})},i=()=>Vi({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:Bi.WHERE,options:{multi:!0},instanceContext:e,timing:r,explain:null==t?void 0:t.explain});const a=En(t),c=new Promise(function(){var e=l()((function*(e,a){try{o();const a=yield i();if(null!=t&&t.explain&&Wr())return e(a);e({stats:{removed:a.removed||0},errMsg:lr(n)})}catch(e){a(on(e,n))}finally{Xn(s()(s()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!a)return c;c.then((e=>{Cn(n,t,e)})).catch((e=>{In(n,t,e)}))}count(t){const n="collection.count",r={apiStartTime:+new Date},o=()=>qi({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:Bi.WHERE,instanceContext:e,timing:r,explain:null==t?void 0:t.explain});const i=En(t),a=new Promise(function(){var e=l()((function*(e,i){try{const i=yield o();if(null!=t&&t.explain&&Wr())return e(i);e({total:i.total,errMsg:lr(n)})}catch(e){i(on(e,n))}finally{Xn(s()(s()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{Cn(n,t,e)})).catch((e=>{In(n,t,e)}))}toJSON(){}}class n{constructor(e){this.where=void 0,this.offset=void 0,this.limit=void 0,this.order=void 0,this.field=void 0,this.where=e&&e.where,this.offset=e&&e.offset,this.limit=e&&e.limit,this.order=e&&e.order,this.field=e&&e.field}getProperties(){return{where:this.where,offset:this.offset,limit:this.limit,order:this.order,field:this.field}}}return t},jl="document.get",Ul="document.update",Vl="document.set",Gl="document.remove",$l=e=>class{constructor(t,n){if(this._id=void 0,this.collection=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(Sn(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Ll({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(s()(s()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:this.collection.collectionName,query:JSON.stringify({_id:this._id}),queryType:Bi.DOC,reportAPIName:"cloud.db.document.watch"}))),this.collection=t,this._id=n,null==n)throw new nn({errCode:tn.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"docId must not be null or undefined"});Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field={}}field(e){return Tn(e,"object","field"),Sn(e,"object","field"),this._field=e,this}get(t){var n=this;const r={apiStartTime:+new Date},o=()=>$i({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),options:{projection:e.engine.ProjectionSerializer.encode(this._field)},queryType:Bi.DOC,instanceContext:e,timing:r});const i=En(t),a=new Promise(function(){var e=l()((function*(e,t){try{const t=n._id,i=yield o();if(!i.list||!i.list.length)throw new Error(`cannot find document with _id ${t}, please make sure that the document exists and you have the corresponding access permission`);e({data:i.list[0],errMsg:lr(jl)})}catch(e){t(on(e,jl))}finally{Xn(s()(s()({},r),{},{apiEndTime:+new Date,apiName:"cloud.db.document.get"}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{Cn(jl,t,e)})).catch((e=>{In(jl,t,e)}))}set(t){const n={apiStartTime:+new Date},r=()=>Yi({env:e.database.config.env,collectionName:this.collection.collectionName,_id:this._id,data:e.engine.encodeInternalDataType(t.data),options:{},instanceContext:e,timing:n});const o=En(t),i=new Promise(function(){var e=l()((function*(e,o){try{Sn(t,{data:"object"}),kn({name:"options.data",target:t.data});const o=yield r();e({_id:o._id,errMsg:lr(Vl),stats:{updated:o.updated,created:o.created}})}catch(e){o(on(e,Vl))}finally{Xn(s()(s()({},n),{},{apiEndTime:+new Date,apiName:"cloud.db.document.set"}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!o)return i;i.then((e=>{Cn(Vl,t,e)})).catch((e=>{In(Vl,t,e)}))}update(t){const n={apiStartTime:+new Date},r=()=>Zi({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),data:e.engine.UpdateSerializer.encode(t.data),queryType:Bi.DOC,options:{multi:!1,merge:!1},instanceContext:e,timing:n});const o=En(t),i=new Promise(function(){var e=l()((function*(e,o){try{Sn(t,{data:"object"}),kn({name:"options.data",target:t.data});e({stats:{updated:(yield r()).updated},errMsg:lr(Ul)})}catch(e){o(on(e,Ul))}finally{Xn(s()(s()({},n),{},{apiEndTime:+new Date,apiName:"cloud.db.document.update"}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!o)return i;i.then((e=>{Cn(Ul,t,e)})).catch((e=>{In(Ul,t,e)}))}remove(t){var n=this;const r={apiStartTime:+new Date},o=()=>Vi({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),queryType:Bi.DOC,options:{},instanceContext:e,timing:r});const i=En(t),a=new Promise(function(){var e=l()((function*(e,t){try{const t=n._id,i=yield o();if(0===i.removed)throw new Error(`cannot remove document with _id ${t}, please make sure that the document exists and you have the corresponding Write permission`);e({stats:{removed:i.removed||0},errMsg:lr(Gl)})}catch(e){t(on(e,Gl))}finally{Xn(s()(s()({},r),{},{apiEndTime:+new Date,apiName:"cloud.db.document.remove"}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{Cn(Gl,t,e)})).catch((e=>{In(Gl,t,e)}))}toJSON(){}},Hl=e=>{const t=Wl(e),n=$l(e),r=ta(e);return class extends t{constructor(e){super(e),this.collectionName=void 0,this.__safe_props__=void 0,this.collectionName=e}doc(e){if(null==e)throw on({errCode:-1,errMsg:"docId must not be empty"},"collection.doc");return new n(this,e)}add(t){const n="collection.add",r={apiStartTime:+new Date},o=()=>ji({env:e.database.config.env,collectionName:this.collectionName,data:e.engine.encodeInternalDataType(t.data),instanceContext:e,timing:r});const i=En(t),a=new Promise(function(){var e=l()((function*(e,i){try{Sn(t,{data:"object"});e({_id:(yield o())._id,errMsg:lr(n)})}catch(e){i(on(e,n))}finally{Xn(s()(s()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${n}`}))}}));return function(t,n){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{Cn(n,t,e)})).catch((e=>{In(n,t,e)}))}aggregate(){return new r(this,[])}}},Zl=function(e){return new Ql(e)};class Ql{constructor(e){this.regexp=void 0,this.options=void 0,Sn(e,{regexp:"string"},"RegExp options"),e.options&&Sn(e.options,"string"),this.regexp=e.regexp,this.options=e.options||""}get _internalType(){return mi}toJSON(){return{$regex:this.regexp,$options:this.options}}}const Yl={},zl={};for(const e in Ci)Yl[Ci[e]]=`$${Ci[e]}`;for(const e in yi)Yl[yi[e]]=`$${yi[e]}`;for(const e in xi)Yl[xi[e]]=`$${xi[e]}`;for(const e in Di)zl[Di[e]]=`$${Di[e]}`;function ql(e){return Yl[e]||`$${e.toLowerCase()}`}function Jl(e){return zl[e]||`$${e.toLowerCase()}`}Yl[Ci.NEQ]="$ne",Yl[xi.REMOVE]="$unset",Yl[xi.SHIFT]="$pop",Yl[xi.UNSHIFT]="$push",Yl[Ci.GEO_NEAR]="$nearSphere",Yl[Ci.GEO_WITHIN]="$geoWithin",Yl[Ci.GEO_INTERSECTS]="$geoIntersects";class Kl{static encodeStages(e){return(new Xl).encodeStages(e)}static encode(e){return(new Xl).encodeAny(e)}}class Xl{encodeStages(e){return e.map((e=>this.encodePipelineStage(e)))}encodeAny(e){return Ya(e)?ia(e)?this.encodePipeline(e):aa(e)?this.encodePipelineStage(e):Ni(e)?this.encodeAggregateCommand(e):za(e):Qt(e)?this.encodeObject(e):Jt(e)?e.map((e=>this.encodeAny(e))):e}encodeObject(e){const t={};for(const n in e)t[n]=this.encodeAny(e[n]);return t}encodePipeline(e){return e._stages.map((e=>this.encodeAny(e)))}encodePipelineStage(e){const t=`$${e.stage}`;switch(e.stage){case"match":return{[t]:ed.encode(e.val)};default:return{[t]:this.encodeAny(e.val)}}}encodeAggregateCommand(e){return{[Jl(e.operator)]:this.encodeAny(e.operands[0])}}}class ed{constructor(){}static encode(e){return td(e)}}const td=e=>wi(e)?rd(e):Ti(e)?od(e):ia(e)||Ni(e)||aa(e)?Kl.encode(e):Qt(e)?nd(e):za(e),nd=e=>{const t=Ha(e),n=[],r={[yi.OR]:0,[yi.NOR]:0,[yi.AND]:0,[yi.NOT]:0};for(const e in t){const o=t[e];if(wi(o))switch(o.operator){case yi.OR:case yi.NOR:case yi.AND:r[o.operator]++,n.push({[ql(o.operator)]:o.operands.map((t=>td({[e]:t})))});break;case yi.NOT:{const t=o.operands[0];if(wi(t))switch(t.operator){case yi.AND:r[yi.OR]++,n.push(rd(new bi(yi.OR,t.operands.map((t=>({[e]:new bi(yi.NOT,[t])}))))));break;case yi.OR:r[yi.NOR]++,n.push(rd(new bi(yi.NOR,t.operands.map((t=>({[e]:t}))))));break;case yi.NOR:r[yi.OR]++,n.push(rd(new bi(yi.OR,t.operands.map((t=>({[e]:t}))))));break;case yi.NOT:n.push(td({[e]:t.operands[0]}))}else n.push({[e]:rd(o)});break}}else Ti(o)?n.push({[e]:od(o)}):n.push({[e]:za(o)})}return id(n)},rd=e=>{switch(e.operator){case yi.AND:if(e.operands.every((e=>Ti(e)))){const t={};for(const n of e.operands)Object.assign(t,od(n));return t}return{[ql(e.operator)]:e.operands.map(td)};case yi.OR:case yi.NOR:return{[ql(e.operator)]:e.operands.map(td)};case yi.NOT:{const t=ql(e.operator),n=e.operands[0];return{[t]:td(n)}}default:return{[ql(e.operator)]:e.operands.map(td)}}},od=e=>{const t=ql(e.operator);switch(e.operator){case Ci.EQ:case Ci.NEQ:case Ci.LT:case Ci.LTE:case Ci.GT:case Ci.GTE:case Ci.EXISTS:case Ci.SIZE:return{[t]:za(e.operands[0])};case Ci.IN:case Ci.NIN:case Ci.MOD:return{[t]:za(e.operands)};case Ci.ALL:return{[t]:e.operands.map(td)};case Ci.ELEM_MATCH:case Ci.EXPR:return{[t]:td(e.operands[0])};case Ci.GEO_NEAR:return{[t]:{$geometry:za(e.operands[0].geometry),$maxDistance:e.operands[0].maxDistance,$minDistance:e.operands[0].minDistance}};case Ci.GEO_WITHIN:{const n={};return e.operands[0].geometry&&(n.$geometry=za(e.operands[0].geometry)),e.operands[0].centerSphere&&(n.$centerSphere=za(e.operands[0].centerSphere)),{[t]:n}}case Ci.GEO_INTERSECTS:return{[t]:{$geometry:za(e.operands[0].geometry)}};default:return{[t]:e.operands.length>1?e.operands.map(td):td(e.operands[0])}}},id=e=>{const t={$and:0,$or:0,$nor:0};for(const n of e)n.$and&&t.$and++,n.$or&&t.$or++,n.$nor&&t.$nor++;const n=t.$and>1||t.$or>1||t.$nor>1;let r=!1;const o={};for(const t of e)for(const e in t){const i=t[e];n?r?o.$and.push(t):"$and"===e||"$or"===e||"$nor"===e?(r=!0,o.$and=[t]):o[e]=i:o[e]=i}return o};class ad{constructor(){}static encode(e){return sd(e)}}const sd=e=>cd(e),cd=e=>{const t=Ha(e),n={};for(const e in t){const r=t[e];if(Pi(r)){const t=ql(r.operator);switch(n[t]||(n[t]={}),r.operator){case xi.SET:case xi.INC:case xi.MUL:case xi.MIN:case xi.MAX:case xi.RENAME:case xi.BIT:n[t][e]=za(r.operands[0]);break;case xi.REMOVE:n[t][e]="";break;case xi.PUSH:{let o;o=1===r.operands.length&&Qt(r.operands[0])?{$each:r.operands[0].each.map(za),$position:r.operands[0].position,$slice:r.operands[0].slice,$sort:r.operands[0].sort}:{$each:r.operands.map(za)},n[t][e]=o;break}case xi.UNSHIFT:{const o={$each:r.operands.map(za),$position:0};n[t][e]=o;break}case xi.POP:n[t][e]=1;break;case xi.SHIFT:n[t][e]=-1;break;case xi.ADD_TO_SET:n[t][e]=Qt(r.operands[0])&&r.operands[0].each?{$each:r.operands[0].each}:r.operands[0];break;case xi.PULL:n[t][e]=ed.encode(r.operands[0]);break;case xi.PULL_ALL:default:n[t][e]=za(r.operands[0])}}else n.$set||(n.$set={}),n.$set[e]=za(r)}return n};class ld{constructor(){}static encode(e){return(new ld).encodeProjection(e)}encodeProjection(e){return Li(e)?this.encodeProjectionCommand(e):"object"===Zt(e)?this.encodeProjectionObject(e):e}encodeProjectionCommand(e){const t=ql(e.operator);switch(e.operator){case Ri.SLICE:default:return{[t]:e.operands[0]}}}encodeProjectionObject(e){const t=Ha(e);for(const e in t)!0===t[e]||1===t[e]?t[e]=1:!1===t[e]||0===t[e]?t[e]=0:Li(t[e])?t[e]=this.encodeProjectionCommand(t[e]):delete t[e];return t}}class dd{constructor(){}static decode(e){return(new dd).decodeData(e)}decodeData(e){switch(Zt(e)){case"object":return this.decodeObject(e);case"array":return e.map((e=>{if(Qt(e)){const t=qa(e);return t!==e?t:this.decodeObject(e)}return e}));default:return e}}decodeObject(e){const t=s()({},e);for(const e in t){const n=t[e];switch(Zt(n)){case"object":{const r=qa(n);t[e]=r!==n?r:this.decodeObject(t[e]);break}case"array":{const r=this.decodeData(n);r!==n&&(t[e]=r);break}default:continue}}return t}}let ud;!function(e){e[e.DEFAULT=0]="DEFAULT"}(ud||(ud={}));const pd=function(e,t){return new(fd(e.identifiers||{}))({context:e,config:t})};function hd(e){return e.debug}const fd=t=>{let n,o;return class{constructor(i){this.identifiers=void 0,this.config=void 0,this.command=void 0,this.Geo=void 0,this.serverDate=void 0,this.RegExp=void 0,this.__safe_props__=void 0;const{config:a,context:s}=i;this.identifiers=t,this.config=a||{},n={database:this,serviceContext:s,engine:r},o=Hl(n),a&&a.env&&Sn(a.env,"string"),this.command=ca,this.Geo=e,this.serverDate=la,this.RegExp=Zl,a&&a.hasOwnProperty("debug")&&Object.defineProperties(this,{debug:{value:!0},QuerySerializer:{enumerable:!1,configurable:!1,get(){return hd((e=n).database)?e.engine.QuerySerializer:void 0;var e},set(){}},UpdateSerializer:{enumerable:!1,configurable:!1,get(){return hd((e=n).database)?e.engine.UpdateSerializer:void 0;var e},set(){}},ProjectionSerializer:{enumerable:!1,configurable:!1,get(){return hd((e=n).database)?e.engine.ProjectionSerializer:void 0;var e},set(){}},AggregateSerializer:{enumerable:!1,configurable:!1,get(){return hd((e=n).database)?e.engine.AggregateSerializer:void 0;var e},set(){}},Decoder:{enumerable:!1,configurable:!1,get(){return hd((e=n).database)?e.engine.Decoder:void 0;var e},set(){}}})}collection(e){return new o(e)}toJSON(){}}};function gd(e){return{database:pd.bind(null,e)}}const _d="database";function md(e){e.registerService(function(e){const t={name:_d,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(_d)},appConfig:{get docSizeLimit(){return e.appConfig.db_doc_size_limit},get realtimePingInterval(){return e.appConfig.db_realtime_ping_interval},get realtimePongWaitTimeout(){return e.appConfig.db_realtime_pong_wait_timeout},get realtimeMaxReconnect(){return e.config.database.realtime.maxReconnect},get realtimeReconnectInterval(){return e.config.database.realtime.reconnectInterval},get realtimeTotalConnectionTimeout(){return e.config.database.realtime.totalConnectionTimeout},get realtimeQueryEventCacheTimeout(){return e.appConfig.db_realtime_query_event_cache_timeout}}};return{name:_d,context:t,getAPIs:gd.bind(null,t)}}(e))}function yd(e){class t{constructor(e){this.cloudID=void 0,this._internalType=gr,this.cloudID=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toJSON(){return this.cloudID}toString(){return this.cloudID}}return function(e){return new t(e)}}function vd(e){class t{constructor(e){this.target=void 0,this._internalType=_r,this.target=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toString(){return JSON.stringify({target:this.target})}}return function(e){return new t(e)}}function Ad(e){return{CloudID:yd(),CDN:vd()}}const bd="utils";function wd(e){e.registerService(function(e){const t={name:bd,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug}};return{name:bd,context:t,getAPIs:Ad.bind(null,t)}}(e))}const Cd=new class{constructor(){this._running=0,this._onIdleCallbacks=[],this._idleTriggerTimer=void 0}get running(){return this._running}incrementRunning(e=1){this._running+=e,this._idleTriggerTimer&&clearTimeout(this._idleTriggerTimer)}decrementRunning(e=1){this._running-=e,this._running<0&&(this._running=0),this._running<=0&&this._onIdleCallbacks.length&&(this._idleTriggerTimer=setTimeout((()=>{if(this._idleTriggerTimer=null,this._onIdleCallbacks.length){const e=this._onIdleCallbacks.shift();e&&e()}}),50))}onceIdle(e){this._running>0?this._onIdleCallbacks.push(e):e()}};function Id(e,t={}){if(t.fireOnIdle&&Cd.running>0)return new Promise(((n,r)=>{Cd.onceIdle(l()((function*(){try{const r=yield Id(e,t);n(r)}catch(e){r(e)}})))}));if(t.onFire)try{t.onFire()}catch(e){}return new Promise(((n,r)=>{var o,i,a,c,l;Cd.incrementRunning();Rn((e.cloud||t.cloud||{}).identifiers)._operateWXData({appid:null===(o=e.cloud)||void 0===o||null===(i=o.instanceOptions)||void 0===i?void 0:i.resourceAppid,accessToken:null===(a=e.cloud)||void 0===a||null===(c=a.authStorage)||void 0===c?void 0:c.getItem("access_token"),webRequest:null===(l=e.cloud)||void 0===l?void 0:l.webRequest,apiName:e.apiName||"qbase_commapi",reqData:e.data,requestInQueue:!1,success:e=>{let o=s()(s()({},e),{},{data:e.rawData});if(e.rawData)try{const t=JSON.parse(e.rawData);if(t.baseresponse&&0!==t.baseresponse.errcode){const e=new nn({errCode:t.baseresponse.errcode,errMsg:t.baseresponse.errmsg});return void r(e)}o=s()(s()({},e),{},{data:t})}catch(e){const t=new nn({errMsg:e&&e.toString()});return void r(t)}else if(t&&t.requireDataNotEmpty){const t=new nn({errCode:e.errCode,errMsg:`error empty internal server response, ${e.errMsg}`});return void r(t)}n(o)},fail:e=>{if(e&&e.errMsg)if(e.errMsg.includes("invalid scope")){const t="invalid scope 没有权限，请先开通云服务";(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}else{const t=e.errMsg.replace(/^operateWXData:fail /,"");(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}r(e)},complete:function(){e.complete&&e.complete.apply(null,arguments),Cd.decrementRunning()}})}))}const Ed=Id,Sd={REALTIME_DB_MAX_RECONNECT:5,REALTIME_DB_WS_RECONNECT_INTERVAL:5e3,REALTIME_DB_TOTAL_CONNECTION_TIMEOUT:1/0},Td={db_doc_size_limit:524288,db_realtime_ping_interval:15e3,db_realtime_pong_wait_timeout:15e3,db_realtime_query_event_cache_timeout:18e4,upload_max_file_size:20971520,get_temp_file_url_max_requests:50,call_function_poll_max_retry:10,call_function_max_req_data_size:5242880,call_function_client_poll_timeout:15e3,call_function_valid_start_retry_gap:6e4,call_container_poll_max_retry:10,call_container_client_poll_timeout:15e3,call_container_valid_start_retry_gap:6e4,call_container_max_req_data_size:5242880},xd={},kd={},Pd={},Dd=`${Math.random()}_${Date.now()}`;let Od="servicewechat.com";class Nd{constructor(){this._tunnelRequest=void 0,this._meta=void 0}setMetaData(e){this._meta=e}setTunnelRequest(e){this._tunnelRequest=e}getEndpointSync(e){const t=xd[e];if("container"===e){if(null!=t&&t.url&&null!=t&&t.expiresTs&&Date.now()<t.expiresTs)return t;this.getEndpoint(e)}}getEndpoint(e){var t=this;return l()((function*(){const n=xd[e];return"container"===e?null!=n&&n.url&&null!=n&&n.expiresTs&&Date.now()<n.expiresTs?n:t.refreshContainerServiceEndpoint():null}))()}refreshContainerServiceEndpoint(){var e=this;return l()((function*(){return kd.container||(Pd.servicewechatGetIP||(Pd.servicewechatGetIP=!0,Rn().wx.onNetworkStatusChange((e=>{e.isConnected&&Rd()}))),clearTimeout(Pd.container),kd.container=new Promise(function(){var t=l()((function*(t,n){const r=[];for(let n=0;n<3;n++)try{const n=Date.now(),i=kr(),a=(e._tunnelRequest?yield e._tunnelRequest({apiName:"tcbapi_get_service_info",serializedReqData:JSON.stringify({client_random:Dd,system:i.system,wx_app_version:i.version})}):yield Ed({apiName:"qbase_commapi",data:{qbase_api_name:"tcbapi_get_service_info",qbase_req:JSON.stringify({client_random:Dd,system:i.system,wx_app_version:i.version}),qbase_options:{},qbase_meta:e._meta,cli_req_id:`${+new Date}_${Math.random()}`}})).data;if(Date.now()-n>1e3*a.expires_in){r.push(`result already expired (startTs ${n} resultTs ${Date.now()})`);continue}const s=Date.now()+1e3*a.expires_in-(Date.now()-n),c=a.domain||"servicewechat.com";return xd.container={url:`https://${c}/wxa-qbase/container_service?token=${a.token}`,domain:c,token:a.token,http:a.http,key:a.key,timestamp:a.timestamp,ip:a.ip,vip:a.vip,ips:a.ips?new Set(a.ips):void 0,expiresTs:s,encryptedClientRandom:a.encrypted_client_random,protocol:a.protocol},t(xd.container),delete kd.container,Rd(),o=a.token,tr=o,Od=!a.vip||a.ips||xd.container.localDNSTrusted?xd.container.domain||"servicewechat.com":a.vip,Ld(),clearTimeout(Pd.container),void(Pd.container=setTimeout((()=>{e.refreshContainerServiceEndpoint()}),.8*(s-Date.now())))}catch(e){r.push(e+"")}var o;n(`get container service endpoints errors: ${r.join("\n")}`),delete kd.container}));return function(e,n){return t.apply(this,arguments)}}())),kd.container}))()}}function Rd(){if(!xd.container)return;const e=xd.container.domain||"servicewechat.com",t=xd.container.encryptedClientRandom;Rn()._requestSkipCheckDomain({url:`https://${e}/wxa-qbase/verify_server?client_random=${Dd}&token=${xd.container.token}`,method:"POST",dataType:"json",data:JSON.stringify({client_random:Dd}),success:e=>{xd.container&&(200===e.statusCode&&e.data.encrypted_client_random===t?xd.container.localDNSTrusted=!0:xd.container.localDNSTrusted=!1)},fail:e=>{xd.container&&(console.warn(`check servicewechat connection fail ${e}`),xd.container.localDNSTrusted=!1)}})}let Md=!1;function Ld(){return Bd.apply(this,arguments)}function Bd(){return(Bd=l()((function*(){if(Md)return;const e=Rn(),t=()=>new Promise((t=>{const n=Date.now(),r=!/^\d+/.test(Od);e._requestSkipCheckDomain({url:`${r?"https":"http"}://${Od}/wxa-qbase/keepalive`,header:r?{}:{host:"servicewechat.com"},method:"GET",dataType:"text",enableHttp2:r,success:()=>{t(),rr(22990,1,["privateHttpKeepAlive",Od,n,Date.now(),Date.now()-n].join(","))},fail:()=>{t()}})})),n=()=>{setTimeout(l()((function*(){yield t(),n()})),2e4)};return Md=!0,n(),t()}))).apply(this,arguments)}const Fd=(e={})=>{const{sdk:t}=e,n=e.identifiers||{};t&&((e,t)=>{Dn.set(e,t)})(n,t);return new jd(n,!1)},Wd=(e={})=>Fd(e).exportAPI;class jd{constructor(e,t){var n=this;this.inited=!1,this.isInstance=void 0,this.services={},this.apiServiceMap={},this.meta=void 0,this.config=void 0,this.identifiers=void 0,this.debug=!1,this.request=void 0,this.exportAPI=void 0,this.appConfig=void 0,this.apiPermissions=void 0,this.runtimeInfo=void 0,this.serviceEndpoint=void 0,this.authStorage=void 0,this.testSpeed=l()((function*(){let e=+new Date,t=e;return Id(function(e){const t=e.cloud;return{apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:{env:e.env},qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`},cloud:t}}({cloud:n,apiName:"tcbapi_testspeed",serializedReqData:null}),{fireOnIdle:!0,onFire:()=>{e=+new Date,t=e}}).then((n=>{Xn({apiName:"cloud.testspeed",apiEndTime:+new Date,apiStartTime:e,tunnelEndTime:+new Date,tunnelStartTime:t,tunnelTimeNoCSNetCost:n.data.baseresponse.stat.qbase_cost_time})})).catch((e=>{0}))})),this.identifiers=e,this.isInstance=t,this.runtimeInfo=Go(),this.serviceEndpoint=new Nd,this.request=function(e){const{cloud:t}=e;return function(e){const n=t.isInstance?s()(s()({},t.instanceOptions),{},{appid:t.instanceOptions.resourceAppid,env:t.instanceOptions.resourceEnv}):s()(s()({},e),{},{env:e.env});return Id({apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:n,qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`},cloud:t})}}({cloud:this});const r=this;var o;this.exportAPI={init:this.init.bind(this)},this.isInstance||(this.exportAPI.Cloud=function(t){return new Ud(e,r,t).exportAPI}),ro(o=this),ei(o),md(o),wd(o),jo(o),this.meta={session_id:Date.now()+""},this.serviceEndpoint.setMetaData(this.getMetaData()),this.serviceEndpoint.setTunnelRequest(this.request),this.config={database:Vd()},this.appConfig=s()({},Td),this.apiPermissions={};try{Fr.onReady((()=>{setTimeout((()=>{(()=>{if(!zn)try{const e=Rn();e.wx.getNetworkType({success:e=>{Jn=e.networkType},complete:()=>{zn=!0,Kn()}}),e.wx.onNetworkStatusChange((e=>{zn||(zn=!0,Kn()),Jn=e.networkType}))}catch(e){}})()}),2e3)}))}catch(e){}}getMetaData(){var e;if(!this.meta.sdk_version){const e=Rn(this.identifiers);if(e){const t=e.wx;t&&t.version&&("miniprogram"===this.runtimeInfo.env?this.meta.sdk_version=`wx-miniprogram-sdk/${t.version.version} (${Date.parse(`${t.version.updateTime} GMT+0800`)})`:this.meta.sdk_version=`wx-web-sdk/undefined (${Date.parse("undefined GMT+0800")})`)}}return this.meta.filter_user_info="singlePage"===(null===(e=Fr.appLaunchInfo)||void 0===e?void 0:e.mode),this.meta}getConfig(){return this.config}getEnvForService(e){if(this.isInstance)return this.instanceOptions.resourceEnv;const t=this.config;if(t.env)switch(Zt(t.env)){case"string":return t.env;case"object":return t.env[e];default:return}}checkAPIPermission(e){return!this.apiPermissions.hasOwnProperty(e)||1===this.apiPermissions[e]}init(e={}){return this.inited=!0,this.initConfig(e),Promise.all([this.sendInitRequest().then((()=>{this.testSpeed()}))]).then((()=>{}))}initConfig(e){this.config=JSON.parse(JSON.stringify(e)),this.config.database?this.config.database=Ht(this.config.database,Vd()):this.config.database=Vd()}sendInitRequest(){const e="string"==typeof this.config.env?this.config.env:void 0,t=JSON.stringify({trace_user:!1!==this.config.traceUser,env:e,region:this.config.region}),n=+new Date,r=n;return this.request(s()(s()({},this.config),{},{apiName:"tcbapi_init",serializedReqData:t,env:e})).then((e=>{const t=+new Date,o=e.data;this.appConfig=s()(s()({},this.appConfig),o.config);const i=o.tcb_api_list||[];for(let e=0,t=i.length;e<t;e++)this.apiPermissions[i[e].apiname]=i[e].status;Xn({apiName:"cloud.init",apiEndTime:+new Date,apiStartTime:n,tunnelEndTime:t,tunnelStartTime:r,tunnelTimeNoCSNetCost:o.baseresponse.stat.qbase_cost_time})})).catch((e=>{console.error("cloud init error: ",e)}))}registerService(e){this.services[e.name]=e;const t=e.getAPIs();for(const n in t)if(this.apiServiceMap[n]=e.name,"function"==typeof t[n])this.registerFunction(n,!0,t[n]);else{const{initRequired:e,fn:r}=t[n];this.registerFunction(n,e,r)}}registerFunction(e,t,n){const r=this;this.exportAPI[e]=t?function(){if(!r.inited)throw new nn({errMsg:"Cloud API isn't enabled, please call wx.cloud.init first\n请先调用 wx.cloud.init() 完成初始化后再调用其他云 API。"});if(!r.checkAPIPermission(e))throw new nn({errCode:tn.SDK_API_PERMISSION_DENIED,errMsg:tn[tn.SDK_API_PERMISSION_DENIED]});return n.apply(r,arguments)}:n}toJSON(){}}class Ud extends jd{constructor(e,t,n){if(super(e,!0),this.defaultInstance=void 0,this.instanceOptions=void 0,this.webRequest=void 0,this._webCurrentRefreshTokenPromise=void 0,"web"===this.runtimeInfo.env){if(!n.identityless&&!n.appid)throw new Error("appid must be provided");if(!n.resourceAppid)throw new Error("resourceAppid must be provided")}if(!n.resourceEnv)throw new Error("resourceEnv must be provided");if(n.config||(n.config={}),this.defaultInstance=t,this.instanceOptions=JSON.parse(JSON.stringify(n)),this.meta=t.meta,this.apiPermissions=t.apiPermissions,this.instanceOptions.config.database=Ht(Vd(),this.instanceOptions.config.database||{}),"web"===this.runtimeInfo.env){if(this.exportAPI.init=this.webInit.bind(this),this.webRequest=(0,Uo.getBoundAuthRequest)(this),this.registerService((0,Uo.createWebService)(this)),!this.instanceOptions.identityless&&(this.authStorage=this.defaultInstance.authStorage,!this.authStorage))throw new Error("authStorage not found")}else this.exportAPI.init=this.miniprogramInit.bind(this);this.instanceOptions.resourceAppid&&(this.exportAPI.refreshAuth=this.refreshAuth.bind(this))}miniprogramInit(){var e=()=>super.init,t=this;return l()((function*(){if(!t.inited){if(t.instanceOptions.resourceAppid){const n=(yield t.refreshAuth()).data.env_auth_info;return 0===n.errCode?(e().call(t),{errCode:n.errCode,errMsg:n.errMsg,expireTime:1e3*n.expire_time}):{errCode:n.errCode,errMsg:n.errMsg}}e().call(t)}}))()}webInit(){var e=()=>super.init,t=this;return l()((function*(){if(!t.inited){if(!t.instanceOptions.identityless){const n=(yield t.refreshAuth()).data.env_auth_info;return 0===n.errCode?(t.sendInitRequest().then((()=>{t.testSpeed()})),e().call(t),{errCode:n.errCode,errMsg:n.errMsg,expireTime:1e3*n.expire_time}):{errCode:n.errCode,errMsg:n.errMsg}}t.inited=!0}}))()}webRefreshToken(){var e=this;return l()((function*(){return e._webCurrentRefreshTokenPromise||(e._webCurrentRefreshTokenPromise=new Promise(function(){var t=l()((function*(t,n){try{const n=(yield e.webRequest({url:"/refresh_token",method:"POST",json:{appid:e.instanceOptions.appid,refresh_token:e.authStorage.getItem("refreshToken")}})).data;e.authStorage.setItem("appid",n.access_token),t()}catch(e){n(e)}finally{e._webCurrentRefreshTokenPromise=void 0}}));return function(e,n){return t.apply(this,arguments)}}())),e._webCurrentRefreshTokenPromise}))()}refreshAuth(){const e=JSON.stringify({resource_appid:this.instanceOptions.resourceAppid,resource_env:this.instanceOptions.resourceEnv}),t=+new Date,n=t,r=this.request({apiName:"tcbapi_getenvauth",serializedReqData:e});return r.then((e=>{const r=+new Date;Xn({apiName:"cloud.refreshAuth",apiEndTime:+new Date,apiStartTime:t,tunnelEndTime:r,tunnelStartTime:n})})),r}}function Vd(){return{realtime:{maxReconnect:Sd.REALTIME_DB_MAX_RECONNECT,reconnectInterval:Sd.REALTIME_DB_WS_RECONNECT_INTERVAL,totalConnectionTimeout:Sd.REALTIME_DB_TOTAL_CONNECTION_TIMEOUT}}}const Gd=Symbol("CDN");class $d{constructor(e){this.symbol=Gd,this.options=void 0,this.options=e}}function Hd(e,t){return new Promise(((n,r)=>{(t||Rn()).uploadToCommonCDN(s()(s()({},e),{},{success:n,fail:r}))}))}function Zd(e,t){return new Promise(((n,r)=>{(t||Rn())._operateWXData(s()(s()({},e),{},{success:n,fail:r}))}))}const Qd=function(){var e=l()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");const t=new WeakMap,n=[];e.data&&JSON.stringify(e.data,((r,o)=>o&&o.symbol===Gd?void n.push(new Promise(((n,r)=>{const i={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},a=o;switch(s=a.options,Object.prototype.toString.call(s).slice(8,-1)){case"Object":if(!a.options.filePath)throw new Error("filePath must be provided");i.filePath=a.options.filePath;break;default:i.fileData=a.options}var s;n(Hd(i,e.sdk).then((e=>{t.set(o,e.fileUrl)})))}))):o)),yield Promise.all(n);const r=JSON.stringify(e.data,((e,n)=>n&&n.symbol===Gd&&t.has(n)?t.get(n):n)),{rawData:o}=yield Zd({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:e.service,api_name:e.api,data:r,client_msg_id:`${Math.random()}_${Date.now()}`,version:1}},e.sdk);let i,a,s;try{const e=JSON.parse(o);if(i=e.request_id,0===e.errcode)a=JSON.parse(e.data);else{const t=`invokeService:fail ${e.errcode} ${e.errmsg} (requestId: ${i})`;s=new Error(t),s.errCode=e.errcode,s.errMsg=t,s.requestId=i}}catch(e){const t=`invokeService:fail inner protocol parse failed (requestId: ${i||"empty"})`;s=new Error(t),s.errCode=-1,s.errMsg=t,s.requestId=i}if(s)throw s;return{errMsg:"invokeService:ok",data:a,requestId:i}}catch(e){let t="invokeService:fail ";if(e&&e.errMsg&&e.err_code){t+=e.errMsg;const n=new Error(t+`(err_code ${e.err_code})`);throw n.errCode=e.err_code,n}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}}));return function(t){return e.apply(this,arguments)}}();let Yd,zd,qd;!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e[e.PreResp=3]="PreResp",e[e.FinalResp=4]="FinalResp"}(Yd||(Yd={})),function(e){e[e.None=0]="None",e[e.SysErr=1]="SysErr",e[e.Timeout=2]="Timeout"}(zd||(zd={})),function(e){e[e.Sync=0]="Sync",e[e.LongAsync=2]="LongAsync"}(qd||(qd={}));const Jd={SM_EXCEED_MAX_TIMEOUT_POLL_RETRY:100,SM_EMPTY_CALL_RESULT:101,SM_EXCEED_MAX_POLL_RETRY:102,SM_PROVIDER_EXECUTION_ERROR:103,SM_POLL_RESULT_EXPIRED:104,SM_EMPTY_POLL_RESULT_BASE_RESP:105,SM_POLL_RESULT_BASE_RESP_RET_ABNORMAL:106,SM_UNKNOWN_SCENE:107,SM_SYSTEM_ERROR:108},Kd="exceed max timeout retry",Xd="empty call result",eu="exceed max poll retry",tu="invokeService",nu=2e4;var ru;!function(e){e[e.InvalidRequestId=14]="InvalidRequestId"}(ru||(ru={}));const ou=e=>{const t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},iu=e=>e.join("->"),au=function(){var e=l()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");const n=new WeakMap,r=[];e.data&&JSON.stringify(e.data,((t,o)=>o&&o.symbol===Gd?void r.push(new Promise(((t,r)=>{const i={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},a=o;switch(s=a.options,Object.prototype.toString.call(s).slice(8,-1)){case"Object":if(!a.options.filePath)throw new Error("filePath must be provided");i.filePath=a.options.filePath;break;default:i.fileData=a.options}var s;t(Hd(i,e.sdk).then((e=>{n.set(o,e.fileUrl)})))}))):o)),yield Promise.all(r);const o=JSON.stringify(e.data,((e,t)=>t&&t.symbol===Gd&&n.has(t)?n.get(t):t)),i=`${Math.random()}_${Date.now()}`;if(e.async){const t={service_id:e.service,api_name:e.api,data:o,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:i,scene:Yd.CALL,retry_reason:zd.None,req_type:qd.LongAsync},n=yield Zd({apiName:"webapi_servicemarket_jsapi_comm",reqData:t},e.sdk),r=JSON.parse(n.rawData);if(r.scene===Yd.FinalResp&&0===r.errcode)return{errMsg:"invokeService:ok",requestId:r.request_id};{const e=on({errCode:Jd.SM_SYSTEM_ERROR,errMsg:`requestID ${r.request_id}, error message ${r.errmsg||"unknown"} (callid ${i})`},tu);throw e.requestID=r.request_id,e}}{const{result:n,requestID:r}=yield function(e,n,r){return t.apply(this,arguments)}(e,o,i);return{errMsg:"invokeService:ok",data:n,requestId:r}}}catch(e){let t="invokeService:fail ";if(e&&e.errMsg&&e.err_code){t+=e.errMsg;const n=new Error(t+`(err_code ${e.err_code})`);throw n.errCode=e.err_code,n}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}function t(){return(t=l()((function*(e,t,r){return new Promise(((i,a)=>{const s=[ou("start")],{resolve:c,reject:l}=o(s,i,a);n({param:e,data:t,callID:r,scene:Yd.CALL,retryReason:zd.None,tryCount:50,systemErrorRetry:2,timeoutErrorRetry:2,trace:s,resolve:c,reject:l})}))}))).apply(this,arguments)}function n(e){return r.apply(this,arguments)}function r(){return(r=l()((function*(t){const{param:r,data:o,callID:i,scene:a,retryReason:c,tryCount:d,trace:u,systemErrorRetry:p,timeoutErrorRetry:h,resolve:f,reject:g}=t,_={service_id:r.service,api_name:r.api,data:a===Yd.CALL?o:void 0,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:i,scene:a,retry_reason:c};let m=!1,y=!1;const v=()=>{clearTimeout(b),y=!0},A=+new Date,b=setTimeout(l()((function*(){if(!(+new Date-A>2e4&&(yield yr(),y))){if(!Wr()&&+new Date-A>60)return u.push(ou("timeout, exceed max retry gap")),g(on({errCode:Jd.SM_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${i}) (trace: ${iu(u)})`},tu));m=!0,t.timeoutErrorRetry>0?(u.push(ou("timeout, retry")),n(s()(s()({},t),{},{scene:a,retryReason:zd.Timeout,tryCount:d-1,timeoutErrorRetry:h-1}))):(u.push(ou("timeout, abort")),g(on({errCode:Jd.SM_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`${Kd} (callId: ${i}) (trace: ${iu(u)})`},tu)))}})),nu);try{new Date;const r=yield Zd({apiName:"webapi_servicemarket_jsapi_comm",reqData:_},e.sdk);try{if(new Date,m)return;v(),r.rawData;const e=JSON.parse(r.rawData);if(!e)return u.push(ou("empty resp")),g(on({errCode:Jd.SM_EMPTY_CALL_RESULT,errMsg:Xd},tu));if(e.scene!==Yd.PreResp){if(e.scene===Yd.FinalResp){if(0!==e.errcode){const t=on({errCode:Jd.SM_PROVIDER_EXECUTION_ERROR,errMsg:`requestID ${e.request_id}, error message ${e.provider_errmsg||"unknown"} (callid ${i})`},tu);return t.requestID=e.request_id,g(t)}{let t=e.data;try{t=JSON.parse(t)}catch(e){}return f({result:t,requestID:e.request_id})}}return u.push(ou("unexpected scene")),g(on({errCode:Jd.SM_UNKNOWN_SCENE,errMsg:`unknown scene ${e.scene} (callId: ${i}) (trace: ${iu(u)})`},tu))}if(!(d>=0))return u.push(ou("too many polls, abort")),g(on({errCode:Jd.SM_EXCEED_MAX_POLL_RETRY,errMsg:`${eu} (callId: ${i}) (trace: ${iu(u)})`},tu));u.push(ou("normal poll")),n(s()(s()({},t),{},{scene:Yd.POLL,retryReason:zd.None,tryCount:d-1}))}catch(e){g(on({errCode:Jd.SM_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${i})`},tu))}}catch(e){if(new Date,m)return;v();const r=e instanceof Error?e:JSON.stringify(e);e&&e.operateWXDataFail&&p>0?(u.push(ou(`system error (${r}), retry`)),n(s()(s()({},t),{},{scene:a,retryReason:zd.SysErr,tryCount:d-1,systemErrorRetry:p-1}))):(u.push(ou(`system error (${r}), abort`)),g(on(`${r} (callId: ${i}) (trace: ${iu(u)})`,tu)))}}))).apply(this,arguments)}function o(e,t,n){const r=t=>{e.push(ou(`app ${t}`))};Sr(r);return{resolve:e=>{Tr(r),t(e)},reject:e=>{Tr(r),n(e)}}}}));return function(t){return e.apply(this,arguments)}}();function su(e){return cu.apply(this,arguments)}function cu(){return(cu=l()((function*(e){const t=yield Zd({apiName:"webapi_servicemarket_jsapi_retrieve",reqData:{request_id:e.requestId}},e.sdk),n=JSON.parse(t.rawData);if(0===n.errcode)return n.provider_errmsg?{errCode:0,errMsg:"getAsyncResult:fail provider execution error",status:n.status,providerErrMsg:n.provider_errmsg,requestId:n.request_id}:{errCode:0,errMsg:"getAsyncResult:ok",data:JSON.parse(n.data),status:n.status,requestId:n.request_id};{const e=new Error(`getAsyncResult:fail requestID ${n.request_id}, error message ${n.errmsg||"unknown"}`);throw e.errCode=n.errcode,e.errMsg=n.errmsg,e}}))).apply(this,arguments)}const lu="invokeService",du="getAsyncResult",uu=e=>{(Wr()&&!e.async?Qd(e):au(e)).then((t=>{Cn(lu,e,t)})).catch((t=>{In(lu,e,t)}))},pu=e=>{su(e).then((t=>{Cn(du,e,t)})).catch((t=>{In(du,e,t)}))};function hu(e={}){const{sdk:t}=e;return{invokeService:e=>(e=>En(e)?uu(e):Wr()&&!e.async?Qd(e):au(e))(s()(s()({},e),{},{sdk:t})),getAsyncResult:e=>(e=>En(e)?pu(e):su(e))(s()(s()({},e),{},{sdk:t})),CDN:$d}}})(),e=a})(),(()=>{var a={2288:(e,t,n)=>{"use strict";n.d(t,{b:()=>i,_:()=>a});var r=n(665),o=n(9045);const i=(e={})=>(0,o.IN)("getABTestConfig",e),a=(e={})=>{7===r.Z.appType?(0,o.IN)("getABTestConfig",e):(0,o.YG)("getABTestConfig",e,"permission denied",1)}},812:(e,t,n)=>{"use strict";n.d(t,{r3:()=>u.r3,FE:()=>u.FE,YG:()=>u.YG,zy:()=>u.zy,IN:()=>u.IN,bb:()=>u.bb,jQ:()=>u.jQ,Ld:()=>u.Ld,eW:()=>p,AL:()=>f,yR:()=>g,kV:()=>m,JF:()=>y,g9:()=>b});var r=n(5260),a=n(2582),s=n(9973),c=n(4616),l=n(665),d=n(1095),u=n(9045);function p(e,t,n){const o=t.replace(/\.html\?.*|\.html$/,"");return!!i.hasPageRoute(o)||((0,u.YG)(e,n,`page "${(0,r.Z8)(t)}" is not found`),!1)}let h=!1;function f(e){h=!!e.state,e.success&&e.success({state:h})}function g(e,t){!function(e){const t=(0,c.Tp)(e,"thirdApp");0!==t&&1!==t||!(0,d.er)()||1===t&&A()&&(0,u.IN)("showToast",{icon:"",title:"暂不支持当前功能",duration:2500})}(e);const n=(0,c.Tp)(e,"ui");if(n>0&&h)return!1;if(n>=20)if(void 0===i){if(t)return!1}else{const e=i.getCurrentRoute()||"";if(/^\/?__wx__\//.test(e))return!1;const r=e.match(/(?:^|\/)__plugin__\/(.*?)\//);if((r?r[1]:"")!==t&&n>=30)return!1}const r=(0,c.Tp)(e,"singlePage");return!((!r||1===r)&&(0,d.Av)())||(1===r&&A()&&((0,d.$)()?(0,u.IN)("highlightTitleForSinglePage"):(0,u.IN)("showToast",{icon:"",title:"请前往小程序使用完整服务",duration:2500})),!1)}let _=!1;function m(e){_="tap"===e}function y(){setTimeout((()=>{_=!1}),0)}function v(e){return(...t)=>{if(4===l.Z.appType)return m("tap"),e.apply(this,t),void y();o.wrapTapMark((()=>{e.apply(this,t)}))}}function A(){return 4===l.Z.appType?_:_||o.checkTapMark()}function b(e,t){return function(n,...r){const o=(0,c.Tp)(e,"tap"),i=A();let p=n;if(10===o&&!i&&((0,s.Y)({name:e,scene:0,strategy:1}),a.gm||!(0,d.KU)(e)))return void(n&&(n.fail||n.complete)&&setTimeout((()=>{(0,u.YG)(e,n,"can only be invoked by user TAP gesture.")}),0));if((20===o&&i||30===o)&&("function"==typeof n?p=v.call(this,n):"object"==typeof n&&(p=Object.assign({},n),["success","fail","complete"].forEach((e=>{"function"==typeof p[e]&&(p[e]=v.call(this,p[e]))})))),40===o&&4!==l.Z.appType&&!i)return void(n&&(n.fail||n.complete)&&setTimeout((()=>{(0,u.YG)(e,n,"can only be invoked by user TAP gesture.")}),0));const h=t.apply(this,[p].concat(r));return 4===l.Z.appType&&[10,30,40].includes(o)&&y(),h}}},4532:(e,t,n)=>{"use strict";n.d(t,{w$:()=>r});const r={FORE_GROUND:0,BACK_GROUND:1,LOCK:2}},2851:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={lastRoute:"",lastOpenType:"",query:{},runningStatus:"active",navigatorLock:!1,openUrlLock:!1,possessingBackgroundAudioPlayer:!1,webviewEventCallback:null,hanged:!1,appStatus:n(4532).w$.FORE_GROUND,navigationBarTitleMap:{},currentNetworkType:""}},29:(e,t,n)=>{"use strict";n.d(t,{kQ:()=>s,oZ:()=>c,dq:()=>l,V9:()=>d,RK:()=>u});var r=n(8159),o=n(9045),i=n(5260);const a=new r.Z;(0,o.jQ)("onPageReload",((e={},t=0)=>{e.webviewId=t,a.emit("onPageReload",e)}));const s=function(e){a.on("onPageReload",(t=>{t.path&&(t.path=(0,i.Z8)(t.path)),"function"==typeof e&&e(t)}))},c=function(e){a.emit(`onBeforeUnloadPage_${e}`,e),a.removeAllListeners(`onBeforeShareAppMessage_${e}`)},l=function(e,t){a.once(`onBeforeUnloadPage_${e}`,(e=>{"function"==typeof t&&t(e)}))},d=function(e){a.emit(`onBeforeShareAppMessage_${e}`,e)},u=function(e,t){a.on(`onBeforeShareAppMessage_${e}`,(e=>{"function"==typeof t&&t(e)}))}},5260:(e,t,n)=>{"use strict";n.d(t,{Hw:()=>u,Em:()=>s.Em,sd:()=>p,S0:()=>h,s$:()=>f,p9:()=>g,Bf:()=>_,HR:()=>m,cE:()=>y,mQ:()=>v,f0:()=>A,yP:()=>b,Pp:()=>w,Z8:()=>C,l0:()=>I,iZ:()=>E,l7:()=>S,sM:()=>P,RG:()=>D,Nf:()=>O,M8:()=>N,dK:()=>R,yC:()=>M,AK:()=>L,El:()=>B,Ky:()=>F});var a=n(665),s=n(7452),c=(n(2582),n(1661));const l=/^[-+a-zA-Z0-9]+:\/\//,d=/^__[-+a-zA-Z0-9]+__\//;function u(e,t){return __errorTracer__.wrapSystemFunction("appServiceSDKScriptError",t,e)}function p(e,t,n=!0){if(n&&(t=w(t)),0===t.indexOf("/"))return t.substr(1);if(0===t.indexOf("./"))return p(e,t.substr(2),!1);{const n=t.split("/");let r,o;for(r=0,o=n.length;r<o&&".."===n[r];r++);n.splice(0,r);const i=e.length>0?e.split("/"):[];i.splice(i.length-r-1,r+1);const a=i.concat(n).join("/");return a}}function h(e){const t=e.match(l);if(!t)return e;const n=t[0];if("plugin://"===n){const t=n.length,o=e.indexOf("/",t);if(o>=0){const n=e.slice(t,o),r=a.Z.plugins&&a.Z.plugins[n]?a.Z.plugins[n].provider:n;e=e.slice(0,t)+r+e.slice(o)}let i=e.indexOf("?");i<0&&(i=e.length);const s=e.slice(0,i),c=r.Component._list[s];if(!c)throw new I(`Page "${s}" is not found`);e=c.is+e.slice(i)}else if("plugin-private://"===n){let t=e.indexOf("?");t<0&&(t=e.length);const n=e.slice(0,t);e="/"+i.convertComponentAliasToRoute(n)+e.slice(t)}else{if("wx://"!==n)throw new I(`Unknown URL protocol "${n}"`);e="/__wx__/"+e.slice(5)}return e}function f(e,t,n=!0){for(;l.test(t);)t=h(t);return p(e,t,n)}function g(e){const t=e.match(l),n=e.match(d);let r="";if(t){const n=t[0];if("plugin://"===n){const t=n.length,o=e.indexOf("/",t);if(o>=0){const n=e.slice(t,o);r=a.Z.plugins&&a.Z.plugins[n]?a.Z.plugins[n].provider:n}}else if("plugin-private://"===n){const t=n.length,o=e.indexOf("/",t);if(o>=0){r=e.slice(t,o)}}else"wx://"===n&&(r="//")}if(n){const t=n[0];if("__plugin__/"===t){const n=t.length,o=e.indexOf("/",n);if(o>=0){r=e.slice(n,o)}}else"__wx__/"===t&&(r="//")}return r}function _(e,t){const n=g(t);if(!n)return!0;return g(o.convertRouteToComponentAlias(e))===n}function m(e,t=!1){if("object"!=typeof e)return e;const n=[];for(const r in e)if((0,c.n)(e,r))if(t)try{n.push(`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`)}catch(t){n.push(`${r}=${e[r]}`)}else n.push(`${r}=${e[r]}`);return n.join("&")}function y(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&Object.keys(t).length>0){const n=e.split("?");return n[0]+"?"+m(A((n[1]||"").split("&").reduce(((e,t)=>{if("string"==typeof t&&t.length>0){const n=t.split("="),r=n[0],o=n[1];e[r]=o}return e}),{}),Object.keys(t).reduce(((e,n)=>("object"==typeof t[n]?e[encodeURIComponent(n)]=encodeURIComponent(JSON.stringify(t[n])):e[encodeURIComponent(n)]=encodeURIComponent(t[n]),e)),{})))}return e}function v(e,t="http"){return"http"===t?/^(http|https):\/\/.*/i.test(e):"websocket"===t?/^(ws|wss):\/\/.*/i.test(e):void 0}function A(...e){return e.reduce(((e,t)=>{for(const n in t)e[n]=t[n];return e}),{})}function b(e){if("string"==typeof e){const t=e.split("?"),n=t[0],r=(t[1]||"").split("&").reduce(((e,t)=>{if("string"==typeof t&&t.length>0){const n=t.split("="),r=n[0],o=n[1];e[r]=o}return e}),{}),o=[];for(const e in r)(0,c.n)(r,e)&&o.push(`${e}=${encodeURIComponent(r[e])}`);return o.length>0?`${n}?${o.join("&")}`:e}return e}function w(e){if("string"!=typeof e)return e;{let t=e.split("?")[0];const n=e.split("?")[1];return t+=".html",void 0!==n?`${t}?${n}`:t}}function C(e){return"string"==typeof e?-1!==e.indexOf("?")?e.replace(/\.html\?/,"?"):e.replace(/\.html$/,""):e}class I extends Error{constructor(e){super(`APP-SERVICE-SDK:${e}`),this.type="AppServiceSdkKnownError"}}class E extends Error{constructor(e){super(`${e}`),this.type="ThirdScriptError"}}function S(e,t){for(const n in t)e[n]=t[n];return e}const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x=globalThis.btoa||function(e){const t=String(e);let n="";for(let e,r,o=0,i=T;t.charAt(0|o)||(i="=",o%1);n+=i.charAt(63&e>>8-o%1*8)){if(r=t.charCodeAt(o+=3/4),r>255)throw new Error('"btoa" failed');e=e<<8|r}return n},k=globalThis.atob||function(e){const t=String(e).replace(/=+$/,"");let n="";if(t.length%4==1)throw new Error('"atob" failed');for(let e,r,o=0,i=0;r=t.charAt(i++);~r&&(e=o%4?64*e+r:r,o++%4)?n+=String.fromCharCode(255&e>>(-2*o&6)):0)r=T.indexOf(r);return n};function P(e){let t="";const n=new Uint8Array(e),r=n.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(n[e]);return x(t)}function D(e){const t=k(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return r.buffer}function O(e){return Object.keys(e).reduce(((t,n)=>("string"==typeof e[n]?t[n]=e[n]:"number"==typeof e[n]?t[n]=e[n]+"":t[n]=Object.prototype.toString.apply(e[n]),t)),{})}function N(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}a.Z.clientVersion;function R(e,t,n){!1!==(0,s.Kn)(e)&&t!==n&&(0,c.n)(e,t)&&(e[n]=e[t],delete e[t])}function M(e,t){e=e.split("."),t=t.split(".");const n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let r=0;r<n;r++){const n=parseInt(e[r],10),o=parseInt(t[r],10);if(n>o)return 1;if(n<o)return-1}return 0}function L(e={},t){"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}function B(e={},t){const n=t?{errMsg:t}:void 0;"function"==typeof e.success&&e.success(n),"function"==typeof e.complete&&e.complete(n)}function F(e={},t){const n=t?{errMsg:t}:void 0;"function"==typeof e.fail&&e.fail(n),"function"==typeof e.complete&&e.complete(n)}},1425:(e,t,n)=>{"use strict";n.d(t,{Ji:()=>m,HK:()=>g});var r=n(6947),o=n(2582),i=n(3270),a=n(9045),s=n(7452),c=n(5260);r.Z.fs;const l=(e={})=>{(0,a.r3)("readCompressedFile",e,{filePath:"",compressionAlgorithm:""})&&(0,a.IN)("readCompressedFile",e)},d="weapp://wechat-game-runtime",u="readFile";const p=globalThis;let h={};function f(e,t){if("string"!=typeof e)return Promise.reject(new Error("WebAssembly.instantiate: first argument must be a string"));if(/^(wxfile|https?):/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: not support wxfile: or http: path"));if(!/\.wasm(\.br)?$/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: only support file type .wasm or .wasm.br"));if(o.jP)return new Promise(((n,r)=>{!function(e={}){const{filePath:t,encoding:n}=e;let r;const o=new XMLHttpRequest;o.open("POST",`${d}/wxfs/${btoa(t)}`,!0),o.setRequestHeader("content-type","application/json"),o.responseType="string"==typeof n?"text":"arraybuffer",o.onload=()=>{r="string"==typeof n?o.responseText:o.response,(0,a.FE)({name:u,args:e,res:{data:r}})},o.onerror=t=>{(0,a.YG)(u,e,t.message)},o.send(JSON.stringify({}))}({filePath:e,success(e){n(h.instantiate(e.data,t))},fail({errMsg:e}){r(new Error(e.replace(/^\w+:fail\s*/,"")))}})}));if(o.cj||o.wZ){const n=h.instantiate(e,t);return"Promise"===(0,s.Em)(n)?n:Promise.resolve(n)}{let n=i.p;return o.gm&&/\.br$/.test(e)&&(n=l),new Promise(((r,o)=>{n({compressionAlgorithm:"br",filePath:e,success(e){r(h.instantiate(e.data,t))},fail({errMsg:e}){o(new Error(e.replace(/^\w+:fail\s*/,"")))}})}))}}void 0!==r.Z.WebAssembly?h=r.Z.WebAssembly:void 0!==p.WebAssembly&&(h=p.WebAssembly);const g=e=>({Table:h.Table,Memory:h.Memory,Global:h.Global,Instance:h.Instance,instantiate:(t,n)=>"string"==typeof t?(-1!==t.indexOf(`__plugin__/${e}/`)||(t=t.replace(/^\//,""),t=(0,c.S0)(`plugin-private://${e}/${t}`)),f(t,n)):f(t,n)}),_=()=>({Table:h.Table,Memory:h.Memory,Global:h.Global,Instance:h.Instance,instantiate:(e,t)=>f(e,t)});p.WXWebAssembly=_(),delete p.WebAssembly;const m={Table:h.Table,Memory:h.Memory,Global:h.Global,Instance:h.Instance,compile:h.compile,compileStreaming:h.compileStreaming,instantiateStreaming:h.instantiateStreaming,validate:h.validate,CompileError:h.CompileError,LinkError:h.LinkError,Module:h.Module,RuntimeError:h.RuntimeError,instantiate:(...e)=>Promise.resolve(h.instantiate(...e))}},3126:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5260),o=n(2851);const i=(e,t=!0)=>(0,r.sd)(o.Z.lastRoute,e,t)},5985:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8159),o=n(9078);const i=new r.Z,a={appLaunchInfo:null,appLaunchShareInfo:null,sceneHistory:[],appId:"",ShareInfoStorage:o.Z,emitter:i}},5403:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(665);const o=function(){return{miniProgram:{appId:r.Z.accountInfo&&r.Z.accountInfo.appId||"",envVersion:r.Z.envVersion||"release",version:r.Z.appContactInfo&&r.Z.appContactInfo.user_version||""}}}},2654:(e,t,n)=>{"use strict";n.d(t,{av:()=>c,GB:()=>l,Xb:()=>d,yc:()=>u});var r=n(638),o=n(2046),i=n(6581),a=n(405);const s=(0,o.s)("AppShow"),c=s.onMethod,l=s.offMethod,d=s.internalOnMethod;function u(e){s.emitGlobal(e)}(0,r.T)((e=>{s.emitInternal(e)})),(0,a.H)((function e(t){if("appLaunch"===t.openType){const t=(0,i.x)();s.emitInternal(t),(0,a.b)(e)}}))},4915:(e,t,n)=>{"use strict";n.d(t,{e4:()=>o,WZ:()=>a,R0:()=>s,LY:()=>c});var r=n(9045);const o=["startPullDownRefresh"];let i=[];const a={appRoute:!1,appRouteDone:!1},s=()=>{i.forEach((e=>{const{name:t,args:n,option:o}=e;(0,r.oQ)(t,n,o)})),i=[]},c=(e,t,n)=>{const{appRoute:o,appRouteDone:s}=a;!o&&s?(0,r.oQ)(e,t,n):i.push({name:e,args:t,option:n})}},7343:(e,t,n)=>{"use strict";n.d(t,{NS:()=>c,e1:()=>l,rN:()=>d,_X:()=>u});var r=n(4572),o=n(7697),i=n(9045);let a={},s={};function c(e){a=e}function l(e){s=e}function d(){const e=(0,o.hI)(this)||"";return(0,r.rT)(a,e)}function u(){return s}(0,i.Ld)("getEnterAppInfo",(({callbackId:e},t)=>{(0,i.nY)("appEnterInfoGot",{res:u(),callbackId:e},[t])}))},1529:(e,t,n)=>{"use strict";n.d(t,{x9:()=>v.x,Tc:()=>d,Xb:()=>i.Xb,LH:()=>f,i5:()=>$,yP:()=>u,yc:()=>i.yc,E2:()=>y.E,rN:()=>Z.rN,_X:()=>Z._X,Ir:()=>v.I,kH:()=>U,DC:()=>l,nr:()=>T.n,GB:()=>i.GB,dY:()=>K,uc:()=>C,X0:()=>L,hn:()=>H,pL:()=>E,JG:()=>r.J,T7:()=>o.T,$m:()=>c,HM:()=>S.H,qS:()=>T.q,pc:()=>P,av:()=>i.av,py:()=>g,tE:()=>J,qQ:()=>w,fA:()=>M,SM:()=>G,Ze:()=>I,E3:()=>j});var r=n(7142),o=n(638),i=n(2654),a=n(2046);const s=(0,a.s)("AppHide"),c=s.onMethod,l=s.offMethod,d=s.internalOnMethod;function u(){s.emitGlobal()}(0,r.J)((e=>{s.emitInternal(e)}));var p=n(9045);const h=(0,a.s)("AppUnhang"),f=h.internalOnMethod,g=h.onMethod;(0,p.jQ)("onAppUnhang",((e={})=>{h.emit(e)}));var _=n(4532),m=n(2851);m.Z.appStatus=_.w$.FORE_GROUND,m.Z.hanged=!1,(0,i.Xb)((e=>{Date.now()})),d((e=>{Date.now()})),(0,o.T)((()=>{m.Z.appStatus=_.w$.FORE_GROUND})),(0,r.J)((e=>{"hide"===e.mode?m.Z.appStatus=_.w$.LOCK:m.Z.appStatus=_.w$.BACK_GROUND,"close"===e.mode?m.Z.hanged=!1:"hang"===e.mode&&(m.Z.hanged=!0)})),g((()=>{m.Z.hanged=!1}));var y=n(5403),v=n(6581);const A=(0,a.s)("AppService-Error"),b=(0,a.s)("AppService-UnhandledRejection"),w=A.onMethod,C=A.offMethod,I=b.onMethod,E=b.offMethod;Reporter.registerThirdErrorListener((e=>{A.emit(e)})),Reporter.registerThirdUnhandledRejectionListener(((e,t)=>{b.emit({reason:e,promise:t})}));var S=n(405),T=n(4931),x=n(9706);const k=(0,a.s)("AppRouteResized"),P=k.internalOnMethod;k.internalOffMethod;(0,p.jQ)("onAppRouteResized",(e=>{"object"==typeof e&&null!==e&&(0,x.Hl)(e),k.emit({})}));var D=n(5260),O=n(2088),N=n(4212);const R=(0,a.s)("PageNotFound"),M=R.onMethod,L=R.offMethod;let B={page:void 0,time:Date.now(),count:0};(0,p.jQ)("onPageNotFound",(()=>{N.s.info("Ignored onPageNotFound.")})),(0,O.eB)(((e,t=0)=>{N.s.info(`Page not found, webviewId=${t}`),m.Z.lastRoute="",e&&"string"==typeof e.path&&e.path.endsWith(".html")&&(e.path=(0,D.Z8)(e.path)),e&&"string"==typeof e.query&&(e.query=function(e){const t={},n=e.split("&");for(let e=0;e<n.length;e++){const r=n[e].split("=");if(r.length>1)try{t[r[0]]=decodeURIComponent(r[1])}catch(e){}}return t}(e.query)),B.page&&B.page===e.path?B.count++:B={page:e.path,time:Date.now(),count:1};let n=!0;Date.now()-B.time<=3e3&&B.count>3?(n=!1,console.error(`onPageNotFound error: page "${e.path}" is not found.`)):R.emit(e);const r=R.getGlobalListeners().length>0&&n;r||Reporter.thirdErrorReport({error:new Error(`onPageNotFound error: page "${e.path}" is not found.`),extend:" at onPageNotFound"}),(0,p.IN)("pageNotFoundCallback",{hasHandler:r,webviewId:t})}));var F=n(7322),W=n(665);const j=function(e,t,n){const r=W.Z.global&&W.Z.global.window&&W.Z.global.window.restartStrategy,o=W.Z.page&&W.Z.page[e+".html"]&&W.Z.page[e+".html"].window&&W.Z.page[e+".html"].window.restartStrategy,i=String(o||r||"");if(i){const e={type:i,path:t,extraData:n?n.data:void 0,expireTimeStamp:(n?n.expireTimeStamp:0)||Date.now()+864e5};W.Z.accountInfo.appId,(0,F.L)("saveExitState",{appId:W.Z.accountInfo.appId,data:e},[m.Z.currentWebviewId],(e=>{}))}},U=function(e){(0,F.L)("loadExitState",{appId:W.Z.accountInfo.appId},[m.Z.currentWebviewId],(t=>t&&t.expireTimeStamp>Date.now()?e(t.type,t.path,t.extraData):e()))},V=(0,a.s)("ThemeChange"),G=V.onMethod,$=V.internalOnMethod,H=V.offMethod;(0,p.jQ)("onThemeChange",(e=>{void 0!==W.Z.theme&&(W.Z.theme=e.theme,V.emit({theme:e.theme}))}));var Z=n(7343),Q=n(1130),Y=n(1633),z=n(1095);let q=null;const J=e=>{q=e},K=()=>{q=null},X=(0,z.Fr)(((e={})=>{const t=["release","develop","trial"];(0,Q.Z)("CreateWxaShortLink","webapi_createwxashortlink",{},{},(e=>({wxa_appid:e.appid,wxa_path:e.path,page_title:e.title,version:e.version,version_type:t.indexOf(e.envVersion)})),(e=>{delete e.rawData,e.shortLink=e.short_link,delete e.short_link}))(e)})),ee=(0,z.Fr)(((e={})=>{((e={})=>{e.keyPath="WxaAppVersionInfo.AppVersion",(0,p.IN)("getAppContact",e,{beforeSuccess(e){e.data=JSON.parse(e.data)}})})({success(t){(0,p.FE)({name:"getAppContact",args:e,res:t})},fail(t){((e={})=>{e.keyPath="WxaAppVersionInfo.VersionState",(0,p.IN)("getAppContact",e,{beforeSuccess(e){e.data=JSON.parse(e.data),1===e.data&&(e.data=0)}})})({success(t){(0,p.FE)({name:"getAppContact",args:e,res:t})},fail(t){(0,p.FE)({name:"getAppContact",args:e,res:t,success:!1})}})}})})),te=e=>(0,Y.showToast)({icon:"none",title:e}),ne=new Map,re="请检查网络后重试";let oe=0;(0,p.jQ)("onCopyUrl",(e=>{if(!(0,z.aI)()&&e.webviewId!==m.Z.currentWebviewId)return console.warn("[onCopyUrl] error: webviewId loss"),void te("请检查网络后重试");const t=e.shortLinkEnable||!1,n=m.Z.lastRoute,r=m.Z.lastOpenType,o=JSON.parse(JSON.stringify(m.Z.lastRawQuery||{}));if("appLaunch"!==r&&"autoReLaunch"!==r)try{Object.keys(o).forEach((e=>{o[e]=decodeURIComponent(o[e])}))}catch(e){return void te(re)}const i=(0,z.aI)()?t?"":"index.html":`${n}.html`;let a=Object.entries(o).map((e=>e.join("="))).join("&");if(t&&"function"==typeof q)try{a=(q()||{}).query||""}catch(e){console.warn("[onCopyUrl] error",e)}const s=a?`${i}?${a}`:i;if(!t)return void(0,p.IN)("returnCopyUrl",{url:s,shortLinkEnable:t,success(){te("已复制")},fail(){te(re)}});ne.has(oe)&&ne.set(oe,!1);const c=++oe;let l=!1;ne.set(c,!0);const d=e=>{!!ne.get(c)&&(te(e),e===re&&(0,p.IN)("returnCopyUrl",{url:"",shortLinkEnable:t}),ne.set(c,!1))};setTimeout((()=>{l=!0,d(re)}),1500);const u=W.Z.page[`${n}.html`],h=u&&u.window||{},f=W.Z.global&&W.Z.global.window||{},g=h.navigationBarTitleText||f.navigationBarTitleText||"";ee().then((e=>{const n=e.data;return X({appid:W.Z.accountInfo.appId,envVersion:W.Z.envVersion,path:s,title:(0,z.aI)()?"":g,version:n}).then((e=>{console.log("createWxaShortLinkAsync, ",e);return!!ne.get(c)&&!l&&((0,p.IN)("returnCopyUrl",{url:e.shortLink,shortLinkEnable:t,success(){te("已复制")},fail(){te(re)}}),ne.set(c,!1)),null})).catch((e=>{d(re),console.log("[onCopyUrl]:",e)})),null})).catch((e=>{d(re),console.log("[onCopyUrl]: ",e)}))}))},6581:(e,t,n)=>{"use strict";n.d(t,{I:()=>p,x:()=>h});var r=n(9045),o=n(5985),i=n(4572),a=n(7343),s=n(665),c=n(7697),l=n(1095);let d,u;function p(){if(!d)throw new Error("getLaunchOptionsSync:fail get launch options");const e=(0,c.hI)(this)||"";return(0,i.rT)(d||{},e)}function h(){if(!u)throw new Error("getLaunchOptionsSync:fail get launch options");return u||{}}(0,r.Ld)("getLaunchAppInfo",(({callbackId:e},t)=>{(0,r.nY)("appLaunchInfoGot",{res:{sceneHistory:o.Z.sceneHistory,appId:o.Z.appId},callbackId:e},[t])})),s.Z.onReady((()=>{if(!(0,l.aI)()){const e=s.Z.appLaunchInfo||{};Object.assign(e,s.Z.debugLaunchInfo||{}),o.Z.appLaunchInfo=e,o.Z.appLaunchShareInfo=e.shareInfo,(0,a.e1)(e),u=(0,i.Qs)(e,!0),d=(0,i.Ar)(u,s.Z.preloadType),u.__public=(0,i.rT)(d,""),(0,a.NS)(d)}}))},7142:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var r=n(9045),o=n(2999);const i=(0,n(2046).s)("AppEnterBackground"),a=i.internalOnMethod;(0,o.n)("onAppEnterBackground",((e={})=>{i.emit(e),(0,r.nY)("onAppEnterBackground",e)}))},638:(e,t,n)=>{"use strict";n.d(t,{T:()=>f});var r=n(9045),o=n(5985),i=n(972),a=n(4572),s=n(7343),c=n(2046),l=n(2999),d=n(1095),u=n(2851),p=n(665);p.Z.onReady((()=>{u.Z.scene=p.Z.appLaunchInfo.scene}));const h=(0,c.s)("AppEnterForeground"),f=h.internalOnMethod;function g(e){if(!(0,d.aI)()){e=(0,a.Qs)(e,!1),(0,s.e1)(e);const t=(0,a.Ar)(e);e.__public=(0,a.rT)(t,""),(0,s.NS)(t),h.emit(e),u.Z.scene=e.scene}}(0,l.n)("onAppEnterForeground",((e={})=>{const t=e.debugLaunchInfo||{};Object.assign(e,t),delete e.debugLaunchInfo,!(0,i._o)()||1!==e.reLaunch&&!0!==e.reLaunch?g(e):o.Z.emitter.once("onAppRoute",(()=>{g(e)})),(0,r.nY)("onAppEnterForeground",e)}))},405:(e,t,n)=>{"use strict";n.d(t,{H:()=>g,b:()=>_});var r=n(9045),o=n(2999),i=n(972),a=n(5985),s=n(5260),c=n(2046),l=n(2088),d=n(665),u=n(4212),p=n(2851),h=n(4915);const f=(0,c.s)("AppRoute"),g=f.internalOnMethod,_=f.internalOffMethod,m=new Set;(0,o.n)("onAppRoute",((e,t=0)=>{u.s.log("received onAppRoute, res=",JSON.stringify(e)),h.WZ.appRoute=!0,h.WZ.appRouteDone=!1;if(!(0,l.RJ)(e,t)){if(e.path=(0,s.Z8)(e.path),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==e.openType&&(p.Z.lastRoute=e.path||"",p.Z.lastRawQuery=JSON.parse(JSON.stringify(e.query||{}))),p.Z.lastOpenType=e.openType,["appLaunch","autoReLaunch"].includes(e.openType)&&m.add(t),!m.has(t))for(const t in e.query)try{e.query[t]=decodeURIComponent(e.query[t])}catch(e){}if("dismissPip"!==e.openType&&(p.Z.query=e.query,p.Z.currentWebviewId=e.webviewId),"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage){const t=e.preloadRule||d.Z._preloadRule&&d.Z._preloadRule[e.path],n=e.page||d.Z._page&&d.Z._page[e.path+".html"];if(t&&(d.Z.updatePreloadRule(e.path,t),e.preloadRule,d.Z.preloadRule),n){const t=d.Z.global&&d.Z.global.window||{};n.window=Object.assign({},t,n.window),d.Z.updatePage(e.path,n),e.page,d.Z.page}}(0,r.nY)("onAppRoute",e,[]),(0,i._o)()&&a.Z.emitter.emit("onAppRoute"),f.emit(e)}}))},4931:(e,t,n)=>{"use strict";n.d(t,{q:()=>u,n:()=>p});var r=n(9045),o=n(2999),i=n(2851),a=n(2046),s=n(665),c=n(7452),l=n(4915);const d=(0,a.s)("AppRouteDone"),u=d.internalOnMethod,p=d.internalOffMethod;(0,o.n)("onAppRouteDone",((e,t=0)=>{l.WZ.appRoute=!1,l.WZ.appRouteDone=!0,(0,l.R0)();let n="";i.Z.navigatorLock=!1,e.path&&(n=e.path,e.path=e.path.substring(0,e.path.length-5)),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==i.Z.lastOpenType&&(i.Z.lastRoute=e.path||""),d.emit(e),(0,r.nY)("onAppRouteDone",{frameset:e.frameset},[t]),e.path,function(e,t){if(0===s.Z.appType&&e&&t&&!i.Z.navigationBarTitleMap[e]){let n="";s.Z.page[t]&&s.Z.page[t].window&&(0,c.HD)(s.Z.page[t].window.navigationBarTitleText)?n=s.Z.page[t].window.navigationBarTitleText:s.Z.global&&s.Z.global.window&&(0,c.HD)(s.Z.global.window.navigationBarTitleText)&&(n=s.Z.global.window.navigationBarTitleText),i.Z.navigationBarTitleMap[e]=n}}(e.path,n)}))},2088:(e,t,n)=>{"use strict";n.d(t,{RJ:()=>f,eB:()=>l});var r=n(1532),o=n(2046),i=n(5260),a=n(4212);const s=Object.hasOwnProperty,c=(0,o.s)("AppRouteNotFound"),l=c.onMethod,d=(c.offMethod,c.emit),u=(e,t)=>{a.s.info(`[rewriteRoute] (webviewId=${t}) ${e}`)};let p={};const h=(e,{needHtmlSuffix:t})=>{const n=e.replace(/\.html(\?|$)/i,(e=>e.slice(5)));let r=(0,i.S0)(n);if("/"===r[0]&&(r=r.slice(1)),!t)return r;let o=r.indexOf("?");o<0&&(o=r.length);return r.slice(0,o)+".html"+r.slice(o)},f=(e,t=0)=>{if(["dismissPip","navigateBack"].includes(e.openType))return!1;if("rewriteRoute"===e.openType&&(e=((e,t)=>{let n=0;if(s.call(e,"originalWebviewId"))n=e.originalWebviewId,u(`Found originalWebviewId=${n}`,t);else{if(1!==Object.keys(p).length)return u(`No originalWebviewId found and we have ${Object.keys(p).length} backup data, guess failed, cleaning backups and giving up`,t),p={},e;n=Object.keys(p)[0],u(`No originalWebviewId found and guess it=${n}`,t)}const r=p[n];return delete p[n],["openType","wxMaterial","location","prerender"].forEach((t=>{e[t]=r[t]})),e})(e,t)),!e.notFound)return!1;let n=!1,o=e.rawPath;for(;/^[-_+a-z]+:\/\//i.test(o);){u(`${o} has protocol, try rewriting`,t);try{o=h(o,{needHtmlSuffix:!0}),n=!0}catch(e){return"AppServiceSdkKnownError"===e.type&&console.error(e.message),(0,r.IN)("pageNotFoundCallback",{hasHandler:!1,webviewId:t}),!1}}return n?(p[t]=e,u(`rewriteRoute from "${e.rawPath}" to "${o}"`,t),(0,r.IN)("rewriteRoute",{url:o,webviewId:t}),!0):(d(e,t),!1)}},4572:(e,t,n)=>{"use strict";n.d(t,{Qs:()=>d,Ar:()=>p,rT:()=>h,xH:()=>f});var r=n(5985),o=n(5260),a=n(2851),s=n(9045),c=n(665),l=n(5014);function d(e={},t){if(e.scene=e.scene?parseInt(e.scene,10):e.scene,e.query=(t?e.query:a.Z.query)||{},e.path=t?(0,o.Z8)(e.path):(0,o.Z8)(a.Z.lastRoute),e.referrerInfo=e.referrerInfo||{},e.isLaunch=t,t||(1044===e.scene?a.Z.lastShareInfo={shareInfo:e.shareInfo,path:e.path,query:e.query}:a.Z.lastShareInfo=void 0),r.Z.sceneHistory.push(e.scene),!e.referrerInfo.appId||1036!==e.scene&&1069!==e.scene||(r.Z.appId=e.referrerInfo.appId),"object"==typeof e.shareInfo&&null!==e.shareInfo){const{shareInfo:t}=e;t.shareKey&&t.shareName&&((0,s.IN)("showUpdatableMessageSubscribeButton",{shareKey:t.shareKey}),e.shareTicket=r.Z.ShareInfoStorage.set(t.shareKey,t.shareName),r.Z.ShareInfoStorage.lastShareTicket=e.shareTicket),delete e.shareInfo}return e}let u;function p(e={},t){0===(e=Object.assign({},e)).scene?e.scene=u:u=e.scene;let n=e.scene;1103===n?n=1001:1104===n?n=1089:1131===n||1158!==n&&1159!==n&&1160!==n||!(0,l.J)("getGroupToolbarInfo")&&(n=1008),[1106,1005,1006,1027,1042].indexOf(n)>-1&&(e.referrerInfo.appId=null);const r=e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{};if(e.referrerInfo.privateExtraData&&e.referrerInfo.privateExtraData.__pluginAppId){e.referrerInfo.appId&&(r.pluginAppId=e.referrerInfo.privateExtraData.__pluginAppId),delete e.referrerInfo.privateExtraData.__pluginAppId;0===Object.keys(e.referrerInfo.privateExtraData).length&&delete e.referrerInfo.privateExtraData}const o={path:e.path,query:e.query,scene:n,shareTicket:e.shareTicket,referrerInfo:r};e.chatroomUsername&&1156===n&&(o.chatroomUsername=e.chatroomUsername),e.chatType&&(o.chatType=e.chatType);const i=e.nativeExtraData||{};return i.location&&(o.locationInfo=i.location),7!==c.Z.appType&&10!==c.Z.appType||(e.nativeExtraData&&(o.nativeExtraData=e.nativeExtraData),o.sessionId=e.sessionid||e.sessionId,o.isLaunch=e.isLaunch,e.isLaunch&&(o.prerender=!!c.Z.prerender),o.clickTimestamp=e.clickTimestamp,o.preloadType=t),e.mode&&(o.mode=e.mode),1173===n&&(i.mimeType?o.forwardMaterials=[{type:i.mimeType,path:i.materialPath,name:i.materialName,size:i.materialSize}]:Array.isArray(i.materials)&&(o.forwardMaterials=i.materials)),o}function h(e,t=""){if((0,o.p9)(e.path||"")!==t){const t={path:e.path,query:{},scene:e.scene,shareTicket:e.shareTicket,referrerInfo:{}};return e.mode&&(t.mode=e.mode),10===c.Z.appType&&(e.nativeExtraData&&(t.nativeExtraData=e.nativeExtraData),t.sessionId=e.sessionId,t.isLaunch=e.isLaunch,e.isLaunch&&(t.prerender=e.prerender),t.clickTimestamp=e.clickTimestamp,t.preloadType=e.preloadType),t}return e}function f(e){try{i.setPrivateExtraData(e.privateExtraData),e.success()}catch(t){e.fail(t)}}},6399:(e,t,n)=>{"use strict";n.d(t,{hU:()=>y,JQ:()=>w,go:()=>A,Py:()=>x,kr:()=>q,fS:()=>W,MN:()=>j,qW:()=>Q,yU:()=>K,k8:()=>U,KU:()=>Y,RU:()=>X,ZX:()=>R,Sk:()=>B,nY:()=>z,Mm:()=>N,Z5:()=>L});var r=n(665),i=n(9045),a=n(29),s=n(1661),c=n(7973),l=n(5260),d=n(2851),u=n(2235),p=n(3170),h=n(2582),f=n(2892);const g=h.wZ&&r.Z.useXWebCanvas,_=h.cj&&r.Z.useSkiaCanvas,m=h.wZ&&r.Z.useNewXWebCanvasToTFP,y=g||_,v=()=>{},A={},b={},w={},C={};let I=0,E=0,S=4500;const T=Date.now,x=(0,u.kR)("onCanvasMethodCallback"),k=(0,u.kR)("onDrawCanvas");function P({canvasId:e,pluginId:t,nodeId:n,viewId:r,webviewId:o}){const i=(0,u.yk)(o,e,t,n);w[i]&&delete w[i],y&&(0,f.OS)({webviewId:o,canvasId:e,pluginId:t,nodeId:n,viewId:r})}function D(e,t,n){const r={errMsg:`${e}: ${n||"fail canvas is empty"}`},o=__errorTracer__.surroundThirdByTryCatch(t.fail||v,`at api ${e} fail callback function`),i=__errorTracer__.surroundThirdByTryCatch(t.complete||v,`at api ${e} complete callback function`);o(r),i(r)}function O(e,t="",n=""){const r=(0,u.yk)(d.Z.currentWebviewId,e.canvasId,n,t),o=(0,l.f0)({},e);if("number"==typeof w[r]||y){if(o.canvasId=w[r],o.jsInvokedAt=Date.now(),o.x=Number(o.x)||0,o.y=Number(o.y)||0,o.width=Number(o.width)||0,o.height=Number(o.height)||0,0===o.width)return void D("canvasGetImageData",e,"the source width is 0");if(0===o.height)return void D("canvasGetImageData",e,"the source height is 0");if(y){return void(0,f.uy)(r).getImageData(o)}if(h.gm||h.qB||h.Mq||h.Ae)o.method="getImageData",x(o,(function(t){const n={width:t.width,height:t.height,data:(0,u.Fi)(t.data)};"function"==typeof e.success&&e.success(n),"function"==typeof e.complete&&e.complete(n)})),(0,i.nY)("invokeCanvasMethod",o);else{const e=o.success,t=o.fail;o.success=n=>{"[object ArrayBuffer]"===Object.prototype.toString.call(n.data)?(n.width=o.width,n.height=o.height,n.data=new Uint8ClampedArray(n.data),"function"==typeof e&&e(n)):(delete n.data,n.errMsg="canvasGetImageData: fail","function"==typeof t&&t(n))},(0,i.IN)("canvasGetImageData",o)}}else D("canvasGetImageData",e)}function N(e,t){O(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==o.getRootNodeId(d.Z.currentWebviewId)?t.__wxExparserNodeId__:"")}function R(e,t,n){O(e,n,t)}function M(e,t="",n=""){const r=(0,u.yk)(d.Z.currentWebviewId,e.canvasId,n,t),o=(0,l.f0)({},e);if("number"==typeof o.width)if(o.data&&"[object Uint8ClampedArray]"===Object.prototype.toString.call(o.data))if("number"==typeof w[r]||y){if(o.canvasId=w[r],o.jsInvokedAt=Date.now(),o.x=Number(o.x)||0,o.y=Number(o.y)||0,o.height="number"==typeof o.height?o.height:o.data.length/o.width/4|0,o.width*o.height*4!==o.data.length)return void D("canvasPutImageData",e,"invalid data format");if(h.gm||h.qB||h.Mq||h.Ae)o.data=h.qB||h.Ae?WeixinNativeBuffer.new(o.data.buffer).id:(0,u.GX)(o.data),o.method="putImageData",(0,i.nY)("invokeCanvasMethod",o),"function"==typeof e.success&&e.success({errMsg:"canvasPutImageData:ok"}),"function"==typeof e.complete&&e.complete({errMsg:"canvasPutImageData:ok"});else{if(o.data=o.data.buffer,y){o.data=e.data;return void(0,f.uy)(r).putImageData(o)}(0,i.IN)("canvasPutImageData",o)}}else D("canvasPutImageData",e);else D("canvasPutImageData",e,"data argument must be an Uint8ClampedArray");else D("canvasPutImageData",e,"invalid width argument")}function L(e,t){M(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==o.getRootNodeId(d.Z.currentWebviewId)?t.__wxExparserNodeId__:"")}function B(e,t,n){M(e,n,t)}function F(e,t,n=!1,r,o,a,s){if(h.gm||h.qB||h.Mq||h.Ae){const r={actions:t,reserve:n,canvasId:e};k(r,(function(e){"function"==typeof s&&s({errMsg:e.errMsg})})),(0,i.nY)("canvasActionsChanged",r)}else(0,i.IN)("drawCanvas",{canvasId:e,reserve:n,useHardwareAccelerate:r,actions:t,success:o,fail:a,complete:s})}function W({isWidgetCanvas:e,canvasId:t,actions:n,reserve:r,useHardwareAccelerate:o,success:a,fail:s,complete:c},l=d.Z.currentWebviewId,p="",h=""){const g=T();if(!Array.isArray(n))return;if(e){if(g-I<S){const e={errMsg:"drawCanvas:fail 调用 draw 过于频繁。"};return E+=1,E>500&&(E=0,console.warn(e.errMsg)),void("function"==typeof s&&s(e))}return I=g,void(0,i.IN)("drawCanvas",{canvasId:void 0,reserve:r,actions:n,success:a,fail:s,complete:c})}const _=(0,u.yk)(l,t,p,h);if(y){(0,f.uy)(_).draw(n,r,c,l,h,p)}else if("number"==typeof w[_]){F(w[_],n,r,o,a,s,c)}else C[_]=C[_]||[],C[_]=C[_].concat({actions:n,reserve:r,useHardwareAccelerate:o,success:a,fail:s,complete:c})}function j(e){W(e)}function U(e,t,n){W(e,d.Z.currentWebviewId,t,n)}"undefined"!=typeof __widgetConfig__&&(S="number"==typeof __widgetConfig__.drawMinInterval?__widgetConfig__.drawMinInterval:25),(0,i.Ld)("canvasInsert",(({canvasId:e,viewId:t,canvasNumber:n,pluginId:r,data:o,position:i,nodeId:s,compPath:c},l)=>{y&&(0,f.mj)({canvasId:e,viewId:t,canvasNumber:n,pluginId:r,position:i,nodeId:s},l);const d=(0,u.yk)(l,e,r,s);A[n]={lastTouches:[],data:o,compPath:c},w[d]=n,b[n]=i,Array.isArray(C[d])&&(C[d].forEach((function(e){F(n,e.actions,e.reserve,e.useHardwareAccelerate,e.success,e.fail,e.complete)})),delete C[d]),(0,a.dq)(l,(()=>{P({canvasId:e,pluginId:r,nodeId:s,viewId:t,webviewId:l})}))})),(0,i.Ld)("canvasUpdate",(({canvasNumber:e,position:t})=>{(0,s.n)(b,e)&&(b[e]=t)})),(0,i.Ld)("canvasRemove",(({canvasId:e,pluginId:t,nodeId:n,viewId:r},o)=>{P({canvasId:e,pluginId:t,nodeId:n,viewId:r,webviewId:o})}));let V=null;const G=(e,t,n,r)=>{e.x=e.x?e.x:0,e.y=e.y?e.y:0,(e.x<0||e.x>n)&&(e.x=0),(e.y<0||e.y>r)&&(e.y=0),e.width=e.width?Math.min(n-e.x,e.width):n-e.x,e.height=e.height?Math.min(r-e.y,e.height):r-e.y,e.destWidth=e.destWidth?e.destWidth:e.width*t,e.destHeight=e.destHeight?e.destHeight:e.height*t},$=(e,t)=>{const n=(0,l.f0)({},t);n.success=t.success,n.fail=t.fail,n.complete=t.complete;let r=300,o=150;(0,s.n)(b,t.canvasId)&&(r=b[t.canvasId].width,o=b[t.canvasId].height),!h.cj||"6.5.10"!==e.version&&"6.5.11"!==e.version&&"6.5.12"!==e.version?G(n,e.pixelRatio,r,o):((e,t,n,r)=>{n*=t,r*=t,e.x=e.x?e.x*t:0,e.y=e.y?e.y*t:0,(e.x<0||e.x>n)&&(e.x=0),(e.y<0||e.y>r)&&(e.y=0),e.width=e.width?Math.min(n-e.x,e.width*t):n-e.x,e.height=e.height?Math.min(r-e.y,e.height*t):r-e.y,e.destWidth=e.destWidth?e.destWidth/t:e.width/t,e.destHeight=e.destHeight?e.destHeight/t:e.height/t})(n,e.pixelRatio,r,o),(0,i.IN)("canvasToTempFilePath",n)};function H(e,t){if(e.fileType=["jpg","png"].indexOf(e.fileType)>-1?e.fileType:"png",e.quality="jpg"===e.fileType?e.quality<0||e.quality>1?1:e.quality:1,e.jpgQuality=e.quality,e.canvas){const t=e.canvas;delete e.canvas;const n=t._width?t.width/t._width:V.pixelRatio;if(e.x=Number(e.x)||0,e.y=Number(e.y)||0,h.wZ){if(e.width*=n,e.height*=n,e.x=e.x?e.x*n:0,e.y=e.y?e.y*n:0,e.width=Number(e.width)||t.width-e.x,e.height=Number(e.height)||t.height-e.y,e.destWidth=e.destWidth||e.width,e.destHeight=e.destHeight||e.height,e.x+e.width>t.width&&(e.width=t.width-e.x),e.y+e.height>t.height&&(e.height=t.height-e.y),0===e.width)return void(0,l.Ky)(e,"width is 0");if(0===e.height)return void(0,l.Ky)(e,"height is 0");const r=t._ctx.getImageData(e.x,e.y,e.width,e.height);return void(m?(e.viewId=t.id,(0,i.IN)("xwebCanvasToTempFilePath",e)):(e.data=r.data.buffer,(0,i.IN)("canvasToTempFilePath",e)))}if(h.cj)return e.canvasId=t.id,G(e,n,t.width/n,t.height/n),void setTimeout((()=>{(0,i.IN)("canvasToTempFilePath",e)}),100);if(h.gm){e.width*=n,e.height*=n,e.x=e.x?e.x*n:0,e.y=e.y?e.y*n:0,e.width=Number(e.width)||t.width-e.x,e.height=Number(e.height)||t.height-e.y,e.destWidth=e.destWidth||e.width,e.destHeight=e.destHeight||e.height,e.x+e.width>t.width&&(e.width=t.width-e.x),e.y+e.height>t.height&&(e.height=t.height-e.y);const r=document.createElement("canvas"),o=r.getContext("2d");r.width=e.destWidth,r.height=e.destHeight,o.drawImage(t._canvasRef,e.x,e.y,e.width,e.height,0,0,e.destWidth,e.destHeight);let a=r.toDataURL(e.fileType,e.quality);return a=a.replace(/^data:image\/(jpg|png|jpeg);base64,/,""),void(0,i.IN)("base64ToTempFilePath",(0,l.f0)({base64Data:a},e),{beforeAll:e=>{e.errMsg=e.errMsg.replace("base64ToTempFilePath","canvasToTempFilePath")}})}}if(h.gm||h.qB||h.Mq||h.Ae)e.method="toDataURL",x(e,(function({dataUrl:t}){(0,i.IN)("base64ToTempFilePath",(0,l.f0)({base64Data:t},e),{beforeAll:e=>{e.errMsg=e.errMsg.replace("base64ToTempFilePath","canvasToTempFilePath")}})})),(0,i.nY)("invokeCanvasMethod",e);else if(y&&h.wZ){const n=(0,f.uy)(t),r=()=>{e.x=Number(e.x)||0,e.y=Number(e.y)||0,e.width=Number(e.width)||n.width-e.x,e.height=Number(e.height)||n.height-e.y,0!==e.width?0!==e.height?n.getImageData({x:e.x,y:e.y,width:e.width,height:e.height,success(t){e.data=t.data.buffer,(0,i.IN)("canvasToTempFilePath",e)},fail(){(0,l.Ky)(e,"fail")}}):(0,l.Ky)(e,"height is 0"):(0,l.Ky)(e,"width is 0")};n._contextPromise.then((()=>{r()}))}else V||(V=(0,p.m4)()),$(V,e)}function Z(e,t="",n=""){if(!e.canvasId&&!e.canvas)return;const r=(0,u.yk)(d.Z.currentWebviewId,e.canvasId,n,t);if(e.canvas)return V||(V=(0,p.m4)()),void H(e,r);"number"==typeof w[r]?(e.canvasId=w[r],H(e)):D("canvasToTempFilePath",e)}function Q(e,t){Z(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==o.getRootNodeId(d.Z.currentWebviewId)?t.__wxExparserNodeId__:"")}function Y(e,t,n){Z(e,n,t)}function z(e={}){const t=(0,u.yk)(d.Z.currentWebviewId,e.canvasId),n=Object.assign({},e),r=n.success,o=n.complete;n.success=function(e){const t=`${`data:image/${n.fileType||"png"}`};base64,${e.data}`;"function"==typeof r&&r({dataURL:t}),"function"==typeof o&&o({dataURL:t})},n.complete=v,"number"==typeof w[t]?(n.canvasId=w[t],function(e){h.gm||h.qB||h.Mq||h.Ae?(e.method="toDataURL",x(e,(function({dataUrl:t}){e.success({data:t})})),(0,i.nY)("invokeCanvasMethod",e)):(0,i.IN)("canvasToData",e)}(n)):D("canvasToDataURL",e)}const q=()=>new c._,J=(e,t,n="",r="")=>new c._(e,t,n,r),K=(e,t)=>{const n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==o.getRootNodeId(d.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return J(d.Z.currentWebviewId,e,n)},X=(e,t,n)=>J(d.Z.currentWebviewId,e,n,t)},7973:(e,t,n)=>{"use strict";n.d(t,{_:()=>b});var r=n(9045),i=n(5260),a=n(1661),s=n(6399);const c={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"#00000000"};var l=n(2851),d=n(2235),u=n(2582);const p={},h={};function f(e){return"number"==typeof e}function g(e){let t=null;if(null!=(t=/^#([0-9|A-F|a-f]{6})$/.exec(e))){return[parseInt(t[1].slice(0,2),16),parseInt(t[1].slice(2,4),16),parseInt(t[1].slice(4),16),255]}if(null!=(t=/^#([0-9|A-F|a-f]{3})$/.exec(e))){let e=t[1].slice(0,1),n=t[1].slice(1,2),r=t[1].slice(2,3);return e=parseInt(e+e,16),n=parseInt(n+n,16),r=parseInt(r+r,16),[e,n,r,255]}if(null!=(t=/^rgb\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e){return Math.min(255,parseInt(e.trim(),10))})).concat(255);if(null!=(t=/^rgba\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e,t){return 3===t?Math.floor(255*parseFloat(e.trim())):Math.min(255,parseInt(e.trim(),10))}));const n=e.toLowerCase();if((0,a.n)(c,n)){t=/^#([0-9|A-F|a-f]{6,8})$/.exec(c[n]);const e=parseInt(t[1].slice(0,2),16),r=parseInt(t[1].slice(2,4),16),o=parseInt(t[1].slice(4,6),16);let i=parseInt(t[1].slice(6,8),16);return i=i>=0?i:255,[e,r,o,i]}return console.group("非法颜色: "+e),console.error("不支持颜色："+e),console.groupEnd(),[0,0,0,255]}function _(e){if(Array.isArray(e)){const t=[];return e.forEach((function(e){t.push(_(e))})),t}if("object"==typeof e){const t={};for(const n in e)t[n]=_(e[n]);return t}return e}function m(e,t){if(!(u.gm||u.DD||u.Ae||/wxfile:\/\//.test(t)))if(e.pluginId||e.nodeId){const n=e.pluginId.split("/")[0],r=o.getNodeById(e.nodeId,e.webviewId),a=r&&r.is||"";t=n?0===t.indexOf("/")?o.getPluginRoutePrefix(n)+(0,i.sd)(a,t,!1).replace(/\.html$/,""):(0,i.sd)(o.convertComponentAliasToRoute(a),t,!1).replace(/\.html$/,""):(0,i.sd)(a,t,!1).replace(/\.html$/,"")}else t=(0,i.sd)(l.Z.lastRoute,t,!1).replace(/.html$/,"");return t}class y{constructor(e,t){this.type=e,this.data=t,this.colorStop=[]}addColorStop(e,t){s.hU?this.colorStop.push([e,t]):this.colorStop.push([e,g(t)])}}class v{constructor(e){this.width=e}}class A{constructor(e,t){this.image=e,this.repetition=t}}class b{constructor(e,t,n,r){if(this.actions=[],this.path=[],this.subpath=[],this.webviewId=e,this.canvasId=t,this.pluginId=r,this.useHardwareAccelerate=!0,this.nodeId=n,this._id=(0,d.yk)(e,t,r,n),this.drawingState=p[this._id]=p[this._id]||[],this.state=h[this._id]=h[this._id]||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:s.hU?"#000000":u.cj?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},this._transform={a:1,b:0,c:0,d:1,e:0,f:0},u.gm||u.DD){const e=document.createElement("canvas");this._context=e.getContext("2d")}}getActions(){const e=_(this.actions);return this.actions=[],this.path=[],this.subpath=[],e}clearActions(){this.actions=[],this.path=[],this.subpath=[]}draw(e=!1,t){const n=this.canvasId,r=_(this.actions),o=this.useHardwareAccelerate;this.actions=[],this.path=[],this.useHardwareAccelerate=!0,this.isWidgetCanvas?(0,s.fS)({isWidgetCanvas:!0,actions:r,reserve:e}):(0,s.fS)({canvasId:n,actions:r,reserve:e,useHardwareAccelerate:o,complete:t},this.webviewId,this.pluginId,this.nodeId)}createLinearGradient(e,t,n,r){return new y("linear",[e,t,n,r])}createCircularGradient(e,t,n){return new y("radial",[e,t,n])}createPattern(e,t){if(void 0!==t){if(-1!==["repeat","repeat-x","repeat-y","no-repeat"].indexOf(t))return e=e._src?e._src:m(this,e),new A(e,t);console.error(`Failed to execute 'createPattern' on 'CanvasContext': The provided type ('${t}') is not one of 'repeat', 'no-repeat', 'repeat-x', or 'repeat-y'.`)}else console.error("Failed to execute 'createPattern' on 'CanvasContext': 2 arguments required, but only 1 present.")}measureText(e){let t;return u.gm||u.DD?(this._context.font=this.state.font,t=this._context.measureText(e)):(0,r.IN)("measureText",{text:e,fontSize:this.state.fontSize,fontFamily:this.state.fontFamily,fontWeight:this.state.fontWeight,fontStyle:this.state.fontStyle,complete(e){t={width:e.width||0}}}),new v(t.width||0)}save(){this.actions.push({method:"save",data:[]}),this.drawingState.push(this.state)}restore(){this.actions.push({method:"restore",data:[]}),this.state=h[this._id]=this.drawingState.pop()||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:s.hU?"#000000":u.cj?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}getLineDash(){return this.state.lineDash}beginPath(){this.path=[],this.subpath=[],(u.gm||s.hU)&&this.path.push({method:"beginPath",data:[]})}moveTo(e,t){this.path.push({method:"moveTo",data:[e,t]}),this.subpath=[[e,t]]}closePath(){this.path.push({method:"closePath",data:[]}),this.subpath.length&&(this.subpath=[this.subpath.shift()])}lineTo(e,t){0===this.path.length&&0===this.subpath.length?this.path.push({method:"moveTo",data:[].slice.apply(arguments)}):this.path.push({method:"lineTo",data:[].slice.apply(arguments)}),this.subpath.push([e,t])}quadraticCurveTo(e,t,n,r){this.path.push({method:"quadraticCurveTo",data:[e,t,n,r]}),this.subpath.push([n,r])}bezierCurveTo(e,t,n,r,o,i){this.path.push({method:"bezierCurveTo",data:[e,t,n,r,o,i]}),this.subpath.push([o,i])}arc(e,t,n,r,o,i=!1){if(!u.wZ||s.hU)return this.path.push({method:"arc",data:[e,t,n,r,o,i]}),void this.subpath.push([e,t]);const a=e+Math.cos(r)*n,c=t+Math.sin(r)*n;if(this.subpath.push([a,c]),i&&r-o>=2*Math.PI||!i&&o-r>=2*Math.PI)this.subpath.push([a,c]);else{const r=e+Math.cos(o)*n,i=t+Math.sin(o)*n;this.subpath.push([r,i])}this.path.push({method:"arc",data:[e,t,n,r,o,i]})}rect(e,t,n,r){this.path.push({method:"rect",data:[e,t,n,r]}),this.subpath=[[e,t]],u.wZ&&!s.hU&&this.path.push({method:"closePath",data:[]})}arcTo(e,t,n,r,o,i){if((!u.wZ||s.hU)&&!i)return this.path.push({method:"arcTo",data:[e,t,n,r,o]}),void this.subpath.push([n,r]);const a=this.subpath[this.subpath.length-1],c=a[0],l=a[1];if(c===e&&l===t||e===n&&t===r||0===o)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);if(c===e&&c===n||l===t&&l===r)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);const{sqrt:d,acos:p,sin:h,tan:f,atan:g,PI:_}=Math,m=function(e){return e**2},y=c-e,v=l-t,A=n-e,b=r-t,w=p((y*A+v*b)/(d(m(y)+m(v))*d(m(A)+m(b))))/2,C=Math.round(o/h(w)*1e6)/1e6,I=Math.round(o/f(w)*1e6)/1e6;let E,S,T,x,k,P;if(c-e==0)E=e,S=l-t>0?t+I:t-I;else if(l-t==0)E=c-e>0?e+I:e-I,S=t;else{const n=(l-t)/(c-e),r=l-n*c;E=(d(m(y)+m(v))*I+y*e+v*t-r*v)/(y+n*v),S=n*E+r}if(n-e==0)T=e,x=r-t>0?t+I:t-I;else if(r-t==0)T=n-e>0?e+I:e-I,x=t;else{const o=(r-t)/(n-e),i=r-o*n;T=(d(m(A)+m(A))*I+A*e+b*t-i*b)/(A+o*b),x=o*T+i}const D=(E+T)/2-e,O=(S+x)/2-t;if(0===O)k=e,P=O>0?t+C:t-C;else{const n=O/D,r=t-n*e;k=(d(m(D)+m(O))*C+e*D+t*O-r*O)/(D+n*O),P=n*k+r}k=Math.round(1e6*k)/1e6,P=Math.round(1e6*P)/1e6;const N=S-P,R=E-k,M=_-2*w;let L=g(N/R);0===N&&R<0&&(L=Math.PI);const B=(E-k)*(x-P)-(S-P)*(T-k);this.path.push({method:"arc",data:[k,P,o,L,B>0?L+M:L-M,B<0]}),this.subpath.push([T,x])}getTransform(){return this._transform}clip(){this.actions.push({method:"clip",data:_(this.path)})}set lineDashOffset(e){if(u.gm||u.DD||u.Ae)this.actions.push({method:"setLineDashOffset",data:[e]});else{const t=this.state.lineDash||[0,0];this.actions.push({method:"setLineDash",data:[t,e]})}}set globalCompositeOperation(e){this.actions.push({method:"setGlobalCompositeOperation",data:[e]})}set shadowBlur(e){u.gm||u.DD||u.Ae?this.actions.push({method:"setShadowBlur",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,e,this.state.shadowColor]}),this.state.shadowBlur=e)}set shadowColor(e){if(u.gm||u.DD||u.Ae)return void this.actions.push({method:"setShadowColor",data:[e]});let t;t=s.hU?e:u.cj&&0===this.state.shadowBlur?[]:g(e),this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,this.state.shadowBlur,t]}),this.state.shadowColor=t}set shadowOffsetX(e){u.gm||u.DD||u.Ae?this.actions.push({method:"setShadowOffsetX",data:[e]}):(this.actions.push({method:"setShadow",data:[e,this.state.shadowOffsetY,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetX=e)}set shadowOffsetY(e){u.gm||u.DD||u.Ae?this.actions.push({method:"setShadowOffsetY",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,e,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetY=e)}set font(e){this.state.font=e;const t=e.match(/^(([\w\-]+\s)*)(\d+r?px)(\/(\d+\.?\d*(r?px)?))?\s+(.*)/);if(!t)return void console.warn("Failed to set 'font' on 'CanvasContext': invalid format.");const n=t[1].trim().split(/\s/),r=parseFloat(t[3]),o=t[7],i=[];let a="";const s=this;function c(){i.push({method:"setFontWeight",data:["normal"]}),s.state.fontWeight="normal"}if(n.forEach(((e,t)=>{["italic","oblique","normal"].indexOf(e)>-1?(i.push({method:"setFontStyle",data:[e]}),this.state.fontStyle=e):["bold","normal"].indexOf(e)>-1?(i.push({method:"setFontWeight",data:[e]}),this.state.fontWeight=e):0===t?(i.push({method:"setFontStyle",data:["normal"]}),s.state.fontStyle="normal"):1===t&&c()})),1===n.length&&c(),a=i.map((e=>e.data[0])).join(" "),this.state.fontSize=r,this.state.fontFamily=o,u.gm||u.DD||u.Ae)return a=`${a} ${r}px ${o}`,void this.actions.push({method:"setFont",data:[a]});this.actions.push.apply(this.actions,i),this.actions.push({method:"setFontSize",data:[r]},{method:"setFontFamily",data:[o]})}get font(){return this.state.font}set fillStyle(e){w(this,"setFillStyle",e)}set strokeStyle(e){w(this,"setStrokeStyle",e)}set globalAlpha(e){e=Math.floor(255*parseFloat(e)),this.actions.push({method:"setGlobalAlpha",data:[e]})}set textAlign(e){this.actions.push({method:"setTextAlign",data:[e]})}set lineCap(e){this.actions.push({method:"setLineCap",data:[e]})}set lineJoin(e){this.actions.push({method:"setLineJoin",data:[e]})}set lineWidth(e){this.actions.push({method:"setLineWidth",data:[e]})}set miterLimit(e){this.actions.push({method:"setMiterLimit",data:[e]})}set textBaseline(e){this.actions.push({method:"setTextBaseline",data:[e]})}}function w(e,t,n){"string"==typeof n?s.hU?e.actions.push({method:t,data:["normal",n]}):e.actions.push({method:t,data:["normal",g(n)]}):"object"==typeof n&&n instanceof y?e.actions.push({method:t,data:[n.type,n.data,n.colorStop]}):n instanceof A&&e.actions.push({method:t,data:["pattern",n.image,n.repetition]})}[].concat(["scale","rotate","translate","setTransform","transform"],["drawImage","fillText","fill","stroke","fillRect","strokeRect","clearRect","strokeText"]).forEach((function(e){b.prototype[e]="fill"===e||"stroke"===e?function(){this.actions.push({method:e+"Path",data:_(this.path)})}:"fillRect"===e?function(e,t,n,r){this.actions.push({method:"fillPath",data:[{method:"rect",data:[e,t,n,r]}]})}:"strokeRect"===e?function(e,t,n,r){this.actions.push({method:"strokePath",data:[{method:"rect",data:[e,t,n,r]}]})}:"fillText"===e||"strokeText"===e?function(t,n,r,o){const i=[t.toString(),n,r];"number"==typeof o&&i.push(o),this.actions.push({method:e,data:i})}:"drawImage"===e?function(t,n,r,o,i,a,s,c,l){let d;t=t._src?t._src:m(this,t),void 0===l&&(a=n,s=r,c=o,l=i,n=void 0,r=void 0,o=void 0,i=void 0),d=f(n)&&f(r)&&f(o)&&f(i)?[t,a,s,c,l,n,r,o,i]:f(c)&&f(l)?[t,a,s,c,l]:[t,a,s],this.actions.push({method:e,data:d})}:"clearRect"===e?function(){this.useHardwareAccelerate=!1,this.actions.push({method:e,data:[].slice.apply(arguments)})}:"transform"===e||"setTransform"===e?function(t,n,r,o,i,a){this._transform={a:t,b:n,c:r,d:o,e:i,f:a},this.actions.push({method:e,data:[t,n,r,o,i,a]})}:function(){this._ignoreScale&&"scale"===e?this._ignoreScale=!1:this.actions.push({method:e,data:[].slice.apply(arguments)})}})),["setFillStyle","setTextAlign","setStrokeStyle","setGlobalAlpha","setShadow","setFontSize","setLineCap","setLineJoin","setLineWidth","setMiterLimit","setTextBaseline","setLineDash"].forEach((function(e){"setFillStyle"===e||"setStrokeStyle"===e?b.prototype[e]=function(){const t=arguments[0];w(this,e,t)}:"setGlobalAlpha"===e?b.prototype[e]=function(){const t=[].slice.apply(arguments,[0,1]);t[0]=Math.floor(255*parseFloat(t[0])),this.actions.push({method:e,data:t})}:"setShadow"===e?b.prototype[e]=function(){const t=[].slice.apply(arguments,[0,4]);s.hU||(t[3]=u.cj&&0===t[2]?[]:g(t[3])),this.actions.push({method:e,data:t}),this.state.shadowBlur=t[2],this.state.shadowColor=t[3],this.state.shadowOffsetX=t[0],this.state.shadowOffsetY=t[1]}:"setLineDash"===e?b.prototype[e]=function(){const t=[].slice.apply(arguments,[0,2]);t[0]=t[0]&&t[0].length?t[0]:[0,0],t[1]=t[1]||0,this.actions.push({method:e,data:t}),this.state.lineDash=t[0]}:"setFontSize"===e?b.prototype.setFontSize=function(e){this.state.font=this.state.font.replace(/\d+\.?\d*px/,e+"px"),this.state.fontSize=e,this.actions.push({method:"setFontSize",data:[e]})}:b.prototype[e]=function(){this.actions.push({method:e,data:[].slice.apply(arguments,[0,1])})}}))},1331:(e,t,n)=>{"use strict";n.d(t,{y:()=>C,n:()=>I});var r=n(1503),o=n.n(r),i=n(6947),a=n(7945),s=n(9045),c=n(2582),l=n(2851),d=n(2235),u=n(337),p=n(768),h=n(6763),f=n(4030),g=n(258);const _=new WeakMap;class m extends g.c{constructor(e={}){const{id:t,width:n,height:r,top:i,left:a,nodeId:s,pluginId:c}=o()({id:-1,width:1,height:1,top:0,left:0,nodeId:"",pluginId:""},e);super(),this.id=t,this._top=i,this._left=a,this._width=n,this._height=r,this._nodeId=s,this._pluginId=c,this._onReady()}_init(){if(!this.id)return void console.error("Canvas node cannot be found");const e=this._initCanvasInstance();e.width=this._width,e.height=this._height,_.set(this,e)}_onReady(e=(()=>{})){(()=>{_.get(this)||this._init(),e()})()}getContext(e,t){if("2d"===e){const e=_.get(this);if(!e)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;const n=e.getContext("2d",t);return Object.defineProperty(this,"_ctx",{enumerable:!1,configurable:!1,writable:!1,value:n}),n}"webgl"===e?console.error("Canvas: current node only supports 2d context"):console.error("Invalid context type ["+e+"] for Canvas#getContext")}get width(){const e=_.get(this);return e&&e.width}set width(e){const t=_.get(this);t&&(t.width=e)}get height(){const e=_.get(this);return e&&e.height}set height(e){const t=_.get(this);t&&(t.height=e)}createImage(){}createImageData(){}}class y extends m{_initCanvasInstance(){u.w4.initialize(p.A);return new n.g.Canvas(this.id)}getContext(e,t){return(0,d.zG)(h.I,f.o)(super.getContext(e,t),this.id)}createImage(){const e=new n.g.Image;return(0,d.K1)(e,{nodeId:this.nodeId,pluginId:this.pluginId,webviewId:""})}}var v=n(6106);class A extends m{_initCanvasInstance(){u.w4.initialize(v.B);const e=(i.Z.HTMLCanvasView||n.g.HTMLCanvasView).createView(this.id);return(i.Z.HTMLCanvasElement||n.g.HTMLCanvasElement).createElement(e)}getContext(e,t){return(0,d.zG)(h.I,f.o)(super.getContext(e,t),this.id)}createImage(){const e=new(i.Z.SkiaImages||SkiaImage),t=(0,d.K1)(e,{nodeId:this._nodeId,pluginId:this._pluginId,webviewId:""});return new h.e(t)}}class b extends m{_initCanvasInstance(){const e=document.createElement("canvas");return e.style.position="absolute",e.style.top=this._top+"px",e.style.left=this._left+"px",e.style.width=this._width+"px",e.style.height=this._height+"px",e.width=this._width,e.height=this._height,e._canvasId=this.id,e}getContext(e,t){return(0,d.zG)(h.I)(super.getContext(e,t),this.id)}createImage(){if("function"!=typeof window.__global.createCustomImage)return void console.warn("开发工具暂不支持 createImage");return window.__global.createCustomImage((e=>(0,d.rL)(e,this.nodeId,this.pluginId,l.Z.currentWebviewId)),(e=>e.replace(/^\/__pageframe__\//,"")))}}var w=n(2515);class C{constructor({id:e,width:t,height:n,nodeId:r,pluginId:o}){this._id=e,this._width=t,this._height=n,this._nodeId=r,this._pluginId=o}get id(){return this._id}get _offscreenCanvasId(){return null}createImage(){}getContext(){}get width(){}set width(e){}get height(){}set height(e){}}function I(e=1,t=1,n=null){const r="object"==typeof e?e:{width:e,height:t,compInst:n},{type:i,width:a,height:s,compInst:l,pluginId:d}=o()({type:"webgl",width:1,height:1,compInst:null,pluginId:""},r);switch(i){case"2d":return function(e,t,n,r){const o=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return c.cj?function(e,t,n,r){const o=-1*S();return new x({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):c.wZ?function(e,t,n,r){const o=-1*S();return new P({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):c.gm?function(e,t,n,r){if(!document.createElement)return void console.warn("createOffscreenCanvas: 开发者工具暂不支持创建离屏 Canvas");const o=-1*S();return new O({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):void 0}(a,s,l,d);case"webgl":return function(e,t,n,r){const o=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return c.cj?function(e,t,n,r){const o=-1*S();return new T({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):c.wZ?function(e,t,n,r){const o=-1*S();return new k({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):c.gm?function(e,t,n,r){if(!document.createElement)return void console.warn("createOffscreenCanvas: 开发者工具暂不支持创建离屏 Canvas");const o=-1*S();return new D({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):void 0}(a,s,l,d);default:throw new Error(`unknown type "${i}"`)}}const E={},S=()=>{for(;;){const e=Math.floor(32767*Math.random());if(!E[e])return E[e]=!0,e}};class T extends C{constructor({id:e,width:t,height:n,nodeId:r,pluginId:o}){super({id:e,width:t,height:n,nodeId:r,pluginId:o}),this.__id=-l.Z.currentWebviewId||this.id,(0,s.IN)("insertWebGLCanvas",{position:{top:-100,left:-100,width:1,height:1},canvasId:this.__id,keepAlive:!0,fail(){}});const i=(0,a.t)();this.canvas=i.createOffscreenCanvas(this.__id,t,n)}getContext(e,...t){if("webgl"===e)return this.canvas.getContext(e,...t)}createImage(){const e=(0,a.t)().createImage(this.__id);return(0,d.K1)(e,{nodeId:this.nodeId,pluginId:this.pluginId})}get width(){return this.canvas.width}set width(e){this.canvas.width=e}get height(){return this.canvas.height}set height(e){this.canvas.height=e}get _offscreenCanvasId(){return this.canvas.__id}}class x extends C{constructor({id:e,width:t,height:n,nodeId:r,pluginId:o}){super({id:e,width:t,height:n,nodeId:r,pluginId:o}),this.canvas=(0,d.ci)()?new w.Q(l.Z.currentWebviewId,e):new y({id:e,width:t,height:n,nodeId:r,pluginId:o})}getContext(e,...t){if("2d"===e)return this.canvas.getContext(e,...t);console.warn("can only create 2d context")}createImage(){return this.canvas.createImage()}get width(){return this.canvas.width}set width(e){this.canvas.width=e}get height(){return this.canvas.height}set height(e){this.canvas.height=e}}class k extends C{constructor({id:e,width:t,height:n,nodeId:r,pluginId:o}){super({id:e,width:t,height:n,nodeId:r,pluginId:o}),this.canvas=new i.Z.OffscreenCanvas(t,n)}getContext(e,...t){if("webgl"===e)return this.canvas.getContext(e,...t)}createImage(){const e=new i.Z.Image;return(0,d.K1)(e,{nodeId:this.nodeId,pluginId:this.pluginId})}get width(){return this.canvas.width}set width(e){this.canvas.width=e}get height(){return this.canvas.height}set height(e){this.canvas.height=e}get _offscreenCanvasId(){return this.canvas.__id}}class P extends C{constructor({id:e,width:t,height:n,nodeId:r,pluginId:o}){super({id:e,width:t,height:n,nodeId:r,pluginId:o}),this.canvas=(0,d.ci)()?new w.Q(l.Z.currentWebviewId,e):new A({id:e,width:t,height:n,nodeId:r,pluginId:o})}getContext(e,...t){if("2d"===e)return this.canvas.getContext(e,...t)}createImage(){return this.canvas.createImage()}get width(){return this.canvas.width}set width(e){this.canvas.width=e}get height(){return this.canvas.height}set height(e){this.canvas.height=e}}class D extends C{constructor({id:e,width:t,height:n,nodeId:r,pluginId:o}){super({id:e,width:t,height:n,nodeId:r,pluginId:o});const i=document.createElement("canvas");i.width=t,i.height=n,this.canvas=i}getContext(e,...t){if("webgl"===e)return this.canvas.getContext(e,...t)}createImage(){if("function"!=typeof window.__global.createCustomImage)return void console.warn("开发工具暂不支持 createImage");return window.__global.createCustomImage((e=>(0,d.rL)(e,this.nodeId,this.pluginId,l.Z.currentWebviewId)),(e=>e.replace(/^\/__pageframe__\//,"")))}get width(){return this.canvas.width}set width(e){this.canvas.width=e}get height(){return this.canvas.height}set height(e){this.canvas.height=e}}class O extends C{constructor({id:e,width:t,height:n,nodeId:r,pluginId:o}){super({id:e,width:t,height:n,nodeId:r,pluginId:o}),this.canvas=new b({id:e,width:t,height:n,nodeId:r,pluginId:o})}getContext(e,...t){if("2d"===e)return this.canvas.getContext(e,...t)}createImage(){return this.canvas.createImage()}get width(){return this.canvas.width}set width(e){this.canvas.width=e}get height(){return this.canvas.height}set height(e){this.canvas.height=e}}},2892:(e,t,n)=>{"use strict";n.d(t,{mj:()=>l,OS:()=>d,uy:()=>u,gK:()=>h});var r=n(9045),o=n(2235),i=n(5260),a=n(2582);const s={},c={};function l({canvasId:e,viewId:t,canvasNumber:n,pluginId:r,position:i,nodeId:a},s){const c=(0,o.yk)(s,e,r,a);let l=u(c);l.context&&(l=p(c)),l.context||l.init(n,i.width,i.height,t,s)}function d({canvasId:e,pluginId:t,nodeId:n,viewId:r,webviewId:i}){const a=(0,o.yk)(i,e,t,n);delete s[a],delete c[r]}function u(e){return s[e]?s[e]:p(e)}function p(e){const t=new h(e);return s[e]=t,t}a.wZ&&(0,r.jQ)("onXWebCanvasSurfaceChange",((e={})=>{const t=c[e.viewId];t&&"function"==typeof t.swapSurface&&t.swapSurface()})),(0,r.Ld)("skiaCanvasSizeChanged",(({canvasId:e,pluginId:t,nodeId:n,position:r},i)=>{const a=(0,o.yk)(i,e,t,n),c=s[a];0===r.width&&0===r.height||!c||c.width===r.width&&c.height===r.height||(c.width=r.width,c.height=r.height,c.canvas&&c.context&&(c.canvas.width=r.width,c.canvas.height=r.height,c.needsReplay()&&c.replayActions()))}));class h{constructor(e){this.id=e,this.width=0,this.height=0,this.context=null,this._actionsDefer=[],this._actionsWaiting=!1,this._images=[],this._actionsQueue=[],this._contextPromise=new Promise((e=>{this._resolveContext=e}))}init(e,t,r,o){this.width=t,this.height=r,a.cj&&(this.canvas=new n.g.Canvas(e),this.context=this.canvas.getContext("2d")),a.wZ&&(this.canvasView=HTMLCanvasView.createView(o),c[o]=this.canvasView,this.canvas=HTMLCanvasElement.createElement(this.canvasView),this.context=this.canvas.getContext("2d")),this._resolveContext&&this._resolveContext(this.context)}preloadImage(e){e.forEach((e=>{let t="";const r=e.method,o=e.data;"drawImage"===r?t=o[0]:"setFillStyle"===r&&"pattern"===o[0]&&(t=o[1]),t&&!this._images[t]&&(a.cj?(this._images[t]=new n.g.Image,this._images[t].onload=()=>{this._images[t].ready=!0}):a.wZ&&(this._images[t]=new SkiaImage,this._images[t].onload=()=>{this._images[t].ready=!0}),this._images[t].setSrc(t))}))}checkImageLoaded(e,t,n){const r=this._images[e];return r.ready?(n(r),!0):(this._actionsDefer.unshift([t,!0]),this._actionsWaiting=!0,r.onload=()=>{r.ready=!0,n(r),this._actionsWaiting=!1;const e=this._actionsDefer.slice(0);this._actionsDefer=[];let t=e.shift();for(;t;)this.draw(t[0],t[1],t[2],this._webviewId,this._nodeId,this._pluginId),t=e.shift()},!1)}draw(e,t,n,r,o,i){this._webviewId=r,this._nodeId=o,this._pluginId=i,this.context?this._draw(e,t,n,r,o,i):this._contextPromise.then((()=>(this._draw(e,t,n,r,o,i),null))).catch((()=>{}))}_draw(e,t,n,r,o,i){const s=this.context;if(e)if(t||this._flushQueue(),this._enqueue({actions:e,reserve:t}),this._actionsWaiting)this._actionsDefer.push([e,t,n]);else{t||(s.fillStyle="#000000",s.strokeStyle="#000000",s.shadowColor="#000000",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0,s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,this.width,this.height)),this.preloadImage(e,r,o,i),s.save();for(let t=0;t<e.length;t++){const n=e[t];let r=n.method;const o=n.data;if(/^set/.test(r)&&"setTransform"!==r){const n=r[3].toLowerCase()+r.slice(4);let i;if("fillStyle"===n||"strokeStyle"===n){if("normal"===o[0])i=o[1];else if("linear"===o[0])i=s.createLinearGradient(...o[1]),o[2].forEach((function(e){const t=e[0],n=e[1];i.addColorStop(t,n)}));else if("radial"===o[0]){const e=o[1][0],t=o[1][1],n=[e,t,0,e,t,o[1][2]];i=s.createRadialGradient(...n),o[2].forEach((function(e){const t=e[0],n=e[1];i.addColorStop(t,n)}))}else if("pattern"===o[0]){if(!this.checkImageLoaded(o[1],e.slice(t+1),(e=>{e&&(s[n]=s.createPattern(e,o[2]))})))break;continue}s[n]=i}else if("globalAlpha"===n)s[n]=o[0]/255;else if("shadow"===n){const e=["shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor"];o.forEach((function(t,n){e[n],s[e[n]]=t}))}else"fontSize"===n?s.font=s.font.replace(/\d+\.?\d*px/,o[0]+"px"):"lineDash"===n?(s.setLineDash(o[0]),s.lineDashOffset=o[1]||0):"textBaseline"===n?("normal"===o[0]&&(o[0]="alphabetic"),s[n]=o[0]):s[n]=o[0]}else if("fillPath"===r||"strokePath"===r)r=r.replace(/Path/,""),s.beginPath(),o.forEach((function(e){s[e.method](...e.data)})),s[r]();else if("fillText"===r){let[e,...t]=o;t&&t.map&&(t=t.map((e=>"string"==typeof e?parseFloat(e):e))),s.fillText(e,...t)}else if("drawImage"===r){let[n,...r]=o;this._images=this._images||{},r&&r.map&&(r=r.map((e=>"string"==typeof e?parseFloat(e):e)));if(!this.checkImageLoaded(n,e.slice(t+1),(e=>{e&&s.drawImage.apply(s,[e,...r.slice(4,8),...r.slice(0,4)])})))break}else if("clip"===r)o.forEach((function(e){s[e.method](...e.data)})),s.clip();else if("arcTo"===r||"rotate"===r){let e=o;o&&o.map&&(e=o.map((e=>"string"==typeof e?parseFloat(e):e))),s[r](...e)}else if("strokeText"===r){let[e,...t]=o;t&&t.map&&(t=t.map((e=>"string"==typeof e?parseFloat(e):e))),s[r](e,...t)}else s[r](...o)}s.restore(),a.wZ&&this.canvasView.present(),this._actionsWaiting||"function"==typeof n&&n()}}getImageData(e={}){this.context?this._getImageData(e):this._contextPromise.then((()=>(this._getImageData(e),null))).catch((()=>{}))}_getImageData(e={}){let t;try{const{x:n,y:r,width:o,height:i}=e||{};t=this.context.getImageData(n,r,o,i)}catch(t){return void(0,i.Ky)(e,t)}if(!t)return void(0,i.Ky)("canvasGetImageData:fail");const n={width:t.width,height:t.height,data:t.data};(0,i.AK)(e,n)}putImageData(e={}){this.context?this._putImageData(e):this._contextPromise.then((()=>(this._putImageData(e),null))).catch((()=>{}))}_putImageData(e={}){try{const{x:t,y:r,width:o,height:i,data:s}=e||{};let c;a.cj?c=new n.g.ImageData(s,o,i):a.wZ&&(c=new SkiaImageData(s,o,i)),a.wZ&&this.canvasView.prepareDraw(),this.context.putImageData(c,t,r),a.wZ&&this.canvasView.present()}catch(t){return void(0,i.Ky)(e,t)}(0,i.El)(e,"canvasPutImageData:ok")}replayActions(){const e=()=>{};this._actionsQueue.forEach((t=>{this.draw(t.actions,t.reserve,e,this._webviewId,this._nodeId,this._pluginId)}))}needsReplay(){return this._actionsQueue.length>0}_flushQueue(){this._actionsQueue=[]}_enqueue(e){this._actionsQueue.push(e)}}},7945:(e,t,n)=>{"use strict";function r(){return n.g.WeixinCanvas}n.d(t,{t:()=>r})},258:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r{_init(){}_onReady(){}_initCanvasInstance(){}getContext(){}createImage(){}requestAnimationFrame(){}cancelAnimationFrame(){}get width(){}set width(e){}get height(){}set height(e){}}},337:(e,t,n)=>{"use strict";n.d(t,{nE:()=>l,TS:()=>d,iO:()=>u,y9:()=>p,mj:()=>f,OS:()=>g,SF:()=>_,w4:()=>m,gK:()=>y});var r=n(2046),o=n(2235),i=n(258),a=n(29),s=n(8917);const c={},l={},d=new WeakMap,u={},p={},h=(0,r.s)("skiaCanvasLoadFontFace");function f(e,t){const n=(0,o.yk)(t,e.canvasNumber);l[n]={top:e.position.top,left:e.position.left,width:e.position.width,height:e.position.height,canvasNumber:e.canvasNumber,nodeId:e.nodeId,pluginId:e.pluginId,webviewId:t},u[e.canvasNumber]={lastTouches:[],data:e.data,compPath:e.compPath};const r=c[n];"function"==typeof r&&(r.call(),delete c[n]),(0,a.dq)(t,(()=>{g(e,t)}))}function g(e,t){const n=(0,o.yk)(t,e.canvasNumber);delete c[n],delete l[n],delete p[n],delete u[e.canvasNumber]}function _(e,t){const n=(0,o.yk)(e,t),r=p[n];return r||null}class m{constructor(){this._fontAssets=[],this.loadFontFace(s.X4),this.subscribeFontLoadEvent()}loadFontFace(e){this._fontAssets.push(...e)}subscribeFontLoadEvent(){h.internalOnMethod((({nativeFontAssets:e}={})=>{const t=[];for(const n of e){this._fontAssets.find((e=>e.src===n.src||e.originalSrc===n.originalSrc))||t.push(n)}t.length>0&&this.loadFontFace(t)}))}static initialize(e){this.fontManagerInstance||(this.fontManagerInstance=new e)}}m.fontManagerInstance=null;class y extends i.c{constructor(e,t,n,r){super(),this._webviewId=e,this._canvasId=(0,o.yk)(e,t),this._nodeId=r,this._nodeCanvasId=n,p[this._canvasId]=this}_init(){const e=l[this._canvasId];if(this.id=e.canvasNumber,this._top=e.top,this._left=e.left,this._width=e.width,this._height=e.height,!this.id)return void console.error("Canvas node cannot be found");const t=this._initCanvasInstance();t.width=300,t.height=150,d.set(this,t)}_onReady(e=(()=>{})){const t=()=>{d.get(this)||this._init(),e()};l[this._canvasId]?t():c[this._canvasId]=t}getContext(e,t){if("2d"===e){const e=d.get(this);if(!e)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;const n=e.getContext("2d",t);return Object.defineProperty(this,"_ctx",{enumerable:!1,configurable:!1,writable:!1,value:n}),n}"webgl"===e?console.error("Canvas: current node only supports 2d context"):console.error("Invalid context type ["+e+"] for Canvas#getContext")}get width(){const e=d.get(this);return e&&e.width}set width(e){const t=d.get(this);t&&(t.width=e)}get height(){const e=d.get(this);return e&&e.height}set height(e){const t=d.get(this);t&&(t.height=e)}createImageData(){}createPath2D(e){}requestAnimationFrame(e){}cancelAnimationFrame(){}toDataURL(e,t){const n=d.get(this);return n?n.toDataURL(e,t):""}}},6106:(e,t,n)=>{"use strict";n.d(t,{B:()=>m,$:()=>y});var r=n(665),o=n(6947),i=n(9045),a=n(2582),s=n(2235),c=n(337),l=n(6763),d=n(4030),u=n(29);const p={};function h(e,t){const n=(0,s.yk)(t,e.canvasNumber),r=p[n];delete p[n],r&&r.dispose()}a.wZ&&((0,i.Ld)("skiaCanvasInsert",((e,t)=>{(0,c.mj)(e,t),(0,u.dq)(t,(()=>{h(e,t)}))})),(0,i.Ld)("skiaCanvasRemove",((e,t)=>{(0,c.OS)(e,t),h(e,t),(0,i.nY)("skiaCanvasRemoved_"+e.canvasNumber)})),(0,i.Ld)("skiaCanvasSizeChangedBinding",((e,t)=>{const n=(0,s.yk)(t,e.canvasNumber),r=c.y9[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})),(0,i.jQ)("onXWebCanvasSurfaceChange",((e={},t)=>{const n=(0,s.yk)(t,e.viewId),r=c.y9[n];r&&"function"==typeof r._swap&&r._swap()})));class f{sync(e){this.t=setInterval((()=>{e()}),1e3/60)}dispose(){clearInterval(this.t)}}const g={offset:Date.now(),now:function(){return Date.now()-this.offset}};class _{constructor(e){this.id=0,this.canvasView=e,this.callbacks=new Map,this.vSync=new f,this.vSync.sync((()=>{const e=new Map(this.callbacks);this.callbacks.clear(),e.forEach((e=>{"function"==typeof e&&e.apply(null,[g.now()])})),this.canvasView.present()}))}requestAnimationFrame(e){const t=this.id++;return this.callbacks.set(t,e),t}cancelAnimationFrame(e){this.callbacks.delete(e)}dispose(){this.vSync.dispose(),this.callbacks.clear()}}class m extends c.w4{loadFontFace(e=[]){super.loadFontFace(e);const t=o.Z.SkiaCanvasLoadNewFont||n.g.SkiaCanvasLoadNewFont;if("function"==typeof t){t(e.map((e=>(e.src=e.src||"",e.family=e.family||"",e.style=e.style||"",e.weight=e.weight||"",e.variant=e.variant||"",e))))}}}class y extends c.gK{_initCanvasInstance(){c.w4.initialize(m);const e=(o.Z.HTMLCanvasView||n.g.HTMLCanvasView).createView(this.id),t=(o.Z.HTMLCanvasElement||n.g.HTMLCanvasElement).createElement(e);return this._scheduler=new _(e),p[this._canvasId]=this._scheduler,this._swap=()=>{e.swapSurface()},t}getContext(e,t){return(0,s.zG)(l.I,d.o)(super.getContext(e,t),this.id)}createImage(){const e=new(o.Z.SkiaImages||SkiaImage),t=(0,s.K1)(e,c.nE[this._canvasId]);return new l.e(t)}createImageData(e,t,r){return e?(t=parseFloat(t),r=parseFloat(r),new(o.Z.SkiaImageData||n.g.SkiaImageData)(e,t,r)):null}createPath2D(...e){const t=o.Z.SkiaPath2D||n.g.SkiaPath2D;return 0===e.length?new t:1===e.length?new t(...e):null}requestAnimationFrame(e){return r.Z.useSkiaCanvasRaf?(o.Z.SkiaCanvasRequestAnimationFrame||n.g.SkiaCanvasRequestAnimationFrame)(e):this._scheduler.requestAnimationFrame(e)}cancelAnimationFrame(e){r.Z.useSkiaCanvasRaf?(o.Z.SkiaCanvasCancelAnimationFrame||n.g.SkiaCanvasCancelAnimationFrame)(e):this._scheduler.cancelAnimationFrame(e)}}},2515:(e,t,n)=>{"use strict";n.d(t,{Q:()=>y});var r=n(9045),o=n(2235),i=n(337),a=n(6763),s=n(7973),c=n(29),l=n(2614),d=n(665);const u={};function p(e,t){const n=(0,o.yk)(t,e.canvasNumber),r=u[n];delete u[n],r&&r.dispose()}d.Z.onReady((()=>{(0,o.ci)()&&((0,r.Ld)("skiaCanvasInsert",((e,t)=>{(0,i.mj)(e,t),(0,c.dq)(t,(()=>{p(e,t)}))})),(0,r.Ld)("skiaCanvasRemove",((e,t)=>{(0,i.OS)(e,t),p(e,t),(0,r.nY)("skiaCanvasRemoved_"+e.canvasNumber)})),(0,r.Ld)("skiaCanvasSizeChangedBinding",((e,t)=>{const n=(0,o.yk)(t,e.canvasNumber),r=i.y9[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})))}));class h{set width(e){this._w=e}get width(){return this._w}set height(e){this._h=e}get height(){return this._h}}class f{constructor(){this._src=null,this._referrerPolicy=""}setSrc(e){this._src=e,/^(http|https):\/\//.test(e)?(0,l.o)({url:e,success:e=>{this._src=e.tempFilePath,"function"==typeof this.onload&&this.onload()},fail:this.onerror||(()=>{})}):"function"==typeof this.onload&&this.onload()}getSrc(){return this._src}getReferrerPolicy(){return this._referrerPolicy}setReferrerPolicy(e){this._referrerPolicy=e}}class g{sync(e){const t=()=>{e(),this.t=setTimeout(t,1e3/60)};this.t=setTimeout(t,1e3/60)}dispose(){clearInterval(this.t)}}const _={offset:Date.now(),now:function(){return Date.now()-this.offset}};class m{constructor(e){this.id=0,this.canvasView=e,this.callbacks=new Map,this.vSync=new g,this.vSync.sync((()=>{const e=new Map(this.callbacks);if(this.callbacks.clear(),e.forEach((e=>{"function"==typeof e&&e.apply(null,[_.now()])})),this.canvasView.actions.length>0){let e=!0;const t=this.canvasView.actions;for(let n=0;n<t.length;n++)"clearRect"===t[n].method&&(e=!1);this.canvasView.draw(e)}}))}requestAnimationFrame(e){const t=this.id++;return this.callbacks.set(t,e),t}cancelAnimationFrame(e){this.callbacks.delete(e)}dispose(){this.vSync.dispose(),this.callbacks.clear()}}class y extends i.gK{_initCanvasInstance(){return this._context=new s._(this._webviewId,this._nodeCanvasId,this._nodeId,""),this._scheduler=new m(this._context),u[this._canvasId]=this._scheduler,new h}getContext(){return(0,o.zG)(a.I)(this._context,this.id)}get width(){const e=i.TS.get(this);return e&&e.width}set width(e){e!==this._width&&(this._context._ignoreScale=!0);const t=i.TS.get(this);t&&(t.width=e)}get height(){const e=i.TS.get(this);return e&&e.height}set height(e){e!==this._height&&(this._context._ignoreScale=!0);const t=i.TS.get(this);t&&(t.height=e)}createImage(){const e=new f,t=(0,o.K1)(e,i.nE[this._canvasId]);return new a.e(t)}createImageData(){return null}createPath2D(){return null}requestAnimationFrame(e){return this._scheduler.requestAnimationFrame(e)}cancelAnimationFrame(e){this._scheduler.cancelAnimationFrame(e)}}},768:(e,t,n)=>{"use strict";n.d(t,{A:()=>d,l:()=>u});var r=n(9045),o=n(2235),i=n(2582),a=n(337),s=n(6763),c=n(4030),l=n(7945);i.cj&&((0,r.Ld)("skiaCanvasInsert",((e,t)=>{(0,a.mj)(e,t)})),(0,r.Ld)("skiaCanvasRemove",((e,t)=>{(0,a.OS)(e,t),(0,r.nY)("skiaCanvasRemoved_"+e.canvasNumber)})),(0,r.Ld)("skiaCanvasSizeChangedBinding",((e,t)=>{const n=(0,o.yk)(t,e.canvasNumber),r=a.y9[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})));class d extends a.w4{loadFontFace(e=[]){super.loadFontFace(e);const t=n.g.skiacanvasLoadNewFont;if("function"==typeof t){t(e.map((e=>(e.src=e.src||"",e.family=e.family||"",e.style=e.style||"",e.weight=e.weight||"",e.variant=e.variant||"",e))))}}}class u extends a.gK{_initCanvasInstance(){a.w4.initialize(d);return new n.g.Canvas(this.id)}getContext(e,t){return(0,o.zG)(s.I,c.o)(super.getContext(e,t),this.id)}createImage(){const e=new n.g.Image,t=(0,o.K1)(e,a.nE[this._canvasId]);return new s.e(t)}createImageData(e,t,r){return e?(t=parseFloat(t),r=parseFloat(r),new n.g.ImageData(e,t,r)):null}createPath2D(...e){return 0===e.length?new Path2D:1===e.length?new Path2D(...e):null}requestAnimationFrame(e){return(0,l.t)().requestAnimationFrame(e)}cancelAnimationFrame(e){return(0,l.t)().cancelAnimationFrame(e)}}},6763:(e,t,n)=>{"use strict";n.d(t,{e:()=>i,I:()=>c});var r=n(5150),o=n(2582);class i{constructor(e){Object.defineProperty(this,"_ptr",{value:e,writable:!1,configurable:!1,enumerable:!1})}set src(e){/^(http|https):\/\//.test(e)&&(e=encodeURI(e));const t=e=>()=>{setTimeout((()=>{e()}),0)};this._ptr.onload=t((()=>{"function"==typeof this.__onload&&this.__onload.apply(this)})),this._ptr.onerror=t((()=>{"function"==typeof this.__onerror&&this.__onerror.apply(this)})),this._ptr.src=e}set referrerPolicy(e){"string"==typeof e&&(this._ptr.referrerPolicy=e)}set onload(e){Object.defineProperty(this,"__onload",{value:e,writable:!1,configurable:!1,enumerable:!1})}set onerror(e){Object.defineProperty(this,"__onerror",{value:e,writable:!1,configurable:!1,enumerable:!1})}get referrerPolicy(){return this._ptr.referrerPolicy}get src(){return this._ptr.src}get onload(){return this._ptr.onload}get onerror(){return this.__onload}get complete(){return this._ptr.complete}get width(){return this._ptr.width}get height(){return this._ptr.height}}const a=new WeakMap,s=n.g.SkiaCanvasExternalTexture;function c(e,t){if(!e)return e;const n=e.drawImage.bind(e),c=e.createPattern.bind(e);return e.drawImage=(e,...c)=>{if(e instanceof i)return n(e._ptr,...c);if(e instanceof r.lR){const n=e;if("number"!=typeof n._videoId)throw new Error("Failed to execute 'drawImage' on 'CanvasRenderingContext2D': The provided video context is invalid, make sure that comes from 'createSelectQuery.context'.");const i=a.get(n)||{};i[t]?e=i[t]:(e=function(e,t){return o.gm?(0,r.hG)(e):new s(t,e._videoId,"video")}(n,t),i[t]=e,a.set(n,i))}return n(e,...c)},e.createPattern=(e,t)=>c(e instanceof i?e._ptr:e,t),e}delete n.g.SkiaCanvasExternalTexture},4030:(e,t,n)=>{"use strict";function r(e){if(!e)return e;const t=e.fill.bind(e),n=e.putImageData.bind(e);return e.fill=e=>e?t(e,e):t(),e.putImageData=(e,...t)=>0===e||"object"!=typeof e?null:n(e,...t),e}n.d(t,{o:()=>r})},3812:(e,t,n)=>{"use strict";n.d(t,{jZ:()=>c,q7:()=>l,z9:()=>p,Kf:()=>h,f5:()=>f,I$:()=>g,aj:()=>_});var r=n(2235),o=n(258),i=n(29),a=n(9187);const s={},c={},l={},d=new WeakMap,u={};function p(e,t){const n=(0,r.yk)(t,e.canvasNumber);l[n]={top:e.top,left:e.left,width:e.width,height:e.height,canvasNumber:e.canvasNumber,nodeId:e.nodeId,pluginId:e.pluginId,webviewId:t},c[n]=Object.assign({},e.data,{webviewId:t});const o=s[n];"function"==typeof o&&(o.call(),delete s[n]),(0,i.dq)(t,(()=>{h(e,t)}))}function h(e,t){const n=(0,r.yk)(t,e.canvasNumber);delete l[n],delete c[n],delete s[n],delete u[n]}function f(e,t){const n=(0,r.yk)(e,t);return c[n]}function g(e,t){const n=(0,r.yk)(e,t),o=u[n];return o||null}class _ extends o.c{constructor(e,t){super(),this._canvasId=(0,r.yk)(e,t),u[this._canvasId]=this}_init(){const e=l[this._canvasId];if(this.id=e.canvasNumber,this._top=e.top,this._left=e.left,this._width=e.width,this._height=e.height,!this.id)return void console.error("Canvas node cannot be found");const t=this._initCanvasInstance();d.set(this,t)}getContext(e,t){if("2d"===e)console.info("getContext for canvas 2d is not yet supported");else{if("webgl"===e){const e=d.get(this);if(!e)return void console.error("Canvas getContext failed due to missing canvas instance");if((0,a.QN)("webgl"),this._ctx)return this._ctx;const n=e.getContext("webgl",t);return this._ctx=n,n}console.error("Invalid type ["+e+"] for Canvas#getContext")}}_onReady(e){const t=()=>{this._init(),"function"==typeof e&&e()};l[this._canvasId]?t():s[this._canvasId]=t}get width(){const e=d.get(this);return e&&e.width}set width(e){const t=d.get(this);t&&(t.width=e)}get height(){const e=d.get(this);return e&&e.height}set height(e){const t=d.get(this);t&&(t.height=e)}_initCanvasInstance(){}createImage(){}requestAnimationFrame(){}cancelAnimationFrame(){}}},6962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OffscreenCanvas:()=>o.y,SKIA_CANVAS_ENABLED:()=>r.hU,SkiaCanvas:()=>i.gK,canvas:()=>r.JQ,canvasGetImageData:()=>r.Mm,canvasGetImageData4Plugin:()=>r.ZX,canvasInfo:()=>r.go,canvasPutImageData:()=>r.Z5,canvasPutImageData4Plugin:()=>r.Sk,canvasToDataURL:()=>r.nY,canvasToTempFilePath:()=>r.qW,canvasToTempFilePath4Plugin:()=>r.KU,createCanvasContext:()=>r.yU,createCanvasContext4Plugin:()=>r.RU,createCanvasNode:()=>W,createContext:()=>r.kr,createOffscreenCanvas:()=>o.n,drawCanvas:()=>r.MN,drawCanvas4Plugin:()=>r.k8,drawCanvasImpl:()=>r.fS,getOrCreateCanvas:()=>i.uy,onCanvasMethodCallbackOnce:()=>r.Py,skiaCanvasInsert:()=>i.mj,skiaCanvasRemove:()=>i.OS});var r=n(6399),o=n(1331),i=n(2892),a=n(2851),s=n(2582),c=n(3812),l=n(9045),d=n(7945),u=n(2235);let p=null,h=!1;const f={},g=["touchstart","touchmove","touchend","touchcancel"];s.cj&&((0,l.Ld)("webGLInserted",((e,t)=>{p||(p=(0,d.t)()),h||(h=!0,function(){const e=p;g.forEach((t=>{e[`on${t}`]=e=>{const n=f[e.canvasId];n?n.handlers[`bind${t}`]&&a.Z.webviewEventCallback({data:{type:t,target:n.target,currentTarget:n.target,timeStamp:e.timeStamp,touches:(0,u.VN)(e.touches),changedTouches:(0,u.VN)(e.changedTouches)},eventName:n.handlers[`bind${t}`],webviewId:n.webviewId,nodeId:n.nodeId}):console.error("event can not be dispatched due to missing node info")}}))}()),f[e.canvasNumber]=Object.assign({},e.data,{webviewId:t}),(0,c.z9)(e,t)})),(0,l.Ld)("webGLRemoved",((e,t)=>{delete f[e.canvasNumber],(0,c.Kf)(e,t)})));class _ extends c.aj{_initCanvasInstance(){return function(e){const t=p.createCanvas(e.id);return t._canvasId=e._canvasId,t}(this)}createImage(){return function(e){const t=p.createImage(e.id),n=c.q7[e._canvasId]||{};return(0,u.K1)(t,n)}(this)}requestAnimationFrame(e){return p.requestAnimationFrame(e)}cancelAnimationFrame(e){return p.cancelAnimationFrame(e)}}var m=n(6947);const y=["touchstart","touchmove","touchend","touchcancel"];let v=!1;s.wZ&&((0,l.Ld)("webGLInserted",((...e)=>{v||(v=!0,function(){const e=m.Z.EventHandler;y.forEach((t=>{e[`on${t}`]=e=>{const n=e.currentTarget,r=c.jZ[n._canvasId];r?r.handlers[`bind${t}`]&&a.Z.webviewEventCallback({data:{type:t,target:r.target,currentTarget:r.target,timeStamp:e.timeStamp,touches:(0,u.VN)(e.touches),changedTouches:(0,u.VN)(e.changedTouches)},eventName:r.handlers[`bind${t}`],webviewId:r.webviewId,nodeId:r.nodeId}):console.error("event can not be dispatched due to missing node info")}}))}()),(0,c.z9)(...e)})),(0,l.Ld)("webGLRemoved",c.Kf));class A extends c.aj{_initCanvasInstance(){const e=function(e){const t=new m.Z.findElementById(e.id);return t._canvasId=e._canvasId,t}(this);return this.__canvasNumber=this.id,this.id=e.__id,e}getContext(e,t){return t&&t.alpha||(0,l.nY)("xwebWebGLSetOpaqueBackground",{canvasNumber:this.__canvasNumber}),super.getContext(e,t)}createImage(){return function(e){const t=new m.Z.Image,n=c.q7[e._canvasId];return(0,u.K1)(t,n)}(this)}requestAnimationFrame(e){return m.Z.requestAnimationFrame(e)}cancelAnimationFrame(e){return m.Z.cancelAnimationFrame(e)}}var b=n(405),w=n(29);const C={},I={},E={},S={};let T=a.Z.currentWebviewId;s.gm&&((0,l.Ld)("webGLInserted",c.z9),(0,l.Ld)("webGLUpdated",(function(e,t){const n=(0,u.yk)(t,e.canvasNumber),r=C[n];if(!r)return;r.style.top=e.box.top+"px",r.style.left=e.box.left+"px",r.style.width=e.box.width+"px",r.style.height=e.box.height+"px"})),(0,l.Ld)("webGLRemoved",((e,t)=>{const n=(0,u.yk)(t,e.canvasNumber);(0,c.Kf)(e,t),delete C[n]})),(0,l.Ld)("webGLPageScroll",((e,t)=>{"function"==typeof window.scrollTo&&(document.body.scrollWidth===e.width&&document.body.scrollHeight===e.height||(document.body.style.width=e.width+"px",document.body.style.height=e.height+"px"),window.scrollTo(e.scrollLeft,e.scrollTop),E[t]={scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})})),(0,b.H)((e=>{S[e.webviewId]||((0,w.dq)(e.webviewId,(()=>{const t=I[e.webviewId];if(t){for(const e of t)delete C[e._canvasId],document.body.removeChild(e);delete E[e.webviewId],delete I[e.webviewId],delete S[e.webviewId]}})),S[e.webviewId]=!0);const t=e.webviewId;if(t!==T)for(const[e,n]of Object.entries(I))if(String(e)===String(t)){for(const e of n)e.style.visibility="visible";const t=E[e];t?window.scrollTo(t.scrollLeft,t.scrollTop):window.scrollTo(0,0)}else for(const e of n)e.style.visibility="hidden";T=t})));class x extends c.aj{constructor(e,t){super(e,t),this._webviewId=e}_initCanvasInstance(){return function(e){const t=document.createElement("canvas");return t.style.position="absolute",t.style.top=e._top+"px",t.style.left=e._left+"px",t.style.width=e._width+"px",t.style.height=e._height+"px",t.width=e._width,t.height=e._height,t._canvasId=e._canvasId,document.body.appendChild(t),C[e._canvasId]=t,I[e._webviewId]||(I[e._webviewId]=[]),I[e._webviewId].push(t),t}(this)}createImage(){return function(e){const t=c.q7[e._canvasId];return window.__global.createCustomImage((e=>(0,u.rL)(e,t.nodeId,t.pluginId,t.webviewId)),(e=>e.replace(/^\/__pageframe__\//,"")))}(this)}requestAnimationFrame(e){return window.requestAnimationFrame(e)}cancelAnimationFrame(e){return window.cancelAnimationFrame(e)}}var k=n(337),P=n(768),D=n(6106),O=n(6763);const N={},R={},M={};let L=a.Z.currentWebviewId;s.gm&&((0,l.Ld)("skiaCanvasInsert",((e,t)=>{(0,k.mj)(e,t)})),(0,l.Ld)("skiaCanvasRemove",((e,t)=>{(0,k.OS)(e,t);const n=(0,u.yk)(t,e.canvasNumber);delete N[n]})),(0,l.Ld)("skiaCanvasUpdated",(function(e,t){const n=(0,u.yk)(t,e.canvasNumber),r=N[n];if(!r||"function"==typeof r){return void new Promise((e=>{N[n]=e})).then((t=>{t.style.top=e.box.top+"px",t.style.left=e.box.left+"px",t.style.width=e.box.width+"px",t.style.height=e.box.height+"px"}))}r.style.top=e.box.top+"px",r.style.left=e.box.left+"px",r.style.width=e.box.width+"px",r.style.height=e.box.height+"px"})),(0,l.Ld)("skiaPageScroll",((e,t)=>{"function"==typeof window.scrollTo&&(document.body.scrollWidth===e.width&&document.body.scrollHeight===e.height||(document.body.style.width=e.width+"px",document.body.style.height=e.height+"px"),window.scrollTo(e.scrollLeft,e.scrollTop),M[t]={scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})})),(0,b.H)((e=>{(0,w.dq)(e.webviewId,(()=>{const t=R[e.webviewId];if(t){for(const e of t)document.body.removeChild(e);delete M[e.webviewId],delete R[e.webviewId]}}));const t=e.webviewId;if(t!==L)for(const[e,n]of Object.entries(R))if(String(e)===String(t)){for(const e of n)e.style.visibility="visible";const t=M[e];t?window.scrollTo(t.scrollLeft,t.scrollTop):window.scrollTo(0,0)}else for(const e of n)e.style.visibility="hidden";L=t})));class B extends k.gK{constructor(e,t){super(e,t),this._webviewId=e}_initCanvasInstance(){const e=document.createElement("canvas");e.style.position="absolute",e.style.top=this._top+"px",e.style.left=this._left+"px",e.style.width=this._width+"px",e.style.height=this._height+"px",e.width=this._width,e.height=this._height,e._canvasId=this._canvasId,document.body.appendChild(e);const t=N[this._canvasId];return t&&"function"==typeof t&&t(e),N[this._canvasId]=e,R[this._webviewId]||(R[this._webviewId]=[]),R[this._webviewId].push(e),this._canvasRef=e,e}getContext(e,t){return(0,u.zG)(O.I)(super.getContext(e,t),this.id)}createImage(){const e=k.nE[this._canvasId];return window.__global.createCustomImage((t=>(0,u.rL)(t,e.nodeId,e.pluginId,e.webviewId)),(e=>e.replace(/^\/__pageframe__\//,"")))}createImageData(e,t,n){if(!e)return null;t=parseFloat(t),n=parseFloat(n);const r=document.createElement("canvas").getContext("2d").createImageData(t,n);for(let t=0;t<e.length;t++)r.data[t]=e[t];return r}createPath2D(...e){return window.Path2D?new Path2D(...e):null}requestAnimationFrame(e){return window.requestAnimationFrame(e)}cancelAnimationFrame(e){return window.cancelAnimationFrame(e)}}var F=n(2515);function W(e,t,n,r){if("2d"===t){const t=(0,k.SF)(a.Z.currentWebviewId,e);if(t)return t;if((0,u.ci)())return new F.Q(a.Z.currentWebviewId,e,n,r);if(s.cj)return new P.l(a.Z.currentWebviewId,e);if(s.wZ)return new D.$(a.Z.currentWebviewId,e);if(s.gm){if(window&&"function"==typeof window.scrollTo)return new B(a.Z.currentWebviewId,e);console.warn("开发工具暂不支持获取 Canvas 节点")}}else if("webgl"===t){const t=(0,c.I$)(a.Z.currentWebviewId,e);if(t)return t;if(s.cj)return new _(a.Z.currentWebviewId,e);if(s.wZ)return new A(a.Z.currentWebviewId,e);if(s.gm){if(window&&"function"==typeof window.scrollTo)return new x(a.Z.currentWebviewId,e);console.warn("开发工具暂不支持获取 Canvas 节点")}}return null}},2235:(e,t,n)=>{"use strict";n.d(t,{yk:()=>d,kR:()=>u,GX:()=>p,Fi:()=>_,rL:()=>y,K1:()=>v,VN:()=>A,LG:()=>b,zG:()=>w,ci:()=>I});var r=n(9045),i=n(5260),a=n(2851),s=n(665),c=n(2582),l=n(1095);void 0!==globalThis.ImageData&&globalThis.ImageData;function d(e,t,n="",r=""){let i=`canvas_${e}_${t}_${n}_`;return r&&r!==o.getRootNodeId(e)&&(i+=r),i}function u(e){const t=[];let n=1;return(0,r.Ld)(e,(e=>{let n=-1;for(let r=0;r<t.length;r++){const o=t[r],i=o[0],a=o[1];if(i.cid===e.cid&&i.canvasId===e.canvasId){n=r,a(e);break}}n>=0&&t.splice(n,1)})),function(e,r){e.cid=n++,t.push([e,r])}}function p(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return(window.__global||window).btoa(t)}const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/,g="undefined"!=typeof window&&window.atob||function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!f.test(e))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");let t;e+="==".slice(2-(3&e.length));let n,r,o="",i=0;for(;i<e.length;)t=h.indexOf(e.charAt(i++))<<18|h.indexOf(e.charAt(i++))<<12|(n=h.indexOf(e.charAt(i++)))<<6|(r=h.indexOf(e.charAt(i++))),o+=64===n?String.fromCharCode(t>>16&255):64===r?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return o};function _(e){const t=g(e),n=t.length,r=new Uint8ClampedArray(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return r}function m(e,t,n,r){if(/^(http|https):\/\//.test(e)||/^\s*data:image\//.test(e)||""===e)return e;if(!/wxfile:\/\//.test(e))if(n||t){n=n.split("/")[0];const a=o.getNodeById(t,r),s=a&&a.is||"";e=n?0===e.indexOf("/")?o.getPluginRoutePrefix(n)+(0,i.sd)(s,e,!1).replace(/\.html$/,""):(0,i.sd)(o.convertComponentAliasToRoute(s),e,!1).replace(/\.html$/,""):(0,i.sd)(s,e,!1).replace(/\.html$/,"")}else e=(0,i.sd)(a.Z.lastRoute,e,!1).replace(/.html$/,"");return e}function y(e,t,n,r){if(/^(http|https):\/\//.test(e)||/^\s*data:image\//.test(e)||""===e)return e;return"/__pageframe__/"+m(e,t,n,r)}function v(e,t){const n=e.setSrc.bind(e),r=e.getSrc.bind(e),o=e.getReferrerPolicy?e.getReferrerPolicy.bind(e):()=>{},i=e.setReferrerPolicy?e.setReferrerPolicy.bind(e):()=>{};return delete e.getSrc,delete e.setSrc,delete e.getReferrerPolicy,delete e.setReferrerPolicy,Object.defineProperty(e,"src",{enumerable:!0,set:function(e){const r=m(e,t.nodeId,t.pluginId,t.webviewId);n(r)},get:function(){return r()}}),Object.defineProperty(e,"referrerPolicy",{enumerable:!0,set(e){i(e)},get:()=>o()}),e}function A(e){return e&&e.length>0&&e.forEach((e=>{e.x=e.clientX||e.pageX,e.y=e.clientY||e.pageY,delete e.target})),e}function b(e){return e&&e.length>0&&e.forEach((e=>{e.clientX=e.x,e.clientY=e.y,e.pageX=e.x,e.pageY=e.y})),e}function w(...e){return function(...t){let n;for(let r=0;r<e.length;++r){const o=e[r];"function"==typeof o&&(n=0===r?o.apply(null,t):o.call(null,n))}return n}}let C=!1;function I(){if(c.cj&&(0,l.er)()){const e=255&Number(s.Z.host.version);if(e>=16&&e<=31)return!0}return s.Z.clientVersion>=385881088&&s.Z.clientVersion<=385881343&&C}s.Z.onReady((()=>{(0,r.IN)("getPermissionBytes",{indexes:[977],success:e=>{e.permissionBytes&&1===e.permissionBytes[0]&&(C=!0)}})}))},4616:(e,t,n)=>{"use strict";n.d(t,{Tp:()=>o});const r={sample:{invokeWebviewMethod:null,drawCanvas:null,createContext:null,createCanvasContext:null,canvasToTempFilePath:null,canvasGetImageData:null,canvasPutImageData:null,getShareInfo:null,pageScrollTo:null,chooseInvoiceTitle:null,ShareInfoStorage:null,arrayBufferToBase64:null,base64ToArrayBuffer:null,openSetting:null,getExtConfig:null,chooseMedia:null,chooseWeChatContact:null,uploadEncryptedFileToCDN:null,onUploadEncryptedFileToCDNProgress:null,getExtConfigSync:null,showShareMenu:null,hideShareMenu:null,updateShareMenu:null,openUrl:null,setNavigationBarColor:null,setNavigationBarAlpha:null,_getRealRoute:null,vibrateShort:null,vibrateLong:null,getSetting:null,checkIsSupportFacialRecognition:null,startFacialRecognitionVerify:null,startFacialRecognitionVerifyAndUploadVideo:null,sendBizRedPacket:null,sendGoldenRedPacket:null,openGoldenRedPacketDetail:null,showRedPackage:null,addPhoneContact:null,setScreenBrightness:null,getScreenBrightness:null,shareToWeRun:null,getWeRunData:null,uploadWeRunData:null,canIUse:null,setPageStyle:null,triggerGettingWidgetData:null,navigateToMiniProgram:null,navigateToDevMiniProgram:null,navigateBackMiniProgram:null,exitMiniProgram:null,setNavigationBarRightButton:null,onTapNavigationBarRightButton:null,setTopBarText:null,setTabBarBadge:null,removeTabBarBadge:null,showTabBarRedDot:null,hideTabBarRedDot:null,showTabBar:null,hideTabBar:null,setTabBarStyle:null,setTabBarItem:null,setEnableDebug:null,captureScreen:null,onUserCaptureScreen:null,setKeepScreenOn:null,checkIsSupportSoterAuthentication:null,startSoterAuthentication:null,checkIsSoterEnrolledInDevice:null,openDeliveryList:null,reportIDKey:null,reportKeyValue:null,setNavigationBarTitle:null,showNavigationBarLoading:null,hideNavigationBarLoading:null,startPullDownRefresh:null,stopPullDownRefresh:null,operateWXData:null,getOpenDeviceId:null,makeBluetoothPair:null,openBluetoothAdapter:null,closeBluetoothAdapter:null,getBluetoothAdapterState:null,startBluetoothDevicesDiscovery:null,stopBluetoothDevicesDiscovery:null,getBluetoothDevices:null,getConnectedBluetoothDevices:null,createBLEConnection:null,setBLEMTU:null,closeBLEConnection:null,getBLEDeviceServices:null,getBLEDeviceCharacteristics:null,notifyBLECharacteristicValueChanged:null,notifyBLECharacteristicValueChange:null,readBLECharacteristicValue:null,writeBLECharacteristicValue:null,onBluetoothDeviceFound:null,onBLEConnectionStateChanged:null,onBLEConnectionStateChange:null,onBLECharacteristicValueChange:null,onBluetoothAdapterStateChange:null,offBluetoothAdapterStateChange:null,offBluetoothDeviceFound:null,offBLEConnectionStateChanged:null,offBLEConnectionStateChange:null,offBLECharacteristicValueChange:null,createBLEPeripheralServer:null,onBLEPeripheralConnectionStateChanged:null,offBLEPeripheralConnectionStateChanged:null,startBeaconDiscovery:null,stopBeaconDiscovery:null,getBeacons:null,onBeaconUpdate:null,onBeaconServiceChange:null,startWifi:null,stopWifi:null,getWifiList:null,getConnectedWifi:null,connectWifi:null,presetWifiList:null,setWifiList:null,onGetWifiList:null,onWifiConnected:null,offGetWifiList:null,offWifiConnected:null,onEvaluateWifi:null,getHCEState:null,startHCE:null,stopHCE:null,sendHCEMessage:null,onHCEMessage:null,startLocalServiceDiscovery:null,stopLocalServiceDiscovery:null,onLocalServiceFound:null,offLocalServiceFound:null,onLocalServiceLost:null,offLocalServiceLost:null,onLocalServiceDiscoveryStop:null,offLocalServiceDiscoveryStop:null,onLocalServiceResolveFail:null,offLocalServiceResolveFail:null,redirectTo:null,reLaunch:null,navigateTo:null,switchTab:null,navigateBack:null,_triggerBeforeUnloadPage:null,_triggerBeforeShareAppMessage:null,navigateBackApplication:null,navigateBackNative:null,launchApplication:null,getStorage:null,getStorageSync:null,setStorage:null,setStorageSync:null,removeStorage:null,removeStorageSync:null,clearStorage:null,clearStorageSync:null,getStorageInfo:null,getStorageInfoSync:null,getBackgroundFetchData:null,onBackgroundFetchData:null,request:null,connectSocket:null,closeSocket:null,sendSocketMessage:null,onSocketOpen:null,onSocketClose:null,onSocketMessage:null,onSocketError:null,uploadFile:null,downloadFile:null,addNativeDownloadTask:null,chooseImage:null,previewImage:null,previewMedia:null,getImageInfo:null,saveImageToPhotosAlbum:null,startRecord:null,stopRecord:null,playVoice:null,pauseVoice:null,stopVoice:null,onVoicePlayEnd:null,chooseVideo:null,saveVideoToPhotosAlbum:null,getVideoInfo:null,compressVideo:null,getLocation:null,openLocation:null,chooseLocation:null,choosePoi:null,onLocationChange:null,offLocationChange:null,onLocationChangeError:null,offLocationChangeError:null,startLocationUpdateBackground:null,startLocationUpdate:null,stopLocationUpdate:null,getNetworkType:null,onNetworkStatusChange:null,getSystemInfo:null,getSystemInfoSync:null,getBatteryInfo:null,getBatteryInfoSync:null,startAccelerometer:null,stopAccelerometer:null,onAccelerometerChange:null,startCompass:null,stopCompass:null,onCompassChange:null,reportAction:null,getBackgroundAudioManager:null,getRecorderManager:null,getBackgroundAudioPlayerState:null,playBackgroundAudio:null,pauseBackgroundAudio:null,seekBackgroundAudio:null,stopBackgroundAudio:null,onBackgroundAudioPlay:null,onBackgroundAudioPause:null,onBackgroundAudioStop:null,join1v1Chat:null,setEnable1v1Chat:null,joinVoIPChat:null,exitVoIPChat:null,updateVoIPChatMuteConfig:null,onVoIPChatMembersChanged:null,onVoIPChatSpeakersChanged:null,onVoIPChatInterrupted:null,offVoIPChatMembersChanged:null,offVoIPChatSpeakersChanged:null,offVoIPChatInterrupted:null,onVoIPVideoMembersChanged:null,offVoIPVideoMembersChanged:null,onVoIPChatStateChanged:null,offVoIPChatStateChanged:null,subscribeVoIPVideoMembers:null,login:null,checkSession:null,authorize:null,getUserInfo:null,getUserProfile:null,requestFacetoFacePayment:null,requestPayment:null,requestPersonalPay:null,requestJointPayment:null,getWCPayOverseaPrepayRequest:null,requestH5Transaction:null,openWCPayOverseaPaymentReceive:null,handleWCPayOverseaWalletBuffer:null,requestVerifyUserIdentity:null,verifyPaymentPassword:null,bindPaymentCard:null,requestPaymentToBank:null,requestVirtualPayment:null,openOfflinePayView:null,openWCPayCardList:null,requestMallPayment:null,requestOrderPayment:null,addCard:null,openCard:null,scanCode:null,openQRCode:null,scanItem:null,chooseAddress:null,saveFile:null,openDocument:null,getSavedFileList:null,getSavedFileInfo:null,getFileInfo:null,removeSavedFile:null,getFileSystemManager:null,chooseContact:null,removeUserCloudStorage:null,setUserCloudStorage:null,makePhoneCall:null,makeVoIPCall:null,onAppRoute:null,onAppRouteDone:null,onAppEnterBackground:null,onAppEnterForeground:null,onAppUnhang:null,onPageReload:null,onPageNotFound:null,offPageNotFound:null,onThemeChange:null,offThemeChange:null,onAppShow:null,offAppShow:null,onAppHide:null,offAppHide:null,onError:null,offError:null,onUnhandledRejection:null,offUnhandledRejection:null,getLaunchOptionsSync:null,getEnterOptionsSync:null,createAnimation:null,createInnerAudioContext:null,createAudioContext:null,createVideoContext:null,createMapContext:null,createCameraContext:null,createLivePlayerContext:null,createLivePusherContext:null,onWebviewEvent:null,onNativeEvent:null,hideKeyboard:null,onKeyboardHeightChange:null,offKeyboardHeightChange:null,getPublicLibVersion:null,showModal:null,showToast:null,hideToast:null,showLoading:null,hideLoading:null,showActionSheet:null,reportAnalytics:null,getClipboardData:null,setClipboardData:null,createSelectorQuery:null,createIntersectionObserver:null,updatePerfData:null,traceEvent:null,onMemoryWarning:null,offMemoryWarning:null,getUpdateManager:null,createWorker:null,voiceSplitJoint:null,uploadSilkVoice:null,downloadSilkVoice:null,getResPath:null,setResPath:null,env:null,appStatus:null,hanged:null,getLogManager:null,getRealtimeLogManager:null,onWindowResize:null,offWindowResize:null,setPageOrientation:null,loadFontFace:null,setInnerAudioOption:null,addWeRunData:null,setBackgroundColor:null,setBackgroundTextStyle:null,getMenuButtonBoundingClientRect:null,calRqt:null,getAvailableAudioSources:null,reportMonitor:null,faceVerifyForPay:null,chooseInvoice:null,startDeviceMotionListening:null,stopDeviceMotionListening:null,onDeviceMotionChange:null,startGyroscope:null,stopGyroscope:null,onGyroscopeChange:null,secureTunnel:null,startCustomFacialRecognitionVerify:null,startCustomFacialRecognitionVerifyAndUploadVideo:null,getAccountInfoSync:null,setCookies:null,getCookies:null,nextTick:null,chooseMultiMedia:null,chooseMessageFile:null,getLabInfo:null,setLabInfo:null,compressImage:null,shareAppMessageForFakeNative:null,downloadApp:null,installDownloadApp:null,getAppInstallState:null,queryDownloadAppTask:null,cancelDownloadAppTask:null,resumeDownloadAppTask:null,pauseDownloadAppTask:null,onDownloadAppStateChange:null,downloadAppForIOS:null,offGyroscopeChange:null,offDeviceMotionChange:null,offCompassChange:null,offAccelerometerChange:null,offUserCaptureScreen:null,offNetworkStatusChange:null,offHCEMessage:null,offBeaconUpdate:null,offBeaconServiceChange:null,requestSubscribeMessage:null,hideHomeButton:null,getBLEDeviceRSSI:null,checkIsOpenAccessibility:null,addPhoneCalendar:null,addPhoneRepeatCalendar:null,updateWeChatApp:null,getRandomValues:null,shareFileMessage:null,shareVideoMessage:null,addFileToFavorites:null,addVideoToFavorites:null,showShareImageMenu:null,searchContacts:null,publishWeChatState:null},ui:{invokeWebviewMethod:0,drawCanvas:20,createContext:20,createCanvasContext:20,canvasToTempFilePath:20,canvasGetImageData:20,canvasPutImageData:20,getShareInfo:30,pageScrollTo:30,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:20,openSettingForPlugin:30,getExtConfig:0,chooseMedia:20,chooseWeChatContact:20,uploadEncryptedFileToCDN:10,onUploadEncryptedFileToCDNProgress:10,getExtConfigSync:0,showShareMenu:30,hideShareMenu:30,updateShareMenu:30,openUrl:20,setNavigationBarColor:30,setNavigationBarAlpha:30,hideHomeButton:30,_getRealRoute:20,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:10,startFacialRecognitionVerify:20,startFacialRecognitionVerifyAndUploadVideo:20,sendBizRedPacket:10,sendGoldenRedPacket:10,openGoldenRedPacketDetail:10,showRedPackage:10,addPhoneContact:10,setScreenBrightness:20,getScreenBrightness:20,shareToWeRun:20,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:0,setPageStyle:30,triggerGettingWidgetData:10,navigateToMiniProgram:30,navigateToDevMiniProgram:30,navigateBackMiniProgram:30,exitMiniProgram:30,setNavigationBarRightButton:20,onTapNavigationBarRightButton:20,setTopBarText:30,setTabBarBadge:30,removeTabBarBadge:30,showTabBarRedDot:30,hideTabBarRedDot:30,showTabBar:30,hideTabBar:30,setTabBarStyle:30,setTabBarItem:30,setEnableDebug:30,captureScreen:30,onUserCaptureScreen:30,offUserCaptureScreen:30,setKeepScreenOn:10,checkIsSupportSoterAuthentication:10,startSoterAuthentication:10,checkIsSoterEnrolledInDevice:10,openDeliveryList:20,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:30,showNavigationBarLoading:30,hideNavigationBarLoading:30,startPullDownRefresh:30,stopPullDownRefresh:30,operateWXData:10,getOpenDeviceId:10,makeBluetoothPair:10,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceRSSI:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:30,reLaunch:30,navigateTo:30,switchTab:30,navigateBack:30,_triggerBeforeUnloadPage:30,_triggerBeforeShareAppMessage:30,navigateBackApplication:30,navigateBackNative:0,launchApplication:30,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:10,chooseImage:20,previewImage:20,previewMedia:20,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:20,stopRecord:20,playVoice:20,pauseVoice:20,stopVoice:20,onVoicePlayEnd:20,chooseVideo:20,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:20,openLocation:20,chooseLocation:20,choosePoi:20,onLocationChange:20,offLocationChange:20,onLocationChangeError:20,offLocationChangeError:20,startLocationUpdateBackground:20,startLocationUpdate:20,stopLocationUpdate:20,getNetworkType:0,onAppRoute:30,onAppRouteDone:30,onAppEnterBackground:30,onAppEnterForeground:30,onAppUnhang:30,onPageReload:30,onPageNotFound:30,offPageNotFound:30,onThemeChange:10,offThemeChange:10,onAppShow:30,offAppShow:30,onAppHide:30,offAppHide:30,onError:30,offError:30,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:20,createAudioContext:20,createVideoContext:20,createMapContext:20,createCameraContext:20,createLivePlayerContext:20,createLivePusherContext:20,onWebviewEvent:20,onNativeEvent:20,hideKeyboard:20,onKeyboardHeightChange:20,offKeyboardHeightChange:20,getPublicLibVersion:0,showModal:20,showToast:20,hideToast:20,showLoading:20,hideLoading:20,showActionSheet:20,reportAnalytics:10,getClipboardData:20,setClipboardData:20,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:10,uploadSilkVoice:10,downloadSilkVoice:10,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:20,offWindowResize:20,setPageOrientation:30,loadFontFace:20,setInnerAudioOption:0,setBackgroundColor:30,setBackgroundTextStyle:30,getMenuButtonBoundingClientRect:20,calRqt:10,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,join1v1Chat:10,setEnable1v1Chat:10,joinVoIPChat:10,exitVoIPChat:10,updateVoIPChatMuteConfig:10,onVoIPChatMembersChanged:10,onVoIPChatSpeakersChanged:10,onVoIPChatInterrupted:10,offVoIPChatMembersChanged:10,offVoIPChatSpeakersChanged:10,offVoIPChatInterrupted:10,onVoIPVideoMembersChanged:10,offVoIPVideoMembersChanged:10,onVoIPChatStateChanged:10,offVoIPChatStateChanged:10,subscribeVoIPVideoMembers:10,login:10,checkSession:10,authorize:20,getUserInfo:20,getUserProfile:20,requestFacetoFacePayment:20,requestPayment:20,verifyPaymentPassword:20,bindPaymentCard:20,requestPersonalPay:20,requestPaymentToBank:20,requestJointPayment:20,getWCPayOverseaPrepayRequest:20,requestH5Transaction:20,openWCPayOverseaPaymentReceive:20,handleWCPayOverseaWalletBuffer:20,requestVerifyUserIdentity:20,requestVirtualPayment:20,openOfflinePayView:20,openWCPayCardList:20,requestMallPayment:20,requestOrderPayment:20,addCard:20,openCard:20,scanCode:20,openQRCode:20,scanItem:20,chooseAddress:20,saveFile:10,openDocument:20,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:20,removeUserCloudStorage:10,setUserCloudStorage:10,makePhoneCall:20,makeVoIPCall:20,getAvailableAudioSources:10,reportMonitor:10,faceVerifyForPay:30,chooseInvoice:20,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:10,startCustomFacialRecognitionVerify:10,startCustomFacialRecognitionVerifyAndUploadVideo:10,getAccountInfoSync:0,setCookies:10,getCookies:10,nextTick:0,chooseMultiMedia:20,chooseMessageFile:20,getLabInfo:10,setLabInfo:10,compressImage:0,enterContact:20,shareAppMessageForFakeNative:20,checkIsOpenAccessibility:10,addPhoneCalendar:20,addPhoneRepeatCalendar:20,updateWeChatApp:10,getRandomValues:0,shareFileMessage:20,shareVideoMessage:20,addFileToFavorites:20,addVideoToFavorites:20,showShareImageMenu:20,searchContacts:10,publishWeChatState:20},log:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:2,canvasToTempFilePath:2,canvasGetImageData:2,canvasPutImageData:2,getShareInfo:1,pageScrollTo:1,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,requestSubscribeMessage:1,getExtConfig:1,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:2,showShareMenu:1,hideShareMenu:1,updateShareMenu:1,openUrl:0,setNavigationBarColor:1,setNavigationBarAlpha:0,hideHomeButton:1,_getRealRoute:0,vibrateShort:1,vibrateLong:1,getSetting:1,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:1,addPhoneContact:1,setScreenBrightness:1,getScreenBrightness:1,shareToWeRun:1,getWeRunData:1,canIUse:1,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:1,setTabBarBadge:1,removeTabBarBadge:1,showTabBarRedDot:1,hideTabBarRedDot:1,showTabBar:1,hideTabBar:1,setTabBarStyle:1,setTabBarItem:1,setEnableDebug:1,captureScreen:0,onUserCaptureScreen:3,setKeepScreenOn:1,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:1,showNavigationBarLoading:1,hideNavigationBarLoading:1,startPullDownRefresh:1,stopPullDownRefresh:1,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:1,openBluetoothAdapter:1,closeBluetoothAdapter:1,getBluetoothAdapterState:1,startBluetoothDevicesDiscovery:1,stopBluetoothDevicesDiscovery:1,getBluetoothDevices:1,getConnectedBluetoothDevices:1,createBLEConnection:1,setBLEMTU:1,closeBLEConnection:1,getBLEDeviceServices:1,getBLEDeviceRSSI:1,getBLEDeviceCharacteristics:1,notifyBLECharacteristicValueChanged:1,notifyBLECharacteristicValueChange:1,readBLECharacteristicValue:1,writeBLECharacteristicValue:1,onBluetoothAdapterStateChange:3,onBluetoothDeviceFound:3,onBLEConnectionStateChanged:3,onBLEConnectionStateChange:3,onBLECharacteristicValueChange:3,offBluetoothAdapterStateChange:3,offBluetoothDeviceFound:3,offBLEConnectionStateChanged:3,offBLEConnectionStateChange:3,offBLECharacteristicValueChange:3,createBLEPeripheralServer:2,onBLEPeripheralConnectionStateChanged:3,offBLEPeripheralConnectionStateChanged:3,startBeaconDiscovery:1,stopBeaconDiscovery:1,getBeacons:1,onBeaconUpdate:1,onBeaconServiceChange:1,startWifi:1,stopWifi:1,getWifiList:1,getConnectedWifi:1,connectWifi:1,presetWifiList:1,setWifiList:1,onGetWifiList:3,onWifiConnected:3,offGetWifiList:3,offWifiConnected:3,onEvaluateWifi:3,getHCEState:1,startHCE:1,stopHCE:1,sendHCEMessage:1,onHCEMessage:3,startLocalServiceDiscovery:1,stopLocalServiceDiscovery:1,onLocalServiceFound:3,offLocalServiceFound:3,onLocalServiceLost:3,offLocalServiceLost:3,onLocalServiceDiscoveryStop:3,offLocalServiceDiscoveryStop:3,onLocalServiceResolveFail:3,offLocalServiceResolveFail:3,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,navigateBackNative:0,launchApplication:0,getStorage:1,getStorageSync:2,setStorage:1,setStorageSync:2,removeStorage:1,removeStorageSync:2,clearStorage:1,clearStorageSync:2,getStorageInfo:1,getStorageInfoSync:2,getBackgroundFetchData:1,onBackgroundFetchData:3,request:1,connectSocket:1,closeSocket:1,sendSocketMessage:1,onSocketOpen:3,onSocketClose:3,onSocketMessage:3,onSocketError:3,uploadFile:1,downloadFile:1,addNativeDownloadTask:0,chooseImage:1,previewImage:1,previewMedia:1,getImageInfo:1,saveImageToPhotosAlbum:1,startRecord:1,stopRecord:1,playVoice:1,pauseVoice:1,stopVoice:1,onVoicePlayEnd:1,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:1,compressVideo:1,getLocation:1,openLocation:1,chooseLocation:1,choosePoi:1,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:1,onNetworkStatusChange:3,getSystemInfo:1,getSystemInfoSync:2,getBatteryInfo:1,getBatteryInfoSync:2,startAccelerometer:1,stopAccelerometer:1,onAccelerometerChange:3,startCompass:1,stopCompass:1,onCompassChange:3,reportAction:0,getBackgroundAudioManager:2,getRecorderManager:2,getBackgroundAudioPlayerState:1,playBackgroundAudio:1,pauseBackgroundAudio:1,seekBackgroundAudio:1,stopBackgroundAudio:1,onBackgroundAudioPlay:3,onBackgroundAudioPause:3,onBackgroundAudioStop:3,join1v1Chat:1,setEnable1v1Chat:1,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:3,onVoIPChatSpeakersChanged:3,onVoIPChatInterrupted:3,offVoIPChatMembersChanged:3,offVoIPChatSpeakersChanged:3,offVoIPChatInterrupted:3,onVoIPVideoMembersChanged:3,offVoIPVideoMembersChanged:3,onVoIPChatStateChanged:3,offVoIPChatStateChanged:3,subscribeVoIPVideoMembers:1,login:1,checkSession:1,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:1,requestPersonalPay:1,requestFacetoFacePayment:1,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:1,addCard:1,openCard:1,scanCode:1,openQRCode:1,scanItem:1,chooseAddress:1,saveFile:1,openDocument:1,getSavedFileList:1,getSavedFileInfo:1,getFileInfo:1,removeSavedFile:1,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,onThemeChange:1,offThemeChange:1,createAnimation:2,createInnerAudioContext:2,createAudioContext:0,createVideoContext:2,createMapContext:2,createCameraContext:2,createLivePlayerContext:2,createLivePusherContext:2,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:1,showToast:1,hideToast:1,showLoading:1,hideLoading:1,showActionSheet:1,reportAnalytics:0,getClipboardData:1,setClipboardData:1,createSelectorQuery:1,createIntersectionObserver:1,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:2,createWorker:2,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:3,offWindowResize:3,setPageOrientation:1,loadFontFace:1,uploadWeRunData:0,addWeRunData:0,setBackgroundColor:1,setBackgroundTextStyle:1,getMenuButtonBoundingClientRect:1,onAppShow:3,offAppShow:3,onAppHide:3,offAppHide:3,onError:3,offError:3,onUnhandledRejection:3,offUnhandledRejection:3,getLaunchOptionsSync:2,getEnterOptionsSync:2,calRqt:0,offPageNotFound:0,getAvailableAudioSources:1,reportMonitor:1,faceVerifyForPay:1,chooseInvoice:1,startDeviceMotionLisstening:1,stopDeviceMotionListening:1,onDeviceMotionChange:3,startGyroscope:1,stopGyroscope:1,onGyroscopeChange:3,setInnerAudioOption:1,secureTunnel:1,startCustomFacialRecognitionVerify:1,startCustomFacialRecognitionVerifyAndUploadVideo:1,getAccountInfoSync:0,setCookies:1,getCookies:1,nextTick:0,chooseMultiMedia:1,chooseMessageFile:1,getLabInfo:1,setLabInfo:1,compressImage:1,enterContact:1,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:3,downloadAppForIOS:0,offGyroscopeChange:3,offDeviceMotionChange:3,offCompassChange:3,offAccelerometerChange:3,offUserCaptureScreen:3,offNetworkStatusChange:3,offHCEMessage:3,offBeaconUpdate:3,offBeaconServiceChange:3,checkIsOpenAccessibility:1,addPhoneCalendar:1,addPhoneRepeatCalendar:1,updateWeChatApp:1,getRandomValues:1,shareFileMessage:1,shareVideoMessage:1,addFileToFavorites:1,addVideoToFavorites:1,showShareImageMenu:1,searchContacts:1,publishWeChatState:1},tap:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:0,canvasToTempFilePath:0,canvasGetImageData:0,canvasPutImageData:0,getShareInfo:0,pageScrollTo:0,chooseInvoiceTitle:0,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:10,openSettingForPlugin:10,getExtConfig:0,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:0,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,_getRealRoute:0,vibrateShort:0,vibrateLong:0,getSetting:20,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:0,setScreenBrightness:0,getScreenBrightness:0,shareToWeRun:0,getWeRunData:0,uploadWeRunData:0,canIUse:0,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:0,navigateToDevMiniProgram:0,navigateBackMiniProgram:0,navigateBackNative:0,exitMiniProgram:40,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:0,captureScreen:0,onUserCaptureScreen:0,setKeepScreenOn:0,checkIsSupportSoterAuthentication:0,startSoterAuthentication:0,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:0,stopPullDownRefresh:0,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceRSSI:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,onBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,redirectTo:0,reLaunch:0,navigateTo:0,switchTab:0,navigateBack:0,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,launchApplication:0,getStorage:0,getStorageSync:0,setStorage:0,setStorageSync:0,removeStorage:0,removeStorageSync:0,clearStorage:0,clearStorageSync:0,getStorageInfo:0,getStorageInfoSync:0,request:20,connectSocket:0,closeSocket:0,sendSocketMessage:0,onSocketOpen:0,onSocketClose:0,onSocketMessage:0,onSocketError:0,uploadFile:0,downloadFile:20,addNativeDownloadTask:0,chooseImage:0,previewImage:0,previewMedia:0,getImageInfo:0,saveImageToPhotosAlbum:0,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:0,saveVideoToPhotosAlbum:0,getVideoInfo:0,compressVideo:0,getLocation:0,openLocation:0,chooseLocation:0,choosePoi:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:0,onNetworkStatusChange:0,getSystemInfo:0,getSystemInfoSync:0,getBatteryInfo:0,getBatteryInfoSync:0,startAccelerometer:0,stopAccelerometer:0,onAccelerometerChange:0,startCompass:0,stopCompass:0,onCompassChange:0,reportAction:0,getBackgroundAudioManager:0,getRecorderManager:0,getBackgroundAudioPlayerState:0,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,login:0,checkSession:0,authorize:0,getUserInfo:0,requestFacetoFacePayment:0,requestPayment:30,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:30,addCard:0,openCard:0,scanCode:0,openQRCode:0,scanItem:0,chooseAddress:0,saveFile:0,openDocument:0,getSavedFileList:0,getSavedFileInfo:0,getFileInfo:0,removeSavedFile:0,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:0,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,offPageNotFound:0,onThemeChange:0,offThemeChange:0,onAppShow:0,offAppShow:0,onAppHide:0,offAppHide:0,onError:0,offError:0,onUnhandledRejection:0,offUnhandledRejection:0,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:0,createAudioContext:0,createVideoContext:0,createMapContext:0,createCameraContext:0,createLivePlayerContext:0,createLivePusherContext:0,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:30,showToast:0,hideToast:0,showLoading:0,hideLoading:0,showActionSheet:30,reportAnalytics:0,getClipboardData:0,setClipboardData:0,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:0,createWorker:0,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:0,offWindowResize:0,setPageOrientation:0,loadFontFace:0,setInnerAudioOption:0,addWeRunData:0,setBackgroundColor:0,setBackgroundTextStyle:0,getMenuButtonBoundingClientRect:0,calRqt:0,getAvailableAudioSources:0,reportMonitor:0,faceVerifyForPay:0,chooseInvoice:0,startDeviceMotionListening:0,stopDeviceMotionListening:0,onDeviceMotionChange:0,startGyroscope:0,stopGyroscope:0,onGyroscopeChange:0,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,getAccountInfo:0,nextTick:0,setCookies:0,getCookies:0,getAccountInfoSync:0,chooseMultiMedia:0,join1v1Chat:0,setEnable1v1Chat:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,onVoIPVideoMembersChanged:0,offVoIPVideoMembersChanged:0,onVoIPChatStateChanged:0,offVoIPChatStateChanged:0,subscribeVoIPVideoMembers:0,getBackgroundFetchData:0,onBackgroundFetchData:0,chooseMessageFile:0,getLabInfo:0,setLabInfo:0,compressImage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,offGyroscopeChange:0,offDeviceMotionChange:0,offCompassChange:0,offAccelerometerChange:0,offUserCaptureScreen:0,offNetworkStatusChange:0,offHCEMessage:0,offBeaconUpdate:0,offBeaconServiceChange:0,requestSubscribeMessage:40,hideHomeButton:0,checkIsOpenAccessibility:0,updateWeChatApp:0,openChannelsLive:40,openChannelsActivity:40,openChannelsUserProfile:40,addPhoneCalendar:40,addPhoneRepeatCalendar:40,getRandomValues:0,showShareImageMenu:0,shareFileMessage:40,shareVideoMessage:40,addFileToFavorites:40,addVideoToFavorites:40,getUserProfile:40,searchContacts:40,publishWeChatState:40,openCustomerServiceChat:40},singlePage:{invokeWebviewMethod:0,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:0,pageScrollTo:10,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,openSettingForPlugin:1,getExtConfig:10,chooseMedia:1,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,hideHomeButton:0,_getRealRoute:0,vibrateShort:10,vibrateLong:10,getSetting:0,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:1,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:0,uploadWeRunData:0,addWeRunData:0,canIUse:10,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:0,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,offBeaconUpdate:0,onBeaconServiceChange:0,offBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,offHCEMessage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:0,onBackgroundFetchData:0,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:1,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:1,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:0,compressVideo:0,getLocation:10,openLocation:1,chooseLocation:1,choosePoi:1,enableLocationUpdateBackground:0,enableLocationUpdate:0,disableLocationUpdate:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:10,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:0,createVideoContext:10,createMapContext:10,createCameraContext:0,createLivePlayerContext:10,createLivePusherContext:0,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:0,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:0,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:0,setClipboardData:0,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:0,traceEvent:0,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:0,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:0,hanged:0,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:0,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:0,checkSession:0,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:0,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestMidasPayment:0,requestOrderPayment:0,addCard:1,openCard:1,scanCode:1,openQRCode:0,scanItem:1,chooseAddress:1,saveFile:10,openDocument:1,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:1,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:0,getABTestConfig:0,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:0,chooseMultiMedia:0,getLabInfo:0,setLabInfo:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:0,createRewardedVideoAd:0,error:10,serviceMarket:10,getNativeUserInfo:10,getPerformance:10,reportPerformance:10,createUDPSocket:0,createBufferURL:10,revokeBufferURL:10},thirdApp:{invokeWebviewMethod:10,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:10,pageScrollTo:10,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:10,openSettingForPlugin:10,getExtConfig:10,chooseMedia:10,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:10,hideShareMenu:10,updateShareMenu:10,openUrl:0,setNavigationBarColor:10,setNavigationBarAlpha:10,hideHomeButton:10,_getRealRoute:10,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:10,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:10,setPageStyle:10,triggerGettingWidgetData:0,navigateToMiniProgram:10,navigateToDevMiniProgram:10,navigateBackMiniProgram:10,exitMiniProgram:10,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:10,removeTabBarBadge:10,showTabBarRedDot:10,hideTabBarRedDot:10,showTabBar:10,hideTabBar:10,setTabBarStyle:10,setTabBarItem:10,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:10,reportKeyValue:10,setNavigationBarTitle:10,showNavigationBarLoading:10,hideNavigationBarLoading:10,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:10,reLaunch:10,navigateTo:10,switchTab:10,navigateBack:10,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:10,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:10,stopRecord:10,playVoice:10,pauseVoice:10,stopVoice:10,onVoicePlayEnd:10,chooseVideo:10,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:10,openLocation:10,chooseLocation:10,choosePoi:10,enableLocationUpdateBackground:10,enableLocationUpdate:10,disableLocationUpdate:10,onLocationChange:10,offLocationChange:10,onLocationChangeError:10,offLocationChangeError:10,startLocationUpdateBackground:10,startLocationUpdate:10,stopLocationUpdate:10,getNetworkType:10,onAppRoute:10,onAppRouteDone:10,onAppEnterBackground:10,onAppEnterForeground:10,onAppUnhang:10,onPageReload:10,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:10,createVideoContext:10,createMapContext:10,createCameraContext:10,createLivePlayerContext:10,createLivePusherContext:10,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:10,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:10,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:10,setClipboardData:10,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:10,hanged:10,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:10,checkSession:10,authorize:10,getUserInfo:10,getUserProfile:10,requestPayment:10,verifyPaymentPassword:0,bindPaymentCard:0,requestPersonalPay:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:10,addCard:10,openCard:10,scanCode:10,openQRCode:0,chooseAddress:10,saveFile:10,openDocument:10,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:10,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:10,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:10,getABTestConfig:10,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:10,chooseMultiMedia:10,getLabInfo:0,setLabInfo:0,enterContact:10,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:10,createRewardedVideoAd:10,error:10,serviceMarket:10,openBusinessView:10,requestMidasPayment:10,modifyFriendInteractiveStorage:0,getUserInteractiveStorage:0,getUserCloudStorage:0,getPotentialFriendList:0,getGroupInfo:0,getGroupCloudStorage:0,getFriendCloudStorage:0,createGridAd:10,createBannerAd:10}},o=(e,t)=>r[t][e]},7657:(e,t,n)=>{"use strict";n.d(t,{V:()=>s,K:()=>l});var r=n(1130);const o=(i="getCloudFileUrl",a="qbase_commapi",(0,r.Z)(i,a,{},{},(function(e){const t=e.data;return{qbase_api_name:"tcbapi_component_gettempfileurl",qbase_req:JSON.stringify({fileid_list:t.fileid_list.slice(),type:t.type}),cli_req_id:`${+new Date}_${Math.random()}`}}),(function(e){return e})));var i,a;const s=function(e,t,n){l({fileIds:e,type:t,success:n})},c=new Map,l=function(e){const{fileIds:t,type:n,success:r}=e,i=new Map,a=[];let s=!1;if(t.forEach((e=>{const t=c.get(e);if(t){if(Date.now()<t.expireTime)return void(i.has(e)||(i.set(e,t.data),s||(s=!0)));c.delete(e)}/^(cloud):\/\//.test(e)&&a.push(e)})),0===a.length)return void(s?d(t,i,0,r):"function"==typeof r&&r({data:t.map((e=>({url:e})))}));let l=0;const u=function(e,t){const n=[],r=Math.ceil(e.length/t);for(let o=0;o<r;o++)n.push(e.slice(o*t,(o+1)*t));return n}(t,50);Promise.all(u.map((e=>new Promise((t=>{o({data:{fileid_list:e,type:n},requestInQueue:!1,success(n){const r=JSON.parse(n.rawData);if(r.baseresponse&&0===r.baseresponse.errcode?r.download_list.forEach((e=>{i.set(e.fileid,e),!c.has(e.fileid)&&e.max_age&&c.set(e.fileid,{data:e,expireTime:Date.now()+1e3*e.max_age})})):r.baseresponse?e.forEach((e=>{i.set(e,{download_url:e,service_errcode:r.baseresponse.errcode,errmsg:"system error baseresponse.errcode "+r.baseresponse.errcode}),c.has(e)&&c.delete(e)})):e.forEach((e=>{i.set(e,{download_url:e,service_errcode:-1,errmsg:"system error baseresponse empty"}),c.has(e)&&c.delete(e)})),r.baseresponse&&r.baseresponse.stat&&r.baseresponse.stat.qbase_cost_time){const e=r.baseresponse.stat.qbase_cost_time;e>l&&(l=e)}t()},fail(){t()},complete(e){}})}))))).then((()=>{d(t,i,l,r)})).catch((e=>{"function"==typeof r&&r({data:t.map((t=>({url:t,service_errcode:-1,errmsg:e+""})))})}))};function d(e,t,n,r){const o=[];e.forEach((e=>{if(/^(cloud):\/\//.test(e)){const n=t.get(e);n?0===n.service_errcode?o.push({url:n.download_url}):o.push({url:e,code:n.service_errcode,msg:n.errmsg}):o.push({url:e,code:-1,msg:"NO_RESULT"})}else o.push({url:e})})),"function"==typeof r&&r({data:o,cost:n})}},8745:(e,t,n)=>{"use strict";n.d(t,{S:()=>i,P:()=>a});let r={};class o{constructor(){this.listener={},this.emitCache={}}emit(e,...t){if(!this.listener[e])return this.emitCache[e]||(this.emitCache[e]=[]),void this.emitCache[e].push(t);(()=>{for(const n of this.listener[e])n.fn.call(n.fn,...t);this.listener[e]=this.listener[e].filter((e=>"once"!==e.type))}).call(this)}_clearCache(e){if(this.emitCache[e])for(;this.emitCache[e].length>0;)this.emit(e,...this.emitCache[e].shift())}on(e,t){const n=__errorTracer__.surroundThirdByTryCatch(t,`at on ${e} callback function`);this._addListener(e,"on",n),this._clearCache(e)}once(e,t){const n=__errorTracer__.surroundThirdByTryCatch(t,`at once ${e} callback function`);this._addListener(e,"once",n),this._clearCache(e)}off(e,t){if(this.listener[e])if(t){const n=t.toString();for(const t in this.listener[e]){let t=0;for(;!(t>=this.listener[e].length);)n===this.listener[e][t].fn.toString()&&(this.listener[e].splice(t,1),t--),t++}}else this.listener[e]=[],delete this.listener[e]}_addListener(e,t,n){this.listener[e]||(this.listener[e]=[]),this.listener[e].push({fn:n,type:t})}}function i(){const e=r;return r={},e}function a(){const e=new o,t=new o,n={},i=["listener","emit","on","once","off","_addListener"];for(const r of i)"emit"===r?n[r]=t[r].bind(t):"function"==typeof e[r]?n[r]=e[r].bind(e):n[r]=e[r];for(const n of i)"emit"===n?r[n]=e[n].bind(e):"function"==typeof t[n]?r[n]=t[n].bind(t):r[n]=t[n];return n}},2802:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});const r="undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version},5150:(e,t,n)=>{"use strict";n.d(t,{Au:()=>L,hN:()=>B,lR:()=>P,hG:()=>M,oo:()=>E,fH:()=>m});var r=n(1503),i=n.n(r),a=n(8159),s=n(9045),c=n(5260),l=n(4532),d=n(29),u=n(2851),p=n(665),h=n(2582);const f=h.gm||h.qB||h.Mq||h.Ae,g={},_={},m={},y=new a.y,v={},A=new WeakMap,b={},w={},C=["play","pause","stop","seek","sendDanmu","playbackRate","requestFullScreen","exitFullScreen","showStatusBar","hideStatusBar","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback","hidePoster"],I={},E={};let S=p.Z.useXWebVideo,T=!0;const x=Object.keys;function k(e){v[e]||(v[e]=!0,(0,d.dq)(e,(e=>{delete v[e],x(g).concat(x(_)).forEach((t=>{new RegExp("^"+e).test(t)&&delete g[t]})),x(b).forEach((t=>{(new RegExp("^api_"+e).test(t)||new RegExp("^SQ_"+e).test(t))&&delete b[t]})),h.Ae&&(0,s.IN)("setKeepScreenOn",{keepScreenOn:!1},{})})))}(0,s.Ld)("updateVideoPictureInPicture",((e={},t)=>{m.webviewId=t,m.playerId=e.playerId})),(0,s.Ld)("videoAdPlay",(({videoPlayerId:e,type:t},n)=>{w[`${n}_${e}`]=t})),(0,s.Ld)("videoPlayerInsert",(({domId:e,videoPlayerId:t,pluginId:n,nodeId:r,nodeInfo:i,data:a},s)=>{let c=`${s}_${n}_${e}_`;r&&r!==o.getRootNodeId(s)&&(c+=r),g[c]=t,function(e,t,n){if(!h.gm)return;const r=document.createElement("video");e.elem=r,_[`${n}_${t}`]=e,r.controls=!1,r.preload="auto",r.muted=!0,r.autoplay=e.autoplay,r.style.width=e.width+"px",r.style.height=e.height+"px"}(i,t,s),y.emit("videoPlayerInsert"),k(s),E[`${s}_${t}`]=a||{}})),(0,s.Ld)("xWebVideoInserted",(({domId:e,viewId:t,pluginId:n,nodeId:r,data:i},a)=>{let s=`${a}_${n}_${e}_`;r&&r!==o.getRootNodeId(a)&&(s+=r),g[s]=t,E[`${a}_${t}`]=i||{},y.emit("videoPlayerInsert"),k(a)})),(0,s.Ld)("videoPlayerUpdated",(({action:e,value:t,videoPlayerId:n},r)=>{R({_videoId:n,_webviewId:r},e,t)})),(0,s.Ld)("videoPlayerRemoved",(({domId:e,videoPlayerId:t,pluginId:n,nodeId:r},i)=>{let a=`${i}_${n}_${e}_`;r&&r!==o.getRootNodeId(i)&&(a+=r),delete g[a],function(e,t){delete _[`${t}_${e}`]}(t,i);let s=`api_${i}_${n}_${e}_`;r&&r!==o.getRootNodeId(i)&&(s+=r);const c=`SQ_${i}_${t}`;delete b[s],delete b[c],delete E[`${i}_${t}`]})),(0,s.Ld)("xWebVideoRemoved",(({domId:e,pluginId:t,nodeId:n},r)=>{let i=`${r}_${t}_${e}_`;n&&n!==o.getRootNodeId(r)&&(i+=n);const a=g[i];delete g[i],delete E[`${r}_${a}`]})),(0,s.Ld)("xWebVideoSupported",(({isXWebSupported:e})=>{S=S&&e})),(0,s.Ld)("insertVideoToWebLayerStateChanged",(({viewId:e,inserted:t},n)=>{I[`${n}_${e}`]=t})),p.Z.onReady((()=>{p.Z.global&&p.Z.global.window&&"seperated"===p.Z.global.window.renderingMode&&(T=!1,S=!1)}));class P{}class D{constructor(e,t){const n=this.exportContext=new P;C.forEach((e=>{n[e]=this[e].bind(this)})),n._videoId=e,n._webviewId=t}play(){const e=this._getAppStatus();e===l.w$.BACK_GROUND||e===l.w$.LOCK||this._invokeMethod("play")}pause(){this._invokeMethod("pause")}stop(){this._invokeMethod("stop")}seek(e,t="accurate"){if("accurate"!==t&&"inaccurate"!==t)throw new c.iZ("Parameter 2 must either be `accurate` or be `inaccurate`");this._invokeMethod("seek",[e,t])}sendDanmu({text:e,color:t}){this._invokeMethod("sendDanmu",[e,t])}playbackRate(e){.5!==(e=parseFloat(e.toFixed(2)))&&.8!==e&&1!==e&&1.25!==e&&1.5!==e&&2!==e||this._invokeMethod("playbackRate",[e])}requestFullScreen(e={}){const t=e.direction;[0,90,-90].indexOf(t)>-1?this._invokeMethod("requestFullScreen",[t]):this._invokeMethod("requestFullScreen"),A.set(this,!0)}exitFullScreen(){this._invokeMethod("exitFullScreen"),this.showStatusBar(),A.set(this,!1)}showStatusBar(e={}){(0,s.IN)("showStatusBar",e)}hideStatusBar(e={}){if(h.wZ){const t="hideStatusBar:ok";return"function"==typeof e.success&&e.success({errMsg:t}),void("function"==typeof e.complete&&e.complete({errMsg:t}))}if(!A.get(this)){const t="hideStatusBar:fail cannot be invoked but in fullscreen.";return"function"==typeof e.fail&&e.fail({errMsg:t}),void("function"==typeof e.complete&&e.complete({errMsg:t}))}(0,s.IN)("hideStatusBar",e)}exitPictureInPicture(e={}){if(!m)return;const t=m.playerId;h.cj?(0,s.IN)("operateVideoPlayer",i()(i()({},e),{},{videoPlayerId:t,type:"exitPictureInPicture"}),{beforeAll(e){e.errMsg=e.errMsg.replace("operateVideoPlayer","exitPictureInPicture")}}):h.wZ&&(0,s.IN)("operateXWebVideo",i()(i()({},e),{},{viewId:t,type:"exitPictureInPicture"}),{beforeAll(e){e.errMsg=e.errMsg.replace("operateXWebVideo","exitPictureInPicture")}})}requestBackgroundPlayback(){this._invokeMethod("requestBackgroundPlayback",[])}exitBackgroundPlayback(){this._invokeMethod("exitBackgroundPlayback",[])}hidePoster(){this._invokeMethod("hidePoster")}_invokeMethodWithId(e,t,n){"number"==typeof e?function(){if("begin"===w[`${this.webviewId}_${e}`])return void console.error(`${t}:fail cannot operate video while ad playing.`);if(T&&(h.wZ&&S||h.cj&&I[`${this.webviewId}_${e}`])&&["requestFullScreen","exitFullScreen","sendDanmu","seek","stop","play"].indexOf(t)>-1)return void(0,s.nY)(`video_${this.webviewId}_${e}_actionChanged`,{method:t,data:n},[this.webviewId]);const r=this._getAppStatus();if(!f&&r===l.w$.BACK_GROUND&&"stop"===t){let n="operateVideoPlayerBackground";return h.wZ&&S&&(n="operateXWebVideoBackground"),void(0,s.IN)(n,{viewId:e,videoPlayerId:e,type:t})}f?(this._sendAction(e,{method:t,data:n}),["play","pause","stop","seek","playbackRate"].indexOf(t)>-1&&R(this.exportContext,t,n&&n[0])):h.wZ&&S?(0,s.IN)("operateXWebVideo",{viewId:e,type:t,data:n}):(0,s.IN)("operateVideoPlayer",{data:n,videoPlayerId:e,type:t})}.apply(this):y.once("videoPlayerInsert",(()=>{this._invokeMethod(t,n)}))}_sendActionWithEvnetName(e,t){(0,s.nY)(e,t,[this.webviewId])}_getAppStatus(){return u.Z.appStatus}_getHanged(){return u.Z.hanged}}class O extends D{constructor(e,t,n,r){if(super(),"string"!=typeof e)throw new c.iZ("Parameter 1 should be a string");this.domId=e,this.webviewId=t,this.pluginId=r,this.nodeId=n}_invokeMethod(e,t){const n=`${this.webviewId}_${this.pluginId}_${this.domId}_${this.nodeId}`,r=g[n];this._invokeMethodWithId(r,e,t)}_sendAction(e,t){this._sendActionWithEvnetName(`video_${this.webviewId}_${e}_actionChanged`,t)}}class N extends D{constructor(e,t){super(e,t),this.videoPlayerId=e,this.webviewId=t}_invokeMethod(e,t){const n=this.videoPlayerId;this._invokeMethodWithId(n,e,t)}_sendAction(e,t){this._sendActionWithEvnetName(`video_${this.webviewId}_${e}_actionChanged`,t)}}function R(e,t,n){if(!h.gm)return;if(void 0===e._webviewId)return;const r=_[`${e._webviewId}_${e._videoId}`].elem;switch(t){case"setSrc":r.src=n;break;case"play":r.play();break;case"pause":case"stop":r.pause();break;case"seek":0===r.readyState||1===r.readyState?r.oncanplay=()=>{r.currentTime=n,r.oncanplay=null}:r.currentTime=n;break;case"playbackRate":r.playbackRate=n}}function M(e){return _[`${e._webviewId}_${e._videoId}`].elem}function L(e,t,n="",r=""){let i=`api_${t}_${r}_${e}_`;if(n&&n!==o.getRootNodeId(t)&&(i+=n),b[i])return b[i].exportContext;const a=new O(e,t,n,r);return b[i]=a,a.exportContext}function B(e,t){const n=`SQ_${t}_${e}`;if(b[n])return b[n].exportContext;const r=new N(e,t);return b[n]=r,r.exportContext}},8827:(e,t,n)=>{"use strict";n.d(t,{KC:()=>f,Dk:()=>h,$1:()=>x,AJ:()=>S,KL:()=>w,Zv:()=>C,ap:()=>I,DW:()=>A,jl:()=>v,lE:()=>T,zv:()=>E,tc:()=>b});var r=n(638),o=n(405),i=n(7322),a=n(665),s=n(2582),c=n(2654),l=n(5014);let d=[],u=[];const p=["expires","domain","path","busid","indate","receivetime","spread"],h=502,f=503,g={scene:-1,sceneNote:"",sessionId:""};function _(e){return s.gm||(0,l.J)(e)}function m(e){!function(e){const t=a.Z.accountInfo&&a.Z.accountInfo.appId||"noAppId";(0,i.L)("getCookiesFromGlobalStorage",{appId:t},void 0,e)}((t=>{t&&v(t,!1,d),e&&e()}))}function y(){const e=Date.now(),t=[];d.forEach((n=>{const r=n.expires||n.__wxprivate_calc_expires__;if(r&&1e3*r>e){const e=[];for(const t in n)p.indexOf(t)>=0&&e.push(`${encodeURIComponent(t)}=${encodeURIComponent(n[t])}`);e.push(`${encodeURIComponent(n.key)}=${encodeURIComponent(n.value)}`),t.push(e.join("; "))}}));const n=t.join(";; ");n.length>=4096||function(e,t){const n=a.Z.accountInfo&&a.Z.accountInfo.appId||"noAppId";e&&e.trim()&&(0,i.L)("setCookiesToGlobalStorage",{cookies:e,appId:n},void 0,t)}(n,(()=>{}))}function v(e,t,n){if("string"!=typeof e)return;const r=Date.now();e.split(";;").forEach((e=>{let o;if(e.split(";").forEach((e=>{o=o||{};const t=(e=e.split("="))[0].trim();let n=e[1]&&e[1].trim();"expires"!==t&&"indate"!==t||(n=+n,n=Number.isNaN(n)?void 0:n),t&&void 0!==n&&(p.indexOf(t)>=0?o[decodeURIComponent(t)]=decodeURIComponent(n):(o.key=decodeURIComponent(t),o.value=decodeURIComponent(n)))})),!o)return;t&&(o.receivetime=~~(r/1e3)),void 0===o.expires&&void 0!==o.indate&&o.receivetime&&(o.__wxprivate_calc_expires__=+o.receivetime+ +o.indate);const i=o.expires||o.__wxprivate_calc_expires__;i&&!(1e3*i>r)||function(e,t){for(let n=0,r=t.length;n<r;n++){const r=t[n];if(e.busid===r.busid&&e.key===r.key)return!0}return!1}(o,n)||n.push(o),a.Z.accountInfo&&a.Z.accountInfo.appId&&o.spread&&(o.spread="*"===o.spread?"":o.spread+":",o.spread+=a.Z.accountInfo.appId)}))}(0,c.Xb)(((e={})=>{g.scene=e.scene,g.sceneNote=e.scene_note,g.sessionId=e.sessionid}));const A=()=>{(0,o.H)((()=>{const e=a.Z.appLaunchInfo||{},t=+a.Z.appLaunchInfo.scene,n=e.referrerInfo&&e.referrerInfo.privateExtraData,r=e.referrerInfo&&e.referrerInfo.messageExtraData,o=n&&n.cookies||r&&r.cookies;"string"==typeof o&&v(o,1037!==t,d),m(y)})),(0,r.T)(((e={})=>{const t=+e.scene,n=e.referrerInfo&&e.referrerInfo.privateExtraData,r=e.referrerInfo&&e.referrerInfo.messageExtraData,o=n&&n.cookies||r&&r.cookies;(1037===t||o&&"string"==typeof o||1===e.reLaunch||!0===e.reLaunch)&&(d=[],u=[]),"string"==typeof o&&v(o,1037!==t,d),m(y)}))};function b(e){const t=[];for(const n in e)p.indexOf(n)>=0&&t.push(`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`);return t.push(`${encodeURIComponent(e.key)}=${encodeURIComponent(e.value)}`),t.join("; ")}const w=e=>{const t=Date.now(),n=[];d.forEach((e=>{const r=e.expires||e.__wxprivate_calc_expires__;e.domain&&"*"===e.domain&&(!r||1e3*r>t)&&n.push(b(e))}));const r=n.join(";; ");return e&&e.success&&e.success({cookies:r}),r},C=e=>{const t=Date.now(),n=[];d.forEach((e=>{const r=e.expires||e.__wxprivate_calc_expires__;(!r||1e3*r>t)&&n.push(e)}));const r=a.Z&&a.Z.accountInfo&&a.Z.accountInfo.appId||"",o=g.scene||"",i=g.sceneNote||"",s=g.sessionId||"";n.push({key:"appid",value:r,busid:"wxapp"},{key:"sessionid",value:s,busid:"wxapp"},{key:"scene",value:o,busid:"wxapp"},{key:"scene_note",value:i,busid:"wxapp"});const{hostAppId:c,pluginAppId:l}=e&&e.pluginInfo?e.pluginInfo:{};if(void 0!==c&&void 0!==l){const e=n.find((e=>"appid"===e.key));e&&(e.value=c),n.push({key:"plugin_appid",value:l,busid:"wxapp"})}const u=a.Z.host||{};"SDK"===u.env&&n.push({key:"sdk_host_appid",value:u.appId,busid:"wxapp"});const p=n.map(b).join(";; ");return e&&e.success&&e.success({cookies:p}),p},I=()=>{const e=Date.now(),t=[];return u.forEach((n=>{const r=n.expires||n.__wxprivate_calc_expires__;(!r||1e3*r>e)&&t.push(b(n))})),t.join(";; ")},E=e=>{const t=Date.now(),n=e.cookies||[],r=e.isTemporary;if(!(n instanceof Array))return;const o=r?u:d,i=[],s={},c={},l=a.Z.accountInfo&&a.Z.accountInfo.appId||"";n.forEach((e=>{if(!e.key||"string"!=typeof e.key)return;const n=+e.expires;if(!e.value||n&&1e3*n<t)s[e.key]={key:e.key,busid:e.busid};else{const t={key:e.key,value:e.value};p.forEach((n=>{let o=e[n];"expires"!==n&&"indate"!==n||(o=+o,o=Number.isNaN(o)?void 0:o),"spread"===n&&o&&!r&&l&&(t.spread="*"===o?"":o+":",t.spread+=l),"receivetime"!==n&&"spread"!==n&&void 0!==o&&(t[n]=o)})),c[e.key]=t,i.push(t)}})),o.forEach((e=>{const n=s[e.key];if(n&&(!n.busid&&!e.busid||n.busid===e.busid))return;const r=c[e.key];if(r&&(!r.busid&&!e.busid||r.busid===e.busid))return;const o=e.expires||e.__wxprivate_calc_expires__;o&&1e3*o<t||i.push(e)}));if(function(e){const t=[];return e.forEach((e=>{t.push(b(e))})),t.join(";; ")}(i).length>=4096)return"setCookies:fail whole cookies storage is out of limit(4KB limit)";r?u=i:(d=i,y())},S=e=>{const t=Date.now(),n=e.keys||[],r=e.busid,o=e.isTemporary;if(!(n instanceof Array))return;const i=[];return(o?u:d).forEach((e=>{const o=e.expires||e.__wxprivate_calc_expires__;if((!o||1e3*o>t)&&n.indexOf(e.key)>=0&&(!r||r&&r===e.busid)){const t={[e.key]:e.value};Object.keys(e).forEach((n=>{p.indexOf(n)>=0&&(t[n]=e[n]),"indate"!==n&&"expires"!==n||(t[n]=+t[n])})),i.push(t)}})),i},T=e=>{let t="setCookies:ok";if(_("setCookies")){const n=E(e);n?(t=n,"function"==typeof e.fail&&e.fail({errMsg:t})):"function"==typeof e.success&&e.success({errMsg:t})}else t="setCookies:fail has no permission for setCookies API","function"==typeof e.fail&&e.fail({errMsg:t});"function"==typeof e.complete&&e.complete({errMsg:t})},x=e=>{let t="getCookies:ok";if(_("getCookies")){const n=S(e);"function"==typeof e.success&&e.success({errMsg:t,cookies:n})}else t="getCookies:fail has no permission for getCookies API","function"==typeof e.fail&&e.fail({errMsg:t});"function"==typeof e.complete&&e.complete({errMsg:t})}},4212:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});var r=n(9045);const o=__wxConfig.platform;let i=[];const a=e=>{const t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),i=("0"+e.getMinutes()).slice(-2),a=("0"+e.getSeconds()).slice(-2),s=("00"+e.getMilliseconds()).slice(-3),c=`${e.getFullYear()}-${t}-${n}`,l=`${r}:${i}:${a}.${s}`;if("ios"===o){return`${c} ${l}000${(e.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-")}`}return`${c} ${(e.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")} ${l}`},s=e=>function(...t){const n=t.map((e=>{switch(e){case null:return"null";case void 0:return"undefined";default:return e.toString()}})).join(" ");i.push({date:new Date,type:e,content:n})};__wxConfig.onReady((()=>{setTimeout((function e(){var t;(setTimeout(e,2e3),0!==i.length)&&(t=i.slice(),"ios"===o&&"function"==typeof systemLog?systemLog({dataArray:t.map((e=>`\n${a(e.date)} [${e.type[0].toUpperCase()}][weapplib] ${e.content}`))}):"ios"===o||"windows"===o?(0,r.IN)("systemLog",{dataArray:t.map((e=>({message:`\n${a(e.date)} [${e.type[0].toUpperCase()}][weapplib] ${e.content}`})))}):"android"===o&&(0,r.IN)("systemLog",{message:["\n"].concat(t.map((e=>`[${e.type[0].toUpperCase()}][${a(e.date)}][weapplib] ${e.content}`))).join("\n")}),i=[])}),2e3)}));const c={log:s("log"),debug:s("debug"),info:s("info"),warn:s("warn"),error:s("error")}},6998:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getNetworkType:()=>l,onNetworkStatusChange:()=>d,offNetworkStatusChange:()=>u,_getCurrentNetworkType:()=>p});var r=n(9045),o=n(2046),i=n(665),a=n(2851);let s="";const c=(0,o.s)("networkstatusChange"),l=e=>{(0,r.IN)("getNetworkType",e)},d=c.onMethod,u=c.offMethod,p=()=>s;(0,r.jQ)("onNetworkStatusChange",((e={})=>{s=e.networkType,a.Z.currentNetworkType=s,c.emit(e),(0,r.nY)("onNetworkStatusChange",e)})),i.Z.onReady((()=>{l({success(e){s=e.networkType,a.Z.currentNetworkType=s}})}))},8176:(e,t,n)=>{"use strict";n.d(t,{oK:()=>s,j8:()=>c,x9:()=>i});var r=n(9045);const o=(0,n(2046).s)("userCaptureScreen"),i=o.onMethod;o.offMethod;let a=null;(0,r.jQ)("onUserCaptureScreen",(e=>{"function"==typeof a&&a(e),o.emit(e)}));const s=e=>{a=__errorTracer__.surroundThirdByTryCatch(e,"at onUserCaptureScreen callback function")},c=()=>{a=null}},3170:(e,t,n)=>{"use strict";n.d(t,{So:()=>h,xI:()=>f,jC:()=>g,m4:()=>_,Oo:()=>b,Ew:()=>w,Yu:()=>x,mw:()=>k});var r=n(9045),o=n(2999),i=n(2802),a=n(665),s=n(2582),c=n(1095),l=n(7322);let d=null;const u=e=>{let t=s.iw;s.cj&&(e.brand="iPhone"),s.gm&&"devtools"!==e.brand&&(t="iPhone"===e.brand?"ios":"android"),e.platform=t,e.SDKVersion=i.c,e.enableDebug=Boolean(a.Z.debug),a.Z.devicePixelRatio&&(e.devicePixelRatio=a.Z.devicePixelRatio),a.Z.theme&&(e.theme=a.Z.theme),a.Z.host&&(e.host=a.Z.host),s.wZ&&/^\d+\.\d+$/.test(e.version)&&(e.version+=".0"),d=Object.assign({},e),delete d.errMsg,(0,c.Av)()&&4!==a.Z.appType&&(e.safeArea=Object.assign({},e.safeArea),e.safeArea.top=0,e.safeArea.bottom=e.screenHeight,e.safeArea.height=e.safeArea.bottom-e.safeArea.top),s.jP&&(e.renderer="h5")},p=()=>{a.Z.isReady||(new Error).stack},h=e=>{p();(0,r.IN)("getSystemInfo",e,{beforeSuccess:u})},f=()=>{let e={};return h({success(t){delete t.errMsg,e=t,d=Object.assign({},e)}}),e},g=e=>{a.Z.supportAsyncGetSystemInfo||(console.info('Current Wechat version do not support asynchronous getSystemInfo. "wx.getSystemInfoAsync" will be finished by synchronous implementation.'),p());const t=a.Z.supportAsyncGetSystemInfo?"getSystemInfoAsync":"getSystemInfo";(0,r.IN)(t,e,{beforeSuccess:u})},_=()=>d||f();let m=null,y=0,v=0;const A=["brand","model","pixelRatio","language","version","system","platform","SDKVersion"];a.Z.onReady((()=>{m={};for(let e=0;e<A.length;e++){if(!(A[e]in a.Z)){m=_();break}m[A[e]]=a.Z[A[e]]}if(a.Z.screenHeight&&a.Z.screenWidth)y=a.Z.screenWidth,v=a.Z.screenHeight;else{const e=_();y=e.screenWidth,v=e.screenHeight}}));const b=()=>a.Z.isReady?Object.assign({},m):((new Error).stack,{}),w=()=>a.Z.isReady?{screenWidth:y,screenHeight:v,deviceOrientation:y>v?"landscape":"portrait"}:((new Error).stack,{});let C=!1;const I=new Set;let E;(0,o.n)("onAppRouteDone",(()=>{C=!0,I.forEach((e=>e())),I.clear()}));const S=new Set,T=()=>{(0,l.L)("getUserAgent",{},void 0,(e=>{E=e,S.forEach((t=>{try{t(e)}catch(e){}})),S.clear()}))},x=e=>{E?e(E):C?(S.add(e),T()):(I.has(T)||I.add(T),S.add(e))},k=(()=>{let e;return(...t)=>e||(e=f(...t),e)})()},9848:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});var r=n(665),o=n(638);const i=(()=>{let e;const t=t=>{e="halfPage"===t.mode};return(0,o.T)((e=>t(e))),r.Z.onReady((()=>t(r.Z.appLaunchInfo||{}))),()=>e})();(()=>{const e=[1175,1177];let t;const n=n=>{t=e.includes(n.scene)};(0,o.T)((e=>n(e))),r.Z.onReady((()=>n(r.Z.appLaunchInfo||{})))})()},6052:(e,t,n)=>{"use strict";n.d(t,{KK:()=>o.KK,yH:()=>i,rW:()=>s,vL:()=>c,bh:()=>l,hr:()=>d,NG:()=>p,NC:()=>h,ho:()=>_,cF:()=>w,yX:()=>I,lz:()=>E,dJ:()=>S,gj:()=>D,aW:()=>O});var r=n(3775),o=n(2159);const{saveFile:i,saveFileSync:a,getSavedFileList:s,getSavedFileInfo:c,removeSavedFile:l,getFileInfo:d,readFile:u,readFileSync:p,writeFile:h,writeFileSync:f,mkdir:g,mkdirSync:_,rmdir:m,rmdirSync:y,readdir:v,readdirSync:A,access:b,accessSync:w,unlink:C,unlinkSync:I,stat:E,statSync:S,unzip:T,copyFile:x,copyFileSync:k,rename:P,renameSync:D,appendFile:O,appendFileSync:N}=r.ZP.app},8013:(e,t,n)=>{"use strict";n.d(t,{tT:()=>r,LE:()=>u,Xo:()=>l,jL:()=>d});const r=(0,n(1130).Z)("getChannelsLiveInfo","webapi_getfinderviewlastlive",{},{},(({feedId:e,finderUserName:t})=>({export_id:e,finder_username:t})),(e=>{e.live_info&&e.live_info.length&&(e.feedId=e.live_info[0].export_id,e.nonceId=e.live_info[0].nonce_id,e.description=e.live_info[0].description,e.status=e.live_info[0].status,e.headUrl=e.live_info[0].head_url,e.nickname=e.live_info[0].nickname),delete e.live_info,delete e.rawData}));var o=n(9045),a=n(1633);function s(){if(void 0===i)return"";const e=i.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}function c(e,t,n,r=""){const o=[e||"",s(),t,n,r].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"WeAppToChannels",value:o})}function l(e={}){r(Object.assign({},e,{success({nickname:t}){const n=t?`“${t}”`:"";(0,a._showModal)({title:`即将打开${n}视频号直播`,confirmText:"允许",cancelText:"取消",success({confirm:t}){t?(0,o.IN)("openChannelsLive",e,{beforeAll({errMsg:t}){c(e.finderUserName,1,/^\w+:ok/.test(t)?1:0,t)}}):(c(e.finderUserName,1,0,"cancel"),(0,o.YG)("openChannelsLive",e,"cancel"))}})},fail({errMsg:t}){c(e.finderUserName,1,0,t),(0,o.YG)("openChannelsLive",e,t)},complete:null}))}function d(e={}){r(Object.assign({},e,{success({nickname:t}){const n=t?`“${t}”`:"";(0,a._showModal)({title:`即将打开${n}视频号`,confirmText:"允许",cancelText:"取消",success({confirm:t}){t?(0,o.IN)("openChannelsUserProfile",e,{beforeAll({errMsg:t}){c(e.finderUserName,2,/^\w+:ok/.test(t)?1:0,t)}}):(c(e.finderUserName,2,0,"cancel"),(0,o.YG)("openChannelsUserProfile",e,"cancel"))}})},fail({errMsg:t}){c(e.finderUserName,2,0,t),(0,o.YG)("openChannelsUserProfile",e,t)},complete:null}))}function u(e={}){r(Object.assign({},e,{success({nickname:t}){const n=t?`“${t}”`:"";(0,a._showModal)({title:`即将打开${n}视频号`,confirmText:"允许",cancelText:"取消",success({confirm:t}){t?(0,o.IN)("openChannelsActivity",e,{beforeAll({errMsg:t}){c(e.finderUserName,3,/^\w+:ok/.test(t)?1:0,t)}}):(c(e.finderUserName,3,0,"cancel"),(0,o.YG)("openChannelsActivity",e,"cancel"))}})},fail({errMsg:t}){c(e.finderUserName,3,0,t),(0,o.YG)("openChannelsActivity",e,t)},complete:null}))}},7322:(e,t,n)=>{"use strict";n.d(t,{L:()=>c,V:()=>l});var r=n(9045),o=n(7452),i=n(2851);let a=0;const s=[],c=(e,t={},n,o)=>{const c=a++;s[c]=o,(0,r.nY)("invokeWebviewMethod",{name:e,args:t,callbackId:c},void 0===n?[i.Z.currentWebviewId]:n)};(0,r.Ld)("callbackWebviewMethod",(({res:e,callbackId:t})=>{const n=s[t];delete s[t],n&&n(e)}));const l=(e,t={},n={})=>{(0,o.Kn)(t)||(t={}),t=Object.assign({},t);const i=(0,r.wo)(t,e);c(e,t,void 0,(t=>{(0,r.F0)(t,e,i,n)}))}},8917:(e,t,n)=>{"use strict";n.d(t,{X4:()=>m,nH:()=>A,sS:()=>u});var r=n(1503),o=n.n(r),i=n(2046),a=n(7618),s=n(9045),c=n(2851),l=n(9187),d=n(2614);const u=[],p=new Map;let h=0;const f=/url\((.*)\)/i,g=/([^.]*)(\..*)?/i;(0,s.Ld)("loadedFontFace",(e=>{const{callbackId:t,errMsg:n=""}=e;if(!p.has(t))return;const r=p.get(t);p.delete(t);const{success:o,fail:i,complete:a}=r,s=0===n.indexOf("loadFontFace:ok"),c={status:s?"loaded":"error",errMsg:n};s?"function"==typeof o&&o(c):"function"==typeof i&&i(c),"function"==typeof a&&a(c)}));const _=(e={})=>new Promise(((t,n)=>{((e={})=>{h++;const{success:t,fail:n,complete:r}=e;if(delete e.success,delete e.fail,delete e.complete,e.callbackId=h,p.set(h,{success:t,fail:n,complete:r}),e.global||!1){const t=encodeURIComponent(JSON.stringify(e));u.indexOf(t)<0&&u.push(t),(0,s.nY)("loadFontFace",e)}else(0,s.nY)("loadFontFace",e,[c.Z.currentWebviewId])})(o()(o()({},e),{},{success(e){t(e)},fail(e){n(e)}}))})),m=[],y=(0,i.s)("skiaCanvasLoadFontFace");const v=(e={})=>{let t="";const n=e.source.match(f);return n.length>=2&&(t=n[1],t=t.substring(1,t.length-1)),new Promise(((n,r)=>{(0,d.o)({url:t,timeout:2e4,success(t){var r;r={originalSrc:e.source,src:t.tempFilePath,family:e.family,style:e.desc&&e.desc.style,weight:e.desc&&e.desc.weight,variant:e.desc&&e.desc.variant},m.push(r),y.emit({nativeFontAssets:m});const o=(t.tempFilePath||"").replace(g,((...e)=>e[1]));a.L.set(o),n()},fail(){r()}})}))},A=(e={})=>{if(!(0,s.r3)("loadFontFace",e,{family:"",source:""}))return;let t="";if(""===e.family&&(t="parameter error: family can not be empty string"),""===e.source&&(t="parameter error: source can not be empty string"),t)return void(0,s.YG)("loadFontFace",e,t);f.test(e.source)||(e.source=`url("${e.source}")`),e.scopes||(e.scopes=["webview"]),(0,l.It)({name:"loadFontFace",data:{family:e.family,source:encodeURIComponent(e.source),global:Boolean(e.global),scopes:e.scopes}});const n=[];if(e.scopes.indexOf("webview")>=0){const t=_(e);n.push(t)}if(e.scopes.indexOf("native")>=0){const t=v(e);n.push(t)}Promise.all(n).then((()=>{(0,s.FE)({name:"loadFontFace",args:e,success:!0,errMsg:"",res:{status:"loaded"}})})).catch((()=>{(0,s.FE)({name:"loadFontFace",args:e,success:!1,errMsg:"",res:{status:"error"}})}))}},9978:(e,t,n)=>{"use strict";n.d(t,{I9:()=>d,EO:()=>u,zU:()=>h,FI:()=>p,FE:()=>f,hv:()=>g});var r=n(9045),o=n(5260),i=n(2851),a=n(2614),s=n(7618),c=n(7657),l=n(665);const d=(e={})=>{(0,r.IN)("chooseImage",(0,o.f0)({count:9,sizeType:["original","compressed"],sourceType:["album","camera"]},e),{beforeSuccess(e){e.tempFileSizes?e.tempFiles=(e.tempFilePaths||[]).filter((e=>e)).map(((t,n)=>({path:t,size:e.tempFileSizes[n]}))):e.tempFiles=(e.tempFiles||[]).filter((e=>e.path&&"number"==typeof e.size)),delete e.tempFileSizes}})},u=(e={})=>{if(!(0,r.r3)("previewImage",e,{urls:[""]}))return;const t=l.Z.version,n=l.Z.system,o="7.0.12"===t&&n.indexOf("iOS 13.4")>=0;for(const t of e.urls)if(/^\s*data:image\//.test(t)&&o)return void(0,r.YG)("previewImage",e,"url can not be base64 on iOS 13.4");const i=Object.assign({},e);i.urls=i.urls.slice(),i.referrerPolicy=i.referrerPolicy||"origin",(0,c.V)(i.urls,"image",(e=>{const t=i.urls;if(i.urls=[...e.data.map((e=>e.url))],i.current){const e=t.indexOf(i.current);e>=0&&(i.current=i.urls[e])}i.urls&&(i.urls=i.urls.map((e=>s.L.get(e)||e))),(0,r.IN)("previewImage",i)}))},p=e=>{const t=Object.assign({},e),n=[t.src];(0,c.V)(n,"image",(e=>(t.src=e.data[0].url,h(t,a.S))))},h=(e,t)=>{(0,r.r3)("getImageInfo",e,{src:""})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/tmp\//.test(e.src)?(0,r.IN)("getImageInfo",e,{beforeSuccess:t=>{t.path=e.src}}):/^(http|https):\/\//.test(e.src)?t({url:e.src,success(t){404!==t.statusCode?(e.src=t.tempFilePath,(0,r.IN)("getImageInfo",e,{beforeSuccess:t=>{t.path=e.src}})):(0,r.YG)("getImageInfo",e,"image not found (404)")},fail(t){(0,r.YG)("getImageInfo",e,"download image fail. reason: "+t.errMsg)}}):(e.src=(0,o.sd)(i.Z.lastRoute,e.src,!1),(0,r.IN)("getImageInfo",e,{beforeSuccess:t=>{t.path=e.src}})))},f=(e={})=>{e.filePath=s.L.get(e.filePath)||e.filePath,(0,r.IN)("saveImageToPhotosAlbum",e,{})},g=(e={})=>{let t={src:"",quality:80};t=(0,o.l7)(t,e),(0,r.r3)("compressImage",t,{src:"",quality:80})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/(tmp|store)\//.test(e.src)||(t.src=(0,o.sd)(i.Z.lastRoute,t.src,!1)),(0,r.IN)("compressImage",t))}},2614:(e,t,n)=>{"use strict";n.d(t,{o:()=>k,S:()=>P});var r=n(9045),o=n(6947),i=n(2582),a=n(665),s=n(2288),c=n(5014),l=n(7255);(0,l.b)("Download",{maxTaskCount:10,functionName:"downloadFile"}),a.Z.onReady((()=>{try{"number"==typeof a.Z.wxAppInfo.maxDownloadConcurrent&&(0,l.b)("Download",{maxTaskCount:a.Z.wxAppInfo.maxDownloadConcurrent})}catch(e){}}));class d extends l.o{constructor(e){super(e,{taskType:"Download",beforeSend:t=>(t.filePath=e.filePath,t),beforeSuccess:e=>(delete e.timeInterval,e)})}}const u=d;var p=n(8159),h=n(1095),f=n(9271);const g=o.Z.Download,_=new WeakMap,m=new WeakMap,y=new WeakMap,v=[];let A=0,b=10;function w(e=!1){for(e&&(_.delete(e),m.delete(e),y.delete(e),A--);v.length>0&&A<b;){const e=v.shift(),t=_.get(e),n=m.get(e);t&&n&&(t.start(n),A++)}}a.Z.onReady((()=>{a.Z.wxAppInfo&&a.Z.wxAppInfo.maxDownloadConcurrent&&(b=a.Z.wxAppInfo.maxDownloadConcurrent)}));class C{constructor(e){const t=new g,n=new p.Z;_.set(this,t),y.set(this,n),m.set(this,(0,h.v7)(e,["url","header","filePath","enableProfile"])),t.onfail=t=>{(0,r.YG)("downloadFile",e,t),w(!0)},t.onsuccess=t=>{(0,r.FE)({name:"downloadFile",args:e,res:t}),w(!0)},t.onheader=e=>n.emit("header",{header:e}),t.onprogress=(e,t,r)=>n.emit("progress",{progress:e,totalBytesWritten:t,totalBytesExpectedToWrite:r}),(0,f.k)({api:"downloadFile",url:e.url}).then((t=>{e.__skipDomainCheck__||t.isInDomainList||t.isInLAN&&!t.isLocalHost?(v.push(this),w()):(0,r.YG)("downloadFile",e,"invalid url")})).catch((()=>{(0,r.YG)("downloadFile",e,"url validate error")}))}abort(){const e=_.get(this);e&&e.abort()}onHeadersReceived(e){const t=y.get(this);t&&t.on("header",e)}onProgressUpdate(e){const t=y.get(this);t&&t.on("progress",e)}offHeadersReceived(e){const t=y.get(this);t&&t.off("header",e)}offProgressUpdate(e){const t=y.get(this);t&&t.off("progress",e)}}let I=!1;function E(e){return I?new C(e):new u(e)}n.g.__isAppServiceRemoteDebugMode__||o.Z.Download&&a.Z.onReady((()=>{let e=!1;const t=i.cj?"clicfg_appbrand_ios_native_download":"clicfg_appbrand_native_download";(0,s.b)({experimentId:t,experimentType:"Expt",success:t=>{t&&1===Number(t.testConfig)&&(e=!0)},fail(e){}});const n=(0,c.J)("bindingDownload");I=e||n}));var S=n(3775);const T=(e={})=>(e=Object.assign({__skipDomainCheck__:!1},e),(t={})=>{if((0,r.r3)("downloadFile",t,{url:""})){t.__skipDomainCheck__=e.__skipDomainCheck__;try{return new E(t)}catch(e){return void(0,r.YG)("downloadFile",t,e.message)}}}),x=T(),k=T({__skipDomainCheck__:!0}),P=(e={})=>{if("string"!=typeof e.filePath||!e.filePath.startsWith((0,S.WZ)()))return x(e);(0,r.YG)("downloadFile",e,"permission denied")}},5166:(e,t,n)=>{"use strict";n.d(t,{a:()=>M,W:()=>R});var r=n(9045),o=n(5260),i=n(665),a=n(7255),s=n(7452),c=n(2851);let l="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",d="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function u({isSuccess:e,invokeTime:t,costTime:n,wxdataQueueTimestamp:r,wxdataDequeueTimestamp:o,beginCGITimestamp:a,CGICallbackTimestamp:u,wxlibCallbackTimestamp:p,requestingCount:h,cost1:f,cost2:g,cost3:_,cost4:m,cost5:y,cost6:v,JSApiType:A}){Math.random()<.002&&setTimeout((()=>{const b=c.Z.currentNetworkType,w=i.Z.appType+1e3,C=i.Z.appLaunchInfo&&void 0!==i.Z.appLaunchInfo.scene?i.Z.appLaunchInfo.scene:0,I=["","",e?1:0,t,n,b,"",w,C,l,d,"",0,0,f,g,_,m,y,v,0,0,h,t,r,o,a,u,0,0,p,A].map((E=1024,e=>(0,s.HD)(e)&&e.length>E?e.substr(0,E):e)).join(",");var E;Reporter.reportKeyValue({key:"WeAppOperateWXData",value:I})}),0)}(0,s.HD)(l)&&(l=l.replace(" ","")),(0,s.HD)(d)&&(d=d.replace(" ","-"));var p=n(7646),h=n(1095),f=n(6998);const g=(0,h.Fr)((0,p.Ce)(!1,"getDNSInfo"));let _={},m={},y={};(0,f.onNetworkStatusChange)((()=>{_={},m={},y={}}));let v=0;(0,a.b)("Request",{maxTaskCount:10,functionName:"request"}),i.Z.onReady((()=>{try{"number"==typeof i.Z.wxAppInfo.maxRequestConcurrent&&(0,a.b)("Request",{maxTaskCount:i.Z.wxAppInfo.maxRequestConcurrent})}catch(e){}}));class A extends a.o{constructor(e){const t={JSApiType:1,invokeTime:Date.now(),requestingCount:++v};super(e,{taskType:"Request",beforeSend:t=>(t.responseType=e.responseType,t.apiSigningSeq=e.apiSigningSeq,t.apiSignature=e.apiSignature,t),beforeSuccess:n=>{var r,o;return e.host&&e.ip&&(r=e.host,o=e.ip,m[r]=o),t.isSuccess=!0,function(e){"string"==typeof e.data&&65279===e.data.charCodeAt(0)&&(e.data=e.data.substr(1))}(n),function(e){e.statusCode=parseInt(e.statusCode,10)}(n),function(e){"object"==typeof e.header&&(e.header=Object.keys(e.header).reduce(((t,n)=>(Array.isArray(e.header[n])?t[n]=e.header[n].join(","):"string"==typeof e.header[n]&&(t[n]=e.header[n]),t)),{}))}(n),"json"===e.dataType&&function(e){try{e.data=JSON.parse(e.data)}catch(e){}}(n),b(n,t,e),n},beforeFail:n=>(t.isSuccess=!1,b(n,t,e),n)})}}function b(e,t,n){const r=Date.now();if(v--,t.costTime=r-t.invokeTime,e.clientInfo&&"object"==typeof e.clientInfo){const o=e.clientInfo;t.wxdataQueueTimestamp=o.invokeTime,t.wxdataDequeueTimestamp=o.invokeTime,t.beginCGITimestamp=o.beginCGITimestamp,t.CGICallbackTimestamp=o.CGICallbackTimestamp,t.wxlibCallbackTimestamp=o.wxlibCallbackTimestamp,t.cost1=t.wxdataQueueTimestamp-t.invokeTime,t.cost2=t.wxdataDequeueTimestamp-t.wxdataQueueTimestamp,t.cost3=t.beginCGITimestamp-t.wxdataDequeueTimestamp,t.cost4=t.CGICallbackTimestamp-t.beginCGITimestamp,t.cost5=t.wxlibCallbackTimestamp-t.CGICallbackTimestamp,t.cost6=r-t.wxlibCallbackTimestamp,n&&n.__wxUseProfile__&&(e.__requestProfileInfo=t),delete e.clientInfo,u(t)}}const w=A,C=new WeakMap;class I{constructor(){let e;const t=new Promise((t=>{e=t}));C.set(this,{promise:t,resolve:e})}abort(){const{promise:e}=C.get(this);e.then((e=>{e.abort()}))}onHeadersReceived(e){const{promise:t}=C.get(this);t.then((t=>{t.onHeadersReceived(e)}))}offHeadersReceived(e){const{promise:t}=C.get(this);t.then((t=>{t.offHeadersReceived(e)}))}}function E({args:e}){const t=(0,o.Em)(e.header);e.header=e.header||{},e.header=(0,o.Nf)(e.header),"Undefined"!==t&&"Object"!==t&&(console.warn("wx.request: header must be an object"),e.header={}),e.header=Object.keys(e.header).reduce(((t,n)=>("content-type"===n.toLowerCase()?t[n.toLowerCase()]=e.header[n]:t[n]=e.header[n],t)),{});let n="text";e.responseType&&(n=e.responseType.toLowerCase());const r=e.header||{};let i,a="GET";return"string"==typeof e.method&&(a=e.method.toUpperCase()),e.dataType=e.dataType||"json",r["content-type"]=r["content-type"]||"application/json",i=void 0===e.data?"":"string"!=typeof e.data&&"ArrayBuffer"!==(0,o.Em)(e.data)?r["content-type"].indexOf("application/x-www-form-urlencoded")>-1?(0,o.HR)(e.data,!0):r["content-type"].indexOf("application/json")>-1||"object"==typeof e.data?JSON.stringify(e.data):i.toString():e.data,"GET"===a&&(e.url=(0,o.cE)(e.url,e.data)),{header:r,method:a,responseType:n,dataStr:i,args:e}}function S({args:e,host:t}){let n;if(!0===e.enableHttpDNS){const e=(e=>{const t=_[e];return t?{expired:Date.now()>t.expireTime,ip:t.ip}:null})(t);return e&&!1===e.expired?(n=e.ip,{host:t,ip:n}):(e=>(y[e]||(y[e]=g({apiName:"webapi_wxahttpdns_gethostip",reqData:{domain:e}}).then((t=>{delete y[e],t=JSON.parse(t.rawData);const{wxa_state:n,ip:r,ttl:o}=t;if(0===n)return _[e]={ip:r,expireTime:1e3*o+Date.now()},_[e];throw new Error(n)})).catch((t=>{throw delete y[e],t}))),y[e]))(t).then((e=>(n=e.ip,{host:t,ip:n})))}return{}}function T({host:e,ip:t}){return{forbidReuse:((e,t)=>{const n=m[e];return t?!(n&&n===t||(delete m[e],0)):(delete m[e],!1)})(e,t)}}var x=n(6012);function k({args:e}){const{host:t,protocol:n}=(0,x.e)(e.url);return{host:t,protocol:n}}function P({protocol:e}){let t;return t="http"===e?80:"https"===e?443:0,{port:t}}const D=__safeway__.apiSign.makeApiSign;class O{constructor(e){this.innerParams=e,this.asyncTasks=[]}use(e){const t=e(this.innerParams,this.asyncTasks);if(t instanceof Promise){const e=t.then((e=>{Object.assign(this.innerParams,e)}));this.asyncTasks.push(e)}else Object.assign(this.innerParams,t);return this}useAfterAsyncTasks(e){return this.asyncTasks.length>0?Promise.all(this.asyncTasks).then((()=>{this.use(e)})).catch((e=>e)):this.use(e),this}catch(e){return this.catchFn=e,this}execute(){if(this.asyncTasks.length>0){const e=new I;return Promise.all(this.asyncTasks).then((()=>{const t=this.createRequestTask();((e,t)=>{const{resolve:n}=C.get(e);n(t)})(e,t)})).catch((e=>{this.catchFn&&this.catchFn(e),delete this.catchFn})),e}return this.createRequestTask()}createRequestTask(){const{args:e,host:t,ip:n,header:r,method:o,port:i,responseType:a,dataStr:s,options:c,forbidReuse:l}=this.innerParams;try{return new w(Object.assign({},e,{header:r,method:o,responseType:a,data:s,ip:n,host:t,port:i,forbidReuse:l},D("createRequestTask",{url:e.url,__skipDomainCheck__:c.__skipDomainCheck__})))}catch(e){return this.catchFn&&this.catchFn(e),void delete this.catchFn}}}const N=(e={})=>(e=Object.assign({__skipDomainCheck__:!1},e),function(t={}){if(!(0,r.r3)("request",t,{url:""}))return;if(!1===(0,o.mQ)(t.url))return void(0,r.YG)("request",t,`invalid url "${t.url}"`);try{JSON.stringify(t.data)}catch(e){return void(0,r.YG)("request",t,"fail to stringify data")}if("function"==typeof t.data)return void(0,r.YG)("request",t,"data should not be Function");const n=new O({args:t,options:e});return n.catch((e=>{(0,r.YG)("request",t,e.message||e.errMsg)})).use(E).use(k).use(P).use(S).useAfterAsyncTasks(T),n.execute()}),R=N(),M=N({__skipDomainCheck__:!0})},7255:(e,t,n)=>{"use strict";n.d(t,{o:()=>x,b:()=>B});var r=n(812),o=n(5500),i=n(2184),a=n(1095),s=n(7452),c=n(6052),l=n(6012),d=n(2582),u=n(946),p=n(665);const h=(0,a.Fr)(c.lz);let f=0;const g=new WeakMap,_=new WeakMap,m=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakMap,b=new WeakMap,w=new WeakMap,C=new WeakMap,I=new WeakMap,E={},S=new i.Q("Network",!0),T=wxNativeConsole.createLogger("NetworkTask");class x{constructor(e,{taskType:t,beforeSend:n,beforeSuccess:r,beforeFail:o}){const i=f++;g.set(this,i),m.set(this,"waiting"),y.set(this,e),v.set(this,t),b.set(this,n),w.set(this,r),(0,s.mf)(o)&&C.set(this,o);let a=!1;d.jP&&(a=!0),d.wZ&&p.Z.clientVersion>=654315008&&("Download"!==t&&"Request"!==t||Object.keys(p.Z.gamePlugins||p.Z.plugins||{}).forEach((e=>{const t=(p.Z.gamePlugins||p.Z.plugins)[e];!t||"wx20afc706a711eefc"!==t.provider&&"wx4d5893418b75cb20"!==t.provider||(a=!0)}))),I.set(this,a),this.promise=new u.Q(((e,t)=>{this.resolve=e,this.reject=t}));const c=()=>{M.call(this)?E[t].taskQueue.push({id:i,item:this}):P.call(this)};(0,s.mf)(e.customCheck)?e.customCheck(e,(n=>{n?k(t,e,n):c()})):c()}abort(){if(T.info(`[${v.get(this)}][${g.get(this)}]abort()`),"waiting"===m.get(this)){T.info(`[${v.get(this)}][${g.get(this)}] waiting=true`);const e=E[v.get(this)].taskQueue.findIndex((e=>e.id===g.get(this)));e>-1&&(E[v.get(this)].taskQueue.splice(e,1),(0,r.YG)(E[v.get(this)].functionName,y.get(this),"abort")),m.set(this,"done")}else this.promise.then((()=>{(0,r.IN)(`operate${v.get(this)}Task`,{[`${v.get(this).toLowerCase()}TaskId`]:_.get(this),operationType:"abort"})}))}onProgressUpdate(e){this.promise.then((()=>{S.on(`${v.get(this)}${_.get(this)}progressUpdate`,e)}))}offProgressUpdate(e){this.promise.then((()=>{S.off(`${v.get(this)}${_.get(this)}progressUpdate`,e)}))}onHeadersReceived(e){this.promise.then((()=>{S.on(`${v.get(this)}${_.get(this)}headersReceived`,e)}))}offHeadersReceived(e){this.promise.then((()=>{S.off(`${v.get(this)}${_.get(this)}headersReceived`,e)}))}}function k(e,t,n){(0,r.FE)({name:E[e].functionName,args:{success:t.success,fail:t.fail,complete:t.complete},success:!1,errMsg:n})}function P(){const e=y.get(this),t=v.get(this),n=I.get(this);m.set(this,"sending"),A.set(this,Date.now());const r=D.call(this);n?this.promise.then((()=>{O.call(this)})).catch((n=>{k(t,e,n)})):r?k(t,e,r):O.call(this)}function D(){const e=v.get(this),t=y.get(this);let n;E[e].currentTaskCount++;const o={data:t.data,url:t.url,header:t.header,method:t.method,timeout:(0,s.hj)(t.timeout)?t.timeout:0,enableHttp2:!!(0,s.jn)(t.enableHttp2)&&t.enableHttp2,enableQuic:!!(0,s.jn)(t.enableQuic)&&t.enableQuic,enableCache:!!(0,s.jn)(t.enableCache)&&t.enableCache,enableProfile:!(0,s.jn)(t.enableProfile)||t.enableProfile,ip:t.ip,port:t.port,forbidReuse:!!(0,s.jn)(t.forbidReuse)&&t.forbidReuse,host:t.host,__skipDomainCheck__:t.__skipDomainCheck__,success:t=>{const n=t[`${e.toLowerCase()}TaskId`];_.set(this,n),E[e].taskIdMap[n]=this,this.resolve()},fail:r=>{E[e].currentTaskCount--;const o=r[`${e.toLowerCase()}TaskId`];n=r.errMsg,N.call(this,{taskType:e,options:t,errMsg:n,success:!1}),this.reject(n),T.error(`[${e}][createTask][Fail] taskId=${o}`)},complete:()=>{m.set(this,"done")}},i=I.get(this),a=`create${e}Task${i?"Async":""}`;return(0,r.IN)(a,b.get(this)(o)),n}function O(){const e=_.get(this),t=y.get(this),n=v.get(this),o=E[n].functionName;S.on(`${n}${e}success`,(e=>{w.get(this).call(this,e),(0,r.FE)({name:o,args:{success:t.success,fail:t.fail,complete:t.complete},res:e})})),S.on(`${n}${e}fail`,(e=>{const n=C.get(this);n&&n.call(this,e),(0,r.FE)({name:o,args:{success:t.success,fail:t.fail,complete:t.complete},success:!1,errMsg:e.errMsg})}))}function N({taskType:e,options:t,errMsg:n,success:r=!0,dataLength:i=0,statusCode:a="",responseDataLength:s=0,profile:c={}}){const l=t.url,d=r?1:2,u=Date.now()-A.get(this),p=t.__skipDomainCheck__;u>=6e4&&T.error(`reportTask costTime too long: ${u}ms, taskId=${_.get(this)}`),(0,o.P)(E[e].functionName,l,d,u,n,a,p,i,s,c)}function R(e,t){const n=`${t.toLowerCase()}TaskId`,r=e[n],{state:o,header:i}=e;if(delete e.state,delete e[n],e.cookies=i?(0,l.$)(i["Set-Cookie"]||i["set-cookie"]):[],S.emit(`${t}${r}${o}`,e),"success"===o||"fail"===o){const n=E[t].taskIdMap[r],i=y.get(n);if(!n)return;E[t].currentTaskCount-=1,E[t].taskQueue.length>0&&P.call(E[t].taskQueue.shift().item);let s=Promise.resolve((0,a.Y6)(i.data));if("Upload"===t){let e=0;"object"==typeof i.formData&&null!==i.formData&&(e=JSON.stringify(i.formData).length),s=h({path:i.filePath}).then((t=>e+t.stats.size)).catch((()=>e))}let c=Promise.resolve((0,a.Y6)(e.data));if("Download"===t){const t=e.dataLength;c="number"==typeof t?Promise.resolve(t):h({path:e.filePath||e.tempFilePath||""}).then((e=>e.stats.size)).catch((()=>0))}Promise.all([s,c]).then((([r,a])=>{N.call(n,{taskType:t,options:i,errMsg:e.errMsg,statusCode:e.statusCode,success:"success"===o,dataLength:r,responseDataLength:a,profile:e.profile})})),L.call(n)}}function M(){const e=v.get(this);return E[e].currentTaskCount>=E[e].maxTaskCount}function L(){const e=v.get(this),t=_.get(this);delete E[e].taskIdMap[t],S.removeAllListeners(`${e}${t}success`),S.removeAllListeners(`${e}${t}fail`),S.removeAllListeners(`${e}${t}complete`)}function B(e,t){const n=E[e]?E[e]:{currentTaskCount:0,maxTaskCount:10,taskQueue:[],functionName:"",taskIdMap:{}};(0,r.jQ)(`on${e}TaskStateChange`,(t=>{R.call(this,t,e)})),E[e]=Object.assign(n,t)}},6012:(e,t,n)=>{"use strict";function r(e){if(!e)return[];if(Array.isArray(e))return e;return e.split(",").reduce(((e,t)=>(/^\s*\S+=/.test(t)?e.push(t):e.length&&(e[e.length-1]+=t),e)),[]).map((e=>e.trim()))}function o(e){const t={protocol:/^(.+)\:\/\//,host:/\:\/\/(.+?)[\?\#\s\/]/,path:/\w(\/.*?)[\?\#\s]/,query:/\?(.+?)[\#\/\s]/,hash:/\#(\w+)\s$/};return e+=" ",Object.keys(t).forEach((n=>{const r=t[n];t[n]="query"===n?r.exec(e)&&r.exec(e)[1].split("&").reduce(((e,t)=>{const n=t.split("=");return e[n[0]]=n[1],e}),{}):r.exec(e)&&r.exec(e)[1]})),t}n.d(t,{$:()=>r,e:()=>o})},7725:(e,t,n)=>{"use strict";n.d(t,{I:()=>s,o:()=>c});var r=n(9045),o=n(5260),i=n(1095);const a=({innerContext:e={},args:t={}}={})=>{(0,r.r3)("authorize",t,{scope:""})&&("scope.userInfo"!==t.scope||(0,i.KU)("getUserInfo")||(0,i.KU)("authorize")?(0,r.IN)("authorize",(0,o.f0)(t,{scope:[t.scope],requestInQueue:!e.hasOwnProperty("requestInQueue")||Boolean(e.requestInQueue)}),{beforeAll(e){delete e.body,void 0!==e.err_code&&(e.errCode=e.err_code,delete e.err_code)}}):(0,r.YG)("authorize",t,"scope unauthorized"))},s=(e={})=>{a({args:e})},c=a},3935:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l,H:()=>d});var r=n(9045),o=n(4931),i=n(405);let a=!1,s=null,c=null;(0,i.H)((()=>{a=!0})),(0,o.q)((()=>{a=!1,s&&(l(s),s=null),c&&(d(c),c=null)}));const l=e=>{(0,r.r3)("addCard",e,{cardList:[]})&&(a?s=e:(0,r.IN)("addCard",e))},d=e=>{(0,r.r3)("openCard",e,{cardList:[]})&&(a?c=e:(0,r.IN)("openCard",e))}},4055:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(9045);const o=(e={})=>{(0,r.IN)("chooseInvoiceTitle",e,{beforeSuccess(e){const t=e.invoiceTitleInfo||e.choose_invoice_title_info;if(t)try{const n=JSON.parse(t);delete e.invoiceTitleInfo,delete e.choose_invoice_title_info,e=Object.assign(e,n)}catch(e){}}})}},5688:(e,t,r)=>{"use strict";r.d(t,{JM:()=>P.JM,p4:()=>wt,Iq:()=>lt.I,vP:()=>Jt,In:()=>Ne,CE:()=>d,bV:()=>st,OO:()=>_t,FH:()=>Nt,n7:()=>Ct.n,YX:()=>Rt,CI:()=>s,lB:()=>l,Xi:()=>an,PT:()=>It,$8:()=>mt.$,bG:()=>dt,et:()=>gt,wN:()=>At,IB:()=>jt,x4:()=>at,kS:()=>ct,FT:()=>dn,NS:()=>zt,DS:()=>Lt,fo:()=>Yt,kH:()=>qt,sT:()=>Mt,as:()=>vt,DZ:()=>Bt,Lo:()=>P.Lo,mG:()=>o,We:()=>Xt,$T:()=>Kt,Z8:()=>Wt,bO:()=>ln,Me:()=>a,Qx:()=>en,FD:()=>$t,BN:()=>Oe,NL:()=>Dt,Y6:()=>i,OA:()=>c,z9:()=>bt});var o={};r.r(o),r.d(o,{y$:()=>p,EJ:()=>A,TI:()=>Ae,J7:()=>h,Jf:()=>b,MQ:()=>be,Mv:()=>Ie,oJ:()=>ke,LD:()=>m,y:()=>w,jo:()=>we,fi:()=>Ee,UQ:()=>Pe,DF:()=>y,t9:()=>ye,Ls:()=>J,FS:()=>Se,Jp:()=>De,ck:()=>xe,eA:()=>v,bu:()=>ve,He:()=>Ce,H_:()=>Te});var i={};r.r(i),r.d(i,{vW:()=>Le,$8:()=>Re,WO:()=>Me});var a={};r.r(a),r.d(a,{IS:()=>Be,FA:()=>Ue,Ns:()=>Fe,qU:()=>Ve});var s={};r.r(s),r.d(s,{Ys:()=>Ge,fP:()=>Qe,IQ:()=>ze,J2:()=>Ze,sQ:()=>Ye});var c={};r.r(c),r.d(c,{Pi:()=>qe,PR:()=>Ke,Jn:()=>Je,s$:()=>Xe,Z8:()=>et});var l={};r.r(l),r.d(l,{z:()=>nt,O:()=>rt});var d={};r.r(d),r.d(d,{j:()=>ot});var u=r(9045);const p=e=>{(0,u.IN)("bindPaymentCard",e)},h=e=>{(0,u.IN)("loadPaySpeechDialectConfig",e)};var f=r(2582),g=r(1095),_=r(665);const m=(e={})=>{f.wZ&&(0,g.Cb)(_.Z.clientVersion,"7.0.15")>=0||f.cj&&(0,g.Cb)(_.Z.clientVersion,"7.0.13")>=0?(0,u.IN)("phoneBindCardVerifySms",e):(0,u.YG)("phoneBindCardVerifySms",e,"not yet supported")},y=e=>{(0,u.IN)("requestMallPayment",e)},v=e=>{(0,u.IN)("requestVerifyUserIdentity",e)},A=e=>{(0,u.IN)("getWCPayOverseaPrepayRequest",e)},b=e=>{(0,u.IN)("openOfflinePayView",e)},w=(e={})=>{(0,u.IN)("requestEntrustAuthorization",e)};var C=r(3451),I=r.n(C),E=r(1503),S=r.n(E),T=r(3356),x=r.n(T),k=r(8827),P=r(7646),D=r(7452),O=r(2783),N=r(638),R=r(3170),M=r(7322),L=r(2276),B=r(3755),F=r(1633),W=r(5287);let j=!1,U=500,V=!1;const G=0,$=1,H=2,Z=3,Q=4,Y=()=>{var e,t,n;return{shouldCheck:null!==(e=j)&&void 0!==e&&e,timeout:null!==(t=U)&&void 0!==t?t:500,deprecated:null!==(n=V)&&void 0!==n&&n}},z=function(){var e=x()((function*(e){try{const{respData:t}=yield ee({apiName:"webapi_openproduct_bizaccount",reqData:{path:e.path,query:JSON.stringify(e.query||{})}}),n=JSON.parse(t.data);if(void 0!==n.openproduct_checkticket&&(j=!!n.openproduct_checkticket),void 0!==n.openproduct_checktickettimeout&&(U=parseInt(n.openproduct_checktickettimeout,10)),void 0!==n.openproduct_checkticket_deprecated&&(V=!!n.openproduct_checkticket_deprecated),void 0!==n.openleague_cookie){const e=[];(0,k.jl)(n.openleague_cookie||"",!1,e);const t=(0,k.zv)({cookies:e});t&&wxNativeConsole.error("[set openleague_cookie]",t)}}catch(e){}}));return function(t){return e.apply(this,arguments)}}();_.Z.onReady((()=>{setTimeout((()=>z(_.Z.appLaunchInfo||{})),1e3)})),(0,N.T)((e=>{(e.reLaunch||e.isLaunch)&&z(e)}));const q=(()=>{let e,t,n,r;return(0,N.T)((o=>{e=+o.scene||0,t=o.scene_note||o.sceneNote||"",n=+o.prescene||0,r=o.prescene_note||o.presceneNote||""})),_.Z.onReady((()=>{(()=>{const o=_.Z.appLaunchInfo||{};e=o.scene||0,t=o.scene_note||o.sceneNote||"",n=o.prescene||0,r=o.prescene_note||o.presceneNote||""})()})),()=>({scene:e,scene_note:t,prescene:n,prescene_note:r})})(),J=(0,O.NX)("requestPayment",function(){var e=x()((function*(e){const t=(0,D.x7)(e,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""});if(t)throw new Error(`parameter error: ${t}`);e=Object.assign({},e);const{deprecated:n,shouldCheck:r}=Y();let o=!1;if(o="develop"===_.Z.envVersion||"trial"===_.Z.envVersion?_.Z.usingShopPlugin||!1:r||!1,o){if(console.log("wx.requestPayment is deprecated for shop plugin. Please use wx.requestOrderPayment."),n)throw new Error("deprecated for shop plugin");let t=G;const r=e.ticket||"";try{const n=Y().timeout||500;try{const{is_authorized:o}=yield Promise.race([te(S()({ticket:r,prepay_id:e.package.replace("prepay_id=","")},q())),ne("timeout",n)]);t=o?Z:Q}catch(e){wxNativeConsole.error("[paymentCheckTicket] fail",e),t=e&&"timeout"===e.message?H:$}if(t===Q)throw new Error("check ticket rejected")}finally{re({ticket:r,checkTicketStatus:t})}}let i,a=ie.NONE;try{const t=yield oe(e);return a=ie.SUCCESS,t}catch(e){throw a=ie.FAILED,i=e.message,e}finally{o&&ae({prepayId:(e.package||"").replace("prepay_id=",""),requestPaymentStatus:a,requestPaymentErrmsg:i})}}));return function(t){return e.apply(this,arguments)}}()),K=function(){var e=x()((function*(){const{time:e,isRistWarning:t,wording:n}=yield new Promise((e=>{(0,B.$x)((t=>{let n=!1,r="";const o=_.Z&&_.Z.appContactInfo&&_.Z.appContactInfo.operationInfo&&_.Z.appContactInfo.operationInfo.jsonInfo&&_.Z.appContactInfo.operationInfo.jsonInfo.warning_info&&_.Z.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];o&&o.forEach((e=>{"requestPayment"===e.jsapi_name&&e.wording&&(n=!0,r=e.wording)})),e({time:t,isRistWarning:n,wording:r})}))})),r=(+new Date-(e||0))/1e3/60;t&&r>30&&(yield new Promise(((e,t)=>{(0,F._showModal)({content:n,confirmText:"继续支付",cancelText:"取消",success(n){n.confirm?((0,B.Xs)(+new Date),e()):t(new Error("cancel"))}})})))}));return function(){return e.apply(this,arguments)}}(),X=(0,O.Vl)(u.IN.bind(null,"requestPayment")),ee=(0,O.Vl)(P.JM),te=function(){var e=x()((function*(e={}){const{respData:t}=yield ee({apiName:"webapi_openproductcheckticket",reqData:S()({},e)});return JSON.parse(t.data)}));return function(){return e.apply(this,arguments)}}(),ne=(e,t)=>new Promise(((n,r)=>setTimeout((()=>r(new Error(e))),t))),re=({ticket:e,checkTicketStatus:t})=>{const n=_.Z.appLaunchInfo||{},r=q(),o=[n.sessionid||n.sessionId||"",r.scene,r.scene_note,r.prescene,r.prescene_note,t||0,e||""].join(",");Reporter.reportKeyValue({key:"RequestPaymentCheckTicket",value:o})},oe=function(){var e=x()((function*(e){yield K();const t=(0,k.Zv)();e.passCookies&&"string"==typeof e.passCookies?e.cookie=t?e.passCookies+";; "+t:e.passCookies:t?e.cookie=t:delete e.cookie,delete e.passCookies,e.cookie;const n=(0,W.I)(),r=yield X(S()(S()({adUxInfo:n},e),{},{grantMessageQuota:!0}));return(0,P.JM)({apiName:"webapi_reportpayrecord",reqData:{prepay_id:e.package.replace("prepay_id=","")}}),(0,M.L)("reportPaymentFormId",{packageStr:e.package}),(0,L.Hk)(),r}));return function(t){return e.apply(this,arguments)}}(),ie={NONE:0,SUCCESS:1,FAILED:2},ae=function(){var e=x()((function*({extUserUin:e,addOrderStatus:t,requestPaymentStatus:n,requestPaymentErrmsg:r,prepayId:o,outOrderId:i}){const a=(0,R.mw)(),s=_.Z.appLaunchInfo||{},{respData:c}=yield ee({apiName:"webapi_openproductreportorder",reqData:{ext_info:S()(S()({ext_useruin:e,ext_appid:_.Z.host&&_.Z.host.appId,session_id:s.sessionid||s.sessionId||""},q()),{},{add_order_status:t,request_payment_status:n,request_payment_errmsg:r,model:a.model,brand:a.brand,version:a.version,system:a.system,platform:a.platform,sdk_version:a.SDKVersion}),prepay_id:o,order_info:{out_order_id:i}}});return JSON.parse(c.data)}));return function(t){return e.apply(this,arguments)}}(),se=["orderInfo","extUserUin"],ce=(0,O.Vl)(P.JM),le=0,de=1,ue=2,pe=3,he=4,fe=0,ge=1,_e=2,me=function(){var e=x()((function*({extUserUin:e,prepayId:t,orderInfo:n}={}){const r=_.Z.appLaunchInfo||{},{respData:o}=yield ce({apiName:"webapi_openproductaddorder",reqData:{ext_info:S()({ext_useruin:e,ext_appid:_.Z.host&&_.Z.host.appId,session_id:r.sessionid||r.sessionId||""},q()),prepay_id:t,order_info:n}});return JSON.parse(o.data)}));return function(){return e.apply(this,arguments)}}(),ye=(0,O.NX)("requestOrderPayment",function(){var e=x()((function*(e={}){const t=(0,D.x7)(e,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""});if(t)throw new Error(`parameter error: ${t}`);const{orderInfo:n={},extUserUin:r}=e,o=I()(e,se),i=(e.package||"").replace("prepay_id=",""),a=Y().timeout,s=(e.orderInfo||{}).out_order_id;let c,l,d,u=le,p=fe;try{try{const{errcode:e,errmsg:t,cookie:o}=yield Promise.race([me({extUserUin:r,prepayId:i,orderInfo:n}),(h="timeout",f=a,new Promise(((e,t)=>setTimeout((()=>t(new Error(h))),f))))]);if(u=0===e?de:he,l=t,c=e,0===e&&void 0!==o){const e=[];(0,k.jl)(o||"",!1,e);const t=(0,k.zv)({cookies:e});t&&wxNativeConsole.error("[set openleague_cookie]",t)}}catch(e){u=e&&"timeout"===e.message?pe:ue}if(u===he)throw new O.SW(l||"addOrder failed",{addOrderErrCode:c});try{const e=(0,k.tc)({key:"prepay_id",value:i,busid:"mmbiz_wxa_related_order"});o.passCookies&&"string"==typeof o.passCookies?o.passCookies=e+";;"+o.passCookies:o.passCookies=e,yield oe(o),p=ge}catch(e){throw d=e.message||"unknown",p=_e,e}}finally{ae({extUserUin:r,addOrderStatus:u,requestPaymentStatus:p,requestPaymentErrmsg:d,prepayId:i,outOrderId:s})}var h,f}));return function(){return e.apply(this,arguments)}}()),ve=e=>{(0,u.IN)("requestVirtualPayment",e)},Ae=e=>{(0,u.IN)("handleWCPayOverseaWalletBuffer",e)},be=(e={})=>{(0,u.IN)("openSelectPayment",e)},we=(e={})=>{(0,u.IN)("requestFacetoFacePayment",e)},Ce=e=>{(0,u.IN)("setCurrentPaySpeech",e)},Ie=e=>{(0,u.IN)("openWCPayCardList",e)},Ee=e=>{(0,u.IN)("requestH5Transaction",e)},Se=e=>{(0,u.IN)("requestPaymentToBank",e)},Te=e=>{(0,u.IN)("verifyPaymentPassword",e)},xe=(e={})=>{(0,u.r3)("requestQueryCashier",e,{timeStamp:0,nonceStr:"",package:"",signType:"",paySign:""})&&(0,u.IN)("requestQueryCashier",e)},ke=e=>{(0,u.IN)("openWCPayOverseaPaymentReceive",e)},Pe=e=>{(0,u.IN)("requestJointPayment",e)},De=(e={})=>{(0,u.IN)("requestPersonalPay",e)};var Oe=r(8047),Ne=r(3935);const Re=(e={})=>{(0,u.IN)("checkIsSupportSoterAuthentication",e,{})},Me=(e={})=>{if(!(0,u.r3)("startSoterAuthentication",e,{challenge:""}))return;const t=e.success;(0,u.IN)("startSoterAuthentication",Object.assign({},e,{success(n){0!==n.errCode?"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api startSoterAuthentication fail callback function")(n):"function"==typeof t&&__errorTracer__.surroundThirdByTryCatch(t,"at api startSoterAuthentication success callback function")(n)}}),{beforeSuccess(e){"number"==typeof e.errCode&&0!==e.errCode&&(e.errMsg="startSoterAuthentication:fail")}})},Le=(e={})=>{(0,u.r3)("checkIsSoterEnrolledInDevice",e,{checkAuthMode:""})&&(0,u.IN)("checkIsSoterEnrolledInDevice",e,{})},Be=(e={})=>{(0,u.IN)("openGoldenRedPacketDetail",e,{})},Fe=(e={})=>{(0,u.IN)("sendGoldenRedPacket",e,{})};var We=r(5014),je=r(7343);const Ue=(e={})=>{if((0,We.J)("sendBizRedPacketForOpen")){const t=(0,je.rN)().scene;if(1047!==t&&1124!==t&&1011!==t&&1025!==t){const n=`sendBizRedPacket:fail scene ${t} not support.`;return e.fail&&e.fail({errMsg:n}),void(e.complete&&e.complete({errMsg:n}))}}(0,u.IN)("sendBizRedPacket",e,{})},Ve=(e={})=>{const{url:t}=e;if(!(0,u.r3)("showRedPackage",e,{url:""}))return;if(0!==t.indexOf("https://support.weixin.qq.com/cgi-bin/mmsupport-bin/showredpacket"))return void(0,u.YG)("showRedPackage",e,"url is invalid");if(!(0,We.J)("showRedPackage"))return void(0,u.YG)("showRedPackage",e,"no permission");const n=Object.assign({},e,{url:t,isNativeStyle:!0});(0,u.IN)("private_openUrl",n,{beforeAll(e){e.errMsg=e.errMsg.replace("private_openUrl","showRedPackage")}})},Ge=(e={})=>{(0,u.IN)("checkIsSupportFacialRecognition",e,{})};var $e=r(5260);const He=e=>JSON.stringify({name:e.name,id_card_number:e.idCardNumber,mobile:e.mobile,outer_verify_id:e.outerVerifyId,user_id_key:e.userIdKey}),Ze=(e={})=>{const t=He(e);(0,u.IN)("startFacialRecognitionVerify",(0,$e.f0)(e,{requestVerifyPreInfo:t}),{})},Qe=(e={})=>{const t=He(e);(0,u.IN)("startCustomFacialRecognitionVerify",(0,$e.f0)(e,{requestVerifyPreInfo:t}),{})},Ye=(e={})=>{const t=He(e);(0,u.IN)("startFacialRecognitionVerifyAndUploadVideo",(0,$e.f0)(e,{requestVerifyPreInfo:t}),{})},ze=(e={})=>{const t=He(e);(0,u.IN)("startCustomFacialRecognitionVerifyAndUploadVideo",(0,$e.f0)(e,{requestVerifyPreInfo:t}),{})},qe=(e={})=>{f.wZ&&(0,g.Cb)(_.Z.clientVersion,"7.0.18")>=0?(0,u.IN)("checkTrafficCardConditions",e):(0,u.YG)("checkTrafficCardConditions",e,"not yet supported")},Je=(e={})=>{f.wZ&&(0,g.Cb)(_.Z.clientVersion,"7.0.18")>=0?(0,u.IN)("queryTrafficCardInfo",e):(0,u.YG)("queryTrafficCardInfo",e,"not yet supported")},Ke=(e={})=>{f.wZ&&(0,g.Cb)(_.Z.clientVersion,"7.0.18")>=0?(0,u.IN)("issueTrafficCard",e):(0,u.YG)("issueTrafficCard",e,"not yet supported")},Xe=(e={})=>{f.wZ&&(0,g.Cb)(_.Z.clientVersion,"7.0.18")>=0?(0,u.IN)("rechargeTrafficCard",e):(0,u.YG)("rechargeTrafficCard",e,"not yet supported")},et=(e={})=>{f.wZ&&(0,g.Cb)(_.Z.clientVersion,"7.0.18")>=0?(0,u.IN)("setDefaultTrafficCard",e):(0,u.YG)("setDefaultTrafficCard",e,"not yet supported")};var tt=r(56);const nt=(e={})=>{if(!(0,u.r3)("addFileToFavorites",e,{filePath:""}))return;const t=(0,tt.A)(e.filePath);(0,u.IN)("addFileToFavorites",S()(S()({},e),{},{filePath:t}))},rt=(e={})=>{if(!(0,u.r3)("addVideoToFavorites",e,{videoPath:""}))return;const t=(0,tt.A)(e.videoPath),n=(0,tt.A)(e.thumbPath);(0,u.IN)("addVideoToFavorites",S()(S()({},e),{},{videoPath:t,thumbPath:n}))},ot=(e={})=>{(0,u.IN)("openChannelsCreateContact",e)};let it;const at=e=>{(0,u.IN)("login",(0,$e.f0)(e,{requestInQueue:!1}))},st=e=>{it&&clearTimeout(it),(0,u.IN)("refreshSession",e,{beforeSuccess:e=>{it=setTimeout((()=>{(0,u.IN)("refreshSession")}),1e3*e.expireIn),delete e.err_code,delete e.expireIn},beforeAll:e=>{e.errMsg=e.errMsg.replace("refreshSession","checkSession")}})},ct=()=>{(0,u.IN)("logout",{})};var lt=r(7725);const dt=(e={})=>{const t=n&&n.version&&n.version.version||"",r=!0===(0,g.KU)("getUserInfo")||"unknown"===(0,g.KU)("getUserInfo");(0,u.gM)((0,$e.f0)({},e,{isImportant:!0,data:{api_name:"webapi_getuserinfo",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:r,data:{lang:e.lang||"en",version:t}}}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateWXData","getUserInfo"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:e=>{f.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})};var ut=r(1130),pt=r(3685);const ht=(e={})=>{(0,ut.Z)("confirmAvatarInfo","webapi_confirmuseravatarinfo",{},{},(e=>e),(e=>{try{e.userInfo=JSON.parse(e.rawData),Object.keys(e.userInfo).forEach((t=>{delete e[t]}))}catch(e){}}))(e)};let ft=null;const gt=(e={})=>{if(!(0,u.r3)("getUserProfile",e,{desc:""}))return;const t=e.desc.replace(/[^\x00-\xff]/g,"##").length;if(t>30||t<2)return void(0,u.YG)("getUserProfile",e,"desc length does not meet the requirements");const n=_.Z.accountInfo.nickname,r=_.Z.accountInfo.icon||"https://res.wx.qq.com/op_res/yytAZD8UVkSQiY3p1COF23jOcEEUXzIgkoz1dEMh7AaDptVrldnHP_Vw24igHeMwpbwo-RRtTJ-_9hk9BBDqHQ",o=Date.now();((e={})=>{(0,ut.Z)("getUserAvatarInfo","webapi_getuseravatarpopupinfo",{},{})(e)})({success(t){const i=Date.now();console.log("[user-profile] getUserAvatarInfo",t,i-o);const a="number"==typeof e.showType?e.showType:t.show_type,s=t.avatar_info.is_ban_modify_avatar,c=t.avatar_info.default_headimg_url,l=t.avatar_info.default_headimg_fileid,d=t.avatar_info.default_avatar_id,p=(t.avatar_info.avatar_list||[]).map((e=>({id:e.id,avatar:e.avatarurl,nickname:e.nickname,desc:e.desc||""})));let h=t.avatar_info.avatar_limit;if(0===a)return void((e={})=>{if(!(0,u.r3)("getUserProfile",e,{desc:""}))return;const t=e.desc.replace(/[^\x00-\xff]/g,"##").length;if(t>30||t<2)return void(0,u.YG)("getUserProfile",e,"desc length does not meet the requirements");const n=!0===(0,g.KU)("getUserProfile")||"unknown"===(0,g.KU)("getUserProfile");(0,u.gM)((0,$e.f0)({},e,{isImportant:!0,data:{api_name:"webapi_getuserprofile",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",desc:e.desc}}}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateWXData","getUserProfile"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:e=>{f.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})})(e);if(1===a){h+=1;const e={id:-100,avatar:c,nickname:"微信用户",desc:"临时头像昵称"};p.splice(1,0,e)}const _=JSON.stringify({appName:n,appIcon:r,infoList:p,showType:a,selected:d,limit:h,isBanModifyAvatar:s}),m=(0,pt.vJ)((e=>{[pt.ML.BottomBackButton,pt.ML.NavigationBackInterceptionType,pt.ML.NavigateBackCall].includes(e.type)&&ft&&ft.handleCancel()}));__sclEngine__.initScl((t=>{ft=t.mainRoot.append("user-profile",{input:_}),ft.addListener("confirm",(t=>{(0,pt.J_)(m),ht({avatar_id:t.detail.selected,opt:1,lang:e.lang||"en",success(t){(0,u.FE)({name:"getUserProfile",args:e,res:t})},fail(){(0,u.YG)("getUserProfile",e,"confirmAvatarInfo fail")},complete(e){console.log("[user-profile] confirmAvatarInfo: ",e)}}),ft=null})),ft.addListener("cancel",(()=>{(0,pt.J_)(m),(0,u.YG)("getUserProfile",e,"cancel"),ht({avatar_id:-100,opt:2,lang:e.lang||"en",complete(e){console.log("[user-profile] confirmAvatarInfo: ",e)}}),ft=null})),ft.addListener("create",(()=>{((e={})=>{(0,u.IN)("createVestUser",e,{beforeSuccess(e){e.userInfo&&(e.userInfo.avatar=e.userInfo.headImg,e.userInfo.desc=e.userInfo.desc||"",delete e.userInfo.headImg)}})})({sessionId:Math.floor(Date.now()/1e3),defaultAvatarUrl:c,defaultAvatarFileId:l,complete(e){e.userInfo&&(p.push(e.userInfo),console.log("[user-profile] createVestUser: ",e,p),ft.setData({infoList:p})),ft.setData({hide:!1})}})}))}))},fail(){(0,u.YG)("getUserProfile",e,"getUserAvatarInfo fail")}})},_t=e=>{(0,u.IN)("openAddress",e,{beforeSuccess(e){(0,$e.dK)(e,"addressPostalCode","postalCode"),(0,$e.dK)(e,"proviceFirstStageName","provinceName"),(0,$e.dK)(e,"addressCitySecondStageName","cityName"),(0,$e.dK)(e,"addressCountiesThirdStageName","countyName"),(0,$e.dK)(e,"addressDetailInfo","detailInfo")},beforeAll(e){e.errMsg=e.errMsg.replace("openAddress","chooseAddress"),delete e.err_msg}})};var mt=r(8824),yt=r(9848);const vt=(e={})=>{if((0,yt.S)())return(0,u.YG)("openSetting",e,"not supported"),void(0,F.showToast)({icon:"none",title:"暂不支持当前功能"});((e={})=>{(0,u.IN)("openSetting",e,{beforeSuccess(e){const t=e.authSetting||[];if(e.authSetting=t.reduce(((e,t)=>(e[t.scope]=1===t.state,e)),{}),e.subscriptionsSetting){const t={};if(t.mainSwitch=e.subscriptionsSetting.mainSwitch,e.subscriptionsSetting.templatesInfo){const n=e.subscriptionsSetting.templatesInfo;t.itemSettings=n.reduce(((e,t)=>{const n={2116:"SYS_MSG_TYPE_INTERACTIVE",4668:"SYS_MSG_TYPE_RANK"}[t.tid],r={"-1":"ban",0:"reject",1:"accept"};return n?e[n]=r[t.status]:(e[t.templateId]=r[t.status],t.acceptAudio&&(e[t.templateId]="acceptWithAudio")),e}),{})}e.subscriptionsSetting=t}}})})(e)},At=(e={})=>{(0,u.IN)("openWeRunSetting",{checkSupport:!0,success(){(0,u.gM)((0,$e.f0)({data:{api_name:"webapi_getwerunstep_history"}},e),{beforeAll(e){e.errMsg=e.errMsg.replace("operateWXData","getWeRunData")},beforeSuccess(e){f.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}})},fail(t){t.errMsg=t.errMsg.replace("openWeRunSetting","getWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api getWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api getWeRunData fail callback function")(t)}})},bt=(e={})=>{"number"!=typeof e.step||e.step<0?(0,u.YG)("uploadWeRunData",e,"parameter error: step should be number and greater or equal to 0"):(0,u.IN)("openWeRunSetting",{checkSupport:!1,success(){(0,u.IN)("uploadWeRunData",e,{})},fail(t){t.errMsg=t.errMsg.replace("openWeRunSetting","uploadWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api uploadWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api uploadWeRunData fail callback function")(t)}})},wt=(e={})=>{"number"!=typeof e.step||e.step<0?(0,u.YG)("addWeRunData",e,"parameter error: step should be number and greater or equal to 0"):(0,u.IN)("openWeRunSetting",{checkSupport:!1,success(){(0,u.IN)("addWeRunData",e,{})},fail(t){t.errMsg=t.errMsg.replace("openWeRunSetting","addWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api addWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api addWeRunData fail callback function")(t)}})};var Ct=r(4055);const It=(0,ut.Z)("getOpenDeviceId","webapi_getdeviceinfo");var Et=r(1529);const St=(e=[])=>e.map((e=>({sport_type_id:e.typeId,sport_time:e.time||0,sport_distance:e.distance||0,sport_number:e.number||0,sport_calorie:e.calorie||0,sport_url:e.url||""}))),Tt=(0,g.Fr)(((e={})=>{(0,ut.Z)("checkWxaSportRecord","webapi_checkwxasportrecord",{},{},(e=>({sport_record_list:St(e.recordList)})),(e=>{delete e.rawData}))(e)})),xt=(0,g.Fr)(((e={})=>{(0,ut.Z)("reportWxaSportRecord","webapi_reportwxasportrecord",{},{},(e=>({sport_record_list:St(e.recordList)})),(e=>{delete e.rawData}))(e)})),kt=({show:e=0,statusCancel:t=0,statusConfirm:n=0,clickMoreCount:r=0})=>{const o=[e,t,n,r];Reporter.reportKeyValue({key:"ShareToWeRun",value:o.join(","),immediately:!0})};let Pt=null;(0,Et.SM)((e=>{const t=e.theme;Pt&&Pt.setData({theme:t})}));const Dt=(e={})=>{(0,u.r3)("shareToWeRun",e,{recordList:[]})&&((0,We.J)("shareDataToWeRun")?Tt({recordList:e.recordList}).then((t=>{const n=((e,t=[])=>{const n={};return t.forEach((t=>{e.hasOwnProperty(t)&&(n[t]=e[t])})),n})(t.wording||{},["title","sport_name","note_title","note_detail"]);n.theme=(0,R.xI)().theme||"light";((e="",t)=>{const n=(0,pt.vJ)((e=>{[pt.ML.BottomBackButton,pt.ML.NavigationBackInterceptionType,pt.ML.NavigateBackCall].includes(e.type)&&Pt&&(Pt.handleCancel(),Pt=null)}));__sclEngine__.initScl((r=>{const o=r.mainRoot.append("werun",{input:e});Pt=o,o.addListener("confirm",(e=>{const r=e.detail.clickMoreCount;kt({show:1,statusCancel:0,statusConfirm:1,clickMoreCount:r}),(0,pt.J_)(n),xt({recordList:t.recordList}).then((()=>(0,u.FE)({name:"shareToWeRun",args:t}))).catch((e=>(0,u.YG)("shareToWeRun",t,e.errMsg,+e.err_code)))})),o.addListener("cancel",(e=>{const r=e.detail.clickMoreCount;kt({show:1,statusCancel:1,statusConfirm:0,clickMoreCount:r}),(0,u.YG)("shareToWeRun",t,"cancel"),(0,pt.J_)(n)}))}))})(JSON.stringify(n),e)}),(t=>{kt({show:0,statusCancel:0,statusConfirm:0,clickMoreCount:0}),(0,u.YG)("shareToWeRun",e,t.errMsg,+t.err_code)})):(0,u.YG)("shareToWeRun",e,"has no permission",-100004))},Ot=parseInt(Date.now()/1e3,10),Nt=(e={})=>{(0,u.IN)("chooseInvoice",Object.assign({},e,{timeStamp:Ot,nonceStr:Ot+""}),{beforeSuccess(){}})},Rt=(e={})=>{(0,u.IN)("faceVerifyForPay",e)},Mt=(e={})=>{const t=Object.assign({},e,{scene:151});delete t.profileReportInfo,(0,u.IN)("openBizProfile",t,{beforeAll:e=>{e.errMsg=e.errMsg.replace("openBizProfile","openOfficialAccountProfile")}})},Lt=(e={})=>{(0,u.IN)("openWeAppProfile",e)},Bt=(e={})=>{const t=Object.assign({},e);delete t.profileReportInfo,(0,u.IN)("openUserProfile",t)};var Ft=r(812);const Wt=(e={})=>{(0,Ft.IN)("preventApplePayUI",e)},jt=(0,ut.Z)("getWxSecData","getWxSecData",{},{},((e={})=>e),(e=>e));var Ut=r(9187);const Vt=(0,P.Ce)(!1,"requestSubscribeMessage");let Gt=!1;(0,Et.HM)((()=>{Gt=!1})),(0,Et.JG)((()=>{Gt=!1}));const $t=e=>{if(Gt)(0,u.YG)("requestSubscribeMessage",e,"last call has not ended");else{if(!(0,u.r3)("requestSubscribeMessage",e,{tmplIds:[]}))return;Gt=!0,f.cj&&_.Z.clientVersion<385877504||f.wZ&&_.Z.clientVersion<654313216||f.gm?Zt(e):Ht(e)}},Ht=e=>{Reporter.reportIDKey({key:"requestSubscribeMessageWithNative",force:!0});const t=Object.assign({},e);t.tmplIds=Array.from(new Set(e.tmplIds)),(0,u.IN)("requestSubscribeMessage",t,{beforeAll(){Gt=!1},beforeSuccess(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeSuccess",force:!0}),Gt=!1},beforeFail(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeFail",force:!0})}})},Zt=e=>{const t=e.tmplIds||[];let n,r;if(0===t.length?(n="TmplIds can't be empty",r=10001):t.length>=4?(n="Templates count out of max bounds",r=20003):""===t[0]?(n="No template data return, verify the template id exist",r=20001):"string"!=typeof t[0]&&(n="Invalid template id",r=10004),n)return Gt=!1,void(0,u.YG)("requestSubscribeMessage",e,n,r);const o=t.map((e=>({TemplateId:e})));Vt({apiName:"webapi_subscribe_msg",reqData:{AppId:_.Z.accountInfo.appId,ActionType:1,ItemList:o},success(n){const r=(JSON.parse(n.respData.data).InfoList||[])[0]||{};if(r.TemplateId!==t[0])return Gt=!1,void(0,u.FE)({name:"requestSubscribeMessage",args:e,res:{[t[0]]:"ban"}});let o="订阅一次以下消息通知";3===r.TemplateType&&(o="长期订阅以下消息通知"),(0,F.showModal)({title:o,content:r.Title||"",confirmText:"允许",cancelText:"取消",success(t){Gt=!1,Qt(e,t)},fail(t){Gt=!1,(0,u.YG)("requestSubscribeMessage",e,t.errMsg)}})},fail(t){const n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();(0,u.YG)("requestSubscribeMessage",e,n,+t.err_code),Gt=!1}})},Qt=(e,t)=>{const n=e.tmplIds[0];Vt({apiName:"webapi_subscribe_msg",reqData:{AppId:_.Z.accountInfo.appId,ActionType:2,UIData:{OpType:t.confirm?1:2,UIItem:[{TemplateId:n,ChooseStatus:1}]}},success(){const r={};r[`${n}`]=""+(t.confirm?"accept":"reject"),(0,u.FE)({name:"requestSubscribeMessage",args:e,res:r}),(0,Ut.It)({name:"requestSubscribeMessage",data:{templateCount:1,templateType:0,operationType:t.confirm?1:2}})},fail(t){const n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();(0,u.YG)("requestSubscribeMessage",e,n,+t.err_code)}})},Yt=(e={})=>{(0,u.IN)("openWeAppSearch",e)},zt=(e={})=>{(0,u.IN)("openWeAppHistoryList",e)},qt=(e={})=>{(0,u.IN)("openWeAppStarList",e)},Jt=(e={})=>{if((0,We.J)("batchGetContactDirectly"))(0,u.IN)("batchGetContact",e,{beforeAll(e){e.errMsg=e.errMsg.replace("batchGetContact","batchGetContactDirectly")}});else{const t="batchGetContactDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},Kt=(e={})=>{if((0,We.J)("preloadMiniProgramEnvDirectly"))(0,u.IN)("preloadMiniProgramEnv",e,{beforeAll(e){e.errMsg=e.errMsg.replace("preloadMiniProgramEnv","preloadMiniProgramEnvDirectly")}});else{const t="preloadMiniProgramEnvDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},Xt=(e={})=>{if((0,We.J)("predownloadMiniProgramPackageDirectly"))(0,u.IN)("predownloadMiniProgramPackage",e,{beforeAll(e){e.errMsg=e.errMsg.replace("predownloadMiniProgramPackage","predownloadMiniProgramPackageDirectly")}});else{const t="predownloadMiniProgramPackageDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},en=(e={})=>{(0,Ft.r3)("requestBizSplitBillPayment",e,{orderNo:""})&&(0,Ft.IN)("requestBizSplitBillPayment",e)};var tn=r(2999);let nn="";_.Z.onReady((()=>{nn=_.Z.appLaunchInfo.chatroomUsername,wxNativeConsole.info("chatroomUsername",nn)})),(0,tn.n)("onAppEnterForeground",((e={})=>{nn=e.chatroomUsername,wxNativeConsole.info("onAppEnterForeground chatroomUsername",nn)}));const rn="getGroupEnterInfo",on=(0,P.Ce)(!1,rn),an=(e={})=>{nn?(0,We.J)("getGroupToolbarInfo")?on({apiName:"webapi_swapopengid",reqData:{chatroom_name:nn},success(t){wxNativeConsole.info("webapi_swapopengid res",t);const n=t.respData,r={};r.iv=n.iv,r.encryptedData=n.encryptedData,n.cloud_id&&(r.cloudID=n.cloud_id),(0,u.FE)({name:rn,args:e,res:r})},fail:e.fail}):(0,u.YG)(rn,e,"no permission"):(0,u.YG)(rn,e,"invalid scene")};var sn=r(7371);const cn=[1011,1025,1047,1124],ln=(e={})=>{const{scene:t}=(0,je.rN)();cn.indexOf(t)<0&&console.log(`enter scene must be one of [1011, 1025, 1047, 1124], current is ${t}`);const n=Object.assign({},e);if("string"==typeof n.url){const e=(0,sn.D5)("publishWeChatState",n,!1);if(!e)return;n.url=e,n.url=(0,$e.yP)(n.url)}(0,u.IN)("publishWeChatState",n)},dn=(e={})=>{(0,u.IN)("openCustomerServiceChat",Object.assign({},e,{scene:+_.Z.appLaunchInfo.scene}),{beforeSuccess(){try{(0,Ut.It)({name:"openCustomerServiceChat",data:{extInfo:"object"==typeof e.extInfo?JSON.stringify(e.extInfo):e.extInfo,corpId:e.corpId}})}catch(e){}}})}},7646:(e,t,n)=>{"use strict";n.d(t,{Lo:()=>a,JM:()=>s,Ce:()=>i,KS:()=>c});var r=n(9045),o=n(2582);const i=(e=!0,t,n=!1,i=!1)=>(a={})=>{if(!(0,r.r3)("operateWXData",a,{apiName:""}))return;if("operateWXData"===t){}const s={api_name:a.apiName,data:a.reqData||{},operate_directly:e};n&&(s.plugin_appid=a.pluginId);const c={data:s,isImportant:!0===i,requestInQueue:!a.hasOwnProperty("requestInQueue")||Boolean(a.requestInQueue)};(0,r.gM)(Object.assign({},c,a),{beforeAll(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess(e){o.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})},a=i(!0),s=i(!1),c=i(!0,void 0,!0)},8824:(e,t,r)=>{"use strict";r.d(t,{$:()=>l,O:()=>c});var o=r(1130);const i={SYS_MSG_TYPE_INTERACTIVE:1,SYS_MSG_TYPE_RANK:2},a=function(e){const t={};for(const n in e)t[e[n]]=n;return t}(i);const s=wxNativeConsole.createLogger("getSetting");function c(e){if(s.info("webapi_getuserallappauth res",e),e.auth_item?e.authSetting=e.auth_item.reduce(((e,t)=>(e[t.scope]=1===t.state,e)),{}):e.authSetting={},void 0!==e.sub_msg_switch){const t={mainSwitch:1===e.sub_msg_switch};if(e.sub_msg_list){s.info("sub_msg_list",e.sub_msg_list);const n=e.sub_msg_list.reduce(((e,t)=>{let n=t.template_id;var r;return t.sys_msg_type>0&&(r=t.sys_msg_type,n=a[r]),t.ban_flag?e[n]="ban":(e[n]=t.setting_status?"accept":"reject",t.is_accept_with_audio&&(e[n]="acceptWithAudio")),e}),{});s.info("itemSettings",n),t.itemSettings=n,Object.assign(t,n)}e.subscriptionsSetting=t}return delete e.rawData,delete e.signature,delete e.auth_item,delete e.sub_msg_list,delete e.sub_msg_switch,e}const l=(0,o.Z)("getSetting","webapi_getuserallappauth",{},{},(function(e){const t=n&&n.version&&n.version.version||"",r=Object.assign({with_sub_msg:"boolean"==typeof e.withSubscriptions&&e.withSubscriptions,version:t},e);return delete r.withSubscriptions,r}),c)},9078:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(5260);const o={},i={lastShareTicket:null,get:e=>o[e],set(e,t){const n=(0,r.M8)();return o[n]={shareKey:e,shareName:t},n}}},8047:(e,t,n)=>{"use strict";n.d(t,{l7:()=>r.Z,bz:()=>N,dv:()=>c,rf:()=>u,mt:()=>A,Hw:()=>T,ri:()=>x,R0:()=>Q,KQ:()=>d,hx:()=>g,QY:()=>l});var r=n(9078),o=n(9045),a=n(5260),s=n(2582);const c=(e={})=>{const t=r.Z.get(e.shareTicket);t?(0,o.gM)((0,a.f0)({data:{api_name:"webapi_getshareinfo",data:{share_key:t.shareKey,share_name:t.shareName}}},e),{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateWXData","getShareInfo")},beforeSuccess:e=>{s.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{const t=JSON.parse(e.data.data);t.roomTopic&&(e.roomTopic=t.roomTopic)}catch(e){}e.iv=e.data.iv,e.encryptedData=e.data.encryptedData,e.data.cloud_id&&(e.cloudID=e.data.cloud_id),delete e.data}}):(0,o.YG)("getShareInfo",e,"invalid shareTicket")},l={showShareAppMessageMenu:!1,showShareTimelineMenu:!1,withShareTicket:!1,isPrivateMessage:!1},d=(e={})=>{const t=Array.isArray(e.menus)?e.menus:["shareAppMessage"],n=[];if(t.includes("shareAppMessage")){l.showShareAppMessageMenu=!0;const t=new Promise(((t,n)=>{!0===e.withShareTicket?(l.withShareTicket=!0,(0,o.IN)("showShareMenuWithShareTicket",{withShareTicket:!0,success:t,fail:n,beforeAll(e){e.errMsg=e.errMsg.replace("showShareMenuWithShareTicket","showShareMenu")},beforeFail(e){e.errMsg+=", with arg withShareTicket: true"}})):(l.withShareTicket=!1,(0,o.IN)("showShareMenu",{success:t,fail:n}))}));n.push(t)}if(t.includes("shareAppMessage")&&t.includes("shareTimeline")){l.showShareTimelineMenu=!0;const e=new Promise(((e,t)=>{(0,o.IN)("showShareTimelineMenu",{success:e,fail:t})}));n.push(e)}Promise.all(n).then((()=>{(0,o.FE)({name:"showShareMenu",args:e})})).catch((t=>{const n=t.errMsg.replace("showShareMenu:fail","").replace("showShareTimelineMenu:fail","");(0,o.YG)("showShareMenu",e,n,t.errCode)}))},u=(e={})=>{const t=Array.isArray(e.menus)?e.menus:["shareAppMessage","shareTimeline"],n=[];function r(){return new Promise(((e,t)=>{(0,o.IN)("hideShareTimelineMenu",{success:e,fail:t})}))}if(t.includes("shareTimeline")&&(l.showShareTimelineMenu=!1,n.push(r())),t.includes("shareAppMessage")){l.showShareAppMessageMenu=!1,0===n.length&&n.push(r());const e=new Promise(((e,t)=>{(0,o.IN)("hideShareMenu",{success:e,fail:t})}));n.push(e)}Promise.all(n).then((()=>{(0,o.FE)({name:"hideShareMenu",args:e})})).catch((t=>{const n=t.errMsg.replace("hideShareMenu:fail","").replace("hideShareTimelineMenu:fail","");(0,o.YG)("hideShareMenu",e,n,t.errCode)}))};function p(e){return new Promise(((t,n)=>{"boolean"==typeof e.withShareTicket?(0,o.IN)("updateShareMenuShareTicket",{withShareTicket:e.withShareTicket,success:t,fail:n},{beforeAll(e){e.errMsg=e.errMsg.replace("updateShareMenuShareTicket","updateShareMenu")},beforeFail(e){e.errMsg+=', with arg "withShareTicket": true'}}):t({errMsg:"updateShareMenu:ok"})}))}function h(e){return new Promise(((t,n)=>{if("boolean"==typeof e.isUpdatableMessage||"boolean"==typeof e.isPrivateMessage){const r=JSON.stringify({activity_id:e.activityId,template_id:e.templateInfo&&e.templateInfo.templateId,parameter_list:e.templateInfo&&e.templateInfo.parameterList});(0,o.IN)("updateShareMenuUpdatable",{isPrivateMessage:e.isPrivateMessage,updatable:e.isUpdatableMessage,templateId:r,success:t,fail:n}),!0===e.isPrivateMessage?l.isPrivateMessage=!0:!1===e.isPrivateMessage&&(l.isPrivateMessage=!1)}else t({errMsg:"updateShareMenu:ok"})}))}function f(e){return new Promise(((t,n)=>{"string"==typeof e.toDoActivityId?((0,o.IN)("updateShareMenuUpdatable",{updatable:!0,success:e=>{},fail:e=>{wxNativeConsole.error("updateShareMenuToDo updateShareMenuUpdatable fail",e)}}),(0,o.IN)("updateShareMenuShareTicket",{withShareTicket:!0,success:e=>{},fail:e=>{wxNativeConsole.error("updateShareMenuToDo updateShareMenuShareTicket fail",e)}}),(0,o.IN)("updateShareMenuToDo",{toDoActivityId:e.toDoActivityId,isToDoMessage:"boolean"!=typeof e.isToDoMessage||e.isToDoMessage,success:e=>{wxNativeConsole.info("updateShareMenuToDo success",e),t(e)},fail:e=>{wxNativeConsole.error("updateShareMenuToDo fail",e),n(e)}})):t({errMsg:"updateShareMenu:ok"})}))}const g=(e={})=>{wxNativeConsole.info("wx.updateShareMenu",e),Promise.all([p(e),h(e),f(e)]).then((t=>{"function"==typeof e.success&&__errorTracer__.surroundThirdByTryCatch(e.success,"at api updateShareMenu success callback function")(t[0]),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t[0])})).catch((t=>{void 0===t.errMsg&&(t.errMsg="updateShareMenu:fail "+t.message),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api updateShareMenu fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t)}))};var _=n(665),m=n(2851),y=n(3126);const v=e=>{if("string"!=typeof e)return e;let t=e.split("?")[0];const n=e.split("?")[1];return t+=".html",void 0!==n?`${t}?${n}`:t},A=(e={})=>{if(!(0,o.r3)("shareAppMessageForFakeNative",e,{title:"",bizType:0}))return;const t=Object.assign({useDefaultSnapshot:!0,disableForward:!1},e);if(e.path&&"string"==typeof e.path)t.path=v(i.convertComponentAliasToRoute(e.path));else{const e=Object.keys(m.Z.query).map((e=>`${e}=${m.Z.query[e]}`)).join("&"),n=`${m.Z.lastRoute}?${e}`;t.path=v(i.convertComponentAliasToRoute(n))}e.imageUrl&&"string"==typeof e.imageUrl&&(/^(http|https|wxfile):\/\//.test(e.imageUrl)?t.imageUrl=e.imageUrl:t.imageUrl=(0,y.A)(e.imageUrl,!1));"wx60422b707e49ff2e"!==_.Z.accountInfo.appId&&(delete t.bizSourceName,delete t.bizSourceIconUrl),(0,o.IN)("shareAppMessageForFakeNative",t)};var b=n(1503),w=n.n(b),C=n(3356),I=n.n(C),E=n(2783),S=n(56);const T=(0,E.NX)("shareFileMessage",function(){var e=I()((function*(e={}){(0,o.zy)(e,{filePath:""});const t=(0,S.A)(e.filePath);try{yield(0,o.bb)("shareFileMessage",w()(w()({},e),{},{filePath:t}))}catch(e){if("cancel"!==e.message)throw e}}));return function(){return e.apply(this,arguments)}}()),x=(0,E.NX)("shareVideoMessage",function(){var e=I()((function*(e={}){(0,o.zy)(e,{videoPath:""});const t=(0,S.A)(e.videoPath),n=(0,S.A)(e.thumbPath);try{yield(0,o.bb)("shareVideoMessage",w()(w()({},e),{},{videoPath:t,thumbPath:n}))}catch(e){if("cancel"!==e.message)throw e}}));return function(){return e.apply(this,arguments)}}());var k=n(7646),P=n(5014);const D="authPrivateMessage",O=(0,k.Ce)(!1,D);function N(e={}){const t=r.Z.get(e.shareTicket);t&&t.shareKey?(0,P.J)("authShareRelationship")?O({apiName:"webapi_authmgr",reqData:{share_key:t.shareKey},success(t){wxNativeConsole.info("webapi_authmgr res",t);const n=JSON.parse(t.respData.data),r={};r.iv=n.iv,r.encryptedData=n.encrypt_activity_id,r.valid=1===n.res,(0,o.FE)({name:D,args:e,res:r})},fail:e.fail,complete:e.complete}):(0,o.YG)(D,e,"no permission"):(0,o.YG)(D,e,"invalid shareTicket")}var R=n(812),M=n(9978),L=n(1633),B=n(3685);const F=(0,E.Vl)(M.FI),W=1,j=3,U=4,V=5,G=6,$=7,H=({action:e})=>{const t=_.Z.appLaunchInfo||{},n=[_.Z.appType+1e3,e,t.sessionid||t.sessionId||""].join(",");Reporter.reportKeyValue({key:"ShareImageMenu",value:n})},Z=function(){var e=I()((function*(e){const t=(yield new Promise((e=>__sclEngine__.initScl((t=>e(t.mainRoot)))))).append("share-image",{imgPath:e.imgPath,height:e.height,width:e.width,actions:JSON.stringify([{action:"shareToFriend",text:"发送给朋友",imageSrc:"https://res.wx.qq.com/op_res/9uyxJUMf5aP9owCkoJvfePWjtv7dvB_UbB9Mh2QOnIvTu_Q6ulI-q0micEIFzNyo-XSO9_sHyTzCgIXG4zFhDg",imageDarkSrc:"https://res.wx.qq.com/op_res/9uyxJUMf5aP9owCkoJvfePWjtv7dvB_UbB9Mh2QOnIvTu_Q6ulI-q0micEIFzNyo-XSO9_sHyTzCgIXG4zFhDg"},{action:"addToFavorites",text:"收藏",imageSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng",imageDarkSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng"},{action:"saveToAlbum",text:"保存到相册",imageSrc:"https://res.wx.qq.com/op_res/BgIIq_VgA_b30mPKYKb4CmnQemMBJMujsqfe6REw4MSf3i_ql8KU-FywDJLSRGRnxQOWW5VphGdXW0Yr2-Z-0g",imageDarkSrc:"https://res.wx.qq.com/op_res/G0_niEOxSlL24rHxfWQRrYEhHlR548A2lETw0Se_jFtJt3ZpHTIaPZPeINUGM3--cFoO5adG9q8jjhNfUzKUxA"}])}),n=(0,B.vJ)((e=>{[B.ML.BottomBackButton,B.ML.NavigationBackInterceptionType,B.ML.NavigateBackCall].includes(e.type)&&t.handleClose()})),{action:r}=yield new Promise((e=>{["shareToFriend","addToFavorites","saveToAlbum","cancel"].forEach((n=>{t.addListener(n,(()=>e({action:n})))}))}));return(0,B.J_)(n),{action:r}}));return function(t){return e.apply(this,arguments)}}(),Q=(0,E.NX)("showShareImageMenu",function(){var e=I()((function*(e={}){if(!(0,P.J)("showShareImageMenu"))throw new Error("no permission");(0,R.zy)(e,{path:""});let t=e.path;if(/^\w+:\/\//.test(t)){if(!/^wxfile:\/\//.test(t)&&!/^http:\/\/tmp\//.test(t))throw new Error("invalid path")}else t="/"+(0,y.A)(t,!1);const{height:n,width:r}=yield F({src:t}),{action:o}=yield Z({imgPath:t,height:n,width:r});switch(H({action:W}),o){case"shareToFriend":try{yield(0,R.bb)("shareImageMessage",{imagePath:t}),H({action:j})}catch(e){if("cancel"===e.message)return void H({action:U});throw e}return;case"addToFavorites":return H({action:V}),void(yield(0,R.bb)("addImageToFavorites",{url:t}));case"saveToAlbum":return H({action:G}),yield(0,R.bb)("saveImageToPhotosAlbum",{filePath:t}),void(s.cj&&(0,L.showToast)({icon:"success",title:"已保存"}));default:case"cancel":throw H({action:$}),new Error("cancel")}}));return function(){return e.apply(this,arguments)}}())},56:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(3126);const o=e=>{if(e&&"string"==typeof e)if(/^\w+:\/\//.test(e)){if(!/^wxfile:\/\//.test(e)&&!/^http:\/\/tmp\//.test(e))throw new Error("invalid path")}else if(e)return(0,r.A)(e,!1);return e}},6175:(e,t,n)=>{"use strict";n.d(t,{l:()=>a});var r=n(9045),o=n(8329);const i=(0,n(1130).Z)("getFriendCloudStorage","webapi_getfrienduserstorage",{},{},(({keyList:e=[]})=>({key:e})),(e=>(e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((e=>(e.KVDataList=e.kv_list||[],delete e.kv_list,e))),delete e.user_item,delete e.rawData,e))),a=(e={})=>{const t=(0,o.M)(e.keyList);t?(0,r.YG)("getFriendCloudStorage",e,t):i(e)}},6329:(e,t,n)=>{"use strict";n.d(t,{q:()=>l});var r=n(9078),o=n(9045),i=n(8329),a=n(1130);const s=wxNativeConsole.createLogger("getGroupCloudStorage"),c=(0,a.Z)("getGroupCloudStorage","webapi_getgroupuserstorage",{},{},(({keyList:e=[],shareTicket:t})=>{const n=r.Z.get(t),{shareKey:o,shareName:i}=n;return s.info("shareTicket=",t),s.info("shareInfo=",JSON.stringify(n)),{key:e,share_key:o,share_name:i}}),(e=>(e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((e=>(e.KVDataList=e.kv_list||[],delete e.kv_list,e))),delete e.user_item,delete e.rawData,e))),l=e=>{const t=(0,i.M)(e.keyList);t?(0,o.YG)("getGroupCloudStorage",e,t):setTimeout((()=>{e.shareTicket?r.Z.get(e.shareTicket)?(s.info("use args.shareTicket",e.shareTicket),c(e)):(0,o.YG)("getGroupCloudStorage",e,"参数 shareTicket 不正确"):r.Z.lastShareTicket&&r.Z.get(r.Z.lastShareTicket)?(s.info("use lastShareTicket",r.Z.lastShareTicket),c(Object.assign({shareTicket:r.Z.lastShareTicket},e))):(0,o.YG)("getGroupCloudStorage",e,"当前小程序不是从群分享卡片打开")}),1e3/60)}},9798:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});var r=n(8329),o=n(1130),i=n(9045);const a=(0,o.Z)("getUserCloudStorage","webapi_getselfuserstorage",{},{},(({keyList:e=[]})=>({key:e})),(e=>(e.KVDataList=e.kv_list||[],delete e.kv_list,delete e.rawData,e))),s=e=>{const t=(0,r.M)(e.keyList);t?(0,i.YG)("getUserCloudStorage",e,t):a(e)}},8329:(e,t,n)=>{"use strict";function r(e){if(!Array.isArray(e)||e.some((e=>"string"!=typeof e||0===e.length)))return"invalid keyList"}n.d(t,{M:()=>r})},972:(e,t,n)=>{"use strict";n.d(t,{_o:()=>i,Ft:()=>a,LN:()=>s,Ks:()=>c});var r=n(665),o=n(2582);const i=(()=>{let e=!1;return(o.cj||o.wZ&&r.Z.clientVersion>=637865520)&&(e=!0),()=>e})(),a=(()=>{let e=!1;return o.cj&&r.Z.clientVersion>=385877248&&(e=!0),()=>e})(),s=(()=>{let e=!1;return o.cj&&r.Z.clientVersion>=385878314&&(e=!0),()=>e})(),c=(()=>{let e=!1;return o.cj&&r.Z.clientVersion>=402655232&&r.Z.clientVersion<=402655487&&(e=!0),()=>e})()},8010:(e,t,n)=>{"use strict";n.d(t,{oM:()=>a,dx:()=>s});var r=n(9045),o=n(5014),i=n(2582);n(7646);__safeway__.apiSign.makeApiSign;const a=(e={})=>{delete e.operateDirectly,(0,r.IN)("launchApplicationForNative",e,{})},s=(e={})=>{(0,o.J)("plugin_launchApplicationDirectly_operateDirectly")||delete e.operateDirectly,i.cj?(0,o.J)("launchApplicationDirectly")?(0,r.IN)("launchApplication",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace("launchApplication","launchApplicationDirectly")}}):setTimeout((()=>(0,r.YG)("launchApplicationDirectly",e,"no permission"))):(0,r.IN)("launchApplicationDirectly",e,{})}},2276:(e,t,n)=>{"use strict";n.d(t,{Hk:()=>V,ie:()=>G,Fl:()=>F,iy:()=>S,Be:()=>$,t4:()=>H});var r=n(1503),o=n.n(r),i=n(3356),a=n.n(i),s=n(812),c=n(5260),l=n(8827),d=n(7142),u=n(9973),p=n(665),h=n(7646),f=n(1095),g=n(2582),_=n(5014),m=n(4212),y=n(2288),v=n(3685),A=n(2783),b=n(607),w=n(6998),C=n(9848),I=n(1633);const E=(0,A.Vl)(h.JM),S=(e={},t={},n={})=>{JSON.stringify(e),JSON.stringify(t),JSON.stringify(n),m.s.log(`[_doNavigateToMiniProgram], args=${JSON.stringify(e)}, privateArgs=${JSON.stringify(t)}, ext=${JSON.stringify(n)}`);const r=Object.assign({},e);delete r.sourcetype,delete r.preScene,delete r.preSceneNote,delete r.mode,7!==p.Z.appType&&(delete r.scene,delete r.sceneNote);const o=(0,l.KL)();o?(r.privateExtraData=r.privateExtraData||{},r.privateExtraData.cookies=o):r.privateExtraData&&delete r.privateExtraData.cookies;const i=Object.assign({},r,t);if("string"==typeof i.path&&i.path.trim().length>0?i.path=(0,c.Pp)(i.path).trim():i.path=void 0,i.halfPage=Object.assign({},i.halfPage||{}),i.halfPage.hideCapsuleMenu=!1,i.halfPage.capsuleMenuType="singleClose",JSON.stringify(i),m.s.log(`[_doNavigateToMiniProgram], finalArgs=${JSON.stringify(i)}`),i.needTransferToWeChat&&(0,f.er)())return(0,s.FE)({name:"navigateToMiniProgram",args:i}),delete i.success,delete i.fail,delete i.complete,void(0,s.IN)("sdk_navigateToMiniProgram",i,n);(0,s.IN)("navigateToMiniProgram",i,n)},T=(e,t,n,r)=>{const o=[e,t,p.Z.appType+1e3,n+1e3,r].join(",");Reporter.reportKeyValue({key:"NavigateToMiniProgramAlert",value:o})},x=(()=>{let e;return()=>(e||(e=new Promise((e=>{__sclEngine__.initScl((t=>e(t.mainRoot)))}))),e)})(),k=function(){var e=a()((function*(e){const t=yield x();let n;switch(D){case P.HALF_SCREEN_DIALOG_WITHOUT_LOGO:n=t.append("navigateToMp",{title:e.oldWording,logo:"",name:"",type:P.HALF_SCREEN_DIALOG});break;case P.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:n=t.append("navigateToMp",{title:e.title,logo:e.icon_url,name:e.desc,type:P.HALF_SCREEN_DIALOG}),e.expensiveWording&&e.expensiveWording.then((({used_friend_cnt_sub_desc:e})=>{n.setData({desc:e||""})}));break;case P.HALF_SCREEN_DIALOG_WITH_SCORE:n=t.append("navigateToMp",{title:e.title,logo:e.icon_url,name:e.desc,type:P.HALF_SCREEN_DIALOG}),e.expensiveWording&&e.expensiveWording.then((({score_sub_desc:e})=>{n.setData({desc:e||""})}));break;default:n=t.append("navigateToMp",{title:e.title,logo:e.icon_url,name:e.desc,type:D})}const r=(0,v.vJ)((e=>{[v.ML.BottomBackButton,v.ML.NavigationBackInterceptionType,v.ML.NavigateBackCall].includes(e.type)&&n.handleCancel()})),o=yield new Promise((e=>{n.addListener("confirm",(()=>{e({confirm:!0})})),n.addListener("cancel",(()=>{e({confirm:!1})}))}));return(0,v.J_)(r),o}));return function(t){return e.apply(this,arguments)}}(),P={DEFAULT:0,DIALOG:1,HALF_SCREEN_DIALOG:2,HALF_SCREEN_DIALOG_WITHOUT_LOGO:3,HALF_SCREEN_DIALOG_WITH_SCORE:4,HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:5};let D=P.DEFAULT;p.Z.onReady((()=>{(0,y.b)({experimentId:"clicfg_navigation_use_scl_alert_v5",experimentType:"Expt",success:e=>{JSON.stringify(e),e&&void 0!==e.testConfig&&(D=Number(e.testConfig)||P.DEFAULT,Object.values(P).includes(D)||(D=P.DEFAULT))}})}));const O=function(){var e=a()((function*(e,t,n,r,i,a){if(1===t)return;const c=D!==P.DEFAULT&&void 0!==__sclEngine__&&(g.gm||g.cj||g.wZ)&&i,l=c?D:P.DEFAULT;let d;try{d=c?yield k(o()(o()({},i),{},{oldWording:e,expensiveWording:a})):yield(0,s.bb)("showModal",{title:e,content:"",confirmText:"允许",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:"#7D90A9",cancelColor:"#000000",cancelColorDark:"#AAAAAA"})}catch(e){throw T(3,n,r,l),e}const{confirm:u}=d;if(!u)throw T(2,n,r,l),new Error("cancel");T(1,n,r,l)}));return function(t,n,r,o,i,a){return e.apply(this,arguments)}}(),N=1,R=2,M=function(){var e=a()((function*(e){const t=[];switch(D){case P.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:t.push(R);break;case P.HALF_SCREEN_DIALOG_WITH_SCORE:t.push(N)}if(!t.length)return{};e.appId,m.s.log(`[_getNavigateWxAppDescInfo] appId=${e.appId}`);try{const{respData:n}=yield E({apiName:"webapi_getnavigatewxaappdesc",reqData:{target_appid:e.appId,desc_type_list:t}});n.data;return JSON.parse(n.data)}catch(e){return e.message,{}}}));return function(t){return e.apply(this,arguments)}}(),L=(()=>{let e=[];return p.Z.onReady((()=>{Array.isArray(p.Z.navigateToMiniProgramAppIdList)&&(e=p.Z.navigateToMiniProgramAppIdList,(0,_.J)("openWxappLimit5")&&e.splice(5))})),(t,n)=>new Promise(((r,o)=>{const i=(0,f.KU)("navigateToMiniProgramConfig");if(!1===i||g.gm)if(n)r();else if(e.indexOf(t)>-1)r({sourcetype:4});else{o({errMsg:`appId "${t}" is not in navigateToMiniProgramAppIdList`})}else!0===i?r():"unknown"===i&&r({sourcetype:4})}))})(),B=function(){var e=a()((function*({appId:e,path:t,shortLink:n}){let r;m.s.log(`[_checkBeforeNavigateToMiniProgram] appId=${e} path=${t} shortLink=${n}`);const i=new Promise((e=>{r=e}));e&&!n&&r(e);const a=i.then((e=>M({appId:e})));let c;D!==P.DEFAULT&&x();try{c=yield(l={appId:e,shortLink:n},new Promise(((e,t)=>{l.appId,l.shortLink,m.s.log(`[_getNavigateWxAppInfo] appId=${l.appId} shortLink=${l.shortLink}`);const n=0,r=1;(0,h.JM)({apiName:"webapi_getnavigatewxaappinfo",reqData:{req_type:l.shortLink?r:n,target_appid:l.appId,target_short_link:l.shortLink},success(t){const n=JSON.parse(t.respData.data),r=n.action_code,o=n.skip_local_check,i=Boolean(n.runtime_sdk_whitelist),a=n.target_short_link_info;e({actionCode:r,skipLocalCheck:o,reason:n.reason,wording:n.wording,appType:n.apptype,newWording:n.new_wording,popupInfo:n.pop_up_info,needTransferToWeChat:i,shortLinkInfo:a}),t.respData.data},fail(e){t(e),e.errMsg}})})))}catch(n){return n.errMsg||n.message,{appId:e,path:t}}var l;const{actionCode:d,skipLocalCheck:u,reason:f,wording:g,appType:_,newWording:y,popupInfo:v,needTransferToWeChat:A,shortLinkInfo:E}=c;let S=1===d;if(E&&(e=E.wxa_appid,t=(E.wxa_path||"").replace(/\.html(\?|$)/,"$1"),r(e)),m.s.log(`[_getNavigateWxAppInfo][resolve] appId=${e} path=${t} actionCode=${d}, skipLocalCheck=${u}, reason=${f}, wording=${g}, appType=${_}, needTransferToWeChat=${A}`),1!==d&&2!==d)throw v?(Reporter.reportKeyValue({key:"WeAppNavBan",value:[p.Z.appType+1e3,p.Z.appLaunchInfo.scene,33,3302,0,1,f,"跳转跳出",(0,w._getCurrentNetworkType)()].join(",")}),(0,s.IN)("showModal",{showCancel:!0,content:v.desc,confirmText:v.confirm_wording,cancelText:v.cancel_wording,success({confirm:e}){const t=v.confirm_url;e&&(0,b.n)({url:t}),Reporter.reportKeyValue({key:"WeAppNavBan",value:[p.Z.appType+1e3,p.Z.appLaunchInfo.scene,33,3302,e?1:2,2,f,"跳转跳出",(0,w._getCurrentNetworkType)()].join(",")})}})):g&&(0,s.IN)("showModal",{content:g,showCancel:!1}),new Error(f);if(1!==d&&(0,C.S)()){if(7!==_)throw(0,I.showToast)({icon:"none",title:"暂不支持当前功能"}),new Error("not supported");S=!0}try{const n=yield L(e,u);return S||(yield O(g,d,e,_,y,a)),o()(o()({},n),{},{appId:e,path:t,needTransferToWeChat:A})}catch(e){const t=e.errMsg||e.message;throw new Error(t)}}));return function(t){return e.apply(this,arguments)}}(),F=(0,A.NX)("_checkBeforeNavigateToMiniProgram",B),W=(e={})=>{e.appId||e.shortLink?e.appId&&!(0,s.r3)("navigateToMiniProgram",e,{appId:""})||e.shortLink&&!(0,s.r3)("navigateToMiniProgram",e,{shortLink:""})||(e.appId,e.path,e.shortLink,m.s.log(`[_navigateToMiniProgram] appId=${e.appId} path=${e.path} shortLink=${e.shortLink}`),B({appId:e.appId,path:e.path,shortLink:e.shortLink}).then(((t={})=>{JSON.stringify(t),m.s.log(`[_checkBeforeNavigateToMiniProgram][resolve], res=${JSON.stringify(t)}`),S(e,{appId:t.appId,path:t.path,sourcetype:t.sourcetype,needTransferToWeChat:t.needTransferToWeChat})}),(t=>{const n=t.errMsg||t.message;m.s.log(`[_checkBeforeNavigateToMiniProgram][reject], errMsg=${n}`),(0,s.YG)("navigateToMiniProgram",e,n),"cancel"!==n&&Reporter.errorReport({key:"appServiceSDKScriptError",error:t,extend:"at checking before navigate to miniprogram"})}))):(0,s.YG)("navigateToMiniProgram",e,"should have appId or shortLink")};let j=!1,U=0;(0,s.Ld)("tapAnyWhere",(function(e){U=e.timeStamp,j=!0})),(0,d.J)((()=>{U=0,j=!1}));const V=()=>{U=Date.now(),j=!0},G=e=>{V(),"function"==typeof e.success&&e.success()},$=e=>{const t=p.Z.accountInfo.appId;0===p.Z.appType&&"wx308bd2aeb83d3345"!==t&&"wxc98889eca359c1e5"!==t?j?(W(e),(0,u.Y)({name:"navigateToMiniProgram",scene:0,strategy:0,timeDiffToLastTap:0===U?-2:Date.now()-U})):(0,s.YG)("navigateToMiniProgram",e,"can only be invoked by user TAP gesture."):W(e)},H=e=>{(0,_.J)("navigateToMiniProgramDirectly")?S(e,e,{beforeAll(e){e.errMsg=e.errMsg.replace("navigateToMiniProgram","navigateToMiniProgramDirectly")}}):(0,s.YG)("navigateToMiniProgramDirectly",e,"no permission")}},6597:(e,t,n)=>{"use strict";n.d(t,{JB:()=>p,vS:()=>o,Yo:()=>i.Y,n8:()=>i.n,Bx:()=>c});var r=n(9045);const o=(e={})=>{(0,r.IN)("openDeliveryList",e,{})};var i=n(607);let a=!1;const s=[],c=(e={})=>{if(!e.webviewId||!e.data){console.error("invalid arguments");const t={errMsg:"sendDataToH5: arguments data or webviewId cannot be null"};return"function"==typeof e.fail&&e.fail(t),void("function"==typeof e.complete&&e.complete(t))}"object"==typeof e.data&&(e.data=JSON.stringify(e.data)),a?s.push(e):(a=!0,(0,r.IN)("sendDataToH5",e,{afterAll(){if(a=!1,s.length){const e=s.shift();c(e)}}}))};let l=!1;const d=[];function u(e){for(let t=0;t<d.length;t++)d[t](e)}const p=e=>{if("function"!=typeof e)return;d.push(((t={})=>{t.webviewId&&t.data?("string"==typeof t.data&&(t.data=JSON.parse(t.data)),e(t)):console.error("invalid arguments in onH5Data callback")})),l||((0,r.jQ)("onH5Data",u),l=!0)}},607:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s,n:()=>c});var r=n(9045),o=n(5260),i=n(2851);const a=e=>(t={})=>{if(!0!==i.Z.openUrlLock)if(t.url=t.url||"",(0,o.mQ)(t.url))i.Z.openUrlLock=!0,(0,r.IN)(e,t,{afterAll(){i.Z.openUrlLock=!1}});else{console.error("invalid url",t.url);const n={errMsg:`${e}: invalid url "${t.url}"`};"function"==typeof t.fail&&t.fail(n),"function"==typeof t.complete&&t.complete(n)}},s=a("openUrl"),c=a("private_openUrl")},5184:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});const r=e=>{Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},5500:(e,t,n)=>{"use strict";n.d(t,{P:()=>p});var r=n(6998),o=n(9045),a=n(1095),s=n(9066);let c=0,l=[];const d=()=>{const e=JSON.stringify({business:"mmbizwxaservicequality",dataArray:l,appType:Reporter.getAppType()},null,2);(0,o.IN)("reportRealtimeAction",{actionData:e}),l=[]},u=e=>{let t="";return Object.keys(e).forEach(((n,r)=>{try{const o=`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`;0!==r&&(t+="&"),t+=o}catch(e){}})),t},p=(e,t,n,o,p,h,f,g=0,_=0,m={})=>{let y="",v="";if((0,a.aI)()&&(v=u(s.Z.query)),void 0!==i){const e=i.getCurrentPages();if(e&&e.length>0){const t=e[e.length-1];t&&(y=t.route,v=t.__displayReporter&&t.__displayReporter.showOptions&&t.__displayReporter.showOptions.query)}}const A=[e,t,n,o,p,Reporter.getAppType(),h,g,(0,r._getCurrentNetworkType)(),y,v,_,u(m)].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"NetworkAPI",value:A}),Reporter.reportIDKey({key:`${e}_${1===n?"ok":"fail"}`}),l.push([e,t,n,h||"",o,p,(0,r._getCurrentNetworkType)(),f?"1":"0",Reporter.getAppType(),g].map((e=>{let t;try{t=encodeURIComponent(e)}catch(n){t=e}return t})).join(",")),Date.now()-c>=6e4&&(c=Date.now(),setTimeout(d,6e4))}},9973:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(2851);const o=({name:e,scene:t,strategy:n,timeDiffToLastTap:o=0})=>{let a;void 0!==i&&(a=i.getCurrentPagesByDomain("").find((e=>e.__wxWebviewId__===r.Z.currentWebviewId))||{});const s=[e,t,Reporter.getAppType(),a?a.route:"",n||0,o].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"RecycledAPI",value:s})}},926:e=>{var t="undefined"!=typeof __Function__?__Function__:globalThis.Function;e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./entry.js")}({"./entry.js":function(e,t,n){(function(t){const r=n("./node_modules/protocol-buffers/index.js"),o=n("./node_modules/protocol-buffers-encodings/index.js");var i=n("./node_modules/varint/index.js");const a=function(e,t){const n=new Uint8Array(8);let r=t,o=0,i=0,s=0;do{i|=(127&e[r])<<s,s+=7,s>=8&&(n[o]=255&i,i>>=8,s-=8,o++)}while(e[r++]>=128);return n[o]=255&i,a.bytes=r-t,n};function s(e,t){let n=0;for(let r=t;r<e.length;r++){if(!(128&e[r]))return n+1;n++}return n}var c,l,d=function(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}};o.uint64=(c=function(e,t){var n=s(e,t);if(n>=7&&NativeGlobal.decodeUint64Array){e=a(e,t);var r=NativeGlobal.decodeUint64Array(e);c.bytes=n}else r=i.decode(e,t),c.bytes=i.decode.bytes;return r},l=i.encode,d(0,l,c,(function(e){return e<0?10:i.encodingLength(e)}))),o.int64=function(){var e=function(n,r){if(((c=i.decode(n,r))>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&NativeGlobal.decodeUint64Array){var o=s(n,r);let t=10==o;t&&(n[9+r]=127&n[9+r]),n=a(n,r);var c=NativeGlobal.decodeUint64Array(n);return e.bytes=o,t?"-"+c:c}if(c>=Math.pow(2,63)){for(var l=9;255===n[r+l-1];)l--;var d=new t(l=l||9);n.copy(d,0,r,r+l),d[l-1]=127&d[l-1],c=-1*i.decode(d,0),e.bytes=10}else e.bytes=i.decode.bytes;return c},n=function(e,t,r){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw new Error("number too large, not supported yet");if(e<0){var o=r+9;for(i.encode(-1*e,t,r),t[r+=i.encode.bytes-1]=128|t[r];r<o-1;)t[++r]=255;t[o]=1,n.bytes=10}else i.encode(e,t,r),n.bytes=i.encode.bytes;return t};return d(0,n,e,(function(e){return e<0?10:i.encodingLength(e)}))}(),e.exports=function(e){const n=r(e);return Object.keys(n).forEach((function(e){var r;n[e].decode&&(n[e].decode=(r=n[e].decode,function e(n){"[object Uint8Array]"==Object.prototype.toString.call(n)&&n.__proto__!=t.__proto__&&(n.__proto__=t.prototype);const o=r.apply(this,arguments);return e.bytes=r.bytes,o}))})),n},e.exports.fixBuffer=function(e){return"[object Uint8Array]"==Object.prototype.toString.call(e)&&e.__proto__!=t.__proto__&&(e.__proto__=t.prototype),e}}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/base64-js/index.js":function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),a=r[0],s=r[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),d=0,u=s>0?a-4:a;for(n=0;n<u;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===s&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,c[d++]=255&t);1===s&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,c=n-o;s<c;s+=a)i.push(d(e,s,s+a>c?c:s+a));1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":function(e,t,n){"use strict";(function(e){var r=n("./node_modules/base64-js/index.js"),o=n("./node_modules/ieee754/index.js"),i=n("./node_modules/isarray/index.js");function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n),o=(e=s(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):p(e,t);if("Buffer"===t.type&&i(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(d(t),e=s(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,o){var i,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var d=-1;for(i=n;i<s;i++)if(l(e,i)===l(t,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===c)return d*a}else-1!==d&&(i-=i-d),d=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var u=!0,p=0;p<c;p++)if(l(e,i+p)!==l(t,p)){u=!1;break}if(u)return i}return-1}function v(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function A(e,t,n,r){return G(U(t,e.length-n),e,n,r)}function b(e,t,n,r){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return b(e,t,n,r)}function C(e,t,n,r){return G(V(t),e,n,r)}function I(e,t,n,r){return G(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,c,l=e[o],d=null,u=l>239?4:l>223?3:l>191?2:1;if(o+u<=n)switch(u){case 1:l<128&&(d=l);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&l)<<6|63&i)>127&&(d=c);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(c=(15&l)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(d=c)}null===d?(d=65533,u=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),o+=u}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return d(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return u(null,e)},c.allocUnsafeSlow=function(e){return u(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),l=this.slice(r,o),d=e.slice(t,n),u=0;u<s;++u)if(l[u]!==d[u]){i=l[u],a=d[u];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function x(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=j(e[i]);return o}function D(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function L(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,i){return i||L(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return i||L(e,0,n,8),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;n=new c(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},c.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=c.isBuffer(e)?e:U(new c(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/generate-function/index.js":function(e,n,r){for(var o=r("./node_modules/util/util.js"),i=r("./node_modules/is-property/is-property.js"),a=/[\{\[]/,s=/[\}\]]/,c=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"],l={},d=0;d<c.length;d++)l[c[d]]=!0;var u=function(e){return i(e)&&!l.hasOwnProperty(e)},p={s:function(e){return""+e},d:function(e){return""+Number(e)},o:function(e){return JSON.stringify(e)}},h=function(){var e=[],n=0,r={},c=function(t){for(var r="";r.length<2*n;)r+="  ";e.push(r+t)},l=function(e){return s.test(e.trim()[0])&&a.test(e[e.length-1])?(n--,c(e),void n++):a.test(e[e.length-1])?(c(e),void n++):s.test(e.trim()[0])?(n--,void c(e)):void c(e)},d=function(e){if(!e)return d;if(1===arguments.length&&e.indexOf("\n")>-1)for(var t=e.trim().split("\n"),n=0;n<t.length;n++)l(t[n].trim());else l(o.format.apply(o,arguments));return d};return d.scope={},d.formats=p,d.sym=function(e){return e&&u(e)||(e="tmp"),r[e]||(r[e]=0),e+(r[e]++||"")},d.property=function(e,t){return 1===arguments.length&&(t=e,e=""),i(t+="")?e?e+"."+t:t:e?e+"["+JSON.stringify(t)+"]":JSON.stringify(t)},d.toString=function(){return e.join("\n")},d.toFunction=function(n){n||(n={});var r="return ("+e.join("\n")+")";Object.keys(d.scope).forEach((function(e){n[e]||(n[e]=d.scope[e])}));var o=Object.keys(n).map((function(e){return e})),i=o.map((function(e){return n[e]}));return t.apply(null,o.concat(r)).apply(null,i)},arguments.length&&d.apply(null,arguments),d};h.formats=p,e.exports=h},"./node_modules/generate-object-property/index.js":function(e,t,n){var r=n("./node_modules/is-property/is-property.js"),o=function(e,t){return r(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};o.valid=r,o.property=function(e){return r(e)?e:JSON.stringify(e)},e.exports=o},"./node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,l=c>>1,d=-7,u=n?o-1:0,p=n?-1:1,h=e[t+u];for(u+=p,i=h&(1<<-d)-1,h>>=-d,d+=s;d>0;i=256*i+e[t+u],u+=p,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=r;d>0;a=256*a+e[t+u],u+=p,d-=8);if(0===i)i=1-l;else{if(i===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=l}return(h?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,c,l=8*i-o-1,d=(1<<l)-1,u=d>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+u>=1?p/c:p*Math.pow(2,1-u))*c>=2&&(a++,c/=2),a+u>=d?(s=0,a=d):a+u>=1?(s=(t*c-1)*Math.pow(2,o),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&s,h+=f,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;e[n+h]=255&a,h+=f,a/=256,l-=8);e[n+h-f]|=128*g}},"./node_modules/is-property/is-property.js":function(e,t,n){"use strict";e.exports=function(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}},"./node_modules/isarray/index.js":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"./node_modules/os-browserify/browser.js":function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},"./node_modules/process/browser.js":function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,l=[],d=!1,u=-1;function p(){d&&c&&(d=!1,c.length?l=c.concat(l):u=-1,l.length&&h())}function h(){if(!d){var e=s(p);d=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||d||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"./node_modules/protocol-buffers-encodings/index.js":function(e,t,n){(function(e){var r=n("./node_modules/varint/index.js"),o=n("./node_modules/signed-varint/index.js");function i(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}}function a(t){return e.isBuffer(t)?t.length:e.byteLength(t)}t.make=i,t.name=function(e){for(var n=Object.keys(t),r=0;r<n.length;r++)if(t[n[r]]===e)return n[r];return null},t.skip=function(e,t,n){switch(e){case 0:return r.decode(t,n),n+r.decode.bytes;case 1:return n+8;case 2:var o=r.decode(t,n);return n+r.decode.bytes+o;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4}throw new Error("Unknown wire type: "+e)},t.bytes=i(2,(function t(n,o,i){var s=i,c=a(n);return r.encode(c,o,i),i+=r.encode.bytes,e.isBuffer(n)?n.copy(o,i):o.write(n,i,c),t.bytes=(i+=c)-s,o}),(function e(t,n){var o=n,i=r.decode(t,n);n+=r.decode.bytes;var a=t.slice(n,n+i);return n+=a.length,e.bytes=n-o,a}),(function(e){var t=a(e);return r.encodingLength(t)+t})),t.string=i(2,(function t(n,o,i){var a=i,s=e.byteLength(n);return r.encode(s,o,i,"utf-8"),i+=r.encode.bytes,o.write(n,i,s),t.bytes=(i+=s)-a,o}),(function e(t,n){var o=n,i=r.decode(t,n);n+=r.decode.bytes;var a=t.toString("utf-8",n,n+i);return e.bytes=(n+=i)-o,a}),(function(t){var n=e.byteLength(t);return r.encodingLength(n)+n})),t.bool=i(0,(function e(t,n,r){return n[r]=t?1:0,e.bytes=1,n}),(function e(t,n){var r=t[n]>0;return e.bytes=1,r}),(function(){return 1})),t.int32=i(0,(function e(t,n,o){return r.encode(t<0?t+4294967296:t,n,o),e.bytes=r.encode.bytes,n}),(function e(t,n){var o=r.decode(t,n);return e.bytes=r.decode.bytes,o>2147483647?o-4294967296:o}),(function(e){return r.encodingLength(e<0?e+4294967296:e)})),t.int64=i(0,(function e(t,n,o){if(t<0){var i=o+9;for(r.encode(-1*t,n,o),n[o+=r.encode.bytes-1]=128|n[o];o<i-1;)n[++o]=255;n[i]=1,e.bytes=10}else r.encode(t,n,o),e.bytes=r.encode.bytes;return n}),(function t(n,o){var i=r.decode(n,o);if(i>=Math.pow(2,63)){for(var a=9;255===n[o+a-1];)a--;a=a||9;var s=e.allocUnsafe(a);n.copy(s,0,o,o+a),s[a-1]=127&s[a-1],i=-1*r.decode(s,0),t.bytes=10}else t.bytes=r.decode.bytes;return i}),(function(e){return e<0?10:r.encodingLength(e)})),t.sint32=t.sint64=i(0,o.encode,o.decode,o.encodingLength),t.uint32=t.uint64=t.enum=t.varint=i(0,r.encode,r.decode,r.encodingLength),t.fixed64=t.sfixed64=i(1,(function e(t,n,r){return t.copy(n,r),e.bytes=8,n}),(function e(t,n){var r=t.slice(n,n+8);return e.bytes=8,r}),(function(){return 8})),t.double=i(1,(function e(t,n,r){return n.writeDoubleLE(t,r),e.bytes=8,n}),(function e(t,n){var r=t.readDoubleLE(n);return e.bytes=8,r}),(function(){return 8})),t.fixed32=i(5,(function e(t,n,r){return n.writeUInt32LE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readUInt32LE(n);return e.bytes=4,r}),(function(){return 4})),t.sfixed32=i(5,(function e(t,n,r){return n.writeInt32LE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readInt32LE(n);return e.bytes=4,r}),(function(){return 4})),t.float=i(5,(function e(t,n,r){return n.writeFloatLE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readFloatLE(n);return e.bytes=4,r}),(function(){return 4}))}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/protocol-buffers-schema/index.js":function(e,t,n){var r=n("./node_modules/protocol-buffers-schema/parse.js"),o=n("./node_modules/protocol-buffers-schema/stringify.js");e.exports=r,e.exports.parse=r,e.exports.stringify=o},"./node_modules/protocol-buffers-schema/parse.js":function(e,t,n){var r=n("./node_modules/protocol-buffers-schema/tokenize.js"),o=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],i=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var n=e.shift();if("("===n&&(n=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[n]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},a=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var n=e.shift();t.required="required"===n,t.repeated="repeated"===n,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=i(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},s=function(e){for(var t={enums:[],options:{},messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(a(e));break;case"enum":t.enums.push(f(e));break;case"message":t.messages.push(d(e));break;case"extensions":t.extensions=l(e);break;case"oneof":e.shift();var n=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var r=a(e);r.oneof=n,t.fields.push(r)}e.shift();break;case"extend":t.extends.push(c(e));break;case";":e.shift();break;case"reserved":for(e.shift();";"!==e[0];)e.shift();break;case"option":var o=g(e);if(void 0!==t.options[o.name])throw new Error("Duplicate option "+o.name);t.options[o.name]=o.value;break;default:e.unshift("optional"),t.fields.push(a(e))}return t},c=function(e){return{name:e[1],message:d(e)}},l=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var n=e.shift();if("max"===n&&(n=536870911),n=Number(n),isNaN(n))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:n}},d=function(e){e.shift();var t=1,n=[],r={name:e.shift(),options:{},enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),n=s(n),r.enums=n.enums,r.messages=n.messages,r.fields=n.fields,r.extends=n.extends,r.extensions=n.extensions,r.options=n.options,r;n.push(e.shift())}if(t)throw new Error("No closing tag for message")},u=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},p=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},h=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var n={value:null,options:{}};return n.value=Number(e.shift()),"["===e[0]&&(n.options=i(e)),e.shift(),{name:t,val:n}},f=function(e){e.shift();var t={},n={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),n;if("option"!==e[0]){var r=h(e);n.values[r.name]=r.val}else t=g(e),n.options[t.name]=t.value}throw new Error("No closing tag for enum")},g=function(e){for(var t=null,n=null,r=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:n};switch(e[0]){case"option":e.shift();var o="("===e[0];if(o&&e.shift(),t=e.shift(),o){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(n=r(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(n))throw new Error("Unexpected value for option optimize_for: "+n);"{"===n&&(n=_(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},_=function(e){for(var t=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},n={};e.length;){if("}"===e[0])return e.shift(),n;var r="("===e[0];r&&e.shift();var o=e.shift();if(r){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}var i=null;switch(e[0]){case":":if(void 0!==n[o])throw new Error("Duplicate option map key "+o);e.shift(),"{"===(i=t(e.shift()))&&(i=_(e)),n[o]=i,";"===e[0]&&e.shift();break;case"{":if(e.shift(),i=_(e),void 0===n[o]&&(n[o]=[]),!Array.isArray(n[o]))throw new Error("Duplicate option map key "+o);n[o].push(i);break;default:throw new Error("Unexpected token in option map: "+e[0])}}throw new Error("No closing tag for option map")},m=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},y=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var n=g(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value;break;case"rpc":t.methods.push(v(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},v=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var n=g(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value}throw new Error("No closing tag for rpc")};e.exports=function(e){for(var t=r(e.toString()),n=0;n<t.length;n++){var i;if(/^("|')([^'"]*)$/.test(t[n]))for(i=1===t[n].length?n+1:n;i<t.length;i++)if(/^[^'"\\]*(?:\\.[^'"\\]*)*("|')$/.test(t[i])){t=t.slice(0,n).concat(t.slice(n,i+1).join("")).concat(t.slice(i+1));break}}for(var a={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},s=!0;t.length;){switch(t[0]){case"package":a.package=u(t);break;case"syntax":if(!s)throw new Error("Protobuf syntax version should be first thing in file");a.syntax=p(t);break;case"message":a.messages.push(d(t));break;case"enum":a.enums.push(f(t));break;case"option":var l=g(t);if(a.options[l.name])throw new Error("Duplicate option "+l.name);a.options[l.name]=l.value;break;case"import":a.imports.push(m(t));break;case"extend":a.extends.push(c(t));break;case"service":a.services||(a.services=[]),a.services.push(y(t));break;default:throw new Error("Unexpected token: "+t[0])}s=!1}return a.extends.forEach((function(e){a.messages.forEach((function(t){t.name===e.name&&e.message.fields.forEach((function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)}))}))})),a.messages.forEach((function(e){e.fields.forEach((function(t){var n,r,i,s;if(t.options&&"true"===t.options.packed&&-1===o.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some((function(e){return e.name===t.type})))return}else{if((n=t.type.split(".")).length>2)throw new Error("what is this?");if(r=n[0],i=n[1],a.messages.some((function(e){if(e.name===r)return s=e,e})),s&&s.enums&&s.enums.some((function(e){return e.name===i})))return}throw new Error("Fields of type "+t.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}}))})),a}},"./node_modules/protocol-buffers-schema/stringify.js":function(e,t){var n=function(e,t){var n=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(n="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(n="");var r=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return r&&(r=" ["+r+"]"),t.push((n?n+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+r+";"),t},r=function(e,t){t.push("message "+e.name+" {"),e.options||(e.options={}),a(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){t.push(o(e,[]))})),e.messages||(e.messages=[]),e.messages.forEach((function(e){t.push(r(e,[]))}));var i={};return e.fields||(e.fields=[]),e.fields.forEach((function(e){e.oneof?(i[e.oneof]||(i[e.oneof]=[]),i[e.oneof].push(n(e,[]))):t.push(n(e,[]))})),Object.keys(i).forEach((function(e){i[e].unshift("oneof "+e+" {"),i[e].push("}"),t.push(i[e])})),t.push("}",""),t},o=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var n=a(e.options,[]);return n.length>1&&t.push(n.slice(0,-1)),Object.keys(e.values).map((function(n){var r=i(e.values[n]);t.push([n+" = "+r+";"])})),t.push("}",""),t},i=function(e,t){var n=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return n&&(n=" ["+n+"]"),e.value+n},a=function(e,t){var n=Object.keys(e);return n.forEach((function(n){var r=e[n];~n.indexOf(".")&&(n="("+n+")");var o=typeof r;"object"===o?(r=s(r,[])).length&&t.push("option "+n+" = {",r,"};"):("string"===o&&"optimize_for"!==n&&(r='"'+r+'"'),t.push("option "+n+" = "+r+";"))})),n.length>0&&t.push(""),t},s=function(e,t){return Object.keys(e).forEach((function(n){var r=e[n],o=typeof r;"object"===o?Array.isArray(r)?r.forEach((function(e){(e=s(e,[])).length&&t.push(n+" {",e,"}")})):(r=s(r,[])).length&&t.push(n+" {",r,"}"):("string"===o&&(r='"'+r+'"'),t.push(n+": "+r))})),t},c=function(e,t){var n="rpc "+e.name+"(";e.client_streaming&&(n+="stream "),n+=e.input_type+") returns (",e.server_streaming&&(n+="stream "),n+=e.output_type+")",e.options||(e.options={});var r=a(e.options,[]);return r.length>1?t.push(n+" {",r.slice(0,-1),"}"):t.push(n+";"),t},l=function(e){return function(t){return Array.isArray(t)?t.map(l(e+"  ")).join("\n"):e+t}};e.exports=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),a(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){o(e,t)})),e.messages||(e.messages=[]),e.messages.forEach((function(e){r(e,t)})),e.services&&e.services.forEach((function(e){!function(e,t){t.push("service "+e.name+" {"),e.options||(e.options={}),a(e.options,t),e.methods||(e.methods=[]),e.methods.forEach((function(e){t.push(c(e,[]))})),t.push("}","")}(e,t)})),t.map(l("")).join("\n")}},"./node_modules/protocol-buffers-schema/tokenize.js":function(e,t){e.exports=function(e){var t,n=function(e){return e.trim()};return e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(n).filter(Boolean).map((function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e})).map(n).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((t=!1,function(e){return"/*"===e?(t=!0,!1):"*/"===e?(t=!1,!1):!t}))}},"./node_modules/protocol-buffers/compile-to-js.js":function(e,t,n){var r=n("./node_modules/os-browserify/browser.js"),o={type:!0,message:!0,name:!0,buffer:!0,encode:!0,decode:!0,encodingLength:!0,dependencies:!0};function i(e){return"function"==typeof e.encode}e.exports=function(e){var t="";return t+="// This file is auto generated by the protocol-buffers compiler"+r.EOL,t+=r.EOL,t+="/* eslint-disable quotes */"+r.EOL,t+="/* eslint-disable indent */"+r.EOL,t+="/* eslint-disable no-redeclare */"+r.EOL,t+="/* eslint-disable camelcase */"+r.EOL,t+=r.EOL,t+="// Remember to `npm install --save protocol-buffers-encodings`"+r.EOL,t+="var encodings = require('protocol-buffers-encodings')"+r.EOL,t+="var varint = encodings.varint"+r.EOL,t+="var skip = encodings.skip"+r.EOL,t+=r.EOL,function e(n,s,c){var l=Object.keys(n).filter((function(e){return!o[e]&&i(n[e])}));Object.keys(n).filter((function(e){if(o[e])return false;return!i(n[e])})).forEach((function(e){t+=c+s+"."+e+" = "+function(e,t){const n=Object.keys(e);if(!n.every((function(t){return"number"==typeof e[t]&&/^[a-z][a-z0-9]+$/i.test(t)})))return JSON.stringify(e,null,2).replace(/\n/g,r.EOL)+r.EOL;var o="{"+r.EOL;return n.forEach((function(i,a){o+=t+"  "+i+": "+e[i]+(a<n.length-1?",":"")+r.EOL})),o+t+"}"+r.EOL}(n[e],c)+r.EOL})),l.forEach((function(e){t+=c+"var "+e+" = "+s+"."+e+" = {"+r.EOL,t+=c+"  buffer: true,"+r.EOL,t+=c+"  encodingLength: null,"+r.EOL,t+=c+"  encode: null,"+r.EOL,t+=c+"  decode: null"+r.EOL,t+=c+"}"+r.EOL,t+=r.EOL})),l.forEach((function(e){t+=c+"define"+e+"()"+r.EOL})),l.length&&(t+=r.EOL);l.forEach((function(o){t+=c+"function define"+o+" () {"+r.EOL,e(n[o],o,c+"  "),t+=c+"  "+o+".encodingLength = encodingLength"+r.EOL,t+=c+"  "+o+".encode = encode"+r.EOL,t+=c+"  "+o+".decode = decode"+r.EOL+r.EOL,t+=c+"  "+a(n[o].encodingLength,c+"  ")+r.EOL+r.EOL,t+=c+"  "+a(n[o].encode,c+"  ")+r.EOL+r.EOL,t+=c+"  "+a(n[o].decode,c+"  ")+r.EOL,t+=c+"}"+r.EOL+r.EOL}))}(e,"exports",""),t+=a(n("./node_modules/protocol-buffers/compile.js").defined,"")+r.EOL;function a(e,t){return e.toString().split("\n").map((function(e,n){return n?t+e:e.replace(/(function \w+)\(/,"$1 (")})).join("\n")}}},"./node_modules/protocol-buffers/compile.js":function(e,t,n){(function(t){var r=n("./node_modules/protocol-buffers-encodings/index.js"),o=n("./node_modules/varint/index.js"),i=n("./node_modules/generate-object-property/index.js"),a=n("./node_modules/generate-function/index.js"),s=function(e){return null!=e&&("number"!=typeof e||!isNaN(e))},c=function(e,t){if(e.map)return"{}";if(e.repeated)return"[]";switch(e.type){case"string":return function(e){try{return!!e&&"string"==typeof JSON.parse(e)}catch(e){return!1}}(t)?t:'""';case"bool":return"true"===t?"true":"false";case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return""+Number(t||0);default:return"null"}};e.exports=function(e,n,l){var d={},u={},p={},h=function(e,t){return l?(n=t[e],(o=r.name(n))?"encodings."+o:n.name?n.name:"encodings.enum"):"enc["+e+"]";var n,o},f=function(e,t){e.enums&&e.enums.forEach((function(e){e.id=t+(t?".":"")+e.name,u[e.id]=e,f(e,e.id)})),e.messages&&e.messages.forEach((function(n){n.id=t+(t?".":"")+n.name,d[n.id]=n,n.fields.forEach((function(n){if(n.map){var r="Map_"+n.map.from+"_"+n.map.to,o={name:r,enums:[],messages:[],fields:[{name:"key",type:n.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:n.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:t+(t?".":"")+r};d[o.id]||(d[o.id]=o,e.messages.push(o)),n.type=r,n.repeated=!0}})),f(n,n.id)}))};f(e,"");var g=function(n,l){n.messages.forEach((function(e){l[e.name]=_(e.name,n.id)})),n.enums.forEach((function(e){l[e.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(e.values)})),l.type=2,l.message=!0,l.name=n.name;var d={};n.fields.forEach((function(e){e.oneof&&(d[e.oneof]||(d[e.oneof]=[]),d[e.oneof].push(e.name))}));var u=n.fields.map((function(e){return _(e.type,n.id)})),p=u.filter((function(e,t){return u.indexOf(e)===t})),f=u.map((function(e){return p.indexOf(e)})),g=function(e){for(var t=0;t<u.length;t++)e(u[t],n.fields[t],i("obj",n.fields[t].name),t)},m=a()("function encodingLength (obj) {")("var length = 0");Object.keys(d).forEach((function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),n=d[e].map((function(e){return"+defined("+i("obj",e)+")"})).join(" + ");m("if ((%s) > 1) throw new Error(%s)",n,t)})),g((function(e,t,n,r){var i=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,a=o.encodingLength(t.tag<<3|e.type);t.required?m("if (!defined(%s)) throw new Error(%s)",n,JSON.stringify(t.name+" is required")):m("if (defined(%s)) {",n),t.map&&(m()("var tmp = Object.keys(%s)",n)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",n)("}"),n="tmp"),i?(m()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",n)("if (!defined(%s)) continue",n+"[i]")("var len = %s.encodingLength(%s)",h(f[r],p),n+"[i]")("packedLen += len"),e.message&&m("packedLen += varint.encodingLength(len)"),m("}")("if (packedLen) {")("length += %d + packedLen + varint.encodingLength(packedLen)",a)("}")):(t.repeated&&(m("for (var i = 0; i < %s.length; i++) {",n),m("if (!defined(%s)) continue",n+="[i]")),m("var len = %s.encodingLength(%s)",h(f[r],p),n),e.message&&m("length += varint.encodingLength(len)"),m("length += %d + len",a),t.repeated&&m("}")),t.required||m("}")})),m()("return length")("}"),m=m.toFunction({defined:s,varint:o,enc:p});var y=a()("function encode (obj, buf, offset) {")("if (!offset) offset = 0")("if (!buf) buf = Buffer.allocUnsafe(encodingLength(obj))")("var oldOffset = offset");Object.keys(d).forEach((function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),n=d[e].map((function(e){return"+defined("+i("obj",e)+")"})).join(" + ");y("if ((%s) > 1) throw new Error(%s)",n,t)})),g((function(e,t,n,r){t.required?y("if (!defined(%s)) throw new Error(%s)",n,JSON.stringify(t.name+" is required")):y("if (defined(%s)) {",n);var i,a=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,s=o.encode(t.tag<<3|2),c=o.encode(t.tag<<3|e.type);if(t.map&&(y()("var tmp = Object.keys(%s)",n)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",n)("}"),n="tmp"),a){for(y()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",n)("if (!defined(%s)) continue",n+"[i]")("packedLen += %s.encodingLength(%s)",h(f[r],p),n+"[i]")("}"),y("if (packedLen) {"),i=0;i<c.length;i++)y("buf[offset++] = %d",s[i]);y("varint.encode(packedLen, buf, offset)"),y("offset += varint.encode.bytes"),y("}")}if(t.repeated&&(y("for (var i = 0; i < %s.length; i++) {",n),y("if (!defined(%s)) continue",n+="[i]")),!a)for(i=0;i<c.length;i++)y("buf[offset++] = %d",c[i]);e.message&&(y("varint.encode(%s.encodingLength(%s), buf, offset)",h(f[r],p),n),y("offset += varint.encode.bytes")),y("%s.encode(%s, buf, offset)",h(f[r],p),n),y("offset += %s.encode.bytes",h(f[r],p)),t.repeated&&y("}"),t.required||y("}")})),y()("encode.bytes = offset - oldOffset")("return buf")("}"),y=y.toFunction({encodingLength:m,defined:s,varint:o,enc:p,Buffer:t});var v,A=n.fields.map((function(e,t){return e.required&&"!found"+t})).filter((function(e){return e})).join(" || "),b=a(),w=[];return g((function(e,t){var r=t.options&&t.options.default,o=_(t.type,n.id,!1),a=o&&o.values;a?t.repeated?w.push(i.property(t.name)+": []"):(r=r&&a[r]?a[r].value:a[Object.keys(a)[0]].value,w.push(i.property(t.name)+": "+parseInt(r||0,10))):w.push(i.property(t.name)+": "+c(t,r))})),w=w.filter((v={},function(e){return!v.hasOwnProperty(e)&&(v[e]=!0,!0)})),b()("function decode (buf, offset, end) {")("if (!offset) offset = 0")("if (!end) end = buf.length")('if (!(end <= buf.length && offset <= buf.length)) throw new Error("Decoded message is not valid")')("var oldOffset = offset")("var obj = {"),w.forEach((function(e,t){b(e+(t===w.length-1?"":","))})),b("}"),g((function(e,t,n,r){t.required&&b("var found%d = false",r)})),b("while (true) {")("if (end <= offset) {")(A&&'if (%s) throw new Error("Decoded message is not valid")',A)("decode.bytes = offset - oldOffset")("return obj")("}")("var prefix = varint.decode(buf, offset)")("offset += varint.decode.bytes")("var tag = prefix >> 3")("switch (tag) {"),g((function(t,r,o,a){var s=r.repeated&&(r.options&&r.options.packed&&"false"!==r.options.packed||!(r.options&&"false"==r.options.packed)&&3==e.syntax&&("float"===r.type||"double"===r.type||-1!=r.type.indexOf("int")));b("case %d:",r.tag),r.oneof&&n.fields.forEach((function(e){e.oneof===r.oneof&&r.name!==e.name&&b("delete %s",i("obj",e.name))})),s&&b()("var packedEnd = varint.decode(buf, offset)")("offset += varint.decode.bytes")("packedEnd += offset")("while (offset < packedEnd) {"),t.message?(b("var len = varint.decode(buf, offset)"),b("offset += varint.decode.bytes"),r.map?(b("var tmp = %s.decode(buf, offset, offset + len)",h(f[a],p)),b("%s[tmp.key] = tmp.value",o)):r.repeated?b("%s.push(%s.decode(buf, offset, offset + len))",o,h(f[a],p)):b("%s = %s.decode(buf, offset, offset + len)",o,h(f[a],p))):r.repeated?b("%s.push(%s.decode(buf, offset))",o,h(f[a],p)):b("%s = %s.decode(buf, offset)",o,h(f[a],p)),b("offset += %s.decode.bytes",h(f[a],p)),s&&b("}"),r.required&&b("found%d = true",a),b("break")})),b()("default:")("offset = skip(prefix & 7, buf, offset)")("}")("}")("}"),b=b.toFunction({varint:o,skip:r.skip,enc:p}),y.bytes=b.bytes=0,l.buffer=!0,l.encode=y,l.decode=b,l.encodingLength=m,l.dependencies=p,l},_=function(e,t,i){if(n&&n[e])return n[e];if(r[e])return r[e];var s=(t?t+"."+e:e).split(".").map((function(t,n,r){return r.slice(0,n).concat(e).join(".")})).reverse().reduce((function(e,t){return e||d[t]||u[t]}),null);if(!1===i)return s;if(!s)throw new Error("Could not resolve "+e);return s.values?function(e){var t=Object.keys(e.values).map((function(t){return"val !== "+parseInt(e.values[t].value,10)})).join(" && ");t||(t="true");var n=a()("function encode (val, buf, offset) {")('if (%s) throw new Error("Invalid enum value: "+val)',t)("varint.encode(val, buf, offset)")("encode.bytes = varint.encode.bytes")("return buf")("}").toFunction({varint:o}),i=a()("function decode (buf, offset) {")("var val = varint.decode(buf, offset)")('if (%s) throw new Error("Invalid enum value: "+val)',t)("decode.bytes = varint.decode.bytes")("return val")("}").toFunction({varint:o});return r.make(0,n,i,o.encodingLength)}(s):p[s.id]?p[s.id]:(p[s.id]={},g(s,p[s.id]))};return(e.enums||[]).concat((e.messages||[]).map((function(e){return _(e.id)})))},e.exports.defined=s}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/protocol-buffers/index.js":function(e,t,n){(function(t){var r=n("./node_modules/protocol-buffers-schema/index.js"),o=n("./node_modules/protocol-buffers/compile.js"),i=n("./node_modules/protocol-buffers/compile-to-js.js");e.exports=function(e,n){if(n||(n={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var i="object"!=typeof e||t.isBuffer(e)?r.parse(e):e,a=function(){var e=this;o(i,n.encodings||{},n.inlineEnc).forEach((function(t){e[t.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(t.values)||t}))};return a.prototype.toString=function(){return r.stringify(i)},a.prototype.toJSON=function(){return i},new a},e.exports.toJS=function(t){return i(e.exports(t,{inlineEnc:!0}))}}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/signed-varint/index.js":function(e,t,n){var r=n("./node_modules/varint/index.js");t.encode=function e(t,n,o){t=t>=0?2*t:-2*t-1;var i=r.encode(t,n,o);return e.bytes=r.encode.bytes,i},t.decode=function e(t,n){var o=r.decode(t,n);return e.bytes=r.decode.bytes,1&o?(o+1)/-2:o/2},t.encodingLength=function(e){return r.encodingLength(e>=0?2*e:-2*e-1)}},"./node_modules/util/node_modules/inherits/inherits_browser.js":function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},"./node_modules/util/support/isBufferBrowser.js":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"./node_modules/util/util.js":function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),c=r[n];n<i;c=r[++n])g(c)||!A(c)?a+=" "+c:a+=" "+s(c);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,a={};function s(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),d(r,e,r.depth)}function c(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function l(e,t){return e}function d(e,n,r){if(e.customInspect&&n&&C(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return m(o)||(o=d(e,o,r)),o}var i=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(_(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(i)return i;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(n);if(0===a.length){if(C(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return u(n)}var l,A="",I=!1,E=["{","}"];(h(n)&&(I=!0,E=["[","]"]),C(n))&&(A=" [Function"+(n.name?": "+n.name:"")+"]");return v(n)&&(A=" "+RegExp.prototype.toString.call(n)),b(n)&&(A=" "+Date.prototype.toUTCString.call(n)),w(n)&&(A=" "+u(n)),0!==a.length||I&&0!=n.length?r<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=I?function(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)x(t,String(a))?i.push(p(e,t,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(p(e,t,n,r,o,!0))})),i}(e,n,r,s,a):a.map((function(t){return p(e,n,r,s,t,I)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,A,E)):E[0]+A+E[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),x(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?d(e,c.value,null):d(e,c.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function g(e){return null===e}function _(e){return"number"==typeof e}function m(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return A(e)&&"[object RegExp]"===I(e)}function A(e){return"object"==typeof e&&null!==e}function b(e){return A(e)&&"[object Date]"===I(e)}function w(e){return A(e)&&("[object Error]"===I(e)||e instanceof Error)}function C(e){return"function"==typeof e}function I(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(i)&&(i=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=f,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=_,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=v,t.isObject=A,t.isDate=b,t.isError=w,t.isFunction=C,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("./node_modules/util/support/isBufferBrowser.js");var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",T(),t.format.apply(t,arguments))},t.inherits=n("./node_modules/util/node_modules/inherits/inherits_browser.js"),t._extend=function(e,t){if(!t||!A(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var k="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(k&&e[k]){var t;if("function"!=typeof(t=e[k]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,k,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,o)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),k&&Object.defineProperty(t,k,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=k,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(P,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/varint/decode.js":function(e,t){e.exports=function e(t,n){var r,o=0,i=0,a=n=n||0,s=t.length;do{if(a>=s)throw e.bytes=0,new RangeError("Could not decode varint");r=t[a++],o+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return e.bytes=a-n,o}},"./node_modules/varint/encode.js":function(e,t){e.exports=function e(t,r,o){r=r||[];var i=o=o||0;for(;t>=n;)r[o++]=255&t|128,t/=128;for(;-128&t;)r[o++]=255&t|128,t>>>=7;return r[o]=0|t,e.bytes=o-i+1,r};var n=Math.pow(2,31)},"./node_modules/varint/index.js":function(e,t,n){e.exports={encode:n("./node_modules/varint/encode.js"),decode:n("./node_modules/varint/decode.js"),encodingLength:n("./node_modules/varint/length.js")}},"./node_modules/varint/length.js":function(e,t){var n=Math.pow(2,7),r=Math.pow(2,14),o=Math.pow(2,21),i=Math.pow(2,28),a=Math.pow(2,35),s=Math.pow(2,42),c=Math.pow(2,49),l=Math.pow(2,56),d=Math.pow(2,63);e.exports=function(e){return e<n?1:e<r?2:e<o?3:e<i?4:e<a?5:e<s?6:e<c?7:e<l?8:e<d?9:10}},"./node_modules/webpack/buildin/global.js":function(e,n){var r;r=globalThis;try{r=r||new t("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r}})},3755:(e,t,n)=>{"use strict";n.d(t,{$x:()=>s,vq:()=>i,Xs:()=>c,Mn:()=>a});var r=n(7322),o=n(665);function i(e){const t=o.Z.accountInfo&&o.Z.accountInfo.appId||"noAppId";(0,r.L)("getRiskWarningFromGlobalStorage",{appId:t},void 0,e)}function a(e,t){const n=o.Z.accountInfo&&o.Z.accountInfo.appId||"noAppId";e&&(0,r.L)("setRiskWarningToGlobalStorage",{riskWarning:e,appId:n},void 0,t)}function s(e){const t=o.Z.accountInfo&&o.Z.accountInfo.appId||"noAppId";(0,r.L)("getRequestPaymentFromGlobalStorage",{appId:t},void 0,e)}function c(e,t){const n=o.Z.accountInfo&&o.Z.accountInfo.appId||"noAppId";e&&(0,r.L)("setRequestPaymentToGlobalStorage",{requestPayment:e,appId:n},void 0,t)}},9889:(e,t,n)=>{"use strict";n.d(t,{q:()=>p,Z:()=>h});var r=n(9045),i=n(5260),a=n(2851),s=n(2582),c=n(2046);const l=(0,c.s)("XWebTextareaSupportedEvent");let d=!1;(0,r.Ld)("xWebTextareaSupported",(({canInsert2XWeb:e})=>{d=e,l.emit({canInsert2XWeb:e})})),(s.gm||s.qB||s.Mq||s.wZ||s.Ae)&&(0,r.Ld)("SPECIAL_PAGE_EVENT",(({data:e,eventName:t,ext:n,nodeId:c,instanceId:l},u=0)=>{if((!s.wZ||d)&&(e&&"input"===e.type&&n&&n.modelValueName&&o.setModelValueData(e.detail.value,n.modelValueName,u,c),e&&"input"===e.type&&"function"==typeof a.Z.webviewEventCallback)){const o=a.Z.webviewEventCallback({data:e,eventName:t,webviewId:u,nodeId:c}),s=e.detail.value;if(n&&n.setKeyboardValue)if(void 0===o);else if("Object"===(0,i.Em)(o)){const e={};l&&(e.instanceId=l),s!==o.value&&(e.value=o.value+""),Number.isNaN(parseInt(o.cursor,10))||(e.cursor=parseInt(o.cursor,10)),(0,r.nY)("setKeyboardValue",e,[u])}else s!==o&&(0,r.nY)("setKeyboardValue",{value:o+"",cursor:-1,instanceId:l},[u])}}));const u=(0,c.s)("DomReady"),p=u.internalOnMethod,h=e=>{a.Z.webviewEventCallback=e,(0,r.Ld)("PAGE_EVENT",(({data:t,eventName:n,nodeId:r},o=0)=>{"__DOMReady"===n&&u.emit({data:t,eventName:n,webviewId:o,nodeId:r}),e({data:t,eventName:n,webviewId:o,nodeId:r})}))}},2913:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var r=n(9045),o=n(5260);const i=()=>{const e={};let t;if((0,r.IN)("getMenuButtonBoundingClientRect",{success(t){Object.assign(e,t),delete e.errMsg},fail(e){t=e.errMsg}}),t)throw new o.iZ(t);return e}},1633:(e,t,n)=>{"use strict";n.r(t),n.d(t,{showToast:()=>v,hideToast:()=>A,showLoading:()=>w,hideLoading:()=>C,_showModal:()=>h,showModal:()=>f,showActionSheet:()=>I,showShareActionSheet:()=>E,_checkIsInteracting:()=>S});var r=n(9045),o=n(5260),i=n(2851),a=n(2276),s=n(2582),c=n(1095),l=n(3872),d=n(405),u=n(9889);let p=!1;const h=(e={})=>{let t={title:"",content:"",confirmText:"确定",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:void 0!==__wxConfig.theme&&e.confirmColor?e.confirmColor:"#7D90A9",cancelColor:"#000000",cancelColorDark:void 0!==__wxConfig.theme&&e.cancelColor?e.cancelColor:"#AAAAAA",editable:!1,placeholderText:""};t=(0,o.l7)(t,e),(0,r.r3)("showModal",t,{title:"",content:"",confirmText:"",cancelText:"",confirmColor:"",cancelColor:"",editable:!1,placeholderText:""})&&(t.confirmText.replace(/[^\x00-\xff]/g,"##").length>8?(0,r.YG)("showModal",e,"confirmText length should not larger than 4 Chinese characters"):t.cancelText.replace(/[^\x00-\xff]/g,"##").length>8?(0,r.YG)("showModal",e,"cancelText length should not larger than 4 Chinese characters"):(0,r.IN)("showModal",t,{beforeSuccess:e=>{e.confirm=Boolean(e.confirm),s.cj||s.Mq?e.cancel=!e.confirm:e.cancel=!e.confirm&&Boolean(e.cancel),(0,a.Hk)()},beforeAll(){p=!0},afterAll(){p=!1}}))},f=(e={})=>{h(e),(0,c.aI)()&&(0,l.y4)(l.F0.EVENT_CANVAS_AFTER_MODAL)},g={},_={};(0,d.H)((e=>{_[e.webviewId]=[]})),(0,u.q)((e=>{setTimeout((()=>{const t=e.webviewId,n=_[t]||[];g[t]=!0,n.length>0&&(y=!1,b=!1,n.forEach((e=>{const{res:t,args:n}=e,o=/hideLoading/.test(t.errMsg)?{beforeAll:e=>{e.errMsg=e.errMsg.replace("hideToast","hideLoading")}}:{};(0,r.IN)("hideToast",n,o)}))),delete _[t]}),100)}));let m=1,y=!1;const v=(e={})=>{let t={duration:1500,title:"",icon:"success",mask:!1};if(t=(0,o.l7)(t,e),e.image&&(t.image=(0,o.sd)(i.Z.lastRoute,e.image,!1)),["success","loading","none","error"].indexOf(t.icon)<0&&(t.icon="success"),"none"===t.icon&&(t.icon=""),!(0,r.r3)("showToast",t,{duration:1,title:"",icon:""}))return;const n=_[i.Z.currentWebviewId]||[];n.length>0&&(y=!1,b=!1,n.forEach((e=>{const{res:t,args:n}=e;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete _[i.Z.currentWebviewId]),y=m++,setTimeout((function(){y=!1}),t.duration),t.maskAll=!1,(0,r.IN)("showToast",t)},A=(e={})=>{if(s.gm&&b&&(!y||y<b))return y=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideToast:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideToast:ok"})})),void console.warn("请注意 showToast 与 hideToast 必须配对使用");i.Z.currentWebviewId;y=!1,(0,r.IN)("hideToast",e)};let b=!1;const w=(e={})=>{let t={title:"",icon:"loading",mask:!1,duration:1e8};if(t=(0,o.l7)(t,e),t.icon="loading",delete t.image,!(0,r.r3)("showLoading",t,{duration:1,title:""}))return;const n=_[i.Z.currentWebviewId]||[];n.length>0&&(y=!1,b=!1,n.forEach((e=>{const{res:t,args:n}=e;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete _[i.Z.currentWebviewId]),b=m++,t.maskAll=!1,(0,r.IN)("showToast",t,{beforeAll:e=>{e.errMsg=e.errMsg.replace("showToast","showLoading")}})},C=(e={})=>{if(s.gm&&y&&(!b||b<y))return b=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideLoading:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideLoading:ok"})})),void console.warn("请注意 showLoading 与 hideLoading 必须配对使用");i.Z.currentWebviewId;b=!1,(0,r.IN)("hideToast",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace("hideToast","hideLoading")}})},I=(e={})=>{let t={itemList:[],itemColor:"#000000",itemColorDark:void 0!==__wxConfig.theme&&e.itemColor?e.itemColor:"#FFFFFFCC"};t=(0,o.l7)(t,e),delete t.cancelText,delete t.cancelColor,(0,r.r3)("showActionSheet",t,{itemList:["1"],itemColor:""})&&(e.itemList.length>6?(0,r.YG)("showActionSheet",e,"parameter error: itemList should not be large than 6"):(0,r.IN)("showActionSheet",t,{beforeAll:e=>{(e.errMsg.indexOf(":ok")>-1||e.errMsg.indexOf(":cancel")>-1)&&(0,a.Hk)(),p=!0},afterAll:()=>{p=!1}}))},E=(e={})=>{(0,r.IN)("showShareActionSheet",e)},S=()=>p},8728:(e,t,n)=>{"use strict";n.d(t,{et:()=>u,lX:()=>s,eZ:()=>d});var r=n(665),o=n(9045),i=n(3685);let a=null;const s=(e={})=>{if(!(0,o.r3)("showAuthorize",e,{apply:""}))return;const t=r.Z.accountInfo.nickname,n=r.Z.accountInfo.icon,s=JSON.stringify({nickname:t,icon:n,apply:e.apply,overlay:e.overlay}),c=(0,i.vJ)((e=>{[i.ML.BottomBackButton,i.ML.NavigationBackInterceptionType,i.ML.NavigateBackCall].includes(e.type)&&a&&(a.handleCancel(),a=null)}));__sclEngine__.initScl((t=>{a=t.mainRoot.append("authorize",{input:s}),a.addListener("confirm",(()=>{(0,i.J_)(c),(0,o.FE)({name:"showAuthorize",args:e})})),a.addListener("cancel",(()=>{(0,i.J_)(c),(0,o.YG)("showAuthorize",e,"cancel")}))}))};var c=n(2913);let l=null;function d(e={},t){if(l)return t&&t(l);const{right:n,bottom:o}=(0,c.z)(),i=r.Z.screenWidth-n,a=o+36,s=JSON.stringify(e);__sclEngine__.initScl((e=>{l=e.mainRoot.append("verify-tip",{top:a,right:i,info:s}),l.addListener("destroy",(()=>{l=null})),t&&t(l)}))}function u(e={}){__sclEngine__.initScl((t=>{t.mainRoot.append("ad-skip-card",e)}))}},3685:(e,t,n)=>{"use strict";n.d(t,{ML:()=>d,tl:()=>_,Am:()=>y,vJ:()=>b,J_:()=>w});var r=n(3356),o=n.n(r),i=n(1503),a=n.n(i),s=n(2783),c=n(9045);const l=(0,n(2046).s)("navigateBackIntercept"),d={SlideBack:1,BottomBackButton:2,NavigationBarBack:3,NavigateBackCall:4},u=[d.SlideBack,d.BottomBackButton,d.NavigationBarBack,d.NavigateBackCall],p=[];let h=0;(0,c.jQ)("onNavigateBackIntercept",((e={})=>{const{id:t}=p[p.length-1]||{};l.emit(a()(a()({},e),{},{id:t})),(0,c.nY)("onNavigateBackIntercept",a()(a()({},e),{},{id:t}))}));const f=({scopes:e}={})=>{const t=new Set(e||[]),n={scopes:u.map((e=>({type:e,interception:t.has(e)})))};return(0,c.bb)("setNavigateBackInterception",n)},g=function(){var e=o()((function*(e={}){var t;e=a()(a()({},e),{},{scopes:null!==(t=e.scopes)&&void 0!==t?t:u}),yield f(e);const n=++h;return p.push({id:n,options:e}),{id:n}}));return function(){return e.apply(this,arguments)}}(),_=(0,s.NX)("setNavigateBackInterception",g),m=function(){var e=o()((function*({id:e}={}){const t=p.findIndex((t=>t.id===e));if(!(t<0)){if(t===p.length-1){let e;e=p.length>1?p[p.length-2].options:{scope:[]},yield f(e)}p.splice(t,1)}}));return function(){return e.apply(this,arguments)}}(),y=(0,s.NX)("stopNavigateBackInterception",m),v=l.internalOnMethod,A=l.internalOffMethod,b=function(){var e=o()((function*(e,t=u){const{id:n}=yield g({scopes:t}),r=t=>{t.id===n&&e(t)};return v(r),{id:n,handler:r}}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=o()((function*(e){const{id:t,handler:n}=(yield e)||{};yield m({id:t}),A(n)}));return function(t){return e.apply(this,arguments)}}()},9706:(e,t,n)=>{"use strict";n.d(t,{Hl:()=>f,KN:()=>g,rD:()=>_});var r=n(9045);const o=[];let a=null,s=null,c=!1,l=[],d=!1,u="",p=0,h=0;const f=e=>{e.deviceOrientation&&(u=e.deviceOrientation),p=e.size.windowWidth,h=e.size.windowHeight};(0,r.jQ)("onViewDidResize",(e=>{(e=>{a=e;let t=!1,n=!0;e.deviceOrientation!==u&&(t=!0),e.size.windowWidth!==p&&(t=!0),e.size.windowHeight!==h&&(t=!0),f(e),e.pageOrientation&&(e.pageOrientation.setPageOrientation&&(d=!0),"auto"===e.pageOrientation.originalPageOrientation||d||(t=!1,n=!1)),void 0!==i&&i.isFramesetMode()&&(n=!1),t&&(c=!0);const r=e.changedWebviewIds;n&&r&&r.forEach((e=>{l.indexOf(e)<0&&l.push(e)})),s||(s=setTimeout((()=>{s=null;const e=c;c=!1;const t=l;l=[];const n={deviceOrientation:a.deviceOrientation,size:a.size};e&&o.forEach((e=>{__errorTracer__.surroundThirdByTryCatch(e,"at onWindowResize callback function")(n)})),t.forEach((e=>{const t=void 0!==i?i.getPageByWebviewId(e):null;t&&__errorTracer__.surroundThirdByTryCatch((()=>{t.__callPageLifeTime__("onResize",n)}),"at Resize callback function")()}))}),16))})(e)}));const g=e=>{o.push(e)},_=e=>{o.splice(o.indexOf(e),1)}},7371:(e,t,n)=>{"use strict";n.d(t,{mN:()=>b,T8:()=>A,gB:()=>y,MR:()=>w,n:()=>C,UY:()=>v,p7:()=>I,D5:()=>_});var r=n(9045),o=n(2046),a=n(812),s=n(5260),c=n(2851),l=n(7322),d=n(7188),u=n(1095),p=n(8745),h=n(2582);const f=(0,o.s)("AppPerfRouteNavigation");function g(e,t,n){const r=void 0===n._relativePath?c.Z.lastRoute:n._relativePath;return!(0,s.Bf)(r,t)||/^__wx__\//.test(t)||(0,a.eW)(e,t,n)}function _(e,t,n){const o=void 0===t._relativePath?c.Z.lastRoute:t._relativePath;try{return(0,s.s$)(o,t.url,!n)}catch(i){if(!(i instanceof s.l0))throw i;if(!n){if(!(0,s.Bf)(o,t.url))return t.url;(0,r.YG)(e,t,i.message)}}return""}function m(e,t){const n=_(e,t,!0);if(!n)return!0;const o=(0,d.ZA)(n),i=d.n6[(0,u.a2)(e).toUpperCase()];let a=!0,s="",c=d.UU.OK;if(o>-1){const n=d.Jx[o];s=n.redirect_url,s&&1===n.is_valid?((0,r.YG)(e,t,"url has been banned"),(0,l.L)("openUrl",{url:s}),c=d.UU.BLOCK,a=!1):s&&1!==n.is_valid&&(c=d.UU.NO_BLOCK)}return(0,d.ye)(e,c,i,s,n),a}const y=e=>{if(!(0,r.r3)("redirectTo",e,{url:""}))return;if(!m("redirectTo",e))return;const t=_("redirectTo",e,!1);t&&(e.url=t,e.url=(0,s.yP)(e.url),g("redirectTo",e.url,e)&&(c.Z.navigatorLock=!0,(0,r.IN)("redirectTo",e,{afterFail(){c.Z.navigatorLock=!1}}),f.emit({type:"redirectTo",start:Date.now()})))},v=e=>{if("active"!==c.Z.runningStatus&&"ios"===h.iw)return void(0,r.YG)("reLaunch",e,"can not invoke reLaunch in background");if(!(0,r.r3)("reLaunch",e,{url:""}))return;if(!m("reLaunch",e))return;const t=_("reLaunch",e,!1);t&&(e.url=t,e.url=(0,s.yP)(e.url),g("reLaunch",e.url,e)&&(c.Z.navigatorLock=!0,(0,r.IN)("reLaunch",e,{afterFail(){c.Z.navigatorLock=!1}}),f.emit({type:"reLaunch",start:Date.now()})))},A=e=>{if(!(0,r.r3)("navigateTo",e,{url:""}))return;if(!m("navigateTo",e))return;const t=_("navigateTo",e,!1);if(!t)return;if(e.url=t,e.url=(0,s.yP)(e.url),!g("navigateTo",e.url,e))return;const n=(0,p.P)();if(e.events)for(const t in e.events)n.on(t,e.events[t]);c.Z.navigatorLock=!0,(0,r.IN)("navigateTo",e,{afterFail(){c.Z.navigatorLock=!1},beforeSuccess(e){e.eventChannel=n}}),f.emit({type:"navigateTo",start:Date.now()})},b=e=>{i.DisplayReporter.setEventRelatedInfo(e._relatedInfo),A(e)},w=(e={})=>{if(!(0,r.r3)("switchTab",e,{url:""}))return;if(/\?.*$/.test(e.url)&&(console.warn("wx.switchTab: url 不支持 queryString"),e.url=e.url.replace(/\?.*$/,"")),!m("switchTab",e))return;const t=_("switchTab",e,!1);t&&(e.url=t,e.url=(0,s.yP)(e.url),g("switchTab",e.url,e)&&(c.Z.navigatorLock=!0,(0,r.IN)("switchTab",e,{afterFail(){c.Z.navigatorLock=!1}}),f.emit({type:"switchTab",start:Date.now()})))},C=(e={})=>{const t=(e=Object.assign({},e))._webviewId;if(void 0!==t){e.delta=void 0;const n=i.getPageMetaByWebviewId(t);if(n){const t=n.framesetViewId;e.viewId=t}}if("number"!=typeof e.delta?e.delta=1:(e.delta=parseInt(e.delta,10),e.delta<1&&(e.delta=1)),"function"==typeof i.getCurrentPagesByDomain){if(i.getCurrentPagesByDomain("").length<=1)return void(0,r.YG)("navigateBack",e,"cannot navigate back at first page.")}(0,r.IN)("navigateBack",e),f.emit({type:"navigateBack",start:Date.now()})},I=(e,t)=>{const n={_relativePath:e,_webviewId:t};return{navigateTo(e){A(Object.assign({},e,n))},redirectTo(e){y(Object.assign({},e,n))},switchTab(e){w(Object.assign({},e,n))},navigateBack(e){C(Object.assign({},e,n))},reLaunch(e){v(Object.assign({},e,n))}}}},7188:(e,t,n)=>{"use strict";n.d(t,{ZA:()=>y,g4:()=>_,Jx:()=>m,V8:()=>A,ye:()=>b,n6:()=>h,UU:()=>p});var r=n(665),o=n(7452),i=n(2851),a=n(9045),s=n(7646),c=n(2582);const l=0,d=1,u=2,p={OK:1,BLOCK:2,NO_BLOCK:3},h={NAVIGATE_TO:1,SWITCH_TAB:2,REDIRECT_TO:3,API:4,RE_LAUNCH:5},f=wxNativeConsole.createLogger("BanForPage");let g=!1,_=new Set(["shareAppMessage","shareAppMessageDirectly","requestPayment","setClipboardData","getClipboardData","getLocation","getPhoneNumber","navigateToMiniProgram","navigateBackMiniProgram"]),m=[];function y(e){if(!e)return-1;let t=-1;try{t=m.findIndex((t=>(0,o.HD)(t.path_rule)&&new RegExp(t.path_rule).test(e)))}catch(e){f.log(`[getBanRuleIndexByPath] error: ${e.message}`)}return f.log(`[getBanRuleIndexByPath] path="${e}", index=${t}`),t}function v(e,t,n){f.log(`[checkAPIAvailableForPage] APIName=${e}, path=${t}, title=${n}`);const r=function(e,t,n){let r=-1;for(let e=0;e<m.length;e++){const i=m[e];if((!(0,o.HD)(i.path_rule)||!i.path_rule||new RegExp(i.path_rule).test(t))&&(!(0,o.HD)(i.title_rule)||!i.title_rule||new RegExp(i.title_rule).test(n))){r=e;break}}return f.log(`[getBanRuleIndexForPage] banRuleIndex=${r}`),r}(0,t,n);if(-1===r)return b(e,p.OK,h.API,e),!0;const i=m[r];return f.log("[checkAPIAvailableForPage], found rule:",i),function(e,t){const n=e.ban_jsapi_list.find((e=>e.jsapi_name===t));if(!n)return f.log("[checkAPIAvailableForPageByRule], no APIItem found"),!0;let r,o;if(f.log("[checkAPIAvailableForPageByRule], found APIItem:",n),n.state===l)r=!1;else if(n.state===d)r=!0;else if(n.state===u&&(r=!0,1===e.is_valid)){const e=n.toast_wording||"该功能暂时无法使用";(0,a.be)("showToast",{title:e,icon:"none"})}return o=r?e.is_valid?p.BLOCK:p.NO_BLOCK:p.OK,b(t,o,h.API,t),1!==e.is_valid||!r}(i,e)}function A(e){const t=Object.keys(i.Z.query).reduce(((e,t)=>[...e,`${t}=${i.Z.query[t]}`]),[]).join("&"),n=i.Z.lastRoute+(t?`?${t}`:""),r=i.Z.navigationBarTitleMap[i.Z.lastRoute]||"";return f.log(`[checkAPIAvailableForCurrentPage] APIName=${e}, path=${n}, title=${r}`),v(e,n,r)}function b(e,t,n,o="",a=""){if(f.log(`[reportAPIBanForPage] APIName=${e}, blockType=${t}, checkScene=${n}, extraInfo=${o}, needReport=${g}`),!g)return;const{appLaunchInfo:c}=r.Z,l=Object.keys(i.Z.query).map((e=>`${e}=${i.Z.query[e]}`)).join("&"),d={session_id:c.sessionid||c.sessionId,cur_path:i.Z.lastRoute+(l?`?${l}`:""),title:i.Z.navigationBarTitleMap[i.Z.lastRoute],check_scene:n,block_status:t,extra_info:o,launch_scene:c.scene,launch_path:c.path,target_path:a};f.log("[reportAPIBanForPage], reqData:",d),(0,s.JM)({reqData:d,apiName:"webapi_reportnvgcheckinfo",complete(e){f.log(`[reportAPIBanForPage], res.errMsg=${e.errMsg}`)}})}r.Z.onReady((()=>{if(!c.gm)try{const{do_report:e,navigate_ban_rule_list:t}=r.Z.appContactInfo.operationInfo.jsonInfo.navigate_ban_info;m=t,g=1===e,_=new Set(t.reduce(((e,t)=>[...e,...t.ban_jsapi_list]),_)),f.log(`[BanForPage][init] needReport=${g}`),f.log("[BanForPage][init] ruleList:",m),f.log("[BanForPage][init] banAPISet:",_)}catch(e){f.error(`[BanForPage][init] fail, errMsg=${e.message}`)}}))},6947:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="undefined"!=typeof NativeGlobal?NativeGlobal:{}},665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=__wxConfig},5542:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const r=n.g.WeixinArrayBuffer;delete n.g.WeixinArrayBuffer;const o=r},6077:(e,t,n)=>{"use strict";n.d(t,{X:()=>T,T:()=>x});var r=n(665),o=n(2999),a=n(6998),s=n(7452);let c=0,l="",d="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",u="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function p(){if(void 0===i)return"";const e=i.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}(0,s.HD)(d)&&(d=d.replace(" ","")),(0,s.HD)(u)&&(u=u.replace(" ","-")),r.Z.onReady((()=>{c=r.Z.appLaunchInfo.scene,l=r.Z.appLaunchInfo.sessionid||r.Z.appLaunchInfo.sessionId,(0,o.n)("onAppEnterForeground",(e=>{e&&e.scene&&(c=e.scene),e&&(e.sessionid||e.sessionId)&&(l=e.sessionid||e.sessionId)}))}));const h=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","getBox2D","createSharedArrayBuffer","nv_constructor","nv_toString"],f=["chooseMedia","chooseVideo","compressVideo","createCameraContext","stopRecord"],g=new WeakSet,_=[];function m(){return 1e4*Date.now()+Math.round(9999*Math.random())}function y(e,t,n){const r=Object.getOwnPropertyDescriptor(e,t);return!r.get&&(!!r.writable&&(!(!t||"_"===t[0])&&(!h.includes(t)&&(!(n&&!f.includes(t))&&!!(0,s.mf)(e[t])))))}function v(e,...t){(0,s.mf)(e)&&e(...t)}function A(e,t=!0){const n=(0,s.Em)(e);switch(n){case"Number":case"Boolean":return e;case"String":return b(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return`[Error:${A(e.message)}|${A(e.stack)}]`;case"Object":return t?Object.keys(e).map((t=>`${A(t)}=${A(e[t],!1)}`)).sort(((e,t)=>e.length-t.length)).join("&")||"{}":`[${n}]`;default:return`[${n}]`}}function b(e){return t=>(0,s.HD)(t)&&t.length>e?t.substr(0,e):t}function w(e,t,n,o,i,a,s,h,f,g){let m=0;_.forEach((({match:t,version:n})=>{"string"==typeof t?e===t&&(m=n):t instanceof RegExp&&t.test(e)&&(m=n)})),"connectWifi"===e&&(n="");const y=[e,t,A(n),o,i,Date.now()-i,a,s,A(h),r.Z.appType+1e3,c,d,u,m,f,p(),l].map(b(1024)).join(",");g||1!==s||(Reporter.reportIDKey({key:"asyncApiCount"}),Reporter.reportIDKey({key:"asyncApiCost",value:Date.now()-i})),Reporter.reportKeyValue({key:g?"WeAppInvoke2":"WeAppInvoke",value:y})}const C=Map,I=Math.random;function E(e,t,n,r,o,i=!1){if(!(0,s.Kn)(t))return;const c=new C;for(const e of Object.getOwnPropertyNames(t))y(t,e,i)&&c.set(e,t[e]);const l=Object.getPrototypeOf(t);for(const e of Object.getOwnPropertyNames(l))y(l,e,i)&&c.set(e,l[e]);c.forEach(((c,l)=>{t[l]=function(d,...u){const p=`${e}${l}`;if(I()>r){const e=c.call(t,d,...u);return n&&(0,s.Kn)(e)&&!g.has(e)&&(E(`${p}.`,e,!1,r,o,i),g.add(e)),e}const h=(0,a._getCurrentNetworkType)(),f=Date.now(),_=m();try{const e=c.call(t,(0,s.Kn)(d)&&("success"in d||"fail"in d||"complete"in d)?Object.assign({},d,{success:e=>{w(p,_,d,1,f,h,1,e,o,i),v(d.success,e)},fail:e=>{w(p,_,d,0,f,h,1,e,o,i),v(d.fail,e)}}):d,...u);return w(p,_,d,null===e?0:1,f,h,0,e,o,i),n&&(0,s.Kn)(e)&&!g.has(e)&&(E(`${p}.`,e,!1,r,o,i),g.add(e)),e}catch(e){throw w(p,_,d,0,f,h,0,e,o,i),e}}}))}let S=!1;function T(e,t=0){E("",e,!0,.05,t),E("",e,!0,1,t,!0),E("cloud.",e.cloud,!0,.05,t),function(e){if(!e.createCanvas)return;const t=e.createCanvas;e.createCanvas=()=>{const n=t.call(e);if(n&&n.getContext){const e=n.getContext;n.getContext=(...t)=>{const r=e.call(n,...t);if(r&&r.compressedTexImage2D){const e=r.compressedTexImage2D;r.compressedTexImage2D=(...t)=>{S||(S=!0,w("WebGLRenderingContext.compressedTexImage2D",m(),{},1,Date.now(),(0,a._getCurrentNetworkType)(),0,void 0)),e.call(r,...t)}}return r}}return n}}(e)}function x(e,t){_.push({match:e,version:t})}},5014:(e,t,n)=>{"use strict";n.d(t,{J:()=>c,P:()=>l});var r=n(9045),o=n(7452),i=n(665);const a={requestVirtualPayment:285,setCookies:502,getCookies:503,UDP:606,launchApplicationDirectly:620,screenCanvasReadPixels:631,navigateToMiniProgramDirectly:632,openDataContextExtension:638,batchGetContactDirectly:676,launchApp:692,sendBizRedPacketForOpen:694,openWxappLimit5:720,shareCallback:740,WeAppWorker:775,listenFrameChangeInWorker:776,requestSubscribeWhatsNew:782,getGroupToolbarInfo:803,requestMidasFriendPayment:804,createWebView:805,authShareRelationship:852,uploadToCommonCDN:878,quicklyAddBrandContact:879,engineOpenData:894,preloadMiniProgramEnvDirectly:900,predownloadMiniProgramPackageDirectly:901,addPhoneCalendar:912,addPhoneRepeatCalendar:913,privateScanItem:917,shareDataToWeRun:926,handoff:931,bindingDownload:972,bindingReadFile:973,bindingWebSocket:974,openH5GameClub:975,showShareImageMenu:978,plugin_launchApplicationDirectly_operateDirectly:1009,privateSearchContacts:1024,private_setNavigateBackInterception:1020,private_stopNavigateBackInterception:1021,TCP:1025,TCPServer:1026,inputTypeSafePassword:1027,startGameLiveDirectly:1045,getUserRecentGameLiveInfo:1049,private_getWebviewDebugInfo:1051,showRedPackage:1052},s={};i.Z.onReady((()=>{const e=Object.keys(a).map((e=>a[e]));(0,r.IN)("getPermissionBytes",{indexes:e,success(t){if(t.permissionBytes)for(let n=0;n<t.permissionBytes.length;n++){const r=e[n];s[r]=1===t.permissionBytes[n]}},fail(e){}})}));const c=e=>{const t=a[e];if("number"!=typeof t)return!1;if(!(0,o.o8)(s[t]))return s[t];let n=!1;return(0,r.IN)("getPermissionBytes",{indexes:[t],success(e){e.permissionBytes&&(n=1===e.permissionBytes[0],s[t]=n)}}),n},l=e=>{const t=c(e.apiName);(0,r.FE)({name:"checkPermission",args:e,success:!0,res:{hasPermission:t}})}},2184:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});var r=n(7452);class o{constructor(e="",t=!1){this.type="",this.surround=!1,this.eventMap=new Map,this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap,this.type=e,this.surround=t}on(e,t){if(!(0,r.mf)(t))return void console.error("emitter.on fail: callback must be a function");let n=t;var o,i;this.surround&&(o=t,i=`at ${this.type}${e} callback function`,n=void 0!==__errorTracer__?__errorTracer__.surroundThirdByTryCatch(o,i):void 0!==__subContextEngine__?__subContextEngine__.surroundThirdByTryCatch(o,i):(...e)=>{try{return o(...e)}catch(e){return void console.error(`thirdScriptError\n${e.message};${i}\n`,e)}},this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t)),this.eventMap.has(e)?this.eventMap.get(e).add(n):this.eventMap.set(e,new Set([n]))}off(e,t){const n=this.eventMap.get(e);if(n)if("function"!=typeof t)n.forEach((e=>{const t=this.originalCallbackMap.get(e);this.callbackMap.delete(t),this.originalCallbackMap.delete(e)})),n.clear();else if(this.surround){const e=this.callbackMap.get(t);n.delete(e),this.callbackMap.delete(t),this.originalCallbackMap.delete(e)}else n.delete(t)}emit(e,...t){if(this.eventMap.has(e)){new Set(this.eventMap.get(e)).forEach((e=>e(...t)))}}removeAllListeners(e){this.off(e)}getListenersLength(e){const t=this.eventMap.get(e);return t?t.size:0}}},2582:(e,t,n)=>{"use strict";n.d(t,{iw:()=>o,gm:()=>i,wZ:()=>a,cj:()=>s,qB:()=>c,Mq:()=>l,Ae:()=>d,DD:()=>u,ux:()=>h,Qw:()=>f,jP:()=>g});var r=n(665);const o=r.Z.platform,i="devtools"===r.Z.platform,a="android"===r.Z.platform,s="ios"===r.Z.platform,c="windows"===r.Z.platform,l="mac"===r.Z.platform,d="mina"===r.Z.platform,u=c||l;const p=r.Z.host||{},h="SDK"===p.env,f=(p.env,p.env,p.forceUseNativeMap||!1),g="object"==typeof window&&window&&window.__wkrenderer_h5},2046:(e,t,n)=>{"use strict";n.d(t,{s:()=>s});var r=n(8159);const o=new r.Z({maxListeners:20,newListener:!1}),i=new r.Z({maxListeners:20,newListener:!1});const a={};function s(e){if(e=e[0].toUpperCase()+e.slice(1),!a[e]){let t=new WeakMap;a[e]={getGlobalListeners:()=>o.listeners(e),getInternalListeners:()=>i.listeners(e),emit:(...t)=>{i.emit(e,...t),o.emit(e,...t)},emitGlobal:(...t)=>{o.emit(e,...t)},emitInternal:(...t)=>{i.emit(e,...t)},internalOnMethod:(t,n={})=>{"function"==typeof t&&(n.prepend?n.once?i.prependOnceListener(e,t):i.prependListener(e,t):n.once?i.once(e,t):i.on(e,t))},internalOffMethod:t=>{"function"==typeof t&&i.off(e,t)},onMethod:n=>{const r=function(e,t){return"function"!=typeof t?(console.error(`on${e} should accept a function instead of ${typeof t}`),null):__errorTracer__.surroundThirdByTryCatch(t,`at api on${e} callback function`)}(e,n);r&&(t.set(n,r),o.on(e,r))},offMethod:n=>{if(function(e,t){return!t||"function"==typeof t||(console.error(`off${e} should accept a function instead of ${typeof t}`),!1)}(e,n))if(n){if(t.has(n)){const r=t.get(n);t.delete(n),o.off(e,r)}}else t=new WeakMap,o.removeAllListeners(e)}}}return a[e]}},8159:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,y:()=>s});var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(){this._events={},this._conf&&i.call(this,this._conf)}function i(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=void 0!==e.maxListeners?e.maxListeners:20,e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener)):this._maxListeners=20}function a(e,t){console.warn(`[Event] ${e} listeners of event ${t} have been added, possibly causing memory leak.`)}function s(e){this._events={},this._newListener=!1,this._removeListener=!1,i.call(this,e)}s.prototype.delimiter=".",s.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},s.prototype.event="",s.prototype.once=function(e,t){return this._once(e,t,!1)},s.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},s.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},s.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},s.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},s.prototype._many=function(e,t,n,r){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function i(){return 0==--t&&o.off(e,i),n.apply(this,arguments)}return i._origin=n,this._on(e,i,r),o},s.prototype.emit=function(){this._events||o.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,r,i,a,s=arguments.length;if(this._all&&this._all.length){if(a=this._all.slice(),s>3)for(t=new Array(s),i=0;i<s;i++)t[i]=arguments[i];for(r=0,n=a.length;r<n;r++)switch(this.event=e,s){case 1:a[r].call(this,e);break;case 2:a[r].call(this,e,arguments[1]);break;case 3:a[r].call(this,e,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}}if("function"==typeof(a=this._events[e])){switch(this.event=e,s){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),i=1;i<s;i++)t[i-1]=arguments[i];a.apply(this,t)}return!0}if(a&&(a=a.slice()),a&&a.length){if(s>3)for(t=new Array(s-1),i=1;i<s;i++)t[i-1]=arguments[i];for(r=0,n=a.length;r<n;r++)switch(this.event=e,s){case 1:a[r].call(this);break;case 2:a[r].call(this,arguments[1]);break;case 3:a[r].call(this,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},s.prototype.emitAsync=function(){this._events||o.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,i,a,s=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),i=1;i<c;i++)t[i]=arguments[i];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:s.push(this._all[r].call(this,e));break;case 2:s.push(this._all[r].call(this,e,arguments[1]));break;case 3:s.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[r].apply(this,t))}}if("function"==typeof(a=this._events[e]))switch(this.event=e,c){case 1:s.push(a.call(this));break;case 2:s.push(a.call(this,arguments[1]));break;case 3:s.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];s.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),c>3)for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];for(r=0,n=a.length;r<n;r++)switch(this.event=e,c){case 1:s.push(a[r].call(this));break;case 2:s.push(a[r].call(this,arguments[1]));break;case 3:s.push(a[r].call(this,arguments[1],arguments[2]));break;default:s.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},s.prototype.on=function(e,t){return this._on(e,t,!1)},s.prototype.prependListener=function(e,t){return this._on(e,t,!0)},s.prototype.onAny=function(e){return this._onAny(e,!1)},s.prototype.prependAny=function(e){return this._onAny(e,!0)},s.prototype.addListener=s.prototype.on,s.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},s.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||o.call(this),this._newListener&&this.emit("newListener",e,t),this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,a.call(this,this._events[e].length,e))):this._events[e]=t,this},s.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,o=[];if(!this._events[e])return this;n=this._events[e],o.push({_listeners:n});for(var i=0;i<o.length;i++){if(n=o[i]._listeners,r(n)){for(var a=-1,s=0,c=n.length;s<c;s++)if(n[s]===t||n[s].listener&&n[s].listener===t||n[s]._origin&&n[s]._origin===t){a=s;break}if(a<0)continue;return this._events[e].splice(a,1),0===n.length&&delete this._events[e],this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var n=Object.keys(t);for(var r in n){var o=n[r],i=t[o];i instanceof Function||"object"!=typeof i||null===i||(Object.keys(i).length>0&&e(t[o]),0===Object.keys(i).length&&delete t[o])}}}(this.listenerTree),this},s.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(e){return void 0===e?(!this._events||o.call(this),this):(this._events&&(this._events[e]=null),this)},s.prototype.listeners=function(e){return this._events||o.call(this),this._events[e]||(this._events[e]=[]),r(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},s.prototype.eventNames=function(){return Object.keys(this._events)},s.prototype.listenerCount=function(e){return this.listeners(e).length},s.prototype.listenersAny=function(){return this._all?this._all:[]};const c=s},1661:(e,t,n)=>{"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.d(t,{n:()=>r})},946:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});class r{constructor(e){if(this._status="pending",this._return=void 0,this._processors=[],"function"!=typeof e)throw new TypeError("Promise resolver is not a function");try{e((e=>{"pending"===this._status&&(this._status="then",this._return=e,this._consume())}),(e=>{"pending"===this._status&&(this._status="catch",this._return=e,this._consume())}))}catch(e){this._status="catch",this._return=e,this._consume()}}_consume(){if("pending"===this._status)return;let e;do{e=this._processors.shift()}while(e&&e.type!==this._status);if(e)try{this._return=e.func(this._return),this._status="then"}catch(e){this._return=e,this._status="catch"}finally{this._consume()}}then(e){return this._processors.push({func:e,type:"then"}),this._consume(),this}catch(e){return this._processors.push({func:e,type:"catch"}),this._consume(),this}static resolve(e){return new r((t=>t(e)))}static reject(e){return new r((()=>{throw e}))}}},9187:(e,t,r)=>{"use strict";r.d(t,{QN:()=>g,It:()=>h,zd:()=>p});var o=r(665),a=r(6998),s=r(2851),c=r(1529);let l=0,d={};o.Z.onReady((()=>{l=o.Z.appType,d=o.Z.appLaunchInfo}));const u=(e,t)=>{const n=[];return t.forEach((t=>{let r=e[t];"boolean"==typeof r&&(r=r?1:0),n.push(`${t}:${r}`)})),n.join("|")},p=["getAccountInfoSync","getLaunchOptionsSync","arrayBufferToBase64","base64ToArrayBuffer","getExtConfig","getExtConfigSync","canIUse","setPageStyle","onError","offError"],h=({name:e,data:t})=>{const r=void 0!==i?i.getCurrentPagesByDomain(""):[],o=r.length>0&&r[r.length-1].__route__||"",s=(0,a._getCurrentNetworkType)(),c=n&&n.version&&n.version.version||"";let p="";switch(e){case"loadFontFace":p=u(t,["family","source","global","scopes"]);break;case"requestSubscribeMessage":p=u(t,["templateCount","templateType","operationType"]);break;case"openCustomerServiceChat":p=u(t,["extInfo","corpId"])}const h=[Math.round(Date.now()/1e3),d.scene,d.sessionid||d.sessionId,o,s,c,e,p,l,1,""].join(",");Reporter.reportKeyValue({key:"APIUse",value:h,immediately:!0})};let f={};function g(e){const t=s.Z.currentWebviewId;f[t]=f[t]||{},f[t][e]=!0}(0,c.Tc)((()=>{let e=!1;Object.keys(f).forEach((t=>{const n=f[t];n.cameraFrame&&n.webgl&&(e=!0)})),e&&h({name:"suspectAR",data:{}}),f={}}))},7452:(e,t,n)=>{"use strict";n.d(t,{Em:()=>o,HD:()=>i,hj:()=>a,jn:()=>s,o8:()=>c,Ft:()=>l,Kn:()=>d,kJ:()=>u,mf:()=>p,eP:()=>h,x7:()=>f});const r=Object.prototype.toString;function o(e){return r.call(e).slice(8,-1)}const i=e=>"String"===o(e),a=e=>"Number"===o(e),s=e=>!0===e||!1===e||"Boolean"===o(e),c=e=>void 0===e,l=e=>null===e,d=(Number.isNaN,Number.isFinite,e=>"Object"===o(e)),u=Array.isArray||(e=>"Array"===o(e)),p=e=>"function"==typeof e,h=e=>"ArrayBuffer"===o(e);function f(e,t,n="parameter"){const r=o(t),i=o(e);if(i!==r)return`${n} should be ${r} instead of ${i};`;let a="";switch(r){case"Object":Object.keys(t).forEach((r=>{a+=f(e[r],t[r],`${n}.${r}`)}));break;case"Array":if(e.length<t.length)return`${n} should have at least ${t.length} item;`;for(let r=0;r<t.length;++r)a+=f(e[r],t[r],`${n}[${r}]`)}return a}},2783:(e,t,n)=>{"use strict";n.d(t,{M8:()=>p,Hw:()=>h,ZT:()=>f,op:()=>g,Yt:()=>_,gA:()=>m,Qu:()=>y,SW:()=>A,Vl:()=>b,NX:()=>w,mh:()=>C});var r=n(3451),o=n.n(r),i=n(1503),a=n.n(i),s=n(7452),c=n(9045);const l=["errMsg"],d=["errMsg"],u=["success","fail","complete"];function p(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function h(e,t){return function(...n){try{return e(...n)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:t})}}}}function f(){}const g=h((function(e){const t=(0,s.Em)(e);if("Array"===t||"Object"===t)try{e=JSON.stringify(e)}catch(e){throw e.type="AppServiceSdkKnownError",e}else e="String"===t||"Number"===t||"Boolean"===t?e.toString():"Date"===t?e.getTime().toString():"Undefined"===t?"undefined":"Null"===t?"null":"";return{data:e,dataType:t}}),"anyTypeToString");const _=h((function(e,t){return"String"===t?e:e="Array"===t||"Object"===t?JSON.parse(e):"Number"===t?parseFloat(e):"Boolean"===t?"true"===e:"Date"===t?new Date(parseInt(e,10)):"Undefined"===t?void 0:"Null"===t?null:""}),"stringToAnyType");function m(e){return function(t={},...n){t=t||{};const{success:r,fail:o,complete:i}=t;return r||o||i?e.apply(this,[t,...n]):new Promise(((r,o)=>{const i=Object.assign({success:r,fail:o},t);e.apply(this,[i,...n])}))}}function y(e,t,n){const r=m(n.value);return n.value=function(){return r.apply(this,arguments)},n}const v=Symbol("ErrorInfosSymbol");class A extends Error{constructor(e,t={}){super(e),this[v]=t}}const b=e=>(t={},...n)=>new Promise(((r,i)=>e(a()(a()({},t),{},{success:r,fail:e=>{const{errMsg:t}=e,n=o()(e,l),r=new Error(t.replace(/^\w+:fail ?/,""));Object.assign(r,n),r[v]=n,i(r)},complete:(e={})=>{const{errMsg:t}=e,n=o()(e,d);if(t&&!/^\w+:(ok|fail)/.test(t)){const t=new Error(e.errMsg.replace(/^\w+:/,""));Object.assign(t,n),t[v]=n,t._complete_hook=!0,i(t)}}}),...n))),w=(e,t)=>(n={},...r)=>{let{success:i,fail:a,complete:s}=n,l=o()(n,u);const d={success:i,fail:a,complete:s};t(l,...r).then((t=>(0,c.FE)({name:e,args:d,success:!0,res:t})),(t=>{t._complete_hook?(0,c.S3)({name:e,args:d,errMsg:t.message,res:t[v]||{}}):(0,c.FE)({name:e,args:d,success:!1,errMsg:t.message,res:t[v]||{}})}))},C=(e,t)=>m(w(e,t))},5287:(e,t,n)=>{"use strict";n.d(t,{I:()=>l});var r=n(2999),o=n(665),i=n(2815),a=n(6602);let s="";const c=(e={})=>{try{s=e.transitExtraData.adUxInfo}catch(e){s=""}};void 0!==__safeway__&&(o.Z.onReady((()=>{c(o.Z.appLaunchInfo)})),(0,r.n)("onAppEnterForeground",(e=>{c(e)})),(0,r.n)("onAppEnterBackground",((e={})=>{"back"!==e.mode&&"close"!==e.mode||(s="")})),(0,a.L)("getAdUxInfo",((e,t)=>{(0,i.n)("adUxInfoGot",{adUxInfo:s,callbackId:e.callbackId},[t])})));const l=()=>s},2642:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var r=n(5287);function o(e,t,n,o){"navigateToMiniProgram"!==e&&"openUrl"!==e&&"private_openUrl"!==e||(t.adUxInfo=t.adUxInfo||(0,r.I)()),__safeway__.bridge.invoke(e,t,n,o)}},1532:(e,t,n)=>{"use strict";n.d(t,{be:()=>S,F0:()=>v,wo:()=>y,IN:()=>w,bb:()=>C,qu:()=>I,oQ:()=>b});var r=n(2642),o=n(9045);let i={},a={},s={},c=0;const l=(e,t)=>Object.keys(t).map((n=>Object.keys(t[n]).map((r=>({func:n,result:e,errMsg:r,count:t[n][r]}))))),d=()=>{const e=l(1,i),t=l(2,a),n=l(3,s),r=[].concat(e,t,n);0!==r.length&&(0,o.IN)("reportRealtimeAction",{actionData:JSON.stringify({business:"mmbizwxajsapi",dataType:1,dataArray:r,appType:Reporter.getAppType()})}),i={},a={},s={}};var u=n(2783),p=n(7188),h=n(665),f=n(7452),g=n(4915),_=n(2582);const m=["open","openSync","close","closeSync","fstat","fstatSync","write","writeSync","read","readSync","truncate","truncateSync","ftruncate","ftruncateSync"];function y(e,t){return Object.keys(e).reduce(((n,r)=>("function"==typeof e[r]&&(n[r]=__errorTracer__.surroundThirdByTryCatch(e[r],`at api ${t} ${r} callback function`),delete e[r]),n)),{})}function v(e,t,n,r){e.errMsg=e.errMsg||`${t}:ok`;const o=0===e.errMsg.indexOf(`${t}:ok`),l=new RegExp(`${t}:(fail |fail:)?cancel`).test(e.errMsg),u=0===e.errMsg.indexOf(`${t}:fail`);"function"==typeof r.beforeAll&&r.beforeAll(e),o?function(e,t,n){const r=function(){"function"==typeof e.success&&e.success(t),"function"==typeof n.afterSuccess&&n.afterSuccess(t)};"function"==typeof n.beforeSuccess?2===n.beforeSuccess._argumentsLength?n.beforeSuccess(t,r):(n.beforeSuccess(t),r()):r()}(n,e,r):l?function(e,t,n,r){const o=new RegExp(`${t}:(fail |fail:)?cancel`);e.errMsg=e.errMsg.replace(o,`${t}:fail cancel`),"function"==typeof n.fail&&n.fail(e),"function"==typeof r.beforeCancel&&r.beforeCancel(e),"function"==typeof n.cancel&&n.cancel(e),"function"==typeof r.afterCancel&&r.afterCancel(e)}(e,t,n,r):u&&function(e,t,n,r){"function"==typeof e.beforeFail&&e.beforeFail(n),"function"==typeof r.fail&&r.fail(n),"function"==typeof e.afterFail&&e.afterFail(n),(0,f.mf)(e.checkNeedReportFail)&&!1===e.checkNeedReportFail(n)||Reporter.reportIDKey({key:`${t}_fail`})}(r,t,e,n),"function"==typeof n.complete&&n.complete(e),"function"==typeof r.afterAll&&r.afterAll(e),((e,t,n,r,o)=>{let l;l=t?i:n?a:s,l[e]=l[e]||{},l[e][o]=(l[e][o]||0)+1,Date.now()-c>=6e4&&(c=Date.now(),setTimeout(d,6e4))})(t,o,u,0,e.errMsg)}function A(e){return(t,n={},o={},i="/")=>{(0,f.Kn)(n)||(n={}),"operateWXData"===t&&n._isFromBaseOperateWXData;const a=y(n,t);if(n=Object.assign({},n),o=function(e,t){return Object.keys(e).reduce(((n,r)=>("function"==typeof e[r]&&(n[r]=(0,u.Hw)(e[r],`at api ${t} ${r} callback function`),n[r]._argumentsLength=e[r].length),n)),{})}(o,t),Reporter.reportIDKey({key:t}),!e){if(0===h.Z.appType&&p.g4.has(t)&&!(0,p.V8)(t))return void v({errMsg:`${t}:fail API has been banned`},t,a,o);delete n.pluginId,delete n.permissionBytes,"/"!==i&&(n.pluginId=i)}const s=(c=t,_.jP||_.wZ&&m.includes(c));var c;(0,r.d)(t,n,(e=>{v(e,t,a,o)}),s)}}const b=A(!1),w=(e,t,n)=>{g.e4.indexOf(e)<0?b(e,t,n):(0,g.LY)(e,t,n)},C=(e,t,n)=>(0,u.Vl)((t=>w(e,t,n)))(t),I=e=>e?(t,n,r)=>{b(t,n,r,e)}:w,E=A(!0),S=(e,t,n)=>{E(e,t,n)}},2833:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var r=n(2783);function o(e,t){!function(e,t){__safeway__.bridge.on(e,t)}(e,(0,r.Hw)(t,`at api ${e} callback function`))}},2815:(e,t,n)=>{"use strict";function r(e,t,n){!function(e,t,n){__safeway__.bridge.publish(e,t,n)}(e,{data:t,options:{timestamp:Date.now()}},n)}n.d(t,{n:()=>r})},6602:(e,t,n)=>{"use strict";function r(e,t){!function(e,t){__safeway__.bridge.subscribe(e,t)}(e,(({data:e,options:n},r,o={})=>{const i=n&&n.timestamp||0,a=Date.now();Reporter.speedReport({key:"webview2AppService",data:e||{},timeMark:{startTime:i,endTime:a,nativeTime:o.nativeTime||0}}),"function"==typeof t&&t(e,r)}))}n.d(t,{L:()=>r})},9045:(e,t,n)=>{"use strict";n.d(t,{be:()=>i.be,gM:()=>T,r3:()=>l,FE:()=>h,S3:()=>p,YG:()=>u,zy:()=>d,F0:()=>i.F0,wo:()=>i.wo,dw:()=>f.d,IN:()=>i.IN,bb:()=>i.bb,qu:()=>i.qu,oQ:()=>i.oQ,jQ:()=>a.j,nY:()=>r.n,Ld:()=>o.L});var r=n(2815),o=n(6602),i=n(1532),a=n(2833),s=n(2783),c=n(7452);function l(e,t,n){const r=(0,c.x7)(t,n);return!r||(u(e,t,`parameter error: ${r}`),!1)}function d(e,t){const n=(0,c.x7)(e,t);if(n)throw new Error(`parameter error: ${n}`)}function u(e,t={},n="",r){h({name:e,args:t,errMsg:n,errCode:r,success:!1})}function p({name:e,args:t={},errMsg:n="",res:r={}}){t=t||{};const o=`${e}:${n}`,i=__errorTracer__.surroundThirdByTryCatch(t.complete||s.ZT,`at api ${e} complete callback function`);r.errMsg=o,i(r)}function h({name:e,args:t={},success:n=!0,errMsg:r="",errCode:o,res:i={}}){t=t||{};const a=n?`${e}:ok`:`${e}:fail ${r}`,l=__errorTracer__.surroundThirdByTryCatch((n?t.success:t.fail)||s.ZT,`at api ${e} ${n?"success":"fail"} callback function`),d=__errorTracer__.surroundThirdByTryCatch(t.complete||s.ZT,`at api ${e} complete callback function`);i.errMsg=a,(0,c.hj)(o)&&(i.errCode=o),l(i),d(i)}var f=n(2642),g=n(665),_=n(2851);let m="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",y="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function v(e){return t=>(0,c.HD)(t)&&t.length>e?t.substr(0,e):t}function A(e,t=!0){const n=(0,c.Em)(e);switch(n){case"Number":case"Boolean":return e;case"String":return v(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return`[Error:${A(e.message)}|${A(e.stack)}]`;case"Object":return t?Object.keys(e).map((t=>`${A(t)}=${A(e[t],!1)}`)).sort(((e,t)=>e.length-t.length)).join("&")||"{}":`[${n}]`;default:return`[${n}]`}}function b({WXDataApiName:e,argument:t,isSuccess:n,invokeTime:r,costTime:o,result:i,errMsg:a,isConfirm:s,queueLength:c,wxdataQueueTimestamp:l,wxdataDequeueTimestamp:d,beginCGITimestamp:u,CGICallbackTimestamp:p,beginCGITimestampAfterConfirm:h,CGICallbackTimestampAfterConfirm:f,wxlibCallbackTimestamp:b,requestInQueue:w,requestingCount:C,cost1:I,cost2:E,cost3:S,cost4:T,cost5:x,cost6:k}){Math.random()<.05&&setTimeout((()=>{const P=_.Z.currentNetworkType,D=g.Z.appType+1e3,O=g.Z.appLaunchInfo&&void 0!==g.Z.appLaunchInfo.scene?g.Z.appLaunchInfo.scene:0,N=[e,A(JSON.stringify(t)),n?1:0,r,o,P,A(i),D,O,m,y,a&&A(a)||"",s?1:0,c,I,E,S,T,x,k,0,w?1:0,C,r,l,d,u,p,h,f,b].map(v(1024)).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:N})}),0)}(0,c.HD)(m)&&(m=m.replace(" ","")),(0,c.HD)(y)&&(y=y.replace(" ","-"));let w=0;const C=wxNativeConsole.createLogger("baseOperateWXData"),I=["webapi_getuserinfo","webapi_getwerunstep_history","subscribemsg"],E=["webapi_getuserinfo","webapi_getuserallappauth","webapi_getadvert","webapi_getshareinfo"],S=["qbase_commapi","webapi_botdemo"];function T(e={},t={},...n){const r=Object.assign({},e);r._isFromBaseOperateWXData=!0;const o=t.beforeAll,a=t.beforeSuccess,s=t.beforeFail,c=r.data&&r.data.api_name;I.includes(c)?r.requestInQueue=!0:r.requestInQueue=!1,E.includes(c)?r.isImportant=!0:r.isImportant=!1,S.includes(r.data&&r.data.api_name)&&(r.keepAlive=!0);const l={isSuccess:void 0,WXDataApiName:c,argument:r,invokeTime:Date.now(),requestInQueue:r.requestInQueue,requestingCount:++w};C.info(`${r.data.api_name} _options.requestInQueue`,r.requestInQueue),(0,i.IN)("operateWXData",r,{beforeAll(e){const n=Date.now();w--,l.costTime=n-l.invokeTime;try{if(e&&e.data&&e.data.data?l.result=JSON.stringify(e.data):l.result=e.data,e.clientInfo&&"object"==typeof e.clientInfo){const t=e.clientInfo;Object.keys(t).forEach((e=>{l[e]=t[e]})),l.cost1=t.wxdataQueueTimestamp-l.invokeTime,l.cost2=t.wxdataDequeueTimestamp-t.wxdataQueueTimestamp,l.cost3=t.beginCGITimestamp-t.wxdataDequeueTimestamp,l.cost4=t.CGICallbackTimestamp-t.beginCGITimestamp,l.cost5=t.wxlibCallbackTimestamp-t.CGICallbackTimestamp,l.cost6=n-t.wxlibCallbackTimestamp}}catch(e){C.error(e)}"function"==typeof o&&o.call(t,e)},beforeSuccess(e){l.isSuccess=!0,r.data.data&&r.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=l),"function"==typeof a&&a.call(t,e),b(l)},beforeFail(e){l.isSuccess=!1,l.errMsg=e.errMsg,r.data.data&&r.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=l),"function"==typeof s&&s.call(t,e),b(l)}},...n)}},2999:(e,t,n)=>{"use strict";n.d(t,{n:()=>a,r:()=>s});var r=n(2833),o=n(2046);const i={},a=(e,t)=>{const n=(0,o.s)(`WeixinJSBridge-${e}`);i[e]||((0,r.j)(e,((...e)=>{n.emit(...e)})),i[e]=!0),n.internalOnMethod(t)},s=(e,t)=>{(0,o.s)(`WeixinJSBridge-${e}`).internalOffMethod(t)}},2159:(e,t,n)=>{"use strict";n.d(t,{yH:()=>o,Do:()=>i,rW:()=>s,vL:()=>c,bh:()=>l,KK:()=>a});var r=n(9045);const o=e=>{(0,r.r3)("saveFile",e,{tempFilePath:""})&&(0,r.IN)("saveFile",e)},i=(e,t)=>{if(!e||"string"!=typeof e)throw new Error("tempFilePath must be a string");if(void 0!==t&&"string"!=typeof t)throw new Error("filePath must be a string");let n,o;if((0,r.IN)("saveFileSync",{tempFilePath:e,filePath:t,success(e){o=e.savedFilePath},fail(e){n=e.errMsg}}),n)throw new Error(n);return o},a=e=>{(0,r.r3)("openDocument",e,{filePath:""})&&(e.showMenu=e.showMenu||!1,(0,r.IN)("openDocument",e))},s=(e={})=>{(0,r.IN)("getSavedFileList",e)},c=(e={})=>{(0,r.r3)("getSavedFileInfo",e,{filePath:""})&&(0,r.IN)("getSavedFileInfo",e)},l=(e={})=>{(0,r.r3)("removeSavedFile",e,{filePath:""})&&(0,r.IN)("removeSavedFile",e)}},4079:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(9045),o=n(7452);const i=(e={})=>{if((0,r.r3)("getFileInfo",e,{filePath:""})){if(void 0!==e.digestAlgorithm){const t=(0,o.x7)(e,{digestAlgorithm:""});if(t)return void(0,r.YG)("getFileInfo",e,`parameter error: ${t}`);if(-1===["md5","sha1"].indexOf(e.digestAlgorithm))return void(0,r.YG)("getFileInfo",e,`parameter error: invalid digestAlgorithm "${e.digestAlgorithm}"`)}(0,r.IN)("getFileInfo",e,{})}}},3775:(e,t,n)=>{"use strict";n.d(t,{t2:()=>T,ZP:()=>O,WZ:()=>N});var r=n(2159),o=n(4079),i=n(3270),a=n(9045);const s=["ascii","base64","binary","hex","ucs2","ucs-2","utf16le","utf-16le","utf8","utf-8","latin1"];var c=n(7618),l=n(665),d=n(2582);const u=d.gm?"http://":"wxfile://";let p,h=[],f=!1;d.cj?p=new RegExp(`^${u}tmp_`):d.wZ&&(p=new RegExp("^tmp_")),l.Z.onReady((()=>{d.wZ||d.cj?(0,a.IN)("readdir",{dirPath:u,success(e){const t=e.files||[];h=t.filter((e=>p.test(e))),f=!0}}):f=!0}));const g=(e,t)=>{if(!/^wxfile:\/\/(tmp\/?)?$/.test(t))return;const n=c.L.get();e.files=e.files.filter((e=>(new RegExp(`^${t}`).test(e)||(e=`${t}${e}`),-1===n.indexOf(e)))).filter((e=>f?-1===h.indexOf(e):!p.test(e)))};class _{constructor({mode:e,size:t,lastAccessedTime:n,lastModifiedTime:r}){this.mode=e,this.size=t,this.lastAccessedTime=n,this.lastModifiedTime=r}_checkModeProperty(e){return(61440&this.mode)===e}isDirectory(){return this._checkModeProperty(16384)}isFile(){return this._checkModeProperty(32768)}}const m=(e,t)=>{let n=!0;if(["mode","size","lastAccessedTime","lastModifiedTime"].forEach((t=>{n=n&&void 0!==e[t]})),n)e.stats=new _(e),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime;else if(e.stats&&1===Object.keys(e.stats).length&&e.stats[""])e.stats=new _(e.stats[""]);else{const n=[];let r=e.stats;d.wZ&&(r=e,n.push({path:"/",stats:y(t)})),Object.keys(r).forEach((e=>{if("errMsg"===e)return;const t=r[e];""===e&&(e="/"),n.push({path:e,stats:new _(t)}),delete r[e]})),e.stats=n}},y=(e,t=!1)=>{if(!e||"string"!=typeof e)throw new Error("path must be a string");let n,r;if((0,a.IN)("statSync",{path:e,recursive:t,success(t){m(t,e),n=t.stats},fail(e){r=e.errMsg}}),r)throw new Error(r);return n};var v=n(7452);const A="readZipEntry",b=["a","ax","a+","ax+","as","as+","r","r+","w","wx","w+","wx+"];var w=n(5260);var C=n(1503),I=n.n(C),E=n(5542);var S=n(1095);const T={saveFile:r.yH,saveFileSync:r.Do,getSavedFileList:r.rW,getSavedFileInfo:r.vL,removeSavedFile:r.bh,getFileInfo:o.h,readFile:i.p,readFileSync:i.N,writeFile:(e={})=>{(0,a.r3)("writeFile",e,{filePath:""})&&(e.encoding&&-1===s.indexOf(e.encoding)?(0,a.YG)("writeFile",e,`invalid encoding "${e.encoding}"`):(0,a.IN)("writeFile",e,{}))},writeFileSync:(e,t,n)=>{if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===s.indexOf(n))throw new Error(`invalid encoding "${n}"`);let r;if((0,a.IN)("writeFileSync",{filePath:e,data:t,encoding:n,fail(e){r=e.errMsg}}),r)throw new Error(r)},mkdir:(e={})=>{(0,a.r3)("mkdir",e,{dirPath:""})&&(0,a.IN)("mkdir",e)},mkdirSync:(e,t=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");let n;if((0,a.IN)("mkdirSync",{dirPath:e,recursive:t,fail(e){n=e.errMsg}}),n)throw new Error(n)},rmdir:(e={})=>{(0,a.r3)("rmdir",e,{dirPath:""})&&(0,a.IN)("rmdir",e)},rmdirSync:(e,t=!1)=>{if(!e||"string"!=typeof e)throw new Error("dirPath must be a string");let n;if((0,a.IN)("rmdirSync",{dirPath:e,recursive:t,fail(e){n=e.errMsg}}),n)throw new Error(n)},readdir:(e={})=>{(0,a.r3)("readdir",e,{dirPath:""})&&(0,a.IN)("readdir",e,{beforeSuccess(t){g(t,e.dirPath)}})},readdirSync:e=>{if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");let t,n;if((0,a.IN)("readdirSync",{dirPath:e,success(e){t=e.files},fail(e){n=e.errMsg}},{beforeSuccess(t){g(t,e)}}),n)throw new Error(n);return t},access:(e={})=>{(0,a.r3)("access",e,{path:""})&&(0,a.IN)("access",e)},accessSync:e=>{if(!e||"string"!=typeof e)throw new TypeError("path must be a string");let t;if((0,a.IN)("accessSync",{path:e,fail(e){t=e.errMsg}}),t)throw new Error(t)},unlink:(e={})=>{(0,a.r3)("unlink",e,{filePath:""})&&(0,a.IN)("unlink",e)},unlinkSync:e=>{if(!e||"string"!=typeof e)throw new Error("filePath must be a string");let t;if((0,a.IN)("unlinkSync",{filePath:e,fail(e){t=e.errMsg}}),t)throw new Error(t)},stat:(e={})=>{(0,a.r3)("stat",e,{path:""})&&(0,a.IN)("stat",e,{beforeSuccess:t=>{m(t,e.path)}})},statSync:y,unzip:(e={})=>{(0,a.r3)("unzip",e,{zipFilePath:""})&&(0,a.IN)("unzip",Object.assign({},e,{targetDirectory:e.targetPath}))},copyFile:(e={})=>{(0,a.r3)("copyFile",e,{srcPath:"",destPath:""})&&(0,a.IN)("fs_copyFile",e,{beforeAll(e){e.errMsg=e.errMsg.replace("fs_copyFile:","copyFile:")}})},copyFileSync:(e,t)=>{if(!e||"string"!=typeof e)throw new Error("srcPath must be a string");if(!t||"string"!=typeof t)throw new Error("destPath must be a string");let n;if((0,a.IN)("fs_copyFileSync",{srcPath:e,destPath:t,fail(e){n=e.errMsg.replace("fs_copyFileSync:","copyFileSync:")}}),n)throw new Error(n)},rename:(e={})=>{(0,a.r3)("rename",e,{oldPath:"",newPath:""})&&(0,a.IN)("fs_rename",e,{beforeAll(e){e.errMsg=e.errMsg.replace(/^fs_/,"")}})},renameSync:(e,t)=>{if(!e||"string"!=typeof e)throw new Error("oldPath must be a string");if(!t||"string"!=typeof t)throw new Error("newPath must be a string");let n;if((0,a.IN)("fs_renameSync",{oldPath:e,newPath:t,fail(e){n=e.errMsg.replace(/^fs_/,"")}}),n)throw new Error(n)},appendFile:(e={})=>{(0,a.r3)("appendFile",e,{filePath:""})&&(e.encoding&&-1===s.indexOf(e.encoding)?(0,a.YG)("appendFile",e,`invalid encoding "${e.encoding}"`):(0,a.IN)("fs_appendFile",e,{}))},appendFileSync:(e,t,n)=>{if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===s.indexOf(n))throw new Error(`invalid encoding "${n}"`);let r;if((0,a.IN)("fs_appendFileSync",{filePath:e,data:t,encoding:n,fail(e){r=e.errMsg}}),r)throw new Error(r)},readZipEntry:(e={})=>{(0,a.r3)(A,e,{filePath:""})&&((0,v.o8)(e.encoding)||-1!==s.indexOf(e.encoding)?"all"===e.entries||Array.isArray(e.entries)?(0,a.IN)(A,e,{beforeSuccess:e=>(e.entries&&Object.keys(e.entries).forEach((t=>{if(e[t]&&(e.entries[t].data=e[t],delete e[t]),"ok"===e.entries[t].errMsg?e.entries[t].errMsg="readZipEntry:ok":e.entries[t].errMsg=`readZipEntry:fail ${e.entries[t].errMsg}`,0===t.indexOf("file:")){const n=t.replace("file:","");e.entries[n]=e.entries[t],delete e.entries[t]}})),e)}):(0,a.YG)(A,e,"invalid entries"):(0,a.YG)(A,e,`invalid encoding "${e.encoding}"`))},open:(e={})=>{const t=Object.assign({},e);(0,a.r3)("open",e,{filePath:""})&&(void 0===e.flag||b.includes(e.flag)?(void 0===e.flag&&(t.flag="r"),(0,a.IN)("open",t)):(0,a.YG)("open",e,`invalid flag "${e.flag}"`))},openSync:(e={})=>{const{filePath:t}=e;let n,r,{flag:o}=e;if(!t||"string"!=typeof t)throw new TypeError("filePath must be a string");if(void 0!==o&&!b.includes(o))throw new w.iZ(`invalid flag: ${o}`);if(void 0===o&&(o="r"),(0,a.IN)("openSync",{filePath:t,flag:o,fail(e){r=e.errMsg},success(e){n=e.fd}}),r)throw new Error(r);return n},close:(e={})=>{(0,a.r3)("close",e,{fd:""})&&(0,a.IN)("close",e)},closeSync:({fd:e}={})=>{if(!e||"string"!=typeof e)throw new TypeError("fd must be a string");let t;if((0,a.IN)("closeSync",{fd:e,fail(e){t=e.errMsg}}),t)throw new Error(t)},fstat:(e={})=>{(0,a.r3)("fstat",e,{fd:""})&&(0,a.IN)("fstat",e,{beforeSuccess(e){const{mode:t,size:n}=e;let{lastAccessedTime:r,lastModifiedTime:o}=e;r>1617e9&&(r=Math.floor(r/1e3)),o>1617e9&&(o=Math.floor(o/1e3)),e.stats=new _({mode:t,size:n,lastAccessedTime:r,lastModifiedTime:o}),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime}})},fstatSync:({fd:e}={})=>{if(!e||"string"!=typeof e)throw new TypeError("fd must be a string");let t,n;if((0,a.IN)("fstatSync",{fd:e,fail(e){n=e.errMsg},success(e){const{mode:n,size:r}=e;let{lastAccessedTime:o,lastModifiedTime:i}=e;o>1617e9&&(o=Math.floor(o/1e3)),i>1617e9&&(i=Math.floor(i/1e3)),t=new _({mode:n,size:r,lastAccessedTime:o,lastModifiedTime:i})}}),n)throw new Error(n);return t},write:(e={})=>{const t=Object.assign({},e);if((0,a.r3)("write",t,{fd:""}))if(t.encoding&&-1===s.indexOf(t.encoding))(0,a.YG)("write",t,`invalid encoding "${t.encoding}"`);else{if((0,v.eP)(t.data)){if(t.data.byteLength>10485760)return void(0,a.YG)("write",t,"ArrayBuffer exceed size limit (10M)");("number"!=typeof t.offset||t.offset<0)&&(t.offset=0),("number"!=typeof t.length||t.length<0)&&(t.length=t.data.byteLength-t.offset)}else if(!(0,v.HD)(t.data))return void(0,a.YG)("write",t,"data must be a string or ArrayBuffer");"number"!=typeof t.position&&(t.position=void 0),(0,a.IN)("write",t)}},writeSync:({fd:e,data:t,offset:n,length:r,encoding:o,position:i}={})=>{if(!e||"string"!=typeof e)throw new TypeError("fd must be a string");if(o&&-1===s.indexOf(o))throw new w.iZ(`invalid encoding "${o}"`);if((0,v.eP)(t)){if(t.byteLength>10485760)throw new w.iZ("ArrayBuffer exceed size limit (10M)");("number"!=typeof n||n<0)&&(n=0),("number"!=typeof r||r<0)&&(r=t.byteLength-n)}else if(!(0,v.HD)(t))throw new TypeError("data must be a string or ArrayBuffer");let c,l;if("number"!=typeof i&&(i=void 0),(0,a.IN)("writeSync",{fd:e,data:t,offset:n,length:r,encoding:o,position:i,fail(e){c=e.errMsg},success(e){l={bytesWritten:e.bytesWritten}}}),c)throw new Error(c);return l},read:(e={})=>{if(!(0,a.r3)("read",e,{fd:""}))return;if(!(0,v.eP)(e.arrayBuffer))return void(0,a.YG)("FileSystemManager.read",e,"arrayBuffer must be an ArrayBuffer");const t=Object.assign({},e);d.cj&&E.Z&&E.Z.trace&&(t.arrayBufferId=E.Z.trace(t.arrayBuffer,"rw"),delete t.arrayBuffer),(0,v.hj)(t.position)&&t.position<0?t.position=0:(0,v.o8)(t.position)||(0,v.Ft)(t.position)?t.position=null:(0,v.hj)(t.position)||(t.position=0);const n=Number(t.length);Number.isNaN(n)?t.length=0:t.length=n;const r=Number(t.offset);Number.isNaN(r)?t.offset=0:t.offset=r,(0,a.IN)("read",t,{beforeSuccess(t){t.arrayBuffer=e.arrayBuffer},afterAll(){d.cj&&E.Z&&E.Z.untrace&&E.Z.untrace(t.arrayBufferId)}})},readSync:(e={})=>{const{fd:t,arrayBuffer:n}=e;if(!t||"string"!=typeof t)throw new TypeError("fd must be a string");if(!(0,v.eP)(n))throw new TypeError("arrayBuffer must be an ArrayBuffer");const r=Object.assign({},e);d.cj&&E.Z&&E.Z.trace&&(r.arrayBufferId=E.Z.trace(r.arrayBuffer,"rw"),delete r.arrayBuffer),(0,v.hj)(r.position)&&r.position<0?r.position=0:(0,v.o8)(r.position)||(0,v.Ft)(r.position)?r.position=null:(0,v.hj)(r.position)||(r.position=0);const o=Number(r.length);Number.isNaN(o)?r.length=0:r.length=o;const i=Number(r.offset);let s,c;if(Number.isNaN(i)?r.offset=0:r.offset=i,(0,a.IN)("readSync",I()(I()({},r),{},{fail(e){c=e.errMsg},success(e){s={bytesRead:e.bytesRead,arrayBuffer:n}}})),d.cj&&E.Z&&E.Z.untrace&&E.Z.untrace(r.arrayBufferId),c)throw new Error(c);return s},truncate:(e={})=>{(0,a.r3)("truncate",e,{filePath:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),(0,a.IN)("truncate",e,{}))},truncateSync:({filePath:e,length:t}={})=>{if(!e||"string"!=typeof e)throw new Error("filePath must be a string");let n;if("number"!=typeof t&&(t=0),(t=Math.floor(t))<0&&(t=0),(0,a.IN)("truncateSync",{filePath:e,length:t,fail(e){n=e.errMsg}}),n)throw new Error(n)},ftruncate:(e={})=>{(0,a.r3)("ftruncate",e,{fd:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),(0,a.IN)("ftruncate",e))},ftruncateSync:({fd:e,length:t}={})=>{if(!e||"string"!=typeof e)throw new Error("fd must be a string");let n;if("number"!=typeof t&&(t=0),(t=Math.floor(t))<0&&(t=0),(0,a.IN)("ftruncateSync",{fd:e,length:t,fail(e){n=e.errMsg}}),n)throw new Error(n)}};let x="",k="";l.Z.onReady((()=>{try{x=l.Z.env.USER_DATA_PATH,k=l.Z.env.OPEN_DATA_PATH,delete l.Z.env.OPEN_DATA_PATH}catch(e){}}));const P={saveFile:["filePath"],saveFileSync:[1],readFile:["filePath"],readFileSync:[0],writeFile:["filePath"],writeFileSync:[0],mkdir:["dirPath"],mkdirSync:[0],rmdir:["dirPath"],rmdirSync:[0],readdir:["dirPath"],readdirSync:[0],access:["path"],accessSync:[0],unlink:["filePath"],unlinkSync:[0],stat:["path"],statSync:[0],unzip:["zipFilePath","targetPath"],copyFile:["srcPath","destPath"],copyFileSync:[0,1],rename:["oldPath","newPath"],renameSync:[0,1],appendFile:["filePath"],appendFileSync:[0]},D=e=>{const t={};return Object.keys(T).forEach((n=>{const r=T[n];t[n]=(...t)=>{if(!P[n])return r(...t);if(P[n].every((r=>((e,t)=>"string"!=typeof e||!e.startsWith("wxfile://ad")&&(!(0,S.Av)()||!e.startsWith("wxfile://usr")&&!e.startsWith("http://usr"))&&!e.startsWith("opendata"===t?x:k))((n.endsWith("Sync")?t:t[0])[r],e))))return r(...t);if(n.endsWith("Sync"))throw new Error(`${n}:fail permission denied`);t=t[0]||{},(0,a.YG)(n,t,"permission denied")}})),t},O={app:D("app"),game:D("game"),opendata:D("opendata")};function N(){return k}},3270:(e,t,n)=>{"use strict";n.d(t,{p:()=>f,N:()=>g});var r=n(9045),o=n(5014),i=n(6947),a=n(2582),s=n(665),c=n(2288),l=n(6077),d=n(7452),u=n(5260);const p=i.Z.fs;let h=!1;p&&p.FileReader&&s.Z.onReady((()=>{let e=!1;const t=a.cj?"clicfg_appbrand_ios_native_readfile":"clicfg_appbrand_native_readfile";(0,c.b)({experimentId:t,experimentType:"Expt",success:t=>{t&&1===Number(t.testConfig)&&((0,l.T)(/readFile(?:Sync)?$/,1),e=!0)},fail(e){}});const n=(0,o.J)("bindingReadFile");h=e||n}));const f=(e={})=>{if((0,r.r3)("readFile",e,{filePath:""}))if((0,d.o8)(e.encoding)||(0,d.HD)(e.encoding))if((0,d.o8)(e.position)||(0,d.hj)(e.position))if((0,d.o8)(e.length)||(0,d.hj)(e.length))if(h){const t=new p.FileReader;t.onerror=t=>(0,r.YG)("readFile",e,t),t.onread=t=>(0,r.FE)({name:"readFile",args:e,res:{data:t}}),t.read(e.filePath,e.encoding)}else(0,r.IN)("readFile",e);else(0,r.YG)("readFile",e,`invalid length: ${e.length}`);else(0,r.YG)("readFile",e,`invalid position: ${e.position}`);else(0,r.YG)("readFile",e,`invalid encoding: ${e.encoding}`)},g=(e,t,n,o)=>{if(!e||!(0,d.HD)(e))throw new u.iZ(`invalid filePath: ${e}`);if(!(0,d.o8)(t)&&!(0,d.HD)(t))throw new u.iZ(`invalid encoding: ${t}`);if(!(0,d.o8)(n)&&!(0,d.hj)(n))throw new u.iZ(`invalid position: ${n}`);if(!(0,d.o8)(o)&&!(0,d.hj)(o))throw new u.iZ(`invalid length: ${o}`);if(h)try{return p.readFileSync(e,t)}catch(a){throw new Error(a)}let i,a;if((0,r.IN)("readFileSync",{filePath:e,encoding:t,position:n,length:o,success(e){i=e.data},fail(e){a=e.errMsg}}),a)throw new Error(a);return i}},1130:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9045),o=n(2582);function i(e,t,n={},i={},a=(()=>{}),s=(()=>{})){return(c={})=>{n=a(c),(0,r.gM)(Object.assign({},c,{data:Object.assign({api_name:t},i,n?{data:n}:void 0),requestInQueue:!c.hasOwnProperty("requestInQueue")||Boolean(c.requestInQueue)}),{beforeAll(t){t.errMsg=t.errMsg.replace("operateWXData",e)},beforeSuccess(e){if(o.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data.data){e.rawData=e.data.data;const t=JSON.parse(e.data.data);e=Object.assign(e,t)}e.data.signature&&(e.signature=e.data.signature),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data,e=s(e)}})}}},9271:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(9045),o=n(1095);const i=({api:e,url:t})=>(0,o.vB)()?Promise.resolve({isInDomainList:!0,isLocalHost:!1,isInLAN:!0}):new Promise(((n,o)=>{(0,r.IN)("checkNetworkAPIURL",{api:e,url:t,success:n,fail:o})}))},2411:(e,t,n)=>{"use strict";var r=n(665),o=n(1095),i=n(743);n(495);let a={},s=null;r.Z.onReady((()=>{a=r.Z.appLaunchInfo,(0,o.aI)()&&((0,i.OQ)(((e={})=>{const t=Object.assign({},e);a.referrerInfo=Object.assign({},a.referrerInfo,t.referrerInfo),delete t.referrerInfo,a=Object.assign({},a,t)})),(0,i.Ke)((e=>{s=e})))}))},495:(e,t,n)=>{"use strict";n.d(t,{Ir:()=>l,x9:()=>d,Br:()=>u});var r=n(9078),o=n(665),i=n(5014),a=n(2497);let s,c;o.Z.onReady((()=>{const e=u(o.Z.appLaunchInfo||{});s=e.appLaunchInfo,c=e.publicLaunchInfo}));const l=()=>c,d=()=>s;function u(e={}){const t=e.shareInfo;let n=e.scene,s=e.query||{};"object"==typeof t&&null!==t&&(e.shareTicket=r.Z.set(t.shareKey,t.shareName),r.Z.lastShareTicket=e.shareTicket),e.query=e.query||{},e.scene=e.scene?parseInt(e.scene,10):e.scene,e.referrerInfo=e.referrerInfo||{},1022===e.scene&&(s=e.query={}),!1===e.reLaunch&&(s={}),(0,a.B)(),void 0===e.reLaunch&&"hide"===(0,a.B)()&&(s={}),1103===e.scene&&(n=1001),1104===e.scene&&(n=1089),1158!==e.scene&&1159!==e.scene&&1160!==e.scene||!(0,i.J)("getGroupToolbarInfo")&&(n=1008);const c={scene:n,query:s,shareTicket:e.shareTicket,referrerInfo:e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{}};return o.Z.debugLaunchInfo&&o.Z.debugLaunchInfo.lanDebugInfo&&!1!==o.Z.debugLaunchInfo.lanDebugInfo.useStaticServer&&(c.lanDebugInfo=o.Z.debugLaunchInfo.lanDebugInfo),e.chatType&&(c.chatType=e.chatType),{publicLaunchInfo:c,appLaunchInfo:e}}},2134:(e,t,n)=>{"use strict";n.d(t,{H:()=>ut});var r=n(3356),o=n.n(r),i=n(665),a=n(2802),s=n(2582),c=n(6947);const{Image:l}=c.Z;Object.defineProperty,Object.getOwnPropertyDescriptor,Object.prototype.hasOwnProperty,new WeakMap;var d=n(2783),u=n(9045),p=n(7618);const h=e=>"object"==typeof e&&null!==e,f=()=>{const e={};return{dirtyTextureMap:new WeakMap,dirtyRenderbufferMap:new WeakMap,dirtyFramebufferMap:new WeakMap,framebufferTextureMap:new WeakMap,framebufferRenderbufferMap:new WeakMap,textures:[],currentTextureIndex:0,screenFramebuffer:e,currentFramebuffer:e}},g=function(){const e=arguments[arguments.length-1],t=Ze(e),{textures:n,currentTextureIndex:r,dirtyTextureMap:o}=Ze(this.canvas).flag,i=n[r];h(i)&&(t&&t.isSharedCanvas?o.set(i,!0):o.has(i)&&o.delete(i))},_=function(){const{textures:e,currentFramebuffer:t,dirtyFramebufferMap:n,framebufferTextureMap:r,dirtyTextureMap:o,framebufferRenderbufferMap:i,dirtyRenderbufferMap:a}=Ze(this.canvas).flag;if(!e.some((e=>o.has(e))))return;n.set(t,!0);const s=r.get(t);h(s)&&o.set(s,!0);const c=i.get(t);h(c)&&a.set(c,!0)},m={activeTexture(e){const t=e-this.TEXTURE0;Ze(this.canvas).flag.currentTextureIndex=t},bindTexture(e,t){const{textures:n,currentTextureIndex:r}=Ze(this.canvas).flag;n[r]=t},wxBindCanvasTexture(e,t){const{textures:n,currentTextureIndex:r,dirtyTextureMap:o}=Ze(this.canvas).flag;if(!h(t))return void(n[r]=null);const i=Ze(t),a={type:"WeixinCanvasTexture"};n[r]=a,i&&i.isSharedCanvas?o.set(a,!0):o.has(a)&&o.delete(a)},texImage2D:g,texSubImage2D:g,bindFramebuffer(e,t){const n=Ze(this.canvas).flag;n.currentFramebuffer=t||n.screenFramebuffer},framebufferTexture2D(e,t,n,r){const{framebufferTextureMap:o,currentFramebuffer:i}=Ze(this.canvas).flag;o.set(i,r)},framebufferRenderbuffer(e,t,n,r){const{dirtyRenderbufferMap:o,dirtyFramebufferMap:i,framebufferRenderbufferMap:a,currentFramebuffer:s}=Ze(this.canvas).flag;o.has(r)&&i.set(s,!0),a.set(s,r)},copyTexImage2D(){const{dirtyFramebufferMap:e,currentFramebuffer:t,textures:n,currentTextureIndex:r,dirtyTextureMap:o}=Ze(this.canvas).flag;if(e.has(t)){const e=n[r];h(e)&&o.set(e,!0)}},drawArrays:_,drawElements:_};var y=n(5014),v=n(5184),A=n(1095);const b=e=>!Ze(e).secure,w=(e,t)=>{const n=Ze(t);if(!n)return!0;const{secure:r}=n,{secure:o}=Ze(e);return!(!o&&r)},C=function(e){return function(){if(/texImage2D|texSubImage2D/.test(e)){const{flag:t}=Ze(this.canvas),{textures:n,currentTextureIndex:r}=t,o=n[r];if(o&&"WeixinCanvasTexture"===o.type)return void console.warn(`在调用 wxBindCanvasTexture() 向 ${r} 号纹理单元提交纹理后，不能再调用 ${e}() 向该纹理单元提交纹理`)}const t=this.canvas,n=/createPattern|drawImage/.test(e)?arguments[0]:arguments[arguments.length-1];if(w(t,n))return!0;console.warn(`在 game.json 配置了 OpenDataContext 后，非安全 Canvas 的 WebGL 上下文的 ${e} 不能传入安全 Canvas`)}};let I=!1,E="unknown";i.Z.onReady((()=>{I=(0,y.J)("screenCanvasReadPixels"),E=(0,A.KU)("screenCanvasReadPixelsFreely")}));const S={toDataURL:function(){return!!b(this)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 不能调用 toDataURL"),"")},getImageData:function(){return!!b(this.canvas)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 的 2d 上下文不能调用 getImageData"),{width:0,height:0,data:new Uint8ClampedArray(0)})},createPattern:C("createPattern"),drawImage:C("drawImage"),texImage2D:C("texImage2D"),texSubImage2D:C("texSubImage2D"),wxBindCanvasTexture:C("wxBindCanvasTexture"),readPixels:function(){const{secure:e}=Ze(this.canvas);if(!e)return!0;if((0,v.v)("WebGLRenderingContext.readPixels"),!I)return void(0,v.v)("screenCanvasReadPixelsNoPermission");const{dirtyFramebufferMap:t,currentFramebuffer:n}=Ze(this.canvas).flag;if(!t.has(n)||((0,v.v)("unsafeScreenCanvasReadPixelsUsedBefore"),!1!==E))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，绘制了 sharedCanvas 的画布不能 readPixels")}},{Canvas:T,Image:x}=c.Z;let k;const P={"2d":null,webgl:null},D={Image:null,Canvas:null,CanvasRenderingContext2D:null,CanvasPattern:null,CanvasGradient:null,ImageData:null,TextMetrics:null},O=new WeakMap;function N(){const e=new T;return e.width=1,e.height=1,e}function R(e){const t={};return Object.keys(e).forEach((n=>{const r=Object.getOwnPropertyDescriptor(e,n);if("function"!=typeof r.value)r.get||r.set?Object.defineProperty(t,n,{get(){if(r.get)return r.get.call(this)},set(e){r.set&&r.set.call(this,e)}}):Object.defineProperty(t,n,r);else{const r=e[n];t[n]=function(){if("function"==typeof S[n]){const e=S[n].apply(this,arguments);if(!0!==e)return e}return"function"==typeof m[n]&&m[n].apply(this,arguments),r.apply(this,arguments)}}})),t}const M=function(){if(k)return k;const e=N(),t=R(Object.getPrototypeOf(e)),n=t.getContext;return t.getContext=function(e,t){const{isSharedCanvas:r}=Ze(this);if(r)return{};const o=n.call(this,e,t);return null===o||(/2d|webgl/.test(e)&&Object.setPrototypeOf(o,function(e){if(P[e])return P[e];const t=N().getContext(e),n=R(Object.getPrototypeOf(t));return P[e]=n,P[e]}(e)),O.set(o,this),Object.defineProperty(o,"canvas",{value:this,configurable:!1,writeable:!1})),o},k=t,t};var L=n(972);const B=wxGA,F={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267,MiniGameOpenDataMonitor:23536};var W=n(4212);var j=n(9798),U=n(6175),V=n(6329),G=n(1130);const $=(0,G.Z)("getPotentialFriendList","webapi_game_potential_friends",{},{},(()=>{}),(e=>(e.list=e.friend_list,delete e.friend_list,delete e.rawData,e))),H=(0,G.Z)("getGroupInfo","webapi_getshareinfo_byopengid",{},{},(({openGId:e})=>({opengid_list:[e]})),(e=>(e.name=e.info_list[0].room_topic,delete e.info_list,delete e.rawData,e)));var Z=n(6245);let Q={};function Y(e={}){const t={openId:e.openId,title:e.title||i.Z.accountInfo.nickname,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId,success:e.success,fail:e.fail,complete:e.complete};t.query=Object.keys(Q).map((e=>`${e}=${Q[e]}`)).join("&"),(0,Z.HP)(t,"shareAppMessageToSpecificContactDirectly")}var z=n(7646);const q=(0,z.Ce)(!1,"getUserInfo",!1,!0),J=({openIdList:e=[],lang:t="en",success:n,fail:r,complete:o}={})=>{q({apiName:"webapi_getuserinfo_byopenid",reqData:{openIdList:e,lang:t},success:e=>{const t=JSON.parse(e.respData.data).userInfoList||[];"function"==typeof n&&n({errMsg:e.errMsg,data:t})},fail:r,complete:o})},K=(0,G.Z)("getUserCloudStorageKeys","webapi_getuserstorageallappkey",{},{},(()=>{}),(e=>(e.keys=e.data_key,delete e.data_key,delete e.rawData,e)));var X=n(2184),ee=n(1633),te=n(6725),ne=n.n(te),re=n(8665),oe=n(5373),ie=n(3170),ae=n(9706);let se=0,ce=0;i.Z.onReady((()=>{const e=(0,ie.Ew)();se=e.screenWidth,ce=e.screenHeight,(0,ae.KN)((e=>{se=e.windowWidth,ce=e.windowHeight}))}));class le extends oe.wA{constructor({title:e,content:t,icon:n,confirmText:r,cancelText:o,confirm:i,cancel:a,style:s={}}={}){super();const c=(0,oe.Wj)(this),l=`<view id="container">\n      <view id="mask" />\n      <view id="tail" />\n      <view id="popup">\n        <view id="header">\n          <image id="close" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png" />\n          <text id="title" value="${e}" />\n          <text id="close2" />\n        </view>\n        <view id="main">\n          ${n?`<image id="icon" src="${!0===n?"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht3OjibpgsQSWKlYHJ8u8AiacNQgu4ianBYzC5gEXmxS74iaGkZUzEbFjwp6n7d8rJV7JSA/0?wx_fmt=png":n}" />`:""}\n          <text id="content" value="${t}" />\n        </view>\n        <view id="footer">\n          ${o?`<text id="cancel" value="${o}" />`:""}\n          ${r?`<text id="confirm" value="${r}" />`:""}\n        </view>\n      </view>\n    </view>`,{root:d}=ne()(l),u=(({cancelText:e,confirmText:t,icon:n})=>{const r=se>ce;return{mask:{width:se,height:ce,zIndex:1000007,opacity:.5,backgroundColor:"#000000"},tail:{bottom:0,height:12,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",left:r?(se-ce)/2:0,width:r?ce:se},popup:{bottom:0,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",borderRadius:12,left:r?(se-ce)/2:0,width:r?ce:se},header:{height:64,flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:r?ce:se},close:{width:14,height:14,marginLeft:20},title:{width:150,height:40,fontSize:15,lineHeight:40,textAlign:"center",color:"#000000"},close2:{width:14,height:14,marginRight:20},main:{flexDirection:"column",alignItems:"center",width:r?ce:se},icon:{height:64,width:64,marginTop:12,marginBottom:8},content:{height:60,fontSize:17,color:"#000000",textAlign:"center",lineBreak:"break-all",marginTop:n?0:64,marginBottom:n?0:15,width:r?.9*ce:.9*se},footer:{heihgt:40,marginBottom:32,flexDirection:"row",justifyContent:"center",width:r?ce:se},cancel:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#07c160",backgroundColor:"rgba(0, 0, 0, 0.05)",width:t?120:184},confirm:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#ffffff",backgroundColor:"#04c160",width:e?120:184}}})(arguments[0]);Object.keys(s).forEach((e=>{u[e]&&Object.assign(u[e],s[e])})),oe.S1.call(this,d,u),re.uo.add(c.container),c.close&&c.close.on("click",(()=>{"function"==typeof a&&a()})),c.cancel&&c.cancel.on("click",(()=>{"function"==typeof a&&a()})),c.confirm&&c.confirm.on("click",(()=>{"function"==typeof i&&i()}))}destroy(){const e=(0,oe.Wj)(this);re.uo.remove(e.container),(0,oe.bn)(this)}}function de(e={}){return s.DD?((0,ee._showModal)(Object.assign({},e,{showCancel:!!e.cancelText,success({confirm:t,cancel:n}){t?e.confirm&&e.confirm():n&&e.cancel&&e.cancel()}})),{destroy:()=>{}}):new le(e)}var ue=n(7452);const pe=0,he=2,fe=3;var ge=n(495);const _e=new X.Q("InteractiveStorageModified",!0),me={add:1},ye=(0,A.Fr)(J);const ve=({actionId:e,actId:t=0,receiverOpenId:n,detail:r,opNum:o=0,operationType:i=0})=>{const a=[e,t,0,r,o,i,n].join(",");Reporter.reportKeyValue({key:"GameInteractiveData",value:a})},Ae=e=>{Reporter.reportIDKey({key:e})},be=(0,G.Z)("modifyFriendInteractiveStorage","webapi_modifyfriendinteractivedata",{},{},(({key:e,operation:t,opNum:n,toUser:r,debug:o,action:i,object:a,ratio:s,quiet:c})=>({key:e,operation:t,debug:o,opNum:n,toUser:r,action:i,object:a,ratio:s,quiet:!!c,op_num:n,to_user:r,random_number:Date.now(),randomNumber:Date.now()})),(e=>{const{json_resp:t,inner_errcode:n,inner_errmsg:r}=e,o="modifyFriendInteractiveStorage:fail ";let i;e.errMsg,delete e.json_resp,delete e.rawData,delete e.inner_errcode,delete e.inner_errmsg;try{i=JSON.parse(t)}catch(e){i={},e.message}if(function(e){if(!e)return;e.split("\n").map(decodeURIComponent).forEach((e=>{const t=parseInt(e.substr(0,1),10),n=`[JSServer]${e.substr(1)}`;switch(t){case pe:console.log(n);break;case he:console.warn(n);break;case fe:console.error(n)}}))}(i.log),!(0,ue.o8)(n)&&0!==n)return e.errMsg=`${o}${r}`,void(e.errCode=n);try{const t=JSON.parse(i.base_resp);if(0!==t.errcode)return e.errCode=t.errmsg,void(e.errMsg=`${o}${t.errmsg}`);e.errCode=0}catch(t){e.errCode=-1,e.errMsg=`${o}${t.message}`,t.message}})),we=new Set;var Ce=n(1425);const Ie=(0,G.Z)("getGameLifeProfile","webapi_getgamelifeprofile",{},{},(e=>JSON.parse(JSON.stringify(e)))),Ee=(0,G.Z)("getGreetingControlInfo","webapi_getgreetingcontrolinfo",{},{},(e=>JSON.parse(JSON.stringify(e)))),Se=(0,G.Z)("interactGameLifeTag","webapi_interactgamelifetag",{},{},(e=>JSON.parse(JSON.stringify(e))));var Te=n(5260);const xe=({url:e,success:t,fail:n,complete:r})=>{(0,u.IN)("private_openUrl",{url:e,isNativeStyle:!0,success:t,fail:n,complete:r})};var ke=n(2276),Pe=n(6597);const De=(0,G.Z)("gameTransfer","webapi_game_transfer",{},{},(e=>JSON.parse(JSON.stringify(e))));var Oe=n(8010);const Ne={Component:oe.wA,getPrivateThis:oe.Wj,removePrivateThis:oe.bn,create:oe.Ue,init:oe.S1,webviewLayout:re.uo,nativeviewLayout:re._w,xmlParser:ne()},Re={Kanata:Kanata,wxGA:B,reportIDKey:({id:e,key:t,value:n})=>Reporter.reportIDKey({id:e,key:t,value:n}),reportKeyValue:function({key:e,value:t,immediately:n}){return"number"!=typeof e||Object.values(F).includes(e)?Reporter.reportKeyValue({key:e,value:t,immediately:n}):Reporter.reportKeyValue({key:e,value:t,immediately:n,number:!0})},getXLogManager:()=>W.s,getUserCloudStorage:j.u,getFriendCloudStorage:U.l,getGroupCloudStorage:V.q,getPotentialFriendList:$,getGroupInfo:function(e){setTimeout((()=>{H(Object.assign({},e,{success:t=>(0,u.FE)({args:e,res:t,name:"getGroupInfo",success:!!t.name,errMsg:t.name?"":"invalid openGId"})}))}))},shareMessageToFriend:Y,getUserInfo:J,getUserCloudStorageKeys:K,modifyFriendInteractiveStorage:e=>{Ae("modifyFriendInteractiveStorage");const t=Object.assign({},e,{success:t=>{(0,u.FE)({res:t,args:e,name:"modifyFriendInteractiveStorage",success:0===t.errCode,errCode:t.errCode,errMsg:t.errMsg}),t.errCode||_e.emit("modified",`${e.key}`)}});t.quiet?(e=>{const t=(0,ge.x9)();let n=(0,Z.A5)();!n&&t&&t.referrerInfo&&(n=t.referrerInfo.messageExtraData),n&&3===n.shareType&&n.userInfo?we.has(n.userInfo.openID)?(0,u.YG)("modifyFriendInteractiveStorage",e,"quiet modify can only be use once"):(we.add(n.userInfo.openID),be(Object.assign(e,{toUser:n.userInfo.openID}))):(0,u.YG)("modifyFriendInteractiveStorage",e,"game is not launch by click share card")})(t):t.toUser?i.Z.modifyFriendInteractiveStorageTemplates?(e=>{ye({openIdList:[e.toUser]}).then((t=>{const{nickName:n}=t.data[0],r=parseInt(e.key,10),o=e.toUser,a=e.opNum,s=me[e.operation];let c,l,d;for(d of i.Z.modifyFriendInteractiveStorageTemplates)if(d.key===e.key){const e=d.ratio?` x${a*d.ratio} ？`:"？";c=`确认${d.action} ${n} ${d.object}${e}`,l=encodeURIComponent(c);break}if(!c)throw new Error("invalid key");const p={actId:r,receiverOpenId:o,detail:l,opNum:a,operationType:s};ve(Object.assign({actionId:1},p)),Ae("modifyFriendInteractiveStorageShowModal");const h=de({content:c,title:`${d.action}${d.object}`,confirmText:`确认${d.action}`,confirm(){h.destroy(),be(Object.assign({action:d.action,object:d.object,ratio:d.ratio},e,{success:t=>{if(e.success&&e.success(t),t.errCode)return;const n="string"==typeof e.title,r=de({title:`${d.action}${d.object}`,icon:!0,content:n?`已${d.action}，马上告诉微信好友？`:`已${d.action}`,cancelText:n?"下次吧":"我知道了",confirmText:!!n&&"告诉他",cancel(){r.destroy()},confirm(){r.destroy(),Y({openId:o,title:e.title,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId})}})}})),ve(Object.assign({actionId:2},p)),Ae("modifyFriendInteractiveStorageConfirm")},cancel(){h.destroy(),(0,u.YG)("modifyFriendInteractiveStorage",e,"cancel"),ve(Object.assign({actionId:3},p)),Ae("modifyFriendInteractiveStorageCancel")}})})).catch((({errMsg:t,message:n})=>{(0,u.YG)("modifyFriendInteractiveStorage",e,t||n)}))})(t):i.Z.modifyFriendInteractiveStorageConfirmWording?(e=>{ye({openIdList:[e.toUser]}).then((t=>{const{nickName:n}=t.data[0],r=i.Z.modifyFriendInteractiveStorageConfirmWording.replace("${nickname}",n),o={actId:parseInt(e.key,10),receiverOpenId:e.toUser,detail:encodeURIComponent(r),opNum:e.opNum,operationType:me[e.operation]};ve(Object.assign({actionId:1},o)),Ae("modifyFriendInteractiveStorageShowModal"),(0,ee._showModal)({content:r,confirmText:"确定",cancelText:"取消",success(t){t.confirm?(be(e),ve(Object.assign({actionId:2},o)),Ae("modifyFriendInteractiveStorageConfirm")):((0,u.YG)("modifyFriendInteractiveStorage",e,"cancel"),ve(Object.assign({actionId:3},o)),Ae("modifyFriendInteractiveStorageCancel"))}})})).catch((({errMsg:t})=>{(0,u.YG)("modifyFriendInteractiveStorage",e,t)}))})(t):(0,u.YG)("modifyFriendInteractiveStorage",e,"invalid modifyFriendInteractiveStorage config in game.json"):(0,u.YG)("modifyFriendInteractiveStorage",e,"toUser is required without quiet")},WebAssembly:Ce.Ji,getGameLifeProfile:Ie,getGreetingControlInfo:Ee,interactGameLifeTag:Se,openGameLifeAccountInfo:({success:e,fail:t,complete:n,query:r}={})=>{xe({url:(0,Te.cE)("https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/accountinfo.html",r),success:e,fail:t,complete:n})},openGameLifeMiniGameTransfer:({success:e,fail:t,complete:n,query:r}={})=>{xe({url:(0,Te.cE)("https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/minigametransfer.html",r),success:e,fail:t,complete:n})},Function:Function.prototype.constructor,createCanvas:(...e)=>nt(...e),createScreenCanvas:(...e)=>it(...e),createWebView:e=>new re.kh(e),navigateToMiniProgramDirectly:e=>(0,ke.iy)(e,e),privateOpenUrl:Pe.n8,gameTransfer:De,coverview:Ne,launchApplicationDirectly:Oe.dx,encode:e=>{if(s.gm){let t=null;return(0,u.IN)("encodeArrayBufferSync",Object.assign(e,{success(e){t=e.buffer},fail(){}})),t}return c.Z.encodeArrayBuffer(e.data,e.format)},decode:e=>{if(s.gm){let t="";return(0,u.IN)("decodeArrayBufferSync",Object.assign(e,{success(e){t=e.result},fail(){}})),t}return c.Z.decodeArrayBuffer(e.data,e.format)}},Me={wxGA:846,Kanata:933,reportIDKey:847,reportKeyValue:848,getXLogManager:849,getUserCloudStorage:883,getFriendCloudStorage:884,getGroupCloudStorage:885,getPotentialFriendList:886,getGroupInfo:887,shareMessageToFriend:888,getUserInfo:915,getUserCloudStorageKeys:950,modifyFriendInteractiveStorage:951,WebAssembly:962,Function:963,getGameLifeProfile:964,getGreetingControlInfo:965,interactGameLifeTag:966,openGameLifeAccountInfo:979,openGameLifeMiniGameTransfer:980,gameTransfer:981,createCanvas:987,createScreenCanvas:987,createWebView:991,navigateToMiniProgramDirectly:1002,coverview:1005,launchApplication:1006,privateOpenUrl:1007,launchApplicationDirectly:1008,encode:1022,decode:1023},Le=Object.keys(Me).map((e=>Me[e])),Be={},Fe=["getUserCloudStorage","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getGroupInfo","shareMessageToFriend","getUserCloudStorageKeys","modifyFriendInteractiveStorage"],We={},je=e=>(e=>{if(We[e])return We[e];Be[e]={},(0,u.IN)("getPluginPermissionBytes",{pluginList:[{indexes:Le,pluginId:e}],success(t){const n=t.pluginPermissionMap;if(n&&n[e])for(let t=0;t<n[e].length;t++){const r=Le[t];Be[e][r]=1===n[e][t]}}});const t={platform:i.Z.platform};for(const n in Re){const r=Me[n],o=Be[e][r];("wx20afc706a711eefc"===e||"wx4d5893418b75cb20"===e||o)&&("createCanvas"===n&&(Ue=!0),-1===Fe.indexOf(n)?t[n]=Re[n]:(0,y.J)("engineOpenData")&&(Ue=!0,t[n]=Re[n]))}return We[e]=t,We[e]})(e);let Ue=!1;const Ve=()=>Ue,{Canvas:Ge}=c.Z,$e=new WeakMap;let He=0;const Ze=e=>{if(null!=e)return $e.get(e)};function Qe(e){(0,L.Ft)()&&(0,u.IN)("removeImageView",{viewId:e,complete({errMsg:e}){}})}function Ye(e){if((0,L.Ks)()){const t=e.getContext;e.getContext=(...n)=>{const r=t.call(e,...n),o=r.getSupportedExtensions,i=r.getExtension;return o&&(r.getSupportedExtensions=(...e)=>{const t=o.call(r,...e);if(Array.isArray(t)){const e=new Set(t);return e.delete("WEBGL_compressed_texture_etc1"),e.delete("WEBGL_compressed_texture_etc"),Array.from(e)}return t}),i&&(r.getExtension=e=>"WEBGL_compressed_texture_etc1"===e||"WEBGL_compressed_texture_etc"===e?null:i.call(r,e)),r}}}let ze,qe=!1;const Je=Object.defineProperty,Ke=Object.getOwnPropertyDescriptor,Xe=Object.prototype.hasOwnProperty,et=["getContext","toDataURL"],tt=["width","height","tagName","nodeName"],nt=({secure:e=!1,isSharedCanvas:t=!1}={},n=!0)=>{const r=new Ge,o=!!("string"==typeof(s.gm?i.Z.appConfig.subContext:i.Z.subContext))&&n;if(Ye(r),s.gm){let e=r.__proto__.__proto__;r.__proto__=new Proxy(r.__proto__,{setPrototypeOf:(t,n)=>(e=n,!0),getPrototypeOf:()=>e})}s.jP||s.gm||Xe.call(r,"width")||(tt.forEach((e=>{for(let t=r;t;t=t.__proto__)if(Xe.call(t,e)){Je(r,e,Ke(t,e)),Je(r,e,{configurable:!1});break}})),Je(r,"style",{value:{},writable:!0}),ze||(ze={},ze[Symbol.toStringTag]="HTMLCanvasElement",et.forEach((e=>{for(let t=r;t;t=t.__proto__)if(Xe.call(t,e)){Je(ze,e,Ke(t,e));break}}))),r.__proto__=ze),o&&(Object.setPrototypeOf(r,M()),"Object"===(0,ue.Em)(r)&&Object.defineProperty(M(),Symbol.toStringTag,{get:()=>"HTMLCanvasElement"})),void 0===r.__id&&(r.__id=He++);let a=!1;qe||(qe=!0,a=!0),$e.set(r,{canvasId:r.__id,secure:e,isSharedCanvas:t,isScreenCanvas:a,flag:f()});try{delete r.__id}catch(e){}const c=s.gm?r:(e=>{const{canvasId:t}=$e.get(e);return t})(r),l=t=>{if(e){const e=p.L.set(t.tempFilePath);t.tempFilePath=e}Qe(c)};return r.toTempFilePathSync=function(e={}){let t,n;const r=$e.get(this),o=!!r&&r.isScreenCanvas;if(function(e){(0,L.Ft)()&&(0,u.IN)("insertImageView",{parentId:0,viewId:e,position:{width:0,height:0,top:0,left:0},clickable:!1,data:"{}",complete({errMsg:e}){}})}(c),(0,u.IN)("canvasToTempFilePathSync",Object.assign({},e,{canvasId:c},{isScreenCanvas:o,success:e=>{t=e.tempFilePath},fail:e=>{n=e.errMsg}}),{beforeSuccess:l}),Qe(c),n)throw new Error(n);return t},r.toTempFilePath=(0,d.gA)(((e={})=>{const t=$e.get(r),n=!!t&&t.isScreenCanvas;(0,u.IN)("canvasToTempFilePath",Object.assign({},e,{canvasId:c,isScreenCanvas:n}),{beforeSuccess:l})})),r};let rt,ot;i.Z.onReady((()=>{if((0,A.aI)()){(()=>{const e=i.Z.plugins||i.Z.gamePlugins;e&&Object.keys(e).forEach((t=>{const n=e[t].provider;je(n)}))})();const e="string"==typeof(s.gm?i.Z.appConfig.subContext:i.Z.subContext)||Ve();rt=nt({secure:e}),(e=>{if((0,L.LN)()){const t=e.getContext;e.getContext=(n,r,...o)=>{if("webgl"===n||"2d"===n){const i=Object.assign({},r);return i.preserveDrawingBuffer=!0,t.call(e,n,i,...o)}return t.call(e,n,r,...o)}}})(rt),Ye(rt),Object.keys(D).forEach((e=>{if(D[e])return;const t=N(),n=t.getContext("2d");if("Canvas"===e)D[e]=Object.getPrototypeOf(t);else if("Image"===e)D[e]=Object.getPrototypeOf(new x);else if("CanvasRenderingContext2D"===e)D[e]=Object.getPrototypeOf(n);else if("CanvasPattern"===e){const r=n.createPattern(t,"repeat");D[e]=Object.getPrototypeOf(r)}else if("CanvasGradient"===e){const t=n.createLinearGradient(0,0,100,100);D[e]=Object.getPrototypeOf(t)}else if("ImageData"===e){const t=n.getImageData(0,0,10,10);D[e]=Object.getPrototypeOf(t)}else if("TextMetrics"===e){const t=n.measureText("123");D[e]=Object.getPrototypeOf(t)}})),ot=nt({secure:e,isSharedCanvas:!0}),ot.width=i.Z.screenWidth,ot.height=i.Z.screenHeight}}));const it=()=>new c.Z.ScreenCanvas;let at=1,st=!1;function ct(e,t,n=""){return e.font=`${t}px -apple-system`,n?e.measureText(n).width:0}i.Z.onReady((()=>{at=i.Z.pixelRatio,(0,z.JM)({apiName:"webapi_game_issharemarkenabled",reqData:{lib_version:a.c},success(e){const t=JSON.parse(e.rawData);st=t.is_enabled}})}));const lt=e=>new Promise((t=>{if(e)if("transparent"===e)t({width:0,height:0});else{const n=new l;n.onload=()=>t(n),n.onerror=()=>t(),n.src=e}else t()})),dt=function(){var e=o()((function*({background:e,label:t,icon:n,tag:r,more:o=!1,base64:i=!1}){if(!e)return e;const a=nt({secure:Ve()}),s=a.getContext("2d");a.width=210*at,a.height=168*at,"transparent"===e&&(a.height=40*at),s.fillStyle="rgba(255, 255, 255, 0)",s.fillRect(0,0,a.width,a.height);const c=yield lt(e);if(!c)return e;c.width/c.height>=1.25?s.drawImage(c,0,0,1.25*c.height,c.height,0,0,a.width,a.height):c.width/c.height<1.25&&s.drawImage(c,0,0,c.width,.8*c.width,0,0,a.width,a.height);const l=ct(s,12*at,t);if(r){const e=ct(s,10*at,r);s.fillStyle="rgba(0, 0, 0, 0.5)",s.beginPath(),s.moveTo(0,8*at),s.lineTo(l+e+12*at,8*at),s.arc(l+e+12*at,20*at,12*at,1.5*Math.PI,2.5*Math.PI),s.lineTo(0,32*at),s.closePath(),s.fill(),s.fillStyle="#F36D00",s.beginPath(),s.moveTo(4*at,14*at),s.arc(6*at,14*at,2*at,Math.PI,1.5*Math.PI),s.lineTo(e+10*at,12*at),s.arc(e+10*at,14*at,2*at,1.5*Math.PI,2*Math.PI),s.lineTo(e+12*at,26*at),s.arc(e+10*at,26*at,2*at,2*Math.PI,2.5*Math.PI),s.lineTo(6*at,28*at),s.arc(6*at,26*at,2*at,.5*Math.PI,Math.PI),s.closePath(),s.fill(),s.fillStyle="#FFFFFF",s.fillText(r,8*at,23.5*at),ct(s,12*at),s.fillText(t,e+16*at,24*at)}else if(n){const e=yield lt(o&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAMCAYAAABBV8wuAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAHtJREFUeNpj/v//v3RDQwNDY2PjLwYkwATEM4F4B1ABL7pEChALoUsyA434AjRqLZCdCcTBQPZqkLGMMBVA1RJAaj8QvwNiD0Zkc5EkHzMxoIL/UMzIhKRaHKr6I8guRiyC7oyMjJ8YsQnC/DEXXRAEWIA4A4g/IQuCAAABEju5SK8v4wAAAABJRU5ErkJggg=="),r=e?10*at:0;s.fillStyle="rgba(0, 0, 0, 0.5)",s.beginPath(),s.moveTo(0,8*at),s.lineTo(l+r+22*at,8*at),s.arc(l+r+22*at,20*at,12*at,1.5*Math.PI,2.5*Math.PI),s.lineTo(0,32*at),s.closePath(),s.fill();const i=yield lt(n);i&&i.width&&i.height&&s.drawImage(i,6*at,12*at,16*at,16*at),e&&e.width&&e.height&&s.drawImage(e,l+30*at,14*at,6*at,12*at),s.fillStyle="#FFFFFF",ct(s,12*at),s.fillText(t,26*at,24*at)}else s.fillStyle="rgba(0, 0, 0, 0.5)",s.beginPath(),s.moveTo(0,8*at),s.lineTo(l+2*at,8*at),s.arc(l+2*at,20*at,12*at,1.5*Math.PI,2.5*Math.PI),s.lineTo(0,32*at),s.closePath(),s.fill(),s.fillStyle="#FFFFFF",ct(s,12*at),s.fillText(t,6*at,24*at);return i?a.toDataURL():a.toTempFilePathSync()}));return function(t){return e.apply(this,arguments)}}(),ut=e=>new Promise((t=>{st&&e.imageUrl?(0,z.JM)({apiName:"webapi_game_getsharemark",reqData:{lib_version:a.c},success:({rawData:n})=>{let r=JSON.parse(n);r=(r.mark_list||[])[0],r||t(e),r&&dt({background:e.imageUrl,label:r.wording,icon:r.head_img_url,tag:r.mark_word}).then((n=>{e.imageUrl=n,e.extra={shareCardMarker:{label:r.mark_type}},t(e)})).catch((()=>t(e)))},fail:()=>t(e)}):t(e)}))},6245:(e,t,n)=>{"use strict";n.d(t,{HP:()=>R,A5:()=>P,kv:()=>D});n(1503);var r=n(8159),o=n(9045),i=n(9078),a=n(7618),s=(n(2851),n(2582));const c=e=>{(0,o.gM)(Object.assign({},e,{data:{api_name:"webapi_reportgroupshare",data:{path:e.path,share_key:e.shareKey}},success(t){s.wZ&&"string"==typeof t.data&&(t.data=JSON.parse(t.data));const n=JSON.parse(t.data.data);0===n.errcode?(t.expiresIn=n.expires_in,t.groupMsgTicket=n.group_msg_ticket,delete t.data,(0,o.FE)({name:"getGroupMsgTicket",args:e,res:t})):(0,o.YG)("getGroupMsgTicket",e,n.errmsg,n.errcode)},fail(t){(0,o.YG)("getGroupMsgTicket",e,t.errMsg,-1)}}))};var l=n(1095),d=n(9973),u=n(665),p=n(1633),h=n(1130);const f=(0,h.Z)("getIAPInfo","webapi_getiapinfo");var g=n(6998);const _={};var m=n(3872),y=n(5014),v=n(7657);n(2411);n(678);var A=n(8582);n(4079);let b=!0,w={};u.Z.onReady((()=>{if(!(0,l.KU)("shareCustomImageUrl")){(0,h.Z)("getShareConfig","webapi_getshareconf")({success(e){Array.isArray(e.share_link_list)&&(w=e.share_link_list.reduce(((e,t)=>(e[t.id]=t.url,e)),{}))},fail(e){}}),b=!1}}));const C=()=>w,I=()=>b;(0,h.Z)("reportUserBehaviorBranchAnalytics","webapi_reportbranchanalytics",{},{},(({branchId:e,branchDim:t,eventType:n})=>({itemList:[{branchId:e,branchDim:t,eventType:n}]}))),(0,h.Z)("reportUserBehaviorBranchAnalyticsForDebug","webapi_reportbranchanalyticsfordebugtool",{},{},(({branchId:e,branchDim:t,reportType:n,query:r})=>({itemList:[{branchId:e,branchDim:t,reportType:n,query:r}]})));var E=n(5688),S=n(8728);const T=new r.Z;let x=null,k=null;const P=()=>k;u.Z.onReady((()=>{(0,l.aI)()&&n(743).dN((e=>{if(k={},e.referrerInfo&&e.referrerInfo.messageExtraData){k=e.referrerInfo.messageExtraData;const{userInfo:t,shareType:n}=k;if(n&&t){const r=[Reporter.getAppType(),n,t.openID,e.path||"",(0,g._getCurrentNetworkType)()].join(",");Reporter.reportKeyValue({key:"ShareCardClick",value:r})}}}))}));const D=e=>{(0,o.IN)("showUpdatableMessageSubscribeButton",{shareKey:e})},O=e=>(t,n)=>{let{shareInfos:r}=t;if(delete t.shareInfos,void 0!==r&&r.length>0)if(r=r.filter((e=>e.shareKey&&e.shareName)),t.shareTickets=r.map((e=>(D(e.shareKey),i.Z.set(e.shareKey,e.shareName)))),s.gm)delete t.shareTickets,delete t.shareInfos,n();else{if(e.getGroupMsgTicket)return void Promise.all(r.map((e=>new Promise((t=>{const{shareKey:n}=e;(e=>{c(e)})({shareKey:n,success(e){t({groupMsgTicket:e.groupMsgTicket,expiresIn:e.expiresIn})},fail(){t({groupMsgTicket:""})}})}))))).then((e=>(t.groupMsgInfos=e,n()))).catch((()=>{}));n()}else n()},N=(e={},t,n={},r=!1)=>{const i=I(),c=C();let h="string"==typeof e.path?e.path:"",f="string"==typeof e.query?e.query:"",g="",v=0;switch(t){case"shareAppMessage":v=1;break;case"shareAppMessageDirectly":v=2;break;case"shareAppMessageToSpecificContactDirectly":v=3}if(f.length>2e3&&(console.warn(`shareAppMessage: query exceed max length limit 2000: "${f.length}"`),f=f.substr(0,2e3)),f&&(h=`${h}?${f}`),e.imageUrl=a.L.get(e.imageUrl)||e.imageUrl,Array.isArray(e.imageUrl)&&(e.imageUrl=""),!i){if(!c[e.imageUrlId])return e.imageUrlId,(0,p.showToast)({icon:"none",title:"由于小程序违规，分享功能暂时无法使用"}),void b(2);g=e.imageUrl=c[e.imageUrlId]}function b(t){!function({result:e,shareType:t,canUseCustomImageUrl:n,imageUrlId:r="",transformedImageUrl:o=""}){const i=_.query,a=[],s=u.Z.accountInfo&&u.Z.accountInfo.nickname||"";if(i&&"object"==typeof i)for(const e in i)a.push(`${encodeURIComponent(e)}=${encodeURIComponent(i[e])}`);const c=[_.scene,_.scene_note,_.sessionid,"",s,Reporter.getAppType(),e,0,a.join("&"),t,n?1:2,r,o,u.Z.host?u.Z.host.appId:""].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Share",value:c}),Reporter.submit()}({result:t,shareType:v,canUseCustomImageUrl:i,imageUrlId:e.imageUrlId,transformedImageUrl:g})}(0,o.IN)(t,Object.assign(n,e,{path:h,useDefaultSnapshot:!0,messageExtraData:Object.assign({shareType:v,userInfo:x},e.extra),success(t){(0,A.Ku)("shareAppMessage",t),(r||!s.gm&&(0,l.KU)("share"))&&(0,o.FE)({name:"shareAppMessage",args:e,res:t}),b(1),setTimeout((()=>{(0,m.y4)(m.F0.EVENT_CANVAS_AFTER_SHARE_SUCCESS)}),500),e.requireAdsSkipCard&&(0,E.JM)({apiName:"webapi_recvadcardsharepresent",reqData:{outTradeNo:(Date.now()+Math.random()).toString(36)},success(e){const t=JSON.parse(e.rawData);!t.errCode&&t.amount&&(0,S.et)(t)}})},fail(t){const n=t.errMsg.replace("shareAppMessage:fail","");(r||!s.gm&&(0,l.KU)("share"))&&(0,o.YG)("shareAppMessage",e,n),b(-1!==n.indexOf("cancel")?3:2)},cancel(){setTimeout((()=>{(0,m.y4)(m.F0.EVENT_CANVAS_AFTER_SHARE_CANCEL)}),500)},complete:t=>{const n=(t.errMsg||"").replace(/^[^:]+/,"shareMessageToFriend"),r=!n||"shareMessageToFriend:ok"===n;(0,y.J)("shareCallback")&&3===v&&(T.emit("callback",{errMsg:n,success:r}),(0,o.FE)({name:"shareMessageToFriend",errMsg:n,success:r,args:e}))}}),{beforeSuccess:O(e),beforeAll(e){e.errMsg=e.errMsg.replace("shareAppMessageDirectly","shareAppMessage"),e.errMsg=e.errMsg.replace("shareAppMessageToSpecificContactDirectly","shareAppMessage")}}),["success","fail","cancel","complete"].some((t=>"function"==typeof e[t]))&&(0,d.Y)({name:t,strategy:1}),(0,m.y4)(m.F0.EVENT_CANVAS_BEFORE_SHARE)},R=(...e)=>{const t=()=>{let t=e[0].imageUrl;(0,v.V)([t],"image",(r=>{/^(cloud):\/\//.test(t)&&(t=r.data[0].url),e[0].imageUrl=t,(0,l.aI)()?n(2134).H(e[0]).catch(wxConsole.warn).then((()=>N(...e))):N(...e)}))};x?t():f({success:e=>{x=e},complete:()=>t()})}},9066:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={query:{}}},8997:(e,t,n)=>{"use strict";n.d(t,{ul:()=>h,R0:()=>_,fs:()=>l.t2,Be:()=>p,_t:()=>u,Yo:()=>d,Lo:()=>f,mQ:()=>g,yw:()=>m,fy:()=>v,Ae:()=>y});var r=n(9045),o=n(2241),i=n(4684),a=n(5260),s=n(7646),c=n(2582);var l=n(3775);const d=(0,o.Fr)((({url:e,adInfo:t,adUxInfo:n,success:o,fail:i,complete:a})=>{const s={url:e,adInfo:t,success:o,fail:i,complete:a};n&&(s.adUxInfo=n),(0,r.IN)("private_openUrl",s)})),u=(0,o.Fr)((({canvasInfo:e,posType:t,success:n,fail:o,complete:a})=>{(0,r.IN)("openADCanvas",{canvasId:e.canvas_id,preLoad:0,noStore:0,extraData:JSON.stringify({pos_type:t}),adInfoXml:(0,i.l_)(e.ad_info_xml),openFirstSightVoice:1,success:n,fail:o,complete:a})})),p=(0,o.Fr)((({appId:e,path:t,traceid:n,aid:o,adInfo:i,adUxInfo:s,success:c,fail:l,complete:d})=>{const u=`${n}:${o}`,p={appId:e,path:(0,a.Pp)(t).trim(),scene:1095,sourcetype:1,sceneNote:u,adInfo:i,success:c,fail:l,complete:d};s&&(p.adUxInfo=s),(0,r.IN)("navigateToMiniProgram",p)})),h=(0,o.Fr)(((e=!0,t,n=!1)=>(o={})=>{if(!(0,r.r3)("adOperateWXData",o,{apiName:""}))return;const i={data:{api_name:o.apiName,data:o.reqData||{},operate_directly:e},isImportant:!0===n,requestInQueue:!o.hasOwnProperty("requestInQueue")||Boolean(o.requestInQueue)};(0,r.IN)("adOperateWXData",Object.assign({},i,o),{beforeAll(e){void 0!==t&&(e.errMsg=e.errMsg.replace("adOperateWXData",t))},beforeSuccess(e){c.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.respData=e.data,delete e.data}})})(!1,"adOperateWXDataForAd")),f=(0,o.Fr)((0,s.Ce)(!1,"operateWXDataForAd"));function g(e){(0,r.be)("showSplashAd",e)}function _(e){(0,r.be)("closeSplashAd",e)}function m(e){(0,r.be)("showSplashAdMenu",e)}function y(e){(0,r.be)("splashAdFirstStepViewLayoutStateChange",e)}function v(e){(0,r.be)("splashAdAllViewLayoutStateChange",e)}},5328:(e,t,n)=>{"use strict";n.d(t,{vK:()=>o,DX:()=>i,_W:()=>a,WG:()=>s,wE:()=>c,R$:()=>l,fY:()=>d,Lq:()=>u,YC:()=>p,gQ:()=>h,ET:()=>f,UJ:()=>g,yd:()=>_,qi:()=>m,MC:()=>y,c3:()=>v,sl:()=>A,yB:()=>r.Bq});var r=n(637);const o={CRT_SIZE_REWARD_VEDIO169:559,CRT_SIZE_REWARD_VEDIO916:560,CRT_SIZE_REWARD_LANDINGPAGE:910,CRT_SIZE_SPLASH_AD:1003,CRT_SIZE_IN_TEXT_DESC_CARD:841,CRT_SIZE_MULTI_POS_NEW_PIC:927,CRT_SIZE_MULTI_POS_VIDEO:929,CRT_SIZE_GRID:972,CRT_SIZE_BIG_PIC:998,CRT_SIZE_VERTICAL_VIDEO_NEW_916:721},i={banner:"8040321819858439","incentive-video":"1030436212907001",interstitialAd:"3030046789020061",grid:"7070083760581921",splashAd:"5060180989186180",wxAppVideo:"5010365819466098",wxAppPreVideoAd:"7090665964306299",customAd:"4071202390577885"},a={banner:3,"incentive-video":1,interstitialAd:4,grid:7,splashAd:8,customAd:9},s={banner:"showed","incentive-video":"viewable",interstitialAd:"viewable",grid:"viewable",splashAd:"viewable",customAd:"viewable"},c={"incentive-video":3,banner:4,interstitialAd:5,grid:6,customAd:7},l={94794:"widget_gray_batchload_app",94801:"widget_gray_vb_check",94804:"widget_gray_time_limit",94805:"widget_gray_video_download_v2",95489:"widget_gray_unlimit_fetch_tag",95767:"widget_gray_rewardedpage_exposure",100036:"widget_gray_report_install_follow",100332:"widget_gray_rewardedpage_exposure_v2",101246:"widget_gray_reward_new_endpage",104502:"widget_gray_reward_use_gauss_blur",104504:"widget_gray_reward_use_expand_style",105786:"widget_gray_banner_limit_click",105818:"widget_gray_splash_data_channel_parallel",107048:"widget_gray_splash_click_area_switch",110380:"widget_gray_webstore",109764:"widget_gray_rewrad_use_gauss_blur_android_system_version",109766:"widget_gray_rewrad_use_gauss_blur_android_wechat_version",110106:"widget_gray_splash_check_and_fetch",110108:"widget_gray_splashad_show_duration",110422:"widget_gray_interstitialAd_insurance_tips"},d={WECHAT:23,OPEN_PLATFORM_APP_MOB:12,APPLE_APP_STORE:19,MINI_GAME:46,JD_URL:25,WE_CHAT_SHOP:30,WE_CHAT_ARTICLE:29,GDT_WE_CHAT_ARTICLE:31},u="wxfile://ad",p=`${u}/adinfos.txt`,h={splashAd:1288,customAd:1390},f={dataLoadSuccess:0,dataLoadFail:1,dataPreloadSuccess:2,dataPreloadFail:3,handleDataFail:4,launchAcceptShouldShow:5,menuAcceptShouldShow:6,readFileFail:7,launchShowSplashAdSuccess:8,menuShowSplashAdSuccess:9,showSplashAdFail:10,firstRenderFail:11,firstInsertFail:12,secondRenderFail:13,secondInsertFail:14,iosThirdInsertFail:15,checkAdStateFail:16,adOfflineClose:17,readFileDataFail:18,firstShowSuccess:19,showSplashAdMenuSuccess:20,showSplashAdMenuFail:21,secondShowSuccess:22,removeFileDataFail:23,landingPageFail:24,frequencyControlFail:25,frequencyControlReturn:26,bulkCopyFileFail:27,getAdInfosFail:28,getAidFail:29,setExposureTagFail:30,NO_ADINFOS:31,NO_AID:32,MATERIAL_NOT_READY:33,CHECK_AD_STATUS_ERROR:34,CRT_ORIENTATION_NOT_SURE:35,EXPOSURE_TIMES_LIMIT:36,START_CHECK_AD_STATUS:37,CHECK_AD_STATUS_SUCCESS:38,OTHER_ADS_EMIT_FETCH:39,WRITE_ADINFOS_SUCCESS:40,WRITE_ADINFOS_FAIL:41,SHOW_SPLASH_FAIL:10},g={banner:5,"incentive-video":6,interstitialAd:8,customAd:9,grid:13,splashAd:14},_={click:1,exposure:0},m={showed:0,viewable:1,incentiveVideoCard:2},y={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5},v={NO_ADINFOS:2001,NO_AID:2002,MATERIAL_NOT_READY:2003,CHECK_AD_STATUS_ERROR:2004,CRT_ORIENTATION_NOT_SURE:2005,EXPOSURE_TIMES_LIMIT:2006,SHOW_SPLASH_FAIL:2007},A={12:"应用",19:"应用",23:"公众号",25:"商品",29:"活动",30:"商品",31:"活动",36:"优惠",39:"店铺",43:"活动",46:"小游戏",47:"优惠"}},9598:(e,t,n)=>{"use strict";n.d(t,{Zp:()=>i,S4:()=>a,Ug:()=>s,Pp:()=>c,EJ:()=>l,BZ:()=>d,vj:()=>u,vl:()=>p});var r=n(9045);const o=new(n(1095).vp),i=()=>{o.emit("_onEmitSplashAdFetch")},a=e=>{"function"==typeof e&&o.on("_onEmitSplashAdFetch",e)};function s(e){(0,r.jQ)("shouldShowSplashAd",e)}function c(e){(0,r.jQ)("onSplashAdShow",e)}function l(e){(0,r.jQ)("onSplashAdHide",e)}function d(e){(0,r.jQ)("onSplashAdClose",e)}function u(e){(0,r.jQ)("onSplashAdWillLayout",e)}function p(e){(0,r.jQ)("onSplashAdButtonClicked",e)}},3324:(e,t,n)=>{"use strict";n.d(t,{G_:()=>s,uQ:()=>c,LQ:()=>l,mh:()=>a});var r=n(4684),o=n(8997),i=n(5328);const a=e=>{const t={};try{e=JSON.parse(e);for(const n of e)n.hasOwnProperty("exp_para")&&n.exp_para.forEach((e=>{t[e.name]=Number(e.value)}));for(const e in t)i.R$[e]&&(t[i.R$[e]]=t[e]);return t}catch(e){return{}}},s=(e={},t=!0)=>(0,o.ul)({apiName:"webapi_getadvert",reqData:{action:"CheckAdIsOnline",request_data:JSON.stringify(e)},requestInQueue:t}),c=({aid:e,buttonText:t=""})=>(0,o.Lo)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"get_ad_metric",aid:e.toString(),button_text:t})}}).then((e=>{if(!e.rawData)throw new Error("get_ad_metric no result");try{const t=JSON.parse(e.rawData),n=JSON.parse(t.result),{ad_metric_count:o,desc_text:i}=n||{};return null==o||null==i||o<50?null:{count:(0,r.in)(o),descText:i}}catch(e){throw new Error("get_ad_metric invalid result")}})).catch((()=>{throw new Error("get_ad_metric request failed")})),l=({guide_group_id:e,uxinfo:t})=>(0,o.Lo)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"BindAdFansToGuideGroup",guide_group_id:e,uxinfo:t})}}).then((e=>"ok"===e.msg?Promise.resolve(e):Promise.reject(e)))},570:(e,t,n)=>{"use strict";n.d(t,{Z7:()=>f,BZ:()=>h,J$:()=>_,fn:()=>g,x1:()=>p});var r=n(2614),o=n(8997),i=n(5328),a=n(2582),s=n(9598),c=n(1095);const l=["adinfos.txt","/adinfos.txt","/"];let d=0;const u=(e="")=>{if(e)return new Promise(((t,n)=>{o.fs.unlink({filePath:e,success:t,fail:e=>{e&&e.errMsg&&e.errMsg.indexOf("no such file or directory")>-1||n(e)}})}))},p=(e="")=>e?((e="")=>{if(e)return new Promise(((t,n)=>{o.fs.stat({path:e,recursive:!0,success:t,fail:n})}))})(e).then((e=>{let t=0;const n=[],r=[],o=e.stats||[],i=+new Date;for(const e of o){t+=e.stats.size||0,l.includes(e.path)||n.push(e.path);i-1e3*e.stats.lastAccessedTime>=6048e5&&!l.includes(e.path)&&r.push(e.path)}return{totalSize:t,fileList:n,outedDateFileList:r}})):{totalSize:0,fileList:[],outedDateFileList:[]},h=(e="",t=[])=>{if(!e||0===t.length)return Promise.resolve();const n=[];for(const r of t){const t=`${e}/${r}`;n.push(u(t))}return Promise.all(n)},f=(e={},t="")=>t?(0,c.er)()?Promise.resolve():a.wZ||a.cj?new Promise(((n,r)=>{o.fs.writeFile({filePath:t,data:JSON.stringify(e),encoding:"utf-8",success:n,fail:r})})):Promise.resolve():Promise.resolve(),g=e=>e&&0!==e.length?((e="")=>{if(e)return new Promise(((t,n)=>{o.fs.readdir({dirPath:e,success:t,fail:n})}))})(i.Lq).then((t=>{const n=t.files;e&&e.map((e=>{const{url:t,filePath:o,fileName:i}=e;return n.includes(i)?Promise.resolve():((e="",t="")=>{if(e&&t)return new Promise(((n,o)=>{(0,r.o)({url:e,filePath:t,success:n,fail:o})}))})(t,o)}))})):Promise.reject({errMsg:"无数据"}),_=e=>{if(e&&"object"==typeof e&&!(d>0)&&(d+=1,!(0,c.er)()&&(a.wZ||a.cj)&&e&&e.widget_gray_unlimit_fetch_tag)){const t=3600*e.widget_gray_unlimit_fetch_tag*1e3;try{o.fs.stat({path:i.YC,success:e=>{var n;Date.now()-1e3*(null==e||null===(n=e.stats)||void 0===n?void 0:n.lastModifiedTime)>=t&&(0,s.Zp)()},fail:e=>{e.errMsg&&e.errMsg.indexOf("no such file")>-1&&f({},i.YC)}})}catch(e){}}}},2886:(e,t,n)=>{"use strict";n.d(t,{R:()=>o,Y:()=>i});var r=n(7868);const o=e=>(0,r.J)(19213,e),i=e=>(0,r.J)(19214,e)},4684:(e,t,n)=>{"use strict";n.d(t,{l_:()=>i,Ee:()=>s,Cy:()=>c,in:()=>u,IU:()=>l,$G:()=>d,U2:()=>p,X1:()=>h,Vs:()=>o.Vs});var r=n(9045),o=n(2241);const i=function(e){let t="";return 0===(e=e||"").length?"":(t=e.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g,"    "),t=t.replace(/&#039;|&#39;/g,"'"),t=t.replace(/&#047;|&#47;/g,"/"),t=t.replace(/&#092;|&#92;/g,"\\"),t=t.replace(/&quot;/g,'"'),t=t.replace(/&amp;/g,"&"),t=t.replace(/<br>/g,"\n"),t=t.replace(/<br\/>/g,"\n"),t=t.replace(/<br \/>/g,"\n"),t)},a=e=>e&&"object"==typeof e&&!Array.isArray(e),s=(e,...t)=>{if(!t.length)return e;const n=t.shift();if(a(e)&&a(n))for(const t in n)a(n[t])?(e[t]||Object.assign(e,{[t]:{}}),s(e[t],n[t])):Object.assign(e,{[t]:n[t]});return s(e,...t)},c=()=>{const e=new Date,t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("")},l=e=>{if(e)return e.wx_game_video&&e.wx_game_video.short_video?e.wx_game_video.short_video.viewid:void 0},d=(e,t)=>{let n=0,r=0;for(let o=0;o<e.length;o++)n+=/[\u4e00-\u9fa5]/.test(e[o])?2:1,n<t-1&&(r=o);return n>t?`${e.substring(0,r+1)}...`:e},u=e=>e<1e4?e.toString():`${(e/1e4).toFixed(1)}万`,p=(e,t,n)=>{"string"==typeof t&&(t=t.split("."));let r=e,o=0;for(;r&&o<t.length;)r=r[t[o]],o+=1;return r||n},h=e=>{let t=0;const n=Object.assign({},{fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},e);try{(0,r.IN)("measureText",Object.assign({},n,{complete(e){t=e.width||0}}))}catch(e){}return t}},8582:(e,t,n)=>{"use strict";n.d(t,{lc:()=>w,Ku:()=>C,sv:()=>S,L9:()=>T});var r=n(8176),o=n(665),i=n(5287),a=n(2886),s=n(9045),c=n(405),l=n(1095),d=n(29),u=n(7646),p=n(2241),h=n(570);const f=(0,p.Fr)((0,u.Ce)(!1,"advertReport"));let g="",_=0,m="index.html";const y=new l.vp,v="_onWxAdUserCaptureScreen",A={shareAppMessage:0,shareTimeline:3};o.Z.onReady((()=>{g=(0,i.I)()}));const b={};try{(0,c.H)((e=>{_=e.webviewId,b[_]||(b[_]=!0,m=e.path,(0,d.dq)(_,(e=>{E(e)})))}))}catch(e){}(0,r.x9)((()=>{const e=+new Date;g&&(0,a.R)({eventTimeStamp:e,scene:7,uxinfo:g,url:m}),_&&(0,s.nY)(v,{eventTimeStamp:e,path:m},[_]),y.emit(v,{eventTimeStamp:e,webviewId:_,path:m})}));const w=e=>{"function"==typeof e&&y.on("_onWxAdUserCaptureScreen",e)},C=(e,t)=>{if(g){let n="",r=A[e]?A[e]:0;"shareAppMessage"===e&&t.shareInfos&&(r=t.shareInfos.length>0?2:1,n=t.shareInfos.length>0&&t.shareInfos[0].shareName||""),0===r&&"shareAppMessage"===e&&t.shareTickets&&(r=t.shareTickets.length>0?2:1),(0,a.Y)({eventTimeStamp:+new Date,shareType:r,tousername:n,uxinfo:g,url:m})}},I={};(0,s.Ld)("wxAdDelayReport",((e,t)=>{I[t]||(I[t]={}),e.key&&e.value&&(I[t][e.key]=e.value)}));const E=e=>{if(I[e]){for(const t in I[e]){const n=I[e][t];f({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:n}}).catch((e=>{}))}delete I[e]}};(0,s.Ld)("checkWxAdFetchLog",(e=>{(0,h.J$)(e)})),(0,s.Ld)("weappTouchEvent",(e=>{y.emit("_onWeappTouchEvent",e)}));const S=e=>{y.off("_onWeappTouchEvent",e)},T=(e,t)=>{let n=!1;if("function"==typeof e){const r=r=>{!n&&e(r,t),n=!0};return y.on("_onWeappTouchEvent",r),r}return null}},2605:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});const r={20299:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"is_reward",value:"0"},{type:"uint32",key:"is_cancel",value:"0"},{type:"uint32",key:"ad_platform",value:"0"}],18988:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"button_type",value:"0"}],16743:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"close_type",value:"0"},{type:"uint64",key:"exposure_duration",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"close_time",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16139:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"appid",value:"0"},{type:"string",key:"weapppath",value:"0"},{type:"string",key:"adunit_id",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"traceid",value:"0"},{type:"uint64",key:"TimeMs",value:"0"},{type:"string",key:"useragent",value:"0"},{type:"uint32",key:"type",value:"0"},{type:"uint32",key:"diaphaneity",value:"0"},{type:"uint32",key:"PageX",value:"0"},{type:"uint32",key:"PageY",value:"0"},{type:"uint32",key:"ScreenHeight",value:"0"},{type:"uint32",key:"ScreenWidth",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"orig_weapp_id",value:""}],17045:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"weapp_path",value:""},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"device_type",value:""},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"ad_pos_x",value:"0"},{type:"uint32",key:"ad_pos_y",value:"0"},{type:"uint32",key:"exp_time",value:"0"},{type:"uint32",key:"clk_complaint_button",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"service_type",value:"0"},{type:"uint32",key:"first_grade_id",value:"0"},{type:"string",key:"first_grade_desc",value:""},{type:"uint64",key:"first_grade_time",value:"0"},{type:"uint32",key:"second_grade_id",value:"0"},{type:"string",key:"second_grade_desc",value:""},{type:"uint64",key:"second_grade_time",value:"0"},{type:"uint32",key:"is_finish_complaint",value:"0"},{type:"uint32",key:"is_click_ad",value:"0"},{type:"uint64",key:"click_ad_time",value:"0"},{type:"uint64",key:"click_ad_time_ms",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"feedback_reason",value:"0"}],16487:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"click_time",value:"0"},{type:"uint32",key:"click_cnt",value:"0"},{type:"uint32",key:"start_pos_x",value:"0"},{type:"uint32",key:"start_pos_y",value:"0"},{type:"uint32",key:"end_pos_x",value:"0"},{type:"uint32",key:"end_pos_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"uint32",key:"block_click",value:"0"},{type:"uint64",key:"start_posx",value:"0"},{type:"uint64",key:"start_posy",value:"0"},{type:"uint64",key:"end_posx",value:"0"},{type:"uint64",key:"end_posy",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16e3:[{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"uint64",key:"play_duration",value:"0"},{type:"uint64",key:"click_close_ts",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"uint64",key:"video_first_play_ts",value:"0"},{type:"uint64",key:"card_first_show_ts",value:"0"},{type:"uint64",key:"click_card_ts",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"current_play_url",value:""},{type:"string",key:"last_fetch_url",value:""},{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint64",key:"video_duration",value:"0"},{type:"uint32",key:"is_ended",value:"0"}],15730:[{type:"uint64",key:"load_begin_time",value:"0"},{type:"uint64",key:"load_end_time",value:"0"},{type:"uint64",key:"load_cost_time",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"report_type",value:"0"},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"load_departure_time",value:"0"},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],15979:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"lastclkperiod",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"uint32",key:"pagestaytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"string",key:"orig_weapp_id",value:""}],15980:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"opentime",value:"0"},{type:"uint64",key:"closetime",value:"0"},{type:"uint64",key:"staytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"string",key:"act_type",value:""},{type:"string",key:"act_type_str",value:""},{type:"uint32",key:"act_type_int",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16295:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"id_key",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"string",key:"source_url",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"expand_feild",value:""},{type:"string",key:"expand_feild2",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"id_key_group",value:"924"},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"machine_brand",value:""},{type:"string",key:"machine_type",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"}],17035:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"touch_start_x",value:"0"},{type:"uint32",key:"touch_start_y",value:"0"},{type:"uint32",key:"touch_end_x",value:"0"},{type:"uint32",key:"touch_end_y",value:"0"},{type:"uint64",key:"touch_duration",value:"0"},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],18072:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"last_clicks",value:""},{type:"uint32",key:"banner_x",value:"0"},{type:"uint32",key:"banner_y",value:"0"},{type:"uint32",key:"banner_width",value:"0"},{type:"uint32",key:"banner_height",value:"0"},{type:"uint32",key:"exp_ms",value:"0"},{type:"uint32",key:"clk_ms",value:"0"},{type:"uint32",key:"banner_clk_screen_x",value:"0"},{type:"uint32",key:"banner_clk_screen_y",value:"0"},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"last_show_time",value:"0"},{type:"uint64",key:"slotid",value:"0"}],18517:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"action",value:"0"},{type:"string",key:"traceid",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"publisher_appid",value:""},{type:"uint32",key:"row_number",value:"0"},{type:"uint32",key:"column_number",value:"0"},{type:"uint32",key:"box_index",value:"0"},{type:"uint64",key:"action_timems",value:"0"},{type:"uint32",key:"clk_x",value:"0"},{type:"uint32",key:"clk_y",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"machine_type",value:""}],19429:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"show_time",value:"0"},{type:"uint64",key:"end_time",value:"0"},{type:"uint64",key:"show_delay_duration",value:"0"},{type:"uint64",key:"fetch_duration",value:"0"}],19213:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19214:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"shareType",value:"0"},{type:"uint32",key:"tousername",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19837:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"slotid",value:""},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"ext_info",value:""},{type:"uint64",key:"p1",value:"0"},{type:"uint64",key:"p2",value:"0"},{type:"uint64",key:"p3",value:"0"},{type:"uint64",key:"p4",value:"0"},{type:"uint64",key:"p5",value:"0"},{type:"uint64",key:"p6",value:"0"},{type:"uint64",key:"p7",value:"0"},{type:"uint64",key:"p8",value:"0"},{type:"uint64",key:"p9",value:"0"},{type:"uint64",key:"p10",value:"0"},{type:"uint64",key:"p11",value:"0"},{type:"uint64",key:"p12",value:"0"},{type:"uint64",key:"p13",value:"0"},{type:"uint64",key:"p14",value:"0"},{type:"uint64",key:"p15",value:"0"},{type:"uint64",key:"p16",value:"0"},{type:"string",key:"instance_id",value:""},{type:"uint32",key:"scene",value:"0"},{type:"uint32",key:"error_code",value:"0"},{type:"uint64",key:"p17",value:"0"},{type:"uint64",key:"p18",value:"0"},{type:"uint64",key:"p19",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint64",key:"p20",value:"0"},{type:"uint64",key:"p21",value:"0"},{type:"string",key:"machine_brand",value:""},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"}],20480:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"string",key:"click_pos",value:""}],20317:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"branch_id",value:""},{type:"string",key:"branch_dim",value:""}],21644:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"crt_size",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"ad_unit_id",value:""},{type:"uint32",key:"use_gauss_video",value:"0"},{type:"string",key:"video_url",value:""},{type:"string",key:"gauss_video_url",value:""},{type:"uint32",key:"use_expand_style",value:"0"},{type:"uint32",key:"exp_use_gauss_video",value:"0"},{type:"uint32",key:"exp_use_expand_style",value:"0"}],23415:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"string",key:"adunitid",value:""},{type:"uint32",key:"button_type",value:"0"},{type:"uint64",key:"button_time",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint64",key:"ad_clk_time",value:"0"},{type:"uint64",key:"ad_exp_time",value:"0"},{type:"uint32",key:"ad_clk_x",value:"0"},{type:"uint32",key:"ad_clk_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"}]},o=e=>{const t=r[e.toString()];return t?t.concat([]):[]}},7868:(e,t,n)=>{"use strict";n.d(t,{r:()=>C,J:()=>w});var r=n(2605),o=n(1095),i=n(7646),a=n(2241),s=n(3170),c=n(2582),l=n(4643),d=n(665);const u=(0,a.Fr)((0,i.Ce)(!1,"advert_report"));let p="";const h=c.iw;let f="",g="",_="",m="",y="",v="",A=!0;let b="";d.Z.onReady((()=>{p=(0,l._t)()||"";const e=(0,s.Oo)();f=e.system,g=e.version,_=e.SDKVersion,y=e.model,v=e.brand,A=(0,o.aI)();try{b=d.Z.accountInfo.appId,m=__libVersionInfo__.updateTime}catch(e){}}));const w=(e,t)=>{let n=(0,r.x)(e);if(n&&0!==n.length)return t=Object.assign({publisher_appid:b,appid:b,orig_weapp_id:"",network_type:"",wechat_version:g,platform:h,system_version:f,device_orientation:p,wxapp_lib_version:_,wxapp_lib_time:m,machine_type:y,ad_platform:A?1:0},t),t=Object.assign({DeviceModel:y,DeviceBrand:v,OsName:h,OsVersion:f},t),n=n.map((e=>({type:e.type,value:(t[e.key]||e.value).toString()}))),u({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}}).catch((e=>{}))},C=(e,t,n)=>{(({key:e,id:t})=>{"object"==typeof e&&(!t&&(t=e.idKeyGroup),e=e.idKey),0===e&&(e="0"),Reporter.reportIDKeyDirectly({id:t||924,key:e,force:!0})})({key:e}),(({key:e,id:t,extInfo:n,reportData:r})=>{if("object"==typeof e&&(!t&&(t=e.idKeyGroup),e=e.idKey),0===e&&(e="0"),r=r||{},n&&"string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=n.toString()}w(16295,{id_key:e,id_key_group:t||924,report_time:+new Date,ad_pos_type:r.ad_pos_type||0,source_url:r.source_url||"",expand_feild:r.reportAdData||"",expand_feild2:n,aid:r.aid||0,traceid:r.traceid||"",ad_unit_id:r.ad_unit_id})})({key:e,extInfo:t,reportData:n})}},8579:(e,t,n)=>{"use strict";n.d(t,{IN:()=>a,ET:()=>c,$g:()=>d});const r=(e,t)=>({idKey:e,idKeyGroup:t});let o;!function(e){e[e.COMMON=924]="COMMON",e[e.SPLASHAD=1288]="SPLASHAD",e[e.CUSTOMAD=1390]="CUSTOMAD"}(o||(o={}));const i=e=>r(e,o.COMMON),a={AD_BANNER_LOAD_ERROR:i(5),AD_VIDEO_LOAD_ERROR:i(10),REWARDED_VIDEO_PARSE_ERROR:i(11),REWARDED_VIDEO_RENDER_ERROR:i(12),REWARDED_VIDEO_LOAD_ERROR:i(13),REWARDED_VIDEO_FOLLOW_SUCCESS:i(14),OPEN_URL_ERROR:i(21),OPEN_WXAPP_ERROR:i(22),OPEN_CANVAS_ERROR:i(23),ADD_CONTACT_ERROR:i(24),LAUNCH_APP_ERROR:i(25),OPEN_WEBAPPSTORE_ERROR:i(26),ADD_DOWNLOAD_TASK_ERROR:i(28),CLICK_REPORT_ERROR:i(32),EXPOSURE_REPORT_ERROR:i(33),FOLLOW_REPORT_ERROR:i(34),REWARDED_VIDEO_ANIMATE_ERROR:i(35),AD_FOLLOWED:i(37),AD_INSTALLED:i(38),AD_INTERSTITIAL_LOAD_ERROR:i(39),REWARDED_VIDEO_INSTANCE_BROKEN:i(50),PRELOAD_MINIENV_SUCCESS:i(86),PRELOAD_MINIENV_ERROR:i(87),AD_GRID_LOAD_SUCCESS:i(88),AD_GRID_LOAD_COUNT_ERROR:i(89),AD_GRID_LOAD_ERROR:i(90),PREDOWNLOAD_SUCCESS:i(96),PREDOWNLOAD_ERROR:i(97),REWARDED_VIDEO_OTHER_SHOW_ERROR:i(105),BATCHLOAD_SUCCESS:i(112),BATCHLOAD_ERROR:i(113),REWARDED_VIDEO_BUTTON_WIDTH_ERROR:i(114),REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR:i(115),BIND_GUIDE_SUCCESS:i(119),BIND_GUIDE_ERROR:i(120),REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR:i(121),RIGHTBUTTON_HIDE_ERROR:i(127),REWARDED_VIDEO_RELATION_FETCH_ERROR:i(128),GET_DEVICEINFO_ERROR:i(129),THIRD_ERROR:i(130),GET_DEVICEINFO_SUCCESS:i(131),GET_WAID_SUCCESS:i(132),GET_WAID_ERROR:i(133),READ_ADINFOS_ERROR:i(134),AD_FETCH_SUCCESS:i(135),REWARDED_VIDEO_PRELOAD_ERROR:i(136),REWARDED_VIDEO_PRELOAD_SUCCESS:i(137),READ_ADINFOS_SUCCESS:i(138),ANALYSE_DEBUG_REPORT_ERROR:i(139),PRELOAD_CALL_ERROR:i(140),PRELOAD_LOAD_ERROR:i(141),PRELOAD_LOAD_SUCCESS:i(142),PRELOAD_USE_SUCCESS:i(143),PRELOAD_USE_ERROR:i(144),PRELOAD_DOWNLOAD_SUCCESS:i(145),PRELOAD_DOWNLOAD_ERROR:i(146),REPORT_VIDEO_FAILED:i(147),REWARD_GAUSS_EXISTS:i(148),REWARD_USE_GAUSS:i(149),REWARD_USE_EXPAND_STYLE:i(150),REWARD_USE_GAUSS_AND_EXPAND_STYLE:i(151),REWARDED_VIDEO_KEEP_ALIVE:i(152),REWARDED_VIDEO_END:i(154),OPEN_CHANNELS_ACTIVITY_SUCCESS:i(156),OPEN_CHANNELS_ACTIVITY_FAILED:i(157),OPEN_CHANNELS_LIVE_SUCCESS:i(158),OPEN_CHANNELS_LIVE_FAILED:i(159),OPEN_CHANNELS_USER_PROFILE_SUCCESS:i(160),OPEN_CHANNELS_USER_PROFILE_FAILED:i(161),REWARD_CHANNELS_CALLBACK_SUCCESS:i(162),REWARD_CHANNELS_CALLBACK_FAILED:i(163),H5_PRELOAD_CARD_CLICKED:i(164),H5_PRELOAD_BUTTON_CLICKED:i(165),H5_PRELOAD_SUCCESS:i(166),H5_PRELOAD_FAILED:i(167),H5_PRELOAD_PLAYABLE_CLICKED:i(168),GET_CHANNELS_LIVE_STATUS_SUCCESS:i(169),GET_CHANNELS_LIVE_STATUS_FAILED:i(170),REWARDED_VIDEO_DURATION_ZERO:i(171),OPEN_WEBSTORE_ERROR:i(181)},s=e=>r(e,o.SPLASHAD),c={dataLoadSuccess:s(0),dataLoadFail:s(1),dataPreloadSuccess:s(2),dataPreloadFail:s(3),handleDataFail:s(4),launchAcceptShouldShow:s(5),menuAcceptShouldShow:s(6),readFileFail:s(7),launchShowSplashAdSuccess:s(8),menuShowSplashAdSuccess:s(9),showSplashAdFail:s(10),firstRenderFail:s(11),firstInsertFail:s(12),secondRenderFail:s(13),secondInsertFail:s(14),iosThirdInsertFail:s(15),checkAdStateFail:s(16),adOfflineClose:s(17),readFileDataFail:s(18),firstShowSuccess:s(19),showSplashAdMenuSuccess:s(20),showSplashAdMenuFail:s(21),secondShowSuccess:s(22),removeFileDataFail:s(23),landingPageFail:s(24),frequencyControlFail:s(25),frequencyControlReturn:s(26),bulkCopyFileFail:s(27),getAdInfosFail:s(28),getAidFail:s(29),setExposureTagFail:s(30),NO_ADINFOS:s(31),NO_AID:s(32),MATERIAL_NOT_READY:s(33),CHECK_AD_STATUS_ERROR:s(34),CRT_ORIENTATION_NOT_SURE:s(35),EXPOSURE_TIMES_LIMIT:s(36),START_CHECK_AD_STATUS:s(37),CHECK_AD_STATUS_SUCCESS:s(38),OTHER_ADS_EMIT_FETCH:s(39),WRITE_ADINFOS_SUCCESS:s(40),WRITE_ADINFOS_FAIL:s(41)},l=e=>r(e,o.CUSTOMAD),d={LOAD_FAILED:l(1),PRELOAD_SUCCESS:l(2),PRELOAD_FAILED:l(3),PARSE_FAILED:l(4),TPL_RENDER_SUCCESS:l(5),TPL_PARSE_FAILED:l(6),TPL_LOAD_FAILED:l(7),AD_LIMIT_TIME:l(8),AD_LIMIT_BOUNDARY:l(9),RELATION_FETCH_ERROR:l(10),SHOW_FAILED1:l(11),SHOW_FAILED2:l(12),AD_VIDEO_LOAD_FAILED:l(13),FOLLOW_SUCCESS:l(14),FOLLOW_FAILED:l(15),RENDER_SUCCESS:l(16),RENDER_FAILED:l(17),REFETCH_SUCCESS:l(18),REFETCH_FAILED:l(19),LOAD_SUCCESS:l(20),WIDTH_GET_ERROR:l(21)}},8476:(e,t,n)=>{"use strict";n.d(t,{S3:()=>h,S0:()=>f,v3:()=>g,uj:()=>_,lv:()=>y,SQ:()=>A,NN:()=>b});var r=n(2582),o=n(3170),i=n(1093),a=n(7868),s=n(1095),c=n(3489),l=n(405),d=n(665),u=n(4643),p=n(9237);const h={startTime:new Date,gameAppId:"",deviceOrientation:"",screenWidth:0,screenHeight:0,systemVersion:"",wechatVersion:"",SDKVersion:"",SDKVersionTime:"",envVersion:"",brand:"",model:"",platform:r.iw,isWaGame:!0,isApp:!1,isIOS:r.cj,isAndroid:r.wZ,isIPad:null,oaid:"",imei:"",idfa:"",common_device_id:"{}",adNetworkType:""},f={enterForegroundTime:new Date,gameDuration:0,currentScene:1011,weappPath:"index.html",lastWebviewId:0,currentWebviewId:0,currentOpenType:""},g=()=>(0,u.ei)(h,["oaid","imei","idfa","common_device_id"]),_=()=>{if(!h.isWaGame){const e=(0,o.xI)();h.screenWidth=e.screenWidth,h.screenHeight=e.screenHeight,h.deviceOrientation=h.screenWidth>h.screenHeight?"landscape":"portrait"}return h.deviceOrientation};let m=()=>{};const y=()=>m(),v=()=>new Promise((e=>{m=e})),A=new Promise((e=>{d.Z.onReady((()=>{var t;h.startTime=new Date,h.deviceOrientation=(0,u._t)()||"",h.envVersion=d.Z.envVersion;const n=(0,o.Oo)(),c=(0,o.Ew)();h.screenWidth=c.screenWidth||0,h.screenHeight=c.screenHeight||0,h.systemVersion=n.system,h.wechatVersion=n.version,h.SDKVersion=n.SDKVersion,h.brand=n.brand,h.model=n.model,h.isIPad=null===(t=n.model)||void 0===t?void 0:t.includes("iPad"),h.isWaGame=(0,s.aI)(),h.isApp=(0,s.N0)();try{h.gameAppId=d.Z.accountInfo.appId,h.SDKVersionTime=__libVersionInfo__.updateTime}catch(e){}Promise.all([new Promise((e=>{(0,i.yx)((t=>{h.oaid=t,e()}))})),new Promise((e=>{(0,i.dz)().then((({imei:t,oaid:n,commonid:o})=>{r.cj?h.idfa=t:r.wZ&&(h.oaid=n,h.imei=t),h.common_device_id=o||"{}",e(),v().then((()=>{(0,a.r)(p.IN.GET_DEVICEINFO_SUCCESS)}))})).catch((t=>{e(),v().then((()=>{(0,a.r)(p.IN.GET_DEVICEINFO_ERROR,t)}))}))}))]).then((()=>e(h)))}))})),b=e=>{const t=Object.keys(e);for(const n of t)h[n]=e[n]};try{(0,l.H)((({webviewId:e,openType:t,path:n})=>{h.isWaGame||(f.lastWebviewId=f.currentWebviewId,f.currentWebviewId=e||0,f.currentOpenType=t,f.weappPath=n)}))}catch(e){}(0,c.dN)((({scene:e})=>{f.enterForegroundTime=new Date,f.currentScene=e})),(0,c.vv)((()=>{f.gameDuration+=Date.now()-f.enterForegroundTime.getTime()}))},9237:(e,t,n)=>{"use strict";n.d(t,{FF:()=>ar,W:()=>_e,z5:()=>pe,IN:()=>ge.IN,fr:()=>Ie,EM:()=>Ee,kv:()=>me});var r=n(3356),o=n.n(r),i=n(1503),a=n.n(i),s=n(2102),c=n.n(s),l=n(6725),d=n.n(l),u=n(665),p=n(1095),h=n(1093),f=n(8997),g=n(3324),_=n(2886);const m=(e,t=!1)=>{let n=t?"<?xml version='1.0' encoding='utf-8' ?>":"";return n+=`<${e.name}>`,e.children.length>0?n+=(e=>e.children&&e.children.length>0?e.children.map((e=>m(e))).join(""):"")(e):n+=`<![CDATA[${e.content.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}]]>`,n+=`</${e.name}>`,n};var y=n(8582),v=n(4684),A=n(570),b=n(5328);const w=Symbol("signExport"),C=()=>(e,t)=>{e[w]=e[w]||new Set,e[w].add(t)},I=(e,t)=>{const n=Array.isArray(t)?t:[t];for(const t of n)if(!(t in e)||"function"!=typeof e[t])throw new Error(`${t} is not the function method of the class`);return n.map((t=>e[t]))},E=(e,t=!1)=>(n,r,i)=>{const a=i.value,s=I(n,e);i.value=t?function(){var e=o()((function*(...e){const t=yield a.call(this,...e);for(const e of s)yield e.call(this,t);return t}));return function(){return e.apply(this,arguments)}}():function(...e){const t=a.call(this,...e);if(t instanceof Promise)return t.then((e=>{for(const t of s)t.call(this,e);return e}));for(const e of s)e.call(this,t);return t}},S=(e,t=!1)=>(n,r,i)=>{const a=i.value,s=I(n,e);i.value=t?function(){var e=o()((function*(...e){try{return yield a.call(this,...e)}catch(e){for(const t of s)yield t.call(this,e);throw e}}));return function(){return e.apply(this,arguments)}}():function(...e){try{const t=a.call(this,...e);return t instanceof Promise&&t.catch((e=>{for(const t of s)t.call(this,e)})),t}catch(e){for(const t of s)t.call(this,e);throw e}}};var T,x,k,P,D,O,N,R,M,L,B,F,W,j,U,V,G,$,H,Z,Q,Y,z,q,J,K,X,ee,te,ne,re=n(4643),oe=n(2605),ie=n(8476),ae=n(6714);let se=(T=C(),x=C(),k=C(),P=C(),D=C(),O=C(),N=C(),R=C(),M=C(),L=C(),B=C(),F=C(),W=C(),j=C(),U=C(),V=C(),G=C(),$=C(),H=C(),Z=C(),Q=C(),Y=C(),z=C(),q=C(),J=C(),K=C(),X=C(),ee=C(),te=C(),ne=class{constructor(e){this.adProxy=e,this.timePoints={},this.analyseBranchInfo=null}get adType(){return this.adProxy.getAdType()}get data(){return this.adProxy.data}get convertedAdData(){return this.adProxy.convertedAdData}get datas(){return this.adProxy.datas}get adUnitId(){return this.adProxy.getAdUnitId()}get pluginAppid(){return this.adProxy.getPluginAppid()}get lastClickTime(){return this.adProxy.getLastClickTime()}getTimePoint(e){return this.timePoints[e]?this.timePoints[e]:0}setTimePoint(e,t={}){if("splashAd"===this.adType)return void(this.timePoints[e]=Date.now());["p2","p12"].includes(e)&&(this.timePoints={p1:this.timePoints.p1||0});const{time:n}=t;this.timePoints[e]=n||Date.now()}reportTimePoints({slotid:e,costtype:t,splash_instance_id:n="",scene:r=0,errCode:o=0,extInfo:i={}}){var s;if(!["customAd","incentive-video","splashAd","interstitialAd"].includes(this.adType))return;this.reportMMData(19837,a()({slotid:e,costtype:t,ext_info:JSON.stringify(Object.assign({},i,{adUnitId:this.adUnitId,is_game:!0})),instance_id:n,scene:r,crt_size:(null===(s=this.data)||void 0===s?void 0:s.crt_size)||0,error_code:o},this.timePoints))}reportCloseAction(e){return this.reportMMData(16743,e)}reportAdEntranceExposure(e){return this.reportMMData(18988,e)}reportTouchClick(e){return this.reportMMData(16487,e)}reportCancelRewardPlayablePage(e){return this.reportMMData(20299,e)}formatMMData(e,t){var n;const r=(0,oe.x)(e);if(!r||0===r.length)return null;let o=this.data||{aid:0,traceid:"",crt_size:0};if("grid"===this.adType&&-1!==[16139].indexOf(e))try{o=this.datas[this.datas.length-1]}catch(e){}return Object.assign(t,{aid:o.aid,traceid:o.traceid,crt_size:o.crt_size,slotid:b.DX[this.adType],report_time:Date.now(),ad_pos_type:null!==(n=b._W[this.adType])&&void 0!==n?n:0,publisher_appid:this.pluginAppid?this.pluginAppid:ie.S3.gameAppId,appid:this.pluginAppid?this.pluginAppid:ie.S3.gameAppId,orig_weapp_id:this.pluginAppid?ie.S3.gameAppId:"",network_type:ie.S3.adNetworkType,wechat_version:ie.S3.wechatVersion,platform:ie.S3.platform,system_version:ie.S3.systemVersion,device_orientation:ie.S3.deviceOrientation,wxapp_lib_version:ie.S3.SDKVersion,wxapp_lib_time:ie.S3.SDKVersionTime,machine_type:ie.S3.model,machine_brand:ie.S3.brand,screen_width:ie.S3.screenWidth,screen_height:ie.S3.screenHeight,ad_platform:ie.S3.isWaGame?1:0,ad_unit_id:this.adUnitId}),r.map((e=>({type:e.type,value:(t[e.key]||e.value).toString()})))}reportMMData(e,t){const n=this.formatMMData(e,t);return(0,f.Lo)({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}})}reportAbnormalDetect(e){const t={adunit_id:this.adUnitId,appid:ie.S3.gameAppId};if(Object.assign(e,t),"object"==typeof e)return this.reportMMData(16139,e)}reportAdIDKey({key:e,id:t}){var n;let r=t,o=e;"object"==typeof o&&(!r&&(r=o.idKeyGroup),o=o.idKey),r||(r=null!==(n=b.gQ[this.adType])&&void 0!==n?n:924),0===o&&(o="0"),Reporter.reportIDKeyDirectly({id:r,key:o})}processStackMsg(e){let t=(e.stack||"").replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,"");const n=e.toString();return t.indexOf(n)<0&&(t=`${n}@${t}`),t}reportAdIDKeyErrorData({key:e,id:t,extInfo:n=""}){var r,o;let i=e,a=t,s=n;"object"==typeof i&&(!a&&(a=i.idKeyGroup),i=i.idKey),0===i&&(i="0");let c="",l="";try{if(this.data){const e={crt_size:this.data.crt_size,product_type:this.data.product_type,dest_type:this.data.dest_type,url:this.data.url};if([_e.CRT_SIZE_REWARD_VEDIO169,_e.CRT_SIZE_REWARD_VEDIO916,_e.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(this.data.crt_size)){const t=this.convertedAdData;t&&(e.is_gauss_blur=(0,ae.zt)(t),e.is_expand_style=(0,ae.zi)(t),l=e.is_gauss_blur?t.gaussVideo.src:t.shortVideo.src)}else this.adProxy.isBannerAd()&&(l=this.data.image_url);c=JSON.stringify(e)}if(s&&"string"!=typeof s)try{s instanceof Error&&(s=this.processStackMsg(s)),s=JSON.stringify(s)}catch(e){s=s.toString()}}catch(e){var d;s=this.processStackMsg(e),l="",c=null===(d=this.data)||void 0===d?void 0:d.crt_size}return this.reportMMData(16295,{id_key:i,id_key_group:null!==(r=null!==(o=a)&&void 0!==o?o:b.gQ[this.adType])&&void 0!==r?r:924,report_time:+new Date,source_url:l,expand_feild:c,expand_feild2:s,scene:this.adProxy.scene||0})}reportAdMonitorData(e,t){this.reportAdIDKey({key:e}),this.reportAdIDKeyErrorData({key:e,extInfo:t})}reportEndPage({slotid:e,costtype:t,isGame:n=0,posType:r,ace_type:o,exposure_duration:i=0}){return this.reportMMData(19002,{slotid:e,costtype:t,is_game:n,pos_type:r,ace_type:o,exposure_duration:i})}reportAdFeedbackData(e){var t,n;const r={};if("grid"===this.adType){var o;const e={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(o=this.datas)||void 0===o||o.forEach((t=>{t.extBackComm&&e.viewid.push(t.extBackComm.viewid),e.s_pt.push(t.pt),e.s_aid.push(t.aid),e.s_trace_id.push(t.traceid)})),r.grid_feedback_info=e}return this.reportMMData(17045,{appid:ie.S3.gameAppId,weapp_path:ie.S0.weappPath,ad_unit_id:this.adUnitId,device_type:ie.S3.model||"",ad_height:e.adHeight,ad_width:e.adWidth,screen_height:ie.S3.screenHeight,screen_width:ie.S3.screenWidth,ad_pos_x:e.adPosX,ad_pos_y:e.adPosY,exp_time:e.expTime,clk_complaint_button:1,slotid:b.DX[this.adType],service_type:ie.S3.isWaGame?1:0,first_grade_id:e.firstGradeId,first_grade_desc:e.firstGradeDesc,first_grade_time:e.firstGradeTime,second_grade_id:e.secondGradeId,second_grade_desc:e.secondGradeDesc,second_grade_time:e.secondGradeTime,is_finish_complaint:0,is_click_ad:null!==(t=e.isClickAd)&&void 0!==t?t:0!==this.lastClickTime?1:0,click_ad_time_ms:null!==(n=e.clickAdTimeMs)&&void 0!==n?n:this.lastClickTime,feedback_reason:e.feedbackReason,ext_feedback_comm:JSON.stringify(r)})}reportBehaviorButton({button:e,playDuration:t,preloadVideo:n,preloadVideoSuccess:r,videoFirstPlay:o,cardFirstShow:i,clickCard:a,pressInterval:s,currentPlayUrl:c,lastFetchUrl:l,isEnded:d,videoDuration:u}){return this.reportMMData(16e3,{click_button:e,play_duration:t,click_close_ts:+new Date,preload_video:n,preload_video_success:r,video_first_play_ts:o,card_first_show_ts:i,click_card_ts:a,press_interval:s,current_play_url:c,last_fetch_url:l,is_ended:d?1:0,video_duration:u})}reportVideoLoadTime({beginTime:e=0,endTime:t=0,departureTime:n=0,preloadVideo:r=0,preloadVideoSuccess:o=0,reportType:i=0}){const a=t-n-e;return a>0?this.reportMMData(15730,{load_begin_time:e,load_end_time:t,load_departure_time:n,load_cost_time:a,preload_video:r,preload_video_success:o,report_type:i}):Promise.resolve()}reportRepeatClick({slotId:e,costType:t,clkCnt:n,lastClkPeriod:r,retCode:o,costTime:i,pageStayTime:a,jsapiName:s}){return this.reportMMData(15979,{slotid:e,costtype:t,clkcnt:n,currenttime:+new Date,lastclkperiod:r,retcode:o,costtime:i,pagestaytime:a,jsapiname:s})}reportLandingTime({slotId:e,costType:t,openTime:n,closeTime:r,stayTime:o,jsapiName:i,clickTime:a,clkCnt:s,retCode:c,costTime:l,actTypeInt:d,actTypeStr:u}){return this.reportMMData(15980,{slotid:e,costtype:t,currenttime:a,opentime:n,closetime:r,staytime:o,jsapiname:i,clkcnt:s,retcode:c,costtime:l,act_type_int:d,act_type_str:u})}reportVideoLastClick({touchStartX:e,touchStartY:t,touchEndX:n,touchEndY:r,touchDuration:o,screenWidth:i,screenHeight:a}){return this.reportMMData(17035,{touch_start_x:e,touch_start_y:t,touch_end_x:n,touch_end_y:r,touch_duration:o,screenwidth:i,screenheight:a})}reportBannerLastClick({lastClickArr:e,top:t,left:n,width:r,height:o,expMs:i,clickMs:a,bannerClkScreenX:s,bannerClkScreenY:c,lastShowTime:l}){return this.reportMMData(18072,{last_clicks:e,banner_x:t,banner_y:n,banner_width:r,banner_height:o,exp_ms:i,clk_ms:a,banner_clk_screen_x:s,banner_clk_screen_y:c,last_show_time:l,slotid:b.DX[this.adType]})}reportRelationFetchDuration({startTime:e,showTime:t,endTime:n}){return this.reportMMData(19429,{start_time:e,show_time:t,end_time:n,show_delay_duration:0===t?0:n-t,fetch_duration:n-e})}reportMMClickPos({clickPos:e}){var t;return this.reportMMData(20480,{slotid:b.DX[this.adType],costtype:null!==(t=this.data)&&void 0!==t&&t.is_cpm?1:2,currenttime:Date.now(),click_pos:e})}reportADFunnelModel({adtype:e,stage:t}){const n=[e,t].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"GameADFunnelModel",value:n,force:!0,immediately:!0})}recordAnalyseBranchInfo({branchId:e,branchDim:t}){this.analyseBranchInfo={branchId:e,branchDim:t}}resetAnalyseBranchInfo(){this.analyseBranchInfo=null}reportAnalyseInfo(e){const t=b.WG[this.adType]||"viewable";if(!ie.S3.isWaGame||e!==t)return;const n=this.analyseBranchInfo;n&&("release"!==ie.S3.envVersion&&this.adProxy.reportAnalyseDebugInfo(n),this.reportMMData(20317,{branch_id:n.branchId,branch_dim:n.branchDim}))}reportRewardGaussVideo({useGaussVideo:e,useExpandStyle:t,videoUrl:n,gaussVideoUrl:r,expUseGaussVideo:o,expUseExpandStyle:i}){this.reportMMData(21644,{use_gauss_video:e?1:0,video_url:n,gauss_video_url:r,use_expand_style:t?1:0,exp_use_gauss_video:o,exp_use_expand_style:i})}reportPopupClickAction({buttonType:e,buttonTime:t,adClkTime:n,adExpTime:r,adClkX:o,adClkY:i,adWidth:a,adHeight:s,isGame:c,costtype:l}){this.reportMMData(23415,{adunitid:this.adUnitId,button_type:e,button_time:t,ad_clk_time:n,ad_exp_time:r,ad_clk_x:o,ad_clk_y:i,ad_width:a,ad_height:s,is_game:c,costtype:l})}},c()(ne.prototype,"getTimePoint",[T],Object.getOwnPropertyDescriptor(ne.prototype,"getTimePoint"),ne.prototype),c()(ne.prototype,"setTimePoint",[x],Object.getOwnPropertyDescriptor(ne.prototype,"setTimePoint"),ne.prototype),c()(ne.prototype,"reportTimePoints",[k],Object.getOwnPropertyDescriptor(ne.prototype,"reportTimePoints"),ne.prototype),c()(ne.prototype,"reportCloseAction",[P],Object.getOwnPropertyDescriptor(ne.prototype,"reportCloseAction"),ne.prototype),c()(ne.prototype,"reportAdEntranceExposure",[D],Object.getOwnPropertyDescriptor(ne.prototype,"reportAdEntranceExposure"),ne.prototype),c()(ne.prototype,"reportTouchClick",[O],Object.getOwnPropertyDescriptor(ne.prototype,"reportTouchClick"),ne.prototype),c()(ne.prototype,"reportCancelRewardPlayablePage",[N],Object.getOwnPropertyDescriptor(ne.prototype,"reportCancelRewardPlayablePage"),ne.prototype),c()(ne.prototype,"reportMMData",[R],Object.getOwnPropertyDescriptor(ne.prototype,"reportMMData"),ne.prototype),c()(ne.prototype,"reportAbnormalDetect",[M],Object.getOwnPropertyDescriptor(ne.prototype,"reportAbnormalDetect"),ne.prototype),c()(ne.prototype,"reportAdIDKey",[L],Object.getOwnPropertyDescriptor(ne.prototype,"reportAdIDKey"),ne.prototype),c()(ne.prototype,"processStackMsg",[B],Object.getOwnPropertyDescriptor(ne.prototype,"processStackMsg"),ne.prototype),c()(ne.prototype,"reportAdIDKeyErrorData",[F],Object.getOwnPropertyDescriptor(ne.prototype,"reportAdIDKeyErrorData"),ne.prototype),c()(ne.prototype,"reportAdMonitorData",[W],Object.getOwnPropertyDescriptor(ne.prototype,"reportAdMonitorData"),ne.prototype),c()(ne.prototype,"reportEndPage",[j],Object.getOwnPropertyDescriptor(ne.prototype,"reportEndPage"),ne.prototype),c()(ne.prototype,"reportAdFeedbackData",[U],Object.getOwnPropertyDescriptor(ne.prototype,"reportAdFeedbackData"),ne.prototype),c()(ne.prototype,"reportBehaviorButton",[V],Object.getOwnPropertyDescriptor(ne.prototype,"reportBehaviorButton"),ne.prototype),c()(ne.prototype,"reportVideoLoadTime",[G],Object.getOwnPropertyDescriptor(ne.prototype,"reportVideoLoadTime"),ne.prototype),c()(ne.prototype,"reportRepeatClick",[$],Object.getOwnPropertyDescriptor(ne.prototype,"reportRepeatClick"),ne.prototype),c()(ne.prototype,"reportLandingTime",[H],Object.getOwnPropertyDescriptor(ne.prototype,"reportLandingTime"),ne.prototype),c()(ne.prototype,"reportVideoLastClick",[Z],Object.getOwnPropertyDescriptor(ne.prototype,"reportVideoLastClick"),ne.prototype),c()(ne.prototype,"reportBannerLastClick",[Q],Object.getOwnPropertyDescriptor(ne.prototype,"reportBannerLastClick"),ne.prototype),c()(ne.prototype,"reportRelationFetchDuration",[Y],Object.getOwnPropertyDescriptor(ne.prototype,"reportRelationFetchDuration"),ne.prototype),c()(ne.prototype,"reportMMClickPos",[z],Object.getOwnPropertyDescriptor(ne.prototype,"reportMMClickPos"),ne.prototype),c()(ne.prototype,"reportADFunnelModel",[q],Object.getOwnPropertyDescriptor(ne.prototype,"reportADFunnelModel"),ne.prototype),c()(ne.prototype,"recordAnalyseBranchInfo",[J],Object.getOwnPropertyDescriptor(ne.prototype,"recordAnalyseBranchInfo"),ne.prototype),c()(ne.prototype,"resetAnalyseBranchInfo",[K],Object.getOwnPropertyDescriptor(ne.prototype,"resetAnalyseBranchInfo"),ne.prototype),c()(ne.prototype,"reportAnalyseInfo",[X],Object.getOwnPropertyDescriptor(ne.prototype,"reportAnalyseInfo"),ne.prototype),c()(ne.prototype,"reportRewardGaussVideo",[ee],Object.getOwnPropertyDescriptor(ne.prototype,"reportRewardGaussVideo"),ne.prototype),c()(ne.prototype,"reportPopupClickAction",[te],Object.getOwnPropertyDescriptor(ne.prototype,"reportPopupClickAction"),ne.prototype),ne);var ce=n(9045);n(2942),n(2185);let le,de,ue,pe,he,fe;!function(e){e[e.SOURCE_UNKNOW=0]="SOURCE_UNKNOW",e[e.SOURCE_MP=1]="SOURCE_MP",e[e.SOURCE_OSS=2]="SOURCE_OSS",e[e.SOURCE_MP_OSS=3]="SOURCE_MP_OSS",e[e.SOURCE_OPEN_API=4]="SOURCE_OPEN_API",e[e.SOURCE_MARKETING_API=5]="SOURCE_MARKETING_API",e[e.SOURCE_WEPAY=6]="SOURCE_WEPAY",e[e.SOURCE_PRODUCT_API=7]="SOURCE_PRODUCT_API",e[e.SOURCE_WEAPP=8]="SOURCE_WEAPP",e[e.SOURCE_LOCAL_BUSINESS=9]="SOURCE_LOCAL_BUSINESS"}(le||(le={})),function(e){e[e.NORMAL_AD=0]="NORMAL_AD",e[e.LOCAL_BUSINESS_AD=1]="LOCAL_BUSINESS_AD"}(de||(de={})),function(e){e[e.POS_TYPE_APPMSG_BOTTOM=0]="POS_TYPE_APPMSG_BOTTOM",e[e.POS_TYPE_APPMSG_TOP=1]="POS_TYPE_APPMSG_TOP",e[e.POS_TYPE_NEWS=2]="POS_TYPE_NEWS",e[e.POS_TYPE_APPMSG_VIDEO=3]="POS_TYPE_APPMSG_VIDEO",e[e.POS_TYPE_FREE_TRADE=4]="POS_TYPE_FREE_TRADE",e[e.POS_TYPE_APPMSG_MIDDLE=5]="POS_TYPE_APPMSG_MIDDLE",e[e.POS_TYPE_MAIL=6]="POS_TYPE_MAIL",e[e.POS_TYPE_WX_APPLICATION=7]="POS_TYPE_WX_APPLICATION",e[e.POS_TYPE_WX_GAME_VIDEO=8]="POS_TYPE_WX_GAME_VIDEO",e[e.POS_TYPE_MP_PRODUCT=9]="POS_TYPE_MP_PRODUCT",e[e.POS_TYPE_WEAPP_INTERSTITIAL=10]="POS_TYPE_WEAPP_INTERSTITIAL",e[e.POS_TYPE_BOX=11]="POS_TYPE_BOX",e[e.POS_TYPE_WEAPP_COVER=12]="POS_TYPE_WEAPP_COVER",e[e.POS_TYPE_WEAPP_TEMPLATE=13]="POS_TYPE_WEAPP_TEMPLATE",e[e.POS_TYPE_WX_PAY=14]="POS_TYPE_WX_PAY",e[e.POS_TYPE_BIZ_TIME_LINE=15]="POS_TYPE_BIZ_TIME_LINE",e[e.POS_TYPE_MP_MAX=100]="POS_TYPE_MP_MAX",e[e.POS_TYPE_MULTI_SLOT=101]="POS_TYPE_MULTI_SLOT",e[e.POS_TYPE_WX_APPLET=997]="POS_TYPE_WX_APPLET",e[e.POS_TYPE_MP_ALL=998]="POS_TYPE_MP_ALL",e[e.POS_TYPE_SNS_FEED=999]="POS_TYPE_SNS_FEED"}(ue||(ue={})),function(e){e[e.DEST_TYPE_AD=0]="DEST_TYPE_AD",e[e.DEST_TYPE_OUTER=1]="DEST_TYPE_OUTER",e[e.DEST_TYPE_APPDETAIL=2]="DEST_TYPE_APPDETAIL",e[e.DEST_TYPE_BIZ=3]="DEST_TYPE_BIZ",e[e.DEST_TYPE_APPINFO_PAGE=4]="DEST_TYPE_APPINFO_PAGE",e[e.DEST_TYPE_WECHAT_SHOP=5]="DEST_TYPE_WECHAT_SHOP",e[e.DEST_TYPE_WECHAT_APPLET=6]="DEST_TYPE_WECHAT_APPLET",e[e.DEST_TYPE_CANVAS=9]="DEST_TYPE_CANVAS",e[e.DEST_TYPE_CHANNELS=101]="DEST_TYPE_CHANNELS",e[e.DEST_TYPE_CHANNELS_LIVE=102]="DEST_TYPE_CHANNELS_LIVE",e[e.DEST_TYPE_CHANNELS_USER_PROFILE=103]="DEST_TYPE_CHANNELS_USER_PROFILE"}(pe||(pe={})),function(e){e[e.RT_SIZE_WORD=91]="RT_SIZE_WORD",e[e.CRT_SIZE_PIC=133]="CRT_SIZE_PIC",e[e.CRT_SIZE_APPMSG=134]="CRT_SIZE_APPMSG",e[e.CRT_SIZE_CARD=135]="CRT_SIZE_CARD",e[e.CRT_SIZE_TOP_PIC=166]="CRT_SIZE_TOP_PIC",e[e.CRT_SIZE_APPDETAIL=167]="CRT_SIZE_APPDETAIL",e[e.CRT_SIZE_WECHAT_SHOP=267]="CRT_SIZE_WECHAT_SHOP",e[e.CRT_SIZE_COPY_CARD=354]="CRT_SIZE_COPY_CARD",e[e.CRT_SIZE_PIC_CARD=355]="CRT_SIZE_PIC_CARD",e[e.CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC=998]="CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC",e[e.CRT_SIZE_OFF_ACCOUNT_PIC=117]="CRT_SIZE_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_WECHAT_APPLET_GRAND_PIC=484]="CRT_SIZE_WECHAT_APPLET_GRAND_PIC",e[e.CRT_SIZE_WECHAT_VIDEO=538]="CRT_SIZE_WECHAT_VIDEO",e[e.CRT_SIZE_H5VIDEO_PIC_6S=555]="CRT_SIZE_H5VIDEO_PIC_6S",e[e.CRT_SIZE_H5VIDEO_VIDEO_15S=1515]="CRT_SIZE_H5VIDEO_VIDEO_15S",e[e.CRT_SIZE_MUTUAL_VIDEO_169=996]="CRT_SIZE_MUTUAL_VIDEO_169",e[e.CRT_SIZE_MUTUAL_VIDEO_43=997]="CRT_SIZE_MUTUAL_VIDEO_43",e[e.CRT_SIZE_IMAGE=666]="CRT_SIZE_IMAGE",e[e.CRT_SIZE_VIDEO=888]="CRT_SIZE_VIDEO",e[e.CRT_SIZE_CARD_IMAGE=450]="CRT_SIZE_CARD_IMAGE",e[e.CRT_SIZE_CARD_VIDEO=452]="CRT_SIZE_CARD_VIDEO",e[e.CRT_SIZE_LINK=454]="CRT_SIZE_LINK",e[e.CRT_SIZE_CARD_SELECT_IMAGE=480]="CRT_SIZE_CARD_SELECT_IMAGE",e[e.CRT_SIZE_CARD_SELECT_VIDEO=482]="CRT_SIZE_CARD_SELECT_VIDEO",e[e.CRT_SIZE_CARD_VOTE_IMAGE=516]="CRT_SIZE_CARD_VOTE_IMAGE",e[e.CRT_SIZE_CARD_VOTE_VIDEO=519]="CRT_SIZE_CARD_VOTE_VIDEO",e[e.CRT_SIZE_WXAPP_PIC=532]="CRT_SIZE_WXAPP_PIC",e[e.CRT_SIZE_CARD_TURN_IMAGE=539]="CRT_SIZE_CARD_TURN_IMAGE",e[e.CRT_SIZE_CARD_TURN_VIDEO=540]="CRT_SIZE_CARD_TURN_VIDEO",e[e.CRT_SIZE_WXAPP_CARD_PIC=556]="CRT_SIZE_WXAPP_CARD_PIC",e[e.CRT_SIZE_WXGAME_VIDEO_0=559]="CRT_SIZE_WXGAME_VIDEO_0",e[e.CRT_SIZE_WXGAME_VIDEO_1=560]="CRT_SIZE_WXGAME_VIDEO_1",e[e.CRT_SIZE_WXAPP_BANNER_608=608]="CRT_SIZE_WXAPP_BANNER_608",e[e.CRT_SIZE_MULTI_POS_960_334=567]="CRT_SIZE_MULTI_POS_960_334",e[e.CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC=568]="CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_MULTI_POS_CARD=569]="CRT_SIZE_MULTI_POS_CARD",e[e.CRT_SIZE_MULTI_POS_COPY_CARD=570]="CRT_SIZE_MULTI_POS_COPY_CARD",e[e.CRT_SIZE_CARD_RATING_IMAGE=588]="CRT_SIZE_CARD_RATING_IMAGE",e[e.CRT_SIZE_CARD_RATING_VIDEO=589]="CRT_SIZE_CARD_RATING_VIDEO",e[e.CRT_SIZE_CARD_FULL_IMAGE=598]="CRT_SIZE_CARD_FULL_IMAGE",e[e.CRT_SIZE_CARD_FULL_VIDEO=599]="CRT_SIZE_CARD_FULL_VIDEO",e[e.CRT_SIZE_MP_TAGS=677]="CRT_SIZE_MP_TAGS",e[e.CRT_SIZE_SCREEN_701=701]="CRT_SIZE_SCREEN_701",e[e.CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO=913]="CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO",e[e.CRT_SIZE_CARD_FULL_GESTURE_VIDEO=698]="CRT_SIZE_CARD_FULL_GESTURE_VIDEO",e[e.CRT_SIZE_BOTTOM_708=708]="CRT_SIZE_BOTTOM_708",e[e.CRT_SIZE_IN_TEXT_841=841]="CRT_SIZE_IN_TEXT_841",e[e.CRT_SIZE_CARD_COMPONENT_IMAGE=1707]="CRT_SIZE_CARD_COMPONENT_IMAGE",e[e.CRT_SIZE_CARD_COMPONENT_VIDEO=1708]="CRT_SIZE_CARD_COMPONENT_VIDEO",e[e.CRT_SIZE_PRODUCT=1501]="CRT_SIZE_PRODUCT",e[e.CRT_SIZE_CARD_SPHERE_IMAGE=699]="CRT_SIZE_CARD_SPHERE_IMAGE",e[e.CRT_SIZE_IMAGE_TEXT_CARD=904]="CRT_SIZE_IMAGE_TEXT_CARD",e[e.CRT_SIZE_MULTI_SLOT_BANNER=925]="CRT_SIZE_MULTI_SLOT_BANNER",e[e.CRT_SIZE_MULTI_SLOT_BANNER_MP=926]="CRT_SIZE_MULTI_SLOT_BANNER_MP",e[e.CRT_SIZE_MULTI_SLOT_IMAGE=927]="CRT_SIZE_MULTI_SLOT_IMAGE",e[e.CRT_SIZE_MULTI_SLOT_IMAGE_MP=928]="CRT_SIZE_MULTI_SLOT_IMAGE_MP",e[e.CRT_SIZE_MULTI_SLOT_VIDEO=929]="CRT_SIZE_MULTI_SLOT_VIDEO",e[e.CRT_SIZE_MULTI_SLOT_BOX=972]="CRT_SIZE_MULTI_SLOT_BOX",e[e.CRT_SIZE_BUTTON_CARD_IMAGE=955]="CRT_SIZE_BUTTON_CARD_IMAGE",e[e.CRT_SIZE_BUTTON_CARD_VIDEO=957]="CRT_SIZE_BUTTON_CARD_VIDEO",e[e.CRT_SIZE_WXGAME_LAND_PAGE=910]="CRT_SIZE_WXGAME_LAND_PAGE",e[e.CRT_SIZE_WEAPP_COVER=1003]="CRT_SIZE_WEAPP_COVER",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO=1064]="CRT_SIZE_SNS_PORTRAIL_VIDEO",e[e.CRT_SIZE_CARD_FULL_PRESS_VIDEO=1065]="CRT_SIZE_CARD_FULL_PRESS_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_1=1479]="CRT_SIZE_SNS_PORTRAIL_VIDEO_1",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_2=1480]="CRT_SIZE_SNS_PORTRAIL_VIDEO_2",e[e.CRT_SIZE_CHANNELS_IMAGE=1530]="CRT_SIZE_CHANNELS_IMAGE",e[e.CRT_SIZE_CHANNELS_PORTRAIL_IMAGE=1531]="CRT_SIZE_CHANNELS_PORTRAIL_IMAGE",e[e.CRT_SIZE_CARD_FULL_TWIST_VIDEO=1733]="CRT_SIZE_CARD_FULL_TWIST_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280=721]="CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280",e[e.CRT_SIZE_CARD_FINDER_EVENT_VIDEO=1748]="CRT_SIZE_CARD_FINDER_EVENT_VIDEO"}(he||(he={})),function(e){e[e.PAGE_TYPE_NONE=0]="PAGE_TYPE_NONE",e[e.PAGE_TYPE_OUTLINK=1]="PAGE_TYPE_OUTLINK",e[e.PAGE_TYPE_ARTICLE=2]="PAGE_TYPE_ARTICLE",e[e.PAGE_TYPE_H5CANVAS=3]="PAGE_TYPE_H5CANVAS",e[e.PAGE_TYPE_CANVAS=4]="PAGE_TYPE_CANVAS",e[e.PAGE_TYPE_CARD=5]="PAGE_TYPE_CARD",e[e.PAGE_TYPE_ACCOUNT=6]="PAGE_TYPE_ACCOUNT",e[e.PAGE_TYPE_APPSTORE=7]="PAGE_TYPE_APPSTORE",e[e.PAGE_TYPE_TMPL=8]="PAGE_TYPE_TMPL",e[e.PAGE_TYPE_SIMPLE_CANVAS=9]="PAGE_TYPE_SIMPLE_CANVAS",e[e.PAGE_TYPE_AD=10]="PAGE_TYPE_AD",e[e.PAGE_TYPE_DIRECT=11]="PAGE_TYPE_DIRECT",e[e.PAGE_TYPE_APPDETAIL=12]="PAGE_TYPE_APPDETAIL",e[e.PAGE_TYPE_APPINFO_PAGE=13]="PAGE_TYPE_APPINFO_PAGE",e[e.PAGE_TYPE_WECHAT_SHOP=14]="PAGE_TYPE_WECHAT_SHOP",e[e.PAGE_TYPE_WEAPP=15]="PAGE_TYPE_WEAPP",e[e.PAGE_TYPE_ACTIVE=16]="PAGE_TYPE_ACTIVE",e[e.PAGE_TYPE_FORM_IMAGE=17]="PAGE_TYPE_FORM_IMAGE",e[e.PAGE_TYPE_FORM_VIDEO=18]="PAGE_TYPE_FORM_VIDEO",e[e.PAGE_TYPE_APP_IMAGE=19]="PAGE_TYPE_APP_IMAGE",e[e.PAGE_TYPE_APP_VIDEO=20]="PAGE_TYPE_APP_VIDEO",e[e.PAGE_TYPE_CANVAS_QUES=21]="PAGE_TYPE_CANVAS_QUES",e[e.PAGE_TYPE_CANVAS_VOTE=22]="PAGE_TYPE_CANVAS_VOTE",e[e.PAGE_TYPE_WEPAY_CARD=23]="PAGE_TYPE_WEPAY_CARD",e[e.PAGE_TYPE_WXGAME=24]="PAGE_TYPE_WXGAME",e[e.PAGE_TYPE_FY_EGOODS=25]="PAGE_TYPE_FY_EGOODS",e[e.PAGE_TYPE_ALITA=26]="PAGE_TYPE_ALITA",e[e.PAGE_TYPE_PHONE_CALL=27]="PAGE_TYPE_PHONE_CALL",e[e.PAGE_TYPE_SUBSCRIPTION=40027]="PAGE_TYPE_SUBSCRIPTION",e[e.PAGE_TYPE_YOUZAN=20003]="PAGE_TYPE_YOUZAN",e[e.PAGE_TYPE_WEIMENG=20305]="PAGE_TYPE_WEIMENG",e[e.PAGE_TYPE_FENGYE_EC_SINGLE=10001]="PAGE_TYPE_FENGYE_EC_SINGLE",e[e.PAGE_TYPE_FENGYE_EC_TOGETHER=10002]="PAGE_TYPE_FENGYE_EC_TOGETHER",e[e.PAGE_TYPE_FENGYE_EC_FOCUS=10003]="PAGE_TYPE_FENGYE_EC_FOCUS",e[e.PAGE_TYPE_PLAY_H5=18001]="PAGE_TYPE_PLAY_H5",e[e.PAGE_TYPE_SCAN=40026]="PAGE_TYPE_SCAN",e[e.PAGE_TYPE_CHANNELS=60003]="PAGE_TYPE_CHANNELS",e[e.PAGE_TYPE_CHANNELS_WATCH_LIVE=60005]="PAGE_TYPE_CHANNELS_WATCH_LIVE",e[e.PAGE_TYPE_CHANNELS_RESERVE_LIVE=60006]="PAGE_TYPE_CHANNELS_RESERVE_LIVE",e[e.PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5=40028]="PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_IOS_APP_H5=40029]="PAGE_TYPE_WECHAT_XJ_IOS_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_WEBSITE_H5=40030]="PAGE_TYPE_WECHAT_XJ_WEBSITE_H5",e[e.PAGE_TYPE_WECHAT_RED_PACKET_COVER=40031]="PAGE_TYPE_WECHAT_RED_PACKET_COVER",e[e.PAGE_TYPE_WECHAT_VIDEO_TOPIC=40032]="PAGE_TYPE_WECHAT_VIDEO_TOPIC",e[e.PAGE_TYPE_MAX=1e8]="PAGE_TYPE_MAX"}(fe||(fe={}));var ge=n(8579);let _e,me,ye;!function(e){e[e.PIC_TIME5=555]="PIC_TIME5",e[e.VIDEO_TIME15=1515]="VIDEO_TIME15",e[e.APP_VIDEO=538]="APP_VIDEO",e[e.CRT_SIZE_WX_APPLICATION=532]="CRT_SIZE_WX_APPLICATION",e[e.CRT_SIZE_WX_APPLICATION_X=567]="CRT_SIZE_WX_APPLICATION_X",e[e.CRT_SIZE_WX_APPLICATION_NEW=608]="CRT_SIZE_WX_APPLICATION_NEW",e[e.CRT_SIZE_WX_APPLICATION_CARD=556]="CRT_SIZE_WX_APPLICATION_CARD",e[e.CRT_SIZE_REWARD_VEDIO169=559]="CRT_SIZE_REWARD_VEDIO169",e[e.CRT_SIZE_REWARD_VEDIO916=560]="CRT_SIZE_REWARD_VEDIO916",e[e.CRT_SIZE_REWARD_LANDINGPAGE=910]="CRT_SIZE_REWARD_LANDINGPAGE",e[e.CRT_SIZE_TABLE_SCREEN_IMAGE=701]="CRT_SIZE_TABLE_SCREEN_IMAGE",e[e.CRT_SIZE_INSERT_VIDEO=913]="CRT_SIZE_INSERT_VIDEO",e[e.CRT_SIZE_MULTI_POS_NEW_PIC=927]="CRT_SIZE_MULTI_POS_NEW_PIC",e[e.CRT_SIZE_MULTI_POS_VEDIO=929]="CRT_SIZE_MULTI_POS_VEDIO",e[e.CRT_SIZE_MULTI_POS_GRID=972]="CRT_SIZE_MULTI_POS_GRID",e[e.CRT_SIZE_COVER_AD=1003]="CRT_SIZE_COVER_AD",e[e.CRT_SIZE_CPM_PIC=998]="CRT_SIZE_CPM_PIC",e[e.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT=928]="CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT",e[e.CRT_SIZE_VERTICAL_VIDEO_NEW_916=721]="CRT_SIZE_VERTICAL_VIDEO_NEW_916"}(_e||(_e={})),function(e){e[e.ANDROID=12]="ANDROID",e[e.IOS=19]="IOS",e[e.WE_CHAT=23]="WE_CHAT",e[e.MINI_GAME=46]="MINI_GAME",e[e.WE_CHAT_CARD=36]="WE_CHAT_CARD",e[e.WE_CHAT_SHOP=30]="WE_CHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.WE_CHAT_ARTICLE=29]="WE_CHAT_ARTICLE",e[e.GDT_WE_CHAT_ARTICLE=31]="GDT_WE_CHAT_ARTICLE",e[e.WE_CHAT_APP=38]="WE_CHAT_APP",e[e.LBS=37]="LBS",e[e.LEAD_AD=43]="LEAD_AD",e[e.JD_URL=25]="JD_URL"}(me||(me={})),function(e){e[e.MP_TAG_TYPE_NONE=0]="MP_TAG_TYPE_NONE",e[e.MP_TAG_TYPE_PLAY=1]="MP_TAG_TYPE_PLAY",e[e.MP_TAG_TYPE_DOWNLOAD=3]="MP_TAG_TYPE_DOWNLOAD",e[e.MP_TAG_TYPE_FOLLOW=4]="MP_TAG_TYPE_FOLLOW",e[e.MP_TAG_TYPE_FORM=5]="MP_TAG_TYPE_FORM",e[e.MP_TAG_TYPE_CATEGORY=2]="MP_TAG_TYPE_CATEGORY",e[e.MP_TAG_TYPE_ORDER=6]="MP_TAG_TYPE_ORDER",e[e.MP_TAG_TYPE_POI=7]="MP_TAG_TYPE_POI",e[e.MP_TAG_TYPE_CONVERTION=8]="MP_TAG_TYPE_CONVERTION",e[e.MP_TAG_TYPE_APP_CATEGORY=9]="MP_TAG_TYPE_APP_CATEGORY"}(ye||(ye={}));const ve={123:["image","brand"],124:["image","store"],127:["image","download"],128:["image","follow"],134:["image","wxgame"],138:["image","brand"],126:["card","follow","normal"],129:["card","follow","large"],132:["card","download","large"],130:["video","download"],131:["video","brand"],133:["video","wxgame"],135:["video","brand"],136:["video","follow"],137:["video","brand"]},Ae={1:"store",2:"brand",3:"download",6:"follow",7:"wxgame"},be=[123,124,126,127,128,129,130,131,132,133,134,135,136,137,138],we=[_e.CRT_SIZE_WX_APPLICATION,_e.CRT_SIZE_WX_APPLICATION_NEW,_e.CRT_SIZE_WX_APPLICATION_X,_e.CRT_SIZE_WX_APPLICATION_CARD,_e.CRT_SIZE_REWARD_VEDIO169,_e.CRT_SIZE_REWARD_VEDIO916,_e.CRT_SIZE_TABLE_SCREEN_IMAGE,_e.CRT_SIZE_REWARD_LANDINGPAGE,_e.CRT_SIZE_INSERT_VIDEO,_e.CRT_SIZE_MULTI_POS_NEW_PIC,_e.CRT_SIZE_MULTI_POS_VEDIO,_e.CRT_SIZE_MULTI_POS_GRID,_e.CRT_SIZE_CPM_PIC,_e.CRT_SIZE_COVER_AD,_e.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT,_e.CRT_SIZE_VERTICAL_VIDEO_NEW_916];let Ce;!function(e){e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON=2001]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON=2002]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT=2003]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER=2004]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT=2005]="MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION=2006]="MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION=2007]="MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_FOLLOW=2008]="MMOCAD_CLICKPOS_BIZ_FOLLOW",e[e.MMOCAD_CLICKPOS_BIZ_LIKE=2009]="MMOCAD_CLICKPOS_BIZ_LIKE",e[e.MMOCAD_CLICKPOS_BIZ_COMMENT=2010]="MMOCAD_CLICKPOS_BIZ_COMMENT",e[e.MMOCAD_CLICKPOS_BIZ_HEADIMAGE=2011]="MMOCAD_CLICKPOS_BIZ_HEADIMAGE",e[e.MMOCAD_CLICKPOS_BIZ_NICKNAME=2012]="MMOCAD_CLICKPOS_BIZ_NICKNAME",e[e.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD=2013]="MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD"}(Ce||(Ce={}));let Ie,Ee,Se,Te;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.VIDEO=1]="VIDEO",e[e.LIVE=2]="LIVE"}(Ie||(Ie={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROOM=1]="ROOM",e[e.RESERVATION=2]="RESERVATION"}(Ee||(Ee={})),function(e){e[e.NONE=1]="NONE",e[e.ON_AIR=2]="ON_AIR",e[e.ENDED=3]="ENDED",e[e.IN_PREPARE=4]="IN_PREPARE"}(Se||(Se={})),function(e){e[e.NONE=0]="NONE",e[e.NICKNAME=1]="NICKNAME",e[e.LINK=2]="LINK",e[e.RESOURCE=3]="RESOURCE",e[e.ACTIONBUTTON=4]="ACTIONBUTTON",e[e.CANVASBUTTON=5]="CANVASBUTTON",e[e.TAGBUTTON=6]="TAGBUTTON"}(Te||(Te={}));var xe,ke,Pe,De,Oe,Ne,Re,Me,Le,Be,Fe,We,je,Ue,Ve,Ge,$e,He,Ze=n(5166);let Qe=1;const Ye=new Set;let ze=(xe=C(),ke=C(),Pe=C(),De=C(),Oe=C(),Ne=C(),Re=C(),Me=C(),Le=C(),Be=C(),Fe=C(),We=C(),je=C(),Ue=C(),Ve=C(),Ge=C(),$e=C(),He=class{constructor(e){this.adProxy=e,this.lastVideoReportTime=0,this.lastExposureTime=0,this.lastClickTime=0,this.lastAdReqTs=0,this.index=void 0,this.index=Qe,Qe+=1,Ye.add(this.adUnitId)}get adType(){return this.adProxy.getAdType()}get adUnitId(){return this.adProxy.getAdUnitId()}get slotData(){return this.adProxy.getSlotData()}get pluginAppid(){return this.adProxy.getPluginAppid()}get data(){return this.adProxy.data}get datas(){return this.adProxy.datas}get reportAdMonitorData(){return this.adProxy.reportAdMonitorData}reset(){this.lastVideoReportTime=0}getLastClickTime(){return this.lastClickTime}getLastAdReqTs(){return this.lastAdReqTs}setLastExposureTime(e){this.lastExposureTime=e}setLastClickTime(e){this.lastClickTime=e}setLastAdReqTs(e){this.lastAdReqTs=e}reportFollow({result:e}){let t=5;return this.adProxy.isRewardedVideoAd()?t=6:[_e.CRT_SIZE_TABLE_SCREEN_IMAGE,_e.CRT_SIZE_INSERT_VIDEO].includes(this.data.crt_size)&&(t=8),(0,f.Lo)({apiName:"webapi_adfollow_report",reqData:{type:{success:140,fail:141,already:142,cancel:143}[e],source:5,scene:75,traceid:this.data.traceid,trace_id:this.data.traceid,aid:this.data.aid,pos_type:t}}).catch((e=>{throw this.reportAdMonitorData(ge.IN.FOLLOW_REPORT_ERROR,e),e}))}getExtraExpOrClkData(e){var t;let n=[];"exposure"===e.reportType&&e.isMulti&&e.multiList?n=e.multiList.map(((e,t)=>({idx:t,waid:this.datas[e].waid||""}))):this.data.waid&&(n=[{idx:0,waid:this.data.waid}]);const r=a()(a()({},(0,ie.v3)()),{},{weapp_enter_scene:(null===u.Z||void 0===u.Z||null===(t=u.Z.appLaunchInfo)||void 0===t?void 0:t.scene)||0,extra:JSON.stringify(n)}),o=a()({},r),i=a()({},r);if("customAd"===this.adType&&e.isMulti)if("exposure"===e.reportType){var s;const t={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(s=e.multiList)||void 0===s||s.forEach((e=>{const n=this.datas[e];n.extBackComm&&t.viewid.push(n.extBackComm.viewid),t.s_pt.push(n.pt),t.s_aid.push(n.aid),t.s_trace_id.push(n.traceid)})),o.box_ad_exposure={report_mode:1,box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:JSON.stringify({viewid:t.viewid}),s_trace_id:JSON.stringify(t.s_trace_id),s_aid:JSON.stringify(t.s_aid),s_pt:JSON.stringify(t.s_pt),s_index:JSON.stringify(e.multiList||[])}}else if("click"===e.reportType){var c;const e=this.adProxy.adDataIndex;i.box_ad_click={box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:null===(c=this.data.extBackComm)||void 0===c?void 0:c.viewid,box_index:e}}if("customAd"===this.adType){var l;const e=null===(l=this.data.extBackComm)||void 0===l?void 0:l.sub_templ_id;e&&(o.sub_templ_id=e,i.sub_templ_id=e)}if("incentive-video"===this.adType&&this.data.isPlayable&&(o.is_playable=1,i.is_playable=1),["interstitialAd","incentive-video","customAd"].includes(this.adType)&&e.videoData){const{currentTime:t,duration:n}=e.videoData;(t||n)&&(i.video_play_time=t,i.video_duration=n)}if("grid"===this.adType)if("exposure"===e.reportType){var d;const e={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(d=this.datas)||void 0===d||d.forEach((t=>{t.extBackComm&&e.viewid.push(t.extBackComm.viewid),e.s_pt.push(t.pt),e.s_aid.push(t.aid),e.s_trace_id.push(t.traceid)})),o.box_ad_exposure={report_mode:1,box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:JSON.stringify({viewid:e.viewid}),s_trace_id:JSON.stringify(e.s_trace_id),s_aid:JSON.stringify(e.s_aid),s_pt:JSON.stringify(e.s_pt)}}else if("click"===e.reportType){var p;const t=e.clickAdIndex||0;i.box_ad_click={box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:null===(p=this.data.extBackComm)||void 0===p?void 0:p.viewid,box_index:t}}return{extExposureComm:o,extClickComm:i}}reportExpOrClk(e){let t=3;const n={showed:2,viewable:5,incentiveVideoCard:14};if("exposure"===e.reportType?(t=n[e.exposureType],"showed"===e.exposureType?this.adProxy.setTimePoint("p6"):"viewable"===e.exposureType&&this.adProxy.setTimePoint("p7"),this.adProxy.reportAnalyseInfo(e.exposureType)):"click"===e.reportType&&this.adProxy.setTimePoint("p10"),"exposure"===e.reportType&&e.multiList&&e.isMulti){const n=this.adProxy.adDataIndex;e.multiList.forEach((e=>{this.adProxy.setCurrentData(e),(0,ce.IN)("adDataReport",{adInfo:this.adProxy.getTransmissionChainData({logtype:t})})})),this.adProxy.setCurrentData(n)}else(0,ce.IN)("adDataReport",{adInfo:this.adProxy.getTransmissionChainData({logtype:t})});const{extExposureComm:r,extClickComm:o}=this.getExtraExpOrClkData(e),i=this.getExpOrClkCommonArgs(e),s="click"===e.reportType?{click_point:JSON.stringify({x:e.clickAbsoluteLeft,y:e.clickAbsoluteTop}),press_interval:e.pressInterval,pos_x:e.clickRelativeLeft,pos_y:e.clickRelativeTop,click_pos:0,ext_click_comm:JSON.stringify(o)}:{exposure_type:b.qi[e.exposureType],ext_exposure_comm:JSON.stringify(r)};return(0,f.Lo)({apiName:"advert_report",reqData:a()(a()(a()({},i),s),{},{report_type:b.yd[e.reportType],weapp_extra_data:JSON.stringify(i.weapp_extra_data),ad_group_id:i.advert_group_id,apurl:this.data.apurl,rl:this.data.rl,weapp_ghid:i.weapp_gh_id})})}getExpOrClkCommonArgs(e){var t;return{advert_group_id:this.data.group_id,trace_id:this.data.traceid,pos_id:b.DX[this.adType],pos_type:b.UJ[this.adType],sdk_version:ie.S3.SDKVersion,ad_w:e.width,ad_h:e.height,aid:this.data.aid,weapp_gh_id:(null===(t=this.data.weapp_info)||void 0===t?void 0:t.original_id)||"",pt:this.data.pt,screen_cnt:1,from_h5:0,from_game:1,wegame_start_ts:ie.S3.startTime.valueOf(),wegame_enter_ts:ie.S0.enterForegroundTime.valueOf(),wegame_user_duration:ie.S0.gameDuration+(Date.now()-ie.S0.enterForegroundTime.getTime()),wxa_report_detail:this.getWxaReportDetail({left:e.left,top:e.top}),weapp_extra_data:a()(a()({},this.getWeappExtraData()),e.weappExtraData||{})}}reportClick(e){return this.lastClickTime=+new Date,this.reportExpOrClk(a()({reportType:"click"},e)).catch((e=>{throw this.reportAdMonitorData(ge.IN.CLICK_REPORT_ERROR,e),e}))}reportExposure(e){return"showed"===e.exposureType&&this.adProxy.checkPreloadH5Page(),this.lastExposureTime=+new Date,this.reportExpOrClk(a()({reportType:"exposure"},e)).catch((e=>{throw this.reportAdMonitorData(ge.IN.EXPOSURE_REPORT_ERROR,e),e}))}reportFlooringPage(e,t){const n={aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:ie.S3.gameAppId,orig_weapp_id:this.pluginAppid?ie.S3.gameAppId:""},r=null==t?void 0:t.map((e=>a()(a()({},n),e))),o={};return 1===e?o.rewared_video_ending_page_a=r:2===e&&(o.rewared_video_ending_page_b=r),(0,f.Lo)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(o)}})}reportAntifraud(e){const t=a()(a()({},e),{},{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:ie.S3.gameAppId,orig_weapp_id:this.pluginAppid?ie.S3.gameAppId:"",network_type:ie.S3.adNetworkType,wechat_version:ie.S3.wechatVersion,platform:ie.S3.platform,system_version:ie.S3.systemVersion,device_orientation:ie.S3.deviceOrientation,wxapp_lib_version:ie.S3.SDKVersion,crt_size:this.data.crt_size,product_type:this.data.product_type,adunitid:this.adUnitId,machine_brand:ie.S3.brand||"",machine_type:ie.S3.model||"",clientimptime:this.lastAdReqTs}),n={};return n.antifraud_table_screen_report=[t],(0,f.Lo)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(n)}})}reportVideo({playType:e,conditionType:t,muted:n,playDuration:r,videoDuration:o,rewardedTime:i,isRewarded:a}){const s=(0,f.Lo)({apiName:"webapi_advideo_report",reqData:{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,trace_id:this.data.traceid,viewid:this.data.wx_game_video.short_video.viewid,video_play_info:{play_type:{unknown:0,complete:1,partial:2,error:3}[e],play_duration:r-this.lastVideoReportTime,video_duration:o,auto_play:!0,muted:n,rewarded_time:i&&Math.min(i,o),is_rewarded:a},report_type:{unknown:0,land:1,end:2,start:3,exit:4,close:5}[t]}});return this.lastVideoReportTime=r,s}getWxaReportDetail({top:e=0,left:t=0}){return{page_x:t||0,page_y:e||0,screen_x:t||0,screen_y:e||0,ad_number:Qe-1,ad_unit_number:Ye.size,ad_index:this.index,page_enter_time:ie.S0.enterForegroundTime.valueOf(),phone_screen_width:ie.S3.screenWidth,phone_screen_height:ie.S3.screenHeight}}getWeappExtraData(){var e,t;return{weixin_version:ie.S3.wechatVersion,os_version:ie.S3.systemVersion,machine_brand:ie.S3.brand||"",machine_type:ie.S3.model,network_type:ie.S3.adNetworkType,start_ts:ie.S3.startTime.valueOf(),enter_ts:ie.S0.enterForegroundTime.valueOf(),user_duration:ie.S0.gameDuration+(Date.now()-ie.S0.enterForegroundTime.getTime()),imp_time:this.lastAdReqTs,exp_time:this.lastExposureTime,clk_time:this.lastClickTime,env:null===(e=u.Z.host)||void 0===e?void 0:e.env,app_appid:null===(t=u.Z.host)||void 0===t?void 0:t.appId}}composeExposureCommonInfo({top:e=0,left:t=0,width:n=0,height:r=0,adType:o="incentive-video"}){let i;try{i=this.data.weapp_info.original_id}catch(e){}const s=a()({},(0,ie.v3)()),c=this.getWeappExtraData(),l=this.getWxaReportDetail({top:e,left:t}),d={report_type:0,pos_id:b.DX[this.adType],sdk_version:ie.S3.SDKVersion,aid:this.data.aid,traceid:this.data.traceid,trace_id:this.data.traceid,ad_group_id:this.data.group_id,weapp_ghid:i,rl:this.data.rl,pt:this.data.pt,screen_cnt:1,ad_w:n,ad_h:r,from_game:1,from_h5:0,wegame_start_ts:ie.S3.startTime.valueOf(),wegame_enter_ts:ie.S0.enterForegroundTime.valueOf(),wegame_user_duration:ie.S0.gameDuration+(Date.now()-ie.S0.enterForegroundTime.getTime()),pos_type:b.UJ[o],wxa_report_detail:l,weapp_extra_data:JSON.stringify(c),ext_exposure_comm:JSON.stringify(s)};return JSON.stringify(d)}reportInstallFollow(e){const{condition:t}=this.data;t&&1===t.widget_gray_report_install_follow&&(0,f.Lo)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(e)}})}reportAnalyseDebugInfo(e){const t=b.wE[this.adType];return t||this.reportAdMonitorData(ge.IN.ANALYSE_DEBUG_REPORT_ERROR,new Error(`invalid reportType ${this.adType}`)),(0,f.Lo)({apiName:"webapi_reportbranchanalyticsfordebugtool",reqData:{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:t}]}}).catch((e=>{this.reportAdMonitorData(ge.IN.ANALYSE_DEBUG_REPORT_ERROR,e)}))}reportIPV4(){setTimeout((()=>{try{var e;const t=this.datas&&this.datas.length>0?this.datas[0]:this.data;null!=t&&null!==(e=t.extBackComm)&&void 0!==e&&e.ip_ping_url&&(0,Ze.a)({url:(0,p.Uj)(t.extBackComm.ip_ping_url)})}catch(e){}}),2e3)}},c()(He.prototype,"getLastClickTime",[xe],Object.getOwnPropertyDescriptor(He.prototype,"getLastClickTime"),He.prototype),c()(He.prototype,"getLastAdReqTs",[ke],Object.getOwnPropertyDescriptor(He.prototype,"getLastAdReqTs"),He.prototype),c()(He.prototype,"setLastExposureTime",[Pe],Object.getOwnPropertyDescriptor(He.prototype,"setLastExposureTime"),He.prototype),c()(He.prototype,"setLastClickTime",[De],Object.getOwnPropertyDescriptor(He.prototype,"setLastClickTime"),He.prototype),c()(He.prototype,"setLastAdReqTs",[Oe],Object.getOwnPropertyDescriptor(He.prototype,"setLastAdReqTs"),He.prototype),c()(He.prototype,"reportFollow",[Ne],Object.getOwnPropertyDescriptor(He.prototype,"reportFollow"),He.prototype),c()(He.prototype,"getExpOrClkCommonArgs",[Re],Object.getOwnPropertyDescriptor(He.prototype,"getExpOrClkCommonArgs"),He.prototype),c()(He.prototype,"reportClick",[Me],Object.getOwnPropertyDescriptor(He.prototype,"reportClick"),He.prototype),c()(He.prototype,"reportExposure",[Le],Object.getOwnPropertyDescriptor(He.prototype,"reportExposure"),He.prototype),c()(He.prototype,"reportFlooringPage",[Be],Object.getOwnPropertyDescriptor(He.prototype,"reportFlooringPage"),He.prototype),c()(He.prototype,"reportAntifraud",[Fe],Object.getOwnPropertyDescriptor(He.prototype,"reportAntifraud"),He.prototype),c()(He.prototype,"reportVideo",[We],Object.getOwnPropertyDescriptor(He.prototype,"reportVideo"),He.prototype),c()(He.prototype,"getWxaReportDetail",[je],Object.getOwnPropertyDescriptor(He.prototype,"getWxaReportDetail"),He.prototype),c()(He.prototype,"composeExposureCommonInfo",[Ue],Object.getOwnPropertyDescriptor(He.prototype,"composeExposureCommonInfo"),He.prototype),c()(He.prototype,"reportInstallFollow",[Ve],Object.getOwnPropertyDescriptor(He.prototype,"reportInstallFollow"),He.prototype),c()(He.prototype,"reportAnalyseDebugInfo",[Ge],Object.getOwnPropertyDescriptor(He.prototype,"reportAnalyseDebugInfo"),He.prototype),c()(He.prototype,"reportIPV4",[$e],Object.getOwnPropertyDescriptor(He.prototype,"reportIPV4"),He.prototype),He);function qe(e){return{appId:e.weapp_info&&e.weapp_info.appid,appType:46==e.product_type?1004:1e3,path:e.url,openRate:e.extBackComm&&e.extBackComm.pctr||0}}var Je,Ke,Xe,et,tt,nt,rt,ot,it,at,st,ct,lt;let dt=(Je=C(),Ke=C(),Xe=C(),et=C(),tt=C(),nt=C(),rt=C(),ot=C(),it=C(),at=C(),st=C(),ct=C(),lt=class{constructor(e){this.adProxy=e,this.isAppInstalled=!1}get adType(){return this.adProxy.getAdType()}get data(){return this.adProxy.data}get datas(){return this.adProxy.datas}get reportAdMonitorData(){return this.adProxy.reportAdMonitorData}get isValidCondition(){return this.adProxy.isValidCondition}getFullRl(){let{rl:e}=this.data;try{/viewid=([^&]+)/.test(e)||(-1===e.indexOf("?")?e+=`?viewid=${this.data.extBackComm.viewid}`:e+=`&viewid=${this.data.extBackComm.viewid}`)}catch(e){}return e}getFollowPageUrl(e,t){const n={source:4,tid:e.traceid,pt:e.pt,aid:e.aid,ad_engine:e.is_cpm?1:0,pos_type:e.pos_type,jsapi_scene:ie.S3.isWaGame?147:140};return(0,re.a3)(t,n)}getSkAdItem(){var e,t;let n=null;const r=this.data;if(null!=r&&null!==(e=r.condition)&&void 0!==e&&e.widget_gray_webstore&&null!=r&&null!==(t=r.extBackComm)&&void 0!==t&&t.sk_ad_items)try{n=JSON.parse(r.extBackComm.sk_ad_items)[0]}catch(e){}return n}isPrefetch(e){var t,n,r,o,i,a,s,c;const l={url:this.data.url,jump_url:this.data.button_action.jump_url,playable_url:null===(t=this.data.crtInfo)||void 0===t||null===(n=t[0])||void 0===n||null===(r=n.wxgame_video_card)||void 0===r||null===(o=r.flooring_page)||void 0===o?void 0:o.page_url}[e],d={url:this.data.dest_type===pe.DEST_TYPE_OUTER,jump_url:(null===(i=this.data.button_action)||void 0===i?void 0:i.jump_type)===pe.DEST_TYPE_OUTER,playable_url:!0}[e];return l&&d&&Boolean(null===(a=this.data)||void 0===a||null===(s=a.extBackComm)||void 0===s||null===(c=s.material_handler_info)||void 0===c?void 0:c.h5_preload_info[e])}getTransmissionChainData({logtype:e=3}){const t={traceid:this.data.traceid,trace_id:this.data.traceid,product_type:this.data.pt,jump_url:encodeURIComponent(this.data.url),rl:encodeURIComponent(this.getFullRl()),logtype:e};return Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")}setAppInstallState(e){this.isAppInstalled=e}land({isButton:e=!1}={}){var t=this;return o()((function*(){const{dest_type:n,product_type:r,url:o}=t.data,i={isButton:e};if(!e){if(t.isPrefetch("url")&&t.adProxy.reportAdMonitorData(ge.IN.H5_PRELOAD_CARD_CLICKED),[12,19].indexOf(r)>-1){const{app_info:{url_scheme:e}}=t.data;let r;var a;if(ie.S3.isIOS)r=JSON.stringify({aid:t.data.aid,ad_uid:null===(a=t.data.extBackComm)||void 0===a?void 0:a.uid,scene_id:4001});const s=t.getSkAdItem();return e&&e.trim().length>0?ie.S3.isAndroid&&!t.isAppInstalled?t.landPage(n,o,i):t.adProxy.launchApplication({schemeUrl:e,isIosDirect:ie.S3.isIOS,appInfo:t.data.app_info,extraData:r,skAdItem:s}).catch((e=>(null!==s&&t.reportAdMonitorData(ge.IN.OPEN_WEBSTORE_ERROR,e),t.landPage(n,o,i)))):t.landPage(n,o,i)}return t.landPage(n,o,i)}{t.isPrefetch("jump_url")&&t.adProxy.reportAdMonitorData(ge.IN.H5_PRELOAD_BUTTON_CLICKED);const{button_action:{jump_type:e,jump_url:n}}=t.data;if(r===me.IOS)return t.openAppStore();if(r!==me.WE_CHAT)return t.landPage(e,n,i);{const{biz_info:{user_name:r,is_subscribed:a}}=t.data;if(a)return 10===e?t.landPage(e,o,i):(0,f.Yo)({url:t.getFollowPageUrl(t.data,n),adInfo:t.getTransmissionChainData({logtype:3})});try{const e=yield t.adProxy.addContact({username:r,isWaGame:ie.S3.isWaGame}),{ext_info:n,uxinfo:o}=t.data;let i;try{i=JSON.parse(n)}catch(e){}if(/ok|added/.test(e.errMsg)&&i&&i.guide_group_id&&o)try{yield(0,g.LQ)({guide_group_id:i.guide_group_id,uxinfo:o}),t.adProxy.reportAdIDKey({key:ge.IN.BIND_GUIDE_SUCCESS})}catch(e){t.reportAdMonitorData(ge.IN.BIND_GUIDE_ERROR,e)}return e}catch(e){if(/cancel/.test(e.errMsg))return e;throw t.reportAdMonitorData(ge.IN.ADD_CONTACT_ERROR,e),e}}}}))()}landPage(e,t,n){if(e===pe.DEST_TYPE_APPDETAIL&&ie.S3.isIOS){var r;const{app_info:{appinfo_url:e}}=this.data,t=JSON.stringify({aid:this.data.aid,ad_uid:null===(r=this.data.extBackComm)||void 0===r?void 0:r.uid,scene_id:4001}),n=this.getSkAdItem();return this.adProxy.launchApplication({schemeUrl:e,extraData:t,skAdItem:n}).catch((t=>(null!==n&&this.reportAdMonitorData(ge.IN.OPEN_WEBSTORE_ERROR,t),(0,f.Yo)({url:e,adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_URL_ERROR,e),e})))))}if(e===pe.DEST_TYPE_BIZ)return(0,f.Yo)({url:this.getFollowPageUrl(this.data,t),adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_URL_ERROR,e),e}));if(e===pe.DEST_TYPE_WECHAT_APPLET){const{weapp_info:{appid:e},traceid:n,aid:r,uxinfo:o}=this.data;return(0,f.Be)({appId:e,path:t,traceid:n,aid:r,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:o}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_WXAPP_ERROR,e),e}))}if(e===pe.DEST_TYPE_CANVAS){const{canvas_info:e,pos_type:t}=this.data;return(0,f._t)({canvasInfo:e,posType:t}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_CANVAS_ERROR,e),e}))}if(10===e){const{biz_info:{user_name:e}}=this.data;return this.adProxy.openProfile({username:e}).catch((e=>{throw e}))}return e===pe.DEST_TYPE_CHANNELS?this.jumpChannels("activity",n):e===pe.DEST_TYPE_CHANNELS_LIVE?this.jumpChannels("live",n):e===pe.DEST_TYPE_CHANNELS_USER_PROFILE?this.jumpChannels("userProfile",n):(0,f.Yo)({url:t,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:this.data.uxinfo}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_URL_ERROR,e),e}))}getChannelsExtraInfo(e){return JSON.stringify({sns_ad:{uxinfo:this.data.uxinfo||"",snsid:"",scene:e}}).replace(/,/g,";")}jumpChannels(e,{isButton:t}){var n=this;return o()((function*(){var r;const o=null===(r=n.data)||void 0===r?void 0:r.extBackComm.channels_info,{crt_size:i,apurl:s,rl:c}=n.data,l={feedId:o.id,nonceId:o.nonce_id,finderUserName:o.username,reportExtraInfo:n.getChannelsExtraInfo(t?Te.ACTIONBUTTON:Te.RESOURCE)},d={activity:ge.IN.OPEN_CHANNELS_ACTIVITY_SUCCESS,live:ge.IN.OPEN_CHANNELS_LIVE_SUCCESS,userProfile:ge.IN.OPEN_CHANNELS_USER_PROFILE_SUCCESS}[e],u={activity:ge.IN.OPEN_CHANNELS_ACTIVITY_FAILED,live:ge.IN.OPEN_CHANNELS_LIVE_FAILED,userProfile:ge.IN.OPEN_CHANNELS_USER_PROFILE_FAILED}[e];if(o){if("activity"===e&&i===_e.CRT_SIZE_REWARD_LANDINGPAGE)try{const e=yield n.adProxy.openChannelsRewardedVideoAd(a()(a()({},l),{},{expReportLink:s,clkReportLink:c,reportInfo:n.adProxy.getExpOrClkCommonArgs({top:0,left:0,width:ie.S3.screenWidth,height:ie.S3.screenHeight}),clickPosMap:{follow:Ce.MMOCAD_CLICKPOS_BIZ_FOLLOW,like:Ce.MMOCAD_CLICKPOS_BIZ_LIKE,comment:Ce.MMOCAD_CLICKPOS_BIZ_COMMENT,headimage:Ce.MMOCAD_CLICKPOS_BIZ_HEADIMAGE,nickname:Ce.MMOCAD_CLICKPOS_BIZ_NICKNAME,forward:Ce.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD},feedbackUrl:n.getFeedbackUrl(ie.S3.isWaGame?1003:1005)}));return n.reportAdMonitorData(d),e}catch(e){n.reportAdMonitorData(u,e)}try{switch(e){case"activity":yield n.adProxy.openChannelsRewardedVideoAd(a()(a()({},l),{},{adJSAPIType:1}));break;case"live":yield n.adProxy.openChannelsLive(l);break;case"userProfile":yield n.adProxy.openChannelsUserProfile(l)}return void n.reportAdMonitorData(d)}catch(e){n.reportAdMonitorData(u,e)}}n.reportAdMonitorData(u,new Error("channelsInfo is empty"))}))()}openAppStore(){var e;const{app_info:{appinfo_url:t,url_scheme:n}}=this.data,r=JSON.stringify({aid:this.data.aid,ad_uid:null===(e=this.data.extBackComm)||void 0===e?void 0:e.uid,scene_id:4001}),o=this.getSkAdItem();return n&&n.trim().length>0?this.adProxy.launchApplication({schemeUrl:n,isIosDirect:!0,appInfo:this.data.app_info,extraData:r,skAdItem:o}).catch((()=>this.adProxy.launchApplication({schemeUrl:t,extraData:r,skAdItem:o}).catch((e=>(null!==o&&this.reportAdMonitorData(ge.IN.OPEN_WEBSTORE_ERROR,e),(0,f.Yo)({url:t,adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_URL_ERROR,e),e}))))))):this.adProxy.launchApplication({schemeUrl:t,extraData:r,skAdItem:o}).catch((()=>(0,f.Yo)({url:t,adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(ge.IN.OPEN_URL_ERROR,e),e}))))}preloadLanding(){try{if(6===this.data.dest_type){let e=[];const t=[];if("grid"===this.adType?this.datas.forEach((n=>{var r;null!==(r=n.weapp_info)&&void 0!==r&&r.appid&&(e.push(n.weapp_info.appid),t.push(qe(n)))})):(e=[this.data.weapp_info.appid],t.push(qe(this.data))),(0,ce.IN)("batchGetContact",{appIds:e}),ie.S3.isAndroid)this.isValidCondition("widget_gray_batchload_app")&&(0,ce.IN)("batchPreloadMiniProgram",{openParams:{visitScene:ie.S0.currentScene,businessScene:1,innerScene:1095},preloadList:t,success:e=>{this.reportAdMonitorData(ge.IN.BATCHLOAD_SUCCESS,e)},fail:e=>{this.reportAdMonitorData(ge.IN.BATCHLOAD_ERROR,e)}});else if(ie.S3.isIOS){let e="app";this.data.product_type===me.MINI_GAME&&(e="game"),this.isValidCondition("widget_gray_preload_env")&&(ie.S3.isAndroid||"app"===e)&&(0,ce.IN)("preloadMiniProgramEnv",{type:e,success:e=>{this.reportAdMonitorData(ge.IN.PRELOAD_MINIENV_SUCCESS,e)},fail:e=>{this.reportAdMonitorData(ge.IN.PRELOAD_MINIENV_ERROR,e)}}),this.isValidCondition("widget_gray_predownload_app")&&(0,ce.IN)("predownloadMiniProgramPackage",{username:`${this.data.weapp_info.original_id}@app`,path:this.data.url,scene:1,success:e=>{this.reportAdMonitorData(ge.IN.PREDOWNLOAD_SUCCESS,e)},fail:e=>{this.reportAdMonitorData(ge.IN.PREDOWNLOAD_ERROR,e)}})}}}catch(e){}}checkFollow(e){return o()((function*(){const{rawData:t}=yield(0,f.Lo)({apiName:"webapi_checkcontact",reqData:{biz_uin:e}});return 1===JSON.parse(t).is_subscribed}))()}getFeedbackUrl(e){const t=this.data.material_id_list||[],n=encodeURIComponent(`[${t.toString()}]`)||"";let r=(0,re.a3)("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html#wechat_redirect",{aid:this.data.aid,traceid:this.data.traceid,source:e,material_id:n||"",machine_type:ie.S3.model,publisher_appid:ie.S3.gameAppId});if("grid"===this.adType){const t="https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html?ismulity=1#wechat_redirect",n=[],o=[],i=[];this.datas.forEach((e=>{n.push(e.traceid),o.push(e.material_id_list||[]),i.push(e.aid)}));const a={traceid:JSON.stringify(n),source:e,aid:JSON.stringify(i),material_id:JSON.stringify(o),machine_type:ie.S3.model,publisher_appid:ie.S3.gameAppId};r=(0,re.a3)(t,a)}return r}openFeedbackUrl(e){const t=this.getFeedbackUrl(e);return(0,f.Yo)({url:t})}checkPreloadH5Page(){var e=this;return o()((function*(){var t,n,r,o,i;const a=new Set;let{url:s}=e.data,c=null===(t=e.data.button_action)||void 0===t?void 0:t.jump_url,l=null===(n=e.data.crtInfo)||void 0===n||null===(r=n[0])||void 0===r||null===(o=r.wxgame_video_card)||void 0===o||null===(i=o.flooring_page)||void 0===i?void 0:i.page_url;e.isPrefetch("url")&&("1"!==(0,re.Wz)(s).prefetch&&(s=(0,re.a3)(s,{prefetch:1}),e.data.url=s),a.add(s)),e.isPrefetch("jump_url")&&("1"!==(0,re.Wz)(c).prefetch&&(c=(0,re.a3)(c,{prefetch:1}),e.data.button_action.jump_url=c),a.add(c)),e.isPrefetch("playable_url")&&("1"!==(0,re.Wz)(l).prefetch&&(l=(0,re.a3)(l,{prefetch:1}),e.data.crtInfo[0].wxgame_video_card.flooring_page.page_url=l),a.add(l));const d=[...a].map((e=>({url:e,bizScene:20002})));if(d.length)try{yield e.adProxy.preloadH5Page({urlList:d}),e.reportAdMonitorData(ge.IN.H5_PRELOAD_SUCCESS)}catch(t){e.reportAdMonitorData(ge.IN.H5_PRELOAD_FAILED,t)}}))()}},c()(lt.prototype,"isPrefetch",[Je],Object.getOwnPropertyDescriptor(lt.prototype,"isPrefetch"),lt.prototype),c()(lt.prototype,"getTransmissionChainData",[Ke],Object.getOwnPropertyDescriptor(lt.prototype,"getTransmissionChainData"),lt.prototype),c()(lt.prototype,"setAppInstallState",[Xe],Object.getOwnPropertyDescriptor(lt.prototype,"setAppInstallState"),lt.prototype),c()(lt.prototype,"land",[et],Object.getOwnPropertyDescriptor(lt.prototype,"land"),lt.prototype),c()(lt.prototype,"landPage",[tt],Object.getOwnPropertyDescriptor(lt.prototype,"landPage"),lt.prototype),c()(lt.prototype,"getChannelsExtraInfo",[nt],Object.getOwnPropertyDescriptor(lt.prototype,"getChannelsExtraInfo"),lt.prototype),c()(lt.prototype,"openAppStore",[rt],Object.getOwnPropertyDescriptor(lt.prototype,"openAppStore"),lt.prototype),c()(lt.prototype,"preloadLanding",[ot],Object.getOwnPropertyDescriptor(lt.prototype,"preloadLanding"),lt.prototype),c()(lt.prototype,"checkFollow",[it],Object.getOwnPropertyDescriptor(lt.prototype,"checkFollow"),lt.prototype),c()(lt.prototype,"getFeedbackUrl",[at],Object.getOwnPropertyDescriptor(lt.prototype,"getFeedbackUrl"),lt.prototype),c()(lt.prototype,"openFeedbackUrl",[st],Object.getOwnPropertyDescriptor(lt.prototype,"openFeedbackUrl"),lt.prototype),c()(lt.prototype,"checkPreloadH5Page",[ct],Object.getOwnPropertyDescriptor(lt.prototype,"checkPreloadH5Page"),lt.prototype),lt);const ut=BabelRuntimeHelpers.initializerDefineProperty;var pt=n.n(ut);BabelRuntimeHelpers.initializerWarningHelper;var ht,ft,gt,_t,mt,yt,vt,At,bt,wt,Ct,It,Et,St,Tt,xt,kt,Pt,Dt,Ot,Nt,Rt,Mt,Lt,Bt,Ft,Wt,jt,Ut,Vt,Gt,$t,Ht,Zt,Qt,Yt,zt,qt,Jt,Kt,Xt,en,tn,nn,rn,on,an,sn,cn,ln,dn,un=n(2642),pn=n(6998),hn=n(8013),fn=n(2582);const{makeApiSign:gn}=__safeway__.apiSign,_n=e=>t=>new Promise(((n,r)=>{e(Object.assign({},t,{success:n,fail:r}))})),mn=(e,t,n)=>{var r;e.errMsg=e.errMsg||`${t}:ok`;const o=0===e.errMsg.indexOf(`${t}:ok`),i=0===e.errMsg.indexOf(`${t}:fail`);var a;if(o)null==n||null===(a=n.success)||void 0===a||a.call(n,e);else if(i){var s;null==n||null===(s=n.fail)||void 0===s||s.call(n,e)}null==n||null===(r=n.complete)||void 0===r||r.call(n,e)},yn=({username:e,success:t,fail:n,complete:r})=>{(0,ce.IN)("profile",{username:e,scene:75,success:t,fail:n,complete:r})},vn=({username:e,isWaGame:t,success:n,fail:r,complete:o})=>{(0,ce.IN)("private_addContact",{username:e,scene:t?146:139,webtype:1,success:n,fail:r,complete:o})},An=({schemeUrl:e,isIosDirect:t,appInfo:n,extraData:r,skAdItem:o,success:i,fail:a,complete:s})=>{const c={};t&&(c.appId=n.app_id,c.installSchemeUrl=n.appinfo_url,null!==o?(c.installAction=1,c.skAdItem=o):c.installAction=0),r&&(c.extraData=r),(0,ce.IN)("launchApplication",Object.assign(c,{schemeUrl:e,operateDirectly:1,success:i,fail:a,complete:s}))},bn=({appUrl:e,extraData:t,skAdItem:n,success:r,fail:o,complete:i})=>{const a=gn("downloadAppInternal",{appUrl:e,extraData:t,skAdItem:n,operateDirectly:1,success:r,fail:o,complete:i});(0,ce.IN)("downloadAppInternal",a)},wn=({packageName:e,success:t,fail:n,complete:r})=>{const o=gn("getInstallState",{packageName:e,permissionBytes:[1,1,1],success:t,fail:n,complete:r});(0,ce.IN)("getInstallState",o)},Cn=({downloadId:e,success:t,fail:n,complete:r})=>{(0,ce.IN)("queryDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:n,complete:r})},In=({downloadId:e,success:t,fail:n,complete:r})=>{(0,ce.IN)("pauseDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:n,complete:r})},En=({downloadId:e,success:t,fail:n,complete:r})=>{(0,ce.IN)("resumeDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:n,complete:r})},Sn=({downloadId:e,success:t,fail:n,complete:r})=>{const o=gn("installDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:n,complete:r});(0,ce.IN)("installDownloadTask",o)},Tn=({isHide:e,success:t,fail:n,complete:r})=>{(0,ce.IN)("setNavigationBarRightButton",{hide:e,success:t,fail:n,complete:r})},xn=({isHide:e,success:t,fail:n,complete:r})=>{(0,ce.IN)("private_setNavigationBarRightButton",{hide:e,success:t,fail:n,complete:r})},kn=({resources:e,success:t,fail:n,complete:r})=>{(0,ce.IN)("loadVideoResource",{resources:e,success:t,fail:n,complete:r})},Pn=({orientation:e,success:t,fail:n,complete:r})=>{(0,ce.IN)("private_setPageOrientation",{orientation:e,success:t,fail:n,complete:r})},Dn=({success:e,fail:t,complete:n}={})=>{(0,ce.IN)("hideVirtualBottomNavigationBar",{success:e,fail:t,complete:n})},On=({success:e,fail:t,complete:n}={})=>{(0,ce.IN)("showVirtualBottomNavigationBar",{success:e,fail:t,complete:n})},Nn=({success:e,fail:t,complete:n}={})=>{(0,ce.IN)("showStatusBar",{success:e,fail:t,complete:n})},Rn=({success:e,fail:t,complete:n}={})=>{(0,ce.IN)("hideStatusBar",{success:e,fail:t,complete:n})},Mn=({success:e,fail:t,complete:n,feedId:r,nonceId:o,finderUserName:i,reportExtraInfo:a})=>{(0,un.d)("openChannelsActivity",{feedId:r,nonceId:o,finderUserName:i,reportExtraInfo:a,permissionBytes:[1,1,1]},(r=>{mn(r,"openChannelsActivity",{success:e,fail:t,complete:n})}))},Ln=({success:e,fail:t,complete:n,feedId:r,nonceId:o,finderUserName:i,reportExtraInfo:a})=>{(0,un.d)("openChannelsLive",{feedId:r,nonceId:o,finderUserName:i,reportExtraInfo:a,permissionBytes:[1,1,1]},(r=>{mn(r,"openChannelsLive",{success:e,fail:t,complete:n})}))},Bn=({success:e,fail:t,complete:n,finderUserName:r,reportExtraInfo:o})=>{(0,un.d)("openChannelsUserProfile",{finderUserName:r,reportExtraInfo:o,permissionBytes:[1,1,1]},(r=>{mn(r,"openChannelsUserProfile",{success:e,fail:t,complete:n})}))},Fn=({success:e,fail:t,complete:n,feedId:r,nonceId:o,finderUserName:i,reportExtraInfo:a,adJSAPIType:s,expReportLink:c,clkReportLink:l,reportInfo:d,clickPosMap:u,feedbackUrl:p})=>{(0,ce.IN)("openChannelsRewardedVideoAd",{feedId:r,nonceId:o,finderUserName:i,reportExtraInfo:a,adJSAPIType:s,expReportLink:c,clkReportLink:l,reportInfo:d,clickPosMap:u,feedbackUrl:p,success:e,fail:t,complete:n})},Wn=({mixWithOther:e=!0,obeyMuteSwitch:t=!0,success:n,fail:r,complete:o})=>{(0,ce.IN)("setInnerAudioOption",{mixWithOther:e,obeyMuteSwitch:t,success:n,fail:r,complete:o})},jn=({urlList:e,success:t,fail:n,complete:r})=>{(0,ce.IN)("private_onWebPageUrlExposed",{urlList:e,success:t,fail:n,complete:r})},Un=_n((({taskName:e,taskUrl:t,fileMd5:n,extInfo:r,success:o,fail:i,complete:a})=>{const s=gn("addDownloadTaskStraight",{taskName:e,taskUrl:t,fileMd5:n,extInfo:r,permissionBytes:[1,1,1],success:o,fail:i,complete:a});(0,ce.IN)("addDownloadTaskStraight",s)}));let Vn=(ht=C(),ft=C(),gt=C(),_t=C(),mt=C(),yt=C(),vt=C(),At=C(),bt=C(),wt=C(),Ct=C(),It=C(),Et=C(),St=C(),Tt=C(),xt=C(),kt=C(),Pt=C(),Dt=C(),Ot=C(),Nt=C(),Rt=C(),Mt=C(),Lt=C(),Bt=C(),Ft=class{constructor(){pt()(this,"setNavigationBarRightButton",Wt,this),pt()(this,"setMiniProgramNavigationBarRightButton",jt,this),pt()(this,"hideVirtualBottomNavigationBar",Ut,this),pt()(this,"showVirtualBottomNavigationBar",Vt,this),pt()(this,"showStatusBar",Gt,this),pt()(this,"hideStatusBar",$t,this),pt()(this,"openProfile",Ht,this),pt()(this,"addContact",Zt,this),pt()(this,"downloadAppInternal",Qt,this),pt()(this,"openChannelsActivity",Yt,this),pt()(this,"openChannelsRewardedVideoAd",zt,this),pt()(this,"openChannelsLive",qt,this),pt()(this,"openChannelsUserProfile",Jt,this),pt()(this,"getChannelsLiveInfo",Kt,this),pt()(this,"getNetworkType",Xt,this),pt()(this,"preloadH5Page",en,this),this.innerPreloadVideo=_n(kn),pt()(this,"preloadVideo",tn,this),this.innerLaunchApplication=_n(An),pt()(this,"launchApplication",nn,this),this.innerGetInstallState=_n(wn),pt()(this,"getInstallState",rn,this),this.innerQueryDownloadTask=_n(Cn),pt()(this,"queryDownloadTask",on,this),this.innerPauseDownloadTask=_n(In),pt()(this,"pauseDownloadTask",an,this),this.innerResumeDownloadTask=_n(En),pt()(this,"resumeDownloadTask",sn,this),this.innerInstallDownloadTask=_n(Sn),pt()(this,"installDownloadTask",cn,this),this.innerSetPageOrientation=_n(Pn),pt()(this,"setPageOrientation",ln,this),this.innerSetInnerAudioOption=_n(Wn),pt()(this,"setInnerAudioOption",dn,this)}},Wt=c()(Ft.prototype,"setNavigationBarRightButton",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Tn)}}),jt=c()(Ft.prototype,"setMiniProgramNavigationBarRightButton",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(xn)}}),Ut=c()(Ft.prototype,"hideVirtualBottomNavigationBar",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Dn)}}),Vt=c()(Ft.prototype,"showVirtualBottomNavigationBar",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(On)}}),Gt=c()(Ft.prototype,"showStatusBar",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Nn)}}),$t=c()(Ft.prototype,"hideStatusBar",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Rn)}}),Ht=c()(Ft.prototype,"openProfile",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(yn)}}),Zt=c()(Ft.prototype,"addContact",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(vn)}}),Qt=c()(Ft.prototype,"downloadAppInternal",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(bn)}}),Yt=c()(Ft.prototype,"openChannelsActivity",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Mn)}}),zt=c()(Ft.prototype,"openChannelsRewardedVideoAd",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Fn)}}),qt=c()(Ft.prototype,"openChannelsLive",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Ln)}}),Jt=c()(Ft.prototype,"openChannelsUserProfile",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(Bn)}}),Kt=c()(Ft.prototype,"getChannelsLiveInfo",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(hn.tT)}}),Xt=c()(Ft.prototype,"getNetworkType",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(pn.getNetworkType)}}),en=c()(Ft.prototype,"preloadH5Page",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n(jn)}}),tn=c()(Ft.prototype,"preloadVideo",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerPreloadVideo({resources:e})}}),nn=c()(Ft.prototype,"launchApplication",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{const t="string"==typeof e?{schemeUrl:e}:e;return!fn.cj||null!=t&&t.isIosDirect||null===(null==t?void 0:t.skAdItem)?this.innerLaunchApplication(t):this.downloadAppInternal({appUrl:t.schemeUrl,extraData:null==t?void 0:t.extraData,skAdItem:null==t?void 0:t.skAdItem})}}}),rn=c()(Ft.prototype,"getInstallState",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerGetInstallState({packageName:e})}}),on=c()(Ft.prototype,"queryDownloadTask",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerQueryDownloadTask({downloadId:e})}}),an=c()(Ft.prototype,"pauseDownloadTask",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerPauseDownloadTask({downloadId:e})}}),sn=c()(Ft.prototype,"resumeDownloadTask",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerResumeDownloadTask({downloadId:e})}}),cn=c()(Ft.prototype,"installDownloadTask",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerInstallDownloadTask({downloadId:e})}}),ln=c()(Ft.prototype,"setPageOrientation",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerSetPageOrientation({orientation:e})}}),dn=c()(Ft.prototype,"setInnerAudioOption",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>this.innerSetInnerAudioOption({mixWithOther:e,obeyMuteSwitch:t})}}),Ft);var Gn,$n,Hn,Zn,Qn,Yn,zn,qn,Jn,Kn,Xn,er,tr,nr,rr,or;let ir=!1,ar=(Gn=E("handleAdDataDone"),$n=S("handleAdDataError"),Hn=E("handleAdDataDone"),Zn=S("handleAdDataError"),Qn=E("handleAdDataDone"),Yn=S("handleAdDataError"),zn=E("handleAdDataDone"),qn=S("handleAdDataError"),Jn=E("handleAdDataDone"),Kn=S("handleAdDataError"),Xn=E("handleAdDataDone"),er=S("handleAdDataError"),tr=E("handleAdDataDone"),nr=S("handleAdDataError"),rr=(e,t,n)=>{const r=n.value;n.value=function(...e){const t=e=>{sr&&sr in this&&"function"==typeof this[sr]&&this[sr](e)};try{const n=r.call(this,...e);return n instanceof Promise?n.catch((e=>t(e))):n}catch(e){t(e)}}},or=class{constructor({adUnitId:e,adType:t,pluginAppid:n=""}){this.adUnitId=void 0,this.adType=void 0,this.pluginAppid=void 0,this.slotData={},this.lastAdRetCode=0,this.lastAdRespone="fetch",this.limitAdReqTime=3e4,this.fetchPromise=null,this.webviewId=ie.S0.currentWebviewId,this.fetchRetryCount=0,this.isCanvasXmlHook=!1,this.handledInNewFetch=!1,this.nativeMethodInvoker=new Vn,this.mmReporter=void 0,this.cgiReporter=void 0,this.lander=void 0,this.datas=[],this.data={},this.convertedAdData=null,this.isMulti=!1,this.isViewable=!1,this.adDataIndex=0,this.scene=0,"splashAd"!==t&&(0,ie.lv)(),this.adUnitId=e,this.adType=t,this.pluginAppid=ie.S3.isWaGame?"":n,this.mmReporter=new se(this),this.cgiReporter=new ze(this),this.lander=new dt(this),this.bindProxyMethods(),this.setTimePoint("p1"),(0,y.lc)((e=>{if(e.webviewId===ie.S0.currentWebviewId&&this.data&&this.isViewable){const{uxinfo:t}=this.data,n=4;(0,_.R)({eventTimeStamp:e.eventTimeStamp?e.eventTimeStamp:+new Date,scene:n,uxinfo:t,url:e.path?e.path:"index.html"})}}))}bindProxyMethods(){const e=[this.nativeMethodInvoker,this.mmReporter,this.cgiReporter,this.lander];for(const o of e){const e=(0,re.Zw)(o);for(const i of e)n=i,r=void 0,(null===(r=(t=o)&&t[w])||void 0===r?void 0:r.has(n))&&(this[i]=(...e)=>o[i](...e))}var t,n,r}isLimitRequest(){return"checkAd"!==this.lastAdRespone&&0!==this.lastAdRetCode&&+new Date-this.getLastAdReqTs()<this.limitAdReqTime}convertTestAdData(e){try{const r=(0,re.Xh)(e),o=JSON.parse(r.crt_exp_info);var t;if(r.crtExpInfo=o,1002===o.exp_type){if(null!==(t=r.wx_game_video)&&void 0!==t&&t.wxgame_video_card){const e=JSON.parse(o.exp_data);r.wx_game_video.wxgame_video_card.flooring_page=e}}else if(1001===o.exp_type){r.profile_exp=!0;const t=o.exp_data&&"string"==typeof o.exp_data?JSON.parse(o.exp_data):o.exp_data;r.dest_type=t.dest_type;let n={};if(r.button_action)try{n=JSON.parse(e.button_action)}catch(e){}n.jump_type=t.jump_type,r.button_action=JSON.stringify(n)}else if(105===o.exp_type)r.ad_style_data=o.exp_data;else if(106===o.exp_type){const e=o.exp_data&&"string"==typeof o.exp_data?JSON.parse(o.exp_data):o.exp_data;(0,re.Ee)(r,e),r.common_exp=!0}else if(o.exp_type&&[108,109,2001].includes(o.exp_type))r.ad_dynamic_list=o.exp_data;else if(o.crt_size&&[_e.CRT_SIZE_WX_APPLICATION_NEW,_e.CRT_SIZE_WX_APPLICATION_X].includes(o.crt_size)){if(r.crt_size=o.crt_size,r.ad_width=o.width,r.material_width=o.width,r.ad_height=o.height,r.material_height=o.height,r.image_url=o.image_url,o.dest_url&&r.url&&[1,3,6].includes(r.dest_type)){const e=(0,re.Wz)(r.url),t={};e.weixinadkey&&(t.weixinadkey=e.weixinadkey),e.ticket&&(t.ticket=e.ticket),e.gdt_vid&&(t.gdt_vid=e.gdt_vid),e.weixinadinfo&&(t.weixinadinfo=e.weixinadinfo),r.url=(0,re.a3)(o.dest_url,t)}r.watermark_text=o.watermark||""}else if(o.landpage_type){var n;null!==(n=r.wx_game_video)&&void 0!==n&&n.wxgame_video_card&&(r.wx_game_video.wxgame_video_card.flooring_page=o)}return r}catch(t){return e}}getFetchArgs({isAdInterval:e},t){var n,r;const o={scene_type:ie.S0.currentScene,ad_unit_id:this.adUnitId,appid:this.pluginAppid?this.pluginAppid:ie.S3.gameAppId,orig_weapp_id:this.pluginAppid?ie.S3.gameAppId:"",weapp_path:ie.S0.weappPath,pos_id:"",network_type:ie.S3.adNetworkType,orientation:{landscape:1,portrait:2}[ie.S3.deviceOrientation],sdk_version:ie.S3.SDKVersion,ext_slot_custom_comm:"",weapp_extra_data:JSON.stringify({wxa_start_ts:ie.S3.startTime.valueOf(),wxa_enter_ts:ie.S0.enterForegroundTime.valueOf(),weixin_version:ie.S3.wechatVersion,os_version:ie.S3.systemVersion,machine_type:ie.S3.model,is_ad_interval:!!e,env:null===(n=u.Z.host)||void 0===n?void 0:n.env,app_appid:null===(r=u.Z.host)||void 0===r?void 0:r.appId})};o.pos_id=b.DX[this.adType];let i={};return"grid"===this.adType?i.box_slot_ad={count:String(this.slotData.gridCount),box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)}:"splashAd"===this.adType?(i.splash_ad={count:String(5)},i.weapp_enter_scene=(null==t?void 0:t.weappEnterScene)||0,i.request_type=(null==t?void 0:t.requestType)||1,i.check_ad_is_online_ads=(null==t?void 0:t.preloadAds)||[],delete o.appid):"customAd"===this.adType&&(i={is_adunit_tmpl:!0}),(0,p.er)()&&(i.in_3rd_app=1),o.ext_slot_custom_comm=JSON.stringify(i),o}validateFetchEnv(){if((0,p.er)()&&this.reportAdMonitorData(ge.IN.THIRD_ERROR),"splashAd"!==this.adType&&!this.adUnitId)throw{errMsg:"no ad unit id"};if(this.isLimitRequest())throw{errMsg:"no advertisement",errCode:this.lastAdRetCode}}validateFetchRes(e){if("-12001"===e.err_code)throw this.lastAdRetCode=e.err_code,{errMsg:"no permission",errCode:-12001};if(this.lastAdRetCode=e.ret,this.lastAdRespone="fetch",!this.isCheckAdIsOnlineRequest(e)){if(!e.advertisement_num||e.advertisement_num<=0)throw{errMsg:"no advertisement",errCode:e.ret};if(!e.advertisement_info)throw e}}validateCrtSize(e){const{pt:t,crt_size:n}=e,r=be.includes(t),o=we.includes(n);if(!r&&!o){if(n&&!o)throw{errMsg:`unexpected advertisement crt_size ${n}`};throw{errMsg:`unexpected advertisement type ${t}`}}}handleAdDataDone(){this.reportAdMonitorData(ge.IN.AD_FETCH_SUCCESS),this.reportIPV4()}handleAdDataError(e){this.reportAdMonitorData(ge.IN.AD_FETCH_SUCCESS,e)}handleWaidForList(e=[]){const t={};if(e.length<1)return Promise.resolve(t);const n=[];return null==e||e.forEach((e=>{n.push((0,h.p4)(e.apkName).then((t=>a()(a()({},t),{},{aid:e.aid}))))})),Promise.race([Promise.all(n).then((e=>(e.forEach((({waid:e,aid:n=""})=>{e&&n&&(t[n]=e)})),t))).catch((e=>(this.reportAdMonitorData(ge.IN.READ_ADINFOS_ERROR,e),t))),(0,v.Vs)(2e3).then((()=>t))])}handleBulkSaveMaterials(e){let t=[];return this.isSplashAd()&&this.data&&(t=this.getSplashAdMaterialList(e)),t.length>0?(0,A.fn)(t):Promise.resolve()}getSplashAdMaterialList(e){var t,n;const r=[],o=(null==e?void 0:e.crtInfo[0])||{},i=e.rerankingExtInfo.material_hash||"",a=(null==o?void 0:o.image_url)||"",s=(null==o||null===(t=o.card_info)||void 0===t?void 0:t.pure_color_url)||"",c=(null==o||null===(n=o.card_info)||void 0===n?void 0:n.material_blur_url)||"",l=`${b.Lq}/${e.aid}_${i}.png`;if(i&&r.push({url:a,fileName:`${e.aid}_${i}.png`,filePath:l}),s){const t=`${b.Lq}/${e.aid}_${i}_pure_color.png`;i&&r.push({url:s,fileName:`${e.aid}_${i}_pure_color.png`,filePath:t})}if(c){const t=`${b.Lq}/${e.aid}_${i}_blur.png`;i&&r.push({url:c,fileName:`${e.aid}_${i}_blur.png`,filePath:t})}return r}handleAdInfosIndexCache(e,t,n){var r=this;return o()((function*(){let o;try{o=yield r.handleWaidForList(e)}catch(e){}t.deviceInfo=(0,ie.v3)(),t.waidMap=o,r.reportAdMonitorData(ge.IN.READ_ADINFOS_SUCCESS,{adInfos:t});try{return yield(0,A.Z7)(t,n),r.reportAdMonitorData(ge.ET.WRITE_ADINFOS_SUCCESS,{adInfos:t})}catch(e){const n=e instanceof Error?r.processStackMsg(e):e;return r.reportAdMonitorData(ge.ET.WRITE_ADINFOS_FAIL,{adInfos:t,errMsg:n})}}))()}isCheckAdIsOnlineRequest(e){return this.isSplashAd()&&1010===e.ret&&e.advertisement_extra_info}isCheckAdIsOnlineResp(e){return!("traceid"in e)}handleCheckAdIsOnlineResp(e){var t;const n=null===(t=JSON.parse(e.advertisement_extra_info))||void 0===t?void 0:t.check_ad_resp;return this.lastAdRespone=this.isCheckAdIsOnlineResp(n)?"checkAd":"fetch",n}handleSplashAd(e){var t=this;return o()((function*(){if(t.isCheckAdIsOnlineRequest(e))return t.handleCheckAdIsOnlineResp(e);t.reportAdMonitorData(ge.ET.dataLoadSuccess);let n=0;const r=[];let o=[];const i=[],a=`${(0,v.Cy)()}_exposure_times`,s=`${b.Lq}/adinfos.txt`,c={slot_id:b.DX[t.adType],ads:[],crtSizeMap:{},materialHashMap:{},total_exposure_times:0,[a]:0,requestInQueue:"true",totalSizeUsed:0},l=yield(0,A.x1)(b.Lq);c.totalSizeUsed=l.totalSize;let d=l.outedDateFileList||[];d=d.length<21&&l.totalSize>20971520?l.fileList:d;try{yield(0,A.BZ)(b.Lq,d)}catch(e){t.reportAdMonitorData(ge.ET.removeFileDataFail,e)}try{const s=e.advertisement_info.length>0&&e.advertisement_info.map(((e,s)=>{var l,d;const u=t.handleAdData(e),p=u.rerankingExtInfo.material_hash||"",h={material_hash:u.rerankingExtInfo.material_hash||"",tid:u.rerankingExtInfo.tid.toString()||"",aid:u.aid,trace_id:u.traceid};c.ads.push(h),c.total_exposure_times=u.rerankingExtInfo.total_exposure_times||0,c[a]=u.rerankingExtInfo[a]||0;const f=null===(l=u.condition)||void 0===l?void 0:l.widget_gray_splash_data_channel_parallel;c.requestInQueue=f?"false":"true",c.isCheckAndFetch=(null===(d=u.condition)||void 0===d?void 0:d.widget_gray_splash_check_and_fetch)||0,c.materialHashMap[u.aid]=p;const g=u.crtInfo[0]||{};u.crtInfo&&(c.crtSizeMap[u.aid]=g.width>g.height?"landscape":"portrait");const _=t.getSplashAdMaterialList(u);o=o.concat(_),n+=0===s?_.length:0;const m=`${b.Lq}/${u.aid}.txt`;if(r.push((0,A.Z7)(u,m)),u.product_type===me.ANDROID){var y;const e=null===(y=u.appInfo)||void 0===y?void 0:y.apkName;i.push({apkName:e,aid:u.aid})}return u}));t.datas=s}catch(e){throw t.reportAdMonitorData(ge.ET.handleDataFail,e),e}const u=o.slice(0,n);return yield(0,A.fn)(u),r.push((0,A.fn)(o)),r.push(t.handleAdInfosIndexCache(i,c,s)),Promise.all(r).then((()=>t.reportAdMonitorData(ge.ET.dataPreloadSuccess))).catch((e=>{throw t.reportAdMonitorData(ge.ET.dataPreloadFail,e),e})),t.datas[0]}))()}handleCustomAd(e){const t=e.advertisement_info.map(((e,t)=>{var n;const r=e=>{if(0===t)throw e};let o,i,s=null;const c=this.handleAdData(e),{crtInfo:l,button_action:d,product_type:u,dest_type:p,crt_size:h}=c;if(c.reranking_ext_info&&c.reranking_ext_info.refresh_time)i=c.reranking_ext_info.refresh_time;else if(c.reranking_ext_info&&"string"==typeof c.reranking_ext_info)try{const e=JSON.parse(c.reranking_ext_info);e.refresh_time&&(i=e.refresh_time)}catch(e){}if(null!=c&&null!==(n=c.extBackComm)&&void 0!==n&&n.tmpl_info)try{const e=JSON.parse(c.extBackComm.tmpl_info);s=JSON.parse(e.tmpl_content),o=Number(c.extBackComm.sub_templ_id)}catch(e){this.reportAdMonitorData(ge.$g.TPL_PARSE_FAILED),r({errMsg:"custom template error",errCode:b.yB.ERR_TPL_PARSE})}else this.reportAdMonitorData(ge.$g.TPL_LOAD_FAILED),r({errMsg:"no custom template",errCode:b.yB.ERR_TPL_NONE});return a()(a()({},e),{},{crtInfo:l,button_action:d,product_type:u,dest_type:p,crt_size:h,condition:c.condition,template:s,subTemplId:o,refreshTime:i,aid:c.aid,app:c.app,appInfo:c.appInfo,extBackComm:c.extBackComm,wording:c.hint_txt,card_info:c.card_info,video_info:c.video_info,image_url:c.image_url,weapp_info:c.weapp_info,wx_game_video:c.wx_game_video})}));return this.reportAdMonitorData(ge.$g.LOAD_SUCCESS),t.length>1?this.isMulti=!0:this.isMulti=!1,this.datas=t,this.setCurrentData(0),t[0]}handleGridAd(e){if(e.advertisement_info.length!==this.slotData.gridCount)throw this.reportAdMonitorData(ge.IN.AD_GRID_LOAD_COUNT_ERROR,{count:this.slotData.gridCount,getCount:e.advertisement_info.length}),{errMsg:"no advertisement count error",errCode:e.ret};const t=e.advertisement_info.map(((e,t)=>{const n=this.handleAdData(e);return n._isGrid=!0,n._gridInfo={row:5===this.slotData.gridCount?1:2,column:5===this.slotData.gridCount?5:4,index:t},n}));this.datas=t,this.setCurrentData(0),this.fetchRetryCount=0;for(const e of this.datas)if(e.crt_size!==_e.CRT_SIZE_MULTI_POS_GRID)throw{errMsg:`unexpected advertisement crt_size ${e.crt_size}`};return this.reportAdMonitorData(ge.IN.AD_GRID_LOAD_SUCCESS),this.datas}handleInterstitialAd(e){const t=JSON.parse(e.image_url),n=a()(a()({},t[0]||{}),(0,re.ei)(e,["crtInfo","product_type","dest_type","crt_size","button_action","condition","app","appInfo","extBackComm"]));if(e.crt_size===_e.CRT_SIZE_INSERT_VIDEO){let e="0";const t=decodeURIComponent(this.data.apurl);/viewid=([^&]+)/.test(t)&&(e=RegExp.$1),this.data.wx_game_video={short_video:{viewid:e}}}return this.convertedAdData=n,n}handleRewardedVideoAd(e){var t,n,r,o;e.crt_size===_e.CRT_SIZE_REWARD_LANDINGPAGE&&this.handleRewardedLandingPage(e);const i=this.data.crtInfo&&Array.isArray(this.data.crtInfo)?this.data.crtInfo:[];0===i.length&&i.push({wxgame_video_card:{}});const[{wxgame_video_card:{head_bg_img:s,mp_tag_type:c},wxgame_gauss_video:l}]=i,{canvas_info:d,wx_game_video:{short_video:u,wxgame_video_card:{show_time:p,thumb:h,title:f,desc:g,flooring_page:_}}}=e;let m=30;if(e.reranking_ext_info&&e.reranking_ext_info.rewarded_time)m=e.reranking_ext_info.rewarded_time;else if(e.reranking_ext_info&&"string"==typeof e.reranking_ext_info)try{const t=JSON.parse(e.reranking_ext_info);t.rewarded_time&&(m=t.rewarded_time)}catch(e){}m=Math.floor(1e3*m),_&&[3,4].indexOf(_.landpage_type)>-1&&(this.data.isPlayable=!0);const y=a()({crtInfo:i[0],canvas_info:d,type:ve[e.pt],shortVideo:this.mapRewardVideoFields(u),gaussVideo:l?this.mapRewardVideoFields(a()(a()({},l),{},{video_duration:l.video_duration_ms})):null,rewardedTime:m,card:{icon:h,name:f,wording:g,headBgImg:s,mpTagType:c,showTime:p},flooringPage:_},(0,re.ei)(e,["crt_size","product_type","dest_type","button_action","condition","app","appInfo"]));this.convertedAdData=y;const v=(0,ae.zt)(y),A=(0,ae.zi)(y);return this.reportRewardGaussVideo({useGaussVideo:v,useExpandStyle:A,expUseGaussVideo:null!==(t=null===(n=e.condition)||void 0===n?void 0:n.widget_gray_reward_use_gauss_blur)&&void 0!==t?t:0,expUseExpandStyle:1,videoUrl:null!==(r=null==u?void 0:u.video_url)&&void 0!==r?r:"",gaussVideoUrl:null!==(o=null==l?void 0:l.video_url)&&void 0!==o?o:""}),null!=l&&l.video_url&&this.reportAdMonitorData(ge.IN.REWARD_GAUSS_EXISTS),v&&A?this.reportAdMonitorData(ge.IN.REWARD_USE_GAUSS_AND_EXPAND_STYLE):v?this.reportAdMonitorData(ge.IN.REWARD_USE_GAUSS):A&&this.reportAdMonitorData(ge.IN.REWARD_USE_EXPAND_STYLE),y}mapRewardVideoFields(e){const{thumb_url:t,video_url:n,video_duration:r,thumb_width:o,thumb_height:i}=e;return{poster:t,src:n,duration:r,width:o,height:i}}handleRewardedLandingPage(e){var t;const n=ie.S3.isAndroid&&u.Z.clientVersion>=654315008||ie.S3.isIOS&&u.Z.clientVersion>=385879552;if((null===(t=this.data.condition)||void 0===t?void 0:t.widget_gray_rewardedpage_exposure_v2)&&n)try{const{canvas_info:t}=e,{root:n}=d()(t.ad_info_xml),r=(0,v.IU)(e),o=this.composeExposureCommonInfo({top:0,left:0,width:ie.S3.screenWidth,height:ie.S3.screenHeight});n.children.push({name:"viewid",children:[],attributes:{},content:r},{name:"commInfo",children:[],attributes:{},content:o});const i=m(n,!0);this.data.canvas_info.ad_info_xml=i,this.isCanvasXmlHook=!0}catch(e){this.isCanvasXmlHook=!1}}handleBannerAd(e){const{pt:t,crt_size:n,image_url:r,material_width:o,material_height:i,ad_width:s,ad_height:c,use_style_data:l,hint_txt:d,watermark_type:u}=e;let{extBackComm:{antifraud_popup:p}}=e;void 0===p&&(p=!1);const h=ve[t];let f,g;l?(f=s,g=c):[_e.CRT_SIZE_WX_APPLICATION,_e.CRT_SIZE_WX_APPLICATION_NEW,_e.CRT_SIZE_WX_APPLICATION_X].includes(n)?(f=(s||o)/2,g=(c||i)/2):n===_e.CRT_SIZE_WX_APPLICATION_CARD&&(f=s,g=c);const _=a()({antifraudPopup:p,type:h,crt_size:n,useStyleData:l,watermark:Ae[u],width:f,height:g,image:{src:r,width:o,height:i},wording:d},(0,re.ei)(e,["ad_style_data","product_type","dest_type","button_action","watermark_text","condition","app","appInfo"]));return this.convertedAdData=_,_}extractJson(e,t,n,r){const o=null!=n?n:t;if(e[o]&&"string"==typeof e[o])try{e[t]=JSON.parse(e[o])}catch(n){e[t]=null!=r?r:{}}else null!=r&&(e[t]=r)}buildWechatInfo(e){if(e.product_type===me.WE_CHAT){const{biz_appid:t,biz_info:{nick_name:n,is_subscribed:r,head_img:o,biz_uin:i}}=e;return{icon:o,nickname:n,uin:i,isFollowed:r,biz_appid:t}}return{}}buildAppInfo(e){const t=e.product_type;if([me.ANDROID,me.IOS].includes(t)){const{app_info:{app_name:t,apk_name:n,apk_url:r,app_md5:o,icon_url:i,url_scheme:a,version_code:s,channel_id:c,desc:l}}=e;return{appName:t,apkName:n,apkUrl:r,appMd5:o,iconUrl:i,urlScheme:a,versionCode:s,channelId:c,desc:l}}return{}}handleAdData(e){var t;if(0===Object.keys(e).length)throw{errMsg:"unexpected adData"};const n=e.crt_exp_tid&&e.crt_exp_info?this.convertTestAdData(e):(0,re.Xh)(e),r=n;if(n.crt_size&&(r.crt_size=Number(n.crt_size)),this.extractJson(r,"crtInfo","crt_info"),this.extractJson(r,"extBackComm","ext_back_comm"),this.extractJson(r,"button_action","button_action",{}),this.extractJson(r,"adStyleData","ad_style_data",""),this.extractJson(r,"rerankingExtInfo","reranking_ext_info",""),this.extractJson(r,"extInfo","ext_info"),this.extractJson(r,"adDynamicList","ad_dynamic_list"),n.flow_exp_info)try{r.condition=(0,g.mh)(n.flow_exp_info),this.isSplashAd()||this.handleSplashAdFetchLog(r.condition)}catch(e){}if(r.adStyleData&&[_e.CRT_SIZE_REWARD_VEDIO169,_e.CRT_SIZE_REWARD_VEDIO916,_e.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(r.crt_size)){r.use_style_data=!0;const{adStyleData:e}=r;n.ad_width=e.width,n.ad_height=e.height,e.widgets.forEach((e=>{const t=n.button_action;4===e.type&&(t.button_text=e.title,t.jump_type=e.dest_type||t.jump_type,t.jump_url=e.dest_url||t.jump_url)}))}else this.validateCrtSize(r);const o=n.button_action;if(o.button_text=o.button_text||"查看",n.watermark_text=n.watermark_text||"去逛逛",18001===(null==r||null===(t=r.extInfo)||void 0===t?void 0:t.page_type)){const e={gdt_vid:n.traceid||"",uxinfo:n.uxinfo||"",ad_token:n.ad_token||"",rl:n.rl||""};n.url=(0,re.a3)(n.url,e)}const i=this.buildWechatInfo(r),s=this.buildAppInfo(r);return n.product_type===me.ANDROID&&(0,h.p4)(s.apkName).then((({waid:e})=>{r.waid=e,this.reportAdMonitorData(ge.IN.GET_WAID_SUCCESS)})).catch((e=>{this.reportAdMonitorData(ge.IN.GET_WAID_ERROR,e)})),a()(a()({},r),{},{app:i,appInfo:s})}handleSplashAdFetchLog(e){this.handledInNewFetch||(this.handledInNewFetch=!0,(0,A.J$)(e))}handleOperateWXData(e){const t={apiName:"webapi_getadvert",reqData:e,requestInQueue:!1};return this.isSplashAd()?(0,f.ul)(t):(0,f.Lo)(t)}processFetch(e,t,n){var r=this;return o()((function*(){if(r.validateFetchEnv(),Object.keys(t).length>0)(0,ie.NN)(t);else{ie.S3.deviceOrientation=(0,ie.uj)();const{networkType:e}=yield r.getNetworkType();ie.S3.adNetworkType=e}const o=r.getFetchArgs({isAdInterval:e},n);r.setLastAdReqTs(+new Date),r.setLastExposureTime(0),r.setLastClickTime(0),r.setTimePoint("p2");try{let e=yield r.handleOperateWXData(o);if(r.fetchPromise=null,r.fetchRetryCount=0,r.handledInNewFetch=!1,r.setTimePoint("p3"),e=JSON.parse(e.rawData),r.validateFetchRes(e),r.isSplashAd())return r.handleSplashAd(e);if(r.isGridAd())return r.handleGridAd(e);if(r.isCustomAd())return r.handleCustomAd(e);const t=r.handleAdData(e.advertisement_info[0]);return r.data=t,r.checkDuplicateRecommendedAds(t.product_type,t.app,t.appInfo),r.isInterstitialAd(t)?r.handleInterstitialAd(t):r.isRewardedVideoAd(t)?r.handleRewardedVideoAd(t):r.handleBannerAd(t)}catch(t){let n="";try{n=JSON.parse(t).errMsg}catch(e){}if(r.fetchPromise=null,0===n.indexOf("getAdData:fail")&&r.fetchRetryCount<1)return r.fetchRetryCount+=1,r.fetch(e);throw r.isBannerAd()?r.reportAdMonitorData(ge.IN.AD_BANNER_LOAD_ERROR,t):r.isRewardedVideoAd()?r.reportAdMonitorData(ge.IN.AD_VIDEO_LOAD_ERROR,t):r.isInterstitialAd()?r.reportAdMonitorData(ge.IN.AD_INTERSTITIAL_LOAD_ERROR,t):r.isGridAd()?r.reportAdMonitorData(ge.IN.AD_GRID_LOAD_ERROR,t):r.isCustomAd()?r.reportAdMonitorData(ge.$g.LOAD_FAILED,t):r.isSplashAd()&&r.reportAdMonitorData(ge.ET.dataLoadFail,t),t}}))()}checkDuplicateRecommendedAds(e,t,n){var r=this;return o()((function*(){const o=[];let i="0";const a=decodeURIComponent(r.data.apurl);/viewid=([^&]+)/.test(a)&&(i=RegExp.$1);const s={conv_status:o},c={},{imei:l,idfa:d}=yield ie.SQ,u={viewid:i,app_status:0,follow_status:0,imei:l,idfa:d};if(e===me.WE_CHAT){if(c.ad_type=1,c.ad_id=t.biz_appid,u.follow_status=t.isFollowed?2:1,t.isFollowed)return r.reportAdMonitorData(ge.IN.AD_FOLLOWED,{adInfo:c})}else if(e===me.ANDROID){const{apkName:e,versionCode:t}=n;try{const n=yield r.getInstallState(e),o=n.isInstalled&&(void 0===n.versionCode||n.versionCode>=t);c.ad_type=2,c.ad_id=e,u.app_status=o?2:1,o&&r.reportAdMonitorData(ge.IN.AD_INSTALLED,{adInfo:c})}catch(e){u.app_status=0,Reporter.reportIDKey({key:"adGetInstallState_fail",force:!0})}}o.push(u),r.reportInstallFollow(s)}))()}getAdType(){return this.adType}getAdUnitId(){return this.adUnitId}getPluginAppid(){return this.pluginAppid}getSlotData(){return this.slotData}getDeviceInfo(){return ie.S3}isBannerAd(){return"banner"===this.adType}isRewardedVideoAd(e){return"incentive-video"===this.adType&&(!e||[_e.CRT_SIZE_REWARD_VEDIO169,_e.CRT_SIZE_REWARD_VEDIO916,_e.CRT_SIZE_VERTICAL_VIDEO_NEW_916,_e.CRT_SIZE_REWARD_LANDINGPAGE].includes(e.crt_size))}isInterstitialAd(e){return"interstitialAd"===this.adType&&(!e||[_e.CRT_SIZE_TABLE_SCREEN_IMAGE,_e.CRT_SIZE_INSERT_VIDEO].includes(e.crt_size))}isGridAd(){return"grid"===this.adType}isCustomAd(){return"customAd"===this.adType}isSplashAd(){return"splashAd"===this.adType}getProgramStartTime(){return ie.S3.startTime}getWebviewInfo(){return{createWebviewId:this.webviewId,lastWebviewId:ie.S0.lastWebviewId,currentWebviewId:ie.S0.currentWebviewId,openType:ie.S0.currentOpenType}}setSlotData(e){this.slotData=Object.assign(this.slotData,e||{})}reset(){this.adDataIndex=0,this.cgiReporter.reset()}fetch(e=!1,t={},n={}){return this.fetchPromise||(this.fetchPromise=this.processFetch(e,t,n)),this.fetchPromise}setRightButtonHide(e){const t=()=>ie.S3.isWaGame?this.setNavigationBarRightButton({isHide:e}):this.setMiniProgramNavigationBarRightButton({isHide:e});return t().catch((n=>(this.reportAdMonitorData(ge.IN.RIGHTBUTTON_HIDE_ERROR,{retryCount:0,isHide:e,message:this.processStackMsg(n)}),t().catch((t=>{throw this.reportAdMonitorData(ge.IN.RIGHTBUTTON_HIDE_ERROR,{retryCount:1,isHide:e,message:this.processStackMsg(t)}),t})))))}addDownloadTaskStraight(e,t,n,r){return Un({taskName:e,taskUrl:t,fileMd5:n,extInfo:r}).catch((e=>(this.reportAdMonitorData(ge.IN.ADD_DOWNLOAD_TASK_ERROR,e),Promise.reject(e))))}operateFullscreen(e){if(!e)return Promise.reject();const t=[this.setRightButtonHide("hide"===e)];return ie.S3.isWaGame||t.push("hide"===e?this.hideStatusBar():this.showStatusBar()),!ie.S3.isWaGame&&ie.S3.isAndroid&&t.push("hide"===e?this.hideVirtualBottomNavigationBar():this.showVirtualBottomNavigationBar()),Promise.all(t)}isTriggerClick(e){const t=e.absoluteX,n=e.absoluteY,r=e.absoluteEndX,o=e.absoluteEndY,i=e.pressInterval;let a=!1;return Math.abs(o-n)<30&&Math.abs(r-t)<30&&i<300&&(a=!0),a}isValidCondition(e){return!!(e&&this.data&&this.data.condition)&&(this.data.condition[e]||void 0===this.data.condition[e])}setCurrentData(e){var t;this.adDataIndex=e,null!==(t=this.datas)&&void 0!==t&&t[e]&&(this.data=this.datas[e])}checkCanvasXmlState(){return this.isCanvasXmlHook}handleRewardedVideoPlayableLand(e,t){var n,r;const o=null==this||null===(n=this.data)||void 0===n||null===(r=n.extBackComm)||void 0===r?void 0:r.uid,i={};4===t?i.xj_scene=6:(i.gdt_vid=this.data.traceid||"",i.uxinfo=this.data.uxinfo||"",i.reward=1),i.rl=this.data.rl||"",i.ad_token=this.data.ad_token||"",ie.S3.isIOS&&(i.uid=o||"");const a=(0,re.a3)(e,i);return this.isPrefetch("playable_url")&&this.reportAdMonitorData(ge.IN.H5_PRELOAD_BUTTON_CLICKED),(0,f.Yo)({url:a})}setDeviceInfo(e){Object.assign(ie.S3,e)}setSplashAdShowStatus(){ir=!0}getSplashAdShowStatus(){return ir}getChannelsLiveStatus(){var e=this;return o()((function*(){const{dest_type:t,extBackComm:{channels_info:n,live_video_mode:r,live_video_sub_mode:o}}=e.data;if(!n||null==r||null==o)return"none";if((0,re.Ie)(r,o)&&t===pe.DEST_TYPE_CHANNELS_LIVE){const{id:t,username:r}=n;if(!t||!r)return"none";try{const{status:n}=yield e.getChannelsLiveInfo({feedId:t,finderUserName:r});if([Se.NONE,Se.IN_PREPARE].includes(n))return"none";if(n===Se.ON_AIR)return"onlive";if(n===Se.ENDED)return"end";e.reportAdIDKey({key:ge.IN.GET_CHANNELS_LIVE_STATUS_SUCCESS})}catch(n){e.reportAdMonitorData(ge.IN.GET_CHANNELS_LIVE_STATUS_FAILED,{id:t,username:r,errMsg:n})}}else if((0,re.gC)(r,o)&&t===pe.DEST_TYPE_CANVAS)return"reserve";return"none"}))()}},c()(or.prototype,"handleCheckAdIsOnlineResp",[Gn,$n],Object.getOwnPropertyDescriptor(or.prototype,"handleCheckAdIsOnlineResp"),or.prototype),c()(or.prototype,"handleSplashAd",[Hn,Zn],Object.getOwnPropertyDescriptor(or.prototype,"handleSplashAd"),or.prototype),c()(or.prototype,"handleCustomAd",[Qn,Yn],Object.getOwnPropertyDescriptor(or.prototype,"handleCustomAd"),or.prototype),c()(or.prototype,"handleGridAd",[zn,qn],Object.getOwnPropertyDescriptor(or.prototype,"handleGridAd"),or.prototype),c()(or.prototype,"handleInterstitialAd",[Jn,Kn],Object.getOwnPropertyDescriptor(or.prototype,"handleInterstitialAd"),or.prototype),c()(or.prototype,"handleRewardedVideoAd",[Xn,er],Object.getOwnPropertyDescriptor(or.prototype,"handleRewardedVideoAd"),or.prototype),c()(or.prototype,"handleBannerAd",[tr,nr],Object.getOwnPropertyDescriptor(or.prototype,"handleBannerAd"),or.prototype),c()(or.prototype,"checkDuplicateRecommendedAds",[rr],Object.getOwnPropertyDescriptor(or.prototype,"checkDuplicateRecommendedAds"),or.prototype),or);var sr},2185:()=>{},2942:()=>{},8401:(e,t,n)=>{"use strict";n.d(t,{wA:()=>p,Ar:()=>fe,KM:()=>ee,Ym:()=>he,MO:()=>de,v:()=>F,Qr:()=>h,y0:()=>ue,cF:()=>ne,sY:()=>M,vE:()=>B,ve:()=>L});var r=n(8665),o=n(1503),i=n.n(o),a=n(6725),s=n.n(a),c=n(2241),l=n(3356),d=n.n(l);const u=e=>{let t=Array.isArray(e)?e[0]:e;for(;t.parent&&t.parent!==fe&&t.parent.referComponent;)t=t.parent;return t};class p{constructor(e){this.state={},this.style={},this.isComponent=!0,this._hasUnmount=!1,this._eventHandler={},this._stateQueue={},this._setStateTimer=null,this._setStyleTimer=null,this._manualStyle={},this._subComponents=[],this._rootElement=void 0,this._elementMap={},this.props=void 0,this.parent=null,this.props=e}setState(e,t){var n=this;this._stateQueue=this._stateQueue||{};let r=!1;for(const t of Object.keys(e)){e[t]!==this.state[t]&&(r=!0)}r?(Object.assign(this._stateQueue,e),this._setStateTimer&&clearTimeout(this._setStateTimer),this._setStateTimer=setTimeout(d()((function*(){n._setStateTimer=null;let e=!1;for(const t of Object.keys(n._stateQueue)){const r=n._stateQueue[t];n.state[t]!==r&&(e=!0)}e&&(F(n,"updateState",i()(i()({},n.state),n._stateQueue)),Object.assign(n.state,n._stateQueue),L(n),ee(u(n._rootElement)),yield fe.nextLayout(),null==t||t(n.state,n.props))})),0)):null==t||t(this.state,this.props)}ready(e){}updatedProps(){}render(){return""}_unmountComponent(){if(!this._hasUnmount){if(this._hasUnmount=!0,Array.isArray(this._subComponents))for(const e of this._subComponents)e._unmountComponent();F(this,"destroy")}}getRootElement(){if(!Array.isArray(this._rootElement))return this._rootElement;throw new Error("You should'nt try getRootElement() in component with virtual root")}getRootElements(){return this._rootElement}getRootComponent(){let e=this;for(;e.parent;)e=e.parent;return e}getSubComponents(){return this._subComponents}getElementById(e){return this._elementMap[e]?this._elementMap[e]:null}getEventHandler(e){return this._eventHandler[e]}setStyle(e,t){var n=this;return d()((function*(){const r=n.getElementById(e),o=n._manualStyle;e&&t&&(r&&Object.assign(r.style,t),o[e]=o[e]||{},Object.assign(o[e],t)),yield Promise.resolve();const i=n.getRootComponent();yield i.requestLayout()}))()}requestLayout(){const e=Array.isArray(this._rootElement)?this._rootElement[0]:this._rootElement;return new Promise((t=>{this._setStyleTimer&&clearTimeout(this._setStyleTimer),this._setStyleTimer=setTimeout((()=>{this._setStyleTimer=null,ee(u(this._rootElement)),Promise.race([null==e?void 0:e.nextUpdate(),(0,c.Vs)(200)].filter((e=>e))).then((()=>t()))}),0)}))}_bindEvent(e,t,n){return this._eventHandler[e]=this._eventHandler[e]||{},this._eventHandler[e][t]=this._eventHandler[e][t]||new Set,this._eventHandler[e][t].add(n),n}_unbindEvent(e,t,n){var r,o;return!(null===(r=this._eventHandler[e])||void 0===r||null===(o=r[t])||void 0===o||!o.has(n))&&(this._eventHandler[e][t].delete(n),0===this._eventHandler[e][t].size&&delete this._eventHandler[e][t],0===Object.keys(this._eventHandler[e]).length&&delete this._eventHandler[e],!0)}onClick(e,t){return this._bindEvent(e,"click",t)}offClick(e,t){return this._unbindEvent(e,"click",t)}onReady(e,t){return this._bindEvent(e,"ready",t)}offReady(e,t){return this._unbindEvent(e,"ready",t)}onTouchstart(e,t){return this._bindEvent(e,"touchstart",t)}offTouchstart(e,t){return this._unbindEvent(e,"touchstart",t)}onTouchmove(e,t){return this._bindEvent(e,"touchmove",t)}offTouchmove(e,t){return this._unbindEvent(e,"touchmove",t)}onTouchend(e,t){return this._bindEvent(e,"touchend",t)}offTouchend(e,t){return this._unbindEvent(e,"touchend",t)}onTouchcancel(e,t){return this._bindEvent(e,"touchcancel",t)}offTouchcancel(e,t){return this._unbindEvent(e,"touchcancel",t)}onWaiting(e,t){return this._bindEvent(e,"waiting",t)}offWaiting(e,t){return this._unbindEvent(e,"waiting",t)}onPlay(e,t){return this._bindEvent(e,"play",t)}offPlay(e,t){return this._unbindEvent(e,"play",t)}onPause(e,t){return this._bindEvent(e,"pause",t)}offPause(e,t){return this._unbindEvent(e,"pause",t)}onEnded(e,t){return this._bindEvent(e,"ended",t)}offEnded(e,t){return this._unbindEvent(e,"ended",t)}onTimeUpdate(e,t){return this._bindEvent(e,"timeUpdate",t)}offTimeUpdate(e,t){return this._unbindEvent(e,"timeUpdate",t)}onError(e,t){return this._bindEvent(e,"error",t)}offError(e,t){return this._unbindEvent(e,"error",t)}onProgress(e,t){return this._bindEvent(e,"progress",t)}offProgress(e,t){return this._unbindEvent(e,"progress",t)}onFullScreenChange(e,t){return this._bindEvent(e,"fullScreenChange",t)}offFullScreenChange(e,t){return this._unbindEvent(e,"fullScreenChange",t)}}p.isComponent=!0,p.subComponents={};const h=e=>e;var f=n(19);let g;!function(e){e.waiting="waiting",e.play="play",e.pause="pause",e.ended="ended",e.timeUpdate="timeUpdate",e.error="error",e.progress="progress",e.fullScreenChange="fullScreenChange",e.loadedMetaData="loadedMetaData"}(g||(g={}));class _ extends p{render(){const{props:{children:e}}=this;return e}}_.isFragment=!0;const m="Fragment",y={view:r.G7,text:r.xv,image:r.Ee,video:r.nk},v=e=>e.name[0]>="A"&&e.name[0]<="Z",A=new WeakMap,b=(e,t)=>{const{referComponent:n}=t,r={children:t.children};let o="getSubComponentProps",i=[];if(e.getProps){const[t,...n]=e.getProps.split(":");o=t,i=n}Object.assign(r,F(n,o,t.name,...i)||{});for(const t of Object.keys(e)){const n=e[t];["getProps","children"].includes(t)||(r[t]=n)}return r.children=t.children,r},w=(e,t,n)=>{if(!n.isComponent)throw new Error(`class ${e.name} is not a component, please ensure extend BaseComponent`);return M(n,b(t,e),!1,e.referComponent)},C=(e,t=I(e))=>{const{referComponent:n}=e,{id:r}=t,o=(("string"==typeof t.class?t.class:"")||"").split(/\s+/).filter(Boolean),a=i()({},t);r&&(a.name=r),delete a.id,a.style=ue({classList:o,name:r,referComponent:n});const s=null!=a.bubbleEvent,c=new(0,y[e.name])(a);if(c.isBubbleEventSet=s,Object.assign(c,{classList:o,referComponent:n,key:t.key||null}),r&&n&&n.getEventHandler(r))for(const t of Object.keys(n.getEventHandler(r))){const o=n.getEventHandler(r)[t];if(t in g){if("video"===e.name)for(const e of o){const n=c[`on${t[0].toUpperCase()}${t.slice(1)}`];null==n||n.call(c,e)}}else for(const e of o)c.on(t,e)}return null!=r&&(h(n)._elementMap[r]=c),c},I=e=>{const t={};for(const n of Object.keys(e.attributes)){const r=e.attributes[n],o=(0,c.um)(n);t[o]=r,/\{\{.+\}\}/.test(r)||("true"===r?t[o]=!0:"false"===r?t[o]=!1:"id"===o?t.id=(0,c.um)(r):t[o]=r)}return t},E=e=>{const t=e.constructor.subComponents||[],n="function"==typeof t?t():t;return i()(i()({},n),{},{[m]:_})},S=e=>{if(Array.isArray(e)){const t=e.map((e=>S(e))),n={element:null,subComponents:[]};for(const{element:e,subComponents:r}of t){e&&(null===n.element&&(n.element=[]),Array.isArray(e)?n.element.push(...(0,f.xH)(e)):n.element.push(e));for(const e of r)n.subComponents.includes(e)||n.subComponents.push(e)}return n}if(!e)return{element:null,subComponents:[]};const t=E(e.referComponent);let n;const r=[],o=I(e);if(v(e)){if(!t[e.name])throw new Error(`component name ${e.name} does not exists`);const i=w(e,o,t[e.name]);if(n=i.getRootElements(),!n)return{element:null,subComponents:[]};r.push(i)}else{const t=C(e,o);e.children.forEach((e=>{const{element:n,subComponents:o}=S(e);if(n)if(r.push(...o),Array.isArray(n))for(const e of n)t.add(e);else t.add(n)})),n=t}return{element:n,subComponents:r}},T=(e,t)=>{const n=["autoInsert","autoplay","bubbleEvent","clickState","controls","enablePlayGesture","enableProgressGesture","eventType","height","hide","initialTime","live","loop","muted","obeyMuteSwitch","objectFit","parentId","playbackRate","poster","preLoad","scene","showCenterPlayBtn","src","underGameView","width","x","y","value"];let r=!1;for(const e of n)void 0===t[e]&&(t[e]=void 0);for(const o of Object.keys(t)){const i=t[o];n.includes(o)&&e[o]!==i&&(e[o]=i,r=!0)}return r},x=(e,t,n=null)=>{let r=n;if(e!==t){if(!r){if(!e||!e.parent)throw new Error("can not find element tree without parent");r=e.parent}if(e&&r.remove(e),t)if(Array.isArray(t))for(const e of t)r.add(e);else r.add(t)}},k=(e,t)=>{if(y[t.name]&&e)return e.constructor===y[t.name];if(null!=e&&e.isRootElementOfComponent&&e.referComponent){return e.referComponent.constructor.name===t.name}return!1},P=(e,t)=>{const n=I(t),r=t.referComponent,o=E(r),i=e&&k(e,t);if(!v(t)){if(!t.children||0===t.children.length)return e&&i?(T(e,n),e):C(t,n);if(e&&i)return T(e,n),O((e=>Object.keys(e.children).map((t=>e.children[t])))(e),t.children),e;const{element:o,subComponents:a}=S(t);return r.getSubComponents().push(...a),o}const a=null==e?void 0:e.referComponent,s=null==a?void 0:a.constructor;if(a&&s===o[t.name]){Object.assign(h(a).props,b(n,t));return L(a)}const c=r.getSubComponents().indexOf(a);c>-1&&r.getSubComponents().splice(c,1),a&&F(a,"destroy"),null==e||e.remove();return w(t,n,o[t.name]).getRootElements()},D=e=>e.reduce(((e,t)=>(t.name===m?e.push(...D(t.children)):e.push(t),e)),[]),O=(e,t)=>{const n=[],r={};for(const t of e)t.key?r[t.key]=t:n.push(t);for(const o of D(t)){const{key:t}=o;let i=null;if(t)r[t]&&(i=r[t],delete r[t]);else for(const e of Object.keys(n)){const t=n[+e];if(t&&k(t,o)){i=t,n.splice(Number(e),1);break}}i||(i=n.shift()||null),e.length&&e[0].parent&&x(i,P(i,o),e[0].parent)}const o=Object.keys(r).reduce(((e,t)=>(e.push(r[t]),e)),[]);for(const e of[...n,...o])null==e||e.remove()},N=(e,t)=>{Array.isArray(e)?e.forEach((e=>N(e,t))):(t(e),e.children.forEach((e=>N(e,t))))},R=(e,t)=>{N(e,(e=>{e.referComponent||(e.referComponent=t)}))},M=(e,t,n=!0,r=null)=>{const o=new e(t);o.parent=r;const i=o.render(),a="string"==typeof i?s()(i).root:i;R(a,o);const{element:c,subComponents:l}=S(a);return h(o)._subComponents=l,c&&(h(o)._rootElement=c,Array.isArray(c)?c.forEach((e=>{e.isRootElementOfComponent=!0})):c.isRootElementOfComponent=!0),F(o,"ready",c,l),n&&(c&&(Array.isArray(c)?c.forEach((e=>{fe.add(e),ee(e)})):(fe.add(c),ee(c))),A.set(e,o)),o},L=(e,t)=>{t&&Object.assign(h(e).props,t);const n=e.getRootElements(),r=e.render(),o="string"==typeof r?s()(r).root:r;return R(o,e),Array.isArray(n)&&Array.isArray(o)?O(n,o):Array.isArray(n)&&!Array.isArray(o)?O(n,[o]):!Array.isArray(n)&&Array.isArray(o)?O([n],o):Array.isArray(n)||Array.isArray(o)||x(n,P(n,o)),F(e,"updatedProps"),n},B=e=>{if(!h(e).isComponent)throw new Error("variable is not a component instance");const t=e.getRootElements();Array.isArray(t)?t.forEach((e=>fe.remove(e))):fe.remove(t),h(e)._unmountComponent(),A.delete(e.constructor)},F=(e,t,...n)=>"function"==typeof e[t]?e[t](...n):null;var W=n(9890),j=n(4643),U=n(1949);const V=["width","height"],G=(e="column",t)=>["row","column"].indexOf(e)===["width","height"].indexOf(t),$=(e,t)=>Math.max(e,t),H=(e,t)=>e+t,Z=e=>({width:(e.style.marginLeft||0)+(e.style.marginRight||0),height:(e.style.marginTop||0)+(e.style.marginBottom||0)}),Q=e=>({width:(e.style.paddingLeft||0)+(e.style.paddingRight||0),height:(e.style.paddingTop||0)+(e.style.paddingBottom||0)}),Y=(e,t,n)=>e&&"px"===e.slice(-2)?parseFloat(e.slice(0,-2))+n:parseFloat(e.slice(0,-1))/100*t+n,z=(e,t,n,r,o,i)=>{const a=e.parent,s=r[n],c=Q(e)[n];let l=t,d=null,u=!1;var p;if(!o&&i>0&&(null==l||i>l)&&(l=i),r.position&&"absolute"===r.position[1]&&null!=l&&(l+=i),s||null==l)s&&"percent"===s[0]&&null!=l?(d=l*s[1]-c,u=!0):s&&"digit"===s[0]&&(d=s[1]-c,u=!0);else if("auto"!==e.style[n])if("absolute"===(null===(p=r.position)||void 0===p?void 0:p[1])){let e=0,t=!1;for(const o of"width"===n?["left","right"]:["top","bottom"])null!=r[o]?"digit"===r[o][0]?e+=Number(r[o][1])||0:"percent"===r[o][0]&&(e+=(Number(r[o][1])||0)*l):t=!0;d=t?null:l-e}else o&&G(a.style.flexDirection,n)&&e.style.flex>0?d=null:((e=>(0,j.MJ)(e).some((e=>null!=e.style.flex&&e.style.flex>0)))(e)&&(u=!0),d=l-c);return null!=d&&(e.autoFitSize[n].size=d),u},q=e=>{const t=(0,j.ex)(e),n=Q(e);e.autoFitSize={width:{size:null,margin:0,padding:n.width},height:{size:null,margin:0,padding:n.height}};const o=e.parent,i=he(ue(e)),a={width:!1,height:!1},s={width:null,height:null};for(const n of V){const r=i[n];let s=t?"width"===n?W.S.screenWidth:W.S.screenHeight:o.autoFitSize[n].size;const c=t?0:o.autoFitSize[n].padding;!r&&t&&"height"===n&&(s=null),a[n]=z(e,s,n,i,!0,c)}K(e,i);const c=Q(e),l="wrap"===e.style.flexWrap,d=[];for(const t of(0,j.MJ)(e)){q(t);const n=Z(t);if("absolute"!==t.style.position)for(const r of V){const o=G(e.style.flexDirection,r);if(l){if(o){const e="width"===r?"height":"width";d.push([(t.autoFitSize[r].size||0)+t.autoFitSize[r].padding+n[r],(t.autoFitSize[e].size||0)+t.autoFitSize[e].padding+n[e]])}}else{const e=o?H:$;null==t.autoFitSize[r].size&&t.autoFitSize[r].padding<=0&&e===H&&(a[r]=!0),s[r]=e((t.autoFitSize[r].size||0)+t.autoFitSize[r].padding+n[r],s[r]||0)}}}if(l){let t=0,n=0,r=0,o=0;const i=G(e.style.flexDirection,"width")?"width":"height",c="width"===i?"height":"width";o=a[i]&&null!=e.style[i]?e.style[i]:d.reduce(((e,[t])=>e+t),0);for(const[e,i]of d)r=Math.max(r,i),e+t>o?(n+=r,r=i,t=e):t+=e;n+=r,s[i]=t,s[c]=n}e instanceof r.xv&&(null!=e.autoFitSize.height.size&&a.height||Object.assign(e.autoFitSize.height,{size:e.style.lineHeight||e.style.fontSize||0,padding:c.height}),null!=e.autoFitSize.width.size&&a.width||Object.assign(e.autoFitSize.width,{size:U.Z.getTextWidth(e.value,e.style.fontSize||14)+3,padding:c.width}));for(const t of V)a[t]||null===s[t]?c[t]>0&&(e.autoFitSize[t].padding=c[t]):Object.assign(e.autoFitSize[t],{size:null!=s[t]?s[t]:null,padding:c[t]})},J=e=>{const t=(0,j.MJ)(e);for(const r of V){const o=G(e.style.flexDirection,r);let{size:i}=e.autoFitSize[r];const{padding:a}=e.autoFitSize[r];if(null==i&&!a)continue;i=i||0;let s=0,c=0;for(const e of t){const{size:t,margin:n,padding:o}=e.autoFitSize[r];"absolute"!==e.style.position&&(null!=t?s+=t+o+n:e.style.flex&&e.style.flex>0&&(c+=Number(e.style.flex)))}for(const l of t){var n;const t=he(ue(l));let d=null;o?d=l.style.flex?(i-s)/$(c,1)*l.style.flex:null:e.style.alignItems&&"stretch"!==e.style.alignItems||(d=i),null==l.autoFitSize[r].size&&d?z(l,d,r,t,!1,a):"absolute"===(null===(n=t.position)||void 0===n?void 0:n[1])&&z(l,i,r,t,!1,a)}}for(const e of t)J(e);for(const t of V){const{size:n,padding:r}=e.autoFitSize[t];null!=n&&e.style[t]!==n+r&&(e.style[t]=n+r)}e instanceof r.xv&&null==e.style.lineHeight&&(e.style.lineHeight=e.style.height)},K=(e,t)=>{const n=e.autoFitSize.width.size,r=e.autoFitSize.height.size;for(const o of Object.keys(t)){const i=t[o];"percent"===i[0]?"horizontal"===ne[o]&&null!=n?e.style[o]=i[1]*n:"vertical"===ne[o]&&null!=r&&(e.style[o]=i[1]*r):"normal"===i[0]&&(e.style[o]=i[1])}t.transform&&"transform"===t.transform[0]&&(e.style.left=Y(t.transform[1][0],n||0,e.style.left||0),e.style.top=Y(t.transform[1][1],r||0,e.style.top||0)),!e.style.lineHeight&&e.parent&&e.parent.style.lineHeight&&(e.style.lineHeight=e.parent.style.lineHeight)},X=e=>{const t=[["width","left"],["height","top"]];for(const r of(0,j.MJ)(e)){X(r);for(const[o,i]of t){var n;if((r.style.position||null!==(n=r.expandAbsoluteSize)&&void 0!==n&&n.has(o))&&"hidden"!==e.style.overflow){const t=(r.style[o]||0)+(r.style[i]||0);t>(e.style[o]||0)&&(e.style[o]=t,e.expandAbsoluteSize=e.expandAbsoluteSize||new Set,e.expandAbsoluteSize.add(o))}}}},ee=e=>{q(e),J(e),X(e)},te=e=>Number(e).toString()===e,ne={left:"horizontal",right:"horizontal",marginLeft:"horizontal",marginRight:"horizontal",paddingLeft:"horizontal",paddingRight:"horizontal",marginTop:"horizontal",marginBottom:"horizontal",paddingTop:"horizontal",paddingBottom:"horizonta",borderRadius:"horizontal",top:"vertical",bottom:"vertical"},re=/^\s*#[0-9a-fA-F]{3}\s*$/,oe=/^\s*#[0-9a-fA-F]{3,6}\s*$/,ie=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,ae=/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/,se=/px$/,ce=e=>"number"==typeof e?e:se.test(e)?Number(e.replace(se,""))||0:te(e)?parseInt(e,10):e,le=e=>{if("string"==typeof e&&re.test(e)){const[t,n,r]=e.slice(1);return`#${t}${t}${n}${n}${r}${r}`}return e},de=(e={})=>{const t={};for(const n of Object.keys(e)){const r=e[n];if(["padding","margin"].includes(n)){const e=Array.isArray(r)?r:(null==r?"":r).toString().split(/\s+/);let o=null,i=null,a=null,s=null;switch(e.length){case 0:continue;case 1:[o]=e,[i]=e,[a]=e,[s]=e;break;case 2:[o,i]=e,[a,s]=e;break;case 3:[o,i,a]=e,s=i;break;case 4:[o,s,a,i]=e;break;default:continue}Object.assign(t,{[`${n}Top`]:ce(o),[`${n}Left`]:ce(i),[`${n}Bottom`]:ce(a),[`${n}Right`]:ce(s)})}else if("border"===n){const e=(r||"").toString().split(/\s+/);switch(e.length){case 0:continue;case 1:t.borderColor=le(e[0]);continue;case 2:t.borderWidth=ce(e[0]),t.borderColor=le(e[1]);continue;case 3:t.borderWidth=ce(e[0]),t.borderColor=le(e[2]);continue;default:continue}}else if("background"===n&&oe.test(e[n]))t.backgroundColor=le(e[n]);else if("background"===n&&(ie.test(e[n])||ae.test(e[n])))t.backgroundColor=e[n];else if("background"===n&&e[n].includes("linear-gradient"))t.backgroundColor=e[n];else if("color"===n&&"string"==typeof r&&ae.test(r)){const[n,o,i,a]=ae.exec(r).slice(1,5).map((e=>Number(e))),s=e=>e.toString(16);t.color=`#${s(n)}${s(o)}${s(i)}`,null==e.opacity&&(t.opacity=Number(a))}else if("display"===n&&"none"===e[n])t.hidden=!0;else if("rotate"===n){const r=e[n];t.rotate="string"==typeof r?Number(r.replace("deg",""))||0:r}else t[n]=le(ce(e[n]))}return t},ue=e=>{const t=h(e.referComponent);if(!t)return Object.assign({},e.style||{});const n={},r=t.style||{};for(const t of e.classList||[])Object.assign(n,de(r[t])),Object.assign(n,de(r[`.${t}`]));return r[e.name]&&Object.assign(n,de(r[e.name])),e.name&&t._manualStyle[e.name]&&Object.assign(n,de(t._manualStyle[e.name])),n},pe={percent:/^-?[1-9]\d*(\.\d+)?%$/,translate:/translate\(\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*,\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*\)/},he=e=>{const t={};for(const n of Object.keys(e)){const r=e[n];if(null==r)continue;const o=r.toString().trim();if((ne[n]||["width","height"].includes(n))&&pe.percent.test(o)){const e=parseFloat(o.slice(0,-1))/100;t[n]=["percent",e]}else if(te(o))t[n]=["digit",Number(o)];else if("transform"===n&&o.includes("translate")){const e=pe.translate.exec(o);e&&(t[n]=["transform",e.slice(1,3)])}else t[n]="string"==typeof r?["normal",o]:["normal",r]}return t},fe=r.uo},9890:(e,t,n)=>{"use strict";n.d(t,{S:()=>c,g:()=>l});var r=n(665),o=n(1095),i=n(4643),a=n(3170);let s=!1;const c={},l=()=>s?Promise.resolve(c):new Promise((e=>{r.Z.onReady((()=>{s=!0,c.deviceOrientation=(0,i._t)();const t=(0,a.Ew)();c.screenWidth=t.screenWidth||0,c.screenHeight=t.screenHeight||0,c.isWaGame=(0,o.aI)(),e(c)}))}))},19:(e,t,n)=>{"use strict";n.d(t,{ei:()=>r,Ee:()=>i,Zw:()=>a,U2:()=>s,xH:()=>c,Xh:()=>l});const r=(e,t)=>t.reduce(((t,n)=>(t[n]=e[n],t)),{}),o=e=>e&&"object"==typeof e&&!Array.isArray(e);function i(e,...t){if(!t.length)return e;const n=t.shift();if(o(e)&&o(n))for(const t of Object.keys(n))o(n[t])?(e[t]||Object.assign(e,{[t]:{}}),i(e[t],n[t])):Object.assign(e,{[t]:n[t]});return i(e,...t)}const a=e=>{const t=new Set;let n=e;for(;n;){for(const e of Object.getOwnPropertyNames(n))t.add(e);n=Object.getPrototypeOf(n)}return[...t]},s=(e,t,n)=>{const r="string"==typeof t?t.split("."):t;let o=e,i=0;for(;o&&i<r.length;)o=o[r[i]],i+=1;return o||n},c=e=>e.reduce(((e,t)=>(Array.isArray(t)?e.push(...c(t)):e.push(t),e)),[]),l=e=>JSON.parse(JSON.stringify(e))},4643:(e,t,n)=>{"use strict";n.d(t,{a3:()=>g,Xh:()=>r.Xh,U2:()=>r.U2,Ze:()=>l,_t:()=>y,Zw:()=>r.Zw,Wz:()=>f,MJ:()=>s,gC:()=>w,Ie:()=>b,ex:()=>i,Ee:()=>r.Ee,ei:()=>r.ei,zJ:()=>c});var r=n(19),o=n(8401);const i=e=>{var t;return e.parent===o.Ar||!(null!==(t=e.parent)&&void 0!==t&&t.referComponent)},a=e=>Object.keys(e.children).map((t=>e.children[t])),s=e=>a(e).filter((e=>!0!==(null==e?void 0:e.style.hidden))),c=(e,t,n="downward")=>{"downward"===n&&t(e);for(const r of a(e))c(r,t,n);"upward"===n&&t(e)},l=(e,t)=>{for(const{path:n,value:o,condition:i=!0}of t){if(!i)continue;const t=o||(n?(0,r.U2)(e,n):"");if(t)return t}return null},d=63,u=e=>{const t=e.toString(16).toUpperCase();return t.length<2?`%0${t}`:`%${t}`},p=e=>{if(!e)return"";const t=String(e),n=[],r=/[ \r\n!*"'();:@&=+$,/?%#[\]<>{}|`^\\\u0080-\uffff]/;for(const e of t)if(e.match(r)){const t=e.codePointAt?e.codePointAt(0):e.charCodeAt(0);t<128?n.push(u(t)):t<2048?n.push([u(192+(t>>6)),u(128+(t&d))].join("")):t<65536?n.push([u(224+(t>>12)),u(128+(t>>6&d)),u(128+(t&d))].join("")):t<2097152&&n.push([u(240+(t>>18)),u(128+(t>>12&d)),u(128+(t>>6&d)),u(128+(t&d))].join(""))}else n.push(e);return n.join("")},h=e=>{if(!e)return"";const t=e=>{if(!e)throw new Error("invalid text")},n=e=>String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(e),r=e.replace(/%[a-fA-F0-9]{2}/gi,(e=>String.fromCharCode(parseInt(e.replace("%",""),16))));let o=0,i="";for(;o<r.length;){const e=r.charCodeAt(o);if(e<128)i+=n(e),o+=1;else if(e>=192&&e<224){t(o+1<r.length);i+=n((31&e)<<6|r.charCodeAt(o+1)&d),o+=2}else if(e<240){t(o+2<r.length);const a=r.charCodeAt(o+1),s=r.charCodeAt(o+2);i+=n((15&e)<<12|(a&d)<<6|s&d),o+=3}else{t(o+3<r.length);const a=r.charCodeAt(o+1),s=r.charCodeAt(o+2),c=r.charCodeAt(o+3);i+=n([(7&e)<<18,(a&d)<<12,(s&d)<<6,c&d].reduce(((e,t)=>e|t),0)),o+=4}}return i},f=e=>{const t={};if(e.indexOf("?")>-1){const n=e.indexOf("?")+1;let r=e.substring(n);r.indexOf("#")>-1&&(r=r.substring(0,r.indexOf("#")));const o=r.split("&");for(const e of o){const[n,r]=e.split("=");t[n]=h(r)}}return t},g=(e,t)=>{if(!e)return"";if(!t)return e;const n=e.split("#"),r=n[0].indexOf("?")>-1?"&":"?";let o="";const i=Object.keys(t);if(i.length>0){for(const e of i)o=o.concat(`${e}=${p(t[e])}&`);return o.length>0&&(o=o.substring(0,o.length-1)),n[0]+r+o+(n[1]?`#${n[1]}`:"")}return e};var _=n(3170),m=n(665);const y=()=>{const e=(0,_.Ew)();return e.screenWidth&&e.screenHeight?e.screenWidth>e.screenHeight?"landscape":"portrait":m.Z.deviceOrientation&&/^landscape/.test(m.Z.deviceOrientation)?"landscape":m.Z.deviceOrientation||"portrait"};var v=n(9237);const A=e=>e===v.fr.LIVE,b=(e,t)=>A(e)&&t===v.EM.ROOM,w=(e,t)=>A(e)&&t===v.EM.RESERVATION},3866:(e,t,n)=>{"use strict";let r,o,i,a,s,c,l,d,u;n.d(t,{H:()=>r,_d:()=>o,Y8:()=>i,Xw:()=>a,XP:()=>s,nf:()=>c,H_:()=>l,Zw:()=>d,dA:()=>u}),function(e){e.TAP="tap",e.ANIMATIONEND="animationend"}(r||(r={})),function(e){e.APPENTERFOREGROUND="appEnterForeground",e.APPENTERBACKGROUND="appEnterBackground",e.CONTAINERTAP="containerTap",e.ADBUTTONTAP="adButtonTap",e.VIEWABLEEXPOSURE="viewableExposure",e.EXPOSURE="exposure",e.SHOWHALF="showhalf",e.HIDEHALF="hidehalf",e.SPLASHADFIRSTRENDER="splashAdFirstRender",e.SPLASHADMENUVIEW="splashAdMenuView"}(o||(o={})),function(e){e.BUTTONTAP="buttonTap"}(i||(i={})),function(e){e.RELATIONFETCHED="relationFetched"}(a||(a={})),function(e){e.VIDEOENDED="videoEnded",e.VIDEOPAUSE="videoPause",e.VIDEOPLAY="videoPlay",e.VIDEOTIMEUPDATE="videoTimeUpdate",e.MUTEDCHANGE="mutedChange",e.VIDEOLOADEDMETADATA="videoLoadedMetaData"}(s||(s={})),function(e){e.FEEDBACKBTNTAP="feedbackBtnTap",e.TAGTAP="tagTap",e.DISLIKETAP="dislikeTap",e.DISLIKEREASONTAP="dislikeReasonTap"}(c||(c={})),function(e){e.REPLAY="replay",e.SHOW="show",e.HIDE="hide",e.VIDEODISLIKE="videodislike"}(l||(l={})),function(e){e.SHOWCHANGE="showChange",e.UNITTAP="unitTap"}(d||(d={})),function(e){e.REWARDEDVIDEOPLAY="rewardedVideoPlay",e.REWARDEDVIDEOEND="rewardedVideoEnd",e.REWARDEDVIDEOTIMEUPDATE="rewardedVideoTimeUpdate",e.REWARDEDVIDEOSHOWFLOORINGPAGE="rewardedVideoShowFlooringPage",e.REWARDEDVIDEOHANDLEDYNAMICDONE="rewardedVideoHandleDynamicDone"}(u||(u={}))},780:(e,t,n)=>{"use strict";let r;n.d(t,{A:()=>r}),function(e){e.SHOWFEEDBACK="showFeedback",e.ADSHOWHALF="adShowHalf",e.ADHIDEHALF="adHideHalf",e.TRIGGEREVENT="triggerEvent",e.REPORTVIDEOPLAY="reportVideoPlay",e.APPENTERBACKGROUND="appEnterBackground",e.ADVIDEOPAUSE="adVideoPause",e.ADVIDEOPLAY="adVideoPlay",e.FEEDBACKBTNTAP="feedbackBtnTap",e.FEEDBACKREPORT="feedbackReport",e.BTNTAP="btnTap",e.CHANGEADBTNTEXT="changedAdBtnText",e.ENDPAGEINIT="endPageInit",e.SHOWENDPAGE="showEndPage",e.REPORTENDPAGE="reportEndPage",e.APPENTERFOREGROUND="appEnterForeground",e.ENDPAGEHIDE="endPageHide",e.ENDPAGESHOW="endPageShow",e.REPORTMMDATA="reportMMData",e.HIDEAD="hideAd",e.REPORTTIMEPOINT="reportTimePoint",e.CHANGEMULTISHOW="changeMultiShow",e.CHECKEXPOSURE="checkExposure",e.LANDAD="landAd",e.CHANGECOUNTDOWN="changeCountdown",e.SPLASHSKIPAD="splashSkipAd",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(r||(r={}))},637:(e,t,n)=>{"use strict";let r;n.d(t,{aO:()=>r,Y8:()=>o.Y8,Dx:()=>d,Zw:()=>o.Zw,Af:()=>_,H:()=>o.H,A$:()=>i.A,JF:()=>v,H_:()=>o.H_,Bq:()=>y,nf:()=>o.nf,Eo:()=>p,bk:()=>g,IN:()=>m.$g,v5:()=>c,BB:()=>s,dA:()=>o.dA,_d:()=>o._d,Xw:()=>o.Xw,qW:()=>l,XP:()=>o.XP,jn:()=>u,fc:()=>A}),function(e){e.HIDEAD="hideAd",e.SETSTYLE="setStyle",e.REPORTIDKEY="reportIdKey",e.TRIGGEREVENT="triggerEvent",e.SETEXPRVARS="setExprVar",e.VIDEOTOGGLEMUTED="videoToggleMuted",e.VIDEOPLAY="videoPlay",e.VIDEOPAUSE="videoPause",e.VIDEOSTOP="videoStop",e.BUTTONSETTEXT="buttonSetText",e.RELOADAD="reloadAd",e.REPORTMMDATA="reportMMData",e.ENDPAGEHIDE="endPageHide",e.IMAGESETSRC="imageSetSrc",e.TEXTSETTEXT="textSetText",e.ANIMATE="animate",e.TRIGGERBTNCLICK="triggerBtnClick",e.CHANGEMULTISHOW="changeMultiShow",e.LANDAD="landAd",e.SPLASHSKIPAD="splashSkipAd",e.ADDCHILDREN="addChildren",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(r||(r={}));var o=n(3866),i=n(780);let a,s,c,l,d,u,p,h,f,g,_;!function(e){e[e.COMMON=1]="COMMON",e[e.FULLSCREEN=2]="FULLSCREEN"}(a||(a={})),function(e){e[e.COMMON=1]="COMMON",e[e.ROW=2]="ROW",e[e.COLUMN=3]="COLUMN",e[e.PROPORTION=4]="PROPORTION"}(s||(s={})),function(e){e[e.COMMON=1]="COMMON",e[e.ICON=2]="ICON",e[e.AD=3]="AD"}(c||(c={})),function(e){e[e.COMMON=1]="COMMON",e[e.NICKNAME=2]="NICKNAME",e[e.DESC=3]="DESC",e[e.RELATION=4]="RELATION"}(l||(l={})),function(e){e[e.COMMON=1]="COMMON",e[e.LOGICCOMMON=2]="LOGICCOMMON"}(d||(d={})),function(e){e[e.COMMON=1]="COMMON",e[e.AD=2]="AD"}(u||(u={})),function(e){e[e.COMMON=1]="COMMON",e[e.SIMPLE=2]="SIMPLE"}(p||(p={})),function(e){e[e.COMMON=1]="COMMON"}(h||(h={})),function(e){e[e.COMMON=1]="COMMON"}(f||(f={})),function(e){e[e.NONE=0]="NONE",e[e.COMMON=1]="COMMON",e[e.ADS=2]="ADS"}(g||(g={})),function(e){e[e.NONE=0]="NONE",e[e.ROWLOOP=1]="ROWLOOP",e[e.COLUMNLOOP=2]="COLUMNLOOP"}(_||(_={}));var m=n(8579);let y,v;!function(e){e[e.ERR_RENDER=2001]="ERR_RENDER",e[e.ERR_TPL_NONE=2002]="ERR_TPL_NONE",e[e.ERR_TPL_PARSE=2003]="ERR_TPL_PARSE",e[e.ERR_SHOW_FAILED1=2004]="ERR_SHOW_FAILED1",e[e.ERR_SHOW_FAILED2=2005]="ERR_SHOW_FAILED2"}(y||(y={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ING=1]="ING",e[e.PAUSE=2]="PAUSE",e[e.SUCCESS=3]="SUCCESS",e[e.INSTALLED=4]="INSTALLED"}(v||(v={}));const A=["left","top","right","bottom","width","height","maxWidth","maxHeight","minWidth","minHeight","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","fontSize","lineHeight","borderRadius"]},6714:(e,t,n)=>{"use strict";n.d(t,{zt:()=>s,zi:()=>c});var r=n(9237),o=n(5260),i=n(8476);const a=e=>{const t=/(\d+)(?:\.(\d+))?(?:\.(\d+))?(?:\.(\d+))?/.exec(e);return t?t.slice(1).filter((e=>null!=e)).join("."):null},s=function(e){var t,n;const s=c(e),l="portrait"===i.S3.deviceOrientation,d=e.crt_size===r.W.CRT_SIZE_REWARD_VEDIO916;if(i.S3.isAndroid){var u,p;const t=a((null==e||null===(u=e.condition)||void 0===u?void 0:u.widget_gray_rewrad_use_gauss_blur_android_system_version)||""),n=a((null==e||null===(p=e.condition)||void 0===p?void 0:p.widget_gray_rewrad_use_gauss_blur_android_wechat_version)||""),r=a(i.S3.systemVersion),s=a(i.S3.wechatVersion);if(t&&r&&(0,o.yC)(r,t)<0)return!1;if(n&&s&&(0,o.yC)(s,n)<0)return!1}return Boolean((null==e||null===(t=e.condition)||void 0===t?void 0:t.widget_gray_reward_use_gauss_blur)&&(null==e||null===(n=e.gaussVideo)||void 0===n?void 0:n.src)&&l!==d&&[r.W.CRT_SIZE_REWARD_VEDIO169,r.W.CRT_SIZE_REWARD_VEDIO916].includes(e.crt_size)&&(s||l))},c=function(e){const{flooringPage:t}=e,n="portrait"===i.S3.deviceOrientation,o=[r.W.CRT_SIZE_REWARD_VEDIO916,r.W.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size);return Boolean(n!==o&&!i.S3.isIPad&&[r.W.CRT_SIZE_REWARD_VEDIO169,r.W.CRT_SIZE_REWARD_VEDIO916,r.W.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size)&&![2,3,4].includes(null==t?void 0:t.landpage_type))}},1093:(e,t,n)=>{"use strict";n.d(t,{yx:()=>f,dz:()=>g,p4:()=>_});var r=n(1503),o=n.n(r),i=n(2582),a=n(665),s=n(9045);let c="",l="";let d="{}",u="",p="",h="{}";function f(e){c?e&&e(c):i.wZ&&a.Z.clientVersion<654315827?(0,s.IN)("getOAID",{success(t){/:ok/.test(t.errMsg)?(c=t.result||"",e&&e(c)):e&&e("")},fail(){e&&e("")}}):e&&e("")}function g(e=""){return new Promise(((t,n)=>{i.wZ&&a.Z.clientVersion>=654315827||i.cj&&a.Z.clientVersion>=385879808?(0,s.IN)("getDeviceInfo",{waidPkg:e,success(e){c=e.oaid||"",l=e.imei||"",p=e.waid||"",u=e.ua||"",h=e.devIdInfo||"{}";try{d=JSON.stringify(o()(o()({},JSON.parse(h)),u?{ua:u}:{}))}catch(e){n(e)}t({oaid:c,imei:l,commonid:d,waid:p})},fail(e){n(e)}}):t({oaid:c,imei:l,commonid:d,waid:p})}))}function _(e=""){return new Promise(((t,n)=>{let r="",o="";i.wZ&&a.Z.clientVersion>=654316032?(0,s.IN)("getDeviceInfo",{waidPkg:e,success(e){r=e.waid||"",o=e.imei||"",t({waid:r,imei:o})},fail(e){n(e)}}):t({waid:r,imei:o})}))}},5373:(e,t,n)=>{"use strict";n.d(t,{wA:()=>l,Wj:()=>a,bn:()=>c,S1:()=>d,Ue:()=>s});var r=n(8665),o=n(2241);const i=new WeakMap,a=e=>i.get(e),s=function(e){const t=a(this),n={view:r.G7,text:r.xv,image:r.Ee,video:r.nk,"image-previewer":r.Vr}[e.name];let i="";e.attributes.id?i=(0,o.um)(e.attributes.id):wxNativeConsole.error(`${e.name} 缺少id`);const c=Object.keys(e.attributes).reduce(((n,r)=>{const a=e.attributes[r],s=(0,o.um)(r);return"id"===r?(n.style=Object.assign(n.style||{},t.style[i]),n):"class"===r?(n.style=a.split(/\s+/).reduce(((e,n)=>Object.assign(e,t.style[n])),n.style||{}),n):(/\{\{.+\}\}/.test(a)||(n[s]=""===a||"true"===a||"false"!==a&&a),n)}),{});c.name=i;const l=new n(c);return t[i]=l,e.children.forEach((e=>{const t=s.call(this,e);l.add(t)})),l},c=e=>{i.delete(e)};class l{constructor(){i.set(this,{})}}const d=function(e,t,n){const r=a(this);r.xom=e,r.style=t,r.state=n,s.call(this,e)}},9974:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8159);class o{constructor(){this.emitter=new r.Z({maxListeners:2e3}),this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap}emit(e,t){this.emitter.emit(e,t)}on(e,t){if(t&&"function"==typeof t){const n=__errorTracer__.surroundThirdByTryCatch(t,`at ${e} callback function`);this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}off(e,t){if(t&&"function"==typeof t){const n=this.callbackMap.get(t);"function"==typeof n&&(this.emitter.off(e,n),this.callbackMap.delete(t),this.originalCallbackMap.delete(n))}else this.emitter.listeners(e).forEach((e=>{const t=this.originalCallbackMap.get(e);this.callbackMap.delete(t),this.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}}},1949:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});const r={0:5.5615234375,1:5.5615234375,2:5.5615234375,3:5.5615234375,4:5.5615234375,5:5.5615234375,6:5.5615234375,7:5.5615234375,8:5.5615234375,9:5.5615234375,"%":8.8916015625,"(":3.330078125,")":3.330078125,"-":3.330078125,".":2.7783203125,"/":2.7783203125,A:6.669921875,B:6.669921875,C:7.2216796875,D:7.2216796875,E:6.669921875,F:6.1083984375,G:7.7783203125,H:7.2216796875,I:2.7783203125,J:5,K:6.669921875,L:5.5615234375,M:8.330078125,N:7.2216796875,O:7.7783203125,P:6.669921875,Q:7.7783203125,R:7.2216796875,S:6.669921875,T:6.1083984375,U:7.2216796875,V:6.669921875,W:9.4384765625,X:6.669921875,Y:6.669921875,Z:6.1083984375,a:5.5615234375,b:5.5615234375,c:5,d:5.5615234375,e:5.5615234375,f:2.7783203125,g:5.5615234375,h:5.5615234375,i:2.2216796875,j:2.2216796875,k:5,l:2.2216796875,m:8.330078125,n:5.5615234375,o:5.5615234375,p:5.5615234375,q:5.5615234375,r:3.330078125,s:5,t:2.7783203125,u:5.5615234375,v:5,w:7.2216796875,x:5,y:5,z:5,"|":2.59765625};var o=n(2582),i=n(1095),a=n(6962);let s=r;let c=null;const l=()=>{if(c)return c;if((0,i.aI)()){const e=new NativeGlobal.Canvas;e.width=1,e.height=1,c=e.getContext("2d")}else c=(0,a.createCanvasContext)();return c};const d=new class{constructor(){}getCharWidth(e,t){let n=0;return n=s[e]?s[e]:10,n*t/10}limitString(e,t){return e&&e.length>t?e.substring(0,t)+"...":e}getTextWidth(e,t){if(o.wZ)return this.getTextWidthInAndroid(e,t);const n=l();return t&&(n.font=`${t}px PingFangSC-Regular, SF Pro Display, SF Pro Text`),Math.ceil(n.measureText(e).width||0)+1}getTextWidthInAndroid(e,t){e=(e=String(e)).split("");let n=0;return e.forEach((e=>{let r=this.getCharWidth(e,t);n+=r})),n}getMaxWordLength(e,t,n,r=!0){e=(e=String(e)).split("");let o=0,i=0,a=0;r&&(a=this.getTextWidth("...",t),n-=a);for(let r=0;r<e.length;r++){let a=e[r],s=this.getCharWidth(a,t);if(o+s>n)break;i++,o+=s}return i}textMetrics(e,t){const{fontSize:n,maxWidth:r,maxLines:o=1}=t;let i=[],a=0,s=e.substring(0,e.length);for(;a<o;){let e=this.getMaxWordLength(s,n,r,!(a!==o-1)),t=a===o-1?this.limitString(s,e):s.substring(0,e);t&&i.push({text:t,width:this.getTextWidth(t,n)}),a++,s=s.substring(e,s.length)}return i}}},6422:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=function(){var e,t="inherit",n="row",r="row-reverse",o="column",i="column-reverse",a="flex-start",s="center",c="flex-start",l="center",d="flex-end",u="stretch",p="relative",h="absolute",f={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},g={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},_={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},m={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function y(e){return void 0===e}function v(e){return e===n||e===r}function A(e,t){if(void 0!==e.style.marginStart&&v(t))return e.style.marginStart;var n=null;switch(t){case"row":n=e.style.marginLeft;break;case"row-reverse":n=e.style.marginRight;break;case"column":n=e.style.marginTop;break;case"column-reverse":n=e.style.marginBottom}return void 0!==n?n:void 0!==e.style.margin?e.style.margin:0}function b(e,t){if(void 0!==e.style.marginEnd&&v(t))return e.style.marginEnd;var n=null;switch(t){case"row":n=e.style.marginRight;break;case"row-reverse":n=e.style.marginLeft;break;case"column":n=e.style.marginBottom;break;case"column-reverse":n=e.style.marginTop}return null!=n?n:void 0!==e.style.margin?e.style.margin:0}function w(e,t){if(void 0!==e.style.borderStartWidth&&e.style.borderStartWidth>=0&&v(t))return e.style.borderStartWidth;var n=null;switch(t){case"row":n=e.style.borderLeftWidth;break;case"row-reverse":n=e.style.borderRightWidth;break;case"column":n=e.style.borderTopWidth;break;case"column-reverse":n=e.style.borderBottomWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function C(e,t){if(void 0!==e.style.borderEndWidth&&e.style.borderEndWidth>=0&&v(t))return e.style.borderEndWidth;var n=null;switch(t){case"row":n=e.style.borderRightWidth;break;case"row-reverse":n=e.style.borderLeftWidth;break;case"column":n=e.style.borderBottomWidth;break;case"column-reverse":n=e.style.borderTopWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function I(e,t){return function(e,t){if(void 0!==e.style.paddingStart&&e.style.paddingStart>=0&&v(t))return e.style.paddingStart;var n=null;switch(t){case"row":n=e.style.paddingLeft;break;case"row-reverse":n=e.style.paddingRight;break;case"column":n=e.style.paddingTop;break;case"column-reverse":n=e.style.paddingBottom}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+w(e,t)}function E(e,t){return function(e,t){if(void 0!==e.style.paddingEnd&&e.style.paddingEnd>=0&&v(t))return e.style.paddingEnd;var n=null;switch(t){case"row":n=e.style.paddingRight;break;case"row-reverse":n=e.style.paddingLeft;break;case"column":n=e.style.paddingBottom;break;case"column-reverse":n=e.style.paddingTop}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+C(e,t)}function S(e,t){return w(e,t)+C(e,t)}function T(e,t){return A(e,t)+b(e,t)}function x(e,t){return I(e,t)+E(e,t)}function k(e,t){return t.style.alignSelf?t.style.alignSelf:e.style.alignItems?e.style.alignItems:"stretch"}function P(e,t){if("rtl"===t){if(e===n)return r;if(e===r)return n}return e}function D(e,t){return function(e){return e===o||e===i}(e)?P(n,t):o}function O(e){return e.style.position?e.style.position:"relative"}function N(e){return O(e)===p&&e.style.flex>0}function R(e,t){return e.layout[m[t]]+T(e,t)}function M(e,t){return void 0!==e.style[m[t]]&&e.style[m[t]]>=0}function L(e,t){return void 0!==e.style[t]}function B(e,t){return void 0!==e.style[t]?e.style[t]:0}function F(e,t,n){var r={row:e.style.minWidth,"row-reverse":e.style.minWidth,column:e.style.minHeight,"column-reverse":e.style.minHeight}[t],o={row:e.style.maxWidth,"row-reverse":e.style.maxWidth,column:e.style.maxHeight,"column-reverse":e.style.maxHeight}[t],i=n;return void 0!==o&&o>=0&&i>o&&(i=o),void 0!==r&&r>=0&&i<r&&(i=r),i}function W(e,t){return e>t?e:t}function j(e,t){void 0===e.layout[m[t]]&&M(e,t)&&(e.layout[m[t]]=W(F(e,t,e.style[m[t]]),x(e,t)))}function U(e,t,n){t.layout[g[n]]=e.layout[m[n]]-t.layout[m[n]]-t.layout[_[n]]}function V(e,t){return void 0!==e.style[f[t]]?B(e,f[t]):-B(e,g[t])}function G(C,G,H){var Z=function(e,n){var r;return(r=e.style.direction?e.style.direction:t)===t&&(r=void 0===n?"ltr":n),r}(C,H),Q=P(function(e){return e.style.flexDirection?e.style.flexDirection:o}(C),Z),Y=D(Q,Z),z=P(n,Z);j(C,Q),j(C,Y),C.layout.direction=Z,C.layout[f[Q]]+=A(C,Q)+V(C,Q),C.layout[g[Q]]+=b(C,Q)+V(C,Q),C.layout[f[Y]]+=A(C,Y)+V(C,Y),C.layout[g[Y]]+=b(C,Y)+V(C,Y);var q=C.children.length,J=x(C,z);if(function(e){return void 0!==e.style.measure}(C)){var K=!y(C.layout[m[z]]),X=e;X=M(C,z)?C.style.width:K?C.layout[m[z]]:G-T(C,z),X-=J;var ee=!M(C,z)&&!K,te=!M(C,o)&&y(C.layout[m.column]);if(ee||te){var ne=C.style.measure(X);ee&&(C.layout.width=ne.width+J),te&&(C.layout.height=ne.height+x(C,o))}if(0===q)return}var re,oe,ie,ae,se=function(e){return"wrap"===e.style.flexWrap}(C),ce=function(e){return e.style.justifyContent?e.style.justifyContent:"flex-start"}(C),le=I(C,Q),de=I(C,Y),ue=x(C,Q),pe=x(C,Y),he=!y(C.layout[m[Q]]),fe=!y(C.layout[m[Y]]),ge=v(Q),_e=null,me=null,ye=e;he&&(ye=C.layout[m[Q]]-ue);for(var ve=0,Ae=0,be=0,we=0,Ce=0,Ie=0;Ae<q;){var Ee,Se=0,Te=0,xe=0,ke=0,Pe=he&&ce===a||!he&&ce!==s,De=Pe?q:ve,Oe=!0,Ne=q,Re=null,Me=null,Le=le,Be=0;for(re=ve;re<q;++re){if((ie=C.children[re]).lineIndex=Ie,ie.nextAbsoluteChild=null,ie.nextFlexChild=null,(Ze=k(C,ie))===u&&O(ie)===p&&fe&&!M(ie,Y))ie.layout[m[Y]]=W(F(ie,Y,C.layout[m[Y]]-pe-T(ie,Y)),x(ie,Y));else if(O(ie)===h)for(null===_e&&(_e=ie),null!==me&&(me.nextAbsoluteChild=ie),me=ie,oe=0;oe<2;oe++)ae=0!==oe?n:o,!y(C.layout[m[ae]])&&!M(ie,ae)&&L(ie,f[ae])&&L(ie,g[ae])&&(ie.layout[m[ae]]=W(F(ie,ae,C.layout[m[ae]]-x(C,ae)-T(ie,ae)-B(ie,f[ae])-B(ie,g[ae])),x(ie,ae)));var Fe=0;if(he&&N(ie)?(Te++,xe+=ie.style.flex,null===Re&&(Re=ie),null!==Me&&(Me.nextFlexChild=ie),Me=ie,Fe=x(ie,Q)+T(ie,Q)):(Ee=e,ge||(Ee=M(C,z)?C.layout[m[z]]-J:G-T(C,z)-J),0===be&&$(ie,Ee,Z),O(ie)===p&&(ke++,Fe=R(ie,Q))),se&&he&&Se+Fe>ye&&re!==ve){ke--,be=1;break}Pe&&(O(ie)!==p||N(ie))&&(Pe=!1,De=re),Oe&&(O(ie)!==p||Ze!==u&&Ze!==c||y(ie.layout[m[Y]]))&&(Oe=!1,Ne=re),Pe&&(ie.layout[_[Q]]+=Le,he&&U(C,ie,Q),Le+=R(ie,Q),Be=W(Be,F(ie,Y,R(ie,Y)))),Oe&&(ie.layout[_[Y]]+=we+de,fe&&U(C,ie,Y)),be=0,Se+=Fe,Ae=re+1}var We=0,je=0,Ue=0;if(Ue=he?ye-Se:W(Se,0)-Se,0!==Te){var Ve,Ge,$e=Ue/xe;for(Me=Re;null!==Me;)(Ve=$e*Me.style.flex+x(Me,Q))!==(Ge=F(Me,Q,Ve))&&(Ue-=Ge,xe-=Me.style.flex),Me=Me.nextFlexChild;for(($e=Ue/xe)<0&&($e=0),Me=Re;null!==Me;)Me.layout[m[Q]]=F(Me,Q,$e*Me.style.flex+x(Me,Q)),Ee=e,M(C,z)?Ee=C.layout[m[z]]-J:ge||(Ee=G-T(C,z)-J),$(Me,Ee,Z),ie=Me,Me=Me.nextFlexChild,ie.nextFlexChild=null}else ce!==a&&(ce===s?We=Ue/2:"flex-end"===ce?We=Ue:"space-between"===ce?(Ue=W(Ue,0),je=Te+ke-1!=0?Ue/(Te+ke-1):0):"space-around"===ce&&(We=(je=Ue/(Te+ke))/2));for(Le+=We,re=De;re<Ae;++re)O(ie=C.children[re])===h&&L(ie,f[Q])?ie.layout[_[Q]]=B(ie,f[Q])+w(C,Q)+A(ie,Q):(ie.layout[_[Q]]+=Le,he&&U(C,ie,Q),O(ie)===p&&(Le+=je+R(ie,Q),Be=W(Be,F(ie,Y,R(ie,Y)))));var He=C.layout[m[Y]];for(fe||(He=W(F(C,Y,Be+pe),pe)),re=Ne;re<Ae;++re)if(O(ie=C.children[re])===h&&L(ie,f[Y]))ie.layout[_[Y]]=B(ie,f[Y])+w(C,Y)+A(ie,Y);else{var Ze,Qe=de;if(O(ie)===p)if((Ze=k(C,ie))===u)y(ie.layout[m[Y]])&&(ie.layout[m[Y]]=W(F(ie,Y,He-pe-T(ie,Y)),x(ie,Y)));else if(Ze!==c){var Ye=He-pe-R(ie,Y);Qe+=Ze===l?Ye/2:Ye}ie.layout[_[Y]]+=we+Qe,fe&&U(C,ie,Y)}we+=Be,Ce=W(Ce,Le),Ie+=1,ve=Ae}if(Ie>1&&fe){var ze=C.layout[m[Y]]-pe,qe=ze-we,Je=0,Ke=de,Xe=function(e){return e.style.alignContent?e.style.alignContent:"flex-start"}(C);Xe===d?Ke+=qe:Xe===l?Ke+=qe/2:Xe===u&&ze>we&&(Je=qe/Ie);var et=0;for(re=0;re<Ie;++re){var tt=et,nt=0;for(oe=tt;oe<q;++oe)if(O(ie=C.children[oe])===p){if(ie.lineIndex!==re)break;y(ie.layout[m[Y]])||(nt=W(nt,ie.layout[m[Y]]+T(ie,Y)))}for(et=oe,nt+=Je,oe=tt;oe<et;++oe)if(O(ie=C.children[oe])===p){var rt=k(C,ie);if(rt===c)ie.layout[_[Y]]=Ke+A(ie,Y);else if(rt===d)ie.layout[_[Y]]=Ke+nt-b(ie,Y)-ie.layout[m[Y]];else if(rt===l){var ot=ie.layout[m[Y]];ie.layout[_[Y]]=Ke+(nt-ot)/2}else rt===u&&(ie.layout[_[Y]]=Ke+A(ie,Y))}Ke+=nt}}var it=!1,at=!1;if(he||(C.layout[m[Q]]=W(F(C,Q,Ce+E(C,Q)),ue),Q!==r&&Q!==i||(it=!0)),fe||(C.layout[m[Y]]=W(F(C,Y,we+pe),pe),Y!==r&&Y!==i||(at=!0)),it||at)for(re=0;re<q;++re)ie=C.children[re],it&&U(C,ie,Q),at&&U(C,ie,Y);for(me=_e;null!==me;){for(oe=0;oe<2;oe++)ae=0!==oe?n:o,!y(C.layout[m[ae]])&&!M(me,ae)&&L(me,f[ae])&&L(me,g[ae])&&(me.layout[m[ae]]=W(F(me,ae,C.layout[m[ae]]-S(C,ae)-T(me,ae)-B(me,f[ae])-B(me,g[ae])),x(me,ae))),L(me,g[ae])&&!L(me,f[ae])&&(me.layout[f[ae]]=C.layout[m[ae]]-me.layout[m[ae]]-B(me,g[ae]));ie=me,me=me.nextAbsoluteChild,ie.nextAbsoluteChild=null}}function $(e,t,n){e.shouldUpdate=!0;var r=e.style.direction||"ltr";!e.isDirty&&e.lastLayout&&e.lastLayout.requestedHeight===e.layout.height&&e.lastLayout.requestedWidth===e.layout.width&&e.lastLayout.parentMaxWidth===t&&e.lastLayout.direction===r?(e.layout.width=e.lastLayout.width,e.layout.height=e.lastLayout.height,e.layout.top=e.lastLayout.top,e.layout.left=e.lastLayout.left):(e.lastLayout||(e.lastLayout={}),e.lastLayout.requestedWidth=e.layout.width,e.lastLayout.requestedHeight=e.layout.height,e.lastLayout.parentMaxWidth=t,e.lastLayout.direction=r,e.children.forEach((function(e){e.layout.width=void 0,e.layout.height=void 0,e.layout.top=0,e.layout.left=0})),G(e,t,n),e.lastLayout.width=e.layout.width,e.lastLayout.height=e.layout.height,e.lastLayout.top=e.layout.top,e.lastLayout.left=e.layout.left)}return{layoutNodeImpl:G,computeLayout:$,fillNodes:function e(t){return t.layout&&!t.isDirty||(t.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),t.style||(t.style={}),t.children||(t.children=[]),t.children.forEach(e),t}}}();function o(e){r.fillNodes(e),r.computeLayout(e)}},1957:(e,t,n)=>{"use strict";n.d(t,{W:()=>g});var r=n(8159),o=n(3170);const i=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","fontSize","lineHeight","borderRadius"],a=["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","width","height"];var s=n(2241),c=n(665),l=n(2999);const d=new r.Z({maxListeners:2e5});let u=32768,p="portrait",h="";c.Z.onReady((()=>{p=c.Z.deviceOrientation||p,h=(0,o.Oo)().model||""}));const f=(e,t)=>-1!==["click","touchstart","touchmove","touchend","touchcancel","ready","prop-change"].indexOf(e)?`element-${t}-${e}`:-1!==["layout"].indexOf(e)?e:void 0;class g{constructor({parentId:e=0,id:t=u++,style:n={},props:r={},name:o=""}={}){const l=c.Z.platform;this.parentId=e,this.dest=0,this.id=t,this.name=o,this.children={},this.parent=null,this.isInserted=!1,this.shouldUpdate=!1,this.readyResult=new Promise((e=>{this.on("ready",e)})),n=Object.assign({left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1,scaleWidth:1,scaleHeight:1,color:void 0,fontSize:void 0,textAlign:void 0,fontWeight:void 0,lineHeight:void 0,lineBreak:void 0,backgroundColor:void 0,backgroundColorOpacity:1,borderRadius:void 0,borderColor:void 0,borderColorOpacity:1,opacity:void 0,overflow:void 0,zIndex:1,fixed:!1,rotate:0},n),Object.assign(n,n[p]);const d=/iphone x/.test(h.toLowerCase())?"iphone x":l;Object.assign(n,n[d]),Object.assign(n,n[`${d}-${p}`]),this.style={},this.computedStyle=Object.assign({},n),this.lastComputedStyle=Object.assign({},n),this.layoutBox=null,Object.keys(n).forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>n[e],set:t=>{if(t!==n[e]&&void 0!==t){if(n[e]=t,this.computedStyle[e]=t,this.lastComputedStyle[e]=t,-1!==i.indexOf(e)&&this.style.scale){const n=t*this.style.scale;this.computedStyle[e]=n,this.lastComputedStyle[e]=n}"scale"===e&&i.forEach((e=>{n[e]&&(this.computedStyle[e]=n[e]*t,this.lastComputedStyle[e]=n[e]*t)})),this.shouldUpdate=!0,"hidden"===e&&(t?((0,s.cM)(this.id,this.name,"隐藏, 保存宽高",this.computedStyle.width,this.computedStyle.height),a.forEach((e=>{this.computedStyle[e]=0}))):((0,s.cM)(this.id,this.name,"显示, 设置回来",this.lastComputedStyle.width,this.lastComputedStyle.height),a.forEach((e=>{this.computedStyle[e]=this.lastComputedStyle[e]})))),this.requestLayout()}}})})),i.forEach((e=>{if(this.style[e]&&this.style.scale){const t=this.style[e]*this.style.scale;this.computedStyle[e]=t,this.lastComputedStyle[e]=t}})),n.hidden&&a.forEach((e=>{this.computedStyle[e]=0})),Object.keys(r).forEach((e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:()=>r[e],set:t=>{t!==r[e]&&(r[e]=t,this.shouldUpdate=!0,this.requestLayout())}})})),["touchstart","touchmove","touchend","touchcancel"].forEach((e=>{this.on(e,(t=>{if(!this.bubbleEvent||!this.parent)return;let n=0,r=0;try{n=this.layoutBox.left,r=this.layoutBox.top}catch(e){}if("touchstart"===e||"touchend"===e){const o=Object.assign({},t);o.x+=n,o.y+=r,this.parent.emit(e,o)}else{const o=t.map((e=>({x:e.x+n,y:e.y+r})));this.parent.emit(e,o)}}))}))}getChildren(){return Object.keys(this.children).map((e=>{const t=this.children[e];return t.dest=this.dest,{id:t.id,name:t.name,style:t.computedStyle,children:t.getChildren()}}))}getAbsolutePosition(e){if(!e)return this.getAbsolutePosition(this);if(!e.parent)return{left:0,top:0};const{left:t,top:n}=this.getAbsolutePosition(e.parent);return{left:t+e.layoutBox.left,top:n+e.layoutBox.top}}add(e){e.parent=this,e.parentId=this.id,e.dest=this.dest,this.children[e.id]=e,this.requestLayout()}remove(e){e?this.children[e.id]&&(e.remove(),delete this.children[e.id]):(Object.keys(this.children).forEach((e=>{this.children[e].remove(),delete this.children[e]})),this.destroy(),this.parent&&delete this.parent.children[this.id]),this.requestLayout()}emit(e,t){d.emit(f(e,this.id),t)}on(e,t){d.on(f(e,this.id),t)}once(e,t){d.once(f(e,this.id),t)}off(e,t){d.off(f(e,this.id),t)}nextLayout(e){if(!e||"function"!=typeof e)return new Promise((e=>this.nextLayout(e)));setTimeout(e,250)}nextUpdate(e){if(!e||"function"!=typeof e)return new Promise((e=>this.nextUpdate(e)));this.once("update-done",e)}ready(){const e=Object.keys(this.children).map((e=>this.children[e].ready()));return Promise.all(e.concat(this.readyResult))}requestLayout(){this.emit("layout")}forceUpdate(){const e=this.isInserted?this.update():this.insert(),t=Object.keys(this.children).map((e=>this.children[e].forceUpdate()));return e.then((()=>Promise.all(t)))}insert(){return Promise.resolve()}update(){return Promise.resolve()}destroy(){["click","ready","touchstart","touchmove","touchend","touchcancel"].forEach((e=>{const t=f(e,this.id);d.removeAllListeners(t)}))}}const _=e=>{const{id:t}=JSON.parse(e.data);d.emit(f("click",t))};(0,l.n)("onTextViewClick",_),(0,l.n)("onImageViewClick",_),["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"].forEach((e=>{const t=e.replace(/^on/,"").toLowerCase();(0,l.n)(e,(e=>{try{const{id:n}=JSON.parse(e.data);d.emit(f(t,n),e.touch||e.touches)}catch(e){}}))}))},8665:(e,t,r)=>{"use strict";r.d(t,{Ee:()=>m,Vr:()=>R,xv:()=>c,nk:()=>P,G7:()=>s,kh:()=>D.k,_w:()=>g,uo:()=>f});var o=r(9045),i=r(1957),a=r(2241);class s extends i.W{constructor({id:e,parentId:t,style:n,props:r={},type:o="text",name:i="",autoInsert:a=!1,eventType:c="touch",clickState:l=!1,bubbleEvent:d=!1}={}){super({id:e,style:n,props:Object.assign(r,{fullscreen:!1}),name:i,parentId:t}),this.type="text"===o?"TextView":"ImageView",this.eventType=c,this.autoInsert=a,this.bubbleEvent=d,"touch"===this.eventType&&l&&this.ready().then((()=>{this.mask=new s({style:{backgroundColor:"rgba(0, 0, 0, 0.1)",hidden:!0,position:"absolute",left:0,top:0},eventType:"click"}),this.mask.name="mask",this.add(this.mask)})).catch((()=>{}));let u=Date.now(),p={x:0,y:0};this.on("touchstart",(e=>{l&&this.mask&&(this.mask.style.hidden=!1),u=Date.now(),p=e}));const h=e=>{l&&this.mask&&(this.mask.style.hidden=!0);let t={x:0,y:0};try{t=this.getAbsolutePosition()}catch(e){}let n={x:0,y:0};Array.isArray(e)?n=e.pop():e.x&&e.y&&(n=e);const r={absoluteX:t.left+p.x,absoluteY:t.top+p.y,relativeX:p.x,relativeY:p.y,absoluteEndX:t.left+n.x,absoluteEndY:t.top+n.y,relativeEndX:n.x,relativeEndY:n.y,pressInterval:Date.now()-u};this.emit("click",r)};this.on("touchend",h),this.on("touchcancel",h),this.autoInsert&&this.insert()}toNativeData(){const e=["borderRadius","borderWidth","borderColor","opacity","overflow","fixed","rotate"];"ImageView"===this.type&&e.push("objectFit");const t=e.reduce(((e,t)=>(e[t]=this.computedStyle[t],"borderColor"===t&&(e[t]=(0,a.$v)(this.computedStyle[t])),e)),{});t.bgColor=(0,a.$v)(this.computedStyle.backgroundColor),t.scaleX=this.computedStyle.scaleWidth,t.scaleY=this.computedStyle.scaleHeight;let n={left:this.computedStyle.left,top:this.computedStyle.top,width:this.computedStyle.width,height:this.computedStyle.height};this.layoutBox&&(n={left:this.layoutBox.left,top:this.layoutBox.top,width:this.layoutBox.width,height:this.layoutBox.height}),this.computedStyle.hidden&&(n.width=0,n.height=0),this.mask&&(this.mask.style.width=n.width,this.mask.style.height=n.height),t.padding=[0,0,0,0],void 0!==t.borderRadius&&t.borderRadius||(t.borderRadius=0);return{parentId:this.parentId,dest:this.dest,viewId:this.id,position:n,hide:this.computedStyle.hidden,style:t,notCoverRect:!0,fullscreen:this.fullscreen,zIndex:this.style.zIndex,fixed:t.fixed}}insert(){const e=Object.assign(this.toNativeData(),{clickable:"click"===this.eventType,gesture:"touch"===this.eventType,transEvt:!1,sendTo:"appservice",data:JSON.stringify({id:this.id})});return this.isInserted=!0,new Promise(((t,n)=>{(0,o.IN)(`insert${this.type}`,Object.assign(e,{success:e=>{(0,a.cM)(this.name,this.id,"ready"),this.emit("ready"),t(e)},fail:n}))}))}update(){this.shouldUpdate=!1;const e=this.toNativeData();return new Promise(((t,n)=>{(0,o.IN)(`update${this.type}`,Object.assign(e,{success:t,fail:n}))}))}destroy(){super.destroy();const e={dest:this.dest,viewId:this.id};return new Promise(((t,n)=>{(0,o.IN)(`remove${this.type}`,Object.assign(e,{success:t,fail:n}))}))}animate({left:e,top:t,opacity:n,scaleWidth:r,scaleHeight:i,rotate:a=0,duration:s=500}={}){const c={dest:this.dest,viewId:this.id,easing:"ease-in",duration:s,finalStyle:{left:e,top:t,opacity:n,rotate:a,scaleX:r,scaleY:i}};return new Promise(((e,t)=>{(0,o.IN)("animateCoverView",Object.assign(c,{success:e,fail:t}))})).then((o=>(void 0!==e&&(this.style.left=e),void 0!==t&&(this.style.top=t),void 0!==r&&(this.style.scaleWidth=r),void 0!==i&&(this.style.scaleHeight=i),void 0!==n&&(this.style.opacity=n),void 0!==a&&(this.style.rotate=a),o)))}}class c extends s{constructor({id:e,style:t,value:n="",name:r="",autoInsert:o=!1,eventType:i,bubbleEvent:a,clickState:s}={}){super({id:e,style:t,props:{value:n},type:"text",name:r,autoInsert:o,eventType:i,bubbleEvent:a,clickState:s})}toNativeData(){const e=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"].reduce(((e,t)=>(e[t]=this.computedStyle[t],e)),{});return Object.assign(super.toNativeData(),{label:Object.assign(e,{content:this.value})})}}var l=r(6422);const d=(e,t)=>{let n=!1;t.layoutBox=t.layoutBox||{},["left","top","width","height"].forEach((r=>{n=n||t.layoutBox[r]!==e.layout[r],t.layoutBox[r]=e.layout[r]})),t.shouldUpdate=t.shouldUpdate||n,e.children.forEach((e=>{const n=t.children[e.id];n&&d(e,n)}))},u=e=>{let t=Promise.resolve();return e.isInserted?e.shouldUpdate&&(t=e.update()):t=e.insert(),t.then((()=>Promise.all(Object.keys(e.children).map((t=>{const n=e.children[t];return u(n)})))))},p=e=>{e.isInserted?e.shouldUpdate&&e.update():e.insert(),Object.keys(e.children).map((t=>{const n=e.children[t];return p(n)}))};class h extends i.W{constructor({style:e,name:t,auto:n=!0}={}){super({style:e,id:0,name:t});let r=null;this.auto=n,this.on("layout",(()=>{this.auto&&(clearTimeout(r),r=setTimeout((()=>this.layout()),0))})),this.onebyone=!0}layout(){const e={id:this.id,style:{width:this.style.width,height:this.style.height,flexDirection:"row"},children:this.getChildren()};return(0,l.Z)(e),d(e,this),this.onebyone?u(this).then((()=>this.emit("update-done"))):(p(this),Promise.resolve().then((()=>this.emit("update-done"))))}}const f=new h({name:"webview-layout"});f.dest=0;const g=new h({name:"nativeview-layout",auto:!1});g.onebyone=!1,g.dest=1;var _=r(1095);class m extends s{constructor({id:e,style:t,src:n="",name:r="",autoInsert:o=!1,eventType:i,bubbleEvent:a,clickState:s}={}){super({id:e,style:t,props:{src:n},type:"image",name:r,autoInsert:o,eventType:i,bubbleEvent:a,clickState:s})}toNativeData(){return Object.assign(super.toNativeData(),{iconPath:(0,_.Uj)(this.src)})}}var y=r(9974),v=r(2999),A=r(2582),b=r(665),w=r(6998);const C={video:1,"live-player":2,"live-pusher":3,image:4,audio:5};let I=0,E={};b.Z.onReady((()=>{I=b.Z.appType+1e3,E=b.Z.appLaunchInfo}));const S={onLoad:1,onWaiting:2,onError:3,onPlay:4,onPause:5,onFullScreenChange:6,onEnd:7,onTimeUpdate:8,onSrcSet:9,onImageLoad:91,onImageError:92},T={},x=["onVideoWaiting","onVideoPlay","onVideoPause","onVideoEnded","onVideoTimeUpdate","onVideoError","onVideoProgress"];A.wZ&&x.push("onVideoFullScreenChange");const k=(e,t,r)=>{"ad"!==e.scene&&(({component:e,eventName:t,eventData:r,src:o=""}={})=>{const i=(0,w._getCurrentNetworkType)(),a=n&&n.version&&n.version.version||"";let s=Object.keys(E.query||{}).map((e=>`${e}=${E.query[e]}`)).join(",");s=encodeURIComponent(s);let c="";switch(t){case"onLoad":c=[r.duration,r.controls?2:1].join(";");break;case"onWaiting":c=[r.position,r.buffered].join(";");break;case"onError":c=r.errMsg.replace(","," ");break;case"onFullScreenChange":c=r.fullScreen?2:1;break;case"onTimeUpdate":c=[r.position,r.buffered].join(";");break;case"onImageLoad":c=[r.isLazyLoad?2:1,r.size,r.loadTime,r.width,r.height,r.originalWidth,r.originalHeight].join(";");break;case"onImageError":c=[r.isLazyLoad?2:1].join(";")}const l=[Math.round(Date.now()/1e3),E.scene,"",E.sessionid||E.sessionId,E.path,s,i,a,C[e],S[t],c,encodeURIComponent(o.substring(0,1024)).substring(0,1024),I].join(",");Reporter.reportKeyValue({key:"MediaCompStatus",value:l})})({component:"video",eventName:t,eventData:r,src:e.src})};class P extends i.W{constructor({style:e={},name:t,x:n=0,y:r=0,width:o=300,height:i=200,hide:a=!1,src:s,poster:c,referrerPolicy:l="no-referrer",initialTime:d=0,playbackRate:u=1,live:p=!1,objectFit:h="contain",controls:f=!0,showProgress:g=!0,showProgressInControlMode:_=g,autoplay:m=!1,muted:v=!1,loop:A=!1,enableProgressGesture:b=!0,enablePlayGesture:w=!1,showCenterPlayBtn:C=!0,autoInsert:I=!0,scene:E="default",preLoad:S=!1,obeyMuteSwitch:k=!1,underGameView:P=!1,backgroundColor:D="#000000",playerHint:O="",zIndex:N}={}){super({style:e,name:t}),this.isSrcChanged=!1,this.autoInsert=I,this.playerHint=O,this.scene=E,this.preLoad=S,this.underGameView=P,this.zIndex=N,T[this.id]=this;let R=null;this.emitter=new y.Z,this.deferred=[],this._buffered=0,this._position=0;const M={x:n,y:r,width:o,height:i,hide:a,src:s,poster:c,initialTime:d,playbackRate:u,live:p,objectFit:h,controls:f,showProgress:g,showProgressInControlMode:_,backgroundColor:D,autoplay:m,muted:v,loop:A,enableProgressGesture:b,enablePlayGesture:w,showCenterPlayBtn:C,obeyMuteSwitch:k,referrerPolicy:l};Object.keys(M).forEach((e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:()=>M[e],set:t=>{"src"!==e&&M[e]===t||(M[e]=t,this.isInserted?("src"===e&&(this.isSrcChanged=!0),"poster"===e&&(this.isPosterChanged=!0),"playbackRate"===e?this.operate("playbackRate",[t]):(clearTimeout(R),R=setTimeout((()=>this.update()),0))):this.deferred.push({type:"property",property:e,value:t}))}})})),x.forEach((e=>{const t=e.toLowerCase().replace("video","");this[t]=()=>{},this.emitter.on(e,(e=>{this[t](e)}))})),this.autoInsert&&this.insert().then((()=>{this.playbackRate&&1!==this.playbackRate&&this.operate("playbackRate",[this.playbackRate])})).then((()=>{this.deferred.forEach((e=>{"property"===e.type?this[e.property]=e.value:this.operate(e.method,e.args)}))}))}insert(){if(!this.isInserted)return this.isInserted=!0,k(this,"onSrcSet",{}),new Promise(((e,t)=>{(0,o.IN)("insertVideoPlayer",Object.assign(this.toNativeData(),{data:JSON.stringify({id:this.id}),filePath:(0,_.Uj)(this.src),scene:this.scene,preLoad:this.preLoad,underGameView:this.underGameView,referrerPolicy:this.referrerPolicy,playerHint:this.playerHint,zIndex:this.zIndex,success:t=>{this.emit("ready"),e(t)},fail:t}))}))}destroy(){return new Promise(((e,t)=>{A.cj?setTimeout((()=>{(0,o.IN)("removeVideoPlayer",{videoPlayerId:this.id,success:e,fail:t})}),0):(0,o.IN)("removeVideoPlayer",{videoPlayerId:this.id,success:e,fail:t}),x.forEach((e=>{const t=e.replace("Video","").replace("on","off");"function"==typeof this[t]&&this[t]()})),delete T[this.id]}))}toNativeData(){this.layoutBox;const e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={videoPlayerId:this.id,position:e,hide:this.hide,zIndex:Number.isInteger(+this.zIndex)?+this.zIndex:0,initialTime:this.initialTime,live:this.live,objectFit:this.objectFit,needEvent:!0,showBasicControls:this.controls,showProgress:this.showProgress,showProgressInControlMode:this.showProgressInControlMode,backgroundColor:this.backgroundColor,backgroudColor:this.backgroundColor,autoplay:this.autoplay,muted:this.muted,loop:this.loop,customCache:!1,enableProgressGesture:this.enableProgressGesture,enablePlayGesture:this.enablePlayGesture,showCenterPlayBtn:this.showCenterPlayBtn,obeyMuteSwitch:this.obeyMuteSwitch,referrerPolicy:this.referrerPolicy};return this.isSrcChanged&&(t.filePath=(0,_.Uj)(this.src),this.isSrcChanged=!1),this.isPosterChanged&&(t.poster=(0,_.Uj)(this.poster),this.isPosterChanged=!1),this.autoInsert||(t.parentId=this.parentId),t}update(){this.shouldUpdate=!1;const e=this.toNativeData();return e.filePath&&k(this,"onSrcSet",{}),new Promise(((t,n)=>{(0,o.IN)("updateVideoPlayer",Object.assign({},e,{success:t,fail:n}))}))}operate(e,t=[]){if(this.isInserted)return this.hide&&"playbackRate"!==e?Promise.reject(new Error(`${e} can't be invoked when video is hidden`)):new Promise(((n,r)=>{(0,o.IN)("operateVideoPlayer",{videoPlayerId:this.id,type:e,data:t,success:n,fail:r})}));this.deferred.push({type:"method",method:e,args:t})}play(){return this.operate("play")}pause(){return this.operate("pause")}stop(){return this.operate("stop")}seek(e){return this.operate("seek",[e])}requestFullScreen(e){return this.operate("requestFullScreen",[e])}exitFullScreen(){return this.operate("exitFullScreen")}}x.forEach((e=>{const t=e.replace("Video","");P.prototype[t]=function(t){this.emitter.on(e,t)};const n=t.replace("on","off");P.prototype[n]=function(t){this.emitter.off(e,t)}})),x.forEach((e=>{(0,v.n)(e,(t=>{const n=t.videoPlayerId||JSON.parse(t.data).id,r=T[n];if(!r)return;if(r.emitter.emit(e,t),"onVideoProgress"===e)return void(r._buffered=t.buffered);let o=t;"onVideoTimeUpdate"===e?(r._position=t.position,o={position:t.position,buffered:r._buffered}):"onVideoWaiting"===e&&(o={position:r._position,buffered:r._buffered}),k(r,e.replace("Video",""),o)}))}));var D=r(6722),O=r(2184);const N={};class R extends i.W{constructor({style:e={},name:t,x:n=0,y:r=0,width:o=300,height:i=200,url:a="",urls:s=[],scale:c=1,autoInsert:l=!0,hide:d=!1,zIndex:u=0}={}){if(super({style:e,name:t}),this.x=n,this.y=r,this.width=o,this.height=i,this.scale=+c,this.hide=d,this.autoInsert=l,this.url=a,this.zIndex=u,this.emitter=new O.Q("ImagePreviewer",!0),N[this.id]=this,"string"==typeof s)try{this.urls=JSON.parse(s)}catch(e){this.urls=[]}else this.urls=s;this._insertPromise=new Promise(((e,t)=>{this._insertPromiseResolve=e,this._insertPromiseReject=t}))}insert(){return this.toNativeData(),(0,o.IN)("insertImagePreviewer",Object.assign(this.toNativeData(),{success:e=>{this._insertPromiseResolve(e)},fail:e=>{this._insertPromiseReject(e)}})),this._insertPromise}update(){return new Promise(((e,t)=>{this._insertPromise.then((()=>{this.toNativeData(),(0,o.IN)("updateImagePreviewer",Object.assign(this.toNativeData(),{success:t=>{e(t)},fail:e=>{t(e)}}))})).catch(t)}))}destroy(){return this.id,new Promise(((e,t)=>{setTimeout((()=>{(0,o.IN)("removeImagePreviewer",{viewId:this.id,success:e,fail:t}),this.offImageLoadFail(),delete N[this.id]}),0)}))}toNativeData(){this.layoutBox;const e={position:this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},urls:this.urls.length>0?this.urls:[this.url],scale:this.scale,hide:this.hide,viewId:this.id,zIndex:this.zIndex,parentId:this.parentId};return this.parentId,e}onImageLoadFail(e){this.emitter.on("onImageLoadFail",e)}offImageLoadFail(e){this.emitter.off("onImageLoadFail",e)}}(0,v.n)("onImagePreviewerLoadFail",(e=>{N[e.viewId].emitter.emit("onImageLoadFail",e)}))},6722:(e,t,n)=>{"use strict";n.d(t,{k:()=>p});var r=n(1957),o=n(9045),i=n(2999),a=n(665);const s=new Map,c=new WeakMap,l=new WeakMap,d=new WeakMap;function u(e){return new Promise(((t,n)=>{const r=l.get(this);(0,o.IN)("insertHTMLWebView",{htmlId:this.id,position:r,src:c.get(this),zIndex:d.get(this),backgroundColor:r.backgroundColor,__skipDomainCheck__:e,success:t,fail:n})}))}class p extends r.W{constructor({src:e,zIndex:t,style:n={},__skipDomainCheck__:r}){super({style:n}),s.set(this.id,this),c.set(this,e),l.set(this,n),d.set(this,t),u.call(this,r),this.isInserted=!0}get src(){return c.get(this)}set src(e){c.set(this,e),(0,o.IN)("updateHTMLWebView",{htmlId:this.id,src:e})}get style(){return l.get(this)}set style(e){this.style||l.set(this,{});const t=Object.assign(this.style,e);this.isInserted&&(0,o.IN)("updateHTMLWebView",{htmlId:this.id,position:t,backgroundColor:t.backgroundColor})}get zIndex(){return d.get(this)}set zIndex(e){d.set(this,e),(0,o.IN)("updateHTMLWebView",{htmlId:this.id,zIndex:e})}destroy(){s.delete(this.id),(0,o.IN)("removeHTMLWebView",{htmlId:this.id})}}function h({htmlId:e}){const t=s.get(e);t&&t.onload&&setTimeout(t.onload)}function f({name:e,arg:t,htmlId:n}){"postMessage"===e&&s.forEach((({onmessage:e},r)=>{n&&n!==r||e&&setTimeout((()=>e(t)))}))}a.Z.onReady((()=>{4===a.Z.appType&&((0,i.n)("onWebviewFinishLoad",h),(0,i.n)("onWebInvokeAppService",f),(0,i.n)("WEB_INVOKE_APPSERVICE",f))}))},2241:(e,t,n)=>{"use strict";n.d(t,{Vs:()=>r,_u:()=>o,cM:()=>i,$G:()=>a,um:()=>s,$v:()=>l,Fr:()=>c});const r=(e=0)=>new Promise((t=>{setTimeout(t,e)})),o=()=>{},i=()=>{},a=(e,t)=>{let n="",r=0;for(let o=0;o<e.length;o++){if(r+=/[\u4e00-\u9fa5]/.test(e[o])?2:1,r>t){n+="...";break}n+=e[o]}return n},s=e=>e.split("-").map(((e,t)=>0===t?e:e[0].toUpperCase()+e.slice(1))).join(""),c=e=>(t={})=>new Promise(((n,r)=>{e(Object.assign(t,{success:n,fail:r}))})),l=e=>{let t=null;return!/^#/.test(e)||7!==e.length&&9!==e.length?null!==(t=/^(rgb|rgba)\((.+)\)/.exec(e))?"#"+t[2].split(",").map(((e,t)=>(e=e.trim(),1===(e=(e=3===t?Math.floor(255*parseFloat(e)):parseInt(e,10)).toString(16)).length&&(e="0"+e),e))).join(""):"#00000000":e}},3489:(e,t,n)=>{"use strict";n.d(t,{b$:()=>u,Tb:()=>r.Tb,vv:()=>d,dN:()=>r.dN});var r=n(743),o=n(2999),i=n(2046),a=n(678),s=n(2497);const c=(0,i.s)("Hide"),l=(0,i.s)("BaseFrameHide"),d=(c.onMethod,c.offMethod,c.internalOnMethod),u=c.internalOffMethod;l.internalOnMethod,l.internalOffMethod;(0,o.n)("onAppEnterBackground",((e={})=>{(0,s.v)(e.mode),(0,a.b$)()?l.emit(e):(l.emit(e),c.emit(e))}))},743:(e,t,n)=>{"use strict";n.d(t,{Ke:()=>f,dN:()=>g,Tb:()=>_,OQ:()=>m});var r=n(495),o=n(2046),i=n(665),a=n(6245),s=n(2582),c=n(2999),l=n(9066),d=n(678),u=n(7452);const p=(0,o.s)("Show"),h=(0,o.s)("BaseFrameShow"),f=p.onMethod,g=(p.offMethod,p.internalOnMethod),_=p.internalOffMethod,m=h.internalOnMethod;h.internalOffMethod;function y(e,t){e=e||(0,r.Ir)(),t=t||(0,r.x9)(),Reporter.__query__=e.query,l.Z.query=e.query,p.emitInternal(t),p.emitGlobal(e)}function v(e){wxNativeConsole.info("[emitBaseFrameOnShow]",e),h.emitInternal(e)}function A(e=""){const t=e.indexOf("?");let n={};if(t>=0){const r=e.slice(t+1);if(r)try{n=r.split("&").reduce(((e,t)=>{const n=t.split("="),r=n[0],o=n.slice(1).join("=");return e[r]=o,e}),{})}catch(e){n={}}}return n}(0,c.n)("onAppEnterForeground",((e={})=>{const t=e.path;s.wZ&&(0,u.Kn)(e.query)&&Object.keys(e.query).length>0||t&&(e.query=A(t));const{publicLaunchInfo:n,appLaunchInfo:o}=(0,r.Br)(e),i=o.shareInfo;v(o),setTimeout((()=>{(0,d.b$)()||y(n,o),"object"==typeof i&&null!==i&&(0,a.kv)(i.shareKey)}),0)})),i.Z.onReady((()=>{const e=(0,r.Ir)(),t=(0,r.x9)();Reporter.__query__=e.query,l.Z.query=e.query,s.gm||(v(t),setTimeout((()=>{(0,d.b$)()||y(e,t)}),0))}))},2497:(e,t,n)=>{"use strict";let r;function o(e){r=e}function i(){return r}n.d(t,{v:()=>o,B:()=>i})},1627:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(6947),o=n(2184),i=n(7618),a=n(812),s=n(7452);const c=new o.Q("touch",!0),l=new o.Q("touch",!0),d={};["start","move","end","cancel"].forEach((e=>{if("start"===e){const t="beforeTouchStart",n="setLastTapTime",o="tap";r.Z.EventHandler[`ontouch${e}`]=r=>{i.U.emit(t,r),i.U.emit(n,Date.now()),(0,a.kV)(o),c.emit(e,r),l.emit(e,r)}}else if("end"===e){const t="beforeTouchEnd",n="afterTouchEnd";r.Z.EventHandler[`ontouch${e}`]=r=>{i.U.emit(t),c.emit(e,r),l.emit(e,r),i.U.emit(n)}}else r.Z.EventHandler[`ontouch${e}`]=t=>{c.emit(e,t),l.emit(e,t)};d[`onTouch${e.charAt(0).toUpperCase()+e.slice(1)}`]=(t,n)=>{(0,s.Kn)(n)&&(r.Z.EventHandler[`ontouch${e}Dst`]=n),c.on(e,t)},d[`offTouch${e.charAt(0).toUpperCase()+e.slice(1)}`]=t=>{c.off(e,t)}}));const u=d},5959:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});let r={};const o={get:(e="default")=>r[e],set(e,t="default"){r[t]=e},clear(){r={}}}},678:(e,t,n)=>{"use strict";n.d(t,{b$:()=>o});n(2411);var r=n(5959);function o(){return!!r.n.get()}},3872:(e,t,n)=>{"use strict";n.d(t,{F0:()=>o,y4:()=>s});var r=n(9045);n(7452),n(6722);const o={EVENT_CANVAS_BEFORE_SHARE:1,EVENT_CANVAS_AFTER_SHARE_SUCCESS:2,EVENT_CANVAS_AFTER_SHARE_CANCEL:3,EVENT_CANVAS_BEFORE_ADS:4,EVENT_CANVAS_ADS_FIN:5,EVENT_CANVAS_ADS_CANCEL:6,EVENT_CANVAS_BEFORE_JUMP_TO_APP:7,EVENT_CANVAS_BEFORE_PAY:8,EVENT_CANVAS_BEFORE_JUMP_TO_CUSTOMER_SERVICE:9,EVENT_CANVAS_BEFORE_CLOSE_CUSTOMER_SERVICE:10,EVENT_CANVAS_BEFORE_QR_CODE:11,EVENT_CANVAS_BEFORE_MORE:12,EVENT_CANVAS_BEFORE_GAME_ClUB:13,EVENT_CANVAS_AFTER_MODAL:14,EVENT_CANVAS_BEFORE_NORMAL_EXIT:15,EVENT_CANVAS_SAMPLE_BY_TIME:16,EVENT_CANVAS_WEBVIEW_TIMING:17,EVENT_CANVAS_WEBVIEW_BEFORE_JUMP:18},i={sampleEventList:[]},a=new Map;function s(e,t){const n=function(e){return i.sampleEventList.find((t=>e===t.event))}(e);if(n){const e=Date.now(),o=a.get(n);if(n.sample_interval_seconds,(e-o)/1e3<n.sample_interval_seconds)return;(0,r.IN)("reportCanvasData",{eventInfo:JSON.stringify(n),viewId:t>0?t:0,success(){a.set(n,e)},fail({errMsg:e}){}})}}},7618:(e,t,n)=>{"use strict";n.d(t,{U:()=>i,L:()=>a});var r=n(8159),o=n(2783);const i=new r.Z,a={map:{},set(e){const t=(0,o.M8)();return this.map[t]=e,t},get(e){return e?this.map[e]:Object.keys(this.map).map((e=>this.map[e]))}}},4504:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={emitter:new(n(8159).Z),puidToPluginWX:{},pluginIDs:{},pluginVersions:{},pluginInfos:{}}},7697:(e,t,n)=>{"use strict";n.d(t,{Jv:()=>h,Ur:()=>l,hI:()=>c,MX:()=>u,u4:()=>p,hb:()=>d,qS:()=>f});var r=n(883),o=n(4504),i=n(1095);const a=new WeakMap,s=e=>{for(const t in o.Z.puidToPluginWX)if(o.Z.puidToPluginWX[t]===e)return t},c=e=>o.Z.pluginIDs[s(e)],l=e=>{if((0,i.aI)()){const n=(t=e,a.get(t));return n&&n.provider?n.provider:void 0}return c(e);var t},d=e=>o.Z.pluginVersions[s(e)],u=e=>{const t=c(e);if(void 0!==t)return o.Z.pluginInfos[t]},p=e=>{e.success(o.Z.pluginInfos[e.pluginId])},h=(e,t)=>{if(void 0===t||void 0===e)return!1;const n=(0,r.Qc)(e||"");for(let e=0;e<t.length;e++){const o=t[e]||"",i=(0,r.Qc)(o);if(i.protocol===n.protocol&&i.hostname===n.hostname&&i.port===n.port)return!0}return!1},f=(e,t,n)=>{const r=new RegExp(`^${t}:`),o={};return["success","fail","complete"].forEach((t=>{"function"==typeof e[t]&&(o[t]=o=>{o.errMsg=o.errMsg.replace(r,n+":"),e[t](o)})})),Object.assign({},e,o)}},1095:(e,t,n)=>{"use strict";n.d(t,{Vs:()=>s,vp:()=>c,Y6:()=>l,KU:()=>d,aI:()=>u,N0:()=>p,Fr:()=>h,a2:()=>f,fm:()=>g,vB:()=>_,v7:()=>m,Uj:()=>y,Av:()=>v,$:()=>A,er:()=>b,GO:()=>w,Cb:()=>C});var r=n(8159),o=n(665),i=(n(812),n(2582)),a=n(7452);const s=(e,t)=>{const n=t.timeout;if("number"!=typeof n)return void e(t);let r=!1;const o=setTimeout((function(){const e={errMsg:"request timeout"};r=!0,"function"==typeof t.fail&&t.fail(e),"function"==typeof t.complete&&t.complete(e)}),n),i=["success","fail","complete"].reduce(((e,n)=>(e[n]=e=>{r||(clearTimeout(o),"function"==typeof t[n]&&t[n](e))},e)),{});e(Object.assign({},t,i))};class c{constructor(e={maxListeners:2e3}){this.emitter=new r.Z(e),this.callbackMap="undefined"!=typeof WeakMap?new WeakMap:{},this.originalCallbackMap=new WeakMap}emit(e,t){this.emitter.emit(e,t)}on(e,t){if(t&&"function"==typeof t){const n=__errorTracer__.surroundThirdByTryCatch(t,`at ${e} callback function`);this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}off(e,t){if(t&&"function"==typeof t){const n=this.callbackMap.get(t);this.emitter.off(e,n),this.callbackMap.delete(t),this.originalCallbackMap.delete(n)}else this.emitter.listeners(e).forEach((e=>{const t=this.originalCallbackMap.get(e);this.callbackMap.delete(t),this.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}listeners(e){return this.emitter.listeners(e)}}function l(e){return"string"==typeof e?e.length:"object"==typeof e&&null!==e&&"number"==typeof e.byteLength?e.byteLength:0}function d(e){let t="unknown";if(o.Z.appContactInfo&&o.Z.appContactInfo.operationInfo&&o.Z.appContactInfo.operationInfo.jsonInfo&&o.Z.appContactInfo.operationInfo.jsonInfo.apiAvailable){const{apiAvailable:n}=o.Z.appContactInfo.operationInfo.jsonInfo;"number"==typeof n[e]&&(t=1===n[e])}return t}function u(){return 4===o.Z.appType}function p(){return 0===o.Z.appType}function h(e){return(t={})=>new Promise(((n,r)=>{e(Object.assign(t,{success:n,fail:r}))}))}function f(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}function g(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _(){return i.gm?!o.Z.urlCheck:!0===o.Z.debug}function m(e,t){return t.reduce(((t,n)=>((0,a.o8)(e[n])||(t[n]=e[n]),t)),{})}function y(e){if(!i.gm||"string"!=typeof e)return e;if(/^https?:\/\//.test(e)){const t=e.split("?"),n=t[1]||"",r=n.length>0?"&":"";e=`${t[0]}?${n}${r}devtools_ignore=true`}return e}function v(){return o.Z.appLaunchInfo&&"singlePage"===o.Z.appLaunchInfo.mode}function A(){var e;return 1==(1&((null===(e=o.Z.appLaunchInfo)||void 0===e?void 0:e.secFlagForSinglePageMode)||0))}function b(){const e=o.Z.host;return e&&"WeChat"!==e.env&&"WMPF"!==e.env}const w=function(){return o.Z.isIsolateContext};function C(e,t){const n=function(e){if("string"==typeof e){const t=e.split(".").map((e=>parseInt(e,10)));for(;t.length<4;)t.push(0);return function(e){const t=e.length;let n=0;for(let r=0;r<t;++r)n=n<<8|e[r];return n}(t.slice(0,4))}return"number"==typeof e?268435455&e:e};return(e=n(e))>(t=n(t))?1:e<t?-1:0}},5130:(e,t,n)=>{function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(4161)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},4161:(e,t,n)=>{var r;function o(e){function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"==typeof o){var i=a[c];n=o.call(e,i),a.splice(c,1),c--}return n})),t.formatArgs.call(e,a);var l=n.log||t.log||console.log.bind(console);l.apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(1378),t.names=[],t.skips=[],t.formatters={}},6654:e=>{function t(e,t){const n=[],r=~~(t/8),o=t%8;for(let t=0,i=e.length;t<i;t++)n[t]=(e[(t+r)%i]<<o&255)+(e[(t+r+1)%i]>>>8-o&255);return n}function n(e,t){const n=[];for(let r=e.length-1;r>=0;r--)n[r]=255&(e[r]^t[r]);return n}function r(e,t){const n=[];for(let r=e.length-1;r>=0;r--)n[r]=e[r]&t[r]&255;return n}function o(e,t){const n=[];for(let r=e.length-1;r>=0;r--)n[r]=255&(e[r]|t[r]);return n}function i(e,t){const n=[];let r=0;for(let o=e.length-1;o>=0;o--){const i=e[o]+t[o]+r;i>255?(r=1,n[o]=255&i):(r=0,n[o]=255&i)}return n}function a(e){return n(n(e,t(e,9)),t(e,17))}function s(e,t,i,a){return a>=0&&a<=15?n(n(e,t),i):o(o(r(e,t),r(e,i)),r(t,i))}function c(e,t,i,a){return a>=0&&a<=15?n(n(e,t),i):o(r(e,t),r(function(e){const t=[];for(let n=e.length-1;n>=0;n--)t[n]=255&~e[n];return t}(e),i))}function l(e,r){const o=[],l=[];for(let e=0;e<16;e++){const t=4*e;o.push(r.slice(t,t+4))}for(let e=16;e<68;e++)o.push(n(n((d=n(n(o[e-16],o[e-9]),t(o[e-3],15)),n(n(d,t(d,15)),t(d,23))),t(o[e-13],7)),o[e-6]));var d;for(let e=0;e<64;e++)l.push(n(o[e],o[e+4]));const u=[121,204,69,25],p=[122,135,157,138];let h,f,g,_,m=e.slice(0,4),y=e.slice(4,8),v=e.slice(8,12),A=e.slice(12,16),b=e.slice(16,20),w=e.slice(20,24),C=e.slice(24,28),I=e.slice(28,32);for(let e=0;e<64;e++){const r=e>=0&&e<=15?u:p;h=t(i(i(t(m,12),b),t(r,e)),7),f=n(h,t(m,12)),g=i(i(i(s(m,y,v,e),A),f),l[e]),_=i(i(i(c(b,w,C,e),I),h),o[e]),A=v,v=t(y,9),y=m,m=g,I=C,C=t(w,19),w=b,b=a(_)}return n([].concat(m,y,v,A,b,w,C,I),e)}e.exports=function(e){let t=8*e.length,n=t%512;n=n>=448?512-n%448-1:448-n-1;const r=new Array((n-7)/8);for(let e=0,t=r.length;e<t;e++)r[e]=0;const o=[];t=t.toString(2);for(let e=7;e>=0;e--)if(t.length>8){const n=t.length-8;o[e]=parseInt(t.substr(n),2),t=t.substr(0,n)}else t.length>0?(o[e]=parseInt(t,2),t=""):o[e]=0;const i=[].concat(e,[128],r,o),a=i.length/64;let s=[115,128,22,111,73,20,178,185,23,36,66,215,218,138,6,0,169,111,48,188,22,49,56,170,227,141,238,77,176,251,14,78];for(let e=0;e<a;e++){const t=64*e;s=l(s,i.slice(t,t+64))}return s}},2031:(e,t,n)=>{const r=n(6654);e.exports=function(e){return e="string"==typeof e?function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.codePointAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>>6),t.push(128|63&r);else if(r<=55295||r>=57344&&r<=65535)t.push(224|r>>>12),t.push(128|r>>>6&63),t.push(128|63&r);else{if(!(r>=65536&&r<=1114111))throw t.push(r),new Error("input is not supported");n++,t.push(240|r>>>18&28),t.push(128|r>>>12&63),t.push(128|r>>>6&63),t.push(128|63&r)}}return t}(e):Array.prototype.slice.call(e),r(e).map((e=>1===(e=e.toString(16)).length?"0"+e:e)).join("")}},1378:e=>{var t=1e3,n=60*t,r=60*n,o=24*r,i=365.25*o;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,s){s=s||{};var c,l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!a)return;var s=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*i;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===l&&!1===isNaN(e))return s.long?a(c=e,o,"day")||a(c,r,"hour")||a(c,n,"minute")||a(c,t,"second")||c+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2808:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,o){n=n||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(n);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var l=0;l<c;++l){var d,u,p,h,f=e[l].replace(a,"%20"),g=f.indexOf(r);g>=0?(d=f.substr(0,g),u=f.substr(g+1)):(d=f,u=""),p=decodeURIComponent(d),h=decodeURIComponent(u),t(i,p)?Array.isArray(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i}},1368:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,o){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(o){var i=encodeURIComponent(t(o))+r;return Array.isArray(e[o])?e[o].map((function(e){return i+encodeURIComponent(t(e))})).join(n):i+encodeURIComponent(t(e[o]))})).join(n):o?encodeURIComponent(t(o))+r+encodeURIComponent(t(e)):""}},6642:(e,t,n)=>{"use strict";t.decode=t.parse=n(2808),t.encode=t.stringify=n(1368)},9639:function(e,t,n){var r;e=n.nmd(e),function(o){t&&t.nodeType,e&&e.nodeType;var i="object"==typeof n.g&&n.g;i.global!==i&&i.window!==i&&i.self;var a,s=2147483647,c=36,l=/^xn--/,d=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,f=String.fromCharCode;function g(e){throw RangeError(p[e])}function _(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function m(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+_((e=e.replace(u,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function v(e){return _(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function b(e,t,n){var r=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;r+=c)e=h(e/35);return h(r+36*e/(e+38))}function w(e){var t,n,r,o,i,a,l,d,u,p,f,_=[],m=e.length,y=0,A=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&g("not-basic"),_.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<m;){for(i=y,a=1,l=c;o>=m&&g("invalid-input"),((d=(f=e.charCodeAt(o++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:c)>=c||d>h((s-y)/a))&&g("overflow"),y+=d*a,!(d<(u=l<=w?1:l>=w+26?26:l-w));l+=c)a>h(s/(p=c-u))&&g("overflow"),a*=p;w=b(y-i,t=_.length+1,0==i),h(y/t)>s-A&&g("overflow"),A+=h(y/t),y%=t,_.splice(y++,0,A)}return v(_)}function C(e){var t,n,r,o,i,a,l,d,u,p,_,m,v,w,C,I=[];for(m=(e=y(e)).length,t=128,n=0,i=72,a=0;a<m;++a)(_=e[a])<128&&I.push(f(_));for(r=o=I.length,o&&I.push("-");r<m;){for(l=s,a=0;a<m;++a)(_=e[a])>=t&&_<l&&(l=_);for(l-t>h((s-n)/(v=r+1))&&g("overflow"),n+=(l-t)*v,t=l,a=0;a<m;++a)if((_=e[a])<t&&++n>s&&g("overflow"),_==t){for(d=n,u=c;!(d<(p=u<=i?1:u>=i+26?26:u-i));u+=c)C=d-p,w=c-p,I.push(f(A(p+C%w,0))),d=h(C/w);I.push(f(A(d,0))),i=b(n,v,r==o),n=0,++r}++n,++t}return I.join("")}a={version:"1.3.2",ucs2:{decode:y,encode:v},decode:w,encode:C,toASCII:function(e){return m(e,(function(e){return d.test(e)?"xn--"+C(e):e}))},toUnicode:function(e){return m(e,(function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},883:(e,t,n)=>{"use strict";var r=n(9639),o=n(5225);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=v;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(l),u=["%","/","?",";","#"].concat(d),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(6642);function v(e,t,n){if(e&&o.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/");var v=e=l.join(s);if(v=v.trim(),!n&&1===e.split("#").length){var A=c.exec(v);if(A)return this.path=v,this.href=v,this.pathname=A[1],A[2]?(this.search=A[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var b=a.exec(v);if(b){var w=(b=b[0]).toLowerCase();this.protocol=w,v=v.substr(b.length)}if(n||b||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===v.substr(0,2);!C||b&&_[b]||(v=v.substr(2),this.slashes=!0)}if(!_[b]&&(C||b&&!m[b])){for(var I,E,S=-1,T=0;T<p.length;T++){-1!==(x=v.indexOf(p[T]))&&(-1===S||x<S)&&(S=x)}-1!==(E=-1===S?v.lastIndexOf("@"):v.lastIndexOf("@",S))&&(I=v.slice(0,E),v=v.slice(E+1),this.auth=decodeURIComponent(I)),S=-1;for(T=0;T<u.length;T++){var x;-1!==(x=v.indexOf(u[T]))&&(-1===S||x<S)&&(S=x)}-1===S&&(S=v.length),this.host=v.slice(0,S),v=v.slice(S),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var P=this.hostname.split(/\./),D=(T=0,P.length);T<D;T++){var O=P[T];if(O&&!O.match(h)){for(var N="",R=0,M=O.length;R<M;R++)O.charCodeAt(R)>127?N+="x":N+=O[R];if(!N.match(h)){var L=P.slice(0,T),B=P.slice(T+1),F=O.match(f);F&&(L.push(F[1]),B.unshift(F[2])),B.length&&(v="/"+B.join(".")+v),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=r.toASCII(this.hostname));var W=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+W,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!g[w])for(T=0,D=d.length;T<D;T++){var U=d[T];if(-1!==v.indexOf(U)){var V=encodeURIComponent(U);V===U&&(V=escape(U)),v=v.split(U).join(V)}}var G=v.indexOf("#");-1!==G&&(this.hash=v.substr(G),v=v.slice(0,G));var $=v.indexOf("?");if(-1!==$?(this.search=v.substr($),this.query=v.substr($+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,$)):t&&(this.search="",this.query={}),v&&(this.pathname=v),m[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){W=this.pathname||"";var H=this.search||"";this.path=W+H}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var d=c[l];"protocol"!==d&&(n[d]=e[d])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){for(var u=Object.keys(e),p=0;p<u.length;p++){var h=u[p];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||_[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),A=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=A||v||n.host&&e.pathname,w=b,C=n.pathname&&n.pathname.split("/")||[],I=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(I&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),b=b&&(""===f[0]||""===C[0])),A)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,C=f;else if(f.length)C||(C=[]),C.pop(),C=C.concat(f),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(I)n.hostname=n.host=C.shift(),(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift());return n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!C.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=C.slice(-1)[0],S=(n.host||e.host||C.length>1)&&("."===E||".."===E)||""===E,T=0,x=C.length;x>=0;x--)"."===(E=C[x])?C.splice(x,1):".."===E?(C.splice(x,1),T++):T&&(C.splice(x,1),T--);if(!b&&!w)for(;T--;T)C.unshift("..");!b||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),S&&"/"!==C.join("/").substr(-1)&&C.push("");var k,P=""===C[0]||C[0]&&"/"===C[0].charAt(0);I&&(n.hostname=n.host=P?"":C.length?C.shift():"",(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift()));return(b=b||n.host&&C.length)&&!P&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},5225:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},6725:(e,t,n)=>{var r=n(5130)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:n()}}();function t(){if(i(/^<\?xml\s*/)){for(var e={attributes:{}};!a()&&!s("?>");){var t=o();if(!t)return e;e.attributes[t.name]=t.value}return i(/\?>\s*/),e}}function n(){r("tag %j",e);var t=i(/^<([\w-:.]+)\s*/);if(t){for(var c,l={name:t[1],attributes:{},children:[]};!(a()||s(">")||s("?>")||s("/>"));){var d=o();if(!d)return l;l.attributes[d.name]=d.value}if(i(/^\s*\/>\s*/))return l;for(i(/\??>\s*/),l.content=function(){r("content %j",e);var t=i(/^([^<]*)/);return t?t[1]:""}();c=n();)l.children.push(c);return i(/^<\/[\w-:.]+>\s*/),l}}function o(){r("attribute %j",e);var t,n=i(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(n)return{name:n[1],value:(t=n[2],t.replace(/^['"]|['"]$/g,""))}}function i(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function a(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},2102:e=>{"use strict";e.exports=BabelRuntimeHelpers.applyDecoratedDescriptor},3356:e=>{"use strict";e.exports=BabelRuntimeHelpers.asyncToGenerator},1503:e=>{"use strict";e.exports=BabelRuntimeHelpers.objectSpread2},3451:e=>{"use strict";e.exports=BabelRuntimeHelpers.objectWithoutProperties}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,c),n.loaded=!0,n.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var l={};(()=>{"use strict";c.d(l,{default:()=>ED});var t={};c.r(t),c.d(t,{createAudioContext:()=>Vo,createCameraContext:()=>Te,createInnerAudioContext:()=>Lo,createLivePlayerContext:()=>Ye,createLivePusherContext:()=>ht,createMapContext:()=>Z,createSQEditorContext:()=>qo,createSQLivePlayerContext:()=>ze,createSQMapContext:()=>Q,createSQVideoContext:()=>ie.hN,createVideoContext:()=>ie.Au});var r={};c.r(r),c.d(r,{_triggerBeforeShareAppMessage:()=>Ta,_triggerBeforeUnloadPage:()=>Sa,createRouter:()=>ni.p7,navigateBack:()=>ni.n,navigateTo:()=>ni.T8,navigateToWithRelatedInfo:()=>ni.mN,normalizeUrl:()=>ni.D5,onPageReload:()=>Ea,reLaunch:()=>ni.UY,redirectTo:()=>ni.gB,switchTab:()=>ni.MR});var a={};c.r(a),c.d(a,{ShareInfoStorage:()=>zE,_getRealRoute:()=>P.A,_triggerBeforeShareAppMessage:()=>JE,_triggerBeforeUnloadPage:()=>qE,addToFavorites:()=>hE,checkAPIAvailable:()=>St.KU,checkHandoffEnabled:()=>wE,createPluginConsole:()=>QI,createPluginWX:()=>ZI,createPluginWXWebAssembly:()=>YI,emitIsloatedAppHide:()=>HE,emitIsloatedAppShow:()=>$E,fontFaceRecords:()=>yn.sS,getAppConfig:()=>sE,getCachePermissionBytes:()=>rE,getCloudFileUrl:()=>D.V,getInnerEnterOptionsSync:()=>NE,getLaunchOptionsSync:()=>GE,getLogManager:()=>Kp,getNetworkType:()=>gc.getNetworkType,getPreloadAdUnitIds:()=>ra,getPreloadVideoAdUnitIds:()=>Gi,getPublicLibVersion:()=>Ip,getShareCookieString:()=>si.ap,getSystemInfoSync:()=>wi.xI,invokeWebviewMethod:()=>da.L,isIsolatedSubpackage:()=>tE,nativeConsole:()=>Sp.s,onAddToFavorites:()=>uE,onAppConfig:()=>cE,onAppEnterBackground:()=>FE,onAppEnterForeground:()=>BE,onAppHide:()=>jE,onAppRoute:()=>KE,onAppRouteDone:()=>XE,onAppShow:()=>WE,onAppUnhang:()=>RE,onCallMethodFromWxs:()=>cS,onError:()=>UE,onNavigationBarTitleUpdate:()=>ZE,onPageNotFound:()=>ME,onPageReload:()=>eS,onPullDownRefresh:()=>lE,onRealtimeDataResponse:()=>lh,onShareAppMessage:()=>dE,onShareTimeline:()=>PE,onStartHandoff:()=>pE,onTabItemTap:()=>fE,onThemeChange:()=>LE,onUnhandledRejection:()=>VE,onWebviewEvent:()=>tS,operateRealtimeData:()=>ch,publishAnalyticsConfig:()=>gE,publishFunctionalPage:()=>nS,publishPageScrollTo:()=>rS,publishTelecontrol:()=>oS,publishUpdateAppData:()=>iS,reportPv:()=>sS,reportRealtimeAction:()=>_E,reportRecycledAPI:()=>ai.Y,reportShareAppMessage:()=>my.Ku,route:()=>r,shareAppMessage:()=>mE,shareAppMessageDirectly:()=>yE,shareAppMessageForFakeNative:()=>AE,shareAppMessageToSpecificContactDirectly:()=>vE,shareAppMessageToSpecificContactForFakeNativeDirectly:()=>bE,shareTimeline:()=>DE,showShareMenu:()=>QE,showShareTimelineMenu:()=>OE,showUpdatableMessageSubscribeButton:()=>kE,startHandoff:()=>aE,subscribeAnalyticsReport:()=>CE,subscribeRecycleStatistics:()=>IE,subscribeSavePageState:()=>EE,subscribeSubjectInfo:()=>aS,subscribeTapHandoffButton:()=>TE,subscribeTapShareButton:()=>SE,subscribeTapShareTimeLineButton:()=>xE,uploadUserLogOnHide:()=>Fh,userShareMenuState:()=>YE});var s={};c.r(s),c.d(s,{getSubpackagesConfig:()=>lS,onSubpackageReady:()=>uu});var d={};c.r(d),c.d(d,{_downloadFileSkipCheckDomain:()=>Ei.o,_operateWXData:()=>ia.JM,_requestSkipCheckDomain:()=>It.a,_socketSkipCheckDomainFactory:()=>Ku,_uploadFileSkipCheckDomain:()=>Au,private_getUserAgent:()=>wi.Yu,uploadToCommonCDN:()=>Xu});var u=c(9045),p=c(812),h=c(5260),f=c(2851);let g=null;(0,u.Ld)("onInputComponentData",(e=>{g=e,m.forEach((e=>{_(e,e.webviewId)})),m=[]}));const _=(e,t=0)=>{const n=g.data;if(n&&"function"==typeof f.Z.webviewEventCallback){const r=JSON.parse(n);if(r.bindkeyboardheightchange)try{f.Z.webviewEventCallback({data:{type:"keyboardheightchange",target:r.target,currentTarget:r.target,timeStamp:Date.now(),touches:[],detail:{duration:e.duration||0,height:e.height||0}},eventName:r.bindkeyboardheightchange,webviewId:t||f.Z.currentWebviewId,nodeId:r.nodeId})}catch(e){throw new h.l0("bind key input error")}}};(0,u.Ld)("removeInputComponent",(e=>{g&&g.inputId===e.inputId&&(g=null)}));let m=[];(0,u.jQ)("onKeyboardHeightChange",((e,t=0)=>{g?_(e,t):m.push({inputId:e.inputId,height:e.height,duration:e.duration,webviewId:t})})),(0,u.jQ)("onKeyboardValueChange",((e,t=0)=>{const n=e.value,r=e.cursor;if((0,u.nY)("setKeyboardValue",{value:n,cursor:r,inputId:e.inputId},[t]),e.data){const r=JSON.parse(e.data);if(r.modelValueName&&o.setModelValueData(e.value,r.modelValueName,t,r.nodeId),"function"==typeof f.Z.webviewEventCallback&&r.bindinput){let o;try{o=f.Z.webviewEventCallback({data:{type:"input",target:r.target,currentTarget:r.target,timeStamp:Date.now(),touches:[],detail:{value:e.value,cursor:e.cursor,keyCode:e.keyCode}},eventName:r.bindinput,webviewId:t,nodeId:r.nodeId})}catch(e){throw new h.l0("bind key input error")}if(r.setKeyboardValue)if(null==o||!1===o);else if("Object"===(0,h.Em)(o)){const t={inputId:e.inputId};n!==o.value&&(t.value=o.value+""),Number.isNaN(parseInt(o.cursor,10))||(t.cursor=parseInt(o.cursor,10),void 0===t.value&&(t.value=n),t.cursor>t.value.length&&(t.cursor=-1)),(0,u.IN)("setKeyboardValue",t)}else n!==o&&(0,u.IN)("setKeyboardValue",{value:o+"",cursor:-1,inputId:e.inputId})}}}));var A,b=c(8159),w=c(2999),C=c(1503),I=c.n(C),E=c(2102),S=c.n(E),T=c(2783),x=c(29),k=c(2582),P=c(3126),D=c(7657),O=c(7452);const N=!k.Qw&&k.ux,R={},M={},L=new b.y,B={},F={},W={},j=["getCenterLocation","getRegion","getScale","includePoints","moveToLocation","translateMarker","setIndoorFloor","getIndoorFloor","setIndoorMaskColor","getRotate","getSkew","eraseLines","setCenterOffset","addCustomLayer","removeCustomLayer","moveAlong","initMarkerCluster","addMarkers","removeMarkers","on","off","once","toScreenLocation","fromScreenLocation","addGroundOverlay","updateGroundOverlay","removeGroundOverlay","openMapApp","setLocMarkerIcon"];let U=0;(0,u.Ld)("mapInsert",((e,t)=>{const{nodeId:n,domId:r,mapId:i,pluginId:a}=e;let s=`${t}_${a}_${r}_`;n&&n!==o.getRootNodeId(t)&&(s+=n),R[s]=i,M[`${t}_${i}`]=e,L.emit("mapInsert"),function(e){B[e]||(B[e]=!0,(0,x.dq)(e,(e=>{delete B[e],Object.keys(R).forEach((t=>{new RegExp("^"+e).test(t)&&(delete M[`${e}_${R[t]}`],delete R[t])})),Object.keys(F).forEach((t=>{new RegExp("^api_"+e).test(t)&&(delete M[`${e}_${R[t.substr(4)]}`],delete F[t])})),Object.keys(F).forEach((t=>{new RegExp("^SQ_"+e).test(t)&&(delete M[t.substr(3)],delete F[t])}))})))}(t)})),(0,u.Ld)("mapRemove",(({domId:e,mapId:t,pluginId:n,nodeId:r},i)=>{let a=`${i}_${n}_${e}_`;r&&r!==o.getRootNodeId(i)&&(a+=r),delete R[a],delete M[`${i}_${t}`];let s=`api_${i}_${n}_${e}_`;r&&r!==o.getRootNodeId(i)&&(s+=r);const c=`SQ_${i}_${t}`;delete F[s],delete F[c]}));class V{}(0,u.Ld)("operateMapCallback",(e=>{const t=e.callbackId;t&&"function"==typeof W[t]&&(W[t](e),delete W[t])}));let G=(A=class{constructor(){const e=this.exportContext=new V;j.forEach((t=>e[t]=this[t].bind(this))),this._lastMarkerPos={},this._lastMarkerDeg={},this._translating={},this._delayTranslate={},this._isGetMarkerPos={}}on(e,t){this._listenerHandler("on",e,t)}off(e,t){this._listenerHandler("off",e,t)}once(e,t){this._listenerHandler("once",e,t)}_invoke(e,t){if(k.DD||k.gm||N||k.Ae||["includeMapPoints","getMapMarker"].indexOf(e)>=0){t.method=e;const n=`callback${this.webviewId}_${t.mapId}_${U++}`;W[n]=function(e){delete e.callbackId,delete e.mapId,delete e.method,e.errMsg&&(e.errMsg.indexOf(":ok")>-1?"function"==typeof t.success&&t.success(e):e.errMsg.indexOf(":fail")>-1&&"function"==typeof t.fail&&t.fail(e)),"function"==typeof t.complete&&t.complete(e)},t.callbackId=n,(0,u.nY)("operateMap",t,[this.webviewId])}else(0,u.IN)(e,t)}toScreenLocation(e={}){this._invokeMethod("toScreenLocation",e)}fromScreenLocation(e={}){this._invokeMethod("fromScreenLocation",e)}getCenterLocation(e={}){this._invokeMethod("getMapCenterLocation",e)}setLocMarkerIcon(e={}){if(!(0,u.r3)("setLocMarkerIcon",e,{iconPath:""}))return;const t=Object.assign({},e);/^(wxfile|https?)/.test(t.iconPath)||(t.iconPath=(0,P.A)(t.iconPath,!1)),this._invokeMethod("setMapLocMarkerIcon",t)}getScale(e={}){this._invokeMethod("getMapScale",e,{beforeSuccess(e){e.scale=+Number.parseFloat(e.scale).toFixed(2)}})}getRegion(e={}){this._invokeMethod("getMapRegion",e)}moveToLocation(e={}){this._invokeMethod("moveToMapLocation",e)}addGroundOverlay(e={}){if(!(0,u.r3)("addGroundOverlay",e,{id:0,src:"",bounds:{}}))return;const t=Object.assign({visible:!0,zIndex:1,opacity:1},e);/^(wxfile|https?)/.test(t.src)||(t.src=(0,P.A)(t.src,!1)),this._invokeMethod("addMapGroundOverlay",t)}openMapApp(e={}){(0,u.r3)("openMapApp",e,{longitude:0,latitude:0,destination:""})&&this._invokeMethod("openMapApp",e)}removeGroundOverlay(e={}){(0,u.r3)("removeGroundOverlay",e,{id:0})&&this._invokeMethod("removeMapGroundOverlay",e)}updateGroundOverlay(e={}){if(!(0,u.r3)("updateGroundOverlay",e,{id:0,src:"",bounds:{}}))return;const t=Object.assign({visible:!0,zIndex:1,opacity:1},e);this._invokeMethod("updateMapGroundOverlay",t)}moveAlong(e={}){if(!(0,u.r3)("moveAlong",e,{duration:0,markerId:0,path:[]}))return;const t={autoRotate:!0};Object.assign(t,e),this._invokeMethod("moveMapMarkerAlong",t)}addMarkers(e={}){if(!(0,u.r3)("addMarkers",e,{markers:[]}))return;const t=e.markers.map(((e={})=>{O.hj(e.id)||console.warn("marker id must be a number");const t=Object.assign({},e);t.anchor=O.Kn(t.anchor)?t.anchor:{x:.5,y:1},t.alpha=O.hj(t.alpha)?t.alpha:1,t.rotate=O.hj(t.rotate)?t.rotate:0;const n=t.iconPath;return O.HD(n)&&!/^(wxfile|https?)/.test(n)&&(t.iconPath=(0,P.A)(n,!1)),O.Kn(t.label)&&(t.label=Object.assign({content:"",color:"#000000",fontSize:12,borderRadius:0,borderWidth:0,borderColor:"#000000",bgColor:"#00000000",padding:0,anchorX:0,anchorY:0,textAlign:"right"},t.label)),O.Kn(t.callout)?(t.callout=Object.assign({content:"",color:"#000000",fontSize:12,display:"BYCLICK",borderRadius:0,borderWidth:0,borderColor:"#00000000",bgColor:"#ffffff",padding:0,anchorX:0,anchorY:0,textAlign:"center"},t.callout),t.callout.display="ALWAYS"===t.callout.display?1:0):O.HD(t.title)&&(t.callout={content:t.title,bgColor:"#FFFFFF",padding:10,display:0,textAlign:"center"}),delete t.title,t.data=JSON.stringify({markerId:t.id}),t})),n={};t.forEach(((e,t)=>{const r=e.iconPath;O.HD(r)&&/^cloud:/.test(r)&&(n[r]||(n[r]=[]),n[r].push(t))}));const r=Object.keys(n);(0,D.V)(r,"image",(o=>{[...o.data.map((e=>e.url))].forEach(((e,o)=>{n[r[o]].forEach((n=>{t[n].iconPath=e}))}));const i=Object.assign({clear:!1},e,{markers:t});this._invokeMethod("addMapMarkers",i)}))}removeMarkers(e={}){if(!(0,u.r3)("removeMarkers",e,{markerIds:[]}))return;const t=Object.assign({},{markers:e.markerIds},e);this._invokeMethod("removeMapMarkers",t)}initMarkerCluster(e={}){const t=Object.assign({enableDefaultStyle:!0,zoomOnClick:!0,gridSize:60},e);this._invokeMethod("initMapMarkerCluster",t)}translateMarker(e={}){const t=e.markerId;if(void 0===t)return void console.warn("MapContext.translateMarker: require markerId");if(!e.destination)return void console.warn("MapContext.translateMarker: require destination");if(this._translating[t])return void(this._delayTranslate[t]?this._delayTranslate[t].push(e):this._delayTranslate[t]=[e]);if(!this._isGetMarkerPos[t])return this._translating[t]=!0,this._invokeMethod("getMapMarker",{markerId:t,success:e=>{this._lastMarkerPos[t]=e.pos},complete:()=>{this._isGetMarkerPos[t]=!0,this._translating[t]=!1;const e=this._delayTranslate[t];e&&e.length&&this.translateMarker(e.shift())}}),void(this._delayTranslate[t]?this._delayTranslate[t].push(e):this._delayTranslate[t]=[e]);0===e.duration&&(e.duration=1);const n={markerId:t,keyFrames:[],success:t=>{"function"==typeof e.success&&e.success.call(this,t),"function"==typeof e.animationEnd&&e.animationEnd.call(this)},fail:n=>{this._delayTranslate[t]=[],"function"==typeof e.fail&&e.fail.call(this,n)},complete:n=>{"function"==typeof e.complete&&e.complete.call(this,n),this._translating[t]=!1;const r=this._delayTranslate[t];r&&r.length&&this.translateMarker(r.shift())}};let r=0;const o=this._lastMarkerPos[t],i=e.destination,a=!(o&&o.latitude===i.latitude&&o.longitude===i.longitude);if(e.autoRotate||"number"!=typeof e.rotate){let n,s;if(o){const e=i.latitude-o.latitude,t=i.longitude-o.longitude,r=e/t||0;n=Math.abs((t<0?180:0)-Math.abs(180*Math.atan(r)/Math.PI))*(e>0?-1:1)}"number"==typeof this._lastMarkerDeg[t]&&(s=n-this._lastMarkerDeg[t],Math.abs(s)>180&&(s=s>0?s-360:s+360),Math.abs(s)>3&&e.autoRotate&&a&&(r=s)),(Math.abs(s)>3&&e.autoRotate||void 0===this._lastMarkerDeg[t])&&(this._lastMarkerDeg[t]=n)}else{let n=e.rotate-(this._lastMarkerDeg[t]||0);Math.abs(n)>3&&(Math.abs(n)>180&&(n=n>0?n-360:n+360),r=n,this._lastMarkerDeg[t]=e.rotate)}const s="number"==typeof e.duration?e.duration:1e3;e.moveWithRotate?n.keyFrames.push(I()({rotate:r,duration:s},e.destination)):(a&&n.keyFrames.push(I()({duration:s},e.destination)),0!==r&&n.keyFrames.unshift({rotate:r,duration:Math.abs(r)<10?100:500})),n.keyFrames.length>0?(this._translating[t]=!0,this._invokeMethod("translateMapMarker",n)):setTimeout((function(){n.success(),n.complete()})),this._lastMarkerPos[t]=e.destination}includePoints(e={}){if(!(e.points&&e.points instanceof Array))return;e.points.forEach((e=>{e.latitude=Number(e.latitude),e.longitude=Number(e.longitude)}));const t=e.padding;e.padding=[0,0,0,0],t&&(e.padding[0]=Number(t[0])||0,e.padding[1]=Number(t[1])||0,e.padding[2]=Number(t[2])||0,e.padding[3]=Number(t[3])||0),this._invokeMethod("includeMapPoints",e)}setIndoorFloor(e={}){e.buildingId?e.floorName?this._invokeMethod("setMapIndoorFloor",e):console.warn("MapContext.setIndoorFloor: require floorName"):console.warn("MapContext.setIndoorFloor: require buildingId")}getIndoorFloor(e={}){this._invokeMethod("getMapIndoorFloor",e)}getRotate(e={}){this._invokeMethod("getMapRotate",e)}getSkew(e={}){this._invokeMethod("getMapSkew",e)}setIndoorMaskColor(e={}){this._invokeMethod("setMapIndoorMaskColor",e)}eraseLines(e={}){e.lines&&e.lines instanceof Array?this._invokeMethod("eraseMapLines",e):console.warn("MapContext.eraseLines: require lines")}setCenterOffset(e={}){const t=Object.assign({offset:[.5,.5],animated:!1},e);this._invokeMethod("setMapCenterOffset",t)}addCustomLayer(e={}){(0,u.r3)("addCustomLayer",e,{layerId:""})&&this._invokeMethod("addMapCustomLayer",e)}removeCustomLayer(e={}){(0,u.r3)("removeCustomLayer",e,{layerId:""})&&this._invokeMethod("removeMapCustomLayer",e)}},S()(A.prototype,"toScreenLocation",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"toScreenLocation"),A.prototype),S()(A.prototype,"fromScreenLocation",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"fromScreenLocation"),A.prototype),S()(A.prototype,"getCenterLocation",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"getCenterLocation"),A.prototype),S()(A.prototype,"setLocMarkerIcon",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"setLocMarkerIcon"),A.prototype),S()(A.prototype,"getScale",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"getScale"),A.prototype),S()(A.prototype,"getRegion",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"getRegion"),A.prototype),S()(A.prototype,"moveToLocation",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"moveToLocation"),A.prototype),S()(A.prototype,"addGroundOverlay",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"addGroundOverlay"),A.prototype),S()(A.prototype,"openMapApp",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"openMapApp"),A.prototype),S()(A.prototype,"removeGroundOverlay",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"removeGroundOverlay"),A.prototype),S()(A.prototype,"updateGroundOverlay",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"updateGroundOverlay"),A.prototype),S()(A.prototype,"moveAlong",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"moveAlong"),A.prototype),S()(A.prototype,"addMarkers",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"addMarkers"),A.prototype),S()(A.prototype,"removeMarkers",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"removeMarkers"),A.prototype),S()(A.prototype,"initMarkerCluster",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"initMarkerCluster"),A.prototype),S()(A.prototype,"translateMarker",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"translateMarker"),A.prototype),S()(A.prototype,"includePoints",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"includePoints"),A.prototype),S()(A.prototype,"setIndoorFloor",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"setIndoorFloor"),A.prototype),S()(A.prototype,"getIndoorFloor",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"getIndoorFloor"),A.prototype),S()(A.prototype,"getRotate",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"getRotate"),A.prototype),S()(A.prototype,"getSkew",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"getSkew"),A.prototype),S()(A.prototype,"setIndoorMaskColor",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"setIndoorMaskColor"),A.prototype),S()(A.prototype,"eraseLines",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"eraseLines"),A.prototype),S()(A.prototype,"setCenterOffset",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"setCenterOffset"),A.prototype),S()(A.prototype,"addCustomLayer",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"addCustomLayer"),A.prototype),S()(A.prototype,"removeCustomLayer",[T.Qu],Object.getOwnPropertyDescriptor(A.prototype,"removeCustomLayer"),A.prototype),A);class $ extends G{constructor(e,t,n,r){if(super(),"string"!=typeof e)throw new h.iZ("Parameter 1 should be a string");this.domId=e,this.pluginId=r,this.webviewId=t,this.nodeId=n}_invokeMethod(e,t,n={}){const r=`${this.webviewId}_${this.pluginId}_${this.domId}_${this.nodeId}`;"number"==typeof R[r]||R[r]?(t.mapId=R[r],this._invoke(e,t,n)):L.on("mapInsert",(()=>{t.mapId=R[r],this._invoke(e,t,n)}))}_listenerHandler(e,t,n){if(!["on","off","once"].includes(e))return;const r=`${this.webviewId}_${this.pluginId}_${this.domId}_${this.nodeId}`,o=this.webviewId;let i;"number"==typeof R[r]||R[r]?(i=R[r],z[e](`${t}_${o}_${i}`,n)):L.on("mapInsert",(()=>{i=R[r],z[e](`${t}_${o}_${i}`,n)}))}}class H extends G{constructor(e,t){super(),this.mapId=e,this.webviewId=t}_invokeMethod(e,t,n={}){t.mapId=this.mapId,this._invoke(e,t,n)}_listenerHandler(e,t,n){if(!["on","off","once"].includes(e))return;const r=this.webviewId,o=this.mapId;z[e](`${t}_${r}_${o}`,n)}}const Z=(e,t,n="",r="")=>{let i=`api_${t}_${r}_${e}_`;if(n&&n!==o.getRootNodeId(t)&&(i+=n),F[i])return F[i].exportContext;const a=new $(e,t,n,r);return F[i]=a,a.exportContext},Q=(e,t)=>{const n=`SQ_${t}_${e}`;if(F[n])return F[n].exportContext;const r=new H(e,t);return F[n]=r,r.exportContext};var Y=c(2276);const z=new b.Z({maxListeners:2e5}),q={onMapMarkerClusterCreate:"markerClusterCreate",onMapMarkerClusterClick:"markerClusterClick"};Object.keys(q).forEach((e=>{(0,w.n)(e,((t={},n=0)=>{const r=t.mapId,o=q[e];delete t.mapId,z.emit(`${o}_${n}_${r}`,t)}))})),(0,u.jQ)("onMapMarkerClick",((e={},t=0)=>{(0,Y.Hk)();const n=M[`${t}_${e.mapId}`];if(n&&n.bindmarkertap&&"function"==typeof f.Z.webviewEventCallback){const r=JSON.parse(e.data);f.Z.webviewEventCallback({data:{type:"markertap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{markerId:r.markerId},markerId:r.markerId,_userTap:!0},eventName:n.bindmarkertap,webviewId:t,nodeId:n.nodeId})}})),(0,u.jQ)("onMapCalloutClick",((e={},t=0)=>{(0,Y.Hk)();const n=M[`${t}_${e.mapId}`];if(n&&n.bindcallouttap&&"function"==typeof f.Z.webviewEventCallback){const r=JSON.parse(e.data);f.Z.webviewEventCallback({data:{type:"callouttap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{markerId:r.markerId},markerId:r.markerId,_userTap:!0},eventName:n.bindcallouttap,webviewId:t,nodeId:n.nodeId})}})),(0,u.jQ)("onMapLabelClick",((e={},t=0)=>{(0,Y.Hk)();const n=M[`${t}_${e.mapId}`];if(n&&n.bindlabeltap&&"function"==typeof f.Z.webviewEventCallback){const r=JSON.parse(e.data);f.Z.webviewEventCallback({data:{type:"labeltap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{markerId:r.markerId},markerId:r.markerId,_userTap:!0},eventName:n.bindlabeltap,webviewId:t,nodeId:n.nodeId})}})),(0,u.jQ)("onMapControlClick",((e={},t=0)=>{if((0,Y.Hk)(),e.data&&"function"==typeof f.Z.webviewEventCallback){const n=JSON.parse(e.data);n.bindcontroltap&&f.Z.webviewEventCallback({data:{type:"controltap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{controlId:n.controlId},controlId:n.controlId,_userTap:!0},eventName:n.bindcontroltap,webviewId:t,nodeId:n.nodeId})}})),(0,u.Ld)("onMapControlTap",(({data:e},t)=>{if((0,Y.Hk)(),e&&"function"==typeof f.Z.webviewEventCallback){const n=JSON.parse(e);n.bindcontroltap&&f.Z.webviewEventCallback({data:{type:"controltap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{controlId:n.controlId},controlId:n.controlId,_userTap:!0},eventName:n.bindcontroltap,webviewId:t,nodeId:n.nodeId})}})),(0,u.jQ)("onMapRegionChange",((e={},t=0)=>{const n=M[`${t}_${e.mapId}`];if(n&&n.bindregionchange&&"function"==typeof f.Z.webviewEventCallback){const r={type:e.type,rotate:e.rotate,skew:e.skew,gesture:e.gesture,scale:+Number.parseFloat(e.scale).toFixed(2),centerLocation:e.centerLocation,region:e.region},o={target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{type:e.type},type:e.type,causedBy:e.causedBy};"end"===e.type&&(o.detail=r),f.Z.webviewEventCallback({data:o,eventName:n.bindregionchange,webviewId:t,nodeId:n.nodeId})}})),(0,u.jQ)("onMapClick",((e={},t=0)=>{(0,Y.Hk)();const n=M[`${t}_${e.mapId}`];n&&n.bindtap&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"tap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{longitude:e.longitude,latitude:e.latitude},_userTap:!0},eventName:n.bindtap,webviewId:t,nodeId:n.nodeId})})),(0,u.jQ)("onMapPoiClick",((e={},t=0)=>{(0,Y.Hk)();const n=M[`${t}_${e.mapId}`];if(n&&n.bindpoitap&&"function"==typeof f.Z.webviewEventCallback){const r={name:e.name,longitude:e.longitude,latitude:e.latitude};e.buildingId&&(r.buildingId=e.buildingId),e.floorName&&(r.floorName=e.floorName),f.Z.webviewEventCallback({data:{type:"poitap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:r,_userTap:!0},eventName:n.bindpoitap,webviewId:t,nodeId:n.nodeId})}})),(0,u.jQ)("onMapIndoorChange",((e={},t=0)=>{const n=M[`${t}_${e.mapId}`];n&&n.bindindoorchange&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{},info:{buildingId:e.buildingId,buildingName:e.buildingName,floorIndex:e.floorIndex,floorList:e.floorList}},eventName:n.bindindoorchange,webviewId:t,nodeId:n.nodeId})})),(0,u.jQ)("onMapAnchorPointClick",((e={},t=0)=>{(0,Y.Hk)();const n=M[`${t}_${e.mapId}`];n&&n.bindanchorpointtap&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"anchorpointtap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{longitude:e.longitude,latitude:e.latitude},_userTap:!0},eventName:n.bindanchorpointtap,webviewId:t,nodeId:n.nodeId})}));const J=(e,t,n)=>{e=e||[];const r=[],o=[];if("onTouchStart"===t){for(let t=0;t<e.length;++t)r.push(e[t]);const t={x:n.touch.x,y:n.touch.y,identifier:n.touch.id};o.push(t),r.push(t)}else if("onTouchMove"===t)for(let t=0;t<e.length;++t){const i=e[t];let a=!1;for(let e=0;e<n.touches.length;++e){const t={x:n.touches[e].x,y:n.touches[e].y,identifier:n.touches[e].id};if(t.identifier===i.identifier&&(i.x!==t.x||i.y!==t.y)){r.push(t),o.push(t),a=!0;break}}a||r.push(i)}else if("onTouchEnd"===t){const t={x:n.touch.x,y:n.touch.y,identifier:n.touch.id};for(let n=0;n<e.length;++n){const i=e[n];i.identifier===t.identifier?o.push(t):r.push(i)}}else if("onTouchCancel"===t)for(let e=0;e<n.touches.length;++e){const t={x:n.touches[e].x,y:n.touches[e].y,identifier:n.touches[e].id};o.push(t)}else if("onLongPress"===t){const t={x:n.touch.x,y:n.touch.y,identifier:n.touch.id};for(let n=0;n<e.length;++n)e[n].identifier===t.identifier?r.push(t):r.push(e[n]);o.push(t)}return{touches:r,changedTouches:o}},K={onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchCancel:"touchcancel",onLongPress:"longtap"};var X=c(6962),ee=c(337),te=c(3812),ne=c(2235),re=c(1661),oe=c(665);oe.Z.onReady((()=>{["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onLongPress"].forEach((e=>{(0,w.n)(e,((t,n=0)=>{const r=JSON.parse(t.data||"{}"),{canvasNumber:o,skia:i,type:a}=r;if("TextView"===a||"ImageView"===a)return;if("android-webgl"===a)return void function(e,t,n,r){if("onLongPress"===e)return;const o=(0,te.f5)(r,t.canvasNumber),{touches:i,changedTouches:a}=J(o.lastTouches,e,n);o.lastTouches=i,o[e]&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:K[e],timeStamp:new Date-o.startTime,target:o.target,touches:(0,ne.LG)(i),changedTouches:(0,ne.LG)(a)},eventName:o[e],webviewId:r,nodeId:o.nodeId})}(e,r,t,n);if(i){if(!(0,re.n)(ee.iO,o))return}else if(!(0,re.n)(X.canvasInfo,o))return;let s;s=i?ee.iO[o].data:X.canvasInfo[o].data;const{touches:c,changedTouches:l}=J(s.lastTouches,e,t);s.lastTouches=c,s[e]&&"function"==typeof f.Z.webviewEventCallback&&("onTouchMove"===e&&0===l.length||f.Z.webviewEventCallback({data:{type:K[e],timeStamp:new Date-s.startTime,target:s.target,touches:c,changedTouches:l},eventName:s[e],webviewId:n,nodeId:r.nodeId}))}))}))}));var ie=c(5150);let ae=["onVideoPlay","onVideoPause","onVideoTimeUpdate","onVideoClickFullScreenBtn","onVideoClickDanmuBtn","onVideoFullScreenChange","onVideoWaiting","onVideoError","onVideoLoadedMetaData","onVideoProgress","onVideoBackgroundPlaybackChange"];oe.Z.onReady((()=>{k.wZ&&oe.Z.useXWebVideo&&(ae=ae.map((e=>e.replace("on","onXWeb"))).concat(ae)),ae.forEach((e=>{(0,w.n)(e,((t={},n)=>{const r=`bind${e.replace("XWeb","").substring(7).toLowerCase()}`,{handlers:o,event:i,createdTimestamp:a,nodeId:s}=JSON.parse(t.data);if(!o)return;const c=JSON.parse(t.data);if(t.videoPlayerId=t.videoPlayerId||c&&c.videoPlayerId||"-1000",o[r]&&"function"==typeof f.Z.webviewEventCallback){const e={type:r.substring(4),target:i.target,currentTarget:i.currentTarget,timeStamp:(t.timeStamp||Date.now())-a,detail:{}};if("bindtimeupdate"===r&&(e.detail={currentTime:t.position,duration:t.duration}),"bindfullscreenchange"===r){let n=t.direction;n=0===n||180===n||"vertical"===n?"vertical":"horizontal",e.detail={fullScreen:t.fullScreen,fullscreen:t.fullScreen,direction:n}}"binderror"===r?e.detail={errMsg:t.errMsg}:"bindprogress"===r?e.detail={buffered:t.buffered}:"bindloadedmetadata"===r?e.detail={duration:t.duration,width:t.width,height:t.height}:"bindbackgroundplaybackchange"===r&&(e.detail={playInBackground:t.playInBackground}),f.Z.webviewEventCallback({data:e,eventName:o[r],webviewId:n,nodeId:s})}}))}))})),(0,u.jQ)("onEnterVideoPictureInPicture",((e={})=>{const t=ie.fH.webviewId,n=ie.oo[`${t}_${e.videoPlayerId}`];n&&n.handlers.bindenterpictureinpicture&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"enterpictureinpicture",target:n.event.target,currentTarget:n.event.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindenterpictureinpicture,webviewId:t,nodeId:n.nodeId})})),(0,u.jQ)("onLeaveVideoPictureInPicture",((e={})=>{const t=ie.fH.webviewId,n=ie.oo[`${t}_${e.videoPlayerId}`];n&&n.handlers.bindleavepictureinpicture&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"leavepictureinpicture",target:n.event.target,currentTarget:n.event.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindleavepictureinpicture,webviewId:t,nodeId:n.nodeId})}));let se=!1;const ce={};(0,u.Ld)("enableCoverViewScrollEventTransfer",(({nodeId:e})=>{ce[e]=!0})),(0,u.Ld)("disableCoverViewScrollEventTransfer",(({nodeId:e})=>{ce[e]=!1})),(0,u.jQ)("onScrollViewScroll",((e={},t=0)=>{if(se||(setTimeout((function(){se=!1}),500),(0,u.IN)("hideKeyboard",{}),se=!0),!e.data||"function"!=typeof f.Z.webviewEventCallback)return;const n=JSON.parse(e.data);n.bindscroll&&f.Z.webviewEventCallback({data:{type:"scroll",target:n.target,currentTarget:n.target,detail:{scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop},timeStamp:Date.now()-n.timeStamp},eventName:n.bindscroll,webviewId:t,nodeId:n.nodeId}),ce[n.nodeId]&&(0,u.nY)("coverViewScrollEvent",{nodeId:n.nodeId,scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})}));var le,de=c(3356),ue=c.n(de),pe=c(5542),he=c(4931),fe=c(7725),ge=c(9187);const _e={},me={},ye={},ve=[],Ae={},be=new b.y,we=new WeakMap;const Ce=function(e){let t=[],n=1;return(0,u.Ld)(e,(e=>{t.forEach((t=>{const n=t[0],r=t[1];n.cid===e.cid&&n.cameraId===e.cameraId&&r(e)})),t=[]})),function(e,r){e.cid=n++,t.push([e,r])}}("onOperateCameraCallback"),Ie={};function Ee({cameraId:e,pluginId:t},n){be.emit("cameraRemoved"),delete _e[`${n}_${t}`],delete me[`${n}_${e}`],delete ye[`${n}_${e}`],delete Ie[n]}(0,w.n)("onCameraInitDone",(()=>{Ie[f.Z.currentWebviewId]=!0,be.emit("cameraInitialized")})),(0,u.Ld)("cameraInserted",(({cameraId:e,pluginId:t,bindings:n},r)=>{_e[`${r}_${t}`]=e,me[`${r}_${e}`]=n,be.emit("cameraInsert"),(0,x.dq)(r,(()=>{Ee({cameraId:e,pluginId:t},r)}))})),(0,u.Ld)("cameraUpdated",(({cameraId:e,hidden:t},n)=>{ye[`${n}_${e}`]=t})),(0,u.Ld)("cameraRemoved",(({cameraId:e,pluginId:t},n)=>{Ee({cameraId:e,pluginId:t},n)})),(0,he.q)((()=>{if(void 0!==i&&"function"===i.getCurrentPagesByDomain){const e=i.getCurrentPagesByDomain("").map((e=>e.__wxWebviewId__));Object.keys(_e).forEach((t=>{const n=t.split("_").shift();-1===e.indexOf(Number(n))&&(delete me[`${n}_${_e[t]}`],delete ye[`${n}_${_e[t]}`],delete _e[t],Ae[n]&&(Ae[n].forEach((e=>{clearTimeout(e)})),delete Ae[n]))}))}})),(0,u.jQ)("onCameraVideoTaken",((e={},t=0)=>{ve.forEach((n=>{n(e,t)}))}));let Se=(le=class{constructor(e,t){this.webviewId=e,this.pluginId=t}onCameraFrame(e){if(k.gm||k.qB)return function(e,t,n){let r=null,o=null,i=null;const a=(0,T.mh)("start",ue()((function*(){let c=480,l=640;const d=`${t}_${n}`;if(!e||"function"!=typeof e)throw new Error("callback is not a function");if("number"!=typeof _e[d]&&!_e[d])return yield new Promise((e=>be.once("cameraInsert",e))),a();{const e=me[`${t}_${_e[d]}`],{frameSize:n}=e||{};"small"===n?(c=288,l=352):"medium"===n?(c=480,l=640):"large"===n&&(c=720,l=1280)}i=()=>{s()},be.once("cameraRemoved",i);const u=window.createObjectURL||window.URL&&window.URL.createObjectURL||window.webkitURL.createObjectURL,p=document.createElement("video"),h=document.createElement("canvas"),f=h.getContext("2d");let g;h.width=c,h.height=l,p.style.width=c+"px",p.style.height=l+"px";try{g=yield new Promise(((e,t)=>{navigator.getUserMedia({video:{width:c,height:l},audio:!1},e,t)}))}catch(e){throw new Error("camera is not found")}"srcObject"in p?p.srcObject=g:p.src=u(g),p.play(),r=g.getTracks()[0];const _=()=>{f.drawImage(p,0,0),e({width:c,height:l,data:f.getImageData(0,0,c,l).data.buffer}),o=window.requestAnimationFrame(_)};o=window.requestAnimationFrame(_)}))),s=(0,T.mh)("stop",ue()((function*(){window.cancelAnimationFrame(o),be.off("cameraRemoved",i),r&&r.stop()})));return{start:a,stop:s}}(e,this.webviewId,this.pluginId);const t=this.webviewId,n=(0,T.Vl)(this._invokeMethod.bind(this,"listenFrameChange")),r=(0,T.Vl)(this._invokeMethod.bind(this,"closeFrameChange"));let o=!1,i=null,a=null,s=null;const c=(0,T.mh)("start",ue()((function*(){if(o)return;if(o=!0,!e||"function"!=typeof e)throw new Error("callback is not a function");if(k.wZ&&!Ie[t]&&(yield new Promise((e=>be.once("cameraInitialized",e)))),!o)throw new Error("listener has been stopped");let r;k.cj&&(i=()=>{if(o&&a){const t={width:a.width,height:a.height,data:a.data};e(t)}},(0,w.n)("onCameraFrame",i));try{r=yield n({})}catch(e){throw k.cj&&(0,w.r)("onCameraFrame",i),e}if(!o)throw new Error("listener has been stopped");if(!pe.Z)throw new Error("onCameraFrame is not supported on your device");const c=pe.Z.get(r.bufferId);if(!c)throw new Error("onCameraFrame fails to allocate ArrayBuffer");c.__proto__=ArrayBuffer.prototype;const d={width:r.width,height:r.height,data:c};k.cj?a={width:r.width,height:r.height,data:c}:(i=()=>{o&&e(d)},(0,w.n)("onCameraFrame",i)),s=()=>{l()},be.once("cameraRemoved",s),(0,ge.QN)("cameraFrame")}))),l=(0,T.mh)("stop",ue()((function*(){o&&(o=!1,s&&(be.off("cameraRemoved",s),s=null),i&&((0,w.r)("onCameraFrame",i),i=null),yield r({}))})));return{start:c,stop:l}}_invoke(e,t){t.type=e,k.gm||k.qB||k.Ae?(Ce(t,(function({imageData:n,videoData:r}){function o(t,r){(0,u.IN)("base64ToTempFilePath",Object.assign({fileType:"jpg",base64Data:n},t),{beforeAll:n=>{"takePhoto"===t.type?n.tempImagePath=n.tempFilePath:n.tempFilePath&&(n.tempThumbPath=n.tempFilePath),r&&(n.tempVideoPath=r),n.errMsg=n.errMsg.replace("base64ToTempFilePath",e),delete n.tempFilePath}})}r?(0,u.IN)("base64ToTempFilePath",{fileType:"webm",base64Data:r,complete(e){o(t,e.tempFilePath)}}):"startRecord"===e?("function"==typeof t.success&&t.success({errMsg:"startRecord:ok"}),"function"==typeof t.complete&&t.complete({errMsg:"startRecord:ok"})):o(t)})),(0,u.nY)("operateCamera",t,[this.webviewId])):(0,u.IN)("operateCamera",t)}_invokeMethod(e,t){const n=`${this.webviewId}_${this.pluginId}`;if("number"==typeof _e[n]||_e[n]){const r=me[`${this.webviewId}_${_e[n]}`];if(r.isCancelAuth)return"function"==typeof t.fail&&t.fail({errMsg:"user cancel auth"}),void("function"==typeof t.complete&&t.complete({errMsg:"user cancel auth"}));if("scanCode"===r.mode&&("takePhoto"===e||"startRecord"===e))return"function"==typeof t.fail&&t.fail({errMsg:"Not allow to invoke takePhoto in 'scanCode' mode."}),void("function"==typeof t.complete&&t.complete({errMsg:"Not allow to invoke takePhoto in 'scanCode' mode."}));t.cameraId=_e[n],this._invoke(e,t)}else be.once("cameraInsert",(()=>{this._invokeMethod(e,t)}))}takePhoto(e={}){const t=`${this.webviewId}_${this.pluginId}`;if(ye[`${this.webviewId}_${_e[t]}`])return"function"==typeof e.fail&&e.fail({errMsg:"Not allow to invoke takePhoto if camera is hidden."}),void("function"==typeof e.complete&&e.complete({errMsg:"Not allow to invoke takePhoto if camera is hidden."}));this._invokeMethod("takePhoto",e)}setZoom(e={}){(0,u.r3)("CameraContext.setZoom",e,{zoom:1})&&(e.zoom<1&&(e.zoom=1),this._invokeMethod("setZoom",e))}startRecord(e={}){(0,fe.I)({scope:"scope.record",success:()=>{we.set(this,!0),this._startRecord(e)},fail:()=>{"function"==typeof e.fail&&e.fail({errMsg:"Failed to invoke 'startRecord' on 'CameraContext': not allowed to use microphone."}),"function"==typeof e.complete&&e.complete({errMsg:"Failed to invoke 'startRecord' on 'CameraContext': not allowed to use microphone."})}})}_startRecord(e={}){if(!we.get(this))return;const t=`${this.webviewId}_${this.pluginId}`;if(ye[`${this.webviewId}_${_e[t]}`])return"function"==typeof e.fail&&e.fail({errMsg:"Not allow to invoke takePhoto if camera is hidden."}),void("function"==typeof e.complete&&e.complete({errMsg:"Not allow to invoke takePhoto if camera is hidden."}));const n=e.timeoutCallback,r=e.fail;if(e.fail=e=>{this._isRecording=!1,clearTimeout(i),"function"==typeof r&&r(e)},this._invokeMethod("startRecord",e),this._isRecording)return;this._isRecording=!0;const o="number"==typeof e.timeout?Math.max(0,e.timeout):30,i=this._timer=setTimeout((()=>{this._isRecording&&(this.stopRecord({complete:n||function(){}}),this._isRecording=!1)}),1e3*o);0===o?clearTimeout(i):Ae[this.webviewId]?Ae[this.webviewId].push(i):Ae[this.webviewId]=[i];const a=this._videoTaken=(e,t)=>{const r=`${t}_${this.pluginId}`;if(e.cameraId!==_e[r])return;const o=ve.indexOf(a);o>-1&&ve.splice(o,1),this._isRecording&&(delete e.cameraId,"function"==typeof n&&n(e),this._isRecording=!1,clearTimeout(i))};ve.push(a)}stopRecord(e={}){const t=ve.indexOf(this._videoTaken);t>-1&&(ve.splice(t,1),this._videoTaken=null),this._invokeMethod("stopRecord",e),this._isRecording=!1,clearTimeout(this._timer)}},S()(le.prototype,"takePhoto",[T.Qu],Object.getOwnPropertyDescriptor(le.prototype,"takePhoto"),le.prototype),S()(le.prototype,"setZoom",[T.Qu],Object.getOwnPropertyDescriptor(le.prototype,"setZoom"),le.prototype),S()(le.prototype,"startRecord",[T.Qu],Object.getOwnPropertyDescriptor(le.prototype,"startRecord"),le.prototype),S()(le.prototype,"stopRecord",[T.Qu],Object.getOwnPropertyDescriptor(le.prototype,"stopRecord"),le.prototype),le);function Te(e,t,n,r=""){return new Se(t,r)}(0,w.n)("onCameraNeedAuthCancel",((e={},t=0)=>{const n=me[`${t}_${e.cameraId}`];n&&n.binderror&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"error",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{msg:"user cancel auth"}},eventName:n.binderror,webviewId:t,nodeId:n.nodeId}),n&&(n.isCancelAuth=!0)})),(0,w.n)("onCameraStop",((e={},t=0)=>{const n=me[`${t}_${e.cameraId}`];n&&n.bindstop&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"stop",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{}},eventName:n.bindstop,webviewId:t,nodeId:n.nodeId})})),(0,w.n)("onCameraInitDone",((e={},t=0)=>{const n=me[`${t}_${e.cameraId}`];n&&n.bindinitdone&&"function"==typeof f.Z.webviewEventCallback?f.Z.webviewEventCallback({data:{type:"initdone",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{maxZoom:e.maxZoom}},eventName:n.bindinitdone,webviewId:t,nodeId:n.nodeId}):be.once("cameraInsert",(()=>{const n=me[`${t}_${e.cameraId}`];n&&n.bindinitdone&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"initdone",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{maxZoom:e.maxZoom}},eventName:n.bindinitdone,webviewId:t,nodeId:n.nodeId})}))})),(0,w.n)("onCameraScanCode",((e={},t=0)=>{const n=me[`${t}_${e.cameraId}`];if(!n||!n.bindscancode||"function"!=typeof f.Z.webviewEventCallback)return;const r={data:{type:"scancode",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{type:e.type,result:e.result,rawData:e.rawData,charSet:e.charSet,scanArea:e.scanArea}},eventName:n.bindscancode,webviewId:t,nodeId:n.nodeId};"barcode"===e.type&&(delete r.data.detail.rawData,delete r.data.detail.charSet),f.Z.webviewEventCallback(r)}));var xe=c(4532);const ke=(e={})=>{(0,u.r3)("setKeepScreenOn",e,{keepScreenOn:!0})&&(0,u.IN)("setKeepScreenOn",e,{})};var Pe;const De=k.gm,Oe={},Ne={},Re={},Me=new b.y,Le={},Be=new WeakMap,Fe={},We=["play","stop","mute","pause","resume","requestFullScreen","exitFullScreen","snapshot","requestPictureInPicture","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback"],je=Object.assign,Ue={};function Ve(e,t){return`${e}_${t}`}function Ge(e){Le[e]||(Le[e]=!0,(0,x.dq)(e,(e=>{delete Le[e],Object.keys(Oe).forEach((t=>{new RegExp("^"+e).test(t)&&(delete Ne[`${e}_${Oe[t]}`],delete Oe[t])})),Object.keys(Fe).forEach((t=>{new RegExp("^api_"+e).test(t)?(delete Ne[`${e}_${Oe[t.substr(4)]}`],delete Fe[t]):new RegExp("^SQ_"+e).test(t)&&(delete Ne[t.substr(3)],delete Fe[t])})),function(e){delete Ke[e]}(e),ke({keepScreenOn:!1})})))}(0,u.Ld)("xWebLivePlayerSupported",(({insert2XWebEnabled:e,viewId:t},n)=>{Ue[Ve(n,t)]=e,Je(Ue)})),(0,u.Ld)("updateLivePlayerPictureInPicture",((e={},t)=>{Re.webviewId=t,Re.playerId=e.playerId})),["xWebLivePlayerInsert","livePlayerInsert"].forEach((e=>{(0,u.Ld)(e,(({viewId:e,domId:t,playerId:n,pluginId:r,data:i,nodeId:a},s)=>{const c=Ue[Ve(s,e)]?e:n;let l=`${s}_${r}_${t}_`;a&&a!==o.getRootNodeId(s)&&(l+=a),Oe[l]=c,Ne[`${s}_${c}`]=i||{},Me.emit("livePlayerInsert"),Ge(s),function(e){const t=Ke[e];if(Ke[e]=[],!t)return;for(let e=0;e<t.length;e++){const n=t[e];tt(n[0],n[1],n[2])}}(s)}))})),["xWebLivePlayerRemoved","livePlayerRemoved"].forEach((e=>{(0,u.Ld)(e,(({viewId:e,domId:t,playerId:n,pluginId:r,nodeId:i},a)=>{const s=Ue[Ve(a,e)]?e:n;let c=`${a}_${r}_${t}_`;i&&i!==o.getRootNodeId(a)&&(c+=i),delete Oe[c],delete Ne[`${a}_${s}`];let l=`api_${a}_${r}_${t}_`;i&&i!==o.getRootNodeId(a)&&(l+=i);const d=`SQ_${a}_${s}`;delete Fe[l],delete Fe[d],ke({keepScreenOn:!1})}))}));class $e{}let He=(Pe=class{constructor(){const e=this.exportContext=new $e;We.forEach((t=>e[t]=this[t].bind(this)))}play(e={}){const t=this._getAppStatus();t===xe.w$.BACK_GROUND||t===xe.w$.LOCK||(this._invokeMethod("play",[],e),ke({keepScreenOn:!0}))}stop(e={}){this._invokeMethod("stop",[],e),ke({keepScreenOn:!1})}mute(e={}){this._invokeMethod("mute",[],e)}pause(e={}){this._invokeMethod("pause",[],e),ke({keepScreenOn:!1})}resume(e={}){this._invokeMethod("resume",[],e),ke({keepScreenOn:!0})}requestFullScreen(e={}){const t=this._getPlayerId(),n=this._getWebviewId();if(Ue[Ve(n,t)])return void this._invokeWebviewMethod("xWebLivePlayerRequestFullScreen",{direction:e.direction},e);const r=e.direction;[0,90,-90].indexOf(r)>-1?this._invokeMethod("requestFullScreen",[r],e):this._invokeMethod("requestFullScreen",[],e),Be.set(this,!0)}exitFullScreen(e={}){const t=this._getPlayerId(),n=this._getWebviewId();Ue[Ve(n,t)]?this._invokeWebviewMethod("xWebLivePlayerExitFullScreen",[],e):(this._invokeMethod("exitFullScreen",[],e),this.showStatusBar(),Be.set(this,!1))}exitPictureInPicture(e={}){if(!Re)return;const t=(0,u.qu)(this.pluginId);k.cj?t("operateLivePlayer",I()(I()({},e),{},{type:"exitPictureInPicture",livePlayerId:Re.playerId}),{beforeAll(e){e.errMsg=e.errMsg.replace("operateLivePlayer","exitPictureInPicture")}}):k.wZ&&t("operateXWebLivePlayer",I()(I()({},e),{},{type:"exitPictureInPicture",viewId:Re.playerId}),{beforeAll(e){e.errMsg=e.errMsg.replace("operateXWebLivePlayer","exitPictureInPicture")}})}showStatusBar(e={}){(0,u.IN)("showStatusBar",e)}hideStatusBar(e={}){if(!Be.get(this)){const t="hideStatusBar:fail cannot be invoked but in fullscreen.";return"function"==typeof e.fail&&e.fail({errMsg:t}),void("function"==typeof e.complete&&e.complete({errMsg:t}))}(0,u.IN)("hideStatusBar",e)}snapshot(e={}){if(De)return console.warn("开发者工具暂不支持 LivePlayerContext.snapshot 接口，请到客户端调试。"),void("function"!=typeof e.fail&&"function"!=typeof e.complete||(e.fail||e.complete)({errMsg:"operateLivePlayer:fail not support in devtools"}));this._invokeMethod("snapshot",[],je({quality:"raw"},e))}requestBackgroundPlayback(e={}){this._invokeMethod("requestBackgroundPlayback",[],e)}exitBackgroundPlayback(e={}){this._invokeMethod("exitBackgroundPlayback",[],e)}requestPictureInPicture(e={}){const t=this._getPlayerId();if("number"!=typeof t)return void(0,u.YG)("requestPictureInPicture",e,"playerId not exists");(0,u.qu)(this.pluginId)("requestLivePlayerPictureInPicture",I()(I()({},e),{},{viewId:t,livePlayerId:t,beforeAll(e){e.errMsg=e.errMsg.replace("requestLivePlayerPictureInPicture","requestPictureInPicture")}}))}_invokeMethodWithId(e,t,n,r){const o=this._getPlayerId(),i=this._getWebviewId(),a=Ue[Ve(i,o)];let s=a?"operateXWebLivePlayer":"operateLivePlayer";"number"==typeof e?(De&&(r.type=t,r.playerId=e,(0,u.nY)("operateLivePlayer",r,[this.webviewId])),function(){const o=a?{viewId:e}:{livePlayerId:e},i=(0,u.qu)(this.pluginId);this._getAppStatus()===xe.w$.BACK_GROUND&&"stop"===t&&(s=`${s}Background`),i(s,je({},r,I()({data:n,type:t},o)))}.apply(this)):Me.once("livePlayerInsert",(()=>{this._invokeMethod(t,n,r)}))}_getAppStatus(){return f.Z.appStatus}_getHanged(){return f.Z.hanged}_getPlayerId(){}_getWebviewId(){}},S()(Pe.prototype,"play",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"play"),Pe.prototype),S()(Pe.prototype,"stop",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"stop"),Pe.prototype),S()(Pe.prototype,"mute",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"mute"),Pe.prototype),S()(Pe.prototype,"pause",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"pause"),Pe.prototype),S()(Pe.prototype,"resume",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"resume"),Pe.prototype),S()(Pe.prototype,"requestFullScreen",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"requestFullScreen"),Pe.prototype),S()(Pe.prototype,"exitFullScreen",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"exitFullScreen"),Pe.prototype),S()(Pe.prototype,"exitPictureInPicture",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"exitPictureInPicture"),Pe.prototype),S()(Pe.prototype,"snapshot",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"snapshot"),Pe.prototype),S()(Pe.prototype,"requestBackgroundPlayback",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"requestBackgroundPlayback"),Pe.prototype),S()(Pe.prototype,"exitBackgroundPlayback",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"exitBackgroundPlayback"),Pe.prototype),S()(Pe.prototype,"requestPictureInPicture",[T.Qu],Object.getOwnPropertyDescriptor(Pe.prototype,"requestPictureInPicture"),Pe.prototype),Pe);class Ze extends He{constructor(e,t,n,r){if(super(),"string"!=typeof e)throw new h.iZ("Parameter 1 should be a string");this.domId=e,this.webviewId=t,this.nodeId=n,this.pluginId=r}_invokeMethod(e,t,n){const r=`${this.webviewId}_${this.pluginId}_${this.domId}_${this.nodeId}`,o=Oe[r];this._invokeMethodWithId(o,e,t,n)}_getPlayerId(){const e=`${this.webviewId}_${this.pluginId}_${this.domId}_${this.nodeId}`;return Oe[e]}_getWebviewId(){return this.webviewId}_invokeWebviewMethod(e,t,n){const r=`${this.webviewId}_${this.pluginId}_${this.domId}_${this.nodeId}`,o=Oe[r];"function"==typeof n.success&&setTimeout((()=>{n.success({errMsg:"operateLivePlayer:ok"})}),0),"function"==typeof n.complete&&setTimeout((()=>{n.complete({errMsg:"operateLivePlayer:ok"})}),0),(0,u.nY)(e,I()({viewId:o},t),[this.webviewId])}}class Qe extends He{constructor(e,t,n){super(),this.playerId=e,this.webviewId=t,this.pluginId=n}_invokeMethod(e,t,n){const r=this.playerId;this._invokeMethodWithId(r,e,t,n)}_getPlayerId(){return this.playerId}_getWebviewId(){return this.webviewId}_invokeWebviewMethod(e,t,n){"function"==typeof n.success&&setTimeout((()=>{n.success({errMsg:"operateLivePlayer:ok"})}),0),"function"==typeof n.complete&&setTimeout((()=>{n.complete({errMsg:"operateLivePlayer:ok"})}),0),(0,u.nY)(e,I()({viewId:this.playerId},t),[this.webviewId])}}function Ye(e,t,n="",r=""){let i=`api_${t}_${r}_${e}_`;if(n&&n!==o.getRootNodeId(t)&&(i+=n),Fe[i])return Fe[i].exportContext;const a=new Ze(e,t,n,r);return Fe[i]=a,a.exportContext}function ze(e,t,n=""){const r=`SQ_${t}_${e}`;if(Fe[r])return Fe[r].exportContext;const o=new Qe(e,t,n);return Fe[r]=o,o.exportContext}let qe={};const Je=e=>{qe=e},Ke={},Xe={onLivePlayerEvent:"bindstatechange",onLivePlayerNetStatus:"bindnetstatus",onLivePlayerAudioVolume:"bindaudiovolumenotify",onLivePlayerBackgroundPlaybackChange:"bindbackgroundplaybackchange"},et={onXWebLivePlayerEvent:"bindstatechange",onXWebLivePlayerNetStatus:"bindnetstatus",onXWebLivePlayerAudioVolume:"bindaudiovolumenotify",onXWebLivePlayerBackgroundPlaybackChange:"bindbackgroundplaybackchange"};function tt(e,t,n){if(!t)return;2004===t.errCode&&ke({keepScreenOn:!0});const r=qe[Ve(n,t.viewId)],o=r?t.viewId:t.livePlayerId,i=Ne[`${n}_${o}`],a=r?et[e]:Xe[e],s={};switch(e){case"onLivePlayerEvent":case"onXWebLivePlayerEvent":s.code=t.errCode,s.message=t.errMsg,(0,u.nY)("onLivePlayerStateChange"+t.livePlayerId,{code:t.errCode},[n]);break;case"onLivePlayerNetStatus":case"onXWebLivePlayerNetStatus":t.info=t.info||{},s.info={videoBitrate:t.info.VIDEO_BITRATE,audioBitrate:t.info.AUDIO_BITRATE,videoFPS:t.info.VIDEO_FPS,videoGOP:t.info.VIDEO_GOP,netSpeed:t.info.NET_SPEED,netQualityLevel:t.info.NET_QUALITY_LEVEL,netJitter:t.info.NET_JITTER,videoWidth:t.info.VIDEO_WIDTH,videoHeight:t.info.VIDEO_HEIGHT,videoCache:t.info.VIDEO_CACHE,audioCache:t.info.AUDIO_CACHE,vDecCacheSize:t.info.V_DEC_CACHE_SIZE,vSumCacheSize:t.info.V_SUM_CACHE_SIZE,avPlayInterval:t.info.AV_PLAY_INTERVAL,avRecvInterval:t.info.AV_RECV_INTERVAL,audioCacheThreshold:t.info.AUDIO_CACHE_THRESHOLD},(0,u.nY)("onLivePlayerNetStatusChange"+t.livePlayerId,{info:s.info},[n]);break;case"onLivePlayerAudioVolume":case"onXWebLivePlayerAudioVolume":s.volume=t.volume;break;case"onLivePlayerBackgroundPlaybackChange":case"onXWebLivePlayerBackgroundPlaybackChange":s.playInBackground=t.playInBackground}if(!i)return Ke[n]=Ke[n]||[],void Ke[n].push([e,t,n]);if(r&&("onXWebLivePlayerEvent"===e||"onXWebLivePlayerNetStatus"===e)){let r=I()({},t.info);"onXWebLivePlayerEvent"===e&&(r={code:t.errCode,message:t.errMsg}),(0,u.nY)("xWebLivePlayerStateChange",{type:e,detail:{info:r},viewId:t.viewId},[n])}i.handlers[a]&&"function"==typeof f.Z.webviewEventCallback&&(r&&"onXWebLivePlayerEvent"===e&&t&&-9999999===t.errCode||f.Z.webviewEventCallback({data:{type:a.replace("bind",""),target:i.target,currentTarget:i.target,timeStamp:Date.now()-i.createdTimeStamp,touches:[],detail:s},eventName:i.handlers[a],webviewId:n,nodeId:i.nodeId}))}var nt;["onLivePlayerEvent","onLivePlayerNetStatus","onLivePlayerAudioVolume","onLivePlayerBackgroundPlaybackChange"].concat(["onXWebLivePlayerEvent","onXWebLivePlayerNetStatus","onXWebLivePlayerAudioVolume","onXWebLivePlayerBackgroundPlaybackChange"]).forEach((e=>{(0,w.n)(e,((t={},n)=>{tt(e,t,n)}))})),(0,u.Ld)("xWebLivePlayerFullScreenEvent",(({viewId:e,data:t},n)=>{const r=Ne[`${n}_${e}`];r&&r.handlers.bindfullscreenchange&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"fullscreenchange",target:r.target,currentTarget:r.target,timeStamp:Date.now()-r.createdTimeStamp,touches:[],detail:{fullScreen:t.fullScreen,direction:0===t.direction||180===t.direction||"vertical"===t.direction?"vertical":"horizontal"}},eventName:r.handlers.bindfullscreenchange,webviewId:n,nodeId:r.nodeId})})),(0,w.n)("onLivePlayerFullScreenChange",((e={},t)=>{(0,u.nY)("videoFullScreenChange",e,[t]),(0,u.nY)("videoFullScreenChange"+e.livePlayerId,{fullScreen:e.fullScreen},[t]);const n=Ne[`${t}_${e.livePlayerId}`];n&&n.handlers.bindfullscreenchange&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"fullscreenchange",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{fullScreen:e.fullScreen,direction:0===e.direction||180===e.direction||"vertical"===e.direction?"vertical":"horizontal"}},eventName:n.handlers.bindfullscreenchange,webviewId:t,nodeId:n.nodeId})})),(0,w.n)("onEnterLivePlayerPictureInPicture",((e={})=>{const t=Re.webviewId,n=Ne[`${t}_${e.livePlayerId}`];n&&n.handlers.bindenterpictureinpicture&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"enterpictureinpicture",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindenterpictureinpicture,webviewId:t,nodeId:n.nodeId})})),(0,w.n)("onLeaveLivePlayerPictureInPicture",((e={})=>{const t=Re.webviewId,n=Ne[`${t}_${e.livePlayerId}`];n&&n.handlers.bindleavepictureinpicture&&"function"==typeof f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:"leavepictureinpicture",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindleavepictureinpicture,webviewId:t,nodeId:n.nodeId})}));const rt=oe.Z.useXWebLive;let ot=k.wZ&&rt;(0,u.Ld)("xWebLivePusherSupported",(({enforcedXWebLive:e,canInsert2XWeb:t})=>{ot=e||t,_t({enforcedXWebLive:e,canInsert2XWeb:t})}));const it={},at={},st=new b.y,ct={},lt=Object.assign;function dt(e){ct[e]||(ct[e]=!0,(0,x.dq)(e,(e=>{delete ct[e],Object.keys(it).forEach((t=>{new RegExp("^"+e).test(t)&&(delete at[`${e}_${it[t]}`],delete it[t])})),function(e){delete vt[e]}(e)})))}function ut(e,t){const n=`${this.webviewId}_${this.pluginId}`;"number"==typeof it[n]?(ot?t.viewId=it[n]:t.livePusherId=it[n],t.type=e,function(e,t,n){if(k.gm)console.warn(`开发者工具暂不支持调用 LivePusherContext.${e} 方法`);else{(0,u.qu)(n)(ot?"operateXWebLivePusher":"operateLivePusher",t)}}(e,t,this.pluginId)):st.once("livePusherInserted",(()=>{ut.call(this,e,t)}))}["xWebLivePusherInserted","livePusherInserted"].forEach((e=>{(0,u.Ld)(e,(({viewId:e,pusherId:t,pluginId:n,data:r},o)=>{const i=ot?e:t,a=`${o}_${n}`;it[a]=i,at[`${o}_${i}`]=r,st.emit("livePusherInserted"),dt(o),function(e){const t=vt[e];if(vt[e]=[],!t)return;for(let e=0;e<t.length;e++){const n=t[e];At(n[0],n[1],n[2])}}(o)}))})),["xWebLivePusherRemoved","livePusherRemoved"].forEach((e=>{(0,u.Ld)(e,(({viewId:e,pusherId:t,pluginId:n},r)=>{const o=ot?e:t;delete it[`${r}_${n}`],delete at[`${r}_${o}`]}))}));let pt=(nt=class{constructor(e,t){this.webviewId=e,this.pluginId=t}start(e={}){ut.call(this,"start",e)}stop(e={}){ut.call(this,"stop",e)}pause(e={}){ut.call(this,"pause",e)}resume(e={}){ut.call(this,"resume",e)}switchCamera(e={}){ut.call(this,"switchCamera",e)}snapshot(e={}){ut.call(this,"snapshot",lt({quality:"raw"},e))}toggleTorch(e={}){ut.call(this,"toggleTorch",e)}playBGM(e={}){(0,u.r3)("LivePusherContext.playBGM",e,{url:""})&&ut.call(this,"playBGM",e)}stopBGM(e={}){ut.call(this,"stopBGM",e)}pauseBGM(e={}){ut.call(this,"pauseBGM",e)}resumeBGM(e={}){ut.call(this,"resumeBGM",e)}setBGMVolume(e={}){(0,u.r3)("LivePusherContext.setBGMVolume",e,{volume:0})&&ut.call(this,"setBGMVolume",e)}setMICVolume(e={}){(0,u.r3)("LivePusherContext.setMICVolume",e,{volume:0})&&ut.call(this,"setMICVolume",e)}startPreview(e={}){ut.call(this,"startPreview",e)}stopPreview(e={}){ut.call(this,"stopPreview",e)}sendMessage(e={}){ut.call(this,"sendMessage",e)}},S()(nt.prototype,"start",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"start"),nt.prototype),S()(nt.prototype,"stop",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"stop"),nt.prototype),S()(nt.prototype,"pause",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"pause"),nt.prototype),S()(nt.prototype,"resume",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"resume"),nt.prototype),S()(nt.prototype,"switchCamera",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"switchCamera"),nt.prototype),S()(nt.prototype,"snapshot",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"snapshot"),nt.prototype),S()(nt.prototype,"toggleTorch",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"toggleTorch"),nt.prototype),S()(nt.prototype,"playBGM",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"playBGM"),nt.prototype),S()(nt.prototype,"stopBGM",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"stopBGM"),nt.prototype),S()(nt.prototype,"pauseBGM",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"pauseBGM"),nt.prototype),S()(nt.prototype,"resumeBGM",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"resumeBGM"),nt.prototype),S()(nt.prototype,"setBGMVolume",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"setBGMVolume"),nt.prototype),S()(nt.prototype,"setMICVolume",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"setMICVolume"),nt.prototype),S()(nt.prototype,"startPreview",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"startPreview"),nt.prototype),S()(nt.prototype,"stopPreview",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"stopPreview"),nt.prototype),S()(nt.prototype,"sendMessage",[T.Qu],Object.getOwnPropertyDescriptor(nt.prototype,"sendMessage"),nt.prototype),nt);function ht(e,t,n,r=""){return new pt(t,r)}const ft=oe.Z.useXWebLive;let gt=k.wZ&&ft;const _t=({enforcedXWebLive:e,canInsert2XWeb:t})=>{gt=e||t},mt={onLivePusherEvent:"bindstatechange",onLivePusherNetStatus:"bindnetstatus",onLivePusherBGMStart:"bindbgmstart",onLivePusherBGMProgress:"bindbgmprogress",onLivePusherBGMComplete:"bindbgmcomplete",onLivePusherError:"binderror",onLivePusherAudioVolume:"bindaudiovolumenotify"},yt={onXWebLivePusherEvent:"bindstatechange",onXWebLivePusherNetStatus:"bindnetstatus",onXWebLivePusherBGMStart:"bindbgmstart",onXWebLivePusherBGMProgress:"bindbgmprogress",onXWebLivePusherBGMComplete:"bindbgmcomplete",onXWebLivePusherError:"binderror",onXWebLivePusherAudioVolume:"bindaudiovolumenotify"},vt={};function At(e,t,n){const r=gt?t.viewId:t.livePusherId,o=at[`${n}_${r}`],i=gt?yt[e]:mt[e],a={};switch(e){case"onLivePusherEvent":case"onXWebLivePusherEvent":a.code=t.errCode,a.message=t.errMsg,(0,u.nY)("onLivePusherStateChange"+t.livePusherId,{code:t.errCode},[n]);break;case"onLivePusherNetStatus":case"onXWebLivePusherNetStatus":t.info=t.info||{},a.info={videoBitrate:t.info.VIDEO_BITRATE,audioBitrate:t.info.AUDIO_BITRATE,videoFPS:t.info.VIDEO_FPS,videoGOP:t.info.VIDEO_GOP,netSpeed:t.info.NET_SPEED,netQualityLevel:t.info.NET_QUALITY_LEVEL,netJitter:t.info.NET_JITTER,videoWidth:t.info.VIDEO_WIDTH,videoHeight:t.info.VIDEO_HEIGHT,videoCache:t.info.VIDEO_CACHE,audioCache:t.info.AUDIO_CACHE},(0,u.nY)("onLivePusherNetStatusChagne"+t.livePusherId,{info:a.info},[n]);break;case"onLivePusherBGMProgress":case"onXWebLivePusherBGMProgress":a.progress=t.progress,a.duration=t.duration;break;case"onLivePusherBGMComplete":case"onXWebLivePusherBGMComplete":a.errCode=t.errCode;break;case"onLivePusherError":case"onXWebLivePusherError":a.errCode=t.errCode,a.errMsg=t.errMsg,a.data=t.data,(0,u.nY)("onLivePusherError"+t.livePusherId,{errcode:t.errcode},[n]);break;case"onLivePusherAudioVolume":case"onXWebLivePusherAudioVolume":a.volume=t.volume}if(!o)return vt[n]=vt[n]||[],void vt[n].push([e,t,n]);if(gt&&("onXWebLivePusherEvent"===e||"onXWebLivePusherNetStatus"===e)){let r=I()({},t.info);"onXWebLivePusherEvent"===e&&(r={code:t.errCode,message:t.errMsg}),(0,u.nY)("xWebLivePusherStateChange",{type:e,detail:{info:r},viewId:t.viewId},[n])}o.handlers[i]&&"function"==typeof f.Z.webviewEventCallback&&(gt&&"onXWebLivePusherEvent"===e&&t&&-9999999===t.errCode||f.Z.webviewEventCallback({data:{type:i.replace("bind",""),target:o.target,currentTarget:o.target,timeStamp:Date.now()-o.createdTimeStamp,touches:[],detail:a},eventName:o.handlers[i],webviewId:n,nodeId:o.nodeId}))}["onLivePusherEvent","onLivePusherNetStatus","onLivePusherBGMStart","onLivePusherBGMProgress","onLivePusherBGMComplete","onLivePusherError","onLivePusherAudioVolume"].concat(["onXWebLivePusherEvent","onXWebLivePusherNetStatus","onXWebLivePusherBGMStart","onXWebLivePusherBGMProgress","onXWebLivePusherBGMComplete","onXWebLivePusherError","onXWebLivePusherAudioVolume"]).forEach((e=>{(0,w.n)(e,((t={},n=0)=>{At(e,t,n)}))}));var bt=c(6947);let wt=null;bt.Z&&bt.Z.WXAUDIO?wt=bt.Z.WXAUDIO:bt.Z&&bt.Z.AudioContext?wt=bt.Z.AudioContext:"undefined"!=typeof AudioContext?wt=AudioContext:"undefined"!=typeof webkitAudioContext&&(wt=webkitAudioContext);const Ct=wt;var It=c(5166),Et=c(3270),St=c(1095);let Tt;const xt=new WeakMap,kt=new WeakMap,Pt=new WeakMap,Dt=new WeakMap,Ot=new WeakMap,Nt=new WeakMap,Rt=new WeakMap,Mt=new WeakMap,Lt=new WeakMap,Bt=new WeakMap,Ft=new WeakMap,Wt={},jt=(0,St.Fr)(It.a),Ut=(0,St.Fr)(Et.p),Vt=e=>Ut({filePath:e}).then((e=>e.data)),Gt=e=>jt({url:e,responseType:"arraybuffer",enableHttp2:!0,enableCache:!0}).then((e=>e.data)),$t=e=>new Promise((t=>{(0,D.V)([e],"audio",(e=>{t(Gt(e.data[0].url))}))})),Ht=function(e){xt.set(this,Object.assign(xt.get(this),e))},Zt=function(e){return xt.get(this)[e]},Qt=function(){return xt.get(this)},Yt=function(){this.stop(!0),Ht.call(this,{_source:null});const e=Pt.get(this);e&&e()},zt=function(e){const t=Tt.createBufferSource(),{currentPlayBackTime:n,state:r}=qt.call(this,e),{loop:o,playbackRate:i,_buffer:a,_gainNode:s}=r,c=Yt.bind(this);t.onended=c,t.buffer=a,t.loop=o,t.playbackRate.value=i,s&&t.connect(s),t.start(0,n),Tt.resume(),Ht.call(this,{_isPlaying:!0,paused:!1,_source:t,_played:!0,_playbackTime:0,_lastCurrentTime:n,_startedAt:Tt.currentTime,_endedHandler:c})},qt=function(e){e=e||Qt.call(this);const{_startedAt:t,_playbackTime:n,_isPlaying:r,playbackRate:o,_lastCurrentTime:i,duration:a}=e;let s;return s=r?i+(Tt.currentTime-t)*o:n,s>a&&(s%=a),{currentPlayBackTime:s,state:e}},Jt=function(){this.stop(!0);const{_gainNode:e}=Qt.call(this);e&&e.disconnect(),Ht.call(this,{_buffer:null,_source:null,_loadPromise:null,_gainNode:null,_audioLoadPromiseResolve:null}),kt.delete(this),Pt.delete(this),Dt.delete(this),Ot.delete(this),Rt.delete(this),Nt.delete(this),Mt.delete(this),Lt.delete(this),Ft.delete(this),clearInterval(Bt.get(this)),Bt.delete(this)},Kt=function(){this.stop(!0),Ht.call(this,{_buffer:null,_source:null,_loadPromise:null,_audioLoadPromiseResolve:null})},Xt=function(e){let t;Kt.call(this);const n=new Promise((e=>{t=e}));Ht.call(this,{src:e,_ready:!1,_played:!1,_loadPromise:n,_audioLoadPromiseResolve:t})};class en{constructor(){Tt||(Tt=new Ct,"function"==typeof Tt.create&&Tt.create());const e=Tt.createGain();e.connect(Tt.destination);const t={},n=new Promise((e=>{t._audioLoadPromiseResolve=e}));xt.set(this,Object.assign(t,{startTime:0,autoplay:!1,loop:!1,volume:1,playbackRate:1,paused:!1,duration:NaN,_loadPromise:n,_gainNode:e,_played:!1,_playbackTime:0,_ready:!1,_isPlaying:!1,src:""}))}get src(){return Zt.call(this,"src")}set src(e){const{src:t}=Qt.call(this);"string"==typeof e&&e.length>0&&t!==e&&(t&&Xt.call(this,e),Ht.call(this,{src:e}),(e=>{const t=Wt[e];if(t&&t.audioBuffer)return Promise.resolve(t.audioBuffer);if(t&&t.loadPromise)return t.loadPromise;let n;n=/^(http|https):\/\//.test(e)?Gt(e):/^(cloud):\/\//.test(e)?$t(e):Vt(e);const r=n.then((t=>new Promise(((n,r)=>{Tt.decodeAudioData(t,(t=>{const r=Wt[e];r.audioBuffer||(r.audioBuffer=t),n(r.audioBuffer)}),r)}))));return Wt[e]={loadPromise:r},r})(e).then((e=>{const t=Qt.call(this),n=kt.get(this),{_isPlaying:r,autoplay:o,_audioLoadPromiseResolve:i}=t;return Ht.call(this,{_ready:!0,_buffer:e,duration:e.duration}),n&&n(),o&&!r&&this.play(),i(),null})).catch((t=>{const n=Dt.get(this);n&&n({type:"error",errMsg:`set audio src ${e} fail: ${t.message}`})})))}get startTime(){return Zt.call(this,"startTime")}set startTime(e){const{_played:t,startTime:n}=Qt.call(this);e!==n&&"number"==typeof e&&e>=0&&(Ht.call(this,{startTime:e}),t||this.seek(e))}get autoplay(){return Zt.call(this,"autoplay")}set autoplay(e){const{autoplay:t}=Qt.call(this);if(!!e!==t&&(Ht.call(this,{autoplay:!!e}),e)){const{_loadPromise:e}=Qt.call(this);e.then((()=>{const e=Qt.call(this),{_isPlaying:t,autoplay:n,_source:r}=e;return r&&!t&&n&&this.play(),null}))}}get loop(){return Zt.call(this,"loop")}set loop(e){const t=Zt.call(this,"_source");Ht.call(this,{loop:e=!!e}),t&&(t.loop=e)}get volume(){return Zt.call(this,"volume")}set volume(e){const{volume:t,_gainNode:n}=Qt.call(this);"number"==typeof e&&e>=0&&e<=1&&e!==t&&(Ht.call(this,{volume:e}),n&&n.gain&&(n.gain.value=e))}get playbackRate(){return Zt.call(this,"playbackRate")}set playbackRate(e){const{playbackRate:t,_source:n}=Qt.call(this);"number"==typeof e&&t!==e&&e>=.5&&e<=2&&(Ht.call(this,{playbackRate:e,_lastCurrentTime:this.currentTime,_startedAt:Tt.currentTime}),n&&(n.playbackRate.value=e))}get duration(){return Zt.call(this,"duration")}get currentTime(){const{currentPlayBackTime:e}=qt.call(this);return e}get paused(){return Zt.call(this,"paused")}get buffered(){const{duration:e}=Qt.call(this);return e>0?e:0}play(e=!1){const t=Qt.call(this),{_isPlaying:n,_ready:r,_loadPromise:o}=t;if(n)return;const i=()=>e?null:Ot.get(this);if(r){zt.call(this,t);const e=i();e&&e()}else o.then((()=>{zt.call(this);const e=i();return e&&e(),null}))}pause(){const e=Qt.call(this),{_isPlaying:t,_source:n}=e;if(n&&t){const e=Nt.get(this);n.stop(0),n.disconnect(),n.onended=null,Ht.call(this,{_isPlaying:!1,_playbackTime:this.currentTime,paused:!0,_endedHandler:null}),e&&e()}}stop(e=!1){const{_source:t}=Qt.call(this);if(t){const n=Rt.get(this);t.stop(0),t.disconnect(),t.onended=null,Ht.call(this,{_isPlaying:!1,_playbackTime:0,paused:!0,_endedHandler:null}),!e&&n&&n()}}seek(e){if("number"==typeof e&&e>=0){const{_isPlaying:t}=Qt.call(this),n=Mt.get(this),r=Lt.get(this),o=kt.get(this);r&&r(),t?(this.stop(!0),Ht.call(this,{_playbackTime:e}),this.play(!0)):Ht.call(this,{_playbackTime:e}),n&&n(),o&&o()}}destroy(){Jt.call(this)}set oncanplay(e){"function"==typeof e?kt.set(this,e):kt.delete(this)}set onended(e){"function"==typeof e?Pt.set(this,e):Pt.delete(this)}set onerror(e){"function"==typeof e?Dt.set(this,e):Dt.delete(this)}set onplay(e){"function"==typeof e?Ot.set(this,e):Ot.delete(this)}set onpause(e){"function"==typeof e?Nt.set(this,e):Nt.delete(this)}set onstop(e){"function"==typeof e?Rt.set(this,e):Rt.delete(this)}set onseeked(e){"function"==typeof e?Mt.set(this,e):Mt.delete(this)}set onseeking(e){"function"==typeof e?Lt.set(this,e):Lt.delete(this)}set ontimeupdate(e){if("function"==typeof e){const t=Bt.get(this);clearInterval(t);const n=setInterval((()=>{const{_isPlaying:t}=Qt.call(this);t&&e()}),350);Bt.set(this,n)}else Bt.delete(this)}set onwaiting(e){"function"==typeof e?Ft.set(this,e):Ft.delete(this)}}const tn=["src","startTime","autoplay","loop","obeyMuteSwitch","volume","playbackRate","duration","currentTime","paused","buffered","referrerPolicy"],nn=["startTime","duration","currentTime"],rn=["Canplay","Ended","Error","Pause","Play","Seeked","Seeking","Stop","TimeUpdate","Waiting"],on=new Set,an=new WeakMap,sn=new WeakMap,cn=new WeakMap,ln=new WeakMap;class dn{constructor(e,t=1e3){const n=new b.Z;an.set(this,e),on.add(this),ln.set(this,{conversion:t}),tn.forEach((n=>Object.defineProperty(this,n,{get:()=>nn.includes(n)?e[n]/t:e[n],set(r){nn.includes(n)?e[n]=t*r:e[n]=r}}))),rn.forEach((t=>{this["on"+t]=e=>{const r=__errorTracer__.surroundThirdByTryCatch(e,`at audioContext.on${t} callback function`);sn.set(e,r),cn.set(r,e),n.on(t,r)},this["off"+t]=e=>{if((0,O.mf)(e)){const r=sn.get(e);(0,O.mf)(r)&&(n.off(t,r),sn.delete(e),cn.delete(r))}else n.listeners(t).forEach((e=>{const t=cn.get(e);sn.delete(t),cn.delete(e)})),n.removeAllListeners(t)},e["on"+t.toLowerCase()]=(e,r)=>{e?n.emit(t,{errCode:e,errMsg:r}):n.emit(t)}}))}play(){an.get(this).play()}stop(){an.get(this).stop()}pause(){an.get(this).pause()}seek(e){const{conversion:t}=ln.get(this);an.get(this).seek(t*e)}destroy(){const e=an.get(this);e.destroy&&e.destroy(),rn.forEach((e=>{this["off"+e]()})),on.delete(this),an.delete(this)}static pauseAllAudio(){on.forEach((e=>{const t=an.get(e);t&&t.pause()}))}}class un extends dn{constructor(){super(new bt.Z.Audio,1e3)}}class pn extends dn{constructor(){super(new en,1)}}var hn=c(9978);const fn=(e={})=>{if("number"==typeof e.maxDuration&&e.maxDuration>60){const t={errMsg:"chooseVideo:fail|maxDuration can not over 60"};return"function"==typeof e.fail&&e.fail(t),void("function"==typeof e.complete&&e.complete(t))}e.sourceType=e.sourceType||["album","camera"],e.camera=e.camera||"back","boolean"!=typeof e.compressed&&(e.compressed=!0),(0,u.IN)("chooseVideo",e)},gn=(e={})=>{(0,u.IN)("saveVideoToPhotosAlbum",e,{})},_n=(e={})=>{(0,u.r3)("getVideoInfo",e,{src:""})&&(0,u.IN)("getVideoInfo",e,{})},mn=(e={})=>{(0,u.r3)("compressVideo",e,{src:""})&&(0,u.IN)("compressVideo",e,{})};var yn=c(8917);const vn=e=>{(0,u.r3)("playVoice",e,{filePath:""})&&(0,u.IN)("playVoice",e)},An=e=>{(0,u.IN)("pauseVoice",e)},bn=e=>{(0,u.IN)("stopVoice",e)};var wn=c(5184);const Cn=new b.Z,In={8e3:[16e3,48e3],11025:[16e3,48e3],12e3:[24e3,64e3],16e3:[24e3,96e3],22050:[32e3,128e3],24e3:[32e3,128e3],32e3:[48e3,192e3],44100:[64e3,32e4],48e3:[64e3,32e4]};(0,u.jQ)("onRecorderStateChange",((e={})=>{const{state:t}=e;delete e.state,Cn.emit(`onRecorderStateChange_${t}`,e)}));const En=e=>{(0,u.IN)("operateRecorder",Object.assign({},e))},Sn={start(e={}){const t=Object.assign({format:"aac",sampleRate:8e3,encodeBitRate:48e3,numberOfChannels:2,audioSource:"auto"},e);if(-1===Object.keys(In).map((e=>parseInt(e,10))).indexOf(t.sampleRate))throw new Error(`invalid sampleRate "${t.sampleRate}", sampleRate should be one of ${JSON.stringify(Object.keys(In))}`);if(t.encodeBitRate>In[t.sampleRate][1]||t.encodeBitRate<In[t.sampleRate][0])throw new Error(`invalid encodeBitRate "${t.encodeBitRate}", encodeBitRate should be greater than ${In[t.sampleRate][0]} and less than ${In[t.sampleRate][1]}`);t.operationType="start",t.fail=e=>{Cn.emit("onRecorderStateChange_error",e)},En(t)},pause(){En({operationType:"pause",fail(e){Cn.emit("onRecorderStateChange_error",e)}})},resume(){En({operationType:"resume",success(){Cn.emit("onRecorderStateChange_resume")},fail(e){Cn.emit("onRecorderStateChange_error",e)}})},stop(){En({operationType:"stop",fail(e){Cn.emit("onRecorderStateChange_error",e)}})},onStart(e){Cn.removeAllListeners("onRecorderStateChange_start"),Cn.on("onRecorderStateChange_start",(()=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onResume(e){Cn.removeAllListeners("onRecorderStateChange_resume"),Cn.on("onRecorderStateChange_resume",(()=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onResume callback function")()}))},onPause(e){Cn.removeAllListeners("onRecorderStateChange_pause"),Cn.on("onRecorderStateChange_pause",(()=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onStop(e){Cn.removeAllListeners("onRecorderStateChange_stop"),Cn.on("onRecorderStateChange_stop",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onStop callback function")(t)}))},onFrameRecorded(e){Cn.removeAllListeners("onRecorderStateChange_frameRecorded"),Cn.on("onRecorderStateChange_frameRecorded",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onFrameRecorded callback function")(t)}))},onError(e){Cn.removeAllListeners("onRecorderStateChange_error"),Cn.on("onRecorderStateChange_error",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onError callback function")(t)}))},onInterruptionBegin(e){Cn.removeAllListeners("onRecorderStateChange_interruptionBegin"),Cn.on("onRecorderStateChange_interruptionBegin",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionBegin callback function")(t)}))},onInterruptionEnd(e){Cn.removeAllListeners("onRecorderStateChange_interruptionEnd"),Cn.on("onRecorderStateChange_interruptionEnd",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionEnd callback function")(t)}))}},Tn=()=>Sn,xn=e=>{(0,wn.v)("startRecord"),(0,u.IN)("startRecord",e)},kn=e=>{(0,wn.v)("stopRecord"),(0,u.IN)("stopRecord",e)};var Pn=c(2184);const Dn=new Pn.Q("BackgroundAudioManager",!0),On=wxNativeConsole.createLogger("BackgroundAudioManager");let Nn,Rn={src:"",currentTime:0,duration:0,paused:!0,buffered:0,title:"",coverImgUrl:"",description:"",startTime:0,playbackRate:1,referrerPolicy:""};(0,u.jQ)("onBackgroundAudioNext",(()=>{Dn.emit("Next")})),(0,u.jQ)("onBackgroundAudioPrev",(()=>{Dn.emit("Prev")})),(0,u.jQ)("onBackgroundAudioStateChange",((e={})=>{const{state:t}=e;delete e.state,"play"===t?(Rn.paused=!1,f.Z.possessingBackgroundAudioPlayer=!0):"preempted"===t||"occupied"===t?(f.Z.possessingBackgroundAudioPlayer=!1,Dn.emit("Stop",e)):("pause"===t||"stop"===t)&&(Rn.paused=!0),Dn.emit(`${t[0].toUpperCase()}${t.substr(1)}`,e)}));const Mn={play(){setTimeout((()=>{Ln({operationType:"play"})}),0)},pause(){setTimeout((()=>{Ln({operationType:"pause"})}),0)},seek(e){if("number"!=typeof e)throw new Error("BackgroundAudioManager.seek(currentTime): unexpected type "+typeof e);setTimeout((()=>{Ln({currentTime:e,operationType:"seek"})}),0)},stop(){setTimeout((()=>{Ln({operationType:"stop"})}),0)},onTimeUpdate(e){void 0===Nn&&(Nn=setInterval((()=>{const e=Rn.currentTime;Bn("currentTime",(()=>{"active"===f.Z.runningStatus&&!1!==f.Z.possessingBackgroundAudioPlayer&&this.currentTime!==e&&Dn.emit("Timeupdate")}))}),250)),Dn.off("Timeupdate"),Dn.on("Timeupdate",e)}};function Ln(e){(0,u.IN)("operateBackgroundAudio",e)}["src","title","epname","singer","startTime","coverImgUrl","currentTime","duration","paused","buffered","webUrl","protocol","playbackRate","referrerPolicy"].forEach((e=>{Object.defineProperty(Mn,e,{get:()=>"src"===e&&Mn.srcCloudId?Mn.srcCloudId:"coverImgUrl"===e&&Mn.coverCloudId?Mn.coverCloudId:Bn(e),set(t){["src","title","epname","singer","coverImgUrl","startTime","webUrl","protocol","playbackRate","referrerPolicy"].indexOf(e)>-1&&("src"===e?(0,D.V)([t],"audio",(n=>{/^(cloud):\/\//.test(t)?Mn.srcCloudId=t:Mn.srcCloudId="",Wn(e,n.data[0].url)})):"coverImgUrl"===e?(0,D.V)([t],"image",(n=>{/^(cloud):\/\//.test(t)?Mn.coverCloudId=t:Mn.coverCloudId="",Wn(e,n.data[0].url)})):Wn(e,t))}})}));function Bn(e,t){if(!1===f.Z.possessingBackgroundAudioPlayer)return;let n=Rn[e];return(0,u.IN)("getBackgroundAudioState",{success(r){void 0===r.paused||!0===r.paused?r.paused=!0:r.paused=!1,Rn=Object.assign(Rn,r),n=Rn[e],"function"==typeof t&&t(n)},fail({errMsg:e}){On.error(`getBackgroundAudioState fail: ${e}`)}}),n}["Canplay","Waiting","Error","Play","Pause","Seeking","Seeked","Ended","Stop","Next","Prev"].forEach((e=>{Mn[`on${e}`]=t=>{Dn.off(e),Dn.on(e,t)}}));let Fn={};function Wn(e,t){if("src"===e&&!t)throw new Error(`invalid BackgroundAudioManager.src: ${t}`);if("active"!==f.Z.runningStatus&&!1===f.Z.possessingBackgroundAudioPlayer)throw new h.l0(`Can not set BackgroundAudioManager.${e}, background audio is preempted.`);Fn[e]=t,1===Object.keys(Fn).length&&setTimeout((()=>{Object.assign(Rn,Fn),Rn.src&&Rn.title?(On.log("setBackgroundAudioState, stateInstance:",Rn),(0,u.IN)("setBackgroundAudioState",Object.assign({},Rn,{fail({errMsg:e}){On.error(e),Dn.emit("Error",{errMsg:e.replace(/^setBackgroundAudioState: fail /,"")})}})),Fn={}):Fn={}}),0)}const jn=()=>Mn,Un=e=>{if(!1===f.Z.possessingBackgroundAudioPlayer){const t={errMsg:"getBackgroundAudioPlayerState: fail not playing"};"function"==typeof e.fail&&e.fail(t),"function"==typeof e.complete&&e.complete(t)}else(0,u.IN)("getMusicPlayerState",e,{beforeAll(e){e.errMsg=e.errMsg.replace("getMusicPlayerState","getBackgroundAudioPlayerState")}})},Vn=(e={})=>{(0,u.IN)("operateMusicPlayer",(0,h.f0)({operationType:"play"},e),{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateMusicPlayer","playBackgroundAudio")}})},Gn=(e={})=>{(0,u.IN)("operateMusicPlayer",(0,h.f0)({operationType:"pause"},e),{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateMusicPlayer","pauseBackgroundAudio")}})},$n=(e={})=>{(0,u.r3)("seekBackgroundAudio",e,{position:1})&&(0,u.IN)("operateMusicPlayer",(0,h.f0)({operationType:"seek"},e),{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateMusicPlayer","seekBackgroundAudio")}})},Hn=(e={})=>{(0,u.IN)("operateMusicPlayer",(0,h.f0)({operationType:"stop"},e),{beforeAll:e=>{e.errMsg=e.errMsg.replace("operateMusicPlayer","stopBackgroundAudio")}})},Zn=new b.Z;(0,u.jQ)("onMusicPlay",(()=>{f.Z.possessingBackgroundAudioPlayer=!0,Zn.emit("onBackgroundAudioPlay")}));const Qn=e=>{Zn.removeAllListeners("onBackgroundAudioPlay"),Zn.on("onBackgroundAudioPlay",(()=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at wx.onBackgroundAudioPlay callback function")()}))},Yn=e=>{(0,u.jQ)("onMusicPause",__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundAudioPause callback function"))},zn=e=>{(0,u.jQ)("onMusicEnd",__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundAudioStop callback function"))},qn=e=>{(0,u.IN)("getAvailableAudioSources",e)},Jn=e=>{(0,u.IN)("setInnerAudioOption",Object.assign({mixWithOther:!0,obeyMuteSwitch:!0},e))},Kn=wxNativeConsole.createLogger("MediaAudioPlayerJsApi"),Xn=new WeakMap;function er(e,t){Xn.set(this,Object.assign(Xn.get(this),{[e]:t})),this.promise.then((()=>{(0,u.IN)("operateAudioPlayer",{operationType:"update",containerId:Xn.get(this).containerId,[e]:t,success:e=>{Kn.log("update audio success",e)},fail:e=>{Kn.error("update audio fail",e)}})})).catch((e=>{Kn.error("update audio fail",e)}))}class tr{constructor(){Xn.set(this,{}),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),(0,u.IN)("operateAudioPlayer",{operationType:"create",success:e=>{Kn.log("operateAudioPlayer create success",e),Xn.set(this,Object.assign(Xn.get(this),{containerId:e.containerId})),this.resolve(e)},fail:e=>{Kn.error("operateAudioPlayer create fail",e),this.reject(e)}})}start(){return this.promise.then((()=>new Promise(((e,t)=>{(0,u.IN)("operateAudioPlayer",{operationType:"start",containerId:Xn.get(this).containerId,success:t=>{Kn.log("operateAudioPlayer start success",t),e(t)},fail:e=>{Kn.error("operateAudioPlayer start fail",e),t(e)}})}))))}addAudioSource(e){return this.promise.then((()=>new Promise(((t,n)=>{(0,u.IN)("operateAudioPlayer",{operationType:"addTask",containerId:Xn.get(this).containerId,taskId:e.videoDecoderId,success:e=>{Kn.log("addAudioSource addTask success",e),t(e)},fail:e=>{Kn.error("addAudioSource addTask fail",e),n(e)}})}))))}removeAudioSource(e){return this.promise.then((()=>new Promise(((t,n)=>{(0,u.IN)("operateAudioPlayer",{operationType:"delTask",containerId:Xn.get(this).containerId,taskId:e.videoDecoderId,success:e=>{Kn.log("removeAudioSource delTask success",e),t(e)},fail:e=>{Kn.error("removeAudioSource delTask fail",e),n(e)}})}))))}stop(){return this.promise.then((()=>new Promise(((e,t)=>{(0,u.IN)("operateAudioPlayer",{operationType:"stop",containerId:Xn.get(this).containerId,success:t=>{Kn.log("stop audio success",t),e(t)},fail:e=>{Kn.log("stop audio fail",e),t(e)}})}))))}destroy(){return this.promise.then((()=>new Promise(((e,t)=>{(0,u.IN)("operateAudioPlayer",{operationType:"remove",containerId:Xn.get(this).containerId,success:t=>{Kn.log("destroy audio success",t),e(t)},fail:e=>{Kn.error("destroy audio fail",e),t(e)}}),Xn.delete(this)}))))}set volume(e){return er.call(this,"audioVolume",e),e}get volume(){return Xn.get(this).audioVolume}}const nr=wxNativeConsole.createLogger("MediaAudioPlayerBinding"),rr=new WeakMap;function or(e,t){rr.set(this,Object.assign(rr.get(this),{[e]:t})),this.promise.then((()=>{bt.Z.MediaToolKit.audioUpdate({containerId:rr.get(this).containerId,[e]:t},(e=>{0===e.errCode?nr.log("operateAudioPlayer update success",e):nr.error("operateAudioPlayer update fail",e)}))})).catch((e=>{nr.error("update audio fail",e)}))}class ir{constructor(){rr.set(this,{}),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),nr.log("NativeGlobal.MediaToolKit.audioCreate",bt.Z.MediaToolKit.audioCreate),bt.Z.MediaToolKit.audioCreate({},(e=>{0===e.errCode?(nr.log("NativeGlobal.MediaToolKit.audioCreate success",e),rr.set(this,Object.assign(rr.get(this),{containerId:e.containerId})),this.resolve(e)):(nr.error("create MediaAudioPlayerBinding fail"),this.reject(e))}))}start(){return this.promise.then((()=>new Promise(((e,t)=>{bt.Z.MediaToolKit.audioStart({containerId:rr.get(this).containerId},(n=>{0===n.errCode?(nr.log("operateAudioPlayer start success",n),e(n)):(nr.error("operateAudioPlayer start fail",n),t(n))}))}))))}addAudioSource(e){return this.promise.then((()=>new Promise(((t,n)=>{bt.Z.MediaToolKit.audioAddTask({containerId:rr.get(this).containerId,taskId:e.videoDecoderId},(e=>{0===e.errCode?(nr.log("addAudioSource addTask success",e),t(e)):(nr.error("addAudioSource addTask fail",e),n(e))}))}))))}removeAudioSource(e){return this.promise.then((()=>new Promise(((t,n)=>{bt.Z.MediaToolKit.audioDelTask({containerId:rr.get(this).containerId,taskId:e.videoDecoderId},(e=>{0===e.errCode?(nr.log("removeAudioSource delTask success",e),t(e)):(nr.error("removeAudioSource delTask fail",e),n(e))}))}))))}stop(){return this.promise.then((()=>new Promise(((e,t)=>{bt.Z.MediaToolKit.audioStop({containerId:rr.get(this).containerId},(n=>{0===n.errCode?(nr.log("stop audio success",n),e(n)):(nr.log("stop audio fail",n),t(n))}))}))))}destroy(){return this.promise.then((()=>new Promise(((e,t)=>{bt.Z.MediaToolKit.audioRemove({containerId:rr.get(this).containerId},(n=>{0===n.errCode?(nr.log("destroy audio success",n),e(n)):(nr.error("destroy audio fail",n),t(n))})),rr.delete(this)}))))}set volume(e){return or.call(this,"audioVolume",e),e}get volume(){return rr.get(this).audioVolume}}const ar=()=>bt.Z.MediaToolKit&&bt.Z.MediaToolKit.audioCreate?new ir:new tr;var sr=c(405);let cr=null,lr=!1;(0,sr.H)((()=>{lr=!0})),(0,he.q)((()=>{lr=!1,cr&&(dr(cr),cr=null)}));const dr=(e={})=>{e.type||(e.type="all"),void 0===e.count&&(e.count=100),(0,p.r3)("chooseMessageFile",e,{type:"",count:0})&&(e.count<=0?(0,p.YG)("chooseMessageFile",e,"param count should be larger than 0."):void 0===e.extension||"[object Array]"===Object.prototype.toString.call(e.extension)?!e.extension||e.extension.length?(e.count>100&&(e.count=100),lr?cr=e:(0,p.IN)("chooseMessageFile",e)):(0,p.YG)("chooseMessageFile",e,"param extension should not be empty."):(0,p.YG)("chooseMessageFile",e,"param extension should be Array."))},ur=(e={})=>{(0,u.IN)("chooseMedia",e)};var pr=c(7618),hr=c(7697);const fr=function(e={}){if(!(0,u.r3)("previewMedia",e,{sources:[]}))return;if(e.sources.length>50)return void(0,u.YG)("previewMedia",e,"maximum length of sources is 50");const t=(0,hr.hI)(this),n=e=>"string"!=typeof t||"/"!==e[0]?e:(0,h.S0)(`plugin-private://${t}${e}`),r=JSON.parse(JSON.stringify(e.sources)),o=[],i=[];r.forEach(((e,t)=>{e.type=e.type||"image",e.index=t,e.url=e.url?pr.L.get(e.url)||e.url:"","image"===e.type?o.push(e):"video"===e.type&&i.push(e)}));const a=o.map((e=>e.url||"")).map((e=>n(e))),s=i.map((e=>e.url||"")).map((e=>n(e)));(0,D.V)(a,"image",(t=>{const n=t.data.map((e=>e.url));(0,D.V)(s,"video",(t=>{const a=t.data.map((e=>e.url));n.forEach(((e,t)=>{const n=o[t].index;r[n].url=e})),a.forEach(((e,t)=>{const n=i[t].index;r[n].url=e}));const s=Object.assign({current:0},e,{sources:r});(0,u.IN)("previewMedia",s)}))}))};var gr=c(2046);const _r=(0,gr.s)("AudioInterruptionBegin"),mr=_r.onMethod,yr=_r.offMethod,vr=(_r.internalOnMethod,_r.internalOffMethod,(0,gr.s)("AudioInterruptionEnd")),Ar=vr.onMethod,br=vr.offMethod;vr.internalOnMethod,vr.internalOffMethod;let wr=!1,Cr=!1;(0,u.jQ)("onAudioInterruptionBegin",(e=>{wxNativeConsole.info("onAudioInterruptionBegin"),wr=!0,!1===Cr&&_r.emit(e)})),(0,u.jQ)("onAudioInterruptionEnd",(e=>{wxNativeConsole.info("onAudioInterruptionEnd"),wr=!1,!1===Cr&&vr.emit(e)}));const Ir=()=>Cr,Er=Object.assign,Sr=new WeakMap,Tr=new WeakMap;class xr{constructor(e,t=0,n){this.id=e,this.duration=t,this.mediaContainer=n}appendFrom(e){if(!(e instanceof xr))throw new Error("Parameter 1 should be a MediaTrack");Sr.get(this.mediaContainer).then((()=>{(0,u.IN)("operateMediaTrack",{operationType:"update",containerId:this.mediaContainer.id,trackId:this.id,appendFrom:e.id,fail:(0,h.Hw)((e=>{throw new Error(`fail to append. errMsg: ${e.errMsg}`)}),"at MediaTrack.appendFrom method")})}))}slice(e,t){let n=[];if("number"==typeof e){if("number"!=typeof t)throw new Error("Parameter 2 should be a number.");n.push([e,t])}else n=e;Sr.get(this.mediaContainer).then((()=>{(0,u.IN)("operateMediaTrack",{operationType:"update",containerId:this.mediaContainer.id,trackId:this.id,slice:n,fail:(0,h.Hw)((e=>{throw new Error(`fail to slice. errMsg: ${e.errMsg}`)}),"at MediaTrack.slice method")})}))}}class kr extends xr{constructor(e,t,n){super(e,t,n),this.kind="audio"}set volume(e){if(!(e>=0&&e<=1))throw new Error("Parameter 1 out of range.");Sr.get(this.mediaContainer).then((()=>{(0,u.IN)("operateMediaTrack",{operationType:"update",containerId:this.mediaContainer.id,trackId:this.id,volume:e,fail:(0,h.Hw)((e=>{throw new Error(`fail to set volume. errMsg: ${e.errMsg}`)}),"at MediaTrack.volume setter")})}))}set atempo(e){if(!(e>=0&&e<=10))throw new Error("Parameter 1 out of range.");Sr.get(this.mediaContainer).then((()=>{(0,u.IN)("operateMediaTrack",{operationType:"update",containerId:this.mediaContainer.id,trackId:this.id,atempo:e,fail:(0,h.Hw)((e=>{throw new Error(`fail to set atempo. errMsg: ${e.errMsg}`)}),"at MediaTrack.atempo setter")})}))}}class Pr extends xr{constructor(e,t,n){super(e,t,n),this.kind="video"}}class Dr{constructor(){const e=new Promise((e=>{(0,u.IN)("operateMediaContainer",{operationType:"create",success:t=>{this.id=t.containerId,e()},fail:(0,h.Hw)((e=>{throw new Error(`fail to createMediaContainer. errMsg: ${e.errMsg}`)}),"at createMediaContainer function")})}));Sr.set(this,e)}extractDataSource(e={}){(0,u.r3)("createMediaContainer.extractDataSource",e,{source:""})&&Sr.get(this).then((()=>{(0,u.IN)("operateMediaTrack",Er(e,{operationType:"get",containerId:this.id}),{beforeSuccess:e=>{var t,n;e.errMsg=e.errMsg.replace("operateMediaTrack","extractDataSource"),e.tracks=(t=e.tracks,n=this,t.map((e=>"video"===e.kind?new Pr(e.trackId,e.duration,n):"audio"===e.kind?new kr(e.trackId,e.duration,n):null)))},beforeFail(e){e.errMsg=e.errMsg.replace("operateMediaTrack","extractDataSource")}})}))}addTrack(e){if(!(e instanceof xr))throw new Error("Parameter 1 should be a MediaTrack");if("video"===e.kind){if(Tr.get(this))throw new Error("Only can be added one video track.");Tr.set(this,!0)}Sr.get(this).then((()=>{(0,u.IN)("operateMediaTrack",{operationType:"create",containerId:this.id,trackId:e.id,fail:(0,h.Hw)((e=>{throw new Error(`fail to addTrack. errMsg: ${e.errMsg}`)}),"at createMediaContainer.addTrack function")})}))}removeTrack(e){if(!(e instanceof xr))throw new Error("Parameter 1 should be a MediaTrack");"video"===e.kind&&Tr.set(this,!1),Sr.get(this).then((()=>{(0,u.IN)("operateMediaTrack",{operationType:"remove",containerId:this.id,trackId:e.id})}))}export(e={}){e.mimeType||(e.mimeType="mp4"),Sr.get(this).then((()=>{(0,u.IN)("operateMediaContainer",Er(e,{operationType:"export",containerId:this.id}))}))}destroy(){Sr.get(this).then((()=>{(0,u.IN)("operateMediaContainer",{operationType:"remove",containerId:this.id})}))}}function Or(){return new Dr}const Nr=new b.Z,Rr=new WeakMap,Mr=new WeakMap;(0,u.jQ)("onCanvasPlayerStateChange",(e=>{const t=e.state;"playEnd"===t?Nr.emit(e.containerId,{event:"ended",data:{}}):"buffSize"===t?Nr.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}}):"error"===t&&Nr.emit(e.containerId,{event:"error",data:{message:e.errMsg,code:e.errCode}})}));let Lr=!1;function Br(e){return Fr.apply(this,arguments)}function Fr(){return(Fr=ue()((function*(e){const t=Mr.get(e);yield t}))).apply(this,arguments)}function Wr(e,t,n={}){return(0,u.bb)("operateCanvasPlayer",I()(I()({},n),{},{containerId:e.id||0,operationType:t}))}function jr(e,t,n={}){return new Promise(((r,o)=>{c.g.NativeGlobal.MediaToolKit[t](I()(I()({},n),{},{containerId:e.id||0}),(e=>{if(0!==e.errCode){const n=new Error(e.errMsg||`${t} failed`);return Object.assign(n,e),void o(n)}r(e)}))}))}function Ur(e,t,n){const r=Rr.get(e);r&&r.emit(t,n)}class Vr{constructor(){var e=this;const t=new b.Z;Rr.set(this,t);const n=ue()((function*(){if(k.wZ){k.wZ&&(Lr||(Lr=!0,c.g.NativeGlobal.MediaToolKit.addEventListener("onPlayerBuffSize",(e=>{Nr.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}})})),c.g.NativeGlobal.MediaToolKit.addEventListener("onPlayerPlayEnd",(e=>{Nr.emit(e.containerId,{event:"ended",data:{}})}))));const t=yield new Promise(((e,t)=>{c.g.NativeGlobal.MediaToolKit.playerCreate({},(n=>{if(0!==n.errCode){const e=new Error(n.errMsg||"create failed");return Object.assign(e,n),void t(e)}e(n)}))}));e.id=t.containerId}else{const t=yield(0,u.bb)("operateCanvasPlayer",{operationType:"create"});e.id=t.containerId}Nr.on(e.id,(({event:e,data:n})=>t.emit(e,n)))}))();Mr.set(this,n)}start(e={}){var t=this;return ue()((function*(){let n;if(yield Br(t),k.wZ){let r=e.source;if(!e.source||!/^(http|https):\/\/.*/i.test(e.source)){r=(yield(0,u.bb)("private_fileSystemConvert",{operationType:"getAbsolutePath",localId:e.source})).filePath}const o=yield jr(t,"playerStart",{filePath:r,mode:void 0!==e.mode?e.mode:1,videoFormat:e.videoFormat||55,startStamp:e.startTime,abortAudio:e.abortAudio,abortVideo:e.abortVideo});n=Object.assign({},o.video),t.width=n.width||0,t.height=n.height||0,t.buffer=new ArrayBuffer(t.width*t.height*4),n.video=o.video,n.audio=o.audio}else{const r=yield Wr(t,"start",{source:e.source,mode:void 0!==e.mode?e.mode:1,videoFormat:e.videoFormat||55,startStamp:e.startTime,abortAudio:e.abortAudio,abortVideo:e.abortVideo});n=Object.assign({},r.video),t.buffId=r.buffId,t.width=n.width||0,t.height=n.height||0,n.video=r.video,n.audio=r.audio}return Ur(t,"start",n),n}))()}seek(e,t="inaccurate"){var n=this;return ue()((function*(){yield Br(n);const r="accurate"===t;return k.wZ?yield jr(n,"playerSeek",{seekStamp:e,seekByStamp:r}):yield Wr(n,"seek",{seekStamp:e,seekByStamp:r}),Ur(n,"seek",{position:e}),e}))()}wait(e=!1){var t=this;return ue()((function*(){yield Br(t),k.wZ?yield jr(t,"playerWait",{wait:e}):yield Wr(t,"wait",{wait:e}),Ur(t,"wait",{})}))()}stop(){var e=this;return ue()((function*(){yield Br(e),k.wZ?yield jr(e,"playerStop",{}):yield Wr(e,"stop",{}),Ur(e,"stop",{})}))()}remove(){var e=this;return ue()((function*(){if(yield Br(e),e.id){Nr.removeAllListeners(e.id);const t=Rr.get(e);t.eventNames().forEach((e=>t.removeAllListeners(e)))}k.wZ?yield jr(e,"playerRemove",{}):yield Wr(e,"remove",{})}))()}getFrameData(){let e,t,n,r,o,i;if(k.wZ?c.g.NativeGlobal.MediaToolKit.playerGetFrame({containerId:this.id,buffer:this.buffer},(i=>{i.got&&(e=this.buffer),t=i.pts,n=i.pk_pts,r=i.dts,o=i.pk_dts})):(0,u.IN)("operateCanvasPlayer",{operationType:"getFrame",containerId:this.id,success:i=>{i.got&&(e=pe.Z.get(this.buffId),e&&(e.__proto__=ArrayBuffer.prototype)),t=i.pts,n=i.pk_pts,r=i.dts,o=i.pk_dts},fail(e){i=new Error(e.errMsg&&e.errMsg.replace(/operateCanvasPlayer/g,"getFrameData")),Object.assign(i,e)}}),i)throw i;return e?{width:this.width,height:this.height,data:e,pts:t,pkPts:n,dts:r,pkDts:o}:null}on(e,t){Rr.get(this).on(e,t)}off(e,t){Rr.get(this).off(e,t)}get videoDecoderId(){return this.id}}function Gr(){return new Vr}const $r={0:"OK","10 01 2":"Global_APINoPermission","10 02 2":"Global_APINoAuthorization","10 03 1":"Global_FileStorageNotEnough","13 01 3":"Render_CanvasIllegalInvocation","13 02 3":"Render_FontFileInvalid","13 03 3":"Render_ImageLoadFailed","14 01 2":"Network_RequestTimeout","15 01 3":"Storage_NotFound","16 01 3":"File_NotExist","22 00 2":"GameRecorder_UnknownError","22 01 2":"GameRecorder_InternalFailed","22 02 2":"GameRecorder_NotSupported","22 10 3":"GameRecorder_StartDurationInvalid","22 11 3":"GameRecorder_StartBitRateInvalid","22 12 3":"GameRecorder_StartFPSInvalid","22 13 3":"GameRecorder_StartGOPInvalid","22 14 3":"GameRecorder_StartWhileAlreadyStartRecording","22 15 3":"GameRecorder_StartWhilePaused","22 20 3":"GameRecorder_PauseWhileNotStartRecording","22 21 3":"GameRecorder_PauseWhileAlreadyPaused","22 30 3":"GameRecorder_ResumeWhileNotStartRecording","22 31 3":"GameRecorder_ResumeWhileRecording","22 40 3":"GameRecorder_AbortWhileNotStartRecording","22 50 3":"GameRecorder_StopWhileNotStartRecording","22 60 3":"GameRecorder_NoVideo","22 61 3":"GameRecorder_BGMNotFound","22 62 3":"GameRecorder_TimeRangeInvalid","22 63 3":"GameRecorder_EditDurationOutOfLimit","22 64 3":"GameRecorder_TimeRangeTooShort","23 00 2":"MediaRecorder_UnknownError","23 01 2":"MediaRecorder_InternalFailed","23 02 2":"MediaRecorder_NotSupported","23 10 3":"MediaRecorder_StartDurationInvalid","23 11 3":"MediaRecorder_StartBitRateInvalid","23 12 3":"MediaRecorder_StartFPSInvalid","23 13 3":"MediaRecorder_StartGOPInvalid","23 14 3":"MediaRecorder_StartWhileAlreadyStartRecording","23 15 3":"MediaRecorder_StartWhilePaused","23 20 3":"MediaRecorder_PauseWhileNotStartRecording","23 21 3":"MediaRecorder_PauseWhileAlreadyPaused","23 30 3":"MediaRecorder_ResumeWhileNotStartRecording","23 31 3":"MediaRecorder_ResumeWhileRecording","23 40 3":"MediaRecorder_AbortWhileNotStartRecording","23 50 3":"MediaRecorder_StopWhileNotStartRecording","23 60 3":"MediaRecorder_NoVideo","23 61 3":"MediaRecorder_BGMNotFound","23 62 3":"MediaRecorder_TimeRangeInvalid","23 63 3":"MediaRecorder_EditDurationOutOfLimit","23 64 3":"MediaRecorder_TimeRangeTooShort"},Hr=Object.keys($r).reduce(((e,t)=>{const n=parseInt(t.replace(/\s/g,""),10);return e[$r[t]]=n,e}),{});var Zr=c(1331);const Qr=e=>{const t={101:{code:Hr.MediaRecorder_StartDurationInvalid,message:"MediaRecorder.start:fail duration invalid"},103:{code:Hr.MediaRecorder_StartWhileAlreadyStartRecording,message:"MediaRecorder.start:fail start while already start recording"},104:{code:Hr.MediaRecorder_StartWhilePaused,message:"MediaRecorder.start:fail start while paused"},106:{code:Hr.MediaRecorder_StartBitRateInvalid,message:"MediaRecorder.start:fail bitrate invalid"},107:{code:Hr.MediaRecorder_StartFPSInvalid,message:"MediaRecorder.start:fail fps invalid"},108:{code:Hr.MediaRecorder_StartGOPInvalid,message:"MediaRecorder.start:fail gop invalid"},201:{code:Hr.MediaRecorder_PauseWhileNotStartRecording,message:"MediaRecorder.pause:fail pause while not start recording"},202:{code:Hr.MediaRecorder_PauseWhileAlreadyPaused,message:"MediaRecorder.pause:fail pause while already paused"},301:{code:Hr.MediaRecorder_ResumeWhileNotStartRecording,message:"MediaRecorder.resume:fail resume while not start recording"},302:{code:Hr.MediaRecorder_ResumeWhileRecording,message:"MediaRecorder.resume:fail resume while recording"},401:{code:Hr.MediaRecorder_AbortWhileNotStartRecording,message:"MediaRecorder.abort:fail abort while not start recording"},501:{code:Hr.MediaRecorder_StopWhileNotStartRecording,message:"MediaRecorder.stop:fail stop while not start recording"},503:{code:Hr.Global_FileStorageNotEnough,message:"MediaRecorder.stop:fail file storage not enough"}};return t[e]?t[e]:[102,110,111,502,710,810].includes(e)?{code:Hr.MediaRecorder_InternalFailed,message:"MediaRecorder:fail internal failed"}:{code:Hr.MediaRecorder_UnknownError,message:"MediaRecorder:fail unknown error"}},Yr=new b.Z,zr=new WeakMap,qr=new WeakMap,Jr=new WeakMap,Kr=new WeakMap,Xr=new Map,eo=new Map;function to(e){return no.apply(this,arguments)}function no(){return(no=ue()((function*(e){const t=Kr.get(e);yield t}))).apply(this,arguments)}function ro(e,t={}){return new Promise(((n,r)=>{c.g.NativeGlobal.MediaToolKit[e](t,(t=>{if(t&&t.errCode&&0!==t.errCode){const n=new Error(t.errMsg||`${e} failed`);return Object.assign(n,t),void r(n)}n(t)}))}))}function oo(e,t,n={}){const r=qr.get(e);let o=r.id,i=0;return r instanceof Zr.y&&(o=r.__id,i=r._offscreenCanvasId),(0,u.bb)("operateMediaRecorder",I()(I()({},n),{},{canvasId:o,offScreenCanvasId:i,operationType:t}))}(0,u.jQ)("onMediaRecorderStateChange",(e=>{const t=e.state;let n=e.canvasId<<0;if(n=Xr.has(n)?Xr.get(n):n,delete e.state,"timeUpdate"===t)Yr.emit(n,{event:"timeupdate",data:{currentTime:e.currentTime}});else if("error"===t){const t=Qr(e.errCode);Yr.emit(n,{event:"error",data:{error:t}})}}));let io=!1;class ao{constructor(e,t={}){var n=this;qr.set(this,e);const r=new b.Z;zr.set(this,r),Yr.on(e.id,(({event:e,data:t})=>r.emit(e,t))),"number"==typeof t.duration?this.duration=Math.min(7200,Math.max(5,t.duration)):this.duration=7200,"number"==typeof t.videoBitsPerSecond?this.videoBitsPerSecond=Math.min(3e3,Math.max(600,t.videoBitsPerSecond)):this.videoBitsPerSecond=1e3,this.fps=t.fps||24,this.gop=t.gop||12,this.timeUpdateInterval=t.timeUpdateInterval||this.gop,this.audioPlayerId=t.audioPlayerId;const o=ue()((function*(){if(k.wZ){k.wZ&&(io||(io=!0,c.g.NativeGlobal.MediaToolKit.addEventListener("onRecorderTimeUpdate",(e=>{if(eo.has(e.containerId)){const t=eo.get(e.containerId);Yr.emit(t,{event:"timeupdate",data:{currentTime:e.stamp}})}}))));const t=yield ro("recorderCreate",{});n._containerId=t.containerId,eo.set(n._containerId,e.id)}else yield oo(n,"create",{}),e instanceof Zr.y&&Xr.set(e.__id,e.id);r.emit("create",{})}))();Kr.set(this,o)}pause(){var e=this;return ue()((function*(){yield to(e);const t=zr.get(e);if(k.wZ){const n=yield ro("recorderUpdate",{containerId:e._containerId,pause:!0});t.emit("pause",n)}else yield oo(e,"pause",{}),t.emit("pause")}))()}resume(){var e=this;return ue()((function*(){yield to(e);const t=zr.get(e);if(k.wZ){const n=yield ro("recorderUpdate",{containerId:e._containerId,pause:!1});t.emit("resume",n)}else yield oo(e,"resume"),t.emit("resume")}))()}start(){var e=this;return ue()((function*(){yield to(e);const t=zr.get(e),n=qr.get(e),r={width:n.width,height:n.height,fps:e.fps,bitrate:e.videoBitsPerSecond,gop:e.gop,duration:e.duration,timeUpdateInterval:e.timeUpdateInterval,audioPlayerId:e.audioPlayerId,cumulativeStamp:!0};if(k.cj&&oe.Z.clientVersion<385879296?r.duration=Math.floor(e.duration):r.duration=Math.floor(1e3*e.duration),k.wZ){const o=yield(0,u.bb)("private_fileSystemConvert",{operationType:"getWxFilePath",fileName:`${Date.now()}`,mimeType:"mp4",autoDeleteIfExists:!0});e.tempFilePath=o.localId,e._absoluteFilePath=o.filePath;let i=n.id;n instanceof Zr.y&&(i=n._offscreenCanvasId),r.containerId=e._containerId,r.canvasId=i,r.notifyVideoKeyFrame=!0,r.filePath=o.filePath;const a=yield ro("recorderStart",r);t.emit("start",a)}else yield oo(e,"start",r),t.emit("start")}))()}stop(){var e=this;return ue()((function*(){yield to(e);const t=zr.get(e);let n;if(k.wZ){yield ro("recorderStop",{containerId:e._containerId});const t=yield ro("analysis",{filePath:e._absoluteFilePath});n={duration:t.duration,tempFilePath:e.tempFilePath,fileSize:t.size}}else{const{tempFilePath:t,tempThumbPath:r,fileSize:o,duration:i}=yield oo(e,"stop");n={tempFilePath:t,tempThumbPath:r,fileSize:o,duration:i}}return t.emit("stop",n),n}))()}requestFrame(e=(()=>{})){var t=this;return ue()((function*(){yield to(t);const n=qr.get(t);if(k.wZ){const n=yield new Promise((e=>{c.g.NativeGlobal.MediaToolKit.recorderCapture({containerId:t._containerId},e)})),o=1e3/t.fps;n.got?e():(yield(r=o,new Promise((e=>setTimeout(e,r)))),yield t.requestFrame(e))}else{var r;n instanceof Zr.y?setTimeout((()=>{e(),c.g.WeixinCanvas.recordFrame(n.__id,n._offscreenCanvasId)})):(yield new Promise((e=>n.requestAnimationFrame(e))),e())}}))()}on(e,t){"timeUpdate"===e&&(e="timeupdate"),zr.get(this).on(e,t)}off(e,t){"timeUpdate"===e&&(e="timeupdate"),zr.get(this).off(e,t)}destroy(){var e=this;return ue()((function*(){const t=qr.get(e);Yr.removeAllListeners(t.id);const n=zr.get(e);n.eventNames().forEach((e=>n.removeAllListeners(e))),k.wZ?(yield to(e),eo.delete(e._containerId),yield ro("recorderRemove",{containerId:e._containerId})):yield oo(e,"remove")}))()}}function so(e,t){if(Jr.get(e))throw new Error("Already created by the same canvas node.");if(!e||"function"!=typeof e.getContext||!e.getContext("webgl"))throw new Error("Cannot get webgl context from target.");const n=new ao(e,t);return Jr.set(e,n),n}const co=Object.assign,lo=(e={})=>{if(!(0,u.r3)("openVideoEditor",e,{filePath:""}))return;const{title:t,filePath:n}=e;let{minDuration:r,maxDuration:o}=e;r=parseInt(r,10),o=parseInt(o,10),(!r||r<1)&&(r=1),(!o||o>300)&&(o=300),(0,u.IN)("openVideoEditor",co({},e,{editType:2,editorParmas:{title:t,filePath:n,minDuration:r,maxDuration:o,toolBars:["crop"],buttonOptions:[]}}),{beforeSuccess(e){e.duration=e.duraionMs||Math.round(e.duration/1e3),delete e.chosenId,delete e.videoMD5,delete e.duraionS,delete e.duraionMs,delete e.duraionUs}})};var uo=c(946);const po=new WeakMap,ho=new WeakMap,fo=new WeakMap,go=new WeakMap,_o=new WeakMap,mo=new WeakMap,yo=new WeakMap,vo=new Map,Ao=new Map;bt.Z.EventHandler&&(bt.Z.EventHandler.onbindingobjectdestruct=e=>{const t=Ao[e];t&&(0,u.IN)("getAudioState",{audioId:t,success(e){!0===e.paused?(vo.delete(t),(0,u.IN)("destroyAudioInstance",{audioId:t})):vo.get(t)&&!1===vo.get(t).loop&&So.once(`${t}_onAudioStateChange_ended`,(()=>{vo.delete(t),(0,u.IN)("destroyAudioInstance",{audioId:t})}))}})});const bo=function(e,t){ho.set(this,Object.assign(ho.get(this),{[e]:t})),"src"===e&&ho.set(this,Object.assign(ho.get(this),{paused:!0})),go.get(this)&&(setTimeout((()=>{const n=Object.assign({},ho.get(this),_o.get(this),{timestamp:Date.now(),audioId:po.get(this),success:()=>{ho.set(this,Object.assign(ho.get(this),{[e]:t}))},fail:()=>{Co.call(this)}});Ir()&&(n.autoplay=!1),(0,u.IN)("setAudioState",n),go.set(this,!0)}),0),go.set(this,!1)),_o.set(this,Object.assign(_o.get(this),{[e]:t}))},wo=function(e,t){yo.get(this).then((()=>{bo.call(this,e,t)}))},Co=function(e,t){let n=ho.get(this)[e];return(0,u.IN)("getAudioState",{audioId:po.get(this),success:r=>{delete r.errMsg,ho.set(this,Object.assign(ho.get(this),r)),n=r[e],"function"==typeof t&&t(n)}}),n},Io=function(e){const t=po.get(this);(0,u.IN)("operateAudio",Object.assign({timestamp:Date.now(),audioId:t,fail({errMsg:e}){Do("error",{errMsg:e,errCode:-1})}},e))},Eo=function(e){yo.get(this).then((()=>{setTimeout((()=>{Io.call(this,e)}),0)}))},So=new b.Z;(0,u.jQ)("onAudioStateChange",((e={})=>{e.state=e.state.toLowerCase();const{state:t,audioId:n}=e;delete e.audioId,delete e.state;const r="play"!==t,o=vo.get(n);o&&(o.paused=r),(0,u.IN)("getAudioState",{audioId:n,success(){t}}),So.emit(`${n}_onAudioStateChange_${t}`,e)}));const To=function(e,t){const n=`${po.get(this)}_onAudioStateChange_${e}`,r=n=>{__errorTracer__.surroundThirdByTryCatch(t,`at audioContext.on${e} callback function`)(n)};mo.set(t,r),So.on(n,r)},xo=function(e,t){yo.get(this).then((()=>{To.call(this,e,t)}))},ko=function(e,t){const n=`${po.get(this)}_onAudioStateChange_${e}`;if((0,O.mf)(t)){const e=mo.get(t);(0,O.mf)(e)&&So.off(n,e)}else So.removeAllListeners(n)},Po=function(e,t){yo.get(this).then((()=>{ko.call(this,e,t)}))},Do=function(e,t){So.emit(`${po.get(this)}_onAudioStateChange_${e}`,t)};let Oo=0,No=!1;const Ro=class{constructor({async:e=!0}={}){let t,n;ho.set(this,{}),_o.set(this,{}),fo.set(this,void 0),go.set(this,!0),yo.set(this,new uo.Q(((e,r)=>{t=e,n=r}))),(0,u.IN)(k.wZ&&(0,St.aI)()&&oe.Z.clientVersion>=654315008&&e||k.jP?"createAudioInstanceAsync":"createAudioInstance",{timestamp:Date.now(),success:e=>{const n={src:"",startTime:0,paused:!0,currentTime:0,duration:0,obeyMuteSwitch:!0,volume:1,autoplay:!1,loop:!1,buffered:0,referrerPolicy:""};if(vo.set(e.audioId,n),po.set(this,e.audioId),ho.set(this,n),bt.Z.BindingObject){const t=new bt.Z.BindingObject;this.__bindingObject=t,Ao[t.__id]=e.audioId}Oo+=1,++Oo>=1024&&!No&&k.cj&&(No=!0,Reporter.reportIDKey({id:356,key:"audioInstancesCountReach1024"})),setTimeout(t,0)},fail:e=>{n(e.errMsg)}}),["Play","Pause","Stop","Canplay","Error","Ended","Waiting","Seeking","Seeked"].forEach((e=>{this[`on${e}`]=t=>{xo.call(this,e.toLowerCase(),t)},this[`off${e}`]=t=>{Po.call(this,e.toLowerCase(),t)}}))}get src(){return this.cloudId?this.cloudId:Co.call(this,"src")}set src(e){"string"==typeof e&&0!==e.length?(0,D.V)([e],"audio",(t=>{/^(cloud):\/\//.test(e)?this.cloudId=e:this.cloudId="",e=t.data[0].url,wo.call(this,"src",e)})):Do.call(this,"error",{errMsg:`Failed to set src, the src ${e} is invalid.`})}get startTime(){return Co.call(this,"startTime")/1e3}set startTime(e){"number"==typeof e?wo.call(this,"startTime",1e3*e):Do("error",{errMsg:`Failed to set startTime, the startTime ${e} is invalid.`})}set autoplay(e){"boolean"==typeof e&&wo.call(this,"autoplay",e)}get autoplay(){return Co.call(this,"autoplay")}set loop(e){"boolean"==typeof e&&wo.call(this,"loop",e)}get loop(){return Co.call(this,"loop")}set obeyMuteSwitch(e){"boolean"==typeof e&&wo.call(this,"obeyMuteSwitch",e)}get obeyMuteSwitch(){return Co.call(this,"obeyMuteSwitch")}set volume(e){"number"!=typeof e||e<0||e>1||wo.call(this,"volume",e)}get volume(){return Co.call(this,"volume")}set playbackRate(e){"number"!=typeof e||e<0||wo.call(this,"playbackRate",e)}get playbackRate(){return Co.call(this,"playbackRate")}set referrerPolicy(e){"string"==typeof e&&wo.call(this,"referrerPolicy",e)}get referrerPolicy(){return Co.call(this,"referrerPolicy")}get paused(){return Co.call(this,"paused")}get duration(){return Co.call(this,"duration")/1e3}get currentTime(){return Co.call(this,"currentTime")/1e3}get buffered(){return Co.call(this,"buffered")/1e3}play(){!1===Ir()&&Eo.call(this,{operationType:"play"})}pause(){Eo.call(this,{operationType:"pause"})}stop(){Eo.call(this,{operationType:"stop"})}seek(e){"number"!=typeof e||e<0?Do("error",{errMsg:`Failed to seek, the currentTime ${e} is invalid.`}):Eo.call(this,{operationType:"seek",currentTime:1e3*e})}destroy(){yo.get(this).then((()=>{const e=po.get(this);vo.has(e)&&(["play","pause","stop","canplay","error","ended","waiting","seeking","seeked"].forEach((t=>{const n=`${e}_onAudioStateChange_${t}`;So.removeAllListeners(n)})),vo.delete(e),Oo-=1,(0,u.IN)("destroyAudioInstance",{audioId:e}))}))}onTimeUpdate(e){yo.get(this).then((()=>{const t=`${po.get(this)}_onAudioStateChange_timeupdate`;void 0===fo.get(this)&&fo.set(this,setInterval((()=>{if("active"!==f.Z.runningStatus||!0===ho.get(this).paused||1===ho.get(this).paused)return;const e=ho.get(this).currentTime;Co.call(this,"currentTime",(n=>{n!==e&&So.emit(t)}))}),250)),So.removeAllListeners(t);const n=t=>{__errorTracer__.surroundThirdByTryCatch(e,"at audioContext.onTimeUpdate callback function")(t)};mo.set(e,n),So.on(t,n)}))}offTimeUpdate(e){yo.get(this).then((()=>{Po.call(this,"timeupdate",e)}))}static pauseAllAudio(){vo.forEach(((e,t)=>{(0,u.IN)("operateAudio",{timestamp:Date.now(),audioId:t,operationType:"pause"})}))}},Mo=wxNativeConsole.createLogger("InnerAudioContext"),Lo=e=>{let t;t="object"==typeof e&&e?e:{async:e};const n=t.useWebAudioImplement;return(k.DD||k.Ae)&&bt.Z.Audio?(Mo.info("using NativeAudio"),new un):n&&Ct?(Mo.info("using WebAudio"),new pn):(Mo.info("using AudioJsApi"),new Ro(t))};var Bo=c(7142);const Fo={},Wo=new b.y,jo={};(0,u.Ld)("audioInsert",(({audioId:e,pluginId:t,nodeId:n},r)=>{let i=`${r}_${t}_${e}_`;n&&n!==o.getRootNodeId(r)&&(i+=n),Fo[i]=!0,Wo.emit(`audioInsert_${i}`),function(e){jo[e]||(jo[e]=!0,(0,x.dq)(e,(e=>{delete jo[e],Object.keys(Fo).forEach((t=>{new RegExp("^"+e).test(t)&&delete Fo[t]}))})))}(r)})),(0,u.Ld)("audioRemove",(({audioId:e,pluginId:t,nodeId:n},r)=>{let i=`${r}_${t}_${e}_`;n&&n!==o.getRootNodeId(r)&&(i+=n),delete Fo[i]}));class Uo{constructor(e,t,n,r){if("string"!=typeof e)throw new h.iZ("Parameter 1 should be a string");this.audioId=e,this.webviewId=t,this.pluginId=r,this.nodeId=n}setSrc(e){this._sendAction({method:"setSrc",data:e})}play(){this._getAppStatus()===xe.w$.BACK_GROUND||this._sendAction({method:"play"})}pause(){this._sendAction({method:"pause"})}seek(e){this._sendAction({method:"setCurrentTime",data:e})}_ready(e){const t=`${this.webviewId}_${this.pluginId}_${this.audioId}_${this.nodeId}`;Fo[t]?e():Wo.on(`audioInsert_${t}`,(()=>{e()}))}_sendAction(e){this._ready((()=>{(0,u.nY)(`audio_${this.pluginId}_${this.audioId}_${this.nodeId}_actionChanged`,e,[this.webviewId])}))}}function Vo(e,t,n="",r=""){const o=new Uo(e,t,n,r);return o._getAppStatus=()=>f.Z.appStatus,o._getHanged=()=>f.Z.hanged,Bo.J.call(this,(()=>{o.pause()})),o}const Go={},$o={},Ho={},Zo={};let Qo=1;(0,u.Ld)("editorInsert",(({domId:e,editorId:t,pluginId:n,nodeId:r},i)=>{let a=`${i}_${n}_${e}_`;r&&r!==o.getRootNodeId(i)&&(a+=r),Go[a]=t,function(e){Ho[e]||(Ho[e]=!0,(0,x.dq)(e,(e=>{delete Ho[e],Object.keys(Go).forEach((t=>{new RegExp("^"+e).test(t)&&delete Go[t]})),Object.keys($o).forEach((t=>{new RegExp("^api_"+e).test(t)&&delete $o[t]})),Object.keys($o).forEach((t=>{new RegExp("^SQ_"+e).test(t)&&delete $o[t]}))})))}(i)})),(0,u.Ld)("editorRemoved",(({domId:e,editorId:t,pluginId:n,nodeId:r},i)=>{let a=`${i}_${n}_${e}_`;r&&r!==o.getRootNodeId(i)&&(a+=r),delete Go[a];const s=`SQ_${i}_${t}`;delete $o[`api_${i}_${n}_${e}_${r}`],delete $o[s]})),(0,u.Ld)("doEditorActionCallback",(e=>{const t=e.callbackId;if(t&&void 0!==Zo[t]){delete e.callbackId;const n=Zo[t];e.errMsg&&(e.errMsg.indexOf("ok")>-1?"function"==typeof n.success&&n.success(e):e.errMsg.indexOf("fail")>-1&&"function"==typeof n.fail&&n.fail(e)),"function"==typeof n.complete&&n.complete(e),delete Zo[t]}}));class Yo{format(e,t=!1){this._execCommand("format",{name:e,value:t,needCallBack:!1})}scrollIntoView(){this._execCommand("scrollIntoView",{needCallBack:!1})}_execCommandWithId(e,t,n){if(n.needCallBack){const t={};Object.keys(n).forEach((e=>{"function"==typeof n[e]&&(t[e]=n[e],delete n[e])}));const r=`callback${this.webviewId}_${e}_${Qo++}`;Zo[r]=t,n.callbackId=r}delete n.needCallBack,this.action={method:t,args:n},(0,u.nY)(`editor_${this.webviewId}_${e}_actionChanged`,this.action,[this.webviewId])}}["insertDivider","insertImage","insertText","setContents","getContents","clear","removeFormat","undo","redo","blur","getSelectionText"].forEach((e=>{Yo.prototype[e]=(0,T.gA)((function(t){this._execCommand(e,I()(I()({},t),{},{needCallBack:!0}))}))}));class zo extends Yo{constructor(e,t){super(),this.editorId=e,this.webviewId=t}_execCommand(e,t){this._execCommandWithId(this.editorId,e,t)}}function qo(e,t){const n=`SQ_${t}_${e}`;if($o[n])return $o[n];const r=new zo(e,t);return $o[n]=r,r}var Jo=c(638);const Ko=e=>{if(""===f.Z.currentClipBoardData)return;let t;void 0!==i&&(t=i.getCurrentPagesByDomain("").find((e=>e.__wxWebviewId__===f.Z.currentWebviewId))||{});const n=[f.Z.currentClipBoardData,t?t.route:"",e?1:0,t?Object.keys(t.options||{}).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t.options[e])}`)).join("&"):"",Reporter.getAppType()].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Clipboard",value:n})},Xo=__safeway__.apiSign.makeApiSign;function ei(){const e=Xo("getClipboardData",{success(e){f.Z.currentClipBoardData=e.data}});ti()&&(0,u.be)("getClipboardData",e)}function ti(){const{system:e,useClipboardWithPermissionNotify:t}=oe.Z;return!t&&(!/^iOS /i.test(e)||parseInt(e.split(" ")[1],10)<14)}oe.Z.onReady(ei),(0,Jo.T)(ei),(0,Bo.J)((()=>{const e=Xo("getClipboardData",{success(e){e.data!==f.Z.currentClipBoardData&&(f.Z.currentClipBoardData=e.data,Ko(!1))}});ti()&&(0,u.be)("getClipboardData",e)}));var ni=c(7371),ri=c(9798),oi=c(6175),ii=c(6329),ai=c(9973),si=c(8827),ci=c(4504);const{pluginInfos:li}=ci.Z;let di;const ui=[],pi=(()=>{let e=!1;return oe.Z.clientVersion>=369431584&&oe.Z.clientVersion<=369432575&&(e=!0),oe.Z.clientVersion>=637867008&&oe.Z.clientVersion<=637868031&&(e=!0),()=>e})(),hi=e=>{const t=String(e).split(".",3);return t.length<3?-1:Number(1e3*t[0]*1e3+1e3*t[1]+1*t[2])};let fi;const gi=e=>{"android"===oe.Z.platform&&oe.Z.clientVersion<=654315519&&(fi=()=>{for(let t=0;t<e.length;t++){const n=e[t],r=n.plugin_id,o=li[r];if(!o)return;const i=(e,t)=>{const r=new Set(o.domains[e]);n[t].forEach((e=>{r.add(e)})),o.domains[e]=Array.from(r)};i("request","request_domain"),i("uploadFile","upload_domain"),i("downloadFile","download_domain"),i("connectSocket","wsrequest_domain")}Object.keys(li).map((e=>[e,li[e].domains]))})},_i=({version:e,customVersion:t})=>({customVersion:t,version:e,domains:{},hostSign:{}});var mi=c(4572);let yi=!1;oe.Z.onReady((()=>{yi=yi||1037===(oe.Z.appLaunchInfo||{}).scene})),(0,Jo.T)((e=>{yi=yi||1037===e.scene}));const vi=(e={},t="/")=>{if(!(0,u.r3)("navigateToDevMiniProgram",e,{appId:""}))return;if(!["undefined","string"].includes(typeof e.relativeURL))return void(0,u.YG)("navigateToDevMiniProgram",e,"relativeURL should be string or undefined");const n=Object.assign({},e);"string"==typeof n.path&&void 0===n.relativeURL&&(n.relativeURL=(0,h.Pp)(n.path)),(0,u.qu)(t)("navigateToDevMiniProgram",n,{})},Ai=(e={})=>{(0,u.IN)("exitMiniProgram",e,{})};var bi=c(1529),wi=c(3170),Ci=c(7868),Ii=c(7646),Ei=c(2614);let Si=0,Ti={};(0,bi.HM)((e=>{Ti=e,Si=e.webviewId}));let xi=Date.now(),ki=Date.now(),Pi=Date.now(),Di=0;(0,bi.T7)((()=>{xi=Date.now(),xi>ki&&(Di+=xi-ki)})),(0,bi.JG)((()=>{ki=Date.now()})),(0,bi.qS)((()=>{Pi=Date.now()}));let Oi=null,Ni=[];(0,u.Ld)("videoAdPreloadInfoGet",(e=>{Oi=e,Ni.forEach((e=>{e&&e(Oi)})),Ni=[]}));let Ri=null;let Mi=new Date,Li="";oe.Z.onReady((()=>{Mi=new Date;const e=(0,wi.Oo)();Li=e.model}));const Bi={},Fi=(e,t)=>{Bi[e]=t},Wi=(0,Ii.Ce)(!1,"operateWXData"),ji=e=>{var t;t=t=>{const n={};(0,St.er)()&&(n.in_3rd_app=1);const r={ad_unit_id:e,pos_id:"7090665964306299",scene_type:t.scene_type,weapp_path:Ti.path,user_agent:t.ua,weapp_extra_data:JSON.stringify({start_ts:Mi.valueOf(),enter_ts:xi,user_duration:Date.now()-Pi-Di,machine_type:Li,env:oe.Z.host&&oe.Z.host.env,app_appid:oe.Z.host&&oe.Z.host.appId}),ext_slot_custom_comm:JSON.stringify(n)};Wi({apiName:"webapi_getadvert",reqData:r,success:t=>{try{if((t=JSON.parse(t.rawData)).advertisement_num>=1&&t.advertisement_info.length){const n=t.advertisement_info[0];n._preloadTime=+new Date,1515===n.crt_size?((e,t)=>{try{const n=Date.now();(0,Ei.o)({url:t.video_info.videoUrl,success(r){t.video_info.preloadUrl=r.tempFilePath,Fi(e,t),(0,Ci.r)(80,{costTime:Date.now()-n},{ad_pos_type:6,aid:t.aid,traceid:t.traceid,ad_unit_id:e})},fail(r){Fi(e,t),(0,Ci.r)(81,{costTime:Date.now()-n,e:r},{ad_pos_type:6,aid:t.aid,traceid:t.traceid,ad_unit_id:e})}})}catch(e){}})(e,n):Fi(e,n);const r=(e=>{const t={};try{e=JSON.parse(e);for(const n of e)n.hasOwnProperty("exp_para")&&n.exp_para.forEach((e=>{t[e.name]=Number(e.value)}));return t}catch(e){return{}}})(n.flow_exp_info);void 0!==r.widget_gray_preload_max&&(Vi=r.widget_gray_preload_max),(0,Ci.r)(74,{errMsg:"advertisement success",errCode:t.ret},{ad_pos_type:6,aid:n.aid,traceid:n.traceid,ad_unit_id:e})}else(0,Ci.r)(75,{errMsg:"no advertisement",errCode:t.ret},{ad_pos_type:6,ad_unit_id:e})}catch(t){(0,Ci.r)(75,{errMsg:"advertisement error"},{ad_pos_type:6,ad_unit_id:e})}},fail:()=>{(0,Ci.r)(76,{errMsg:"advertisement fail"},{ad_pos_type:6,ad_unit_id:e})}})},Oi?t&&t(Oi):(Ri&&clearTimeout(Ri),Ri=setTimeout((()=>{(0,u.nY)("videoAdPreloadInfo",null,[Si])}),0),Ni.push(t))},Ui=[];let Vi=5;const Gi=()=>Ui;var $i=c(8476),Hi=c(5328),Zi=c(8579);const Qi=(0,Ii.Ce)(!1,"operateWXData"),Yi=[],zi={};let qi=null,Ji=[];(0,u.Ld)("videoAdPreloadInfoGet",(e=>{qi=e,Ji.forEach((e=>{null==e||e(qi)})),Ji=[]}));let Ki=null;const Xi={},ea=function(){var e=ue()((function*(e,t){let n,r;try{const i=JSON.parse(t.rawData);if(!(i.advertisement_num>=1&&i.advertisement_info.length))return void(0,Ci.r)(Zi.IN.PRELOAD_LOAD_ERROR,{errCode:i.ret,errMsg:"no advertisement",type:e.type},{ad_unit_id:e.unitId});{var o;const t=i.advertisement_info[0];if(n=t.aid,r=t.traceid,null!==(o=t.video_info)&&void 0!==o&&o.videoUrl){const n=yield((e,t)=>new Promise((n=>{const r=Date.now();(0,Ei.o)({url:t.video_info.videoUrl,success(o){n(o.tempFilePath),(0,Ci.r)(Zi.IN.PRELOAD_DOWNLOAD_SUCCESS,{type:e.type,url:t.video_info.videoUrl,costtime:Date.now()-r},{aid:t.aid,traceid:t.traceid,ad_unit_id:e.unitId})},fail(){n(""),(0,Ci.r)(Zi.IN.PRELOAD_DOWNLOAD_ERROR,{type:e.type,url:t.video_info.videoUrl},{aid:t.aid,traceid:t.traceid,ad_unit_id:e.unitId})}})})))(e,t);n&&(t.video_info.preloadUrl=n)}(0,Ci.r)(Zi.IN.PRELOAD_LOAD_SUCCESS,{type:e.type},{ad_unit_id:e.unitId,aid:t.aid,traceid:t.traceid})}Xi[e.unitId]={data:JSON.stringify(i),_preloadTime:+new Date,_aid:n,_traceid:r}}catch(t){(0,Ci.r)(Zi.IN.PRELOAD_LOAD_ERROR,{errMsg:"advertisement error",error:null==t?void 0:t.stack,type:e.type},{ad_unit_id:e.unitId})}}));return function(t,n){return e.apply(this,arguments)}}(),ta=new Set,na=e=>{var t;ta.has(e.unitId)||(ta.add(e.unitId),t=t=>{const n={pos_id:"",ad_unit_id:e.unitId,scene_type:t.scene_type,weapp_path:$i.S0.weappPath,user_agent:t.ua,sdk_version:$i.S3.SDKVersion,appid:$i.S3.gameAppId,orig_weapp_id:"",weapp_extra_data:JSON.stringify({wxa_start_ts:$i.S3.startTime.valueOf(),wxa_enter_ts:$i.S0.enterForegroundTime.valueOf(),start_ts:$i.S3.startTime.valueOf(),enter_ts:$i.S0.enterForegroundTime.valueOf(),user_duration:$i.S0.gameDuration+(Date.now()-$i.S0.enterForegroundTime.getTime()),machine_type:$i.S3.model,is_ad_interval:!1,wxa_ext:""}),ext_slot_custom_comm:""},r={is_ad_preload:1};"custom"===e.type?(n.pos_id=Hi.DX.customAd,r.is_adunit_tmpl=!0):"banner"===e.type?(n.pos_id=Hi.DX.banner,Number(e.adIntervals)>0&&(r.refresh_time=String(e.adIntervals))):"videoPatch"===e.type?n.pos_id=Hi.DX.wxAppPreVideoAd:"video"===e.type&&(n.pos_id=Hi.DX.wxAppVideo),(0,St.er)()&&(r.in_3rd_app=1),n.ext_slot_custom_comm=JSON.stringify(r),Qi({apiName:"webapi_getadvert",reqData:n,success:t=>{ea(e,t)},fail:t=>{(0,Ci.r)(Zi.IN.PRELOAD_CALL_ERROR,{error:t,type:e.type},{ad_unit_id:e.unitId})},complete:()=>{ta.delete(e.unitId)}})},qi?null==t||t(qi):(Ki&&clearTimeout(Ki),Ki=setTimeout((()=>{(0,u.nY)("videoAdPreloadInfo",null,[$i.S0.currentWebviewId])}),0),Ji.push(t)))},ra=()=>Yi;var oa=c(3685),ia=c(5688),aa=c(5014);const sa=__safeway__.apiSign.makeApiSign,ca={setPrivateExtraData:mi.xH,getCurrentRoute:(e={})=>{e.success({currentRoute:f.Z.lastRoute})},getRealRouteWithProtocol:(e={})=>{const{lastRoute:t=f.Z.lastRoute,relativeRoute:n=".",needTrans:r=!0}=e;e.success({route:(0,h.s$)(t,n,r)})},setWxInterfaceDisabled:p.AL,navigateTo:ni.T8,navigateToWithRelatedInfo:ni.mN,redirectTo:ni.gB,switchTab:ni.MR,navigateBack:ni.n,reLaunch:ni.UY,getUserCloudStorage:ri.u,getFriendCloudStorage:oi.l,getGroupCloudStorage:ii.q,reportRecycledAPI:ai.Y,getPassCookieString:si.KL,getPayCookieString:si.Zv,getPluginInfo:hr.u4,getPluginContactList:function(e){void 0===di?ui.push(e.success):e.success(di)},_checkBeforeNavigateToMiniProgram:Y.Fl,getVideoAdPreloadData:e=>{const t=e.data,{unitId:n}=t;Bi[n]?(e.success&&e.success({adData:Bi[n]}),delete Bi[n]):e.success&&e.success({adData:null}),-1!==Ui.indexOf(n)&&setTimeout((()=>{ji(n)}),1e3)},getAdPreloadData:e=>{const{data:t}=e,{ad_unit_id:n,appid:r,orig_weapp_id:o,weapp_extra_data:i,pos_id:a}=t;try{if(r!==$i.S3.gameAppId)throw new Error("appid Error");if(o)throw new Error("orig_weapp_id Error");const e=JSON.parse(i);if(e.is_ad_interval)throw new Error("is_ad_interval Error");if(e.wxa_ext)throw new Error("wxa_ext Error");const{type:t}=zi[n];if("banner"===t&&-1===[Hi.DX.banner,void 0,""].indexOf(a))throw new Error("pos_id Error");if("custom"===t&&a!==Hi.DX.customAd)throw new Error("pos_id Error");if("videoPatch"===t&&a!==Hi.DX.wxAppPreVideoAd)throw new Error("pos_id Error");if("video"===t&&a!==Hi.DX.wxAppVideo)throw new Error("pos_id Error")}catch(t){var s,c;return null===(s=e.fail)||void 0===s||s.call(e,{errMsg:"getAdData: fail"}),void(0,Ci.r)(Zi.IN.PRELOAD_USE_ERROR,{type:null===(c=zi[n])||void 0===c?void 0:c.type,error:null==t?void 0:t.message},{ad_unit_id:n})}if(Xi[n]){var l,d,u,p;if(Date.now()-Xi[n]._preloadTime>6e5)null===(l=e.fail)||void 0===l||l.call(e,{errMsg:"getAdData: fail"}),(0,Ci.r)(Zi.IN.PRELOAD_USE_ERROR,{type:null===(d=zi[n])||void 0===d?void 0:d.type,error:"time more than 10m"},{ad_unit_id:n});else null===(u=e.success)||void 0===u||u.call(e,{data:Xi[n],errMsg:"getAdData: ok from preload"}),(0,Ci.r)(Zi.IN.PRELOAD_USE_SUCCESS,{type:null===(p=zi[n])||void 0===p?void 0:p.type},{ad_unit_id:n,aid:Xi[n]._aid,traceid:Xi[n]._traceid});delete Xi[n]}else{var h,f;null===(h=e.fail)||void 0===h||h.call(e,{errMsg:"getAdData: fail"}),(0,Ci.r)(Zi.IN.PRELOAD_USE_ERROR,{type:null===(f=zi[n])||void 0===f?void 0:f.type,error:"has no preload data"},{ad_unit_id:n})}-1===Yi.indexOf(n)||ta.has(n)||setTimeout((()=>{na(zi[n])}),1e3)},shareImageMessage:(e={})=>{(0,u.IN)("shareImageMessage",e,{})},getCloudFileInfo:D.K,_setNavigateBackInterception:oa.tl,_stopNavigateBackInterception:oa.Am,chooseInvoice:ia.FH,chooseInvoiceTitle:ia.n7,checkPermission:aa.P,_setWxIsInvokeInTapForNavToMiniProgramForWebview:Y.ie},la=(e,t,n,r)=>{(0,u.nY)("callbackAppServiceMethod",{res:e,isSuccess:t,callbackId:n},[r])};(0,u.Ld)("invokeAppServiceMethod",(({name:e,type:t,args:r,callbackId:o},i)=>{try{if("bridge"===t){const t=sa(e,r);(0,u.dw)(e,t,(t=>{t.errMsg=t.errMsg||`${e}:ok`,-1!==t.errMsg.indexOf(`${e}:ok`)?la(t,!0,o,i):la(t,!1,o,i)}))}else{r.success=e=>{la(e,!0,o,i)},r.fail=e=>{la(e,!1,o,i)};const a=("wx"===t?n[e]:ca[e])(r);a instanceof Promise&&a.catch((()=>{}))}}catch(t){const n={errMsg:`${e}: fail ${t.message}`};la(n,!1,o,i)}}));var da=c(7322);(0,u.jQ)("onStartReportPageData",(()=>{const e=(void 0!==i?i.getCurrentPagesByDomain(""):[]).find((e=>e.__wxWebviewId__===f.Z.currentWebviewId));e&&(0,da.L)("getInnerHTML",{},[f.Z.currentWebviewId],(({html:t})=>{let n;try{n=JSON.stringify({html:t,data:e.data})}catch(e){n=""}(0,u.IN)("reportPageData",{isUserReport:!0,pageData:n,pageRoute:e.__route__,complete(){}})}))}));var ua=c(1633);const pa=(0,gr.s)("NavigationBarTitleUpdate"),ha=pa.internalOnMethod,fa=(e={})=>{(0,u.r3)("setNavigationBarTitle",e,{title:""})&&(f.Z.navigationBarTitleMap[f.Z.lastRoute]=e.title,f.Z.lastRoute,e.title,(0,u.IN)("setNavigationBarTitle",e,{beforeAll(t){pa.emitInternal(I()({title:e.title},t))}}))},ga=e=>{(0,u.IN)("showNavigationBarLoading",e)},_a=e=>{(0,u.IN)("hideNavigationBarLoading",e)};let ma="#000000",ya="#ffffff";function va(e){const t=(oe.Z.appContactInfo||{}).operationInfo||{};if(!t.jsonInfo||!t.jsonInfo.op_info||1!==Number(t.jsonInfo.op_info.gray_flag)||0!==oe.Z.appType)return;const n=/^#([0-9|A-F|a-f]{6})$/.exec(e);if(null!=n){const e=parseInt(n[1].slice(0,2),16),t=parseInt(n[1].slice(2,4),16),r=parseInt(n[1].slice(4),16),o=Math.round(.299*e+.587*t+.114*r).toString(16).toUpperCase();(0,u.IN)("setNavigationBarColor",{frontColor:ya,backgroundColor:`#${o}${o}${o}`})}}oe.Z.onReady((function(){(0,sr.H)((function(){if(void 0!==oe.Z&&oe.Z.global&&oe.Z.global.window){const e=oe.Z.global.window;ma=e.navigationBarBackgroundColor||ma,ya="black"===e.navigationBarTextStyle?"#000000":"#ffffff"}const e=f.Z.lastRoute+".html";if(void 0!==oe.Z&&oe.Z.page&&oe.Z.page[e]&&oe.Z.page[e].window){const t=oe.Z.page[e].window;ma=t.navigationBarBackgroundColor||ma,ya="black"===t.navigationBarTextStyle?"#000000":"#ffffff"}va(ma)}))}));const Aa=(e={})=>{if(!(0,u.r3)("setNavigationBarColor",e,{frontColor:"",backgroundColor:""}))return;if(-1===["#ffffff","#000000"].indexOf(e.frontColor))return void(0,u.YG)("setNavigationBarColor",e,`invalid frontColor "${e.frontColor}"`);"#ffffff"===e.frontColor?(0,u.IN)("setStatusBarStyle",{color:"white"}):"#000000"===e.frontColor&&(0,u.IN)("setStatusBarStyle",{color:"black"});const t=Object.assign({},e);ma=e.backgroundColor,ya=e.frontColor,(0,u.IN)("setNavigationBarColor",t),va(ma)},ba=(e={})=>{const t=Object.assign({},e);t.backgroundColor=ma,(0,u.IN)("setNavigationBarColor",t,{beforeAll(e){e.errMsg=e.errMsg.replace("setNavigationBarColor","setNavigationBarAlpha")}})},wa=(e={})=>{(0,u.r3)("setNavigationBarRightButton",e,{hide:!0})&&(0,u.IN)("setNavigationBarRightButton",e,{})},Ca=e=>{(0,u.jQ)("onCustomRightButtonClick",__errorTracer__.surroundThirdByTryCatch(e,"at onTapNavigationBarRightButton callback function"))};let Ia=0;const Ea=x.kQ,Sa=x.oZ,Ta=x.V9;var xa=c(9889);let ka=!1;(0,sr.H)((e=>{try{ka=oe.Z.tabBar.list.some((({pagePath:t})=>t.startsWith(e.path)))}catch(e){}}));let Pa=null;oe.Z.onReady((()=>{Pa=oe.Z.tabBar&&oe.Z.tabBar.list||[]}));let Da=1;const Oa={};(0,u.Ld)("pageScrollDone",(e=>{if(e.callbackId<0||void 0===Oa[e.callbackId])return;const t=Oa[e.callbackId];delete Oa[e.callbackId],delete e.callbackId;const n="pageScrollTo";e.errMsg=e.errMsg||"scrollWebviewTo:ok",e.errMsg=e.errMsg.replace("scrollWebviewTo",n);const r=0===e.errMsg.indexOf(`${n}:ok`),o=0===e.errMsg.indexOf(`${n}:fail`);r?"function"==typeof t.success&&t.success(e):o&&"function"==typeof t.fail&&t.success(e),"function"==typeof t.complete&&t.complete(e)}));const Na=e=>{const t=i.getCurrentPagesByDomain("");let n=t[t.length-1].__wxWebviewId__;(0,re.n)(e,"page")&&(0,re.n)(e.page,"__wxWebviewId__")&&(n=e.page.__wxWebviewId__);const r={};for(const t in e)"function"==typeof e[t]&&(r[t]=e[t],delete e[t]);e.callbackId=Da,Oa[Da]=r,Da++,(0,u.nY)("pageScrollTo",e,[n])},Ra=(e={})=>{(0,u.IN)("startPullDownRefresh",e,{})},Ma=e=>{(0,u.IN)("stopPullDownRefresh",e)};let La=0;const Ba={},Fa=(e={})=>{Ba[La]={success:e.success,fail:e.fail,complete:e.complete},(0,u.nY)("setPageStyle",{callbackId:La,style:e.style},[f.Z.currentWebviewId]),La+=1};(0,u.Ld)("callbackSetPageStyle",(({res:e,callbackId:t})=>{const{errMsg:n}=e,r=0===n.indexOf("setPageStyle:ok"),o=0===n.indexOf("setPageStyle:fail"),i=Ba[t];delete Ba[t],"object"==typeof i&&(r?"function"==typeof i.success&&i.success(e):o&&"function"==typeof i.fail&&i.fail(e),"function"==typeof i.complete&&i.complete(e))}));let Wa=-1;function ja(){return Wa}(0,u.Ld)("xWebTextareaFocusChanged",(({focus:e}={},t)=>{Wa=e?t:-1}));let Ua=!1;(0,gr.s)("XWebTextareaSupportedEvent").internalOnMethod((({canInsert2XWeb:e}={})=>{Ua=e}));class Va{constructor(e={}){this.actions=[],this.currentTransform=[],this.currentStepAnimates=[],this.option={transition:{duration:void 0!==e.duration?e.duration:400,timingFunction:void 0!==e.timingFunction?e.timingFunction:"linear",delay:void 0!==e.delay?e.delay:0},transformOrigin:e.transformOrigin||"50% 50% 0"}}export(){const e=this.actions;return this.actions=[],{actions:e}}step(e={}){return this.currentStepAnimates.forEach((e=>{"style"!==e.type?this.currentTransform[e.type]=e:this.currentTransform[`${e.type}.${e.args[0]}`]=e})),this.actions.push({animates:Object.keys(this.currentTransform).reduce(((e,t)=>[...e,this.currentTransform[t]]),[]),option:{transformOrigin:void 0!==e.transformOrigin?e.transformOrigin:this.option.transformOrigin,transition:{duration:void 0!==e.duration?e.duration:this.option.transition.duration,timingFunction:void 0!==e.timingFunction?e.timingFunction:this.option.transition.timingFunction,delay:void 0!==e.delay?e.delay:this.option.transition.delay}}}),this.currentStepAnimates=[],this}matrix(e=1,t=0,n=0,r=1,o=1,i=1){return this.currentStepAnimates.push({type:"matrix",args:[e,t,n,r,o,i]}),this}matrix3d(e=1,t=0,n=0,r=0,o=0,i=1,a=0,s=0,c=0,l=0,d=1,u=0,p=0,h=0,f=0,g=1){return this.currentStepAnimates.push({type:"matrix3d",args:[e,t,n,r,o,i,a,s,c,l,d,u,p,h,f,g]}),this.stepping=!1,this}rotate(e=0){return this.currentStepAnimates.push({type:"rotate",args:[e]}),this}rotate3d(e=0,t=0,n=0,r=0){return this.currentStepAnimates.push({type:"rotate3d",args:[e,t,n,r]}),this.stepping=!1,this}rotateX(e=0){return this.currentStepAnimates.push({type:"rotateX",args:[e]}),this.stepping=!1,this}rotateY(e=0){return this.currentStepAnimates.push({type:"rotateY",args:[e]}),this.stepping=!1,this}rotateZ(e=0){return this.currentStepAnimates.push({type:"rotateZ",args:[e]}),this.stepping=!1,this}scale(e=1,t){return t=void 0!==t?t:e,this.currentStepAnimates.push({type:"scale",args:[e,t]}),this}scale3d(e=1,t=1,n=1){return this.currentStepAnimates.push({type:"scale3d",args:[e,t,n]}),this}scaleX(e=1){return this.currentStepAnimates.push({type:"scaleX",args:[e]}),this}scaleY(e=1){return this.currentStepAnimates.push({type:"scaleY",args:[e]}),this}scaleZ(e=1){return this.currentStepAnimates.push({type:"scaleZ",args:[e]}),this}skew(e=0,t=0){return this.currentStepAnimates.push({type:"skew",args:[e,t]}),this}skewX(e=0){return this.currentStepAnimates.push({type:"skewX",args:[e]}),this}skewY(e=0){return this.currentStepAnimates.push({type:"skewY",args:[e]}),this}translate(e=0,t=0){return this.currentStepAnimates.push({type:"translate",args:[e,t]}),this}translate3d(e=0,t=0,n=0){return this.currentStepAnimates.push({type:"translate3d",args:[e,t,n]}),this}translateX(e=0){return this.currentStepAnimates.push({type:"translateX",args:[e]}),this}translateY(e=0){return this.currentStepAnimates.push({type:"translateY",args:[e]}),this}translateZ(e=0){return this.currentStepAnimates.push({type:"translateZ",args:[e]}),this}opacity(e){return this.currentStepAnimates.push({type:"style",args:["opacity",e]}),this}backgroundColor(e){return this.currentStepAnimates.push({type:"style",args:["background-color",e]}),this}width(e){return"number"==typeof e&&(e=`${e}px`),this.currentStepAnimates.push({type:"style",args:["width",e]}),this}height(e){return"number"==typeof e&&(e=`${e}px`),this.currentStepAnimates.push({type:"style",args:["height",e]}),this}left(e){return"number"==typeof e&&(e=`${e}px`),this.currentStepAnimates.push({type:"style",args:["left",e]}),this}right(e){return"number"==typeof e&&(e=`${e}px`),this.currentStepAnimates.push({type:"style",args:["right",e]}),this}top(e){return"number"==typeof e&&(e=`${e}px`),this.currentStepAnimates.push({type:"style",args:["top",e]}),this}bottom(e){return"number"==typeof e&&(e=`${e}px`),this.currentStepAnimates.push({type:"style",args:["bottom",e]}),this}}const Ga=(e={})=>{if((0,u.r3)("createAnimation",e,{}))return new Va(e)};var $a=c(9706);const Ha=e=>{(0,u.IN)("setPageOrientation",e)},Za=e=>/^#[0-9a-fA-F]{6}$/.test(e),Qa=(e={})=>{(e=Object.assign({},e)).backgroundColor&&!Za(e.backgroundColor)&&delete e.backgroundColor,e.backgroundColorTop&&!Za(e.backgroundColorTop)&&delete e.backgroundColorTop,e.backgroundColorBottom&&!Za(e.backgroundColorBottom)&&delete e.backgroundColorBottom,(e.backgroundColor||e.backgroundColorTop||e.backgroundColorBottom)&&(0,u.IN)("setBackgroundColor",e)},Ya=(e={})=>{-1!==["dark","light"].indexOf(e.textStyle)?(0,u.IN)("setBackgroundTextStyle",e):(0,u.YG)("setBackgroundTextStyle",e,`invalid textStyle "${e.textStyle}"`)},za=()=>{};var qa=c(2913);let Ja=!1;(0,gr.s)("XWebTextareaSupportedEvent").internalOnMethod((({canInsert2XWeb:e}={})=>{Ja=e}));let Ka=0;const Xa={};(0,u.Ld)("onGetXWebSelectedTextRange",(({taskId:e,focus:t,start:n,end:r}={})=>{const o=Xa[e];o&&(t?("function"==typeof o.success&&o.success({errMsg:"getSelectedTextRange:ok",start:n,end:r}),"function"==typeof o.complete&&o.complete({errMsg:"getSelectedTextRange:ok",start:n,end:r})):("function"==typeof o.fail&&o.fail({errMsg:"getSelectedTextRange:fail:no focused input"}),"function"==typeof o.complete&&o.complete({errMsg:"getSelectedTextRange:fail:no focused input"}))),delete Xa[e]}));const es={},ts={};function ns(e,t,n){const r=ts[e];r&&r[`bind${t}`]&&f.Z.webviewEventCallback&&f.Z.webviewEventCallback({data:{type:t,target:r.target,currentTarget:r.target,timeStamp:Date.now()-r.createdTimestamp,detail:n},eventName:r[`bind${t}`],webviewId:e,nodeId:r.nodeId})}function rs(e){const t=es[e];t&&t.length&&ns(e,"message",{data:t})}function os({name:e,arg:t},n){!k.wZ||k.qB||k.Ae||(n=f.Z.currentWebviewId),"navigateBack"===e?ni.n({delta:t.delta}):"navigateTo"===e?ni.T8({url:t.url}):"redirectTo"===e?ni.gB({url:t.url}):"reLaunch"===e?ni.UY({url:t.url}):"switchTab"===e?ni.MR({url:t.url}):"error"===e?ns(n,"error",{errMsg:"web-view load failed due to not in domain list",url:t.url}):"postMessage"===e&&es[n]&&es[n].push(t)}(0,u.Ld)("webViewInserted",(function(e,t){ts[t]=e,es[t]=[],x.dq(t,(function(e){rs(e),delete ts[e],delete es[e]})),x.RK(t,rs),(0,u.IN)("hideShareTimelineMenu")})),(0,u.Ld)("webViewRemoved",(function(e,t){rs(t),delete ts[t],delete es[t],i.showShareTimelineMenuIfNeeded(t)})),(0,u.jQ)("onWebInvokeAppService",os),(0,u.jQ)("WEB_INVOKE_APPSERVICE",os),(0,u.jQ)("onBottomBannerButtonClicked",((e={})=>{e.currentPath,(0,u.IN)("restart",{url:e.currentPath,scene:1155,fail(e){wxNativeConsole.error("restart fail",e)}})}));const is=function(e,t,n){setTimeout((()=>{(0,u.nY)("callbackMiniProgramFunction",{callbackId:t,argArr:n},[e])}),0)};(0,u.Ld)("callMiniProgramFunction",(({callbackId:e,paths:t,funcName:n,argArr:r},o)=>{let i=null;"object"!=typeof t&&(t=[t]);for(let e=0;e<t.length;e++){let n=t[e];".js"!==n.slice(-3)&&(n+=".js");try{i=y(n)}catch(e){}if(i)break}if(i)if("function"!=typeof i[n]){is(o,e,[{errMsg:"callMiniProgramFunction:fail Function not found"}])}else r.push((function(...t){is(o,e,t)})),i[n].apply({},r);else{is(o,e,[{errMsg:"callMiniProgramFunction:fail File not found"}])}}));var as=c(3755);const ss=(0,gr.s)("UpdateWXConfig"),cs=ss.onMethod;ss.offMethod;(0,u.jQ)("onUpdateWXConfig",(e=>{wxNativeConsole.info("onUpdateWXConfig",e),Object.keys(e).forEach((t=>{oe.Z[t]=e[t]})),ss.emit(e)}));let ls=!1;oe.Z.onReady((()=>{ls="develop"===oe.Z.envVersion||"trial"===oe.Z.envVersion}));let ds=0;const us={wgs84:null,gcj02:null};(0,sr.H)((()=>{ds=0})),(0,Bo.J)((()=>{ds=0}));const ps=(e={})=>{"gcj02"!==e.type&&(e.type="wgs84");const t=Date.now(),n=us[e.type];if(t-ds>=1e4||!ls&&!n)return ds=t,void((e={},t={})=>{(0,u.IN)("getLocation",e,Object.assign({beforeSuccess(t){e.altitude||delete t.altitude}},t))})(e,{afterAll(t){us[e.type]=t}});if(ls)(0,u.YG)("getLocation",e,"频繁调用会增加电量损耗，可考虑使用 wx.onLocationChange 监听地理位置变化");else{const t=0===n.errMsg.indexOf("getLocation:ok");(0,u.FE)({name:"getLocation",success:t,args:e,errMsg:n.errMsg,res:n})}},hs=function(e={}){(0,u.IN)("chooseLocation",e)},fs=(e={})=>{(0,u.IN)("choosePoi",e)},gs=function(e={}){(0,u.r3)("openLocation",e,{latitude:1,longitude:1})&&(0,u.IN)("openLocation",e)},_s=(0,gr.s)("locationChange"),ms=_s.onMethod,ys=_s.offMethod;(0,u.jQ)("onLocationChange",((e={})=>{_s.emit(e)}));const vs=(0,gr.s)("locationChangeError"),As=vs.onMethod,bs=vs.offMethod;(0,u.jQ)("onLocationChangeError",((e={})=>{vs.emit(e)}));const ws=function(e={}){const t={subKey:"",enableIndoor:!1,enable:!0};Object.assign(t,e),(0,u.IN)("enableLocationUpdate",t,{beforeAll(e){e.errMsg=e.errMsg.replace("enableLocationUpdate","startLocationUpdate")}})},Cs=function(e={}){k.wZ&&oe.Z.clientVersion>=654312704&&oe.Z.clientVersion<654312960?(0,u.IN)("enableLocationUpdate",Object.assign({enable:!1},e),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableLocationUpdate","stopLocationUpdate")}}):(0,u.IN)("disableLocationUpdate",e,{beforeAll(e){e.errMsg=e.errMsg.replace("disableLocationUpdate","stopLocationUpdate")}})},Is=()=>{if(!oe.Z.ext)return{};try{return JSON.parse(JSON.stringify(oe.Z.ext))}catch(e){return{}}},Es={},Ss={},Ts={};function xs(e,t){return e+"_"+t}function ks(){return(k.cj?Number((oe.Z.system||"").replace("iOS","")):0)>=13}function Ps(e){delete Es[e],delete Ss[e],delete Ts[e]}function Ds(e,t,n,r=!0){const o=xs(t,e);if(r&&(void 0===Es[o]||!0!==Es[o].enhanced))return console.warn("此方法需要 scroll-view 开启 enhanced 属性！"),!1;const i=I()({scrollViewId:e},n),a=Es[o];return a&&a.fallback?(0,u.nY)("operateWebviewScrollView",i,[t]):(0,u.IN)("operateScrollView",i,{success(){}}),!0}function Os(e,t,n,r=!0){const o=xs(e,t);if(r&&(void 0===Es[o]||!0!==Es[o].enhanced))return console.warn("此方法需要 scroll-view 开启 enhanced 属性！"),!1;const i=I()({scrollViewId:t},n);return(0,u.nY)("operateXWebScrollView",i,[e]),!0}(0,u.Ld)("enhancedScrollViewReady",((e,t)=>{const n=xs(t,e.scrollViewId);Es[n]={enhanced:!0,data:e.data,fallback:e.fallback}})),(0,u.Ld)("commonScrollViewReady",((e,t)=>{const n=xs(t,e.scrollViewId);Es[n]||(Es[n]={enhanced:!1});const r=Ss[n];r&&"function"==typeof r&&(r(),delete Ss[n]),(0,x.dq)(t,(()=>{Ps(n)}))})),(0,u.Ld)("commonScrollViewDestroyed",((e,t)=>{Ps(xs(t,e.scrollViewId))})),(0,u.Ld)("enhancedScrollViewDragEvent",((e,t)=>{const n=xs(t,e.scrollViewId),r=Es[n];if(!r||!r.data)return;const o=r.data;let i="",a="";if("dragstart"===e.eventName?(i="dragstart",a=o.handlers.binddragstart):"dragging"===e.eventName?(i="dragging",a=o.handlers.binddragging):"dragend"===e.eventName&&(i="dragend",a=o.handlers.binddragend),a){const t={scrollTop:e.scrollTop,scrollLeft:e.scrollLeft};"dragend"===i&&(t.velocity=e.velocity),f.Z.webviewEventCallback({data:{type:i,target:o.target,currentTarget:o.target,touches:[],detail:t},eventName:a,webviewId:o.webviewId,nodeId:o.nodeId})}})),(0,u.Ld)("enhancedScrollViewSubscribeEvent",((e,t)=>{k.cj&&!ks()||(e.subscribe?Ds(e.scrollViewId,t,{registerDelegate:!0}):Ds(e.scrollViewId,t,{removeDelegate:!0}))})),(0,w.n)("onScrollViewWillEndDragging",(e=>{const t=xs(f.Z.currentWebviewId,e.scrollViewId),n=Es[t];if(!n||!n.data)return;const r=n.data;f.Z.webviewEventCallback({data:{type:"dragend",target:r.target,currentTarget:r.target,touches:[],detail:{scrollTop:e.contentOffset.y,scrollLeft:e.contentOffset.x,velocity:e.velocity}},eventName:r.handlers.binddragend,webviewId:r.webviewId,nodeId:r.nodeId})}));class Ns{constructor(e,t){this.id=e,this.webviewId=t,this._scrollEnabled=!0,this._bounces=!0,this._showScrollbar=!0,this._pagingEnabled=!1,this._fastDeceleration=!1,this._decelerationDisabled=!1}}class Rs extends Ns{constructor(e,t){super(e,t),this.uid=xs(t,e),void 0!==Es[e]&&!0===Es[e].enhanced&&(this.scrollEnabled=!0)}get scrollEnabled(){return this._scrollEnabled}set scrollEnabled(e){Ds(this.id,this.webviewId,{scrollEnabled:e})&&(this._scrollEnabled=e)}get bounces(){return this._bounces}set bounces(e){Ds(this.id,this.webviewId,{bounces:e})&&(this._bounces=e)}get showScrollbar(){return this._showScrollbar}set showScrollbar(e){Ds(this.id,this.webviewId,{showsVerticalScrollIndicator:e,showsHorizontalScrollIndicator:e})&&(this._showScrollbar=e)}get pagingEnabled(){return this._pagingEnabled}set pagingEnabled(e){Ds(this.id,this.webviewId,{pagingEnabled:e})&&(this._pagingEnabled=e)}get fastDeceleration(){return this._fastDeceleration}set fastDeceleration(e){Ds(this.id,this.webviewId,{decelerationRate:e?.99:.998})&&(this._fastDeceleration=e)}scrollTo({top:e,left:t,duration:n,velocity:r,animated:o}={}){const i=void 0!==t?t:0,a=void 0!==e?e:0;if(void 0===n)Ds(this.id,this.webviewId,{"setContentOffset:animated":{animated:!!o,contentOffset:{x:i,y:a}}});else{if(k.cj&&!ks())return;Ds(this.id,this.webviewId,{"setContentOffset:springAnimated":{contentOffset:{x:i,y:a},duration:n/1e3,delay:0,damping:1,velocity:r}})}}get decelerationDisabled(){return this._decelerationDisabled}set decelerationDisabled(e){if(k.cj&&!ks())return;Ds(this.id,this.webviewId,{customDecelerateEnabled:e})&&(this._decelerationDisabled=e)}_onReady(e){const t=Es[this.uid],n=()=>{"function"==typeof e&&e()};t?n():Ss[this.uid]=()=>{n()}}scrollIntoView(e){!function(e,t,n,r=!0){const o=xs(t,e);if(r&&(void 0===Es[o]||!0!==Es[o].enhanced))return console.warn("此方法需要 scroll-view 开启 enhanced 属性！"),!1;const i=I()({scrollViewId:e},n);(0,u.nY)("operateWebviewScrollView",i,[t])}(this.id,this.webviewId,{scrollIntoView:e},!1)}}class Ms extends Ns{constructor(e,t){super(e,t),this.uid=xs(t,e)}get scrollEnabled(){return this._scrollEnabled}set scrollEnabled(e){Os(this.webviewId,this.id,{scrollEnabled:e})&&(this._scrollEnabled=e)}get bounces(){return this._bounces}set bounces(e){}get showScrollbar(){return this._showScrollbar}set showScrollbar(e){Os(this.webviewId,this.id,{showScrollbar:e})&&(this._showScrollbar=e)}get pagingEnabled(){return this._pagingEnabled}set pagingEnabled(e){Os(this.webviewId,this.id,{pagingEnabled:e})&&(this._pagingEnabled=e)}get fastDeceleration(){return this._fastDeceleration}set fastDeceleration(e){Os(this.webviewId,this.id,{fastDeceleration:e})&&(this._fastDeceleration=e)}scrollTo({top:e,left:t,duration:n,velocity:r,animated:o}={}){const i=void 0!==t?t:0,a=void 0!==e?e:0;Os(this.webviewId,this.id,{scrollToWithAnimation:{contentOffset:{x:i,y:a},duration:n,animated:o,velocity:r}})}set decelerationDisabled(e){}get decelerationDisabled(){return this._decelerationDisabled}_onReady(e){const t=Es[this.uid],n=()=>{"function"==typeof e&&e()};t?n():Ss[this.uid]=()=>{n()}}scrollIntoView(e){Os(this.webviewId,this.id,{scrollIntoView:e},!1)}}class Ls extends Ns{get scrollEnabled(){return this._scrollEnabled}set scrollEnabled(e){}get bounces(){return this._bounces}set bounces(e){}get showScrollbar(){return this._showScrollbar}set showScrollbar(e){}get pagingEnabled(){return this._pagingEnabled}set pagingEnabled(e){}get fastDeceleration(){return this._fastDeceleration}set fastDeceleration(e){}scrollTo(){}set decelerationDisabled(e){}get decelerationDisabled(){return this._decelerationDisabled}scrollIntoView(e){Os(this.webviewId,this.id,{scrollIntoView:e},!1)}}const Bs=(e,t,n,r)=>{if(e)if(Array.isArray(e))e.forEach((e=>Bs(e,t,n,r)));else{const{contextIs:o,contextId:i,contextCanvasId:a}=e;o&&("wx-video"===o&&(e.context=(0,ie.hN)(i,f.Z.currentWebviewId)),"wx-live-player"===o&&(e.context=ze(i,f.Z.currentWebviewId,r)),"wx-map"===o&&(e.context=Q(i,f.Z.currentWebviewId)),"wx-canvas"===o&&a&&(e.context=(0,X.createCanvasContext)(a,t)),"wx-editor"===o&&(e.context=qo(i,f.Z.currentWebviewId)),delete e.contextIs,delete e.contextId,delete e.contextCanvasId);const{nodeIs:s,nodeId:c,nodeCanvasType:l,nodeCanvasId:d,nodeNodeId:u}=e;s&&("wx-canvas"===s&&c&&(e.node=(0,X.createCanvasNode)(c,l,d,u)),"wx-scroll-view"===s&&c&&(e.node=function(e){const t=f.Z.currentWebviewId,n=((e,t)=>`${e}-${t}`)(t,e);return Ts[n]||(k.cj?Ts[n]=new Rs(e,t):k.wZ?Ts[n]=new Ms(e,t):Ts[n]=new Ls(e,t)),Ts[n]}(c)),delete e.nodeIs,delete e.nodeId,delete e.nodeCanvasId,delete e.nodeNodeId,e.node&&"function"==typeof e.node._onReady&&n.push(new Promise((t=>e.node._onReady(t)))))}};class Fs{constructor(e,t,n,r){this._selectorQuery=e,this._component=t,this._selector=n,this._single=r}fields(e,t){return this._selectorQuery._push(this._selector,this._component,this._single,e,t),this._selectorQuery}boundingClientRect(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,rect:!0,size:!0},e),this._selectorQuery}scrollOffset(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,scrollOffset:!0},e),this._selectorQuery}context(e){return this._selectorQuery._push(this._selector,this._component,this._single,{context:!0},e),this._selectorQuery}node(e){return this._selectorQuery._push(this._selector,this._component,this._single,{node:!0},e),this._selectorQuery}}const Ws={},js=e=>class{constructor(e){if(e&&e.page)this._component=this._defaultComponent=e.page,this._webviewId=this._defaultComponent.__wxWebviewId__;else{const e=i.getCurrentPagesByDomain("");this._defaultComponent=e[e.length-1],this._component=null,this._webviewId=null}this._queue=[],this._queueCb=[]}in(e){return null===this._webviewId?(this._webviewId=e.__wxWebviewId__,this._component=e):this._webviewId!==e.__wxWebviewId__?console.error("A single SelectorQuery could not work in components in different pages. A SelectorQuery#in call has been ignored."):this._component=e,this}select(e){return new Fs(this,this._component,e,!0)}selectAll(e){return new Fs(this,this._component,e,!1)}selectViewport(){return new Fs(this,0,"",!0)}_push(t,n,r,i,a){null===this._webviewId&&(this._webviewId=this._defaultComponent?this._defaultComponent.__wxWebviewId__:void 0);const s=e?"":o.getRootNodeId(this._webviewId);this._queue.push({component:null!=n?0===n?0:n.__wxExparserNodeId__:s,selector:t,single:r,fields:i}),this._queueCb.push(a||null)}exec(t){((e,t,n)=>{if(null==e)return void console.warn("An SelectorQuery call is ignored because no proper page or component is found. Please considering using `SelectorQuery.in` to specify a proper one.");const r=o.requestViewInfo("selectorQuery",t,e,(t=>{n&&(o.endViewInfoCallback(e,r),n&&n(t))}))})(this._webviewId,{pluginId:e,queue:this._queue},(n=>{const r=this._queueCb,o=[],i=[];n.forEach(((t,n)=>{Bs(t,this._component,i,e),"function"==typeof r[n]&&o.push(__errorTracer__.surroundThirdByTryCatch((()=>{r[n].call(this,t)}),"at SelectorQuery callback function"))})),"function"==typeof t&&o.push(__errorTracer__.surroundThirdByTryCatch((()=>{t.call(this,n)}),"at SelectorQuery callback function")),i.length?Promise.all(i).then((()=>{o.forEach((e=>e()))})):o.forEach((e=>e()))}))}};function Us(e,t){return Ws[t]||(Ws[t]=js(t)),new Ws[t](e)}const Vs=(e,t,n)=>{const r=o.requestViewInfo("intersection",t,e,(t=>{t.reqEnd&&o.endViewInfoCallback(e,r),n&&(t.reqEnd||n(t))}))},Gs={},$s=e=>class{constructor(e,t){if(this._component=e,this._options=t,this._relativeInfo=[],this._observerId=null,this._disconnected=!1,e)this._webviewId=e.__wxWebviewId__;else{const e=i.getCurrentPagesByDomain("");e.length&&(this._webviewId=e[e.length-1].__wxWebviewId__)}}relativeTo(e,t){if(null!==this._observerId)throw new Error('Relative nodes cannot be added after "observe" call in IntersectionObserver');return this._relativeInfo.push({selector:e,margins:t}),this}relativeToViewport(e){if(null!==this._observerId)throw new Error('Relative nodes cannot be added after "observe" call in IntersectionObserver');return this._relativeInfo.push({selector:null,margins:e}),this}observe(t,n){if(null!==this._observerId)throw new Error('"observe" call can be only called once in IntersectionObserver');this._observerId="";const r=this._component;Vs(this._webviewId,{type:"addIntersectionObserver",pluginId:e,nodeId:r?r.__wxExparserNodeId__:o.getRootNodeId(this._webviewId),targetSelector:t,relativeInfo:this._relativeInfo,options:this._options},(e=>{this._disconnected||(e.observerId&&(this._observerId=e.observerId),e.info&&n.call(this,e.info))}))}disconnect(){Vs(this._webviewId,{type:"removeIntersectionObserver",observerId:this._observerId}),this._disconnected=!0}};function Hs(e,t,n){return Gs[n]||(Gs[n]=$s(n)),new Gs[n](e,t)}const Zs=(e,t,n)=>{const r=o.requestViewInfo("matchMedia",t,e,(t=>{t.reqEnd&&o.endViewInfoCallback(e,r),n&&(t.reqEnd||n(t))}))},Qs={},Ys=()=>class{constructor(e,t){this._component=e,this._options=t,this._relativeInfo=[],this._observerId=null,this._disconnected=!1,this._webviewId=e.__wxWebviewId__}observe(e,t){if(null!==this._observerId)throw new Error('"observe" call can be only called once in MediaQueryObserver');this._observerId="",Zs(this._webviewId,{type:"addMediaQueryObserver",mediaQueryCond:e},(e=>{this._disconnected||(e.observerId&&(this._observerId=e.observerId),e.info&&t.call(this,e.info))}))}disconnect(){Zs(this._webviewId,{type:"removeMediaQueryObserver",observerId:this._observerId}),this._disconnected=!0}};function zs(e,t,n){return Qs[n]||(Qs[n]=Ys()),new Qs[n](e,t)}let qs=[],Js=null;function Ks(){const e=qs;qs=[],Js=null;for(let t=0,n=e.length;t<n;t++){let n=e[t];n&&(n=__errorTracer__.surroundThirdByTryCatch(n,"at api nextTick callback function")),n&&n()}}const Xs=e=>{e&&"function"==typeof e&&(qs.push(e),Js||(Js=setTimeout(Ks,0)))};var ec=c(8745);const tc=new b.Z;(0,u.jQ)("onLoadSubPackageTaskStateChange",(e=>{tc.emit(e.state,e.taskId,e)}));var nc=c(5959);const rc={},oc=[],ic=new WeakMap,ac=new WeakMap,sc=function(e){return rc[e]},cc=function(e){const t=Object.assign({},e);return delete t.taskId,delete t.state,delete t.moduleName,t},lc=function(e,t=!1){let n=e;"string"!=typeof n&&console.error("SubContext onSubPackageReady error: moduleName is empty"),n.endsWith(".js")||(n.endsWith("/")||(n=`${n}/`),n=`${n}game.js`);const r=nc.n.get();if((0,St.GO)()&&(0,St.aI)()&&!t&&!r)return"__APP__"===e?__subContextEngine__.getGameContext().evaluateScriptFile("game.js"):__subContextEngine__.getGameContext().evaluateScriptFile(n)};tc.on("success",((e,t)=>{const n=sc(e);delete rc[e],Array.isArray(n)&&n.forEach(function(){var e=ue()((function*(e){const n=t.moduleName,r=ic.get(e),o=cc(t);oc.push(n),yield lc(n,t.isMonkeyTest),o.errMsg="loadSubpackage:ok","function"==typeof r.success&&r.success(o),"function"==typeof r.complete&&r.complete(o)}));return function(t){return e.apply(this,arguments)}}())})),tc.on("fail",((e,t)=>{const n=sc(e);delete rc[e],Array.isArray(n)&&n.forEach((e=>{const n=ic.get(e),r=cc(t);r.errMsg="loadSubpackage:fail module not found","function"==typeof n.fail&&n.fail(r),"function"==typeof n.complete&&n.complete(r)}))})),tc.on("progressUpdate",((e,t)=>{const n=sc(e);Array.isArray(n)&&n.forEach((e=>{const n=ac.get(e),r=cc(t);"function"==typeof n&&n(r)}))}));const dc=function(){const e=ic.get(this);if(oc.indexOf(e.name)>=0){const t={errMsg:"loadSubpackage:ok",moduleName:e.name};return"function"==typeof e.success&&e.success(t),void("function"==typeof e.complete&&e.complete(t))}let t;if("__APP__"===e.name&&k.gm&&(0,St.GO)()&&(0,St.aI)()){oc.push(e.name),lc(e.name);const t={errMsg:"loadSubpackage:ok"};return"function"==typeof e.success&&e.success(t),void("function"==typeof e.complete&&e.complete(t))}if((0,u.IN)("createLoadSubPackageTask",{moduleName:e.name,success:e=>{void 0===rc[e.loadTaskId]?rc[e.loadTaskId]=[this]:rc[e.loadTaskId].push(this)},fail:n=>{t=n.errMsg,k.cj&&(n.errMsg="loadSubpackage:fail module not found","function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail)(n),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete)(n))}}),t)throw new Error(t.replace(/createLoadSubPackageTask:fail[ :]/,""))};class uc{constructor(e){ic.set(this,e),["success","fail","complete"].forEach((t=>{"function"==typeof e[t]&&(e[t]=__errorTracer__.surroundThirdByTryCatch(e[t],`at api loadSubpackage ${t} callback function`))})),dc.call(this)}onProgressUpdate(e){ac.set(this,(t=>{void 0!==t.totalBytesWriten&&(t.totalBytesWritten=t.totalBytesWriten,delete t.totalBytesWriten),"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at LoadTask.onProgressUpdate callback function")(t)}))}}const pc=(e={})=>{const t=Object.assign({},e);if(!(0,u.r3)("loadSubPackage",t,{name:""}))return;const n=oe.Z.subPackages||oe.Z.subpackages;if(!n)return void(0,u.YG)("loadSubpackage",t,"Your subpackages configuration is invalid.");n.forEach((e=>{t.name!==e.alias&&t.name!==e.name||(t.name=e.root)}));const r="__APP__"===t.name||"__GAME__"===t.name;r||t.name.startsWith("/")||(t.name=`/${t.name}`),r||t.name.endsWith(".js")||t.name.endsWith("/")||(t.name=`${t.name}/`),"__GAME__"===t.name&&(t.name="__APP__");try{return new uc(t)}catch(e){return void(0,u.YG)("loadSubpackage",t,e.message)}},hc=(e={})=>{setTimeout((()=>{(0,u.IN)("getBatteryInfo",e)}),0)},fc=()=>{let e={level:100,isCharging:!0};if((0,u.IN)("getBatteryInfo",{complete:t=>e=t}),e.errMsg=e.errMsg?e.errMsg.replace("getBatteryInfo","getBatteryInfoSync"):"getBatteryInfoSync:ok",/fail/.test(e.errMsg))throw new Error(e.errMsg);return e};var gc=c(6998);let _c=!1;const mc=(0,gr.s)("accelerometerChange"),yc=(e={})=>{const t={fast:0,game:20,ui:60,normal:200},n=void 0!==t[e.interval]?t[e.interval]:t.normal,r=(0,h.f0)(e,{interval:n,enable:!0});(0,u.IN)("enableAccelerometer",r,{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableAccelerometer","startAccelerometer")}}),_c=!0},vc=(e={})=>{(0,u.IN)("enableAccelerometer",(0,h.f0)(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableAccelerometer","stopAccelerometer")}}),_c=!1},Ac=mc.onMethod,bc=mc.offMethod,wc=e=>{_c||((0,u.IN)("enableAccelerometer",{enable:!0}),_c=!0),Ac(e)};(0,u.jQ)("onAccelerometerChange",((e={})=>{oe.Z.clientVersion>=369558016&&oe.Z.clientVersion<369558272&&(e.x&&(e.x/=180/Math.PI),e.y&&(e.y/=180/Math.PI),e.z&&(e.z/=180/Math.PI)),mc.emit(e)}));let Cc=!1;const Ic=(0,gr.s)("compassChange"),Ec=(e={})=>{(0,u.IN)("enableCompass",(0,h.f0)(e,{enable:!0}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableCompass","startCompass")}}),Cc=!0},Sc=(e={})=>{(0,u.IN)("enableCompass",(0,h.f0)(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableCompass","stopCompass")}}),Cc=!1},Tc=Ic.onMethod,xc=Ic.offMethod,kc=e=>{Cc||((0,u.IN)("enableCompass",{enable:!0}),Cc=!0),Tc(e)};(0,u.jQ)("onCompassChange",((e={})=>{Ic.emit(e)}));const Pc=(e={})=>{(0,u.r3)("makePhoneCall",e,{phoneNumber:""})&&(0,u.IN)("makePhoneCall",e)},Dc=(e={})=>{(0,u.IN)("makeVoIPCall",(0,h.f0)({allowBackCamera:!1,showOther:!1},e))};var Oc=c(1130);const Nc=(e={})=>{(0,u.r3)("scanCode",e,{})&&(0,u.IN)("scanCode",e,{beforeSuccess(e){"string"==typeof e.path&&(e.path=e.path.replace(/\.html$/,""),e.path=e.path.replace(/\.html\?/,"?"))}})},Rc=(0,Oc.Z)("scanItem","ProductLogic",{},{},(e=>({method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})})),(e=>{delete e.rawData,delete e.errcode,e.products=(e.products||[]).map((e=>({info:{title:e.info.title,category:e.info.category.map((e=>({name:e.name})))}})))})),Mc=(0,Oc.Z)("scanItem","ProductLogic",{},{},(e=>({method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})})),(e=>{delete e.rawData,delete e.errcode,e.products=e.products||[]})),Lc=(e={})=>{(0,u.r3)("scanItem",e,{})&&(0,u.IN)("scanItem",I()(I()({},e),{},{data:JSON.stringify({appId:oe.Z.accountInfo.appId,path:f.Z.lastRoute}),success:()=>{},fail:()=>{},complete:t=>{0!==t.errMsg.indexOf("scanItem:fail")?Rc({reqKey:t.reqKey,success:e.success,fail:e.fail,complete:e.complete}):(0,u.YG)("scanItem",e,t.errMsg.substr(14).trim(),t.errCode)}}))},Bc=__safeway__.apiSign.makeApiSign,Fc=(e={})=>{if((0,u.IN)("getClipboardData",Bc("getClipboardData",e)),7===oe.Z.appType)return;const{system:t,accountInfo:n}=oe.Z;if(oe.Z.useClipboardWithPermissionNotify||/^iOS /i.test(t)&&parseInt(t.split(" ")[1],10)>=14){const e=n?n.nickname:"小程序";(0,ua.showToast)({icon:"none",title:`“${e}”读取了你的剪切板内容`})}},Wc=(e={})=>{if(!(0,u.r3)("setClipboardData",e,{data:""}))return;const t=Bc("setClipboardData",e);(0,u.IN)("setClipboardData",t,{beforeSuccess(){(0,u.be)("showToast",{duration:1500,title:"内容已复制",icon:"none",mask:!1});try{f.Z.currentClipBoardData=e.data,Ko(!0)}catch(e){}}})},jc=(e={})=>{if(e.uuids)if(Array.isArray(e.uuids)){if(0!==e.uuids.length){const t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);if(!e.uuids.some((function(e){return"string"==typeof e&&t.test(e)})))return void(0,u.YG)("startBeaconDiscovery",e,"invalid service uuid")}(0,u.IN)("startBeaconDiscovery",e)}else(0,u.YG)("startBeaconDiscovery",e,"uuid must be an Array");else(0,u.YG)("startBeaconDiscovery",e,"must have uuid")},Uc=(e={})=>{(0,u.IN)("stopBeaconDiscovery",e)},Vc=(e={})=>{(0,u.IN)("getBeacons",e)},Gc=e=>{(0,u.r3)("onBeaconUpdate",e,T.ZT)&&(0,u.jQ)("onBeaconUpdated",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconUpdate callback function"))},$c=()=>{(0,u.jQ)("onBeaconUpdated",(()=>{}))},Hc=e=>{(0,u.r3)("onBeaconServiceChange",e,T.ZT)&&(0,u.jQ)("onBeaconServiceChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconServiceChange callback function"))},Zc=()=>{(0,u.jQ)("onBeaconServiceChanged",(()=>{}))},Qc=(e={})=>{(0,u.IN)("captureScreen",e,{})};var Yc=c(8176);const zc=(e={})=>{(0,u.IN)("getScreenBrightness",e,{})},qc=(e={})=>{(0,u.IN)("setScreenBrightness",e,{})},Jc=(e={})=>{const t=Object.assign({},e);t.style=t.type,(0,u.IN)("vibrateShort",t,{})},Kc=(e={})=>{(0,u.IN)("vibrateLong",e,{})},Xc=(e={})=>{(0,u.IN)("addPhoneContact",e,{})},el=(0,T.NX)("searchContacts",function(){var e=ue()((function*(e={}){if((0,u.zy)(e,{phoneNumber:""}),!/^.{8,}$/.test(e.phoneNumber))throw new Error("phoneNumber length is less than 8");return yield(0,u.bb)("searchContacts",e,{})}));return function(){return e.apply(this,arguments)}}()),tl=el,nl=(e={})=>{(0,u.IN)("openBluetoothAdapter",e,{})},rl=(e={})=>{(0,u.IN)("closeBluetoothAdapter",e,{})},ol=(e={})=>{(0,u.IN)("getBluetoothAdapterState",e,{})},il=(e={})=>{if(e.services){if(!Array.isArray(e.services))return void(0,u.YG)("startBluetoothDevicesDiscovery",{},"services must be an Array");if(0!==e.services.length){const t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);if(!e.services.some((function(e){return"string"==typeof e&&t.test(e)})))return void(0,u.YG)("startBluetoothDevicesDiscovery",{},"invalid service uuid");e.services=e.services.map((function(e){return k.wZ&&(e=e.toUpperCase()),4===e.length?`0000${e}-0000-1000-8000-00805F9B34FB`:8===e.length?`${e}-0000-1000-8000-00805F9B34FB`:e}))}}(0,u.IN)("startBluetoothDevicesDiscovery",e,{})},al=(e={})=>{(0,u.IN)("stopBluetoothDevicesDiscovery",e,{})},sl=(e={})=>{(0,u.IN)("getBluetoothDevices",e,{beforeSuccess(e){Array.isArray(e.devices)||(e.devices=[]),e.devices.map((e=>{if(e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=(0,h.RG)(e.advertisData)),e.serviceData){const t=e.serviceData;Object.keys(t).forEach((e=>{t[e]&&(t[e]=(0,h.RG)(t[e]))}))}return e}))}})},cl=(e={})=>{(0,u.r3)("getBLEDeviceRSSI",e,{deviceId:""})&&(0,u.IN)("getBLEDeviceRSSI",e)},ll=(e={})=>{if(e.services){if(!Array.isArray(e.services))return void(0,u.YG)("getConnectedBluetoothDevices",e,"services must be an Array");if(0!==e.services.length){const t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);if(!e.services.some((function(e){return"string"==typeof e&&t.test(e)})))return void(0,u.YG)("getConnectedBluetoothDevices",{},"invalid service uuid");e.services=e.services.map((function(e){return k.wZ&&(e=e.toUpperCase()),4===e.length?`0000${e}-0000-1000-8000-00805F9B34FB`:8===e.length?`${e}-0000-1000-8000-00805F9B34FB`:e}))}}(0,u.IN)("getConnectedBluetoothDevices",e,{beforeSuccess(e){Array.isArray(e.devices)||(e.devices=[]),e.devices=e.devices.map((e=>(e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=(0,h.RG)(e.advertisData)),e)))}})},dl=(e={})=>{(0,u.r3)("createBLEConnection",e,{deviceId:""})&&(0,u.IN)("createBLEConnection",e,{})},ul=(e={})=>{(0,u.r3)("closeBLEConnection",e,{deviceId:""})&&(0,u.IN)("closeBLEConnection",e,{})},pl=(e={})=>{(0,u.r3)("getBLEDeviceServices",e,{deviceId:""})&&(0,u.IN)("getBLEDeviceServices",e,{beforeSuccess(e){Array.isArray(e.services)||(e.services=[]),void 0===e.errCode&&(e.errCode=0)}})},hl=(e={})=>{(0,u.r3)("getBLEDeviceCharacteristics",e,{deviceId:"",serviceId:""})&&(0,u.IN)("getBLEDeviceCharacteristics",Object.assign({},e,{serviceId:k.wZ?e.serviceId.toUpperCase():e.serviceId}),{beforeSuccess(e){Array.isArray(e.characteristics)||(e.characteristics=[])}})},fl=(e={})=>{(0,u.r3)("notifyBLECharacteristicValueChanged",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&(0,u.IN)("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:k.wZ?e.serviceId.toUpperCase():e.serviceId,characteristicId:k.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{})},gl=(e={})=>{(0,u.r3)("notifyBLECharacteristicValueChange",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&(0,u.IN)("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:k.wZ?e.serviceId.toUpperCase():e.serviceId,characteristicId:k.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{beforeAll(e){void 0!==e.errCode&&(e.errCode=Number(e.errCode)),e.errMsg=e.errMsg.replace("notifyBLECharacteristicValueChanged","notifyBLECharacteristicValueChange")}})},_l=(e={})=>{(0,u.r3)("readBLECharacteristicValue",e,{deviceId:"",serviceId:"",characteristicId:""})&&(0,u.IN)("readBLECharacteristicValue",Object.assign({},e,{serviceId:k.wZ?e.serviceId.toUpperCase():e.serviceId,characteristicId:k.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{})},ml=(e={})=>{(0,u.r3)("writeBLECharacteristicValue",e,{value:new ArrayBuffer(0),deviceId:"",serviceId:"",characteristicId:""})&&(0,u.IN)("writeBLECharacteristicValue",Object.assign({},e,{value:(0,h.sM)(e.value),serviceId:e.serviceId.toUpperCase(),characteristicId:k.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{})},yl=e=>{(0,u.jQ)("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChanged callback function"))},vl=()=>{(0,u.jQ)("onBLEConnectionStateChanged",(()=>{}))},Al=e=>{(0,u.jQ)("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChange callback function"))},bl=()=>{(0,u.jQ)("onBLEConnectionStateChanged",(()=>{}))},wl=e=>{(0,u.jQ)("onBLECharacteristicValueChange",((t={})=>{"string"==typeof t.value&&(t.value=(0,h.RG)(t.value)),__errorTracer__.surroundThirdByTryCatch(e,"at onBLECharacteristicValueChange callback function")(t)}))},Cl=()=>{(0,u.jQ)("onBLECharacteristicValueChange",(()=>{}))},Il=e=>{(0,u.jQ)("onBluetoothDeviceFound",((t={})=>{let n=[];Array.isArray(t.devices)?n=t.devices:n.push(t),n=n.map((e=>{try{e.advertisData=(0,h.RG)(e.advertisData)}catch(e){}try{const t=e.serviceData||{};Object.keys(t).forEach((e=>{t[e]&&(t[e]=(0,h.RG)(t[e]))}))}catch(e){}return e})),__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothDeviceFound callback function")({devices:n})}))},El=()=>{(0,u.jQ)("onBluetoothDeviceFound",(()=>{}))},Sl=e=>{(0,u.jQ)("onBluetoothAdapterStateChange",__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothAdapterStateChange callback function"))},Tl=()=>{(0,u.jQ)("onBluetoothAdapterStateChange",(()=>{}))},xl=(e={})=>{k.wZ?(0,u.r3)("setBLEMTU",e,{deviceId:"",mtu:0})&&(0,u.IN)("setBLEMTU",e,{}):(0,u.YG)("setBLEMTU",e,"can only be invoked on android")};var kl;const Pl=(e,t)=>Object.assign({},e,{[t]:(0,h.sM)(e[t])}),Dl=new b.Z,Ol=new WeakMap,Nl=new WeakMap,Rl=function(e,t){const n=`${Ol.get(this)}_on${e}`,r=n=>{__errorTracer__.surroundThirdByTryCatch(t,`at BLEPeripheralServer.on${e} callback function`)(n)};Nl.get(this).set(t,r),Dl.on(n,r)},Ml=function(e,t){const n=`${Ol.get(this)}_on${e}`,r=Nl.get(this);if((0,O.mf)(t)){const e=r.get(t);(0,O.mf)(e)&&(r.delete(t),Dl.off(n,e))}else Nl.set(this,new WeakMap),Dl.removeAllListeners(n)},Ll=(0,gr.s)("CharacteristicReadRequest");Ll.onMethod,Ll.offMethod;(0,u.jQ)("onCharacteristicReadRequest",((e={})=>{Dl.emit(`${e.serverId}_onCharacteristicReadRequest`,e),Ll.emit(e)}));const Bl=(0,gr.s)("CharacteristicWriteRequest");Bl.onMethod,Bl.offMethod;(0,u.jQ)("onCharacteristicWriteRequest",((e={})=>{"string"==typeof e.value&&(e.value=(0,h.RG)(e.value)),Dl.emit(`${e.serverId}_onCharacteristicWriteRequest`,e),Bl.emit(e)}));const Fl=(0,gr.s)("CharacteristicSubscribed");Fl.onMethod,Fl.offMethod;(0,u.jQ)("onCharacteristicSubscribed",((e={})=>{Dl.emit(`${e.serverId}_onCharacteristicSubscribed`,e),Fl.emit(e)}));const Wl=(0,gr.s)("CharacteristicUnsubscribed");Wl.onMethod,Wl.offMethod;(0,u.jQ)("onCharacteristicUnsubscribed",((e={})=>{Dl.emit(`${e.serverId}_onCharacteristicUnsubscribed`,e),Wl.emit(e)}));let jl=(kl=class{constructor(e){this.serverId=e,this.services=[],Ol.set(this,e),Nl.set(this,new WeakMap);["CharacteristicReadRequest","CharacteristicWriteRequest","CharacteristicSubscribed","CharacteristicUnsubscribed"].forEach((e=>{this[`on${e}`]=t=>{Rl.call(this,e,t)},this[`off${e}`]=t=>{Ml.call(this,e,t)}}))}close(e={}){const t=this,n=Object.assign({},e,{serverId:this.serverId});(0,u.IN)("closeBLEPeripheralServer",n,{beforeSuccess(){t.serverId="",Ol.delete(t)}})}addService(e={}){if(!(0,u.r3)("BLEPeripheralServer.addService",e,{service:{}}))return;let t=e.service.characteristics||[];t=t.map((e=>{let t=e.descriptors||[];return t=t.map((e=>Pl(e,"value"))),Object.assign({},e,{value:(0,h.sM)(e.value),descriptors:t})}));const n=Object.assign({},e,{serverId:this.serverId,service:{uuid:e.service.uuid,characteristics:t}}),r=this;(0,u.IN)("addBLEPeripheralService",n,{beforeSuccess(){r.services.push(e.service.uuid)}})}removeService(e={}){if(!(0,u.r3)("BLEPeripheralServer.removeService",e,{serviceId:""}))return;const t=this,n=Object.assign({},e,{serverId:this.serverId});(0,u.IN)("removeBLEPeripheralService",n,{beforeSuccess(){const n=t.services.indexOf(e.serviceId);n>=0&&t.services.splice(n,1)}})}startAdvertising(e={}){const t=e.advertiseRequest||{};let n=t.manufacturerData||[];n=n.map((e=>Pl(e,"manufacturerSpecificData")));const r=Object.assign({},t,{manufacturerData:n}),o=Object.assign({},e,{serverId:this.serverId,advertiseRequest:r,powerLevel:e.powerLevel||"medium"});(0,u.IN)("startBLEPeripheralAdvertising",o,{})}stopAdvertising(e={}){const t=Object.assign({},e,{serverId:this.serverId});(0,u.IN)("stopBLEPeripheralAdvertising",t,{})}writeCharacteristicValue(e={}){const t=Object.assign({},e,{serverId:this.serverId,value:(0,h.sM)(e.value)});(0,u.IN)("writeBLEPeripheralCharacteristicValue",t,{})}},S()(kl.prototype,"close",[T.Qu],Object.getOwnPropertyDescriptor(kl.prototype,"close"),kl.prototype),S()(kl.prototype,"addService",[T.Qu],Object.getOwnPropertyDescriptor(kl.prototype,"addService"),kl.prototype),S()(kl.prototype,"removeService",[T.Qu],Object.getOwnPropertyDescriptor(kl.prototype,"removeService"),kl.prototype),S()(kl.prototype,"startAdvertising",[T.Qu],Object.getOwnPropertyDescriptor(kl.prototype,"startAdvertising"),kl.prototype),S()(kl.prototype,"stopAdvertising",[T.Qu],Object.getOwnPropertyDescriptor(kl.prototype,"stopAdvertising"),kl.prototype),S()(kl.prototype,"writeCharacteristicValue",[T.Qu],Object.getOwnPropertyDescriptor(kl.prototype,"writeCharacteristicValue"),kl.prototype),kl);const Ul=(0,gr.s)("BLEPeripheralConnectionStateChanged"),Vl=Ul.onMethod,Gl=Ul.offMethod;(0,u.jQ)("onBLEPeripheralConnectionStateChanged",((e={})=>{Ul.emit(e)}));const $l=(e={})=>{if(!(0,u.r3)("makeBluetoothPair",e,{deviceId:""}))return;const t=Object.assign({},e);(0,O.eP)(e.pin||null)&&(t.pin=(0,h.sM)(e.pin)),(0,u.IN)("makeBluetoothPair",t)},Hl=(e={})=>{(0,u.IN)("startWifi",e,{})},Zl=(e={})=>{(0,u.IN)("stopWifi",e,{})},Ql=(e={})=>{(0,u.IN)("getWifiList",e,{})},Yl=(e={})=>{(0,u.IN)("getConnectedWifi",e,{})},zl=(e={})=>{if(!(0,u.r3)("connectWifi",e,{SSID:"",password:""}))return;const t=Object.assign({maunal:!1},e);(0,u.IN)("connectWifi",t,{})},ql=(e={})=>{k.cj?(0,u.r3)("presetWifiList",e,{wifiList:[]})&&(0,u.IN)("presetWifiList",e,{}):(0,u.YG)("presetWifiList",e,"presetWifiList must be invoked on iOS platform")},Jl=(e={})=>{k.cj?(0,u.r3)("setWifiList",e,{wifiList:[]})&&(0,u.IN)("setWifiList",e,{}):(0,u.YG)("setWifiList",e,"setWifiList must be invoked on iOS platform")},Kl=e=>{(0,u.jQ)("onGetWifiList",__errorTracer__.surroundThirdByTryCatch(e,"at onGetWifiList callback function"))},Xl=()=>{(0,u.jQ)("onGetWifiList",(()=>{}))},ed=e=>{(0,u.jQ)("onWifiConnected",__errorTracer__.surroundThirdByTryCatch(e,"at onWifiConnected callback function"))},td=()=>{(0,u.jQ)("onWifiConnected",(()=>{}))};let nd=null;const rd=["none","low","high"],od=e=>{"function"==typeof e&&(nd=e)};(0,u.jQ)("onEvaluateWifi",__errorTracer__.surroundThirdByTryCatch((function(e){const t={SSID:e.wifi.SSID,BSSID:e.wifi.BSSID,confidence:"none"};if("function"==typeof nd){let n;try{n=nd(e)||{}}finally{rd.find((e=>e===n.confidence))&&(t.confidence=n.confidence),(0,u.IN)("evaluateWifi",t,{})}}}),"at onEvaluateWifi callback function"));const id=(e={})=>{(0,u.IN)("getHCEState",e,{})},ad=(e={})=>{(0,u.IN)("startHCE",e,{})},sd=(e={})=>{(0,u.IN)("stopHCE",e,{})},cd=(e={})=>{(0,u.r3)("sendHCEMessage",e,{data:new ArrayBuffer(0)})&&(0,u.IN)("sendHCEMessage",Object.assign({},e,{data:(0,h.sM)(e.data)}),{})},ld=e=>{(0,u.jQ)("onHCEMessage",((t={})=>{"string"==typeof t.data&&(t.data=(0,h.RG)(t.data)),__errorTracer__.surroundThirdByTryCatch(e,"at onHCEMessage callback function")(t)}))},dd=()=>{(0,u.jQ)("onHCEMessage",(()=>{}))},ud=()=>{},pd=(e={},t)=>{const n=Reporter.surroundThirdByTryCatch(e.success||ud,`at api ${t} success callback function`),r=Reporter.surroundThirdByTryCatch(e.fail||ud,`at api ${t} fail callback function`),o=Reporter.surroundThirdByTryCatch(e.complete||ud,`at api ${t} complete callback function`);return I()(I()({},e),{},{success:n,fail:r,complete:o})},hd=(e,t,n)=>{const r=void 0===n?{errMsg:t}:{errMsg:t,errCode:n};e.fail(r),e.complete(r)},fd=new WeakMap,gd=new b.y,_d="onNFCDiscovered",md="onNdefMessageRead";(0,w.n)("onNFCDiscovered",(e=>{gd.emit(_d,e)})),(0,w.n)("onNdefMessageRead",(e=>{gd.emit(md,e)}));const yd={ndef:"NDEF",nfcA:"NFC-A",nfcB:"NFC-B",isoDep:"ISO-DEP",nfcF:"NFC-F",nfcV:"NFC-V",mifareClassic:"MIFARE Classic",mifareUltralight:"MIFARE Ultralight"};function vd(e,t){if(!this[e]){const n=t();return Object.defineProperty(this,e,{enumerable:!1,configurable:!1,writable:!1,value:n}),n}return this[e]}class Ad{constructor(){this.tech=yd,Object.defineProperty(this,"_singleton",{enumerable:!1,configurable:!1,writable:!1})}startDiscovery(e={}){e=pd(e,"NFCAdapter#startDiscovery"),k.wZ?(0,u.IN)("isSupportNFC",{success(){(0,u.IN)("startNFCDiscovery",{success(t){e.success(t)},fail(t){e.fail(t)},complete(t){e.complete(t)}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("startNFCDiscovery","startDiscovery"))}})},fail(t){e.fail(t)},complete(t){e.complete(t)}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("isSupportNFC","startDiscovery"))}}):hd(e,"startDiscovery:fail current platform is not supported")}stopDiscovery(e={}){e=pd(e,"NFCAdapter#stopDiscovery"),k.wZ?(0,u.IN)("stopNFCDiscovery",{success(t){e.success(t)},fail(t){e.fail(t)},complete(t){e.complete(t)}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("stopNFCDiscovery","stopDiscovery"))}}):hd(e,"stopDiscovery:fail current platform is not supported")}onDiscovered(e){if("function"!=typeof e)return;const t=Reporter.surroundThirdByTryCatch(e,"at NFCAdapter#onDiscovered callback function"),n=(e={})=>{if(e.messages&&(0,O.kJ)(e.messages)){const t=[],n=e.messages||[];for(let r=0;r<n.length;++r){const o={records:[]},i=n[r]||[];for(let t=0;t<i.length;++t){const n=`payload-${r}-${t}`,a=e[n];delete e[n],i[t].payload=a,i[t].id=(0,h.RG)(i[t].id),i[t].type=(0,h.RG)(i[t].type),o.records.push(i[t])}t.push(o)}e.messages=t}e.id&&"string"==typeof e.id&&(e.id=(0,h.RG)(e.id)),t(e)};gd.on(_d,n),fd.set(e,n)}offDiscovered(e){if("function"!=typeof e)return;const t=fd.get(e);t&&gd.off(_d,t)}getNdef(){return vd.call(this,"_ndef",(()=>new wd))}getNfcA(){return vd.call(this,"_nfcA",(()=>new Id))}getNfcB(){return vd.call(this,"_nfcB",(()=>new Ed))}getIsoDep(){return vd.call(this,"_isoDep",(()=>new Sd))}getNfcF(){return vd.call(this,"_nfcF",(()=>new Td))}getNfcV(){return vd.call(this,"_nfcV",(()=>new xd))}getMifareClassic(){return vd.call(this,"_mirafeClassic",(()=>new kd))}getMifareUltralight(){return vd.call(this,"_mifareUltralight",(()=>new Pd))}}class bd{constructor(e){this.techType=e}connect(e={}){e=pd(e,`${this.techType}#connect`),k.wZ?(0,u.IN)("NFCConnect",{tech:this.techType,success(t){e.success(t)},fail(t){e.fail(t)},complete(t){e.complete(t)}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCConnect","connect"))}}):hd(e,"connect:fail current platform is not supported")}close(e={}){e=pd(e,`${this.techType}#close`),k.wZ?(0,u.IN)("NFCClose",{tech:this.techType,success(t){e.success(t)},fail(t){e.fail(t)},complete(t){e.complete(t)}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCClose","close"))}}):hd(e,"close:fail current platform is not supported")}setTimeout(e={}){e=pd(e,`${this.techType}#setTimeout`),k.wZ?e.timeout?(0,u.IN)("NFCSetTimeout",{tech:this.techType,timeout:parseInt(e.timeout,10),success(t){e.success(t)},fail(t){e.fail(t)},complete(t){e.complete(t)}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCSetTimeout","setTimeout"))}}):hd(e,"timeout should be specified"):hd(e,"setTimeout:fail current platform is not supported")}isConnected(e){e=pd(e,`${this.techType}#isConnected`),k.wZ?(0,u.IN)("isNFCTechConnected",{tech:this.techType,success(t){e.success(t)},fail(t){e.fail(t)},complete(t){e.complete(t)}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("isNFCTechConnected","isConnected"))}}):hd(e,"isConnected:fail current platform is not supported")}}class wd extends bd{constructor(){super("NDEF")}onNdefMessage(e){if("function"!=typeof e)return;const t=Reporter.surroundThirdByTryCatch(e,"at Ndef#onReadNdefMessage callback function"),n=e=>{const n=e.messages||[];for(let t=0;t<n.length;++t){const r=n[t]||[];for(let n=0;n<r.length;++n){const o=`payload-${t}-${n}`,i=e[o];r[n].payload=i,delete e[o]}}t(e)};gd.on(md,n),fd.set(e,n)}offNdefMessage(e){if("function"!=typeof e)return;const t=fd.get(e);t&&gd.off(md,t)}writeNdefMessage(e={}){if(e=pd(e,"Ndef#writeNdefMessage"),k.wZ){if(e.uris)return(0,O.kJ)(e.uris)?void(0,u.IN)("writeNdefMessage",{uris:e.uris,success(t){e.success(t)},fail(t){e.fail(t)},complete(t){e.complete(t)}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("writeNdefMessage","writeNdefMessage"))}}):void hd(e,"writeNdefMessage: urils should be type of Array");if(e.texts)return(0,O.kJ)(e.texts)?void(0,u.IN)("writeNdefMessage",{texts:e.texts,success(t){e.success(t)},fail(t){e.fail(t)},complete(t){e.complete(t)}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("writeNdefMessage","writeNdefMessage"))}}):void hd(e,"writeNdefMessage: texts should be type of Array");if(e.records){if(!(0,O.kJ)(e.records))return void hd(e,"writeNdefMessage: records should be type of Array");const t={};for(let n=0;n<e.records.length;++n){const r=e.records[n];if(!(0,O.eP)(r.id))return void hd(e,"writeNdefMessage: record.id should be type of ArrayBuffer");if(!(0,O.eP)(r.type))return void hd(e,"writeNdefMessage: record.type should be type of ArrayBuffer");r.id=(0,h.sM)(r.id),r.type=(0,h.sM)(r.type);t[`payload-${n}`]=r.payload,delete r.payload}(0,u.IN)("writeNdefMessage",I()(I()({records:e.records},t),{},{success(t){e.success(t)},fail(t){e.fail(t)},complete(t){e.complete(t)}}),{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("writeNdefMessage","writeNdefMessage"))}})}else hd(e,"writeNdefMessage: expect parameter contains one of uris, texts, records")}else hd(e,"writeNdefMessage:fail current platform is not supported")}}class Cd extends bd{getMaxTransceiveLength(e={}){e=pd(e,`${this.techType}#getMaxTransceiveLength`),k.wZ?(0,u.IN)("NFCGetMaxTransceiveLength",{tech:this.techType,success:e.success,fail:e.fail,complete:e.complete},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetMaxTransceiveLength","getMaxTransceiveLength"))}}):hd(e,"getMaxTransceiveLength:fail current platform is not supported")}transceive(e={}){e=pd(e,`${this.techType}#transceive`),k.wZ?e.data?(0,O.eP)(e.data)?(0,u.IN)("NFCTransceive",{tech:this.techType,data:e.data,success(t){e.success(t)},fail(t){e.fail(t)},complete(t){e.complete(t)}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCTransceive","transceive"))}}):hd(e,"transceive: data should be type of ArrayBuffer"):hd(e,"transceive: data field is required"):hd(e,"transceive:fail current platform is not supported")}}class Id extends Cd{constructor(){super("NFC-A")}getAtqa(e){e=pd(e,`${this.techType}#getAtqa`),k.wZ?(0,u.IN)("NFCGetAtqa",{success(t){t&&t.atqa?e.success({errMsg:t.errMsg,atqa:(0,h.RG)(t.atqa)}):e.success({errMsg:t.errMsg,atqa:null})},fail(t){e.fail(t)},complete(t){t&&t.atqa?e.complete({errMsg:t.errMsg,atqa:(0,h.RG)(t.atqa)}):e.complete({errMsg:t.errMsg,atqa:null})}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetAtqa","getAtqa"))}}):hd(e,"getAtqa:fail current platform is not supported")}getSak(e){e=pd(e,`${this.techType}#getSak`),k.wZ?(0,u.IN)("NFCGetSak",e,{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetSak","getSak"))}}):hd(e,"getSak:fail current platform is not supported")}}class Ed extends Cd{constructor(){super("NFC-B")}setTimeout(e={}){e=pd(e,`${this.techType}#setTimeout`),hd(e,"setTimeout: function not support",13024)}}class Sd extends Cd{constructor(){super("ISO-DEP")}getHistoricalBytes(e){e=pd(e,`${this.techType}#getHistoricalBytes`),k.wZ?(0,u.IN)("NFCGetHistoricalBytes",{success(t){t&&t.histBytes?e.success({errMsg:t.errMsg,histBytes:(0,h.RG)(t.histBytes)}):e.success({errMsg:t.errMsg,histBytes:null})},fail(t){e.fail(t)},complete(t){t&&t.histBytes?e.complete({errMsg:t.errMsg,histBytes:(0,h.RG)(t.histBytes)}):e.complete({errMsg:t.errMsg,histBytes:null})}},{beforeAll(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetHistoricalBytes","getHistoricalBytes"))}}):hd(e,"getHistoricalBytes:fail current platform is not supported")}}class Td extends Cd{constructor(){super("NFC-F")}}class xd extends Cd{constructor(){super("NFC-V")}setTimeout(e={}){e=pd(e,`${this.techType}#setTimeout`),hd(e,"setTimeout: function not support",13024)}}class kd extends Cd{constructor(){super("MIFARE Classic")}}class Pd extends Cd{constructor(){super("MIFARE Ultralight")}}let Dd=null;function Od(){return Dd||(Dd=new Ad,Dd)}const Nd=(0,gr.s)("local-service-found"),Rd=(0,gr.s)("local-service-lost"),Md=(0,gr.s)("local-service-discovery"),Ld=(0,gr.s)("local-service-resolve-fail"),Bd=(e={})=>{(0,p.IN)("operateLocalServicesScan",Object.assign({},e,{action:"start"}),{beforeSuccess:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery"),beforeFail:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery")})},Fd=(e={})=>{(0,p.IN)("operateLocalServicesScan",Object.assign({},e,{action:"stop"}),{beforeSuccess:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery"),beforeFail:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery")})};(0,p.jQ)("onLocalServiceEvent",(e=>{const t=Object.assign({},e);switch("object"==typeof t.attributes&&null!==t.attributes&&Object.keys(t.attributes).forEach((e=>{const n=t.attributes[e];t.attributes[e]=(0,h.RG)(n)})),delete t.event,e.event){case"found":Nd.emit(t);break;case"lost":Rd.emit(t);break;case"stopScan":delete t.serviceType,delete t.serviceName,delete t.ip,delete t.port,Md.emit(t);break;case"resolveFail":delete t.ip,delete t.port,Ld.emit(t)}}));const Wd=Nd.onMethod,jd=Nd.offMethod,Ud=Rd.onMethod,Vd=Rd.offMethod,Gd=Md.onMethod,$d=Md.offMethod,Hd=Ld.onMethod,Zd=Ld.offMethod,Qd=(0,gr.s)("gyroscopeChange"),Yd=(e={})=>{const t={fast:0,game:20,ui:60,normal:200},n=t[e.interval]||t.normal;(0,u.IN)("enableGyroscope",(0,h.f0)(e,{interval:n,enable:!0}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableGyroscope","startGyroscope")}})},zd=(e={})=>{(0,u.IN)("enableGyroscope",(0,h.f0)(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableGyroscope","stopGyroscope")}})},qd=Qd.onMethod,Jd=Qd.offMethod;(0,u.jQ)("onGyroscopeChange",(e=>{Qd.emit(e)}));const Kd=(0,gr.s)("deviceMotionChange"),Xd=(e={})=>{const t={fast:0,game:20,ui:60,normal:200},n=t[e.interval]||t.normal;(0,u.IN)("enableDeviceMotionChangeListening",(0,h.f0)(e,{interval:n,enable:!0}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","startDeviceMotionListening")}})},eu=(e={})=>{(0,u.IN)("enableDeviceMotionChangeListening",(0,h.f0)(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","stopDeviceMotionListening")}})},tu=Kd.onMethod,nu=Kd.offMethod;(0,u.jQ)("onDeviceMotionChange",(e=>{Kd.emit(e)}));const ru=e=>{const t=new Date(1e3*e);return t.setHours(0,0,0),t.valueOf()/1e3},ou=e=>{const t=new Date(1e3*e);return t.setSeconds(0),t.valueOf()/1e3},iu=(e={})=>{if(!(0,u.r3)("addPhoneCalendar",e,{}))return;const t=e.allDay?ru(e.startTime):ou(e.startTime),n=e.endTime?e.allDay?ru(e.endTime):ou(e.endTime):void 0;(0,u.IN)("addPhoneCalendar",I()(I()({allDay:!1,alarm:!0},e),{},{startTime:t,endTime:n,repeat:!1}))},au=(e={})=>{if(!(0,aa.J)("addPhoneRepeatCalendar"))return void(0,u.YG)("addPhoneCalendar",e,"permission denied");if(!(0,u.r3)("addPhoneCalendar",e,{}))return;const t=e.allDay?ru(e.startTime):ou(e.startTime),n=e.endTime?e.allDay?ru(e.endTime):ou(e.endTime):void 0;(0,u.IN)("addPhoneCalendar",I()(I()({allDay:!1,alarm:!0,repeatInterval:"month"},e),{},{startTime:t,endTime:n,repeat:!0}))};let su=Date.now();const cu={};(0,u.Ld)("getWebviewDebugInfoRes",(({callbackId:e,info:t},n)=>{const r=cu[e];cu[e]=null,"function"==typeof r.success&&r.success(t)}));const lu={};function du(e={}){if(!Array.isArray(e.packages))return Promise.reject(new Error("packages must be an array."));"all"!==e.network&&(e.network="wifi"),console.info("preloadSubpackages: "+e.packages.join(", "));const t=e.packages.filter((e=>!(e in lu)));let n;return n="all"!==e.network?new Promise(((e,t)=>{const n=gc._getCurrentNetworkType();n?e(n):gc.getNetworkType({success(n){n.networkType?e(n.networkType):t(new Error("get network type failed."))},fail:t})})).then((e=>{if("wifi"!==e.toLowerCase())return Promise.reject(new Error(`network type does not match, '${e}' !== 'wifi'`))}),(()=>Promise.reject(new Error("get network type failed.")))):Promise.resolve(),n.then((()=>Promise.all(t.map((e=>new Promise((n=>{pc({name:e,success(){lu[e]=!0,n(t)},fail(t){const r=new Error(t.errMsg.replace("loadSubpackage:fail",""));r.packageName=e,n(r)}})}))))).then((e=>{if((e=e.filter((e=>e instanceof Error))).length>0){const t=new Error("preload subpackages failed.");return t._detail=e,Promise.reject(t)}}))))}oe.Z.onReady((()=>{(0,he.q)((({path:e})=>{if(oe.Z.preloadRule&&oe.Z.preloadRule[e])return du(oe.Z.preloadRule[e]).then((()=>{console.info("preloadSubpackages: success")}),(e=>{e._detail?(console.group(`preloadSubpackages fail: ${e.message}`),e._detail.forEach((e=>{console.warn(`${e.packageName}: ${e.message}`)})),console.groupEnd()):console.warn(`preloadSubpackages fail: ${e.message}`)}))}))}));const uu=function(e){tc.on("success",e)};var pu=c(2288),hu=c(6077);const fu=[{APINames:[/^connectSocket/],ios:{app:1,game:1},android:{app:1,game:1},version:1},{APINames:[/^request/,/^downloadFile/],ios:{app:"clicfg_wegame_ios_use_cronet_request",game:"clicfg_wegame_ios_use_cronet_request"},android:{app:1,game:1},version:1},{APINames:[/^downloadFile/],ios:{app:"clicfg_appbrand_ios_native_download",game:"clicfg_appbrand_ios_native_download"},android:{app:0,game:0},version:2},{APINames:[/^connectSocket/],ios:{app:"clicfg_appbrand_ios_native_socket_wcwss",game:"clicfg_appbrand_ios_native_socket_wcwss"},android:{app:2,game:2},version:2}];oe.Z.onReady((()=>{if(!(0,St.aI)()&&!(0,St.N0)())return;const e=(0,St.aI)()?"game":"app";fu.forEach((t=>{const{APINames:n,version:r}=t,o=t[k.iw];o&&o[e]&&function(e,t,n){JSON.stringify(t),"string"==typeof e?(0,pu.b)({experimentId:e,experimentType:"Expt",success({testConfig:e}){JSON.stringify(t),1===Number(e)&&t.forEach((e=>{(0,hu.T)(e,n)}))}}):"number"==typeof e&&t.forEach((t=>{(0,hu.T)(t,e)}))}(o[e],n,r)}))}));var gu=c(7255);(0,gu.b)("Upload",{maxTaskCount:10,functionName:"uploadFile"}),oe.Z.onReady((()=>{try{"number"==typeof oe.Z.wxAppInfo.maxUploadConcurrent&&(0,gu.b)("Upload",{maxTaskCount:oe.Z.wxAppInfo.maxUploadConcurrent})}catch(e){}}));class _u extends gu.o{constructor(e){super(e,{taskType:"Upload",beforeSend:t=>(t.filePath=e.filePath,t.name=e.name,t.formData=e.formData,t),beforeSuccess:e=>e})}}const mu=_u,yu=(e={})=>(e=Object.assign({__skipDomainCheck__:!1},e),(t={})=>{if(!(0,u.r3)("uploadFile",t,{url:"",filePath:"",name:""}))return;"object"!=typeof t.header&&void 0!==t.header&&(console.warn("uploadFile: header must be an object"),delete t.header),"object"!=typeof t.formData&&void 0!==t.formData&&(console.warn("uploadFile: formData must be an object"),delete t.formData);let n={},r={};t.header&&(n=(0,h.Nf)(t.header)),t.formData&&(r=(0,h.Nf)(t.formData));try{return new mu(Object.assign({},t,{header:n,formData:r,__skipDomainCheck__:e.__skipDomainCheck__}))}catch(e){return void(0,u.YG)("uploadFile",t,e.message)}}),vu=yu(),Au=yu({__skipDomainCheck__:!0});var bu,wu=c(5500);let Cu=0;const Iu=new WeakMap,Eu=new WeakMap,Su=new WeakMap,Tu=new WeakMap,xu={},ku=new Pn.Q;(0,u.jQ)("onSocketTaskStateChange",((e={})=>{const{state:t,socketTaskId:n}=e,r=xu[n];if(!r)return;const o=Iu.get(r);if(delete e.state,delete e.socketTaskId,r){if("open"===t){r.readyState=r.OPEN;const t=Su.get(r).url,n=1,o=Date.now()-Tu.get(r),i="",a=e.statusCode,s=Su.get(r).__skipDomainCheck__,c=0,l=e.profile;(0,wu.P)("connectSocket",t,n,o,i,a,s,c,0,l)}else"close"!==t&&"error"!==t||(r.readyState=r.CLOSED);ku.emit(`${o}${t}`,e),ku.emit(`onSocket${t[0].toUpperCase()+t.substr(1)}`,e,r),"close"===t&&(delete xu[n],ku.removeAllListeners(`${o}open`),ku.removeAllListeners(`${o}close`),ku.removeAllListeners(`${o}error`),ku.removeAllListeners(`${o}message`))}}));const Pu=function(e,t){ku.on(`${Iu.get(this)}${e}`,__errorTracer__.surroundThirdByTryCatch(t,`at socketTask.on${e} callback function`))};let Du=(bu=class{constructor(e,t){this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING;const n=Cu++;let r;Iu.set(this,n),Su.set(this,t),Object.defineProperty(this,"__socketInstance__",{value:e,writable:!1,configurable:!1,enumerable:!1}),["success","fail","complete"].forEach((e=>{"function"==typeof t[e]&&(t[e]=__errorTracer__.surroundThirdByTryCatch(t[e],`at api connectSocket ${e} callback function`))})),Tu.set(this,Date.now()),(0,O.hj)(t.timeout)||(t.timeout=0);const o=()=>{(0,u.IN)("createSocketTask",t,{beforeAll(e){e.errMsg=e.errMsg.replace("createSocketTask","connectSocket")},beforeSuccess:e=>{Eu.set(this,e.socketTaskId),xu[e.socketTaskId]=this},beforeFail:e=>{const n=t.url,o=Date.now()-Tu.get(this),i=t.__skipDomainCheck__;r=e.errMsg,(0,wu.P)("connectSocket",n,2,o,r,"",i,0)}}),r&&(this.readyState=this.CLOSED,setTimeout((()=>{ku.emit(`${n}error`,{errMsg:r})}),0))};(0,O.mf)(t.customCheck)?t.customCheck(t,(e=>{e?((0,u.YG)("connectSocket",t,e),this.readyState=this.CLOSED,setTimeout((()=>{ku.emit(`${n}error`,{errMsg:e})}),0)):o()})):o()}send(e){if(this.readyState===this.OPEN){const t=Date.now();(0,u.IN)("operateSocketTask",Object.assign({},e,{operationType:"send",socketTaskId:Eu.get(this)}),{beforeAll:n=>{if(n.errMsg=n.errMsg.replace("operateSocketTask","sendSocketMessage"),Math.random()>.99){const r=Su.get(this).url,o=n.errMsg.indexOf("ok")>-1?1:2,i=Date.now()-t,a=n.errMsg,s="",c=Su.get(this).__skipDomainCheck__,l=(0,St.Y6)(e.data);(0,wu.P)("sendSocketMessage",r,o,i,a,s,c,l)}}})}else(0,u.YG)("SocketTask.send",e,"SocketTask.readyState is not OPEN")}close(e={}){(0,u.IN)("operateSocketTask",Object.assign({code:1e3},e,{operationType:"close",socketTaskId:Eu.get(this)}),{beforeAll(e){e.errMsg=e.errMsg.replace("operateSocketTask","closeSocket")}})}onOpen(e){Pu.call(this,"open",e)}onClose(e){Pu.call(this,"close",e)}onMessage(e){Pu.call(this,"message",e)}onError(e){Pu.call(this,"error",e)}},S()(bu.prototype,"send",[T.Qu],Object.getOwnPropertyDescriptor(bu.prototype,"send"),bu.prototype),S()(bu.prototype,"close",[T.Qu],Object.getOwnPropertyDescriptor(bu.prototype,"close"),bu.prototype),bu);var Ou=c(9271);let Nu=5;oe.Z.onReady((()=>{oe.Z.wxAppInfo&&oe.Z.wxAppInfo.maxWebsocketConnect&&(Nu=oe.Z.wxAppInfo.maxWebsocketConnect)}));const Ru=bt.Z.WSS,Mu=new WeakMap,Lu=new WeakMap,Bu=new WeakMap,Fu={},Wu=new Pn.Q;let ju=0,Uu=0;function Vu(e,t,n){t.errMsg=t.errMsg||"ok";const r="ok"===t.errMsg;(0,u.FE)({name:e,args:n,success:r,errMsg:t.errMsg})}class Gu{constructor(e,t){this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING,Object.defineProperty(this,"__socketInstance__",{value:e,writable:!1,configurable:!1,enumerable:!1});const n=ju++,r=new Ru;Mu.set(this,t),Lu.set(this,r),Bu.set(this,n);const o=Date.now();r.onopen=(e,r)=>{this.readyState!==this.CLOSED&&(Uu++,this.readyState=this.OPEN,Wu.emit(`${n}open`,{header:e,profile:r}),Wu.emit("onSocketOpen",{header:e,profile:r},this),(0,wu.P)("connectSocket",t.url,1,Date.now()-o,"","",t.__skipDomainCheck__,0,0,r))},r.onclose=(e,t)=>{Uu--,this.readyState=this.CLOSED,Wu.emit(`${n}close`,{code:e,reason:t}),Wu.emit("onSocketClose",{code:e,reason:t},this)},r.onmessage=e=>{this.readyState!==this.CLOSED&&((0,O.eP)(e)&&(e.__proto__=ArrayBuffer.prototype),Wu.emit(`${n}message`,{data:e}),Wu.emit("onSocketMessage",{data:e},this))},r.onerror=(e,t)=>{Uu--,this.readyState=this.CLOSED,setTimeout((()=>{Wu.emit(`${n}error`,{errCode:e,errMsg:t}),Wu.emit("onSocketError",{errCode:e,errMsg:t},this)}),0)};const i=()=>{const e={errMsg:""};Uu>=Nu?(this.readyState=this.CLOSED,e.errMsg=`fail reach max websocket connect count ${Nu}`):(e.errMsg=r.connect((0,St.v7)(t,["url","header","timeout","protocols","tcpNoDelay","perMessageDeflate","enableProfile"])),"string"==typeof e.errMsg&&""!==e.errMsg||(e.errMsg="ok")),e.errMsg,"ok"===e.errMsg&&(Fu[n]=this),Vu("connectSocket",e,t)};(0,O.mf)(t.customCheck)?t.customCheck(t,(e=>{e?Vu("connectSocket",{errMsg:e},t):i()})):(i(),(0,Ou.k)({api:"websocket",url:t.url}).then((e=>{if(t.url,!(t.__skipDomainCheck__||e.isInDomainList||e.isInLAN&&!e.isLocalHost))throw new Error("fail:url not in domain list")})).catch((e=>{this.readyState=this.CLOSED;const t=e.message||e.errMsg;Wu.emit(`${n}error`,{errMsg:t}),Wu.emit("onSocketError",{errMsg:t},this)})))}send(e={}){const t={errMsg:Lu.get(this).send(e.data)};(e.success||e.fail||e.complete)&&Vu("sendSocketMessage",t,e)}close(e={}){this.readyState;Vu("closeSocket",{errMsg:Lu.get(this).close((0,O.hj)(e.code)?e.code:1e3,e.reason)},e)}onOpen(e){Wu.on(`${Bu.get(this)}open`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onOpen callback function"))}onClose(e){Wu.on(`${Bu.get(this)}close`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onClose callback function"))}onMessage(e){Wu.on(`${Bu.get(this)}message`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onMessage callback function"))}onError(e){Wu.on(`${Bu.get(this)}error`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onError callback function"))}}let $u=Du,Hu=xu;c.g.__isAppServiceRemoteDebugMode__||bt.Z.WSS&&oe.Z.onReady((()=>{let e=!1;const t=k.cj?"clicfg_appbrand_ios_native_socket_wcwss":1;1===t?e=!0:(0,pu.b)({experimentId:t,experimentType:"Expt",success:t=>{t&&1===Number(t.testConfig)&&(e=!0)}});const n=(0,aa.J)("bindingWebSocket");(e||n)&&($u=Gu,Hu=Fu)}));const Zu=new WeakMap,Qu={};function Yu(e,t){return Qu[t]||(Qu[t]=new WeakMap,ku.on(`onSocket${t}`,zu(t)),Wu.on(`onSocket${t}`,zu(t))),function(n){(0,u.r3)(`onSocket${t}`,n,T.ZT)&&Qu[t].set(e,n)}}function zu(e){return function(t,n){const r=n.__socketInstance__,o=Qu[e].get(r),i=Zu.get(r);o&&n===i&&__errorTracer__.surroundThirdByTryCatch(o,`at onSocket${e} callback function`)(t)}}const qu=(e={})=>{e=Object.assign({__skipDomainCheck__:!1},e);const t={};return{connectSocket(n){if(!(0,u.r3)("connectSocket",n,{url:""}))return;if(!1===(0,h.mQ)(n.url,"websocket"))return void(0,u.YG)("request",n,`invalid url "${n.url}"`);"object"!=typeof n.header&&void 0!==n.header&&delete n.header;let r={};n.header&&(r=(0,h.Nf)(n.header)),n.__skipDomainCheck__=e.__skipDomainCheck__;try{const e=Zu.get(t),o=new $u(t,Object.assign({},n,{header:r}));return e&&e.readyState!==e.CLOSED?e.readyState:Zu.set(t,o),o}catch(e){return e.message,void(0,u.YG)("connectSocket",n,e.message)}},closeSocket(e){const n=Zu.get(t);n&&n.readyState!==n.CLOSED?(n.readyState=n.CLOSED,n.close(e)):(0,u.YG)("closeSocket",e,"WebSocket is not connected");for(const e in Hu){const r=Hu[e];r.__socketInstance__===t&&(r.readyState=r.CLOSED,r!==n&&r.close())}},sendSocketMessage(e){const n=Zu.get(t);n&&n.readyState===n.OPEN?n.send(e):(0,u.YG)("sendSocketMessage",e,"WebSocket is not connected")},onSocketOpen:Yu(t,"Open"),onSocketClose:Yu(t,"Close"),onSocketMessage:Yu(t,"Message"),onSocketError:Yu(t,"Error")}},Ju=qu(),Ku=()=>qu({__skipDomainCheck__:!0}),Xu=(e={})=>{(0,u.IN)("uploadToCommonCDN",e,{})},ep=new WeakMap,tp=new WeakMap,np=new b.Z;function rp(e){const{success:t,fail:n,complete:r}=e;(0,u.IN)("addDownloadTaskForNative",Object.assign(e,{success:e=>{delete e.errMsg,this.taskId=e.downloadId,np.on(`${this.taskId}:success`,(e=>{e.errMsg="downloadApp:ok","function"==typeof t&&t(e),"function"==typeof r&&r(e)})),np.on(`${this.taskId}:fail`,(e=>{e.errMsg=`downloadFile:fail ${e.errMsg}`,"function"==typeof n&&n(e),"function"==typeof r&&r(e)}));const o=tp.get(this)||[];ep.set(this,"ready"),o.forEach((e=>{op.call(this,e[0],...e[1])})),np.emit(`${this.taskId}:created`,e)},fail:e=>{"function"==typeof n&&n(e),"function"==typeof r&&r(e)},complete:()=>{tp.set(this,[])}}),{beforeAll(e){e.errMsg=e.errMsg.replace("addDownloadTaskForNative","downloadApp")}})}function op(e,...t){if("ready"!==ep.get(this)){const n=tp.get(this)||[];return n.push([e,t]),void tp.set(this,n)}switch(e){case"cancel":(0,u.IN)("cancelDownloadTaskForNative",{downloadIdArray:[this.taskId]});break;case"onProgressUpdate":np.on(`${this.taskId}:progressUpdate`,(e=>{"function"==typeof t[0]&&__errorTracer__.surroundThirdByTryCatch(t[0],"at DownloadAppTask.onProgressUpdate callback function")(e)}));break;case"onCreated":np.on(`${this.taskId}:created`,(e=>{"function"==typeof t[0]&&__errorTracer__.surroundThirdByTryCatch(t[0],"at DownloadAppTask.onCreated callback function")(e)}));break;default:(0,u.IN)(`${e}DownloadTaskForNative`,{downloadId:this.taskId})}}(0,u.jQ)("onDownloadAppStateChangeForNative",(e=>{const{state:t,downloadId:n}=e;switch(delete e.state,delete e.downloadId,delete e.appId,t){case"download_succ":np.emit(`${n}:progressUpdate`,e),np.emit(`${n}:success`,e);break;case"download_failed":np.emit(`${n}:fail`,e);break;case"download_progress_changed":np.emit(`${n}:progressUpdate`,e)}"download_succ"!==t&&"download_failed"!==t||(np.removeAllListeners(`${n}:success`),np.removeAllListeners(`${n}:fail`),np.removeAllListeners(`${n}:progressUpdate`))}));const ip=class{constructor(e){this.taskId=null,["success","fail","complete"].forEach((t=>{"function"==typeof e[t]&&(e[t]=__errorTracer__.surroundThirdByTryCatch(e[t],`at api downloadApp ${t} callback function`))})),rp.call(this,e)}pause(){op.call(this,"pause")}resume(){op.call(this,"resume")}cancel(){op.call(this,"cancel")}install(){op.call(this,"install")}onCreated(e){op.call(this,"onCreated",e)}onProgressUpdate(e){op.call(this,"onProgressUpdate",e)}};var ap=c(6052),sp=c(3775);class cp extends Error{constructor(e){super(`APP-SERVICE-SDK:${e}`),this.type="AppServiceSdkKnownError"}}let lp=0;const dp=function(e){if(!Array.isArray(e))return[];return e.filter((e=>"string"==typeof e&&!e.startsWith("__plugins__")))},up={setStorage:e=>{if((0,u.r3)("setStorage",e,{key:""}))try{const{data:t,dataType:n}=(0,T.op)(e.data);(0,u.IN)("setStorage",{key:e.key,data:t,dataType:n,storageId:lp,success:e.success,fail:e.fail,complete:e.complete})}catch(t){"function"==typeof e.fail&&e.fail({errMsg:`setStorage:fail ${t.message}`}),"function"==typeof e.complete&&e.complete({errMsg:`setStorage:fail ${t.message}`})}},setStorageSync:(e,t="")=>{if(!(0,u.r3)("setStorage",e,""))return;const n=k.cj?"setStorage":"setStorageSync",{data:r,dataType:o}=(0,T.op)(t);let i=!1,a="";if((0,u.IN)(n,{key:e,data:r,dataType:o,storageId:lp,fail(e={}){i=!0,a=e.errMsg.replace("setStorage:","setStorageSync:")}}),i)throw new cp(a)},getStorage:e=>{(0,u.r3)("getStorage",e,{key:""})&&(0,u.IN)("getStorage",Object.assign({},e,{storageId:lp}),{beforeSuccess:e=>{e.data=(0,T.Yt)(e.data,e.dataType),delete e.dataType},checkNeedReportFail:e=>-1===e.errMsg.indexOf("data not found")})},getStorageSync:e=>{if(!(0,O.HD)(e))return;const t=k.cj?"getStorage":"getStorageSync";let n;return(0,u.IN)(t,{key:e,storageId:lp},{beforeAll:(e={})=>{n=(0,T.Yt)(e.data,e.dataType)},checkNeedReportFail:e=>-1===e.errMsg.indexOf("data not found")}),n},getStorageInfo:e=>{(0,u.IN)("getStorageInfo",Object.assign({},e,{storageId:lp}),{beforeAll:e=>{e.keys=dp(e.keys)}})},getStorageInfoSync:()=>{let e;return(0,u.IN)("getStorageInfoSync",{storageId:lp},{beforeAll:t=>{e=t,t.keys=dp(t.keys),delete t.errMsg}}),e},removeStorage:e=>{(0,u.r3)("removeStorage",e,{key:""})&&(0,u.IN)("removeStorage",Object.assign({},e,{storageId:lp}))},removeStorageSync:e=>{(0,u.r3)("removeStorageSync",e,"")&&(0,u.IN)("removeStorageSync",{key:e,storageId:lp})},clearStorage:e=>{(0,u.IN)("clearStorage",Object.assign({},e,{storageId:lp}))},clearStorageSync:()=>{const e=k.cj?"clearStorage":"clearStorageSync";(0,u.IN)(e,{storageId:lp})}},pp={app:0,game:0,opendata:1,singlePage:2},hp=e=>{const t=pp[e],n={};return Object.keys(up).forEach((e=>{const r=up[e];n[e]=(...e)=>(lp=t,r(...e))})),n},fp={app:hp("app"),game:hp("game"),opendata:hp("opendata"),singlePage:hp("singlePage")},gp={};["setStorage","getStorage","getStorageInfo","removeStorage","clearStorage"].forEach((e=>{gp[e]=(t={})=>{if(t.key){if(t.key.toString().startsWith("__plugins__"))return void(0,u.YG)(e,t,`invalid key "${t.key}"`)}return fp[(0,St.Av)()?"singlePage":"app"][`${e}`](t)},gp[`${e}Sync`]=(t,...n)=>{if(t&&t.toString().startsWith("__plugins__"))return;return fp[(0,St.Av)()?"singlePage":"app"][`${e}Sync`].call(void 0,t,...n)};const t=`plugin_${e}`;gp[t]=(t={})=>{t.key&&(t.key=`__plugins__/${t.key}`);return fp[(0,St.Av)()?"singlePage":"app"][`${e}`](t)},gp[`${t}Sync`]=(t,...n)=>{t&&(t=`__plugins__/${t}`);return fp[(0,St.Av)()?"singlePage":"app"][`${e}Sync`].call(void 0,t,...n)}}));const _p=gp,mp=JSON.parse('{"ad":{"unit-id":1,"ad-intervals":1,"ad-type":1,"ad-theme":1,"bindload":1,"binderror":1,"bindclose":1},"audio":{"id":1,"src":1,"loop":1,"controls":1,"poster":1,"name":1,"author":1,"binderror":1,"bindplay":1,"bindpause":1,"bindtimeupdate":1,"bindended":1},"button":{"size":["default","mini"],"type":["primary","default","warn"],"plain":1,"disabled":1,"loading":1,"form-type":["submit","reset"],"open-type":["contact","share","getPhoneNumber","getUserInfo","launchApp","openSetting","feedback"],"hover-class":1,"hover-stop-propagation":1,"hover-start-time":1,"hover-stay-time":1,"lang":["en","zh_CN","zh_TW"],"session-from":1,"send-message-title":1,"send-message-path":1,"send-message-img":1,"app-parameter":1,"show-message-card":1,"bindgetuserinfo":1,"bindcontact":1,"bindgetphonenumber":1,"binderror":1,"bindopensetting":1,"bindlaunchapp":1},"camera":{"mode":["normal","scanCode"],"resolution":["low","medium","high"],"device-position":["front","back"],"flash":["auto","on","off","torch"],"frame-size":["small","medium","large"],"bindstop":1,"binderror":1,"bindinitdone":1,"bindscancode":1},"canvas":{"type":1,"canvas-id":1,"disable-scroll":1,"bindtouchstart":1,"bindtouchmove":1,"bindtouchend":1,"bindtouchcancel":1,"bindlongtap":1,"binderror":1},"checkbox":{"value":1,"disabled":1,"checked":1,"color":1},"checkbox-group":{"bindchange":1},"cover-image":{"src":1,"bindload":1,"binderror":1},"cover-view":{"scroll-top":1},"editor":{"read-only":1,"placeholder":1,"show-img-size":1,"show-img-toolbar":1,"show-img-resize":1,"bindready":1,"bindfocus":1,"bindblur":1,"bindinput":1,"bindstatuschange":1},"form":{"report-submit":1,"report-submit-timeout":1,"bindsubmit":1,"bindreset":1},"functional-page-navigator":{"version":["develop","trial","release"],"name":["loginAndGetUserInfo","requestPayment","chooseAddress","chooseInvoice","chooseInvoiceTitle"],"args":1,"bindsuccess":1,"bindfail":1,"bindcancel":1},"icon":{"type":1,"size":1,"color":1},"image":{"src":1,"mode":["scaleToFill","aspectFit","aspectFill","widthFix","heightFix","top","bottom","center","left","right","top left","top right","bottom left","bottom right"],"webp":1,"lazy-load":1,"show-menu-by-longpress":1,"binderror":1,"bindload":1},"input":{"value":1,"type":["text","number","idcard","digit"],"password":1,"placeholder":1,"placeholder-style":1,"placeholder-class":1,"disabled":1,"maxlength":1,"cursor-spacing":1,"auto-focus":1,"focus":1,"confirm-type":["send","search","next","go","done"],"always-embed":1,"confirm-hold":1,"cursor":1,"selection-start":1,"selection-end":1,"adjust-position":1,"hold-keyboard":1,"bindinput":1,"bindfocus":1,"bindblur":1,"bindconfirm":1,"bindkeyboardheightchange":1},"keyboard-accessory":{},"label":{"for":1},"live-player":{"src":1,"mode":["live","RTC"],"autoplay":1,"muted":1,"orientation":["vertical","horizontal"],"object-fit":["contain","fillCrop"],"background-mute":1,"min-cache":1,"max-cache":1,"sound-mode":["speaker","ear"],"auto-pause-if-navigate":1,"auto-pause-if-open-native":1,"picture-in-picture-mode":["[]","push","pop"],"bindstatechange":1,"bindfullscreenchange":1,"bindnetstatus":1,"bindaudiovolumenotify":1,"bindenterpictureinpicture":1,"bindleavepictureinpicture":1},"live-pusher":{"url":1,"mode":1,"autopush":1,"muted":1,"enable-camera":1,"auto-focus":1,"orientation":["vertical","horizontal"],"beauty":1,"whiteness":1,"aspect":1,"min-bitrate":1,"max-bitrate":1,"audio-quality":1,"waiting-image":1,"waiting-image-hash":1,"zoom":1,"device-position":1,"background-mute":1,"mirror":1,"remote-mirror":1,"local-mirror":["auto","enable","disable"],"audio-reverb-type":["0","1","2","3","4","5","6","7"],"enable-mic":1,"enable-agc":1,"enable-ans":1,"audio-volume-type":["auto","media","voicecall"],"video-width":1,"video-height":1,"beauty-style":["smooth","nature"],"filter":["standard","pink","nostalgia","blues","romantic","cool","fresher","solor","aestheticism","whitening","cerisered"],"bindstatechange":1,"bindnetstatus":1,"binderror":1,"bindbgmstart":1,"bindbgmprogress":1,"bindbgmcomplete":1,"bindaudiovolumenotify":1},"map":{"longitude":1,"latitude":1,"scale":1,"min-scale":1,"max-scale":1,"markers":1,"covers":1,"polyline":1,"circles":1,"controls":1,"include-points":1,"show-location":1,"polygons":1,"subkey":1,"layer-style":1,"rotate":1,"skew":1,"enable-3D":1,"show-compass":1,"show-scale":1,"enable-overlooking":1,"enable-zoom":1,"enable-scroll":1,"enable-rotate":1,"enable-satellite":1,"enable-traffic":1,"enable-poi":1,"enable-building":1,"setting":1,"bindtap":1,"bindmarkertap":1,"bindlabeltap":1,"bindcontroltap":1,"bindcallouttap":1,"bindupdated":1,"bindregionchange":1,"bindpoitap":1,"bindanchorpointtap":1},"match-media":{"min-width":1,"max-width":1,"width":1,"min-height":1,"max-height":1,"height":1,"orientation":1},"movable-area":{"scale-area":1},"movable-view":{"direction":1,"inertia":1,"out-of-bounds":1,"x":1,"y":1,"damping":1,"friction":1,"disabled":1,"scale":1,"scale-min":1,"scale-max":1,"scale-value":1,"animation":1,"bindchange":1,"bindscale":1,"htouchmove":1,"vtouchmove":1},"navigation-bar":{"title":1,"loading":1,"front-color":1,"background-color":1,"color-animation-duration":1,"color-animation-timing-func":1},"navigator":{"target":["self","miniProgram"],"url":1,"open-type":["navigate","redirect","switchTab","reLaunch","navigateBack","exit"],"delta":1,"app-id":1,"path":1,"extra-data":1,"version":["develop","trial","release"],"hover-class":1,"hover-stop-propagation":1,"hover-start-time":1,"hover-stay-time":1,"bindsuccess":1,"bindfail":1,"bindcomplete":1},"official-account":{},"open-data":{"type":["groupName","userNickName","userAvatarUrl","userGender","userCity","userProvince","userCountry","userLanguage"],"open-gid":1,"lang":["en","zh_CN","zh_TW"],"default-text":1,"default-avatar":1,"binderror":1},"page-container":{"show":1,"duration":1,"z-index":1,"overlay":1,"position":1,"round":1,"close-on-slideDown":1,"overlay-style":1,"custom-style":1,"bind:beforeenter":1,"bind:enter":1,"bind:afterenter":1,"bind:beforeleave":1,"bind:leave":1,"bind:afterleave":1,"bind:clickoverlay":1},"page-meta":{"background-text-style":1,"background-color":1,"background-color-top":1,"background-color-bottom":1,"root-background-color":1,"scroll-top":1,"scroll-duration":1,"page-style":1,"page-font-size":1,"root-font-size":1,"page-orientation":1,"bindresize":1,"bindscroll":1,"bindscrolldone":1},"picker":{"header-text":1,"mode":["selector","multiSelector","time","date","region"],"disabled":1,"bindcancel":1},"picker-view":{"value":1,"indicator-style":1,"indicator-class":1,"mask-style":1,"mask-class":1,"bindchange":1,"bindpickstart":1,"bindpickend":1},"picker-view-column":{},"progress":{"percent":1,"show-info":1,"border-radius":1,"font-size":1,"stroke-width":1,"color":1,"activeColor":1,"backgroundColor":1,"active":1,"active-mode":1,"duration":1,"bindactiveend":1},"radio":{"value":1,"checked":1,"disabled":1,"color":1},"radio-group":{"bindchange":1},"rich-text":{"nodes":1,"space":["ensp","emsp","nbsp"]},"scroll-view":{"scroll-x":1,"scroll-y":1,"upper-threshold":1,"lower-threshold":1,"scroll-top":1,"scroll-left":1,"scroll-into-view":1,"scroll-with-animation":1,"enable-back-to-top":1,"enable-flex":1,"scroll-anchoring":1,"refresher-enabled":1,"refresher-threshold":1,"refresher-default-style":1,"refresher-background":1,"refresher-triggered":1,"enhanced":1,"bounces":1,"show-scrollbar":1,"paging-enabled":1,"fast-deceleration":1,"binddragstart":1,"binddragging":1,"binddragend":1,"bindscrolltoupper":1,"bindscrolltolower":1,"bindscroll":1,"bindrefresherpulling":1,"bindrefresherrefresh":1,"bindrefresherrestore":1,"bindrefresherabort":1},"share-element":{"key":1,"transform":1,"duration":1,"easing-function":1},"slider":{"min":1,"max":1,"step":1,"disabled":1,"value":1,"color":1,"selected-color":1,"activeColor":1,"backgroundColor":1,"block-size":1,"block-color":1,"show-value":1,"bindchange":1,"bindchanging":1},"swiper":{"indicator-dots":1,"indicator-color":1,"indicator-active-color":1,"autoplay":1,"current":1,"interval":1,"duration":1,"circular":1,"vertical":1,"previous-margin":1,"next-margin":1,"snap-to-edge":1,"display-multiple-items":1,"easing-function":["default","linear","easeInCubic","easeOutCubic","easeInOutCubic"],"bindchange":1,"bindtransition":1,"bindanimationfinish":1},"swiper-item":{"item-id":1,"skip-hidden-item-layout":1},"switch":{"checked":1,"disabled":1,"type":1,"color":1,"bindchange":1},"text":{"selectable":1,"user-select":1,"space":["ensp","emsp","nbsp"],"decode":1},"textarea":{"value":1,"placeholder":1,"placeholder-style":1,"placeholder-class":1,"disabled":1,"maxlength":1,"auto-focus":1,"focus":1,"auto-height":1,"fixed":1,"cursor-spacing":1,"cursor":1,"show-confirm-bar":1,"selection-start":1,"selection-end":1,"adjust-position":1,"hold-keyboard":1,"disable-default-padding":1,"confirm-type":["send","search","next","go","done","return"],"confirm-hold":1,"bindfocus":1,"bindblur":1,"bindlinechange":1,"bindinput":1,"bindconfirm":1,"bindkeyboardheightchange":1},"video":{"src":1,"duration":1,"controls":1,"danmu-list":1,"danmu-btn":1,"enable-danmu":1,"autoplay":1,"loop":1,"muted":1,"initial-time":1,"page-gesture":1,"direction":["0","90","-90"],"show-progress":1,"show-fullscreen-btn":1,"show-play-btn":1,"show-center-play-btn":1,"enable-progress-gesture":1,"object-fit":["contain","fill","cover"],"poster":1,"show-mute-btn":1,"title":1,"play-btn-position":["bottom","center"],"enable-play-gesture":1,"auto-pause-if-navigate":1,"auto-pause-if-open-native":1,"vslide-gesture":1,"vslide-gesture-in-fullscreen":1,"ad-unit-id":1,"poster-for-crawler":1,"show-casting-button":1,"picture-in-picture-mode":["[]","push","pop"],"picture-in-picture-show-progress":1,"enable-auto-rotation":1,"show-screen-lock-button":1,"show-snapshot-button":1,"show-background-playback-button":1,"background-poster":1,"bindplay":1,"bindpause":1,"bindended":1,"bindtimeupdate":1,"bindfullscreenchange":1,"bindwaiting":1,"binderror":1,"bindprogress":1,"bindloadedmetadata":1,"bindcontrolstoggle":1,"bindenterpictureinpicture":1,"bindleavepictureinpicture":1,"bindseekcomplete":1},"view":{"hover-class":1,"hover-stop-propagation":1,"hover-start-time":1,"hover-stay-time":1},"voip-room":{"openid":1,"mode":1,"device-position":1,"binderror":1},"web-view":{"src":1,"bindmessage":1,"bindload":1,"binderror":1},"ad-custom":{"unit-id":1,"ad-intervals":1,"bindload":1,"binderror":1},"aria-component":{},"native-component":{}}'),yp=JSON.parse('{"class":{"console":["debug","log","info","warn","error","group","groupEnd"],"env":["USER_DATA_PATH"],"CanvasContext":["draw","createLinearGradient","createCircularGradient","createPattern","measureText","save","restore","beginPath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","arc","rect","arcTo","clip","fillRect","strokeRect","clearRect","fill","stroke","closePath","scale","rotate","translate","drawImage","strokeText","transform","setTransform","setFillStyle","setStrokeStyle","setShadow","setGlobalAlpha","setLineWidth","setLineJoin","setLineCap","setLineDash","setMiterLimit","fillText","setFontSize","setTextAlign","setTextBaseline","fillStyle","strokeStyle","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","lineWidth","lineCap","lineJoin","miterLimit","lineDashOffset","font","globalAlpha","globalCompositeOperation"],"CanvasGradient":["addColorStop"],"OffscreenCanvas":["getContext","createImage","width","height"],"Color":[],"EventChannel":["emit","on","once","off"],"IntersectionObserver":["relativeTo","relativeToViewport","observe","disconnect"],"MediaQueryObserver":["observe","disconnect"],"NodesRef":["fields","boundingClientRect","scrollOffset","context","node"],"SelectorQuery":["in","select","selectAll","selectViewport","exec"],"AudioContext":["setSrc","play","pause","seek"],"InnerAudioContext":["play","pause","stop","seek","destroy","onCanplay","offCanplay","onPlay","offPlay","onPause","offPause","onStop","offStop","onEnded","offEnded","onTimeUpdate","offTimeUpdate","onError","offError","onWaiting","offWaiting","onSeeking","offSeeking","onSeeked","offSeeked","src","startTime","autoplay","loop","obeyMuteSwitch","volume","playbackRate","duration","currentTime","paused","buffered"],"CameraContext":["onCameraFrame","takePhoto","setZoom","startRecord","stopRecord"],"CameraFrameListener":["start","stop"],"EditorContext":["format","insertDivider","insertImage","insertText","setContents","getContents","clear","removeFormat","undo","redo","blur","scrollIntoView","getSelectionText"],"LivePlayerContext":["play","stop","mute","pause","resume","requestFullScreen","exitFullScreen","exitPictureInPicture","snapshot","requestPictureInPicture"],"LivePusherContext":["start","stop","pause","resume","switchCamera","snapshot","toggleTorch","playBGM","stopBGM","pauseBGM","resumeBGM","setBGMVolume","setMICVolume","startPreview","stopPreview","sendMessage"],"MapContext":["getCenterLocation","setLocMarkerIcon","moveToLocation","translateMarker","moveAlong","includePoints","getRegion","getRotate","getSkew","getScale","setCenterOffset","removeCustomLayer","addCustomLayer","addGroundOverlay","updateGroundOverlay","removeGroundOverlay","toScreenLocation","fromScreenLocation","openMapApp","addMarkers","removeMarkers","initMarkerCluster","on"],"ScrollViewContext":["scrollTo","scrollIntoView","scrollEnabled","bounces","showScrollbar","pagingEnabled","fastDeceleration","decelerationDisabled"],"VideoContext":["play","pause","stop","seek","sendDanmu","playbackRate","requestFullScreen","exitFullScreen","showStatusBar","hideStatusBar","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback"],"LogManager":["debug","info","log","warn"],"RealtimeLogManager":["info","warn","error","setFilterMsg","addFilterMsg"],"RealtimeTagLogManager":["info","warn","error","setFilterMsg","addFilterMsg"],"IBeaconInfo":["uuid","major","minor","proximity","accuracy","rssi"],"MediaRecorder":["pause","resume","start","stop","requestFrame","on","off","destroy"],"VideoDecoder":["start","seek","stop","remove","getFrameData","on","off"],"MediaTrack":["kind","duration","volume"],"MediaContainer":["extractDataSource","addTrack","removeTrack","export","destroy"],"UserInfo":["nickName","avatarUrl","gender","country","province","city","language"],"EntryList":["getEntries","getEntriesByType","getEntriesByName"],"Performance":["getEntries","getEntriesByType","getEntriesByName","createObserver","setBufferSize"],"PerformanceObserver":["observe","disconnect","supportedEntryTypes"],"Animation":["export","step","matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ","opacity","backgroundColor","width","height","left","right","top","bottom"],"UpdateManager":["applyUpdate","onCheckForUpdate","onUpdateReady","onUpdateFailed"],"Worker":["postMessage","terminate","onMessage","onProcessKilled"],"FileSystemManager":[],"readResult":["bytesRead","arrayBuffer"],"Stats":["isDirectory","isFile","mode","size","lastAccessedTime","lastModifiedTime"],"writeResult":["bytesWritten"],"UDPSocket":["bind","send","connect","write","close","onClose","offClose","onError","offError","onListening","offListening","onMessage","offMessage"],"Canvas":["getContext","createImage","requestAnimationFrame","cancelAnimationFrame","createImageData","createPath2D","toDataURL","width","height"],"RenderingContext":[],"Image":["src","width","height","onload","onerror"],"NFCAdapter":["startDiscovery","stopDiscovery","getNdef","getNfcA","getNfcB","getIsoDep","getNfcF","getNfcV","getMifareClassic","getMifareUltralight","onDiscovered","offDiscovered","tech"],"Ndef":["connect","close","setTimeout","isConnected","onNdefMessage","offNdefMessage","writeNdefMessage"],"NfcA":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive","getAtqa","getSak"],"NfcB":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"IsoDep":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive","getHistoricalBytes"],"NfcF":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"NfcV":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"MifareClassic":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"MifareUltralight":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"WifiInfo":["SSID","BSSID","secure","signalStrength","frequency"],"BackgroundAudioManager":["play","pause","seek","stop","onCanplay","onWaiting","onError","onPlay","onPause","onSeeking","onSeeked","onEnded","onStop","onTimeUpdate","onNext","onPrev","src","startTime","title","epname","singer","coverImgUrl","webUrl","protocol","playbackRate","duration","currentTime","paused","buffered"],"RecorderManager":["start","pause","resume","stop","onStart","onResume","onPause","onStop","onFrameRecorded","onError","onInterruptionBegin","onInterruptionEnd"],"DownloadTask":["abort","onProgressUpdate","offProgressUpdate","onHeadersReceived","offHeadersReceived"],"RequestTask":["abort","onHeadersReceived","offHeadersReceived"],"SocketTask":["send","close","onOpen","onClose","onError","onMessage"],"UploadTask":["abort","onProgressUpdate","offProgressUpdate","onHeadersReceived","offHeadersReceived"],"AuthSetting":["scope.userInfo","scope.userLocation","scope.address","scope.invoiceTitle","scope.invoice","scope.werun","scope.record","scope.writePhotosAlbum","scope.camera"],"SubscriptionsSetting":["mainSwitch","itemSettings"],"ImageData":["width","height","data"],"Path2D":[],"BLEPeripheralServer":["addService","removeService","startAdvertising","stopAdvertising","writeCharacteristicValue","onCharacteristicWriteRequest","offCharacteristicWriteRequest","onCharacteristicReadRequest","offCharacteristicReadRequest","onCharacteristicSubscribed","offCharacteristicSubscribed","onCharacteristicUnsubscribed","offCharacteristicUnsubscribed"],"MediaAudioPlayer":["start","addAudioSource","removeAudioSource","stop","destroy","volume"],"RewardedVideoAd":["load","show","destroy","onLoad","offLoad","onError","offError","onClose","offClose"]},"method":{"arrayBufferToBase64":{},"base64ToArrayBuffer":{},"exitVoIPChat":{"object":{},"success":{}},"joinVoIPChat":{"object":{"roomType":["voice","video"],"signature":1,"nonceStr":1,"timeStamp":1,"groupId":1,"muteConfig":1},"success":{"openIdList":1,"errCode":1,"errMsg":1}},"onVoIPChatInterrupted":{"callback":{"errCode":1,"errMsg":1}},"offVoIPChatInterrupted":{},"onVoIPChatMembersChanged":{"callback":{"openIdList":1,"errCode":1,"errMsg":1}},"offVoIPChatMembersChanged":{},"onVoIPChatSpeakersChanged":{"callback":{"openIdList":1,"errCode":1,"errMsg":1}},"onVoIPChatStateChanged":{"callback":{"code":1,"data":1,"errCode":1,"errMsg":1}},"offVoIPChatStateChanged":{"callback":{}},"onVoIPVideoMembersChanged":{"callback":{"openIdList":1,"errCode":1,"errMsg":1}},"offVoIPVideoMembersChanged":{"callback":{}},"subscribeVoIPVideoMembers":{"object":{"openIdList":1},"success":{}},"updateVoIPChatMuteConfig":{"object":{"muteConfig":1},"success":{}},"getAccountInfoSync":{},"onAppHide":{"callback":{}},"offAppHide":{"callback":{}},"onAppShow":{"callback":{"path":1,"scene":1,"query":1,"shareTicket":1,"referrerInfo":["appId","extraData"],"forwardMaterials":1}},"offAppShow":{"callback":{}},"getEnterOptionsSync":{},"onError":{"callback":{}},"offError":{},"onUnhandledRejection":{"callback":{"reason":1,"promise":1}},"offUnhandledRejection":{"callback":{}},"getLaunchOptionsSync":{},"onCopyUrl":{"callback":{"query":1}},"offCopyUrl":{"callback":{}},"onPageNotFound":{"callback":{"path":1,"query":1,"isEntryPage":1}},"offPageNotFound":{"callback":{}},"onThemeChange":{"callback":{"theme":["dark","light"]}},"offThemeChange":{"callback":{}},"canvasGetImageData":{"object":{"canvasId":1,"x":1,"y":1,"width":1,"height":1},"success":{"width":1,"height":1,"data":1}},"canvasPutImageData":{"object":{"canvasId":1,"data":1,"x":1,"y":1,"width":1,"height":1},"success":{}},"canvasToTempFilePath":{"object":{"x":1,"y":1,"width":1,"height":1,"destWidth":1,"destHeight":1,"canvasId":1,"canvas":1,"fileType":["jpg","png"],"quality":1},"success":{"tempFilePath":1}},"createCanvasContext":{},"createOffscreenCanvas":{"object":{"type":["webgl","2d"],"width":1,"height":1,"compInst":1}},"createIntersectionObserver":{},"nextTick":{},"createSelectorQuery":{},"createAudioContext":{},"createCameraContext":{},"createLivePlayerContext":{},"createLivePusherContext":{},"createMapContext":{},"createVideoContext":{},"createInnerAudioContext":{},"getLogManager":{"object":{"level":1}},"setEnableDebug":{"object":{"enableDebug":1},"success":{}},"getRealtimeLogManager":{},"startAccelerometer":{"object":{"interval":["game","ui","normal"]},"success":{}},"stopAccelerometer":{"object":{},"success":{}},"onAccelerometerChange":{"callback":{"x":1,"y":1,"z":1}},"offAccelerometerChange":{},"checkIsOpenAccessibility":{"object":{},"success":{"open":1}},"getBatteryInfo":{"object":{},"success":{"level":1,"isCharging":1}},"getBatteryInfoSync":{"return":{"level":1,"isCharging":1}},"addPhoneCalendar":{"object":{"title":1,"startTime":1,"allDay":1,"description":1,"location":1,"endTime":1,"alarm":1,"alarmOffset":1},"success":{}},"addPhoneRepeatCalendar":{"object":{"title":1,"startTime":1,"allDay":1,"description":1,"location":1,"endTime":1,"alarm":1,"alarmOffset":1,"repeatInterval":1,"repeatEndTime":1},"success":{}},"getClipboardData":{"object":{},"success":{"data":1}},"setClipboardData":{"object":{"data":1},"success":{}},"startCompass":{"object":{},"success":{}},"stopCompass":{"object":{},"success":{}},"onCompassChange":{"callback":{"direction":1,"accuracy":1}},"offCompassChange":{},"chooseContact":{"object":{},"success":{"phoneNumber":1,"displayName":1,"phoneNumberList":1}},"addPhoneContact":{"object":{"firstName":1,"photoFilePath":1,"nickName":1,"lastName":1,"middleName":1,"remark":1,"mobilePhoneNumber":1,"weChatNumber":1,"addressCountry":1,"addressState":1,"addressCity":1,"addressStreet":1,"addressPostalCode":1,"organization":1,"title":1,"workFaxNumber":1,"workPhoneNumber":1,"hostNumber":1,"email":1,"url":1,"workAddressCountry":1,"workAddressState":1,"workAddressCity":1,"workAddressStreet":1,"workAddressPostalCode":1,"homeFaxNumber":1,"homePhoneNumber":1,"homeAddressCountry":1,"homeAddressState":1,"homeAddressCity":1,"homeAddressStreet":1,"homeAddressPostalCode":1},"success":{}},"searchContacts":{"object":{"phoneNumber":1},"success":{"result":1}},"getRandomValues":{"object":{"length":1},"success":{"randomValues":1}},"startGyroscope":{"object":{"interval":["game","ui","normal"]},"success":{}},"stopGyroscope":{"object":{},"success":{}},"onGyroscopeChange":{"callback":{"x":1,"y":1,"z":1}},"offGyroscopeChange":{},"startBeaconDiscovery":{"object":{"uuids":1,"ignoreBluetoothAvailable":1},"success":{}},"stopBeaconDiscovery":{"object":{},"success":{}},"getBeacons":{"object":{},"success":{"beacons":1}},"onBeaconUpdate":{"callback":{"beacons":1}},"offBeaconUpdate":{"callback":{}},"onBeaconServiceChange":{"callback":{"available":1,"discovering":1}},"offBeaconServiceChange":{"callback":{}},"startLocalServiceDiscovery":{"object":{"serviceType":1},"success":{}},"stopLocalServiceDiscovery":{"object":{},"success":{}},"onLocalServiceFound":{"callback":{"serviceType":1,"serviceName":1,"ip":1,"port":1}},"offLocalServiceFound":{"callback":{}},"onLocalServiceLost":{"callback":{"serviceType":1,"serviceName":1}},"offLocalServiceLost":{"callback":{}},"onLocalServiceDiscoveryStop":{"callback":{}},"offLocalServiceDiscoveryStop":{"callback":{}},"onLocalServiceResolveFail":{"callback":{"serviceType":1,"serviceName":1}},"offLocalServiceResolveFail":{"callback":{}},"startDeviceMotionListening":{"object":{"interval":["game","ui","normal"]},"success":{}},"stopDeviceMotionListening":{"object":{},"success":{}},"onDeviceMotionChange":{"callback":{"alpha":1,"beta":1,"gamma":1}},"offDeviceMotionChange":{},"getNetworkType":{"object":{},"success":{"networkType":["wifi","2g","3g","4g","5g","unknown","none"],"signalStrength":1}},"onNetworkStatusChange":{"callback":{"isConnected":1,"networkType":["wifi","2g","3g","4g","unknown","none"]}},"offNetworkStatusChange":{},"makePhoneCall":{"object":{"phoneNumber":1},"success":{}},"scanCode":{"object":{"onlyFromCamera":1,"scanType":["barCode","qrCode","datamatrix","pdf417"]},"success":{"result":1,"scanType":["QR_CODE","AZTEC","CODABAR","CODE_39","CODE_93","CODE_128","DATA_MATRIX","EAN_8","EAN_13","ITF","MAXICODE","PDF_417","RSS_14","RSS_EXPANDED","UPC_A","UPC_E","UPC_EAN_EXTENSION","WX_CODE","CODE_25"],"charSet":1,"path":1,"rawData":1}},"getSystemInfo":{"object":{},"success":{"brand":1,"model":1,"pixelRatio":1,"screenWidth":1,"screenHeight":1,"windowWidth":1,"windowHeight":1,"statusBarHeight":1,"language":1,"version":1,"system":1,"platform":1,"fontSizeSetting":1,"SDKVersion":1,"benchmarkLevel":1,"albumAuthorized":1,"cameraAuthorized":1,"locationAuthorized":1,"microphoneAuthorized":1,"notificationAuthorized":1,"notificationAlertAuthorized":1,"notificationBadgeAuthorized":1,"notificationSoundAuthorized":1,"bluetoothEnabled":1,"locationEnabled":1,"wifiEnabled":1,"safeArea":["left","right","top","bottom","width","height"],"locationReducedAccuracy":1,"theme":["dark","light"],"host":["appId"],"enableDebug":1,"deviceOrientation":["portrait","landscape"]}},"getSystemInfoSync":{},"getSystemInfoAsync":{"object":{},"success":{"brand":1,"model":1,"pixelRatio":1,"screenWidth":1,"screenHeight":1,"windowWidth":1,"windowHeight":1,"statusBarHeight":1,"language":1,"version":1,"system":1,"platform":1,"fontSizeSetting":1,"SDKVersion":1,"benchmarkLevel":1,"albumAuthorized":1,"cameraAuthorized":1,"locationAuthorized":1,"microphoneAuthorized":1,"notificationAuthorized":1,"notificationAlertAuthorized":1,"notificationBadgeAuthorized":1,"notificationSoundAuthorized":1,"bluetoothEnabled":1,"locationEnabled":1,"wifiEnabled":1,"safeArea":["left","right","top","bottom","width","height"],"locationReducedAccuracy":1,"theme":["dark","light"],"host":["appId"],"enableDebug":1,"deviceOrientation":["portrait","landscape"]}},"vibrateShort":{"object":{"type":1},"success":{}},"vibrateLong":{"object":{},"success":{}},"getExptInfoSync":{"return":{}},"reportEvent":{},"getExtConfig":{"object":{},"success":{"extConfig":1}},"getExtConfigSync":{"return":{}},"chooseLocation":{"object":{"latitude":1,"longitude":1},"success":{"name":1,"address":1,"latitude":1,"longitude":1}},"choosePoi":{"object":{},"success":{"type":1,"city":1,"name":1,"address":1,"latitude":1,"longitude":1}},"getLocation":{"object":{"type":1,"altitude":1,"isHighAccuracy":1,"highAccuracyExpireTime":1},"success":{"latitude":1,"longitude":1,"speed":1,"accuracy":1,"altitude":1,"verticalAccuracy":1,"horizontalAccuracy":1}},"onLocationChange":{"callback":{"latitude":1,"longitude":1,"speed":1,"accuracy":1,"altitude":1,"verticalAccuracy":1,"horizontalAccuracy":1}},"offLocationChange":{"callback":{}},"startLocationUpdateBackground":{"object":{},"success":{}},"startLocationUpdate":{"object":{},"success":{}},"stopLocationUpdate":{"object":{},"success":{}},"openLocation":{"object":{"latitude":1,"longitude":1,"scale":1,"name":1,"address":1},"success":{}},"onAudioInterruptionBegin":{"callback":{}},"offAudioInterruptionBegin":{"callback":{}},"onAudioInterruptionEnd":{"callback":{}},"offAudioInterruptionEnd":{"callback":{}},"chooseMedia":{"object":{"count":1,"mediaType":["image","video"],"sourceType":["album","camera"],"maxDuration":1,"sizeType":1,"camera":["back","front"]},"success":{"tempFiles":1,"type":1}},"chooseMessageFile":{"object":{"count":1,"type":["all","video","image","file"],"extension":1},"success":{"tempFiles":1}},"loadFontFace":{"object":{"global":1,"family":1,"source":1,"desc":["style","weight","variant"],"scopes":1},"success":{"status":1}},"chooseImage":{"object":{"count":1,"sizeType":["original","compressed"],"sourceType":["album","camera"]},"success":{"tempFilePaths":1,"tempFiles":1}},"previewImage":{"object":{"urls":1,"showmenu":1,"current":1},"success":{}},"getImageInfo":{"object":{"src":1},"success":{"width":1,"height":1,"path":1,"orientation":["up","up-mirrored","down","down-mirrored","left-mirrored","right","right-mirrored","left"],"type":1}},"saveImageToPhotosAlbum":{"object":{"filePath":1},"success":{}},"compressImage":{"object":{"src":1,"quality":1},"success":{"tempFilePath":1}},"createMediaRecorder":{},"openVideoEditor":{"object":{"filePath":1},"success":{"duration":1,"size":1,"tempFilePath":1,"tempThumbPath":1}},"previewMedia":{"object":{"sources":1,"current":1,"showmenu":1},"success":{}},"chooseVideo":{"object":{"sourceType":["album","camera"],"compressed":1,"maxDuration":1,"camera":["back","front"]},"success":{"tempFilePath":1,"duration":1,"size":1,"height":1,"width":1}},"saveVideoToPhotosAlbum":{"object":{"filePath":1},"success":{}},"getVideoInfo":{"object":{"src":1},"success":{"orientation":["up","down","left","right","up-mirrored","down-mirrored","left-mirrored","right-mirrored"],"type":1,"duration":1,"size":1,"height":1,"width":1,"fps":1,"bitrate":1}},"compressVideo":{"object":{"src":1,"quality":["low","medium","high"],"bitrate":1,"fps":1,"resolution":1},"success":{"tempFilePath":1,"size":1}},"createVideoDecoder":{},"createMediaContainer":{},"downloadFile":{"object":{"url":1,"header":1,"timeout":1,"filePath":1},"success":{"tempFilePath":1,"filePath":1,"statusCode":1,"profile":1}},"request":{"object":{"url":1,"data":1,"header":1,"timeout":1,"method":["OPTIONS","GET","HEAD","POST","PUT","DELETE","TRACE","CONNECT"],"dataType":["json","其他"],"responseType":["text","arraybuffer"],"enableHttp2":1,"enableQuic":1,"enableCache":1},"success":{"data":1,"statusCode":1,"header":1,"cookies":1,"profile":1}},"uploadFile":{"object":{"url":1,"filePath":1,"name":1,"header":1,"formData":1,"timeout":1},"success":{"data":1,"statusCode":1}},"login":{"object":{"timeout":1},"success":{"code":1}},"checkSession":{"object":{},"success":{}},"chooseAddress":{"object":{},"success":{"userName":1,"postalCode":1,"provinceName":1,"cityName":1,"countyName":1,"detailInfo":1,"nationalCode":1,"telNumber":1,"errMsg":1}},"authorize":{"object":{"scope":1},"success":{}},"addCard":{"object":{"cardList":1},"success":{"cardList":1}},"openCard":{"object":{"cardList":1},"success":{}},"chooseInvoice":{"object":{},"success":{"invoiceInfo":1}},"chooseInvoiceTitle":{"object":{},"success":{"type":["0","1"],"title":1,"taxNumber":1,"companyAddress":1,"telephone":1,"bankName":1,"bankAccount":1,"errMsg":1}},"getGroupEnterInfo":{"object":{},"success":{"errMsg":1,"encryptedData":1,"iv":1,"cloudID":1}},"getUserInfo":{"object":{"withCredentials":1,"lang":["en","zh_CN","zh_TW"]},"success":{"userInfo":1,"rawData":1,"signature":1,"encryptedData":1,"iv":1,"cloudID":1}},"getUserProfile":{"object":{"lang":["en","zh_CN","zh_TW"],"desc":1},"success":{"userInfo":1,"rawData":1,"signature":1,"encryptedData":1,"iv":1,"cloudID":1}},"requestPayment":{"object":{"timeStamp":1,"nonceStr":1,"package":1,"signType":["MD5","HMAC-SHA256","RSA"],"paySign":1},"success":{}},"requestOrderPayment":{},"requestSubscribeMessage":{"object":{"tmplIds":1},"success":{"errMsg":1,"TEMPLATE_ID":1}},"getWeRunData":{"object":{},"success":{"encryptedData":1,"iv":1,"cloudID":1}},"getPerformance":{},"onMemoryWarning":{"callback":{"level":["5","10","15"]}},"offMemoryWarning":{},"reportPerformance":{},"reportAnalytics":{},"reportMonitor":{},"getBackgroundFetchData":{"object":{"fetchType":1},"success":{}},"onBackgroundFetchData":{"callback":{"fetchType":1,"fetchedData":1,"timeStamp":1}},"setBackgroundFetchToken":{"object":{"token":1},"success":{}},"getBackgroundFetchToken":{"object":{},"success":{}},"createAnimation":{"object":{"duration":1,"timingFunction":["linear","ease","ease-in","ease-in-out","ease-out","step-start","step-end"],"delay":1,"transformOrigin":1}},"enableAlertBeforeUnload":{"object":{"message":1},"success":{}},"disableAlertBeforeUnload":{"object":{},"success":{}},"getMenuButtonBoundingClientRect":{},"getSelectedTextRange":{"object":{},"success":{"start":1,"end":1}},"hideKeyboard":{"object":{},"success":{}},"showModal":{"object":{"title":1,"content":1,"showCancel":1,"cancelText":1,"cancelColor":1,"confirmText":1,"confirmColor":1},"success":{"content":1,"confirm":1,"cancel":1}},"showToast":{"object":{"title":1,"icon":["success","error","loading","none"],"image":1,"duration":1,"mask":1},"success":{}},"hideToast":{"object":{},"success":{}},"showLoading":{"object":{"title":1,"mask":1},"success":{}},"hideLoading":{"object":{},"success":{}},"showActionSheet":{"object":{"alertText":1,"itemList":1,"itemColor":1},"success":{"tapIndex":1}},"onKeyboardHeightChange":{"callback":{"height":1}},"offKeyboardHeightChange":{},"pageScrollTo":{"object":{"scrollTop":1,"duration":1,"selector":1},"success":{}},"startPullDownRefresh":{"object":{},"success":{}},"stopPullDownRefresh":{"object":{},"success":{}},"onWindowResize":{"callback":{"size":["windowWidth","windowHeight"]}},"offWindowResize":{"callback":{}},"setBackgroundColor":{"object":{"backgroundColor":1,"backgroundColorTop":1,"backgroundColorBottom":1},"success":{}},"setBackgroundTextStyle":{"object":{"textStyle":["dark","light"]},"success":{}},"setWindowSize":{"object":{"width":1,"height":1},"success":{}},"setTabBarBadge":{"object":{"index":1,"text":1},"success":{}},"removeTabBarBadge":{"object":{"index":1},"success":{}},"showTabBarRedDot":{"object":{"index":1},"success":{}},"hideTabBarRedDot":{"object":{"index":1},"success":{}},"showTabBar":{"object":{"animation":1},"success":{}},"hideTabBar":{"object":{"animation":1},"success":{}},"setTabBarStyle":{"object":{"color":1,"selectedColor":1,"backgroundColor":1,"borderStyle":1},"success":{}},"setTabBarItem":{"object":{"index":1,"text":1,"iconPath":1,"selectedIconPath":1},"success":{}},"setTopBarText":{"object":{"text":1},"success":{}},"getUpdateManager":{},"updateWeChatApp":{"object":{},"success":{}},"createWorker":{},"saveFile":{"object":{"tempFilePath":1},"success":{"savedFilePath":1}},"openDocument":{"object":{"filePath":1,"showMenu":1,"fileType":["doc","docx","xls","xlsx","ppt","pptx","pdf"]},"success":{}},"getSavedFileList":{"object":{},"success":{"fileList":1}},"getSavedFileInfo":{"object":{"filePath":1},"success":{"size":1,"createTime":1}},"removeSavedFile":{"object":{"filePath":1},"success":{}},"getFileInfo":{"object":{"filePath":1,"digestAlgorithm":["md5","sha1"]},"success":{"size":1,"digest":1}},"getFileSystemManager":{},"saveFileToDisk":{"object":{"filePath":1},"success":{}},"getStorage":{"object":{"key":1},"success":{"data":1}},"getStorageSync":{},"setStorage":{"object":{"key":1,"data":1},"success":{}},"setStorageSync":{},"removeStorage":{"object":{"key":1},"success":{}},"removeStorageSync":{},"clearStorage":{"object":{},"success":{}},"clearStorageSync":{},"getStorageInfo":{"object":{},"success":{"keys":1,"currentSize":1,"limitSize":1}},"getStorageInfoSync":{"return":{"keys":1,"currentSize":1,"limitSize":1}},"createUDPSocket":{},"authorizeForMiniProgram":{"object":{"scope":["scope.record","scope.writePhotosAlbum","scope.camera"]},"success":{}},"canIUse":{},"closeBLEConnection":{"object":{"deviceId":1},"success":{}},"closeBluetoothAdapter":{"object":{},"success":{}},"createBLEConnection":{"object":{"deviceId":1,"timeout":1},"success":{}},"getBLEDeviceCharacteristics":{"object":{"deviceId":1,"serviceId":1},"success":{"characteristics":1}},"getBLEDeviceRSSI":{"object":{"deviceId":1},"success":{"RSSI":1}},"getBLEDeviceServices":{"object":{"deviceId":1},"success":{"services":1}},"getBluetoothAdapterState":{"object":{},"success":{"discovering":1,"available":1}},"getBluetoothDevices":{"object":{},"success":{"devices":1}},"getConnectedBluetoothDevices":{"object":{"services":1},"success":{"devices":1}},"makeBluetoothPair":{"object":{"deviceId":1,"pin":1,"timeout":1},"success":{}},"notifyBLECharacteristicValueChange":{"object":{"deviceId":1,"serviceId":1,"characteristicId":1,"state":1},"success":{}},"onBLECharacteristicValueChange":{"callback":{"deviceId":1,"serviceId":1,"characteristicId":1,"value":1}},"offBLECharacteristicValueChange":{},"onBLEConnectionStateChange":{"callback":{"deviceId":1,"connected":1}},"offBLEConnectionStateChange":{},"onBluetoothAdapterStateChange":{"callback":{"available":1,"discovering":1}},"offBluetoothAdapterStateChange":{},"onBluetoothDeviceFound":{"callback":{"devices":1}},"offBluetoothDeviceFound":{},"openBluetoothAdapter":{"object":{"mode":["central","peripheral"]},"success":{}},"readBLECharacteristicValue":{"object":{"deviceId":1,"serviceId":1,"characteristicId":1},"success":{}},"setBLEMTU":{"object":{"deviceId":1,"mtu":1},"success":{}},"startBluetoothDevicesDiscovery":{"object":{"services":1,"allowDuplicatesKey":1,"interval":1,"powerLevel":["low","medium","high"]},"success":{}},"stopBluetoothDevicesDiscovery":{"object":{},"success":{}},"writeBLECharacteristicValue":{"object":{"deviceId":1,"serviceId":1,"characteristicId":1,"value":1},"success":{}},"getHCEState":{"object":{},"success":{}},"getNFCAdapter":{},"onHCEMessage":{"callback":{"messageType":["1","2"],"data":1,"reason":1}},"offHCEMessage":{},"sendHCEMessage":{"object":{"data":1},"success":{}},"startHCE":{"object":{"aid_list":1},"success":{}},"stopHCE":{"object":{},"success":{}},"getScreenBrightness":{"object":{},"success":{"value":1}},"onUserCaptureScreen":{"callback":{}},"offUserCaptureScreen":{},"setKeepScreenOn":{"object":{"keepScreenOn":1},"success":{}},"setScreenBrightness":{"object":{"value":1},"success":{}},"connectWifi":{"object":{"SSID":1,"BSSID":1,"password":1,"maunal":1},"success":{}},"getConnectedWifi":{"object":{},"success":{"wifi":1}},"getWifiList":{"object":{},"success":{}},"onGetWifiList":{"callback":{"wifiList":1}},"offGetWifiList":{},"onWifiConnected":{"callback":{"wifi":1}},"offWifiConnected":{},"setWifiList":{"object":{"wifiList":1},"success":{}},"startWifi":{"object":{},"success":{}},"stopWifi":{"object":{},"success":{}},"getBackgroundAudioManager":{},"getRecorderManager":{},"getBackgroundAudioPlayerState":{"object":{},"success":{"duration":1,"currentPosition":1,"status":["0","1","2"],"downloadPercent":1,"dataUrl":1}},"playBackgroundAudio":{"object":{"dataUrl":1,"title":1,"coverImgUrl":1},"success":{}},"pauseBackgroundAudio":{"object":{},"success":{}},"seekBackgroundAudio":{"object":{"position":1},"success":{}},"stopBackgroundAudio":{"object":{},"success":{}},"onBackgroundAudioPlay":{"callback":{}},"onBackgroundAudioPause":{"callback":{}},"onBackgroundAudioStop":{"callback":{}},"getAvailableAudioSources":{"object":{},"success":{"audioSources":["auto","buildInMic","headsetMic","mic","camcorder","voice_communication","voice_recognition"]}},"startRecord":{"object":{},"success":{"tempFilePath":1}},"stopRecord":{"object":{},"success":{}},"setInnerAudioOption":{"object":{"mixWithOther":1,"obeyMuteSwitch":1,"speakerOn":1},"success":{}},"playVoice":{"object":{"filePath":1,"duration":1},"success":{}},"pauseVoice":{"object":{},"success":{}},"stopVoice":{"object":{},"success":{}},"connectSocket":{"object":{"url":1,"header":1,"protocols":1,"tcpNoDelay":1,"perMessageDeflate":1,"timeout":1},"success":{}},"closeSocket":{"object":{"code":1,"reason":1},"success":{}},"sendSocketMessage":{"object":{"data":1},"success":{}},"onSocketOpen":{"callback":{"header":1}},"onSocketClose":{"callback":{"code":1,"reason":1}},"onSocketMessage":{"callback":{"data":1}},"onSocketError":{"callback":{"errMsg":1}},"addFileToFavorites":{"object":{"filePath":1,"fileName":1},"success":{}},"addVideoToFavorites":{"object":{"videoPath":1,"thumbPath":1},"success":{}},"showRedPackage":{"object":{"url":1},"success":{}},"getSetting":{"object":{"withSubscriptions":1},"success":{"authSetting":1,"subscriptionsSetting":1,"miniprogramAuthSetting":1}},"openSetting":{"object":{"withSubscriptions":1},"success":{"authSetting":1,"subscriptionsSetting":1}},"authPrivateMessage":{"object":{"shareTicket":1},"success":{"errMsg":1,"valid":1,"encryptedData":1,"iv":1}},"getShareInfo":{"object":{"shareTicket":1,"timeout":1},"success":{"errMsg":1,"encryptedData":1,"iv":1,"cloudID":1}},"hideShareMenu":{"object":{"menus":1},"success":{}},"shareFileMessage":{"object":{"filePath":1,"fileName":1},"success":{}},"shareVideoMessage":{"object":{"videoPath":1,"thumbPath":1},"success":{}},"showShareImageMenu":{"object":{"path":1},"success":{}},"showShareMenu":{"object":{"withShareTicket":1,"menus":1},"success":{}},"updateShareMenu":{"object":{"withShareTicket":1,"isUpdatableMessage":1,"activityId":1,"toDoActivityId":1,"templateInfo":1,"isPrivateMessage":1},"success":{}},"checkIsSoterEnrolledInDevice":{"object":{"checkAuthMode":["fingerPrint","facial","speech"]},"success":{"isEnrolled":1,"errMsg":1}},"checkIsSupportSoterAuthentication":{"object":{},"success":{"supportMode":["fingerPrint","facial","speech"]}},"startSoterAuthentication":{"object":{"requestAuthModes":["fingerPrint","facial","speech"],"challenge":1,"authContent":1},"success":{"authMode":1,"resultJSON":1,"resultJSONSignature":1,"errCode":1,"errMsg":1}},"shareToWeRun":{"object":{"recordList":1},"success":{}},"navigateBackMiniProgram":{"object":{"extraData":1},"success":{}},"navigateToMiniProgram":{"object":{"appId":1,"path":1,"extraData":1,"envVersion":["develop","trial","release"]},"success":{}},"setNavigationBarTitle":{"object":{"title":1},"success":{}},"showNavigationBarLoading":{"object":{},"success":{}},"hideNavigationBarLoading":{"object":{},"success":{}},"hideHomeButton":{"object":{},"success":{}},"setNavigationBarColor":{"object":{"frontColor":1,"backgroundColor":1,"animation":["duration","timingFunc"]},"success":{}},"redirectTo":{"object":{"url":1},"success":{}},"reLaunch":{"object":{"url":1},"success":{}},"navigateTo":{"object":{"url":1,"events":1},"success":{"eventChannel":1}},"switchTab":{"object":{"url":1},"success":{}},"navigateBack":{"object":{"delta":1},"success":{}},"createBLEPeripheralServer":{"object":{},"success":{"server":1}},"onBLEPeripheralConnectionStateChanged":{"callback":{"deviceId":1,"serverId":1,"connected":1}},"offBLEPeripheralConnectionStateChanged":{"callback":{}},"createMediaAudioPlayer":{},"createRewardedVideoAd":{"object":{"adUnitId":1,"multiton":1}}}}');var vp=c(8329);const Ap=(0,Oc.Z)("removeUserCloudStorage","webapi_removeselfuserstorage",{},{},(({keyList:e})=>({key:e})),(e=>(delete e.rawData,e))),bp=(0,Oc.Z)("setUserCloudStorage","webapi_setselfuserstorage",{},{},(({KVDataList:e=[]})=>{const t={kv_list:e};return(0,O.jn)(oe.Z.disableSetUserStorageFromMiniProgram)&&(t.disable_set_user_storage_from_miniprogram=oe.Z.disableSetUserStorageFromMiniProgram),t}),(e=>(delete e.rawData,e)));var wp=c(8010),Cp=c(6597);const Ip=()=>{let e={};return(0,u.IN)("getPublicLibVersion",{complete:t=>{t.version?e=t.version:(e=t,delete e.errMsg)}}),e},Ep=(e={})=>{(0,u.r3)("setEnableDebug",e,{enableDebug:!0})&&((0,u.IN)("setEnableDebug",e,{}),e.enableDebug&&console.warn("已通过 wx.setEnableDebug 打开调试"))};var Sp=c(4212);const Tp={debug(){},log(){},info(){},warn(){},error(){}};oe.Z.onReady((()=>{}));const xp="undefined"!=typeof __initHelper&&1===__initHelper,kp=function(){try{return ap.cF.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return Tp.error("accessSync fail",e,arguments),{errMsg:e.message||""}}},Pp=function(){try{return ap.gj.apply(this,arguments)}catch(e){return Tp.error("renameSync fail",e,arguments),{errMsg:e.message||""}}},Dp=function(){try{return{stat:ap.dJ.apply(this,arguments),errMsg:"statSync:ok"}}catch(e){return Tp.error("statSync fail",e,arguments),{errMsg:e.message||""}}},Op=function(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`},Np=function(e){"string"!=typeof e&&(e+="");let t,n,r=0;for(t=0;t<e.length;t++)n=e.charCodeAt(t),n<127?r+=1:n>=128&&n<=2047?r+=2:n>=2048&&n<=65535&&(r+=3);return r};let Rp,Mp,Lp=!1;const Bp=102400;let Fp,Wp=[];const jp={lastLogNum:1,lastLogSize:0};let Up=!1,Vp=!1,Gp=!1;const $p={},Hp=e=>Mp+"log"+e,Zp=(0,h.Hw)((e=>kp(e).errMsg.indexOf("accessSync:ok")>=0)),Qp=(0,h.Hw)((function(e){const t=kp(e).errMsg;return t.indexOf("fail")>=0&&(t.indexOf("access denied")>=0||t.indexOf("no permission")>=0)})),Yp=(0,h.Hw)((e=>{if(Tp.info(`initLog[1][isRemoteDebugMode=${xp}, wxConfigReady=${Lp}, isLogInit=${Up}]`),xp||!Lp||Up)return void(e&&e());if(Tp.info("initLog[2]"),Rp=oe.Z&&"devtools"===oe.Z.platform,Mp=(oe.Z&&oe.Z.env.USER_DATA_PATH||(Rp?"http://usr":"wxfile://usr"))+"/miniprogramLog/",!Zp(Mp))return Tp.info(`initLog[3][mkdirSync][usrLogDir=${Mp}]`),function(){try{ap.ho.apply(this,arguments)}catch(e){return Tp.error("mkdirSync fail",e,arguments),{errMsg:e.message||""}}}(Mp),Up=!0,Gp=Qp(Mp),e&&e(),Gp?void Tp.error("hasNoPermission[1]"):void 0;if(Gp=Qp(Mp),Gp)return Up=!0,void Tp.error("hasNoPermission[2]");let t=1;for(;t<=5&&Zp(Hp(t));)$p[t]=!0,jp.lastLogNum=t,t++;Tp.info(`[before statSync] path=${Hp(jp.lastLogNum)}`);const n=Dp(Hp(jp.lastLogNum));n.stat&&(jp.lastLogSize=n.stat.size),Tp.info("[before isLogInit changeinto true"),Up=!0,e&&e()})),zp=(0,h.Hw)((()=>{Yp((()=>{if(Tp.warn(`[after initLog] isLogInit=${Up}; isRemoteDebugMode=${xp}; hasNoPermission=${Gp}; CACHE_LOG.length=${Wp.length}; needDeleteOldLog=${Vp}`),!Up)return;if(xp||Gp||!Wp.length||Vp)return;const e=[];let t=0,n=0;for(;n<Wp.length;n++){const r=Np(Wp[n]);if(Tp.warn(`[logItemSize=${r}][currentSize=${t}][MAX_LOG_SIZE=102400]`),r>Bp)console.warn("[wx.log warn] each log size exceed 100KB will be discard."),Tp.warn(`submitLog[3],logItemSize=${r},MAX_LOG_SIZE=102400`);else{if(t+r>Bp)break;t+=r,e.push(Wp[n])}}if(Tp.warn(`[reportLogList.length=${e.length}]`),e.length){if(jp.lastLogSize+t>1048576){if(jp.lastLogNum+1>=6)return Vp=!0,Tp.warn("submitLog[4][deleteOldLog]","logConfig=",jp,",MAX_FILE_COUNT=",4),void setTimeout((function(){Tp.info(`deleteOldLog[1],unlinkSync,logPath(1)=${Hp(1)}`),function(){try{ap.yX.apply(this,arguments),Tp.info("unlinkSync success",arguments)}catch(e){return Tp.error("unlinkSync fail",e,arguments),{errMsg:e.message||""}}}(Hp(1));for(let e=2;e<=5;e++)Tp.info(`deleteOldLog[2],renameSync,logPath(1)=${Hp(1)},logPath(i - 1)=${Hp(e-1)}`),Pp(Hp(e),Hp(e-1));jp.lastLogNum=5,$p[jp.lastLogNum]=!1,jp.lastLogSize=0,Vp=!1}),50);jp.lastLogNum++,jp.lastLogSize=0}n===Wp.length?Wp=[]:Wp.splice(0,n),$p[jp.lastLogNum]||Zp(Hp(jp.lastLogNum))?(Tp.info("submitLog[7],before appendFile, filePath=",Hp(jp.lastLogNum)),(0,ap.aW)({filePath:Hp(jp.lastLogNum),data:(jp.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",fail(e){Tp.error("submitLog[7.1], appendFile fail",e)},success(e){Tp.info("submitLog[7.2], appendFile success",e)}})):(Tp.info("submitLog[5], before writeFile, filePath=",Hp(jp.lastLogNum)),(0,ap.NC)({filePath:Hp(jp.lastLogNum),data:(jp.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",success(e){Tp.info("submitLog[5.1], writeFile success",e)},fail(e){console.log("log writeFile err "+e.errMsg),Tp.error("submitLog[6],writeFile fail",e)}})),jp.lastLogSize+=t}}))}));function qp(){Fp&&clearTimeout(Fp),Fp=setTimeout((()=>{zp(),Fp=null,qp()}),2e3)}const Jp={logApiInvoke:!0};function Kp(e={}){return"number"==typeof e.level&&(Jp.level=e.level),1===Jp.level?Jp.logApiInvoke=!1:0===Jp.level&&(Jp.logApiInvoke=!0),Jp}["info","debug","log","warn"].forEach((e=>{Jp[e]=function(){if(xp||Gp||!Lp||!arguments.length)return;if(!jp)return;const t=[];for(let e=0;e<arguments.length;e++)"number"==typeof arguments[e]||"string"==typeof arguments[e]?t.push(arguments[e]):t.push(JSON.stringify(arguments[e]));t.splice(0,0,Op(new Date),`[${e}]`),Wp.push(t.join(" "))}})),Jp._getUserLog=function(){const e={};for(let t=1;t<=5;t++)e["log"+t]=Dp(Hp(t));return e},Jp.privateSystemLog=(...e)=>{Lp&&7===oe.Z.appType&&void 0!==Reporter&&e&&e.length&&Sp.s.log.apply(Sp.s,e)},oe.Z.onReady((()=>{xp||(Lp=!0,(0,h.Hw)(qp)())})),(0,Bo.J)((()=>{xp||zp()}));const Xp=(0,h.Hw)(Cp.Bx),eh=(0,h.Hw)(Cp.JB);function th(e={}){if(Tp.info(`uploadUserLog[1],logConfig.lastLogNum=${jp.lastLogNum}`,",args=",e),!e.index||e.index>jp.lastLogNum)return Tp.info("uploadUserLog[2]"),void(e.complete&&e.complete());const t="ios"===oe.Z.platform?1:5,n=e.readFileResp||function(){try{return{data:ap.NG.apply(this,arguments),errMsg:"readFileSync:ok"}}catch(e){return Tp.error("readFileSync fail",e,arguments),{errMsg:e.message||""}}}(Hp(e.index),"utf8");if(Tp.info(`uploadUserLog[3],readFileSync=${n.errMsg},index=${e.index},EACH_SLICE=${t}`),n.errMsg.indexOf("readFileSync:ok")>=0&&n.data){const r=n.data.length,o=Math.max(parseInt(r/t,10),1),i=(e.slice-1)*o;Tp.info("uploadUserLog[4]","start=",i,"eachLen=",o,"len=",r,n.data.length);const a=n.data.substr(i,o);if(Tp.info("uploadUserLog[5],content.length=",a&&a.length,",logConfig=",jp),!a)return Tp.info("uploadUserLog[6],uploadUserLogSliceComplete"),Xp({webviewId:e.webviewId,data:{total:jp.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:(0,wi.m4)()}}),e.index++,e.slice=1,e.readFileResp=null,void th(e);Tp.info("uploadUserLog[7], uploadUserLogContent,content.length=",a&&a.length,",logConfig=",jp),Xp({webviewId:e.webviewId,data:{type:"uploadUserLogContent",content:a,index:e.index,slice:e.slice||1,total:jp.lastLogNum,info:1===e.index&&1===e.slice?(0,wi.m4)():null},success(){Tp.info(`uploadUserLog[8] uploadUserLogContent suc, EACH_SLICE=${t}, args.slice=${e.slice}, logConfig.lastLogNum=${jp.lastLogNum}`),e.slice===t?(Xp({webviewId:e.webviewId,data:{total:jp.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:(0,wi.m4)()}}),e.index++,e.slice=1,e.readFileResp=null,th(e)):(e.slice++,e.readFileResp=n,Tp.info("uploadUserLog[9],args=",e),th(e))},fail(t){Tp.error(`uploadUserLog[10] fail,failResp.errMsg=${t.errMsg},args.retry=${e.retry}`),e.retry?Xp({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:t&&t.errMsg,index:e.index,info:(0,wi.m4)()}}):(e.retry=!0,th(e))}})}else Tp.error(`uploadUserLog[11],readFileSync fail=${n.errMsg},index=${e.index}`),Xp({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:n.errMsg,index:e.index,info:(0,wi.m4)()}})}xp||eh((e=>{Tp.info("onH5Data",e,jp),e.data&&"uploadUserLog"===e.data.type&&th({index:1,slice:1,webviewId:e.webviewId})}));const nh=[],rh=[];let oh=~~(+new Date/1e3),ih=0;function ah(e,t,n,r){let o;o="string"==typeof r?r:r?"high":"low",(0,u.IN)("operateRealtimeData",{type:t,content:n,priority:o,id:e},{beforeSuccess(){},beforeFail(e){rh.forEach((t=>t(e)))}})}function sh(){const e=nh.shift();"function"==typeof e&&(e(),ih=+new Date),nh.length&&setTimeout(sh,200)}const ch=(e,t,n)=>{if(1005!==e&&k.gm)return;const r=+new Date,o=oh++;return r-ih>=200&&!nh.length?(ah(o,e,t,n),ih=r):(nh.push((()=>{ah(o,e,t,n)})),setTimeout(sh,200)),o},lh=e=>{k.gm||"function"==typeof e&&rh.push((0,T.Hw)(e))};(0,u.jQ)("onRealtimeDataResponse",(e=>{rh.forEach((t=>t(e)))}));const dh=(0,St.Fr)((0,Ii.Ce)(!1,"GetUploadSetting")),uh=(0,St.Fr)((0,Ii.Ce)(!1,"GetUploadSetting",!0));let ph;const hh={};function fh(e){return e?(hh[e]||(hh[e]=uh({apiName:"GetUploadSetting",reqData:{},pluginId:e})),hh[e]):ph||(ph=dh({apiName:"GetUploadSetting",reqData:{}}),ph)}let gh=+new Date;const _h=(0,h.Hw)((e=>mh(e).errMsg.indexOf("accessSync:ok")>=0)),mh=function(){try{return ap.cF.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return{errMsg:e.message||""}}},yh=(0,St.Fr)((0,Ii.Ce)(!1,"UploadByApi")),vh=(0,St.Fr)((0,Ii.Ce)(!1,"UploadByApi",!0)),Ah={DEBUG:1,INFO:2,WARN:4,ERROR:8},bh=1,wh=2,Ch=1;let Ih="",Eh=!1;function Sh(e){Eh?e&&e():(Eh=!0,oe.Z.onReady((()=>{Ih=oe.Z.accountInfo.appId,e&&e()})))}const Th=function(e,t){if("string"!=typeof e)return 0;let n,r,o,i=0;if("utf-16"===(t=t?t.toLowerCase():"utf8")||"utf16"===t)for(r=0,o=e.length;r<o;r++)n=e.charCodeAt(r),i+=n<=65535?2:4;else for(r=0,o=e.length;r<o;r++)n=e.charCodeAt(r),i+=n<=127?1:n<=2047?2:n<=65535?3:4;return i};function xh(){if(void 0!==i){const e=i.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}if((0,St.aI)())return"index"}let kh;function Ph(){kh&&(kh=clearTimeout(kh))}let Dh=!1;let Oh="";class Nh{constructor(e={}){this.systemInfo=(0,wi.m4)(),this.opt={},this.opt.level=Ah.INFO,this.mode=e.mode||"normal",this.pluginId=e.pluginId,this.pluginVersion=e.pluginVersion,this.timerId=null,this.isExceedTodayUploadLogCount=!1,this.opt.isClientReport=!!e.isClientReport,this.msgList={},this.filterList={},this.kvFilterList={},this.sizeList={},this.levelList={},this._uploadList=[],this._logInfo={},this._logInfo.level=0,this._logInfo.version=2,this._logInfo.source=Ch,this._logInfo.platform="ios"===this.systemInfo.platform?wh:bh,this._logInfo.libraryVersion=this.systemInfo.SDKVersion,this._logInfo.clientVersion=this.systemInfo.version,this.exceedSizeList={},this.structSizeList={},this.historyLog={},this.retryLogList={},this.MaxSize=10240,this.MaxLogCount=500,this._logCacheBeforeLogConfig=[],setTimeout((()=>{k.gm||this._getLogConfig()}),300),Sh((()=>{(0,St.aI)()&&this.cyclelyUploadInGame()})),this.uploadCount=0,this.failCount=0,this.opt.isClientReport&&(this.MaxSize=5120,this.MaxLogCount=200,(0,gc.getNetworkType)({success(e){Oh=e.networkType}}),(0,gc.onNetworkStatusChange)((e=>{Oh=e.networkType})),lh((e=>{this.onRealtimeDataResponse(e)})))}cyclelyUploadInGame(){setTimeout((()=>{Fh(),this.cyclelyUploadInGame()}),6e5)}onRealtimeDataResponse(e){if(this.uploadCount++,0!==e.errcode&&("wifi"!==Oh&&"4g"!==Oh||(this.failCount++,this.uploadCount>=5&&this.failCount/this.uploadCount>=.6&&(Dh=!0,this.failCount=0,this.uploadCount=0,setTimeout((()=>{Dh=!1}),6e4))),e.idList&&e.idList.length)){let t=!1;const n={};let r=!1;const o={};e.idList.forEach((i=>{const a=this.historyLog[i];a&&(a.id,a.url,Reporter.reportKeyValue({key:"UserLogFail",value:`,${Oh},${e.errcode},${parseInt(Date.now()/1e3,10)},${a.url},${a.libraryVersion},${Ih}`}),t=!0,delete this.historyLog[i],n[i]=a);const s=this.retryLogList[i];s&&(s.id,s.url,o[i]=s,delete this.retryLogList[i],r=!0)})),t&&(this.retryLogList=n,this.failRetry(n)),r&&this.saveToFile(o)}}_getLogConfig(e,t){return fh(this.pluginId).then((n=>{if(n.rawData){try{const r=JSON.parse(n.rawData);this.MaxSize=1024*r.MaxLogSize,r.MaxLogCount&&(this.MaxLogCount=r.MaxLogCount),this._logInfo.id=r.UserUin,r.OpenId&&(this.traceid=`${r.OpenId}_${parseInt(Date.now()/1e3,10)}`),r.Debug&&r.Debug.MaxSize&&r.Debug.ExpireTime>Date.now()/1e3&&(this.isDebugMode=!0,this.MaxSize=1024*r.Debug.MaxSize,this.opt.level=Ah.DEBUG,r.Debug.MaxLogCount&&(this.MaxLogCount=r.Debug.MaxLogCount));const o=this._logCacheBeforeLogConfig||[];this._logCacheBeforeLogConfig=[],o.forEach((e=>{this._baseLog(e.key,e.path,...e.args)})),this._getConfigFail=!1,e&&this.upload(t),(0,St.aI)()||function(e){if(Ph(),e="number"!=typeof e?3e5:e,(e=Math.max(e,5e3))>0){const t=()=>{Ph(),kh=setTimeout((()=>{Fh(),t()}),e)};t()}}(r.ReportInterval)}catch(e){this._hasNoPermission=!0,this._logCacheBeforeLogConfig=[]}setTimeout((()=>{this.tryUploadFailLog()}),100)}else this._hasNoPermission=!0,this._logCacheBeforeLogConfig=[]})).catch((e=>{e.errMsg&&e.errMsg.indexOf("fail invalid scope")>=0&&(this._hasNoPermission=!0,this._logCacheBeforeLogConfig=[]),this._getConfigFail=!0}))}_config(e={}){e.mode&&(this.mode=e.mode)}_checkSize(e,t){let n=0;if(!t||!t.length)return!0;if(!(e=this.pluginId||e||xh()))return!0;t.forEach((e=>{n+=Th(e)})),this.sizeList[e]=this.sizeList[e]||0;const r=this.sizeList[e];return r+n>this.MaxSize?n:(this.sizeList[e]=r+n,!0)}_getLogValue(e){const t=typeof e;let n,r="";if("function"===t&&(n="function(){}"),"undefined"===t)n="<Undefined>";else if("object"===t){r=Object.prototype.toString.call(e),r=r.replace(/^\[object |\]$/g,"");try{n="Error"===r?e.stack:JSON.stringify(e)}catch(e){r="Error",n=e.message}}else e+="";return n||e}_baseLog(e,t,...n){if(!n.length)return;if(this._hasNoPermission)return;if(!this._logInfo.id)return void this._logCacheBeforeLogConfig.push({key:e,path:t,args:n});let r,o,i,a;"object"==typeof e?(r=e.id,o=e.name,i=e.level,a=e.time):(r="__DEFAULT__",o="__DEFAULT__",i=e,a=+new Date);const s=Ah[i.toUpperCase()]||0;if(s<this.opt.level)return;let c,l;if(t=this.pluginId||t||xh(),this.structSizeList[t]=this.structSizeList[t]||0,"kv"===this.mode){const[e,i]=n;if(!e||"string"!=typeof e)return;const s=this._getLogValue(i);l=this._checkSize(t,[e,s]),c=[r,a,o,e,s]}else c=n.map(this._getLogValue),l=this._checkSize(t,c),this.structSizeList[t]+=6+(c.length?3*c.length-1:0);if(!0===l)this._addLogMsg(c,t,s);else{if(this.exceedSizeList[t]=this.exceedSizeList[t]||0,!this.exceedSizeList[t]){const e=[`UserLog:fail Log Size ${l} Exceed.`];"kv"===this.mode&&e.unshift("warning"),this._addLogMsg(e,t,Ah.WARN)}this.exceedSizeList[t]+=l}}_addLogMsg(e,t,n){if(this.isExceedTodayUploadLogCount)return;if(!n)return;if(this._getConfigFail&&this._getConfigRetry)return;const r=this.pluginId||t||xh();if(!r)return;if(this.msgList[r]=this.msgList[r]||[],this.msgList[r].length>=this.MaxLogCount)return void this.MaxLogCount;const o=this.msgList[r][0];if("kv"===this.mode){const[t,o,i,a,s]=e,c=[n,t,o,i,a,s];this.msgList[r].push(c)}else{const t=new Date,i=Math.ceil(+t/1e3),a=[o?i-o[0]:i,e,n,t.getMilliseconds()];if(!this.msgList[r].length){const e=(new Date).getTimezoneOffset();a.push(e)}this.msgList[r].push(a)}this.levelList[r]=this.levelList[r]||0,this.levelList[r]|=n}OperateWxUploadLog(e,t){if(this.isExceedTodayUploadLogCount)return;const n=e.structSize||0;delete e.structSize;const r=e.rawSize||0;if(delete e.rawSize,this.opt.isClientReport){const o=this.pluginId?1004:1001;e.url;const i=ch(o,JSON.stringify({interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0,pluginId:this.pluginId||"",pluginVersion:this.pluginVersion||"",appId:Ih}));return this.historyLog[i]=e,Reporter.reportKeyValue({key:"UserLog",value:`,${n+r},${r}${e.timestamp},${e.url},${e.filter1},${Ih}`}),void(t&&t(!0))}return(o={apiName:"UploadByApi",pluginId:this.pluginId,reqData:{interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0}},o.pluginId?vh(o):yh(o)).then((()=>{t&&t(!0)})).catch((e=>{e&&1e4==+e.err_code&&(this.isExceedTodayUploadLogCount=!0),t&&t(!1),this.failCount++}));var o}failRetry(e){this.uploadFailRetryTimerId||(this.uploadFailRetryTimerId=setTimeout((()=>{if(e)for(const t in e)this.historyLog.hasOwnProperty(t)&&this.OperateWxUploadLog(this.historyLog[t])}),3e3))}stat(e){return(e=this.pluginId||e||xh())&&this.sizeList[e]||0}_hasUploadInterval(){return!!this.opt.isClientReport||!(this._isUploading||Date.now()-this._lastUploadTime<1e3)}upload(e){const t=e||xh();if(!(e=this.pluginId||t))return;const n=this.msgList[e]||[];if(!n||!n.length)return;if(!this._hasUploadInterval())return void(this._uploadList.indexOf(t)<0&&this._uploadList.push(t));if(this._getConfigFail||!this._logInfo.id){if(this._getConfigRetry)return;return this._getConfigRetry=!0,void this._getLogConfig(!0,t)}if(!Eh)return void Sh((()=>{Ih&&this.upload(t)}));if(Dh)return;this.msgList[e]=[];const r=this.levelList[e]||Ah.DEBUG;this.levelList[e]=0;const o=this.sizeList[e];this.sizeList[e]=0;const i=this.exceedSizeList[e];this.exceedSizeList[e]=0;const a=this._logInfo;a.level=r,a.rawSize=i+o;const s=this.structSizeList[e]||0;if(a.structSize=s,this.structSizeList[e]=0,this._logInfo.timestamp=Math.ceil(Date.now()/1e3),this._logInfo=Object.assign({},this._logInfo),"kv"===this.mode){const t={},r={};n.forEach((e=>{const[n,o,i,a,s,c]=e,l=n||Ah.DEBUG;r[o]=r[o]||[i,{},l],r[o][1][s]=c,r[o][2]=Math.max(r[o][2],l),t[a]=t[a]||[],-1===t[a].indexOf(r[o])&&t[a].push(r[o])}));const o=this.kvFilterList,i=[];Object.keys(o[e]).forEach((t=>{o[e][t].forEach((e=>{const[n,o]=e;if(r[n]){const e=r[n][1];e.__REALTIME_LOG_TAG__=e.__REALTIME_LOG_TAG__||[],-1===e.__REALTIME_LOG_TAG__.indexOf(o)&&e.__REALTIME_LOG_TAG__.push(o),-1===i.indexOf(o)&&(i.push(o),i.push(`${t}_${o}`))}}))})),a.msg=JSON.stringify(t),a.filter1=[].concat(Object.keys(t),i).join(" "),this.kvFilterList[e]=[]}else a.msg=JSON.stringify(n),a.filter1=this.filterList[e]||"",this.filterList[e]="";Th(a.msg),a.appid=Ih,this.pluginId&&(a.pluginid=this.pluginId),this.pluginVersion&&(a.pluginVersion=this.pluginVersion),"kv"===this.mode&&(a.mode=this.mode),a.url=t,this.traceid&&(a.traceid=this.traceid),a.device=this.systemInfo.model+" "+this.systemInfo.system,this._isUploading=!0,this.OperateWxUploadLog(a,(e=>{this._isUploading=!1,this._lastUploadTime=Date.now(),e&&this._uploadList.length&&(this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout((()=>{this.timerId=null,this.upload(this._uploadList.shift())}),1e3))}))}setFilterMsg(e,t,n){if("string"!=typeof t&&(t=JSON.stringify(t)),Th(t)>2048)return!1;if(e=this.pluginId||e||xh(),"kv"===this.mode&&"object"==typeof n){const r=this.kvFilterList;return r[e]=r[e]||{},r[e][n.name]=[[n.id,t]],!0}return this.filterList[e]=t,!0}addFilterMsg(e,t,n){if("string"!=typeof t&&(t=JSON.stringify(t)),e=this.pluginId||e||xh(),"kv"===this.mode&&"object"==typeof n){const r=this.kvFilterList;return r[e]=r[e]||{},r[e][n.name]=r[e][n.name]||[],void r[e][n.name].push([n.id,t])}const r=this.filterList[e]||"";this.setFilterMsg(e,r+(r?" ":"")+t)}getTraceId(){return this.traceid||""}getFilePath(){const e=(oe.Z&&oe.Z.env.USER_DATA_PATH||(k.gm?"http://usr":"wxfile://usr"))+"/miniprogramLog/",t=e+"realtime.log";return _h(e)||function(){try{ap.ho.apply(this,arguments)}catch(e){return{errMsg:e.message}}}(e),t}getFileContent(e){let t=function(){try{return{data:ap.NG.apply(this,arguments),errMsg:"readFileSync:ok"}}catch(e){return{errMsg:e.message}}}(e,"utf8");try{if(t&&t.data)return t=JSON.parse(t.data),t}catch(e){}return null}saveToFile(e){if(!e)return;const t=this.getFilePath();if(_h(t)){const n=this.getFileContent(t);if(n)for(const t in n)e[t]||(e[t]=n[t])}(0,ap.NC)({filePath:t,data:JSON.stringify(e),encoding:"utf8",fail(e){e.errMsg},success(e){}})}tryUploadFailLog(){const e=this.getFilePath();if(_h(e)){const t=this.getFileContent(e);if(!t)return;for(const e in t)t.hasOwnProperty(e)&&this.OperateWxUploadLog(t[e]);(0,ap.NC)({filePath:e,data:"{}",encoding:"utf8",fail(e){e.errMsg},success(e){}})}}}let Rh=null;const Mh={},Lh=e=>e?Mh[e]:Rh,Bh=(e={},t,n)=>{let r="",o={stat(){if(k.gm)return;const e=Lh(t);return e?e.stat(r):void 0},setFilterMsg(e){if(k.gm)return;const n=Lh(t);return n?n.setFilterMsg(r,e):void 0},addFilterMsg(e){if(k.gm)return;const n=Lh(t);return n?n.addFilterMsg(r,e):void 0},in(e){(0,St.aI)()?r="index":e&&e.route&&(r=e.route)},tag(e){const n=gh++,o=+new Date;return{debug(i,a){if(k.gm)return;const s=Lh(t);return s?s._baseLog({id:n,name:e,time:o,level:"debug"},r,i,a):void 0},info(i,a){if(k.gm)return;const s=Lh(t);return s?s._baseLog({id:n,name:e,time:o,level:"info"},r,i,a):void 0},warn(i,a){if(k.gm)return;const s=Lh(t);return s?s._baseLog({id:n,name:e,time:o,level:"warn"},r,i,a):void 0},error(i,a){if(k.gm)return;const s=Lh(t);return s?s._baseLog({id:n,name:e,time:o,level:"error"},r,i,a):void 0},setFilterMsg(o){if(k.gm)return;const i=Lh(t);return i?i.setFilterMsg(r,o,{name:e,id:n}):void 0},addFilterMsg(o){if(k.gm)return;const i=Lh(t);return i?i.addFilterMsg(r,o,{name:e,id:n}):void 0}}}};return o=t?Object.assign(o,{config(){},debug(){},info(){},warn(){},error(){}}):Object.assign(o,{config(e){if(k.gm||"object"!=typeof e)return;const n=Lh(t);n&&n._config(e)},debug(...e){if(k.gm)return;const n=Lh(t);return n?n._baseLog("debug",r,...e):void 0},info(...e){if(k.gm)return;const n=Lh(t);return n?n._baseLog("info",r,...e):void 0},warn(...e){if(k.gm)return;const n=Lh(t);return n?n._baseLog("warn",r,...e):void 0},error(...e){if(k.gm)return;const n=Lh(t);return n?n._baseLog("error",r,...e):void 0}}),Lh(t)||((e,t)=>{e?Mh[e]=t:Rh=t})(t,new Nh({isClientReport:e.isClientReport,pluginId:t,pluginVersion:n,mode:t?"kv":"normal"})),o},Fh=e=>{if(k.gm)return;const t=(()=>{const e=[];return Rh&&e.push(Rh),Object.keys(Mh).forEach((t=>e.push(Mh[t]))),e})();t.length&&t.forEach((t=>{try{t.upload(e)}catch(e){}}))};let Wh;(0,Bo.J)((e=>{k.gm||e&&8===e.targetAction||Eh&&(Wh&&clearTimeout(Wh),Wh=setTimeout((()=>{if(void 0!==i){i.getCurrentPagesByDomain("").forEach((e=>{Fh(e.route)}))}else(0,St.aI)()&&Fh();Wh=null}),10))}));const jh=function(e){const t=(0,hr.hI)(this);(0,u.qu)(t)("chooseShareGroup",e)};let Uh;const Vh=(0,gr.s)("memoryWarning"),Gh=Vh.onMethod,$h=Vh.offMethod;(0,u.jQ)("onMemoryWarningReceive",((e={})=>{if(k.wZ&&e.level<10)return;Vh.getGlobalListeners().length?Vh.emitGlobal(e):"function"==typeof Uh&&Uh(e)}));const Hh=[],Zh="undefined"!=typeof document;let Qh=!1;void 0!==__wxConfig&&(!__wxConfig.platform&&Zh?window.navigator.userAgent.toLowerCase().indexOf("wechatdevtools")>=0&&(Qh=!0):"devtools"===__wxConfig.platform&&(Qh=!0));const Yh=Qh?(e,t,n={})=>{const r={category:e,name:t,timeStamp:"undefined"!=typeof performance&&performance.now?performance.timing.navigationStart+performance.now():Date.now(),phase:"B",args:JSON.stringify(n)};Hh.push(r),void 0!==WeixinJSBridge&&"function"==typeof WeixinJSBridge.invoke&&WeixinJSBridge.invoke("traceEvent",{events:[r]})}:()=>{},zh=Qh?e=>{const t=Hh.pop();t?(t.args=e?t.args:JSON.stringify(e),t.timeStamp="undefined"!=typeof performance&&performance.now?performance.timing.navigationStart+performance.now():Date.now(),t.phase="E",void 0!==WeixinJSBridge&&"function"==typeof WeixinJSBridge.invoke&&WeixinJSBridge.invoke("traceEvent",{events:[t]})):console.error("[Perf] Call traceBeginEvent() before traceEndEvent().")}:()=>{};let qh=null,Jh=null,Kh=null,Xh=null;const ef=new Promise((e=>{Xh=e}));oe.Z.onReady((()=>{const e=e=>{Jh=e,Kh=oe.Z,qh=(0,wi.m4)(),Xh()};new Promise(((e,t)=>{(0,gc.getNetworkType)({success(t){e(t.networkType)},fail(e){t(e)}})})).then((t=>{e(t)})).catch((()=>{e(null)}))}));const tf=e=>{Kh?e():ef.then(e)},nf={enabled:!0,sampleRate:1,batchTime:300,legacyReportEnabled:!0,bufferCapacity:1e3,userUin:0};let rf,of=!1;function af(e,t){if(0===t)return!1;const n=Math.ceil(1/t);return e%n===parseInt(Date.now()/864e5,10)%n}function sf(){const e=void 0!==i?i.getCurrentPagesByDomain(""):[],t=qh&&qh.brand,n=qh&&qh.model,r=qh&&qh.platform,o=qh&&qh.system,a=Kh&&Kh.appLaunchInfo&&Kh.appLaunchInfo.scene,s=Kh&&oe.Z.envVersion,c=qh&&qh.version,l=qh&&qh.SDKVersion;let d=e.length>0&&e[e.length-1].__route__||"";return d=function(e){if(!e)return"";const t=e.indexOf("?");return t>-1?e.substring(0,t):e}(d),{platform:r,system:o,path:d,scene:a,brand:t,model:n,networkType:Jh,envType:s,clientVersion:c,sdkVersion:l}}function cf(e,t,n=[],r){const i=Object.create(null);i.key=e,i.value=t;const a=sf();let s="";r?(s=r.pluginId,a.pluginCustomVersion=r.customVersion,a.path=o.convertRouteToComponentAlias(a.path),a.path.indexOf("plugin")<0&&(a.path="")):s=Kh.accountInfo&&Kh.accountInfo.appId,function({appId:e,metrics:t={},dimensions:n=[]}={}){let r="";n.length>0&&(r="_"+n.join("_"));const o=sf(),i=`${t.key}_${o.networkType}_${o.scene}${r}`;if(Object.keys(df).length>nf.bufferCapacity)return;df[i]||(df[i]={appId:e,key:t.key,valueSum:0,count:0,baseInfo:o,dimensions:n});const a=df[i];a&&(a.valueSum+=t.value,a.count++)}({appId:s,metrics:i,dimensions:n}),rf&&rf.then((()=>{"release"===oe.Z.envVersion&&1!==nf.sampleRate&&nf.userUin&&!af(nf.userUin,nf.sampleRate)||nf.enabled&&nf.legacyReportEnabled&&_f({appId:s,metrics:i,baseInfo:a,interfaces:"log_20000_userdefine",busid:"b_wxg_wxa_miniprogram_performance"})}))}const lf=(0,St.Fr)((0,Ii.Ce)(!1,"UploadByApi")),df={};function uf(){const e=Object.keys(df);if(e.length<=0)return;if(!nf.enabled)return;if("release"===oe.Z.envVersion&&1!==nf.sampleRate&&nf.userUin&&!af(nf.userUin,nf.sampleRate))return;const t="develop"===oe.Z.envVersion||"trial"===oe.Z.envVersion;for(const n of e){const e=df[n],r={key:e.key,value:e.valueSum/e.count,num:e.count},o=e.baseInfo,i=e.dimensions;t?i.length>0?mf({appId:e.appId,metrics:r,baseInfo:o,interfaces:"log_20004",busid:"b_wxg_wxa_miniprogram_performance",dimensions:i}):mf({appId:e.appId,metrics:r,baseInfo:o,interfaces:"log_20002",busid:"b_wxg_wxa_miniprogram_performance"}):i.length>0?_f({appId:e.appId,metrics:r,baseInfo:o,interfaces:"log_20003",busid:"b_wxg_wxa_miniprogram_performance",dimensions:i}):_f({appId:e.appId,metrics:r,baseInfo:o,interfaces:"log_20001",busid:"b_wxg_wxa_miniprogram_performance"}),delete df[n],Reporter.reportKeyValue({key:"PerfReport",value:[e.appId,o.platform,o.scene,o.brand,o.model,o.networkType,o.envType,r.key,r.value,r.num,parseInt(Date.now()/1e3,10)].join(",")})}}let pf=null;function hf(){const e="develop"===oe.Z.envVersion||"trial"===oe.Z.envVersion?60:nf.batchTime;pf&&clearInterval(pf),pf=setInterval(uf,1e3*e)}let ff=!1;function gf(){ff=!0,tf((()=>{setTimeout(uf,3e4),hf(),(0,Bo.J)((()=>{uf()})),(0,Jo.T)((()=>{hf()}))}))}function _f({appId:e,metrics:t={},baseInfo:n={},interfaces:r="",busid:o="",dimensions:i}={}){const a=JSON.stringify({appId:e,base:n,metrics:t,dimensions:i,time:parseInt(Date.now()/1e3,10)}),s=JSON.stringify({interface:r,busid:o,data:a});ch(1002,s,!0)}function mf({appId:e,metrics:t={},baseInfo:n={},interfaces:r="",busid:o="",dimensions:i}={}){if(!nf.enabled)return;const a=JSON.stringify({appId:e,base:n,metrics:t,dimensions:i,time:parseInt(Date.now()/1e3,10)});lf({apiName:"UploadByApi",reqData:{interface:r,busid:o,data:a}}).catch((()=>{}))}const yf=4294967295;function vf(e,t,n,r){nf.enabled&&(e||"number"==typeof e||console.warn("[reportPerformance] id can not be empty"),t||"number"==typeof t||console.warn("[reportPerformance] value can not be empty"),e=parseFloat(e),t=parseFloat(t),(Number.isNaN(e)||"number"!=typeof e)&&console.warn("[reportPerformance] id should always be type of Number"),e>=0&&e<=yf||console.warn("[reportPerformance] id is out of range, will probably cause report failure"),(Number.isNaN(t)||"number"!=typeof t)&&console.warn("[reportPerformance] id should always be type of Number"),t>=0&&t<=yf?(void 0===n||Array.isArray(n)||(n=[String(n)]),Array.isArray(n)&&(n.length>2&&console.warn("[reportPerformance] expected dimensions length to be less than or equals to 2, but got",n.length),0===(n=n.slice(0,2)).length&&(n[0]="",n[1]=""),1===n.length&&(n[1]=""),n=n.map((e=>e?String(e):"")).map((e=>e.substring(0,256)))),n&&Array.isArray(n)||(n=[]),of||(of=!0,rf=fh().then((e=>{let t;try{t=JSON.parse(e.rawData)}catch(e){}if(t){const e=t.PerformaceGlobalConf,n=t.PerformacePersonalConf;e&&(void 0!==e.PerformanceOldReportOff&&(nf.legacyReportEnabled=!(1===e.PerformanceOldReportOff)),void 0!==e.PerformanceReportMaxNum&&(nf.bufferCapacity=parseInt(e.PerformanceReportMaxNum,10)),void 0!==e.PerformanceMiniprogramlibGatherTime&&(nf.batchTime=60*parseInt(e.PerformanceMiniprogramlibGatherTime,10))),n&&(void 0!==n.PerformanceMiniprogramlibOff&&(nf.enabled=!(1===n.PerformanceMiniprogramlibOff)),void 0!==n.PerformanceMiniprogramlibGatherTime&&(nf.batchTime=60*parseInt(n.PerformanceMiniprogramlibGatherTime,10)),void 0!==n.PerformanceMiniprogramlibSamplingRatio&&(nf.sampleRate=parseInt(n.PerformanceMiniprogramlibSamplingRatio,10)/100)),nf.userUin=t.UserUin,300!==nf.batchTime&&hf()}})).catch((e=>{}))),ff||gf(),tf((()=>{"release"===oe.Z.envVersion&&1!==nf.sampleRate&&nf.userUin&&!af(nf.userUin,nf.sampleRate)||cf(e,t,n,r)}))):console.warn("[reportPerformance] value should be in range of",0," to",yf))}const Af=(0,gr.s)("AppPerfRouteNavigation"),bf=e=>e+9782784e5-3600*((new Date).getTimezoneOffset()/60)*1e3;let wf,Cf=null;const If=new Promise((e=>{Cf=e})),Ef=new b.y;class Sf{constructor(e,t,n,r){e&&(this.name=e),t&&(this.entryType=t),n&&(this.startTime=n),r&&(this.duration=r)}}class Tf extends Sf{constructor(e,t,n,r,o,i,a){super(e,t,n,r),i&&(this.navigationType=i),a&&(this.path=a),o&&(this.navigationStart=o)}}class xf extends Sf{constructor(e,t,n,r,o){super(e,t,n,r),o&&(this.path=o)}}class kf extends Sf{constructor(e,t,n,r,o,i){super(e,t,n,r),o&&(this.packageName=o),i&&(this.packageSize=i)}}class Pf extends Sf{constructor(e,t,n,r,o,i){super(e,t,n,r),o&&(this.moduleName=o),i&&(this.size=i)}}const Df={navigation:"navigation",loadPackage:"loadPackage",render:"render",script:"script"},Of="appLaunch",Nf="route",Rf="firstRender",Mf="downloadPackage",Lf="evaluateScript",Bf={navigation:"navigation",render:"render"},Ff={appLaunch:"appLaunch",route:"route",firstRender:"firstRender"};function Wf(e){If.then((()=>{Ef.emit(e.entryType,e)}))}function jf(e=""){return e.indexOf("__wx__")>-1}void 0!==c.g.performanceChannel&&(c.g.performanceChannel.setReceiver((e=>{if(e&&"evaluateScript"===e.type){const t=e.endTime-e.startTime;let n="";n="__APP__/"===e.moduleName?"main":e.moduleName,Wf(new Pf(Lf,Df.script,e.startTime,t,n))}})),delete c.g.performanceChannel),(0,u.jQ)("onNewPerformanceMetric",(e=>{if("$$$loadPackage"===e.name&&!k.gm){const t=e.endTime-e.startTime;let n=e.extraInfo&&e.extraInfo.packageName;"__APP__"===n&&(n="main");const r=k.cj?bf(e.startTime):e.startTime,o=e.extraInfo?e.extraInfo.size:0;Wf(new kf(Mf,Df.loadPackage,r,t,n,o))}if(k.gm){if("$$$loadPackage"===e.name){const t=e.endTime-e.startTime;let n=e.extraInfo&&e.extraInfo.packageName;"__APP__"===n&&(n="main");const r=k.cj?bf(e.startTime):e.startTime;Wf(new kf(Mf,Df.loadPackage,r,t,n,0))}if("evaluateJavaScript"===e.name){const t=e.endTime-e.startTime;let n="";n=e.moduleName&&e.moduleName.indexOf("__APP__")>-1?"main":e.moduleName,Wf(new Pf(Lf,Df.script,e.startTime,t,n))}if("appLaunch"===e.name){const t=e.startTime,n=e.endTime-t,r=oe.Z.appLaunchInfo;Wf(new Tf(Of,Df.navigation,t,n,null,"appLaunch",r.path))}}}));let Uf={type:"",start:0},Vf={time:0,path:""};(0,sr.H)((e=>{Vf={time:Date.now(),path:e.path}})),(0,he.q)((e=>{if(Uf&&Uf.type&&Uf.start){const t=Vf.time,n=Uf.type,r=Date.now()-Uf.start;Wf(new Tf(Nf,Df.navigation,Uf.start,r,t,n,e.path))}Uf=null,Cf()})),Af.internalOnMethod((e=>{Uf=e})),(0,u.Ld)("initReady_getPerformance",(e=>{if(Vf.time&&Vf.path){const t=e.initReadyTs-Vf.time;Wf(new xf(Rf,Df.render,Vf.time,t,Vf.path))}if(!wf&&!k.gm){wf=e.initReadyTs;const t=oe.Z.appLaunchInfo;if(t.isLaunch){let e,n;k.cj?(e=bf(t.clickTimestampInMs),n=wf-e):(e=t.clickTimestamp,n=wf-e);const r=new Tf(Of,Df.navigation,e,n,null,"appLaunch",t.path);if(7===oe.Z.appType)if(k.wZ)r.preloadType=t.preloadType;else if(k.cj){const e=t.preloadType,n=Math.floor(e%100/10),o=Math.floor(e%10);let i=0;0===n&&0===o&&(i=0),1===n&&1===o&&(i=1),2===n&&2===o&&(i=2),0===n&&2===o&&(i=4),2===n&&0===o&&(i=5),r.preloadType=i}Wf(r)}}}));const Gf=(...e)=>{console.warn(...e)},$f=(e,t)=>e.startTime>=t.startTime;class Hf{constructor(e){Object.defineProperty(this,"_list",{value:e,writable:!1,configurable:!1,enumerable:!1})}getEntries(){const e=this._list.slice();return e.sort($f),e}getEntriesByType(e){const t=[];if(!e)return Gf("entryType is not provided"),t;if(!Df[e])return Gf("invalid entryType:",e),t;for(const n of this._list)n.entryType===e&&t.push(n);return t}getEntriesByName(e,t){const n=[];if(!e)return Gf("getEntriesByName requires name"),n;for(const r of this._list)t&&t!==r.entryType||r.name!==e||n.push(r);return n}}class Zf{constructor(e,t={}){this._buffer=[],this._entryList=new Hf(this._buffer),this._bufferSize=30,this._emitter=e,this._internalSubscriptionHandler=e=>{this._buffer.length>=this._bufferSize&&this._buffer.shift(),0!==this._bufferSize&&this._buffer.push(...e.getEntries())},this._initiateSubscription(t)}_initiateSubscription(){new Qf(this._internalSubscriptionHandler,this._emitter,this._buffer,this._bufferSize).observe({entryTypes:Object.keys(Df)})}getEntries(){return this._entryList.getEntries()}getEntriesByType(e){return this._entryList.getEntriesByType(e)}getEntriesByName(e,t){return this._entryList.getEntriesByName(e,t)}createObserver(e){return new Qf(e,this._emitter,this._buffer,this._bufferSize)}setBufferSize(e){this._bufferSize=e}now(){return Date.now()}}class Qf{constructor(e,t,n,r){this._emitter=t,this._buffer=n,this._bufferSize=r,this._callback=Reporter.surroundThirdByTryCatch(e,"at api PerformanceObserver callback function"),this._timer=null,this._batchBuffer=[],Object.defineProperty(this,"_observedEntryTypes",{value:[],writable:!1,configurable:!1,enumerable:!1}),this.__handle=(...e)=>this._handle(...e)}_handle(e){e&&"function"==typeof this._shouldHandle&&this._shouldHandle(e)&&(this._batchBuffer.push(e),null===this._timer&&(this._timer=setTimeout((()=>{const e=new Hf(this._batchBuffer);this._callback(e,this),this._batchBuffer=[],this._timer=null}),500)))}_shouldHandle(e){return!e.path||!function(e=""){return function(e=""){return e.indexOf("__plugin__")>-1||e.indexOf("plugin-private://")>-1}(e)||jf(e)}(e.path)}observe(e){if(e)if(this._observedEntryTypes.length>0&&this.disconnect(),e.type||e.entryTypes)if(e.type&&e.entryTypes)Gf("observe can only be called with either type or entryTypes, but not both of them");else if(!e.type||Df[e.type]){if(e.entryTypes&&e.entryTypes.forEach((e=>{Df[e]||Gf("invalid entry type:",e)})),e.type)this._emitter.on(e.type,this.__handle),this._observedEntryTypes.push(e.type);else if(e.entryTypes)for(const t of e.entryTypes)Df[t]&&(this._emitter.on(t,this.__handle),this._observedEntryTypes.push(t))}else Gf("invalid entry type:",e.type);else Gf("observe can be called with either type or entryTypes provided")}disconnect(){for(const e of this._observedEntryTypes)this._emitter.off(e,this.__handle);this._observedEntryTypes.splice(0,this._observedEntryTypes.length)}get supportedEntryTypes(){return Object.keys(Df)}}class Yf extends Zf{constructor(e,t){super(e,{pluginId:t}),this._pluginId=t}_initiateSubscription(e={}){new zf(this._internalSubscriptionHandler,this._emitter,this._buffer,this._bufferSize,e.pluginId).observe({entryTypes:Object.keys(Bf)})}createObserver(e){return new zf(e,this._emitter,this._buffer,this._bufferSize,this._pluginId)}}class zf extends Qf{constructor(e,t,n,r,o){super(e,t,n,r),this._pluginId=o}_handle(e){return e.path&&(e.path=o.convertRouteToComponentAlias(e.path)),super._handle(e)}_shouldHandle(e){if(!!!(e&&Bf[e.entryType]&&Ff[e.name]))return!1;if(jf(e.path))return!1;const t=`plugin-private://${this._pluginId}`;return!!((e instanceof Tf||e instanceof xf)&&e.path&&(n=e.path)&&n.indexOf(t)>-1);var n}get supportedEntryTypes(){return Object.keys(Bf)}}const qf=new Zf(Ef);const Jf=new Map;var Kf=c(9848);const Xf=new b.Z;(0,u.jQ)("onUpdateStatusChange",(e=>{const t=(e.state||"").toLowerCase();var n;e.appContactInfo&&e.appContactInfo.passThroughInfo.forceUpdate||!1?"updateready"===t&&(console.info("[apply update before]"),k.wZ&&oe.Z.clientVersion<=654315263?(0,u.IN)("updateApp",n):(0,ua._showModal)({content:(0,Kf.S)()?"服务需要重启以使用最新功能":"小程序需要重启以使用最新功能",confirmText:"知道了",showCancel:!1,complete(){(0,u.IN)("updateApp",n)}})):(delete e.state,Xf.emit(t,e))}));const eg=[];let tg;Xf.on("updating",(()=>{tg={hasUpdate:!0},ng()})),Xf.on("noupdate",(()=>{tg={hasUpdate:!1},ng()}));const ng=()=>{eg.forEach((e=>{"function"==typeof e&&e(tg)})),eg.length=0},rg=[];let og=!1,ig=!1;Xf.on("updateready",(()=>{og=!0,ag()}));const ag=()=>{rg.forEach((e=>{"function"==typeof e&&e()})),rg.length=0},sg=[];let cg;Xf.on("updatefailed",(()=>{cg={},lg()}));const lg=()=>{sg.forEach((e=>{"function"==typeof e&&e(cg)})),sg.length=0},dg={onCheckForUpdate:e=>{e=__errorTracer__.surroundThirdByTryCatch(e,"at onCheckForUpdate callback function"),tg?"function"==typeof e&&e(tg):eg.push(e)},onUpdateReady:e=>{e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),og?"function"==typeof e&&e():rg.push(e)},onUpdateFailed:e=>{e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),cg?"function"==typeof e&&e(cg):sg.push(e)},applyUpdate:e=>{og&&ig?(0,u.YG)("applyUpdate",e,"applyUpdate has been called"):og?(ig=!0,k.wZ&&oe.Z.clientVersion<=654315263?(0,u.IN)("updateApp",e):(0,ua._showModal)({content:(0,Kf.S)()?"服务需要重启以使用最新功能":"小程序需要重启以使用最新功能",confirmText:"知道了",showCancel:!1,complete(){(0,u.IN)("updateApp",e)}})):(0,u.YG)("applyUpdate",e,"update is not ready")}};var ug=c(607);const pg=(e={})=>{const t=Object.assign(e,{url:"https://support.weixin.qq.com/update/"});(0,ug.n)(t)};let hg=0;const fg=function(e){Date.now()>hg&&((0,ua._showModal)({title:"",content:e,confirmText:"确定",showCancel:!1},50),hg=Date.now()+6e4)},gg={2:"插件版本过低，无法提供服务"},_g=function(e,t,n){if(!ci.Z.pluginInfos)return null;const r=ci.Z.pluginInfos[e];if(!r)return null;const o=r.runningFlag,i=r.banning||{},a=gg[o];return o||i[t]?{all:o,detail:i[t],hint:i.hint||a||n||"由于小程序违规，该服务暂时无法使用"}:null};ci.Z.emitter.on("pluginInfoFetchDone",(function(){if(void 0===o||!o.initBannedMap)return;const e={},t=ci.Z.pluginInfos;for(const n in t)e[n]=_g(n,"components");o.initBannedMap(e)}));var mg=c(883);const yg={request:It.a,uploadFile:Au,downloadFile:Ei.o,connectSocket:Ku().connectSocket},vg={_requestSkipCheckDomain:It.a,_uploadFileSkipCheckDomain:Au,_downloadFileSkipCheckDomain:Ei.o,_socketSkipCheckDomainFactory:Ku},Ag=e=>(...t)=>{Sp.s[e](["[Plugin]",...t.map((e=>"string"==typeof e?e:JSON.stringify(e)))].join(" "))},bg=Ag("info"),wg=Ag("warn"),{emitter:Cg,pluginInfos:Ig}=ci.Z,Eg={1:!1,3:!1};let Sg=0,Tg=0;const xg=[10,10,10];let kg=!1;pi()||(Eg[2]=!1);const Pg=e=>{Eg[e]=!0;Object.keys(Eg).reduce(((e,t)=>e&&Eg[t]),!0)&&(kg||(bg("all steps done, emit pluginInfoFetchDone"),Cg.emit("pluginInfoFetchDone"),kg=!0),Cg.emit("pluginInfoFetchDoneInterval"))},Dg=(e,t)=>{setTimeout((()=>{const n=[e,t,i.getCurrentRoute(),(0,bi.x9)().sessionid||(0,bi.x9)().sessionId||"",1,""].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"PluginDisplay",value:n})}),0)},Og=e=>{bg("start to invokeGetContact");const t=[],n={};for(const e in Ig)t.push(e),n[e]=Ig[e].customVersion;0!==t.length?((0,u.IN)("batchGetContact",{appIds:t,success({contactList:t}){if(bg("batchGetContact result -> ",t),(e=>{if(e){for(let t=0;t<e.length;t++){const n=e[t],r=n.appId;if(void 0===n.appId||void 0===n.plugin_list)return;if(!n.plugin_list[0]||!li[r])return;const o=n.plugin_list[0].PluginNetWork||{},i=n.plugin_list[0].last_version||{};li[r].domains={request:o.RequestDomain||[],uploadFile:o.UploadDomain||[],downloadFile:o.DownloadDomain||[],connectSocket:o.WsRequestDomain||[]},li[r].latestCustomVersion=hi(i.custom_version)}void 0!==fi&&fi(),di=e,ui.forEach((e=>{e(di)}))}})(t),e>0){let t=!1;if(!t){let e=0;for(const r in Ig){if(Ig[r].latestCustomVersion>=0&&n[r]>Ig[r].latestCustomVersion){bg("customVersion in code ("+n[r]+") is larger than customVersion in contact info ("+Ig[r].latestCustomVersion+"). Retry needed."),t=!0;break}for(const t in Ig[r].domains)Ig[r].domains[t]&&(e+=Ig[r].domains[t].length)}t||e||(bg("no domains set. Retry needed."),t=!0)}if(t)return void setTimeout((()=>{Og(e-1)}),1e3)}Pg(2)},fail(e){wg("batchGetContact failed: "+e.errMsg),Sg<1?(bg("retry to batchGetContact.."),setTimeout(Og,0),Sg++):Pg(2)}}),setTimeout((()=>{Pg(2)}),12e4)):bg("appids are empty, skip invokeGetContact.")};let Ng=null;const Rg=()=>{null!==Ng&&(clearTimeout(Ng),Ng=null,Mg())},Mg=()=>{bg("start to invokeVerifyPlugin",Date.now());const e=[];for(const t in Ig){const n=Ig[t];e.push({provider:t,inner_version:n.version})}0!==e.length?(({plugins:e,success:t,fail:n,timeout:r})=>{let o=!1;const i=setTimeout((()=>{o=!0,n({errMsg:"verifyPlugin:fail timeout"})}),1e3*r);(0,u.IN)("verifyPlugin",{data:{plugins:e},success(...e){o||(clearTimeout(i),t(...e))},fail(...e){o||(clearTimeout(i),n(...e))}})})({plugins:e,timeout:10,success({data:e}){if(void 0===e)return void wg("Plugin data from backend is not available.");if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}(e=>{for(let t=0;t<e.length;t++){const n=e[t],r=n.plugin_id,o=li[r];if(!o)return;o.banning=n.banning,o.runningFlag=n.running_flag_info,o.hostSign={noncestr:n.noncestr||"",timestamp:n.timestamp||"",signature:n.host_sign||""},pi()&&(o.domains={request:n.request_domain||[],uploadFile:n.upload_domain||[],downloadFile:n.download_domain||[],connectSocket:n.wsrequest_domain||[]})}gi(e),fi&&fi()})(Array.isArray(e.list)?e.list:[]),bg("verifyPlugin result -> ",e.list),Pg(3),Tg=0,Ng=setTimeout(Rg,6e5)},fail(e){let t;wg("invokeVerifyPlugin failed: "+e.errMsg,Date.now()),Tg<xg.length?t=xg[Tg]:(Eg[3]||Pg(3),t=30),bg(`retry invokeVerifyPlugin after ${t}s..`),setTimeout(Mg,1e3*t),Tg++}}):bg("plugins is empty, skip invokeVerifyPlugin.")},Lg=()=>{oe.Z.onReady((()=>{(()=>{if(bg("start to invokeGetPluginList"),oe.Z.appContactInfo&&oe.Z.appContactInfo.call_plugin_info){const e=oe.Z.appContactInfo.call_plugin_info;for(let t=0;t<e.length;t++){const n=e[t],r=n.plugin_id;Ig[r]=_i({version:n.inner_version,customVersion:n.plugin_version||""}),Dg(r,n.inner_version)}}else if(oe.Z.plugins)for(const e in oe.Z.plugins){const t=oe.Z.plugins[e],n=t.provider;Ig[n]=_i({version:0,customVersion:t.version||""}),Dg(n,0)}Pg(1),bg("invokeGetPluginList -> ",Ig)})(),pi()||Og(5),Mg()}))};__safeway__.onSubpackageReady(((e,t)=>{const n=t.separatedPlugins||[];bg("onSubpackageReady",n),n.forEach((e=>{Ig[e.plugin_id]&&e.custom_version&&(Ig[e.plugin_id].customVersion=hi(e.custom_version))}))}));let Bg=!1;oe.Z.onReady((()=>{if(k.gm)Bg=!1===oe.Z.urlCheck;else{const e=oe.Z.envVersion&&"release"!==oe.Z.envVersion,t=!0===oe.Z.debug;Bg=e&&t}}));let Fg=0,Wg=!0;const jg=[];ci.Z.emitter.on("pluginInfoFetchDoneInterval",(()=>{for(Wg=!1,Fg=Date.now();jg.length>0;){jg.shift()()}}));const Ug=Object.assign,Vg={};Object.keys(yg).forEach((e=>{Vg[e]=function(t={}){const n=(0,hr.hI)(this),r=Ug({},t);return r.customCheck=(t,r)=>{let o;(Date.now()-Fg>6e5?(Wg||Rg(),new Promise((e=>{jg.push(e)}))):Promise.resolve()).then((()=>{o=ci.Z.pluginInfos[n];const r=o.domains[e];let i=e;return"connectSocket"===e&&(i="websocket"),function(e,t,n){return new Promise(((r,o)=>{(0,u.IN)("checkNetworkAPIURL",{api:e,url:t,success(e){const i=(0,hr.Jv)(t,n)||e.isInLAN&&!e.isLocalHost;let a="";i||(a=`Url "${t}" not in plugin's domain list.`,Bg&&console.warn(a+" This network request will be blocked in release version.")),Bg||i?r():o(a)},fail(e){o(e.errMsg||"check url failed.")}})}))}(i,t.url,r)})).then((()=>{if(function(e,t){const n=_g(e,"domains");if(!n)return!1;if(!n.all){const e=n.detail,r=(0,mg.Qc)(t||"");let o=!1;for(let t=0;t<e.length;t++){const n=(0,mg.Qc)(e[t]||"");if(r.protocol===n.protocol&&r.hostname===n.hostname&&r.port===n.port){o=!0;break}}if(!o)return!1}return fg(n.hint),!0}(n,t.url)){const e=`url "${t.url}" is temporarily rejected.`;r(e)}else((e,t,n)=>{const r=[e,t,i.getCurrentRoute(),(0,bi.x9)().sessionid||(0,bi.x9)().sessionId||"",2,n].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"PluginDisplay",value:r})})(n,o.version,t.url),((e,t)=>{const n=t.header||{},r=e.hostSign||{};n["X-WECHAT-HOSTSIGN"]=JSON.stringify(r),wxNativeConsole.info("[Plugin] add host sign: "+JSON.stringify(r)),t.header=n})(o,t),r(null)})).catch((e=>{const t=(0,O.HD)(e)?e:"check url failed.";r(t)}))},yg[e](r)}}));const Gg=Vg,$g=e=>(t={})=>{if(k.cj){const e="preloadWebview:ok preload request ignored in iOS";(0,u.F0)({errMsg:e},"preloadWebview",t,{})}else(0,da.L)("preloadWebview",{pluginId:e},void 0,(e=>{(0,u.F0)(e,"preloadWebview",t,{})}))},Hg=$g("/"),Zg=function(e=!0,t,n=!1){const r=(0,Ii.Ce)(e,t,!0,n);return function(e={}){const t=(0,hr.hI)(this);r(Object.assign({},e,{pluginId:t}))}},Qg=new WeakMap,Yg=function(e,t){const n=_g(e,"apis");return!!n&&(!(!n.all&&n.detail.indexOf(t)<0)&&(fg(n.hint),!0))},zg=function(e,t){for(const n in e){const r=e[n];if("function"==typeof r){const e=this;this[n]=function(o){if((0,p.yR)(n,t)&&!Yg(t,n))return r.apply(e,arguments);if("Sync"===n.slice(-4))throw new h.l0(n+":fail rejected due to no permission currently in plugin");o&&(o.fail||o.complete)&&setTimeout((()=>{(0,u.YG)(n,o,"rejected due to no permission currently in plugin")}),0)}}else this[n]=e[n]}},qg=function(e){for(const t in oe.Z.plugins){const n=oe.Z.plugins[t];n.provider===e&&Qg.set(this,n.version)}};const Jg=class{constructor(t,n,r){const o=(0,h.M8)();ci.Z.puidToPluginWX[o]=this,ci.Z.pluginIDs[o]=n,ci.Z.pluginVersions[o]=r;const i=((t,n,r,o)=>{const i=I()(I()({},vg),{},{_operateWXData:Zg(!1)});for(const e in i)i[e]=i[e].bind(t);const a={sdk:i,identifiers:{pluginId:r,pluginVersion:o}};return I()(I()({},n),{},{preloadWebview:$g(r),cloud:e.getCloudAPI(a),serviceMarket:e.getServiceMarketAPI(a)})})(this,t,n,r);zg.call(this,i,n),qg.call(this,n)}getPluginVersion(){return Qg.get(this)}},Kg={},Xg=(e,t)=>{const n=(e=e.replace("plugin_","")).endsWith("Sync");Kg[e]=function(e,...r){const o=(0,hr.hI)(this);return n?(e&&(e=`${o}/${e}`),t(e,...r)):(e.key&&(e.key=`${o}/${e.key}`),t(e))}};for(const e in _p)e.startsWith("plugin_")&&Xg(e,_p[e]);const e_=Kg,t_={createInnerAudioContext:Lo};["createAudioContext","createCameraContext","createMapContext","createVideoContext","createLivePlayerContext","createLivePusherContext"].forEach((e=>{t_[e]=function(n,r){const o=(0,hr.hI)(this),i=(0,hr.hb)(this),a=r&&r.__wxExparserNodeId__?r.__wxExparserNodeId__:"";return t[e].call(this,n,f.Z.currentWebviewId,a,`${o}/${i}`)}}));const n_=t_,r_={createOffscreenCanvas(e=1,t=1,n=null){const r="object"==typeof e?e:{width:e,height:t,compInst:n},o=(0,hr.hI)(this);return r.pluginId=o,X.createOffscreenCanvas(r)}},o_=[];for(const e in X)e.endsWith("4Plugin")&&o_.push(e);o_.forEach((e=>{const t=e.replace("4Plugin","");r_[t]=function(t,n){const r=(0,hr.hI)(this),o=(0,hr.hb)(this),i=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return X[e].call(this,t,`${r}/${o}`,i)}}));const i_=r_;var a_=c(5403);const s_=e=>{const t=Number(e);return[Math.floor(t/1e6),Math.floor(t/1e3)%1e3,t%1e3].join(".")};var c_=c(2802);var l_=c(9598),d_=c(6725),u_=c.n(d_),p_=c(8665),h_=c(9237),f_=c(5373);const g_=function(e,t,n){return f_.S1.call(this,e,(e=>{const t={};for(const n of Object.keys(e||{}))e[n]&&(t[n]=Object.assign({},e[n]),e[n].landscape&&!e[n].landscapeLeft&&(t[n].landscapeLeft=Object.assign({},e[n].landscape)),e[n].landscape&&!e[n].landscapeRight&&(t[n].landscapeRight=Object.assign({},e[n].landscape)));return t})(t),n)};var __=c(2241),m_=c(8401),y_=c(19);const v_={type:"EOF"};class A_{constructor(){this.token=[],this.tokens=[],this.state=null,this.state=this.start}isEOF(e){return e&&"object"==typeof e&&"EOF"===e.type}start(e){return this.isEOF(e)?(this.emmitToken("EOF",v_),this.start):"#"===e?(this.token.push(e),this.inTplFunc):"$"===e?(this.token.push(e),this.inTplStr):"&"===e||"|"===e?(this.token.push(e),this.inLogic):/^[0-9]/.test(e)?(this.token.push(e),this.inNumber):"'"===e?this.inQuoteStr:-1!==[">","<","=","!"].indexOf(e)?(this.token.push(e),this.inCompare):"?"===e?(this.emmitToken("QUESTION",e),this.start):":"===e?(this.emmitToken("COLON",e),this.start):","===e?(this.emmitToken("COMMA",e),this.start):/^\s/.test(e)?this.start:null}inLogic(e){return this.isEOF(e)||"&"!==e&&"|"!==e?this.start(e):(this.token.push(e),this.emmitToken("LOGIC",this.token.join("")),this.token=[],this.start)}inNumber(e){return!this.isEOF(e)&&/^[0-9.]/.test(e)?(this.token.push(e),this.inNumber):(this.emmitToken("NUMBER",this.token.join("")),this.token=[],this.start(e))}inTplFunc(e){const t=()=>{let e=0,t=0;for(let n=0,r=this.token.length;n<r;n++){const r=this.token[n];"("===r?e+=1:")"===r&&(t+=1)}return e===t};return this.isEOF(e)?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),")"===e&&t()?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start):this.inTplFunc)}inTplStr(e){return!this.isEOF(e)&&/^[a-zA-Z0-9.-_$]/.test(e)?(this.token.push(e),this.inTplStr):(this.emmitToken("TPLSTR",this.token.join("")),this.token=[],this.start(e))}inCompare(e){return this.isEOF(e)||"="!==e?(this.emmitToken("COMPARE",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),this.inCompare)}inQuoteStr(e){return this.isEOF(e)||"'"!==e?(this.token.push(e),this.inQuoteStr):(this.emmitToken("STR",this.token.join("")),this.token=[],this.start)}emmitToken(e,t){this.tokens.push({type:e,value:t})}push(e){this.state&&(this.state=this.state(e))}end(){this.state&&this.state(v_)}}const b_=e=>{const t=new A_;let n=0;const r=e.length;for(;n<r;){const r=e[n];n+=1,t.push(r)}return t.end(),t.tokens},w_=e=>"ROOT"===e.type?{type:"ROOT",maxChildren:0,children:[],priority:-9999}:"TPLFUNC"===e.type?{type:"TPLFUNC",children:[e.value],maxChildren:1,priority:40}:"TPLSTR"===e.type?{type:"TPLSTR",children:[e.value],maxChildren:1,priority:40}:"NUMBER"===e.type?{type:"NUMBER",children:[e.value],maxChildren:1,priority:40}:"STR"===e.type?{type:"STR",children:[e.value],maxChildren:1,priority:40}:"COMPARE"===e.type?{type:"COMPARE",operator:e.value,children:[],maxChildren:2,priority:30,isSign:!0}:"LOGIC"===e.type?{type:"LOGIC",operator:e.value,children:[],maxChildren:2,priority:20,isSign:!0}:"QUESTION"===e.type?{type:"QUESTION",operator:e.value,children:[],maxChildren:3,priority:10,isSign:!0}:"COLON"===e.type?{type:"COLON",operator:e.value,children:[],maxChildren:0,priority:10,isSign:!0}:"EOF"===e.type?{type:"ROOT_END",children:[],maxChildren:0,priority:-9999}:null,C_=e=>0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length>=e.maxChildren),I_=e=>0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length<e.maxChildren),E_=e=>{let t;t="string"==typeof e?b_(e):e;const n=[w_({type:"ROOT"})],r=e=>{const t=e.priority;for(;C_(n[n.length-1])&&I_(n[n.length-2])&&t<=n[n.length-1].priority&&t<=n[n.length-2].priority;){const{children:e}=n[n.length-2];null==e||e.push(n.pop())}},o=e=>{const t=w_(e),o=n[n.length-1];if("STR"===t.type||"TPLSTR"===t.type||"NUMBER"===t.type||"TPLFUNC"===t.type){if(C_(o))return;I_(o)?o.children.push(t):n.push(t)}else"COMPARE"===t.type||"LOGIC"===t.type||"QUESTION"===t.type?C_(o)&&(t.priority>o.priority?((e,t)=>{const r=t.children.pop();r&&e.children.push(r),n.push(e)})(t,o):(r(t),(e=>{const t=n.pop();t&&e.children.push(t),n.push(e)})(t))):"ROOT_END"===t.type&&(r(t),n.push(t))};for(let e=0,n=t.length;e<n;e++)o(t[e]);return n},S_=({type:e,children:t,operator:n},r,o={})=>{const i=e=>S_(t[e],r,o);if("COMPARE"===e){const e={">":()=>i(0)>i(1),"<":()=>i(0)<i(1),">=":()=>i(0)>=i(1),"<=":()=>i(0)<=i(1),"==":()=>i(0)==i(1),"!=":()=>i(0)!=i(1),"===":()=>i(0)===i(1)},t=n&&e[n];return t?t():null}if("LOGIC"===e){const e={"&&":()=>i(0)&&i(1),"||":()=>i(0)||i(1)},t=n&&e[n];return t?t():null}const a={NUMBER:()=>Number(t[0]),STR:()=>t[0],TPLSTR:()=>((e,t)=>{const n=e.split(".");let r="";return n.forEach((e=>{""===r?r=t[e]:("string"==typeof r&&(r=JSON.parse(r)),r=r[e])})),r})(t[0],r),QUESTION:()=>i(0)?i(1):i(2),TPLFUNC:()=>((e,t,n)=>{const r=e.indexOf("("),o=e.substring(0,r),i=e.substring(r+1,e.length-1);if(!n[o])return null;const a=b_(i),s=[];let c=[];for(let e=0,t=a.length;e<t;e++){const t=a[e];"COMMA"===t.type||"EOF"===t.type?(s.push(c),c=[]):c.push(t)}const l=[];return s.forEach((e=>{l.push(x_(e,t,n))})),n[o].apply(null,l)})(t[0],r,o)}[e]||null;return a?a():null},T_={"#scope":e=>e,"#no":e=>!e,"#add":(e,t)=>e+t,"#sub":(e,t)=>e-t,"#multi":(e,t)=>e*t,"#division":(e,t)=>e/t,"#negative":e=>-e,"#toNumber":e=>Number(e),"#toString":e=>String(e),"#toArray":(...e)=>e,"#ceil":e=>Math.ceil(e),"#floor":e=>Math.floor(e),"#round":e=>Math.round(e),"#substring":(e,t,n)=>e.substring(t,n),"#like":(e,t)=>-1!==e.indexOf(t),"#toFixed":(e,t)=>parseFloat(e).toFixed(t),"#toLowerCase":e=>e.toLowerCase(),"#toUpperCase":e=>e.toUpperCase(),"#len":e=>e.length,"#hansLen":e=>{let t=0;for(const n of e)t+=/[\u4e00-\u9fa5]/.test(n)?2:1;return t/2},"#parse":e=>{try{return JSON.parse(e)}catch(e){return{}}},"#value":(e,t)=>e[t]||{},"#truncate":(e,t)=>{let n="",r=0;for(const o of e){if(r+=/[\u4e00-\u9fa5]/.test(o)?2:1,r>t){n+="...";break}n+=o}return n},"#concat":(...e)=>e.join(""),"#split":(e,t,n)=>null==e?void 0:e.split(t,n),"#abbrNum":e=>e<1e4?e.toString():`${(e/1e4).toFixed(1)}万`,"#trimDigit":e=>{const t=e.toString().split(".");if(t.length<2)return e;let n=t.slice(-1)[0];for(;"0"===n[n.length-1];)n=n.slice(0,-1);return t.slice(0,-1).concat(n?[n]:[]).join(".")},"#append":(e,t,n=!1)=>(n&&e.indexOf(t)>-1||e.push(t),e),"#remove":(e,t)=>e.filter((e=>e!==t)),"#include":(e,t)=>e.indexOf(t)>-1,"#mod":(e,t)=>e%t,"#indexedArray":e=>{if(e<=0)return[];const t=[];for(let n=0;n<e;n+=1)t.push(n);return t},"#get":y_.U2,"#slice":(e,t,n)=>e.slice(t,n)},x_=(e,t,n)=>{try{const r=E_(e);return S_(r[1],t,Object.assign({},T_,n))}catch(e){}return null};var k_=c(4643),P_=c(637),D_=c(1949);const O_={},N_=k.iw;class R_ extends m_.wA{constructor(e,{autoRegister:t=!0}={}){super(e),this.adCustomId=void 0,this.adProxy=void 0,this.adData=void 0,this.adDatas=void 0,this.template=void 0,this.manager=void 0,this.reporter=void 0,this.emitter=void 0,this.id=void 0,this.options=void 0,this.data=void 0,this.events=void 0,this.lifecycle=void 0,this.innerStyles=void 0,this.animations=void 0,this.idPrefix=void 0,this.forType=void 0,this.forItem=void 0,this.forIndex=void 0,this.ratio=1,this.tplConfig=null,this.bubbleEvent=void 0,this.adCustomListener=null,this.clickCallbackMap=new WeakMap,this.handleCommonClick=e=>{this.doActions(this.events.tap,{event:e})},this.handleAdCustomAction=e=>{e.targetid===this.id&&this.doCommonAction(e)},this.adCustomId=e.adCustomId,this.adProxy=e.adProxy,this.adData=e.adData,this.adDatas=e.adDatas,this.manager=e.manager,this.reporter=e.reporter,this.emitter=e.emitter,this.idPrefix=e.idPrefix||"",this.forType=e.forType||P_.bk.NONE,this.forItem=e.forItem,this.forIndex=e.forIndex,e.ratio&&(this.ratio=e.ratio),this.checkSize();const n=e.template||{};this.template=n,this.id=`${this.adCustomId}-${this.idPrefix}${this.template.id}`;const r=n.options||{};this.options=r,this.data=r.data||{},this.events=r.events||{},this.lifecycle=r.lifecycle||{},this.innerStyles=r.innerStyles||{},this.animations=r.animations||{},this.bubbleEvent=void 0===r.bubbleEvent||r.bubbleEvent;const o=this.getDataValue("_bubbleEvent");void 0!==o&&(this.bubbleEvent=o),t&&this.bindCommonEvents()}ready(e){this.emitComponentLifeCycle("onInit"),e&&(e.adId=this.id)}updatedProps(){this.updateBubbleEvent()}destroy(){this.emitComponentLifeCycle("onDestroy"),this.offClick("container",this.handleCommonClick),this.emitter.off("adCustomAction",this.handleAdCustomAction),this.removeAdCustomListener()}bindCommonEvents(){this.onClick("container",this.handleCommonClick),this.emitter.on("adCustomAction",this.handleAdCustomAction)}getCommonSubComponentProps(){return{template:this.template,adCustomId:this.adCustomId,emitter:this.emitter,adProxy:this.adProxy,reporter:this.reporter,adData:this.adData,adDatas:this.adDatas,adPosition:this.props.adPosition,systemInfo:this.props.systemInfo,manager:this.manager,idPrefix:this.idPrefix||"",forType:this.forType,forIndex:this.forIndex,forItem:this.forItem,ratio:this.ratio,scope:this.props.scope}}getDataValue(e,t,n){const r=t||this.data,o=r[`${e}Expr`];if(o){return this.run(o,null==n?void 0:n.args)}return r[e]}getDataValueWithDefault(e,t,n,r){const o=n?this.getDataValue(e,n,r):this.getDataValue(e);return void 0===o?t:o}getAdData(){return this.forType===P_.bk.ADS&&null!=this.forIndex?this.getAdDatas()[this.forIndex]||{}:this.adData}getAdDatas(){return this.adDatas||[]}addAdCustomListener(e){this.removeAdCustomListener(),this.adCustomListener=t=>{t.adCustomId===this.adCustomId&&(null==e||e(t))},this.emitter.on("adCustomEvent",this.adCustomListener)}removeAdCustomListener(){this.adCustomListener&&this.emitter.off("adCustomEvent",this.adCustomListener)}setRatio(e){this.ratio=e}checkSize(){var e,t;const{template:n}=this;if(n&&"root"!==n.type)return;this.tplConfig=(null==n?void 0:n.tplConfig)||{};const r=this.props.adPosition||{};if(!this.tplConfig)return;const{tplConfig:o}=this;let{width:i}=this.props.adPosition||{};var a,s;null==i&&(i=(null===(a=this.props)||void 0===a||null===(s=a.systemInfo)||void 0===s?void 0:s.screenWidth)||$i.S3.screenWidth);i=Number(i);const c=o.minWidth||0,l=o.maxWidth||0,d=o.baseWidth||375;let u=Math.min((null===(e=this.props)||void 0===e||null===(t=e.systemInfo)||void 0===t?void 0:t.screenWidth)||$i.S3.screenWidth,Math.max(c,i));l&&(u=Math.min(u,l)),0===u&&this.setRatio(d/d),r.width=u,this.setRatio(u/d)}emitAdCustomEvent(e,t){this.emitter.emit("adCustomEvent",{adCustomId:this.adCustomId,action:e,value:t})}emitComponentEvent(e,t){const n=this.events[e];null!=n&&n.length&&this.doActions(n,t||{})}emitComponentLifeCycle(e,t){const n=this.lifecycle[e];null!=n&&n.length&&this.doActions(n,t)}doActions(e=[],t={}){for(const n of e)n.force&&!n.targetid?this.doCommonAction({args:t,payload:n}):this.emitter.emit("adCustomAction",{fromid:this.id,targetid:n.targetid?`${this.adCustomId}-${n.targetid}`:this.id,args:t,payload:n})}doCommonAction(e){const{payload:t,args:n}=e,{delay:r=0,expr:o}=t,i=()=>{if(!o||this.run(o,n))switch(t.action){case P_.aO.SETSTYLE:{const{value:e}=t;if(e.styleExpr)for(const t of Object.keys(e.styleExpr))e.style[t]=this.run(e.styleExpr[t],n);this.setStyle(e.id,e.style);break}case P_.aO.SETEXPRVARS:{const{key:e}=t.value,n=this.getDataValue("value",t.value);this.getExprInnerVars()[e]=n;break}case P_.aO.REPORTIDKEY:break;case P_.aO.TRIGGEREVENT:{const{detail:e={},eventName:r}=t.value;try{if(null!=n&&n.event&&(e.rawDetail=JSON.stringify(n.event)),t.value.detailExpr)for(const r of Object.keys(t.value.detailExpr)){const o=t.value.detailExpr[r];e[r]=this.run(o,n)}}catch(e){}this.emitAdCustomEvent(P_.A$.TRIGGEREVENT,{eventName:r,detail:e});break}case P_.aO.REPORTMMDATA:{const{data:e,dataExpr:r,id:o}=t.value;if(r)for(const t of Object.keys(r)){const o=r[t];e[t]=this.run(o,n)}this.emitAdCustomEvent(P_.A$.REPORTMMDATA,{id:o,data:e});break}case P_.aO.ANIMATE:{const{id:e,animation:n}=t.value;this.doAnimation({id:e,animationName:n});break}case P_.aO.TRIGGERBTNCLICK:{const e=null==n?void 0:n.event;var r;if(e)this.emitAdCustomEvent(P_.A$.BTNTAP,{event:e,isHandleDownload:(null===(r=t.value)||void 0===r?void 0:r.isHandleDownload)||!1});break}case P_.aO.LANDAD:{const e=null==n?void 0:n.event;e&&this.emitAdCustomEvent(P_.A$.LANDAD,{index:this.getDataValueWithDefault("index",0,t.value,{args:n}),event:e});break}case P_.aO.SPLASHSKIPAD:{const e=null==n?void 0:n.event;e&&this.emitAdCustomEvent(P_.A$.SPLASHSKIPAD,{event:e});break}case P_.aO.REPORTADMONITORDATA:{const{id:e,key:r}=t.value,o=this.getDataValue("extInfo",t.value,{args:n});this.emitAdCustomEvent(P_.A$.REPORTADMONITORDATA,{id:e,key:r,extInfo:o});break}case P_.aO.REWARDEDVIDEODYNAMIC:{const{list:e}=t.value;this.emitAdCustomEvent(P_.A$.REWARDEDVIDEODYNAMIC,{list:e});break}default:"doAction"in this&&"function"==typeof this.doAction&&this.doAction(e)}};r?setTimeout(i,r):i()}run(e,t){const n=this.getInnerFunction(),r=I()(I()({},this.getScope()),n);return x_(e,t?I()({$args:t},r):r,n)}getElementById(e){if(!e){var t,n;const e=null!==(t=null===(n=this.getRootElement())||void 0===n?void 0:n.parent)&&void 0!==t?t:null;return e===m_.Ar?this.getRootElement():e}return"$$"===e?this.getRootElement():super.getElementById(e)}static animate(e,t){const{left:n,top:r,scaleWidth:o,scaleHeight:i,opacity:a,rotate:s=0,easing:c="ease-in",duration:l=500}=t;let d=new Promise(((t,d)=>{(0,u.IN)("animateCoverView",{dest:e.dest,viewId:e.id,easing:c,duration:l,finalStyle:{left:n,top:r,opacity:a,rotate:s,scaleX:o,scaleY:i},success:t,fail:d})}));return"devtools"===N_&&(d=Promise.all([d,(0,__.Vs)(l)])),d}doAnimation({id:e,emitEvent:t=!0,animationName:n,animation:r}){var o=this;return ue()((function*(){const i=!r&&n?o.animations[n]:r,a=o.getElementById(e);if(!i||!a)return;const{keys:s,duration:c,easing:l}=i;if(((null==s?void 0:s.length)||0)<2)return;let d=0;for(const t of Object.keys(s)){const n=s[+t],{offset:r,opacity:i,left:u,top:p,rotate:h,scaleX:f,scaleY:g}=n,_=c*r,m=(0,m_.MO)({opacity:i,left:u,top:p,rotate:h,scaleWidth:f,scaleHeight:g});if(_<=0)yield o.setStyle(e,m);else{const e=I()(I()({},m),{},{easing:l,duration:_-d});e.left=m.left,e.top=m.top,yield R_.animate(a,e),d=_}}n&&t&&(yield o.emitComponentEvent(P_.H.ANIMATIONEND,{animation:n}))}))()}updateInnerStyle(){if(this.innerStyles)for(const e of Object.keys(this.innerStyles)){const t=this.innerStyles[e];t.expr&&!this.run(t.expr)||this.updateStyle(t.style,e)}}setStyle(e,t){var n=()=>super.setStyle,r=this;return ue()((function*(){const o=r.getDataValue("_useApx")?r.convertToApxRatio(t):t;let i=e;var a;"$$"===i&&(i=null===(a=r.getRootElement())||void 0===a?void 0:a.name);if(o){for(const e of Object.keys(o))o[e]=r.convertApxStyle(o[e]);var s;if(i)yield n().call(r,i,o);else null===(s=r.parent)||void 0===s||s.setStyle("container",o)}}))()}convertApxStyle(e){const t=/([+-]?\d+(?:\.\d+)?)apx/g;return e&&"string"==typeof e?e.replace(t,((e,t)=>`${Number(t*this.ratio)}px`)):e}updateStyle(e,t){if(e)for(const n of Object.keys(e)){let r=n,o=e[n];if(n.includes("Expr")){const e=n.split("Expr");2===e.length&&([r]=e,o=this.run(o))}this.setStyle(t,{[r]:o})}}removeInnerStyle(){if(this.innerStyles)for(const e of Object.keys(this.innerStyles)){const t=this.innerStyles[e];this.removeStyle(t.style,e)}}removeStyle(e,t){if(e)for(const n of Object.keys(e))this.setStyle(t,{[n]:null})}getScope(){var e,t;return{$ad:this.getAdData(),$ads:this.getAdDatas(),$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:(null===(e=this.props)||void 0===e?void 0:e.systemInfo)||{},ua:"",ratio:this.ratio,time:Date.now()},$for:{index:this.forIndex,item:this.forItem},$scope:(null===(t=this.props)||void 0===t?void 0:t.scope)||{}}}getExprInnerVars(){return void 0===O_[this.adCustomId]&&(O_[this.adCustomId]={}),O_[this.adCustomId]}getInnerFunction(){const e=this.getExprInnerVars();return{"#getVar":t=>e[t],"#measureText":(e,t)=>D_.Z.getTextWidth(e,t)}}updateBubbleEvent(){const e=this.getRootElement();e&&(0,k_.zJ)(e,(e=>{if(!e.isBubbleEventSet)if(e.isRootElementOfComponent){const t=e.referComponent;e.bubbleEvent=!t||t.bubbleEvent}else e.bubbleEvent=!0}))}onClick(e,t,{handleTriggerClick:n=!0,handleClickLimit:r=!0,isReport:o=!1,clickType:i=0}={}){const a=e=>{null!==this.reporter&&(n&&!this.reporter.judgeTriggerClick(e,o)||r&&this.reporter.isClickLimit(e,i))||t(e)};return this.clickCallbackMap.set(t,a),super.onClick(e,a)}offClick(e,t){return this.clickCallbackMap.has(t)?super.offClick(e,this.clickCallbackMap.get(t)):super.offClick(e,t)}checkUseApx(){if(this.getDataValue("_useApx"))for(const e of Object.keys(this.style))this.style[e]=this.convertToApxRatio(this.style[e])}convertToApxRatio(e){const{ratio:t}=this,n=/(\d+)px/g,r={};for(const o of Object.keys(e))if(null!==P_.fc&&void 0!==P_.fc&&P_.fc.includes(o)){const i=e[o];let a=i;"number"==typeof i?a=i*t:"string"==typeof i?a=i.replace(n,((e,n)=>{const r=Number(n);return Number.isNaN(r)?e:r*t+"px"})):Array.isArray(i)&&null!=i&&i.every((e=>"number"==typeof e))&&(a=i.map((e=>e*t))),r[o]=a}else r[o]=e[o];return r}}class M_ extends R_{getSubComponentProps(){return this.getCommonSubComponentProps()}constructor(e){var t;if((super(e,{autoRegister:!1}),this.style={blank:{width:0,height:0},linearGradient:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},".reverse":{rotate:180}},this.isShow=void 0,this.isLinearGradient=!1,this.isLinearGradientReverse=!1,this.linearGradientSrc="https://wxa.wxs.qq.com/images/wxapp/linear_gradient.png",this.linearGradientRe=/^linear-gradient\(rgba\(0,0,0,([\d.]+)\),rgba\(0,0,0,([\d.]+)\)\)$/,this.isShow=this.getDataValueWithDefault("_isShow",!0),this.isShow)&&("feedback"===this.template.type?this.setStyle("container",{display:"inline-block"}):"end"===this.template.type&&this.setStyle("container",{display:"none"}),this.updateStyle(this.template.style||{},"container"),null!==(t=this.template.style)&&void 0!==t&&t.background)){const e=this.linearGradientRe.exec(this.template.style.background.replace(/ /g,""));if(e){const[t,n]=e.slice(1);this.isLinearGradient=!0,Number(t)>Number(n)&&(this.isLinearGradientReverse=!0)}}}render(){const{template:e}=this.props;let t=null;return"for"===e.type?"<CustomFor></CustomFor>":(["layout","image","text","button","video","feedback","end","carousel","countdown"].includes(e.type)&&(t=`Custom${e.type[0].toUpperCase()}${e.type.slice(1)}`),this.isShow&&t?`\n      <view id="container">\n        ${this.isLinearGradient?`\n          <image id="linear-gradient" class="${this.isLinearGradientReverse?"reverse":""}" src="${this.linearGradientSrc}"></image>\n        `:""}\n        <${t}></${t}>\n      </view>\n    `:'<view id="blank"></view>')}}M_.subComponents=()=>({CustomLayout:F_,CustomText:U_,CustomImage:V_,CustomButton:G_,CustomVideo:Z_,CustomFeedback:Q_,CustomEnd:Y_,CustomFor:z_,CustomCarousel:nm,CustomCountdown:rm});var L_=c(3489);class B_ extends R_{constructor(e){var t,n,r;super(e),this.style={body:{zIndex:1,position:"absolute",hidden:!0,opacity:0,flexDirection:"column",alignItems:"center",justifyContent:"center"},".full-size":{width:"100%",height:"100%"},".full":{position:"absolute",left:0,right:0,top:0,bottom:0},".tip-container":{position:"absolute",top:0,left:0,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",hidden:!0},".video-close-tip":{position:"relative",zIndex:1e3,height:48,width:122,lineHeight:48,backgroundColor:"#4C4C4C",borderRadius:12,fontSize:17,color:"#fff",textAlign:"center"},".empty":{width:"100%",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center",backgroundColor:"#dcdcdc",color:"#888",textAlign:"center",fontSize:12,minHeight:50}},this.state={hidden:!0},this.isFullScreen=void 0,this.useDefaultFeedback=void 0,this.exposureUntilVideoPlay=void 0,this.exportAid=void 0,this.enableTimer=void 0,this.hideAfterLanding=void 0,this.isMulti=void 0,this.isWidthRequired=void 0,this.multiShowList=void 0,this.show=()=>{this.setStyle("body",{hidden:!1,opacity:1}),this.emitAdCustomEvent(P_.A$.CHECKEXPOSURE)},this.hide=()=>{this.setStyle("body",{hidden:!0,opacity:0}),this.emitAdCustomEvent(P_.A$.CHECKEXPOSURE)},this.showFeedback=()=>{const{useDefaultFeedback:e}=this;e&&(this.setStyle("tipContainer",{hidden:!1}),setTimeout((()=>{this.setStyle("tipContainer",{hidden:!0})}),3e3))},this.handleEnterForeground=()=>{this.emitComponentEvent(P_._d.APPENTERFOREGROUND),this.emitAdCustomEvent(P_.A$.APPENTERFOREGROUND)},this.handleEnterBackground=()=>{this.emitComponentEvent(P_._d.APPENTERBACKGROUND),this.emitAdCustomEvent(P_.A$.APPENTERBACKGROUND)},this.handleContainerClick=e=>{var t,n;null!==(t=this.manager)&&void 0!==t&&t.isMulti||(this.emitComponentEvent(P_._d.CONTAINERTAP),null===(n=this.reporter)||void 0===n||n.handleClick(e,2))},this.isFullScreen=this.getDataValueWithDefault("isFullScreen",!1),this.enableTimer=this.getDataValueWithDefault("enableTimer",!0),this.useDefaultFeedback=this.getDataValueWithDefault("useDefaultFeedback",!0),this.exposureUntilVideoPlay=this.getDataValueWithDefault("exposureUntilVideoPlay",!1),this.hideAfterLanding=this.getDataValueWithDefault("hideAfterLanding",!1),this.exportAid=this.getDataValueWithDefault("exportAid",!1),this.isMulti=null!==(t=null===(n=this.template)||void 0===n||null===(r=n.tplConfig)||void 0===r?void 0:r.isMulti)&&void 0!==t&&t,this.isWidthRequired=this.getDataValueWithDefault("isWidthRequired",!1),this.multiShowList=this.getDataValue("multiShowList"),this.bindEvent(),this.updateInnerStyle(),this.updateStyle(this.template.style||{},"container");const o=["left","top"];!$i.S3.isWaGame&&o.push("fixed"),this.isWidthRequired&&o.push("width"),!this.isFullScreen&&e.adPosition&&this.setStyle("body",(0,k_.ei)(e.adPosition,o))}destroy(){super.destroy(),this.unbindEvent()}ready(e){super.ready(e),this.isFullScreen&&(e.fullscreen=!0),this.updateBubbleEvent()}getCustomItemProps(e,t){return I()(I()({},this.getCommonSubComponentProps()),{},{template:this.props.template.children[parseInt(t,10)]})}bindEvent(){(0,L_.dN)(this.handleEnterForeground),(0,L_.vv)(this.handleEnterBackground),this.onClick("container",this.handleContainerClick)}unbindEvent(){(0,L_.Tb)(this.handleEnterForeground),(0,L_.b$)(this.handleEnterBackground),this.offClick("container",this.handleContainerClick)}getRootData(e){switch(e){case"hidable":return this.getDataValueWithDefault("hidable",!0);case"refetchable":return this.getDataValueWithDefault("refetchable",!1)}}doAction({payload:e,args:t}){var n,r;if(e.action===P_.aO.HIDEAD)"value"in e&&e.value.preventClose?null===(n=this.manager)||void 0===n||n.hide(!0):null===(r=this.manager)||void 0===r||r.hide();else if(e.action===P_.aO.RELOADAD){var o;null===(o=this.manager)||void 0===o||o.reload()}else e.action===P_.aO.CHANGEMULTISHOW&&(e.value.listExpr?this.emitAdCustomEvent(P_.A$.CHANGEMULTISHOW,{list:this.run(e.value.listExpr,t)}):e.value.list?this.emitAdCustomEvent(P_.A$.CHANGEMULTISHOW,{list:e.value.list}):null!=t&&t.list&&this.emitAdCustomEvent(P_.A$.CHANGEMULTISHOW,{list:t.list}))}isShow(){var e;const t=this.getElementById("body");return null!==(e=!(null!=t&&t.style.hidden))&&void 0!==e&&e}render(){if(this.props.isEmpty)return'\n        <view id="body">\n          <view id="empty-container" class="empty">\n            <text id="empty-container-text" class="empty-info" value="暂无广告，具体指引查看小程序流量主功能"></text>\n          </view>\n        </view>\n      ';const{template:e}=this.props,{isFullScreen:t}=this,{useDefaultFeedback:n}=this;return`\n      <view id="body" class="${t?"full-size":""}">\n        ${e?`\n          <view id="container" class="wx-ad-custom ${t?"full full-size":""}">\n            ${e.children.map(((e,t)=>`\n              <CustomItem get-props="getCustomItemProps:${t}"></CustomItem>\n            `)).join("\n")}\n          </view>\n          ${n?'\n            <view id="tip-container" class="tip-container">\n              <text id="close-tip" class="video-close-tip" value="感谢反馈"></text>\n            </view>\n          ':""}\n        `:""}\n      </view>\n    `}}B_.subComponents={CustomItem:M_};class F_ extends R_{constructor(e){super(e),this.state={children:[]},this.style={".layout-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".layout-column":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".layout-proportion":{position:"absolute",width:"100%",height:"100%"}},this.baseType=void 0,this.classRow=!1,this.classColumn=!1,this.baseType=this.options.baseType||P_.BB.COMMON,this.baseType===P_.BB.ROW?this.classRow=!0:this.baseType===P_.BB.COLUMN?this.classColumn=!0:(this.baseType,P_.BB.PROPORTION),this.state.children=this.template.children||[],this.updateInnerStyle()}doAction({payload:e}){if(e.action===P_.aO.ADDCHILDREN){const{value:t}=e,n=Array.isArray(t)?t:[t],r=[...this.state.children,...n];this.setState({children:r})}}ready(e){super.ready(e),this.initProportionComponent()}initProportionComponent(){const e=this.getDataValue("mProportion");if(!e)return;const t=this.getRootElement().layoutBox;if(t.width/t.height>e){const n=Math.round(t.height*e);this.setStyle("container",{width:n,left:(t.width-n)/2,top:0})}else{const n=Math.round(t.width/e);this.setStyle("container",{height:n,top:(t.height-n)/2,left:0})}}getSubComponentProps(e,t){return I()(I()({},this.getCommonSubComponentProps()),{},{template:this.state.children[parseInt(t,10)]})}render(){const{children:e}=this.state,t=["layout"];this.classRow&&t.push("layout-row"),this.classColumn&&t.push("layout-column");return`\n      <view\n        id="container"\n        class="${t.join(" ")}"\n      >\n      ${e.map(((e,t)=>`\n        <CustomItem get-props="getSubComponentProps:${t}"></CustomItem>\n      `)).join("\n")}\n      </view>\n    `}}F_.subComponents=()=>({CustomItem:M_});var W_=c(3324),j_=c(4684);class U_ extends R_{constructor(e){super(e),this.style={".text":{color:"#000",fontSize:14,wordBreak:"break-all"},".text-ellipsis":{lineBreak:"ellipsis",overflow:"hidden"}},this.state={text:""},this.baseType=void 0,this.classEllipsis=!1,this.maxLen=void 0;const t=this.options.baseType||P_.qW.NICKNAME;this.baseType=t,t===P_.qW.COMMON?this.initCommonComponent():t===P_.qW.NICKNAME?this.initNickNameComponent():t===P_.qW.DESC&&this.initDescComponent(),this.classEllipsis=this.getDataValueWithDefault("isEllipsis",!0),this.maxLen=this.getDataValueWithDefault("maxLen",null),this.updateInnerStyle()}ready(e){super.ready(e),this.baseType===P_.qW.RELATION&&this.initRelationComponent()}initCommonComponent(){this.state.text=this.getDataValueWithDefault("text","")}initNickNameComponent(){const e=this.getAdData(),t=[Hi.fY.APPLE_APP_STORE,Hi.fY.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===Hi.vK.CRT_SIZE_GRID,r=[Hi.fY.WE_CHAT_ARTICLE,Hi.fY.GDT_WE_CHAT_ARTICLE].includes(e.product_type),o=[Hi.fY.WE_CHAT_SHOP,Hi.fY.JD_URL].includes(e.product_type),i=[{path:["extBackComm","nick_name"]},{path:["weapp_info","nick_name"],condition:n},{path:["crtInfo","0","wxgame_video_card","title"],condition:[Hi.vK.CRT_SIZE_REWARD_VEDIO169,Hi.vK.CRT_SIZE_REWARD_VEDIO916,Hi.vK.CRT_SIZE_VERTICAL_VIDEO_NEW_916,Hi.vK.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size)},{path:["appInfo","appName"],condition:t},{path:["app","nickname"],condition:!t},{path:["crtInfo","0","card_info","title"]},{value:"品牌推广",condition:r},{value:"电商推广",condition:o},{value:"活动推广"}];this.state.text=(0,k_.Ze)(e,i)}initDescComponent(){const e=this.getAdData(),t=[Hi.fY.APPLE_APP_STORE,Hi.fY.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=[Hi.vK.CRT_SIZE_REWARD_VEDIO169,Hi.vK.CRT_SIZE_REWARD_VEDIO916,Hi.vK.CRT_SIZE_VERTICAL_VIDEO_NEW_916,Hi.vK.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size),r=e.product_type===Hi.fY.MINI_GAME,o=e.product_type===Hi.fY.WECHAT,i=[Hi.fY.WE_CHAT_ARTICLE,Hi.fY.GDT_WE_CHAT_ARTICLE].includes(e.product_type),a=[Hi.fY.WE_CHAT_SHOP,Hi.fY.JD_URL].includes(e.product_type),s=[{path:["extBackComm","desc_1"]},{path:["crtInfo","0","wxgame_video_card","desc"],condition:n},{path:["wording"],condition:[Hi.vK.CRT_SIZE_MULTI_POS_NEW_PIC,Hi.vK.CRT_SIZE_IN_TEXT_DESC_CARD].includes(e.crt_size)}];this.getDataValueWithDefault("useDefault",!1)?s.push({path:["extBackComm","default_desc"]},{value:"今日活动推荐",condition:i},{value:"今日商品推荐",condition:a},{value:"今日应用推荐",condition:t},{value:"今日公众号推荐",condition:o},{value:"今日小游戏推荐",condition:r},{value:"今日活动推荐"}):s.push({value:""}),this.state.text=(0,k_.Ze)(e,s)}initRelationComponent(){var e=this;return ue()((function*(){const t=e.getAdData();if(8!==(0,k_.U2)(t,["crtInfo","0","card_info","mp_tag_type"]))return;const{aid:n}=t,r=Date.now(),o=(0,k_.U2)(t,["button_action","button_text"],"");try{var i;const t=yield(0,W_.uQ)({aid:n,buttonText:o}),a=Date.now();e.adProxy.reportRelationFetchDuration({startTime:r,endTime:a,showTime:(null===(i=e.manager)||void 0===i?void 0:i.showDetailTime)||0});let s="";if(t){const{count:n,descText:r}=t;s=e.getDataValueWithDefault("text","",void 0,{args:{count:n,descText:r}}),e.emitComponentEvent(P_.Xw.RELATIONFETCHED,{count:n,descText:r})}e.setState({text:s})}catch(t){e.setState({text:""}),e.adProxy.reportAdMonitorData(P_.IN.RELATION_FETCH_ERROR,t)}}))()}doAction({payload:e}){e.action===P_.aO.TEXTSETTEXT&&this.setState({text:this.getDataValue("text",e.value)})}render(){const{classEllipsis:e}=this;let{text:t}=this.state;return this.classEllipsis&&null!==this.maxLen&&t&&(t=(0,j_.$G)(t,2*this.maxLen)),`\n      <view id="container">\n        <text\n          id="text"\n          class="text ${e?"text-ellipsis":""}"\n          value="${t}"\n        ></text>\n      </view>\n    `}}class V_ extends R_{constructor(e){super(e),this.style={".image-img":{width:"100%",height:"100%"},".image-img-appicon":{borderRadius:5},".image-img-icon":{borderRadius:"50%"}},this.state={imgUrl:""},this.classAppIcon=!1,this.classIcon=!1,this.useBgMode=!1,this.baseType=void 0,this.useBgMode=this.getDataValueWithDefault("useBgMode",!1);const t=this.options.baseType||P_.v5.ICON;switch(this.baseType=t,t){case P_.v5.COMMON:this.initCommonComponent();break;case P_.v5.AD:this.initADComponent();break;case P_.v5.ICON:this.initIconComponent()}this.useBgMode,this.updateInnerStyle()}initCommonComponent(){this.state.imgUrl=this.getDataValueWithDefault("imgUrl","")}initIconComponent(){const e=this.getAdData(),t=[Hi.fY.APPLE_APP_STORE,Hi.fY.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===Hi.vK.CRT_SIZE_GRID,r=[Hi.fY.WE_CHAT_SHOP,Hi.fY.JD_URL].includes(e.product_type),o=[Hi.vK.CRT_SIZE_REWARD_VEDIO169,Hi.vK.CRT_SIZE_REWARD_VEDIO916,Hi.vK.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size);t?this.classAppIcon=!0:this.classIcon=!0;const i=[{path:["extBackComm","head_img"]},{path:["weapp_info","head_img"],condition:n},{path:["crtInfo","0","wxgame_video_card","thumb"],condition:o},{path:["appInfo","iconUrl"],condition:t},{path:["app","icon"],condition:!t},{path:["crtInfo","0","card_info","thumb"]},{value:"https://wxa.wxs.qq.com/images/wxapp/dianshang.png",condition:r},{value:"https://wxa.wxs.qq.com/images/wxapp/pinpai.png"}];this.state.imgUrl=(0,k_.Ze)(e,i)}initADComponent(){const e=this.getAdData();let t=e.image_url;if(!t.startsWith("http"))try{t=e.crtInfo[0].image_url||t}catch(e){}this.state.imgUrl=this.getDataValue("imgUrl")||t}doAction({payload:e}){e.action===P_.aO.IMAGESETSRC&&this.setState({imgUrl:this.getDataValue("imgUrl",e.value)})}render(){const{classAppIcon:e,classIcon:t}=this,n=this.baseType===P_.v5.AD,{imgUrl:r}=this.state,o=["image-img"];return e&&o.push("image-img-appicon"),t&&o.push("image-img-icon"),`\n      <view id="container" class="image">\n        <image\n          id="img"\n          ${n?'bubble-event="false"':""}\n          class="${o.join(" ")}"\n          src="${r}"\n        >\n      </view>\n    `}}class G_ extends R_{constructor(e){super(e),this.style={".button":{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#07c160",padding:"0 12px",borderRadius:3,overflow:"hidden"},".button-text":{textAlign:"center",color:"#fff",fontSize:16},".button-download-progress":{position:"absolute",left:0,top:0,width:0,height:"100%",overflow:"hidden"},".download-text-container":{position:"absolute",top:0,left:0,width:0,height:"100%",flexDirection:"row",alignItems:"center",justifyContent:"center"}},this.state={buttonText:""},this.downloadProgress=0,this.isHandleDownload=!1,this.handleAdCustomEvent=({action:e,value:t={}})=>{e===P_.A$.CHANGEADBTNTEXT&&t.text&&(this.setState({buttonText:t.text}),t.progress&&(this.downloadProgress=t.progress))},this.handleButtonClick=e=>{this.emitAdCustomEvent(P_.A$.BTNTAP,{event:e,isHandleDownload:this.isHandleDownload}),this.emitComponentEvent(P_.Y8.BUTTONTAP,{event:e})};const t=this.options.baseType||P_.Dx.LOGICCOMMON;t===P_.Dx.COMMON?this.initCommonComponent():t===P_.Dx.LOGICCOMMON&&this.initLogicCommonComponent(),this.updateInnerStyle(),this.setStyle("downloadProgressBar",{width:`${this.downloadProgress}%`}),this.setStyle("downloadTextContainer",{width:1e4/this.downloadProgress+"%"}),this.onClick("container",this.handleButtonClick,{isReport:!0,clickType:1})}destroy(){super.destroy(),this.offClick("container",this.handleButtonClick)}getButtonText(){return this.state.buttonText}initCommonComponent(){this.state.buttonText=this.getDataValueWithDefault("buttonText","")}initLogicCommonComponent(){const e=this.getAdData(),t=this.getDataValue("buttonText");t?this.state.buttonText=t:e.product_type===h_.kv.WE_CHAT?this.state.buttonText=e.app.isFollowed?"查看":e.button_action.button_text:this.state.buttonText=e.button_action.button_text,this.addAdCustomListener(this.handleAdCustomEvent),this.isHandleDownload=this.getDataValueWithDefault("isHandleDownload",!1)}doAction({payload:e}){e.action===P_.aO.BUTTONSETTEXT&&this.setText(e.value)}setText(e){this.setState({buttonText:this.getDataValue("text",e)})}render(){const{isHandleDownload:e}=this,{buttonText:t}=this.state;return`\n      <view id="container" class="button" bubbleEvent="false">\n        <text id="button-text" class="button-text" value="${t}"></text>\n        ${e?`\n          <view\n            id="download-progress-bar"\n            class="button-download-progress"\n          >\n            <view id="download-text-container" class="download-text-container"\n              <text id="download-text" class="button-text" value="${t}"></text>\n            </view>\n          </view>\n        `:""}\n      </view>\n    `}}const $_={videoDataMap:{}},H_=(e,t={})=>{e&&($_.videoDataMap[e]=t)};class Z_ extends R_{constructor(e){super(e),this.style={".video-context":{zIndex:1000008},".click-mask":{position:"absolute",zIndex:1000008,borderRadius:6,width:"100%",height:"100%"},".video-voice-box":{zIndex:1000009,position:"absolute",width:24,height:24},".video-voice-box-topleft":{top:10,left:10},".video-voice-box-topright":{top:10,right:10},".video-voice-box-bottomleft":{bottom:10,left:10},".video-voice-box-bottomright":{bottom:10,right:10},".video-count-down":{zIndex:1000009,position:"absolute",color:"#fff",textAlign:"right",fontSize:12,width:32,height:16,lineHeight:16},".video-count-down-topleft":{top:10,left:10},".video-count-down-topright":{top:10,right:10},".video-count-down-bottomleft":{bottom:10,left:10},".video-count-down-bottomright":{bottom:10,right:10},".video-voice-icon":{width:"100%",height:"100%"},".video-progress":{position:"absolute",zIndex:9,bottom:0,left:0,right:0,height:3,backgroundColor:"#f2f2f2"},".video-progress-played":{width:0,height:3,backgroundColor:"#07c160"}},this.state={muted:!0,loop:!0,autoplay:!1,countDownNumber:null,isEndPageShowing:!1},this.src="",this.poster="",this.isShowVoice=!0,this.isShowProgress=!0,this.isShowCountDown=!1,this.isShowEndPage=!1,this.voicePlacement=null,this.countDownPlacement=null,this.voiceIconSrc="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",this.mutedIconSrc="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",this.currentTime=0,this.videoDuration=0,this.objectFit="contain",this.baseType=void 0,this.toggleMuted=()=>{this.setState({muted:!this.state.muted}),this.emitComponentEvent(P_.XP.MUTEDCHANGE,{muted:this.state.muted})},this.handleCustomEvent=({action:e,value:t={}})=>{switch(e){case P_.A$.ADSHOWHALF:this.state.isEndPageShowing||this.operateVideoPlay("play");break;case P_.A$.ADHIDEHALF:this.state.isEndPageShowing||this.operateVideoPlay("pause");break;case P_.A$.APPENTERBACKGROUND:{const e=Math.min(this.currentTime,this.videoDuration);t.inAdDetail?this.reportVideoPlay("partial","exit",e):this.reportVideoPlay("partial","app_exit",e);break}case P_.A$.ENDPAGEINIT:this.isShowEndPage=this.getDataValueWithDefault("isShowEndPage",!1),this.isShowEndPage&&this.setState({loop:!1});break;case P_.A$.ENDPAGEHIDE:this.isShowEndPage&&(this.setState({isEndPageShowing:!1}),this.operateVideoPlay("play"));break;case P_.A$.ENDPAGESHOW:this.isShowEndPage&&this.setState({isEndPageShowing:!0});break;case P_.A$.BTNTAP:this.reportVideoPlay(this.currentTime<this.videoDuration?"partial":"complete","land",this.videoDuration)}},this.handleError=e=>{this.adProxy.reportAdMonitorData(P_.IN.AD_VIDEO_LOAD_FAILED,e)},this.handleTimeUpdate=e=>{var t;const{duration:n,position:r}=e;if(null==n||null==r)return;const o=Math.min(1,r/n);this.setStyle("videoProgressPlayed",{width:100*o+"%"}),this.isShowCountDown&&this.setState({countDownNumber:`${Math.ceil(n-r)}s`}),this.emitComponentEvent(P_.XP.VIDEOTIMEUPDATE,{event:e,rate:o}),this.currentTime=1e3*r,this.videoDuration||(this.videoDuration=1e3*n);const i={currentTime:this.currentTime,duration:this.videoDuration},a=(null===(t=this.manager)||void 0===t?void 0:t.adCustomId)||this.adCustomId;H_(a,i)},this.handleEnded=e=>{var t;this.emitComponentEvent(P_.XP.VIDEOENDED,{event:e}),this.emitAdCustomEvent(P_.A$.TRIGGEREVENT,{eventName:"videoended",detail:{baseType:this.baseType}}),this.reportVideoPlay("viewable","end",this.videoDuration),k.cj&&this.reportVideoPlay("partial","start");const n={currentTime:this.videoDuration,duration:this.videoDuration},r=(null===(t=this.manager)||void 0===t?void 0:t.adCustomId)||this.adCustomId;H_(r,n),this.currentTime=0,this.isShowEndPage&&this.emitAdCustomEvent(P_.A$.SHOWENDPAGE,{videoId:this.id}),this.setState({countDownNumber:null})},this.handlePlay=e=>{this.emitComponentEvent(P_.XP.VIDEOPLAY,{event:e}),this.emitAdCustomEvent(P_.A$.ADVIDEOPLAY),this.reportVideoPlay("partial","start",Math.min(this.currentTime,this.videoDuration))},this.handlePause=e=>{this.emitComponentEvent(P_.XP.VIDEOPAUSE,{event:e}),this.emitAdCustomEvent(P_.A$.ADVIDEOPAUSE),this.reportVideoPlay("partial","close",Math.min(this.currentTime,this.videoDuration))},this.baseType=this.options.baseType||P_.jn.AD,this.baseType===P_.jn.COMMON?this.initCommonComponent():this.baseType===P_.jn.AD&&this.initADComponent(),this.isShowVoice=this.getDataValueWithDefault("isShowVoice",!0),this.voicePlacement=this.getDataValueWithDefault("voicePosition","bottomleft").toLowerCase(),this.state.muted=this.getDataValueWithDefault("muted",!0),this.state.loop=this.getDataValueWithDefault("loop",!0),this.isShowProgress=this.getDataValueWithDefault("isShowProgress",!0),this.isShowCountDown=this.getDataValueWithDefault("isShowCountDown",!1),this.countDownPlacement=this.getDataValueWithDefault("countDownPosition","topright").toLowerCase(),this.objectFit=this.getDataValueWithDefault("objectFit","contain"),this.updateInnerStyle(),this.bindEvent(),setTimeout((()=>{this.emitComponentEvent(P_.XP.MUTEDCHANGE,{muted:this.state.muted})}),0)}destroy(){super.destroy(),this.unbindEvent(),this.removeAdCustomListener()}bindEvent(){this.onTimeUpdate("video",this.handleTimeUpdate),this.onEnded("video",this.handleEnded),this.onPlay("video",this.handlePlay),this.onPause("video",this.handlePause),this.onError("video",this.handleError),this.onClick("videovoicebox",this.toggleMuted,{clickType:1})}unbindEvent(){this.offTimeUpdate("video",this.handleTimeUpdate),this.offEnded("video",this.handleEnded),this.offPlay("video",this.handlePlay),this.offPause("video",this.handlePause),this.offError("video",this.handleError),this.offClick("videovoicebox",this.toggleMuted)}initCommonComponent(){this.src=this.getDataValueWithDefault("src",""),this.poster=this.getDataValueWithDefault("poster","")}initADComponent(){var e;const t=this.getAdData();this.src=this.getDataValue("src")||(0,k_.U2)(t,["video_info","videoUrl"])||(0,k_.U2)(t,["short_video","video_url"]),this.poster=this.getDataValue("poster")||(0,k_.U2)(t,["video_info","thumbUrl"])||(0,k_.U2)(t,["short_video","trumb_url"]),this.addAdCustomListener(this.handleCustomEvent),this.videoDuration=(0,k_.U2)(t,["wx_game_video","short_video","video_duration"])||(0,k_.U2)(t,["crtInfo","0","short_video","video_duration"],0),this.videoDuration=1e3*this.videoDuration;const n={currentTime:0,duration:this.videoDuration},r=(null===(e=this.manager)||void 0===e?void 0:e.adCustomId)||this.adCustomId;H_(r,n),this.emitAdCustomEvent(P_.A$.REPORTTIMEPOINT,{key:"p8"})}doAction({payload:e}){switch(e.action){case P_.aO.VIDEOTOGGLEMUTED:this.toggleMuted();break;case P_.aO.VIDEOPLAY:this.operateVideoPlay("play");break;case P_.aO.VIDEOPAUSE:this.operateVideoPlay("pause");break;case P_.aO.VIDEOSTOP:this.operateVideoPlay("stop")}}operateVideoPlay(e){if(["play","pause","stop","seek"].includes(e)){this.setState({autoplay:"play"===e});const t=this.getElementById("video");null!=t&&t[e]&&t[e]()}}reportVideoPlay(e,t,n=0){this.baseType===P_.jn.AD&&this.emitAdCustomEvent(P_.A$.REPORTVIDEOPLAY,{playType:e,conditionType:t,videoInfo:{playDuration:n,videoDuration:this.videoDuration,isMuted:this.state.muted,isAutoPlay:this.state.autoplay}})}render(){const{src:e,poster:t,isShowVoice:n,mutedIconSrc:r,voiceIconSrc:o,voicePlacement:i,countDownPlacement:a,isShowProgress:s,isShowCountDown:c,objectFit:l}=this,{muted:d,loop:u,autoplay:p,countDownNumber:h,isEndPageShowing:f}=this.state,g=["video-voice-box"],_=["video-count-down"];return g.push(`video-voice-box-${i}`),_.push(`video-count-down-${a}`),`\n      <view id="container" class="video">\n        <video\n          id="video"\n          class="video-context"\n          src="${e}"\n          poster="${t}"\n          controls="false"\n          muted="${d}"\n          loop="${u}"\n          autoplay="${p}"\n          auto-insert="false"\n          under-game-view="false"\n          show-progress="false"\n          show-play-btn="false"\n          show-center-play-btn="false"\n          show-fullscreen-btn="false"\n          enable-progress-gesture="false"\n          object-fit="${l}"\n        >\n          ${!f&&n?`\n            <view id="videovoicebox" bubble-event="false" class="${g.join(" ")}">\n              <image\n                src="${d?r:o}"\n                id="videovoiceimg"\n                class="video-voice-icon"\n              ></image>\n            </view>\n          `:""}\n          ${s?'\n            <view id="video-progress" class="video-progress">\n              <view id="video-progress-played" class="video-progress-played"></view>\n            </view>\n          ':""}\n          ${!f&&c&&h?`\n            <text id="video-count-down" class="${_.join(" ")}" value="${h}"></text>\n          `:""}\n        </video>\n      </view>\n    `}}class Q_ extends R_{constructor(e){super(e),this.style={".feedback-icon":{width:6,height:4,marginLeft:2,position:"relative"},".close-icon":{width:6,height:6,marginLeft:2,position:"relative"},".feedback":{position:"relative",zIndex:1000010,padding:6},".feedback-tag-container":{flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative",padding:"2px 4px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2},".feedback-hot-click":{position:"absolute",top:-10,left:-10,right:-10,bottom:-10},".feedback-tag-text":{fontSize:10,height:12,lineHeight:12,color:"#fff"},".feedback-list":{position:"absolute",width:134,flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",borderWidth:1,borderColor:"rgba(0, 0, 0, 0.03)",borderRadius:4,zIndex:1000011},".feedback-list-bottomleft":{top:26,left:6},".feedback-list-bottomright":{top:26,right:6},".feedback-list-topleft":{bottom:26,left:6},".feedback-list-topright":{bottom:26,right:6},".feedback-btn":{position:"relative",width:132,height:32,lineHeight:32,color:"#566a97",fontSize:12,opacity:.9,textAlign:"center",zIndex:1000011},".feedback-title":{color:"#000",zIndex:1000011},".feedback-line":{width:100,height:1,opacity:.03,backgroundColor:"#000",zIndex:1000011}},this.state={isShowFeedback:!1,isShowFeedbackMenu:!1,position:null},this.feedbackIconSrc="https://wxa.wxs.qq.com/images/wxapp/feedback_icon.png",this.closeIconSrc="https://wxa.wxs.qq.com/images/wxapp/close.png",this.dislikeReasonHandlers={},this.baseType=void 0,this.handleTagClick=e=>{if(this.baseType===P_.Eo.SIMPLE)return this.handleSimpleTagClick(e);const{isShowFeedback:t,isShowFeedbackMenu:n}=this.state;t||n?this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}):(this.setState({isShowFeedback:!0}),this.updateMenuPosition(),this.updateInnerStyle(),this.emitAdCustomEvent(P_.A$.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"广告角标"}),this.emitComponentEvent(P_.nf.TAGTAP,{event:e}))},this.handleDislikeClick=e=>{this.setState({isShowFeedback:!1,isShowFeedbackMenu:!0}),this.updateMenuPosition(),this.updateInnerStyle(),this.emitComponentEvent(P_.nf.DISLIKETAP,{event:e})},this.handleFeedbackBtnClick=e=>{this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent(P_.nf.FEEDBACKBTNTAP,{event:e}),this.emitAdCustomEvent(P_.A$.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"投诉"}),this.emitAdCustomEvent(P_.A$.FEEDBACKBTNTAP)},this.checkUseApx(),this.baseType=this.options.baseType||P_.Eo.COMMON,this.bindEvent(),this.updateInnerStyle()}destroy(){super.destroy(),this.unbindEvent()}bindEvent(){this.onClick("feedbackTagContainer",this.handleTagClick),this.onClick("feedbackBtn",this.handleFeedbackBtnClick),this.onClick("dislike",this.handleDislikeClick),this.dislikeReasonHandlers={isdismatch:this.onClick("isdismatch",this.handleDislikeReasonClick.bind(this,1)),isduplicate:this.onClick("isduplicate",this.handleDislikeReasonClick.bind(this,5)),isbadad:this.onClick("isbadad",this.handleDislikeReasonClick.bind(this,4))}}unbindEvent(){this.offClick("feedbackTagContainer",this.handleTagClick),this.offClick("feedbackBtn",this.handleFeedbackBtnClick),this.offClick("dislike",this.handleDislikeClick);for(const e of Object.keys(this.dislikeReasonHandlers)){const t=this.dislikeReasonHandlers[e];this.offClick(e,t)}}updateMenuPosition(){this.setState({position:this.getDataValueWithDefault("menuPosition","bottomleft").toLowerCase()})}handleSimpleTagClick(e){this.emitAdCustomEvent(P_.A$.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:6}),this.emitAdCustomEvent(P_.A$.HIDEAD),this.emitComponentEvent(P_.nf.TAGTAP,{event:e})}handleDislikeReasonClick(e,t){this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent(P_.nf.DISLIKEREASONTAP,{event:t}),this.emitAdCustomEvent(P_.A$.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:e});const n=this.getDataValueWithDefault("afterDislike","showTip");"showTip"===n?this.emitAdCustomEvent(P_.A$.SHOWFEEDBACK):"hide"===n&&this.emitAdCustomEvent(P_.A$.HIDEAD)}render(){const{isShowFeedback:e,isShowFeedbackMenu:t,position:n}=this.state,r=["feedback-list"],o=["feedback-list"];n&&(r.push(`feedback-list-${n.toLowerCase()}`),o.push(`feedback-list-${n.toLowerCase()}`));const i=this.baseType===P_.Eo.SIMPLE?this.closeIconSrc:this.feedbackIconSrc;return`\n      <view id="container" class="feedback" bubble-event="false">\n        <view id="feedback-tag-container" class="feedback-tag-container">\n          <text id="feedback-tag" class="feedback-tag-text" value="广告"></text>\n          <image id="feedback-icon" class="${this.baseType===P_.Eo.SIMPLE?"close-icon":"feedback-icon"}" src="${i}"></image>\n        </view>\n        ${e?`\n          <view id="menu1" key="menu1" class="${r.join(" ")}">\n            <text class="feedback-btn feedback-title" value="由赞助商提供的内容"></text>\n            <view class="feedback-line"></view>\n            <text id="dislike" class="feedback-btn" value="不感兴趣"></text>\n            <view class="feedback-line"></view>\n            <text id="feedback-btn" class="feedback-btn" value="投诉"></text>\n          </view>\n        `:""}\n        ${t?`\n          <view id="menu2" key="menu2" class="${o.join(" ")}">\n            <text id="isdismatch" class="feedback-btn" value="与我无关"></text>\n            <view class="feedback-line"></view>\n            <text id="isduplicate" class="feedback-btn" value="重复收到多次"></text>\n            <view class="feedback-line"></view>\n            <text id="isbadad" class="feedback-btn" value="内容太差"></text>\n          </view>\n        `:""}\n      </view>\n    `}}class Y_ extends R_{constructor(e){super(e),this.style={".end":{position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1000099,backgroundColor:"rgba(0, 0, 0, 0.8)",flexDirection:"column",justifyContent:"center",alignItems:"center",hidden:!0},".end-refresh":{position:"absolute",left:0,bottom:0,flexDirection:"row",alignItems:"center"},".end-refresh-text":{color:"#D8D8D8",opacity:.5}},this.state={isShowEndPage:!1},this.children=[],this.refreshIconSrc="https://wxa.wxs.qq.com/images/wxapp/refresh_icon.png",this.showTime=0,this.cardInfo=void 0,this.backgroundImage="",this.exposured=!1,this.viewableExposured=!1,this.viewableExposureTimer=null,this.handleAdCustomListener=({action:e})=>{switch(e){case P_.A$.SHOWENDPAGE:this.setState({isShowEndPage:!0}),this.emitAdCustomEvent(P_.A$.ENDPAGESHOW),this.showTime=Date.now(),!this.exposured&&this.reportEndPageExposure(),this.exposured=!0,this.viewableExposured||(this.viewableExposureTimer=setTimeout((()=>{!this.viewableExposured&&this.reportEndPageExposure(!0)}),1e3)),this.emitComponentEvent(P_.H_.SHOW);break;case P_.A$.APPENTERBACKGROUND:this.state.isShowEndPage&&this.reportEndPageDuration();break;case P_.A$.APPENTERFOREGROUND:this.state.isShowEndPage&&(this.showTime=Date.now());break;case P_.A$.ADSHOWHALF:this.state.isShowEndPage&&(this.showTime=Date.now(),this.viewableExposured||(this.viewableExposureTimer=setTimeout((()=>{!this.viewableExposured&&this.reportEndPageExposure(!0)}),1e3)));break;case P_.A$.ADHIDEHALF:this.state.isShowEndPage&&(this.reportEndPageDuration(),this.viewableExposureTimer&&(clearTimeout(this.viewableExposureTimer),this.viewableExposureTimer=null))}},this.handleReplay=()=>{this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(P_.A$.ENDPAGEHIDE),this.emitComponentEvent(P_.H_.HIDE),this.reportEndPage({act_type:1003}),this.emitComponentEvent(P_.H_.REPLAY)},this.handleContainerClick=e=>{var t;this.reportEndPage({act_type:1002}),null===(t=this.reporter)||void 0===t||t.handleClick(e,2)};const t=this.getAdData();this.cardInfo=(0,j_.U2)(t,["crtInfo",0,"card_info"],{});const{end_page_type:n}=this.cardInfo;n&&(this.backgroundImage=this.cardInfo.head_bg_img,this.setStyle("refresh",{padding:"13apx 12apx"}),this.setStyle("refreshIcon",{height:"16apx",width:"16apx",marginRight:"4apx"}),this.setStyle("refreshText",{lineHeight:"18apx",fontSize:"14apx"}),this.children=this.getChildren(),this.bindEvent(),this.updateInnerStyle(),setTimeout((()=>{this.emitAdCustomEvent(P_.A$.ENDPAGEINIT)}),0))}updateState(e){this.state.isShowEndPage!==e.isShowEndPage&&this.setStyle("container",{hidden:!e.isShowEndPage})}getSubComponentProps(e,t){return I()(I()({},this.getCommonSubComponentProps()),{},{template:this.children[parseInt(t,10)]})}bindEvent(){this.onClick("contiainer",this.handleContainerClick),this.onClick("refresh",this.handleReplay),this.addAdCustomListener(this.handleAdCustomListener)}destroy(){super.destroy(),this.offClick("contiainer",this.handleContainerClick),this.offClick("refresh",this.handleReplay),this.removeAdCustomListener()}reportEndPageDuration(){this.showTime&&(this.reportEndPage({act_type:1006,exposure_duration:Date.now()-this.showTime}),this.showTime=0)}reportEndPageExposure(e=!1){let t=0;e&&(t=1,this.viewableExposured=!0),this.reportEndPage({act_type:t})}reportEndPage(e){this.emitAdCustomEvent(P_.A$.REPORTENDPAGE,{data:e})}doAction({payload:e}){e.action===P_.aO.ENDPAGEHIDE&&(this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(P_.A$.ENDPAGEHIDE),this.emitComponentEvent(P_.H_.HIDE))}getChildren(){const e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];const t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={},o=this.template.id;r.feedBack={type:"feedback",id:`${o}_endPageFeedback`,style:{position:"absolute",zIndex:99,top:"2px",left:"2px"},options:{events:{tagTap:[{action:P_.aO.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:P_.aO.TRIGGEREVENT,value:{eventName:P_.H_.VIDEODISLIKE}}]}}},r.iconBig={type:"image",id:`${o}_endPageIconBig`,style:{width:"40apx",height:"40apx",marginBottom:"7apx"},options:{baseType:2}},r.nickBig={type:"text",id:`${o}_endPageNickBig`,style:{marginBottom:"6apx"},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",height:"24apx",lineHeight:"24apx"}}}}},r.descSmall={type:"text",id:`${o}_endPageDescSmall`,style:{marginBottom:"23apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",opacity:.5,fontSize:"14apx",lineHeight:"20apx"}}}}},r.button={type:"button",id:`${o}_endPageButton`,style:{},options:{innerStyles:{container:{style:{height:"32apx",backgroundColor:"#07C160",borderRadius:"4apx",padding:"0 12.5apx",paddingBottomExpr:"#like($const.systemInfo.osVersion, 'Android') ? '1px' : '0'"}},buttonText:{style:{fontSize:"16apx",color:"#fff"}}},baseType:2,events:{buttonTap:[{action:P_.aO.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1001},n)}}]}}},r.iconSmall={type:"image",id:`${o}_endPageIconSmall`,style:{width:"20apx",height:"20apx",marginRight:"8apx"},options:{baseType:2}},r.nickSmall={type:"text",id:`${o}_endPageNickSmall`,style:{},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"15apx",height:"18apx",lineHeight:"18apx",opacity:".5"}}}}},r.layoutSmall={type:"layout",id:`${o}_endPageLayoutSmall`,style:{marginBottom:"16apx"},options:{baseType:2},children:[]},r.layoutSmall.children.push(r.iconSmall),r.layoutSmall.children.push(r.nickSmall),r.descBig={type:"text",id:`${o}_endPageDescBig`,style:{marginBottom:"32apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",lineHeight:"22apx"}}}}};const i=this.getDataValue("childrenConf");if(i)for(const e of Object.keys(i))r[e]&&(0,j_.Ee)(r[e],i[e]);let a=[];return a=2===this.cardInfo.end_page_type?[r.feedBack,r.layoutSmall,r.descBig,r.button]:[r.feedBack,r.iconBig,r.nickBig,r.descSmall,r.button],3===e?a.concat(this.template.children||[]):a}render(){const{backgroundImage:e,children:t,refreshIconSrc:n}=this;return`\n      <view\n        id="container"\n        class="end"\n        bubble-event="false"\n      >\n        ${e?`<image src="${e}"></image>`:""}\n        ${t.map(((e,t)=>`\n          <CustomItem get-props="getSubComponentProps:${t}"></CustomItem>\n        `))}\n        <view id="refresh" class="end-refresh">\n          <image id="refresh-icon" class="end-refresh-icon" src=${n}></image>\n        </view>\n      </view>\n    `}}Y_.subComponents=()=>({CustomItem:M_});class z_ extends R_{constructor(e){super(e,{autoRegister:!1}),this.forArr=void 0,this.forType=this.options.baseType||P_.bk.COMMON,this.forArr=this.getDataValueWithDefault("forArr",[]),this.forType===P_.bk.COMMON?this.forArr=this.getDataValueWithDefault("forArr",[]):this.forType===P_.bk.ADS&&(this.forArr=this.getAdDatas())}getSubComponentProps(e,t,n){const{template:r,forArr:o}=this;return I()(I()({},this.getCommonSubComponentProps()),{},{idPrefix:this.idPrefix+(r.id||"")+t,forType:this.forType,forItem:o[Number(t)],template:r.children[Number(n)],forIndex:Number(t)})}render(){const{template:e}=this.props;return`<Fragment>${this.forArr.map(((t,n)=>e.children.map(((e,t)=>`\n        <CustomItem get-props="getSubComponentProps:${n}:${t}"></CustomItem>\n      `)).join("\n"))).join("\n")}</Fragment>`}}z_.subComponents=()=>({CustomItem:M_});var q_=c(9890);let J_=1;const K_=(e,t)=>{J_=e/t},X_=/([+-]?\d+(?:\.\d+)?)apx/g,em=/([+-]?\d+(?:\.\d+)?)rpx/g,tm=e=>null!=e&&e.replace?e.replace(em,((e,t)=>`${(e=>{if(0===e)return 0;const{screenWidth:t}=q_.S;let n=e/750*t;return n<0&&(n=-n),n=Math.floor(n+1e-4),e<0?-n:n})(Number(t))}px`)):e;class nm extends R_{constructor(e){super(e),this.style={".carousel":{overflow:"hidden",position:"relative"},".carousel-list":{position:"relative",zIndex:1},".carousel-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".carousel-col":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".carousel-mask":{position:"absolute",width:"100%",height:"100%",zIndex:2000001,backgroundColor:"rgba(0, 0, 0, 0)"}},this.baseType=void 0,this.showCount=void 0,this.allCount=void 0,this.animateCount=void 0,this.allIndexList=void 0,this.size=void 0,this.duration=void 0,this.isViewable=!1,this.isPlaying=!1,this.animated=!1,this.timerSet=new Set,this.disabled=void 0,this.isCol=void 0,this.handleMaskClick=e=>{const t=null!=this.moveTime?(Date.now()-this.moveTime)/this.duration*this.size:0;let n;n=this.animated?-this.animateCount*this.size+t:-t;const r=(this.isCol?e.relativeY:e.relativeX)-n,o=Math.floor(r/this.size);this.emitComponentEvent(P_.Zw.UNITTAP,{index:o,event:e})},this.handleAdCustomEvent=({action:e})=>{[P_.A$.ADSHOWHALF].includes(e)?(this.isViewable=!0,this.autoplay()):[P_.A$.ADHIDEHALF].includes(e)&&(this.isViewable=!1,this.clearTimers())},this.moveTime=null,this.baseType=this.options.baseType||P_.Af.ROWLOOP,this.showCount=this.getDataValueWithDefault("showCount",0),this.allCount=this.getDataValueWithDefault("allCount",0),this.animateCount=this.allCount-this.showCount,this.size=((e,t=!0)=>{const n=t?tm(e):e;return n&&"string"==typeof n?n.replace(X_,((e,t)=>`${Number(t*J_)}px`)):n})(this.getDataValueWithDefault("size","0px")).replace("px",""),this.duration=this.getDataValueWithDefault("duration",1500),this.disabled=this.getDataValueWithDefault("disabled",!1),this.allIndexList=Array.from({length:this.allCount}).map(((e,t)=>t)),this.isCol=this.baseType===P_.Af.COLUMNLOOP,this.onClick("mask",this.handleMaskClick),this.baseType===P_.Af.ROWLOOP?this.initCarousel("width"):this.baseType===P_.Af.COLUMNLOOP&&this.initCarousel("height"),this.updateInnerStyle()}destroy(){super.destroy(),this.offClick("mask",this.handleMaskClick),this.clearTimers(),this.isViewable=!1}initCarousel(e){this.setStyle("container",{[e]:this.showCount*this.size}),this.setStyle("list",{[e]:this.allCount*this.size}),this.addAdCustomListener(this.handleAdCustomEvent)}clearTimers(){for(const e of this.timerSet)clearTimeout(e)}autoplay(){var e=this;return ue()((function*(){if(!e.isViewable||e.isPlaying)return;const t=e.baseType===P_.Af.ROWLOOP?"left":"top";if(e.disabled)e.emitComponentEvent(P_.Zw.SHOWCHANGE,{list:e.allIndexList.slice(0,e.showCount)||[]}),e.isPlaying=!1;else if(e.animateCount<=0)e.emitComponentEvent(P_.Zw.SHOWCHANGE,{list:e.allIndexList||[]}),e.isPlaying=!1;else{e.isPlaying=!0;for(let t=0;t<e.animateCount;t+=1){const{animated:n}=e,r=setTimeout((()=>{e.timerSet.delete(r);const o=n?e.allIndexList.slice(e.allCount-t-e.showCount,e.allCount-t):e.allIndexList.slice(t,t+e.showCount);e.emitComponentEvent(P_.Zw.SHOWCHANGE,{list:o})}),t*e.duration);e.timerSet.add(r)}e.moveTime=Date.now();try{yield e.doAnimation({id:"list",emitEvent:!1,animation:{keys:[{offset:0,[t]:e.animated?-1*e.animateCount*e.size:0},{offset:1,[t]:e.animated?0:-1*e.animateCount*e.size}],duration:e.duration*e.animateCount,easing:"linear"}})}catch(e){}e.animated=!e.animated,e.isPlaying=!1,e.moveTime=null;const n=setTimeout((()=>{e.timerSet.delete(n),e.autoplay()}),e.duration/4);e.timerSet.add(n)}}))()}getCustomItemProps(e,t){return I()(I()({},this.getCommonSubComponentProps()),{},{template:this.props.template.children[parseInt(t,10)]})}render(){const{template:{children:e}}=this.props,{baseType:t,allCount:n,showCount:r}=this;if(!(e&&e.length&&n&&r))return"<view></view>";return`\n      <view id="container" class="carousel">\n        <view id="mask" class="carousel-mask"></view>\n        <view id="list" class="${["carousel-list",t===P_.Af.ROWLOOP?"carousel-row":"carousel-col"].join(" ")}">\n          ${e.map(((e,t)=>`\n            <CustomItem get-props="getCustomItemProps:${t}"></CustomItem>\n          `)).join("\n")}\n        </view>\n      </view>\n    `}}nm.subComponents=()=>({CustomItem:M_});class rm extends R_{constructor(e){super(e),this.style={".countdown":{position:"relative",flexDirection:"row",height:32,alignItems:"center"},".countdown-background":{position:"absolute",top:0,bottom:0,left:0,right:0,height:32,background:"rgba(0, 0, 0, 0.15)",border:"0.5px solid rgba(255, 255, 255, 0.254048)",borderRadius:16},".countdown-right":{position:"relative",height:32,flexDirection:"row",alignItems:"center",alignSelf:"flex-start",paddingLeft:63,paddingRight:12,justifyContent:"center",background:"rgba(0, 0, 0, 0.15)",borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,borderRadius:16},".countdown-container":{height:32,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative"},".countdown-text":{fontSize:14,height:20,lineHeight:20,width:14,color:"#fff",alignSelf:"center",position:"relative"},".countdown-value":{fontSize:14,height:20,lineHeight:20,width:11,color:"#fff",alignSelf:"center",position:"relative"},".split-line":{width:.5,height:18.5,marginRight:8.5,position:"relative",backgroundColor:"rgba(255, 255, 255, 0.25)"}},this.state={countdownValue:""},this.children=[],this.handleAdCustomEvent=({action:e,value:t={}})=>{if(e===P_.A$.CHANGECOUNTDOWN){const e=this.getElementById("countdownvalue"),n=2===t.value.toString().length?18:11;this.setStyle("countdownvalue",{width:n}),e&&(e.value=t.value)}},this.children=this.getChildren(),this.updateInnerStyle(),this.addAdCustomListener(this.handleAdCustomEvent)}destroy(){super.destroy()}getSubComponentProps(e,t){return I()(I()({},this.getCommonSubComponentProps()),{},{template:this.children[parseInt(t,10)]})}getChildren(){const e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];const t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={};r.feedBack={type:"feedback",id:"Countdown-Feedback",style:{position:"absolute",height:32,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1111999,left:12},options:{innerStyles:{container:{style:{height:32,padding:0}},feedbackTag:{style:{fontSize:14,width:28,height:20,lineHeight:20}},feedbackTagContainer:{style:{backgroundColor:"",borderRadius:0,padding:0,height:32,top:0,left:0}},feedbackIcon:{style:{marginLeft:4.5,width:9,height:6,marginTop:4}},menu1:{style:{top:40,left:0}},menu2:{style:{top:40,left:0}}},events:{tagTap:[{action:P_.aO.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:P_.aO.TRIGGEREVENT,value:{eventName:P_.H_.VIDEODISLIKE}}]},data:{}}};const o=this.getDataValue("childrenConf");if(o)for(const e of Object.keys(o))r[e]&&(0,j_.Ee)(r[e],o[e]);let i=[];return i=[r.feedBack],3===e?i.concat(this.template.children||[]):i}render(){const{children:e}=this;return`\n      <view id="container" class="countdown" bubble-event="false">\n        ${e.map(((e,t)=>`\n          <CustomItem get-props="getSubComponentProps:${t}"></CustomItem>\n        `))}\n        <view class="countdown-right">\n          <view id="split-line" class="split-line"></view>\n          <view id="countdown-container" class="countdown-container">\n            <text class="countdown-value" id="countdownvalue" value="5"></text>\n            <text class="countdown-text" value="秒"></text>\n          </view>\n        </view>\n      </view>\n    `}}rm.subComponents=()=>({CustomItem:M_});const om=B_;var im=c(780),am=c(3866),sm=c(9974);class cm extends sm.Z{}var lm=c(8997);const dm={container:{zIndex:1000005,top:0,left:0,overflow:"hidden",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column"},adMaterialBg:{position:"absolute",hidden:!1,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"}},um=Object.assign({},{container:{zIndex:1000005,top:0,left:0,position:"absolute",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",overflow:"hidden",backgroundColor:"#ffffff"},navigator:{hidden:!0,height:72,width:"100%",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column",overflow:"hidden"},adMaterialBg:{position:"absolute",hidden:!0,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"},adMaterialContainer:{hidden:!0,position:"absolute",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0,width:"100%"},adMaterialLandscape:{width:311,height:175,marginLeft:32,marginRight:32,borderRadius:8},adCardInfo:{flexDirection:"column",marginTop:32,width:311,height:150},adHeadInfo:{width:311,height:28,flexDirection:"row",alignItems:"center"},adHeadIcon:{width:16,height:16,marginRight:6,borderRadius:8},adversName:{width:88,height:28,lineHeight:28,fontSize:14,lineBreak:"ellipsis",color:"#ffffff",opacity:.6},adTitle:{marginTop:18,height:28,width:216,fontSize:24,color:"#ffffff"},appInfo:{flexDirection:"column",alignItems:"center",width:"100%",height:160,backgroundColor:"#ffffff"},appIcon:{borderRadius:24,marginTop:16,marginBottom:8,width:48,height:48},appName:{width:"100%",height:24,textAlign:"center",lineHeight:24,fontSize:17,color:"#000000"}},{adFeedbackList:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}},{topBar:{position:"absolute",justifyContent:"flex-start",flexDirection:"row",alignItems:"flex-start",left:0,top:40},adFeedback:{hidden:!1,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:2.5},splitLineLeft:{width:1,height:18.5,marginLeft:8.5,marginRight:8.5,backgroundColor:"rgba(255, 255, 255, 0.25)"},count:{marginLeft:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:9,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{width:15,height:32,lineHeight:32,color:"#ffffff",fontSize:14}},{card:{backgroundColor:"#ffffff",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:84,width:"100%"},adIcon:{borderRadius:20,opacity:.95,width:40,height:40,marginRight:8,marginBottom:12,marginLeft:16},adInformation:{marginBottom:12,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},adName:{height:24,lineHeight:24,fontSize:17,lineBreak:"ellipsis",color:"#000000",marginBottom:2},adWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:14},buttonContainer:{marginBottom:12,flex:1,flexDirection:"row",justifyContent:"flex-end",marginRight:16,marginLeft:12,overflow:"hidden"},button:{height:32,lineHeight:32,width:88,textAlign:"center",lineBreak:"ellipsis",fontSize:16,color:"#ffffff",backgroundColor:"#07c160",borderWidth:1,borderColor:"#07c160",borderRadius:3,marginRight:10,marginLeft:10}},{closeContainer:{flexDirection:"column",justifyContent:"flex-end",alignSelf:"flex-end",marginBottom:16,height:54},close:{height:32,lineHeight:32,width:60,marginLeft:12,marginRight:12,textAlign:"center",lineBreak:"ellipsis",fontSize:14,color:"#ffffff",borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"}},{tipsContainer:{marginTop:12,flex:1,height:32,width:"100%",flexDirection:"column",justifyContent:"center",overflow:"hidden"},tipsLineOne:{height:16,textAlign:"center",lineHeight:16,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11},tipsLineTwo:{height:16,lineHeight:16,textAlign:"center",lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11}},{adCloseTips:{hidden:!0,position:"absolute",overflow:"hidden",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0},adCloseTipsWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipsContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{mediaBottom:{backgroundColor:"#ffffff",borderRadius:8,height:24,width:"100%",alignSelf:"flex-end"}},{adButtonContainer:{width:375,height:64,overflow:"hidden",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.15)",borderRadius:2},adButton:{marginLeft:32,flex:1,height:28,lineHeight:28,lineBreak:"ellipsis",fontSize:17,color:"#ffffff",opacity:.9,borderRadius:3},actionIconContainer:{marginRight:32,flexDirection:"row",justifyContent:"center",alignItems:"center",width:12,height:14},actionIconWrap1:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},actionIconWrap2:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},iconArrow1:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow2:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5},iconArrow3:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow4:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5}}),pm={card:'\n  <view id="card">\n    <image id="ad-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/raphael/icon.png"></image>\n    <view id="ad-information" bubble-event="true">\n      <text id="ad-name" bubble-event="true" value="微信广告"></text>\n      <text id="ad-wording" bubble-event="true" value="本次封面广告赞助"></text>\n    </view>\n    <view id="button-container">\n      <text id="button" click-state="true" bubble-event="true" value="查看详情"></text>\n    </view>\n  </view>\n',appInfo:'\n  <view id="app-info">\n    <image id="app-icon"></image>\n    <text id="app-name"></text>\n  </view>\n',feedbackContent:'\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n',feedbackMenu:'\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n',topBar:'\n  <view id="top-bar">\n    <view id="count">\n      <view id="ad-feedback">\n        <text id="ad-text" value="广告" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n        <view id="split-line-left" bubble-event="true"></view>\n      </view>\n      <text id="count-down" value="5"></text>\n      <text id="count-down-append" value="秒"></text>\n    </view>\n  </view>\n',close:'\n  <view id="close-container">\n    <text id="close" click-state="true" bubble-event="true" value="跳过"></text>\n  </view>\n',gameTips:'\n  <view id="tips-container">\n    <text id="tips-line-one" value="抵制不良游戏，拒绝盗版游戏。 注意自我保护，谨慎受骗上当。"></text>\n    <text id="tips-line-two" value="适度游戏益脑，沉迷游戏伤身。 合理安排时间，享受健康生活。"></text>\n  </view>\n',closeTips:'\n  <view id="ad-close-tips">\n    <view id="ad-close-tips-wrap">\n      <text id="ad-close-tips-content" bubble-event="true" value="感谢你的反馈"></text>\n    </view>\n  </view>\n',mediaBottom:'\n  <view id="media-bottom">\n  </view>\n',adHeadInfo:'\n  <view id="ad-head-info" bubble-event="true">\n    <image id="ad-head-icon" bubble-event="true" src=""></image>\n    <text id="advers-name" value="" bubble-event="true"></text>\n  </view>\n',adTitle:'\n  <text id="ad-title" value="" bubble-event="true"></text>\n',adButtonContainer:'\n  <view id="ad-button-container">\n    <text id="ad-button" bubble-event="true" value=""></text>\n    <view id="action-icon-container">\n      <view id="action-icon-wrap-1">\n        <view id="icon-arrow-1"></view>\n        <view id="icon-arrow-2"></view>\n      </view>\n      <view id="action-icon-wrap-2">\n        <view id="icon-arrow-3"></view>\n        <view id="icon-arrow-4"></view>\n      </view>\n    </view>\n  </view>\n'},hm=(...e)=>(0,__._u)(...e),{root:fm}=u_()('\n  <view id="container">\n    <view id="navigator"></view>\n    <view id="ad-media">\n      <image id="ad-material-bg"></image>\n      <image id="ad-material" bubble-event="true"></image>\n      <view id="ad-material-container" bubble-event="true">\n        <image id="ad-material-landscape" bubble-event="true"></image>\n        <view id="ad-card-info" bubble-event="true"></view>\n      </view>\n    </view>\n  </view>\n');let gm=0,_m=0,mm=0,ym=0,vm=0,Am=0,bm=0,wm=0,Cm=!1,Im=!1,Em=!1,Sm="",Tm="",xm="",km="";const Pm=`${Hi.Lq}/adinfos.txt`,Dm=k.wZ?200:400,Om=2e3,Nm=function(e,t=!0){const n=(0,f_.Wj)(this).adProxy.isTriggerClick(e),r=n?0:1;return t&&Rm.call(this,e,r),n},Rm=function(e,t=0){var n;const r=(0,f_.Wj)(this);if(!r.container||!r.container.layoutBox)return;const{width:o,height:i}=r.container.layoutBox;let a=0;[0,2,3].includes(t)&&(r.clickCount+=1,a=r.clickCount);const s={slotid:Hi.DX[r.adType],costtype:null!==(n=r.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,click_time:Date.now(),click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(o,10)||0,ad_height:parseInt(i,10)||0,press_interval:e.pressInterval,block_click:t};return r.adProxy.reportTouchClick(s)},Mm=function(){const e=(0,f_.Wj)(this);let t=!1;return(0===e.startExposureTime||+new Date-e.startExposureTime<1e3)&&(t=!0),t},Lm=function(e,t){var n;const r=(0,f_.Wj)(this),{width:o,height:i}=r.container.style,a={click_button:e,cost_type:null!==(n=r.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,slotid:Hi.DX[r.adType],is_game:Cm?1:0,pageentertime:+new Date(r.adProxy.getProgramStartTime()),ad_width:parseInt(o,10)||0,ad_height:parseInt(i,10)||0,clientexptime:r.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:gm,screen_height:_m};return r.adProxy.reportAntifraud(a)},Bm=function(e){const t=(0,f_.Wj)(this),n=e.then((e=>/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0)).catch((()=>t.adProxy.reportFollow({result:"fail"})));hm(n,"splashAd","关注")},Fm=function(e){var t;const n=(0,f_.Wj)(this),r=+new Date,o={slotid:Hi.DX[n.adType],is_game:Cm?1:0,costtype:null!==(t=n.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,close_type:e,exposure_duration:r-n.startExposureTime-n.hideDuration,start_time:n.startExposureTime,close_time:r};return n.adProxy.reportCloseAction(o)},Wm=function(e){var t;const n=(0,f_.Wj)(this),r={slotid:Hi.DX[n.adType],is_game:Cm?1:0,costtype:null!==(t=n.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,button_type:e};return n.adProxy.reportAdEntranceExposure(r)},jm=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:n=0,secondGradeDesc:r="",feedbackReason:o=0}){const i=(0,f_.Wj)(this);e&&!n&&(i.clickFirstGradeTime=+new Date),i.adProxy.reportAdFeedbackData({adWidth:gm,adHeight:_m,adPosX:0,adPosY:0,expTime:i.startExposureTime,slotId:Hi.DX[i.adType],firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?i.clickFirstGradeTime:0,secondGradeId:n,secondGradeDesc:r,secondGradeTime:n?+new Date:0,feedbackReason:o})},Um=function(e=!1){const t=(0,f_.Wj)(this);if(!t.isShowed)return Promise.resolve();if(!t.data||!t.container.layoutBox)return(0,__.Vs)(100).then((()=>Um.call(this,e)));const{left:n,top:r,width:o,height:i}=t.container.layoutBox;if(!t.isShowedExposureReported){t.isShowedExposureReported=!0,t.startExposureTime=+new Date,t.adProxy.setTimePoint("p6");const e=oe.Z.onReady((()=>{t.adProxy.reportExposure({left:n,top:r,width:o,height:i,exposureType:"showed",source:t.source});const e="launch"===t.source?Hi.ET.firstShowSuccess:Hi.ET.secondShowSuccess;t.adProxy.reportAdMonitorData(e),t.adProxy.setSplashAdShowStatus()}));hm(e,"splashAd","原始")}if(!t.isViewableExposureReported){if(!e)return(0,__.Vs)(1e3).then((()=>Um.call(this,!0)));{t.adProxy.setTimePoint("p7"),t.isViewableExposureReported=!0,t.adProxy.isViewable=!0;const e=t.adProxy.reportExposure({left:n,top:r,width:o,height:i,exposureType:"viewable",source:t.source});hm(e,"splashAd","可视")}}return Promise.resolve()},Vm=function(e){const t=(0,f_.Wj)(this);if(!t.container||!t.container.layoutBox)return;const{left:n,top:r,width:o,height:i}=t.container.layoutBox,a=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-n,clickRelativeTop:e.absoluteY-r,pressInterval:e.pressInterval,left:n,top:r,width:o,height:i,source:t.source});return hm(a,"splashAd","点击"),a},Gm=function(e,t){const n=(0,f_.Wj)(this),{appInfo:{apkName:r,channelId:o,urlScheme:i},product_type:a,dest_type:s}=n.data;if(12===a&&k.wZ&&4===n.androidAppState&&i&&i.trim().length>0)Vm.call(this,e),Lm.call(this,t,e),n.adProxy.launchApplication(i).catch((()=>{})),n.lastJsapiName="launchApplication",n.isLandingPage=!0;else if(12===a&&k.wZ&&n.isYYBInstalled){Vm.call(this,e),Lm.call(this,t,e);const{aid:i,traceid:a,apurl:s}=n.adProxy.data,c=["ANDROIDWX.YYB.WX.ADVERTISE",a,i,r.replace(/\./g,"_"),"0",15,s.indexOf("ad.wx.com")>-1?1:0].join("."),l=`tmast://download?oplist=1,2&pname=${r}&channelid=${o}&via=${c}`;n.adProxy.launchApplication(l).catch((()=>{$m.call(this)})),n.lastJsapiName="launchApplication",n.isLandingPage=!0}else k.cj&&46===a&&6===s?Promise.race([Vm.call(this,e),(0,__.Vs)(500)]).then((()=>{Lm.call(this,t,e),$m.call(this)})).catch((()=>{Lm.call(this,t,e),$m.call(this)})):(Vm.call(this,e),Lm.call(this,t,e),$m.call(this))},$m=function(e={}){const t=(0,f_.Wj)(this),n=t.adProxy.land(e);return 23===t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(n.then((e=>{const n=/ok/.test(e.errMsg);n&&t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));const r=+new Date;var o;(t.lastJsapiStatus=0,t.lastJsapiCostTime=r-t.lastLandingTime,"private_addContact"===t.lastJsapiName)&&t.adProxy.reportLandingTime({slotId:Hi.DX[t.adType],costType:null!==(o=t.adProxy.data)&&void 0!==o&&o.is_cpm?1:2,openTime:t.lastLandingTime,closeTime:r,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:n?2:3,actTypeStr:n?"关注":"取消"})})).catch((()=>{t.lastJsapiStatus=1})),Bm.call(this,n)):n.then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===t.lastJsapiName||"navigateToMiniProgram"===t.lastJsapiName||"openADCanvas"===t.lastJsapiName||"launchApplication"===t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((e=>{t.lastJsapiStatus=1,t.adProxy.reportAdMonitorData(Hi.ET.landingPageFail,{source:t.source,msg:e})})),n},Hm=function(e){const t=(0,f_.Wj)(this);for(const n of e)t[n]&&clearTimeout(t[n])},Zm=function(){var e;const t=(0,f_.Wj)(this);t.eventsMap={},null!==(e=t.appInfo)&&void 0!==e&&e.style&&(t.appInfo.style.top=16),t.componentsRenderred=!1,t.firstInserted=!1,t.adFeedbackInserted=!1,t.isDynamic=!1,t.isShowedExposureReported=!1,t.startExposureTime=0,t.isViewableExposureReported=!1,t.isShowed=!1,t.adProxy.isViewable=!1,t.isCheckAdRequest=!0,t.clickCount=0,t.lastLandingTime=0,t.lastJsapiName="",t.lastJsapiStatus=0,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.hideTime=0,t.hideDuration=0,t.isClosing=!1,t.isShowCloseTip=!1,t.clickFirstGradeTime=0,t.source="",Hm.call(this,["countTimer"]),oe.Z.onReady((()=>{var e,n,r;t.adProxy.reportTimePoints({slotid:Hi.DX[t.adType],costtype:null!==(e=t.adProxy.data)&&void 0!==e&&e.is_cpm?1:2,splash_instance_id:null===(n=t.showInfo)||void 0===n?void 0:n.instanceId,scene:null===(r=t.showInfo)||void 0===r?void 0:r.scene,extInfo:{adInfos:t.adInfos}})}))},Qm=function(e={},t){t&&Fm.call(this,t),(0,lm.R0)(e)},Ym=function(e={},t={}){return(0,f_.Wj)(this).adProxy.fetch(!1,e,t)},zm=function(){const e=(0,f_.Wj)(this);if((k.wZ||k.cj)&&!Em)try{e.adFetchResult=Ym.call(this).catch((()=>{})),e.adProxy.reportAdMonitorData(Hi.ET.OTHER_ADS_EMIT_FETCH)}catch(e){}},qm=function(){var e;const t=(0,f_.Wj)(this).data||{};let n={};if(null!==(e=t.crtInfo)&&void 0!==e&&e.card_info)n=t.crtInfo.card_info;else if(t.crtInfo&&t.crtInfo.length>0){const e=t.crtInfo?t.crtInfo[0]:{};n=null!=e&&e.card_info?e.card_info:{}}return n},Jm=function(){var e,t;const n=(0,f_.Wj)(this),r=+new Date-n.startExposureTime-n.hideDuration;let o=5e3;(null==n||null===(e=n.data)||void 0===e||null===(t=e.condition)||void 0===t?void 0:t.widget_gray_splashad_show_duration)>=o&&(o=n.data.condition.widget_gray_splashad_show_duration);const i=o-r;if(i>=0){const e=Math.ceil(i/1e3).toString();n.countDown&&(n.countDown.value=e),n.tplComponent&&n.tplComponent.emitAdCustomEvent(im.A.CHANGECOUNTDOWN,{value:e}),n.countTimer&&clearTimeout(n.countTimer),n.countTimer=setTimeout((()=>{Jm.call(this)}),1e3)}else"launch"===n.source&&n.isShowedExposureReported&&(n.isDynamic&&n.tplComponent.hide(),Qm.call(this,{source:n.source,animated:!0},12))},Km=function(){const e=(0,f_.Wj)(this);if("launch"===e.source)e.topBar&&ym&&(e.topBar.style.top=ym,e.adFeedbackMenu.style.top=ym+34,e.adFeedbackList.style.top=ym+34),e.closeContainer&&(e.closeContainer.style.marginTop=vm-68),e.appInfo&&(e.appInfo.style.height=Am,e.appInfo.style.width=gm,e.isDarkMode&&(e.appInfo.style.backgroundColor="#191919",e.container.style.backgroundColor="#191919")),e.appIcon&&(e.appIcon.src=e.showInfo.appIcon,e.appIcon.style.marginTop=Cm?16:28),e.appName&&(e.appName.value=e.showInfo.appName,e.appName.style.width=gm,e.appName.style.color=e.isDarkMode?"#ffffff":"#000000"),e.tipsContainer&&(e.tipsContainer.style.height=32,e.tipsContainer.style.width=gm,e.tipsLineOne.style.width=gm,e.tipsLineOne.style.color=e.isDarkMode?"#ffffff":"#000000",e.tipsLineTwo.style.color=e.isDarkMode?"#ffffff":"#000000"),e.adCloseTips&&(e.adCloseTips.style.height=_m-Am,e.adCloseTips.style.width=gm);else if("menu"===e.source){var t;if(!e.data)return;const{data:n}=e,r=qm.call(this),o=(0,wi.xI)();e.adIcon.src=r.thumb,e.adName.value=r.title,null!==(t=n.button_action)&&void 0!==t&&t.button_text&&(e.button.value=n.button_action.button_text),o.screenTop&&o.screenTop>0?mm=o.screenTop:mm&&0!==mm||(mm=88*_m/812),e.navigator.style.height=mm,e.navigator.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff",e.card.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff",e.card.style.width=gm,e.card.style.height=Am-mm,e.adName.style.color=e.isDarkMode?"#ffffff":"#000000",e.adWording.style.color=e.isDarkMode?"#ffffff":"#000000",e.mediaBottom&&(e.mediaBottom.style.marginTop=vm-12,e.mediaBottom.style.width=gm,e.mediaBottom.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff")}if("landscape"===e.crtOrientation){const t=e.data||{},n=qm.call(this);if(n&&e.adHeadInfo&&(e.adHeadIcon.src=n.thumb||"",e.adversName.value=n.title||"",e.adHeadInfo.style.width=gm/375*311,e.adversName.style.width=gm/375*311),t.hint_txt&&e.adTitle&&t.crt_size!==Hi.vK.CRT_SIZE_BIG_PIC?(e.adTitle.value=t.hint_txt,e.adTitle.style.width=gm/375*311):n.description&&e.adTitle?(e.adTitle.value=n.description,e.adTitle.style.width=gm/375*311):e.adTitle&&t.product_type&&Hi.sl[t.product_type]&&(e.adTitle.value=`今日${Hi.sl[t.product_type]}推荐`,e.adTitle.style.width=gm/375*311),t.button_action&&e.adButtonContainer){e.adButton.value=t.button_action.button_text,e.adButtonContainer.style.width=gm,e.closeContainer&&(e.closeContainer.style.marginTop=vm-132);const n={text:t.button_action.button_text,fontSize:17},r=(0,j_.X1)(n)||80;e.adButton.style.width=r+8,e.adButton.style.width+12>100&&(e.adButton.style.width=e.adButton.style.width+12)}}},Xm=function(e){const t=(0,f_.Wj)(this);if(t.dynamicElems||(t.dynamicElems={}),t.dynamicEmitter||oy.call(this),t.dynamicElems.root)return;const n=t.data.adDynamicList,r=ty.call(this,{tpl:n,source:e}),o=r.getRootElement();t.dynamicElems.root=o,t.container.add(t.dynamicElems.root),r.show(),t.tplComponent=r,t.tplComponent.emitComponentEvent(am._d.SPLASHADFIRSTRENDER)},ey=function(){let e="";const t=(0,f_.Wj)(this).adProxy.data,n=qm.call(this);return t.hint_txt&&t.crt_size!==Hi.vK.CRT_SIZE_BIG_PIC?e=t.hint_txt:n.description?e=n.description:t.product_type&&Hi.sl[t.product_type]&&(e=`今日${Hi.sl[t.product_type]}推荐`),e},ty=function({tpl:e,source:t}){const n=(0,f_.Wj)(this),r=n.adProxy.data,o=ey.call(this),i=qm.call(this);return(0,m_.sY)(B_,{manager:null,reporter:null,emitter:n.dynamicEmitter,adProxy:n.adProxy,template:e,systemInfo:{screenWidth:gm,screenHeight:_m},adData:r,adCustomId:"dynamic",isEmpty:!1,scope:{rightButtonTop:ym||40,source:t,screenTop:mm||88*_m/812,isDarkMode:n.isDarkMode,adTitle:o||"",cardInfo:i,materialFile:Sm,materialBgFile:xm,materialBlurFile:km,private:n,appIcon:n.showInfo.appIcon,appName:n.showInfo.appName}},!1)},ny=function(e){const t=(0,f_.Wj)(this);Nm.call(this,e,!1)&&(Mm.call(this)||"launch"===t.source&&Qm.call(this,{source:t.source,animated:!0},11))},ry=function(e){const t=(0,f_.Wj)(this);switch(e.action){case im.A.LANDAD:{const{event:n,index:r}=e.value,o=r;if(!Nm.call(this,n,13===o))return;13===o&&Gm.call(this,n,o),Qm.call(this,{source:t.source,animated:!1},o),16===o&&(t.isLandingPage=!0,(0,__.Vs)(Dm).then((()=>Gm.call(this,n,o))));break}case im.A.CHECKEXPOSURE:t.dynamicRendered=!0,t.isShowedExposureReported||Um.call(this),t.countTimer||Jm.call(this);break;case im.A.FEEDBACKREPORT:jm.call(this,e.value);break;case im.A.FEEDBACKBTNTAP:t.data&&t.adProxy.openFeedbackUrl(1014);break;case im.A.REPORTMMDATA:e.value.id&&e.value.data&&t.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case im.A.SPLASHSKIPAD:{const{event:t}=e.value;ny.call(this,t);break}case im.A.REPORTADMONITORDATA:{const n=null==e?void 0:e.value,{id:r,key:o,extInfo:i}=n,a=r?{idKeyGroup:r,idKey:o}:o;t.adProxy.reportAdMonitorData(a,i);break}}},oy=function(){const e=(0,f_.Wj)(this);e.dynamicEmitter=new cm,e.dynamicEmitter.on("adCustomEvent",(e=>{ry.call(this,e)}))},iy=function(e,t=!1){const n=(0,f_.Wj)(this);e.forEach((e=>{const{root:t}=u_()(pm[e.name]),r=f_.Ue.call(this,t);n[e.parent].add(r)})),n.componentsRenderred=!0,Km.call(this),t&&ay.call(this)},ay=function(){const e=(0,f_.Wj)(this);e.adFeedback&&!e.eventsMap.adFeedback&&e.adFeedback.on("click",(t=>{Nm.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!e.adFeedbackMenu.style.hidden||!e.adFeedbackList.style.hidden,e.adFeedbackMenu.style.hidden=!0,e.adFeedbackList.style.hidden||jm.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),e.adFeedbackBtn&&!e.eventsMap.adFeedbackBtn&&e.adFeedbackBtn.on("click",(t=>{Nm.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,jm.call(this,{secondGradeId:1,secondGradeDesc:"投诉"}),"launch"===e.source&&Qm.call(this,{source:e.source,animated:!0},17),e.data&&e.adProxy.openFeedbackUrl(1014))})),e.adDislikeBtn&&!e.eventsMap.adDislikeBtn&&e.adDislikeBtn.on("click",(t=>{Nm.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!1,jm.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"}))})),e.adQualityBtn&&!e.eventsMap.adQualityBtn&&e.adQualityBtn.on("click",(t=>{Nm.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,jm.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),"launch"===e.source&&Qm.call(this,{source:e.source,animated:!0},17))})),e.adDuplicateBtn&&!e.eventsMap.adDuplicateBtn&&e.adDuplicateBtn.on("click",(t=>{Nm.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,jm.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),"launch"===e.source&&Qm.call(this,{source:e.source,animated:!0},17))})),e.adDismatchBtn&&!e.eventsMap.adDismatchBtn&&e.adDismatchBtn.on("click",(t=>{Nm.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,jm.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),"launch"===e.source&&Qm.call(this,{source:e.source,animated:!0},17))})),e.closeContainer&&!e.eventsMap.closeContainer&&e.closeContainer.on("click",(t=>{Nm.call(this,t,!1)&&(Mm.call(this)||"launch"===e.source&&Qm.call(this,{source:e.source,animated:!0},11))})),e.adMedia&&!e.eventsMap.adMedia&&e.adMedia.on("click",(e=>{sy.call(this,e,"adMedia")})),e.adButtonContainer&&!e.eventsMap.adButtonContainer&&e.adButtonContainer.on("click",(e=>{sy.call(this,e,"button")})),e.buttonContainer&&!e.eventsMap.buttonContainer&&e.buttonContainer.on("click",(t=>{if(Nm.call(this,t,!1))return e.data?(Qm.call(this,{source:e.source,animated:!1},16),e.isLandingPage=!0,(0,__.Vs)(Dm).then((()=>Gm.call(this,t,16)))):void 0}));const t=["adFeedback","adFeedbackBtn","adDislikeBtn","adQualityBtn","adDuplicateBtn","adDismatchBtn","closeContainer","adMedia","buttonContainer","adButtonContainer"];for(const n of t)e[n]&&!e.eventsMap[n]&&(e.eventsMap[n]=!0)},sy=function(e,t=""){var n,r;const o=(0,f_.Wj)(this);if((!((null==o||null===(n=o.data)||void 0===n||null===(r=n.condition)||void 0===r?void 0:r.widget_gray_splash_click_area_switch)||0)||"button"===t)&&Nm.call(this,e,!1))return o.data&&"launch"===o.source?!Cm||k.wZ?(Gm.call(this,e,13),(0,__.Vs)(200).then((()=>Qm.call(this,{source:o.source,animated:!1},13)))):(Qm.call(this,{source:o.source,animated:!1},13),Gm.call(this,e,13)):void 0},cy=function(){const e=(0,f_.Wj)(this);if(e.data){const t=qm.call(this);t&&"launch"===e.source&&(0,lm.yw)({showMenu:!0,title:t.title,icon:t.thumb,success:()=>{e.adProxy.reportAdMonitorData(Hi.ET.showSplashAdMenuSuccess)},fail:t=>{e.adProxy.reportAdMonitorData(Hi.ET.showSplashAdMenuFail,{msg:t})}})}},ly=function(){const e=(0,f_.Wj)(this);try{var t;const n=(null===(t=e.data)||void 0===t?void 0:t.aid)||"";e.adProxy.data&&e.adInfos&&e.adInfos.waidMap&&(e.adProxy.data.waid=e.adInfos.waidMap[n])}catch(e){}},dy=function(){const e=(0,f_.Wj)(this);if(!e.data||""===e.data||"object"!=typeof e.data){const t=lm.fs.readFileSync(Tm,"utf-8");try{const n=JSON.parse(t);e.data=n,e.adProxy.data=n}catch(t){oe.Z.onReady((()=>{e.adProxy.reportAdMonitorData(Hi.ET.readFileDataFail,{source:e.source,msg:t})}))}}},uy=function(){const e=(0,f_.Wj)(this);if("launch"!==e.source)return;iy.call(this,[{parent:"adMedia",name:"topBar"}],!0),e.adFeedbackInserted=!0},py=function(){const e=(0,f_.Wj)(this);if("launch"!==e.source)return;let t=[{parent:"container",name:"appInfo"},{parent:"adMedia",name:"feedbackContent"},{parent:"adMedia",name:"feedbackMenu"},{parent:"adMedia",name:"close"},{parent:"container",name:"closeTips"}];"landscape"===e.crtOrientation&&(t=t.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"},{parent:"adMedia",name:"adButtonContainer"}])),(k.wZ||ym>0)&&(t.push({parent:"adMedia",name:"topBar"}),e.adFeedbackInserted=!0),e.showInfo.isGame&&t.push({parent:"appInfo",name:"gameTips"}),iy.call(this,t,!0),(0,lm.fy)({state:0}),p_._w.layout().then((()=>{(0,lm.fy)({state:1}),p_._w.auto=!0})).catch((t=>{oe.Z.onReady((()=>{e.adProxy.reportAdMonitorData(Hi.ET.secondInsertFail,{source:e.source,msg:t})}))}))},hy=function(){const e=(0,f_.Wj)(this);Am=Math.max(160,160*_m/812),vm=_m-Am,e.adMedia.style.width=gm,e.adMedia.style.height=vm;const t=9*_m/16;e.adMaterial.style.width=t,e.adMaterial.style.height=_m,e.adMaterial.style.left=t>gm?(gm-t)/2:0,"portrait"===e.crtOrientation?e.adMaterial.src=Sm:"landscape"===e.crtOrientation&&(e.adMaterialBg.style.hidden=!1,e.adMaterialContainer.style.hidden=!1,e.adMaterial.style.width=gm,e.adMaterial.style.height=vm,e.adMaterial.style.left=0,e.adMaterialContainer.style.width=gm,e.adMaterialContainer.style.height=vm,e.adMaterial.src=xm,e.adMaterialBg.style.width=.45*_m*16/9,e.adMaterialBg.style.height=.45*_m,e.adMaterialBg.style.left=-(.45*_m*16/9-gm)/2,e.adMaterialLandscape.style.width=gm/375*311,e.adMaterialLandscape.style.height=gm/375*175,e.adMaterialBg.src=Sm,e.adMaterialLandscape.src=Sm,e.adCardInfo.style.width=gm/375*311,e.adCardInfo.style.marginLeft=8),e.adMaterial.scale=_m/1920},fy=function(e){var t;const n=(0,f_.Wj)(this);if(n.showInfo=e,n.source=e.source,n.isDarkMode=e.isDarkMode||!1,e.isGame&&(Cm=e.isGame),gm=e.screenWidth,_m=e.screenHeight,null!=n&&null!==(t=n.data)&&void 0!==t&&t.adDynamicList){const{root:t}=u_()('\n  <view id="container">\n  </view>\n');g_.call(this,t,dm),n.isDynamic=!0,Xm.call(this,e.source)}else g_.call(this,fm,um),hy.call(this);if(n.container.style.width=gm,n.container.style.height=_m,n.container.style.backgroundColor=n.isDarkMode?"#191919":"#ffffff",p_._w.add(n.container),!n.isDynamic)try{lm.fs.access({path:km,success:()=>{n.adMaterialBg.src=km}})}catch(e){}let r=[];"menu"!==n.source||n.isDynamic||(dy.call(this),r=[{parent:"container",name:"card"},{parent:"adMedia",name:"mediaBottom"}],"landscape"===n.crtOrientation&&(r=r.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"}])),n.navigator.style.hidden=!1,iy.call(this,r,!0)),(0,lm.Ae)({state:0}),p_._w.layout().then((()=>{if(n.firstInserted=!0,n.isShowed=!0,(0,lm.Ae)({state:1}),"launch"!==n.source||n.isDynamic)p_._w.auto=!0,n.container.requestLayout();else try{py.call(this)}catch(e){oe.Z.onReady((()=>{n.adProxy.reportAdMonitorData(Hi.ET.secondRenderFail,{source:n.source,msg:e})}))}})).catch((e=>{oe.Z.onReady((()=>{n.adProxy.reportAdMonitorData(Hi.ET.firstInsertFail,{source:n.source,msg:e})}))}))},gy=function(e,t={},n,r){const o=(0,f_.Wj)(this),i=wm+Hi.c3[r],a=Hi.ET[r];return oe.Z.onReady((()=>{var n;o.adProxy.reportAdMonitorData(a,t),o.adProxy.reportTimePoints({slotid:Hi.DX[o.adType],costtype:null!==(n=o.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,splash_instance_id:e.instanceId,errCode:i,scene:e.scene,extInfo:t})})),(0,lm.mQ)({adCallTime:Date.now(),errCode:i,show:!1,eventReceivedTime:n.startInit,cgiFetchStart:n.startFetchTime||0,cgiFetchCallBack:n.fetchCallbackTime||0})};class _y extends f_.wA{constructor(){super();const e=(0,f_.Wj)(this);e.canShowed=!1,e.today=(0,j_.Cy)(),e.countTimer=null,e.componentsRenderred=!1,e.isShowed=!1,e.firstInserted=!1,e.adFeedbackInserted=!1,e.isDynamic=!1,e.isShowedExposureReported=!1,e.startExposureTime=0,e.isViewableExposureReported=!1,e.isCheckAdRequest=!0,e.clickCount=0,e.lastLandingTime=0,e.lastJsapiName="",e.lastJsapiStatus=0,e.lastJsapiCostTime=0,e.isLandingPage=!1,e.landingPageCostTime=0,e.hideTime=0,e.hideDuration=0,e.isClosing=!1,e.isShowCloseTip=!1,e.clickFirstGradeTime=0,e.eventsMap={},e.source="",e.crtOrientation="portrait",e.adType="splashAd",e.adProxy=new h_.FF({adUnitId:"",adType:e.adType}),e.dynamicElems={},e.dynamicEmitter=null,e.tplComponent=null,(0,l_.vl)((t=>{"close"===t.buttonType&&"launch"===t.source?(Fm.call(this,10),Hm.call(this,["countTimer"])):"close"===t.buttonType&&"menu"===t.source?Fm.call(this,14):"back"!==t.buttonType||"menu"!==t.source||e.isLandingPage?"menu"===t.buttonType&&Wm.call(this,1):Fm.call(this,15)})),(0,l_.vj)((t=>{if(t.menuViewFrame&&("launch"===t.source?(ym=t.menuViewFrame.y||0,e.dynamicEmitter&&e.isDynamic&&e.tplComponent&&ym&&e.tplComponent.emitComponentEvent(am._d.SPLASHADMENUVIEW,{countdownTop:ym})):"menu"===t.source&&(mm=t.menuViewFrame.height||0,e.dynamicEmitter&&e.isDynamic&&e.tplComponent&&mm&&e.tplComponent.emitComponentEvent(am._d.SPLASHADMENUVIEW,{navHeight:mm,menuHeight:172-mm})),k.cj&&e.firstInserted&&!e.adFeedbackInserted))try{uy.call(this)}catch(t){oe.Z.onReady((()=>{e.adProxy.reportAdMonitorData(Hi.ET.iosThirdInsertFail,{source:e.source,msg:t})}))}})),(0,l_.Pp)((()=>{e.adProxy.setTimePoint("p5"),"launch"!==e.source||e.isDynamic||(dy.call(this),Km.call(this)),cy.call(this),ly.call(this),e.hideTime>0&&(e.hideDuration=+new Date-e.hideTime),Um.call(this),"launch"===e.source&&e.isShowedExposureReported&&Jm.call(this),e.isLandingPage&&(e.isLandingPage=!1)})),(0,l_.EJ)((()=>{e.hideTime=+new Date,Hm.call(this,["countTimer"])})),(0,l_.BZ)((()=>{Im||(Im=!0),k.cj&&e.startExposureTime>0&&+new Date-e.startExposureTime>1e3&&Um.call(this,!0),e.container&&(e.isDynamic&&(e.tplComponent&&(0,m_.vE)(e.tplComponent),e.dynamicElems={},e.dynamicEmitter=null,e.tplComponent=null),p_._w.remove(e.container)),Zm.call(this)}))}otherAdsEmitFetch(){zm.call(this)}show(e){Em=!0;const t=(0,f_.Wj)(this);t.showInfo=e,t.adProxy.scene=e.scene,t.adProxy.setTimePoint("p14");const n=t.adProxy.getTimePoint("p14");if(oe.Z.onReady((()=>{setTimeout((()=>{const n="launch"===e.source?Hi.ET.launchAcceptShouldShow:Hi.ET.menuAcceptShouldShow;t.adProxy.reportAdMonitorData(n)}),Om)})),"launch"!==e.source)return this.showDetail(e);const r={};try{const e=lm.fs.readFileSync(Pm,"utf-8");r.adInfos=e||{},t.adInfos=JSON.parse(e)}catch(e){t.adInfos={},r.errMsg=t.adProxy.processStackMsg(e),r.fileName=Pm}if(0===Object.keys(t.adInfos).length)wm=1e4,bm=Hi.c3.NO_ADINFOS,this.showAdByRealtimeFetch(e,n);else{var o;oe.Z.onReady((()=>{setTimeout((()=>{t.isCheckAdRequest&&(t.adFetchResult=Ym.call(this).catch((()=>{})))}),Om)}));const r=t.adInfos.ads||[];(null===(o=t.adInfos)||void 0===o?void 0:o.isCheckAndFetch)||0?(wm=2e4,this.showAdByRealtimeFetch(e,n,r)):this.showAdByCheckAdsOnline(e,n),t.adDatas={};for(const e of r)try{const n=`${Hi.Lq}/${e.aid}.txt`,r=lm.fs.readFileSync(n,"utf-8"),o=JSON.parse(r);t.adDatas[e.aid]=o}catch(e){}}try{var i;const e=(null===(i=t.adInfos)||void 0===i?void 0:i.deviceInfo)||{};t.adProxy.setDeviceInfo(e)}catch(e){}}showAdByRealtimeFetch(e,t,n=[]){const r=(0,f_.Wj)(this),o={gameAppId:e.appId,deviceOrientation:e.screenHeight>e.screenWidth?"portrait":"landscape",screenWidth:e.screenWidth,screenHeight:e.screenHeight,systemVersion:e.osVersion,wechatVersion:e.weixinVersion,SDKVersion:c_.c,envVersion:e.osVersion,model:e.model,platform:e.osType,isWaGame:e.isGame,isIOS:k.cj,isAndroid:k.wZ,adNetworkType:e.networkType},i={weappEnterScene:e.scene,requestType:2,preloadAds:n};return r.adProxy.setTimePoint("p15"),oe.Z.onReady((()=>{setTimeout((()=>{r.adProxy.reportAdMonitorData(Hi.ET.START_CHECK_AD_STATUS)}),Om)})),Ym.call(this,o,i).then((t=>{oe.Z.onReady((()=>{setTimeout((()=>{r.adProxy.reportAdMonitorData(Hi.ET.CHECK_AD_STATUS_SUCCESS)}),Om)})),r.adProxy.setTimePoint("p16");let n=!1;"fetch"===r.adProxy.lastAdRespone&&(r.isCheckAdRequest=!1,r.data=t,r.adProxy.data=t,n=!0,wm=1e4===wm?1e4:3e4),this.showDetail(e,{aid:Number(t.aid)},n)})).catch((n=>(r.adProxy.setTimePoint("p16"),gy.call(this,e,{msg:n},{startInit:t},"CHECK_AD_STATUS_ERROR"))))}showAdByCheckAdsOnline(e,t){const n=(0,f_.Wj)(this),r=n.adInfos.requestInQueue&&"true"===n.adInfos.requestInQueue,o=JSON.stringify({weapp_enter_scene:e.scene||0}),i={slot_id:Hi.DX[n.adType],publisher_appid:e.appId,network_type:Hi.MC[e.networkType]||0,app_service_type:e.isGame?2:1,sdk_version:c_.c,weixin_version:e.weixinVersion,os_version:e.osVersion,os_type:e.osType,model:e.model,ads:n.adInfos.ads||[],ext_check_ads_weapp:o};n.adProxy.setTimePoint("p15"),oe.Z.onReady((()=>{setTimeout((()=>{n.adProxy.reportAdMonitorData(Hi.ET.START_CHECK_AD_STATUS)}),1500)})),(0,W_.G_)(i,r).then((t=>{oe.Z.onReady((()=>{setTimeout((()=>{n.adProxy.reportAdMonitorData(Hi.ET.CHECK_AD_STATUS_SUCCESS)}),1500)})),n.adProxy.setTimePoint("p16");const r=JSON.parse(t.rawData);this.showDetail(e,r)})).catch((r=>(n.adProxy.setTimePoint("p16"),gy.call(this,e,{msg:r},{startInit:t},"CHECK_AD_STATUS_ERROR"))))}showDetail(e,t={aid:0},n=!1){var r=this;return ue()((function*(){p_._w.style.width=e.screenWidth,p_._w.style.height=e.screenHeight,p_._w.auto=!1;const o=(0,f_.Wj)(r),i={startInit:o.adProxy.getTimePoint("p14"),startFetchTime:o.adProxy.getTimePoint("p15"),fetchCallbackTime:o.adProxy.getTimePoint("p16")},a=[],{aid:s}=t;if("launch"===e.source&&n){var c,l,d;const e=(null==o||null===(c=o.data)||void 0===c||null===(l=c.rerankingExtInfo)||void 0===l?void 0:l.material_hash)||"";Sm=`${Hi.Lq}/${s}_${e}.png`,xm=`${Hi.Lq}/${s}_${e}_pure_color.png`,km=`${Hi.Lq}/${s}_${e}_blur.png`,a.push(Sm),o.crtOrientation="portrait";const t=(null==o||null===(d=o.data)||void 0===d?void 0:d.crtInfo[0])||{};if(Object.keys(t).length>0){const{width:e,height:n}=t;o.crtOrientation=e>n?"landscape":"portrait"}"landscape"===o.crtOrientation&&a.push(xm)}else if("launch"!==e.source||n){if("menu"===e.source){var u,p;let e={};null!==(u=o.data)&&void 0!==u&&u.crtInfo&&o.data.crtInfo.length>0?[e]=o.data.crtInfo:null!==(p=o.data)&&void 0!==p&&p.crtInfo&&(e=o.data.crtInfo),Object.keys(e).length>0&&!o.crtOrientation&&(o.crtOrientation=o.data.crtInfo.width>o.data.crtInfo.height?"landscape":"portrait"),Wm.call(r,2)}}else{var h,f,g,_;if(!s||"0"===s)return gy.call(r,e,{adInfos:o.adInfos,checkAdStatus:t},i,"NO_AID");if(s&&null!=o&&null!==(h=o.adDatas)&&void 0!==h&&h[s]&&(o.data=o.adDatas[s],o.adProxy.data=o.adDatas[s]),o.crtOrientation=s?null==o||null===(f=o.adInfos)||void 0===f||null===(g=f.crtSizeMap)||void 0===g?void 0:g[s]:"",!o.crtOrientation)return gy.call(r,e,{adInfos:o.adInfos,checkAdStatus:t},i,"CRT_ORIENTATION_NOT_SURE");const n=s?null==o||null===(_=o.adInfos)||void 0===_?void 0:_.materialHashMap[s]:"";Tm=`${Hi.Lq}/${s}.txt`,Sm=`${Hi.Lq}/${s}_${n}.png`,xm=`${Hi.Lq}/${s}_${n}_pure_color.png`,km=`${Hi.Lq}/${s}_${n}_blur.png`,a.push(Tm),a.push(Sm),"landscape"===o.crtOrientation&&a.push(xm)}try{"launch"===e.source&&a.forEach((e=>{lm.fs.accessSync(e)}))}catch(n){bm=Hi.c3.MATERIAL_NOT_READY;const a=o.adProxy.processStackMsg(n);let s=!1;if(o.data)try{yield o.adProxy.handleBulkSaveMaterials(o.data),s=!0}catch(e){}if(!s)return gy.call(r,e,{adInfos:o.adInfos,checkAdStatus:t,msg:a},i,"MATERIAL_NOT_READY")}o.adProxy.setTimePoint("p17"),"launch"===e.source&&(0,lm.mQ)({showMenu:!0,show:!0,errCode:bm+wm,adCallTime:o.adProxy.getTimePoint("p17"),eventReceivedTime:i.startInit,cgiFetchStart:i.startFetchTime,cgiFetchCallBack:i.fetchCallbackTime,success:()=>{o.adProxy.setTimePoint("p18"),oe.Z.onReady((()=>{o.adProxy.reportAdMonitorData(Hi.ET.launchShowSplashAdSuccess)}))},fail:e=>{o.adProxy.setTimePoint("p18"),oe.Z.onReady((()=>{o.adProxy.reportAdMonitorData(Hi.ET.showSplashAdFail,{adInfos:o.adInfos,checkAdStatus:t,msg:e})})),Zm.call(r),o.container&&p_._w.remove(o.container)}});try{o.adProxy.setTimePoint("p4"),fy.call(r,e)}catch(t){Qm.call(r,{source:e.source,animated:!1},19),Zm.call(r),oe.Z.onReady((()=>{o.adProxy.reportAdMonitorData(Hi.ET.firstRenderFail,{adInfos:o.adInfos,source:e.source,msg:t})}))}}))()}}var my=c(8582),yy=c(6714);const vy=new sm.Z,Ay={banner:"SHOW_BANNER","incentive-video":"SHOW_REWARD",grid:"SHOW_GRID"},by={banner:"HIDE_BANNER","incentive-video":"HIDE_REWARD",grid:"HIDE_GRID"};class wy{constructor({adUnitId:e,adType:t="banner"}){this.adUnitId=e,this.adType=t}show(){const e=Ay[this.adType];e&&vy.emit(e,{adUnitId:this.adUnitId})}hide(){const e=by[this.adType];e&&vy.emit(e,{adUnitId:this.adUnitId})}on(e,t){vy.on(e,(e=>{e.adUnitId!==this.adUnitId&&t(e)}))}}const Cy={},Iy=function(e,t,n){Cy.hasOwnProperty(e)||(Cy[e]={}),Cy[e][t]=n},Ey=function(e,t){if(Cy.hasOwnProperty(e))return Cy[e][t]};let Sy;!function(e){e.REWARD_ENDPAGE_HEAD_IMG="REWARD_ENDPAGE_HEAD_IMG",e.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED="REWARD_ENDPAGE_WORDING_LOGO_ENHANCED",e.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED="REWARD_ENDPAGE_WORDING_TEXT_ENHANCED",e.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED="REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED",e.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED="REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_HEAD_IMG="REWARD_EXPAND_CARD_HEAD_IMG",e.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED="REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED="REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED="REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED="REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED",e.REWARD_OLD_ENDPAGE_BUTTON="REWARD_OLD_ENDPAGE_BUTTON",e.REWARD_TEMPLATE_AREA="REWARD_TEMPLATE_AREA",e.REWARD_PAGE_BUTTON="REWARD_PAGE_BUTTON",e.REWARD_PAGE_CARD="REWARD_PAGE_CARD",e.REWARD_PAGE_IMAGE="REWARD_PAGE_IMAGE",e.REWARD_CARD_BUTTON="REWARD_CARD_BUTTON",e.REWARD_CARD="REWARD_CARD",e.REWARD_DOWNLOAD="REWARD_DOWNLOAD",e.REWARD_DYNAMIC_CONTENT="REWARD_DYNAMIC_CONTENT",e.REWARD_DYNAMIC_BUTTON="REWARD_DYNAMIC_BUTTON"}(Sy||(Sy={}));const Ty="REWARDED_DYNAMIC",xy={defaultPageHeadline:{flexDirection:"row"},defaultPageAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},defaultPageWordingWrapper:{marginTop:0,marginBottom:48,height:72},defaultPageAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},defaultPageAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},ky={expandCardHeadline:{flexDirection:"row"},expandCardAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},expandCardWordingWrapper:{marginTop:0,marginBottom:48,height:72},expandCardAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},expandCardAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},Py=I()(I()(I()(I()(I()(I()(I()({container:{rotate:0,position:"absolute",justifyContent:"center",alignItems:"center",overflow:"hidden",zIndex:1000002,hidden:!0},video:{padding:8,paddingBottom:16,flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",backgroundColor:"#ff0000",position:"absolute",bottom:0},blank:{width:1,height:1},cardContainer:{hidden:!0,position:"absolute",left:8,flexDirection:"column",alignSelf:"stretch",overflow:"hidden"},card:{hidden:!0,backgroundColor:"rgba(247, 247, 247, 0.95)",borderColor:"rgba(0, 0, 0, 0.08)",flexDirection:"row",alignItems:"center",borderRadius:8,portrait:{height:90,padding:16},landscape:{width:348,height:72,padding:10}},appIcon:{borderRadius:8,opacity:.95,portrait:{width:48,height:48,marginRight:10},landscape:{width:45,height:45,marginRight:6}},appInformation:{flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},appName:{height:22.5,lineHeight:22.5,marginBottom:5,fontSize:17,lineBreak:"ellipsis",color:"#000000",portrait:{marginBottom:5},landscape:{marginBottom:2}},appWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#888888",fontSize:14},button:{width:84,height:36,lineHeight:36,textAlign:"center",fontSize:16,color:"#ffffff",borderWidth:1,borderColor:"#07C160",borderRadius:4,marginLeft:8,backgroundColor:"#07C160"},downloadButton:{width:62,height:32,hidden:!0,marginLeft:10},downloadButtonText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},dialogContainer:{zIndex:1000007,position:"absolute",overflow:"hidden",top:0,left:0,hidden:!0},dialogMask:{position:"absolute",overflow:"hidden",backgroundColor:"#000000",opacity:.7,top:0,left:0},dialog:{position:"absolute",width:300,height:168,borderRadius:10,backgroundColor:"rgba(255, 255, 255, 1)"},dialogTitle:{marginTop:28,marginBottom:27,width:300,height:48,lineHeight:24,textAlign:"center",color:"#000000",fontSize:17,fontWeight:"bold",lineBreak:"break-all"},dialogSplit:{width:300,height:1,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogButton:{width:300,justifyContent:"center",flexDirection:"row",alignItems:"center"},buttonSplit:{width:1,height:63.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogClose:{marginTop:19,marginBottom:19,width:149.5,height:25,lineHeight:25,textAlign:"center",color:"#000000",fontWeight:"bold",fontSize:18},dialogCancel:{marginTop:19,marginBottom:19,width:150,height:25,lineHeight:25,textAlign:"center",color:"#576A94",fontWeight:"bold",fontSize:18},pageCardBody:{position:"absolute",hidden:!0,flexDirection:"column",alignItems:"center",height:340},pageCardHotArea:{flexDiretion:"cloumn",alignItems:"center",height:70},pageCardTipIcon:{hidden:!0,marginTop:33,width:20,height:6.5},pageCardTip:{marginTop:2,hidden:!0,width:52,height:20,lineHeight:20,fontSize:13,color:"#ffffff"},pageCardContainer:{borderRadius:10,flexDirection:"column",height:270},pageCard:{paddingLeft:15,paddingRight:15,flexDirection:"row",alignItems:"center",borderRadius:5,height:80},pageCardAppIcon:{borderRadius:10,opacity:.95,width:48,height:48},pageCardAppInformation:{paddingLeft:5,marginTop:3,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},pageCardAppName:{height:22.5,fontSize:16,color:"#ffffff"},pageCardAppWording:{height:20,marginTop:1,color:"#888888",fontSize:14},pageCardButton:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:14,color:"#ffffff",borderWidth:1,backgroundColor:"#07C160",borderColor:"#07C160",borderRadius:4},pageCardSplitLine:{marginLeft:15,marginRight:15,height:1,backgroundColor:"rgba(255, 255, 255, 0.10)"},pageCardImgContainer:{marginTop:15,marginLeft:15,marginRight:15,marginBottom:25,height:150,overflow:"hidden"},pageCardImgBox:{height:150,left:0,flexDirection:"row",justifyContent:"center"},pageCardImg0:{order:0,borderRadius:3},pageCardImg1:{marginLeft:10,order:1,borderRadius:3},pageCardImg2:{marginLeft:10,order:2,borderRadius:3},pageCardImg3:{marginLeft:10,order:3,borderRadius:3},pageHandler:{top:0,position:"absolute",hidden:!0},pageMask:{top:0,position:"absolute",backgroundColor:"#000000",hidden:!0},dialogCloseTip:{hidden:!0,position:"absolute",overflow:"hidden",top:0,left:0},adCloseTipWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{playableTipsWrap:{left:0,hidden:!0,marginBottom:10,width:132,height:32,flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:4},playableTipsContent:{width:100,height:16,lineHeight:16,fontSize:12,color:"#ffffff",textAlign:"center"},playableGiveUp:{hidden:!0,marginLeft:8,width:24,height:32,lineHeight:32,fontSize:12,color:"#07C160"},playableCancelBox:{hidden:!0,width:44,height:32,left:72,position:"absolute"}}),{pageContainer:{top:0,hidden:!0,position:"absolute",backgroundColor:"#ffffff"},pageImgContainer:{position:"absolute",overflow:"hidden",backgroundColor:"#000000"},pageImgBox:{flexDirection:"row",justifyContent:"center",position:"absolute",backgroundColor:"#000000"},pageImg0:{flex:1,order:0},pageImg1:{flex:1,order:1},pageImg2:{flex:1,order:2},pageImgTips:{flexDirection:"row",justifyContent:"center",height:10,width:35},pageImgIcon0:{height:7,width:7,borderRadius:16,backgroundColor:"#ffffff"},pageImgIcon1:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageImgIcon2:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},pageInfoWrapper:{flexDirection:"column",alignItems:"center",height:242},pageAppIcon:{borderRadius:8,width:64,height:64},pageAppName:{marginTop:20,width:180,textAlign:"center",height:28,lineHeight:28,fontSize:20,color:"#000000"},pageAppWording:{marginTop:4,marginBottom:20,width:220,height:28,textAlign:"center",lineHeight:28,color:"#888888",fontSize:17},pageAppConversion:{hidden:!0,width:220,height:24,textAlign:"center",lineHeight:24,color:"#000000",opacity:.3,fontSize:14},pageButton:{marginTop:14,width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4},pageDownloadButton:{marginTop:14,width:166,height:42,hidden:!0},pageDownloadButtonText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#ffffff"},pageDownloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},pageDownloadProgressText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#04be02"}}),{defaultPageContainer:{hidden:!0,top:0,position:"absolute",backgroundColor:"#000000"},defaultPageBackgroundContainer:{position:"absolute"},defaultPageBackgroundMask:{position:"absolute",left:0,top:0,backgroundColor:"#000000",opacity:.6},defaultPageBackgroundImage:{position:"absolute",left:0,top:0},defaultPageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},defaultPageAppIcon:{borderRadius:8,width:64,height:64,left:0},defaultPageAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},defaultPageAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},defaultPageAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},defaultPageButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{topBar:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:0,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10}},barLeft:{flexWrap:"nowrap"},count:{marginLeft:10,paddingLeft:12.5,paddingRight:12.5,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},barRight:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},close:{width:29,height:32,lineHeight:32,color:"#ffffff",fontSize:14},splitLine:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},sound:{width:20,height:20},topBarFix:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:10,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10},hidden:!0},barLeftFix:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},soundFix:{width:20,height:20},splitLineFix:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},countDownFix:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppendFix:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},closeFix:{width:56,height:32,lineHeight:32,color:"#ffffff",fontSize:14},adFeedback:{hidden:!0,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:4},splitLineLeft:{width:1,height:18.5,marginLeft:12,marginRight:12,backgroundColor:"rgba(255, 255, 255, 0.25)"},adFeedbackList:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}}),{expandCardContainer:{hidden:!0,top:0,position:"absolute",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0)"},expandCardInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},expandCardAppIcon:{borderRadius:8,width:64,height:64,left:0},expandCardAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},expandCardAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},expandCardAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},expandCardButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{dynamicContainer:{hidden:!0,position:"absolute",top:0,left:0}}),{pendantContainer:{hidden:!0,position:"absolute"}});var Dy=c(3872);const Oy=[{op:"insert",id:"innerPendant",parent:"pendantContainer",tpl:{type:"image",id:"innerPendantImage",style:{width:80,height:60},options:{baseType:1,data:{imgUrlExpr:"$scope.private.data.crtInfo.wxgame_video_card.pendant_img"},events:{rewardedVideoPlay:[{action:"rewardedVideoDynamic",expr:"$scope.private.pendantContainer.style.hidden == $const.true",value:{list:[{op:"setStyle",id:"pendantContainer",expr:"$const.systemInfo.screenWidth < $const.systemInfo.screenHeight",style:{hidden:!1,width:80,height:60,leftExpr:"#sub($const.systemInfo.screenWidth, 92)",bottomExpr:"#rewardedVideoIsExpandStyle() ? #add(12, #multi(1032, #division($const.systemInfo.screenWidth, 960))) : 150"}},{op:"setStyle",id:"pendantContainer",expr:"$const.systemInfo.screenWidth > $const.systemInfo.screenHeight",style:{hidden:!1,width:80,height:60,leftExpr:"#rewardedVideoIsExpandStyle() ? #sub(#sub(#division($const.systemInfo.screenWidth, 2), #division($const.systemInfo.screenHeight, 6)), 92)  : #sub($const.systemInfo.screenWidth, 92)",bottom:20}}]}}],tap:[{action:"landAd"},{action:"reportAdMonitorData",value:{id:924,key:172,extInfo:"pendant-click"}}]}}}}],Ny=Hi.DX["incentive-video"],Ry=e=>(0,f_.Wj)(e),My=(...e)=>(0,__._u)(...e),{root:Ly}=u_()('\n  <view id="container">\n    <video id="video" controls="false" muted="true" autoplay="false" object-fit="contain" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad" player-hint="supportSoftDecode,mp4Only">\n      <view id="blank"></view>\n      <view id="page-card-body">\n        <view id="page-card-hot-area">\n          <image id="page-card-tip-icon"></image>\n          <text id="page-card-tip" value="了解更多"></text>\n        </view>\n        <image id="page-card-container" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=a5af9b5364f6e959667331801f6558e8&filekey=3033020101041f301d02016d040253480410a5af9b5364f6e959667331801f6558e80202423f040d00000004627466730000000131&hy=SH&storeid=32303138313031363036343533343030306464383764313336666664393336663561333230613030303030303664&bizid=1023">\n          <view id="page-card" click-state="true">\n            <image id="page-card-app-icon" bubble-event="true"></image>\n            <view id="page-card-app-information" bubble-event="true">\n              <text id="page-card-app-name" bubble-event="true"></text>\n              <text id="page-card-app-wording" bubble-event="true"></text>\n            </view>\n            <text id="page-card-button" click-state="true"></text>\n          </view>\n          <view id="page-card-split-line"></view>\n          <view id="page-card-img-container">\n            <view id="page-card-img-box" click-state="true">\n              <image id="page-card-img0" bubble-event="true"></image>\n              <image id="page-card-img1" bubble-event="true"></image>\n              <image id="page-card-img2" bubble-event="true"></image>\n              <image id="page-card-img3" bubble-event="true"></image>\n            </view>\n          </view>\n        </image>\n      </view>\n    </video>\n    \n  <view id="dynamic-container"></view>\n\n    <view id="card-container">\n      \n  <view id="playable-tips-wrap">\n    <text id="playable-tips-content" value="视频结束后可试玩"></text>\n    <text id="playable-give-up" value="放弃"></text>\n    <view id="playable-cancel-box" click-state="true"></view>\n  </view>\n\n      <view id="card" click-state="true">\n        <image id="app-icon" bubble-event="true"></image>\n        <view id="app-information" bubble-event="true">\n          <text id="app-name" bubble-event="true"></text>\n          <text id="app-wording" bubble-event="true"></text>\n        </view>\n        <text id="button" click-state="true"></text>\n        <view id="download-button" click-state="true">\n          <text id="download-button-text" bubble-event="true"></text>\n          <text id="download-progress" bubble-event="true">\n            <text id="download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n    \n  <view id="expand-card-container">\n    <view id="expand-card-info-container">\n      <view id="expand-card-wording-wrapper">\n        <view id="expand-card-headline" bubble-event="true">\n          <image id="expand-card-app-icon" bubble-event="true"></image>\n          <text id="expand-card-app-name" bubble-event="true"></text>\n        </view>\n        <text id="expand-card-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="expand-card-app-conversion"></text>\n      <text id="expand-card-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="pendant-container"></view>\n\n    \n  <view id="default-page-container">\n    <view id="default-page-background-container">\n      <image id="default-page-background-image"></image>\n      <view id="default-page-background-mask"></view>\n    </view>\n    <view id="default-page-info-container">\n      <view id="default-page-wording-wrapper">\n        <view id="default-page-headline" bubble-event="true">\n          <image id="default-page-app-icon" bubble-event="true"></image>\n          <text id="default-page-app-name" bubble-event="true"></text>\n        </view>\n        <text id="default-page-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="default-page-app-conversion"></text>\n      <text id="default-page-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="page-container">\n    <view id="page-img-container">\n      <view id="page-img-box">\n        <image id="page-img0" bubble-event="true"></image>\n        <image id="page-img1" bubble-event="true"></image>\n        <image id="page-img2" bubble-event="true"></image>\n      </view>\n      <view id="page-img-tips">\n        <view id="page-img-icon0"></view>\n        <view id="page-img-icon1"></view>\n        <view id="page-img-icon2"></view>\n      </view>\n    </view>\n    <view id="page-info-container">\n      <view id="page-info-wrapper">\n        <image id="page-app-icon"></image>\n        <text id="page-app-name"></text>\n        <text id="page-app-wording"></text>\n        <text id="page-app-conversion"></text>\n        <text id="page-button" click-state="true"></text>\n        <view id="page-download-button" click-state="true">\n          <text id="page-download-button-text" bubble-event="true"></text>\n          <text id="page-download-progress" bubble-event="true">\n            <text id="page-download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n  </view>\n\n    <view id="page-handler"></view>\n    <view id="page-mask"></view>\n    \n  <view id="top-bar">\n    <view id="bar-left">\n      <view id="count">\n        <view id="ad-feedback">\n          <text id="ad-text" value="广告" bubble-event="true"></text>\n          <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n          <view id="split-line-left" bubble-event="true"></view>\n        </view>\n        <text id="count-down"></text>\n        <text id="count-down-append"></text>\n      </view>\n    </view>\n    <view id="bar-right">\n      <image id="sound"></image>\n      <view id="split-line"></view>\n      <text id="close" value="关闭"></text>\n    </view>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="top-bar-fix">\n    <view id="bar-left-fix">\n      <image id="sound-fix"></image>\n      <view id="split-line-fix"></view>\n      <text id="count-down-fix"></text>\n      <text id="count-down-append-fix"></text>\n      <text id="close-fix" value="关闭广告"></text>\n    </view>\n  </view>\n\n    <view id="dialog-close-tip">\n      <view id="ad-close-tip-wrap">\n        <text id="ad-close-tip-content" bubble-event="true" value="感谢你的反馈"></text>\n      </view>\n    </view>\n    <view id="dialog-container">\n      <view id="dialog-mask"></view>\n      <view id="dialog">\n        <text id="dialog-title"></text>\n        <view id="dialog-split"></view>\n        <view id="dialog-button">\n          <text id="dialog-close" value="放弃"></text>\n          <view id="button-split"></view>\n          <text id="dialog-cancel" value="继续"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n'),By="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",Fy="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",Wy="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJAic1IGjzG9g458d7DpIe8URUq74t0dicbwKKc69rPBf8hiby1llOBTndbKUq2NTA9YaA/0?wx_fmt=png",jy=1e3,Uy=2e3;let Vy=!1,Gy="portrait",$y=0,Hy=0,Zy=0,Qy=0,Yy=0,zy=0,qy={};oe.Z.onReady((()=>{qy=oe.Z.safeArea||{};try{oe.Z.global.window.pageOrientation&&(Gy=oe.Z.global.window.pageOrientation)}catch(e){}if($i.S3.isIOS?Vy=!0===oe.Z.showStatusBar:$i.S3.isAndroid&&(Vy=!0===oe.Z.showStatusBar||"true"===oe.Z.showStatusBar),$i.S3.isWaGame){const e=c(1627).Z;e.onTouchStart((e=>{null!=e&&e.changedTouches&&e.changedTouches.length>0&&($y=Math.round(e.changedTouches[0].clientX),Hy=Math.round(e.changedTouches[0].clientY),Zy=0,Qy=0,zy=0,Yy=+new Date)})),e.onTouchEnd((e=>{null!=e&&e.changedTouches&&e.changedTouches.length>0&&(Zy=Math.round(e.changedTouches[0].clientX),Qy=Math.round(e.changedTouches[0].clientY),zy=+new Date-Yy)}))}}));const Jy=(e,t)=>{const n=e.touchendTimeStamp-e.touchstartTimeStamp;e.touchendTimeStamp>0&&e.touchstartTimeStamp>0&&n>=0&&(0,Ci.J)(17035,{aid:t.aid,traceid:t.traceid,touch_start_x:Math.round(e.touchstartPosX),touch_start_y:Math.round(e.touchstartPosY),touch_end_x:Math.round(e.touchendPosX),touch_end_y:Math.round(e.touchendPosY),touch_duration:n,screenwidth:$i.S3.screenWidth,screenheight:$i.S3.screenHeight,device_orientation:$i.S3.deviceOrientation})},Ky=function(){const e=Ry(this);try{if($i.S3.isIOS&&$i.S3.isApp&&e.adProxy.isValidCondition("widget_gray_measure_text")){let t;(0,u.IN)("measureText",{text:e.button.value,fontSize:16,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete(e){t={width:e.width||0}}}),!1===e.button.style.hidden&&(e.button.style.width=t.width+24),e.data.flooringPage&&2===e.pageType&&((0,u.IN)("measureText",{text:e.button.value,fontSize:e.pageCardButton.style.fontSize||14,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete(e){t={width:e.width||0}}}),e.pageCardButton.style.width=t.width+24)}else{let t=D_.Z.getTextWidthInAndroid(e.button.value,e.button.style.fontSize||16)+24;!1===e.button.style.hidden&&(e.button.style.width=t),!1===e.downloadButton.style.hidden&&(t=D_.Z.getTextWidthInAndroid(e.downloadButtonText.value,e.downloadButtonText.style.fontSize||13)+24,e.downloadButton.style.width=t+2,e.downloadButtonText.style.width=t,e.downloadProgressText.style.width=t),e.data.flooringPage&&2===e.pageType&&(t=D_.Z.getTextWidthInAndroid(e.button.value,e.pageCardButton.style.fontSize||14)+24,e.pageCardButton.style.width=t)}}catch(e){}},Xy="video-ad has been destroyed",ev=function(){const e=Ry(this);return e.playableTipsWrap.animate({left:-144,duration:200}).then((()=>{let t="即将跳转试玩";t=$i.S3.isIOS?`${t} `:t;const n={text:t,fontSize:12},r=(0,j_.X1)(n)||72,o=(0,j_.X1)({text:"放弃",fontSize:12})||24;return e.playableTipsContent.style.width=r,e.playableGiveUp.style.width=o,e.playableTipsWrap.style.width=r+o+32,e.playableTipsContent.value=t,e.playableGiveUp.value="放弃",e.playableGiveUp.style.hidden=!1,e.playableCancelBox.style.left=r+12,e.playableCancelBox.style.hidden=!1,e.playableCancelBox.style.width=o+20,(0,__.Vs)(300).then((()=>e.playableTipsWrap.animate({left:0,duration:200})))}))},tv=function(e){if(sA.call(this))return;const t=Ry(this);if("object"==typeof e&&e.length>0)for(const n of e)t[n]&&(t[n].style.width=$i.S3.screenWidth,t[n].style.height=$i.S3.screenHeight)},nv=function(){if(sA.call(this))return Promise.reject({errMsg:Xy});const e=Ry(this);return ov.call(this,"hide").then((()=>{$i.S3.isWaGame||(e.adProxy.setPageOrientation($i.S3.deviceOrientation),$i.S3.isAndroid&&(e.updateScreenInfoTimer&&(clearTimeout(e.updateScreenInfoTimer),e.updateScreenInfoTimer=null),e.updateScreenInfoTimer=setTimeout((()=>{const{screenWidth:t,screenHeight:n}=$i.S3;(0,$i.uj)();let r=!1,o=0;$i.S3.screenHeight===n&&$i.S3.screenWidth===t||(r=!0,o=$i.S3.screenHeight-n),o&&(e.cardContainer.style.top+=o);const i=["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"];dA.call(this)&&i.push("video"),tv.call(this,i),r&&dA.call(this)&&(cv.call(this,!0),mA.call(this),wA.call(this))}),1e3)))}))},rv=function(){if(sA.call(this))return Promise.reject({errMsg:Xy});const e=Ry(this);return ov.call(this,"show").then((()=>{$i.S3.isWaGame||e.adProxy.setPageOrientation(Gy)})).catch((t=>{throw e.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR,t),t}))},ov=function(e){const t=Ry(this);return pA.call(this)?Promise.resolve():t.adProxy.operateFullscreen(e)},iv=function(e,t=!0){if(sA.call(this))return!1;const n=Ry(this).adProxy.isTriggerClick(e),r=n?0:1;return t&&Uv.call(this,e,r),n},av=function(){if(sA.call(this))return;const e=Ry(this),{product_type:t,button_action:n,card:{icon:r,name:o,wording:i,showTime:a,headBgImg:s,mpTagType:c},app:l,flooringPage:d}=e.data,u=hA.call(this);e.cardShowTime=a,e.appIcon.src=r,e.appName.value=(0,__.$G)(o,20),e.appWording.value=i,e.appIcon.style.borderRadius=10,-1===[12,19].indexOf(t)&&("portrait"===$i.S3.deviceOrientation?e.appIcon.style.borderRadius=27:"landscape"===$i.S3.deviceOrientation&&(e.appIcon.style.borderRadius=22)),e.button.value=n.button_text,n.button_text||(12===t?e.button.value="下载":19===t&&(e.button.value="查看")),23===t&&e.adProxy.checkFollow(e.data.app.uin).then((t=>{const r=t?"查看公众号":n.button_text||"关注公众号";e.button.value=r,Ky.call(this),e.data.flooringPage&&1===e.pageType&&0===e.buttonTextType?e.pageButton.value=r:e.data.flooringPage&&2===e.pageType&&0===e.buttonTextType?e.pageCardButton.value=r:e.pageType||(e.defaultPageButton.value=r),e.expandCardButton.value=r,Bv.call(this,P_.A$.CHANGEADBTNTEXT,{text:r})})).catch((()=>{const t=l.isFollowed?"查看公众号":n.button_text||"关注公众号";e.button.value=t,Ky.call(this),Bv.call(this,P_.A$.CHANGEADBTNTEXT,{text:t})})),1===e.buttonTextType&&(e.button.value=n.button_text,Bv.call(this,P_.A$.CHANGEADBTNTEXT,{text:n.button_text})),Ky.call(this),e.pageType=null!=d&&d.landpage_type?d.landpage_type:0,Ev.call(this),u&&(e.expandCardAppIcon.bubbleEvent=!1),e.expandCardAppIcon.src=r,e.expandCardAppName.value=(0,__.$G)(o,20),e.expandCardAppWording.value=i,e.expandCardButton.value=e.button.value;const{screenWidth:p,screenHeight:h}=$i.S3,f=e.expandCardInfoContainer.style;if("portrait"===$i.S3.deviceOrientation?(f.width=p,f.justifyContent="flex-start",f.paddingLeft=0,f.paddingTop=48,f.height=400/375*p,f.bottom=0,f.position="absolute"):(f.justifyContent="center",f.paddingLeft=.672*h,f.width=f.paddingLeft+300,f.paddingTop=0,f.height=h,f.bottom=null,f.position=null),!u){const t=D_.Z.getTextWidth((0,__.$G)(o,20),17);e.expandCardAppIcon.style.left=134-t/2;for(const t of Object.keys(ky)){const n=ky[t];e[t]&&Object.assign(e[t].style,n)}}if(e.expandCardAppIcon.style.borderRadius=u?8:3,-1===[Hi.fY.OPEN_PLATFORM_APP_MOB,Hi.fY.APPLE_APP_STORE].indexOf(t)&&(e.expandCardAppIcon.style.borderRadius=u?32:12),d&&1===e.pageType&&"portrait"===$i.S3.deviceOrientation)e.pageAppIcon.src=r,e.pageAppIcon.style.borderRadius=e.appIcon.style.borderRadius,e.pageAppName.value=(0,__.$G)(o,20),e.pageAppWording.value=i,e.pageButton.value=e.button.value,e.imgBaseName="pageImg",e.pageImgContainer.style.width=p,e.pageImgContainer.style.height=p,e.pageImgBox.style.width=3*p,e.pageImgBox.style.height=p,e.pageImgBox.style.left=0,e.pageInfoContainer.style.width=p,e.pageInfoContainer.style.height=h-p,e.pageInfoContainer.style.top=p,e.pageImgTips.style.top=p-20,e.pageImgTips.style.left=p/2-17.5,$i.S3.isIOS&&(e.pageImgIcon0.style.borderRadius=4,e.pageImgIcon1.style.borderRadius=4,e.pageImgIcon2.style.borderRadius=4),e.pageImgIcon0.style.backgroundColor="#ffffff",e.pageImgIcon1.style.backgroundColor="rgba(255, 255, 255, 0.55)",e.pageImgIcon2.style.backgroundColor="rgba(255, 255, 255, 0.55)",Cv.call(this),cv.call(this);else if(d&&2===e.pageType&&"portrait"===$i.S3.deviceOrientation)e.pageCardContainer.style.width=p,e.pageCardAppIcon.src=r,e.pageCardAppIcon.style.borderRadius=e.appIcon.style.borderRadius,e.pageCardAppName.value=(0,__.$G)(o,20),e.pageCardAppWording.value=i,e.pageCardButton.value=e.button.value,e.pageCard.style.width=p,e.pageCardSplitLine.style.width=p-20,e.pageCardHotArea.style.width=p,e.pageCardImgContainer.style.width=p-20,e.pageCardImgBox.style.width=bv.call(this,{padding:10}),e.pageCardTipIcon.src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=f8ba19ac709edca00138c47585de39be&filekey=3033020101041f301d02016d040253480410f8ba19ac709edca00138c47585de39be020202d1040d00000004627466730000000131&hy=SH&storeid=32303138313031303133353430323030303461363337313336666664393336663561333230613030303030303664&bizid=1023",e.video.style.padding=0,e.video.style.paddingBottom=0,e.imgBaseName="pageCardImg",Cv.call(this),cv.call(this),e.pageHandler.style.hidden=!1;else if(d&&[3,4].indexOf(e.pageType)>-1){let t="视频结束后可试玩";t=$i.S3.isIOS?`${t} `:t;const n={text:t,fontSize:12},r=(0,j_.X1)(n)||100;e.playableTipsContent.style.width=r,e.playableTipsWrap.style.width=r+24,e.cardContainer.style.top-=32}else if(!e.pageType){if(u&&(e.defaultPageAppIcon.bubbleEvent=!1),e.defaultPageAppIcon.src=r,e.defaultPageAppName.value=(0,__.$G)(o,20),e.defaultPageAppWording.value=i,e.defaultPageButton.value=e.button.value,!u){const t=D_.Z.getTextWidth((0,__.$G)(o,20),17);e.defaultPageAppIcon.style.left=134-t/2;for(const t of Object.keys(xy)){const n=xy[t];e[t]&&Object.assign(e[t].style,n)}}e.defaultPageAppIcon.style.borderRadius=u?8:3,-1===[Hi.fY.OPEN_PLATFORM_APP_MOB,Hi.fY.APPLE_APP_STORE].indexOf(t)&&(e.defaultPageAppIcon.style.borderRadius=u?32:12),e.defaultPageBackgroundImage.src=s||"",mA.call(this)}if(8===c){const t=+new Date;(0,W_.uQ)({buttonText:e.button.value,aid:e.adProxy.data.aid}).then((n=>{const r=+new Date;if(e.adProxy.reportRelationFetchDuration({startTime:t,endTime:r,showTime:e.showDetailTime||0}),n){const{count:t,descText:r}=n,o=`- 最近已有${t}人${r} -`;e.pageType?1===e.pageType&&(e.pageAppConversion.value=o,e.pageAppConversion.style.hidden=!1):(e.defaultPageAppConversion.value=o,e.defaultPageAppConversion.style.hidden=!1),e.expandCardAppConversion.value=o,e.expandCardAppConversion.style.hidden=!1}else e.pageAppConversion.style.hidden=!0,e.defaultPageAppConversion.style.hidden=!0,e.expandCardAppConversion.style.hidden=!0})).catch((t=>{e.pageAppConversion.style.hidden=!0,e.defaultPageAppConversion.style.hidden=!0,e.expandCardAppConversion.style.hidden=!0,e.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_RELATION_FETCH_ERROR,t)}))}else e.pageAppConversion.style.hidden=!0,e.defaultPageAppConversion.style.hidden=!0,e.expandCardAppConversion.style.hidden=!0;e.androidAppState=0,e.button.style.hidden=!1,e.pageButton.style.hidden=!1,e.defaultPageButton.style.hidden=!1,e.expandCardButton.style.hidden=!1,e.downloadButton.style.hidden=!0,e.pageDownloadButton.style.hidden=!0,12===t&&e.adProxy.isValidCondition("widget_gray_video_download_v2")&&(e.button.style.hidden=!0,e.downloadButton.style.hidden=!1,e.downloadButtonText.value=n.button_text,e.downloadProgressText.value=n.button_text,Ky.call(this),1===e.pageType&&(e.pageButton.style.hidden=!0,e.pageDownloadButton.style.hidden=!1,e.pageDownloadButtonText.value=n.button_text,e.pageDownloadProgressText.value=n.button_text))},sv=function(e={}){if(sA.call(this))return!1;const t=Ry(this);if(t.direction)return t.direction===e.direction;if(1===t.pageType||!t.pageType)return!!t.flooringPageIsShow;if(2===t.pageType){if("left"===e.direction){const{y:n}=e,r=t.flooringPageIsShow?t.video.style.height-180:0,o=t.flooringPageIsShow?t.video.style.height:0;return!!(n>r&&n<o)}if("top"===e.direction){const{y:n}=e,r=0,o=t.flooringPageIsShow?t.video.style.height-180:t.video.style.height;return!!(n>r&&n<o)}}return!1},cv=function(e=!1){if(sA.call(this))return;const{screenWidth:t,screenHeight:n}=$i.S3,r=Ry(this);let o,i="",a="",s=0,c=0,l=0,d=0;const u=(n-r.video.style.height)/2;1===r.pageType?(r.pageHandler.style.width=t,r.pageHandler.style.height=t,i="pageImgBox",c=t/4,s=3*t/4-r.pageImgBox.style.width,o={xRevise:!0,decideByDirection:!0,setImgTips:!0,posQueue:[0,-t,-2*t]}):2===r.pageType&&(r.pageHandler.style.width=t,r.pageHandler.style.height=r.video.style.height,r.pageHandler.style.top=(n-r.video.style.height)/2,(n!==r.video.style.height||e)&&(r.pageMask.style.hidden=!1,r.pageMask.style.width=t,r.pageMask.style.height=(n-r.video.style.height)/2,r.pageMask.style.top=(n+r.video.style.height)/2),i="pageCardImgBox",a="pageCardBody",c=60,s=t-c-r.pageCardImgBox.style.width,l=r.video.style.height-r.pageCardBody.style.height+10,!$i.S3.isWaGame&&$i.S3.isAndroid&&(l=r.video.style.height-r.pageCardBody.style.height+u+10),d=l+180,r.pageCardBody.style.top=d,o={yRevise:!0,directionMap:{up:l,down:d},logPagePull:!0,showTips:!0,xInertia:!0,handleTail:!0,xHead:0,xTail:t-r.pageCardImgBox.style.width-20,touchClick:!0,imgBoxHeight:180,cardHeight:60,buttonWidth:60,buttonHeight:30}),r.flooringPageInfos={xMin:s,xMax:c,yMin:l,yMax:d,xContainer:i,yContainer:a,infos:o}},lv=function(e={}){if(sA.call(this))return;const t=Ry(this),n=!0===t.flooringPageIsShow?e.max:e.min;return t.pageCardBody.animate({top:n,duration:50}).then((()=>kv.call(this,e))).then((()=>pv.call(this)))},dv=function(e={}){if(sA.call(this))return;const t=Ry(this),n=e.event?e.event:{};if(hv.call(this,n))if(t.flooringPageIsShow){const r=t.pageCard.getAbsolutePosition(),o=r.top,i=r.top+e.cardHeight,a=t.pageCardImgContainer.getAbsolutePosition().top;if(n.y>o&&n.y<i){const r=t.pageCardButton.getAbsolutePosition(),o=r.top,i=r.top+e.buttonHeight,a=r.left,s=r.left+e.buttonWidth;n.y>o&&n.y<i&&n.x>a&&n.x<s?fv.call(this,n,"button",Sy.REWARD_PAGE_BUTTON):fv.call(this,n,"card",Sy.REWARD_PAGE_CARD)}else n.y>=a&&n.y<=t.video.style.height?fv.call(this,n,"img",Sy.REWARD_PAGE_IMAGE):lv.call(this,e)}else{const r=t.pageCard.getAbsolutePosition(),o=r.top,i=r.top+e.cardHeight,a=t.pageCardButton.getAbsolutePosition(),s=a.top,c=a.top+e.buttonHeight,l=a.left,d=a.left+e.buttonWidth;n.y>o&&n.y<i?n.y>s&&n.y<c&&n.x>l&&n.x<d?fv.call(this,n,"button",Sy.REWARD_PAGE_BUTTON):fv.call(this,n,"card",Sy.REWARD_PAGE_CARD):lv.call(this,e)}},uv=function(e={}){if(sA.call(this))return;const t=Ry(this),n=e.imgBox?e.imgBox:"",r=e.xMin?e.xMin:0,o=e.xMax?e.xMax:0,i=e.xHead?e.xHead:0,a=e.xTail?e.xTail:0;return t[n].nextLayout((()=>{const e=t[n].style.left;let s=e;if(e>i&&e<=o?s=i:e>=r&&e<a&&(s=a),s!==e)return t[n].animate({left:s,duration:50})}))},pv=function(){if(sA.call(this))return;const e=Ry(this);e.flooringPageIsShow?(e.pageCardTipIcon.style.hidden=!0,e.pageCardTip.style.hidden=!0):(e.showTipsTimer&&(clearTimeout(e.showTipsTimer),e.showTipsTimer=null),e.pageCardTipIcon.style.hidden=!1,e.pageCardTip.style.hidden=!1)},hv=function(e){if(sA.call(this))return;const t=Ry(this);return!!(Math.abs(e.x-t.startPosX)<30&&Math.abs(e.y-t.startPosY)<30)},fv=function(e,t="",n){sA.call(this)||hv.call(this,e)&&gv.call(this,e,t,n)},gv=function(e,t="",n){if(sA.call(this))return;const r=Ry(this);if([1,2].includes(r.pageType)&&Tv.call(this,e,t),$i.S3.isAndroid&&12===r.data.product_type&&1===r.pageType&&r.adProxy.isValidCondition("widget_gray_video_download_v2"))tA.call(this);else if($i.S3.isIOS&&46===r.data.product_type&&6===r.data.dest_type)Promise.race([Vv.call(this,e,n),(0,__.Vs)(500)]).then((()=>{$v.call(this,{button:5},e),Kv.call(this)})).catch((()=>{$v.call(this,{button:5},e),Kv.call(this)}));else{Vv.call(this,e,n),$v.call(this,{button:5},e);const o={};23===r.data.product_type&&(o["button"===t?"isButton":"toOfficalAccountDetail"]=!0),Kv.call(this,o)}},_v=function(e={}){if(sA.call(this))return;const t=Ry(this),n=e.container?e.container:"",r=e.event?e.event:{},o=t[n].getAbsolutePosition();return{x:o.left+r.x,y:o.top+r.y}},mv=function(e=!1,t={}){if(sA.call(this))return;const n=Ry(this);n.isPress=e,n.startPosX=null!=t&&t.x?t.x:0,n.startPosY=null!=t&&t.y?t.y:0,n.lastPosX=null!=t&&t.x?t.x:0,n.lastPosY=null!=t&&t.y?t.y:0,n.lastSecondPosX=null!=t&&t.x?t.x:0,n.lastSecondPosY=null!=t&&t.y?t.y:0,n.direction="",n.startTime=e?+new Date:0,e&&n.throttleTimer&&clearTimeout(n.throttleTimer),n.throttleTimer=null,n.timeStamp=0,n.callCount=0,n.distanceList=[]},yv=function(){if(sA.call(this))return;const e=Ry(this),t=e.imgBaseName;for(let n=0;n<3;n++){const r=e[t+n].getAbsolutePosition();e[`pageImgIcon${n}`].style.backgroundColor=0===r.left?"#ffffff":"rgba(255, 255, 255, 0.55)"}},vv=function(e={}){if(sA.call(this))return;const t=Ry(this),n=e.event?e.event:{},r=e.direction?e.direction:"left";let o="top"===r?n.y-t.lastPosY:n.x-t.lastPosX;$i.S3.isAndroid&&(o="top"===r?n.y-t.lastSecondPosY:n.x-t.lastSecondPosX);const i=e.critical?e.critical:0;return"top"===r?o<0&&Math.abs(o)>=i?"up":"down":o<0&&Math.abs(o)>=i?"right":"left"},Av=function(e={}){if(sA.call(this))return Promise.reject({errMsg:Xy});const t=Ry(this),n=e.direction?e.direction:"left",r=e.imgBox?e.imgBox:"";let o="top"===n?e.event.y:e.event.x;const i=vv.call(this,e),a=e.directionMap?e.directionMap:{},s=e.posQueue?e.posQueue:[];let c=null;if(Object.keys(a).length>0)c=a[i]?a[i]:0;else{o=t[r].style[n],s.sort(((e,t)=>e-t));let a=0,l=s.length-1;for(;a<l;){const e=Math.floor((a+l)/2),t=l-a,n=s[e];if(o===n){c=n;break}if(o>n?a=e:l=e,t<=1)break}if(!c)if(e.decideByDirection)c=s[i]||("right"===i?s[a]:s[l]);else{const e=s[l],t=s[a];c=Math.abs(o-e)>=Math.abs(o-t)?t:e}}return Promise.resolve().then((()=>{t[r].style[n]=c})).then((()=>{if(e.logPagePull)return kv.call(this,e);mv.call(this)})).then((()=>{if(e.showTips)return pv.call(this)})).then((()=>{if(e.setImgTips)return t[r].nextLayout((()=>{yv.call(this)}))}))},bv=function(e={}){if(sA.call(this))return;if(!e||"object"!=typeof e)return;const t=Ry(this),n=e.padding?e.padding:0,{pageType:r}=t;let o=t.data.flooringPage.img_list?t.data.flooringPage.img_list:[];o="string"==typeof o?JSON.parse(o):o;let i=0;return o.forEach(((e,t)=>{const{width:o}=wv.call(this,{pageType:r,width:e.width,height:e.height});i+=0===t?o:n+o})),i},wv=function(e){if(sA.call(this))return;const t={},{screenWidth:n}=$i.S3;if(!e||"object"!=typeof e)return t;const{pageType:r,width:o,height:i}=e;return 1!==r&&r?2===r&&o===i?(t.scale=150/o,t.width=150,t.height=150):2===r&&o!==i&&(t.scale=150/i,t.width=150*o/i,t.height=150):(t.scale=n/o,t.width=n,t.height=n),t},Cv=function(){if(sA.call(this))return;const e=Ry(this),{pageType:t}=e;let n=e.data.flooringPage.img_list?e.data.flooringPage.img_list:[];n="string"==typeof n?JSON.parse(n):n;const r=e.imgBaseName?e.imgBaseName:"";n.forEach(((n,o)=>{const i=r+o,{width:a,height:s,scale:c}=wv.call(this,{pageType:t,width:n.width,height:n.height});e[i].scale=c,e[i].style.width=a,e[i].style.height=s,e[i].src=n.image_url}))},Iv=function(){if(sA.call(this))return Promise.resolve();const e=Ry(this);if(!e.data.flooringPage)return Promise.resolve();Fv.call(this,P_.dA.REWARDEDVIDEOSHOWFLOORINGPAGE);const{yMin:t,yMax:n}=e.flooringPageInfos;return 2!==e.pageType||e.flooringPageIsShow?1===e.pageType?e.pageContainer.animate({left:0,duration:300}).then((()=>kv.call(this))):e.pageType?Promise.resolve():(e.cardContainer.animate({opacity:0,duration:280}),e.defaultPageContainer.animate({opacity:1,duration:280}).then((()=>kv.call(this)))):e.pageCardBody.animate({top:t,duration:50}).then((()=>(e.flooringPageAutoShow=!0,kv.call(this,{min:t,max:n})))).then((()=>pv.call(this)))},Ev=function(){if(sA.call(this))return;const e=Ry(this);if([1,2].includes(e.pageType)){e.flooringPageState.pageType=e.pageType,e.flooringPageState.card={click:0},e.flooringPageState.button={click:0};for(let t=0;t<=3&&(3!==t||2===e.pageType);t++)e.flooringPageState[`img${t}`]={exposure:0,click:0}}},Sv=function(){if(sA.call(this))return;const e=Ry(this);if($i.S3.isIOS){for(let t=0;t<3;t++)e[`pageImg${t}`].src=Wy,e[`pageCardImg${t}`].src=Wy;e.pageCardImg3.src=Wy,e.pageAppIcon.src=Wy,e.pageCardAppIcon.src=Wy,e.pageCardTipIcon.src=Wy}},Tv=function(e={},t=""){if(sA.call(this))return;const n=Ry(this);if("img"===t){const t=n.imgBaseName;for(let r=0;r<=3&&(3!==r||2===n.pageType);r++){const o=n[t+r].getAbsolutePosition(),{width:i}=n[t+r].style,{height:a}=n[t+r].style,s=o.left,c=o.left+i,l=o.top,d=o.top+a;e.x>=s&&e.x<=c&&e.y>=l&&e.y<=d&&(n.flooringPageState[`img${r}`].click+=1)}}else["card","button"].includes(t)&&(n.flooringPageState[t].click+=1)},xv=function(e=!1){if(sA.call(this))return;const t=Ry(this);if(e){if(t.pageType){const e=t.imgBaseName;for(let n=0;n<=3&&(3!==n||2===t.pageType);n++){const r=t[e+n].getAbsolutePosition(),{width:o}=t[e+n].style,i=-o/2,a=$i.S3.screenWidth-o/2;r.left>i&&r.left<a&&(t.flooringPageState[`img${n}`].exposure+=1)}}}else t.exposureTimer&&(clearTimeout(t.exposureTimer),t.exposureTimer=null),t.exposureTimer=setTimeout((()=>xv.call(this,!0)),1e3)},kv=function(e={}){if(sA.call(this))return;const t=Ry(this);if(2===t.pageType){const n=e.min?e.min:0,r=e.max?e.max:0;t.pageCardBody.style.top!==n||t.flooringPageIsShow||t.flooringPageAutoShow?t.pageCardBody.style.top===r&&t.flooringPageIsShow?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Pv.call(this,{type:2,staytime:0,componentsstartstr:""}),Pv.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageShowTime=0,t.flooringPageCloseTime=0,Ev.call(this)):t.pageCardBody.style.top===n&&t.flooringPageAutoShow?(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Pv.call(this,{type:4,staytime:0,componentsstartstr:""}),xv.call(this)):e.isClose&&t.flooringPageIsShow&&(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Pv.call(this,{type:5,staytime:0,componentsstartstr:""}),Pv.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Ev.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Pv.call(this,{type:1,staytime:0,componentsstartstr:""}),xv.call(this))}else 1===t.pageType?e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Pv.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Ev.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Pv.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),xv.call(this)):t.pageType||(e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Pv.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Ev.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Pv.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),xv.call(this)))},Pv=function(e){if(sA.call(this))return;const t=Ry(this);1===t.pageType&&delete e.type;const n=[];return n.push(e),t.adProxy.reportFlooringPage(t.pageType,n)},Dv=function(){if(sA.call(this))return Promise.reject({errMsg:Xy});const e=Ry(this);return e.adProxy.fetch().then((t=>{try{e.adProxy.setTimePoint("p4");const n=Object.keys(e.emitter.emitter).includes("_events")?Object.keys(e.emitter.emitter._events):[];return"devtools"!==$i.S3.platform||n.includes("_error")?(e.data=t,e.isData=!0,Ov.call(this),e.adProxy.preloadLanding(),e.emitter.emit("load"),void e.adProxy.setTimePoint("p5")):void console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。（无广告返回时，建议不设置激励视频入口）")}catch(t){throw e.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_PARSE_ERROR,t),{}}}))},Ov=function(){if(sA.call(this))return;const e=Ry(this),{data:t}=e,{deviceOrientation:n,screenWidth:r,screenHeight:o}=$i.S3;if(e.container.style.left=0,$i.S3.isIOS){const t="portrait"===n?qy.top?44:12:10,r="portrait"===n?qy.top?78:46:44;e.topBar.style.top=t,e.topBarFix.style.top=t,e.adFeedbackList.style.top=r,e.adFeedbackMenu.style.top=r}e.container.style.top=o,e.video.style.padding=8,e.video.style.paddingBottom=16;if(tv.call(this,["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"]),r<o)e.cardContainer.style.width=r-16,e.cardContainer.style.top=o-130,e.cardContainer.style.left=8,e.topBar.style.left=0,e.topBar.style.width=r,e.card.style.height=90;else if(r>=o){const t=qy.top||0;e.cardContainer.style.width=348,e.cardContainer.style.top=o-104,e.cardContainer.style.left=t+18,e.topBar.style.width=r-2*t-16,e.topBar.style.left=t+8,e.card.style.height=72}if(Vy&&(e.topBar.style.top=e.topBar.style.top+30,e.topBarFix.style.top=e.topBarFix.style.top+30,e.adFeedbackList.style.top=e.adFeedbackList.style.top+30,e.adFeedbackMenu.style.top=e.adFeedbackMenu.style.top+30),$i.S3.isWaGame?e.container.style.fixed&&delete e.container.style.fixed:e.container.style.fixed=!0,e.dialog.style.top=o>138?(o-138)/2:0,e.dialog.style.left=r>300?(r-300)/2:0,e.dialogCloseTip.style.top=(o-36)/2,e.dialogCloseTip.style.left=(r-124)/2,uA.call(this))e.cardContainer.style.hidden=!0,e.container.style.backgroundColor="rgba(0, 0, 0, 0)",e.topBar.style.hidden=!0,e.topBarFix.style.hidden=!0,e.video.style.hidden=!0,e.video.src&&(e.video.src="https://wxa.wxs.qq.com/images/wxapp/empty.mp4");else{var i,a;e.container.style.backgroundColor="#000000";const{product_type:n}=t,{src:r,poster:o,duration:s}=AA.call(this);e.cardContainer.style.hidden=vA.call(this),e.expandCardContainer.style.hidden=!vA.call(this),$i.S3.isIOS&&e.video.src===r&&e.video.seek(0),$i.S3.isIOS?(e.video.poster=o,(0,__.Vs)(500).then((()=>{e.video.src=r}))):(e.video.src=r,e.video.poster=o),e.adProxy.setTimePoint("p8"),e.buttonTextType=e.data.button_action.text_type||0,wA.call(this),$i.S3.isAndroid&&(e.preloadVideo=!0,e.preloadVideoSuccess=!1,e.adProxy.preloadVideo([r]).catch((t=>{e.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_PRELOAD_ERROR,t)})));const{rewardedTime:c}=e.data,l=Math.ceil((s>c?c:s)/1e3).toString();e.countDown.value=l,e.countDownFix.value=l,e.countDownAppend.value="秒后可获得奖励",e.countDownAppendFix.value="秒后可获得奖励",e.countDown.style.width=2===l.length?19:12,e.countDownFix.style.width=2===l.length?19:12,e.countDownAppend.style.width=100,e.countDownAppendFix.style.width=100,av.call(this),e.adProxy.isValidCondition("widget_gray_close_v2")&&(e.adFeedback.style.hidden=!1,e.close.value="关闭",e.close.style.width=29),12===n&&(e.adProxy.setAppInstallState(!1),eA.call(this));let d=[];(null===(i=e.data.crtInfo)||void 0===i||null===(a=i.wxgame_video_card)||void 0===a?void 0:a.pendant_img)&&(d=d.concat(Oy));const{adDynamicList:u}=e.adProxy.data,p=null!=u&&u.length?d.concat(u):d;Mv.call(this,p)}},Nv=function(e){const t=Ry(this),n=(0,k_.ei)($i.S3,["screenWidth","screenHeight","deviceOrientation"]);return x_(e,{$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:I()({},n),time:Date.now()},$scope:{private:t,safeArea:qy}},{"#rewardedVideoIsExpandStyle":()=>vA.call(this)})};let Rv=null;const Mv=function(e){const t=Ry(this),n=(0,k_.ei)($i.S3,["screenWidth","screenHeight","deviceOrientation"]);null!=e&&e.length&&(t.dynamicElems||(t.dynamicElems={}),t.dynamicOldStyle||(t.dynamicOldStyle={}),t.dynamicEmitter||Lv.call(this),e.forEach((e=>{const{op:r,expr:o}=e;if(!o||Nv.call(this,o))if("insert"===r){var i;const{id:r,parent:o,tpl:l,bubbleEvent:d}=e;if(null!==(i=t.dynamicElems)&&void 0!==i&&i[r]){var a,s,c;if(n.screenWidth===Rv)return;null===(a=(s=t.dynamicElems[r]).remove)||void 0===a||a.call(s),(0,m_.vE)(null===(c=t.dynamicElems[r])||void 0===c?void 0:c.referComponent)}const u=(0,m_.sY)(M_,{manager:null,reporter:null,emitter:t.dynamicEmitter,adProxy:t.adProxy,template:l,systemInfo:I()({},n),scope:{private:t,safeArea:qy},adData:t.adProxy.data,adDatas:t.adProxy.datas,adCustomId:Ty,isEmpty:!1},!1);!1!==d&&u.updateBubbleEvent(),t.dynamicElems[r]=u.getRootElement(),t[o]&&t[o].add(t.dynamicElems[r])}else if("setStyle"===r){const{id:n,style:r}=e,o=t[n]||t.dynamicElems[n]||null;if(o){let e=!1;t.dynamicOldStyle&&!t.dynamicOldStyle[n]&&(e=!0,t.dynamicOldStyle[n]={});for(const i of Object.keys(r)){let a=i,s=r[i];if(i.includes("Expr")){const e=i.split("Expr");2===e.length&&([a]=e,s=Nv.call(this,s))}e&&(t.dynamicOldStyle[n][a]=o.style[a]),o.style[a]=s}}}else if("setAttrs"===r){const{id:n,attrs:r}=e,o=t[n]||t.dynamicElems[n]||null;if(o)for(const e of Object.keys(r))o[e]=r[e]}})),Rv=n.screenWidth),Fv.call(this,P_.dA.REWARDEDVIDEOHANDLEDYNAMICDONE)},Lv=function(){const e=Ry(this);e.dynamicEmitter=new cm,e.dynamicEmitter.on("adCustomEvent",(t=>{const{action:n,adCustomId:r,value:o}=t;if(r===Ty)if(n===P_.A$.LANDAD){var i;const e=null===(i=t.value)||void 0===i?void 0:i.event;if(!iv.call(this,e))return;gv.call(this,e,"",Sy.REWARD_DYNAMIC_CONTENT)}else if(n===P_.A$.BTNTAP){var a;const e=null===(a=t.value)||void 0===a?void 0:a.event;if(!iv.call(this,e))return;gv.call(this,e,"button",Sy.REWARD_DYNAMIC_BUTTON)}else if(n===P_.A$.REPORTADMONITORDATA){const{id:t,key:n,extInfo:r}=o,i=t?{idKeyGroup:t,idKey:n}:n;e.adProxy.reportAdMonitorData(i,r)}else if(n===P_.A$.REWARDEDVIDEODYNAMIC){const{list:e}=o;(0,$i.uj)(),Mv.call(this,e)}}))},Bv=function(e,t){const n=Ry(this);if(n.dynamicElems){const r=[];for(const e of Object.keys(n.dynamicElems))r.push(n.dynamicElems[e].ready());Promise.all(r).then((()=>{n.dynamicEmitter&&n.dynamicEmitter.emit("adCustomEvent",{adCustomId:Ty,action:e,value:t})}))}},Fv=function(e,t){const n=Ry(this);if(n.dynamicElems)for(const o of Object.keys(n.dynamicElems)){var r;const i=null===(r=n.dynamicElems[o])||void 0===r?void 0:r.referComponent;i&&i.emitComponentEvent(e,t)}},Wv=function(){const e=Ry(this);jv.call(this);const t=AA.call(this);e.keepAliveTimer=setTimeout((()=>{e.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_KEEP_ALIVE,{currentTime:e.currentTime,duration:t.duration,src:e.video.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},jv=function(){const e=Ry(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},Uv=function(e,t=0){var n;if(sA.call(this))return Promise.reject({errMsg:Xy});const r=Ry(this),{width:o,height:i}=2===r.pageType?r.pageCard.layoutBox:r.card.layoutBox;[0,2,3].includes(t)&&(r.clickCount+=1);const a={slotid:Ny,costtype:null!==(n=r.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,click_time:+new Date,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:Number(o)||0,ad_height:Number(i)||0,press_interval:e.pressInterval,block_click:t};return r.adProxy.reportTouchClick(a)},Vv=function(e,t){if(sA.call(this))return Promise.reject({errMsg:Xy});const n=Ry(this),r=AA.call(this);let o=Promise.resolve();const i={currentTime:n.currentTime,duration:r.duration};let a=n.card,{absoluteX:s,absoluteY:c}=e;2===n.pageType?(a=n.pageCardContainer,s=Math.round(e.x),c=Math.round(e.y)):a=[Sy.REWARD_CARD_BUTTON,Sy.REWARD_CARD].indexOf(t)>-1?n.card:n.container;const{left:l,top:d}=a.getAbsolutePosition(),{width:u,height:p}=a.layoutBox;return o=n.adProxy.reportClick({clickAbsoluteLeft:s,clickAbsoluteTop:c,clickRelativeLeft:s-l,clickRelativeTop:c-d,pressInterval:e.pressInterval,left:l,top:d,width:u,height:p,videoData:i}),fA.call(this,t),My(o,"激励视频","点击广告卡片"),Hv.call(this,{stage:1002}),o},Gv=function({playType:e,conditionType:t}){if(sA.call(this))return Promise.reject({errMsg:Xy});const n=Ry(this),r=AA.call(this);return n.adProxy.reportVideo({playType:e,conditionType:t,playDuration:n.currentTime,videoDuration:r.duration,muted:n.video.muted,rewardedTime:n.data.rewardedTime,isRewarded:n.isRewarded})},$v=function({button:e},t={}){var n;if(sA.call(this))return Promise.reject({errMsg:Xy});const r=Ry(this),o=AA.call(this),i=5===e?+new Date:0,a=t?t.pressInterval:0;return r.adProxy.reportBehaviorButton({button:e,isEnded:r.isEnded,playDuration:r.currentTime,videoDuration:null!==(n=null==o?void 0:o.duration)&&void 0!==n?n:0,preloadVideo:r.preloadVideo?1:0,preloadVideoSuccess:r.preloadVideoSuccess?1:0,videoFirstPlay:r.videoFirstPlayTime,cardFirstShow:r.cardFirstShowTime,clickCard:i,pressInterval:a,currentPlayUrl:r.video.src,lastFetchUrl:o?o.src:""})},Hv=function({stage:e}){if(sA.call(this))return Promise.reject({errMsg:Xy});const t={adtype:2,stage:e};return Ry(this).adProxy.reportADFunnelModel(t)},Zv=e=>{e?(0,Dy.y4)(Dy.F0.EVENT_CANVAS_ADS_FIN):(0,Dy.y4)(Dy.F0.EVENT_CANVAS_ADS_CANCEL)},Qv=function(e=0){var t;if(sA.call(this))return;const n=Ry(this);n.adProxy.reportTimePoints({slotid:Ny,costtype:null!==(t=n.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,extInfo:{preloadVideoSuccess:n.preloadVideoSuccess?1:0}});const r=n.isRewarded;n.sound.style.hidden=!1,n.soundFix.style.hidden=!1,n.splitLine.style.hidden=!1,n.splitLineFix.style.hidden=!1,n.landingCount=0,n.clickCount=0,n.isPlaying=!1,n.isVideoCalledPlay=!1,n.isFirstPlaySuccess=!1,n.isShowed=!1,n.isRewarded=!1,n.isEnded=!1,n.isData=!1,n.disableGaussBlur=!1;try{var o;if(n.dynamicElems)for(const e of Object.keys(n.dynamicElems)){const t=n.dynamicElems[e];null!=t&&t.remove&&t.remove(),t.referComponent&&(0,m_.vE)(t.referComponent)}if(n.dynamicOldStyle)for(const e of Object.keys(n.dynamicOldStyle)){var i;const t=n[e]||(null===(i=n.dynamicElems)||void 0===i?void 0:i[e])||null,r=n.dynamicOldStyle[e];for(const e of Object.keys(r))t.style[e]=r[e]}n.dynamicElems=null,n.dynamicOldStyle=null,null!==(o=n.dynamicEmitter)&&void 0!==o&&o.off&&n.dynamicEmitter.off("adCustomEvent"),n.dynamicEmitter=null}catch(e){}n.isCancelPlayablePage=!1,n.isLandingPlayblePage=!1,n.playableTipsContent.value="视频结束后可试玩",n.playableGiveUp.value="放弃",n.playableGiveUp.style.color="#07C160",n.playableGiveUp.style.opacity=1,n.playableTipsWrap.style.width=132,n.playableTipsWrap.style.left=0,n.playableTipsWrap.style.hidden=!0,n.cardContainer.style.hidden=!0,n.playableTipsContent.style.width=120,n.playableGiveUp.style.hidden=!0,n.playableCancelBox.style.hidden=!0,n.cardContainer.style.opacity=1,n.rewardPageCostTime=0,n.isShowedExposureReported=!1,n.isViewableExposureReported=!1,n.adProxy.isViewable=!0,$i.S3.isWaGame||(n.isFullscreen=!1),n.downloadProgress.style.width=0,n.pageDownloadProgress.style.width=0,2!==e&&(!$i.S3.isWaGame&&($i.S3.isIOS||n.data&&n.data.crt_size===Hi.vK.CRT_SIZE_REWARD_LANDINGPAGE)?(0,__.Vs)(100).then((()=>{n.emitter.emit("close",{isEnded:r}),Zv(r)})):(n.emitter.emit("close",{isEnded:r}),Zv(r))),n.adProxy.reset();const a=Dv.call(this);a.catch((()=>{})),n.adFetchResult=a,n.container.style.hidden=!0,n.adCover.hide(),r?Hv.call(this,{stage:1005}):Hv.call(this,{stage:1006}),1===n.pageType?n.pageContainer.style.hidden=!0:2===n.pageType?(n.pageHandler.style.hidden=!0,n.pageCardBody.style.hidden=!0,n.pageMask.style.hidden=!0,n.pageCardTip.style.hidden=!0,n.video.style.padding=8,n.video.style.paddingBottom=16):n.pageType||(n.defaultPageContainer.style.hidden=!0),n.pageHandler.style.hidden=!0,kv.call(this,{isClose:!0}),$i.S3.isAndroid&&n.adProxy.setInnerAudioOption(!0).catch((()=>{})),n.showTipsTimer&&clearTimeout(n.showTipsTimer),n.exposureTimer&&clearTimeout(n.exposureTimer),n.updateScreenInfoTimer&&clearTimeout(n.updateScreenInfoTimer),n.layoutTimer&&clearTimeout(n.layoutTimer),n.rewardPageTimer&&clearTimeout(n.rewardPageTimer),n.reportDurationTimer&&clearTimeout(n.reportDurationTimer),n.pageType=0,n.imgBaseName="",Iy("show",n.adType,0),Iy("close",n.adType,+new Date)},Yv=function(e=0){if(sA.call(this))return Promise.reject({errMsg:Xy});const t=Ry(this);return uA.call(this)||pA.call(this)?zv.call(this,e):(Gv.call(this,{playType:t.isEnded?"complete":"partial",conditionType:"close"}),1===e?(Qv.call(this),Promise.resolve()):[2,3].includes(e)?Promise.all([rv.call(this),Qv.call(this,e)]):t.container.animate({top:$i.S3.screenHeight,duration:500}).then((()=>rv.call(this))).then((()=>Qv.call(this))))},zv=function(e){if(sA.call(this))return Promise.reject({errMsg:Xy});const t=Ry(this);return pA.call(this)||(t.container.style.top=$i.S3.screenHeight,t.topBar.style.hidden=!0,t.topBarFix.style.hidden=!1,t.dialogClose.value="放弃",t.dialogCancel.value="继续",t.video.style.hidden=!1,t.showDialogContainer=!1),1===e?(Qv.call(this),Promise.resolve()):Promise.all([rv.call(this),Qv.call(this,e)])},qv=function(){if(sA.call(this))return;const e=Ry(this);if(e.rewardPageCostTime>=15e3)e.isEnded=!0,e.isRewarded=!0,Yv.call(this),$v.call(this,{button:4});else{const t="暂未获得奖励\n是否继续浏览页面";e.showDialogContainer=!0,e.dialogContainer.style.hidden=!1,e.dialogTitle.value=t,e.adProxy.setRightButtonHide(!0).catch((()=>{}))}},Jv=function(){if(sA.call(this))return;const e=Ry(this);if(jv.call(this),e.isRewarded)Yv.call(this),$v.call(this,{button:4});else{const t="暂未获得奖励\n是否继续观看视频";e.dialogContainer.style.hidden=!1,e.dialogTitle.value=t,bA.call(this,"pause"),e.isPause=!0}},Kv=function(e={}){if(sA.call(this))return;const t=Ry(this),n=AA.call(this);var r;(t.notReportExit=!0,t.landingCount+=1,t.landingCount>1)&&t.adProxy.reportRepeatClick({slotId:Ny,costType:null!==(r=t.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,clkCnt:t.landingCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName});t.lastLandingTime=+new Date,t.lastJsapiStatus=2,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0;const o=t.adProxy.land(e);if(23===t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(o.then((e=>{const n=/ok/.test(e.errMsg);n&&(0===t.buttonTextType&&(t.button.value="查看公众号",Ky.call(this),Bv.call(this,P_.A$.CHANGEADBTNTEXT,{text:"查看公众号"})),t.data.flooringPage&&1===t.pageType&&0===t.buttonTextType?t.pageButton.value="查看公众号":t.data.flooringPage&&2===t.pageType&&0===t.buttonTextType?t.pageCardButton.value="查看公众号":t.pageType||(t.defaultPageButton.value="查看公众号"),t.expandCardButton.value="查看公众号",t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),t.adProxy.reportAdIDKey({key:h_.IN.REWARDED_VIDEO_FOLLOW_SUCCESS})),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));const r=+new Date;var o;(t.lastJsapiStatus=0,t.lastJsapiCostTime=r-t.lastLandingTime,"private_addContact"===t.lastJsapiName)&&t.adProxy.reportLandingTime({slotId:Ny,costType:null!==(o=t.adProxy.data)&&void 0!==o&&o.is_cpm?1:2,openTime:t.lastLandingTime,closeTime:r,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.landingCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:n?2:3,actTypeStr:n?"关注":"取消"});$i.S3.isWaGame||!$i.S3.isAndroid||pA.call(this)||setTimeout((()=>{t.adProxy.hideVirtualBottomNavigationBar().catch((()=>{})),t.container.forceUpdate()}),250)})).catch((()=>{t.lastJsapiStatus=1})),Xv.call(this,o)):(t.flooringPageCloseTime=(new Date).getTime(),o.then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===t.lastJsapiName||"navigateToMiniProgram"===t.lastJsapiName||"openADCanvas"===t.lastJsapiName||"launchApplication"===t.lastJsapiName?(t.isLandingPage=!0,jv.call(this),t.flooringPageIsShow&&(Pv.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageShowTime=0,t.flooringPageCloseTime=0,Ev.call(this))):t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((()=>{t.lastJsapiStatus=1}))),uA.call(this)||pA.call(this)){setTimeout((()=>{t.notReportExit=!1}),1e3);const e=t.adProxy.reportVideo({playType:t.isPlaying?"partial":"complete",conditionType:"land",playDuration:t.currentTime,videoDuration:n.duration,muted:t.video.muted});My(e,"激励视频","跳转落地页")}return o},Xv=function(e){if(sA.call(this))return;const t=Ry(this),n=e.then((e=>/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):Promise.resolve())).catch((()=>t.adProxy.reportFollow({result:"fail"})));return My(n,"激励视频","关注"),n},eA=function(){if(sA.call(this))return;const e=Ry(this),{appInfo:{apkName:t,versionCode:n,urlScheme:r}}=e.data;e.adProxy.getInstallState(t).then((t=>{if(t.isInstalled&&(void 0===t.versionCode||t.versionCode>=n)){if(e.adProxy.setAppInstallState(!0),e.androidAppState=4,e.button&&r&&r.trim().length>0){if(e.button.value="进入应用",e.pageCardButton.value="进入应用",e.pageButton.value="进入应用",e.defaultPageButton.value="进入应用",e.expandCardButton.value="进入应用",Bv.call(this,P_.A$.CHANGEADBTNTEXT,{text:"进入应用"}),1===e.buttonTextType){const t=e.data.button_action.button_text;e.button.value=t,e.pageCardButton.value=t,e.pageButton.value=t,e.defaultPageButton.value=t,e.expandCardButton.value=t,Bv.call(this,P_.A$.CHANGEADBTNTEXT,{text:t})}Ky.call(this)}if(e.adProxy.isValidCondition("widget_gray_video_download_v2")&&e.downloadButtonText&&r&&r.trim().length>0){if(e.downloadButtonText.value="进入应用",e.downloadProgressText.value="进入应用",1===e.buttonTextType){const t=e.data.button_action.button_text;e.downloadButtonText.value=t,e.downloadProgressText.value=t}if(1===e.pageType&&(e.pageDownloadButtonText.value="进入应用",e.pageDownloadProgressText.value="进入应用",1===e.buttonTextType)){const t=e.data.button_action.button_text;e.pageDownloadButtonText.value=t,e.pageDownloadProgressText.value=t}Ky.call(this)}}else e.adProxy.isValidCondition("widget_gray_video_download_v2")&&4===e.androidAppState&&(e.downloadButtonText.value=e.data.button_action.button_text,e.downloadProgressText.value=e.data.button_action.button_text,Ky.call(this),1===e.pageType&&(e.pageDownloadButtonText.value=e.data.button_action.button_text,e.pageDownloadProgressText.value=e.data.button_action.button_text),e.androidAppState=0)})).catch((()=>{}))},tA=function(e={}){if(sA.call(this))return;const t=Ry(this);Vv.call(this,e,Sy.REWARD_DOWNLOAD);const{appInfo:{appName:n,apkName:r,apkUrl:o,appMd5:i,urlScheme:a}}=t.data,{aid:s,traceid:c,apurl:l}=t.adProxy.data;let d=0,u="";if(t.landingCount+=1,t.lastLandingTime=+new Date,t.lastJsapiStatus=0,t.lastJsapiCostTime=0,4===t.androidAppState)t.adProxy.launchApplication(a).catch((()=>{Kv.call(this,{isButton:!0})})),t.lastJsapiName="launchApplication",t.isLandingPage=!0;else if(0===t.androidAppState){const e=[s,c,r.replace(/./g,"_"),0,20,l.indexOf("ad.wx.com")>-1?1:0].join(".");t.adProxy.addDownloadTaskStraight(n,o,i,e).then((e=>{t.androidDownloadId=e.downloadId,setTimeout(nA.bind(this),jy)})).catch((()=>{Kv.call(this,{isButton:!0})})),t.lastJsapiName="addDownloadTaskStraight",d=4,u="下载"}else 1===t.androidAppState?(t.adProxy.pauseDownloadTask(t.androidDownloadId).catch((()=>{})),t.downloadButtonText.value="继续下载",t.downloadProgressText.value="继续下载",1===t.pageType&&(t.pageDownloadButtonText.value="继续下载",t.pageDownloadProgressText.value="继续下载"),Ky.call(this),t.androidAppState=2,t.lastJsapiName="pauseDownloadTask",d=5,u="暂停"):2===t.androidAppState?(t.adProxy.resumeDownloadTask(t.androidDownloadId).then((()=>{setTimeout(nA.bind(this),jy)})).catch((()=>{})),t.downloadButtonText.value="暂停下载",t.downloadProgressText.value="暂停下载",1===t.pageType&&(t.pageDownloadButtonText.value="暂停下载",t.pageDownloadProgressText.value="暂停下载"),Ky.call(this),t.androidAppState=1,t.lastJsapiName="resumeDownloadTask",d=6,u="继续"):3===t.androidAppState&&(t.adProxy.installDownloadTask(t.androidDownloadId).catch((()=>{})),t.lastJsapiName="installDownloadTask",d=7,u="安装");var p;d>0&&t.adProxy.reportLandingTime({slotId:Ny,costType:null!==(p=t.adProxy.data)&&void 0!==p&&p.is_cpm?1:2,openTime:t.lastLandingTime,clickTime:t.lastLandingTime,clkCnt:t.landingCount,jsapiName:t.lastJsapiName,actTypeInt:d,actTypeStr:u})},nA=function(e=3){if(sA.call(this))return;const t=Ry(this);t.adProxy.queryDownloadTask(t.androidDownloadId).then((e=>{if("download_succ"===e.state)t.downloadButtonText.value="安装应用",t.downloadProgressText.value="安装应用",t.downloadProgress.style.width=t.downloadButton.style.width,1===t.pageType&&(t.pageDownloadButtonText.value="安装应用",t.pageDownloadProgressText.value="安装应用",t.pageDownloadProgress.style.width=t.pageDownloadButton.style.width),t.androidAppState=3,Ky.call(this);else if("downloading"===e.state)t.downloadButtonText.value="暂停下载",t.downloadProgressText.value="暂停下载",t.downloadProgress.style.width=t.downloadButton.style.width*parseInt(e.progress,10)/100,1===t.pageType&&(t.pageDownloadButtonText.value="暂停下载",t.pageDownloadProgressText.value="暂停下载",t.pageDownloadProgress.style.width=t.pageDownloadButton.style.width*parseInt(e.progress,10)/100),t.androidAppState=1,Ky.call(this);else if("download_fail"===e.state){if(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadProgressText.value=t.data.button_action.button_text,t.downloadProgress.style.width=0,1===t.pageType&&(t.pageDownloadButtonText.value=t.data.button_action.button_text,t.pageDownloadProgressText.value=t.data.button_action.button_text,t.pageDownloadProgress.style.width=0,1===t.buttonTextType)){const e=t.data.button_action.button_text;t.pageDownloadButtonText.value=e}t.androidAppState=0,Ky.call(this)}"downloading"!==e.state&&"default"!==e.state||setTimeout(nA.bind(this),jy)})).catch((()=>{e>0&&nA.call(this,e-1)}))},rA=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:n=0,secondGradeDesc:r="",feedbackReason:o=0}){if(sA.call(this))return;const i=Ry(this);e&&!n&&(i.clickFirstGradeTime=+new Date),i.adProxy.reportAdFeedbackData({adWidth:$i.S3.screenWidth,adHeight:$i.S3.screenHeight,adPosX:0,adPosY:0,expTime:i.startExposureTime,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?i.clickFirstGradeTime:0,secondGradeId:n,secondGradeDesc:r,secondGradeTime:n?+new Date:0,feedbackReason:o})},oA=function(e){const t=Ry(this),n={adWidth:$i.S3.screenWidth,adHeight:$i.S3.screenHeight,adPosX:0,adPosY:0},r={dismatch:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1},quality:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4},duplicate:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}};if(Array.isArray(e))for(const{type:o,expTime:i,isClickAd:a,clickAdTimeMs:s,feedbackTimeMs:c}of e){if("good"===o)continue;const e=r[o]||{};t.adProxy.reportAdFeedbackData(I()(I()(I()({},n),e),{},{expTime:i||0,isClickAd:a,clickAdTimeMs:s||0,secondGradeTime:c||0}))}},iA=function(){const e=Ry(this),t=$i.S3.isWaGame?"count":`count_${e.adProxy.getWebviewInfo().currentWebviewId}`,n=Ey(t,e.adType)||0;Iy(t,e.adType,n>0?n-1:0),(0,L_.Tb)(e.onShow),(0,L_.b$)(e.onHide),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),p_.uo.remove(e.container),(0,f_.bn)(this)},aA=function(){if(sA.call(this))return;const e=Ry(this);let t=Promise.resolve();e.isShowed&&(t=rv.call(this).then((()=>{e.adCover.hide(),$i.S3.isAndroid&&e.adProxy.setInnerAudioOption(!0).catch((()=>{})),Iy("show",e.adType,0),Iy("close",e.adType,+new Date)}))),t.then((()=>{iA.call(this)})).catch((()=>{iA.call(this)})),this._destroyed=!0},sA=function(){return this._destroyed},cA=function(e){const t=Ry(this),n=t.adProxy.reportExposure({exposureType:e,left:0,top:0,width:$i.S3.screenWidth,height:$i.S3.screenHeight});"showed"===e?t.isShowedExposureReported=!0:"viewable"===e&&(t.isViewableExposureReported=!0),My(n,"激励浏览","原始曝光")},lA=function(){const e=Ry(this);return pA.call(this)||(e.container.style.hidden=!1,e.container.style.top=0,e.adCover.show()),e.container.nextLayout().then((()=>sA.call(this)?Promise.reject({errMsg:Xy}):(nv.call(this).then((()=>{$i.S3.isWaGame||(e.isFullscreen=!0)})).catch((t=>{e.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR,t)})),Kv.call(this)))).then((t=>{if(pA.call(this)){t?e.adProxy.reportAdMonitorData(h_.IN.REWARD_CHANNELS_CALLBACK_SUCCESS,t):e.adProxy.reportAdMonitorData(h_.IN.REWARD_CHANNELS_CALLBACK_FAILED);const{rewardedDuration:n,feedbackInfo:r}=t||{},o=null!=n&&n>=15;e.isEnded=o,e.isRewarded=o,Yv.call(this),$v.call(this,{button:o?4:1}),oA.call(this,r)}})).catch((t=>{throw Iy("show",e.adType,0),t}))},dA=function(){var e;return(null===(e=Ry(this).data)||void 0===e?void 0:e.crt_size)!==h_.W.CRT_SIZE_REWARD_LANDINGPAGE},uA=function(){var e,t;const n=Ry(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===h_.W.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)!==h_.z5.DEST_TYPE_CHANNELS},pA=function(){var e,t;const n=Ry(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===h_.W.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)===h_.z5.DEST_TYPE_CHANNELS},hA=function(){const e=Ry(this),{product_type:t}=e.data;return[Hi.fY.OPEN_PLATFORM_APP_MOB,Hi.fY.APPLE_APP_STORE,Hi.fY.WECHAT,Hi.fY.MINI_GAME].includes(t)||!e.expandCardUseLogoStrategy},fA=function(e){const t=Ry(this),{adProxy:n}=t;n.reportMMClickPos({clickPos:e})},gA=function(){const e=Ry(this);if(!yA.call(this))return;e.disableGaussBlur=!0;const{poster:t,src:n}=AA.call(this);e.video.poster!==t&&(e.video.poster=t),e.video.src!==n&&(e.video.src=n,setTimeout((()=>{e.isVideoCalledPlay&&bA.call(this,"play")}),0)),e.video.style.width=$i.S3.screenWidth,e.video.style.height=$i.S3.screenHeight,_A.call(this)},_A=function(){const e=Ry(this);"portrait"===$i.S3.deviceOrientation?e.video.style.bottom=217*$i.S3.screenWidth/160-$i.S3.screenHeight/2:e.video.style.left=43*-$i.S3.screenHeight/96},mA=function(){const e=Ry(this),{deviceOrientation:t,screenWidth:n,screenHeight:r}=$i.S3,o="portrait"===t,i=o?r:n,a=o?n:r;e.defaultPageBackgroundImage.style.width=i,e.defaultPageBackgroundImage.style.height=i;const s=(i-a)/-2;o?(e.defaultPageBackgroundImage.style.left=s,e.defaultPageBackgroundImage.style.top=0):(e.defaultPageBackgroundImage.style.left=0,e.defaultPageBackgroundImage.style.top=s)},yA=function(){const e=Ry(this);return!(!e.data||e.disableGaussBlur)&&(0,yy.zt)(e.data)},vA=function(){const e=Ry(this);return!!e.data&&(0,yy.zi)(e.data)},AA=function(){var e,t;const n=Ry(this);return yA.call(this)&&null!==(e=n.data)&&void 0!==e&&e.gaussVideo?n.data.gaussVideo:(null==n||null===(t=n.data)||void 0===t?void 0:t.shortVideo)||null},bA=function(e){const t=Ry(this),{video:n}=t;n&&("play"===e?(t.isVideoCalledPlay=!0,n.play()):"pause"===e?(t.isVideoCalledPlay=!1,n.pause()):"stop"===e&&(t.isVideoCalledPlay=!1,n.stop()))},wA=function(){const e=Ry(this),{deviceOrientation:t,screenWidth:n,screenHeight:r}=$i.S3,{width:o,height:i}=AA.call(this);if(e.video.style.width=n,e.video.style.height=r,e.video.style.left=0,e.video.style.bottom=0,yA.call(this)){if("portrait"===t&&o<i)e.video.style.height=Math.floor(n/o*i),e.video.style.width=n;else if("landscape"===t&&o>i){const t=Math.floor(r*o/i);e.video.style.width=t,e.video.style.height=r,e.video.style.left=(n-t)/2}}else vA.call(this)&&_A.call(this)};class CA extends f_.wA{constructor({adUnitId:e,multiton:t=!1,pluginId:n=""}){super(),this._destroyed=void 0;const r=Ry(this);r.emitter=new cm,r.androidAppState=0,r.androidDownloadId=0,r.adUnitId=e,r.adType="incentive-video",r.adProxy=new h_.FF({adUnitId:e,adType:"incentive-video",pluginAppid:n}),r.adCover=new wy({adUnitId:e,adType:"incentive-video"}),r.isShowedExposureReported=!1,r.isViewableExposureReported=!1,r.isCardExposureReported=!1,r.dynamicElems=null,r.dynamicOldStyle=null,r.dynamicEmitter=null,r.expandCardUseLogoStrategy=!1,r.rewardPageCostTime=0,r.rewardPageTimer=null,r.showDialogContainer=!1,r.isData=!1,r.isFirstPlay=!1,r.isFirstPlaySuccess=!1,r.isPlaying=!1,r.isVideoCalledPlay=!1,r.isRewarded=!1,r.isEnded=!1,r.isPause=!1,r.currentTime=0,r.cardShowTime=0,r.videoFirstPlayTime=0,r.preloadVideo=!1,r.preloadVideoSuccess=!1,r.cardFirstShowTime=0,r.clickCount=0,r.landingCount=0,r.lastLandingTime=0,r.lastJsapiName="",r.lastJsapiStatus=0,r.lastJsapiCostTime=0,r.isLandingPage=!1,r.landingPageCostTime=0,r.hideTime=0,r.showTime=0,r.startExposureTime=0,r.clickFirstGradeTime=0,r.flooringPageIsShow=!1,r.flooringPageShowTime=0,r.flooringPageCloseTime=0,r.flooringPageState={},r.flooringPageAutoShow=!1,r.showTipsTimer=null,r.exposureTimer=null,r.isCancelPlayablePage=!1,r.isLandingPlayblePage=!1,r.buttonTextType=0,r.isPress=!1,r.startPosX=0,r.startPosY=0,r.lastPosX=0,r.lastPosY=0,r.lastSecondPosX=0,r.lastSecondPosY=0,r.direction="",r.throttleTimer=null,r.timeStamp=0,r.callCount=0,r.distanceList=[],r.startTime=0,r.lastStartTime=0,r.lastMoveTime=0,r.flooringPageInfos={},r.weappTouchEventHandler=null,r.updateScreenInfoTimer=null,r.layoutTimer=null,r.closeEventCount=0,r.reportDurationTimer=null,r.disableGaussBlur=!1,this._destroyed=!1,g_.call(this,Ly,Py);const{deviceOrientation:o,screenWidth:i,screenHeight:a}=$i.S3;r.container.style.width=i,r.container.style.height=a,r.container.style.top=a,r.container.style.hidden=!0,r.topBar.style.width=i,r.sound.src=Fy,r.soundFix.src=Fy,r.appIcon.src=Wy,Sv.call(this),$i.S3.isIOS&&(r.video.obeyMuteSwitch=!0),p_.uo.add(r.container),Vy&&(r.topBar.style.top=r.topBar.style.top+30,r.topBarFix.style.top=r.topBarFix.style.top+30,r.adFeedbackList.style.top=r.adFeedbackList.style.top+30,r.adFeedbackMenu.style.top=r.adFeedbackMenu.style.top+30);tv.call(this,["dialogContainer","dialogMask"]),r.dialog.style.top=a>138?(a-138)/2:0,r.dialog.style.left=i>300?(i-300)/2:0,$i.S3.isWaGame||(r.container.fullscreen=!0,r.isFullscreen=!1);const s=Dv.call(this);s.catch((()=>{})),r.adFetchResult=s,r.isSwitched=!1,$i.S3.isWaGame||(0,he.q)((()=>{if(sA.call(this))return;const{openType:e,createWebviewId:t,lastWebviewId:n}=r.adProxy.getWebviewInfo();if(["navigateTo","switchTab"].includes(e)&&t===n&&(r.isSwitched=!0),["navigateBack","navigateTo"].includes(e)&&t===n&&r.isShowed&&r.isData){const e=r.isFullscreen?3:1;$v.call(this,{button:6}),Yv.call(this,e)}})),r.close.on("click",(e=>{iv.call(this,e,!1)&&Jv.call(this)})),r.closeFix.on("click",(e=>{iv.call(this,e,!1)&&Jv.call(this)})),r.dialogClose.on("click",(e=>{iv.call(this,e,!1)&&(r.dialogContainer.style.hidden=!0,Yv.call(this),$v.call(this,{button:1}))})),r.dialogCancel.on("click",(e=>{iv.call(this,e,!1)&&(r.dialogContainer.style.hidden=!0,uA.call(this)?(r.showDialogContainer=!1,Kv.call(this)):(bA.call(this,"play"),Wv.call(this)),$v.call(this,{button:2}))})),r.sound.on("click",(e=>{iv.call(this,e,!1)&&(r.video.muted=!r.video.muted,r.sound.src=r.video.muted?Fy:By)})),r.soundFix.on("click",(e=>{iv.call(this,e,!1)&&(r.video.muted=!r.video.muted,r.soundFix.src=r.video.muted?Fy:By)})),r.adFeedback.on("click",(e=>{iv.call(this,e,!1)&&(r.adFeedbackList.style.hidden=!r.adFeedbackMenu.style.hidden||!r.adFeedbackList.style.hidden,r.adFeedbackList.style.hidden||rA.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),r.adFeedbackBtn.on("click",(e=>{iv.call(this,e,!1)&&(r.adProxy.openFeedbackUrl($i.S3.isWaGame?1003:1005),r.adFeedbackList.style.hidden=!0,rA.call(this,{secondGradeId:1,secondGradeDesc:"投诉"}))})),r.adDislikeBtn.on("click",(e=>{iv.call(this,e,!1)&&(rA.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"}),r.adFeedbackList.style.hidden=!0,r.adFeedbackMenu.style.hidden=!1)})),r.adQualityBtn.on("click",(e=>{iv.call(this,e,!1)&&(r.adFeedbackMenu.style.hidden=!0,rA.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),r.dialogCloseTip.style.hidden=!1,(0,__.Vs)(Uy).then((()=>{r.dialogCloseTip.style.hidden=!0})))})),r.adDuplicateBtn.on("click",(e=>{iv.call(this,e,!1)&&(r.adFeedbackMenu.style.hidden=!0,rA.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),r.dialogCloseTip.style.hidden=!1,(0,__.Vs)(Uy).then((()=>{r.dialogCloseTip.style.hidden=!0})))})),r.adDismatchBtn.on("click",(e=>{iv.call(this,e,!1)&&(r.adFeedbackMenu.style.hidden=!0,rA.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),r.dialogCloseTip.style.hidden=!1,(0,__.Vs)(Uy).then((()=>{r.dialogCloseTip.style.hidden=!0})))})),r.video.onTimeUpdate((e=>{const t=Number(e.duration),n=Number(e.position);try{if(sA.call(this)||!r.isShowed)return;if(Wv.call(this),r.isFirstPlay){let e=0;r.showTime>r.videoFirstPlayTime&&(e=r.showTime-r.videoFirstPlayTime),r.adProxy.setTimePoint("p21",{time:Date.now()-1e3*n}),r.adProxy.reportVideoLoadTime({beginTime:r.videoFirstPlayTime,endTime:(new Date).getTime()-Math.floor(1e3*n),departureTime:e,preloadVideo:r.preloadVideo?1:0,preloadVideoSuccess:r.preloadVideoSuccess?1:0,reportType:1}),r.isFirstPlay=!1,Hv.call(this,{stage:1004})}if(r.isPlaying=!0,n>0&&(r.currentTime=1e3*n),n>=1&&!r.isViewableExposureReported){const{width:e,height:t}=r.video.style;r.isViewableExposureReported=!0,r.adProxy.isViewable=!0;const n=r.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:e,height:t});My(n,"激励视频","可视曝光")}Math.ceil(t-n)<=6&&[3,4].indexOf(r.pageType)>-1&&r.playableGiveUp.style.hidden&&ev.call(this);const{rewardedTime:i}=r.data,{duration:a}=AA.call(this),s=t>i/1e3?i/1e3:t||a/1e3,c=Math.ceil((a>i?i:a)/1e3);if(0===t&&(r.reportDurationTimer&&clearTimeout(r.reportDurationTimer),r.reportDurationTimer=setTimeout((()=>{r.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_DURATION_ZERO,{duration:t,durationFromAd:a,rewardedTime:i})}),1e3)),s>n){let e=Math.ceil(s-n);e>c&&(e=c),r.countDown.value=e.toString(),r.countDownFix.value=e.toString(),r.countDownAppend.value="秒后可获得奖励",r.countDownAppendFix.value="秒后可获得奖励",r.countDown.style.width=2===e.toString().length?19:12,r.countDownFix.style.width=2===e.toString().length?19:12,r.countDownAppend.style.width=100,r.countDownAppendFix.style.width=100}else r.countDown.style.hidden=!0,r.countDownFix.style.hidden=!0,r.sound.style.hidden=!0,r.soundFix.style.hidden=!0,r.splitLine.style.hidden=!0,r.splitLineFix.style.hidden=!0,r.countDownAppend.value="已获得奖励",r.countDownAppendFix.value="已获得奖励",r.countDownAppend.style.width=72,r.countDownAppendFix.style.width=72,r.isRewarded=!0;if((1e3*n>=r.cardShowTime||1e3*n>0)&&r.card.style.hidden){if(r.data.flooringPage&&2===r.pageType&&"portrait"===o?r.pageCardBody.style.hidden=!1:(r.playableTipsWrap.style.hidden=!(r.data.flooringPage&&[3,4].indexOf(r.pageType)>-1),r.card.style.hidden=!1),r.isCardExposureReported)return;r.card.nextLayout((()=>{const{left:e,top:t}=r.card.getAbsolutePosition(),{width:n,height:o}=r.card.layoutBox;r.isCardExposureReported=!0;const i=r.adProxy.reportExposure({exposureType:"incentiveVideoCard",left:e,top:t,width:n,height:o});My(i,"激励视频","卡片曝光"),r.cardFirstShowTime=(new Date).getTime(),r.data.flooringPage&&2===r.pageType&&(r.showTipsTimer=setTimeout((()=>{pv.call(this)}),3e3))}))}Fv.call(this,P_.dA.REWARDEDVIDEOTIMEUPDATE,{event:e})}catch(e){r.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_RENDER_ERROR,e)}})),r.video.onEnded((()=>{var e,t;if(sA.call(this)||!r.isShowed)return;r.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_END),jv.call(this),r.countDown.style.hidden=!0,r.countDownFix.style.hidden=!0,r.sound.style.hidden=!0,r.soundFix.style.hidden=!0,r.splitLine.style.hidden=!0,r.splitLineFix.style.hidden=!0,r.countDownAppend.value="已获得奖励",r.countDownAppendFix.value="已获得奖励",r.countDownAppend.style.width=72,r.countDownAppendFix.style.width=72,r.isRewarded=!0,r.isPlaying=!1,r.isVideoCalledPlay=!1,r.isEnded=!0,r.isPause=!1;const{duration:n}=AA.call(this);r.currentTime=n;const s=null===(e=r.data)||void 0===e||null===(t=e.card)||void 0===t?void 0:t.headBgImg,c=r.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:r.currentTime,videoDuration:n,muted:r.video.muted});if(r.data.flooringPage&&1===r.pageType&&"portrait"===o)r.pageContainer.style.width=i,r.pageContainer.style.height=a,r.pageContainer.style.left=i,r.pageContainer.style.hidden=!1,r.pageHandler.style.hidden=!1,r.pageHandler.style.zIndex=1000003,r.topBar.style.zIndex=1000004,r.pageImgTips.style.zIndex=1000004,r.pageContainer.nextLayout((()=>{Iv.call(this)}));else if(r.data.flooringPage&&2===r.pageType&&"portrait"===o)Iv.call(this);else if(r.data.flooringPage&&[3,4].indexOf(r.pageType)>-1&&!r.isCancelPlayablePage){let e=r.data.flooringPage.page_url||"";if(!e&&r.data.crtInfo)try{const{wxgame_video_card:{flooring_page:t}}=r.data.crtInfo;e=t.page_url||""}catch(e){}r.adProxy.handleRewardedVideoPlayableLand(e,r.pageType).then((()=>{r.isLandingPlayblePage=!0}))}else!r.pageType&&s&&(r.defaultPageContainer.style.hidden=!1,r.defaultPageContainer.style.opacity=0,r.defaultPageContainer.nextLayout((()=>{Iv.call(this)})));My(c,"激励视频","播放完成")})),r.video.onError((e=>{r.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_LOAD_ERROR,e),jv.call(this),yA.call(this)&&gA.call(this)})),r.playableCancelBox.on("click",(e=>{var t;if(!iv.call(this,e))return;if(r.isCancelPlayablePage)return;r.isCancelPlayablePage=!0,r.playableGiveUp.value="已放弃",r.playableGiveUp.style.color="#ffffff",r.playableGiveUp.style.opacity=.6;const n=(0,j_.X1)({text:"已放弃",fontSize:12})||36;r.playableGiveUp.style.width=n,r.playableTipsWrap.style.width=r.playableTipsContent.style.width+n+32,r.adProxy.reportCancelRewardPlayablePage({costtype:null!==(t=r.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,slotid:Ny,is_reward:1,is_cancel:1})})),r.pageButton.on("click",(e=>{iv.call(this,e)&&gv.call(this,e,"button",Sy.REWARD_OLD_ENDPAGE_BUTTON)}));const c=e=>t=>{if(!iv.call(this,t))return;const n=hA.call(this);if(n&&"wrapper"===e||!n&&["logo","wording"].includes(e))return;const r=[[Sy.REWARD_ENDPAGE_HEAD_IMG,n&&"logo"===e],[Sy.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED,n&&["wording","wrapper"].includes(e)],[Sy.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED,!n&&["wording","wrapper"].includes(e)],[Sy.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED,n&&"button"===e],[Sy.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED,!n&&"button"===e]].find((([,e])=>e))[0];gv.call(this,t,"button"===e?"button":"",r)},l=e=>t=>{if(!iv.call(this,t))return;const n=hA.call(this);if(n&&"wrapper"===e||!n&&["logo","wording"].includes(e))return;const r=[[Sy.REWARD_EXPAND_CARD_HEAD_IMG,n&&"logo"===e],[Sy.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED,n&&["wording","wrapper"].includes(e)],[Sy.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED,!n&&["wording","wrapper"].includes(e)],[Sy.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED,n&&"button"===e],[Sy.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED,!n&&"button"===e]].find((([,e])=>e))[0];gv.call(this,t,"button"===e?"button":"",r)};if(r.defaultPageButton.on("click",c("button")),r.defaultPageAppIcon.on("click",c("logo")),r.defaultPageAppName.on("click",c("wording")),r.defaultPageAppWording.on("click",c("wording")),r.defaultPageWordingWrapper.on("click",c("wrapper")),r.expandCardButton.on("click",l("button")),r.expandCardAppIcon.on("click",l("logo")),r.expandCardAppName.on("click",l("wording")),r.expandCardAppWording.on("click",l("wording")),r.expandCardWordingWrapper.on("click",l("wrapper")),r.pageDownloadButton.on("click",(e=>{iv.call(this,e)&&tA.call(this,e)})),r.button.on("click",(e=>{iv.call(this,e)&&($i.S3.isIOS&&46===r.data.product_type&&6===r.data.dest_type?Promise.race([Vv.call(this,e,Sy.REWARD_CARD_BUTTON),(0,__.Vs)(500)]).then((()=>{$v.call(this,{button:5},e),Kv.call(this)})).catch((()=>{$v.call(this,{button:5},e),Kv.call(this)})):(Vv.call(this,e,Sy.REWARD_CARD_BUTTON),$v.call(this,{button:5},e),23===r.data.product_type?Kv.call(this,{isButton:!0}):Kv.call(this)))})),r.downloadButton.on("click",(e=>{iv.call(this,e)&&tA.call(this,e)})),r.card.on("click",(e=>{iv.call(this,e)&&($i.S3.isIOS&&46===r.data.product_type&&6===r.data.dest_type?Promise.race([Vv.call(this,e,Sy.REWARD_CARD),(0,__.Vs)(500)]).then((()=>{$v.call(this,{button:5},e),Kv.call(this)})).catch((()=>{$v.call(this,{button:5},e),Kv.call(this)})):(Vv.call(this,e,Sy.REWARD_CARD),$v.call(this,{button:5},e),23===r.data.product_type?Kv.call(this,{toOfficalAccountDetail:!0}):Kv.call(this)))})),r.pageHandler.on("touchstart",(e=>{if(sA.call(this))return;const t=_v.call(this,{event:e,container:"pageHandler"});r.startPosX=t.x,r.startPosY=t.y,r.lastPosX=t.x,r.lastPosY=t.y,r.lastStartTime=(new Date).getTime()})),r.pageHandler.on("touchmove",(e=>{if(sA.call(this))return;const t=r.pageHandler.getAbsolutePosition(),n=t.left+e[0].x,o=t.top+e[0].y,{xMin:i,xMax:a,yMin:s,yMax:c,xContainer:l,yContainer:d}=r.flooringPageInfos;if(n-r.lastPosX!=0&&l&&sv.call(this,{x:n,y:o,direction:"left"})){let e=r[l].style.left;e+=n-r.lastPosX,e>=i&&e<=a&&(r[l].style.left=e,r.lastSecondPosX=r.lastPosX,r.lastPosX=n,r.direction="left",r.lastMoveTime=(new Date).getTime())}if(o-r.lastPosY!=0&&d&&sv.call(this,{x:n,y:o,direction:"top"})){let e=r[d].style.top;e+=o-r.lastPosY,e>=s&&e<=c&&(r[d].style.top=e,r.lastSecondPosY=r.lastPosY,r.lastPosY=o,r.direction="top")}})),r.pageHandler.on("touchend",(e=>{if(sA.call(this))return;const t=_v.call(this,{event:e,container:"pageHandler"}),{xMin:n,xMax:o,yMin:i,yMax:a,xContainer:s,yContainer:c,infos:l}=r.flooringPageInfos;if(l.event=t,l.event&&(l.event.pressInterval=(new Date).getTime()-r.lastStartTime),l.touchClick&&dv.call(this,Object.assign({},l,{event:t,max:a,min:i})),"top"===r.direction&&l.yRevise)Av.call(this,Object.assign({},l,{max:a,min:i,direction:"top",imgBox:c}));else if("left"===r.direction&&l.xRevise)Av.call(this,Object.assign({},l,{max:o,min:n,direction:"left",imgBox:s})),xv.call(this);else if("left"===r.direction&&l.xInertia){const e=t.x-r.lastPosX,i=r[s].style.left+5*e;i>=l.xHead&&i<=l.xTail?r[s].style.left=i:uv.call(this,Object.assign({},l,{xMax:o,xMin:n,imgBox:s})),xv.call(this)}else r.startPosX=0,r.startPosY=0,r.lastPosX=0,r.lastPosY=0,r.lastSecondPosX=0,r.lastSecondPosY=0,r.direction="";r.direction=""})),r.onShow=()=>{if(!sA.call(this)&&(r.adProxy.setTimePoint("p11"),[3,4].indexOf(r.pageType)>-1&&r.isLandingPlayblePage&&Yv.call(this),!pA.call(this))){if(uA.call(this)&&r.isShowed&&!r.showDialogContainer)return r.rewardPageTimer&&clearTimeout(r.rewardPageTimer),r.rewardPageCostTime+=+new Date-r.hideTime-400,qv.call(this),setTimeout((()=>{r.lastJsapiStatus=0,r.isLandingPage=!1}),10),void($i.S3.isWaGame||!$i.S3.isAndroid||pA.call(this)||(r.adProxy.hideVirtualBottomNavigationBar().catch((()=>{})),r.layoutTimer=setTimeout((()=>{r.container.forceUpdate()}),250)));!r.isShowed||r.isEnded||r.isPause||setTimeout((()=>{!r.isShowed||r.isEnded||r.isPause||(bA.call(this,"play"),Wv.call(this))}),1e3),r.data&&23===r.data.product_type?r.adProxy.checkFollow(r.data.app.uin).then((e=>{const t=r.data.button_action.button_text;0===r.buttonTextType&&(r.button.value=e?"查看公众号":t,Ky.call(this),Bv.call(this,P_.A$.CHANGEADBTNTEXT,{text:e?"查看公众号":t})),r.data.flooringPage&&2===r.pageType&&0===r.buttonTextType?r.pageCardButton.value=e?"查看公众号":t:r.data.flooringPage&&1===r.pageType&&0===r.buttonTextType?r.pageButton.value=e?"查看公众号":t:r.pageType||(r.defaultPageButton.value=e?"查看公众号":t),r.expandCardButton.value=e?"查看公众号":t,r.adProxy.data.biz_info&&(r.adProxy.data.biz_info.is_subscribed=e?1:0)})):r.data&&12===r.data.product_type&&eA.call(this),r.showTime=+new Date,setTimeout((()=>{var e;(r.flooringPageIsShow&&(r.flooringPageShowTime=+new Date,xv.call(this)),r.isLandingPage)&&(r.lastJsapiStatus=0,r.isLandingPage=!1,r.landingPageCostTime=r.showTime-r.hideTime,r.adProxy.reportLandingTime({slotId:Ny,costType:null!==(e=r.adProxy.data)&&void 0!==e&&e.is_cpm?1:2,openTime:r.hideTime,closeTime:r.showTime,stayTime:r.landingPageCostTime,jsapiName:r.lastJsapiName,clickTime:r.lastLandingTime,clkCnt:r.landingCount,retCode:r.lastJsapiStatus,costTime:r.lastJsapiCostTime,actTypeInt:1}),$i.S3.isWaGame||!$i.S3.isAndroid||pA.call(this)||(r.adProxy.hideVirtualBottomNavigationBar().catch((()=>{})),r.layoutTimer=setTimeout((()=>{r.container.forceUpdate()}),250)),r.adProxy.setRightButtonHide(!0).catch((()=>{})))}),10)}},(0,L_.dN)(r.onShow),r.onHide=()=>{if(sA.call(this))return;const e=AA.call(this);if(r.hideTime=+new Date,uA.call(this)&&r.isShowed){const e=r.adProxy.checkCanvasXmlState();return!e&&!r.isShowedExposureReported&&cA.call(this,"showed"),!e&&!r.isViewableExposureReported&&cA.call(this,"viewable")}if(r.notReportExit||!r.isShowed)return;jv.call(this);const t=r.adProxy.reportVideo({playType:r.isPlaying?"partial":"complete",conditionType:"exit",playDuration:r.currentTime,videoDuration:e.duration,muted:r.video.muted});My(t,"激励视频","退出小游戏"),r.flooringPageIsShow&&(r.flooringPageCloseTime=(new Date).getTime(),Pv.call(this,{type:6,staytime:r.flooringPageCloseTime-r.flooringPageShowTime,componentsstartstr:JSON.stringify(r.flooringPageState)}),r.flooringPageShowTime=0,r.flooringPageCloseTime=0,Ev.call(this))},(0,L_.vv)(r.onHide),(0,u.jQ)("onVideoResourceLoad",(e=>{!r.isShowed&&r.video&&r.video.src===e.resource&&(r.preloadVideoSuccess=!0,r.video.src=e.resource,r.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_PRELOAD_SUCCESS))})),!0===t){const e=$i.S3.isWaGame?"count":`count_${r.adProxy.getWebviewInfo().currentWebviewId}`,t=(Ey(e,r.adType)||0)+1;Iy(e,r.adType,t),t>=5&&(console.warn(`系统检测到您创建的激励视频广告实例过多，由于您当前使用的是多例模式，为避免影响${$i.S3.isWaGame?"小游戏":"小程序"}性能，请减少实例创建数量或调用destroy方法销毁无用的实例`),5===t&&r.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_INSTANCE_BROKEN))}}load(){if(sA.call(this))return Promise.reject({errMsg:Xy});const e=Ry(this);if(e.isShowed)return Promise.reject({errMsg:"can't invoke load() while video-ad is showed"});if(e.isData)return Promise.resolve();const t=Dv.call(this);return e.adFetchResult=t.catch((t=>{const n=-12001===t.errCode?{errMsg:"RewardedVideoAd fail no permission"}:t;throw e.emitter.emit("_error",n),n})),e.adFetchResult}show({branchId:e,branchDim:t}={}){if(sA.call(this))return Promise.reject({errMsg:Xy});const n=Ry(this);if(n.isShowed)return Promise.resolve();if(!n.isData)return Promise.reject({errMsg:"no advertisement data available, please invoke load()"});if(1===(Ey("show",n.adType)||0))return n.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_OTHER_SHOW_ERROR),Promise.reject({errMsg:"can't invoke show() while other video-ad is showed"});Hv.call(this,{stage:1001});const r=(new Date).getTime();return n.isSwitched=!1,Iy("show",n.adType,1),n.adProxy.setTimePoint("p19"),e?n.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):n.adProxy.resetAnalyseBranchInfo(),n.adFetchResult.then((()=>{if(sA.call(this))return Promise.reject({errMsg:Xy});(0,$i.uj)(),Ov.call(this);const{screenWidth:e,screenHeight:t}=$i.S3;return $i.S3.isWaGame?n.adProxy.reportVideoLastClick({touchStartX:Math.round($y),touchStartY:Math.round(Hy),touchEndX:Math.round(Zy),touchEndY:Math.round(Qy),touchDuration:zy,screenWidth:e,screenHeight:t}):(n.weappTouchEventHandler&&(0,my.sv)(n.weappTouchEventHandler),n.weappTouchEventHandler=(0,my.L9)(Jy,{aid:n.adProxy.data.aid,traceid:n.adProxy.data.traceid}),(0,u.nY)("emitWeappTouchEvent")),n.adProxy.reportVideoLoadTime({beginTime:r,endTime:(new Date).getTime(),reportType:2}),n.isShowed=!0,n.startExposureTime=0,n.isShowedExposureReported=!1,n.isViewableExposureReported=!1,n.isCardExposureReported=!1,n.adProxy.isViewable=!1,uA.call(this)||pA.call(this)?lA.call(this):(n.adProxy.isValidCondition("widget_gray_video_sound")?(Ro.pauseAllAudio(),un.pauseAllAudio(),pn.pauseAllAudio(),n.video.muted=!1,$i.S3.isIOS&&(n.video.obeyMuteSwitch=!0),n.sound.src=By,n.soundFix.src=By):(n.video.muted=!0,n.sound.src=Fy,n.soundFix.src=Fy),n.count.style.hidden=!1,n.countDown.style.hidden=!1,n.splitLineLeft.style.hidden=!1,n.countDownFix.style.hidden=!1,n.card.style.hidden=!0,n.container.style.hidden=!1,n.adFeedbackList.style.hidden=!0,n.adCover.show(),n.adProxy.setTimePoint("p15"),n.container.nextLayout().then((()=>(0,__.Vs)(500))).then((()=>{if(sA.call(this))return Promise.reject({errMsg:Xy});if(n.isSwitched)return Yv.call(this,1);nv.call(this).then((()=>{n.topBar.style.hidden=!1,n.topBarFix.style.hidden=!0,$i.S3.isWaGame||(n.isFullscreen=!0)})).catch((()=>{n.topBar.style.hidden=!0,n.topBarFix.style.hidden=!1}));const e={top:0,duration:500};return n.container.animate(e).then((()=>{(0,Dy.y4)(Dy.F0.EVENT_CANVAS_BEFORE_ADS);const{width:e,height:t}=n.video.style,r=n.adProxy.reportExposure({exposureType:"showed",left:0,top:0,width:e,height:t});return n.startExposureTime=+new Date,My(r,"激励视频","原始曝光"),(0,__.Vs)(500).then((()=>{n.isFirstPlay=!0,n.videoFirstPlayTime=(new Date).getTime(),n.adProxy.setTimePoint("p20"),bA.call(this,"play"),Wv.call(this),Fv.call(this,P_.dA.REWARDEDVIDEOPLAY)}))})).then((()=>{n.isFirstPlaySuccess=!0;const e=AA.call(this),t=n.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:e.duration,muted:n.video.muted});My(t,"激励视频","开始播放")})).catch((e=>{const t={errMsg:e,isSwitched:n.isSwitched};return n.adProxy.reportAdMonitorData(h_.IN.REWARDED_VIDEO_ANIMATE_ERROR,t),Yv.call(this,2)}))})).catch((e=>{throw Iy("show",n.adType,0),e})))})).catch((e=>{throw Iy("show",n.adType,0),e}))}isReady(){if(sA.call(this))return!1;return Ry(this).isData}destory(){aA.call(this)}destroy(){aA.call(this)}onError(e){if(sA.call(this))return;Ry(this).emitter.on("_error",e)}offError(e){if(sA.call(this))return;Ry(this).emitter.off("_error",e)}onLoad(e){if(sA.call(this))return;Ry(this).emitter.on("load",e)}offLoad(e){if(sA.call(this))return;Ry(this).emitter.off("load",e)}onClose(e){if(sA.call(this))return;const t=Ry(this);t.emitter.on("close",e),e&&"function"==typeof e&&(t.closeEventCount+=1,t.closeEventCount>1&&console.warn("激励视频广告组件检测到您绑定了多次 onClose 事件，绑定重复的事件会产生多次重复的回调，请确认您绑定的事件是否重复，以免造成事件重复回调问题。"))}offClose(e){if(sA.call(this))return;const t=Ry(this);t.emitter.off("close",e),e&&"function"==typeof e&&t.closeEventCount>0&&(t.closeEventCount-=1),e||(t.closeEventCount=0)}}const IA=327,EA=249,SA=184,TA=140,xA=388,kA=308,PA={textAlign:"center",color:"#ffffff",lineBreak:"ellipsis",portrait:{width:247,fontSize:17,height:24,lineHeight:24},landscape:{width:185,fontSize:14,height:20,lineHeight:20}},DA={zIndex:1000009,position:"absolute",top:8,right:6,width:60,height:20,color:"#ffffff",fontSize:11,lineHeight:20,borderRadius:4,textAlign:"center"},OA={body:{zIndex:1000005,position:"absolute",overflow:"visibal",hidden:!0},container:{zIndex:1000005,position:"absolute",overflow:"hidden",opacity:0,hidden:!0,flexDirection:"column",alignItems:"center",justifyContent:"center"},mask:{top:0,left:0,backgroundColor:"#000000",opacity:.7,position:"absolute",overflow:"hidden"},cancelBox:{marginBottom:8,portrait:{width:IA,height:36},landscape:{width:EA,height:28},flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},cancel:{portrait:{width:36,height:36},landscape:{width:28,height:28}},adContainer:{flexDirection:"column",alignItems:"center",overflow:"hidden",borderRadius:8,portrait:{width:IA,height:xA},landscape:{width:EA,height:kA}},adBackground:{position:"absolute",zIndex:1000006,portrait:{marginTop:90,width:IA,height:xA},landscape:{marginTop:70,width:EA,height:kA},hidden:!0},adMask:{position:"absolute",zIndex:1000007,backgroundColor:"#000000",opacity:.5,borderRadius:8,portrait:{width:IA,height:xA},landscape:{width:EA,height:kA},hidden:!0},adContent:{zIndex:1000008,portrait:{width:IA,height:204},landscape:{width:EA,height:168},flexDirection:"column",alignItems:"center"},adChannelsLiveReserve:I()(I()({},DA),{},{hidden:!0,backgroundColor:"#959FC1"}),adChannelsLive:I()(I()({},DA),{},{hidden:!0,backgroundColor:"#FF6146",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}),adChannelsLiveIcon:{width:12,height:12,marginRight:4,marginLeft:4},adChannelsLiveText:{width:33,height:20,color:"#ffffff",fontSize:11,lineHeight:20,marginRight:8,textAlign:"center"},adChannelsLiveEnd:I()(I()({},DA),{},{hidden:!0,backgroundColor:"#959FC1"}),adWording:{flexDirection:"column",alignItems:"center",justifyContent:"center",portrait:{marginTop:24,marginBottom:12,height:72},landscape:{marginTop:16,marginBottom:10,height:60}},wordingLine0:PA,wordingLine1:PA,wordingLine2:PA,adButtonGroup:{flexDirection:"column",alignItems:"center",justifyContent:"center"},relationLine:{textAlign:"center",fontSize:12,height:16,lineHeight:16,color:"rgba(0, 0, 0, 0.3)",portrait:{width:247,marginBottom:12},landscape:{width:185,marginBottom:10}},adButton:{borderWidth:1,borderColor:"#ffffff",borderRadius:4,textAlign:"center",color:"#ffffff",portrait:{marginBottom:28,width:184,height:40},landscape:{marginBottom:24,width:184,height:32},flexDirection:"column",alignItems:"center",justifyContent:"center"},adButtonText:{textAlign:"center",color:"#ffffff",letterSpacing:1,fontSize:17,height:24,width:184,lineHeight:24},adFeedbackContainer:{position:"absolute",width:60,height:48,zIndex:1000008,top:0,left:0},adFeedback:{zIndex:1000008,width:35,height:16,marginTop:8,marginLeft:6,position:"absolute"},adFeedbackList:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adFeedbackTitle:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{zIndex:1000008,width:134,hidden:!0,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseTip:{hidden:!0,backgroundColor:"#ffffff",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:1000009,portrait:{width:IA,height:400},landscape:{width:EA,height:kA}},adCloseTipWrap:{width:140,height:200,flex:1,justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:64,height:55},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a",marginTop:20,textAlign:"center"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:10,textAlign:"center"}},NA={adMedia:{zIndex:1000008,portrait:{width:IA,height:SA},landscape:{width:EA,height:TA}},adVideoAudioBox:{zIndex:1000008,position:"absolute",bottom:0,left:0,width:40,height:40},adVideoAudioIcon:{position:"absolute",bottom:8,left:8,width:24,height:24,hidden:!1},adVideoCountDown:{position:"absolute",top:8,right:10,color:"#ffffff",fontSize:12,lineHeight:18,width:24,height:18,textAlign:"right"},adVideoAfter:{position:"absolute",portrait:{width:IA,height:SA},landscape:{width:EA,height:TA},hidden:!0,alignItems:"center",opacity:0},adVideoAfterMask:{position:"absolute",backgroundColor:"#000000",opacity:.7,portrait:{width:IA,height:SA},landscape:{width:EA,height:TA}},adVideoClickMask:{position:"absolute",zIndex:1000008,borderRadius:6,portrait:{width:IA,height:SA},landscape:{width:EA,height:TA}},adVideoAfterIcon:{zIndex:1000008,flexDirection:"row",portrait:{width:48,height:48,marginTop:52,marginBottom:8},landscape:{width:36,height:36,marginTop:44,marginBottom:6},alignSelf:"center",borderRadius:4},adVideoAfterText:{zIndex:1000008,portrait:{fontSize:16,width:IA},landscape:{fontSize:11,width:EA},lineHeight:22,color:"#ffffff",textAlign:"center",height:22}},RA={adMedia:{zIndex:1000008,portrait:{width:IA,height:SA},landscape:{width:EA,height:TA}}},MA='\n    <view id="ad-feedback-container">\n      <image id="ad-feedback"  bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/adfeedback.png"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  ',LA=`\n    <view id="ad-video-container" click-state="true">\n      <video id="ad-media" click-state="true" bubble-event="true" controls="false" muted="true" autoplay="false" object-fit="cover" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad">\n        <view id="ad-video-click-mask" click-state="true" bubble-event="true"></view>\n        \n    <text id="ad-video-Count-Down">\n    </text>\n  \n        \n    <view id="ad-video-audio-box">\n      <image id="ad-video-audio-icon" bubble-event="true"></image>\n    </view>\n  \n        \n    <image id="ad-video-after" click-state="true" bubble-event="true" >\n        <view id="ad-video-after-mask" click-state="true" bubble-event="true"></view>\n        <image id="ad-video-after-icon" click-state="true" bubble-event="true"></image>\n        <text id="ad-video-after-text" click-state="true" bubble-event="true"></text>\n    </image>\n  \n        ${MA}\n      </video>\n    </view>\n  `,BA=`\n    <image id="ad-media">\n      ${MA}\n    </image>\n  `,FA={wordingLineTmpl:'\n  <text bubble-event="true"></text>\n'},WA=c(6725),jA="https://wxa.wxs.qq.com/images/wxapp/new_audio_mute_icon.png";let UA=0,VA=0;const GA=k.cj,$A=k.wZ;let HA="",ZA="portrait",QA=!0;const YA="image",zA="video";oe.Z.onReady((()=>{HA=(0,k_._t)();const e=(0,wi.Ew)();UA=e.screenWidth,VA=e.screenHeight;try{oe.Z.global.window.pageOrientation&&(ZA=oe.Z.global.window.pageOrientation)}catch(e){}QA=(0,St.aI)()}));const qA=0xac3cfbe83299d,JA="interstitial-ad has been destroyed",KA=function(e,t=!0){if(Sb.call(this))return!1;const n=(0,f_.Wj)(this).adProxy.isTriggerClick(e),r=n?0:1;return t&&eb.call(this,e,r),n},XA=function(e,t=0){if(Sb.call(this))return!1;const n=(0,f_.Wj)(this);let r=!1,o=0;return n.adProxy.isValidCondition("widget_gray_time_limit_2")&&(o=100*(n.data.condition.widget_gray_time_limit_2||5)),o>0&&(0===n.startExposureTime||+new Date-n.startExposureTime<o)&&(r=!0,n.adProxy.reportAdMonitorData(49,{clickType:t})),n.isShow||(r=!1),r},eb=function(e,t=0){if(Sb.call(this))return;const n=(0,f_.Wj)(this);if(!n.container||!n.container.layoutBox)return;const{width:r,height:o}=n.container.layoutBox;let i=0;[0,2,3].includes(t)&&(n.clickCount++,i=n.clickCount);const a={slotid:qA,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:i,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(r,10)||0,ad_height:parseInt(o,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(a)},tb=function(e){if(Sb.call(this))return;const t=(0,f_.Wj)(this);if(!t.container||!t.container.layoutBox)return;const{left:n,top:r,width:o,height:i}=t.container.layoutBox,a={currentTime:t.videoCurrentTime,duration:t.videoDuration},s=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-n,clickRelativeTop:e.absoluteY-r,pressInterval:e.pressInterval,left:n,top:r,width:o,height:i,videoData:a});return(0,__._u)(s,"interstitialAd","点击"),nb.call(this,{stage:1002}),s},nb=function({stage:e}){if(Sb.call(this))return;const t={adtype:3,stage:e};(0,f_.Wj)(this).adProxy.reportADFunnelModel(t)},rb=function(e){if(Sb.call(this))return;const t=(0,f_.Wj)(this),n=e.then((e=>/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0)).catch((e=>t.adProxy.reportFollow({result:"fail"})));(0,__._u)(n,"interstitialAd","关注")},ob=function(e=!1){if(Sb.call(this))return;const t=(0,f_.Wj)(this);if((0,__.cM)("插屏广告 - 检查曝光"),!t.container.layoutBox)return(0,__.cM)("插屏广告 - 尚未完成布局，等待下一个loop检查"),(0,__.Vs)(0).then((()=>ob.call(this,e)));const{left:n,top:r,width:o,height:i}=t.container.layoutBox,a=!1===t.container.style.hidden;if(!t.isShowedExposureReported&&a){(0,__.cM)("插屏广告 - 原始曝光"),t.isShowedExposureReported=!0,t.startExposureTime=+new Date,kb.call(this);const e=t.adProxy.reportExposure({left:n,top:r,width:o,height:i,exposureType:"showed"});(0,__._u)(e,"interstitialAd","原始")}if(!t.isViewableExposureReported&&a&&t.ad_type===YA){if(!e)return(0,__.cM)("可视曝光第 1 阶段, 需等待 1 秒后再检查"),(0,__.Vs)(1e3).then((()=>ob.call(this,!0)));{(0,__.cM)("插屏广告 - 可视曝光第 2 阶段"),t.isViewableExposureReported=!0,t.adProxy.isViewable=!0;const e=t.adProxy.reportExposure({left:n,top:r,width:o,exposureType:"viewable"});(0,__._u)(e,"interstitialAd","可视")}}},ib=function(e){if(Sb.call(this))return;const t=(0,f_.Wj)(this),n=+new Date,r={slotid:qA,is_game:QA?1:0,costtype:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,close_type:e,exposure_duration:n-t.startExposureTime-t.hideDuration,start_time:t.startExposureTime,close_time:n};return t.adProxy.reportCloseAction(r)},ab=function(e,t={}){if(Sb.call(this))return;const n=(0,f_.Wj)(this),{width:r,height:o}=n.adContainer.style,i={click_button:e,cost_type:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,slotid:qA,is_game:QA?1:0,pageentertime:+new Date(n.adProxy.getProgramStartTime()),ad_width:parseInt(r,10)||0,ad_height:parseInt(o,10)||0,clientexptime:n.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:UA,screen_height:VA};return n.adProxy.reportAntifraud(i)},sb=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:n=0,secondGradeDesc:r="",feedbackReason:o=0}){if(Sb.call(this))return;const i=(0,f_.Wj)(this),{left:a,top:s,width:c,height:l}=i.container.layoutBox;e&&!n&&(i.clickFirstGradeTime=+new Date),i.adProxy.reportAdFeedbackData({adWidth:UA,adHeight:VA,adPosX:0,adPosY:0,expTime:i.startExposureTime,slotId:qA,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?i.clickFirstGradeTime:0,secondGradeId:n,secondGradeDesc:r,secondGradeTime:n?+new Date:0,feedbackReason:o})},cb=function(e={}){if(Sb.call(this))return;const t=(0,f_.Wj)(this);return Object.assign({autoCloseTime:t.autoCloseTime,launchTime:t.launchTime,frequencyTime:t.frequencyTime},e)},lb=function(){if(Sb.call(this))return;const e=(0,wi.xI)();UA=e.screenWidth,VA=e.screenHeight,HA=UA>VA?"landscape":"portrait"},db=function(){if(Sb.call(this))return;const e=(0,f_.Wj)(this),t=e.adProxy.fetch();return t.catch((t=>e.emitter.emit("_error",t))),e.adFetchResult=t,e.adFetchResult.then((t=>(e.isData=!0,e.data=t||{},e.autoCloseTime=t.card_info&&t.card_info.auto_close_time||15,e.launchTime=t.card_info&&t.card_info.launch_time||15,e.frequencyTime=t.card_info&&t.card_info.frequency_time||15,hb.call(this)))).catch((e=>Promise.reject(e)))},ub=function(e){const t=(0,f_.Wj)(this),{template:n,style:r}=(e=>{let t="",n="";switch(e){case"image":t=BA,n=I()(I()({},OA),RA);break;case"video":t=LA,n=I()(I()({},OA),NA);break;default:t=BA,n=I()(I()({},OA),RA)}return{template:`\n  <view id="body">\n    <view id="container">\n      <view id="mask" bubble-event="true"></view>\n      <view id="cancel-box">\n        <image id="cancel" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/interstitialClose.jpeg"></image>\n      </view>\n      <view id="ad-container">\n        <image id="ad-background"></image>\n        <view id="ad-mask"></view>\n        ${t}\n        <text id="ad-channels-live-reserve" value="直播预约"></text>\n        <view id="ad-channels-live">\n          <image id="ad-channels-live-icon" src="https://wxa.wxs.qq.com/images/wxapp/live_icon_1.png"></image>\n          <text id="ad-channels-live-text" value="直播中"></text>\n        </view>\n        <text id="ad-channels-live-end" value="直播结束"></text>\n        <view id="ad-content">\n          <view id="ad-wording">\n          </view>\n          <view id="ad-button-group">\n            <text id="relation-line">placeholder</text>\n            <view id="ad-button" click-state="true">\n              <text id="ad-button-text" click-state="true" bubble-event="true"></text>\n            </view>\n          </view>\n        </view>\n        <view id="ad-close-tip">\n          <view id="ad-close-tip-wrap">\n            <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=b7cf6bfe332cf0a981234fdfd5bde985&filekey=3033020101041f301d02016d040253480410b7cf6bfe332cf0a981234fdfd5bde985020207b7040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353331363030303733623437313336666664393331323630333230613030303030303664&bizid=1023"></image>\n            <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n            <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n  `,style:n}})(t.ad_type);t.cardStyle=r,t.cardXOM=WA(n).root,g_.call(this,t.cardXOM,r),p_.uo.add(t.body),t.container.on("click",(e=>{if(KA.call(this,e,!1)&&!t.isShowCloseTip&&!XA.call(this,e,4)){if(t.isClosing)return Promise.resolve();wb.call(this,1),ab.call(this,4,e)}})),t.cancelBox.on("click",(e=>{if(t.isShow||t.adProxy.reportAdMonitorData(124,{isClosing:t.isClosing}),KA.call(this,e,!1)&&!t.isShowCloseTip&&!XA.call(this,e,3)){if(t.isClosing)return Promise.resolve();wb.call(this,0),ab.call(this,3,e)}})),t.adFeedbackContainer.on("click",(e=>{KA.call(this,e,!1)&&(XA.call(this,e)||(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||sb.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),t.adFeedbackBtn.on("click",(e=>{KA.call(this,e,!1)&&(XA.call(this,e)||(t.adProxy.openFeedbackUrl(QA?1007:1006),t.adFeedbackList.style.hidden=!0,sb.call(this,{secondGradeId:1,secondGradeDesc:"投诉"})))})),t.adDislikeBtn.on("click",(e=>{KA.call(this,e,!1)&&(XA.call(this,e)||(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,sb.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),t.adQualityBtn.on("click",(e=>{KA.call(this,e,!1)&&(XA.call(this,e)||(t.adFeedbackMenu.style.hidden=!0,sb.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),wb.call(this,7),ab.call(this,8,e)))})),t.adDuplicateBtn.on("click",(e=>{KA.call(this,e,!1)&&(XA.call(this,e)||(t.adFeedbackMenu.style.hidden=!0,sb.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),wb.call(this,7),ab.call(this,8,e)))})),t.adDismatchBtn.on("click",(e=>{KA.call(this,e,!1)&&(XA.call(this,e)||(t.adFeedbackMenu.style.hidden=!0,sb.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),wb.call(this,7),ab.call(this,8,e)))})),t.adButton.on("click",(e=>{KA.call(this,e)&&(XA.call(this,e,1)||Cb.call(this,e,1))})),t.adWording.on("click",(e=>{ab.call(this,5,e)})),t.ad_type===YA&&t.adMedia.on("click",(e=>{t.adProxy.isValidCondition("widget_gray_optimizedstyle")?KA.call(this,e)&&(XA.call(this,e,2)||Cb.call(this,e,2)):ab.call(this,2,e)})),t.ad_type===zA&&(t.adVideoClickMask.on("click",(e=>{KA.call(this,e)&&(XA.call(this,e,2)||Cb.call(this,e,2))})),t.adVideoAfter.on("click",(e=>{KA.call(this,e)&&(XA.call(this,e,2)||Cb.call(this,e,2))})),t.adVideoAudioBox.on("click",(e=>{KA.call(this,e,!1)&&(XA.call(this,e,1)||(t.adMedia.muted=!t.adMedia.muted,t.adVideoAudioIcon.src=t.adMedia.muted?jA:"https://wxa.wxs.qq.com/images/wxapp/new_audio_icon.png"))})),t.adMedia.onTimeUpdate((({duration:e,position:n})=>{if(Sb.call(this))return;if(Tb.call(this),t.adMedia.autoplay=!1,n>0&&(t.videoCurrentTime=1e3*n),t.isFirstPlay){t.adProxy.setTimePoint("p21",{time:Date.now()-1e3*n});let e=0;t.showTime>t.videoFirstPlayTime&&(e=t.showTime-t.videoFirstPlayTime),t.adProxy.reportVideoLoadTime({beginTime:t.videoFirstPlayTime,endTime:(new Date).getTime()-parseInt(1e3*n),departureTime:e,reportType:1,preloadVideo:t.preloadVideo?1:0,preloadVideoSuccess:t.preloadVideoSuccess?1:0}),t.isFirstPlay=!1,nb.call(this,{stage:1004}),t.isFirstPlaySuccess=!0,t.adProxy.reportAdIDKey({key:103})}if(n>=1&&!t.isViewableExposureReported){const{width:e,height:n}=t.adMedia.style;t.isViewableExposureReported=!0,t.adProxy.isViewable=!0;const r=t.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:e,height:n});(0,__._u)(r,"插屏视频","播放曝光")}const r=Math.ceil(e-n);t.adVideoCountDown.value=`${r.toString()}s`,GA&&e-n<.6&&t.adVideoAfter.style.hidden&&(t.adVideoAfter.style.hidden=!1,t.adVideoAfter.animate({opacity:1,duration:350}),t.adVideoAudioBox.style.hidden=!0,t.adVideoCountDown.style.hidden=!0),t.videoDuration=1e3*e})),t.adMedia.onEnded((()=>{t.videoCurrentTime=t.videoDuration,t.isEnded=!0,t.isPlaying=!1,xb.call(this);const e=t.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:t.videoCurrentTime,videoDuration:t.videoDuration,muted:t.adMedia.muted});(0,__._u)(e,"插屏视频","播放完成"),t.adVideoAfter.style.hidden=!1,t.adVideoAudioBox.style.hidden=!0,t.adVideoCountDown.style.hidden=!0,$A&&t.adVideoAfter.animate({opacity:1,duration:300}),t.adProxy.reportAdMonitorData({key:104})})),t.adMedia.onError((e=>{xb.call(this),t.adProxy.reportAdMonitorData(101,e)})))},pb=function(){if(Sb.call(this))return;const e=(0,f_.Wj)(this),{width:t,height:n}=e.data,r="portrait"===HA?IA/t:EA/t,o="portrait"===HA?xA/n:kA/n,i="portrait"===HA?UA/375:VA/375;e.adMedia.scale=r;const a=Object.keys(e.cardStyle);a.forEach((t=>{if(e.cardStyle[t].hasOwnProperty(HA)){const n=e.cardStyle[t][HA];Object.keys(n).forEach((r=>{e[t]&&(e[t].style[r]=n[r],e.cardStyle[t][r]=n[r])}))}})),e.adBackground.scale=o;const s=t*o;e.adBackground.style.width=e.cardStyle.adBackground.width=s,"portrait"===HA?(e.adMedia.style.width=e.cardStyle.adMedia.width=IA,e.adMedia.style.height=e.cardStyle.adMedia.height=SA,e.adBackground.style.height=e.cardStyle.adBackground.height=xA,e.adBackground.style.left=e.cardStyle.adBackground.left=0-(s-IA)/2):"landscape"===HA&&(e.adMedia.style.width=e.cardStyle.adMedia.width=EA,e.adMedia.style.height=e.cardStyle.adMedia.height=TA,e.adBackground.style.height=e.cardStyle.adBackground.height=kA,e.adBackground.style.left=e.cardStyle.adBackground.left=0-(s-EA)/2);const c=["width","height","fontSize","lineHeight","borderRadius"];return a.forEach((t=>{if(!["container","mask","body"].includes(t))if(c.forEach((n=>{e[t]&&e[t].style.hasOwnProperty(n)&&(e[t].style[n]=e.cardStyle[t][n]*i)})),"adWording"===t)e[t].style.marginTop=e.cardStyle[t].marginTop*i;else if("adButton"===t)e[t].style.marginBottom=e.cardStyle[t].marginBottom*i;else if("adVideoAfterIcon"===t)e[t].style.marginTop=e.cardStyle[t].marginTop*i,e[t].style.marginBottom=e.cardStyle[t].marginBottom*i;else if(0===t.indexOf("wordingLine")){const n="portrait"===HA?IA:EA;e[t]&&e[t].style&&(e[t].style.width=n*i)}})),e.adProxy.isValidCondition("widget_gray_close_v2")&&(e.adFeedbackList.style.height=98,e.adFeedbackBtn.style.height=32,e.adDislikeBtn.style.height=32,e.adCloseBtnLineDislike0.style.hidden=!1,e.adCloseBtnLineDislike1.style.hidden=!1,e.adCloseBtnLineDislike2.style.hidden=!1,e.adCloseBtnLineDislike3.style.hidden=!1,e.adDislikeBtn.style.hidden=!1),e.container.style.width=UA,e.container.style.height=VA,e.body.style.width=UA,e.body.style.height=VA,e.mask.style.width=UA,e.mask.style.height=VA,e.container.nextLayout().then((()=>((0,__.cM)("updateUI 完成"),!QA&&GA?e.container.forceUpdate():Promise.resolve())))},hb=function(){if(Sb.call(this))return;const e=(0,f_.Wj)(this);try{const{app:t,appInfo:{apkName:n,channelId:r,urlScheme:o},product_type:i,dest_type:a,crt_size:s,crtInfo:c,button_action:l,image_url:d,card_info:{bg_color:u,font_color:p,bg_img:h,desc:f,thumb:g,title:_},condition:m,extBackComm:y}=e.data,v=c&&c[0]&&c[0].card_info&&c[0].card_info.mp_tag_type;switch(s){case 701:e.ad_type=YA;break;case 913:e.ad_type=zA;break;default:e.ad_type=YA}if(e.body&&p_.uo.remove(e.body),ub.call(this),e.body.fullscreen=!0,QA||(e.body.style.fixed=!0),e.ad_type===zA){const{short_video:{thumb_url:t,video_url:n,video_duration:r}}=e.data;e.adMask.style.hidden=!0,e.adBackground.style.hidden=!0,e.adVideoAfter.style.hidden=!0,e.adVideoAudioIcon.src=jA,e.adVideoAfter.src=h,e.adVideoAfterIcon.src=g,e.adVideoAfterText.value=_,e.videoDuration=1e3*r,e.adMedia.autoplay=!1,GA&&e.adMedia.src==n&&e.adMedia.seek(0),GA?(e.adMedia.poster=t,(0,__.Vs)(500).then((()=>{e.adMedia.src=n,e.adProxy.setTimePoint("p8")}))):(e.adProxy.setTimePoint("p8"),e.adMedia.src=n,e.adMedia.poster=t),$A&&(e.preloadVideo=!0,e.preloadVideoSuccess=!1,e.adProxy.preloadVideo([n]).catch((t=>{e.adProxy.reportAdMonitorData(107,t)}))),e.adProxy.reportVideoLoadTime({beginTime:e.fetchBeginTime,endTime:(new Date).getTime(),reportType:2}),e.adProxy.reportAdIDKey({key:98})}else e.ad_type===YA&&(e.adMedia.src=d,e.adMask.style.hidden=!1,e.adBackground.style.hidden=!1,e.adProxy.reportAdIDKey({key:100}));let A;if(u?(e.adMask.style.opacity=1,e.adMask.style.backgroundColor=u,A=p,e.relationLine.style.color=p,e.adButton.style.color=p,e.adButton.style.borderColor=p,e.adButtonText.style.color=p,e.adBackground.style.hidden=!0):e.adProxy.isValidCondition("widget_gray_optimizedstyle")?(e.adContainer.style.borderRadius=8,e.adContent.style.backgroundColor="#ffffff",A="#000000",e.relationLine.style.color="#b3b3b3",e.adButton.style.color="#ffffff",e.adButton.style.borderColor="#07c160",e.adButton.style.backgroundColor="#07c160",e.adButtonText.style.color="#ffffff",e.adBackground.style.hidden=e.ad_type===zA):(e.adMask.style.opacity=.5,e.adMask.style.backgroundColor="#000000",A="#ffffff",e.relationLine.style.color="#ffffff",e.adButton.style.color="#ffffff",e.adButton.style.borderColor="#ffffff",e.adButtonText.style.color="#ffffff",e.adBackground.style.hidden=e.ad_type===zA,e.adBackground.src=h),f.forEach(((t,n)=>{const r=`wordingLine${n}`,{root:o}=WA(FA.wordingLineTmpl);o.attributes.id=r;const i=f_.Ue.call(this,o);i.value=t,i.style.color=A,e.adWording.add(i)})),e.adButtonText.value=l.button_text,m.widget_gray_interstitialAd_insurance_tips&&21474837086===y.ams_second_industry_id&&(e.adButtonText.value="点击跳转广告详情页",e.adButtonText.style.width=218,e.adButton.style.width=218),e.buttonTextType=l.text_type||0,8===v){const t=+new Date;(0,W_.uQ)({buttonText:l.button_text,aid:e.adProxy.data.aid}).then((n=>{const r=+new Date;if(e.adProxy.reportRelationFetchDuration({startTime:t,endTime:r,showTime:e.showDetailTime||0}),n){const{count:t,descText:r}=n,o=`— 最近已有${t}人${r} —`;e.relationLine.value=o}else e.relationLine.value=""})).catch((t=>{e.relationLine.value="",e.adProxy.reportAdMonitorData(116,t)}))}12===i?(e.adProxy.setAppInstallState(!1),_b.call(this)):23===i&&t.isFollowed&&0===e.buttonTextType&&(e.adButtonText.value="查看公众号"),e.adProxy.preloadLanding(),e.emitter.emit("load"),e.container.ready().then((()=>{(0,__.cM)("interstitialAd container 及其子元素 ready"),e.emitter.emit("ready")})),e.adProxy.reportAdIDKey({key:108})}catch(t){return e.adProxy.reportAdIDKey({key:110}),e.adProxy.reportAdMonitorData(40,t),e.adProxy.reportAdIDKey({key:109}),Promise.reject(t)}},fb=function(e){if(Sb.call(this))return;const t=(0,f_.Wj)(this);t.clickCount>1&&t.adProxy.reportRepeatClick({slotId:qA,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,clkCnt:t.clickCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName});const n=t.adProxy.land(e);if(23===t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(n.then((e=>{const n=/ok/.test(e.errMsg);n&&0===t.buttonTextType&&(t.adButtonText.value="查看公众号",t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),t.adProxy.reportAdIDKey({key:41})),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));const r=+new Date;t.lastJsapiStatus=0,t.lastJsapiCostTime=r-t.lastLandingTime,"private_addContact"==t.lastJsapiName&&t.adProxy.reportLandingTime({slotId:qA,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,openTime:t.lastLandingTime,closeTime:r,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:n?2:3,actTypeStr:n?"关注":"取消"})})).catch((e=>{t.lastJsapiStatus=1})),rb.call(this,n)):n.then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==t.lastJsapiName||"navigateToMiniProgram"==t.lastJsapiName||"openADCanvas"==t.lastJsapiName||"launchApplication"==t.lastJsapiName?(t.isLandingPage=!0,xb.call(this)):t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((e=>{t.lastJsapiStatus=1})),t.ad_type===zA){const e=t.adProxy.reportVideo({playType:t.isPlaying?"partial":"complete",conditionType:"land",playDuration:t.videoCurrentTime,videoDuration:t.videoDuration,muted:t.adMedia.muted});(0,__._u)(e,"插屏视频","跳转")}},gb=function(){if(Sb.call(this))return;const e=(0,f_.Wj)(this);return(0,__.Vs)(10).then((()=>e.adFetchResult.then((()=>{if(e.isLandingPage){e.lastJsapiStatus=0,e.isLandingPage=!1;const t=+new Date;e.landingPageCostTime=t-e.hideTime,e.adProxy.reportLandingTime({slotId:qA,costType:e.adProxy.data&&e.adProxy.data.is_cpm?1:2,openTime:e.hideTime,closeTime:t,stayTime:e.landingPageCostTime,jsapiName:e.lastJsapiName,clickTime:e.lastLandingTime,clkCnt:e.clickCount,retCode:e.lastJsapiStatus,costTime:e.lastJsapiCostTime,actTypeInt:1}),wb.call(this,3)}e.adButton&&23===e.data.product_type?e.adProxy.checkFollow(e.data.app.uin).then((t=>{0===e.buttonTextType&&(e.adButtonText.value=t?"查看公众号":e.data.button_action.button_text),e.adProxy.data.biz_info&&(e.adProxy.data.biz_info.is_subscribed=t?1:0)})):12===e.data.product_type&&_b.call(this)})).catch((()=>{}))))},_b=function(){if(Sb.call(this))return;const e=(0,f_.Wj)(this);if(!e.data)return;const{appInfo:{apkName:t,versionCode:n,urlScheme:r}}=e.data;e.adProxy.getInstallState(t).then((t=>{t.isInstalled&&(void 0===t.versionCode||t.versionCode>=n)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),r&&r.trim().length>0?e.adButtonText.value="进入应用":e.adButtonText.value="查看应用",1===e.buttonTextType&&(e.adButtonText.value=e.data.button_action.button_text))})).catch((e=>{}))},mb=function(e){if(!e||"function"!=typeof e)return new Promise((e=>mb.call(this,e)));const t=(0,f_.Wj)(this);t.isReady?e():t.emitter.on("ready",e)},yb=function(){if(Sb.call(this))return Promise.reject({errMsg:JA});const e=(0,f_.Wj)(this);return e.onceSwitched=!1,e.startShow=+new Date,e.body.style.width=UA,e.body.style.height=VA,!QA&&GA&&(e.body.style.hidden=!1),Promise.resolve().then((()=>{if(lb.call(this),Sb.call(this))return Promise.reject({errMsg:JA});if(e.isShow=!0,e.isShowCloseTip=!1,e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!0,e.ad_type===zA){e.videoFirstPlayTime=(new Date).getTime(),e.adProxy.setTimePoint("p20"),Tb.call(this),e.adMedia.play(),e.adMedia.autoplay=!0,e.isFirstPlay=!0;const t=e.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:e.videoDuration,muted:e.adMedia.muted});e.adProxy.reportAdIDKey({key:99}),(0,__._u)(t,"插屏视频","开始播放")}return pb.call(this).then((()=>(e.body.style.hidden&&(e.body.style.hidden=!1),e.container.style.hidden=!1,e.isSwitched?wb.call(this,6):e.container.animate({opacity:1,duration:300}).then((()=>(e.showDetailTime=+new Date,e.container.nextLayout((()=>ob.call(this)))))).catch((t=>{const n={errMsg:t,isSwitched:e.isSwitched,onceSwitched:e.onceSwitched,startShow:e.startShow,enterRoute:e.enterRoute,enterTime:e.enterTime,outRoute:e.outRoute,outTime:e.outTime,lastRoute:e.lastRoute};return e.adProxy.reportAdMonitorData(36,n),wb.call(this,6).then((()=>Promise.reject({errCode:2004,errMsg:"广告渲染失败，或因小程序页面切换导致广告渲染失败"})))})))))}))},vb=function({branchId:e,branchDim:t}={}){if(Sb.call(this))return Promise.reject({errMsg:JA});const n=(0,f_.Wj)(this);if(1===(function(){if(Cy.hasOwnProperty("show")){const e=Object.keys(Cy.show).map((e=>Cy.show[e]));return Math.max(...e)}}()||0))return n.adProxy.reportAdMonitorData(44,cb.call(this)),Promise.reject({errCode:2003,errMsg:"当前正在播放激励视频广告或者插屏广告，不允许再次展示插屏广告"});const{createWebviewId:r,currentWebviewId:o}=n.adProxy.getWebviewInfo();return r!==o?(n.adProxy.reportAdMonitorData(45,cb.call(this)),Promise.reject({errCode:2005,errMsg:"插屏广告并非当前页面调用，不允许展示插屏广告"})):(n.adProxy.setTimePoint("p19"),n.isSwitched=!1,Iy("show",n.adType,1),n.showTime=+new Date,n.fetchBeginTime=(new Date).getTime(),e?n.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):n.adProxy.resetAnalyseBranchInfo(),n.adFetchResult.catch((()=>Promise.reject({errMsg:"no ad data"}))).then((()=>{const e=+new Date-+new Date(n.adProxy.getProgramStartTime());if(e<=1e3*n.launchTime)return n.adProxy.reportAdMonitorData(42,cb.call(this,{startInterval:e})),Promise.reject({errCode:2001,errMsg:"小程序启动一定时间内不允许展示插屏广告"});const t=function(){if(Cy.hasOwnProperty("close")){const e=Object.keys(Cy.close).map((e=>Cy.close[e]));return Math.max(...e)}}()||0,r=+new Date-t;return r<=1e3*n.frequencyTime?(n.adProxy.reportAdMonitorData(43,cb.call(this,{closeInterval:r})),Promise.reject({errCode:2002,errMsg:"距离小程序插屏广告或者激励视频广告上次播放时间间隔不足，不允许展示插屏广告"})):(nb.call(this,{stage:1001}),mb.call(this).then((()=>yb.call(this))).then((()=>{n.adProxy.reportAdMonitorData(46,cb.call(this))})))})).catch((e=>(Iy("show",n.adType,0),Promise.reject(e)))))},Ab=function(){if(Sb.call(this))return;const e=(0,f_.Wj)(this);e.androidAppState=0,e.isData=!1,e.isShow=!1,e.startExposureTime=0,e.isShowedExposureReported=!1,e.isViewableExposureReported=!1,e.adProxy.isViewable=!1,e.lastCloseTime=0,e.buttonTextType=0,e.startExposureTime=0,e.clickCount=0,e.lastLandingTime=0,e.lastJsapiName="",e.lastJsapiStatus=0,e.lastJsapiCostTime=0,e.isLandingPage=!1,e.landingPageCostTime=0,e.hideTime=0,e.hideDuration=0,e.body.style.hidden=!0,e.container.style.hidden=!0,e.isReady=!1,e.videoFirstPlayTime=0,e.isEnded=!1,e.fetchBeginTime=0,e.videoCurrentTime=0,e.videoDuration=0,e.isPlaying=!1,e.isFirstPlay=!1,e.isFirstPlaySuccess=!1,e.isSwitched=!1,e.onceSwitched=!1,e.startShow=0,e.showDetailTime=0,e.isEnded?nb.call(this,{stage:1005}):nb.call(this,{stage:1006}),Iy("show",e.adType,0),Iy("close",e.adType,+new Date),Pb.call(this,"none"),!QA&&GA?(0,__.Vs)(100).then((()=>{e.emitter.emit("close")})):e.emitter.emit("close"),e.adProxy.reset()},bb=function(e){if(Sb.call(this))return;const t=(0,f_.Wj)(this);return t.adProxy.reportTimePoints({slotid:qA,costtype:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,extInfo:{preloadVideoSuccess:t.preloadVideoSuccess?1:0}}),Promise.resolve().then((()=>[4,6].includes(e)?Promise.resolve():t.container.animate({opacity:0,duration:300}))).then((()=>(ib.call(this,e),2===e?ab.call(this,6):3===e&&ab.call(this,7),Ab.call(this),4===e?Promise.resolve():db.call(this))))},wb=function(e){if(Sb.call(this))return;const t=(0,f_.Wj)(this);return t.isClosing?Promise.resolve():t.container?(t.isClosing=!0,t.ad_type===zA&&(t.adProxy.reportVideo({playType:t.isEnded?"complete":"partial",conditionType:"close",playDuration:t.videoCurrentTime,videoDuration:t.videoDuration,muted:t.adMedia.muted}),t.adMedia.autoplay=!1,t.adMedia.pause(),xb.call(this),t.adMedia.muted=!0,t.adVideoAfter.style.opacity=0),t.container.ready().then((()=>bb.call(this,e))).then((()=>t.isClosing=!1)).catch((e=>{t.isClosing=!1,t.adProxy.reportAdMonitorData(126,e)}))):(t.adProxy.reportAdIDKey({key:125}),Promise.resolve())},Cb=function(e,t){const n=(0,f_.Wj)(this);if(n.isShow||n.adProxy.reportAdMonitorData(123,t),Sb.call(this))return;const{appInfo:{apkName:r,channelId:o,urlScheme:i},product_type:a,dest_type:s}=n.data;12===a&&$A&&4===n.androidAppState&&i&&i.trim().length>0?(tb.call(this,e),ab.call(this,t,e),n.adProxy.launchApplication(i).catch((e=>{})),n.lastJsapiName="launchApplication",n.isLandingPage=!0):GA&&46===a&&6===s?Promise.race([tb.call(this,e),(0,__.Vs)(500)]).then((()=>{ab.call(this,t,e),fb.call(this)})).catch((()=>{ab.call(this,t,e),fb.call(this)})):(tb.call(this,e),ab.call(this,t,e),fb.call(this))},Ib=function(){const e=(0,f_.Wj)(this);(0,L_.Tb)(e.handleEnterForeground),(0,L_.b$)(e.handleEnterBackground),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),p_.uo.remove(e.body),(0,f_.bn)(this)},Eb=function(){Sb.call(this)||(mb.call(this).then((()=>{const e=(0,f_.Wj)(this);e.isShow&&(Iy("show",e.adType,0),Iy("close",e.adType,+new Date)),Ib.call(this)})),this._destroyed=!0)},Sb=function(){return this._destroyed},Tb=function(){const e=(0,f_.Wj)(this);xb.call(this),e.keepAliveTimer=setTimeout((()=>{e.adProxy.reportAdMonitorData(153,{currentTime:e.videoCurrentTime,duration:e.videoDuration,src:e.adMedia.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},xb=function(){const e=(0,f_.Wj)(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},kb=function(){const e=(0,f_.Wj)(this);e.ad_type===YA&&e.adProxy.getChannelsLiveStatus().then((e=>{Pb.call(this,e)}))},Pb=function(e){const t=(0,f_.Wj)(this),n={adChannelsLiveReserve:!1,adChannelsLive:!1,adChannelsLiveEnd:!1};"onlive"===e?n.adChannelsLive=!0:"end"===e?n.adChannelsLiveEnd=!0:"reserve"===e&&(n.adChannelsLiveReserve=!0);for(const e of Object.keys(n))t[e]&&t[e].style&&(t[e].style.hidden=!n[e])};class Db extends f_.wA{constructor({adUnitId:e,pluginId:t=""}){super();const n=(0,f_.Wj)(this);n.adUnitId=e,n.adType="interstitialAd",n.cardXOM="",n.cardStyle="",n.ad_type="",n.emitter=new sm.Z,n.adProxy=new h_.FF({adUnitId:e,adType:"interstitialAd",pluginAppid:t}),n.androidAppState=0,n.isShowedExposureReported=!1,n.isViewableExposureReported=!1,n.isReady=!1,n.isShow=!1,n.emitter.on("ready",(()=>n.isReady=!0)),n.lastCloseTime=0,n.autoCloseTime=15,n.launchTime=15,n.frequencyTime=15,n.startExposureTime=0,n.clickCount=0,n.lastLandingTime=0,n.lastJsapiName="",n.lastJsapiStatus=0,n.lastJsapiCostTime=0,n.isLandingPage=!1,n.landingPageCostTime=0,n.hideTime=0,n.showTime=0,n.hideDuration=0,n.isClosing=!1,n.isShowCloseTip=!1,n.clickFirstGradeTime=0,n.videoFirstPlayTime=0,n.isEnded=!1,n.fetchBeginTime=0,n.videoCurrentTime=0,n.videoDuration=0,n.isPlaying=!1,n.isFirstPlay=!1,n.preloadVideo=!1,n.preloadVideoSuccess=!1,n.keepAliveTimer=null,n.isData=!1,this._destroyed=!1,n.updateResult=Promise.resolve(),n.isSwitched=!1,n.onceSwitched=!1,n.startShow=0;const{openType:r,createWebviewId:o,lastWebviewId:i,currentWebviewId:a}=n.adProxy.getWebviewInfo(),s=[r,i,a,o];n.outRoute="",n.lastRoute="",n.enterTime=0,n.outTime=0,o===a&&(n.enterRoute=s.join("|"),n.enterTime=+new Date,n.lastRoute="enter"),o===i&&(n.outRoute=s.join("|"),n.outTime=+new Date,n.lastRoute="out"),db.call(this),QA||((0,sr.H)((e=>{if(Sb.call(this))return;const{createWebviewId:t,lastWebviewId:r,currentWebviewId:o}=n.adProxy.getWebviewInfo(),i=[e.openType,r,o,t];t===o&&(n.enterRoute=i.join("|"),n.enterTime=+new Date,n.onceSwitched=!0,n.lastRoute="enter"),t===r&&(n.outRoute=i.join("|"),n.outTime=+new Date,n.onceSwitched=!0,n.lastRoute="out")})),(0,he.q)((()=>{if(Sb.call(this))return;const{openType:e,createWebviewId:t,currentWebviewId:r}=n.adProxy.getWebviewInfo();["navigateTo","navigateBack","switchTab"].includes(e)&&t===r&&(n.isSwitched=!0,n.isShow&&wb.call(this,4))})),(0,$a.KN)((e=>{!Sb.call(this)&&n.isShow&&e.size&&(VA=e.size.screenHeight,UA=e.size.screenWidth,HA=e.deviceOrientation,pb.call(this))}))),n.handleEnterForeground=()=>{if(Sb.call(this))return;n.ad_type===zA&&n.isShow&&Tb.call(this);const e=HA;lb.call(this),e!==HA&&n.isShow&&pb.call(this),n.hideTime>0&&n.isShow&&(n.hideDuration+=+new Date-n.hideTime),gb.call(this)},n.handleEnterBackground=()=>{if(!Sb.call(this)&&n.isShow&&(n.hideTime=+new Date,n.ad_type===zA)){xb.call(this);const e=n.adProxy.reportVideo({playType:n.isPlaying?"partial":"complete",conditionType:"exit",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted});(0,__._u)(e,"插屏广告","退出")}},(0,L_.dN)(n.handleEnterForeground),(0,L_.vv)(n.handleEnterBackground),(0,u.jQ)("onVideoResourceLoad",(e=>{!n.isShow&&n.ad_type===zA&&n.adMedia&&n.adMedia.src==e.resource&&(n.adProxy.reportAdIDKey({key:106}),n.preloadVideoSuccess=!0,n.adMedia.src=e.resource)}))}load(){if(Sb.call(this))return Promise.reject({errMsg:JA});const e=(0,f_.Wj)(this);return e.isShow?Promise.reject({errMsg:"can't invoke load() while interstitial-ad is showed"}):e.isData?Promise.resolve():db.call(this)}show(e){return Sb.call(this)?Promise.reject({errMsg:JA}):vb.call(this,e)}destory(){Eb.call(this)}destroy(){Eb.call(this)}onError(e){if(Sb.call(this))return;(0,f_.Wj)(this).emitter.on("_error",e)}offError(e){if(Sb.call(this))return;(0,f_.Wj)(this).emitter.off("_error",e)}onLoad(e){if(Sb.call(this))return;(0,f_.Wj)(this).emitter.on("load",e)}offLoad(e){if(Sb.call(this))return;(0,f_.Wj)(this).emitter.off("load",e)}onClose(e){if(Sb.call(this))return;(0,f_.Wj)(this).emitter.on("close",e)}offClose(e){if(Sb.call(this))return;(0,f_.Wj)(this).emitter.off("close",e)}getSplashAdShowStatus(){return(0,f_.Wj)(this).adProxy.getSplashAdShowStatus()}}const Ob=e=>!(e.isDestroyed()||!(0,j_.U2)(e,["rootElement","layoutBox"]));class Nb{constructor({manager:e,adProxy:t,emitter:n}){this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.exposureTimer=null,this.clickFirstGradeTime=0,this.adProxy=void 0,this.manager=void 0,this.emitter=void 0,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set,this.hasEmitShowHalf=!1,this.landManager=void 0,this.handleEnterForeground=()=>{const{rootComponent:e}=this.manager;if(this.manager.isDestroyed()||!e)return;e.isShow()&&(e.emitComponentEvent(P_._d.SHOWHALF),e.emitAdCustomEvent(P_.A$.ADSHOWHALF))},this.handleEnterBackground=()=>{const{rootComponent:e}=this.manager;if(this.manager.isDestroyed()||!e)return;e.isShow()&&(e.emitComponentEvent(P_._d.HIDEHALF),e.emitAdCustomEvent(P_.A$.ADHIDEHALF))},this.handleAdCustomEvent=e=>{switch(e.action){case P_.A$.ADVIDEOPLAY:this.checkVideoViewableExposure(!0);break;case P_.A$.ADVIDEOPAUSE:this.checkVideoViewableExposure(!1);break;case P_.A$.REPORTVIDEOPLAY:this.reportVideoPlay(e.value.playType,e.value.conditionType,e.value.videoInfo);break;case P_.A$.FEEDBACKREPORT:this.reportAdFeedbackData(e.value);break;case P_.A$.REPORTENDPAGE:this.reportEndPage(e.value.data);break;case P_.A$.REPORTMMDATA:e.value.id&&e.value.data&&this.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case P_.A$.BTNTAP:this.manager.rootComponent&&this.manager.rootComponent.emitComponentEvent(P_._d.ADBUTTONTAP),this.handleClick(e.value.event,1,!0);break;case P_.A$.CHANGEMULTISHOW:this.multiShowList=e.value.list,this.checkExposure()}},this.manager=e,this.adProxy=t,this.emitter=n,this.bindEvent()}setMultiShowList(e=[]){this.multiShowList=[...e]}destroy(){this.unbindEvent()}reset(){this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.hasEmitShowHalf=!1,this.adProxy.isViewable=!1,this.exposureTimer&&clearTimeout(this.exposureTimer),this.exposureTimer=null,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set}bindEvent(){this.emitter.on("adCustomEvent",this.handleAdCustomEvent),(0,L_.dN)(this.handleEnterForeground),(0,L_.vv)(this.handleEnterBackground)}unbindEvent(){this.emitter.off("adCustomEvent",this.handleAdCustomEvent),(0,L_.Tb)(this.handleEnterForeground),(0,L_.b$)(this.handleEnterBackground)}judgeTriggerClick(e,t=!0){if(this.manager.isDestroyed())return!1;const n=this.adProxy.isTriggerClick(e),r=n?0:1;return t&&this.reportTouchClick(e,r),n}reportTouchClick(e,t){if(!Ob(this.manager))return;const{width:n,height:r}=this.manager.rootElement.layoutBox;let o=0;[0,2,3].includes(t)&&(this.clickCount+=1,o=this.clickCount),this.adProxy.reportTouchClick({slotid:this.manager.getSlotId(),costtype:(0,j_.U2)(this.adProxy,["adData","data","is_cpm"])?1:2,click_time:Date.now(),click_cnt:o,start_posx:Math.round(e.relativeX||0),start_posy:Math.round(e.relativeY||0),end_posx:Math.round(e.relativeEndX||0),end_posy:Math.round(e.relativeEndY||0),ad_width:n||0,ad_height:r||0,press_interval:e.pressInterval,block_click:t})}handleClick(e,t,n=!1){if(this.manager.isDestroyed()||!this.manager.adData)return;const{appInfo:{urlScheme:r},product_type:o,dest_type:i}=this.manager.adData;this.manager.clearAdTimer(),o===Hi.fY.OPEN_PLATFORM_APP_MOB&&k.wZ&&this.landManager.downloadState===P_.JF.INSTALLED&&r&&r.trim().length>0?(this.reportClick(e),this.reportAntifraud(t,e),this.adProxy.launchApplication(r).catch((()=>{})),this.manager.landManager.lastJsapiName="launchApplication",this.manager.landManager.isLandingPage=!0):k.cj&&o===h_.kv.MINI_GAME&&6===i?Promise.race([this.reportClick(e),(0,j_.Vs)(500)]).then((()=>{this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:n})})).catch((()=>{this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:n})})):(this.reportClick(e),this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:n}))}reportClick(e){if(!Ob(this.manager))return;const{left:t,top:n,width:r,height:o}=this.manager.rootElement.layoutBox,{adCustomId:i}=this.manager,a=(e=>$_.videoDataMap[e]||{})(i);this.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-t,clickRelativeTop:e.absoluteY-n,pressInterval:e.pressInterval,isMulti:this.manager.isMulti,left:t,top:n,width:r,height:o,videoData:a})}isClickLimit(e,t=0){const{adProxy:n,manager:{rootElement:r}}=this;if(!r)return!1;const{width:o,height:i}=r.layoutBox,{left:a,top:s}=r.getAbsolutePosition();let c=!1,l=0;n.isValidCondition("widget_gray_time_limit")&&(l=100*(this.manager.adData.condition.widget_gray_time_limit||1)),l>0&&Date.now()-this.showedExposureTime<l&&(c=!0,n.reportAdMonitorData(P_.IN.AD_LIMIT_TIME,{clickType:t}));let d=0;return n.isValidCondition("widget_gray_bd_limit")&&(d=this.manager.adData.condition.widget_gray_bd_limit||0),"devtools"!==k.iw&&e&&d>0&&(e.absoluteEndX-a<d||a+o-e.absoluteEndX<d||e.absoluteEndY-s<d||s+i-e.absoluteEndY<d)&&(c=!0,n.reportAdMonitorData(P_.IN.AD_LIMIT_BOUNDARY)),c}reportExposure({isViewable:e}){var t=this;return ue()((function*(){if(!Ob(t.manager))return;const{rootElement:n,rootComponent:r,isMulti:o}=t.manager,{left:i,top:a,width:s,height:c}=n.layoutBox,l={left:i,top:a,width:s,height:c};if(o){const n=e?t.multiViewableExposureList:t.multiExposureList,i=t.multiShowList.filter((e=>!n.has(e)));i.length&&(i.forEach(n.add,n),r.emitComponentEvent(e?P_._d.VIEWABLEEXPOSURE:P_._d.EXPOSURE,{exposureList:i}),yield t.adProxy.reportExposure(I()(I()({},l),{},{multiList:i,isMulti:o,exposureType:e?"viewable":"showed"})))}else e?r.emitComponentEvent(P_._d.VIEWABLEEXPOSURE):r.emitComponentEvent(P_._d.EXPOSURE),yield t.adProxy.reportExposure(I()(I()({},l),{},{exposureType:e?"viewable":"showed"}))}))()}checkExposure(){var e=this;return ue()((function*(){if(e.manager.isDestroyed())return;if(!Ob(e.manager))return yield(0,j_.Vs)(0),void(yield e.checkExposure());const{rootComponent:t,isMulti:n}=e.manager,r=t.isShow(),{exposureUntilVideoPlay:o}=t;(n||!e.isExposured&&r)&&(e.isExposured=!0,e.showedExposureTime=Date.now(),e.reportExposure({isViewable:!1})),r&&!e.hasEmitShowHalf?(e.hasEmitShowHalf=!0,t.emitComponentEvent(P_._d.SHOWHALF),t.emitAdCustomEvent(P_.A$.ADSHOWHALF)):r||(e.hasEmitShowHalf=!1,t.emitComponentEvent(P_._d.HIDEHALF),t.emitAdCustomEvent(P_.A$.ADHIDEHALF)),o||(r?e.exposureTimer=setTimeout((()=>{const r=t.isShow();(n||!e.isViewableExposured&&r)&&(e.isViewableExposured=!0,e.adProxy.isViewable=!0,e.reportExposure({isViewable:!0}))}),1e3):e.exposureTimer&&clearTimeout(e.exposureTimer))}))()}checkVideoViewableExposure(e){const{rootElement:t,rootComponent:n}=this.manager;if(this.manager.isDestroyed()||!t||!n)return;const r=n.isShow(),{exposureUntilVideoPlay:o}=n,{left:i,top:a,width:s,height:c}=t.layoutBox;o&&(r&&e?this.exposureTimer=setTimeout((()=>{this.isViewableExposured||(this.isViewableExposured=!0,this.adProxy.isViewable=!0,this.adProxy.reportExposure({left:i,top:a,width:s,height:c,exposureType:"viewable"}),n.emitComponentEvent(P_._d.VIEWABLEEXPOSURE))}),0):this.exposureTimer&&clearTimeout(this.exposureTimer))}reportAntifraud(e,t){var n=this;return ue()((function*(){var r;if(yield n.manager.ready(),!Ob(n.manager))return;const{width:o,height:i}=n.manager.rootElement.layoutBox;n.adProxy.reportAntifraud({click_button:e,cost_type:null!==(r=n.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,slotid:n.manager.getSlotId(),is_game:q_.S.isWaGame?1:0,pageentertime:+new Date(n.adProxy.getProgramStartTime()),ad_width:o||0,ad_height:i||0,clientexptime:n.showedExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:Math.round(t.absoluteX||0),pos_y:Math.round(t.absoluteY||0),screen_width:q_.S.screenWidth,screen_height:q_.S.screenHeight})}))()}reportCloseAction(e){if(this.manager.isDestroyed())return;const t=Date.now();this.adProxy.reportCloseAction({slotid:this.manager.getSlotId(),is_game:q_.S.isWaGame?1:0,costtype:(0,j_.U2)(this.adProxy,["data","is_cpm"])?1:2,close_type:e,exposure_duration:t-this.showedExposureTime-this.hideDuration,start_time:this.showedExposureTime,close_time:t})}reportAdFeedbackData({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:n=0,secondGradeDesc:r="",feedbackReason:o=0}){this.manager.isDestroyed()||(e&&!n&&(this.clickFirstGradeTime=Date.now()),this.adProxy.reportAdFeedbackData({adWidth:q_.S.screenWidth,adHeight:q_.S.screenHeight,adPosX:0,adPosY:0,expTime:this.showedExposureTime,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?this.clickFirstGradeTime:0,secondGradeId:n,secondGradeDesc:r,secondGradeTime:n?Date.now():0,feedbackReason:o}))}reportFollow(e){if(!this.manager.isDestroyed())return e.then((e=>/ok/.test(e.errMsg)?this.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?this.adProxy.reportFollow({result:"cancel"}):void 0)).catch((()=>this.adProxy.reportFollow({result:"fail"})))}reportVideoPlay(e,t,{playDuration:n,isMuted:r,videoDuration:o}){this.adProxy.reportVideo({playType:e,conditionType:t,playDuration:n,videoDuration:o,muted:r})}reportEndPage({ace_type:e,exposure_duration:t=0}={}){this.adProxy.reportEndPage({slotid:this.manager.getSlotId(),costtype:(0,j_.U2)(this.adProxy,["adData","data","is_cpm"])?1:2,posType:this.adProxy.data.pos_type,isGame:q_.S.isWaGame?1:0,ace_type:e,exposure_duration:t})}reportTimePoints(){this.adProxy.reportTimePoints({slotid:this.manager.getSlotId(),costtype:(0,j_.U2)(this.adProxy,["adData","data","is_cpm"])?1:2})}}class Rb{constructor({manager:e,reporter:t}){this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.hideTime=null,this.isLandingPage=!1,this.landingPageCostTime=0,this.downloadState=P_.JF.DEFAULT,this.downloadProgress=0,this.manager=void 0,this.reporter=void 0,this.adProxy=void 0,this.manager=e,this.adProxy=e.adProxy,this.reporter=t}reset(){this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.isLandingPage=!1,this.landingPageCostTime=0}checkAdState(){var e=this;return ue()((function*(){if(!e.manager.isDestroyed()){if(yield(0,__.Vs)(10),e.isLandingPage){var t;e.adProxy.setTimePoint("p11"),e.lastJsapiStatus=0,e.isLandingPage=!1;const n=Date.now();e.landingPageCostTime=e.hideTime?n-e.hideTime:0,e.adProxy.reportLandingTime({slotId:e.manager.getSlotId(),costType:(0,k_.U2)(e.adProxy,["adData","data","is_cpm"])?1:2,openTime:e.hideTime,closeTime:n,stayTime:e.landingPageCostTime,jsapiName:e.lastJsapiName,clickTime:e.lastLandingTime,clkCnt:e.reporter.clickCount,retCode:e.lastJsapiStatus,costTime:e.lastJsapiCostTime,actTypeInt:1}),null!==(t=e.manager.rootComponent)&&void 0!==t&&t.hideAfterLanding&&e.manager.hide()}e.manager.isShow&&e.manager.setAdTimer()}}))()}checkFollow(){var e=this;return ue()((function*(){const{adData:t}=e.manager,n=(0,k_.U2)(t,["button_action","text_type"],0),r=yield e.adProxy.checkFollow(t.app.uin);0===n&&e.manager.updateButtonText({text:r?"查看":t.button_action.button_text}),e.adProxy.data.biz_info&&(e.adProxy.data.biz_info.is_subscribed=r?1:0)}))()}checkAppInstallState(){var e=this;return ue()((function*(){if(e.manager.isDestroyed())return;const{appInfo:{apkName:t,versionCode:n,urlScheme:r}}=e.manager.adData;try{const o=yield e.adProxy.getInstallState(t);o.isInstalled&&(void 0===o.versionCode||o.versionCode>=n)&&(e.downloadState=P_.JF.INSTALLED,e.downloadProgress=0,e.adProxy.setAppInstallState(!0),r&&r.trim().length>0?e.manager.updateButtonText({text:"进入应用"}):e.manager.updateButtonText({text:"查看应用"}))}catch(e){}}))()}landing(e){if(this.manager.isDestroyed())return;this.reporter.clickCount>1&&this.adProxy.reportRepeatClick({slotId:this.manager.getSlotId(),costType:(0,k_.U2)(this.adProxy,["data","is_cpm"])?1:2,clkCnt:this.reporter.clickCount,lastClkPeriod:Date.now()-this.lastLandingTime,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,pageStayTime:this.landingPageCostTime,jsapiName:this.lastJsapiName});const t=this.adProxy.land(e),n=(0,k_.U2)(this.adProxy,["data","button_action","text_type"],0);this.adProxy.data.product_type===Hi.fY.WECHAT&&(0,k_.U2)(e,["isButton"])&&!this.adProxy.data.biz_info.is_subscribed?(t.then((e=>{const t=/ok/.test(e.errMsg);t&&0===n&&(this.manager.updateButtonText({text:"查看公众号"}),this.adProxy.data.biz_info&&(this.adProxy.data.biz_info.is_subscribed=1),this.adProxy.reportAdIDKey({key:P_.IN.FOLLOW_SUCCESS})),e.errMsg&&(this.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));const r=Date.now();var o;(this.lastJsapiStatus=0,this.lastJsapiCostTime=r-this.lastLandingTime,"private_addContact"===this.lastJsapiName)&&this.adProxy.reportLandingTime({slotId:this.manager.getSlotId(),costType:null!==(o=this.adProxy.data)&&void 0!==o&&o.is_cpm?1:2,openTime:this.lastLandingTime,closeTime:r,stayTime:this.lastJsapiCostTime,jsapiName:this.lastJsapiName,clickTime:this.lastLandingTime,clkCnt:this.reporter.clickCount,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,actTypeInt:t?2:3,actTypeStr:t?"关注":"取消"});this.manager.isShow&&this.manager.setAdTimer()})).catch((()=>{this.lastJsapiStatus=1})),this.reporter.reportFollow(t)):t.then((e=>{e.errMsg&&(this.lastJsapiName=e.errMsg.replace(":ok","")),["private_openUrl","navigateToMiniProgram","openADCanvas","launchApplication"].includes(this.lastJsapiName)?this.isLandingPage=!0:this.lastJsapiStatus=0,this.lastJsapiCostTime=Date.now()-this.lastLandingTime})).catch((()=>{this.lastJsapiStatus=1}))}}const Mb=new WeakMap,Lb=e=>Mb.get(e);const Bb="customAd has been destroyed";let Fb=1;class Wb{constructor({adUnitId:e,adIntervals:t=0,left:n,top:r,width:o,height:i,fixed:a,style:s}){if(this.adUnitId=void 0,this.adCustomId=void 0,this.adProxy=void 0,this.reporter=void 0,this.landManager=void 0,this.isShow=!1,this.rootElement=null,this.rootComponent=null,this.systemInfo=null,this.adData=null,this.adDatas=[],this.showDetailTime=0,this.callbacks={load:[],error:[],close:[],hide:[]},this.adType="customAd",this.emitter=new cm,this.isReady=!1,this.isDestroy=!1,this.isShowing=!1,this.isHiding=!1,this.fetchedError=null,this.template=null,this.tplConfig=null,this.slotId=void 0,this.adIntervals=void 0,this.adTimer=null,this.readyResolve=new Set,this.adPosition=void 0,this.isMulti=!1,this.handleReady=()=>{if(!this.isReady){for(const e of this.readyResolve)e();this.readyResolve.clear(),this.isReady=!0}},this.handleEnterBackground=()=>{this.landManager.hideTime=Date.now(),this.clearAdTimer()},this.handleEnterForeground=()=>{this.landManager.checkAdState(),this.landManager.hideTime&&(this.reporter.hideDuration+=Date.now()-this.landManager.hideTime)},this.handleAdCustomEvent=e=>{var t;switch(e.action){case P_.A$.TRIGGEREVENT:["error","videodislike"].includes(e.value.eventName)&&this.emitter.emit(e.value.eventName,e.value.detail||{});break;case P_.A$.SHOWFEEDBACK:null===(t=this.rootComponent)||void 0===t||t.showFeedback();break;case P_.A$.FEEDBACKBTNTAP:this.adProxy.openFeedbackUrl($i.S3.isWaGame?1003:1005);break;case P_.A$.HIDEAD:this.hide();break;case P_.A$.REPORTTIMEPOINT:e.value.key&&this.adProxy.setTimePoint(e.value.key);break;case P_.A$.ADSHOWHALF:this.isShow=!0;break;case P_.A$.ADHIDEHALF:this.isShow=!1;break;case P_.A$.CHECKEXPOSURE:this.reporter.checkExposure();break;case P_.A$.LANDAD:{const{index:t,event:n}=e.value;if(this.reporter.isClickLimit(n))return;this.isMulti&&this.adProxy.setCurrentData(t),this.reporter.handleClick(n,1,!1);break}}},this.handleLoad=e=>this.emitCallback("load",e),this.handleError=e=>this.emitCallback("error",e),this.handleClose=()=>this.emitCallback("close"),this.handleHide=()=>this.emitCallback("hide"),this.handleVideoDislike=()=>this.emitCallback("videodislike"),this.onLoad=e=>this.callbacks.load.push(e),this.onError=e=>this.callbacks.error.push(e),this.onClose=e=>this.callbacks.close.push(e),this.onHide=e=>this.callbacks.hide.push(e),this.onVideoDislike=e=>this.callbacks.videoDislike.push(e),this.offLoad=e=>this.removeCallback("load",e),this.offError=e=>this.removeCallback("error",e),this.offClose=e=>this.removeCallback("close",e),this.offHide=e=>this.removeCallback("hide",e),this.offVideoDislike=e=>this.removeCallback("videodislike",e),e||console.error("广告单元 id(unit-id) 为空, 请先在 'https://mp.weixin.qq.com' 上创建广告单元"),this.adUnitId=e,this.slotId="4071202390577885",this.adCustomId=`AD_CUSTOM_${Fb}`,Fb+=1,this.adPosition={left:n,top:r,width:o,height:i,fixed:a},s&&"object"==typeof s){const e=["left","top","width","height","fixed"];for(const t of e)null!=s[t]&&(this.adPosition[t]=s[t])}(0,St.aI)()&&delete this.adPosition.fixed,this.adProxy=new h_.FF({adUnitId:e,adType:this.adType}),this.reporter=new Nb({manager:this,adProxy:this.adProxy,emitter:this.emitter}),this.landManager=new Rb({manager:this,reporter:this.reporter}),this.adIntervals="number"==typeof t?t:0,this.reporter.landManager=this.landManager,this.bindEvent(),this.fetchAndRender()}getSlotId(){return this.slotId}bindEvent(){this.emitter.on("load",this.handleLoad),this.emitter.on("error",this.handleError),this.emitter.on("videoDislike",this.handleVideoDislike),this.emitter.on("close",this.handleClose),this.emitter.on("hide",this.handleHide),this.emitter.on("adCustomEvent",this.handleAdCustomEvent),this.onLoad(this.handleReady),this.onError(this.handleReady),(0,L_.dN)(this.handleEnterForeground),(0,L_.vv)(this.handleEnterBackground)}unbindEvent(){this.emitter.off("load",this.handleLoad),this.emitter.off("error",this.handleError),this.emitter.off("videoDislike",this.handleVideoDislike),this.emitter.off("close",this.handleClose),this.emitter.off("hide",this.handleHide),this.emitter.off("adCustomEvent",this.handleAdCustomEvent),this.offLoad(this.handleReady),this.offError(this.handleReady),(0,L_.Tb)(this.handleEnterForeground),(0,L_.b$)(this.handleEnterBackground)}fetchAndRender({isAdInterval:e=!1,autoUnmount:t=!1}={}){var n=this;return ue()((function*(){try{var r,o;const[i,a]=yield Promise.all([n.adProxy.fetch(e),n.getSystemInfo(),(0,q_.g)()]);t&&n.resetState(),n.systemInfo=a,n.adData=i,n.adDatas=n.adProxy.datas||[],n.template=n.getTemplateFromAdData(i),n.tplConfig=(null===(r=n.template)||void 0===r?void 0:r.tplConfig)||{},n.checkSize(),yield n.render(),n.adProxy.reportAdMonitorData(P_.IN.RENDER_SUCCESS);const s={errMsg:"load advertisement success"};null!==(o=n.rootComponent)&&void 0!==o&&o.exportAid&&(s.aid=n.adData.aid),n.emitter.emit("load",s),n.fetchedError=null,n.adProxy.preloadLanding()}catch(e){n.adProxy.reportAdMonitorData(P_.IN.RENDER_FAILED,e);const t=null!=e&&e.errCode?e:{errCode:P_.Bq.ERR_RENDER,errMsg:"customAd render failed"};n.fetchedError=t,n.emitter.emit("error",t)}}))()}getTemplateFromAdData(e){return e.template}checkSize(){if(!this.tplConfig)return;const{tplConfig:e}=this;let{width:t}=this.adPosition;null==t&&(t=$i.S3.screenWidth),t=Number(t);const n=e.minWidth||0,r=e.maxWidth||0,o=e.baseWidth||375;let i=Math.min($i.S3.screenWidth,Math.max(n,t));r&&(i=Math.min(i,r)),0===i&&(this.adProxy.reportAdMonitorData(P_.IN.WIDTH_GET_ERROR,{unitId:this.adUnitId}),K_(o,o)),this.adPosition.width=i,K_(i,o)}reload(){}updateButtonText({text:e,progress:t}){var n;null===(n=this.rootComponent)||void 0===n||n.emitAdCustomEvent(P_.A$.CHANGEADBTNTEXT,{text:e||"",progress:t||0})}getSystemInfo(){return $i.S3}ready(){return new Promise(((e,t)=>{const n=()=>{this.fetchedError?t(this.fetchedError):e()};this.isReady?n():this.readyResolve.add(n)}))}removeCallback(e,t){this.callbacks[e]&&(this.callbacks[e]=t?this.callbacks[e].filter((e=>e!==t)):[])}emitCallback(e,t){if(this.callbacks[e])for(const n of this.callbacks[e])"function"==typeof n&&n(t)}show({branchId:e,branchDim:t}={}){var n=this;return ue()((function*(){if(n.isDestroyed())throw{errMsg:Bb};if(n.isShow||n.isShowing)throw{errMsg:"the advertisement has shown"};n.isShowing=!0,e?n.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):n.adProxy.resetAnalyseBranchInfo();try{yield n.ready(),n.rootComponent&&n.rootComponent.show(),n.setAdTimer()}finally{n.isShowing=!1}}))()}setAdTimer(){var e;if(this.rootComponent&&!this.rootComponent.enableTimer)return;let t;t=this.adIntervals>=30&&this.adIntervals<=3600?1e3*this.adIntervals:null!==(e=this.adData)&&void 0!==e&&e.refreshTime?1e3*this.adData.refreshTime:null,t&&(this.adTimer&&clearTimeout(this.adTimer),this.adTimer=setTimeout((()=>this.refetch(!0)),t))}clearAdTimer(){this.isDestroyed()||this.adTimer&&(clearTimeout(this.adTimer),this.adTimer=null)}refetch(e=!1){var t=this;return ue()((function*(){if(!t.isDestroyed()&&t.isShow)try{yield t.fetchAndRender({isAdInterval:e,autoUnmount:!0}),yield t.show(),t.adProxy.reportAdMonitorData(P_.IN.REFETCH_SUCCESS),t.rootElement&&(yield t.rootElement.nextLayout(),t.reporter.checkExposure())}catch(e){t.adProxy.reportAdMonitorData(P_.IN.REFETCH_FAILED,e);const n={errCode:P_.Bq.ERR_RENDER,errMsg:"customAd render failed"};t.emitter.emit("error",n)}}))()}hide(e=!1){var t=this;return ue()((function*(){var n;if(t.isDestroyed())throw{errMsg:Bb};if(t.isShow&&!t.isHiding){if(t.isHiding=!0,null===(n=t.rootComponent)||void 0===n||n.hide(),t.clearAdTimer(),e)t.emitter.emit("hide");else{t.isReady=!1,t.emitter.emit("close"),t.resetState(),t.adProxy.setTimePoint("p14"),t.reporter.reportTimePoints();let e=!1;t.rootComponent&&(e=t.rootComponent.getRootData("refetchable")),e?(t.unmount(),yield t.fetchAndRender()):yield t.destroy()}t.isHiding=!1}}))()}destroy(){var e=this;return ue()((function*(){if(!e.isDestroyed()){e.isDestroy=!0;try{yield e.ready()}catch(e){}e.clearAdTimer(),e.unbindEvent(),e.resetState(),e.callbacks={load:[],error:[],close:[]},e.reporter.destroy()}}))()}isDestroyed(){return this.isDestroy}canHideAd(){return!!this.rootComponent&&this.rootComponent.getRootData("hidable")}resetState(){this.unmount(),this.rootComponent=null,this.rootElement=null,this.isReady=!1,this.isShow=!1,this.isMulti=!1,this.adData=null,this.adDatas=[],this.reporter.reset(),this.landManager.reset()}emitRender(e){return this.rootComponent?((0,m_.ve)(this.rootComponent,e),this.rootComponent):(0,m_.sY)(om,e)}render(){return this.adProxy.setTimePoint("p4"),this.template?(this.rootComponent=this.emitRender({manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy,template:this.template,systemInfo:this.systemInfo,adData:this.adProxy.data,adDatas:this.adProxy.datas,adCustomId:this.adCustomId,adPosition:this.adPosition,isEmpty:!1}),this.initialMultiLists(),this.rootElement=this.rootComponent.getRootElement(),this.adProxy.reportAdMonitorData(P_.IN.TPL_RENDER_SUCCESS),this.adProxy.setTimePoint("p5"),this.rootElement.ready()):this.renderEmpty()}initialMultiLists(){if(this.rootComponent&&(this.isMulti=this.rootComponent.isMulti&&this.adProxy.isMulti,this.isMulti)){const{multiShowList:e}=this.rootComponent;e&&Array.isArray(e)?this.reporter.setMultiShowList(e):this.reporter.setMultiShowList(Object.keys(this.adDatas).map((e=>+e)))}}unmount(){this.rootComponent&&((0,m_.vE)(this.rootComponent),this.rootElement=null,this.rootComponent=null)}renderEmpty(){return this.rootComponent=this.emitRender({isEmpty:!0,manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy}),this.rootElement=this.rootComponent.getRootElement(),m_.Ar.nextLayout()}}const jb=e=>Lb(e);class Ub extends class{constructor(e,...t){const n=new e(...t);Mb.set(this,n)}}{constructor(e){super(Wb,e),this.isDestroy=!1}destroy(){var e=this;return ue()((function*(){var t;e.isDestroy||(yield jb(e).destroy(),t=e,Mb.delete(t),e.isDestroy=!0)}))()}hide(){var e=this;return ue()((function*(){const t=jb(e);if(!t.canHideAd())throw{errMsg:"the advertisement don't support hide"};yield t.hide(!0)}))()}isShow(){return jb(this).isShow}}let Vb;((e,t)=>{for(const n of t)e.prototype[n]=function(...e){return Lb(this)[n](...e)}})(Ub,["show","isDestroyed","onLoad","onError","onClose","onHide","offLoad","offError","offClose","offHide"]),Vb||(Vb=new _y),(0,l_.Ug)((e=>{Vb||(Vb=new _y),Vb.show(e)})),(0,l_.S4)((()=>{Vb||(Vb=new _y),Vb.otherAdsEmitFetch()}));const Gb={},$b={};let Hb=0;(0,bi.HM)((({webviewId:e})=>{Hb=e,$b[e]||($b[e]=!0,(0,x.dq)(e,(e=>{delete $b[e],delete Gb[e]})))}));const Zb=e=>e&&!0===e.multiton?new CA(e):(Gb[Hb]||(Gb[Hb]=new CA(e)),Gb[Hb]);const Qb={};function Yb(e,t){let n="";if(e===si.Dk&&(n="setCookies"),e===si.KC&&(n="getCookies"),!n)return;const r=(0,hr.hI)(this);Qb[r]=Qb[r]||{[si.Dk]:null,[si.KC]:null},__safeway__.pluginPermissionBytes.ifIs(r,n,1,(n=>{Qb[r][e]=n,t()}))}function zb(e,t){const n=(0,hr.hI)(this);k.gm?t(!0):Qb[n]&&null!==Qb[n][e]?t(!!Qb[n][e]):Yb.call(this,e,(()=>t(!!Qb[n][e])))}const qb={muteMicrophone:!1,muteEarphone:!1};function Jb(e){return(0,O.Kn)(e)?((0,O.jn)(e.muteMicrophone)&&(qb.muteMicrophone=e.muteMicrophone),(0,O.jn)(e.muteEarphone)&&(qb.muteEarphone=e.muteEarphone),qb):qb}const Kb=function(e){if(!(0,u.r3)("joinVoIPChat",e,{signature:"",nonceStr:"",timeStamp:0,groupId:""}))return;const t="video"===e.roomType?1:2,n=Object.assign({},e,{muteConfig:Jb(e.muteConfig),handsFree:!(0,O.jn)(e.handsFree)||e.handsFree,roomType:t}),r=(0,hr.hI)(this);(0,u.qu)(r)("joinVoIPChat",n,{beforeSuccess(e){(0,u.nY)("joinVoIPChat",{}),e.errCode=0},beforeFail(e){void 0===e.errCode&&(e.errCode=(e=>{const t=new RegExp(/^joinVoIPChat:(?:fail )?fail: (-?[0-9]+?), (-?[0-9]+?), .*/).exec(e);if(!t)return-1e3;const n=parseInt(t[1],10),r=parseInt(t[2],10);if(-10086!==n&&-10087!==n)return-1e3;switch(r){case 0:return 0;case-1:return-1;case-7:return-2;default:return-1e3}})(e.errMsg))}})},Xb=function(e){try{const t=(0,hr.hI)(this);(0,u.qu)(t)("exitVoIPChat",Object.assign({},e,{success(t){const n=t.errMsg||"ok";(0,u.nY)("exitVoIPChat",{}),(0,u.FE)({name:"exitVoIPChat",args:e,errMsg:n,errCode:0,res:t})},fail(t){const n=t.errCode||-1,r=t.errMsg||"unknown error";(0,u.FE)({name:"exitVoIPChat",args:e,success:!1,errMsg:r,errCode:n,res:t})},complete(){}}))}catch(t){"function"==typeof e.fail&&e.fail({errCode:-1,errMsg:`exitVoIPChat:fail ${t.message}`}),"function"==typeof e.complete&&e.complete({errCode:-1,errMsg:`exitVoIPChat:complete ${t.message}`})}},ew=function(e){if(!(0,u.r3)("updateVoIPChatMuteConfig",e,{muteConfig:{}}))return;const t=(0,hr.hI)(this);(0,u.qu)(t)("updateVoIPChatMuteConfig",Object.assign({},e,{muteConfig:Jb(e.muteConfig),handsFree:!(0,O.jn)(e.handsFree)||e.handsFree}))},tw=(0,gr.s)("voIPChatMembersChanged"),nw=tw.onMethod,rw=tw.offMethod;(0,u.jQ)("onVoIPChatMembersChanged",(e=>{e.errCode=0,e.errMsg=e.errMsg||"ok",tw.emit(e)}));const ow=e=>{try{(0,u.jQ)("onVoIPChatSpeakersChanged",(t=>{t.errCode=0,t.errMsg=t.errMsg||"ok","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}))}catch(t){t.errCode=t.errCode||-1,t.errMsg=t.errMsg||"unknown error","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}},iw=()=>{(0,u.jQ)("onVoIPChatSpeakersChanged",(()=>{}))},aw=(0,gr.s)("VoIPChatInterrupted"),sw=e=>{e.errCode||(e.errCode=((e="")=>e.includes("current mini app entered background")?-1:e.includes("in comming call")?-2:-1e3)(e.reason)),aw.emit(e)};(0,u.jQ)("onVoIPChatInterrupted",(e=>{sw(e)})),(0,u.jQ)("onVoIPChatInterruptedJsEvent",(e=>{sw(e)}));const cw=aw.onMethod,lw=aw.offMethod,dw=(e={})=>{(0,u.r3)("subscribeVoIPVideoMembers",e,{openIdList:[]})&&(0,u.IN)("subscribeVoIPMembers",e,{beforeAll(e){e.errMsg=e.errMsg.replace("subscribeVoIPMembers","subscribeVoIPVideoMembers")}})},uw=(0,gr.s)("VoIPVideoMembersChanged"),pw=uw.onMethod,hw=uw.offMethod;(0,u.jQ)("onVoIPVideoMembersChanged",((e={})=>{uw.emit(e)}));const fw=(0,gr.s)("voIPChatStateChanged"),gw=fw.onMethod,_w=fw.offMethod;(0,u.jQ)("onVoIPChatStateChanged",(e=>{e.errCode=e.errCode||0,e.errMsg=e.errMsg||"ok",fw.emit(e)}));var mw=c(8824);const yw=((e=!0,t,r=!1,o=!1)=>(i={})=>{if(i.apiName="webapi_getuserinfo",!(0,u.r3)("operateWXData",i,{apiName:""}))return;const a=n&&n.version&&n.version.version||"",s={api_name:i.apiName,from_component:!0,data:i.reqData||{},operate_directly:e};s.data.version=a,r&&(s.plugin_appid=i.pluginId);const c={data:s,isImportant:!0===o,requestInQueue:!i.hasOwnProperty("requestInQueue")||Boolean(i.requestInQueue)};new Date,new Date,(0,u.gM)(Object.assign({},c,i),{beforeAll(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess(e){new Date,new Date,k.wZ&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})})(!1,void 0,!0),vw=Zg(!1,"login"),Aw=Zg(!1,"getUserInfo",!0);var bw=c(8047);const ww=["scope.record","scope.writePhotosAlbum","scope.camera"],Cw=Zg(!1,"getSetting"),Iw=(e={})=>{(0,u.IN)("saveFileToDisk",e,{})};let Ew=1;oe.Z.onReady((()=>{["close","error","listening","message"].forEach((e=>{(0,u.jQ)(`onUDPSocket${(0,St.fm)(e)}`,(t=>{const{socketId:n}=t;delete t.socketId,(0,St.fm)(e);(0,gr.s)(`jsapi-udp-${n}-${e}`).emit(t)}))}))}));class Sw{constructor(e){let t;if(this._id=Ew++,(0,u.IN)("createUDPSocket",{socketId:this._id,type:"udp6"===e?"IPv6":"IPv4",fail(e){e.errMsg,t=e.errMsg}}),t)throw new Error(t);["close","error","listening","message"].forEach((e=>{const t=(0,gr.s)(`jsapi-udp-${this._id}-${e}`);this[`on${(0,St.fm)(e)}`]=t.onMethod,this[`off${(0,St.fm)(e)}`]=t.offMethod}))}bind(e){let t,n;if((0,u.IN)("bindUDPSocket",{port:e,socketId:this._id,success(e){t=e.port},fail(e){n=e.errMsg}}),n)throw new Error(n);return t}setTTL(e){let t;if((0,u.IN)("setUDPSocketTTL",{ttl:e,socketId:this._id,fail(e){t=e.errMsg}}),t)throw new Error(t)}send(e={}){let t;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,(0,u.IN)("sendUDPSocketMessage",Object.assign({},e,{socketId:this._id,message:t,success(e){},fail:({errMsg:e})=>{(0,gr.s)(`jsapi-udp-${this._id}-error`).emit({errMsg:`send: fail ${e}`})}}))}connect(){}write(e){this.send(e)}close(){let e;if((0,u.IN)("closeUDPSocket",{socketId:this._id,fail(t){e=t.errMsg}}),e)throw new Error(e)}}const Tw=bt.Z.UDP,xw=new WeakMap,kw=new WeakMap,Pw=new WeakMap;let Dw=1;class Ow{constructor(e){if(!Tw)return null;const t=new Tw;if(null===t)return null;const n=Dw++;["close","error","listening","message"].forEach((e=>{const r=(0,gr.s)(`jsbinding-udp-${n}-${e}`);t[`on${e}`]=function(...t){"message"===e&&t[0].remoteInfo&&(t[0].localInfo={address:t[0].remoteInfo.localaddress,family:t[0].remoteInfo.localfamily,port:t[0].remoteInfo.localport},delete t[0].remoteInfo.localaddress,delete t[0].remoteInfo.localfamily,delete t[0].remoteInfo.localport),r.emit(...t),"error"===e?Reporter.reportIDKey({key:"UDPError"}):"message"===e&&Reporter.reportIDKey({key:"receiveUDPMessage"})},this[`on${(0,St.fm)(e)}`]=r.onMethod,this[`off${(0,St.fm)(e)}`]=r.offMethod})),xw.set(this,t),kw.set(this,n),Pw.set(this,"udp6"===e?"IPv6":"IPv4")}bind(e){return(0,wu.P)("bindUDP","",1,0,"","",!1,0),Reporter.reportIDKey({key:"bindUDP"}),xw.get(this).bind({port:e,type:Pw.get(this)})}setTTL(e){if(Number.isNaN(Number(e))){return void(0,gr.s)(`jsbinding-udp-${kw.get(this)}-error`).emit({errMsg:"set ttl fail: ttl must be a number.",errCode:-4})}const t=xw.get(this);"IPv6"===Pw.get(this)?(t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_UNICAST_HOPS"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_RECVHOPLIMIT"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_RECVPKTINFO"),optionval:1})):t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_TTL"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_PKTINFO"),optionval:1}),t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_RECVTTL"),optionval:Number(e)})}send(e={}){if(!(0,aa.J)("UDP")){return void(0,gr.s)(`jsbinding-udp-${kw.get(this)}-error`).emit({errMsg:"send socket fail: no permission",errCode:-3})}const t=`udp://${e.address}`;let n;n=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,xw.get(this).send(Object.assign({},e,{message:n})),Math.random()>.99&&(0,wu.P)("sendUDP",t,1,0,"","",!1,(0,St.Y6)(e.message)),Reporter.reportIDKey({key:"sendUDPMessage"})}connect(e={}){const t=xw.get(this);"function"==typeof t.connect&&t.connect(e)}write(e={}){if(!(0,aa.J)("UDP")){return void(0,gr.s)(`jsbinding-udp-${kw.get(this)}-error`).emit({errMsg:"write socket fail: no permission",errCode:-3})}let t;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;const n=xw.get(this);"function"==typeof n.write?n.write(Object.assign({},e,{message:t})):this.send(e)}onConnect(e){xw.get(this).onconnect=e}close(){return xw.get(this).close()}}const Nw=(e="udp4")=>k.gm?new Sw(e):new Ow(e),Rw=[1,7,9,11,13,15,17,19,20,21,22,23,25,37,42,43,53,69,77,79,87,95,101,102,103,104,109,110,111,113,115,117,119,123,135,137,139,143,161,179,389,427,465,512,513,514,515,526,530,531,532,540,548,554,556,563,587,601,636,993,995,1719,1720,1723,2049,3659,4045,5060,5061,6e3,6566,6665,6666,6667,6668,6669,6697,10080,1099,1433,1521,2375,3128,3306,3389,5432,5984,6379,7001,7002,8443,8888,9200,9300,10051,11211,27017,27018,27019];function Mw(e){return e<=1024||(e>=8e3&&e<=8100||Rw.indexOf(e)>-1)}const Lw=new WeakMap;let Bw=1;const Fw=[];class Ww{constructor(e){Lw.set(this,e),["close","connect","error","message"].forEach((t=>{const n=(0,gr.s)(`jsapi-tcp-${e}-${t}`);this[`on${(0,St.fm)(t)}`]=n.onMethod,this[`off${(0,St.fm)(t)}`]=n.offMethod}))}connect(e){let t;const n=(0,gr.s)(`jsbinding-tcp-${Lw.get(this)}-error`);(0,Ou.k)({api:"tcp",url:`tcp://${e.address}`}).then((r=>{if(!r.isInLAN||r.isLocalHost||Mw(Number(e.port)))n.emit({errMsg:`connect fail: invalid address ${e.address}:${e.port}`,errCode:-4});else if((0,u.IN)("connectTCPSocket",{id:Lw.get(this),address:e.address,port:e.port,fail(e){e.errMsg,t=e.errMsg}}),t)throw new h.iZ(t)})).catch((e=>{n.emit({errMsg:`connect fail: ${e.message||e.errMsg}`,errCode:-4})}))}write(e){ArrayBuffer.isView(e)&&(e=e.buffer);const t={message:e};let n;if((0,u.IN)("writeTCPSocket",{id:Lw.get(this),message:t.message,fail(e){e.errMsg,n=e.errMsg}}),n)throw new h.iZ(n)}close(){let e;if((0,u.IN)("closeTCP",{id:Lw.get(this),fail(t){e=t.errMsg}}),e)throw new h.iZ(e)}}class jw extends Ww{constructor(){const e=Fw[Fw.length-1];if(e&&Date.now()-e<3e5)throw new h.iZ("[TCPSocket] created too much.");Fw.push(Date.now());const t=Bw++;let n;if((0,u.IN)("createTCPSocket",{id:t,fail(e){e.errMsg,n=e.errMsg}}),n)throw new h.iZ(n);super(t)}}class Uw{constructor(){const e=Bw++;let t;if(Lw.set(this,e),(0,u.IN)("createTCPServer",{id:e,fail(e){e.errMsg,t=e.errMsg}}),t)throw new h.iZ(t);["close","connection","error","listening"].forEach((t=>{const n=(0,gr.s)(`jsapi-tcp-${e}-${t}`);this[`on${(0,St.fm)(t)}`]=n.onMethod,this[`off${(0,St.fm)(t)}`]=n.offMethod}))}listen(e){let t,n;if((0,u.IN)("listenTCPServer",{id:Lw.get(this),port:e.port,fail(e){t=e.port,n=e.errMsg}}),n)throw new h.iZ(n);return t}close(){let e;if((0,u.IN)("closeTCP",{id:Lw.get(this),fail(t){e=t.errMsg}}),e)throw new h.iZ(e)}}oe.Z.onReady((()=>{["close","connect","connection","error","listening","message"].forEach((e=>{(0,u.jQ)(`onTCP${(0,St.fm)(e)}`,(t=>{const{id:n}=t;delete t.id,(0,St.fm)(e);const r=(0,gr.s)(`jsapi-tcp-${n}-${e}`);"connection"===e?r.emit(new Ww(t.socketId)):r.emit(t)}))}))}));const Vw=bt.Z.TCP,Gw=new WeakMap,$w=new WeakMap,Hw=new WeakMap;let Zw=1;const Qw=[];class Yw{constructor(e,t){const n=Zw++;["close","error","connect","message"].forEach((r=>{const o=(0,gr.s)(`jsbinding-tcp-${n}-${r}`);this[`on${(0,St.fm)(r)}`]=o.onMethod,this[`off${(0,St.fm)(r)}`]=o.offMethod,(!t||"close"!==r&&"error"!==r)&&(e[`on${r}`]=function(...e){"message"===r&&e[0].remoteInfo&&(e[0]={message:e[0].message,size:e[0].size,remoteInfo:{address:e[0].remoteInfo.address,family:e[0].remoteInfo.family,port:e[0].remoteInfo.port},localInfo:{address:e[0].remoteInfo.localaddress,family:e[0].remoteInfo.localfamily,port:e[0].remoteInfo.localport}}),o.emit(...e)})})),Gw.set(this,e),Hw.set(this,t),$w.set(this,n)}connect(e){const t=(0,gr.s)(`jsbinding-tcp-${$w.get(this)}-error`);(0,aa.J)("TCP")?(0,Ou.k)({api:"tcp",url:`tcp://${e.address}:${e.port}`}).then((n=>{(n.isInLAN&&!n.isLocalHost||n.isInDomainList)&&!Mw(Number(e.port))?Gw.get(this).connect(e):t.emit({errMsg:`connect fail: invalid address ${e.address}:${e.port}`,errCode:-4})})).catch((e=>{t.emit({errMsg:`connect fail: ${e.message||e.errMsg}`,errCode:-4})})):t.emit({errMsg:"connect fail: no permission",errCode:-3})}write(e){if(!(0,aa.J)("TCP")){return void(0,gr.s)(`jsbinding-tcp-${$w.get(this)}-error`).emit({errMsg:"write socket fail: no permission",errCode:-3})}ArrayBuffer.isView(e)&&(e=e.buffer);const t={message:e};Hw.get(this)&&(t.socketfd=Hw.get(this)),Gw.get(this).send(t)}close(){Hw.get(this)?Gw.get(this).close(Hw.get(this)):Gw.get(this).close()}}class zw extends Yw{constructor(){if(!Vw)return null;const e=Qw[Qw.length-20];if(e&&Date.now()-e<3e5)throw new h.iZ("[TCPSocket] created too much.");Qw.push(Date.now());const t=new Vw;if(null===t)return null;super(t)}}class qw{constructor(){if(!Vw)return null;const e=new Vw;if(null===e)return null;const t=Zw++,n={};["close","connection","error","listening"].forEach((r=>{const o=(0,gr.s)(`jsbinding-tcp-${t}-${r}`);"connection"===r?e.onaccept=t=>{const r=new Yw(e,t);n[t]=r,o.emit(r),e.recv(t)}:e[`on${r}`]=function(...t){if("close"===r){const e=t[0];if(n[e]){const t=$w.get(n[e]);return(0,gr.s)(`jsbinding-tcp-${t}-${r}`).emit(),void delete n[e]}}o.emit(...t),"listening"===r&&e.accept()},this[`on${(0,St.fm)(r)}`]=o.onMethod,this[`off${(0,St.fm)(r)}`]=o.offMethod})),Gw.set(this,e)}listen(e){const t=Gw.get(this);return t.onbind=function(){t.listen(10)},t.bind(e)}close(){Gw.get(this).close()}}const Jw=()=>k.gm?new jw:new zw;const Kw=e=>{if(!(0,u.r3)("requestPayment",e,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""}))return;e=Object.assign({},e);const t=(0,si.Zv)();e.passCookies&&"string"==typeof e.passCookies?e.cookie=t?e.passCookies+";; "+t:e.passCookies:t?e.cookie=t:delete e.cookie,delete e.passCookies,e.cookie,(0,u.IN)("requestPayment",Object.assign({},e,{grantMessageQuota:!0}),{beforeSuccess:()=>{(0,da.L)("reportPaymentFormId",{packageStr:e.package}),(0,Y.Hk)()}})};var Xw=c(4055);var eC=c(3935);var tC=c(1532);var nC=c(7343);const rC="webapi_getenteroptions_sensitivetype",oC=e=>wxNativeConsole.info(rC+" "+e),iC=(0,Ii.Ce)(!1,"getInnerEnterOptions",!0),aC=Object.prototype.hasOwnProperty,sC=Object.assign,cC=[{name:"chooseAddressForPlugin",factory:()=>function(e={}){(e=>{(0,u.IN)("openAddress",e,{beforeSuccess(e){(0,h.dK)(e,"addressPostalCode","postalCode"),(0,h.dK)(e,"proviceFirstStageName","provinceName"),(0,h.dK)(e,"addressCitySecondStageName","cityName"),(0,h.dK)(e,"addressCountiesThirdStageName","countyName"),(0,h.dK)(e,"addressDetailInfo","detailInfo")},beforeAll(e){e.errMsg=e.errMsg.replace("openAddress","chooseAddressForPlugin"),delete e.err_msg}})})(e)},permissionBytes:["chooseAddressForPlugin"],copyToWx:!0},{name:"openSettingForPlugin",factory:()=>function(e={}){((e={})=>{(0,u.IN)("openSetting",e,{beforeSuccess(e){const t=e.authSetting||[];e.authSetting=t.reduce(((e,t)=>(e[t.scope]=1===t.state,e)),{})}})})(e)},permissionBytes:["openSettingForPlugin"],copyToWx:!0},{name:"requestPaymentForPlugin",factory:()=>function(e={}){(e=>{(0,as.$x)((t=>{const n=(+new Date-(t||0))/1e3/60;let r=!1,o="";const i=oe.Z&&oe.Z.appContactInfo&&oe.Z.appContactInfo.operationInfo&&oe.Z.appContactInfo.operationInfo.jsonInfo&&oe.Z.appContactInfo.operationInfo.jsonInfo.warning_info&&oe.Z.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];i&&i.forEach((e=>{"requestPayment"===e.jsapi_name&&e.wording&&(r=!0,o=e.wording)})),r&&n>30?(0,ua._showModal)({content:o,confirmText:"继续支付",cancelText:"取消",success(t){t.confirm&&((0,as.Xs)(+new Date),Kw(e))}}):Kw(e)}))})(e)},permissionBytes:["requestPaymentForPlugin"],copyToWx:!0},{name:"chooseAddressDirectly",factory:e=>function(t){!function(e,t){(0,Ii.KS)({pluginId:e,apiName:"GetPluginAuthScope",reqData:{scope_list:["scope.eCommercePluginAuths"]},fail(){t(!1)},success(e){const n=JSON.parse(e.respData.data).auth_item_list.find((e=>"scope.eCommercePluginAuths"===e.scope));t(!!n&&n.state&&1===n.state)}})}(e,(e=>{e?(0,da.L)("chooseAddressDirectly",{},void 0,(e=>{0===e.errMsg.indexOf("chooseAddressDirectly:ok")?t.success&&t.success(e):t.fail&&t.fail(e),t.complete&&t.complete(e)})):(0,p.YG)("chooseAddressDirectly",t,"no permission")}))},permissionBytes:[],copyToWx:!0},{name:"enterContactForPlugin",factory:()=>function(e={}){e.permissionBytes=[1,1,1],(0,da.L)("appServiceEnterContact",e,void 0,(t=>{t.errMsg&&(t.errMsg=t.errMsg.replace("enterContact","enterContactForPlugin"));0===t.errMsg.indexOf("enterContactForPlugin:ok")?e.success&&e.success(t):e.fail&&e.fail(t),e.complete&&e.complete(t)}))},permissionBytes:["enterContactForPlugin"],copyToWx:!0},{name:"openUrl",factory:()=>function(e){e.isNativeStyle=!0,(0,u.IN)("private_openUrl",e,{beforeAll(e){e.errMsg=e.errMsg.replace("private_openUrl","openUrl")}})},permissionBytes:["openUrlForPlugin"],copyToWx:!0},{name:"setLoginAuth",factory:e=>function(t){t.pluginId=e,t.appId=oe.Z.accountInfo.appId,(0,da.L)("setPluginLoginAuth",t,void 0,(e=>{0===e.errMsg.indexOf("setLoginAuth:ok")?t.success&&t.success(e):t.fail&&t.fail(e),t.complete&&t.complete(e)}))},permissionBytes:["setLoginAuthForPlugin"],copyToWx:!0},{name:"navigateBackNative",factory:e=>function(t={}){let n="";(0,O.Kn)(t.extraData)&&(n=JSON.stringify(t.extraData)),(0,u.qu)(e)("navigateBackNative",Object.assign({},t,{extraData:n}))},permissionBytes:["navigateBackNative"],copyToWx:!0},{name:"setNavigationBarRightButton",factory:e=>function(t={}){(0,u.r3)("setNavigationBarRightButton",t,{hide:!0})&&(0,u.qu)(e)("setNavigationBarRightButton",t,{})},permissionBytes:["setNavigationBarRightButton"],copyToWx:!0},{name:"openAddressWithLightMode",factory:e=>function(t={}){(0,u.qu)(e)("openAddressWithLightMode",t,{beforeSuccess(e){(0,h.dK)(e,"addressPostalCode","postalCode"),(0,h.dK)(e,"proviceFirstStageName","provinceName"),(0,h.dK)(e,"addressCitySecondStageName","cityName"),(0,h.dK)(e,"addressCountiesThirdStageName","countyName"),(0,h.dK)(e,"addressDetailInfo","detailInfo")},beforeAll(e){delete e.err_msg}})},permissionBytes:["openAddressWithLightMode"],copyToWx:!0},{name:"editTextWithPopForm",factory:e=>function(t={}){(0,u.qu)(e)("editTextWithPopForm",t,{})},permissionBytes:["editTextWithPopForm"],copyToWx:!0},{name:"navigateToMiniProgramDirectly",factory:()=>function(e){(0,Y.iy)(e,e,{beforeAll(e){e.errMsg=e.errMsg.replace("navigateToMiniProgram","navigateToMiniProgramDirectly")}})},permissionBytes:["navigateToMiniProgramDirectly"],copyToWx:!0},{name:"getInnerEnterOptions",factory:e=>(t={})=>{const n=(0,nC._X)();n.sessionid=n.sessionid||n.sessionId,delete n.sessionId,((e,t,n)=>{const r={app_info_list:[{appid:e,scene:t}]};oC("reqData="+JSON.stringify(r)),iC({pluginId:e,apiName:rC,reqData:r,complete(e){oC("respData="+JSON.stringify(e))},fail(e){n(e.errmsg)},success(r){let o;try{o=JSON.parse(r.respData.data)}catch(e){return void n("system error")}const i=(o.sensitive_type_data_list||[]).find((n=>n.appid===e&&n.scene===t)),a=i?i.sensitive_type_list:[];{const e=a.indexOf("sessionId");-1!==e&&(a[e]="sessionid")}n(null,a||[])}})})(e,n.scene,((e,r)=>{let o={};e||(o=sC(n.__public),r.forEach((e=>{aC.call(n,e)&&(o[e]=n[e])}))),(0,p.FE)({name:"getInnerEnterOptions",args:t,success:!e,errMsg:e,res:o})}))},permissionBytes:["private_getEnterOptions"],copyToWx:!1},{name:"chooseInvoiceTitleDirectly",factory:()=>function(e={}){(0,Xw.n)((0,hr.qS)(e,"chooseInvoiceTitle","chooseInvoiceTitleDirectly"))},permissionBytes:["private_chooseInvoiceTitleDirectly"],copyToWx:!1},{name:"getPhoneNumberDirectly",factory:()=>(e={})=>{(0,da.L)("getPhoneNumber",Object.assign({permissionBytes:[1,1,1]},e),void 0,(t=>{"string"==typeof t.public.errMsg&&(t.public.errMsg=t.public.errMsg.replace(/^getPhoneNumber:/,"getPhoneNumberDirectly:")),(0,tC.F0)(t.public,"getPhoneNumberDirectly",e,{})}))},permissionBytes:["private_getPhoneNumberDirectly"],copyToWx:!1},{name:"openCardDirectly",factory:()=>function(e={}){(0,eC.H)((0,hr.qS)(e,"openCard","openCardDirectly"))},permissionBytes:["private_openCardDirectly"],copyToWx:!1},{name:"launchTrialMiniProgram",factory:()=>function(e){const t=(0,mg.Qc)("https://open.weixin.qq.com/sns/checktpbetaplugintoken");t.query={appid:String(e.appid),token:String(e.token)},e.extraData&&(t.query.extraData=JSON.stringify(e.extraData));const n={url:t.format(),isNativeStyle:!0};(0,u.IN)("private_openUrl",n,{beforeAll(e){e.errMsg=e.errMsg.replace("private_openUrl","launchTrialMiniProgram")}})},permissionBytes:["private_launchTrialMiniProgram"],copyToWx:!1},{name:"navigateToDevMiniProgram",factory:e=>(t={})=>{vi(t,e)},permissionBytes:[],copyToWx:!1},{name:"createTCPServer",factory:()=>(e={})=>{const t=k.gm?new Uw:new qw;e.success&&e.success(t),e.complete&&e.complete(t)},permissionBytes:["TCPServer"],copyToWx:!1}],lC=(e,t,n)=>{const{ifIsNot:r}=__safeway__.pluginPermissionBytes;Promise.all((t||[]).map((t=>(t=>new Promise((n=>r(e,t,0,n))))(t)))).then((e=>{n(e.every((e=>e)))}))},dC=(e={})=>{(0,u.r3)("getRandomValues",e,{length:0})&&((!Number.isInteger(e.length)||e.length<=0||e.length>1048576)&&(0,u.YG)("getRandomValues",e,"invalid length"),(0,u.IN)("getRandomValues",e))},uC=new Set,pC=new WeakMap,hC="service",fC="plugin",gC={[hC]:0,[fC]:0},_C={add(e,t){uC.add(e),pC.set(e,t),gC[t]++},remove(e){const t=pC.get(e);uC.delete(e)&&(pC.delete(e),gC[t]--)},get size(){return uC.size},getSizeByType:e=>gC[e]},mC="function"==typeof wxNativeConsole?wxNativeConsole.createLogger("SharedArrayBuffer"):wxConsole,yC=0,vC=1,AC=2,bC=new WeakMap,wC=new Map;let CC=ArrayBuffer;const IC="undefined"==typeof WeixinSharedBuffer?{}:WeixinSharedBuffer;"undefined"==typeof WeixinSharedBuffer&&("undefined"!=typeof __global?CC=__global.SharedArrayBuffer:c.g.SharedArrayBuffer&&(CC=c.g.SharedArrayBuffer));class EC{constructor(e,t){if(mC.log(`constructor length=${e}, sabId=${t}`),!(0,O.hj)(e)||e<0)throw new h.iZ(`Invalid array buffer length ${e}`);if((0,O.hj)(t)){let e;mC.info(`get buffer with sabId: ${t}`);try{e=IC.get(t)}catch(e){throw mC.error(`WeixinSharedBuffer.get${t} fail: ${e.message}`),new Error(`WeixinSharedBuffer.get${t} fail: ${e.message}`)}Object.defineProperty(this,"buffer",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(this,"_sabId",{value:t,enumerable:!0,writable:!1})}else{mC.info(`new ArrayBuffer with length: ${e}`),Object.defineProperty(this,"buffer",{value:new CC(e),writable:!1,enumerable:!0});const t=IC.new(this.buffer);mC.info(`sabId: ${t}`),Object.defineProperty(this,"_sabId",{value:t,enumerable:!0,writable:!1})}const n={writeStatus:yC,readStatus:yC,writeLockCallbacks:[],readLockCallbacks:[],writeLockId:void 0,readLockId:void 0,destroyed:!1};bC.set(this,n),wC.set(this._sabId,this),mC.log(`[${this._sabId}] created:`,this.buffer)}destroy(){mC.warn(`[${this._sabId}][destroy()]`);const e=bC.get(this);e.writeLockCallbacks=[],e.readLockCallbacks=[],wC.delete(this._sabId),bC.get(this).destroyed=!0,this.unlock(),IC.destroy(this._sabId)}lock(e,t=!1){const n=bC.get(this),{destroyed:r,writeStatus:o,readStatus:i,writeLockCallbacks:a,readLockCallbacks:s}=n;if(r)throw new h.iZ("SharedArrayBuffer has been destroyed");if(!(0,O.mf)(e))throw new h.iZ("callback must be a function");o!==AC?(a.push(e),o===vC||(n.writeStatus=vC,n.writeLockId=IC.Lock(this._sabId,(()=>{a.forEach((e=>e())),s.forEach((e=>e())),n.writeStatus=AC,n.writeLockCallbacks=[],n.readLockCallbacks=[]})))):e()}unlock(){const e=bC.get(this),{writeLockId:t,readLockId:n,writeStatus:r,readStatus:o,destroyed:i}=e;i?console.warn("unlock: SharedArrayBuffer has been destroyed"):(r!==vC&&r!==AC||(IC.Unlock(this._sabId,t),e.writeStatus=yC,e.writeLockId=void 0,e.writeLockCallbacks=[]),o!==vC&&o!==AC||(IC.Unlock(this._sabId,n),e.readStatus=yC,e.readLockId=void 0,e.readLockCallbacks=[]))}}const SC=e=>{return mC.log("[unpackSharedArrayBuffer]",e),(0,O.Kn)(e)?(mC.log("[unpackSharedArrayBuffer] isObject"),(0,O.hj)(e._sabId)?(mC.info("[unpackSharedArrayBuffer] sabId is number"),t=e._sabId,mC.info(`[getSharedArrayBuffer] sabId=${t}`),wC.has(t)?(mC.info("[getSharedArrayBuffer] return existed object"),wC.get(t)):(mC.info("[getSharedArrayBuffer] return new object"),new EC(0,t))):Object.keys(e).reduce(((t,n)=>{const r=e[n];return t[n]=SC(r),t}),{})):(0,O.kJ)(e)?e.map(SC):e;var t},TC=new WeakMap,xC=new WeakMap,kC=new WeakMap,PC={},DC={},OC={},NC=new WeakMap,RC=new WeakMap;let MC=0;const LC={};function BC(e,t,n=++MC){return OC[e]?(LC[e]||(LC[e]=[]),LC[e].push({id:n,callback:t})):(OC[e]=n,t()),n}function FC(e,t){if(OC[e]===t&&(delete OC[e],LC[e]&&LC[e].length)){const{id:t,callback:n}=LC[e].shift();BC(e,n,t)}}if(!IC.new){let e=0;Object.assign(IC,{new(t){const n=++e;return DC[n]=t,Object.keys(PC).forEach((e=>{const r=TC.get(PC[e]);__safeway__.worker.postMsgToWorker(r,{__cmd__:"setSharedBuffer",__buffer__:t,__id__:n},!1)})),n},get:e=>DC[e],destroy(e){delete DC[e]},Lock:BC,Unlock:FC})}__safeway__.worker.onWorkerMsg(((e,t)=>{const n=PC[e],r=xC.get(n),o=RC.get(n);if(t.__log__&&t.logs)(e=>{e.__isNativeConsole__?wxNativeConsole[e.level](...e.logs):console[e.level](...e.logs)})(t);else{if("setSharedBuffer"===t.__cmd__)return DC[t.__id__]=t.__buffer__,void Object.keys(PC).forEach((n=>{const r=TC.get(PC[n]);r!==e&&__safeway__.worker.postMsgToWorker(r,t,!1)}));if("lockSharedBuffer"!==t.__cmd__)if("unlockSharedBuffer"!==t.__cmd__){if(n&&"function"==typeof r)if(o&&o.useWKWorker){if("requireScriptSuccess"===t.__cmd__){const e=NC.get(n);return void(e&&e.evaluateWorkerScriptPromiseResolve&&e.evaluateWorkerScriptPromiseResolve())}if("readFile"===t.__cmd__)return void sp.t2.readFile({filePath:t.filePath,success:({data:n})=>__safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,result:String.fromCharCode(...new Uint16Array(n))}),fail:({errMsg:n})=>__safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,errMsg:n})});r(t.data)}else r(SC(t))}else FC(t.__sid__,t.__lid__);else BC(t.__sid__,(()=>n.postMessage(t)),t.__lid__)}}));const WC=function(e,t){this.postMessage({__cmd__:"requireScript",__script__:e,__id__:TC.get(this),__options__:t})},jC=function(){let e;const t=new Promise((t=>{e=t}));NC.set(this,{evaluateWorkerScriptPromise:t,evaluateWorkerScriptPromiseResolve:e})};class UC{constructor(e,t,n={useWKWorker:!1,contextType:"",pluginId:""}){TC.set(this,e),RC.set(this,n),PC[e]=this,this._id=e,n.useWKWorker?jC.call(this):WC.call(this,t,{pluginId:n.pluginId}),_C.add(this,n.contextType)}postMessage(e){const t=TC.get(this),n=NC.get(this),r=RC.get(this);r&&r.useWKWorker&&n?n.evaluateWorkerScriptPromise.then((()=>{__safeway__.worker.postMsgToWorker(t,{data:e,appid:oe.Z.accountInfo.appId})})):__safeway__.worker.postMsgToWorker(t,e)}onMessage(e){xC.set(this,e)}terminate(){const e=TC.get(this),t=RC.get(this);t&&t.useWKWorker?__safeway__.worker.postMsgToWorker(e,{__cmd__:"terminate",appid:oe.Z.accountInfo.appId}):__safeway__.worker.terminate(e),_C.remove(this),TC.delete(this),xC.delete(this),NC.delete(this),kC.delete(this),RC.delete(this),delete PC[e]}onProcessKilled(e){kC.set(this,e)}}(0,u.jQ)("onWorkerWebViewTerminate",(()=>{Object.keys(PC).forEach((e=>{const t=PC[e],n=RC.get(t);if(n&&n.useWKWorker){const n=kC.get(t);_C.remove(t),TC.delete(t),xC.delete(t),NC.delete(t),kC.delete(t),RC.delete(t),delete PC[e],"function"==typeof n&&__errorTracer__.surroundThirdByTryCatch(n,"at Worker.onProcessKilled callback function")(),Reporter.reportIDKey({key:"onWorkerWebViewTerminate"})}}))}));let VC=1;oe.Z.onReady((()=>{try{"number"==typeof oe.Z.wxAppInfo.maxWorkerConcurrent&&(VC=oe.Z.wxAppInfo.maxWorkerConcurrent)}catch(e){}}));const GC=function(e,t={}){const{useExperimentalWorker:n}=t,r={workerUrl:e,appid:oe.Z.accountInfo.appId,useExperimentalWorker:n&&(0,aa.J)("WeAppWorker")};let o="workers.js",i=hC;const a=(0,hr.Ur)(this);if(a&&(o=(0,h.S0)(`plugin-private://${a}/workers.js`),i=fC,r.pluginId=a),_C.getSizeByType(i)>=VC)throw new Error("createWorker: exceed max concurrent workers limit.");const{workerId:s,useWKWorker:c}=__safeway__.worker.create(o,r);if(setTimeout((()=>{Reporter.reportIDKey({key:c?"createWKWorker":"createNormalWorker"})}),0),s>0)return new UC(s,e,{useWKWorker:c,contextType:i,pluginId:r.pluginId});throw-1===s?new Error(`createWorker: Worker "${e}" does not exists.`):new Error("createWorker: unknown error.")};var $C=c(1425);const HC=Qc,ZC=Yc.oK,QC=Yc.j8,YC=ke,zC=qc,qC=zc,JC=Jc,KC=Kc,XC=hn.I9,eI=hn.EO,tI=hn.zU,nI=hn.FE,rI=hn.hv,oI=xn,iI=kn,aI=Tn,sI=fn,cI=gn,lI=vn,dI=An,uI=bn,pI=Xc,hI=Un,fI=Vn,gI=Gn,_I=$n,mI=Hn,yI=Qn,vI=Yn,AI=zn,bI=ua.hideToast,wI=ua.showLoading,CI=ua.hideLoading,II=ua.showModal,EI=ua.showActionSheet,SI=fa,TI=ga,xI=_a,kI=Aa,PI=ba,DI=wa,OI=Ca,NI=bw.dv,RI=bw.KQ,MI=bw.rf,LI=bw.hx,BI=bw.R0,FI=ni.T8,WI=ni.gB,jI=ni.n,UI=ni.MR,VI=ni.UY,GI=Y.Be,$I={getAccountInfoSync:function(){const e=(0,a_.E)(),t=(0,hr.hI)(this);return e.plugin={appId:t||"",version:s_(ci.Z.pluginInfos[t].customVersion)},e},request:Gg.request,uploadFile:Gg.uploadFile,downloadFile:Gg.downloadFile,connectSocket:Gg.connectSocket,getStorage:e_.getStorage,getStorageSync:e_.getStorageSync,removeStorage:e_.removeStorage,removeStorageSync:e_.removeStorageSync,setStorage:e_.setStorage,setStorageSync:e_.setStorageSync,createAudioContext:n_.createAudioContext,createCameraContext:n_.createCameraContext,createMapContext:n_.createMapContext,createVideoContext:n_.createVideoContext,createInnerAudioContext:n_.createInnerAudioContext,createLivePlayerContext:n_.createLivePlayerContext,createLivePusherContext:n_.createLivePusherContext,createSelectorQuery:function(e){return Us(e,(0,hr.hI)(this))},createIntersectionObserver:function(e,t){return Hs(e,t,(0,hr.hI)(this))},createMediaQueryObserver:function(e,t){return zs(e,t,(0,hr.hI)(this))},nextTick:function(e){return Xs(e)},createCanvasContext:i_.createCanvasContext,createOffscreenCanvas:i_.createOffscreenCanvas,drawCanvas:i_.drawCanvas,canvasToTempFilePath:i_.canvasToTempFilePath,canvasGetImageData:i_.canvasGetImageData,canvasPutImageData:i_.canvasPutImageData,createAnimation:Ga,reportAnalytics:function(e,t){const n={business:"mmbizwxaanalytics",eventID:e,data:t||{},uid:Date.now().toString(16)+Math.random().toString(16).substr(2),type:1,version:c_.c,pluginId:(0,hr.hI)(this),pluginVersion:(0,hr.hb)(this)};(0,u.IN)("reportRealtimeAction",{actionData:JSON.stringify(n)})},chooseImage:XC,chooseMedia:ur,previewImage:eI,getImageInfo(e){return tI(e,Gg.downloadFile.bind(this))},saveImageToPhotosAlbum:nI,compressImage:rI,startRecord:oI,stopRecord:iI,getRecorderManager:aI,playVoice:lI,pauseVoice:dI,stopVoice:uI,getBackgroundAudioManager:jn,setInnerAudioOption:Jn,chooseVideo:sI,saveVideoToPhotosAlbum:cI,createMediaContainer:Or,createMediaRecorder:so,createVideoDecoder:Gr,createMediaAudioPlayer:ar,createWorker:GC,getLocation:ps,openLocation:gs,chooseLocation:hs,choosePoi:fs,onLocationChange:ms,offLocationChange:ys,onLocationChangeError:As,offLocationChangeError:bs,startLocationUpdate:ws,stopLocationUpdate:Cs,getNetworkType:gc.getNetworkType,onNetworkStatusChange:gc.onNetworkStatusChange,offNetworkStatusChange:gc.offNetworkStatusChange,getSystemInfo:wi.So,getSystemInfoSync:wi.xI,startAccelerometer:yc,stopAccelerometer:vc,onAccelerometerChange:wc,offAccelerometerChange:bc,startCompass:Ec,stopCompass:Sc,onCompassChange:kc,offCompassChange:xc,getClipboardData:Fc,setClipboardData:Wc,makePhoneCall:Pc,makeVoIPCall:Dc,startGyroscope:Yd,stopGyroscope:zd,onGyroscopeChange:qd,offGyroscopeChange:Jd,startDeviceMotionListening:Xd,stopDeviceMotionListening:eu,onDeviceMotionChange:tu,offDeviceMotionChange:nu,scanCode:Nc,scanItem:Lc,makeBluetoothPair:$l,openBluetoothAdapter:nl,closeBluetoothAdapter:rl,getBluetoothAdapterState:ol,onBluetoothAdapterStateChange:Sl,offBluetoothAdapterStateChange:Tl,startBluetoothDevicesDiscovery:il,stopBluetoothDevicesDiscovery:al,getBluetoothDevices:sl,getConnectedBluetoothDevices:ll,createBLEConnection:dl,closeBLEConnection:ul,getBLEDeviceServices:pl,getBLEDeviceCharacteristics:hl,getBLEDeviceRSSI:cl,setBLEMTU:xl,getHCEState:id,startHCE:ad,stopHCE:sd,sendHCEMessage:cd,onHCEMessage:ld,offHCEMessage:dd,getNFCAdapter:Od,notifyBLECharacteristicValueChanged:fl,notifyBLECharacteristicValueChange:gl,readBLECharacteristicValue:_l,writeBLECharacteristicValue:ml,onBluetoothDeviceFound:Il,offBluetoothDeviceFound:El,onBLEConnectionStateChanged:yl,offBLEConnectionStateChanged:vl,onBLEConnectionStateChange:Al,offBLEConnectionStateChange:bl,onBLECharacteristicValueChange:wl,offBLECharacteristicValueChange:Cl,startBeaconDiscovery:jc,stopBeaconDiscovery:Uc,getBeacons:Vc,onBeaconUpdate:Gc,offBeaconUpdate:$c,onBeaconServiceChange:Hc,offBeaconServiceChange:Zc,startWifi:Hl,stopWifi:Zl,getWifiList:Ql,getConnectedWifi:Yl,connectWifi:zl,presetWifiList:ql,setWifiList:Jl,onGetWifiList:Kl,onWifiConnected:ed,offGetWifiList:Xl,offWifiConnected:td,onEvaluateWifi:od,addPhoneCalendar:iu,addPhoneRepeatCalendar:au,getRandomValues:dC,captureScreen:HC,onUserCaptureScreen:ZC,offUserCaptureScreen:QC,setKeepScreenOn:YC,setScreenBrightness:zC,getScreenBrightness:qC,vibrateShort:JC,vibrateLong:KC,addPhoneContact:pI,login:function(e={}){const t=Object.assign({},e,{miniprogram_appid:oe.Z.accountInfo.appId});vw.call(this,{apiName:"webapi_plugin_login",reqData:t,success:t=>{Object.assign(t,JSON.parse(t.respData.data)),delete t.respData,"function"==typeof e.success&&e.success(t)},fail:e.fail,complete:e.complete})},getUserInfo:function(e={}){const t=Object.assign({},e,{miniprogram_appid:oe.Z.accountInfo.appId});Aw.call(this,{apiName:"webapi_plugin_getuserinfo",reqData:t,success:t=>{t.userInfo=JSON.parse(t.respData.data),t.iv=t.respData.iv,t.signature=t.respData.signature,delete t.respData,"function"==typeof e.success&&e.success(t)},fail:e.fail,complete:e.complete})},getNativeUserInfo:function(e={}){const t=(0,hr.hI)(this);e.pluginId=t,yw(e)},openSetting:ia.as,getSetting:function(e={}){const t=Object.assign({},e,{miniprogram_appid:oe.Z.accountInfo.appId,filter_auth_status:1,with_app_auth:!0});Cw.call(this,{apiName:"webapi_getwxapluginuserscope",reqData:t,success:t=>{const n=JSON.parse(t.respData.data),r={errMsg:"getSetting:ok"};r.authSetting=(n.auth_item||[]).reduce(((e,t)=>(e[t.scope]=1===t.auth_status,e)),{}),n.user_all_app_auth&&(r.miniprogramAuthSetting=(0,mw.O)(n.user_all_app_auth).authSetting||{}),"function"==typeof e.success&&e.success(r),"function"==typeof e.complete&&e.complete(r)},fail:t=>{const n={errMsg:t.errMsg||"getSetting:fail"};"function"==typeof e.fail&&e.fail(n),"function"==typeof e.complete&&e.complete(n)}})},operateWXData:function(e={}){const t=(0,hr.hI)(this);e.pluginId=t,(0,Ii.KS)(e)},requestFacetoFacePayment:ia.mG.jo,requestPersonalPay:ia.mG.Jp,showModal:II,showToast:function(e={}){if(e.image){if(0!==e.image.indexOf("/"))return void(0,u.YG)("showToast",e,"parameter 'image' must be begin with '/'");const t=(0,hr.hI)(this);e=Object.assign({},e,{image:o.getPluginRoutePrefix(t)+e.image.substr(1)})}ua.showToast(e)},hideToast:bI,showLoading:wI,hideLoading:CI,showActionSheet:EI,pageScrollTo:Na,setPageStyle:Fa,setPageOrientation:Ha,startPullDownRefresh:Ra,stopPullDownRefresh:Ma,setNavigationBarTitle:SI,showNavigationBarLoading:TI,hideNavigationBarLoading:xI,setNavigationBarColor:kI,setNavigationBarAlpha:PI,setNavigationBarRightButton:DI,onTapNavigationBarRightButton:OI,getShareInfo:NI,showShareMenu:RI,hideShareMenu:MI,updateShareMenu:LI,showShareImageMenu:BI,setBackgroundColor:Qa,setBackgroundTextStyle:Ya,navigateTo:FI,redirectTo:WI,navigateBack:jI,switchTab:UI,reLaunch:VI,getBackgroundAudioPlayerState:hI,playBackgroundAudio:fI,pauseBackgroundAudio:gI,seekBackgroundAudio:_I,stopBackgroundAudio:mI,onBackgroundAudioPlay:yI,onBackgroundAudioPause:vI,onBackgroundAudioStop:AI,setCookies:function(e){zb.call(this,si.Dk,(t=>{let n="setCookies:ok";if(t){const t=(0,si.zv)(e);t?(n=t,"function"==typeof e.fail&&e.fail({errMsg:n})):"function"==typeof e.success&&e.success({errMsg:n})}else n="setCookies:fail has no permission for setCookies API","function"==typeof e.fail&&e.fail({errMsg:n});"function"==typeof e.complete&&e.complete({errMsg:n})}))},getCookies:function(e){zb.call(this,si.KC,(t=>{let n="getCookies:ok";if(t){const t=(0,si.AJ)(e);"function"==typeof e.success&&e.success({errMsg:n,cookies:t})}else n="getCookies:fail has no permission for getCookies API","function"==typeof e.fail&&e.fail({errMsg:n});"function"==typeof e.complete&&e.complete({errMsg:n})}))},chooseShareGroup:jh,arrayBufferToBase64:__errorTracer__.surroundThirdByTryCatch(h.sM),base64ToArrayBuffer:__errorTracer__.surroundThirdByTryCatch(h.RG),openBusinessView:function(e={}){if(!(0,u.r3)("openBusinessView",e,{businessType:""}))return;const t=Object.assign({},e);delete t.sourcetype,delete t.preScene,delete t.preSceneNote,delete t.agentId,delete t.privateExtraData,delete t.scene,delete t.sceneNote,t.privateExtraData={__pluginAppId:(0,hr.hI)(this)},(0,u.IN)("openBusinessView",t)},joinVoIPChat:Kb,exitVoIPChat:Xb,updateVoIPChatMuteConfig:ew,onVoIPChatMembersChanged:nw,offVoIPChatMembersChanged:rw,onVoIPChatSpeakersChanged:ow,offVoIPChatSpeakersChanged:iw,onVoIPChatInterrupted:cw,offVoIPChatInterrupted:lw,subscribeVoIPVideoMembers:dw,onVoIPVideoMembersChanged:pw,offVoIPVideoMembersChanged:hw,onVoIPChatStateChanged:gw,offVoIPChatStateChanged:_w,createRewardedVideoAd:function(e){const t=(0,hr.hI)(this);return Zb(I()(I()({},e),{},{pluginId:t}))},createInterstitialAd:function(e){const t=(0,hr.hI)(this);return(e=>new Db(e))(I()(I()({},e),{},{pluginId:t}))},updateWeChatApp:pg,reportPerformance:function(e,t,n){const r=(0,hr.hI)(this),o=(0,hr.MX)(this);!function(e,t,n,r){vf(e,t,n,r)}(e,t,n,{pluginId:r,customVersion:o?o.customVersion:""})},getPerformance:function(){return function(e={}){const t=e.pluginId;return Jf.has(t)||Jf.set(t,new Yf(Ef,t)),Jf.get(t)}({pluginId:(0,hr.hI)(this)})},getLaunchOptionsSync:bi.Ir,getEnterOptionsSync:bi.rN,onThemeChange:bi.SM,offThemeChange:bi.hn,getVideoInfo:_n,compressVideo:mn,createUDPSocket:Nw,createTCPSocket:Jw,getRealtimeLogManager:function(...e){return((e,t,n)=>{n=n||{};const r="develop"===oe.Z.envVersion||"trial"===oe.Z.envVersion;return n.isClientReport=!r,Bh(n,e,t)})((0,hr.hI)(this),(0,hr.hb)(this),...e)},authorizeForMiniProgram:(e={})=>{(0,p.r3)("authorizeForMiniProgram",e,{scope:""})&&(ww.includes(e.scope)?(0,fe.o)({args:(0,hr.qS)(e,"authorize","authorizeForMiniProgram")}):(0,p.YG)("authorizeForMiniProgram",e,`scope "${e.scope}" is not supported to be authorized by plugin.`))},getPublicLibVersion:Ip,startLocalServiceDiscovery:Bd,stopLocalServiceDiscovery:Fd,onLocalServiceFound:Wd,offLocalServiceFound:jd,onLocalServiceLost:Ud,offLocalServiceLost:Vd,onLocalServiceDiscoveryStop:Gd,offLocalServiceDiscoveryStop:$d,onLocalServiceResolveFail:Hd,offLocalServiceResolveFail:Zd,loadFontFace:yn.nH,getBatteryInfo:hc,getBatteryInfoSync:fc,getAvailableAudioSources:qn,onAudioInterruptionBegin:mr,offAudioInterruptionBegin:yr,onAudioInterruptionEnd:Ar,offAudioInterruptionEnd:br,previewMedia:fr,openVideoEditor:lo,saveFileToDisk:Iw,openDocument:ap.KK,getMenuButtonBoundingClientRect:qa.z,version:"undefined"==typeof __libVersionInfo__?{version:"9.9.9"}:JSON.parse(JSON.stringify(__libVersionInfo__)),chooseAddress:ia.OO,chooseInvoice:ia.FH,chooseInvoiceTitle:ia.n7,publishWeChatState:ia.bO,navigateToMiniProgram:GI},HI=(()=>{const e={};return cC.forEach((t=>{t.copyToWx&&(e[t.name]=function(e){const n=(0,hr.hI)(this);((e,t)=>{const n=!0===oe.Z.debug,r="devtools"===oe.Z.platform;(n||r)&&console.warn(`wx.${e} is deprecated, and will be removed in future.`),(0,wn.v)(`${e} (${t})`)})(t.name,n),lC(n,t.permissionBytes,(r=>{r?t.factory(n)(e):(0,p.YG)(t.name,e,"no permission")}))})})),e})();Object.keys(HI).forEach((e=>{$I[e]=HI[e]}));const ZI=(e,t)=>new Jg($I,e,t),QI=()=>"undefined"==typeof BaseConsole?new __appServiceConsole__.BaseConsole:new BaseConsole,YI=e=>(0,$C.HK)(e);Lg();const zI=ci.Z.pluginInfos,qI={};oe.Z.onReady((()=>{"object"==typeof oe.Z.env&&(qI.USER_DATA_PATH=oe.Z.env.USER_DATA_PATH)}));const JI=qI;var KI=c(4616);const XI=function(e,t,n){for(const n in t){if("exportToAppServiceSDK"===n)return;e[n]=t[n]}["onPageReload"].forEach((r=>{t[r]&&(e[r]=e=>{t[r].call(n,e)})}))};function eE(e=""){const t=oe.Z.subpackages||oe.Z.subPackages||[];for(let n=0;n<t.length;n++){const r=t[n];if(0===e.indexOf(r.root))return r}return null}function tE(e=""){const t=eE(e);return!!(t&&t.independent&&t.isolated)}const nE={};(0,u.Ld)("media_banned",(e=>{const{index:t,permissionByte:n}=e;nE[t]=n}));const rE=()=>nE;var oE=c(8728);function iE(e,t,n,r=0){Reporter.reportKeyValue({key:"Handoff",value:[oe.Z.appType+1e3,oe.Z.appLaunchInfo.scene,e,t,n,r,(0,gc._getCurrentNetworkType)(),""].join(",")})}const aE=(e={})=>{const{path:t,fromButton:n}=e;n?(0,aa.J)("handoff")?(e=>{(0,u.IN)("checkHandoffEnabled",e)})({success({isEnabled:e,errCode:n}){e?(iE(2,2,2),(0,oE.lX)({apply:"在电脑端微信打开小程序",success(){iE(2,2,1),(0,u.IN)("startHandoff",{path:t,actionId:2},{beforeSuccess:()=>iE(2,1,1),beforeFail:({errCode:e})=>iE(2,1,0,e)})},fail(){iE(2,2,0)}})):iE(2,1,0,n)}}):console.warn("startHandOff:fail no permission"):(0,u.IN)("startHandoff",{path:t,actionId:1},{beforeSuccess:()=>iE(1,1,1),beforeFail:({errCode:e})=>iE(1,1,0,e)})},sE=(e,t)=>{(0,u.IN)("getAppConfig",e,t)},cE=function(e){(0,u.jQ)("onAppConfig",e)},lE=function(e){(0,u.jQ)("onPullDownRefresh",e)},dE=function(e){(0,u.jQ)("onShareAppMessage",e)},uE=function(e){(0,u.jQ)("onAddToFavorites",e)},pE=function(e){(0,u.jQ)("onStartHandoff",e)},hE=(e,t)=>{(0,u.IN)("addToFavorites",e,t)},fE=function(e){(0,u.jQ)("onTabItemTap",e)},gE=(e,t)=>{(0,u.nY)("analyticsConfig",e,t)},_E=(e,t)=>{(0,u.IN)("reportRealtimeAction",e,t)},mE=(e,t)=>{(0,u.IN)("shareAppMessage",e,t)},yE=(e,t)=>{(0,u.IN)("shareAppMessageDirectly",e,t)},vE=(e,t)=>{(0,u.IN)("shareAppMessageToSpecificContactDirectly",e,t)},AE=(e,t)=>{(0,u.IN)("shareAppMessageForFakeNative",e,t)},bE=(e,t)=>{(0,u.IN)("shareAppMessageToSpecificContactForFakeNativeDirectly",e,t)},wE=(e,t)=>{(0,u.IN)("checkHandoffEnabled",e,t)},CE=e=>{(0,u.Ld)("analyticsReport",e)},IE=e=>{(0,u.Ld)("recycleStatistics",e)},EE=e=>{(0,u.Ld)("savePageState",e)},SE=e=>{(0,u.Ld)("tapShareButton",e)},TE=e=>{(0,u.Ld)("tapHandoffButton",e)},xE=e=>{(0,u.Ld)("tapShareTimeLineButton",e)},kE=(e,t)=>{(0,u.IN)("showUpdatableMessageSubscribeButton",e,t)},PE=e=>(0,u.jQ)("onShareTimeline",e),DE=(e,t)=>(0,u.IN)("shareTimeline",e,t),OE=e=>(0,u.IN)("showShareTimelineMenu",e),NE=bi._X,RE=bi.LH,ME=bi.fA,LE=bi.i5,BE=bi.T7,FE=bi.JG,WE=bi.Xb,jE=bi.Tc,UE=bi.qQ,VE=bi.Ze,GE=bi.x9,$E=bi.yc,HE=bi.yP,ZE=ha,QE=ia.BN.KQ,YE=ia.BN.QY,zE=ia.BN.l7,qE=Sa,JE=Ta,KE=bi.HM,XE=bi.qS,eS=function(e){Ea.call(this,e)},tS=xa.Z,nS=(e,t)=>{(0,u.nY)("functionalPage",e,t)},rS=(e,t)=>{(0,u.nY)("pageScrollTo",e,t)},oS=(e,t)=>{(0,u.nY)("telecontrol",e,t)},iS=(e,t)=>{(0,u.nY)("__updateAppData",e,t)},aS=e=>{(0,u.Ld)("subjectChangeInfo",e)},sS=e=>{(0,u.gM)({data:{api_name:"webapi_report_data",data:e}})},cS=e=>{(0,u.Ld)("vdCallComponentMethodForWxs",e)},lS=()=>oe.Z.subPackages||oe.Z.subpackages,dS=e=>{const t=/^rgba?\((.+)\)/.exec(e);if(!t)return e;let n=t[1].split(",").map(((e,t)=>(e=e.trim(),1===(e=(e=3===t?Math.floor(255*parseFloat(e)):parseInt(e,10)).toString(16)).length&&(e=`0${e}`),e))).join("");return n=`#${n}`,n},uS=e=>{e.type=e.type||"play",(0,u.IN)("operateCallTone",e)},pS=e=>{(0,u.IN)("hasJoinVoIPChat",e)},hS={voip1v1:1},fS={};Object.keys(hS).forEach((e=>{fS[hS[e]]=e}));const gS=(e={})=>{if(!hS[e.msgType])return void(0,u.YG)("sendChannelMessage",e,"lock of message type");(0,Oc.Z)("sendChannelMessage","webapi_sendwxachannelmsg",{},{},(e=>({msg_type:hS[e.msgType],receiver_openid:e.receiver,msg_content:JSON.stringify(e.data||{})})),(e=>{delete e.rawData,e.msgId=e.msg_id,delete e.msg_id}))(e)},_S=(0,gr.s)("receiveMsgChannel"),mS=_S.onMethod;_S.offMethod;(0,u.jQ)("onReceiveMsgChannel",(e=>{e.msgType=fS[e.msgType],e.data=JSON.parse(e.msgContent),delete e.msgContent,_S.emit(e)}));const yS=["对方版本暂不支持发起视频通话","对方可能不在小程序内，建议稍后再次尝试","对方未接听","已接通","通话已取消","对方拒绝了您的视频通话请求","对方正在通话中，请稍后再播"],vS=["已接通","对方已挂断，通话结束","已拒绝，通话结束"],AS=["当前通话对方网络不佳","当前通话你的网络不佳","连接中断，通话结束","网络异常，通话结束","对方已挂断，通话结束","通话结束","对方已切换到语音通话，请使用听筒接听","已切换到语音通话，请使用听筒接听"],bS=["对方版本暂不支持发起语音通话","对方可能不在小程序内，建议稍后再次尝试","对方未接听","已接通","通话已取消","对方拒绝了您的语音通话请求","对方正在通话中，请稍后再播","对方设备未开启通话选项"],wS=["已接通，请使用听筒接听","对方已挂断，通话结束","已拒绝，通话结束"],CS=["当前通话对方网络不佳","当前通话你的网络不佳","连接中断，通话结束","网络异常，通话结束","对方已挂断，通话结束","通话结束","声音将通过扬声器播放","声音将通过听筒播放"],IS=(e=[],t={})=>{(0,O.Kn)(e)&&(e=Object.keys(e));const n={};return e.forEach((e=>{e in t&&void 0!==t[e]&&(n[e]=t[e])})),n},ES=new b.Z({maxListeners:2e5}),SS={onTextViewClick:"click",onImageViewClick:"click",onTextViewDrag:"drag",onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchCancel:"touchcancel"};Object.keys(SS).forEach((e=>{(0,w.n)(e,(t=>{const n=SS[e],r=JSON.parse(t.data).id;ES.emit(`${n}-${r}`,t)}))}));let TS=32768;class xS{constructor(e={}){const{props:t={},style:n={},position:r={},dataset:o={}}=e;this.parent=null,this.parentId=0,this.children={},this.events=[],this.id=++TS,this.props=t,this.style=n,this.position=r,this.dataset=o,this.bubbleHandler()}bubbleHandler(){["touchstart","touchmove","touchend","touchcancel","click"].forEach((e=>{this.on(e,(t=>{if(!this.props.bubbles||!this.parent)return;if(this.parent.props.transEvt)return;const n=this.position.left,r=this.position.top;if("click"===e){if(!this.parent.props.clickable)return;this.parent.emit(e)}else if("touchstart"===e||"touchend"===e){if(!this.parent.props.gesture)return;const o=Object.assign({},t.touch);o.x+=n,o.y+=r,o.id=this.parent.id,this.parent.emit(e,{viewId:this.parent.id,touch:o})}else{if(!this.parent.props.gesture)return;const o=t.touches.map((e=>({x:e.x+n,y:e.y+r,id:this.parent.id})));this.parent.emit(e,{viewId:this.parent.id,touches:o})}}))}))}getAbsolutePositon(){if(!this.parent)return{left:0,top:0};const e=this.parent.getAbsolutePositon(),{left:t,top:n}=this.position;return{left:t+e.left,top:n+e.top}}hide(){return this.props.hide=!0,this.update()}show(){return this.props.hide=!1,this.update()}insert(){const e=this.insertView(),t=[];return Object.keys(this.children).forEach((e=>{const n=this.children[e];t.push(n.insert())})),Promise.all([e,...t]).then((()=>{this.emit("ready")}),(e=>{this.emit("ready")}))}update(){return this.updateView()}remove(){this.parent&&this.parent.removeChild(this);const e=[];Object.keys(this.children).forEach((t=>{const n=this.children[t];this.removeChild(n),e.push(n.remove())})),this.removeListeners();const t=this.removeView();return Promise.all([t,...e]).catch((e=>{}))}insertView(){return Promise.resolve()}updateView(){return Promise.resolve()}removeView(){return Promise.resolve()}removeListeners(){this.events.forEach((e=>{ES.removeAllListeners(`${e}-${this.id}`)}))}appendChild(e){e.parent=this,e.parentId=this.id,this.props.independent&&(e.props.independent=!0),this.children[e.id]=e}empty(){Object.keys(this.children).forEach((e=>{const t=this.children[e];this.removeChild(t),t.remove()}))}removeChild(e){delete this.children[e.id],e.parent=null,e.parentId=0}emit(e,t){ES.emit(`${e}-${this.id}`,t)}on(e,t){ES.on(`${e}-${this.id}`,t)}off(e,t){ES.off(`${e}-${this.id}`,t)}once(e,t){ES.once(`${e}-${this.id}`,t)}}var kS;let PS=(kS=class extends xS{constructor(e={}){super(e);const t=this.getDefaultProps(),n=this.getDefaultLabel(),r=this.getDefaultStyle();this.events=["click","drag","touchstart","touchmove","touchend","ready"],this.style.backgroundColor&&(this.style.bgColor=this.style.backgroundColor);const o=this.props.label;this.style=Object.assign(r,IS(r,this.style)),this.props=Object.assign(t,IS(t,this.props)),this.label=Object.assign(n,IS(n,o)),this.label.lineHeight=this.label.lineHeight||1.2*this.label.fontSize}getDefaultProps(){return{hide:!1,clickable:!1,gesture:!1,transEvt:!1,sendTo:"appservice",fullscreen:!1,independent:!1,bubbles:!1,draggable:!1,dragConfig:{}}}getDefaultLabel(){return{content:"",color:"#000000",fontSize:12,textAlign:"left",fontWeight:"normal",lineHeight:0,lineBreak:"clip",whiteSpace:"nowrap"}}getDefaultStyle(){return{bgColor:"#ffffff00",borderRadius:0,borderWidth:0,borderColor:"#000000",padding:[0,0,0,0],opacity:1,overflow:"hidden",rotate:0,scaleX:1,scaleY:1,zIndex:0,fixed:!1}}insertView(e){const t={parentId:this.parentId,viewId:this.id,position:this.position,hide:this.props.hide,draggable:this.props.draggable,dragConfig:this.props.dragConfig,clickable:this.props.clickable,gesture:this.props.gesture,transEvt:this.props.transEvt,sendTo:this.props.sendTo,data:JSON.stringify({id:this.id}),label:this.label,fullscreen:this.props.fullscreen,independent:this.props.independent,zIndex:this.style.zIndex,fixed:this.style.fixed,style:this.style,notCoverRect:!0};Object.assign(t,e),(0,u.IN)("insertTextView",t)}updateView(e){const t={viewId:this.id,position:this.position,hide:this.props.hide,label:this.label,independent:this.props.independent,style:this.style,fixed:this.style.fixed,zIndex:this.style.zIndex,notCoverRect:!0,draggable:this.props.draggable,dragConfig:this.props.dragConfig};Object.assign(t,e);(0,u.IN)("updateTextView",t,{beforeFail(e){}})}removeView(e){const t=Object.assign({independent:this.props.independent,viewId:this.id},e);(0,u.IN)("removeTextView",t,{beforeFail(e){}})}animate(e){const t=this,n={duration:300,easing:"linear",viewId:this.id,finalStyle:{},independent:this.props.independent},r=Object.assign(n,e);(0,u.IN)("animateCoverView",r,{beforeSuccess(){Object.keys(r.finalStyle).forEach((e=>{e in t.position?t.position[e]=r.finalStyle[e]:e in t.style&&(t.style[e]=r.finalStyle[e])}))},beforeFail(e){wxNativeConsole.error("animateView fail",t.id,r,e)}})}measureText(e=""){let t=0;const n={text:e,fontSize:this.label.fontSize,fontWeight:this.label.fontWeight,fontStyle:"normal",fontFamily:"sans-serif",complete(e){t=e.width||0}};return(0,u.IN)("measureText",n),t}fadeIn(e=300,t="linear"){return this.show().then((()=>this.animate({finalStyle:{opacity:1},duration:e,easing:t})))}fadeOut(e=300,t="linear"){return this.animate({finalStyle:{opacity:0},duration:e,easing:t}).then((()=>this.hide()))}fadeTo(e,t=300,n="linear"){return this.animate({finalStyle:{opacity:e},duration:t,easing:n})}slideUp(e=300,t="linear"){return this.animate({finalStyle:{height:0},duration:e,easing:t})}slideDown(e=300,t="linear"){const n=this.position.height;return this.position.height=0,this.update(),this.animate({finalStyle:{height:n},duration:e,easing:t})}},S()(kS.prototype,"insertView",[T.Qu],Object.getOwnPropertyDescriptor(kS.prototype,"insertView"),kS.prototype),S()(kS.prototype,"updateView",[T.Qu],Object.getOwnPropertyDescriptor(kS.prototype,"updateView"),kS.prototype),S()(kS.prototype,"removeView",[T.Qu],Object.getOwnPropertyDescriptor(kS.prototype,"removeView"),kS.prototype),S()(kS.prototype,"animate",[T.Qu],Object.getOwnPropertyDescriptor(kS.prototype,"animate"),kS.prototype),kS);var DS;let OS=(DS=class extends xS{constructor(e={}){super(e);const t=this.getDefaultProps(),n=this.getDefaultStyle();this.events=["click","touchstart","touchmove","touchend","ready"],this.style.backgroundColor&&(this.style.bgColor=this.style.backgroundColor),this.style=Object.assign(n,IS(n,this.style)),this.props=Object.assign(t,IS(t,this.props))}getDefaultProps(){return{hide:!1,iconPath:"",clickable:!1,gesture:!1,transEvt:!1,bubbles:!1,sendTo:"appservice",independent:!1}}getDefaultStyle(){return{bgColor:"#ffffff00",borderRadius:0,borderWidth:0,borderColor:"#000000",padding:[0,0,0,0],opacity:1,zIndex:0,fixed:!1}}insertView(e){const t={parentId:this.parentId,viewId:this.id,position:this.position,hide:this.props.hide,iconPath:this.props.iconPath,clickable:this.props.clickable,gesture:this.props.gesture,transEvt:this.props.transEvt,sendTo:this.props.sendTo,independent:this.props.independent,data:JSON.stringify({id:this.id}),style:this.style,zIndex:this.style.zIndex,fixed:this.style.fixed,notCoverRect:!0};Object.assign(t,e),(0,u.IN)("insertImageView",t)}updateView(e){const t={viewId:this.id,position:this.position,iconPath:this.props.iconPath,hide:this.props.hide,style:this.style,zIndex:this.style.zIndex,fixed:this.style.fixed,independent:this.props.independent,notCoverRect:!0};Object.assign(t,e),(0,u.IN)("updateImageView",t)}removeView(e){const t=Object.assign({independent:this.props.independent,viewId:this.id},e);(0,u.IN)("removeImageView",t)}},S()(DS.prototype,"insertView",[T.Qu],Object.getOwnPropertyDescriptor(DS.prototype,"insertView"),DS.prototype),S()(DS.prototype,"updateView",[T.Qu],Object.getOwnPropertyDescriptor(DS.prototype,"updateView"),DS.prototype),S()(DS.prototype,"removeView",[T.Qu],Object.getOwnPropertyDescriptor(DS.prototype,"removeView"),DS.prototype),DS);var NS;let RS=(NS=class extends xS{constructor(e={}){super(e);const t=this.getDefaultProps();this.events=["ready"],this.props=Object.assign(t,IS(t,this.props))}getDefaultProps(){return{independent:!1,mode:"normal",devicePosition:"front",resolution:"medium",hide:!1}}insertView(e){const t={parentId:this.parentId,cameraId:this.id,position:this.position,independent:this.props.independent,mode:this.props.mode,devicePosition:this.props.devicePosition,resolution:this.props.resolution,hide:this.props.hide};Object.assign(t,e),(0,u.IN)("insertCamera",t)}updateView(e){const t={cameraId:this.id,position:this.position,independent:this.props.independent,mode:this.props.mode,devicePosition:this.props.devicePosition,hide:this.props.hide};Object.assign(t,e),(0,u.IN)("updateCamera",t)}removeView(e){const t=Object.assign({cameraId:this.id,independent:this.props.independent},e);(0,u.IN)("removeCamera",t)}},S()(NS.prototype,"insertView",[T.Qu],Object.getOwnPropertyDescriptor(NS.prototype,"insertView"),NS.prototype),S()(NS.prototype,"updateView",[T.Qu],Object.getOwnPropertyDescriptor(NS.prototype,"updateView"),NS.prototype),S()(NS.prototype,"removeView",[T.Qu],Object.getOwnPropertyDescriptor(NS.prototype,"removeView"),NS.prototype),NS);var MS;let LS=(MS=class extends xS{constructor(e={}){super(e);const t=this.getDefaultProps();this.events=["ready"],this.props=Object.assign(t,IS(t,this.props))}getDefaultProps(){return{independent:!1,self:!0,configCamera:"front",openid:""}}insertView(e){const t={parentId:this.parentId,viewId:this.id,position:this.position,type:this.props.self?"camera":"video",openId:this.props.openid,config:{camera:this.props.configCamera},independent:this.props.independent};Object.assign(t,e),(0,u.IN)("insertVoIPView",t)}updateView(e){const t={viewId:this.id,position:this.position,type:this.props.self?"camera":"video",openId:this.props.openid,config:{camera:this.props.configCamera},independent:this.props.independent};Object.assign(t,e),(0,u.IN)("updateVoIPView",t)}removeView(e){const t=Object.assign({viewId:this.id,independent:this.props.independent,openId:this.props.openid},e);(0,u.IN)("removeVoIPView",t)}},S()(MS.prototype,"insertView",[T.Qu],Object.getOwnPropertyDescriptor(MS.prototype,"insertView"),MS.prototype),S()(MS.prototype,"updateView",[T.Qu],Object.getOwnPropertyDescriptor(MS.prototype,"updateView"),MS.prototype),S()(MS.prototype,"removeView",[T.Qu],Object.getOwnPropertyDescriptor(MS.prototype,"removeView"),MS.prototype),MS);var BS=c(6422);const FS=c(6725),WS={view:PS,image:OS,voip:LS,camera:RS};class jS{constructor(e,t){this.elementClassMap={},this.root=null;const n=FS(e).root;this.addStyle(n,t),(0,BS.Z)(n),this.root=this.compose(n)}querySelector(e=""){return this.querySelectorAll(e)[0]||null}querySelectorAll(e=""){if(!e.startsWith("."))return null;return this.elementClassMap[e.slice(1)]||[]}addStyle(e,t){const n=e.attributes,r={},o=["id","class","name"];e.tagName=e.name,Object.keys(n).forEach((i=>{const a=n[i];if(""===a||"true"===a?n[i]=!0:"false"===a&&(n[i]=!1),i.startsWith("data-")){o.push(i);const e=i.slice(5);r[e]=n[i]}"class"===i&&(e.class=a&&a.trim().split(/\s+/)||[],e.style=e.class.reduce(((e,n)=>{const r=t[n]||{};return Object.assign(e,r)}),{}))})),o.forEach((e=>delete n[e])),e.dataset=r,e.children.forEach((e=>{this.addStyle(e,t)}))}compose(e){const t=e.tagName,n=WS[t],{layout:r,attributes:o,dataset:i,content:a,style:s}=e;if(o.hidden)return null;"view"===t&&(o.label=s,o.label.content=a,o.label.padding=s.labelPadding);const c=new n({position:r,props:o,dataset:i,style:s});return e.class.forEach((e=>{this.elementClassMap[e]||(this.elementClassMap[e]=[]),this.elementClassMap[e].push(c)})),e.children.forEach((t=>{e.attributes.independent&&(t.attributes.independent=!0);const n=this.compose(t);n&&c.appendChild(n)})),c}}const US="https://res.wx.qq.com/op_res/uv-tkcFVNYmjSLo8oYLi6eHVUT_JFSWYhjoYd77-hNkfpHKJrm4qL1nTZBE7JdfM",VS="https://res.wx.qq.com/op_res/eG0naaMvi5-ResXXogaG1JfWqr7axjp_DgJu1Q-Al-_KPOFwDImGlDAd1y8rHxv2",GS="https://res.wx.qq.com/op_res/abRQv44fOA20modJp4dTaplyqzBvee7vYikt8Um1XjPwg4gGibt6kvjqG_ZgN4tl",$S="https://res.wx.qq.com/op_res/Wvt127UTzax9olBJldzRshntgwJBswVtASV7AoLiSSsx85W_g2Umr33qRtOElgvD",HS="https://res.wx.qq.com/op_res/ZjsLKqozyScMcOTIqmL1LHdV6M95Hz9luJu65Tf4jmzrYgBPKFKxKxDGw6GAaki9";const ZS=0,QS=1,YS=2,zS=3,qS=4,JS=5,KS=6,XS=7,eT=8,tT=10,nT=11,rT=12,oT="voip1v1";class iT{constructor(e){const{roomType:t="video",roomId:n="",groupId:r=0,disableSwitchVoice:o=!1,command:i=-1,caller:a={},listener:s={},sender:c=""}=e;this.roomType=t,this.roomId=n,this.groupId=r,this.disableSwitchVoice=o,this.command=i,this.caller=a,this.listener=s,this.sender=c}}const aT={};oe.Z.onReady((()=>{const e=function(){const{screenWidth:e,screenHeight:t,statusBarHeight:n}=(0,wi.mw)(),r=k.cj?44:46,o=n+r+12,i=t-o,a=e-32,s=a-32-24,c=t-105,l=t-226,d=e-151,u={left:e-87,top:24,width:75,height:162},p={left:0,top:0,width:e,height:i};return{styleTree:{container:{width:e,height:t,zIndex:(oe.Z.menuButtonInfo&&oe.Z.menuButtonInfo.zIndex||1e3)-1},overlay:{position:"absolute",left:0,top:0,width:e,height:t,backgroundColor:"#000000",opacity:0},navigationBar:{marginTop:n,width:e,height:r,color:"#ffffff",lineHeight:r,fontSize:17,textAlign:"center",opacity:0},maxWindow:{position:"absolute",left:0,top:t,width:e,height:i+16,borderRadius:16,backgroundColor:dS("rgba(38,41,48,0.7)")},cameraContainer:{position:"absolute",left:0,top:0,width:e,height:i},camera:{position:"absolute",left:0,top:0,width:e,height:i},voipContainer:{position:"absolute",left:0,top:0,width:e,height:i},mainContainer:{position:"absolute",left:0,top:0,width:e,height:i},videoAreaContainer:{position:"absolute",left:0,top:0,width:e,height:i},voiceAreaContainer:{position:"absolute",left:0,top:0,width:e,height:i},previewWindow:{width:e,height:i},scaleBtn:{position:"absolute",left:0,top:0,width:60,height:60},scaleBtnIcon:{position:"absolute",left:16,top:24,width:24,height:24},videoInfoWindow:{flexDirection:"row",justifyContent:"flex-end",position:"absolute",right:12,top:24,height:48,width:s},videoInfoWindowNicknameCenter:{position:"absolute",textAlign:"center",color:"#ffffff",lineHeight:20,fontSize:14,height:20,width:e,top:24,left:0},voiceInfoWindow:{position:"absolute",top:234,left:0,width:e,height:200,alignItems:"center"},voiceInfoWindowHeadImage:{width:96,height:96,borderRadius:16,marginBottom:8},voiceInfoWindowNickname:{width:e,height:30,color:"#ffffff",lineHeight:30,fontSize:22,textAlign:"center"},voiceInfoWindowTips:{marginTop:4,width:e,height:20,color:dS("rgba(255,255,255,0.9)"),lineHeight:20,fontSize:14,textAlign:"center"},duration:{position:"absolute",bottom:177,width:e,height:16,color:"#ffffff",lineHeight:16,fontSize:14,textAlign:"center"},tips:{position:"absolute",left:e/2-33,bottom:225,width:66,labelPadding:[0,12,0,12],height:28,color:"#ffffff",lineHeight:28,fontSize:14,textAlign:"center",backgroundColor:dS("rgba(0,0,0,0.5)"),borderRadius:6},operationContainer:{position:"absolute",flexDirection:"row",justifyContent:"space-between",bottom:0,width:e,height:149,paddingLeft:38,paddingRight:38},operationItemContainer:{width:84,height:149,alignItems:"center"},listenItemContainer:{height:235},listenArea:{height:235},callItemContainer:{height:235},callArea:{height:235,justifyContent:"center"},switchVoiceText:{marginTop:8},operationItemTop:{width:84,height:57,alignItems:"center"},operationItemBottom:{position:"absolute",bottom:0,left:0,width:84,height:149,alignItems:"center"},callBtnArea:{position:"absolute",bottom:0,left:0,width:e,height:149,alignItems:"center"},operationItemBtn:{borderRadius:32,justifyContent:"center",alignItems:"center",width:64,height:64},operationItemIcon:{width:64,height:64},switchVoiceIcon:{width:32,height:32},operationItemText:{marginTop:16,color:"#ffffffe5",lineHeight:17,fontSize:12,textAlign:"center",width:104,height:17,overflow:"visible"},videoInfoWindowInfo:{width:s-60,height:48},videoInfoWindowTips:{marginTop:4,width:s-60,height:20,color:dS("rgba(255, 255, 255, 0.7)"),lineHeight:20,fontSize:14,textAlign:"right"},videoInfoWindowNickname:{width:s-60,height:24,color:"#ffffff",lineHeight:24,fontSize:17,textAlign:"right"},videoInfoWindowHeadImage:{marginLeft:12,width:48,height:48,borderRadius:8},minPreviewWindowMask:I()({position:"absolute"},u),previewWindowSelfContainer:I()(I()({position:"absolute"},u),{},{zIndex:2}),previewWindowOtherContainer:I()(I()({position:"absolute"},p),{},{zIndex:1}),maskTop:{position:"absolute",left:0,top:0,width:e,height:145},maskBottom:{position:"absolute",left:0,top:i-201,width:e,height:201}},minWindowStyle1:{minWindow:{flexDirection:"row",alignItems:"center",position:"absolute",left:16,top:c,height:72,width:a,backgroundColor:dS("rgba(38,41,48,0.70)"),borderRadius:9.6,borderWidth:1,borderColor:"#ffffff7f"},minWindowLeft:{flexDirection:"row",paddingLeft:16,paddingRight:16,height:48,width:s},minWindowVoipContainer:{paddingRight:16,width:64,height:48,borderRadius:6},minWindowHeadImage:{width:48,height:48,borderRadius:6},minWindowVoip:{position:"absolute",left:0,top:0,width:48,height:48,borderRadius:6},minWindowInfo:{width:s-64,height:48},minWindowNickname:{width:s-64,height:24,color:"#ffffff",lineHeight:24,fontSize:17},minWindowDuration:{marginTop:4,width:s-64,height:20,color:dS("rgba(255, 255, 255, 0.7)"),lineHeight:20,fontSize:14},minWindowRight:{width:32,height:51},minWindowHangupIcon:{width:32,height:32},minWindowHangupText:{marginTop:2,width:32,height:17,color:dS("rgba(255, 255, 255, 0.9)"),lineHeight:17,fontSize:12,textAlign:"center"}},minWindowStyle2:{minWindow:{flexDirection:"row",alignItems:"center",position:"absolute",top:l,left:d,height:64,width:135,backgroundColor:dS("rgba(44,44,44,0.70)"),borderRadius:9.6,borderWidth:1,borderColor:"#ffffff7f"},minWindowVoipContainer:{paddingLeft:12,paddingRight:12,width:64,height:40},minWindowHeadImage:{width:40,height:40,borderRadius:4},minWindowVoip:{position:"absolute",left:12,top:0,width:40,height:40,borderRadius:4},minWindowInfo:{width:59,height:43},minWindowNickname:{width:59,height:24,color:"#ffffff",lineHeight:24,fontSize:17},minWindowDuration:{marginTop:3,width:59,height:16,color:dS("rgba(255, 255, 255, 0.7)"),lineHeight:16,fontSize:14}},maxPreviewWindowPosition:p,minPreviewWindowPosition:u,minPreviewWindowVoipPosition:{left:0,top:0,width:75,height:162},screenWidth:e,minWindowLeft2:d,maxWindowTop:o,maxWindowHeight:i}}();Object.assign(aT,e)}));const sT=(0,St.Fr)(mw.$),cT=(0,St.Fr)(fe.I),lT=(0,St.Fr)((function(e={}){if(!(0,u.r3)("join1v1VoIPChat",e,{roomId:0,sessionKey:"",lifespan:0}))return;const t="video"===e.roomType?1:2,n=Object.assign({},e,{muteConfig:Jb(e.muteConfig),handsFree:!!(0,O.jn)(e.handsFree)&&e.handsFree,roomType:t}),r=(0,hr.hI)(this);(0,u.qu)(r)("join1v1VoIPChat",n)})),dT=(0,St.Fr)(((e={})=>{const t=(0,Oc.Z)("generateRoomId","webapi_join1v1voiproom",{},{},(e=>({use_pluginid:void 0!==e.pluginId,groupid:e.groupId,room_type:"join"===e.type?2:1,target_openid:e.targetOpenid||""})),(e=>{e.targetSupport=0===e.target_version,delete e.target_version,e.roomId=e.imroomid,delete e.imroomid,e.groupId=e.groupid,delete e.groupid}));e.pluginId=(0,hr.hI)(void 0),t(e)})),uT=(0,St.Fr)(((e={})=>{const t=(0,Oc.Z)("getCloudSession","webapi_getcloudimsession",{},{},(e=>({use_pluginid:void 0!==e.pluginId})),(e=>{delete e.rawData,e.sessionKey=e.session_key,delete e.session_key}));e.pluginId=(0,hr.hI)(void 0),t(e)})),pT={enable:!1,ignoreSelfVersion:!1,minWindowType:1,popupDuration:300,userSessionInfo:{},widget:null,occupied:!1},hT=(e,t)=>{const n=e.sender,r=pT.userSessionInfo.openid,o=Object.assign({},e,{sender:r,command:t});gS({msgType:oT,receiver:n,data:o,complete(e){}})},fT=()=>!(k.wZ&&oe.Z.clientVersion>=654315520);mS((e=>{e.data.command;const{msgType:t,data:n}=e,r=pT.widget;if(t===oT)if(r){n.sender===r.sessionInfo.otherOpenid?r.handleReceiveMessage(n.command):r.sendMessage(eT)}else n.command===ZS&&mT().then((()=>{fT()&&!pT.ignoreSelfVersion?hT(n,nT):pT.enable?pS({complete(e){pT.occupied=e.join,pT.occupied?hT(n,eT):pT.widget=new gT(I()({role:"listener",minWindowType:pT.minWindowType},n))}}):hT(n,rT)}))})),(0,gc.onNetworkStatusChange)((e=>{pT.widget&&pT.widget.onNetworkStatusChange(e)})),cw((e=>{pT.widget&&pT.widget.onVoIPChatInterrupted(e)})),nw((e=>{pT.widget&&pT.widget.onVoIPChatMembersChanged(e)}));class gT{constructor(e){this.node={container:null,overlay:null,navigationBar:null,maxWindow:null,scaleBtn:null,hangupBtns:null,muteBtn:null,handsFreeBtn:null,cancelBtn:null,refuseBtn:null,listenBtn:null,switchVoiceBtns:null,switchCameraBtn:null,cameraContainer:null,voipContainer:null,videoOperationArea:null,voiceOperationArea:null,videoInfoWindow:null,voiceInfoWindow:null,videoInfoWindowNicknameCenter:null,callArea:null,listenArea:null,minPreviewWindowMask:null,previewWindowSelfContainer:null,previewWindowOtherContainer:null,previewWindowSelf:null,previewWindowOther:null,tips:null,camera:null,duration:null,minWindow:null,minWindowLeft:null,minWindowInfo:null,minWindowHangupBtn:null,minWindowDuration:null,minWindowVoipContainer:null,minWindowVoip:null,minWindowHeadImage:null,videoInfoWindowTips:null,voiceInfoWindowTips:null,maskBottom:null,maskTop:null,callSwitchVoiceBtn:null,mainContainer:null};const t={};t.roomType=e.roomType||"video",t.isVoiceRoom="voice"===e.roomType,t.isCaller="caller"===e.role,t.groupId=e.groupId,t.roomId=e.roomId,t.disableSwitchVoice=e.disableSwitchVoice||!1,t.minWindowType=e.minWindowType||1,t.caller=e.caller,t.listener=e.listener,t.lifespan=pT.userSessionInfo.lifespan,t.sessionKey=pT.userSessionInfo.sessionKey,t.createSessionTime=pT.userSessionInfo.createSessionTime,t.handsFree=!1,t.muteConfig={muteMicrophone:!1,muteEarphone:!1},this.statistics={videoStartTime:0,videoEndTime:0,voiceStartTime:0,voiceEndTime:0},this.callback={success:e.success,fail:e.fail,complete:e.complete},t.isCaller?(t.selfOpenid=e.caller.openid,t.otherOpenid=e.listener.openid):(t.otherOpenid=e.caller.openid,t.selfOpenid=e.listener.openid),this.sessionInfo=t,this.isPreviewWindowOtherMax=!0,this.hasOtherReceiveCall=!1,this.showMinWindow=!1,this.onDraging=!1,this.onCalling=!1,this.destoryed=!1,this.hasJoinVoIPChat=!1,this.startChatTime=0;const{maxWindowTemplate:n,minWIndowTemplate:r}=this.compileTemplate(t),o=new jS(n,aT.styleTree),i=this.isMinWindowTypeMax()?aT.minWindowStyle1:aT.minWindowStyle2,a=new jS(r,i);Object.keys(this.node).forEach((e=>{this.node[e]=o.querySelector(`.${e}`)}));["minWindow","minWindowLeft","minWindowRight","minWindowHangupBtn","minWindowDuration","minWindowInfo","minWindowVoipContainer","minWindowHeadImage","minWindowVoip"].forEach((e=>{this.node[e]=a.querySelector(`.${e}`)})),this.node.hangupBtns=o.querySelectorAll(".hangupBtn"),this.node.switchVoiceBtns=o.querySelectorAll(".switchVoiceBtn"),this.bindEvent(),this.node.container.insert(),this.node.minWindow.insert(),this.startWaitAnimation(),t.isCaller||(this.startVibrateLong(),this.sendMessage(XS)),t.isCaller&&(setTimeout((()=>{this.destoryed||this.onCalling||this.showMinWindow||this.showTips(yS[1],2e4)}),2e4),setTimeout((()=>{this.destoryed||this.onCalling||(this.sendMessage(QS),this.showTipsThenDestory(yS[2]))}),6e4),this.call())}bindEvent(){const{container:e,overlay:t,navigationBar:n,scaleBtn:r,maxWindow:o,minWindow:i,minWindowLeft:a,minWindowInfo:s,minWindowHangupBtn:c,cancelBtn:l,refuseBtn:d,listenBtn:u,muteBtn:p,handsFreeBtn:h,minPreviewWindowMask:f,switchCameraBtn:g,hangupBtns:_,switchVoiceBtns:m,minWindowVoipContainer:y,mainContainer:v}=this.node;e.on("ready",(()=>{this.popupMaxWindow(),n.fadeTo(.9,pT.popupDuration),t.fadeTo(.87,pT.popupDuration),this.changeStatusBarColor()})),r&&r.on("click",(()=>{this.resetStatusBarColor(),this.showMinWindow=!0;const r=this.sessionInfo.isVoiceRoom;n.hide(),t.hide(),v.hide(),this.popDownMaxWindow().then((()=>{e.hide(),!r&&this.onCalling&&(this.hideOtherVoipPreviewWindow(),this.showMinWindowVoipPreviewWindow())})),i.fadeIn()}));const A=()=>{const e=this.onCalling?AS[5]:yS[4],t=this.onCalling?YS:QS;this.sendMessage(t),this.showTipsThenDestory(e,0)},b=()=>{if(this.onDraging)return;this.showMinWindow=!1;const{isVoiceRoom:r}=this.sessionInfo;!r&&this.onCalling&&(this.hideMinWindowVoipPreviewWindow(),this.showOtherVoipPreviewWindow()),i.hide(),e.show(),this.popupMaxWindow().then((()=>{t.show(),n.show(),v.show()})),this.changeStatusBarColor()};c&&c.on("click",(()=>{A()})),a&&a.on("click",(()=>{b()})),s&&s.on("click",(()=>{this.isMinWindowTypeMax()||b()})),y&&y.on("click",(()=>{const{isVoiceRoom:e}=this.sessionInfo;this.isMinWindowTypeMax()||(e?A():b())})),i&&i.on("drag",(e=>{const t=i.position.width/2,n=aT.screenWidth/2,r=e.stage,a=e.drag;"dragging"===r&&(this.onDraging=!0),"end"===r&&this.onDraging&&(this.onDraging=!1,i.position.left=16,a.left+t>n&&!this.isMinWindowTypeMax()&&(i.position.left=aT.minWindowLeft2),i.position.top=a.top,i.animate({finalStyle:I()({},i.position),duration:100}),o.position=Object.assign({},i.position),o.update())})),p&&p.on("click",(()=>{const e=this.sessionInfo.muteConfig,t=!e.muteMicrophone;e.muteMicrophone=t,ew({muteConfig:{muteMicrophone:t}});const n=t?"https://res.wx.qq.com/op_res/tqnj65wMmdaQDVBAia5726VAaVtTVOcFF9PgeVrkis1gJWt_C2k7pHYWC_pjaGjR":$S;p.props.iconPath=n,p.update()})),h&&h.on("click",(()=>{const e=!this.sessionInfo.handsFree;this.showTips(CS[e?6:7]),this.sessionInfo.handsFree=e,ew({muteConfig:this.sessionInfo.muteConfig,handsFree:e});const t=e?"https://res.wx.qq.com/op_res/7f8h7wvyZo92NU4yaA3Kwp4yXLkdgj8jsA4GFUO7G6r3rBObYxqqEeDP9pgm1O2k":HS;h.props.iconPath=t,h.update()})),l&&l.on("click",(()=>{this.sendMessage(QS),this.showTipsThenDestory(yS[4])})),d&&d.on("click",(()=>{this.stopVibrateLong(),this.sendMessage(qS),this.showTipsThenDestory(vS[2])})),_.forEach((e=>{e.on("click",(()=>{this.showTipsThenDestory(AS[5])}))})),m.forEach((e=>{e.on("click",(()=>{const{isCaller:e}=this.sessionInfo;this.sessionInfo.roomType="voice",this.sessionInfo.isVoiceRoom=!0,this.onCalling?(this.switchToVoiceCall(),this.sendMessage(zS)):e?(this.switchToVoiceCall(),this.showTips(AS[7]),this.sendMessage(zS)):(this.stopVibrateLong(),this.listenerJoinVoIPChat().then((()=>{this.onCalling=!0,this.stopWaitAnimation(),this.pullUpCallingInterface(),this.showTips(AS[7]),this.sendMessage(KS),this.showDuration()})))}))})),u&&u.on("click",(()=>{this.stopVibrateLong(),this.listenerJoinVoIPChat().then((()=>{const{isVoiceRoom:e}=this.sessionInfo,t=e?wS[0]:vS[0];this.onCalling=!0,this.stopWaitAnimation(),this.showTips(t),this.showDuration(),this.pullUpCallingInterface(),this.sendMessage(JS)}))})),g&&g.on("click",(()=>{const e=this.node.previewWindowSelf,t="front"===e.props.configCamera?"back":"front";e.props.configCamera=t,e.update()})),f&&f.on("click",(()=>{this.switchVoipPreviewWindow()}))}isMinWindowTypeMax(){return 1===this.sessionInfo.minWindowType}call(){const e=this.callback;Date.now();dT({type:"create",targetOpenid:this.sessionInfo.otherOpenid}).then((t=>{Date.now();this.sessionInfo.groupId=t.groupId,this.sessionInfo.roomId=t.roomId,lT(I()({},this.sessionInfo)).then((t=>{this.hasJoinVoIPChat=!0,this.playCallTone();Date.now();this.sendMessage(ZS);const n="join1v1Chat:ok";e.success&&e.success({errMsg:n,errCode:0}),e.complete&&e.complete({errMsg:n,errCode:0})})).catch((t=>{this.showTipsThenDestory("呼叫失败");const n=t.errMsg.replace("join1v1VoIPChat","join1v1Chat");e.fail&&e.fail({errMsg:n,errCode:t.errCode}),e.complete&&e.complete({errMsg:n,errCode:t.errCode})}))}))}listenerJoinVoIPChat(){return dT({type:"join",groupId:this.sessionInfo.groupId}).then((e=>(this.sessionInfo.groupId=e.groupId,this.sessionInfo.roomId=e.roomId,lT(I()({},this.sessionInfo)).then((e=>{this.hasJoinVoIPChat=!0})).catch((e=>{this.showTipsThenDestory("接听失败"),wxNativeConsole.error(e)})))))}onVoIPChatInterrupted(){this.showTipsThenDestory(AS[4])}onVoIPChatMembersChanged(e){const t=e.openIdList,{selfOpenid:n,isCaller:r}=this.sessionInfo,{callSwitchVoiceBtn:o}=this.node;2===t.length&&r&&(o&&o.hide(),this.showDuration()),this.onCalling&&1===t.length&&t[0]===n&&this.showTipsThenDestory(AS[4])}sendMessage(e){if(this.destoryed)return;const{otherOpenid:t,selfOpenid:n}=this.sessionInfo,r=new iT(I()(I()({},this.sessionInfo),{},{sender:n,command:e}));gS({msgType:oT,receiver:t,data:r,complete(e){}})}handleReceiveMessage(e){const{isVoiceRoom:t}=this.sessionInfo;switch(e){case JS:this.stopCallTone(),this.onCalling=!0,this.stopWaitAnimation(),this.pullUpCallingInterface(),!t&&this.showMinWindow&&(this.hideOtherVoipPreviewWindow(),this.showMinWindowVoipPreviewWindow()),this.showTips(yS[3]);break;case zS:this.sessionInfo.roomType="voice",this.sessionInfo.isVoiceRoom=!0,this.switchToVoiceCall(),this.showTips(AS[6]);break;case KS:this.stopCallTone(),this.onCalling=!0,this.stopWaitAnimation(),this.sessionInfo.roomType="voice",this.sessionInfo.isVoiceRoom=!0,this.pullUpCallingInterface(),this.showTips(AS[6]);break;case XS:this.hasOtherReceiveCall=!0;break;case QS:this.showTipsThenDestory(vS[1]);break;case qS:const e=t?bS[5]:yS[5];this.showTipsThenDestory(e);break;case YS:break;case tT:this.showTips(AS[0]);break;case eT:this.showTipsThenDestory(yS[6]);break;case nT:this.showTipsThenDestory(bS[0]);break;case rT:this.showTipsThenDestory(bS[7])}}onNetworkStatusChange(e){const{isConnected:t,networkType:n}=e,{isVoiceRoom:r}=this.sessionInfo;t?("2g"===n||!r&&"3g"===n)&&(this.sendMessage(tT),this.showTips(AS[1])):this.showTipsThenDestory(AS[3])}switchToVoiceCall(){const{videoInfoWindowNicknameCenter:e,voipContainer:t,cameraContainer:n,switchVoiceBtns:r,videoInfoWindow:o,voiceInfoWindow:i,voiceInfoWindowTips:a,videoOperationArea:s,voiceOperationArea:c,minWindowVoipContainer:l,minWindowInfo:d,minWindowHeadImage:u,maskBottom:p,maskTop:h}=this.node,{isCaller:f}=this.sessionInfo;p&&p.hide(),h&&h.hide(),this.isMinWindowTypeMax()?(l&&l.remove(),d.position=Object.assign({},d.position,{left:16,top:0}),d.update()):(u.props.iconPath=GS,u.update()),this.onCalling?(f||(this.statistics.videoEndTime=Date.now(),this.statistics.voiceStartTime=Date.now()),t&&t.remove(),this.node.voipContainer=null,e.hide(),a.hide(),i.show(),s.hide(),c.show()):(n&&n.remove(),this.node.cameraContainer=null,o.hide(),i.show(),r.forEach((e=>e.hide())))}pullUpCallingInterface(){if(!this.onCalling)return;const{isVoiceRoom:e}=this.sessionInfo,{videoInfoWindow:t,videoOperationArea:n,listenArea:r,callArea:o,videoInfoWindowNicknameCenter:i,voiceInfoWindow:a,voiceInfoWindowTips:s,voiceOperationArea:c,cameraContainer:l,minWindowVoipContainer:d,minWindowInfo:u,minWindowHeadImage:p,maskTop:h,maskBottom:f}=this.node;o&&o.hide(),r&&r.hide(),t&&t.hide(),l&&l.remove(),this.node.cameraContainer=null,e?(f&&f.hide(),h&&h.hide(),a.show(),s.hide(),c.show(),this.isMinWindowTypeMax()?(d&&d.remove(),u.position=Object.assign({},u.position,{left:16,top:0}),u.update()):(p.props.iconPath=GS,p.update())):(this.showVoipPreViewWindow(),a&&a.hide(),i.show(),n.show(),this.showMinWindow&&(this.hideOtherVoipPreviewWindow(),this.showMinWindowVoipPreviewWindow()))}destory(){this.hideDuration(),this.resetStatusBarColor(),this.stopWaitAnimation(),this.onCalling=!1,this.destoryed=!0,this.hasJoinVoIPChat&&Xb(),this.node.container.remove(),this.node.minWindow.remove(),pT.widget=null}showTipsThenDestory(e,t=2e3){this.stopCallTone(),this.stopVibrateLong(),0===t?this.destory():this.showTips(e,t).then((()=>this.destory()))}showTips(e,t=2e3){if(this.showTipsTimier&&clearTimeout(this.showTipsTimier),this.showMinWindow)return(0,ua.showToast)({title:e,icon:"none",duration:t}),new Promise((e=>{setTimeout((()=>{e()}),t)}));{const n=this.node.tips,r=n.measureText(e)+28,o=(aT.screenWidth-r)/2;return n.label.content=e,n.position.left=o,n.position.width=r,n.props.hide=!1,n.update(),new Promise((e=>{this.showTipsTimier=setTimeout((()=>{this.destoryed||n.hide(),e()}),t)}))}}changeStatusBarColor(){(0,u.IN)("setStatusBarStyle",{color:"white"})}resetStatusBarColor(){const e={backgroundColor:ma,frontColor:ya}.frontColor;(0,u.IN)("setStatusBarStyle",{color:"#ffffff"===e?"white":"black"})}showVoipPreViewWindow(){const{otherOpenid:e,selfOpenid:t}=this.sessionInfo;this.createVoipPreviewWindow({self:!1,openid:e,size:"max"}),this.createVoipPreviewWindow({self:!0,openid:t,size:"min"})}showOtherVoipPreviewWindow(){const{otherOpenid:e}=this.sessionInfo,t=this.isPreviewWindowOtherMax?"max":"min";this.createVoipPreviewWindow({self:!1,openid:e,size:t})}hideOtherVoipPreviewWindow(){const{previewWindowOther:e}=this.node;e&&e.remove()}showMinWindowVoipPreviewWindow(){const{otherOpenid:e}=this.sessionInfo,{minWindowVoip:t}=this.node,n=this.isMinWindowTypeMax()?48:40,r=this.isMinWindowTypeMax()?48:40,o=new LS({position:{left:0,top:0,width:r,height:n},props:{independent:!0,self:!1,openid:e}});t.appendChild(o),o.insert()}hideMinWindowVoipPreviewWindow(){const{minWindowVoip:e}=this.node;e&&e.empty()}switchVoipPreviewWindow(){const{previewWindowOther:e,previewWindowSelf:t}=this.node;if(!t||!e)return;const n=this.isPreviewWindowOtherMax?"max":"min",r=this.isPreviewWindowOtherMax?"min":"max";this.adjustVoipPreviewWindow(t,n),this.adjustVoipPreviewWindow(e,r),this.isPreviewWindowOtherMax=!this.isPreviewWindowOtherMax}adjustVoipPreviewWindow(e,t){const n="max"===t,r=e.parent,o=n?aT.maxPreviewWindowPosition:aT.minPreviewWindowPosition,i=n?aT.maxPreviewWindowPosition:aT.minPreviewWindowVoipPosition,a=n?1:2;r.position=o,e.position=i,r.style.zIndex=a,r.update(),e.update()}createVoipPreviewWindow(e){const{size:t,self:n,openid:r}=e,{previewWindowSelfContainer:o,previewWindowOtherContainer:i}=this.node,a=n?o:i,s=new LS({position:"max"===t?aT.maxPreviewWindowPosition:aT.minPreviewWindowVoipPosition,props:{independent:!0,self:n,openid:r}});this.node[n?"previewWindowSelf":"previewWindowOther"]=s,a.appendChild(s),s.insert()}startWaitAnimation(){this.sessionInfo.isCaller&&(this.waitCount=0,this.waitTimer=setInterval((()=>{const{voiceInfoWindowTips:e,videoInfoWindowTips:t}=this.node,n=`正在等待对方接收邀请${new Array(++this.waitCount).fill(".").join("")}`;this.waitCount%=3,t&&(t.label.content=n,t.update()),e&&(e.label.content=n,e.update())}),800))}stopWaitAnimation(){clearInterval(this.waitTimer)}playCallTone(){uS({type:"play"})}stopCallTone(){uS({type:"stop"})}startVibrateLong(){this.vibrateLongTimer=setInterval((()=>{Kc()}),2e3)}stopVibrateLong(){clearInterval(this.vibrateLongTimer)}showDuration(){const{duration:e,minWindowDuration:t}=this.node,{isVoiceRoom:n,isCaller:r}=this.sessionInfo;r||(n?this.statistics.voiceStartTime=Date.now():this.statistics.videoStartTime=Date.now()),this.startChatTime||(this.startChatTime=Date.now()),e.show(),this.durationTimer=setInterval((()=>{if(this.destoryed)return;const r=(e=>{const t=Math.floor(e/3600);let n=Math.floor(e%3600/60),r=e%3600-60*n;n<10&&(n=`0${n}`),r<10&&(r=`0${r}`);let o=`${n}:${r}`;return t>0&&(o=`${t}:${o}`),o})(Math.ceil((Date.now()-this.startChatTime)/1e3));e.label.content=r,e.update();const o=this.isMinWindowTypeMax()?n?`音频通话中 ${r}`:`通话中 ${r}`:r;t.label.content=o,t.update()}),1e3)}hideDuration(){const{isCaller:e,isVoiceRoom:t,caller:n,listener:r}=this.sessionInfo;if(this.onCalling&&!e){t?this.statistics.voiceEndTime=Date.now():this.statistics.videoEndTime=Date.now();const{videoEndTime:e,videoStartTime:o,voiceEndTime:i,voiceStartTime:a}=this.statistics,s=Math.ceil((e-o)/1e3),c=Math.ceil((i-a)/1e3);((e={})=>{const t=(0,Oc.Z)("setVoIPChatRecord","webapi_set1v1voipcallrecord",{},{},(e=>({use_pluginid:void 0!==e.pluginId,caller_openid:e.callerOpenid,receiver_openid:e.listenerOpenid,video_time:e.videoTime||0,voice_time:e.voiceTime||0})),(()=>{}));e.pluginId=(0,hr.hI)(void 0),t(e)})({callerOpenid:n.openid,listenerOpenid:r.openid,videoTime:s,voiceTime:c,complete(e){}})}clearInterval(this.durationTimer)}popupMaxWindow(){return this.node.maxWindow.animate({finalStyle:{top:aT.maxWindowTop,left:0,width:aT.screenWidth,height:aT.maxWindowHeight,opacity:1},duration:pT.popupDuration})}popDownMaxWindow(){const e=this.node.minWindow;return this.node.maxWindow.animate({finalStyle:I()(I()({},e.position),{},{opacity:0}),duration:pT.popupDuration})}compileTemplate(){const e=this.sessionInfo,t=e.isCaller?e.listener:e.caller;return function(e){const t=`\n    <view class="container" independent="true" clickable="true">\n      <view class="overlay"></view>\n      <view class="navigationBar" clickable="true">${e.title}</view>\n\n      <view class="maxWindow"> \n        <view class="cameraContainer" hidden="${e.isVoiceRoom}">\n          <camera class="camera"></camera>\n        </view>\n        <view class="voipContainer" hidden="${e.isVoiceRoom}">\n          <view class="previewWindowSelfContainer"></view>\n          <view class="previewWindowOtherContainer"></view>\n        </view>\n\n        <image class="maskBottom" hidden="${e.isVoiceRoom}" iconPath="https://res.wx.qq.com/op_res/TnkjDXCOtdoxzei_oGVMdSiYu-0a3TBEgas1qwql8YYMyn8zwsFMDB0W272fSFZk"></image>\n        <image class="maskTop" hidden="${e.isVoiceRoom}" iconPath="https://res.wx.qq.com/op_res/XWPIP9W-ZHRXSdZMoQH_RzjZ2msJo3gNU7H9HkkV8ect4MGc6KJmXRjwBqr01Mb1"></image>\n\n        <view class="mainContainer">\n          <view class="videoInfoWindowNicknameCenter" hide="true" hidden="${e.isVoiceRoom}">${e.nickname}</view>\n          <view class="videoInfoWindow" hidden="${e.isVoiceRoom}">\n            <view class="videoInfoWindowInfo">\n              <view class="videoInfoWindowNickname">${e.nickname}</view>\n              <view class="videoInfoWindowTips">${e.isCaller?"正在等待对方接收邀请":"邀请你视频通话"}</view>\n            </view>\n            ${e.headImage?`<image class="videoInfoWindowHeadImage" iconPath="${e.headImage}"></image>`:""}\n          </view>\n\n          <view class="operationContainer videoOperationArea" hide="true" hidden="${e.isVoiceRoom}">\n            <view class="operationItemContainer">\n              <view class="operationItemBtn" >\n                <image class="operationItemIcon switchVoiceBtn" iconPath="https://res.wx.qq.com/op_res/MMZ7ikr1yDWDciblT6cTjGEYi5X7nUBkmxeFiAYY6pTrTZTcVWlcLB8_CsIP---k" clickable="true"></image>\n              </view>\n              <view class="operationItemText">切到语音通话</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon hangupBtn" iconPath="${VS}" clickable="true"></image>\n              </view>\n              <view class="operationItemText">挂断</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon switchCameraBtn" iconPath="https://res.wx.qq.com/op_res/QTADvaCvE516_xRgOJ7MxnMeM_I-9bk-ngeQrOE4O6SjCk0zj-YeAVwoWDzJEFsA" clickable="true"></image>\n              </view>\n              <view class="operationItemText">切换摄像头</view>\n            </view>\n          </view>\n\n          <view class="voiceInfoWindow" hide="${!e.isVoiceRoom}" hidden="${e.disableSwitchVoice}">\n            ${e.headImage?`<image class="voiceInfoWindowHeadImage" iconPath="${e.headImage}"></image>`:""}\n            <view class="voiceInfoWindowNickname">${e.nickname}</view>\n            <view class="voiceInfoWindowTips">${e.isCaller?"正在等待对方接收邀请":"邀请你语音通话"}</view>\n          </view>\n\n          <view class="operationContainer voiceOperationArea" hide="true" hidden="${e.disableSwitchVoice}">\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon muteBtn" iconPath="${$S}" clickable="true"></image>\n              </view>\n              <view class="operationItemText">静音</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon hangupBtn" iconPath="${VS}" clickable="true"></image>\n              </view>\n              <view class="operationItemText">挂断</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn" >\n                <image class="operationItemIcon handsFreeBtn" iconPath="${HS}" clickable="true"></image>\n              </view>\n              <view class="operationItemText">免提</view>\n            </view>\n          </view>\n\n          <view class="operationContainer callArea" hidden="${!e.isCaller}">\n            <view class="operationItemContainer callItemContainer">\n              <view class="operationItemTop switchVoiceBtn callSwitchVoiceBtn" hidden="${e.isVoiceRoom||e.disableSwitchVoice}" clickable="true">\n                <image class="operationItemIcon switchVoiceIcon" iconPath="${US}" clickable="true" bubbles="true"></image>\n                <view class="operationItemText switchVoiceText">切到语音通话</view>\n              </view>\n              <view class="operationItemBottom">\n                <view class="operationItemBtn">\n                  <image class="operationItemIcon cancelBtn" iconPath="${VS}" clickable="true"></image>\n                </view>\n                <view class="operationItemText">取消</view>\n              </view>\n            </view>\n          </view>\n          \n          <view class="operationContainer listenArea" hidden="${e.isCaller}">\n            <view class="operationItemContainer listenItemContainer">\n              <view class="operationItemTop"></view>\n              <view class="operationItemBottom">\n                <view class="operationItemBtn">\n                  <image class="operationItemIcon refuseBtn" iconPath="${VS}" clickable="true"></image>\n                </view>\n                <view class="operationItemText">拒绝</view>\n              </view>\n            </view>\n            <view class="operationItemContainer listenItemContainer"></view>\n            <view class="operationItemContainer listenItemContainer">\n              <view class="operationItemTop switchVoiceBtn" hidden="${e.isVoiceRoom||e.disableSwitchVoice}" clickable="true">\n                <image class="operationItemIcon switchVoiceIcon" iconPath="${US}" clickable="true" bubbles="true"></image>\n                <view class="operationItemText switchVoiceText">切到语音通话</view>\n              </view>\n              <view class="operationItemBottom">\n                <view class="operationItemBtn">\n                  <image class="operationItemIcon listenBtn" iconPath="https://res.wx.qq.com/op_res/VgAFtpPeKJeLoWBJ0QXzjP7ebzWqPqfVnfKclugzcpfp6_PkGC12B-uwBakQhvhP" clickable="true"></image>\n                </view>\n                <view class="operationItemText">接听</view>\n              </view>\n            </view>\n          </view>\n          \n          <view class="tips" hide="true">已接通</view>\n          <view class="duration" hide="true">00:01</view>\n          <view class="minPreviewWindowMask" clickable="true"></view>\n\n          <view class="scaleBtn" clickable="true">\n            <image class="scaleBtnIcon" iconPath="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAABPFJREFUeAHtnF2IVkUYx/e1NI3AMrpSaI2UMkKwi6AgQRCCLtILwaSL8sIiwUTrRvrQoAgqPyD6EDQvVMyr8FaI9sLwQr0QK7WgJKKLvlZsdXNb335/nFme9+y++75zOrPvHJ0H/jzPzJkz88z/fWbOzJyz29eXJTOQGcgMZAYyA3VloFHG8WazOZ37NoA1YCG4HUwDVUmzooqGqOcHcADsajQaI6H1BhPkyDlKQ0tDG+tx+QHaXx5KUplfXZFTN3L028hn+R4kZSLoJC0sca1cRX8BLrp0amo2Dq0AM5xjp4igR6I6yRC7BLwcjtpYBZXj6OfeWfSl0CrLDDFNyF4GvZGwttFtfe/K5TIE2Xuqetp05WwFhazvXVUXfENXtd5AhTJBHX7MTFAvCOJp0Q8Ogn3gng4+JH351kjefUy9T7q6F0DSE6w/RiO1FbXaWENMezUvj2Fs9Ym66VgEvQER/xoythBFddyeVLoDH+OD4fQ1iW1jGdd3+vshaY7Jq4UZK4LU+XfAVzKczEPv9QmvIe0ZcBl8C/p9fm01nbDy6WQdoeBc8Lu9Afslfw/2NGD3du/6a1Vp6t8NxiS03pgR1MdQ+wWH1hac+gBvH3Z589F3mOv/GDsJMypB6iEkHUF9aHo7E/sQJM1CP2DyZX5XSPc8GZ0g18NX0adNbxdh7wAPmjyZZwvpnidjLRRbOkYUDRMxq8k8AfyRwwvYOi/2opOBcz6Rip6qCNJQ0/DZWOj4/SZ9gTJXTDoJMxpBRMw8cAb8AY6Dz+ix1kE/tul5cvOP/Iw5xLQOesiR8ShamEySm3/kbLQIou4Lk7ExwbWbLoLehIS/wDKgp1U/aPeDaILW9iQ5iTbEmHCv0dvtDn3MQVr/LARa+4gwr2/D1lvPb9DJSTSCij2FgGHytBay66FiseTS7UI+OUd75VAmqAPzmaBMUAcGOlzOEdSBoCl7inXwY9xllgUvkvky0BmRFpFaaXt93j0VyYorSRIEOdqifAQarvuLCzRco8xP5ImwL8FOt+7CrFaSJIguPg48ORP1WFPDfQ5Poe8Cr4PKJdU5SKvsELk3pHBI2VQjqHjS6PukoxK9KBCBgrYuv4ItIIqkSlC7CJoPC4PMN89HYWOCSpMbYky+OpK1Q+b7gt87KKMz7SmR5Aii1xo2doLeTfoTw8YsbL0VmWnyopkpElScf/Qo3wTscYjeq70fjRVTcYoEFeefs8w5V/B5NRg2vq8nip426ShmigTpAM3L3xh6cumtyBnUZtlG9kDSXJOu3EyRIM03GlaKmnV2hYyt1bU+XPdyN4a+GkmnHzhjRWuSKRUanwN+tk5gv9bOCa6l+/FCO6f/Tz5R9Cf3Pwt05u1lK0ToS7bKJZ3QDOgaJA1Q/G1zyy3Yb5l0ZWYtCXK934Y+ZpgYMXZlZqpbjY4dJIpGGVYrKfgemAGi7MdqS5AYhKTfUM/JjiV1HmKxOGmpNxPUQsf4RCZoPCctOWUIsusPu+tuqTjRRDPUrzIEXTaNzDZ2qqb1cSjUyTJPsfM0ssQ1tIJH7WFs/Wlm8K/j6oilFN13Arvjt99EdtVuGYIOUrMnSOuPVV21lEahA6FuBM8hRMx0GjkKloY21uPyA7Qf/x8LsDjTkn45eAWcAjqzsRM3ySREPsk3+Shfg8nhniyZgcxAZiAzkBmoMQP/Af+8lwiMNw+aAAAAAElFTkSuQmCC" clickable="true" bubbles="true"></image>\n          </view>\n        </view>\n      </view>\n    </view>\n  `;let n=`\n    <view class="minWindow" draggable="true" hide="true" independent="true" clickable="true">\n      <view class="minWindowLeft" clickable="true">\n        ${e.isVoiceRoom?"":`<view class="minWindowVoipContainer" transEvt="true">\n            <image class="minWindowHeadImage" iconPath="${e.headImage}"></image>\n            <view class="minWindowVoip"></view>\n          </view>`}\n        <view class="minWindowInfo" transEvt="true">\n          <view class="minWindowNickname">${e.nickname}</view>\n          <view class="minWindowDuration">等待接听</view>\n        </view> \n      </view>\n      <view class="minWindowRight minWindowHangupBtn" clickable="true">\n        <image class="minWindowHangupIcon" iconPath="${GS}" clickable="true" bubbles="true"></image>\n        <view class="minWindowHangupText" transEvt="true">挂断</view>\n      </view>\n    </view>\n  `;return 2===e.minWindowType&&(n=`\n      <view class="minWindow" draggable="true" hide="true" independent="true" clickable="true">\n        <view class="minWindowVoipContainer" clickable="true">\n          ${e.isVoiceRoom?`<image class="minWindowHeadImage" iconPath="${GS}" clickable="true" bubbles="true"></image>`:`<image class="minWindowHeadImage" iconPath="${e.headImage}" clickable="true" bubbles="true"></image>\n          <view class="minWindowVoip" transEvt="true"></view>`}\n        </view>\n        <view class="minWindowInfo" clickable="true">\n          <view class="minWindowNickname" transEvt="true">${e.nickname}</view>\n          <view class="minWindowDuration" transEvt="true">等待接听</view>\n        </view>\n      </view>\n    `),{maxWindowTemplate:t,minWIndowTemplate:n}}({title:oe.Z.accountInfo.nickname,nickname:t.nickname,headImage:t.headImage,disableSwitchVoice:e.disableSwitchVoice,isVoiceRoom:e.isVoiceRoom,isCaller:e.isCaller,minWindowType:e.minWindowType})}}const _T=["on call","wechat has no camera authorization","wechat has no record authorization","miniprogram has no record authorization","miniprogram has no camera authorization","device not support","not open 1v1 Chat","system error","occupied by other miniprogram"],mT=()=>{const e=Math.ceil(Date.now()/1e3),{lifespan:t,createSessionTime:n}=pT.userSessionInfo;return n&&t&&e<n+t?Promise.resolve():uT().then((t=>{Object.assign(pT.userSessionInfo,{openid:t.openid,lifespan:t.lifespan,sessionKey:t.sessionKey,createSessionTime:e-3600})}),(e=>{}))},yT=(e={})=>{if(!(0,u.r3)("setEnable1v1Chat",e,{enable:!0}))return;mT();let t="ok",n=0;if(fT()&&!e.ignoreSelfVersion)return n=-20001,t=_T[5],void(0,u.YG)("setEnable1v1Chat",e,t,n);if(!e.enable)return pT.enable=!1,pT.ignoreSelfVersion=e.ignoreSelfVersion||!1,void(0,u.FE)({name:"setEnable1v1Chat",args:e});const{cameraAuthorized:r,microphoneAuthorized:o}=(0,wi.xI)();if(!r||!o)return r||(n=-30001,t=_T[1]),o||(n=-30002,t=_T[2]),void(0,ua.showModal)({title:"",content:"请在“设置-隐私”选项中，允许微信访问你的摄像头和麦克风",showCancel:!1,complete(){(0,u.YG)("setEnable1v1Chat",e,t,n)}});sT().then((r=>{const o=r.authSetting["scope.camera"],i=r.authSetting["scope.record"];o&&i?(pT.enable=!0,pT.ignoreSelfVersion=e.ignoreSelfVersion||!1,pT.minWindowType=O.hj(e.minWindowType)?e.minWindowType:1,(0,u.FE)({name:"setEnable1v1Chat",args:e})):i?o||cT({scope:"scope.camera"}).then((()=>{yT(e)}),(()=>{n=-30004,t=_T[4],(0,u.YG)("setEnable1v1Chat",e,t,n)})):cT({scope:"scope.record"}).then((()=>{yT(e)}),(()=>{n=-30003,t=_T[3],(0,u.YG)("setEnable1v1Chat",e,t,n)}))}))},vT=e=>{let t="ok",n=0;if(fT()&&!e.ignoreSelfVersion?(n=-20001,t=_T[5]):pT.widget?(n=-20002,t=_T[0]):pT.occupied&&(n=-20003,t=_T[8]),"ok"!==t)return void(0,u.YG)("join1v1Chat",e,t,n);const{cameraAuthorized:r,microphoneAuthorized:o}=(0,wi.xI)();if(!r||!o)return r||(t=_T[1],n=-30001),o||(t=_T[2],n=-30002),void(0,ua.showModal)({title:"",content:"请在“设置-隐私”选项中，允许微信访问你的摄像头和麦克风",showCancel:!1,complete(){(0,u.YG)("join1v1Chat",e,t,n)}});sT().then((r=>{const o=r.authSetting["scope.camera"],i=r.authSetting["scope.record"];o&&i?mT().then((()=>{pS({complete(r){if(pT.occupied=r.join,pT.occupied)t=_T[8],n=-20003,(0,u.YG)("join1v1Chat",e,t,n);else{const t=Object.assign({role:"caller"},e);t.caller.openid=pT.userSessionInfo.openid,pT.widget=new gT(t)}}})}),(()=>{t=_T[7],n=-3e4,(0,u.YG)("join1v1Chat",e,t,n)})):i?o||cT({scope:"scope.camera"}).then((()=>{vT(e)}),(()=>{t=_T[4],n=-30004,(0,u.YG)("join1v1Chat",e,t,n)})):cT({scope:"scope.record"}).then((()=>{vT(e)}),(()=>{t=_T[3],n=-30003,(0,u.YG)("join1v1Chat",e,t,n)}))}))};let AT=!1;oe.Z.onReady((()=>{AT=AT||1055===(oe.Z.appLaunchInfo||{}).scene})),(0,Jo.T)((e=>{AT=AT||1055===e.scene}));const bT=__safeway__.apiSign.makeApiSign,wT=(0,St.Fr)((0,Ii.Ce)(!1,"getSubjectalterInfo")),CT=e=>new Promise((t=>setTimeout(t,e)));class IT{constructor(e,t=!1){const n=286;this.orientation=e,this.animating=!1;const{screenWidth:r}=(0,wi.xI)(),o=parseInt(32767*Math.random(),10)+32767;this.isFullScreen=t;const i=new p_.G7({id:o,style:{position:"absolute",left:(r-n)/2,top:this.getTop(),width:n,height:38,backgroundColor:"#000000",opacity:0,zIndex:1000001,borderRadius:5,fixed:!(0,St.aI)()}}),a=new p_.xv({id:o+1,style:{left:0,top:0,width:n,height:38,textAlign:"center",lineHeight:38,fontSize:15,color:"#ffffff"},value:`该${(0,St.aI)()?"小游戏":"小程序"}业务及数据已由新开发者承接`});i.add(a),p_.uo.add(i),this.banner=i,this.bannerWidth=n}show(){this.banner.ready().then((()=>(this.animating=!0,this.banner.animate({top:this.getTop(),opacity:.7,duration:300})))).then((()=>(this.animating=!1,CT(5e3)))).then((()=>(this.animating=!0,this.banner.animate({top:this.getTop()-14,opacity:0,duration:300})))).then((()=>CT(3e3))).then((()=>p_.uo.remove(this.banner))).catch((()=>{}))}getTop(){const{screenHeight:e}=(0,wi.xI)();return this.isFullScreen?"portrait"===this.orientation?e/8:e/6:16}setOrientation(e){if(this.animating)return;this.orientation=e;const{screenWidth:t}=(0,wi.xI)();this.banner.style.left=(t-this.bannerWidth)/2,this.banner.style.top=this.getTop()}}const ET=(e,t)=>wT({apiName:"getSubjectalterInfo",reqData:{}}).then((n=>{const r=JSON.parse(n.rawData);if(r.need_show){const n=new IT(e,t);return n.show(),n}})).catch((()=>{}));class ST{constructor(e,t,n=!1){this.orientation=t,this.animating=!1;const{screenWidth:r}=(0,wi.xI)(),o=parseInt(32767*Math.random(),10)+32767;this.isFullScreen=n;const i=r-30,a=new p_.G7({id:o,style:{display:"flex",alignItems:"center",position:"fixed",left:(r-i)/2,top:this.getTop(),width:i,height:38,backgroundColor:"#FA5151",opacity:0,zIndex:1000001,borderRadius:5,fixed:!0}}),s=new p_.xv({id:o+1,style:{width:i-30,height:38,lineHeight:38,textAlign:"center",fontSize:13,color:"#ffffff"},value:e,bubbleEvent:!1,clickState:!1}),c=new p_.xv({id:o+2,style:{position:"absolute",left:i-44,top:-2,width:30,height:38,lineHeight:38,fontSize:18,color:"#ffffff"},value:"×",eventType:"touch",bubbleEvent:!0,clickState:!0});s.add(c),a.add(s),p_.uo.add(a),a.on("touchstart",(()=>{this.hide()})),this.banner=a,this.bannerWidth=i}show(){this.banner.ready().then((()=>(this.animating=!0,this.banner.animate({top:this.getTop(),opacity:.9,duration:300})))).then((()=>{this.animating=!1})).catch((()=>{}))}hide(){(0,as.Mn)(+new Date),this.banner.ready().then((()=>(this.animating=!0,this.banner.animate({top:this.getTop()-14,opacity:0,duration:300})))).then((()=>{return e=3e3,new Promise((t=>setTimeout(t,e)));var e})).then((()=>p_.uo.remove(this.banner))).catch((()=>{}))}getTop(){const{screenHeight:e}=(0,wi.xI)();return this.isFullScreen?"portrait"===this.orientation?e/8:e/6:16}setOrientation(e){if(this.animating)return;this.orientation=e;const{screenWidth:t}=(0,wi.xI)();this.banner.style.left=(t-this.bannerWidth)/2,this.banner.style.top=this.getTop()}}const TT=(e,t)=>{(0,as.vq)((n=>{const r=(+new Date-(n||0))/1e3/60,o=oe.Z&&oe.Z.appContactInfo&&oe.Z.appContactInfo.operationInfo&&oe.Z.appContactInfo.operationInfo.jsonInfo&&oe.Z.appContactInfo.operationInfo.jsonInfo.warning_info&&oe.Z.appContactInfo.operationInfo.jsonInfo.warning_info.top_banner&&oe.Z.appContactInfo.operationInfo.jsonInfo.warning_info.top_banner.wording||"";if(!(0,St.aI)()&&o&&r>30){const n=new ST(o,e,t);return n.show(),n}}))},xT=wxNativeConsole.createLogger("common reportUserBehavior"),kT=(0,St.Fr)(ua._showModal);let PT=!1,DT=null,OT=null;const NT=new Pn.Q("Verify",!0);function RT(e=!0){e&&(OT=null),DT&&(DT.destroy(),DT=null)}function MT(e){if(!OT)return;const{url:t,weapp:n}=OT.urlInfo;n?(0,Y.iy)({appId:n.appid,path:n.path,extraData:n.extraData,success:e}):(0,ug.n)({url:t,isNativeStyle:!0,success:e}),RT()}function LT(e,t,n,r,o=0){Reporter.reportKeyValue({key:"GameAdsSkipCard",value:[(0,gc._getCurrentNetworkType)(),oe.Z.appLaunchInfo.scene,0,15,e,t,n,"",0,"",r,0,"","",0,"",100*o].join(",")})}oe.Z.onReady((()=>{const e=(0,St.Fr)((0,Ii.Ce)(!1,"reportUserBehavior"));let t,n=oe.Z.appLaunchInfo,r=0,o=null,i=0,a="",s="",c={},l=!1,d=!1,u=!1,p=!1,h=0,f=3e5;try{oe.Z.appContactInfo&&oe.Z.appContactInfo.operationInfo&&oe.Z.appContactInfo.operationInfo.jsonInfo&&oe.Z.appContactInfo.operationInfo.jsonInfo.op_info&&(u=1===Number(oe.Z.appContactInfo.operationInfo.jsonInfo.op_info.adult_only),p=1===Number(oe.Z.appContactInfo.operationInfo.jsonInfo.op_info.grow_protect))}catch(e){xT.error("get op_info fail",e.message)}const g=(0,St.aI)()||p,_=(0,St.aI)()||p,m=(0,St.aI)()||p||u,y=(n,r,{coldBoot:o=!1}={})=>{h=Date.now();const p={onShow:1,heartbeat:2,onHide:3,retryLogin:4};return PT?g().then(_).catch((e=>{xT.error("report fail",e)})):FT.then(g).then(_).catch((e=>{xT.error("report fail",e)}));function g(){const o={version:1,callbackData:t,type:p[n],duration:r/1e3,scene_note:s,scene:i,referrerInfo:{appId:a,extraData:c},appServiceType:oe.Z.appType};(0,St.aI)()||(o.isWxaAdultOnly=u);return e({apiName:"jsapi_reportuserbehav",reqData:o})}function _(e){const n=JSON.parse(e.rawData),{action:r,alertMsg:o,heartbeatInterval:i}=n;switch(t=n.callbackData,i!==f&&i>=1e4&&(f=i,v()),r){case 1:break;case 2:setTimeout((()=>{kT({title:"提示",content:o,showCancel:!1})}),/landscape/.test(oe.Z.deviceOrientation)?500:0);break;case 3:{const e=setTimeout(Ai,15e3);kT({title:"提示",content:o+"（15s后未操作将自动退出）",showCancel:!1}).then((()=>{clearTimeout(e),Ai()}));break}case 4:{const e=setTimeout(Ai,15e3),{url:t,name:r}=n.urlInfo;!d&&o&&t&&r&&(d=!0,LT(1504,0,1,1),(0,ua._showModal)({title:"提示",content:o+"（15s后未操作将自动退出）",confirmText:r,cancelText:"退出游戏",success(t){clearTimeout(e),t.confirm?(LT(1504,1,2,1),OT=n,MT((()=>{l=!0}))):t.cancel&&(LT(1504,2,2,1),xT.info("modal cancel"),Ai()),d=!1},fail(t){xT.error("show modal fail=",t),clearTimeout(e),Ai(),d=!1}}));break}case 5:{const{name:e}=n.urlInfo;LT(1505,0,1,1),setTimeout((()=>{d||(0,ua._showModal)({title:"提示",content:o,confirmText:e,cancelText:"继续游戏",success({confirm:e}){OT=n,e&&LT(1505,1,2,1),e||LT(1505,2,2,1),e&&MT((()=>{l=!0}))},complete(){d=!1}}),d=!0}),/landscape/.test(oe.Z.deviceOrientation)?500:0);break}case 6:var a,s;OT=n,n.isSoftAlert&&NT.emit("notify",{alertMsg:n.alertMsg,remainSeconds:n.remainSeconds,doVerify:()=>MT()}),DT?null===(a=(s=DT).setData)||void 0===a||a.call(s,n):(DT=!0,setTimeout((()=>(0,oE.eZ)(n,(e=>{DT=e,LT(1501,0,1,2),setTimeout((()=>DT&&LT(1502,0,1,2)),1e4),DT.addListener("stop",(()=>RT())),DT.addListener("click",(()=>{const{showSeconds:e,remainSeconds:t}=DT.data;LT(e?1502:1501,1,2,2,t),MT((()=>{l=!0}))}))}))),k.cj?2e3:0))}}},v=()=>{null!==o&&(clearInterval(o),A())},A=()=>{o=setInterval((()=>{r=Date.now()-h,g&&y("heartbeat",r)}),f)},b=(e,{coldBoot:t=!1}={})=>{s=e.scene_note||"",r=0,i=e.scene,e.referrerInfo&&(a=e.referrerInfo.appId,c=e.referrerInfo.extraData),A(),l?(y("retryLogin",r),l=!1):m&&y("onShow",r,{coldBoot:t})},C=()=>{r=Date.now()-h,clearInterval(o),o=null,_&&y("onHide",r)};b(n,{coldBoot:!0}),(0,w.n)("onAppEnterForeground",(e=>{n=e,b(n)})),(0,w.n)("onAppEnterBackground",(()=>{C()})),(0,w.n)("onAppRoute",(e=>{xT.log("onAppRoute",e),"autoReLaunch"===e.openType&&(d=!1,C(),setTimeout((()=>{b(n)}),1e3))}))}));let BT=()=>{},FT=new Promise((e=>{BT=e}));oe.Z.onReady((()=>{let e="";const t=setInterval((()=>{e&&(e&&clearInterval(t),n(e))}),1e3),n=e=>{const t=Object.keys(oe.Z.page).find((t=>t.startsWith(e))),r=oe.Z.page[t];if(!t||!r||!r.window)return;const o=r.window.pageOrientation;let i=!1;try{const e=r.window.navigationStyle||oe.Z.global.window.navigationStyle;i="custom"===e}catch(e){}if("landscape"===o){let e=!1;(0,bi.pc)((()=>{e||(ET(o,i),TT(o,i),e=!0)}))}else{const e=ET("portrait",i),t=TT(o,i);"auto"===o&&(0,$a.KN)((n=>{const{windowWidth:r,windowHeight:o}=n,i=r>o?"landscape":"portrait";e.then((e=>{e&&e.setOrientation&&e.setOrientation(i)})),t&&t.then((e=>{e&&e.setOrientation&&e.setOrientation(i)}))}))}(0,bi.nr)(n)};(0,bi.qS)((t=>{e=t.path})),PT=!0,BT()}));let WT=!1,jT=!1,UT=!1;const VT=function(){if(!WT)return WT=!0,{invokeMethod:u.IN,onMethod:u.jQ,subscribe:u.Ld,publish:u.nY,beforeInvokeFail:u.YG,beforeInvokeCallback:u.FE}};function GT(e={}){(0,u.IN)("openWCPayLQTDetail",e)}function $T(e={}){(0,u.IN)("openWCPayLQTSave",e)}function HT(e={}){(0,u.IN)("openWCPayLQTDepositPlan",e)}function ZT(e={}){(0,u.IN)("openWCPayLQTDepositPlanAdd",e)}oe.Z.onReady((function(){UT=oe.Z.exportBaseMethods}));const QT=["canvasGetImageData","canvasPutImageData","canvasToTempFilePath","setEnableDebug","startAccelerometer","stopAccelerometer","getBatteryInfo","getClipboardData","setClipboardData","startCompass","stopCompass","addPhoneContact","startGyroscope","stopGyroscope","startBeaconDiscovery","stopBeaconDiscovery","getBeacons","startLocalServiceDiscovery","stopLocalServiceDiscovery","startDeviceMotionListening","stopDeviceMotionListening","getNetworkType","makePhoneCall","scanCode","scanItem","getSystemInfo","vibrateShort","vibrateLong","getExtConfig","chooseLocation","choosePoi","getLocation","startLocationUpdateBackground","startLocationUpdate","stopLocationUpdate","openLocation","chooseMessageFile","loadFontFace","chooseImage","previewImage","getImageInfo","saveImageToPhotosAlbum","compressImage","chooseVideo","saveVideoToPhotosAlbum","checkSession","chooseAddress","authorize","addCard","openCard","chooseInvoice","chooseInvoiceTitle","requestFacetoFacePayment","requestPayment","requestPersonalPay","requestSubscribeMessage","requestOrderPayment","getBackgroundFetchData","setBackgroundFetchToken","getBackgroundFetchToken","getSelectedTextRange","hideKeyboard","showModal","showToast","hideToast","showLoading","hideLoading","showActionSheet","pageScrollTo","startPullDownRefresh","stopPullDownRefresh","setBackgroundColor","setBackgroundTextStyle","setTabBarBadge","removeTabBarBadge","showTabBarRedDot","hideTabBarRedDot","showTabBar","hideTabBar","setTabBarStyle","setTabBarItem","setTopBarText","saveFile","openDocument","getSavedFileList","getSavedFileInfo","removeSavedFile","getFileInfo","getStorage","setStorage","removeStorage","clearStorage","getStorageInfo","closeBLEConnection","closeBluetoothAdapter","createBLEConnection","getBLEDeviceCharacteristics","getBLEDeviceServices","getBluetoothAdapterState","getBluetoothDevices","getConnectedBluetoothDevices","notifyBLECharacteristicValueChange","openBluetoothAdapter","readBLECharacteristicValue","startBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","writeBLECharacteristicValue","getHCEState","sendHCEMessage","startHCE","stopHCE","getScreenBrightness","setKeepScreenOn","setScreenBrightness","connectWifi","getConnectedWifi","getWifiList","setWifiList","startWifi","stopWifi","getBackgroundAudioPlayerState","playBackgroundAudio","pauseBackgroundAudio","seekBackgroundAudio","stopBackgroundAudio","getAvailableAudioSources","startRecord","stopRecord","setInnerAudioOption","playVoice","pauseVoice","stopVoice","closeSocket","sendSocketMessage","hideShareMenu","showShareMenu","updateShareMenu","getSetting","openSetting","checkIsSoterEnrolledInDevice","checkIsSupportSoterAuthentication","startSoterAuthentication","navigateBackMiniProgram","navigateToMiniProgram","setNavigationBarTitle","showNavigationBarLoading","hideNavigationBarLoading","hideHomeButton","setNavigationBarColor","redirectTo","reLaunch","navigateTo","switchTab","navigateBack","checkIsUserAdvisedToRest","getUserGameLabel","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getUserCloudStorage","getUserInteractiveStorage","modifyFriendInteractiveStorage","removeUserCloudStorage","setUserCloudStorage","exitVoIPChat","joinVoIPChat","updateVoIPChatMuteConfig","showKeyboard","updateKeyboard","openCustomerServiceConversation","setMenuStyle","setStatusBarStyle","exitMiniProgram","requestMidasPayment","showRedPackage","chooseMedia","requestSubscribeSystemMessage","getGroupInfo","getBLEDeviceRSSI","createBLEPeripheralServer","subscribeVoIPVideoMembers","previewMedia","makeBluetoothPair","setBLEMTU","getVideoInfo","compressVideo","checkIsOpenAccessibility","requestFacetoFacePayment","updateWeChatApp","join1v1Chat","setEnable1v1Chat","shareToWeRun","addPhoneCalendar","addPhoneRepeatCalendar","getRandomValues","showShareImageMenu","shareFileMessage","shareVideoMessage","addFileToFavorites","addVideoToFavorites","getUserProfile","searchContacts","publishWeChatState"],YT=[{name:"quicklyAddBrandContact",permissionByte:"quicklyAddBrandContact"},{name:"privateScanItem",permissionByte:"privateScanItem"},{name:"privateSearchContacts",permissionByte:"privateSearchContacts"},{name:"setNavigateBackInterception",permissionByte:"private_setNavigateBackInterception"},{name:"stopNavigateBackInterception",permissionByte:"private_stopNavigateBackInterception"},{name:"getWebviewDebugInfo",permissionByte:"private_getWebviewDebugInfo"}],zT=(e,t,n)=>function(...r){return(e=>{const t=!0===oe.Z.debug,n="devtools"===oe.Z.platform;(t||n)&&console.warn(`wx.${e} is deprecated, and will be removed in future.`),(0,wn.v)(`wx.${e}`)})(e),t.apply(n,r)};const qT=bt.Z.createBufferURL||(()=>""),JT=bt.Z.revokeBufferURL||(()=>!1),KT=bt.Z.createSignal||(()=>null);let XT,ex,tx=!1;const nx={},rx=JSON.parse;let ox="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",ix="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function ax(){if("string"==typeof oe.Z.opConfig){let e;try{e=rx(oe.Z.opConfig)}catch(e){}return e&&e.expt_info}return oe.Z.opConfig&&oe.Z.opConfig.expt_info}function sx(){const e=ax();let t;return e&&tx?(t=1,XT=e,Reporter.reportIDKey({key:"useLaunchExptInfo"})):e?(t=2,XT=e,Reporter.reportIDKey({key:"useLaunchExptInfo"}),Reporter.reportIDKey({key:"useOriginLaunchExptInfo"})):(t=0,Reporter.reportIDKey({key:"useContactExptInfo"})),{exptInfo:XT,jsDataType:t}}function cx(){if(void 0===i)return"";const e=i.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}"string"==typeof ox&&(ox=ox.replace(" ","")),"string"==typeof ix&&(ix=ix.replace(" ","-")),(0,w.n)("onAppEnterForeground",(e=>{Object.assign(nx,e),ex=nx.sessionId})),cs((e=>{ax()&&(tx=!0)})),oe.Z.onReady((()=>{Object.assign(nx,oe.Z.appLaunchInfo);const e=ax();e?XT=e:oe.Z.appContactInfo&&oe.Z.appContactInfo.passThroughInfo&&(XT=oe.Z.appContactInfo.passThroughInfo.expt_info)}));const lx=(0,Oc.Z)("getExptInfo","webapi_wxaexpt_hit",{},{},(({keyList:e})=>({param_name_list:e})),(e=>(e.list={},Array.isArray(e.hit_list)&&e.hit_list.forEach((t=>{e.list[t.param_name]=t.param_value})),delete e.base_resp,delete e.hit_list,delete e.rawData,e)));var dx=c(8013);var ux=c(2654),px=c(926),hx=c.n(px);function fx(e){let t="";for(let n=0;n<e.length;){const r=e[n];let o=0;r>>>7==0?(t+=String.fromCharCode(e[n]),n+=1):252==(252&r)?(o=(3&e[n])<<30,o|=(63&e[n+1])<<24,o|=(63&e[n+2])<<18,o|=(63&e[n+3])<<12,o|=(63&e[n+4])<<6,o|=63&e[n+5],t+=String.fromCharCode(o),n+=6):248==(248&r)?(o=(7&e[n])<<24,o|=(63&e[n+1])<<18,o|=(63&e[n+2])<<12,o|=(63&e[n+3])<<6,o|=63&e[n+4],t+=String.fromCharCode(o),n+=5):240==(240&r)?(o=(15&e[n])<<18,o|=(63&e[n+1])<<12,o|=(63&e[n+2])<<6,o|=63&e[n+3],t+=String.fromCharCode(o),n+=4):224==(224&r)?(o=(31&e[n])<<12,o|=(63&e[n+1])<<6,o|=63&e[n+2],t+=String.fromCharCode(o),n+=3):192==(192&r)?(o=(63&e[n])<<6,o|=63&e[n+1],t+=String.fromCharCode(o),n+=2):(t+=String.fromCharCode(e[n]),n+=1)}return t}const gx="STOP_CPU_PROFILE",_x="TAKE_HEAP_SNAPSHOT",mx="PERFDOG_METHOD",yx="PERFDOG_METHOD_CALLBACK",vx="LAN_DEBUG_GET_DEVICE_INFO",Ax="LAN_DEBUG_PLUGIN_GET_DEVICE_INFO",bx="OPEN",wx="CLOSED",Cx="ERROR",Ix="CONNECTING",Ex="LAN_DEBUG_STATUS_CHANGE";let Sx=null,Tx=!1;const xx=()=>!0===Tx||("function"!=typeof getProfiler?(void 0!==bt.Z.Profiler&&(Sx=bt.Z.Profiler,Tx=!0),!0):(Sx=getProfiler(),Sx&&(Tx=!0),!0));let kx=!1;let Px=!1;function Dx(e,t){const{model:n,version:r,system:o,SDKVersion:i}=(0,wi.Oo)(),{accountInfo:a,isDevEdition:s}=oe.Z,{appId:c,nickname:l}=a,d={model:n,wechatVersion:r,system:o,SDKVersion:i,appId:c,nickname:l,isDevEdition:!!s};t(e,JSON.stringify(d))}function Ox(e,t,n){Px||(Px=!0,function(e){const t=c.g.LanDebug;t&&(St.aI||delete c.g.LanDebug,t.registerCallback?t.registerCallback(mx,((t,n)=>{e(yx,n)})):t.registerCallback)}(t),e(vx,(()=>{Dx(vx,t)})),e(Ax,(()=>{Dx(Ax,t)})),e(mx,(e=>{const n="undefined"!=typeof getPerfDog?getPerfDog():void 0;let r="PerfDog not found";n&&n.handle&&(r=n.handle(mx,e)),t(yx,r)})),e("START_CPU_PROFILE",(()=>{xx(),Sx&&(kx||(kx=!0,Sx.startCpuProfiling()))})),e(gx,(()=>{let e=(()=>{if(xx(),!Sx)return null;if(kx){kx=!1;return Sx.stopCpuProfiling()}return null})();k.wZ&&e&&(e.constructor.toString().includes("ArrayBuffer")?e=fx(new Uint8Array(e)):"object"==typeof e&&(e=JSON.stringify(e))),t(gx,e||"")})),e(_x,(()=>{setTimeout((()=>{const e=(xx(),Sx?Sx.takeHeapSnapshot():null);if(t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"start"})),!e)return t(_x,""),t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"error"})),!1;if(e.on){const r=n(_x);let o=!1;e.on("data",(e=>{o||(t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"data"})),o=!0),r.send(e.slice())})),e.on("end",(()=>{t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"end"})),r.end(new ArrayBuffer(0))})),e.on("error",(e=>{t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"error"})),r.end(new ArrayBuffer(0))})),e.flush()}return!0}),100)})))}let Nx=0;const Rx=Ku();let Mx=null;const Lx=()=>Mx||(Mx=hx()("\n  message LanDebugHeader {\n    required int32 version = 0;         // 版本，用于升级时兼容用\n    required string method = 1;         // 命令字，代表该包行为\n    required int32 id = 2;              // 命令序号，client端每次给server发命令可以弄一个自增序号，这样方便server处理isEnd。\n    required bool isString = 3;         // 若开发者传输的原始数据是string，需要标识，用于服务端处理\n    required string clientId = 4;       // 客户端会唯一生成一个ID\n    optional bool notEnd = 5;           // 若isEnd为true，代表这次命令已经发送完毕\n    optional string options = 6;        // 预留字段，后续可能会有一些用\n  }\n"),Mx),Bx=((e=6)=>{(e>=13||e<0)&&(e=13);const t=`${Date.now()}`.slice(-e).split("");for(let n=0;n<Math.floor(e/2);n++){const e=Math.floor(10*Math.random());t[n]="abcdefghij"[e]}return t.join("")})(),Fx=new b.Z;let Wx=null,jx=wx,Ux="",Vx=-1,Gx=!1,$x=null,Hx=null;const Zx=[],Qx=[],Yx=[];function zx(e){let t;try{if("object"!=typeof e)return Promise.resolve(!1);if("string"!=typeof e.ip||"string"!=typeof e.token)return Promise.resolve(!1);t=e}catch(e){return Promise.resolve(!1)}if(jx===bx&&Hx)return Promise.resolve(Hx);if(jx===Ix)return Wx;const{ip:n,port:r,token:o,useStaticServer:i=!1,mode:a}=t;Gx=i,Ux=n,Vx=r,jx=Ix;const s="mpHelper"===a?"MPHELPER":"LANDEBUG",c=(0,wi.Oo)();return Ox(ek,Kx,Xx),Wx=new Promise((e=>{Hx=Rx.connectSocket({url:`ws://${n}:${r}`,protocols:[`${encodeURI(`${s}#${c.system}_v${c.version}_${Bx}`)}||${o}`]}),Hx.onOpen((()=>{Hx.send({data:"ping",success(){Zx.forEach((e=>{tk(e)}))},fail(e){}}),jx=bx,Fx.emit(Ex,jx),e(Hx)})),Hx.onMessage((e=>{if(e.data&&"pong"===e.data)return wxConsole.info("[LAN DEBUG] hand shake success");if(e.data.length<4||"string"==typeof e.data)return;const t=new Uint8Array(e.data),n=t.slice(0,4),r=new Uint32Array(n)[0],o=t.slice(4,4+r);let i;try{i=Lx().LanDebugHeader.decode(o)}catch(e){return e.message,void e.stack}const{isString:a,method:s}=i;let c;if(a){c=fx(t.slice(4+r))}else c=t.slice(4+r).buffer;Fx.emit(s,c)})),Hx.onClose((()=>{qx(wx),Yx.forEach((e=>{rk(e)}))})),Hx.onError((e=>{qx(Cx),$x=e,Qx.forEach((e=>{nk(e)}))}))})),Wx}function qx(e){jx=e,Fx.emit(Ex,jx),Ux="",Vx=-1,Gx=!1,Hx=null}function Jx(e,t,n="",r){if(void 0===n||"string"!=typeof n&&!n.constructor.toString().includes("ArrayBuffer"))return!1;let o=!1;return Wx?("string"==typeof n&&(o=!0,n=function(e){const t=[];let n;const r=e.length;for(let o=0;o<r;o++)n=e.charCodeAt(o),n>=65536&&n<=1114111?(t.push(n>>18&7|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128)):n>=2048&&n<=65535?(t.push(n>>12&15|224),t.push(n>>6&63|128),t.push(63&n|128)):n>=128&&n<=2047?(t.push(n>>6&31|192),t.push(63&n|128)):t.push(255&n);const o=new Int8Array(t.length);for(let e=0;e<t.length;e++)o[e]=t[e];return o.buffer}(n)),Wx.then((i=>new Promise((a=>{if(!i)return a({errMsg:"sendSocketMessage:fail no client"});const s=Lx().LanDebugHeader.encode(Object.assign({version:2,method:t,id:e,isString:o,clientId:Bx,options:JSON.stringify({isDevEdition:oe.Z.isDevEdition})},r?{notEnd:!0}:{})),c=new Uint32Array([s.length]);i.send({data:new Uint8Array([...new Uint8Array(c.buffer),...new Uint8Array(s.buffer),...new Uint8Array(n)]).buffer,success(e){a(e)},fail(e){a(e)}})}))))):Promise.resolve({errMsg:"sendSocketMessage:failed"})}const Kx=function(e,t){return Jx(Nx++,e,t)},Xx=function(e){const t=Nx++;return{send:n=>Jx(t,e,n,!0),end:(n=new ArrayBuffer(0))=>Jx(t,e,n)}},ek=function(e,t){Fx.on(e,t)},tk=function(e){try{e()}catch(e){e.message,e.stack}},nk=function(e){try{e($x)}catch(e){e.message,e.stack}},rk=function(e){try{e($x)}catch(e){e.message,e.stack}},ok={sendPackage:Kx,sendStream:Xx,onMessage:ek,offMessage:function(e,t){Fx.off(e,t)},onReady:function(e){"function"==typeof e&&(jx===bx?tk(e):Zx.push(e))},onError:function(e){"function"==typeof e&&(jx===Cx?nk(e):Qx.push(e))},onClose:function(e){"function"==typeof e&&(jx===Cx?rk(e):Yx.push(e))},get status(){return jx},get ip(){return Ux},get port(){return Vx},get useStaticServer(){return Gx}};Object.defineProperty(ok,"_start",{get:()=>(...e)=>zx(...e)});oe.Z.onReady((()=>{(0,St.aI)()||(0,ux.Xb)((()=>{(e=>{setTimeout((()=>{const{ip:t,port:n,token:r,useStaticServer:o,useLanDebug:i}=(e.debugLaunchInfo||{}).lanDebugInfo||{};if((e.isDevEdition||i)&&(e.debugLaunchInfo,e.isDevEdition,t&&n&&r))return zx({ip:t,port:n,token:r,useStaticServer:o})}),500)})(oe.Z)}))}));const ik=(0,St.Fr)((0,Ii.Ce)(!1,"getLatestUserKey")),ak="getLatestUserKey";let sk={},ck=null;const lk={getLatestUserKey:function(e){(sk.expireTime&&sk.expireTime<Date.now()?Promise.resolve(sk):ck||(ck=ik({apiName:"webapi_getuserencryptkey",reqData:{}}).then((e=>{e=JSON.parse(e.rawData);const{encrypt_key:t,version:n,expire_in:r,iv:o}=e;return sk={encryptKey:t,version:n,expireTime:Date.now()+1e3*r,iv:o},ck=null,sk})).catch((e=>{throw ck=null,e})),ck)).then((t=>((0,p.FE)({name:ak,args:e,res:t}),null))).catch((t=>{(0,p.YG)(ak,e,t.message)}))},getRandomValues:dC};var dk=c(2031),uk=c.n(dk);const pk=()=>Math.floor(Date.now()/1e3),hk=()=>{const e="0123456789abcdef",t=t=>{let n="";for(;t--;)n+=e[Math.floor(Math.random()*e.length)];return n};return`${t(8)}-${t(4)}-4${t(3)}-8${t(3)}-${t(8)}`},fk=(e,t)=>{const n=t.map((t=>`${t}=${e[t]}`)).join("&");return uk()(n).toUpperCase()},gk=fp.app,_k="_private_@@financial_applet_events@@",mk="https://zlpoc.fdep.cn",yk="/api/v1/mop/runtime/external/check/app-packages",vk="applet_start",Ak={applet_start:"小程序启动",data_disclosure:"数据泄露",applet_crash:"小程序崩溃",sandbox_crash:"安全沙箱崩溃",operation_exception:"运维异常",access_exception:"无法访问业务内容",start_fail:"启动失败"},bk=new Promise((e=>oe.Z.onReady(e))),wk=function(){var e=ue()((function*(){var e,t;yield bk;const n=null===oe.Z||void 0===oe.Z||null===(e=oe.Z.appContactInfo)||void 0===e||null===(t=e.passThroughInfo)||void 0===t?void 0:t.finance_app_info;return n?{appId:n.finance_appid,sdkFingerprint:n.finance_sdk_fingerprint,sdkKey:n.finance_sdk_key,sdkSecret:n.finance_sdk_secret,sdkBundleId:n.finance_sdk_bundleid,sdkVersion:n.finance_sdk_version,appPkgList:n.finance_app_pkg_list,appSequence:n.finance_app_seq,appVersion:n.finance_app_version,organId:n.finance_organ_id,encryptionType:n.finance_encryption_type,isGray:n.is_gray,shouldCheck:n.should_check}:null}));return function(){return e.apply(this,arguments)}}(),Ck=function(){var e=ue()((function*(e){var t,n,r,o,i,a,s,c;const l="wechat",d="sha256",u=Math.floor(Date.now()/1e3),p=hk(),h=e.appPkgList.filter((e=>16===e.pkg_type))[0].pkg_sha256,f={source:l,identityType:d,apps:[{appId:e.appId,identity:h}],timestamp:u,uuid:p,sign:fk({timestamp:u,uuid:p,source:l,identityType:d,secret:e.sdkSecret},["identityType","source","timestamp","uuid","secret"])},g={"mop-sdk-key":e.sdkKey,"mop-encryption-type":e.encryptionType,"mop-sdk-fingerprint":e.sdkFingerprint},_=yield new Promise(((e,t)=>{(0,It.a)({method:"POST",url:`${mk}${yk}`,header:g,data:f,success:e,fail:t})}));if(wxNativeConsole.info(`[mop verify response] errcode=${null==_||null===(t=_.data)||void 0===t?void 0:t.errcode} error=${null==_||null===(n=_.data)||void 0===n?void 0:n.error}`),["FS_BIND_NOT_FOUND","MOP_SDK_FINGERPRINT_CHECK_FAIL"].includes(null==_||null===(r=_.data)||void 0===r?void 0:r.errcode))return!1;var m;if("OK"!==(null==_||null===(o=_.data)||void 0===o?void 0:o.errcode))throw new Error((null==_||null===(m=_.data)||void 0===m?void 0:m.error)||"mop verify failed");const y=null==_||null===(i=_.data)||void 0===i||null===(a=i.data)||void 0===a||null===(s=a.appList)||void 0===s?void 0:s[0];if(!y)throw new Error("cannot find app data in appList");if(["FS_APP_ID_NOT_FOUND","FS_IDENTITY_NOT_FOUND_ERR","FS_ORGAN_STATUS_INVALID","FS_COOPERATION_TERMINATED","FS_APP_NOT_ASS_BIND"].includes(null==y?void 0:y.errcode))return!1;if("OK"!==(null==y?void 0:y.errcode))throw new Error((null==y?void 0:y.error)||"mop verify failed");return!0===(null==y||null===(c=y.data)||void 0===c?void 0:c.identityValid)}));return function(t){return e.apply(this,arguments)}}(),Ik=function(){var e=ue()((function*(e,t){const n={applet_id:e.appId,applet_ver:e.appVersion,applet_sequence:e.appSequence,event_name:Ak[t],event_type:t,is_gray:e.isGray,organ_id:e.organId,basic_pack_version:oe.Z.SDKVersion,payload:{},timestamp:pk()};let r=gk.getStorageSync(_k);if(r=Array.isArray(r)?r:[],r.push(n),gk.setStorageSync(_k,r),!e.shouldCheck)return;const o=hk(),i=pk(),a={data:{app_info:{app_id:e.sdkBundleId,app_version:oe.Z.host.version+"",name:oe.Z.host.env,sdk_key:e.sdkKey,sdk_version:e.sdkVersion,finger:e.sdkFingerprint},device_info:{brand:oe.Z.brand,device_id:null,model:oe.Z.model,os:oe.Z.platform,os_version:oe.Z.system,screen_size:`${oe.Z.screenHeight}*${oe.Z.screenWidth}`},events:r},exp:{},timestamp:i,uuid:o,sign:fk({timestamp:i,uuid:o,secret:e.sdkSecret},["timestamp","uuid","secret"])},s={"mop-sdk-key":e.sdkKey,"mop-encryption-type":e.encryptionType,"mop-sdk-fingerprint":e.sdkFingerprint};try{var c;const e=yield new Promise(((e,t)=>{(0,It.a)({method:"POST",url:`${mk}/api/v1/mop/runtime/data-report/apm/private`,header:s,data:a,success:e,fail:t})}));var l;if("OK"!==(null==e||null===(c=e.data)||void 0===c?void 0:c.errcode))throw new Error((null==e||null===(l=e.data)||void 0===l?void 0:l.error)||"report failed");let t=gk.getStorageSync(_k);t=Array.isArray(t)?t:[],t=t.slice(r.length),gk.setStorageSync(_k,t)}catch(e){}}));return function(t,n){return e.apply(this,arguments)}}();Protect.hijack(),Protect.hijackWasm(),(0,si.DW)(),oe.Z.onReady(ue()((function*(){yield new Promise((e=>setTimeout(e,0)));const e=yield wk();if(!e||!e.appId)return;let t="initial";try{if(e.shouldCheck)try{if(!(yield Ck(e)))return n=oe.Z.accountInfo.appId,(0,u.IN)("private_openUrl",{url:`https://mp.weixin.qq.com/mp/waerrpage?appid=${n}&type=offshelf&offshelf_type=0#wechat_redirect`,isNativeStyle:!0}),(0,bi.T7)((()=>{Ai()})),void(t="rejected");t="passed"}catch(e){t="failed",wxNativeConsole.error("[mop verify error]",e)}else t="skipped";Ik(e,vk).catch((e=>{wxNativeConsole.error("[mop report error]",e)}))}catch(e){wxNativeConsole.error("[init financial app error]",e)}finally{wxNativeConsole.info("[financial check status]",t)}var n}))),oe.Z.onReady((()=>{c.g.__isAppServiceRemoteDebugMode__&&c.g.__remoteDebug__.setAppserviceHandlers({getCurrentPages:i.getCurrentPagesByDomain,invokeWebviewMethod:da.L})}));const Ek=Ju.connectSocket,Sk=Ju.closeSocket,Tk=Ju.sendSocketMessage,xk=Ju.onSocketOpen,kk=Ju.onSocketClose,Pk=Ju.onSocketMessage,Dk=Ju.onSocketError,Ok=hn.I9,Nk=hn.EO,Rk=hn.FI,Mk=hn.FE,Lk=hn.hv,Bk=xn,Fk=kn,Wk=fn,jk=gn,Uk=_n,Vk=mn,Gk=vn,$k=An,Hk=bn,Zk=e=>{(0,u.jQ)("onVoicePlayEnd",__errorTracer__.surroundThirdByTryCatch(e,"at onVoicePlayEnd callback function"))},Qk=yn.nH,Yk=Un,zk=Vn,qk=Gn,Jk=$n,Kk=Hn,Xk=Qn,eP=Yn,tP=zn,nP=Kb,rP=Xb,oP=ew,iP=nw,aP=ow,sP=cw,cP=rw,lP=iw,dP=lw,uP=dw,pP=pw,hP=hw,fP=gw,gP=_w,_P=vT,mP=yT,yP=Qc,vP=Yc.oK,AP=Yc.j8,bP=ke,wP=qc,CP=zc,IP=Jc,EP=Kc,SP=e=>{(0,u.IN)("chooseContact",e)},TP=(e={})=>{(0,u.IN)("chooseWeChatContact",e)},xP=Xc,kP=(e={})=>{(0,da.V)("quicklyAddBrandContact",e,{})},PP=el,DP=tl,OP=ua.showToast,NP=ua.hideToast,RP=ua.showLoading,MP=ua.hideLoading,LP=ua.showModal,BP=ua.showActionSheet,FP=ua.showShareActionSheet,WP=fa,jP=ga,UP=_a,VP=Aa,GP=ba,$P=wa,HP=Ca,ZP=(e={})=>{if(k.wZ&&oe.Z.clientVersion<654313216||k.cj&&oe.Z.clientVersion<385877760){const t={errMsg:"hideHomeButton:ok"};"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}else(0,u.IN)("hideHomeButton",e,{})},QP=ia.BN.dv,YP=ia.BN.KQ,zP=ia.BN.rf,qP=ia.BN.hx,JP=ia.BN.mt,KP=ia.BN.bz,XP=ia.BN.R0,eD=ia.BN.Hw,tD=ia.BN.ri,nD=_p.clearStorage,rD=_p.clearStorageSync,oD=_p.getStorage,iD=_p.getStorageInfo,aD=_p.getStorageInfoSync,sD=_p.getStorageSync,cD=_p.removeStorage,lD=_p.removeStorageSync,dD=_p.setStorage,uD=_p.setStorageSync,pD=e=>{if((0,p.r3)("getBackgroundFetchData",e,{fetchType:""}))if("pre"===e.fetchType||"periodic"===e.fetchType)try{(0,p.IN)("getBackgroundFetchData",{fetchType:e.fetchType,success(t){(0,p.FE)({name:"getBackgroundFetchData",args:e,res:t})},fail(t){(0,p.FE)({name:"getBackgroundFetchData",args:e,success:!1,errMsg:t.errMsg,res:t})},complete(){}})}catch(t){"function"==typeof e.fail&&e.fail({errMsg:`getBackgroundFetchData:fail ${t.message}`}),"function"==typeof e.complete&&e.complete({errMsg:`getBackgroundFetchData:fail ${t.message}`})}else(0,p.YG)("getBackgroundFetchData",e,"invalid fetchType")},hD=e=>{try{(0,p.jQ)("onBackgroundFetchData",(t=>{t.errMsg="onBackgroundFetchData:ok","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundFetchData callback function")(t)}))}catch(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundFetchData callback function")(t)}},fD=(e={})=>{(0,p.r3)("setBackgroundFetchToken",e,{token:""})&&(0,p.IN)("setBackgroundFetchToken",e)},gD=(e={})=>{(0,p.IN)("getBackgroundFetchToken",e)},_D={},mD={drawCanvas:X.drawCanvas,createContext:X.createContext,createCanvasContext:X.createCanvasContext,canvasToTempFilePath:X.canvasToTempFilePath,canvasGetImageData:X.canvasGetImageData,canvasPutImageData:X.canvasPutImageData,createOffscreenCanvas:X.createOffscreenCanvas,getAccountInfoSync:bi.E2,getShareInfo:QP,authPrivateMessage:KP,pageScrollTo:Na,chooseInvoiceTitle:ia.n7,chooseInvoice:ia.FH,_openCustomerServiceChat:ia.FT,arrayBufferToBase64:__errorTracer__.surroundThirdByTryCatch(h.sM),base64ToArrayBuffer:__errorTracer__.surroundThirdByTryCatch(h.RG),openSetting:ia.as,getExtConfig:(e={})=>{setTimeout((()=>{const t={errMsg:"getExtConfig: ok",extConfig:Is()};"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}),0)},chooseMedia:ur,previewMedia:fr,chooseMultiMedia:(e={})=>{(0,u.IN)("chooseMultiMedia",e)},chooseMessageFile:dr,chooseWeChatContact:TP,uploadEncryptedFileToCDN:(e={})=>{(0,u.IN)("uploadEncryptedFileToCDN",e,{})},onUploadEncryptedFileToCDNProgress:e=>{(0,u.jQ)("onUploadEncryptedFileToCDNProgress",e)},uploadToCommonCDN:(e={})=>{if((0,aa.J)("uploadToCommonCDN"))(0,u.IN)("uploadToCommonCDN",e,{});else{const t="uploadToCommonCDN:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},getExtConfigSync:Is,showShareMenu:YP,hideShareMenu:zP,updateShareMenu:qP,shareAppMessageForFakeNative:JP,openUrl:Cp.Yo,setNavigationBarColor:VP,setNavigationBarAlpha:GP,showShareImageMenu:XP,shareFileMessage:eD,shareVideoMessage:tD,vibrateShort:IP,vibrateLong:EP,getSetting:ia.$8,checkIsSupportFacialRecognition:ia.CI.Ys,startFacialRecognitionVerify:ia.CI.J2,startFacialRecognitionVerifyAndUploadVideo:ia.CI.sQ,startCustomFacialRecognitionVerify:ia.CI.fP,startCustomFacialRecognitionVerifyAndUploadVideo:ia.CI.IQ,sendBizRedPacket:ia.Me.FA,sendGoldenRedPacket:ia.Me.Ns,openGoldenRedPacketDetail:ia.Me.IS,showRedPackage:ia.Me.qU,addPhoneContact:xP,quicklyAddBrandContact:kP,searchContacts:PP,privateSearchContacts:DP,setScreenBrightness:wP,getScreenBrightness:CP,shareToWeRun:ia.NL,getWeRunData:ia.wN,uploadWeRunData:ia.z9,addWeRunData:ia.p4,canIUse:function(e=""){if("string"!=typeof e)throw new h.l0("canIUse: schema should be a string");const t=e.split(".");return!!function(e,t,n){const r=mp[e];return!(!r||t&&!(t in r)||n&&(!Array.isArray(r[t])||r[t].indexOf(n)<0))}(...t)||(!!function(e,t){const n=yp.class[e];return!(!n||t&&n.indexOf(t)<0)}(...t)||!!function(e,t,n,r){const o=yp.method[e];if(!o)return!1;if(t&&!o[t])return!1;if(n&&!o[t][n])return!1;if(r){const e=o[t][n];if(!Array.isArray(e)||e.indexOf(r)<0)return!1}return!0}(...t))},setPageStyle:Fa,triggerGettingWidgetData:(e={})=>{(0,u.r3)("triggerGettingWidgetData",e,{cacheKey:""})&&(0,u.IN)("triggerGettingWidgetData",e,{})},navigateToMiniProgram:Y.Be,navigateToMiniProgramDirectly:Y.t4,navigateToDevMiniProgram:e=>{vi(e,"/")},navigateBackMiniProgram:(e={})=>{yi?(0,u.IN)("navigateBackMiniProgram",e,{}):(0,u.YG)("navigateBackMiniProgram",e,"not MiniProgram can navigate back.")},launchMiniProgram:(e={})=>{const t=Object.assign({},e);t.path&&(t.path=(0,h.Pp)(t.path)),(0,u.IN)("launchMiniProgram",t)},launchDevMiniProgram:(e={})=>{if(!(0,u.r3)("launchDevMiniProgram",e,{appId:""}))return;const t=Object.assign({},e);t.path=(0,h.Pp)(t.path),"string"==typeof t.path&&void 0===t.relativeURL&&(t.relativeURL=t.path),(0,u.IN)("launchDevMiniProgram",t,{})},exitMiniProgram:Ai,launchApplicationDirectly:wp.dx,launchApplicationForNative:wp.oM,setNavigationBarRightButton:$P,onTapNavigationBarRightButton:HP,setTopBarText:(e={})=>{e.text?Date.now()-Ia<5e3?(0,u.YG)("setTopBarText",e,"invoke too frequently"):(0,u.IN)("setTopBarText",e,{beforeSuccess(){Ia=Date.now()}}):(0,u.YG)("setTopBarText",e,"invalid text")},setTabBarBadge:(e={})=>{if(!(0,u.r3)("setTabBarBadge",e,{index:0,text:""}))return;const t=Object.assign({},e);t.badgeValue=t.text,t.type="text",function(e){if(null==e)return 0;"string"!=typeof e&&(e+="");return e.replace(/[^\x00-\xff]/g,"01").length}(t.badgeValue)>4&&(t.badgeValue="..."),(0,u.IN)("setTabBarBadge",t)},removeTabBarBadge:(e={})=>{if(!(0,u.r3)("setTabBarBadge",e,{index:0}))return;const t=Object.assign({},e);t.type="none",(0,u.IN)("setTabBarBadge",t,{beforeAll(e){e.errMsg=e.errMsg.replace("setTabBarBadge","removeTabBarBadge")}})},showTabBarRedDot:(e={})=>{if(!(0,u.r3)("setTabBarBadge",e,{index:0}))return;const t=Object.assign({},e);t.type="redDot",(0,u.IN)("setTabBarBadge",t,{beforeAll(e){e.errMsg=e.errMsg.replace("setTabBarBadge","showTabBarRedDot")}})},hideTabBarRedDot:(e={})=>{if(!(0,u.r3)("setTabBarBadge",e,{index:0}))return;const t=Object.assign({},e);t.type="none",(0,u.IN)("setTabBarBadge",t,{beforeAll(e){e.errMsg=e.errMsg.replace("setTabBarBadge","hideTabBarRedDot")}})},showTabBar:(e={})=>{void 0===e.animation&&(e.animation=!1),(0,u.r3)("showTabBar",e,{animation:!0})&&(0,u.IN)("showTabBar",e,{beforeSuccess:()=>ka=!0})},hideTabBar:(e={})=>{void 0===e.animation&&(e.animation=!1),(0,u.r3)("hideTabBar",e,{animation:!0})&&(0,u.IN)("hideTabBar",e,{beforeSuccess:()=>ka=!1})},setTabBarStyle:(e={})=>{(0,u.IN)("setTabBarStyle",e)},setTabBarItem:(e={})=>{if((0,u.r3)("setTabBarItem",e,{index:0}))if(0!==(e.iconPath||"").indexOf("."))if(0!==(e.selectedIconPath||"").indexOf(".")){try{(0,re.n)(e,"text")||(e.text=Pa[e.index].text||""),Pa[e.index].text=e.text}catch(e){e.message}(0,u.IN)("setTabBarItem",e)}else(0,u.YG)("setTabBarItem",e,"selectedIconPath invalid, require absolute path");else(0,u.YG)("setTabBarItem",e,"iconPath invalid, require absolute path")},setBackgroundColor:Qa,setBackgroundTextStyle:Ya,setEnableDebug:Ep,captureScreen:yP,onUserCaptureScreen:vP,offUserCaptureScreen:AP,setKeepScreenOn:bP,checkIsSupportSoterAuthentication:ia.Y6.$8,startSoterAuthentication:ia.Y6.WO,checkIsSoterEnrolledInDevice:ia.Y6.vW,openDeliveryList:Cp.vS,navigateBackH5:e=>{AT?(0,u.IN)("navigateBackH5",e):(0,u.YG)("navigateBackH5",e,"not HTML5 page can navigate back.")},openBusinessView:e=>{if(!(0,u.r3)("openBusinessView",e,{businessType:""}))return;const t=Object.assign({},e);delete t.sourcetype,delete t.preScene,delete t.preSceneNote,delete t.agentId,delete t.privateExtraData,delete t.scene,delete t.sceneNote,(0,u.IN)("openBusinessView",t)},navigateBackApplication:(e={})=>{if(7!==oe.Z.appType)return void(0,u.YG)(e,"permission denied",1);let t="";(0,O.Kn)(e.extraData)&&(t=JSON.stringify(e.extraData));const n=bT("navigateBackApplication",Object.assign({},e,{extraData:t}));(0,u.IN)("navigateBackApplication",n)},navigateBackNative:(e={})=>{let t="";(0,O.Kn)(e.extraData)&&(t=JSON.stringify(e.extraData)),k.cj&&oe.Z.clientVersion<=385877035||k.wZ&&oe.Z.clientVersion<=654312491?(0,u.YG)("navigateBackNative",e,"does not exist."):(0,u.IN)("navigateBackNative",Object.assign({},e,{extraData:t}))},reportIDKey:()=>{},reportKeyValue:()=>{},setWindowSize:(e={})=>{(0,u.YG)("setWindowSize",e,"deprecated")},setNavigationBarTitle:WP,showNavigationBarLoading:jP,hideNavigationBarLoading:UP,hideHomeButton:ZP,startPullDownRefresh:Ra,stopPullDownRefresh:Ma,operateWXData:ia.Lo,getOpenDeviceId:ia.PT,getMenuButtonBoundingClientRect:qa.z,getSelectedTextRange:(e={})=>{const t=ja();if(k.wZ&&Ja&&t===f.Z.currentWebviewId)return(0,u.nY)("xWebGetSelectedTextRange",{taskId:Ka}),void(Xa[Ka++]=e);(0,da.L)("getSelectedTextRange",{},[f.Z.currentWebviewId],(t=>{0===t.errMsg.indexOf("getSelectedTextRange:ok")?e.success&&e.success(t):e.fail&&e.fail(t),e.complete&&e.complete(t)}))},enableAlertBeforeUnload:function(e={}){const t="enableAlertBeforeUnload",n=Reporter.surroundThirdByTryCatch(e.success||za,`at api ${t} success callback function`),r=Reporter.surroundThirdByTryCatch(e.fail||za,`at api ${t} fail callback function`),o=Reporter.surroundThirdByTryCatch(e.complete||za,`at api ${t} complete callback function`),i="string"==typeof e.message?e.message:void 0;(0,u.IN)("setNavigateBackConfirmDialog",{enable:!0,content:i,success:n,fail:r,complete:o},{beforeSuccess(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)},beforeFail(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)}})},disableAlertBeforeUnload:function(e={}){const t="disableAlertBeforeUnload",n=Reporter.surroundThirdByTryCatch(e.success||za,`at api ${t} success callback function`),r=Reporter.surroundThirdByTryCatch(e.fail||za,`at api ${t} fail callback function`),o=Reporter.surroundThirdByTryCatch(e.complete||za,`at api ${t} complete callback function`);(0,u.IN)("setNavigateBackConfirmDialog",{enable:!1,success:n,fail:r,complete:o},{beforeSuccess(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)},beforeFail(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)}})},setNavigateBackInterception:oa.vJ,stopNavigateBackInterception:oa.J_,makeBluetoothPair:$l,openBluetoothAdapter:nl,closeBluetoothAdapter:rl,getBluetoothAdapterState:ol,onBluetoothAdapterStateChange:Sl,offBluetoothAdapterStateChange:Tl,startBluetoothDevicesDiscovery:il,stopBluetoothDevicesDiscovery:al,getBluetoothDevices:sl,getConnectedBluetoothDevices:ll,createBLEConnection:dl,setBLEMTU:xl,closeBLEConnection:ul,getBLEDeviceServices:pl,getBLEDeviceRSSI:cl,getBLEDeviceCharacteristics:hl,createBLEPeripheralServer:(e={})=>{(0,u.IN)("createBLEPeripheralServer",e,{beforeSuccess(e){const t=e.serverId,n=new jl(t);delete e.serverId,e.server=n}})},onBLEPeripheralConnectionStateChanged:Vl,offBLEPeripheralConnectionStateChanged:Gl,notifyBLECharacteristicValueChanged:fl,notifyBLECharacteristicValueChange:gl,readBLECharacteristicValue:_l,writeBLECharacteristicValue:ml,onBluetoothDeviceFound:Il,offBluetoothDeviceFound:El,onBLEConnectionStateChanged:yl,onBLEConnectionStateChange:Al,onBLECharacteristicValueChange:wl,offBLEConnectionStateChanged:vl,offBLEConnectionStateChange:bl,offBLECharacteristicValueChange:Cl,startBeaconDiscovery:jc,stopBeaconDiscovery:Uc,getBeacons:Vc,onBeaconUpdate:Gc,offBeaconUpdate:$c,onBeaconServiceChange:Hc,offBeaconServiceChange:Zc,startWifi:Hl,stopWifi:Zl,getWifiList:Ql,getConnectedWifi:Yl,connectWifi:zl,presetWifiList:ql,setWifiList:Jl,onGetWifiList:Kl,onWifiConnected:ed,offGetWifiList:Xl,offWifiConnected:td,onEvaluateWifi:od,getHCEState:id,startHCE:ad,stopHCE:sd,sendHCEMessage:cd,onHCEMessage:ld,offHCEMessage:dd,getNFCAdapter:Od,startLocalServiceDiscovery:Bd,stopLocalServiceDiscovery:Fd,onLocalServiceFound:Wd,offLocalServiceFound:jd,onLocalServiceLost:Ud,offLocalServiceLost:Vd,onLocalServiceDiscoveryStop:Gd,offLocalServiceDiscoveryStop:$d,onLocalServiceResolveFail:Hd,offLocalServiceResolveFail:Zd,redirectTo:ni.gB,reLaunch:ni.UY,navigateTo:ni.T8,switchTab:ni.MR,navigateBack:ni.n,onAppShow:bi.av,offAppShow:bi.GB,onAppHide:bi.$m,offAppHide:bi.DC,onError:bi.qQ,offError:bi.uc,onUnhandledRejection:bi.Ze,offUnhandledRejection:bi.pL,getLaunchOptionsSync:bi.Ir,getEnterOptionsSync:bi.rN,onWindowResize:$a.KN,offWindowResize:$a.rD,setPageOrientation:Ha,getStorage:oD,getStorageSync:sD,setStorage:dD,setStorageSync:uD,removeStorage:cD,removeStorageSync:lD,clearStorage:nD,clearStorageSync:rD,getStorageInfo:iD,getStorageInfoSync:aD,getBackgroundFetchData:pD,onBackgroundFetchData:hD,setBackgroundFetchToken:fD,getBackgroundFetchToken:gD,request:It.W,connectSocket:Ek,closeSocket:Sk,sendSocketMessage:Tk,onSocketOpen:xk,onSocketClose:kk,onSocketMessage:Pk,onSocketError:Dk,uploadFile:vu,downloadFile:Ei.S,addNativeDownloadTask:(e={})=>{k.cj?(0,u.YG)("addNativeDownloadTask",e,"iOS not supported"):(0,u.IN)("addNativeDownloadTask",e,{})},downloadApp:(e={})=>{if(k.cj)(0,u.YG)("downloadApp",e,"iOS not supported");else{if(!(0,u.r3)("downloadApp",e,{taskName:"",taskUrl:"",fileMd5:""}))return null;e.fileType=e.fileType||1;try{return new ip(e)}catch(t){return(0,u.YG)("downloadApp",e,t.message),null}}},installDownloadApp:(e={})=>{k.cj?(0,u.YG)("installDownloadApp",e,"iOS not supported"):(0,u.r3)("installDownloadApp",e,{downloadId:""})&&(0,u.IN)("installDownloadTaskForNative",e,{beforeAll(e){e.errMsg=e.errMsg.replace("installDownloadTaskForNative","installDownloadApp")}})},getAppInstallState:(e={})=>{k.cj?(0,u.YG)("getAppInstallState",e,"iOS not supported"):e.packageName||e.packageNameArray?(0,u.IN)("getInstallStateForNative",e,{beforeAll(e){e.errMsg=e.errMsg.replace("getInstallStateForNative","getAppInstallState")}}):(0,u.YG)("getAppInstallState",e,"parameter error: require packageName or packageNameArray")},queryDownloadAppTask:(e={})=>{k.cj?(0,u.YG)("queryDownloadAppTask",e,"iOS not supported"):e.downloadId||e.downloadIdArray||e.appIdArray?(0,u.IN)("queryDownloadTaskForNative",e,{beforeAll(e){e.errMsg=e.errMsg.replace("queryDownloadTaskForNative","queryDownloadAppTask"),"download_succ"===e.state&&(e.progress=100),(e.result||[]).forEach((e=>{"download_succ"===e.state&&(e.progress=100)}))}}):(0,u.YG)("queryDownloadAppTask",e,"parameter error: require downloadId or downloadIdArray or appIdArray")},cancelDownloadAppTask:(e={})=>{k.cj?(0,u.YG)("cancelDownloadAppTask",e,"iOS not supported"):(0,u.r3)("cancelDownloadAppTask",e,{downloadIdArray:[]})&&(0,u.IN)("cancelDownloadTaskForNative",e,{beforeAll(e){e.errMsg=e.errMsg.replace("cancelDownloadTaskForNative","cancelDownloadAppTask")}})},resumeDownloadAppTask:(e={})=>{k.cj?(0,u.YG)("resumeDownloadAppTask",e,"iOS not supported"):(0,u.r3)("resumeDownloadAppTask",e,{downloadId:""})&&(0,u.IN)("resumeDownloadTaskForNative",e,{beforeAll(e){e.errMsg=e.errMsg.replace("resumeDownloadTaskForNative","resumeDownloadAppTask")}})},pauseDownloadAppTask:(e={})=>{k.cj?(0,u.YG)("pauseDownloadAppTask",e,"iOS not supported"):(0,u.r3)("pauseDownloadAppTask",e,{downloadId:""})&&(0,u.IN)("pauseDownloadTaskForNative",e,{beforeAll(e){e.errMsg=e.errMsg.replace("pauseDownloadTaskForNative","pauseDownloadAppTask")}})},onDownloadAppStateChange:e=>{(0,u.jQ)("onDownloadAppStateChangeForNative",((t={})=>{__errorTracer__.surroundThirdByTryCatch(e,"at onDownloadAppStateChange callback function")(t)}))},downloadAppForIOS:(e={})=>{if(!k.wZ)return(0,u.r3)("downloadAppForIOS",e,{appUrl:""})?((0,u.IN)("downloadAppInternalForNative",e,{beforeAll(e){e.errMsg=e.errMsg.replace("downloadAppInternalForNative","downloadAppForIOS")}}),null):null;(0,u.YG)("downloadAppForIOS",e,"android not supported")},calRqt:(e={})=>{(0,u.r3)("calRqt",e,{rqt:""})&&(0,u.IN)("calRqt",e)},secureTunnel:e=>{(0,u.IN)("secureTunnel",e)},chooseImage:Ok,previewImage:Nk,getImageInfo:Rk,saveImageToPhotosAlbum:Mk,compressImage:Lk,startRecord:Bk,stopRecord:Fk,playVoice:Gk,pauseVoice:$k,stopVoice:Hk,onVoicePlayEnd:Zk,chooseVideo:Wk,saveVideoToPhotosAlbum:jk,getVideoInfo:Uk,compressVideo:Vk,loadFontFace:Qk,createMediaContainer:Or,createMediaRecorder:so,createVideoDecoder:Gr,openVideoEditor:lo,createMediaAudioPlayer:ar,createWebAudioContext:()=>{const e=new Ct;bt.Z&&bt.Z.WXAUDIO&&e&&"function"==typeof e.create&&e.create();const t=[];return["close","resume","suspend"].forEach((n=>{const r=e[n];Object.defineProperty(e,n,{configurable:!1,get:()=>function(){return r.call(e),new Promise((n=>{t.push(n);const o=e.onstatechange;e.onstatechange=()=>{"function"==typeof o&&o();const n=t.pop();n&&n(),e.onstatechange=o},r.call(e)}))}.bind(e)})})),e},getLocation:ps,openLocation:gs,chooseLocation:hs,choosePoi:fs,onLocationChange:ms,offLocationChange:ys,onLocationChangeError:As,offLocationChangeError:bs,startLocationUpdateBackground:function(e){const t={subKey:"",enableIndoor:!1};Object.assign(t,e),(0,u.IN)("enableLocationUpdateBackground",t,{beforeAll(e){e.errMsg=e.errMsg.replace("enableLocationUpdateBackground","startLocationUpdateBackground")}})},startLocationUpdate:ws,stopLocationUpdate:Cs,getNetworkType:gc.getNetworkType,onNetworkStatusChange:gc.onNetworkStatusChange,offNetworkStatusChange:gc.offNetworkStatusChange,getSystemInfo:wi.So,getSystemInfoSync:wi.xI,getSystemInfoAsync:wi.jC,getBatteryInfo:hc,getBatteryInfoSync:fc,startAccelerometer:yc,stopAccelerometer:vc,onAccelerometerChange:wc,offAccelerometerChange:bc,startCompass:Ec,stopCompass:Sc,onCompassChange:kc,offCompassChange:xc,startDeviceMotionListening:Xd,stopDeviceMotionListening:eu,onDeviceMotionChange:tu,offDeviceMotionChange:nu,startGyroscope:Yd,stopGyroscope:zd,onGyroscopeChange:qd,offGyroscopeChange:Jd,checkIsOpenAccessibility:e=>{(0,u.IN)("checkIsOpenAccessibility",e)},addPhoneCalendar:iu,addPhoneRepeatCalendar:au,getRandomValues:dC,getWebviewDebugInfo:function(e){const t=su++;cu[t]=e,(0,u.nY)("getWebviewDebugInfo",{callbackId:t},[f.Z.currentWebviewId])},reportAction:e=>{(0,u.IN)("reportAction",e)},getBackgroundAudioManager:jn,getRecorderManager:Tn,getBackgroundAudioPlayerState:Yk,playBackgroundAudio:zk,pauseBackgroundAudio:qk,seekBackgroundAudio:Jk,stopBackgroundAudio:Kk,onBackgroundAudioPlay:Xk,onBackgroundAudioPause:eP,onBackgroundAudioStop:tP,joinVoIPChat:nP,exitVoIPChat:rP,updateVoIPChatMuteConfig:oP,onVoIPChatMembersChanged:iP,onVoIPChatSpeakersChanged:aP,onVoIPChatInterrupted:sP,offVoIPChatMembersChanged:cP,offVoIPChatSpeakersChanged:lP,offVoIPChatInterrupted:dP,subscribeVoIPVideoMembers:uP,onVoIPVideoMembersChanged:pP,offVoIPVideoMembersChanged:hP,onVoIPChatStateChanged:fP,offVoIPChatStateChanged:gP,join1v1Chat:_P,setEnable1v1Chat:mP,requestSubscribeMessage:ia.FD,getUserCryptoManager:()=>lk,login:ia.x4,logout:ia.kS,checkSession:ia.bV,authorize:ia.Iq,getUserInfo:ia.bG,getUserProfile:ia.et,requestPayment:ia.mG.Ls,verifyPaymentPassword:ia.mG.H_,bindPaymentCard:ia.mG.y$,requestPaymentToBank:ia.mG.FS,requestVirtualPayment:ia.mG.bu,openOfflinePayView:ia.mG.Jf,openWCPayCardList:ia.mG.Mv,requestMallPayment:ia.mG.DF,setCurrentPaySpeech:ia.mG.He,loadPaySpeechDialectConfig:ia.mG.J7,requestJointPayment:ia.mG.UQ,getWCPayOverseaPrepayRequest:ia.mG.EJ,requestH5Transaction:ia.mG.fi,openWCPayOverseaPaymentReceive:ia.mG.oJ,handleWCPayOverseaWalletBuffer:ia.mG.TI,requestVerifyUserIdentity:ia.mG.eA,requestPersonalPay:ia.mG.Jp,phoneBindCardVerifySms:ia.mG.LD,faceVerifyForPay:ia.YX,openOfficialAccountProfile:ia.sT,openUserProfile:ia.DZ,requestBizSplitBillPayment:ia.Qx,openSelectPayment:ia.mG.MQ,requestEntrustAuthorization:ia.mG.y,requestFacetoFacePayment:ia.mG.jo,requestQueryCashier:ia.mG.ck,requestOrderPayment:ia.mG.t9,openMiniProgramProfile:ia.DS,openMiniProgramSearch:ia.fo,openMiniProgramHistoryList:ia.NS,openMiniProgramStarList:ia.kH,batchGetContactDirectly:ia.vP,preloadMiniProgramEnvDirectly:ia.$T,predownloadMiniProgramPackageDirectly:ia.We,preventApplePayUI:ia.Z8,getWxSecData:ia.IB,addCard:ia.In.Z,openCard:ia.In.H,checkTrafficCardConditions:ia.OA.Pi,queryTrafficCardInfo:ia.OA.Jn,issueTrafficCard:ia.OA.PR,rechargeTrafficCard:ia.OA.s$,setDefaultTrafficCard:ia.OA.Z8,addFileToFavorites:ia.lB.z,addVideoToFavorites:ia.lB.O,openChannelsCreateContact:ia.CE.j,scanCode:Nc,openQRCode:(e={})=>{(0,u.r3)("openQRCode",e,{})&&(0,u.IN)("openQRCode",e)},scanItem:Lc,privateScanItem:(e={})=>{(0,u.r3)("scanItem",e,{})&&(0,u.IN)("scanItem",I()(I()({},e),{},{data:JSON.stringify({appId:oe.Z.accountInfo.appId,path:f.Z.lastRoute}),success:()=>{},fail:()=>{},complete:t=>{0!==t.errMsg.indexOf("scanItem:fail")?Mc({reqKey:t.reqKey,success:e.success,fail:e.fail,complete:e.complete}):(0,u.YG)("scanItem",e,t.errMsg.substr(14).trim(),t.errCode)}}))},chooseAddress:ia.OO,saveFile:ap.yH,openDocument:ap.KK,getSavedFileList:ap.rW,getSavedFileInfo:ap.vL,getFileInfo:ap.hr,removeSavedFile:ap.bh,getFileSystemManager:()=>sp.ZP.app,saveFileToDisk:Iw,getABTestConfig:pu._,chooseContact:SP,removeUserCloudStorage:e=>{const t=(0,vp.M)(e.keyList);t?(0,u.YG)("removeUserCloudStorage",e,t):Ap(e)},setUserCloudStorage:(e={})=>{Array.isArray(e.KVDataList)?0!==e.KVDataList.length?e.KVDataList.some((e=>{if("object"!=typeof e||"string"!=typeof e.key||"string"!=typeof e.value)return!0}))?(0,u.YG)("setUserCloudStorage",e,"invalid KVData item"):bp(e):(0,u.YG)("setUserCloudStorage",e,"KVDataList.length must greater than 0"):(0,u.YG)("setUserCloudStorage",e,"KVDataList must be an Array")},makePhoneCall:Pc,makeVoIPCall:Dc,onAppRoute:bi.HM,onAppRouteDone:bi.qS,onAppEnterBackground:bi.JG,onAppEnterForeground:bi.T7,onAppUnhang:bi.py,onPageReload:e=>{Ea.call(mD,e)},onPageNotFound:bi.fA,offPageNotFound:bi.X0,onThemeChange:bi.SM,offThemeChange:bi.hn,onCopyUrl:bi.tE,offCopyUrl:bi.dY,createAnimation:Ga,createInnerAudioContext:Lo,getAvailableAudioSources:qn,onAudioInterruptionBegin:mr,offAudioInterruptionBegin:yr,onAudioInterruptionEnd:Ar,offAudioInterruptionEnd:br,setInnerAudioOption:Jn,createAudioContext:(e,t)=>{const n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==o.getRootNodeId(f.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return Vo.call(mD,e,f.Z.currentWebviewId,n)},createVideoContext:(e,t)=>{const n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==o.getRootNodeId(f.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return ie.Au.call(mD,e,f.Z.currentWebviewId,n)},createMapContext:(e,t)=>{const n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==o.getRootNodeId(f.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return Z.call(mD,e,f.Z.currentWebviewId,n)},createCameraContext:()=>Te.call(mD,null,f.Z.currentWebviewId),createLivePlayerContext:(e,t)=>{const n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==o.getRootNodeId(f.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return Ye.call(mD,e,f.Z.currentWebviewId,n)},createLivePusherContext:()=>ht.call(mD,null,f.Z.currentWebviewId),onWebviewEvent:xa.Z,onNativeEvent:e=>{["onCanvasTouchStart","onCanvasTouchMove","onCanvasTouchEnd"].forEach((t=>{(0,u.jQ)(t,((n,r)=>{e({data:n,eventName:t,webviewId:r})}))}))},hideKeyboard:e=>{if(k.gm||k.qB||k.Ae)(0,u.nY)("hideKeyboard",{});else{const t=ja();k.wZ&&Ua&&t===f.Z.currentWebviewId?((0,u.nY)("hideXWebKeyboard",{},[t]),e&&"function"==typeof e.success&&e.success({errMsg:"hideKeyboard:ok"}),e&&"function"==typeof e.complete&&e.complete({errMsg:"hideKeyboard:ok"})):(0,u.IN)("hideKeyboard",e)}},onKeyboardHeightChange:e=>{(0,u.jQ)("onKeyboardHeightChange",((t={})=>{__errorTracer__.surroundThirdByTryCatch(e,"at onKeyboardHeightChange callback function")(t)}))},offKeyboardHeightChange:()=>{(0,u.jQ)("onKeyboardHeightChange",(()=>{}))},getPublicLibVersion:Ip,showModal:LP,showToast:OP,hideToast:NP,showLoading:RP,hideLoading:MP,showActionSheet:BP,showShareActionSheet:FP,reportAnalytics:(e,t)=>{const r=void 0!==i&&void 0!==i.getCurrentPagesByDomain&&i.getCurrentPagesByDomain(""),o=r&&r.pop&&r.pop(),a={business:"mmbizwxaanalytics",eventID:e,data:t||{},page:o&&o.__route__,uid:Date.now().toString(16)+Math.random().toString(16).substr(2),type:1,version:n&&n.version&&n.version.version||0};k.gm||(console.info("[自定义分析] 上报成功"),console.info(a)),(0,u.IN)("reportRealtimeAction",{actionData:JSON.stringify(a)})},reportMonitor:(e,t)=>{if(!e)return void console.error("wx.reportMonitor: require 'name' argument.");if(void 0===t&&(t=1),"number"!=typeof t)return void console.error("wx.reportMonitor: 'value' argument must be a Number.");const n=JSON.stringify({business:"mmbizwxamonitor",name:e,value:t,timeStamp:Date.now()});(0,u.IN)("reportRealtimeAction",{actionData:n})},getClipboardData:Fc,setClipboardData:Wc,createSelectorQuery:function(e){return Us(e,"")},createIntersectionObserver:function(e,t){return Hs(e,t,"")},createMediaQueryObserver:function(e,t){return zs(e,t,"")},nextTick:Xs,updatePerfData:e=>{(0,u.IN)("updatePerfData",e)},traceEvent:e=>{(0,u.IN)("traceEvent",e)},onMemoryWarning:(e,t=!1)=>{t?Uh=e:Gh(e)},offMemoryWarning:(e,t=!1)=>{t?Uh=null:$h(e)},reportPerformance:function(e,t,n){vf(e,t,n)},getPerformance:function(){return qf},getUpdateManager:()=>dg,updateWeChatApp:pg,createWorker:GC,voiceSplitJoint:(e={})=>{(0,u.IN)("voiceSplitJoint",e)},uploadSilkVoice:(e={})=>{(0,u.IN)("uploadSilkVoice",e)},downloadSilkVoice:(e={})=>{(0,u.IN)("downloadSilkVoice",e)},getResPath:(e={})=>{(0,u.IN)("getResPath",e)},setResPath:(e={})=>{(0,u.IN)("setResPath",e)},setCookies:si.lE,getCookies:si.$1,faceDetect:function(e={}){(0,u.IN)("faceDetect",e)},initFaceDetect:function(e={}){(0,u.IN)("faceProcessInit",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"initFaceDetect:$2")}})},stopFaceDetect:function(e={}){(0,u.IN)("faceProcessStop",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"stopFaceDetect:$2")}})},createBufferURL:qT,revokeBufferURL:JT,createSignal:KT,bindGroup:(e={})=>{(0,u.IN)("bindGroup",e)},joinGroup:(e={})=>{k.wZ&&oe.Z.clientVersion<654316032||k.cj?(0,Ii.JM)({apiName:"wxaapi_wxajoinchatroom",reqData:{groupid:e.groupId,nonce_str:e.nonceStr,signature:e.signature},success(e){const t=JSON.parse(e.rawData);(0,u.IN)("private_openUrl",{url:t.join_chatroom_url,isNativeStyle:!0})},fail({errMsg:e}){(0,ua.showToast)({title:e.replace(/^\w+:fail\s+/,""),icon:"none"})},complete(){(0,u.FE)({name:"joinGroup",args:e})}}):(0,u.IN)("joinGroup",e)},getLabInfo:(e={})=>{(0,u.r3)("getLabInfo",e,{labId:""})&&(0,u.IN)("getLabInfo",e)},setLabInfo:(e={})=>{(0,u.r3)("setLabInfo",e,{labId:"",enabled:Boolean()})&&(0,u.IN)("setLabInfo",e)},createUDPSocket:Nw,createTCPSocket:Jw,env:JI,error:Hr,isSystemError:e=>e.toString().endsWith(1),isSDKError:e=>e.toString().endsWith(2),isThirdError:e=>e.toString().endsWith(3),createRewardedVideoAd:e=>{const t=I()({},e);return delete t.pluginId,Zb(t)},createInterstitialAd:e=>{const t=I()({},e);return delete t.pluginId,new Db(t)},createCustomAd:e=>{const t=I()({},e);return delete t.pluginId,new Ub(t)},preloadVideoAd:e=>{if(console.warn("注意：wx.preloadVideoAd接口即将下线，请使用wx.preloadAd替换。"),Array.isArray(e))for(let t=0,n=e.length;t<n;t++){const n=e[t];-1===Ui.indexOf(n)?Ui.length>=Vi?console.warn(`preloadVideoAd最多预加载${Vi}个广告单元,${n}将不被预加载`):(Ui.push(n),ji(n)):console.warn(`preloadVideoAd已预加载过${n}这个广告单元,请勿重复调用`)}else console.warn("preloadVideoAd参数应为数组")},preloadAd:e=>{if(Array.isArray(e))for(let t=0,n=e.length;t<n;t++){const n=e[t],{unitId:r,type:o}=n;-1!==["banner","custom","videoPatch","video"].indexOf(o)?-1===Yi.indexOf(r)?(Yi.push(r),zi[r]=n,na(n)):console.warn(`preloadAd已预加载过${r}这个广告单元,请勿重复调用`):console.warn("wx.preloadAd参数有误，请检查type类型")}else console.warn("preloadAd参数应为数组")},getLogManager:Kp,getRealtimeLogManager:e=>{e=e||{};const t="develop"===oe.Z.envVersion||"trial"===oe.Z.envVersion;return e.isClientReport=!t,Bh(e)},getExptInfo:lx,getExptInfoSync:function(e){const t={},{exptInfo:n,jsDataType:r}=sx();return n&&Array.isArray(n.expt_param_list)&&(Array.isArray(e)||(e=n.expt_param_list.map((e=>e.param_name))),n.expt_param_list.forEach((n=>{-1!==e.indexOf(n.param_name)&&(t[n.param_name]=n.param_value,function(e,t,n){Reporter.reportKeyValue({key:"ExptHit",value:[ox,ix,e,encodeURIComponent(JSON.stringify(t)),0,"",n].join(",")})}(n.expt_group_id,n,r))}))),t},reportEvent:function(e,t={}){setTimeout((()=>function(e,t){let n=2;const{accountInfo:r,envVersion:o}=oe.Z||{},i=r?r.appId:"";"release"===o?n=1:"trial"===o&&(n=3);const a=(0,wi.mw)();nx.sessionId||(nx.sessionId=nx.sessionid),nx.usedState||(nx.usedState=nx.usedstate),ch(1005,JSON.stringify({appid:i,app_state:n,appversion:(0,a_.E)().miniProgram.version,enter_scene:nx.scene,scene_note:nx.scene_note||nx.sceneNote,prescene:nx.prescene,prescene_note:nx.prescene_note||nx.presceneNote,sessionid:nx.sessionId,add_state:nx.usedState,page_path:cx()||nx.path,page_query:JSON.stringify(nx.query||{}),referpagepath:nx.referpagepath,isentrance:ex||ex===nx.sessionId?0:1,event_time:Date.now(),sdk_version:c_.c,devicemodel:a.model,devicebrand:a.brand,os_name:a.platform,os_version:a.system,language_version:a.language,networktype:(0,gc._getCurrentNetworkType)(),event_name:e,event_value:JSON.stringify(t),unique_id:String(Date.now()+Math.random()),screen_width:oe.Z.screenWidth,screen_height:oe.Z.screenHeight,open_source:oe.Z.host&&oe.Z.host.appId?2:1,host_appid:oe.Z.host?oe.Z.host.appId:""}),"immediate")}(e,t)))},getChannelsLiveInfo:dx.tT,openChannelsLive:dx.Xo,openChannelsActivity:dx.LE,openChannelsUserProfile:dx.jL,openPublicServicePayment:function(e={}){const{jumpToken:t,destUrl:n,openId:r}=e;if(!t||!n||!r)return void(0,u.YG)("openPublicServicePayment",e,"missing arguments");let o=`?appid=${oe.Z.accountInfo.appId}`;o+=`&jump_token=${encodeURIComponent(t)}`,o+=`&dest_url=${encodeURIComponent(n)}`,o+=`&openid=${encodeURIComponent(r)}`,function(e={},t){__sclEngine__.initScl((n=>{const r=n.mainRoot.append("toast",e);"function"==typeof t&&t(r)}))}({loading:!0,title:"政务民生缴费"},(t=>{setTimeout((()=>{t.close(),(0,u.IN)("private_openUrl",Object.assign({},e,{url:"https://mp.weixin.qq.com/intp/jump"+o,isNativeStyle:!0}),{beforeAll(e){e.errMsg=e.errMsg.replace("private_openUrl","openPublicServicePayment")}})}),1e3)}))},cloud:e.getCloudAPI(),serviceMarket:e.getServiceMarketAPI(),version:"undefined"==typeof __libVersionInfo__?{version:"9.9.9"}:JSON.parse(JSON.stringify(__libVersionInfo__)),chooseShareGroup:jh,enterContact:(e={})=>{oe.Z.onReady((()=>{if(2!==oe.Z.appType&&7!==oe.Z.appType){const t={errMsg:"enterContact:fail no permission"};return e.fail&&e.fail(t),void(e.complete&&e.complete(t))}e.privateEnterContact=!0,(0,da.L)("appServiceEnterContact",e,[f.Z.currentWebviewId],(t=>{t.errMsg&&(t.errMsg=t.errMsg.replace("privateEnterContact","enterContact"));0===t.errMsg.indexOf("enterContact:ok")?e.success&&e.success(t):e.fail&&e.fail(t),e.complete&&e.complete(t)}))}))},getGroupEnterInfo:ia.Xi,preloadWebview:Hg,publishWeChatState:ia.bO,lanDebug:ok,getDebuggerMessager:()=>c.g.__debuggerMessager__?c.g.__debuggerMessager__:{},testApiCallTime:(e={})=>{const t=e.type;if(1===t)(0,u.IN)("testApiCallTime",e);else if(2===t)(0,da.L)("testWebviewApiCallTime",e,void 0,(t=>{(0,u.F0)(t,"testApiCallTime",e,{})}));else{if(3!==t)return{directInvokeJs:oe.Z.directInvokeJs};(0,da.L)("testApiCallTime",e,void 0,(t=>{(0,u.F0)(t,"testApiCallTime",e,{})}))}}};for(const e of QT)if("function"==typeof mD[e]){const t=mD[e];mD[e]=(0,T.gA)(t)}function yD(e){_D.__defineGetter__(e,(function(){ge.zd.indexOf(e)>=0&&(0,ge.It)({name:e});const t=mD[e],n=this;if("function"==typeof t)return(0,h.Hw)((function(r){if((0,p.yR)(e,""))return bD(e,(0,p.g9)(e,t)).apply(n,arguments);if("Sync"===e.slice(-4))throw new h.l0(e+":fail rejected due to no permission currently");r&&(r.fail||r.complete)&&setTimeout((()=>{(0,u.YG)(e,r,"rejected due to no permission currently")}),0)}),` at wx.${e}`);if(!(0,p.yR)(e,""))throw new h.l0(e+":fail rejected due to no permission currently");return t}))}oe.Z.onReady((()=>{7===oe.Z.appType&&(_D.openWCPayLQTDetail=GT,_D.openWCPayLQTSave=$T,_D.openWCPayLQTDepositPlan=HT,_D.openWCPayLQTDepositPlanAdd=ZT,Object.defineProperty(_D,"reportIDKey",{get:()=>function(e={}){(0,u.IN)("reportIDKey",e)},configurable:!0}))})),["login","getUserInfo","getUserProfile","getShareInfo","getWeRunData"].forEach((e=>{const t=mD[e];mD[e]=(0,T.gA)((function(e={}){(0,St.Vs)(t,e)}))})),(0,hu.X)(mD),(0,u.Ld)("INVOKE_METHOD",(({name:e,args:t})=>{mD[e](t,!0)})),(0,u.Ld)("WEBVIEW_ERROR_MSG",(({msg:e})=>{Reporter.triggerErrorMessage(e)}));const vD=Kp(),AD=new WeakMap;function bD(e,t){const n=(0,KI.Tp)(e,"log");if(!n)return t;let r=0;const o="request"===e;return function(...i){Yh("API",`wx.${e}`);const a=o?` with seq ${r}`:"";r++;const s=i[0];if(1===n&&s&&"object"==typeof s){if(["success","fail"].forEach((function(t){const n=s[t];"function"==typeof n&&(s[t]=function(r){Yh("API",`wx.${e} ${t} callback`),"function"==typeof n&&n(...arguments),vD&&vD.logApiInvoke&&vD.log(`wx.${e} ${t} callback`+(r&&r.errMsg?" with msg "+r.errMsg:" ")+a),zh()})})),"function"==typeof s.complete){const t=s.complete;s.complete=function(...n){Yh("API",`wx.${e} complete callback`),t.apply(null,n),zh()}}}else 3===n&&"function"==typeof s&&(/^off/.test(e)&&AD.has(s)?i[0]=AD.get(s):i[0]=function(...t){Yh("API",`wx.${e} callback`),s.apply(null,t),zh()},/^on/.test(e)&&AD.set(s,i[0]));vD&&vD.logApiInvoke&&vD.log(`wx.${e} api invoke${a}`);const c=t.apply(mD,i);return 2===n&&vD&&vD.logApiInvoke&&vD.log(`wx.${e} return`),zh(),c}}for(const e in mD)yD(e);(e=>{const t={};YT.forEach((n=>{const r=n.name,o=n.permissionByte,i=e[r];t[r]=function(...t){return(0,aa.J)(o)?i.call(e,...t):(0,u.YG)(r,t[0],"no permission")}.bind(e),n.deprecate?e[r]=zT(r,t[r],e):delete e[r]})),(e=>{const t=__wxLibrary,n=t.onEnd||function(){};t.onEnd=function(){n&&n(),v("__wx__/private-api",(function(t,n){n.exports=e}))}})(t)})(_D),function(e){jT||(jT=!0,e.__defineGetter__("getBaseMethods",(function(){if(UT)return VT})))}(_D);const wD={wx:_D,createPluginWX:ZI,buildPluginPrivateApi:e=>{const t={};return cC.forEach((n=>{const r=n.factory(e);t[n.name]=function(t){lC(e,n.permissionBytes,(e=>{e?r(t):(0,p.YG)(n.name,t,"no permission")}))}})),t},createPluginConsole:QI,createPluginWXWebAssembly:YI,onAppRouteResized:bi.pc,showShareMenu:YP,setWxInterfaceDisabled:p.AL,setWxInterfaceIsInvokeInTap:p.kV,unsetWxInterfaceIsInvokeInTap:p.JF,_setWxIsInvokeInTapForNavToMiniProgram:Y.Hk,_createSelectorQuery:Us,_createIntersectionObserver:Hs,_createMediaQueryObserver:zs,_getOpenerEventChannel:ec.S,pluginInfos:zI,_virtualDOMTunnel:(CD=u.nY,ID=u.Ld,{vdSync(e,t){CD("vdSync",e,t)},vdSyncBatch(e,t){CD("vdSyncBatch",e,t)},onVdSync(e){ID("vdSync",e)},onVdSyncBatch(e){ID("vdSyncBatch",e)}}),traceBeginEvent:Yh,traceEndEvent:zh,saveExitState:bi.E3,loadExitState:bi.kH,createRouter:ni.p7,setEnableDebug:Ep,_apiData:yp,loadSubpackage:pc};var CD,ID;XI(wD,a,mD),XI(wD,s,mD),XI(wD,d,mD);const ED=wD})(),t=l.default})();var n=t.wx;"undefined"!=typeof __exportGlobal__&&(__exportGlobal__.wx=n);var r=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o=n(1),i=n(3),a=n(5),s=n(6),c=n(7),l=n(8),d=n(9),u=n(15),p=n(12),h=n(17),f=n(18),g=n(19),_=n(16),m=n(10),y=n(20),v=n(14),A=n(4),b=n(13),w=n(21);t.FreeTmpl=w,t.precompileTemplate=w.precompiler?w.precompiler.compile:null,t.precompiler=w.precompiler?w.precompiler:null,t.HtmlLLParser=w.htmlParser?w.htmlParser:null,t.LLParser=o,t.dataPath=c,t.dataUtils=a,t.Event=s,t.Element=d,t.TextNode=p,t.NativeNode=h,t.VirtualNode=f,t.ShadowRoot=g,t.Behavior=l,t.Component=u,t.Observer=m,t.DataGroup=_,t.ElementIterator=y,t.FakeDomElement=v,t.registerBehavior=l.create,t.registerElement=u.register,t.createElement=u.create,t.createTextNode=p.create,t.createVirtualNode=f.create,t.appendChild=d.appendChild,t.insertBefore=d.insertBefore,t.removeChild=d.removeChild,t.replaceChild=d.replaceChild,t.addListenerToElement=s.addListenerToElement,t.removeListenerFromElement=s.removeListenerFromElement,t.triggerEvent=s.triggerEvent,t.safeCallback=i.safeCallback,t.addGlobalErrorListener=i.addGlobalErrorListener,t.removeGlobalErrorListener=i.removeGlobalErrorListener,t.addGlobalWarningListener=i.addGlobalWarningListener,t.removeGlobalWarningListener=i.removeGlobalWarningListener,t.globalOptions=A,t.globalState=b,u._setDefaultTemplateEngine(w),(t.updateDefaultComponent=function(){delete u._list[""],u.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})})();var C=function(e){var t="";if(e instanceof r.Element&&(e.id&&(t+=' id="'+e.id+'"'),e.slot&&(t+=' slot="'+e.slot+'"'),e.__slotName&&(t+=' name="'+e.__slotName+'"'),e.classList&&(t+=' class="'+e.class+'"'),e.$$&&e.$$.getAttribute("style")&&(t+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof r.VirtualNode)return t;if(e instanceof r.Component)return u.listPublicProperties(e).forEach((function(n){t+=" "+n+"="+JSON.stringify(e[n])})),t;for(var n=e.attributes,o=0;o<n.length;o++)t+=" "+n[o].name+'="'+n[o].value+'"';return t},I=t.dumpElementToString=function(e,t,n){var o=null;A.hasDOMBackend&&(o=window);var i=0,a="";for(i=n=n||0;i;i--)a+="  ";var s="";if(e instanceof r.Element)s+=a+"<"+(e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+C(e)+">",s+=e instanceof r.VirtualNode?" [Exp-Virtual]":e instanceof r.NativeNode?" [Exp-Native]":" [Exp-Component]",s+="\n"+I(t?e.__wxSlotChildren:e.childNodes,t,n+1);else if(e instanceof r.TextNode)s+=a+e.textContent+" [Exp-Text]\n";else if(o&&o.HTMLElement&&e instanceof o.HTMLElement)s+=a+"<"+e.tagName.toLowerCase()+C(e)+"> [DOM-Element]",s+="\n"+I(t&&e.__wxSlotChildren||e.childNodes,t,n+1);else if(o&&o.Text&&e instanceof o.Text)s+=a+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(i=0;i<e.length;i++)s+=I(e[i],t,n);else s=a+"[unknown node]\n";return s};t.dumpElement=function(e,t){console.log(I(e,t))}},function(e,t,n){var r=null,o=function(){},i=o.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return r.llparser_create_descriptor(e,1)},s=function(e,t){var n=r.llparser_create_descriptor(e,0),o=!1;"^"===t[0]&&(o=!0);for(var i=o?1:0;i<t.length;i++){var a=t.charCodeAt(i);if("-"===t[i+1]){var s=t.charCodeAt(i+2);a<=s?(r.llparser_descriptor_add_range(n,a,s),i+=2):r.llparser_descriptor_add_char(n,a)}else r.llparser_descriptor_add_char(n,a)}return o&&r.llparser_descriptor_revert(n),n};o.create=function(e,t,i){r||(r=n(2));var c=new o;i=i||16384;var l=c._llp=r.llparser_create(i,128,128),d={},u={},p="";for(p in d.ALL=r.llparser_create_descriptor(l,0),r.llparser_descriptor_set_all(d.ALL),d.NULL=r.llparser_create_descriptor(l,0),r.llparser_descriptor_set_nil(d.NULL),e)d[p]=a(l);for(p in e)for(var h=e[p],f=d[p],g=0;g<h.length;g++){for(var _=h[g].id,m=h[g].states,y=[],v=0;v<m.length;v++){var A=m[v];d[A]||(d[A]=s(l,A)),y.push(d[A])}var b=0;"_raw"===_?b=1:"_jump"===_?b=65536:"_blank"===_&&(b=65537);var w=r.llparser_add_rule(l,b,f,y.length,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7]);0===b&&(u[w]=t[_])}return r.llparser_prepare(l),c._inputPtr=r.llparser_get_input_buffer(l),c._resultPtr=r.llparser_get_result(l),c._stateIdMap=d,c._ruleCbMap=u,c._charCountLimit=i,c};o.prototype.parse=function(e,t){var n=Date.now();(function(e,t,n,r){for(var o=r>e.length?e.length:r,i=0;i<o;i++)t[n+i]=e.charCodeAt(i);t[n+o]=0})(t,new Uint16Array(r.memory.buffer),this._inputPtr>>1,this._charCountLimit),i.copyIn=i.copyIn+Date.now()-n,n=Date.now();var o=r.llparser_parse(this._llp,this._stateIdMap[e]);if(i.parse=i.parse+Date.now()-n,n=Date.now(),o)throw new Error("Parsing failed at character position "+(o-1)+' near "'+t.slice(o-20,o)+'"');var a=function(e,t,n,r,o){for(var i=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,c=o.pos,l=!1,d=!1,u=!1;;){var p=t[c],h=t[c+1];if(h<0?(d=!0,h=-h-1):d=!1,p>=0){u=!0;var f=n.slice(p,h);s.c.push(f),l=d}else{if(-1===p&&0===h)break;u=!1;var g=-p,_=h,m={i:s.c.length-(l?1:0),r:g,n:d,cc:_,c:[]};if(l){var y=s.c.length-1,v=s.c[y];m.c.push(v),s.c[y]=m}else s.c.push(m);i.push(s),s=m,l=!1}if(!u||!l)for(;s.c.length===s.cc;){l=s.n;var A=i.pop();if(A.c[s.i]=r[s.r].call(e,s.c),s=A,l)break}c+=2}return a.c[0]}(this,new Int32Array(r.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return i.constructOut=i.constructOut+Date.now()-n,a},o.prototype.destroy=function(){r.llparser_destroy(this._llp)},e.exports=o},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t,n){return m.llparser_create(e,t,n)}function o(e){m.llparser_destroy(e)}function i(e,t){return m.llparser_create_descriptor(e,t)}function a(e){m.llparser_descriptor_set_all(e)}function s(e){m.llparser_descriptor_set_nil(e)}function c(e,t){m.llparser_descriptor_add_char(e,t)}function l(e,t,n){m.llparser_descriptor_add_range(e,t,n)}function d(e){m.llparser_descriptor_revert(e)}function u(e,t,n,r,o,i,a,s,c,l,d,u){return m.llparser_add_rule(e,t,n,r,o,i,a,s,c,l,d,u)}function p(e){m.llparser_prepare(e)}function h(e,t){return m.llparser_parse(e,t)}function f(e){return m.llparser_get_input_buffer(e)}function g(e){return m.llparser_get_result(e)}function _(){m.wasm_main()}n.r(t),n.d(t,"llparser_create",(function(){return r})),n.d(t,"llparser_destroy",(function(){return o})),n.d(t,"llparser_create_descriptor",(function(){return i})),n.d(t,"llparser_descriptor_set_all",(function(){return a})),n.d(t,"llparser_descriptor_set_nil",(function(){return s})),n.d(t,"llparser_descriptor_add_char",(function(){return c})),n.d(t,"llparser_descriptor_add_range",(function(){return l})),n.d(t,"llparser_descriptor_revert",(function(){return d})),n.d(t,"llparser_add_rule",(function(){return u})),n.d(t,"llparser_prepare",(function(){return p})),n.d(t,"llparser_parse",(function(){return h})),n.d(t,"llparser_get_input_buffer",(function(){return f})),n.d(t,"llparser_get_result",(function(){return g})),n.d(t,"wasm_main",(function(){return _})),n.d(t,"memory",(function(){return y}));var m=n(1),y=m.memory;m.__wbindgen_start()},function(e,t,n){"use strict";n.r(t),n.d(t,"memory",(function(){return i})),n.d(t,"rust_calloc",(function(){return a})),n.d(t,"rust_free",(function(){return s})),n.d(t,"llparser_create",(function(){return c})),n.d(t,"llparser_destroy",(function(){return l})),n.d(t,"llparser_create_descriptor",(function(){return d})),n.d(t,"llparser_descriptor_set_all",(function(){return u})),n.d(t,"llparser_descriptor_set_nil",(function(){return p})),n.d(t,"llparser_descriptor_add_char",(function(){return h})),n.d(t,"llparser_descriptor_add_range",(function(){return f})),n.d(t,"llparser_descriptor_revert",(function(){return g})),n.d(t,"llparser_add_rule",(function(){return _})),n.d(t,"llparser_prepare",(function(){return m})),n.d(t,"llparser_parse",(function(){return y})),n.d(t,"llparser_get_input_buffer",(function(){return v})),n.d(t,"llparser_get_result",(function(){return A})),n.d(t,"wasm_main",(function(){return b})),n.d(t,"__wbindgen_start",(function(){return w}));var r=new ArrayBuffer(1114112),o=function(e,t,n){function r(e){var t=0,n=0,r=0,o=0,i=0,c=0,l=0;n=(t=e+-8|0)+(e=-8&(o=f[e+-4>>2]))|0;e:{t:{n:{r:{o:if(!(1&o)){if(!(3&o))break r;if(e=(o=f[t>>2])+e|0,(0|(t=t-o|0))==f[262246]){if(3!=(3&f[n+4>>2]))break o;return f[262244]=e,f[n+4>>2]=-2&f[n+4>>2],f[t+4>>2]=1|e,void(f[e+t>>2]=e)}o>>>0>=256?s(t):(0|(r=f[t+8>>2]))==(0|(i=f[t+12>>2]))?(c=1048576,l=f[262144]&u(o>>>3),f[c>>2]=l):(f[r+12>>2]=i,f[i+8>>2]=r)}if(2&(o=f[n+4>>2]))f[n+4>>2]=-2&o,f[t+4>>2]=1|e,f[e+t>>2]=e;else{o:{if(f[262247]!=(0|n)){if((0|n)!=f[262246])break o;return f[262246]=t,e=f[262244]+e|0,f[262244]=e,f[t+4>>2]=1|e,void(f[e+t>>2]=e)}if(f[262247]=t,e=f[262245]+e|0,f[262245]=e,f[t+4>>2]=1|e,(0|t)==f[262246]&&(f[262244]=0,f[262246]=0),(n=f[262254])>>>0>=e>>>0)break r;if(!(e=f[262247]))break r;i:if(!((o=f[262245])>>>0<41))for(t=1049e3;;){if((r=f[t>>2])+f[t+4>>2]>>>0>e>>>0&&r>>>0<=e>>>0)break i;if(!(t=f[t+8>>2]))break}if(r=4095,e=f[262252]){for(t=0;t=t+1|0,e=f[e+8>>2];);r=t>>>0>4095?t:4095}if(f[262256]=r,o>>>0<=n>>>0)break r;return void(f[262254]=-1)}if(e=(r=-8&o)+e|0,r>>>0>=256?s(n):(0|(r=f[n+12>>2]))==(0|(n=f[n+8>>2]))?(c=1048576,l=f[262144]&u(o>>>3),f[c>>2]=l):(f[n+12>>2]=r,f[r+8>>2]=n),f[t+4>>2]=1|e,f[e+t>>2]=e,f[262246]==(0|t)){f[262244]=e;break r}}if(e>>>0<256)break n;if(a(t,e),e=f[262256]+-1|0,f[262256]=e,!e){if(e=f[262252])break t;e=4095;break e}}return}return e=1048584+((n=e>>>3)<<3)|0,o=f[262144],n=1<<(31&n),r=f[e+8>>2],o&n||(f[262144]=n|o,r=e),n=r,f[e+8>>2]=t,f[n+12>>2]=t,f[t+12>>2]=e,void(f[t+8>>2]=n)}for(t=0;t=t+1|0,e=f[e+8>>2];);e=t>>>0>4095?t:4095}f[262256]=e}function o(e,t,n,r,i){var a;if(A=a=A-48|0,f[a+44>>2]=e,f[a+40>>2]=t,f[a+36>>2]=n,f[a+32>>2]=r,f[a+28>>2]=i,f[f[a+40>>2]>>2]!=f[a+36>>2])for(f[f[a+40>>2]>>2]=f[a+36>>2],f[a+24>>2]=f[f[a+40>>2]+136>>2],f[a+20>>2]=1&(0!=f[a+28>>2]^-1^-1);f[a+24>>2];){for(f[a+20>>2]||(f[a+28>>2]=f[a+24>>2]),f[a+16>>2]=f[f[f[a+24>>2]>>2]+8>>2],1==f[f[a+16>>2]+4>>2]&&o(f[a+44>>2],f[a+16>>2],f[a+36>>2],f[a+32>>2],f[a+28>>2]),f[a+12>>2]=0;!(f[a+12>>2]>=128);)g[f[a+12>>2]+(f[a+16>>2]+8|0)|0]&&(m[f[a+28>>2]>>2]>=m[f[a+32>>2]+(f[a+12>>2]<<2)>>2]&&f[f[a+32>>2]+(f[a+12>>2]<<2)>>2]||(f[f[a+32>>2]+(f[a+12>>2]<<2)>>2]=f[f[a+28>>2]>>2])),f[a+12>>2]=f[a+12>>2]+1;f[a+24>>2]=f[f[a+24>>2]+4>>2]}A=a+48|0}function i(e,t,n,r){var o;for(f[44+(o=A-48|0)>>2]=e,f[o+40>>2]=t,f[o+36>>2]=n,f[o+32>>2]=r,f[o+28>>2]=f[f[o+40>>2]+136>>2];f[o+28>>2];){if(f[o+24>>2]=f[f[f[o+28>>2]>>2]+8>>2],f[o+24>>2]==f[o+40>>2])for(f[o+20>>2]=f[f[f[o+28>>2]>>2]+12>>2],f[o+16>>2]=0;!(f[o+16>>2]>=128);){e:{if(1!=f[f[o+20>>2]+4>>2]){if(!g[f[o+16>>2]+(f[o+20>>2]+8|0)|0])break e}else if(f[o+12>>2]=f[f[o+44>>2]+32>>2]+((f[o+20>>2]-f[f[o+44>>2]+24>>2]|0)/140<<9),!f[f[o+12>>2]+(f[o+16>>2]<<2)>>2])break e;m[f[o+28>>2]>>2]>=m[f[o+32>>2]+(f[o+16>>2]<<2)>>2]&&f[f[o+32>>2]+(f[o+16>>2]<<2)>>2]||(f[f[o+32>>2]+(f[o+16>>2]<<2)>>2]=f[f[o+28>>2]>>2])}f[o+16>>2]=f[o+16>>2]+1}f[o+28>>2]=f[f[o+28>>2]+4>>2]}}function a(e,t){var n=0,r=0,o=0,i=0;f[e+16>>2]=0,f[e+20>>2]=0,o=e,n=0,(r=t>>>8)&&(n=31,t>>>0>16777215||(n=62+((t>>>(6-(r=v(r))&31)&1)-(r<<1)|0)|0)),f[o+28>>2]=n,o=1048848+(n<<2)|0;e:{t:{n:{r:{if((i=f[262145])&(r=1<<(31&n))){if(r=f[o>>2],(-8&f[r+4>>2])!=(0|t))break r;n=r;break n}f[262145]=r|i,f[o>>2]=e,f[e+24>>2]=o;break e}for(o=t<<(31==(0|n)?0:25-(n>>>1)&31);;){if(!(n=f[(i=16+((o>>>29&4)+r|0)|0)>>2]))break t;if(o<<=1,r=n,(-8&f[n+4>>2])==(0|t))break}}return t=f[n+8>>2],f[t+12>>2]=e,f[n+8>>2]=e,f[e+24>>2]=0,f[e+12>>2]=n,void(f[e+8>>2]=t)}f[i>>2]=e,f[e+24>>2]=r}f[e+12>>2]=e,f[e+8>>2]=e}function s(e){var t,n=0,r=0,o=0,i=0,a=0,s=0;t=f[e+24>>2];e:{t:{if((0|e)==(0|(n=f[e+12>>2]))){if(o=f[(n=e+20|0)>>2],r=f[(o?20:16)+e>>2])break t;n=0;break e}r=f[e+8>>2],f[r+12>>2]=n,f[n+8>>2]=r;break e}for(o=o?n:e+16|0;i=o,(r=f[(o=(n=r)+20|0)>>2])||(o=n+16|0,r=f[n+16>>2]),r;);f[i>>2]=0}e:if(t){r=1048848+(f[e+28>>2]<<2)|0;t:{if((0|e)==f[r>>2]){if(f[r>>2]=n,n)break t;return a=1048580,s=f[262145]&u(f[e+28>>2]),void(f[a>>2]=s)}if(f[(f[t+16>>2]==(0|e)?16:20)+t>>2]=n,!n)break e}f[n+24>>2]=t,(r=f[e+16>>2])&&(f[n+16>>2]=r,f[r+24>>2]=n),(e=f[e+20>>2])&&(f[n+20>>2]=e,f[e+24>>2]=n)}}function c(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,n=0,r=0,o=0,i=0,c=0,l=0,h=0,g=0,_=0,y=0;e:{t:{n:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(o=-8&(e=e+11|0),!(h=f[262145]))break n;n=0-o|0,l=0,(e>>>=8)&&(l=31,o>>>0>16777215||(l=62+((o>>>(6-(e=v(e))&31)&1)-(e<<1)|0)|0));r:{o:{if(e=f[1048848+(l<<2)>>2]){for(i=o<<(31==(0|l)?0:25-(l>>>1)&31);;){if(!((c=-8&f[e+4>>2])>>>0<o>>>0||(c=c-o|0)>>>0>=n>>>0||(r=e,n=c))){n=0;break o}if(c=f[e+20>>2],e=f[16+((i>>>29&4)+e|0)>>2],t=c&&(0|c)!=(0|e)?c:t,i<<=1,!e)break}if(t){e=t;break o}if(r)break r}if(r=0,!(e=(0-(e=2<<(31&l))|e)&h))break n;if(!(e=f[1048848+(d(e&0-e)<<2)>>2]))break n}for(;r=(c=(i=(t=-8&f[e+4>>2])-o|0)>>>0<n>>>0&t>>>0>=o>>>0)?e:r,n=c?i:n,e=(t=f[e+16>>2])||f[e+20>>2];);if(!r)break n}if(n>>>0>=(e=f[262244])-o>>>0&&e>>>0>=o>>>0)break n;s(r);r:if(n>>>0>=16){if(f[r+4>>2]=3|o,f[4+(t=r+o|0)>>2]=1|n,f[t+n>>2]=n,n>>>0>=256){a(t,n);break r}e=1048584+((n>>>=3)<<3)|0,i=f[262144],n=1<<(31&n),l=f[e+8>>2],i&n||(f[262144]=n|i,l=e),n=l,f[e+8>>2]=t,f[n+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=n}else e=n+o|0,f[r+4>>2]=3|e,f[4+(e=e+r|0)>>2]=1|f[e+4>>2];return r+8|0}r:{o:{if(!(3&(e=(t=f[262144])>>>(r=31&(n=(o=e>>>0<11?16:e+11&-8)>>>3))))){if(o>>>0<=m[262244])break n;if(e)break o;if(!(e=f[262145]))break n;for(t=f[1048848+(d(e&0-e)<<2)>>2],n=(-8&f[t+4>>2])-o|0,i=t;;){if(!(e=f[t+16>>2])&&!(e=f[t+20>>2]))break r;n=(t=(r=(-8&f[e+4>>2])-o|0)>>>0<n>>>0)?r:n,i=t?e:i,t=e}}n=(e=f[1048592+(c=(r=n+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(i=f[e+8>>2]))==(0|(c=c+1048584|0))?(_=1048576,y=u(r)&t,f[_>>2]=y):(f[i+12>>2]=c,f[c+8>>2]=i),t=r<<3,f[e+4>>2]=3|t,f[4+(e=e+t|0)>>2]=1|f[e+4>>2];break t}return r=d(0-(e=(n=e<<r)&(0-(e=2<<r)|e))&e),e=f[1048592+(i=r<<3)>>2],(0|(n=f[e+8>>2]))==(0|(i=i+1048584|0))?(_=1048576,y=u(r)&t,f[_>>2]=y):(f[n+12>>2]=i,f[i+8>>2]=n),i=e+8|0,f[e+4>>2]=3|o,n=(t=r<<3)-o|0,f[4+(c=e+o|0)>>2]=1|n,f[e+t>>2]=n,(e=f[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=f[262246],o=f[262144],r=1<<(31&r),l=f[e+8>>2],o&r||(f[262144]=r|o,l=e),r=l,f[e+8>>2]=t,f[r+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=r),f[262246]=c,f[262244]=n,i}return s(i),n>>>0>=16?(f[i+4>>2]=3|o,f[4+(c=o+i|0)>>2]=1|n,f[n+c>>2]=n,(e=f[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=f[262246],o=f[262144],r=1<<(31&r),l=f[e+8>>2],o&r||(f[262144]=r|o,l=e),r=l,f[e+8>>2]=t,f[r+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=r),f[262246]=c,f[262244]=n):(e=n+o|0,f[i+4>>2]=3|e,f[4+(e=e+i|0)>>2]=1|f[e+4>>2]),i+8|0}n:{r:{o:{i:{if((t=f[262244])>>>0<o>>>0){if((e=f[262245])>>>0>o>>>0)break e;if(n=0,-1==(0|(t=p((e=o+65583|0)>>>16))))break t;if(!(r=t<<16))break t;if(e=(i=-65536&e)+f[262248]|0,f[262248]=e,t=f[262249],f[262249]=t>>>0>e>>>0?t:e,!(n=f[262247]))break i;for(e=1049e3;;){if((0|r)==((t=f[e>>2])+(c=f[e+4>>2])|0))break o;if(!(e=f[e+8>>2]))break}break r}return e=f[262246],(r=t-o|0)>>>0<=15?(f[262246]=0,f[262244]=0,f[e+4>>2]=3|t,o=4+(t=e+t|0)|0,n=1|f[t+4>>2]):(f[262244]=r,n=e+o|0,f[262246]=n,f[n+4>>2]=1|r,f[e+t>>2]=r,n=3|o,o=e+4|0),f[o>>2]=n,e+8|0}for((e=f[262255])>>>0<=r>>>0&&e||(f[262255]=r),e=0,f[262256]=4095,f[262251]=i,f[262250]=r,f[262253]=0;t=e+1048584|0,f[e+1048592>>2]=t,f[e+1048596>>2]=t,256!=(0|(e=e+8|0)););f[262247]=r,e=i+-40|0,f[262245]=e,f[r+4>>2]=1|e,f[4+(e+r|0)>>2]=40,f[262254]=2097152;break n}if(!(f[e+12>>2]|r>>>0<=n>>>0|t>>>0>n>>>0)){f[e+4>>2]=i+c,t=(e=f[262247])+15&-8,f[262247]=t+-8,n=8+((r=i+f[262245]|0)+(e-t|0)|0)|0,f[262245]=n,f[t+-4>>2]=1|n,f[4+(e+r|0)>>2]=40,f[262254]=2097152;break n}}e=f[262255],f[262255]=e>>>0<r>>>0?e:r,t=r+i|0,e=1049e3;r:{for(;;){if((0|t)!=f[e>>2]){if(e=f[e+8>>2])continue;break r}break}if(!f[e+12>>2]){f[e>>2]=r,f[e+4>>2]=i+f[e+4>>2],f[r+4>>2]=3|o,i=r+o|0,o=(t-r|0)-o|0;o:{i:{if((0|t)!=f[262247]){if(f[262246]==(0|t))break i;if(1==(3&(e=f[t+4>>2]))&&((n=-8&e)>>>0>=256?s(t):(0|(c=f[t+12>>2]))==(0|(l=f[t+8>>2]))?(_=1048576,y=f[262144]&u(e>>>3),f[_>>2]=y):(f[l+12>>2]=c,f[c+8>>2]=l),o=n+o|0,t=t+n|0),f[t+4>>2]=-2&f[t+4>>2],f[i+4>>2]=1|o,f[o+i>>2]=o,o>>>0>=256){a(i,o);break o}e=1048584+((t=o>>>3)<<3)|0,n=f[262144],t=1<<(31&t),l=f[e+8>>2],n&t||(f[262144]=t|n,l=e),n=l,f[e+8>>2]=i,f[n+12>>2]=i,f[i+12>>2]=e,f[i+8>>2]=n;break o}f[262247]=i,e=f[262245]+o|0,f[262245]=e,f[i+4>>2]=1|e;break o}f[262246]=i,e=f[262244]+o|0,f[262244]=e,f[i+4>>2]=1|e,f[e+i>>2]=e}return r+8|0}}for(e=1049e3;!((t=f[e>>2])>>>0<=n>>>0&&(c=t+f[e+4>>2]|0)>>>0>n>>>0);)e=f[e+8>>2];for(f[262247]=r,e=i+-40|0,f[262245]=e,f[r+4>>2]=1|e,f[4+(e+r|0)>>2]=40,f[262254]=2097152,f[(t=(e=(c+-32&-8)-8|0)>>>0<n+16>>>0?n:e)+4>>2]=27,e=f[262250],l=f[262251],g=f[262253],f[(h=t+16|0)>>2]=f[262252],f[h+4>>2]=g,f[t+8>>2]=e,f[t+12>>2]=l,f[262251]=i,f[262250]=r,f[262252]=t+8,f[262253]=0,e=t+28|0;f[e>>2]=7,c>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|n)&&(f[t+4>>2]=-2&f[t+4>>2],e=t-n|0,f[n+4>>2]=1|e,f[t>>2]=e,e>>>0>=256?a(n,e):(e=1048584+((t=e>>>3)<<3)|0,r=f[262144],t=1<<(31&t),l=f[e+8>>2],r&t||(f[262144]=t|r,l=e),t=l,f[e+8>>2]=n,f[t+12>>2]=n,f[n+12>>2]=e,f[n+8>>2]=t))}if(n=0,!((e=f[262245])>>>0<=o>>>0))break e}return n}return t=e-o|0,f[262245]=t,r=(e=f[262247])+o|0,f[262247]=r,f[r+4>>2]=1|t,f[e+4>>2]=3|o,e+8|0}(e))|!(3&g[t+-4|0])||function(e,t){if(t)for(;h[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(y(e|=0,t|=0))}function l(){}function d(e){return e?31-v(e+-1^e)|0:32}function u(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function p(t){t|=0;var r=0|n.byteLength/65536,o=r+t|0;if(r<o&&o<65536){var i=new ArrayBuffer(y(o,65536)),a=new e.Int8Array(i);a.set(h),h=a,h=new e.Int8Array(i),new e.Int16Array(i),f=new e.Int32Array(i),g=new e.Uint8Array(i),_=new e.Uint16Array(i),m=new e.Uint32Array(i),new e.Float32Array(i),new e.Float64Array(i),n=i}return r}var h=new e.Int8Array(n),f=(new e.Int16Array(n),new e.Int32Array(n)),g=new e.Uint8Array(n),_=new e.Uint16Array(n),m=new e.Uint32Array(n),y=(new e.Float32Array(n),new e.Float64Array(n),e.Math.imul),v=(e.Math.fround,e.Math.abs,e.Math.clz32),A=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);return{memory:Object.create(Object.prototype,{grow:{value:p},buffer:{get:function(){return n}}}),rust_calloc:c,rust_free:function(e){r(e|=0)},llparser_create:function(e,t,n){return 0|function(e,t,n){var r,o,i;return A=r=A-32|0,f[r+28>>2]=e,f[r+24>>2]=t,f[r+20>>2]=n,e=r,t=f[r+28>>2]?f[r+28>>2]:256,f[e+28>>2]=t,e=r,t=f[r+24>>2]?f[r+24>>2]:256,f[e+24>>2]=t,e=r,t=f[r+20>>2]?f[r+20>>2]:256,f[e+20>>2]=t,o=r,i=c(((((((y(f[r+24>>2],140)+52|0)+y(f[r+20>>2],44)|0)+(f[r+24>>2]<<9)|0)+(f[r+24>>2]<<9)|0)+y(f[r+20>>2],f[r+24>>2]<<3)|0)+(f[r+28>>2]<<1)|0)+(f[r+28>>2]<<3)|0,1),f[o+16>>2]=i,f[f[r+16>>2]+12>>2]=f[r+28>>2],f[f[r+16>>2]+16>>2]=f[r+24>>2],f[f[r+16>>2]+20>>2]=f[r+20>>2],f[f[r+16>>2]+4>>2]=0,f[f[r+16>>2]>>2]=0,f[f[r+16>>2]+8>>2]=0,f[r+12>>2]=f[r+16>>2]+52,f[f[r+16>>2]+24>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+y(f[r+24>>2],140),f[f[r+16>>2]+28>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+y(f[r+20>>2],44),f[f[r+16>>2]+32>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+(f[r+24>>2]<<9),f[f[r+16>>2]+36>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+(f[r+24>>2]<<9),f[f[r+16>>2]+40>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+y(f[r+20>>2],f[r+24>>2]<<3),f[f[r+16>>2]+44>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+(f[r+28>>2]<<1),f[f[r+16>>2]+48>>2]=f[r+12>>2],A=r+32|0,f[r+16>>2]}(e|=0,t|=0,n|=0)},llparser_destroy:function(e){!function(e){var t;A=t=A-16|0,f[t+12>>2]=e,r(f[t+12>>2]),A=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var n,r;return f[12+(n=A-16|0)>>2]=e,f[n+8>>2]=t,t=f[f[n+12>>2]+24>>2],r=f[n+12>>2],e=f[r+4>>2],f[r+4>>2]=e+1,f[n+4>>2]=t+y(e,140),f[f[n+4>>2]+4>>2]=f[n+8>>2]?1:0,f[n+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+4>>2]=-1,h[f[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+4>>2]=-2,h[f[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var n;f[12+(n=A-16|0)>>2]=e,f[n+8>>2]=t,h[f[n+8>>2]+(f[n+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,n){!function(e,t,n){var r;for(f[12+(r=A-16|0)>>2]=e,f[r+8>>2]=t,f[r+4>>2]=n,f[r>>2]=f[r+8>>2];!(f[r>>2]>f[r+4>>2]);)h[f[r>>2]+(f[r+12>>2]+8|0)|0]=1,f[r>>2]=f[r>>2]+1}(e|=0,t|=0,n|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(f[12+(t=A-16|0)>>2]=e,f[t+8>>2]=1;!(f[t+8>>2]>=127);)h[f[t+8>>2]+(f[t+12>>2]+8|0)|0]=1&(0!=g[f[t+8>>2]+(f[t+12>>2]+8|0)|0]^-1),f[t+8>>2]=f[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,n,r,o,i,a,s,c,l,d,u){return 0|function(e,t,n,r,o,i,a,s,c,l,d,u){var p;return A=p=A+-64|0,f[p+60>>2]=e,f[p+56>>2]=t,f[p+52>>2]=n,f[p+48>>2]=r,f[p+44>>2]=o,f[p+40>>2]=i,f[p+36>>2]=a,f[p+32>>2]=s,f[p+28>>2]=c,f[p+24>>2]=l,f[p+20>>2]=d,f[p+16>>2]=u,t=f[f[p+60>>2]+28>>2],n=f[p+60>>2],e=f[n>>2],f[n>>2]=e+1,f[p+12>>2]=t+y(e,44),f[f[p+12>>2]>>2]=f[p+52>>2],f[f[p+12>>2]+4>>2]=f[p+48>>2],f[p+48>>2]>0&&(f[f[p+12>>2]+8>>2]=f[p+44>>2]),f[p+48>>2]>1&&(f[f[p+12>>2]+12>>2]=f[p+40>>2]),f[p+48>>2]>2&&(f[f[p+12>>2]+16>>2]=f[p+36>>2]),f[p+48>>2]>3&&(f[f[p+12>>2]+20>>2]=f[p+32>>2]),f[p+48>>2]>4&&(f[f[p+12>>2]+24>>2]=f[p+28>>2]),f[p+48>>2]>5&&(f[f[p+12>>2]+28>>2]=f[p+24>>2]),f[p+48>>2]>6&&(f[f[p+12>>2]+32>>2]=f[p+20>>2]),f[p+48>>2]>7&&(f[f[p+12>>2]+36>>2]=f[p+16>>2]),f[f[p+12>>2]+40>>2]=f[p+56>>2],f[p+48>>2]>0&&function(e,t,n){var r;f[28+(r=A-32|0)>>2]=e,f[r+24>>2]=t,f[r+20>>2]=n,f[r+16>>2]=(f[r+20>>2]-f[f[r+28>>2]+24>>2]|0)/140,1==f[f[r+20>>2]+4>>2]&&(t=f[f[r+28>>2]+40>>2],n=f[r+28>>2],e=f[n+8>>2],f[n+8>>2]=e+1,f[r+12>>2]=t+(e<<3),f[f[r+12>>2]>>2]=f[r+24>>2],f[f[r+12>>2]+4>>2]=f[f[r+20>>2]+136>>2],f[f[r+20>>2]+136>>2]=f[r+12>>2])}(f[p+60>>2],f[p+12>>2],f[p+52>>2]),A=p- -64|0,f[p+12>>2]}(e|=0,t|=0,n|=0,r|=0,o|=0,i|=0,a|=0,s|=0,c|=0,l|=0,d|=0,u|=0)},llparser_prepare:function(e){!function(e){var t;for(A=t=A-32|0,f[t+28>>2]=e,f[t+24>>2]=0;!(f[t+24>>2]>=f[f[t+28>>2]+4>>2]);)f[t+20>>2]=f[f[t+28>>2]+24>>2]+y(f[t+24>>2],140),1==f[f[t+20>>2]+4>>2]&&o(f[t+28>>2],f[t+20>>2],f[t+20>>2],f[f[t+28>>2]+32>>2]+(f[t+24>>2]<<9)|0,0),f[t+24>>2]=f[t+24>>2]+1;for(f[t+16>>2]=0;!(f[t+16>>2]>=f[f[t+28>>2]+4>>2]);)f[t+12>>2]=f[f[t+28>>2]+24>>2]+y(f[t+16>>2],140),1==f[f[t+12>>2]+4>>2]&&(f[f[t+12>>2]>>2]=0,i(f[t+28>>2],f[t+12>>2],f[t+12>>2],f[f[t+28>>2]+36>>2]+(f[t+16>>2]<<9)|0)),f[t+16>>2]=f[t+16>>2]+1;A=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var n,r,o;return A=n=A-32|0,f[n+24>>2]=e,f[n+20>>2]=t,f[n+16>>2]=0,f[n+12>>2]=0,r=n,o=function e(t,n,r,o,i,a,s){var c,l=0,d=0;A=c=A-96|0,f[c+88>>2]=t,f[c+84>>2]=n,f[c+80>>2]=r,f[c+76>>2]=o,f[c+72>>2]=i,f[c+68>>2]=a,f[c+64>>2]=s,f[c+60>>2]=_[f[c+80>>2]+(f[f[c+76>>2]>>2]<<1)>>1],m[c+60>>2]>=128&&(f[c+60>>2]=1);e:if(f[f[c+72>>2]>>2]>(f[c+64>>2]-4|0))f[c+92>>2]=-1;else if(1==f[f[c+84>>2]+4>>2])if(f[c+56>>2]=f[f[c+76>>2]>>2],f[c+52>>2]=f[f[c+72>>2]>>2],f[c+48>>2]=0,f[c+44>>2]=0,f[c+40>>2]=f[f[c+88>>2]+32>>2]+((f[c+84>>2]-f[f[c+88>>2]+24>>2]|0)/140<<9),f[c+36>>2]=0,!f[f[c+40>>2]+(f[c+60>>2]<<2)>>2]|m[c+60>>2]<=0|m[c+60>>2]>=127?!f[c+60>>2]|!f[f[c+40>>2]+508>>2]?f[f[c+40>>2]>>2]&&(f[c+36>>2]=f[f[c+40>>2]>>2]):f[c+36>>2]=f[f[c+40>>2]+508>>2]:f[c+36>>2]=f[f[c+40>>2]+(f[c+60>>2]<<2)>>2],f[c+36>>2]){for(f[c+68>>2]||f[f[c+36>>2]+40>>2]||(f[c+48>>2]=f[f[c+72>>2]>>2],t=f[c+72>>2],f[t>>2]=f[t>>2]+2),f[c+32>>2]=0;f[c+32>>2]<f[f[c+36>>2]+4>>2];){if(f[c+28>>2]=f[c+68>>2],f[c+68>>2]||!f[f[c+36>>2]+40>>2]|f[f[c+36>>2]+40>>2]==(f[c+32>>2]+65536|0)||(f[c+28>>2]=1),l=c,d=e(f[c+88>>2],f[(f[c+36>>2]+8|0)+(f[c+32>>2]<<2)>>2],f[c+80>>2],f[c+76>>2],f[c+72>>2],f[c+28>>2],f[c+64>>2]),f[l+24>>2]=d,f[c+24>>2]<0){f[c+92>>2]=-1;break e}f[c+68>>2]|f[f[c+36>>2]+40>>2]!=(f[c+32>>2]+65536|0)||(f[c+44>>2]=f[c+24>>2]),f[c+32>>2]=f[c+32>>2]+1}for(f[c+68>>2]||(f[f[c+36>>2]+40>>2]?1==f[f[c+36>>2]+40>>2]&&(n=f[c+56>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n,f[c+44>>2]=f[f[c+72>>2]>>2],n=f[f[c+76>>2]>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n):(f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]<<2)>>2]=0-f[c+36>>2],f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]+1<<2)>>2]=f[f[c+36>>2]+4>>2],f[c+44>>2]=f[c+48>>2]+1));;){if(f[f[c+72>>2]>>2]>(f[c+64>>2]-4|0)){f[c+92>>2]=-1;break e}if(f[c+20>>2]=f[f[c+88>>2]+36>>2]+((f[c+84>>2]-f[f[c+88>>2]+24>>2]|0)/140<<9),f[c+16>>2]=0,f[c+60>>2]=_[f[c+80>>2]+(f[f[c+76>>2]>>2]<<1)>>1],m[c+60>>2]>=128&&(f[c+60>>2]=1),!f[f[c+20>>2]+(f[c+60>>2]<<2)>>2]|m[c+60>>2]<=0|m[c+60>>2]>=127?!f[c+60>>2]|!f[f[c+20>>2]+508>>2]||(f[c+16>>2]=f[f[c+20>>2]+508>>2]):f[c+16>>2]=f[f[c+20>>2]+(f[c+60>>2]<<2)>>2],!f[c+16>>2])break;for(f[c+68>>2]||(f[f[c+16>>2]+40>>2]?65536!=f[f[c+16>>2]+40>>2]&&(f[f[c+72>>2]>>2]=f[c+52>>2]):(f[f[f[c+88>>2]+48>>2]+(f[c+44>>2]<<2)>>2]=(0-f[f[f[c+88>>2]+48>>2]+(f[c+44>>2]<<2)>>2]|0)-1,f[c+48>>2]=f[f[c+72>>2]>>2],t=f[c+72>>2],f[t>>2]=f[t>>2]+2)),f[c+12>>2]=1;f[c+12>>2]<f[f[c+16>>2]+4>>2];){if(f[c+8>>2]=f[c+68>>2],f[c+68>>2]||!f[f[c+16>>2]+40>>2]|f[f[c+16>>2]+40>>2]==(f[c+12>>2]+65536|0)||(f[c+8>>2]=1),l=c,d=e(f[c+88>>2],f[(f[c+16>>2]+8|0)+(f[c+12>>2]<<2)>>2],f[c+80>>2],f[c+76>>2],f[c+72>>2],f[c+8>>2],f[c+64>>2]),f[l+4>>2]=d,f[c+4>>2]<0){f[c+92>>2]=-1;break e}f[c+68>>2]|f[f[c+16>>2]+40>>2]!=(f[c+12>>2]+65536|0)||(f[c+44>>2]=f[c+4>>2]),f[c+12>>2]=f[c+12>>2]+1}f[c+68>>2]||(f[f[c+16>>2]+40>>2]?1==f[f[c+16>>2]+40>>2]&&(n=f[c+56>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n,f[c+44>>2]=f[f[c+72>>2]>>2],n=f[f[c+76>>2]>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n):(f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]<<2)>>2]=0-f[c+16>>2],f[f[f[c+88>>2]+48>>2]+(f[c+48>>2]+1<<2)>>2]=f[f[c+16>>2]+4>>2],f[c+44>>2]=f[c+48>>2]+1))}f[c+92>>2]=f[c+44>>2]}else f[c+92>>2]=-1;else{if(f[c+60>>2]&&(-1==f[f[c+84>>2]+4>>2]&&(t=f[c+76>>2],f[t>>2]=f[t>>2]+1),!f[f[c+84>>2]+4>>2])){if(!g[f[c+60>>2]+(f[c+84>>2]+8|0)|0]){f[c+92>>2]=-1;break e}t=f[c+76>>2],f[t>>2]=f[t>>2]+1}f[c+68>>2]||(n=f[f[c+76>>2]>>2],r=f[f[c+84>>2]+4>>2],o=f[f[c+88>>2]+48>>2],i=f[c+72>>2],t=f[i>>2],f[i>>2]=t+1,f[o+(t<<2)>>2]=n-(-2==(0|r)?0:1),n=f[f[c+76>>2]>>2],r=f[f[c+88>>2]+48>>2],o=f[c+72>>2],t=f[o>>2],f[o>>2]=t+1,f[r+(t<<2)>>2]=n),f[c+92>>2]=f[f[c+72>>2]>>2]-1}return A=c+96|0,f[c+92>>2]}(f[n+24>>2],f[n+20>>2],f[f[n+24>>2]+44>>2],n+12|0,n+16|0,0,f[f[n+24>>2]+12>>2]<<1),f[r+8>>2]=o,e=f[f[n+24>>2]+48>>2],t=f[n+16>>2],f[n+16>>2]=t+1,f[e+(t<<2)>>2]=-1,e=f[f[n+24>>2]+48>>2],t=f[n+16>>2],f[n+16>>2]=t+1,f[e+(t<<2)>>2]=0,_[f[f[n+24>>2]+44>>2]+(f[n+12>>2]<<1)>>1]|f[n+8>>2]<0?f[n+28>>2]=f[n+12>>2]+1:f[n+28>>2]=0,A=n+32|0,f[n+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+48>>2]},wasm_main:l,__wbindgen_start:l}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,r),i=o.memory,a=o.rust_calloc,s=o.rust_free,c=o.llparser_create,l=o.llparser_destroy,d=o.llparser_create_descriptor,u=o.llparser_descriptor_set_all,p=o.llparser_descriptor_set_nil,h=o.llparser_descriptor_add_char,f=o.llparser_descriptor_add_range,g=o.llparser_descriptor_revert,_=o.llparser_add_rule,m=o.llparser_prepare,y=o.llparser_parse,v=o.llparser_get_input_buffer,A=o.llparser_get_result,b=o.wasm_main,w=o.__wbindgen_start}])},function(e,t,n){var r=n(4),o=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};o.create=function(e){return new o(e)},o.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},o.prototype.remove=function(e){var t=this._arr,n=0;if("function"==typeof e)for(n=0;n<t.length;n++){var r=t[n].func;if(r===e)return t.splice(n,1),this.empty=!t.length,r}else for(n=0;n<t.length;n++)if(t[n].id===e){var o=t[n].func;return t.splice(n,1),this.empty=!t.length,o}return null},o.prototype.call=function(e,t,n){for(var r=this._arr,o=!1,i=0;i<r.length;i++){!1===a(this._type,r[i].func,e,t,n)&&(o=!0)}if(o)return!1};var i=function(e,t){if(!t.type||!1!==s.call(null,[e,t])){if(r.throwGlobalError)throw e;console.error(e.stack)}},a=o.safeCallback=function(e,t,n,r,o){try{return t.apply(n,r)}catch(s){var a="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";n&&n.is&&(a+=n.is),a+="#"+(t.name||"(anonymous)"),o&&o.triggerLifeTime("error",[s]),i(s,{message:a,type:e,element:n,method:t,args:r})}},s=o.create();o.addGlobalErrorListener=function(e){return s.add(e)},o.removeGlobalErrorListener=function(e){return s.remove(e)};var c=null;o.addGlobalWarningListener=function(e){return(c=o.create()).add(e)},o.removeGlobalWarningListener=function(e){if(c){var t=c.remove(e);return c.empty&&(c=null),t}return null},o.hasGlobalWarningListeners=function(){return!!c},o.triggerWarning=function(e){var t="[Exparser] [Warning] [Component] "+e;c.call(null,[t],null)},e.exports=o},function(e,t){var n={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"undefined"!=typeof window&&"undefined"!=typeof document?"dom":"none",hasDOMBackend:!("undefined"==typeof window||"undefined"==typeof document)};e.exports=n},function(e,t){var n=Object.prototype.hasOwnProperty,r=function(e,t){var o=typeof e;if("object"===o&&null!==e){var i=t?t.get(e):void 0;if(void 0!==i)return i;if(e instanceof Array){i=[],t&&t.set(e,i);for(var a=0;a<e.length;a++)i[a]=r(e[a],t)}else for(var s in i={},t&&t.set(e,i),e)n.call(e,s)&&(i[s]=r(e[s],t));return i}if("symbol"!==o)return e};t.deepCopy=function(e,t){var n=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return r(e,n)}},function(e,t,n){var r=n(3),o=(Object.prototype.hasOwnProperty,function(){});o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}});var i=null;o._setElementSystem=function(e){i=e,o._setElementSystem=null};var a=null;o._setComponent=function(e){a=e,o._setComponent=null};var s=Date.now();o.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},o.getInitTimeStamp=function(e){return s},o.create=function(e,t,n){var r=(n=n||{}).originalEvent,i=n.extraFields||{},a=Date.now()-s,c=new o;for(var l in c.currentTarget=null,c.type=e,c.timeStamp=a,c.mark=null,c.detail=t,c.bubbles=!!n.bubbles,c.composed=!!n.composed,c.__originalEvent=r,c.__hasCapture=!!n.capturePhase,c.__stopped=!1,c.__dispatched=!1,i)c[l]=i[l];return c},o.prototype.preventDefault=function(){this.__originalEvent&&this.__originalEvent.preventDefault()},o.prototype.stopPropagation=function(){this.__stopped=!0},o.prototype.isStopped=function(){return!!this.__stopped},o.prototype.markMutated=function(){this.__mutatedMarked=!0},o.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var c=function(e,t,n,r){for(var o=e,a=e instanceof i?e.collectMarks():{},s=[],c=[],l=e;l;){if(o!==l&&(s.push(e),e=l,c.push(a),a=e instanceof i?e.collectMarks():{}),o=l.parentNode,!1===r(l,e,a))return;if(l.__wxHost){if(n)break;e=s.pop()||l.__wxHost,a=c.pop()||(e instanceof i?e.collectMarks():{}),o=l=l.__wxHost}else{var d=!0;l instanceof i&&(d=!1),l=d||n?l.parentNode:l.__wxSlotParent}}};o.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&((e=e.__wxElement).shadowRoot instanceof i&&(e=e.shadowRoot)),t.target=e instanceof i?e.__methodCaller:e;var n=function(e,n,r){if(!(n&&n.length&&t.mutatedMarked())){var o=t.currentTarget=r instanceof i?r.__methodCaller:r,s=e.call(o,[t],r instanceof a?r:void 0);n&&n.length&&t.markMutated(),!1===s&&(t.__originalEvent&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},r=t.type,o=!t.composed;if(t.__hasCapture){var s=[];c(e,0,o,(function(e,t,n){return e.__wxCaptureEvents&&e.__wxCaptureEvents[r]&&s.push([e,t,n]),!0}));for(var l=s.length-1;l>=0;l--){var d=s[l],u=d[0],p=d[1];t.target=p instanceof i?p.__methodCaller:p,t.mark=d[2];var h=u.__wxCaptureMutated&&u.__wxCaptureMutated[r];if(n(u.__wxCaptureEvents[r],h,u),t.__stopped)break}}if(t.target=e instanceof i?e.__methodCaller:e,!t.__stopped){var f=!t.bubbles;c(e,0,o,(function(e,o,a){t.target=o instanceof i?o.__methodCaller:o,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[r];return e.__wxEvents&&e.__wxEvents[r]&&n(e.__wxEvents[r],s,e),!f&&!t.__stopped}))}}},o.triggerEvent=function(e,t,n,r){var i=o.create(t,n,r);o.dispatchEvent(e,i)},o.addListenerToElement=function(e,t,n,o){var i=o&&o.mutated;if(i){var s=n;n=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var c=void 0;return o&&(o.useCapture||o.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=r.create("Event Listener")),c=e.__wxCaptureEvents[t].add(n),i&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(c))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=r.create("Event Listener")),c=e.__wxEvents[t].add(n),i&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(c))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,n,o]),c},o.removeListenerFromElement=function(e,t,n,r){var o=null;if(r&&(r.useCapture||r.capture))e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(o=e.__wxCaptureEvents[t].remove(n)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(i=e.__wxCaptureMutated[t].indexOf(n))&&e.__wxCaptureMutated[t].splice(i,1);else if(e.__wxEvents&&e.__wxEvents[t]&&(o=e.__wxEvents[t].remove(n)),e.__wxMutated&&e.__wxMutated[t]){var i;-1!==(i=e.__wxMutated[t].indexOf(n))&&e.__wxMutated[t].splice(i,1)}o&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,o,r])},e.exports=o},function(e,t,n){var r=n(1),o=" \n\r\t\f",i=null;t.parseMultiPaths=function(e){return i||(i=r.create({MULTIPLE_PATHS:[{id:"arrayConcat",states:["MULTIPLE_PATHS",",","SINGLE_PATH"]},{id:"array",states:["SINGLE_PATH"]}],SINGLE_PATH:[{id:"arrayConcat",states:["SINGLE_PATH",".","VAR_NAME"]},{id:"arrayConcat",states:["SINGLE_PATH","[","INT","]"]},{id:"array",states:["VAR_NAME"]},{id:"_jump",states:["SINGLE_PATH",o]}],VAR_NAME:[{id:"_blank",states:[o,"VAR_NAME"]},{id:"_jump",states:["VAR_NAME",o]},{id:"_raw",states:["*","*"]},{id:"_raw",states:["_a-zA-Z$","VAR_NAME_AFTER"]}],VAR_NAME_AFTER:[{id:"_raw",states:["_a-zA-Z0-9$","VAR_NAME_AFTER"]},{id:"_raw",states:["NULL"]}],INT:[{id:"_blank",states:[o,"INT"]},{id:"_jump",states:["INT",o]},{id:"toNumber",states:["0-9","INT_AFTER"]}],INT_AFTER:[{id:"_raw",states:["0-9","INT_AFTER"]},{id:"_raw",states:["NULL"]}]},{arrayConcat:function(e){return e[0].push(e[2]),e[0]},array:function(e){return e},toNumber:function(e){return parseInt(e[0]+e[1],10)}})),i.parse("MULTIPLE_PATHS",e)},t.parseSinglePath=function(e){for(var t=e.length,n=[],r="",o=0,i=!1,a=!1,s=0;s<t;s++){var c=e[s];if("\\"===c)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1]||"\\"===e[s+1])?(r+=e[s+1],s++):r+="\\";else if("."===c)r&&(n.push(r),r="");else if("["===c){if(r&&(n.push(r),r=""),0===n.length)throw new Error("The path string should not start with []: "+e);a=!0,i=!1}else if("]"===c){if(!i)throw new Error("There should be digits inside [] in the path string: "+e);a=!1,n.push(o),o=0}else if(a){if(c<"0"||c>"9")throw new Error("Only digits (0-9) can be put inside [] in the path string: "+e);i=!0,o=10*o+c.charCodeAt(0)-48}else r+=c}if(r&&n.push(r),0===t)throw new Error("The path string should not be empty");return n}},function(e,t,n){var r=n(3),o=n(4),i=n(7),a=["created","ready","cacheAttached","attached","moved","detached","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],c=function(){},l=i.parseMultiPaths,d=function(){};d.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(null===t||t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0};var u=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},p=function(e){var t={};for(var n in e)t[n]=e[n];return t},h=function(e,t){for(var n in t)hasOwnProperty.call(e,n)?(r.hasGlobalWarningListeners()&&"_"===n.charAt(0)&&r.triggerWarning('data field "'+n+'" from different behaviors is overriding or merging.'),"object"!=typeof e[n]||"object"!=typeof t[n]||null===t[n]||t[n]instanceof Array?e[n]=t[n]:(e[n]instanceof Array?e[n]=u(e[n]):e[n]=p(e[n]),h(e[n],t[n]))):e[n]=t[n]};d.create=function(e){var t=new d;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.placeholder=e.placeholder||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:o.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:o.lazyRegistration)||d.prepare(t),e.is&&(d._list[e.is]=t),t},d.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.ancestors,o="",i=0;for(i=0;i<(t.behaviors||[]).length;i++){var u=t.behaviors[i],p=u;for(o in"string"==typeof p&&(p=d._list[u],r.hasGlobalWarningListeners()&&(p instanceof d||r.triggerWarning('behavior "'+u+'" is not found (when preparing behavior "'+e.is+'").'))),p._unprepared&&d.prepare(p),"object"==typeof p.data&&(null===e.data?e.data=p.data:h(e.data,p.data)),p.generics){var f=p.generics[o];"object"!=typeof f&&(f={}),e.generics[o]={default:f.default}}for(o in p.properties)r.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&r.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.properties[o]=p.properties[o];for(o in p.relations)e.relations[o]=p.relations[o];for(o in p.methods)r.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&r.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.methods[o]=p.methods[o];for(var g=0;g<p.ancestors.length;g++)n.indexOf(p.ancestors[g])<0&&n.push(p.ancestors[g])}for(o in"object"==typeof t.data&&(null===e.data?e.data=t.data:h(e.data,t.data)),t.properties){r.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&r.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").');var _=t.properties[o];s.indexOf(_)>=0?_={type:_}:s.indexOf(_.type)<0&&_.optionalTypes&&_.optionalTypes.length>0&&(_.type=_.optionalTypes[0]),r.hasGlobalWarningListeners()&&s.indexOf(_.type)<0&&r.triggerWarning('the type of property "'+o+'" is illegal (when preparing behavior "'+e.is+'").'),void 0===_.value&&(_.type===String?_.value="":_.type===Number?_.value=0:_.type===Boolean?_.value=!1:_.type===Array?_.value=[]:_.value=null),e.properties[o]={type:_.type,optionalTypes:_.optionalTypes,value:_.value,filter:_.filter,observer:_.observer,public:!!(void 0===_.public?e.options.publicProperties:_.public),availability:_.availability,observeAssignments:!!_.observeAssignments}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(o in t.lifetimes)e.lifetimes[o]=t.lifetimes[o];for(i=0;i<a.length;i++)void 0===e.lifetimes[a[i]]&&(e.lifetimes[a[i]]=t[a[i]]);for(o in t.listeners)e.listeners[o]=t.listeners[o];var m=t.observers;if(m instanceof Array)for(i=0;i<m.length;i++){var y=m[i];e.observers.push({paths:l(y.fields||"**"),observer:y.observer})}else for(o in m)e.observers.push({paths:l(o),observer:m[o]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(o in t.pageLifetimes)e.pageLifetimes[o]=t.pageLifetimes[o];for(o in t.relations){var v=t.relations[o];e.relations[o]={target:v.target||o,type:v.type,linked:v.linked||c,linkChanged:v.linkChanged||c,unlinked:v.unlinked||c,linkFailed:v.linkFailed||c}}for(o in t.methods)"function"==typeof t.methods[o]&&(r.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&r.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.methods[o]=t.methods[o]);n.push(e)}},d._list=Object.create(null),d.prototype.hasBehavior=function(e){this._unprepared&&d.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof d){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===d._list[e])return!0;return!1},d.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var r=this.ancestors[n];for(var o in r.listeners)Object.prototype.hasOwnProperty.call(e,o)?e[o].push(r.listeners[o]):e[o]=[r.listeners[o]]}return e},d.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,n=0;n<t.length;n++)for(var r=this.ancestors[n].observers,o=0;o<r.length;o++){var i=r[o];e.addObserver(i.observer,i.paths)}},d.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=r.create("Lifetime Method")}));for(var n=0;n<t.length;n++){var o=t[n];for(var i in o.lifetimes)o.lifetimes[i]&&(e[i]||(e[i]=r.create("Lifetime Method")),e[i].add(o.lifetimes[i]))}return e},d.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var o=t[n];for(var i in o.pageLifetimes)o.pageLifetimes[i]&&(e[i]||(e[i]=r.create("Page Lifetime Method")),e[i].add(o.pageLifetimes[i]))}return e},d.callDefinitionFilter=function(e){var t=e.definitionFilter,n=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?d._list[t]:t)&&t.definitionFilter&&(n.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,n)}:null},e.exports=d},function(e,t,n){var r=n(3),o=n(6),i=n(10),a=n(11),s=n(12),c=n(14),l=n(4),d=n(13),u=function(e){p(this,e||null)};u.prototype=Object.create(Object.prototype,{constructor:{value:u,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var n=this.ownerShadowRoot.__wxHost;n.__idCacheDirty=!0,this.__domElement&&n.__componentOptions.writeIdToDOM&&(this.__domElement.id=t)}l.writeExtraInfoToAttr&&this.__domElement&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){if(e=String(e),this.__slot!==e){if(this.__inheritSlots)return void(r.hasGlobalWarningListeners()&&r.triggerWarning('slots-inherited nodes do not support "slot" attribute.'));this.__slot=e,b(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})}},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return k.call(this,e)},configurable:!0}}),o._setElementSystem(u),a._setElementSystem(u);var p=u.initialize=function(e,t,n){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=d.backendExtractedDefault,e.__domElement=t,e.$$=t,t&&(t.__wxElement=e)};u._clone=function(e,t,n,r){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var o in t.__marks)e.__marks[o]=t.__marks[o];for(var i in e.__attributes=Object.create(null),t.__attributes)e.__attributes[i]=t.__attributes[i];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=d.backendExtractedDefault,e.__domElement=n,e.$$=n,n&&(n.__wxElement=e)};var h=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof u){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof u&&t(e.shadowRoot);for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r])}};t(e)}},f=function(e){if(e.__attached){var t=function(e){if(e instanceof u){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r]);e.shadowRoot instanceof u&&t(e.shadowRoot),e.__attached=!1,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}};t(e)}},g=function(e){if(!e.__attached)return h(e);var t=function(e){if(e instanceof u){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r]);e.shadowRoot instanceof u&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)},_=function(e,t,n){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var r,o=[n];r="add"===t?{type:"childList",target:e,addedNodes:o}:"remove"===t?{type:"childList",target:e,removedNodes:o}:{type:"childList",target:e,addedNodes:o,removedNodes:o},i._callObservers(e,"__childObservers",r)}},m=function(e,t){if(e instanceof u&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var n=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var r=e.childNodes,o=0;o<r.length;o++){var i=r[o];i instanceof u&&n(i)}};n(e)}};u._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var n=e.__idCache=Object.create(null),r=function(e){e.__id&&(n[e.__id]||(n[e.__id]=e));for(var t=e.childNodes,o=0;o<t.length;o++)t[o]instanceof u&&r(t[o])};r(t)}};var y=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t,n=e.__wxHost,o=Object.create(null);t=void 0!==n.__singleSlot?{"":n.__singleSlot}:n.__slots;var i=function(e){void 0!==e.__slotName&&(o[e.__slotName]?r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+e.__slotName+'" duplication is found under a single shadow root. The first one was accepted.'):o[e.__slotName]=e);for(var t=e.childNodes,n=0;n<t.length;n++)t[n]instanceof u&&i(t[n])};i(e),void 0!==n.__singleSlot?n.__singleSlot!==o[""]&&(o[""]&&(o[""].__wxSlotChildren=n.childNodes),v(n,o,t,!0),n.__singleSlot&&(n.__singleSlot.__wxSlotChildren=[]),n.__singleSlot=o[""]||null):(v(n,o,t,!1),n.__slots=o)}},v=function(e,t,n,r){var o=e.childNodes,i=0;if(r){var a=t[""];if(a)for(;i<o.length;i++)w(a,o[i],null,!1,!1,!1,-1);else if(a=n[""])for(;i<o.length;i++)w(a,null,o[i],!0,!1,!1,i)}else{var s=function(e){for(var r=0;r<e.length;r++){var o=e[r],i=o.__slot||"",a=t[i];a?w(a,o,null,!1,!0,!0):(a=n[i])&&w(a,null,o,!0,!0,!0),o.__inheritSlots&&s(o.childNodes)}};s(o)}},A=function(e,t,n,r){for(var o=function(e,t,r){var i=e.childNodes,a=0;for(t&&(a=i.indexOf(t)+(r?0:1));a<i.length;a++){var s=i[a];if(s.__slot===n)return s;if(s.__inheritSlots){var c=o(s,null,!1);if(c)return c}}return null};t!==e;t=t.parentNode){var i=o(t.parentNode,t,r);if(i)return i;r=!1}return null},b=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var n=e.__slot||"",o=t.__slots[n];if(o){var i=A(t,e,n,!1);w(o,e,i,!1,!0,!0)}else r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+n+'" is not found.'),(o=e.__wxSlotParent)&&w(o,null,e,!0,!0,!0)}},w=function(e,t,n,r,o,i,a){if(r&&(n.__wxSlotParent=null),o&&(a=e.__wxSlotChildren.indexOf(n)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&i){var c=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(c,1),s===e&&c<a&&a--}}var d=!1;(t&&t.__backendExtracted||n&&n.__backendExtracted)&&(d=!0),d||function(e,t,n,r,o){var i=e;if(i instanceof u){for(;i.__virtual;){var a=i.__wxSlotParent;if(!a){i=null;break}if(t&&!n){var s=a.__wxSlotChildren.indexOf(i);n=a.__wxSlotChildren[s+1]}i=a}i instanceof u&&(i=i.__domElement)}if(i){var c=r,l=null,d=null;if(t)if(t.__virtual){var p=document.createDocumentFragment(),h=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?h(n):p.appendChild(n.__domElement)}};h(t),l=p}else l=t.__domElement;if(n)if(n.__virtual){var f=e,g=0;if(r){var _=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?_(n):i.removeChild(n.__domElement)}};_(n),c=!1,g=o+1}else f=n.__wxSlotParent,g=n===t?o:f.__wxSlotChildren.indexOf(n);if(t){var m=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];if(!n.__virtual)return n;var r=m(n,0);if(r)return r}};n=null;for(var y=f;!(n=m(y,g))&&y.__virtual;y=y.__wxSlotParent)g=y.__wxSlotParent.__wxSlotChildren.indexOf(y)+1;n&&(d=n.__domElement)}}else d=n.__domElement;c?l?i.replaceChild(l,d):i.removeChild(d):l&&(d?i.insertBefore(l,d):i.appendChild(l))}else if(t&&t.__wxSlotParent){var v=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)v(e.__wxSlotChildren[t]);else{var n=e.__domElement;n&&n.parentNode&&n.parentNode.removeChild(n)}};v(t)}}(e,t,n,r,a),l.writeExtraInfoToAttr&&(r&&n instanceof u&&n.__domElement&&n.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof u&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),o&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,r?1:0,t):e.__wxSlotChildren.splice(a,r?1:0))},C=function(e,t){for(var n=e.childNodes,r=0;r<n.length;r++){var o=n[r];t(e,o),o.__inheritSlots&&C(o,t)}},I=u.insertChildToElement=function(e,t,n,o){if(void 0!==e.__slotName)return!1;var a=n>=0?e.childNodes[n]:null;o&&t===a&&(o=!1);var s=null,c=e,l=e;if(t){s=t.parentNode,t.parentNode=e;var d=e.__subtreeObserversCount;if(s){var u=s.childNodes.indexOf(t);s.childNodes.splice(u,1),s===e&&u<n&&n--,d-=s.__subtreeObserversCount}d&&i._updateSubtreeCaches(t,d)}for(var p=e;p&&p.__inheritSlots;)p=p.parentNode;for(var v=!p||!p.__slots,b=!v||e.__inheritSlots,I=s;I&&I.__inheritSlots;)I=I.parentNode;var E=!I||!I.__slots,S=!E||s&&s.__inheritSlots;if(v)void 0!==e.__singleSlot&&(c=l=e.__singleSlot,r.hasGlobalWarningListeners()&&(c||r.triggerWarning("slot is not found."))),c?w(c,t,a,o,b,S,n):t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,S,!1),t&&!E&&t.__inheritSlots&&C(t,(function(e,t){w(e,t,null,!1,!0,!0,-1)}));else{var T="";if(t&&(T=t.__slot||"",c=p.__slots[T]||null,r.hasGlobalWarningListeners()&&(c||r.triggerWarning('slot "'+T+'" is not found.'))),a&&(l=p.__slots[a.__slot||""]||null),a&&l&&o&&w(l,null,a,o,!0,!1),t)if(c){var x=a?A(p,a,T,!o):A(p,e,T,!1);w(c,t,x,!1,!0,S)}else t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,S,!1);a&&o&&a.__inheritSlots&&C(a,(function(e,t){w(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&C(t,(function(t,n){var i=n.__slot||"",s=p.__slots[i]||null;if(s){var c=a?A(p,a,i,!o):A(p,e,i,!1);w(s,n,c,!1,!0,!0)}else r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+i+'" is not found.'),n.__wxSlotParent&&w(n.__wxSlotParent,null,n,!0,!0,!1)}))}return o&&(e.__subtreeObserversCount&&i._updateSubtreeCaches(a,-e.__subtreeObserversCount),a.parentNode=null),-1===n&&(n=e.childNodes.length),t?e.childNodes.splice(n,o?1:0,t):e.childNodes.splice(n,o?1:0),e.ownerShadowRoot&&(o&&m(a,e.ownerShadowRoot),t&&m(t,e.ownerShadowRoot),y(e.ownerShadowRoot)),o&&(f(a),_(e,"remove",a)),t&&(s?g(t):h(t),s===e?_(e,"move",t):(s&&_(s,"remove",t),_(e,"add",t))),!0},E=function(e,t,n,r){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var o=r?n:t,i=-1;return n&&(i=e.childNodes.indexOf(n))<0?null:I(e,t,i,r)?o:null};u._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],w(t,e,null,!1,!1,0),e.__hostAssociated=!0,y(e)},u.appendChild=function(e,t){return E(e,t,null,!1)},u.insertBefore=function(e,t,n){return E(e,t,n,!1)},u.removeChild=function(e,t){return E(e,null,t,!0)},u.replaceChild=function(e,t,n){return E(e,t,n,!0)},u.prototype.appendChild=function(e){return E(this,e,null,!1)},u.prototype.insertBefore=function(e,t){return E(this,e,t,!1)},u.prototype.removeChild=function(e){return E(this,null,e,!0)},u.prototype.replaceChild=function(e,t){return E(this,e,t,!0)};var S=function(e){var t=!0,n=!0;if(e instanceof u?(e.__backendExtracted=!0,e.$$=e.__domElement=null,n=!1):e instanceof s&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,n=!1),t&&e.__wxSlotChildren)for(var r=0;r<e.__wxSlotChildren.length;r++){var o=e.__wxSlotChildren[r];S(o)}else if(n&&e.childNodes)for(var i=0;i<e.childNodes.length;i++)S(e.childNodes[i])};u.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return S(e),t};var T=function(e,t){if(!t){var n=c.toElement(e.__domElement);return e.$$=e.__domElement=n,n}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var r=c.toElement(e.__domElement);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null},x=function(e,t,n){var r=e instanceof u&&e.__virtual,o=t?t.childNodes[n]:void 0,i=!0,a=!0,c=null;if(e instanceof u)e.__backendExtracted=!1,r||(c=T(e,o)),a=!1;else if(e instanceof s)e.__backendExtracted=!1,c=function(e,t){if(!t){var n=document.createTextNode(e.textContent);return e.$$=e.__domElement=n,n}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var r=document.createTextNode(e.textContent);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null}(e,o),i=!1,a=!1;else{var l=document.createDocumentFragment();if(l.__wxSlotChildren=e.__wxSlotChildren,o&&o.childNodes)for(;o.childNodes.length;)l.appendChild(o.childNodes[0]);c=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,o),e=l}c?(t.appendChild(c),o=c):o=t?t.childNodes[n]:void 0;var d=0;if(i&&e.__wxSlotChildren)for(var p=0;p<e.__wxSlotChildren.length;p++){var h=e.__wxSlotChildren[p];if(r)n=x(h,t,n);else if(h.asShadowRoot){for(var f=0;f<h.asShadowRoot.childNodes.length;f++)d=x(h.asShadowRoot.childNodes[f],o,d);e.shadowRoot=o,o.__wxHost=e,e.__wxSlotChildren[0]=o,o.__wxSlotParent=e,e.__singleSlot===h&&(e.__singleSlot=o)}else d=x(h,o,d)}else if(a&&e.childNodes)for(var g=0;g<e.childNodes.length;g++)d=x(e.childNodes[g],o,d);if(r)return n;for(;o.childNodes.length>d;)o.removeChild(o.childNodes[d]);return n+1};u.injectBackend=function(e,t){if(e.__backendExtracted){var n=document.createDocumentFragment();n.appendChild(t),x(e,n,0)}},u.prototype.triggerEvent=function(e,t,n){o.triggerEvent(this,e,t,n)},u.prototype.dispatchEvent=function(e){o.dispatchEvent(this,e)},u.prototype.addListener=function(e,t,n){o.addListenerToElement(this,e,t,n)},u.prototype.removeListener=function(e,t,n){o.removeListenerFromElement(this,e,t,n)},u.setMethodCaller=function(e,t){e.__methodCaller=t},u.getMethodCaller=function(e){return e.__methodCaller},u.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},u.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute(e,t)},u.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&this.__domElement.removeAttribute(e))},u.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},u.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var n in t.__marks)hasOwnProperty.call(e,n)||(e[n]=t.__marks[n]);return e};var k=u.prototype.setNodeStyle=function(e,t){this.__styleSegments[t||0]=e;var n=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var r=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof r)return void this.__domElement.setAttribute("style",r.call(this,n))}this.__domElement&&this.__domElement.setAttribute("style",n),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})};u.replaceDocumentElement=function(e,t){e.__attached||(t.parentNode.replaceChild(e.__domElement,t),h(e))},u.pretendAttached=function(e){e.__attached||h(e)},u.pretendDetached=function(e){e.__attached&&f(e)},u.isAttached=function(e){return e.__attached},u.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,y(e.ownerShadowRoot))},u.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},u.getInheritSlots=function(e){return e.__inheritSlots};var P=function(e,t){var n=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!n)return null;var r=n[1].slice(1),o=n[2].split(".");return o.shift(),r||o.length?{id:r,classes:o,relation:t||""}:null},D=u.parseSelector=function(e){for(var t=String(e||"").split(","),n=[],r=!1,o=0;o<t.length;o++){for(var i=t[o].split(/( |\t|>+)/g),a=[],s="",c=0;c<i.length;c++){var l=i[c];if(l&&" "!==l&&"\t"!==l)if(">"!==l[0]){var d=P(l,s);if(s="",!d)break;a.push(d)}else{if(""!==s)break;s=l,">>>"===l&&(r=!0)}}c===i.length&&a.length&&n.push(a)}return n.length?{crossShadow:r,union:n}:null},O=function(e,t,n,r,o){if(t===e)return!1;var i=n[r],a=!0;i.id&&i.id!==t.__id&&(a=!1);for(var s=i.classes,c=0;a&&c<s.length;c++)t.classList.contains(s[c])||(a=!1);if(!a&&">"===o)return!1;var l=t;if(a&&0===r){if(null===e)return!0;for(l=l.parentNode;l;l=l.parentNode)if(l===e)return!0;if(">>>"!==o)return!1;l=t,a=!1}var d=a?i.relation:o;do{l.parentNode?l=l.parentNode:">>>"===d?l=l.__wxHost:">>>"===o?(a=!1,l=l.__wxHost):l=null,l===e&&(l=null)}while(l&&l.__virtual);if(!l)return!1;if(a){if(O(e,l,n,r-1,d))return!0;if(">>>"!==o)return!1}return O(e,l,n,r,o)},N=function(e,t,n){if(n.__virtual)return!1;for(var r=e.union,o=0;o<r.length;o++){var i=r[o];if(O(t,n,i,i.length-1,">"))return!0}return!1},R=function(e,t,n,r,o){if(N(t,n,r)&&(e.push(r),o))return!0;if(r.shadowRoot&&t.crossShadow&&((r.ownerShadowRoot?r.ownerShadowRoot.__wxHost.__componentOptions.domain:l.domain)===r.__componentOptions.domain&&R(e,t,n,r.shadowRoot,o)&&o))return!0;for(var i=r.childNodes,a=0;a<i.length;a++)if(i[a]instanceof u&&R(e,t,n,i[a],o)&&o)return!0;return!1};u.prototype.querySelector=function(e){var t="object"==typeof e?e:D(e);if(!t)return null;var n=[];return R(n,t,this,this,!0),n[0]||null},u.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:D(e),n=[];return t?(R(n,t,this,this,!1),n):[]},u.matchSelector=function(e,t){var n="object"==typeof e?e:D(e);return!!n&&N(n,null,t)},u.prototype.matchSelector=function(e,t){var n="object"==typeof e?e:D(e);return!!n&&N(n,this,t)},e.exports=u},function(e,t,n){var r=n(3),o=function(){};o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),o.create=function(e){var t=new o;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},o.prototype.observe=function(e,t){var n=0,o=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(o),subtree:t.subtree?e:null}),n++),t.childList&&(e.__childObservers||(e.__childObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(o),subtree:t.subtree?e:null}),n++),t.characterData&&(e.__textObservers||(e.__textObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(o),subtree:t.subtree?e:null}),n++),t.subtree&&i(e,n),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(o),subtree:null}))},o.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var n=e[t];n.funcArr.remove(n.id),n.subtree&&i(n.subtree,-1)}this._binded=[]};var i=o._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var n=e.childNodes;if(n)for(var r=0;r<n.length;r++)i(n[r],t)};o._callObservers=function(e,t,n){do{e[t]&&e[t].call(e,[n]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},o._callSingleObserver=function(e,t,n){e[t]&&e[t].call(e,[n])},e.exports=o},function(e,t){var n=function(){},r=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,o=null;n._setElementSystem=function(e){o=e,n._setElementSystem=null};var i=Object.prototype.hasOwnProperty;n.create=function(e,t){var r=new n;for(var o in r._prefix="",r._addOriginalClass=!1,r._alias=t,r._resolvedAlias={},t)r._resolvedAlias[o]="";return r._rawNames=[],r._elem=e,r._owner=null,r};var a=function(e){var t="",n=e._rawNames,r=e._prefix,o=e._owner?e._owner._resolvedAlias:null,a=e._addOriginalClass;r&&(r+="--");for(var s=0;s<n.length;s++){var c=n[s];if(s&&(t+=" "),o&&i.call(o,c))t+=o[c];else if("~"===c[0])t+=c.slice(1);else if("^"===c[0]){c=c.slice(1);for(var l=e._owner||null;"^"===c[0];)c=c.slice(1),l=l?l._owner:null;var d=l?l._prefix:"";d&&(d+="--"),t+=d+c}else a&&(t+=c+" "),t+=r+c}return t},s=function(e){var t=e._elem.__domElement;if(t){var n=a(e);n?t.setAttribute("class",n):t.removeAttribute("class")}},c=function(e){var t=e.classList;t instanceof n&&(t._alias&&l(t),s(t));for(var r=e.childNodes,i=0;i<r.length;i++)r[i]instanceof o&&c(r[i])},l=function(e){var t=e._owner;if(!t)return!1;var n=!1;for(var r in e._alias){var a=e._alias[r],s=[];if(a)for(var l=0;l<a.length;l++){var d=a[l];if(i.call(t._alias,d)){var u=t._resolvedAlias[d];s.push(u)}else{var p=e._prefix&&d?e._prefix+"--"+d:d;s.push(p)}}var h=s.join(" ");e._resolvedAlias[r]!==h&&(n=!0,e._resolvedAlias[r]=h)}n&&e._elem.shadowRoot instanceof o&&c(e._elem.shadowRoot)};n.prototype.toggle=function(e,t){var n=this._rawNames.indexOf(e);void 0===t&&(t=n<0),t?n<0&&(this._rawNames.push(e),s(this)):n>=0&&(this._rawNames.splice(n,1),s(this))},n.prototype.contains=function(e){for(var t=this._rawNames,n=0;n<t.length;n++){var r=t[n];if("~"===r[0]){if(r.slice(1)===e)return!0}else if("^"===r[0]){for(var o=1;"^"===r[o];)o++;if(r.slice(o)===e)return!0}else if(r===e)return!0}return!1},n.prototype._setOwnerOptions=function(e,t,n){var r=this._prefix;this._prefix=t,r!==t&&(this._addOriginalClass=n,this._owner=e,this._alias&&l(this),s(this))},n.prototype._setAlias=function(e,t){var n=this._owner,o=String(t).match(r);this._alias[e]=o;var a=[];if(o)for(var s=0;s<o.length;s++){var l=o[s];n&&i.call(n._alias,l)?a.push(n._resolvedAlias[l]):a.push(this._prefix?this._prefix+"--"+l:l)}this._resolvedAlias[e]=a.join(" "),c(this._elem.shadowRoot)},n.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(r)||[],s(this)},n.prototype.getClassNames=function(){return a(this)},n.prototype.getPrefix=function(){return this._prefix},n.prototype.getAddOriginalClass=function(){return this._addOriginalClass},n.prototype.getRawNames=function(){return this._rawNames},e.exports=n},function(e,t,n){var r=n(10),o=n(4),i=n(13),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t){var n=new a;n.__slot="";var r=null;return i.backendExtractedDefault||"dom"!==o.documentBackend?n.__textContent=e:(r=document.createTextNode(e||"")).__wxElement=n,n.$$=n.__domElement=r,n.__backendExtracted=i.backendExtractedDefault,n.__subtreeObserversCount=0,n.parentNode=null,n.ownerShadowRoot=t,n};a.create=function(e){return s(e,null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){this.__domElement?this.__domElement.textContent=e:this.__textContent=String(e),(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&r._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),e.exports=a},function(e,t){t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},function(e,t){var n=function(e){this.tagName=e,this.id="",this.attrs={}};n.toElement=function(e){var t=document.createElement(e.tagName);for(var n in e.id&&(t.id=e.id),e.attrs)t.setAttribute(n,e.attrs[n]);return t},n.fromElement=function(e){var t=new n(e.tagName);t.id=e.id;for(var r=e.attributes,o=0;o<r.length;o++)t.attrs[r[o].name]=r[o].value;return t},n.prototype.cloneNode=function(){var e=new n;for(var t in e.id=this.id,this.attrs)e.attrs[t]=this.attrs[t];return e},n.prototype.removeAttribute=function(e,t){delete this.attrs[e]},n.prototype.setAttribute=function(e,t){this.attrs[e]=t},n.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=n},function(e,t,n){var r=n(3),o=n(5),i=n(16),a=n(6),s=n(8),c=n(9),l=n(17),d=n(10),u=n(11),p=n(14),h=n(4),f=n(13),g=n(7),_=a.addListenerToElement,m=g.parseSinglePath,y=o.deepCopy,v=function(){};v.prototype=Object.create(c.prototype,{constructor:{value:v,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace([n],e[n]);t.doUpdates()},configurable:!0},$:{get:function(){return c._updateIdMap(this),this.__idCache},set:function(){}}});var A=function(){};A.prototype=Object.create(Object.prototype),a._setComponent(v);var b=null;v._setDefaultTemplateEngine=function(e){b=e,v._setDefaultTemplateEngine=null};var w=function(e,t,n){if(n)for(var o=0;o<n.length;o++)if(s.matchTypeWithValue(n[o],e))return e;return t===String?null==e?(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <String> but get null value. Used empty string instead."),""):(r.hasGlobalWarningListeners()&&"object"==typeof e&&r.triggerWarning("property received type-uncompatible value: expected <String> but got object-typed value. Forcely converted."),String(e)):t===Number?isFinite(e)?Number(e):(r.hasGlobalWarningListeners()&&("number"==typeof e?r.triggerWarning("property received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead."):r.triggerWarning("property received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.")),0):t===Boolean?!!e:t===Array?e instanceof Array?e:(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead."),[]):t===Object?"object"==typeof e?e:(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <Object> but got non-object value. Used null instead."),null):void 0===e?null:e};i.setPropUpdater((function(e,t,n,o){var i=e[0],a=this.__propData[i];if(n=w(n,t.type,t.optionalTypes),!(!t.availability||function(e,t,n,o){var i=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,o?void 0:n];return!!r.safeCallback("Availablity Controller",t,e.__methodCaller,i,e)}(this,t.availability,n,o)))return r.hasGlobalWarningListeners()&&r.triggerWarning('the new value for property "'+i+'" in component "'+(this.is||"")+'" is currently not available. The value is not changed.'),a;if(t.filter){var s=r.safeCallback("Property Filter",t.filter,this.__methodCaller,o?[]:[n,a,e],this);void 0!==s&&(n=s)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[i]&&function(e,t,n){var r=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),o=typeof n;"boolean"===o?n?e.__domElement.setAttribute(r,""):e.__domElement.removeAttribute(r):"object"===o?e.__domElement.setAttribute(r,JSON.stringify(n)):e.__domElement.setAttribute(r,n)}(this,i,n),n})),i.setPropObserver((function(e,t,n,o,i,a){if(o.observeAssignments||e!==t){var s=n[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&r.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),o.observer&&r.safeCallback("Property Observer",o.observer,this.__methodCaller,i?[]:[e,t,n],this),o.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&d._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var C=function(e,t,n){t.__relationLinks||(t.__relationLinks={});for(var r=t.__relationLinks[n]=[],o=0;o<e.length;o++)r.push(null)},I=function(e,t,n,o,i){for(var a=v.prototype.hasBehavior,c="parent"===o,l="shadowHost"===o,d=0;d<e.length;d++){var u,p=e[d];if(u="object"!=typeof p.target?s._list[p.target]:p.target){var h=t[d],f=null;if(!i)for(var g=l?n.ownerShadowRoot&&n.ownerShadowRoot.__wxHost:n.parentNode;g;g=l?g.ownerShadowRoot&&g.ownerShadowRoot.__wxHost:g.parentNode)if(!g.__virtual){if(a.call(g,u)){var _;_=c?g.__relationMap.child:l?g.__relationMap.shadowContent:g.__relationMap.descendant;for(var m=0;m<_.length;m++){var y,A=_[m];if((y="object"!=typeof A.target?s._list[A.target]:A.target)&&a.call(n,y)){f={parent:g,relation:A};break}}}if(c||f)break}t[d]=f,!h||f&&h.parent===f.parent||(r.safeCallback("Relation Unlinked Callback",h.relation.unlinked,h.parent.__methodCaller,[n.__methodCaller],h.parent),r.safeCallback("Relation Unlinked Callback",p.unlinked,n.__methodCaller,[h.parent.__methodCaller],n)),!f||h&&h.parent===f.parent||(r.safeCallback("Relation Linked Callback",f.relation.linked,f.parent.__methodCaller,[n.__methodCaller],f.parent),r.safeCallback("Relation Linked Callback",p.linked,n.__methodCaller,[f.parent.__methodCaller],n)),h&&f&&h.parent===f.parent&&(r.safeCallback("Relation Link Changed Callback",f.relation.linkChanged,f.parent.__methodCaller,[n.__methodCaller],f.parent),r.safeCallback("Relation Link Changed Callback",p.linkChanged,n.__methodCaller,[f.parent.__methodCaller],n)),i||f||r.safeCallback("Relation Link Failed Callback",p.linkFailed,n.__methodCaller,[],n)}}},E=function(e,t,n){if(e instanceof c){var r=0,o=null;if(e instanceof v){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,n||[]),o=e.childNodes,r=0;r<o.length;r++)E(o[r],t,n);e=e.shadowRoot}for(o=e.childNodes,r=0;r<o.length;r++)E(o[r],t,n)}};v._list={},v.register=function(e){var t=e.options||{},n=s.create(e),r=void 0!==t.classPrefix?t.classPrefix:h.classPrefix;null!=r||(r=n.is||"");var o=new A;return o._unprepared=n,o.is=e.is||"",o.behavior=n,o.protoFunc=null,o.props=null,o.template=null,o.innerEvents=null,o.generics=n.generics,o.placeholder=n.placeholder,o.initiator=n.initiator||null,o.options={availability:t.availability||h.availability,domain:t.domain||h.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:h.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:h.allowInWriteOnly),classPrefix:r,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:h.addGlobalClass),templateEngine:t.templateEngine||h.templateEngine||b,renderingMode:t.renderingMode||h.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:h.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:h.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:h.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:h.writeIdToDOM),separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:h.separateInnerData),innerDataExclude:t.innerDataExclude||h.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:h.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:h.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:h.virtualHost)},n._unprepared||v.prepare(o),void 0!==e.is&&(v._list[n.is]=o),o},v.isPrepared=function(e){return!e._unprepared},v.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.options,o={};t._unprepared&&s.prepare(t),n.writeOnly&&(o.data={value:null});var a=e.props={};Object.keys(t.properties).forEach((function(e){var r=t.properties[e];a[e]={type:r.type,optionalTypes:r.optionalTypes,value:r.value,filter:"function"==typeof r.filter?r.filter:null==r.filter?null:t.methods[r.filter],observer:"function"==typeof r.observer?r.observer:null==r.observer?null:t.methods[r.observer],public:r.public,availability:r.availability,observeAssignments:r.observeAssignments},n.writeFieldsToNode&&(o[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var n=this.__dataProxy;n.scheduleReplace([e],t),n.doUpdates()}})}));var c=function(){};e.protoFunc=c;var l=c.prototype=Object.create(v.prototype,o);if(l.is=e.is,l.__componentOptions=n,l.__using=t.using,e.dataGroupObserverTree=i._createObserverTree(a),t._addObserversToDataProxy(e.dataGroupObserverTree),l.__behavior=t,n.writeFieldsToNode)for(var d in t.methods)l[d]=t.methods[d];l.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),l.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var u=t.relations,p=l.__relationMap={};for(var h in u){var f=u[h],g=f.type;p[g]?p[g].push(f):p[g]=[f]}var _=[];p.parent&&_.push((function(e){I(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),p.ancestor&&_.push((function(e){I(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),p.shadowHost&&_.push((function(e){I(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<_.length;t++)_[t].call(this,e)};var m={},y={},A=t.data,b="";for(b in A)y[b]=A[b];for(b in a){var w=a[b];r.hasGlobalWarningListeners()&&void 0!==y[b]&&r.triggerWarning('data field "'+b+'" is overwritten by property with the same name.'),y[b]=w.value,m[b]=w.public}var C=y,E=n.separateInnerData,S=n.innerDataExclude;if(S){for(var T in C={},y)S.test(T)||(C[T]=y[T]);E||(y=C)}var x=n.templateEngine;e.template=x.create(t,y,C,n),l.__propPublic=m;var k=t._getAllListeners(),P=e.innerEvents=[];for(var D in k){for(var O=k[D],N=D.indexOf("."),R=D.slice(N+1),M=N<1?"":D.slice(0,N),L=[],B=0;B<O.length;B++){var F=O[B];"function"!=typeof F&&(F=null==F?null:t.methods[F]),L.push(F)}P.push({id:M,name:R,funcs:L})}}};var S=1,T=Object.prototype.hasOwnProperty,x=function(e,t){return function(n){return e.call(t.__methodCaller,n,t)}},k=function(e,t,n){var o={};for(var i in e){var a=e[i],s=t[i];"object"!=typeof s&&T.call(v._list,s)&&(s=v._list[s]),"object"!=typeof s&&null!=a.default&&(s=v._list[a.default]),r.hasGlobalWarningListeners()&&(s||r.triggerWarning('generic "'+i+'" is not instantiated. The default component is used instead.')),s&&(o[i]=s)}if(r.hasGlobalWarningListeners())for(var c in t)void 0===e[c]&&r.triggerWarning('generic "'+c+'" is not defined. It will be ignored.');return o},P=v._advancedCreate=function(e,t,n,o,a,s){var l=t;l._unprepared&&v.prepare(l);var d=l.options;!d.availability||function(e,t,n){var o=[t?t.__wxHost.__componentOptions.domain:void 0];return!!r.safeCallback("Availablity Controller",n,e,o)}(l,n,d.availability)||(r.hasGlobalWarningListeners()&&r.triggerWarning('the component "'+(l.is||"")+'" is currently not available. The default component is used instead.'),l=v._list[""]);var g=new(0,l.protoFunc);g.__placeholder=function(e,t){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}(a,l.placeholder);var m=l.generics;g.__generics=m?k(m,o||{}):{};var A=null,b=h.documentBackend;if(d.virtualHost){A=null;"dom"===h.documentBackend&&(A=void 0),c.initialize(g,A,n),g.__virtual=!0}else"dom"===b?(A=f.backendExtractedDefault?new p(e):document.createElement(e),c.initialize(g,A,n)):c.initialize(g,null,n);var w=0,I=g.__externalClassAlias={};if(l.behavior.externalClasses){var E=l.behavior.externalClasses;for(w=0;w<E.length;w++)I[E[w]]=null}if(g.classList=u.create(g,I),n){var T=n.__wxHost;g.classList._setOwnerOptions(T.classList,T.__componentOptions.classPrefix,T.__componentOptions.addGlobalClass),h.writeExtraInfoToAttr&&A&&A.setAttribute("exparser:info-class-prefix",T.__componentOptions.classPrefix&&T.__componentOptions.classPrefix+"--")}h.writeExtraInfoToAttr&&A&&(g.__componentInstanceId=S++,A.setAttribute("exparser:info-component-id",g.__componentInstanceId));var P=g.__templateInstance=l.template.createInstance(g,s);g.__propData=P.data;var D=d.separateInnerData;g.__innerData=D?y(g.__propData):null;var O=d.innerDataExclude;if(D&&O){var N={};for(var R in g.__innerData)O.test(R)||(N[R]=g.__innerData[R]);g.__innerData=N}g.__dataProxy=i._advancedCreate(g,g.__propData,g.__innerData,O,l.dataGroupObserverTree,(function(e,t,n,r){g.__templateInstance.updateValues(g,D?g.__innerData:g.__propData,e,t,n,r)})),P.beforeMergeValues&&g.__dataProxy.setBeforeMergeCb((function(e,t,n){g.__templateInstance.beforeMergeValues(e,t,n)})),P.beforeUpdateValues&&g.__dataProxy.setBeforeUpdateCb((function(e){g.__templateInstance.beforeUpdateValues(g,D?g.__innerData:g.__propData,e)})),d.writeOnly&&g.__dataProxy.setHidingValue(!0),g.__idCacheDirty=!1,g.__idCache=P.idMap,null===P.slots[""]&&(P.slots[""]=A),l.options.multipleSlots?g.__slots=P.slots:(g.__singleSlot=P.slots[""]||null,g.__singleSlot&&(g.__singleSlot.__wxSlotChildren=g.childNodes)),P.shadowRoot instanceof c?(g.shadowRoot=P.shadowRoot,c._attachShadowRoot(P.shadowRoot)):A instanceof p?(g.shadowRoot=A,A.__wxHost=g,g.__domElement.asShadowRoot=P.shadowRoot,g.__wxSlotChildren=[A],A.__wxSlotParent=g):(g.shadowRoot=A,A.__wxHost=g,g.__domElement.appendChild(P.shadowRoot),g.__wxSlotChildren=[A],A.__wxSlotParent=g);for(var M=P.listeners,L=0;L<M.length;L++){var B=M[L];_(B.target,B.name,x(B.func,g))}var F=l.innerEvents;for(w=0;w<F.length;w++){var W=F[w],j=W.id?"this"===W.id?g:g.__idCache[W.id]:g.shadowRoot;if(j)for(var U=W.name,V=W.funcs,G=0;G<V.length;G++)_(j,U,x(V[G],g))}var $=g.__relationMap;return $.parent&&(C($.parent,g,"parent"),g.__relationHandler=l.relationHandler),$.ancestor&&(C($.ancestor,g,"ancestor"),g.__relationHandler=l.relationHandler),$.shadowHost&&(C($.shadowHost,g,"shadowHost"),g.__relationHandler=l.relationHandler),g.__propertyChangeListeners=null,l.initiator&&r.safeCallback("Component Initiator",l.initiator,g.__methodCaller,[],g),g.__lifeTimeFuncs.created.call(g.__methodCaller,[],g),g};v.createWithGenerics=function(e,t,n,o){return"object"==typeof e?P(e.is,e,null,n,null,o):e?e.indexOf("-")<0&&!t?l.create(e):(r.hasGlobalWarningListeners()&&(t||T.call(v._list,e)||"virtual"===e||r.triggerWarning('component "'+e+'" is not found. The default component is used instead.')),P(e.toLowerCase(),t||T.call(v._list,e)&&v._list[e]||v._list[""],null,n,null,o)):P("virtual",v._list[""],null,n,null,o)},v.create=function(e,t,n){return v.createWithGenerics(e,t,null,n)},v.listProperties=function(e){var t=[];for(var n in e.__propPublic)void 0!==e.__propPublic[n]&&t.push(n);return t},v.listPublicProperties=function(e){var t=[];for(var n in e.__propPublic)!0===e.__propPublic[n]&&t.push(n);return t},v.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},v.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},v.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},v.getMethod=function(e,t){return e.__behavior.methods[t]},v.getComponentOptions=function(e){return e.__componentOptions},v.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},v.prototype.triggerPageLifeTime=function(e,t){E(this,e,t)},v.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},v.prototype.getRootBehavior=function(){return this.__behavior},v.prototype.getPlaceholder=function(e){return this.__placeholder[e]},v.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var n=this.__relationMap[t.type],r=0;r<n.length&&n[r]!==t;r++);return this.__relationLinks[t.type][r]?[this.__relationLinks[t.type][r].parent]:[]}return function(e,t){var n=[],r=t.type,o="child"===r,i="shadowContent"===r,a=function(r){for(var s=r.childNodes,l=0;l<s.length;l++){var d=s[l];if(d instanceof c)if(d.__virtual)a(d);else{var u;if(d.__relationLinks)if(u=o?d.__relationLinks.parent:i?d.__relationLinks.shadowHost:d.__relationLinks.ancestor)for(var p=0;p<u.length;p++){var h=u[p];if(h&&h.parent===e&&h.relation===t){n.push(d);break}}i&&d instanceof v&&a(d.shadowRoot),o||a(d)}}};return a(i?e.shadowRoot:e),n}(this,t)},v.prototype.hasExternalClass=function(e){return T.call(this.__externalClassAlias,e)},v.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},v.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},v.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},v.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},v.getInnerData=function(e){return e.__innerData},v.getDataProxy=function(e){return e.__dataProxy},v.replaceWholeData=function(e,t,n){e.__propData=t,e.__dataProxy.replaceWholeData(t,n)},v.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},v.prototype.setData=function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace(m(n),e[n]);t.doUpdates()},e.exports=v},function(e,t,n){var r=n(3),o=n(5),i=null,a=null,s=Object.prototype.hasOwnProperty,c=o.deepCopy,l=function(e,t,n,r,o,i){this._data=t,this._innerData=n,this._innerDataExclude=r,this._comp=e,this._updateCb=i,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=o._propFields,this._observers=o._observers,this._observerTree=o._observerTree,this._relatedObserverTreeObj=o,this._observerStatus=[]};l._advancedCreate=function(e,t,n,r,o,i){return new l(e,t,n,r,o,i)};var d=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};l._createObserverTree=function(e){return new d(e)},l.create=function(e,t,n){var r=new d({});return new l({__methodCaller:e},t,null,null,r,n)},l.setPropUpdater=function(e){i=e},l.setPropObserver=function(e){a=e},l.prototype.replaceWholeData=function(e,t){this._data=e},l.prototype.setHidingValue=function(e){this._hidingValue=!!e},l.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},l.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var u=function(e,t,n){for(var o=e,i=0;i<t.length;i++){var a=t[i];if("**"===a)return r.hasGlobalWarningListeners()&&i!==t.length-1&&r.triggerWarning('"**" can only be used at the end of a path descriptor.'),o["**"]||(o["**"]=[]),void o["**"].push(n);o[a]||(o[a]={}),o=o[a]}o["~"]||(o["~"]=[]),o["~"].push(n)},p=function(e,t,n){for(var r=0;r<t.length;r++)u(e,t[r],n)},h=function(e,t,n){for(var r=e,o=0,i="";o<t.length&&"**"!==(i=t[o]);o++){if(!r)return;r=r[i]}var a="**"===i?r["**"]:r["~"];if(a)for(o=0;o<a.length;o++)if(a[o]===n){a.splice(o,1);break}},f=function(e,t,n){for(var r=0;r<t.length;r++)h(e,t[r],n)};d.prototype.addObserver=function(e,t){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},p(this._observerTree,t,n),n},d.prototype.removeObserver=function(e){var t=this._observers[e];f(this._observerTree,t.pathObj,e),this._observers[e]=null},d.prototype.moveObserver=function(e,t){var n=this._observers[e];f(this._observerTree,n.pathObj,e),n.pathObj=t,p(this._observerTree,t,e)},l.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var g=function(e,t,n){for(var o=[],i=n.pathObj,a=0;a<i.length;a++){for(var s=i[a],c=t,l=0;l<s.length;l++){var d=s[l];if("**"===d)break;if("object"!=typeof c){c=void 0;break}c=c[d]}o[a]=c}r.safeCallback("Data Observer",n.func,e.__methodCaller,o,e)},_=function(e,t){var n=null,r=0;for(var o in e)if("~"!==o)if("**"!==o)_(e[o],t);else for(n=e["**"],r=0;r<n.length;r++)t[n[r]]=!0;else for(n=e["~"],r=0;r<n.length;r++)t[n[r]]=!0},m=function(e,t,n){for(var r=e,o=0;o<n.length;o++){if(r["**"])for(var i=r["**"],a=0;a<i.length;a++){t[i[a]]=!0}var c=n[o];if("number"==typeof c){if(!s.call(r,c)){r=null;break}}else if(!/^[_a-zA-Z]/.test(c)||!s.call(r,c)){r=null;break}r=r[c]}r&&_(r,t)},y=function(e,t,n,r,o){for(var i=0;i<e.length;i++){var a=e[i],s=t[i];s&&s&&(t[i]=!1,g(n,o?void 0:r,a))}};l.prototype.scheduleReplace=function(e,t,n){this._changes.push([e,t,n])},l.prototype.setChanges=function(e){this._changes=e},l.prototype.getChanges=function(){return this._changes},l.prototype.doUpdates=function(e,t){var n=this._propFields,r=this._comp,o=this._hidingValue,l=this._innerDataExclude,d=!!this._doingUpdates,u=this._relatedObserverTreeObj._observerIdInc,p=null,h=null,f=null;u?(d||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),p=this._doingUpdates.changedPaths,h=this._doingUpdates.changedValues,f=this._doingUpdates.combinedChanges):(p=[],h=[],f=[]);var g=this._changes;this._changes=[];var _=[];this._beforeMergeCb&&this._beforeMergeCb(g,_,e);for(var v=0;v<g.length;v++){var A=g[v],b=A[0],w=A[1],C=w,I=void 0,E=b[0],S=!!l&&l.test(E),T=n[E];if(T&&1===b.length)I=this._data[E],w=i.call(this._comp,b,T,w,this._hidingValue),S||(this._innerData?(C=c(w),_[v]||(this._innerData[E]=C)):C=w,A[1]=C),S&&!this._innerData||(this._data[E]=w);else{var x=this._data,k=E,P=null,D=1;if(!S||this._innerData){for(;D<b.length;D++)"number"==typeof(P=b[D])&&isFinite(P)?s.call(x,k)&&x[k]instanceof Array||(x[k]=[]):(!s.call(x,k)||null===x[k]||"object"!=typeof x[k]||x[k]instanceof Array)&&(x[k]={}),x=x[k],k=P;x[k]=w}if(this._innerData&&(x=this._innerData,k=E,!S)){for(D=1;D<b.length;D++)"number"==typeof(P=b[D])&&isFinite(P)?s.call(x,k)&&x[k]instanceof Array||(x[k]=[]):(!s.call(x,k)||null===x[k]||"object"!=typeof x[k]||x[k]instanceof Array)&&(x[k]={}),x=x[k],k=P;C=c(w),_[v]||(x[k]=C),A[1]=C}}m(this._observerTree,this._observerStatus,b),S||(p.push(b),h.push([C,I,w]),f.push(A)),u&&(this._doingUpdates.changesTotal+=1)}if(!d){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),u){var O=0;do{O=this._doingUpdates.changesTotal,y(this._observers,this._observerStatus,r,this._data,o)}while(O!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(p,h,f,e);for(var N=0;N<h.length;N++){var R=h[N];if(R){var M=p[N],L=n[M[0]];L&&a.call(r,R[2],R[1],M,L,o,t)}}}},e.exports=l},function(e,t,n){var r=n(9),o=n(11),i=n(14),a=n(4),s=n(13),c=function(){};c.prototype=Object.create(r.prototype,{constructor:{value:c,writable:!0,configurable:!0}});var l=c._advancedCreate=function(e,t){var n=new c;n.is=e.toLowerCase();var l=null;if("dom"===a.documentBackend&&(l=s.backendExtractedDefault?new i(e):document.createElement(e)),r.initialize(n,l,t),n.classList=o.create(n,null),t){var d=t.__wxHost;n.classList._setOwnerOptions(d.classList,d.__componentOptions.classPrefix,d.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&l&&l.setAttribute("exparser:info-class-prefix",d.__componentOptions.classPrefix&&d.__componentOptions.classPrefix+"--")}return n};c.create=function(e){return l(e,null)};var d=c._advancedClone=function(e,t){var n=new c;n.is=e.is;var l=null;if(e.__domElement&&(l=e.__domElement instanceof i?s.backendExtractedDefault?e.__domElement.cloneNode():i.toElement(e.__domElement):s.backendExtractedDefault?i.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1)),r._clone(n,e,l,t),n.classList=o.create(n,null),t){var d=t.__wxHost;n.classList._setOwnerOptions(d.classList,d.__componentOptions.classPrefix,d.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&l&&l.setAttribute("exparser:info-class-prefix",d.__componentOptions.classPrefix&&d.__componentOptions.classPrefix+"--")}return n};c.cloneNode=function(e){return d(e,null)},e.exports=c},function(e,t,n){var r=n(9),o=n(4),i=function(e,t){a(this,e,t)};i.prototype=Object.create(r.prototype);var a=i.initialize=function(e,t,n){e.is=t||"";var i=null;"dom"===o.documentBackend&&(i=void 0),r.initialize(e,i,n),e.__virtual=!0};i._advancedCreate=function(e,t){return new i(e,t)},i.create=function(e){return new i(e,null)},e.exports=i},function(e,t,n){var r=n(9),o=n(15),i=n(18),a=n(17),s=n(12),c=Object.prototype.hasOwnProperty,l=function(e){i.initialize(this,"shadow",this),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};l.prototype=Object.create(i.prototype),l.create=function(e){var t=new l(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var n in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[n]||(t.__childrenPropsFilter[n]=e.ownerShadowRoot.__childrenPropsFilter[n]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};l.prototype.createTextNode=function(e){return s._advancedCreate(e,this)},l.prototype.createNativeNode=function(e){return a._advancedCreate(e,this)},l.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},l.prototype.createVirtualNode=function(e){return i._advancedCreate(e,this)},l.prototype.getCompDefByTagName=function(e){var t=this.__wxHost;return c.call(t.__using,e)?t.__using[e]:c.call(t.__generics,e)?t.__generics[e]:e},l.prototype.createComponent=function(e,t,n,r){var i=null;i=void 0===t?e:t;var a=this.__wxHost;"object"!=typeof i&&("object"!=typeof(i=this.getCompDefByTagName(i))&&(i=o._list[i]||o._list[""]));var s=function(e,t){var n={};for(var r in e){var i=e[r];"object"!=typeof i&&c.call(t.__placeholder,i)&&(i=t.__placeholder[i],c.call(t.__using,i)?i=t.__using[i]:c.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),n[r]=i)}return n}(n,a);return n&&(n=function(e,t){var n={};for(var r in e){var i=e[r];"object"!=typeof i&&(c.call(t.__using,i)?i=t.__using[i]:c.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),n[r]=i)}return n}(n,a)),"object"==typeof e&&(e=i.is),a.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",n=0;n<8;n++){var r=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[r]}return t}()),a.__componentOptions.writeOnly&&!i.options.allowInWriteOnly&&(i=o._list[""]),o._advancedCreate(e,i,this,n,s,r)},l.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!(c.call(t.__using,e)||c.call(t.__placeholder,e)||c.call(t.__generics,e)||c.call(t.__placeholder,e))},l.prototype.getHostNode=function(){return this.__wxHost},l.prototype.getElementById=function(e){return r._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},e.exports=l},function(e,t,n){var r=n(9),o=n(12),i=function(){};i.create=function(e,t,n){var a=new i;if(!(e instanceof r||e instanceof o))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=n||r;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,n,r,o){if(r<0&&e instanceof t&&!1===o(e))return!1;var i=n&&e.__wxSlotChildren||e.childNodes;if(i)for(var s=0;s<i.length;s++)if(!1===a(i[s],t,n,r,o))return!1;return!(r>0&&e instanceof t&&!1===o(e))};i.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,n,r){for(;e;e=n&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===r(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=i},function(e,t,n){(function(t){var r=n(4),o=n(3),i=n(9),a=n(17),s=n(12),c=n(19),l=n(15),d=n(23),u=n(24),p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var h=function(){};h.prototype=Object.create(Object.prototype,{constructor:{value:h,writable:!0,configurable:!0}});var f=null;p.precompiler=f,p.htmlParser=null;var g=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},_=Object.prototype.hasOwnProperty,m=function(e,t){if(null!==e&&"object"==typeof e&&_.call(e,t))return e[t]},y=function(e,t,n,r){if(_.call(t,n)){var i=t[n];if("function"==typeof i)return o.safeCallback("Template Method",i,e,r)}},v=function(e,t){return[{t:1,n:"slot",a:[],c:[],p:null}]},A={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},b=function(e,t,n){e.classList.toggle(t,!!n)},w=function(e,t,n){e[t]=n},C=function(e,t,n){var r=e.__dataProxy;r.scheduleReplace([t],n),r.doUpdates()},I=function(e,t,n){e.class=n},E=function(e,t,n){e.setAttribute("style",n)},S=function(e,t,n){e.setAttribute("class",n)},T=function(e,t,n){e.textContent=n},x=function(e,t,n){e.dataset||(e.dataset={}),e.dataset[t]=n},k={$:function(e,t,n){!0===n?e.setAttribute(t,""):!1===n||null==n?e.removeAttribute(t):e.setAttribute(t,n)},":":w,c:b,s:function(e,t,n){var r=e.style;r&&(r[t]=n)},d:x},P=function(e,t,n){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};p.create=function(e,n,r,i){var a=void 0===e.template?P:e.template,s=a;"function"!=typeof a&&(void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node?s=p.precompileAndGetCreator(a):(o.hasGlobalWarningListeners()&&o.triggerWarning("Non-precompiled template is not usable in this environment. Empty template is used instead."),s=v));var c=Object.create(p.prototype);return c._initValuesJSON=JSON.stringify(r),c._dataJSON=n!==r?JSON.stringify(n):null,c._tagTreeRoot=D(s,r,e.methods,i),c._renderingMode=i.renderingMode,c};var D=function(e,t,n,o){var i="native"===o.renderingMode,s=i,c=!1,l=Object.create(null);i&&!r.hasDOMBackend&&(e=v);var d={},p=e(m,y,n),h=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(3!==r.t){var o=r.n,l=!(i||"string"==typeof o&&o.indexOf("-")<0);"slot"===o&&""===r.sn&&(c=!0),r.n=o;var p=r.st;p&&p.e&&(p.o=E,s&&(p.v=p.e(t,d,null)));var f=r.cl;f&&f.e&&(f.o=i?S:I,s&&(f.v=f.e(t,d,null)));var _=null;l||(r.p=_=i?document.createElement(r.n):a.create(r.n),p&&void 0!==p.v&&_.setAttribute("style",p.v),i&&f&&void 0!==f.v&&_.setAttribute("class",f.v));for(var m=r.a,y=0;y<m.length;y++){var v=m[y];if(v.d)i||u[v.n].register(v.n,v,r);else{i||("bind"===v.n.slice(0,4)?(v.evCatch=!1,v.ev=g(v.n.slice(4)),":"===v.ev[0]&&(v.ev=v.ev.slice(1))):"catch"===v.n.slice(0,5)&&(v.evCatch=!0,v.ev=g(v.n.slice(5)),":"===v.ev[0]&&(v.ev=v.ev.slice(1))));var A=v.o;if(l)A?v.o="&"===A?k[":"]:k[A]:(v.o=k[":"],v.n=g(v.n)),v.o===w&&(v.o=C),s&&v.e&&(v.v=v.e(t,d,null));else if(!v.ev){var x=k;v.o=A?"&"===A?x[":"]:x[A]:x.$,s?(v.e&&(v.v=v.e(t,d,null)),(v.o!==b||i)&&v.o(_,v.n,v.v)):v.e||v.o(_,v.n,v.v)}}}h(r.c),i&&(1!==r.c.length||void 0===r.c[0].sn||r.c[0].compressed||(r.sn=r.c[0].sn,r.compressed=!0,r.c.pop()))}else r.e&&(r.o=T,r.c=s?r.e(t,d,null):"")}};return h(p,l,!0),i&&(c||p.push(A),1!==p.length||""!==p[0].sn||p[0].compressed||p.pop()),p},O=function(e,t){return function(n){if(this[e](n),t)return!1}},N=function(e,t,n,r,o,a,s,c){for(var p=null,h=0,f=null,g=0;g<e.length;g++){var _=s,m=e[g];if(3===m.t)p=m.e?t.createTextNode(m.e(r,o,null)):t.createTextNode(m.c),m.e&&d.addBindings(a,_,m.b,p,m),i.appendChild(n,p);else{var y=m.cl,v=m.st,A=m.a,I=!1;for(h=0;h<A.length;h++)if((f=A[h]).d){var E=u[f.n].create(f.n,f,m,r,o,a,_,c,t,N,n);if(u[f.n].requireBlock){p=E,i.appendChild(n,p),I=!0;break}}if(I)continue;if(m.v)p=t.createVirtualNode(m.n);else if(m.p){for(p=t.cloneNativeNode(m.p),h=0;h<A.length;h++)(f=A[h]).d||(f.ev?c(p,f.ev,f.v,f.evCatch):f.o===w?p.__domElement&&(f.o(p.__domElement,f.n,f.e(r,o,null)),d.addBindings(a,_,f.b,p.__domElement,f)):(f.e&&f.o(p,f.n,f.e(r,o,null)),(f.e||f.o===b||f.o===x)&&d.addBindings(a,_,f.b,p,f)));v&&v.e&&(p.setAttribute("style",v.e(r,o,null)),d.addBindings(a,_,v.b,p,v))}else{if(m.cpf){var S={},T=t.__wxHost;for(var k in m.cpf)!function(e){var t=m.cpf[e];S[e]=T.__behavior.methods[t]}(k);t.__childrenPropsFilter=S}for(p=t.createComponent(m.n,void 0,m.g,void 0),h=0;h<A.length;h++)if(!(f=A[h]).d){var P=f.v;f.o===C&&l.hasPublicProperty(p,f.n)?(f.e&&(P=f.e(r,o,null),d.addBindings(a,_,f.b,p,f)),f.e?C(p,f.n,P):p.__behavior.properties[f.n].type===Boolean?C(p,f.n,!0):C(p,f.n,P)):f.ev?c(p,f.ev,P,f.evCatch):f.o!==C&&(f.e&&(P=f.e(r,o,null),d.addBindings(a,_,f.b,p,f)),f.o(p,f.n,P))}v&&(v.e?(p.__domElement.setAttribute("style",v.e(r,o,null)),d.addBindings(a,_,v.b,p.__domElement,v)):p.__domElement.setAttribute("style",v.v))}m.id&&(p.id=m.id),y&&(y.e?p.class=y.e(r,o,null):p.class=y.v,y.o&&d.addBindings(a,_,y.b,p,y)),m.sl&&(p.slot=m.sl),void 0!==m.sn&&i.setSlotName(p,m.sn),i.appendChild(n,p),N(m.c,t,p,r,o,a,_,c)}}},R=function(e,t,n){for(var r=e.childNodes,o=0;o<r.length;o++){var i=r[o];i instanceof s||(i.__id&&(t[i.__id]=i),void 0!==i.__slotName&&(n[i.__slotName]=i),R(i,t,n))}},M=function(e,t,n,r,o,i){for(var a=null,s=0,c=null,l=0;l<e.length;l++){var u=e[l];if(void 0===u.n)a=document.createTextNode(u.c),u.e&&d.addBindings(o,i,u.b,a,u),t.appendChild(a);else{var p=u.cl,h=u.st,f=u.a;for(a=u.v?document.createElement("virtual"):document.importNode?document.importNode(u.p,!1):u.p.cloneNode(!1),s=0;s<f.length;s++)(c=f[s]).e&&d.addBindings(o,i,c.b,a,c);t.appendChild(a),u.id&&(n[u.id]=a),p&&p.e&&d.addBindings(o,i,p.b,a,p),h&&h.e&&d.addBindings(o,i,h.b,a,h),void 0!==u.sn&&(r[u.sn]=a),M(u.c,a,n,r,o,i)}}};p.prototype.createInstance=function(e){var t=Object.create(h.prototype),n=JSON.parse(this._initValuesJSON),o=null===this._dataJSON?n:JSON.parse(this._dataJSON),i=Object.create(null),a=Object.create(null),s=[],l=d.create("",null,null,null,null,[],(function(e,t){})),u=null;if("native"===this._renderingMode)"dom"===r.documentBackend&&(u=document.createDocumentFragment()),M(this._tagTreeRoot,u,i,a,l,{}),a[""]||(a[""]=null);else{if(u=c.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(u.__childrenPropsFilter)for(var p in e.ownerShadowRoot.__childrenPropsFilter)u.__childrenPropsFilter[p]||(u.__childrenPropsFilter[p]=e.ownerShadowRoot.__childrenPropsFilter[p]);else u.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;N(this._tagTreeRoot,u,u,n,{},l,{},(function(e,t,n,r){u.__wxHost?e.addListener(t,O(n,r).bind(u.__wxHost)):s.push({target:e,name:t,func:O(n,r)})})),R(u,i,a)}return t.data=o,t.shadowRoot=u,t.idMap=i,t.slots=a,t.listeners=s,t._topScope=l,t},h.prototype.updateValues=function(e,t,n){for(var r=i.getMethodCaller(e),o=0;o<n.length;o++){var a=n[o];d.updateBinding(this._topScope,a,t,{},r)}},e.exports=p}).call(t,n(22))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(){f&&p&&(f=!1,p.length?h=p.concat(h):g=-1,h.length&&a())}function a(){if(!f){var e=o(i);f=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,f=!1,function(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,d,u=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var p,h=[],f=!1,g=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||f||o(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=c,u.addListener=c,u.once=c,u.off=c,u.removeListener=c,u.removeAllListeners=c,u.emit=c,u.prependListener=c,u.prependOnceListener=c,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t){var n={create:function(e,t,n,o,i,a,s){for(var c={inc:1,name:e,exp:o,lp:i,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},l=0;l<a.length;l++){var d=a[l];null===d[0]?r(t,d,null,c):r(n[d[0]],d,null,c)}return c},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return r(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var n in e)t[n]={inc:1,linked:e[n],scopes:{},targets:{},children:null,__scopeBinded:[]},r(e[n],[null],null,t[n]);return t}},r=n.addBinding=function(e,t,n,r){for(var o=e,i=1;i<t.length;i++){var a=t[i];o.children||(o.children=Object.create(null));var s=o.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),o=s[a]}var c=e.inc++;return n?o.targets[c]=[n,r]:(o.scopes[c]=r,r.__scopeBinded.push([o,c])),c};n.addBindings=function(e,t,n,o,i){for(var a=0;a<n.length;a++){var s=n[a];s[0]?r(t[s[0]],s,o,i):r(e,s,o,i)}},n.updateLvaluePath=function(e,t){e.lp=t},n.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,n=0;n<t.length;n++){var r=t[n];delete r[0].scopes[r[1]]}};var o=function(e,t,n,r,o){if(e.linked)i(e,t,n,r,o);else{var a=r[e.name];r[e.name]=e.exp(n,r,o),i(e,t,n,r,o),r[e.name]=a}},i=n.updateBinding=function(e,t,n,r,i){for(var a=e,s=0,c=0;c<t.length;c++){for(s in a.scopes)o(a.scopes[s],t,n,r,i);var l=t[c];if(!a.children)return;var d=a.children;if(!d[l])return;a=d[l]}var u=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(n,r,i))}for(s in e.scopes)o(e.scopes[s],[],n,r,i);for(s in e.children)u(e.children[s])};u(a)};e.exports=n},function(e,t,n){e.exports={if:n(25),elif:n(25),else:n(25),for:n(27),key:n(28),"for-index":n(29),"for-item":n(30),alias:n(31)}},function(e,t,n){var r=n(23),o=n(26).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,register:function(e,t,n){},create:function(e,t,n,o,i,a,s,c,l,d,u){var p=l.createVirtualNode("wx:"+e);p.__wxIfCondValue=!0,p.__wxIfNextNode=null,p.__wxIfHasTrueCond=!0;var h=null;"if"!==e&&("wx:if"!==(h=u.childNodes[u.childNodes.length-1]).is&&"wx:elif"!==h.is?h=null:h.__wxIfNextNode=p),n.id&&(p.id=n.id);var f=p.__wxIfUpdateNode=function(){var e=p.__wxIfCondValue;if(h&&h.__wxIfHasTrueCond&&(e=!1),e&&!p.childNodes.length){var t=r.proxyTopScope(a),u=r.proxySubScopes(s);p.__wxTopScope=t,p.__wxSubScopes=u,d(n.c,l,p,o,i,t,u,c)}else if(!e&&p.childNodes.length){for(var f in r.removeBindingsForScope(p.__wxTopScope),p.__wxSubScopes)r.removeBindingsForScope(p.__wxSubScopes[f]);for(;p.childNodes.length;)p.removeChild(p.childNodes[0])}p.__wxIfNextNode&&p.__wxIfNextNode.__wxIfUpdateNode()},g=function(e){p.__wxIfCondValue=!!e,p.__wxIfHasTrueCond=p.__wxIfCondValue||h&&h.__wxIfHasTrueCond,f()};return"else"===e?g(!0):(r.addBindings(a,s,t.b,p,{e:t.d,o:function(e,t,n){g(n)}}),g(t.d(o,i,null))),p}}},function(e,t){t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var n=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},r=t.STRING_ESCAPE_MAP={},o="";for(var i in n)r[n[i]]=i,o+=n[i];t.STRING_ESCAPE_REGEXP=new RegExp("["+o+"]","g")},function(e,t,n){var r=(n(18),n(23)),o=n(26).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],register:function(e,t,n){},create:function(e,t,n,o,i,a,s,c,l,d){var u=n._wxForIndex||"index",p=n._wxForItem||"item",h=n._wxKey,f=l.createVirtualNode("wx:for:list");n.id&&(f.id=n.id),r.create("",a,s,(function(e,n,r){var o=t.d(e,n,null);return v(o,e,n,r),o}),t.l,t.b);var g=function(e,t,o,i,h){var g=l.createVirtualNode("wx:for:item"),_=r.proxyTopScope(a),m=r.proxySubScopes(s);g.__wxTopScope=_,g.__wxSubScopes=m,g.__wxForToRemove=!1,g.__wxForKeyStr="";var y=r.create(u,_,m,null,null,[]),v=r.create(p,_,m,null,[o],[]);return m[u]=y,m[p]=v,t[u]=o,t[p]=i,d(n.c,l,g,e,t,_,m,c),void 0===h?f.appendChild(g):f.insertBefore(g,h),g},_=function(e,t,n,i,a,s){var c=e.__wxSubScopes[p];r.updateLvaluePath(c,[i]),a&&(s?f.insertBefore(e,s):f.appendChild(e));var l=e.__wxSubScopes[u];n[u]=i,r.updateBinding(l,[],o,n,t)},m=function(e,t,n,o,i,a){o[p]=i,r.updateBinding(e.__wxSubScopes[p],t,n,o,a)},y=function(e){for(var t in r.removeBindingsForScope(e.__wxTopScope),f.__wxSubScopes)r.removeBindingsForScope(e.__wxSubScopes[t]);f.removeChild(e)},v=function(e,t,n,r){var o="",i=e;"object"==typeof e&&null!==e||(i=[]);var a={};for(o in n)a[o]=n[o];var s=0;if(h){var c=[],l=e instanceof Array,d=[];if(!l){var u=i;for(o in i=[],u)i.push(u[o]),d.push(o)}for(s=0;s<i.length;s++)c.push(String(i[s][h]));if(0===i.length)for(;f.childNodes.length;)y(f.childNodes[0]);else{var p=Object.create(null),v=Object.create(null),A=f.childNodes,b=null,w="";for(s=0;s<A.length;s++)p[w=(b=A[s]).__wxForKeyStr]>=0?(y(b),s--):(p[w]=s,v[w]=b,b.__wxForToRemove=!0);var C=-1,I=0,E=1,S=[];for((I=p[i[0][h]])>=0||(I=-1),A[I]&&(A[I].__wxForToRemove=!1),s=1;s<i.length;s++)(E=p[i[s][h]])>=0&&(C<I&&(I<E||C>E)&&(S.push(A[I]),C=I),A[I=E]&&(A[I].__wxForToRemove=!1));for(C<I&&S.push(A[I]),s=0;s<A.length;s++)(b=A[s]).__wxForToRemove&&(y(b),s--);var T=S.shift(),x=0;for(s=0;s<i.length;s++){var k=i[s],P=v[k[h]];if(v[k[h]]=null,P){var D=!0;if(P===T){for(;A[x]!==T;)x++;x++,T=S.shift(),D=!1}_(b=P,r,a,l?s:d[s],D,A[x]),D&&A[x]===b&&x++,m(b,[],t,a,i[s],r)}else b=g(t,a,l?s:d[s],i[s],A[x]),x++,b.__wxForKeyStr=String(k[h])}}}else{for(;f.childNodes.length;)y(f.childNodes[0]);if(e instanceof Array)for(s=0;s<i.length;s++)g(t,a,s,i[s]);else for(o in i)g(t,a,o,i[o])}};return v(t.d(o,i,null),o,i,null),f}}},function(e,t){e.exports={attachedToBlock:!0,register:function(e,t,n){n._wxKey=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,n){n._wxForIndex=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,n){n._wxForItem=t.d},create:function(){}}},function(e,t,n){var r=n(23),o=n(26).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,register:function(e,t,n){},create:function(e,t,n,o,i,a,s,c,l,d){var u=t.s[0],p=r.create(u,a,s,t.d,t.l,t.b),h={},f="";for(f in s)h[f]=s[f];h[u]=p;var g={};for(f in i)g[f]=i[f];g[u]=t.d(o,i,null);var _=l.createVirtualNode("wx:alias");return n.id&&(_.id=n.id),d(n.c,l,_,o,g,a,h,c),_}}}]),o,i;(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};e.r(a),e.d(a,{Behavior:()=>Lo,Component:()=>Zo,CustomComponent:()=>Vo,Page:()=>Qo,addView:()=>yi,attachView:()=>vi,beginTapMark:()=>En,checkTapMark:()=>Tn,componentAliases:()=>Vr,componentPathToAlias:()=>Gr,convertComponentAliasToRoute:()=>wr,convertRouteToComponentAlias:()=>br,doDataThreadReplacePlaceholder:()=>Po,enableUpdateWxAppCode:()=>Oi,endTapMark:()=>In,endViewInfoCallback:()=>to,getDomainByPluginId:()=>$r,getEntryFile:()=>Pr,getGenericsByPath:()=>wo,getNodeById:()=>ki,getNodeId:()=>Pi,getOwnerPluginAppId:()=>Do,getPlaceholderByPath:()=>Co,getPluginRoutePrefix:()=>Ir,getPluginSubPackagePrefix:()=>Cr,getRootNodeId:()=>Di,getUsingByPath:()=>Ao,initBannedMap:()=>J,initViewThread:()=>Ko,injectWxss:()=>xo,isLazyLoad:()=>Eo,isSubPackageIndependent:()=>Tr,matchSubPackageName:()=>Sr,mergeData:()=>Mi,onComponentDef:()=>ti,onMainPageFrameReady:()=>io,publishDomainComponents:()=>Zr,removeView:()=>Ai,requestViewInfo:()=>eo,restoreView:()=>jr,runComponentDef:()=>ii,saveView:()=>Wr,sendTabBarCreationRequest:()=>pi,setModelValueData:()=>Io,triggerGenerateFuncReady:()=>To,updateWxAppCode:()=>Ni,wrapTapMark:()=>Sn});let s=void 0!==r?r:{};"undefined"!=typeof __useSclExparser__&&__useSclExparser__&&void 0!==__sclEngine__&&(s=__sclEngine__.exparser||s||{});const c=()=>s,l=c(),d={};let u=-1,p=null,h=!1;const f=()=>h;let g=null;const _=[];let m=null,y=null,v=!1;const A=(e,t)=>{const n=e.shift();if(""===n)return u=t,void(p&&p(t));let r=null;d[t=t||0]&&(r=d[t][n]),!r&&d.$GLOBAL&&(r=d.$GLOBAL[n]),r&&r(e,n,t)},b=()=>{y&&(y=clearTimeout(y)),_.length&&g.vdSyncBatch(_,m&&[m]),m=null,_.length=0,v=!1},w=(e,t,n,r)=>{if(t=[e].concat(t),!v||r)return b(),v=!0,void g.vdSync(t,n&&[n]);m!==n&&b(),m=n,_.push(t),v=!0,y||(y=setTimeout((()=>{y=null,b()}),15))},C=()=>{g=t._virtualDOMTunnel,g.onVdSync(((e,t)=>{A(e,t)})),g.onVdSyncBatch(((e,t)=>{for(let n=0;n<e.length;n++)A(e[n],t)}))};"undefined"!=typeof __clientsubcontext&&__clientsubcontext?__subContextEngine__.onInitReady(C):C();const I=(e,t,n)=>{if(""===e)return p=t,void(u>=0&&p(u));d[n=n||0]||(d[n]={}),d[n][e]=t},E=e=>{if(0===e.length)return 0;const t=Date.now();__subContextEngine__.loadJsFiles(e);return Date.now()-t},S=(new Set,(e,t)=>{wxNativeConsole.info("[VD] injectSubPackages: "+e.join(", ")),WeixinJSBridge.invoke("injectSubPackages",{subPackages:e},t)}),T=(e,t)=>{if(0===e.length)return t(0),0;const n=Date.now();WeixinJSBridge.invoke("loadComponents",{comps:e},(()=>{0}));return Date.now()-n},x=c(),k=/^[-+a-z]+:\/\//i,P=function(e,t){if(k.test(t))return t;const n=e.match(k);let r="";n&&(r=n[0],e=e.slice(r.length)),0===t.indexOf("/")&&(e="");const o=e.split("/");o.pop();const i=t.split("/");for(;i.length;){const e=i.shift();""!==e&&"."!==e&&(".."!==e?o.push(e):o.pop())}return r+o.join("/")},D=t=>{const n=("undefined"==typeof window?e.g:window).__wcc_version_info__;if(n)return n[t]},O=()=>Math.floor(4294967296*(1+Math.random())).toString(16).slice(1),N=e=>Object.keys(e).map((t=>e[t])),R=(e,t,n)=>{e instanceof x.Component&&(t>0&&n(e),t&&e.shadowRoot instanceof x.Element&&R(e.shadowRoot,t,n),t<0&&n(e));const r=e.childNodes;for(let e=0;e<r.length;e++)r[e]instanceof x.Element&&R(r[e],t,n)},M=e=>{const t={};return e.forEach((e=>{t[e]={ok:!1,callbacks:[]}})),{notify(e){t[e]&&(t[e].ok=!0,t[e].callbacks.forEach((e=>e())),t[e].callbacks=[])},on(e,n){t[e]&&(t[e].ok?n():t[e].callbacks.push(n))}}},L=c();const B=class{constructor(){this._idNodeMap={}}getAll(){return this._idNodeMap}getNodeById(e){return this._idNodeMap[e]}getNodeId(e){return e.__wxTmplId}allocNodeId(e,t){const n=t||O();return e.__wxTmplId=n,this._idNodeMap[e.__wxTmplId]=e,n}addNode(){}removeNode(e){if(e.__wxTmplId&&delete this._idNodeMap[e.__wxTmplId],e.childNodes)for(let t=0;t<e.childNodes.length;t++)this.removeNode(e.childNodes[t]);e.shadowRoot instanceof L.Element&&this.removeNode(e.shadowRoot)}},F={WX_EVENT:11,REQUEST_SAVE:12,COMPONENT_DEF:21,SAVE_STATE:22,RESTORE_STATE:23,FLOW_INITIAL_RENDERING_CACHE:24,FLOW_CLEAR_INITIAL_RENDERING_CACHE:25,FLOW_SET_SUBPACKAGE_LOADED:26,SET_DATA_CALLBACK:32,FLOW_SET_DATA:33,FLUSH_BLOCKED:43,FLOW_GROUP:41,FLOW_GROUP_END:42,FLOW_DEPTH:2,FLOW_INITIAL_CREATION:3,FLOW_UPDATE:6,FLOW_DATA_OBSERVER:8,FLOW_APPLY_PROPERTY:4,FLOW_MINIPULATE_CHILD:7,FLOW_CREATE_NODE:5,FLOW_REPEAT:9,FLOW_VIEW_INFO:63,REQUEST_TAB:51,COMPONENT_DEF_TAB:52,FLOW_CREATE_TAB:53,DESTROY_TAB:54,REQUEST_BROADCAST_VIEW_ID:61,RESPONSE_BROADCAST_VIEW_ID:62,BANNING_MAP:90,PERFORMANCE_DATA:91,CALL_METHOD_FROM_WXS:50,RESPONSE_VIEW_INFO:64,MODEL_VALUE_CHANGE:65,FLOW_SET_NODE_ANIMATION_INFO:100,ANIMATION_TRANSITION_END:101,FLOW_CLEAR_NODE_ANIMATION_INFO:102,CLEAR_ANIMATION_COMPLETE:103,FLOW_SET_NODE_NEXT_ANIMATION_INFO:104,LOAD_COMPONENT_DEF:110,FLOW_WAIT_COMPONENT:112,FLOW_REPLACE_PLACEHOLDER:113,FLOW_COMPONENT_DEF_ADD:120,FLOW_INJECT_SUBPACKAGE:121,FLOW_INJECT_COMPONENT:122,FLOW_HOT_UPDATE:900,FLOW_HOT_UPDATE_CHILD:901,FLOW_HOT_UPDATE_RESET:902,UPDATE_COMPONENT_DEF:903,UPDATE_PERFORMANCE_STAT:800,ENABLE_UPDATE_PERFORMANCE_STAT:801,DISABLE_UPDATE_PERFORMANCE_STAT:802},W={};Object.keys(F).forEach((e=>{W[F[e]]=e}));const j=e=>W[e]||`UNKNOWN_EVENT_${e}`,U=0,V=1,G=2,$=c(),H={};let Z=1;const Q=(e,t,n)=>{void 0===e.__resizers?(e.__resizers=[],(e=>{const t=Z++;H[t]=e,$.Observer.create((function(e){"detached"===e.status&&delete H[t]})).observe(e,{attachStatus:!0})})(e),e.__resizers[t]=n):e.__resizers[t]=n},Y=(e,t)=>{void 0!==e.__resizers&&(e.__resizers[t]=void 0)},z=c();let q=null;const J=e=>{0!==Object.keys(e).length&&(q=e,xi.listViewId().forEach((t=>{w(F.BANNING_MAP,[e],t)})))},K=e=>{e.$$.style.display="none"},X=e=>{const t=e=>{e instanceof z.Component?K(e):e instanceof z.VirtualNode?e.childNodes.forEach((e=>{t(e)})):e instanceof z.TextNode&&(e.textContent=""),e.__banned=!0};t(e)};var ee={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},te={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},ne=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],re={CSS:{},springs:{}};function oe(e,t,n){return Math.min(Math.max(e,t),n)}function ie(e,t){return e.indexOf(t)>-1}function ae(e,t){return e.apply(null,t)}var se={arr:function(e){return Array.isArray(e)},obj:function(e){return ie(Object.prototype.toString.call(e),"Object")},pth:function(e){return se.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||se.svg(e)||e.$$},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return se.hex(e)||se.rgb(e)||se.hsl(e)},key:function(e){return!ee.hasOwnProperty(e)&&!te.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function ce(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function le(e,t){var n=ce(e),r=oe(se.und(n[0])?1:n[0],.1,100),o=oe(se.und(n[1])?100:n[1],.1,100),i=oe(se.und(n[2])?10:n[2],.1,100),a=oe(se.und(n[3])?0:n[3],.1,100),s=Math.sqrt(o/r),c=i/(2*Math.sqrt(o*r)),l=c<1?s*Math.sqrt(1-c*c):0,d=c<1?(c*s-a)/l:-a+s;function u(e){var n=t?t*e/1e3:e;return n=c<1?Math.exp(-n*c*s)*(1*Math.cos(l*n)+d*Math.sin(l*n)):(1+d*n)*Math.exp(-n*s),0===e||1===e?e:1-n}return t?u:function(){var t=re.springs[e];if(t)return t;for(var n=1/6,r=0,o=0;;)if(1===u(r+=n)){if(++o>=16)break}else o=0;var i=r*n*1e3;return re.springs[e]=i,i}}function de(e){return void 0===e&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var ue,pe,he=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function o(e,o,i){return((t(o,i)*e+n(o,i))*e+r(o))*e}function i(e,o,i){return 3*t(o,i)*e*e+2*n(o,i)*e+r(o)}return function(t,n,r,a){if(0<=t&&t<=1&&0<=r&&r<=1){var s=new Float32Array(11);if(t!==n||r!==a)for(var c=0;c<11;++c)s[c]=o(c*e,t,r);return function(e){return t===n&&r===a||0===e||1===e?e:o(l(e),n,a)}}function l(n){for(var a=0,c=1;10!==c&&s[c]<=n;++c)a+=e;--c;var l=a+(n-s[c])/(s[c+1]-s[c])*e,d=i(l,t,r);return d>=.001?function(e,t,n,r){for(var a=0;a<4;++a){var s=i(t,n,r);if(0===s)return t;t-=(o(t,n,r)-e)/s}return t}(n,l,t,r):0===d?l:function(e,t,n,r,i){var a,s,c=0;do{(a=o(s=t+(n-t)/2,r,i)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++c<10);return s}(n,a,a+e,t,r)}}}(),fe=(ue={linear:function(){return function(e){return e}}},pe={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=oe(e,1,10),r=oe(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){pe[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(pe).forEach((function(e){var t=pe[e];ue["easeIn"+e]=t,ue["easeOut"+e]=function(e,n){return function(r){return 1-t(e,n)(1-r)}},ue["easeInOut"+e]=function(e,n){return function(r){return r<.5?t(e,n)(2*r)/2:1-t(e,n)(-2*r+2)/2}}})),ue);function ge(e,t){if(se.fnc(e))return e;var n=e.split("(")[0],r=fe[n],o=ce(e);switch(n){case"spring":return le(e,t);case"cubicBezier":return ae(he,o);case"steps":return ae(de,o);default:return ae(r,o)}}function _e(e){try{return document.querySelectorAll(e)}catch(e){return}}function me(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,o=[],i=0;i<n;i++)if(i in e){var a=e[i];t.call(r,a,i,e)&&o.push(a)}return o}function ye(e){return e.reduce((function(e,t){return e.concat(se.arr(t)?ye(t):t)}),[])}function ve(e){return se.arr(e)?e:(se.str(e)&&(e=_e(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Ae(e,t){return e.some((function(e){return e===t}))}function be(e){var t={};for(var n in e)t[n]=e[n];return t}function we(e,t){var n=be(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function Ce(e,t){var n=be(e);for(var r in t)n[r]=se.und(e[r])?t[r]:e[r];return n}function Ie(e){return se.rgb(e)?(n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+n[1]+",1)":t:se.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):se.hsl(e)?function(e){var t,n,r,o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(o[1],10)/360,a=parseInt(o[2],10)/100,s=parseInt(o[3],10)/100,c=o[4]||1;function l(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=r=s;else{var d=s<.5?s*(1+a):s+a-s*a,u=2*s-d;t=l(u,d,i+1/3),n=l(u,d,i),r=l(u,d,i-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+c+")"}(e):void 0;var t,n}function Ee(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Se(e,t){return se.fnc(e)?e(t.target,t.id,t.total):e}function Te(e,t){return e.getAttribute(t)}function xe(e,t,n){if(e=e.$$||e,Ae([n,"deg","rad","turn"],Ee(t)))return t;var r=re.CSS[t+n];if(!se.und(r))return r;var o=document.createElement(e.tagName),i=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;i.appendChild(o),o.style.position="absolute",o.style.width=100+n;var a=100/o.offsetWidth;i.removeChild(o);var s=a*parseFloat(t);return re.CSS[t+n]=s,s}function ke(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[t]||getComputedStyle(e.$$||e).getPropertyValue(r)||"0";return n?xe(e,o,n):o}}function Pe(e,t){return se.dom(e)&&!se.inp(e)&&(Te(e,t)||se.svg(e)&&e[t])?"attribute":se.dom(e)&&Ae(ne,t)?"transform":se.dom(e)&&"transform"!==t&&ke(e,t)?"css":null!=e[t]?"object":void 0}function De(e){if(se.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,o=new Map;t=r.exec(n);)o.set(t[1],t[2]);return o}}function Oe(e,t,n,r){var o=ie(t,"scale")?1:0+function(e){return ie(e,"translate")||"perspective"===e?"px":ie(e,"rotate")||ie(e,"skew")?"deg":void 0}(t),i=De(e).get(t)||o;return n&&(n.transforms.list.set(t,i),n.transforms.last=t),r?xe(e,i,r):i}function Ne(e,t,n,r){switch(Pe(e,t)){case"transform":return Oe(e,t,r,n);case"css":return ke(e,t,n);case"attribute":return Te(e,t);default:return e[t]||0}}function Re(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=Ee(e)||0,o=parseFloat(t),i=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return o+i+r;case"-":return o-i+r;case"*":return o*i+r}}function Me(e,t){if(se.col(e))return Ie(e);if(/\s/g.test(e))return e;var n=Ee(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function Le(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Be(e){for(var t,n=e.points,r=0,o=0;o<n.numberOfItems;o++){var i=n.getItem(o);o>0&&(r+=Le(t,i)),t=i}return r}function Fe(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*Te(e,"r")}(e);case"rect":return function(e){return 2*Te(e,"width")+2*Te(e,"height")}(e);case"line":return function(e){return Le({x:Te(e,"x1"),y:Te(e,"y1")},{x:Te(e,"x2"),y:Te(e,"y2")})}(e);case"polyline":return Be(e);case"polygon":return function(e){var t=e.points;return Be(e)+Le(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function We(e,t){var n=t||{},r=n.el||function(e){for(var t=e.parentNode;se.svg(t)&&se.svg(t.parentNode);)t=t.parentNode;return t}(e),o=r.getBoundingClientRect(),i=Te(r,"viewBox"),a=o.width,s=o.height,c=n.viewBox||(i?i.split(" "):[0,0,a,s]);return{el:r,viewBox:c,x:c[0]/1,y:c[1]/1,w:a/c[2],h:s/c[3]}}function je(e,t){function n(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var r=We(e.el,e.svg),o=n(),i=n(-1),a=n(1);switch(e.property){case"x":return(o.x-r.x)*r.w;case"y":return(o.y-r.y)*r.h;case"angle":return 180*Math.atan2(a.y-i.y,a.x-i.x)/Math.PI}}function Ue(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=Me(se.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:se.str(e)||t?r.split(n):[]}}function Ve(e){return me(e?ye(se.arr(e)?e.map(ve):ve(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function Ge(e){var t=Ve(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:De(e)}}}))}function $e(e,t){var n=be(t);if(/^spring/.test(n.easing)&&(n.duration=le(n.easing)),se.arr(e)){var r=e.length;2===r&&!se.obj(e[0])?e={value:e}:se.fnc(t.duration)||(n.duration=t.duration/r)}var o=se.arr(e)?e:[e];return o.map((function(e,n){var r=se.obj(e)&&!se.pth(e)?e:{value:e};return se.und(r.delay)&&(r.delay=n?0:t.delay),se.und(r.endDelay)&&(r.endDelay=n===o.length-1?t.endDelay:0),r})).map((function(e){return Ce(e,n)}))}function He(e,t){var n=[],r=t.keyframes;for(var o in r&&(t=Ce(function(e){for(var t=me(ye(e.map((function(e){return Object.keys(e)}))),(function(e){return se.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){var o=t[r];n[o]=e.map((function(e){var t={};for(var n in e)se.key(n)?n==o&&(t.value=e[n]):t[n]=e[n];return t}))},o=0;o<t.length;o++)r(o);return n}(r),t)),t)se.key(o)&&n.push({name:o,tweens:$e(t[o],e)});return n}function Ze(e,t){var n;return e.tweens.map((function(r){var o=function(e,t){var n={};for(var r in e){var o=Se(e[r],t);se.arr(o)&&1===(o=o.map((function(e){return Se(e,t)}))).length&&(o=o[0]),n[r]=o}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(r,t),i=o.value,a=se.arr(i)?i[1]:i,s=Ee(a),c=Ne(t.target,e.name,s,t),l=n?n.to.original:c,d=se.arr(i)?i[0]:l,u=Ee(d)||Ee(c),p=s||u;return se.und(a)&&(a=l),o.from=Ue(d,p),o.to=Ue(Re(a,d),p),o.start=n?n.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=ge(o.easing,o.duration),o.isPath=se.pth(i),o.isColor=se.col(o.from.original),o.isColor&&(o.round=1),n=o,o}))}var Qe={css:function(e,t,r){if(e.$$)return`${t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${n.transformRpx(" "+r)};`;e.style[t]=r},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,r,o,i){if(o.list.set(t,r),t===o.last||i){var a="";if(o.list.forEach((function(e,t){a+=t+"("+e+") "})),e.$$)return`transform:${n.transformRpx(" "+a)};`;e.style.transform=a}return""}};function Ye(e,t){Ge(e).forEach((function(e){for(var n in t){var r=Se(t[n],e),o=e.target,i=Ee(r),a=Ne(o,n,i,e),s=Re(Me(r,i||Ee(a)),a),c=Pe(o,n);Qe[c](o,n,s,e.transforms,!0)}}))}function ze(e,t){return me(ye(e.map((function(e){return t.map((function(t){return function(e,t){var n=Pe(e.target,t.name);if(n){var r=Ze(t,e),o=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:o.end,delay:r[0].delay,endDelay:o.endDelay}}}(e,t)}))}))),(function(e){return!se.und(e)}))}function qe(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},o={};return o.duration=n?Math.max.apply(Math,e.map((function(e){return r(e)+e.duration}))):t.duration,o.delay=n?Math.min.apply(Math,e.map((function(e){return r(e)+e.delay}))):t.delay,o.endDelay=n?o.duration-Math.max.apply(Math,e.map((function(e){return r(e)+e.duration-e.endDelay}))):t.endDelay,o}var Je=0;var Ke,Xe=[],et=function(){function e(){Ke=requestAnimationFrame(t)}function t(t){var n=Xe.length;if(n){for(var r=0;r<n;){var o=Xe[r];if(o.paused){var i=Xe.indexOf(o);i>-1&&(Xe.splice(i,1),n=Xe.length)}else o.tick(t);r++}e()}else Ke=cancelAnimationFrame(Ke)}return e}();function tt(e){void 0===e&&(e={});var t,n=0,r=0,o=0,i=0,a=null;function s(e){var t=window.Promise&&new Promise((function(e){return a=e}));return e.finished=t,t}var c=function(e){var t=we(ee,e),n=we(te,e),r=He(n,e),o=Ge(e.targets),i=ze(o,r),a=qe(i,n),s=Je;return Je++,Ce(t,{id:s,children:[],animatables:o,animations:i,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(e);s(c);function l(){var e=c.direction;"alternate"!==e&&(c.direction="normal"!==e?"normal":"reverse"),c.reversed=!c.reversed,t.forEach((function(e){return e.reversed=c.reversed}))}function d(e){return c.reversed?c.duration-e:e}function u(){n=0,r=d(c.currentTime)*(1/tt.speed)}function p(e,t){t&&t.seek(e-t.timelineOffset)}function h(e){for(var t=0,n=c.animations,r=n.length,o=[];t<r;){var i=n[t],a=i.animatable,s=i.tweens,l=s.length-1,d=s[l];l&&(d=me(s,(function(t){return e<t.end}))[0]||d);for(var u=oe(e-d.start-d.delay,0,d.duration)/d.duration,p=isNaN(u)?1:d.easing(u),h=d.to.strings,f=d.round,g=[],_=d.to.numbers.length,m=void 0,y=0;y<_;y++){var v=void 0,A=d.to.numbers[y],b=d.from.numbers[y]||0;v=d.isPath?je(d.value,p*A):b+p*(A-b),f&&(d.isColor&&y>2||(v=Math.round(v*f)/f)),g.push(v)}var w=h.length;if(w){m=h[0];for(var C=0;C<w;C++){h[C];var I=h[C+1],E=g[C];isNaN(E)||(m+=I?E+I:E+" ")}}else m=g[0];var S=Qe[i.type](a.target,i.property,m,a.transforms);o.push(S),i.currentValue=m,t++}1===c.animatables.length&&c.animatables[0].target.$$&&c.animatables[0].target.setNodeStyle(o.join(" "),V)}function f(e){c[e]&&!c.passThrough&&c[e](c)}function g(e){var u=c.duration,g=c.delay,_=u-c.endDelay,m=d(e);c.progress=oe(m/u*100,0,100),c.reversePlayback=m<c.currentTime,t&&function(e){if(c.reversePlayback)for(var n=i;n--;)p(e,t[n]);else for(var r=0;r<i;r++)p(e,t[r])}(m),!c.began&&c.currentTime>0&&(c.began=!0,f("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,f("loopBegin")),m<=g&&0!==c.currentTime&&h(0),(m>=_&&c.currentTime!==u||!u)&&h(u),m>g&&m<_?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,f("changeBegin")),f("change"),h(m)):c.changeBegan&&(c.changeCompleted=!0,c.changeBegan=!1,f("changeComplete")),c.currentTime=oe(m,0,u),c.began&&f("update"),e>=u&&(r=0,c.remaining&&!0!==c.remaining&&c.remaining--,c.remaining?(n=o,f("loopComplete"),c.loopBegan=!1,"alternate"===c.direction&&l()):(c.paused=!0,c.completed||(c.completed=!0,f("loopComplete"),f("complete"),!c.passThrough&&"Promise"in window&&(a(),s(c)))))}return c.reset=function(){var e=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed="reverse"===e,c.remaining=c.loop,t=c.children;for(var n=i=t.length;n--;)c.children[n].reset();(c.reversed&&!0!==c.loop||"alternate"===e&&1===c.loop)&&c.remaining++,h(c.reversed?c.duration:0)},c.set=function(e,t){return Ye(e,t),c},c.tick=function(e){o=e,n||(n=o),g((o+(r-n))*tt.speed)},c.seek=function(e){g(d(e))},c.pause=function(){c.paused=!0,u()},c.play=function(){c.paused&&(c.completed&&c.reset(),c.paused=!1,Xe.push(c),u(),Ke||et())},c.reverse=function(){l(),u()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function nt(e,t){for(var n=t.length;n--;)Ae(e,t[n].animatable.target)&&t.splice(n,1)}tt.version="3.1.0",tt.speed=1,tt.running=Xe,tt.remove=function(e){for(var t=Ve(e),n=Xe.length;n--;){var r=Xe[n],o=r.animations,i=r.children;nt(t,o);for(var a=i.length;a--;){var s=i[a],c=s.animations;nt(t,c),c.length||s.children.length||i.splice(a,1)}o.length||i.length||r.pause()}},tt.get=Ne,tt.set=Ye,tt.convertPx=xe,tt.path=function(e,t){var n=se.str(e)?_e(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:We(n),totalLength:Fe(n)*(r/100)}}},tt.setDashoffset=function(e){var t=Fe(e);return e.setAttribute("stroke-dasharray",t),t},tt.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?ge(t.easing):null,o=t.grid,i=t.axis,a=t.from||0,s="first"===a,c="center"===a,l="last"===a,d=se.arr(e),u=d?parseFloat(e[0]):parseFloat(e),p=d?parseFloat(e[1]):0,h=Ee(d?e[1]:e)||0,f=t.start||0+(d?u:0),g=[],_=0;return function(e,t,m){if(s&&(a=0),c&&(a=(m-1)/2),l&&(a=m-1),!g.length){for(var y=0;y<m;y++){if(o){var v=c?(o[0]-1)/2:a%o[0],A=c?(o[1]-1)/2:Math.floor(a/o[0]),b=v-y%o[0],w=A-Math.floor(y/o[0]),C=Math.sqrt(b*b+w*w);"x"===i&&(C=-b),"y"===i&&(C=-w),g.push(C)}else g.push(Math.abs(a-y));_=Math.max.apply(Math,g)}r&&(g=g.map((function(e){return r(e/_)*_}))),"reverse"===n&&(g=g.map((function(e){return i?e<0?-1*e:-e:Math.abs(_-e)})))}return f+(d?(p-u)/_:u)*(Math.round(100*g[t])/100)+h}},tt.timeline=function(e){void 0===e&&(e={});var t=tt(e);return t.duration=0,t.add=function(n,r){var o=Xe.indexOf(t),i=t.children;function a(e){e.passThrough=!0}o>-1&&Xe.splice(o,1);for(var s=0;s<i.length;s++)a(i[s]);var c=Ce(n,we(te,e));c.targets=c.targets||e.targets;var l=t.duration;c.autoplay=!1,c.direction=t.direction,c.timelineOffset=se.und(r)?l:Re(r,l),a(t),t.seek(c.timelineOffset);var d=tt(c);a(d),i.push(d);var u=qe(i,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},tt.easing=ge,tt.penner=fe,tt.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const rt=tt,ot=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom","borderRadius"],it=["easeInElastic","easeOutElastic","easeInOutElastic","easeSpringElastic"],at=Object.assign,st=Object.keys,ct=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","delay","duration","offset","easing"],lt=["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier","steps"],dt=(e,t)=>(e=__webViewSDK__.predefinedColor[e]||e,t?[e,e]:e),ut=(e,t)=>{const n=e.length;let r=0;return e.map(((e,o)=>{const i={};let a;a="offset"in e?e.offset:1===n?1:o/(n-1);const s=r===a;return st(e).forEach((t=>{ct.indexOf(t)>-1||("transform"!==t?i[t]=dt(e[t],s):at(i,((e,t)=>{if("none"===(e=e.toLowerCase().trim()))return{};const n={},r=ct.map((e=>e.toLowerCase())),o={scale3d:"AAA",translate:"Aa",translate3d:"AAA",rotate3d:"AAAA",matrix3d:"AAAAAA",matrix:"AAAAAAAAAAAAAAAA"},i=["rotate3d","matrix","matrix3d"],a=/\s*(\w+)\(([^)]*)\)/g;let s,c=0;for(;s=a.exec(e);){if(s.index!==c)return{};c=s.index+s[0].length;const e=s[1],a=s[2].split(",");if(r.indexOf(e)>-1)n[e.replace(/(x|y|z)$/,(e=>e.toUpperCase()))]=dt(a.join(" "),t);else{if(!(st(o).indexOf(e)>-1))return{};{const r=o[e];if(a.length>r.length)return{};for(let o=r.length-1;o>=0;o--){const s=r[o];if("a"!==s||a[o]){if("A"===s&&!a[o])return{};-1===i.indexOf(e)&&(n[e.replace("3d","")+String.fromCharCode(88+o)]=dt(a[o].trim(),t))}}}}}return n})(e[t],s)))})),s?i.duration=0:(i.duration=(a-r)*t,r=a),i}))},pt=e=>{let t=0;for(;t<lt.length&&0!==e.indexOf(lt[t]);t++);if(t===lt.length)return"linear";switch(e){case"ease":return"cubicBezier(0.25, 0.1, 0.25, 1)";case"ease-in":return"cubicBezier(0.42, 0, 1, 1)";case"ease-out":return"cubicBezier(0, 0, 0.58, 1)";case"ease-in-out":return"cubicBezier(0.42, 0, 0.58, 1)";default:return e.replace(/^cubic-bezier/,"cubicBezier")}};class ht{constructor(e,t){this._nativeSupported="function"==typeof HTMLElement.prototype.animate;const n=e.keyframeOptions,r=this.direction=n.direction;if(this.timeline=t,this._nativeSupported){const t=((e,t)=>{const n=t.easing;return delete t.easing,e.map((e=>(e.easing=n,e)))})(e.keyframeSet,n);this._inst=e.element.$$.animate(t,at(n,{fill:"both"})),this._inst.pause()}else this._inst=rt({targets:e.element,keyframes:ut(e.keyframeSet,n.duration),autoplay:!1,loop:n.iterations===1/0||n.iterations,easing:pt(n.easing),direction:"normal",delay:"reverse"===r?n.endDelay:n.delay,endDelay:"reverse"===r?n.delay:n.endDelay});t._driven(this)}set currentTime(e){if(isNaN(e))return;const t=this._inst;this._nativeSupported?t.currentTime=e:"reverse"===this.direction?t.seek(t.duration-e):t.seek(e)}cancel(){this._nativeSupported?this._inst.cancel():this._inst.reset(),this.timeline._destroy(),this._inst=null}}class ft{constructor(e,t){if(t.scrollSource){if(this._scrollNode=window.__DOMTree__.shadowRoot.querySelector(t.scrollSource),this._scrollNode||(this._scrollNode=e&&e.querySelector(t.scrollSource)),!this._scrollNode)throw new Error(`Cannot find scroll source by ${t.scrollSource} selector.`)}else this._scrollNode=window.__DOMTree__;this.orientation=t.orientation||"vertical",this.startScrollOffset=t.startScrollOffset,this.endScrollOffset=t.endScrollOffset,this.timeRange=t.timeRange,this.fill=t.fill||"both",this._scroll=this._scroll.bind(this)}_calcCurrentTime(e,t){const n=this.startScrollOffset,r=this.endScrollOffset,o=this.fill,i=this.timeRange;let a=e.scrollTop,s=e.scrollHeight-t.$$.offsetHeight;return"horizontal"===this.orientation&&(a=e.scrollLeft,s=e.scrollWidth-t.$$.offsetWidth),a<n?"none"===o||"forwards"===o?NaN:0:a>=r?r<s&&("none"===o||"backwards"===o)?NaN:i:n>=r?NaN:(a-n)/(r-n)*i}_scroll(){const e=this._calcCurrentTime(this._scrollNode===window.__DOMTree__?window.__DOMTree__.$$:this._scrollNode.getScrollPosition(),this._scrollNode);this._animation.currentTime=e}_driven(e){this._animation=e,this._scrollNode===window.__DOMTree__?document.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}),this._scroll()}_destroy(){this._scrollNode===window.__DOMTree__?document.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0})}}const gt=(e,t,n,r,o)=>{const i={element:t,keyframeSet:n,keyframeOptions:{delay:r.delay||0,direction:r.direction||"normal",duration:r.duration||0,easing:r.easing||"linear",endDelay:r.endDelay||0,iterations:1}},a=new ft(e,o);t.__scrollAnimations=t.__scrollAnimations||[],t.__scrollAnimations.push(new ht(i,a))},_t=({nodeId:e,selector:t,options:n,duration:r,timeline:o},i)=>{let a=i.nodeId.getNodeById(e);a=a?a.shadowRoot:window.__DOMTree__?window.__DOMTree__.shadowRoot:null;const s=a?a.querySelectorAll(t):[];for(let e=0;e<s.length;e++)gt(a,s[e],n,{duration:r},o)},mt=(e,t)=>{const n=[];for(let t=0;t<e.length;++t)n.push(Object.assign({},e[t]));n[0].offset=0,n[n.length-1].offset=1;const r=function(e,t){if("number"==typeof t[e].offset)return t[e].offset;for(let n=e+1;n<t.length;++n)if(t[n].offset)return(t[n].offset-t[e-1].offset)/(n-e+1)+t[e-1].offset;return 0};for(let e=0;e<n.length;++e){n[e].offset=r(e,n),n[e].duration=0===e?0:(n[e].offset-n[e-1].offset)*t;it.some((t=>n[e].ease&&n[e].ease.startsWith(t)))&&(n[e].type="animeJS")}return n},yt=c(),vt=void 0!==n&&n.transformRpx,At={},bt={},wt=0,Ct=1,It=2,Et=function(e){return Object.keys(e).filter((t=>!(/transform|transition/i.test(t)&&""===e[t]||""===t.trim()||void 0===e[t]||""===e[t]||!isNaN(parseInt(t,10))))).map((t=>`${t.replace(/([A-Z]{1})/g,(e=>`-${e.toLowerCase()}`))}:${e[t]}`)).join(";")},St=(e,t)=>{const{nodeId:n,webviewId:r,options:o,selector:i,reqId:a,hasCallback:s,fromWxs:c}=e,l=ki(n,r);if(!l)return;const d=l.shadowRoot,u=t||d.querySelectorAll(i);if(!t){bt[a]=u.length;for(let t=0;t<u.length;++t)St(e,u[t]);return}const p=()=>{if(c){const e=xi.instance,t=e.clearAnimationCbMap[a];"function"==typeof t&&(delete e.clearAnimationCbMap[a],yt.safeCallback("Clear Animation",t,null,[]))}else w(F.CLEAR_ANIMATION_COMPLETE,{reqId:a})};if((e=>{(e.__scrollAnimations||[]).forEach((e=>{e.cancel()})),e.__scrollAnimations=[]})(u),!o||"function"==typeof o||!u.__styleObj)return u.__animeOptions&&(u.__animeOptions.forEach((e=>"function"==typeof e.reset&&e.reset())),u.__animeOptions=[]),u.setNodeStyle("",V),Y(u,V),u.__styleObj=null,u.__animateStatus=wt,u.__animationPendingQueue=[],void p();const h=u.__styleObj.transform.split(" ");for(const e in o)if(o[e])if(u.__styleObj["backgroundColor"===e?"background-color":e])delete u.__styleObj["backgroundColor"===e?"background-color":e];else for(let t=0;t<h.length;++t)h[t].indexOf(e)>=0&&h.splice(t,1);u.__styleObj.transform=h.join(" "),u.__styleObj["-webkit-transform"]=h.join(" "),u.__styleObj.transition="unset",u.__styleObj.transitionProperty="unset",u.__styleObj["-webkit-transition"]="unset",u.__styleObj["-webkit-transition-property"]="unset";const f=e=>{u.setNodeStyle(vt(e,!0),V)};f(Et(u.__styleObj)),Q(u,V,f),u.__animateStatus=wt,--bt[a],0===bt[a]&&s&&p()},Tt=(e,t)=>{const{nodeId:n,webviewId:r,selector:o}=e,i=ki(n,r);if(!i)return;const a=i.shadowRoot,s=t||a.querySelectorAll(o);if(t)s.__animationPendingQueue&&s.__animationPendingQueue.length>0&&setTimeout((function(){s.__animateStatus=It,xt(s.__animationPendingQueue.shift(),s,!0)}),32);else for(let t=0;t<s.length;++t)Tt(JSON.parse(JSON.stringify(e)),s[t])},xt=(e,t,r)=>{n.nextTick((()=>{const{nodeId:o,webviewId:i,options:a,selector:s,reqId:c,hasCallback:l,type:d,isLastAnimation:u,fromWxs:p}=e,h=ki(o,i);if(!h)return;const f=h.shadowRoot,g=t||f.querySelectorAll(s);if(!t){At[c]=g.length;for(let t=0;t<g.length;++t)xt(JSON.parse(JSON.stringify(e)),g[t]);return}if(g.__animateStatus===Ct||g.__animateStatus===It&&!r)return g.__animationPendingQueue||(g.__animationPendingQueue=[]),void g.__animationPendingQueue.push(JSON.parse(JSON.stringify(e)));g.__hasCallback=l,g.__reqId=c,g.__args=JSON.stringify(e);const _=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom"],m=["opacity","backgroundColor","width","height","left","top","bottom"],y=["rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ"],v="animeJS"===d,A=(t,n=!0)=>{if(g.__animateStatus===Ct){if(--At[g.__reqId],g.__animationPendingQueue&&g.__animationPendingQueue.length>0&&!g.__hasCallback?(g.__animateStatus=It,xt(g.__animationPendingQueue.shift(),g,!0)):g.__animateStatus=wt,"function"==typeof t){g.__styleObj.transition="unset",g.__styleObj.transitionProperty="unset",g.__styleObj["-webkit-transition"]="unset",g.__styleObj["-webkit-transition-property"]="unset";t(Et(g.__styleObj))}if(0===At[g.__reqId]&&g.__hasCallback&&n)if(p){const t=xi.instance,n=t.applyAnimationCbMap[g.__reqId];"function"==typeof n&&(delete t.applyAnimationCbMap[g.__reqId],yt.safeCallback("Animation",n,null,[])),Tt(e)}else w(F.ANIMATION_TRANSITION_END,{reqId:g.__reqId,args:g.__args})}},b=[];for(const e in a)_.indexOf(e)>=0&&(m.indexOf(e)>=0?b.push({type:"style",args:["backgroundColor"===e?"background-color":e,a[e]]}):y.indexOf(e)>=0?b.push({type:e,args:[a[e]]}):b.push({type:e,args:a[e]}));const C={transition:{delay:a.delay||0,duration:a.duration||0,timingFunction:a.ease||"linear"},transformOrigin:a.transformOrigin||"50% 50% 0"},I={option:C,animates:b},{transition:E,transitionProperty:S,transform:T,transformOrigin:x,style:k}=n.animationToStyle(I),P=g.__styleObj?Object.assign({},g.__styleObj,{transition:E,transform:T,transitionProperty:S,transformOrigin:x}):{transition:E,transform:T,transitionProperty:S,transformOrigin:x};P["-webkit-transition"]=P.transition,P["-webkit-transform"]=P.transform,P["-webkit-transition-property"]=P.transitionProperty,P["-webkit-transform-origin"]=P.transformOrigin;for(const e in k)P[e]=k[e];if(g.__styleObj&&P.transform===g.__styleObj.transform){let e=!0;for(const t in P)m.indexOf(t)>=0&&g.__styleObj[t]!==P[t]&&(e=!1);if(e)return void setTimeout((function(){g.__animationPendingQueue&&g.__animationPendingQueue.length>0&&xt(g.__animationPendingQueue.shift(),g,!0)}),C.duration)}if(0===C.transition.duration?(P.transition="unset",P.transitionProperty="unset",P["-webkit-transition"]="unset",P["-webkit-transition-property"]="unset"):g.__animateStatus=Ct,g.__styleObj=P,v){a.targets=g,a.ease&&(a.easing=a.ease,delete a.ease),(e=>{Object.keys(e).forEach((t=>{if(ot.includes(t)){const r=e[t];"string"==typeof r?e[t]=n.transformRpx(e[t],!0):"object"==typeof r&&"string"==typeof r.value?e[t].value=n.transformRpx(e[t].value,!0):Array.isArray(r)&&r.map((e=>{if("string"==typeof e.value)e.value=n.transformRpx(e.value,!0);else if("string"==typeof e)return n.transformRpx(e,!0);return e}))}}))})(a),g.__animateStatus=Ct,g.__banned&&K(g);const e=a.complete;a.complete=(...t)=>{A(void 0,u),"function"==typeof e&&e(...t)};const t=rt(a);g.__animeOptions||(g.__animeOptions=[]),g.__animeOptions.push(t)}else{const e=Et(P),t=e=>{const t=()=>{g.setNodeStyle(vt(e,!0),V)};t(),Q(g,V,t)};0===C.transition.duration?t(e):setTimeout((function(){t(e)}),32),g.__banned&&K(g),g.__animationListener||(g.addListener("transitionend",(()=>{A(t)})),g.__animationListener=!0),0===C.transition.duration&&(g.__animationPendingQueue&&g.__animationPendingQueue.length>0?(g.__animateStatus=It,xt(g.__animationPendingQueue.shift(),g,!0)):g.__animateStatus=wt)}}))},kt=(e,t)=>{const n=e.$$,r={};if(t.id&&(r.id=e.id||""),t.dataset&&(r.dataset=e.dataset||{}),t.mark&&(r.mark=e.collectMarks()||{}),t.rect||t.size){const e=n.getBoundingClientRect();t.rect&&(r.left=e.left,r.right=e.right,r.top=e.top,r.bottom=e.bottom),t.size&&(r.width=e.width,r.height=e.height)}if(t.properties&&t.properties.forEach((t=>{const n=t.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()));yt.Component.hasPublicProperty(e,n)&&(r[n]=e[n])})),t.scrollOffset)if(e.hasBehavior("wx-positioning-container")){const t=e.getScrollPosition();r.scrollLeft=t.scrollLeft,r.scrollTop=t.scrollTop,r.scrollWidth=t.scrollWidth,r.scrollHeight=t.scrollHeight}else r.scrollLeft=0,r.scrollTop=0,r.scrollWidth=0,r.scrollHeight=0;if(t.computedStyle&&t.computedStyle.length){const e=window.getComputedStyle(n);for(let n=0,o=t.computedStyle.length;n<o;n++){const o=t.computedStyle[n];o&&void 0!==e[o]&&(r[o]=e[o])}}return t.context&&(r.contextIs=e.is,r.contextId="function"==typeof e.getContextId&&e.getContextId(),r.contextCanvasId=e.canvasId||""),t.node&&(r.nodeIs=e.is,r.nodeId="function"==typeof e.getContextId&&e.getContextId(),r.nodeCanvasId=e.canvasId||"",r.nodeCanvasType=e.type||"",r.nodeNodeId=e.getNodeId()),r},Pt=(e,t)=>{const n=[],{pluginId:r,queue:o}=e;return o.forEach((e=>{const o=e.component,i=e.selector,a=e.single,s=e.fields;let c=null;if(0===o)c=(e=>{const t={};return e.id&&(t.id=""),e.dataset&&(t.dataset={}),e.mark&&(t.mark={}),e.rect&&(t.left=0,t.right=0,t.top=0,t.bottom=0),e.size&&(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight),e.scrollOffset&&(t.scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft||0,t.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||0,t.scrollWidth=document.documentElement.scrollWidth||document.body.scrollWidth||0,t.scrollHeight=document.documentElement.scrollHeight||document.body.scrollHeight||0),t})(s);else{let e=t.nodeId.getNodeById(o),n=!1;if(e?(yt.Component.getComponentOptions(e).writeOnly&&(n=!0),e=e.shadowRoot):r||(e=window.__DOMTree__?window.__DOMTree__.shadowRoot:null),a){const t=e&&!n?e.querySelector(i):null;c=t?kt(t,s):null}else{const t=e&&!n?e.querySelectorAll(i):[];c=[];for(let e=0;e<t.length;e++)c.push(kt(t[e],s))}}n.push(c)})),n},Dt=c(),Ot={},Nt={},Rt={},Mt=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Lt=(e,t)=>{const n={left:e.left<t.left?t.left:e.left,top:e.top<t.top?t.top:e.top,right:e.right>t.right?t.right:e.right,bottom:e.bottom>t.bottom?t.bottom:e.bottom,width:0,height:0};return n.right>n.left?n.width=n.right-n.left:n.right=n.left=n.bottom=n.top=0,n.bottom>n.top?n.height=n.bottom-n.top:n.right=n.left=n.bottom=n.top=0,n},Bt=e=>{const{targetNode:t,relatives:n,thresholds:r,minWidthOrHeight:o,cb:i,currentRatio:a}=e,s=(e=>{const t=document.documentElement.clientWidth,n=document.documentElement.clientHeight;let r=null;for(let o=0;o<e.length;o++){const{node:i,margins:a}=e[o],s=i?i.$$.getBoundingClientRect():{left:0,top:0,right:t,bottom:n,width:t,height:n},c={left:s.left-a.left,top:s.top-a.top,right:s.right+a.right,bottom:s.bottom+a.bottom};r=r?Lt(r,c):c}return r})(n),c=Mt(t.$$.getBoundingClientRect());c.right-c.left<o&&(c.right=c.left+o,c.width=o),c.bottom-c.top<o&&(c.bottom=c.top+o,c.height=o);const l=Lt(s,c),d=c.width*c.height,u=d?l.width*l.height/d:0;e.currentRatio=u;let p=void 0===a;u!==a&&r.forEach((e=>{if(p)return!1;(u<=e&&a>=e||u>=e&&a<=e)&&(p=!0)})),p&&i.call(t,{id:t.id,dataset:t.dataset,time:Date.now(),boundingClientRect:c,intersectionRatio:u,intersectionRect:Mt(l),relativeRect:s})},Ft=e=>({left:(e=e||{}).left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}),Wt=(e,t,n,r,o)=>{let i=null;if((r=r||{}).observeAll)i=e.querySelectorAll(t);else{const n=e.querySelector(t);i=n?[n]:[]}i.length||console.warn('For developer:Node "'+t+'" is not found. Intersection observer will not trigger.');const a=[];return n.forEach((t=>{const{selector:n,margins:r}=t,o=null==n?null:e.querySelector(n);o||null==n?a.push({node:o,margins:Ft(r)}):console.warn('For developer:Node "'+n+'" is not found. The relative node for intersection observer will be ignored.')})),a.length||console.warn("For developer:Intersection observer will be ignored because no relative nodes are found."),((e,t,n,r,o,i)=>{const a=O();if(!e.length||!t.length)return a;let s=e.length;return Rt[a]=s,e.forEach(((e,c)=>{const l=a+"#"+c,d={targetNode:e,relatives:t,thresholds:n,currentRatio:r,minWidthOrHeight:o,cb:i},u=Dt.Observer.create((function(e){"attached"===e.status?(Ot[l]=d,requestAnimationFrame((()=>{Bt(d)}))):"detached"===e.status&&(delete Ot[l],u.disconnect(),delete Nt[l],s--,s||delete Rt[a])}));Nt[l]=u,u.observe(e,{attachStatus:!0}),Dt.Element.isAttached(e)&&(Ot[l]=d,requestAnimationFrame((()=>{Bt(d)})))})),a})(i,a,r.thresholds||[0],r.initialRatio||0,r.minWidthOrHeight||0,o)};let jt=!1;const Ut=()=>{jt||(jt=!0,requestAnimationFrame((()=>{jt=!1,(()=>{for(const e in Ot)Bt(Ot[e])})()})))};"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.addEventListener&&(document.addEventListener("pageReRender",(function(){Ut()})),window.addEventListener("scroll",(function(){Ut()}),{capture:!0,passive:!0}));const Vt=(e,t,n)=>{if("addIntersectionObserver"===e.type){let r=null;if(e.nodeId){const n=t.nodeId.getNodeById(e.nodeId);if(!n)return;r=n.shadowRoot}else e.pluginId||(r=window.__DOMTree__.shadowRoot);if(!r)return;return{observerId:Wt(r,e.targetSelector,e.relativeInfo,e.options,(e=>{n({info:e})}))}}if("removeIntersectionObserver"===e.type){return(e=>{const t=Rt[e];delete Rt[e];for(let n=0;n<t;n++){const t=e+"#"+n,r=Nt[t];if(!r)break;delete Ot[t],r.disconnect(),delete Nt[t]}})(e.observerId),{reqEnd:!0}}};let Gt=1;const $t={},Ht=(e,t)=>{const n=(e=>{if("object"!=typeof e)return"";let t="";return["minWidth","maxWidth","width","minHeight","maxHeight","height"].forEach((n=>{if(void 0===e[n])return;let r=Number(e[n]);r>=0||(r="");const o=n.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));t&&(t+=" and "),t+=`(${o}: ${r}px)`})),["orientation"].forEach((n=>{if(void 0===e[n])return;const r=/^[-_a-z0-9]+$/i.test(e[n])?e[n]:"",o=n.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));t&&(t+=" and "),t+=`(${o}: ${r})`})),t})(e),r=window.matchMedia(n),o=Gt++,i=e=>{t({matches:e.matches})};return $t[o]={observer:r,listener:i},r.addListener(i),t({matches:r.matches}),o},Zt=(e,t)=>{if("addMediaQueryObserver"===e.type){return{observerId:Ht(e.mediaQueryCond,(e=>{t({info:e})}))}}if("removeMediaQueryObserver"===e.type){return(e=>{const{observer:t,listener:n}=$t[e];t.removeListener(n),delete $t[e]})(e.observerId),{reqEnd:!0}}},Qt=c();class Yt{constructor(e,t,n){this._treeManager=e,this._arr=t,this._depth=0,this._startCb=n}_consumeHead(){return this._arr.shift()}nextStepType(){return this._arr[0][0]}nextStep(){for(;this._arr[0][0]===F.FLOW_DEPTH;)this._startCb(this._treeManager);if(this._arr[0][0]===F.FLOW_REPEAT){const e=this._arr[0][2];return--this._arr[0][1]||this._consumeHead(),[e]}return this._consumeHead()}nextStepIf(e){for(;this._arr[0][0]===F.FLOW_DEPTH;)this._startCb(this._treeManager);return this._arr[0][0]===e?this._consumeHead():null}expectStart(){const e=this._consumeHead();if(this._depth++,e[0]!==F.FLOW_DEPTH||e[1]!==this._depth)throw new Error(`Framework inner error (expect START descriptor with depth ${this._depth} but get ${j(e[0])})`);return e[2]}expectEnd(){for(;this._arr[0][0]===F.FLOW_DEPTH&&this._arr[0][1]!==this._depth-1;)this._startCb(this._treeManager);const e=this._consumeHead();if(this._depth--,e[0]!==F.FLOW_DEPTH||e[1]!==this._depth)throw new Error(`Framework inner error (expect END descriptor with depth ${this._depth} but get ${j(e[0])})`)}skipToEnd(){for(;this._arr[0];)if(this._arr[0][0]!==F.FLOW_DEPTH)this._consumeHead();else{if(this._arr[0][1]===this._depth-1)break;this._startCb(this._treeManager)}}getQueueLength(){return this._arr.length}getDepth(){return this._depth}}class zt{constructor(e,t){this._viewId=e,this._treeManager=t,this._depth=0,this._curWinSize=0,this._setDataCallbackInc=1,this._pendingSetDataCallbacks=[],this._setDataCallbackMap={},this._received=[],this._cache=[],this._blocked=[],this._isBlocked=!0,this._fetchingViewInfoCallbacks=[];const n=(e,t)=>{if(this._received.push([t].concat(e)),t===F.FLOW_DEPTH&&(this._depth=e[0],0===this._depth)){const e=this._received;this._received=[],this._isBlocked?this._blocked.push(e):(this.iterator=new Yt(this._treeManager,e,zt._startCb),zt._startCb(this._treeManager),document.dispatchEvent(new CustomEvent("pageReRender",{})),w(F.SET_DATA_CALLBACK,[this._pendingSetDataCallbacks],null,!0),this._pendingSetDataCallbacks=[],this.checkDelayFetchingViewInfo())}};for(const t in F)if("FLOW_"===t.slice(0,5))if("FLOW_SET_DATA"===t)I(F[t],(([e])=>{this._pendingSetDataCallbacks.push(e)}),e);else if("FLOW_VIEW_INFO"===t){const n=([e,t,n])=>{let r=null;"selectorQuery"===e?r=Pt(t,this._treeManager):"intersection"===e?r=Vt(t,this._treeManager,(e=>{w(F.RESPONSE_VIEW_INFO,[e,n])})):"matchMedia"===e&&(r=Zt(t,(e=>{w(F.RESPONSE_VIEW_INFO,[e,n])}))),r&&w(F.RESPONSE_VIEW_INFO,[r,n])};I(F[t],(e=>{this._received.length||this._isBlocked?this._fetchingViewInfoCallbacks.push(n.bind(this,e)):n(e)}),e)}else"FLOW_SET_NODE_ANIMATION_INFO"===t?I(F[t],(e=>{"scrollTimeline"===e[0].type?_t(e[0],this._treeManager):xt(e[0])})):"FLOW_CLEAR_NODE_ANIMATION_INFO"===t?I(F[t],(e=>{St(e[0])})):"FLOW_SET_NODE_NEXT_ANIMATION_INFO"===t?I(F[t],(e=>{Tt(e[0])})):I(F[t],n,e);I(F.SET_DATA_CALLBACK,(([e])=>{this.triggerSetDataCallbacks(e)}),e)}flushBlocked(){for(;this._blocked.length&&!this._isBlocked;)try{const e=this._blocked.shift();this.iterator=new Yt(this._treeManager,e,zt._startCb),zt._startCb(this._treeManager),document.dispatchEvent(new CustomEvent("pageReRender",{}))}catch(e){console.error(e.message),Reporter.errorReport({key:"webviewScriptError",error:e})}this._blocked.length||(w(F.SET_DATA_CALLBACK,[this._pendingSetDataCallbacks],null,!0),this._pendingSetDataCallbacks=[],this.checkDelayFetchingViewInfo())}unblock(){this._isBlocked=!1,this.flushBlocked()}block(){this._isBlocked||(this._isBlocked=!0)}sendInIndividualFlow(e){this.start(Date.now()),this.push(e),this.end()}start(){this.flush(),this._depth++,w(F.FLOW_DEPTH,[this._depth,Date.now()],this._viewId)}dedupe(){const e=this._cache;if(this._curWinSize){if(2===e.length){const t=e[1][2];if(e[0][0]!==t){const t=e.pop(),n=t.shift();w(n,t,this._viewId)}else e.shift(),e[0][1]++}}else{let t=0;if(e.length>2&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]&&e[0][0]!==F.FLOW_SET_DATA&&e[0][0]!==F.FLOW_VIEW_INFO&&(t=1),t){const t=e[0][0];e.splice(0,3),this.flush(),this._curWinSize=1,e.unshift([F.FLOW_REPEAT,3,t])}else if(e.length>3){const t=e.pop(),n=t.shift();w(n,t,this._viewId)}}}push(e){this._cache.unshift(e),1!==e.length?this.flush():this.dedupe()}flush(){for(this._curWinSize=0;this._cache.length;){const e=this._cache.pop(),t=e.shift();w(t,e,this._viewId)}}end(){this.flush(),this._depth--,w(F.FLOW_DEPTH,this._depth,this._viewId),0===this._depth&&b()}checkDelayFetchingViewInfo(){if(this._fetchingViewInfoCallbacks.length){const e=this._fetchingViewInfoCallbacks;this._fetchingViewInfoCallbacks=[],e.forEach((e=>e()))}}registerSetDataCallback(e,t,n){const r=this._setDataCallbackInc++;this._setDataCallbackMap[r]=[e,t,n],this.push([F.FLOW_SET_DATA,r])}triggerSetDataCallbacks(e){for(let t=0;t<e.length;t++){const n=e[t],[r,o,i]=this._setDataCallbackMap[n];delete this._setDataCallbackMap[n],Qt.safeCallback("SetData Callback",r,o,[],i)}}static setStartOperation(e){zt._startCb=e}}const qt=zt,Jt=c(),Kt=Object.prototype.hasOwnProperty,Xt=Jt.dataUtils.deepCopy,en=(e,t,n,r,o)=>{const i=o?Xt(e):e;for(let e=0;e<t.length;e++){const o=t[e],a=o[0],s=o[1],c=o[2];if(void 0===s)continue;let l=i,d=a[0];for(let e=1;e<a.length;e++)if(l=l[d],null!=l&&l.__wxspec__&&(l=l.__value__),d=a[e],null!=l&&!Kt.call(l,d)){l=null;break}null!=l&&Kt.call(l,d)&&(n?null!=c&&"object"==typeof s&&s instanceof Array==c instanceof Array?l[d]={__value__:c,__wxspec__:!0}:null!=l[d]&&l[d].__wxspec__||(l[d]={__value__:l[d],__wxspec__:!0}):l[d]=r?Xt(s,!1):s)}return i},tn={restoring:null,idDataMap:null,compIdArr:null,compExtraDataMap:null,compIdArrIndex:0,onReady:()=>{}},nn=c(),rn={},on=(e,n)=>{const r=nn.Component.getComponentOptions(e).domain;if("/"===r||"//"===r||!r)return;const o=r.split("/",1)[0],i=n,a=i.viewId;if(rn[a]||(rn[a]={}),rn[a][o])return;rn[a][o]=!0;const s=[o,t.pluginInfos[o].version,i.rootCompName,t.getLaunchOptionsSync().sessionid||t.getLaunchOptionsSync().sessionId||"",0,""].map(encodeURIComponent).join(",");void 0!==Reporter&&(Reporter.reportKeyValue({key:"PluginDisplay",value:s,force:!0}),Reporter.reportIDKey({key:"pluginDisplayInPage",force:!0}))};let an=0,sn=0,cn=0;const ln=(e,t,n,r)=>{const o=n-t,i=n-e,a=Math.ceil(cn/(sn||1)),s=[an,1,o,sn,a,1,i,r].map(encodeURIComponent).join(",");an=0,sn=0,cn=0,void 0!==Reporter&&Reporter.reportKeyValue({key:"SetDataPerf",value:s,force:!0})};let dn=0,un=0,pn=0,hn=0,fn=0,gn=0;const _n=()=>{const e=["libVersion","isFirstPage","isWebview","totalComps","loadedComps","lazyedComps","loadTime","lazyLoadTime"],t=new Set(e),r={};let o=!1;const i=(n,i)=>{o||(r[n]=i,t.has(n)&&t.delete(n),0===t.size&&((()=>{if(void 0===Reporter)return;const t=e.map((e=>encodeURIComponent(r[e]))).join(",");Reporter.reportKeyValue({key:"LazyCodeLoading",value:t,immediately:!0})})(),o=!0))};return i("libVersion",n.version.version),i("isWebview",!1),i("lazyedComps",0),i("lazyLoadTime",0),{set:i}},mn={},yn=/-[a-z]/g,vn=/([A-Z])/g,An=e=>{if(mn[e])return mn[e];return mn[e]=e.indexOf("-")<=0?e:e.replace(yn,(e=>e[1].toUpperCase()))},bn=e=>mn[e]||(mn[e]=e.replace(vn,"-$1").toLowerCase());let wn=0;const Cn=setTimeout,In=function(e){wn===e&&(wn=0)},En=function(){return wn=Date.now()+Math.random(),wn},Sn=function(e){const t=En();let n;try{n=e(t)}catch(e){throw Cn((()=>{In(t)}),0),e}return Cn((()=>{In(t)}),0),n},Tn=function(){return!!wn},xn=c();Object.prototype.hasOwnProperty;let kn=null;const Pn=(e,t)=>kn?kn(e,"nv_",t?2:void 0):e,Dn=(e,t=!1)=>kn?kn(e,void 0,t?2:void 0):e,On=(e,t,n)=>t?n?t+e+n:t||"":n||"";const Nn=([e,t,n,r,o])=>{if(r||(r={}),t){const i=xi.get(e);if(!i)return;const a=i.nodeId.getNodeById(t);if(!a)return;const s=xn.Element.getMethodCaller(a);s&&"function"==typeof s[n]&&(o?Sn((()=>{s[n](r)})):s[n](r))}else{const e=i.getCurrentPagesByDomain("");if(!e.length)return;const t=e[e.length-1];t&&"function"==typeof t[n]&&(o?Sn((()=>{t[n](r)})):t[n](r))}};t.onCallMethodFromWxs(Nn);const Rn=(e,t,n)=>{if(t.__wxsStyle||t.__wxsClass){const r={wxsStyle:t.__wxsStyle,wxsClass:t.__wxsClass,index:n,wxsState:Dn(t.__wxsState)};if(t.ownerShadowRoot&&xi.instance){const n=xi.instance.nodeId.getNodeId(t.ownerShadowRoot.__wxHost);e._custom=e._custom||{},(e=e._custom)[n]=e[n]||{},e=e[n]}e[t.is]=e[t.is]||[],e[t.is].push(r)}},Mn=(e,t,n)=>{if(!e)return;let r=null;if(t.ownerShadowRoot&&xi.instance&&e._custom){const n=xi.instance.nodeId.getNodeId(t.ownerShadowRoot.__wxHost);if(!(e=e._custom)[n])return;e=e[n]}e[t.is]&&e[t.is].length&&e[t.is][0]&&e[t.is][0].index===n&&(r=e[t.is].shift()),r&&((e,t)=>{if(e.__wxsStyle=t.wxsStyle,e.__wxsClass=t.wxsClass,e.__wxsState=Pn(t.wxsState),t.wxsStyle){const t=()=>{const t=window.wx.transformRpx(e.__wxsStyle,!0);e.setNodeStyle(t,G)};t(),Q(e,G,t)}t.wxsClass&&(e.class=On(" ",e.class,t.wxsClass))})(t,r)},Ln=c(),Bn=void 0!==n&&n.transformRpx,Fn=Ln.Component.getComponentOptions,Wn=e=>e instanceof Ln.Component?xi.get(e.__wxWebviewId__).nodeId.getNodeById(e.__wxExparserNodeId__):e,jn=(e,t,n)=>{let r=Wn(e);return n&&r instanceof Ln.VirtualNode&&(r.id||Object.getOwnPropertyNames(r.dataset).length||(r=Wn(n))),{id:t?"":r.id,dataset:t?{}:r.dataset}},Un=(e,t,n,r,o,i,a,s)=>{const c=i?"__wxEventCaptureHandleName":"__wxEventHandleName";t[c]||(t[c]=Object.create(null)),void 0===t[c][n]&&t.addListener(n,(function(e){const r=t[c][n],i=e.mutatedMarked();if(s&&e.mutatedMarked())return;if(s&&e.markMutated(),!r)return;e._hasListeners=!0;const l=t.ownerShadowRoot;if(l){const t=l.getHostNode(),n=Ln.Component.getComponentOptions(t).writeOnly;if(!n||e._allowWriteOnly){if(a&&"function"==typeof r)return void console.warn('Cannot use wxs function to handle custom event "'+e.type+'".');const o=Ln.Element.getMethodCaller(t);"function"!=typeof o[r]?console.warn('Component "'+t.is+'" does not have a method "'+r+'" to handle event "'+e.type+'".'):o[r]({type:e.type,timeStamp:e.timeStamp,target:jn(e.target,n,this),currentTarget:jn(this,n,null),mark:e.mark,detail:e.detail,touches:e.touches,changedTouches:e.changedTouches,mut:i,_requireActive:e._requireActive})}}return!o&&void 0}),{capture:i}),a?t[c][n]=r:(t[c][n]=null==r?"":String(r),t.__eventHandlerChangeListener__&&t.__eventHandlerChangeListener__(n,t[c][n],i))},Vn=(e,t,r,o)=>{const i=e.__treeManager__;e.dataset=e.dataset||{};let a=0,s=!1;const c=[],l=e instanceof Ln.Component,d=l&&"//"===Fn(e).domain,u=Ln.Component.getDataProxy(e);for(const i in t){const g=t[i];let _=null;if("slot"===e.is&&e instanceof Ln.VirtualNode&&"name"===i){Ln.Element.setSlotName(e,g);continue}if("id"===i){e.id=null==g?"":g;continue}if("slot"===i){e.slot=null==g?"":g;continue}if("class"===i){if(l){e.class=e.__wxsClass?On(" ",null==g?"":g,e.__wxsClass):null==g?"":g;l&&e.hasExternalClass("class")&&e.setExternalClass("class",g)}continue}if("style"===i&&l&&e.$$){const t=Bn(g,!0);e.setNodeStyle(t,U),t!==g?Q(e,U,(function(){const t=Bn(g,!0);e.setNodeStyle(t,U),e.__transformedPropValue=t})):Y(e,U),e.__banned&&K(e)}if(l&&Ln.Component.hasPublicProperty(e,i)){!d&&tn.restoring||(u.scheduleReplace([i],g,null!=r?r[i]:null),d?u.doUpdates(void 0,!0):(s=!0,e.isInnerDataExcluded(i)||a++));const t=o&&o["model:"+bn(i)];if(t){const n=t.match(/^\{\{(.*?)\}\}$/);if(n){const t=n[1].match(/^\s*([_a-zA-Z$][_a-zA-Z0-9$]+)\s*$/);if(t){const n=t[1];e.__modelValueName=Object.assign(e.__modelValueName||{},{[i]:n}),c.push(i)}else console.warn("For developer:Two-way binding does not support complex data paths currently. This two-way binding is ignored.")}else console.warn(`For developer:"${t}" is not an assignable expression. This two-way binding is ignored.`)}continue}if("style"===i)continue;if(/^data-/.test(i)){const t=An(i.slice(5).toLowerCase());e.dataset[t]=g,e.setAttribute(i,g);continue}if("$gdc"===i){"function"==typeof(h=g)&&(kn=h);continue}if((_=i.match(/^\$wxs:(capture-)?(mut-)?(bind|catch):?(.+)$/))&&("function"==typeof g||!g)){Un(0,e,_[4],g,"catch"===_[3],_[1],!0,_[2]),f();continue}if(_=i.match(/^(capture-)?(mut-)?(bind|catch):?(.+)$/)){Un(0,e,_[4],g,"catch"===_[3],_[1],!1,_[2]),f();continue}if("on"===i.slice(0,2)){Un(0,e,i.slice(2),g,!1,!1,!1);continue}if("animation"===i){if(l&&e.$$&&null!==g&&"object"==typeof g&&g.actions&&g.actions.length>0){let t=0;const r=g.actions,o=g.actions.length;function p(){if(t<o){const{transition:o,transitionProperty:i,transform:a,transformOrigin:s,style:c}=n.animationToStyle(r[t]),l=e.__styleObj?Object.assign({},e.__styleObj,{transition:o,transform:a,transitionProperty:i,transformOrigin:s}):{transition:o,transform:a,transitionProperty:i,transformOrigin:s};l["-webkit-transition"]=l.transition,l["-webkit-transform"]=l.transform,l["-webkit-transition-property"]=l.transitionProperty,l["-webkit-transform-origin"]=l.transformOrigin;for(const e in c)l[e]=c[e];e.__styleObj=l,""!==l.transform&&(e.__transformNoneEnabled=!0);const d=Object.keys(l).filter((t=>!(/transition/i.test(t)&&""===l[t]||""===t.trim()||void 0===l[t]||!/transform/i.test(t)&&""===l[t]||!isNaN(parseInt(t,10)))&&(/transform/i.test(t)&&""===l[t]&&e.__transformNoneEnabled&&(l[t]="none"),!0))).map((e=>`${e.replace(/([A-Z]{1})/g,(e=>`-${e.toLowerCase()}`))}:${l[e]}`)).join(";"),u=()=>{e.setNodeStyle(Bn(d,!0),V)};u(),Q(e,V,u),e.__banned&&K(e)}}e.addListener("transitionend",(()=>{t+=1,p()})),p()}continue}if(_=i.match(/^\$wxs:change:(.+)$/)){e.wxsObserver=e.wxsObserver||{},e.wxsObserver[_[1]]=e.wxsObserver[_[1]]||{},e.wxsObserver[_[1]].observer=g;continue}if(_=i.match(/^mark:(.+)$/)){e.setMark(_[1],g);continue}const m=bn(i);l&&e.hasExternalClass(m)&&e.setExternalClass(m,g)}var h;s&&u.doUpdates(a,!1);for(let t=0;t<c.length;t++){const n=c[t];e.__wxPropertyListener__&&e.__wxPropertyListener__[n]||(e.setPropertyChangeListener(n,(t=>{const r=e.ownerShadowRoot.getHostNode();r.setData({[e.__modelValueName[n]]:t})})),e.__wxPropertyListener__=e.__wxPropertyListener__||{},e.__wxPropertyListener__[n]=!0)}e.__component__&&!tn.restoring&&i.operationFlow.push([F.FLOW_APPLY_PROPERTY])},Gn=Object.create(null);let $n=!1;const Hn={},Zn=function(e,t){$n&&(Gn[e]=t)},Qn=function(){return $n},Yn=c(),zn=Yn.dataUtils.deepCopy,qn={tag:"shadow",children:[]},Jn=(t,n)=>{const r=Date.now(),o=t?t(n,null,e.g):qn;var i;return i=Date.now()-r,sn+=1,cn+=i,o.tag="shadow",o},Kn=(e,t)=>{if(!Qn())return;t.operationFlow.start(Date.now()),t.operationFlow.push([F.FLOW_HOT_UPDATE_RESET,t.nodeId.getNodeId(e)]);let n="";e===t.root?n="body":e===t.tabRoot&&(n="tab-bar");const r=e.__vtObj,o=e.ownerShadowRoot?e.ownerShadowRoot.createComponent(r.tag,void 0,r.generics,t):Yn.createElement(n,Yn.Component._list[e.is],t);t.operationFlow.push([F.FLOW_HOT_UPDATE_RESET]);const i=t.nodeId.getNodeId(e);if(t.nodeId.removeNode(e),t.nodeId.allocNodeId(o,i),e===t.root){Yn.Element.pretendDetached(e),t.root=o,Yn.Element.pretendAttached(o);const n={};let r=!1;Object.keys(t.initialRootData).forEach((e=>{Yn.Component.hasProperty(o,e)&&(n[e]=t.initialRootData[e],r=!0)})),r&&t.root.setData(n)}else if(e===t.tabRoot)t.tabRoot=o;else{o.__vtObj=r;const t=r.attr;for(Vn(o,t,r.raw,r.rawAttr);e.childNodes.length;)o.appendChild(e.childNodes[0]);e.parentNode.replaceChild(o,e)}t.operationFlow.end()},Xn=(e,t,n,r,o)=>{let i=null;if("shadow"===e.tag&&t)n=i=Yn.ShadowRoot.create(t);else if("virtual"===e.tag||"shadow"===e.tag){let t="virtual";1===e.wxXCkey||3===e.wxXCkey?t="wx:if":2!==e.wxXCkey&&4!==e.wxXCkey||(t="wx:for"),i=n.createVirtualNode(t),Yn.Element.setInheritSlots(i),i.__treeManager__=r}else if("wx-slot"===e.tag)i=n.createVirtualNode("slot"),Yn.Element.setSlotName(i,"");else{const t=n.tagNameUsed(e.tag);if(t){const a=n.getHostNode();let s=n.getCompDefByTagName(e.tag);"string"==typeof s.is&&(s=s.is);const c=a.getPlaceholder(e.tag);r.compManager.shouldUsePlaceholder(s)&&!!c?(i=n.createComponent(e.tag,c,e.generics,r),i.__placeholder__=!0,r.compManager.arrangePlaceholderReplace(s,(()=>{const e=i.__vtObj,a=n.createComponent(e.tag,void 0,e.generics,r);er(e,a,r,o);[...i.childNodes].forEach((e=>{i.removeChild(e),a.appendChild(e)})),i.parentNode&&i.parentNode.replaceChild(a,i),t&&on(a,r)}))):(i=n.createComponent(e.tag,void 0,e.generics,r),t&&on(i,r))}else i=n.createVirtualNode(e.tag),i.__treeManager__=r}er(e,i,r,o);const a=e.children;if(a)for(let e=0;e<a.length;e++){const t=a[e];if(null!=t)if("object"==typeof t){const e=Xn(t,null,n,r,o);i.appendChild(e)}else{const e=n.createTextNode(t);i.appendChild(e)}}return i},er=(e,t,n,r)=>{(Qn()||!0===t.__placeholder__)&&(t.__vtObj=e),3!==e.wxXCkey&&4!==e.wxXCkey||(t.__wxDynamicSync__=4===e.wxXCkey?"wx:for":"wx:if");const o=t.__component__,i=t.__placeholder__;(o||i)&&(Yn.Element.getMethodCaller(t).__wxExparserNodeId__=n.nodeId.allocNodeId(t,""),n.operationFlow.push([F.FLOW_CREATE_NODE,n.nodeId.getNodeId(t)]));const a=r?zn(e.attr):e.attr;Vn(t,a,e.raw,e.rawAttr)},tr=e=>{e.operationFlow.push([F.FLOW_MINIPULATE_CHILD])},nr=Object.prototype.hasOwnProperty,rr=e=>"number"==typeof e&&isNaN(e),or=(e,t)=>{const n=(e=>{const t={};for(let n=0;n<e.length;++n){const r=e[n],o=r&&r.wxKey;o?nr.call(t,o)?r.wxKey=void 0:t[o]=n:rr(o)&&(r.wxKey=void 0)}return t})(e),[r,o]=(e=>{const t={},n=[];for(let r=0;r<e.length;++r){const o=e[r],i=o&&o.wxKey;i?nr.call(t,i)?(console.warn(`For developer:Do not set same key "${i}" in wx:key.`),o.wxKey=void 0,n.push(r)):t[i]=r:(rr(i)&&(o.wxKey=void 0),n.push(r))}return[t,n]})(t),i=[],a=[],s=[];let c=0,l=0;for(let n=0;n<e.length;++n){const s=e[n].wxKey;if(s)if(nr.call(r,s)){const e=r[s];i.push(t[e])}else a.push(n-l),++l,i.push(null);else if(c<o.length){const e=o[c];i.push(t[e]),++c}else a.push(n-l),++l,i.push(null)}const d=i;let u=0;const p=[];for(let e=0;e<t.length;){const o=t[e],i=o&&o.wxKey;let a=d[u],c=a&&a.wxKey;for(;null===a;)++u,a=d[u],c=a&&a.wxKey;u>=d.length?(s.push({oldIndex:n[i],index:e,pos:-1}),++u,++e):c===i?(p.push(u),++u,++e):i?(c?r[c]===e+1?s.push({oldIndex:n[i],index:e,pos:u}):(++u,a=d[u],a&&a.wxKey===i?(p.push(u),++u):(--u,s.push({oldIndex:n[i],index:e,pos:u}))):s.push({oldIndex:n[i],index:e,pos:u}),++e):++u}let h=0;for(let e=0;e<s.length;e++){const t=s[e].pos;if(-1===t)break;for(;h<p.length&&t>p[h];)h++;h>=p.length?s[e].pos=-1:s[e].pos=p[h]}return{children:i,removes:a,inserts:s}},ir=(e,t,n)=>{if(e!==t&&(!e||n))if(null==t)n.parentNode.removeChild(n);else if("object"==typeof t)if("object"!=typeof e||null===e||e.tag!==t.tag||String(e.wxKey)!==String(t.wxKey)||"virtual"===e.tag&&e.wxVkey!==t.wxVkey){const e=n.__treeManager__,r=n.parentNode,o=Xn(t,null,r.ownerShadowRoot,e,!1);r&&("wx:for"===r.__wxDynamicSync__||"wx:if"===n.__wxDynamicSync__?(e.nodeId.addNode(o),r.replaceChild(o,n),tr(e),e.nodeId.removeNode(n)):r.replaceChild(o,n),n.__banned&&X(o))}else{if(t.n&&t.n.length){const e=t.n,r=t.attr,o={};for(let t=0;t<e.length;t++){const n=e[t];o[n]=r[n]}Vn(n,o,t.raw,t.rawAttr)}void 0!==t.wxScopeData&&(n.__wxScopeData__=t.wxScopeData),void 0!==n.__vtObj&&(n.__vtObj=t),ar(e,t,n)}else if("string"==typeof e)t!==e&&(n.textContent=t);else{const e=n.ownerShadowRoot.createTextNode(t);n.parentNode.replaceChild(e,n)}},ar=(e,t,n)=>{const r=!!D("customComponents"),o=e.children;let i=t.children;const a="virtual"===e.tag&&(2===e.wxXCkey||4===e.wxXCkey||void 0===e.wxXCkey)||!r&&o.length!==i.length;let s=null,c=null;if(a){const e=or(o,t.children);i=e.children,s=e.removes,c=e.inserts}const l=n.childNodes;for(let e=0;e<o.length;e++){const t=o[e],n=i[e];!n&&a||ir(t,n,l[e])}a&&((e,t,n,r)=>{const o=n.__treeManager__,i=n.childNodes,a=[];for(let e=0;e<t.length;e++){const n=t[e];a.push({node:void 0!==n.oldIndex?i[n.oldIndex]:null,before:n.pos>=0?i[n.pos]:void 0,index:n.index})}for(let t=0;t<e.length;t++){const r=i[e[t]];n.removeChild(r),"wx:for"===i.__wxDynamicSync__&&(tr(o),o.nodeId.removeNode(r))}for(let e=0;e<a.length;e++){const{before:t,index:i}=a[e];let s=a[e].node;null===s&&(s=Xn(r[i],null,n.ownerShadowRoot,o,!1)),"wx:for"===n.__wxDynamicSync__?(o.nodeId.addNode(s),n.insertBefore(s,t),tr(o)):n.insertBefore(s,t)}n.__banned&&X(n)})(s,c,n,t.children)},sr=c(),cr={};let lr=1;const dr=[],ur=(e,t)=>{if(cr[e]){const n=cr[e],r=dr[dr.length-1],o=dr[dr.length-2],{isMergedUpdate:i,dataPaths:a,pendingStartTimestamp:s,updateStartTimestamp:c,updateEndTimestamp:l}=t(n);w(F.UPDATE_PERFORMANCE_STAT,[e,{isMergedUpdate:i,dataPaths:a,updateProcessId:r,parentUpdateProcessId:o,pendingStartTimestamp:s,updateStartTimestamp:c,updateEndTimestamp:l}])}};const pr=c(),hr=pr.dataUtils.deepCopy,fr=e=>{if("object"!=typeof e||!e)return e;const t=e.slice();return t.shift()(...t)},gr=function(e,t,n){const r=e.childNodes;for(let e=0;e<r.length;e++){const o=r[e];o instanceof pr.TextNode||(o.__id&&(t[o.__id]=o),void 0!==o.__slotName&&(n[o.__slotName]=o),gr(o,t,n))}};class _r{createInstance(e,t){const n=new mr;let r=t;if(n._template=this,n._generateFunc=this._generateFunc,n.data=hr(this._data),n.idMap=Object.create(null),n.slots=Object.create(null),tn.restoring){if(tn.compIdArrIndex>=tn.compIdArr.length)throw new Error("Component count unmatched while page recovering");r.nodeId.allocNodeId(e,tn.compIdArr[tn.compIdArrIndex++]);const t=tn.idDataMap[r.nodeId.getNodeId(e)];n._virtualTree=Jn(this._generateFunc,t)}else n._virtualTree=this._virtualTree;return n.shadowRoot=Xn(n._virtualTree,e,null,t,!0),gr(n.shadowRoot,n.idMap,n.slots),n.listeners=[],this._isSimpleComponent||(e.__component__=!0),e.__treeManager__=r,n.shadowRoot.__treeManager__=r,r.operationFlow.registerSetDataCallback((function(){e.triggerLifeTime("ready")})),n._delayedUpdateValues=null,n}updateGenerateFunc(e){this._generateFunc=fr(e),this._virtualTree=Jn(this._generateFunc,this._initValues),xi.list().forEach((t=>{[t.root,t.tabRoot].forEach((n=>{n&&R(n,1,(n=>{n instanceof pr.Component&&n.__templateInstance._template===this&&(n.__templateInstance._generateFunc=e,n.__templateInstance._resetShadowChildren(n,n.data,t))}))}))}))}}_r.create=function(e,t,n,r){const o=new _r;o._initValues=n,o._data=t;const i=e.template;return o._generateFunc=fr(i.func),o._virtualTree=Jn(o._generateFunc,o._initValues),o._isSimpleComponent="simple://"===r.domain.slice(0,9),Zn(i.path,(e=>{i.func=e,o.updateGenerateFunc(e)})),o};class mr{beforeMergeValues(e,t,n){if("number"!=typeof n)e.forEach(((e,n)=>{void 0!==e[1]?t[n]=!1:(t[n]=!0,console.warn('Setting data field "'+e[0].join(".")+'" to undefined is invalid.'))}));else{for(let e=0;e<n;e++)t[e]=!1;for(let r=n;r<e.length;r++){const n=e[r];void 0!==n[1]?t[r]=!1:(t[r]=!0,console.warn('Setting data field "'+n[0].join(".")+'" to undefined is invalid.'))}}}beforeUpdateValues(e,t,n){0}updateValues(e,t,n,r,o,i){if(tn.restoring)return;let a=null;const s="number"!=typeof i;if(a=e.__treeManager__,s){a.operationFlow.start(Date.now());const t=[];o.forEach((e=>{void 0!==e[1]&&t.push(e)})),a.operationFlow.push([F.FLOW_UPDATE,a.nodeId.getNodeId(e),hr(t)])}else{const e=[];for(let t=i;t<o.length;t++){const n=o[t];void 0!==n[1]&&e.push(n)}a.operationFlow.push([F.FLOW_DATA_OBSERVER,hr(e)])}if(this._delayedUpdateValues)this._delayedUpdateValues.push([hr(t),n,r,o,i]);else{this._delayedUpdateValues=[];try{this._updateValues(e,t,n,r,o,i);const a=this._delayedUpdateValues;this._delayedUpdateValues=null;for(let t=0;t<a.length;t++){const n=a[t];this._updateValues(e,n[0],n[1],n[2],n[3],n[4])}}catch(e){throw this._delayedUpdateValues=null,e}}s&&a.operationFlow.end()}_updateValues(e,t,n,r,o,i){const a="number"!=typeof i,s=!D("propValueDeepCopy"),c=en(t,o,!0,!1,s),l=Jn(this._generateFunc,c);en(t,o,!1,a,!1);const d=this._virtualTree;this._virtualTree=l,ir(d,l,this.shadowRoot)}_resetShadowChildren(e,t,n){const r=()=>{n.operationFlow.push([F.FLOW_HOT_UPDATE_CHILD])};n.operationFlow.start(Date.now()),n.operationFlow.push([F.FLOW_HOT_UPDATE,n.nodeId.getNodeId(e)]);const o=this.shadowRoot,i=(this._virtualTree.children||[]).length;for(let e=0;e<i;e++)o.removeChild(o.childNodes[0]);r();const a=Jn(this._generateFunc,t);r(),this._virtualTree=a;const s=Xn(a,null,e.shadowRoot,n,!0).childNodes,c=s.length;for(let e=0;e<c;e++)o.insertBefore(s[0],o.childNodes[e]);n.operationFlow.end()}}const yr=c();let vr=null;const Ar=()=>{vr={};let e=null;__wxConfig&&__wxConfig.plugins?e=__wxConfig.plugins:"undefined"!=typeof window&&window&&window.__wxConfigAppService__&&window.__wxConfigAppService__.plugins&&(e=window.__wxConfigAppService__.plugins);let t,n=!1;if(e)for(const t in e){const r=e[t].provider,o=e[t].subpackage;if(void 0!==o){n=!0;let e=o||"";"__APP__"===e&&(e=""),"/"===e[0]&&(e=e.slice(1)),e&&"/"!==e.slice(-1)&&(e+="/"),vr[r]=e}}if(!n){if(__wxConfig&&__wxConfig.subPackages)t=__wxConfig.subPackages;else{if("undefined"==typeof window||!window||!window.__subPackages)return;t=window.__subPackages}t.length&&t.forEach((e=>{if(!e)return;let t=e.root||"";if(t&&"/"!==t.slice(-1)&&(t+="/"),e.plugins)for(const n in e.plugins){if(!Object.prototype.hasOwnProperty.call(e.plugins,n))continue;const r=e.plugins[n]&&e.plugins[n].provider;r&&(vr[r]=t)}}))}},br=e=>{const t=e.match(/(?:^|\/)__(wx|plugin)__\/(.*)$/);return t?"wx"===t[1]?"wx://"+t[2]:"plugin-private://"+t[2]:e},wr=e=>{vr||Ar();return(yr.Component._list[e]&&yr.Component._list[e].is||e).replace(/^plugin-private:\/\/([0-9a-zA-Z]+)\//,((e,t)=>(vr[t]||"")+"__plugin__/"+t+"/")).replace(/^wx:\/\//,"__wx__/")},Cr=e=>vr[e]||"",Ir=e=>(vr||Ar(),(vr[e]||"")+"__plugin__/"+e+"/"),Er=e=>{vr||Ar();let t,n=e.match(/^plugin:\/\/(.+?)\//);if(n)return Er(vr[n[1]]||"");if(n=e.match(/^plugin-private:\/\/([0-9a-zA-Z]+)\//),n)return Er(vr[n[1]]||"");var r,o;t=null!==(r=null===(o=__wxConfig)||void 0===o?void 0:o.subPackages)&&void 0!==r?r:[];for(let n=0;n<t.length;++n){let r=t[n].root||"";if(r&&"/"!==r.slice(-1)&&(r+="/"),e.slice(0,r.length)===r)return t[n]}return null},Sr=e=>{const t=Er(e);if(!t)return"__APP__";const n=t.root||"";return"/"===n.slice(-1)?n:n+"/"},Tr=e=>{const t=Er(e);return!!t&&t.independent},xr={main:"app-service.js",sub:"app-service.js",lazyCommon:"common.app.js",lazyApp:"appservice.app.js",plugin:"appservice.js"},kr=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"],Pr=(e,t)=>{t(`isLazyLoad: ${Eo()}`),t(`moduleName: ${e}`);const n=Object.values(__wxConfig.plugins||{}).filter((t=>t.subpackage.includes(e))).map((e=>{const t=e.provider,n=`__plugin__/${t}`;return{plugin_id:t,prefix_path:kr.includes(t)?null:n}}));t(`separatedPlugins: ${JSON.stringify(n)}`);const r="__APP__"===e,o=r?"":e;if(Eo()){const e=[];return n.forEach((t=>{let n=(o+t.prefix_path+"/").replace(/\/\/$/,"/");t.prefix_path||(n+=`__extended__/${t.plugin_id}/`),e.push(n+xr.plugin)})),e.push(o+xr.lazyCommon,o+xr.lazyApp),t(`all files to inject: ${JSON.stringify(e)}`),e}{const e=n.map((e=>{let t=(o+e.prefix_path+"/").replace(/\/\/$/,"/");return e.prefix_path||(t+=`__extended__/${e.plugin_id}/`),t+xr.plugin}));return r?e.push(o+xr.main):e.push(o+xr.sub),t(`all files to inject: ${JSON.stringify(e)}`),e}},Dr=c(),Or=(e,t,n)=>{if(e instanceof Dr.Component){e!==window.__DOMTree__&&(t.compCount++,e.hasBehavior("wx-base")?(n&&t.rootInternalCompCount++,e.hasBehavior("wx-native")&&t.nativeCompCount++):n&&t.rootCustomCompCount++);const r=e===window.__DOMTree__&&n;e.shadowRoot instanceof Dr.Element&&Or(e.shadowRoot,t,r)}const r=e.childNodes;for(let o=0,i=r.length;o<i;o++){const i=(r[o]instanceof Dr.VirtualNode||e===window.__DOMTree__||e===window.__DOMTree__.shadowRoot)&&n;r[o]instanceof Dr.Element&&Or(r[o],t,i)}},Nr={id:null,prev:null,data:[]};I(F.SAVE_STATE,(()=>{"function"==typeof n.webViewReadyToTerminate&&n.webViewReadyToTerminate({})})),I(F.RESTORE_STATE,(([e,t,n,r])=>{if(e&&e.isSplitData){const{id:o,index:i,total:a,data:s}=e.splitInfo;if(1!==i&&(i!==Nr.prev+1||o!==Nr.id))return Nr.id=null,Nr.prev=null,void(Nr.data=[]);if(i!==a)return Nr.id=o,Nr.prev=i,void Nr.data.push(s);{Nr.data.push(s);let o=Nr.data.join("");try{o=JSON.parse(o)}catch(e){console.error("Expected parse completed data with split data but got error"),Reporter.errorReport({key:"webviewScriptError",error:new Error("Expected parse completed data with split data but got error")}),o=null}if(Nr.id=null,Nr.prev=null,Nr.data=[],!o)return;e=o[0],t=o[1],n=o[2],r=o[3]}}tn.restoring=e||{},tn.idDataMap=t,tn.compIdArr=n,tn.compIdArrIndex=0;const o=xi.instance.compManager;o.restore(r),tn.onReady=o.onRestoreInjectDone.bind(o)}));const Rr=e=>{(e=>{const t=document.body.scrollTop||document.documentElement.scrollTop;e.__page__={scrollTop:t}})(e),e.compExtraDataMap={};let t=0;window.__TAB_BAR__&&(R(window.__TAB_BAR__,1,(n=>{n.triggerLifeTime("saved",[e]),Rn(e.compExtraDataMap,n,t++)})),e.compExtraDataMap),R(window.__DOMTree__,1,(n=>{n.triggerLifeTime("saved",[e]),Rn(e.compExtraDataMap,n,t++)})),e.compExtraDataMap},Mr=e=>{(e=>{const t=e.__page__;if(t){const e=parseInt(t.scrollTop,10);requestAnimationFrame((()=>{document.body.scrollTop=document.documentElement.scrollTop=e}))}})(e);let t=0;window.__TAB_BAR__&&(R(window.__TAB_BAR__,1,(n=>{n.triggerLifeTime("restored",[e]),Mn(e.compExtraDataMap,n,t++)})),e.compExtraDataMap),R(window.__DOMTree__,1,(n=>{n.triggerLifeTime("restored",[e]),Mn(e.compExtraDataMap,n,t++)})),e.compExtraDataMap},Lr=()=>{__webViewSDK__.publish("recycleStatistics",(()=>{const e={compCount:0,customCompCount:0,nativeCompCount:0,rootCustomCompCount:0,rootInternalCompCount:0};try{Or(window.__DOMTree__,e,!0)}catch(e){}const{compCount:t,customCompCount:n,nativeCompCount:r,rootCustomCompCount:o,rootInternalCompCount:i}=e,a=o+i;return{compCount:t,customCompCount:n,nativeCompCount:r,rootCompCount:a,rootCustomCompCount:o,rootCustomCompRatio:a?Math.floor(100*o/a):0,rootInternalCompCount:i}})());const e={};Rr(e),w(F.REQUEST_SAVE,e,void 0,!0)},Br=262144;let Fr=Date.now();const Wr=(e,t)=>{const n=xi.get(e);n&&(n.statesData=t,n.tabRoot&&R(n.tabRoot,1,(e=>{e.triggerLifeTime("saved")})),R(n.root,1,(e=>{e.triggerLifeTime("saved")})),w(F.SAVE_STATE,[],e))},jr=e=>{const t=xi.get(e);if(!t)return;const n=t.nodeId.getAll(),r={},o=[],i=e=>{const i=t.nodeId.getNodeId(e);o.push(i),r[i]=n[i].data};t.tabRoot&&!t.tabDestroyed&&R(t.tabRoot,1,i),R(t.root,1,i);const a=t.compManager.getRestoredData(),s=[t.statesData||{},r,o,a],c=JSON.stringify(s),l=c.length;if(l>Br){const t=[];let n=0;for(;l>n;)t.push(c.substr(n,Br)),n+=Br;const r=++Fr;for(let n=0,o=t.length;n<o;n++)w(F.RESTORE_STATE,[{isSplitData:!0,splitInfo:{id:r,index:n+1,total:o,data:t[n]}}],e)}else w(F.RESTORE_STATE,s,e);if(t.statesData=void 0,!t.tabDestroyed&&t.tabRoot){w(F.COMPONENT_DEF_TAB,t.tabUsedDef,e);const n=t.tabRoot;t.operationFlow.start(),t.operationFlow.push([F.FLOW_CREATE_TAB,n.is,t.nodeId.getNodeId(n)]),t.operationFlow.push([F.FLOW_CREATE_TAB]),t.operationFlow.end()}w(F.COMPONENT_DEF,t.usedDef,e);const d=t.root;t.operationFlow.start(),t.operationFlow.push([F.FLOW_INITIAL_CREATION,d.is,t.nodeId.getNodeId(d),{}]),t.operationFlow.push([F.FLOW_INITIAL_CREATION]),t.operationFlow.end(),t.tabRoot&&R(t.tabRoot,1,(e=>{e.triggerLifeTime("restored")})),R(t.root,1,(e=>{e.triggerLifeTime("restored")}))},Ur=c(),Vr={},Gr={},$r=function(e,t){return e+"/"+t},Hr=function(e,t,n){const r=t.match(/^plugin-private:\/\/(.*?)\//);if(!r)return!1;const o=r[1];if($r(o,"0")!==e)return!1;const i=n.match(/^plugin:\/\/(.*?)\//);if(!i)return!1;const a=i[1];return $r(a,"0")===e&&(Ur.Component._list[n]?(console.error('"'+n+'" has been used as another component or page. Please do not register multiple components or pages with the same alias.'),!1):(Ur.Component._list[n]=Ur.Component._list[t],Vr[n]=t,Gr[t]=n,!0))},Zr=function(e,t){for(const n in t)Hr(e,t[n],n)},Qr={};I(F.PERFORMANCE_DATA,(([e],t,n)=>{xi.get(n).root.triggerLifeTime("performanceData",[e])}));const Yr=c();let zr=0;function qr(e){e&&".html"!==e.slice(5)&&(e+=".html");let t="";return __wxConfigWindow__&&__wxConfigWindow__.initialRenderingCache&&(t=String(__wxConfigWindow__.initialRenderingCache)),t}function Jr(e,t){const r=Date.now(),o={},i={},a=document.head.querySelectorAll("style")||[],s=[];let c=0;Yr.ElementIterator.create(e,"composed-descendants-root-first",Yr.Component).forEach((e=>{e.hasBehavior("wx-base")||(o["./"+e.is+".wxss"]=!0)})),Object.keys(Yr.Component._list).forEach((e=>{i["./"+e+".wxss"]=!0}));for(let e=0;e<a.length;e++){const t=a[e],n=t.getAttribute("wxss:path");null!=n&&(!i[n]||o[n]?s.push("<style>"+t.innerHTML+"</style>"):c+=t.innerHTML.length+15)}const l=s.join(""),d=l+e.$$.innerHTML;n.saveInitialRenderingCache({content:d,appserviceData:t});Date.now();l.length}function Kr(e,t){return"dynamic"!==qr(window.__route__)?(console.error('An initial rendering cache state is ignored, because initialRenderingCache mode is not "dynamic".'),!1):(e?Jr(e,t):n.saveInitialRenderingCache({content:""}),!0)}const Xr=c(),eo=(e,t,n,r)=>{const o=`${Math.random()}-${+new Date}`,i=xi.get(n);if(i)return i.operationFlow.push([F.FLOW_VIEW_INFO,e,t,o]),"function"==typeof r&&(i.viewInfoCbMap[o]=r),o},to=(e,t)=>{const n=xi.get(e);n&&delete n.viewInfoCbMap[t]},no=c();let ro=!1;const oo=[],io=e=>{ro?e():oo.push(e)};const ao=no.dataUtils.deepCopy,so={lazyRegistration:!0,publicProperties:!0},co={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",templateEngine:_r,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1,separateInnerData:!0,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},lo={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",renderingMode:"full",templateEngine:_r,multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1,separateInnerData:!1,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},uo="undefined"!=typeof WeakMap?new WeakMap:{},po={},ho={},fo={},go={},_o={},mo={};let yo=1;const vo=Object.prototype.hasOwnProperty,Ao=(e,t)=>{const n={},r=(t[e+".json"]||{}).usingComponents;for(const t in r)n["wx-"+t]=P(e,String(r[t]));return n},bo=(e,t)=>{for(const n in t){const r=t[n];r.target=null!=r.target?String(r.target):P(e,String(n))}return t},wo=(e,t)=>{const n={},r=(t[e+".json"]||{}).componentGenerics;for(const t in r){const o=r[t];"object"==typeof o?n["wx-"+t]={default:P(e,String(o.default||""))}:null!=o&&(n["wx-"+t]={})}return n},Co=(e,t)=>{const n=t[e+".json"]||{},r={},o=n.componentPlaceholder||{};return Object.keys(o).forEach((e=>{r["wx-"+e]="wx-"+String(o[e])})),r},Io=(e,t,n,r)=>{const o=xi.get(n).nodeId.getNodeById(r,n);o&&t&&no.Element.getMethodCaller(o).setData({[t]:e})},Eo=()=>__wxConfig.isLazyLoad,So=e=>{const t="__plugin__/",n=e.indexOf(t);return-1===n?e:"plugin-private://"+e.slice(n+t.length)},To=e=>{const t=So(e);let n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})["./"+t+".wxml"];Array.isArray(n)&&(n=n[0][n[1]]),window.__wxAppCodeReadyCallback__?window.__wxAppCodeReadyCallback__(n):document.dispatchEvent(new CustomEvent("generateFuncReady",{detail:{generateFunc:n}}))},xo=e=>{const t=So(e);let n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})[t+".wxss"];void 0!==n&&"function"==typeof n||(n=()=>{}),window.__setCssStartTime__=Date.now(),n(),window.__setCssEndTime__=Date.now()},ko="custom-tab-bar/index";const Po=e=>{const t=e.compManager.getPlaceholderReplaceData();e.compManager.finishPlaceholderReplacement();const n=Array.from(t.compNames),r=e.rootCompName;e.compManager.ensureComponents(n,(o=>{const i=[[],[],r,Vr];n.forEach((t=>{No(i,t,ai,r,e)})),e.usedDef[0].push(...i[0]),e.usedDef[1].push(...i[1]),e.operationFlow.sendInIndividualFlow([F.FLOW_COMPONENT_DEF_ADD,o,i]),e.operationFlow.sendInIndividualFlow([F.FLOW_WAIT_COMPONENT,o]),e.operationFlow.start(Date.now()),e.operationFlow.push([F.FLOW_REPLACE_PLACEHOLDER]),t.replacers.forEach((e=>{e()})),e.operationFlow.end()}))},Do=e=>{const t=Fo(e);return t?Bo(t):""},Oo=(e,t,n)=>{if("wx://"===t.slice(0,5))return;const r=ho[t];if(!r)throw new Error('"'+t+'" is not a behavior registered by Behavior()');e[0].unshift(r),n[t]=!0;const o=_o[r.is];if(o)for(let t=0;t<o.length;t++){const r=o[t];n[r]||Oo(e,r,n)}},No=(e,t,n,r,o,i=!1)=>{vo.call(Vr,t)&&(t=Vr[t]);const a=po[t];if(o.compManager.shouldUsePlaceholder(t)&&i)return;if(!a)return void console.error(`Component is not found in path "${t}"${r?` (using by "${r}")`:""}`);const s=mo[t];"wx://"!==t.slice(0,5)&&e[1].unshift(a),n[t]=!0;const c=fo[a.is],l=go[a.is];for(const r in c){if(!vo.call(c,r))continue;const i=c[r];n[i]||No(e,i,n,t,o,!!s[r])}for(const r in l){if(!vo.call(l,r))continue;const i=l[r].default;i&&(n[i]||No(e,i,n,t,o,!!s[r]))}const d=_o[a.is];if(d)for(let t=0;t<d.length;t++){const r=d[t];n[r]||Oo(e,r,n)}},Ro=(e,t)=>{const n={};for(const t in e.properties){const r=e.properties[t];if(null===r)n[t]={type:null};else if(r===Number||r===String||r===Boolean||r===Object||r===Array)n[t]={type:r.name};else if(void 0===r.public||r.public){const e=r.type;let o=null;e!==Number&&e!==String&&e!==Boolean&&e!==Object&&e!==Array||(o=e.name),n[t]={type:o,value:r.value}}}const r=e.options.innerDataExclude;return{is:e.is,using:e.using,generics:e.generics,placeholder:e.placeholder,behaviors:e.behaviors,data:e.data,properties:n,externalClasses:e.externalClasses,template:t,options:{domain:e.options.domain,writeOnly:e.options.writeOnly||void 0,multipleSlots:e.options.multipleSlots||void 0,writeIdToDOM:e.options.writeIdToDOM||void 0,styleIsolation:e.options.styleIsolation||void 0,addGlobalClass:e.options.addGlobalClass||void 0,hasObservers:!!e.observers,innerDataExcludeString:r?r.toString():null,virtualHost:e.options.virtualHost||void 0}}},Mo=function(e){if(e.behaviors){const t=[];for(let n=0;n<e.behaviors.length;n++){const r=String(e.behaviors[n]);if("/"!==r[0]&&"wx://"!==r.slice(0,5))throw new Error("Behaviors should be constructed with Behavior()");t.push(r)}e.behaviors=t,_o[e.is]=t}else e.behaviors=null},Lo=function(e){const t="/"+yo+++"/"+O(),n={};for(const t in e)n[t]="data"===t?ao(e[t]):e[t];return n.is=t,Mo(n),n.options=so,ho[t]=Ro(n),n.definitionFilter=no.Behavior.callDefinitionFilter(n),no.registerBehavior(n),n.is},Bo=e=>no.Component.getComponentOptions(e).domain.split("/",1)[0],Fo=e=>uo.get(e),Wo=(e,t,n)=>{const r=no.Component.getComponentOptions(t).domain,o=no.Component.getMethod(t,"__export__"),i=r===e?no.Element.getMethodCaller(t):null;if(o){const a=r===e?n:null,s=o.call(no.Element.getMethodCaller(t),a);return void 0===s?i:s}return i},jo=(e,t,n)=>{const r=Fo(e),o=no.Component.getComponentOptions(r).domain,i=r.shadowRoot;if(n){return i.querySelectorAll(t).map((t=>Wo(o,t,e)))}const a=i.querySelector(t);return a?Wo(o,a,e):null},Uo=(e,t,n)=>{e!==Go&&Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})};function Vo(){}const Go=Vo.prototype=Object.create(Object.prototype,{is:{get(){return Fo(this).is},set(e){Uo(this,"is",e)}},id:{get(){const e=Fo(this);return no.Component.getComponentOptions(e).writeOnly?"":e.id},set(e){Uo(this,"id",e)}},getPageId:{get:()=>function(){return"pageId:"+Fo(this).__treeManager__.viewId},set(e){Uo(this,"getPageId",e)}},router:{get(){return Fo(this).__pageRouter__},set(e){Uo(this,"router",e)}},pageRouter:{get(){return(e=>{let t=Fo(e);const n=no.Component.getComponentOptions(t).domain;for(;;){const e=t.ownerShadowRoot;if(!e)break;if(!(e instanceof no.ShadowRoot))return null;const r=e.getHostNode();if(!r)return null;if(no.Component.getComponentOptions(r).domain!==n)return null;t=r}return t})(this).__pageRouter__},set(e){Uo(this,"pageRouter",e)}},dataset:{get(){const e=Fo(this);return no.Component.getComponentOptions(e).writeOnly?null:e.dataset},set(e){Uo(this,"dataset",e)}},properties:{get(){return this.__data__},set(e){Uo(this,"properties",e)}},data:{get(){return this.__data__},set(e){Uo(this,"data",e)}},setData:{get:()=>function(e,t){const n=Fo(this),r=n.__treeManager__;return"function"==typeof t&&r.operationFlow.registerSetDataCallback(t,this,n),n.setData(e)},set(e){Uo(this,"setData",e)}},groupSetData:{get:()=>function(e){const t=Fo(this).__treeManager__;t.operationFlow.start(Date.now()),t.operationFlow.push([F.FLOW_GROUP]);let n=null;try{e.call(this)}catch(e){n=e}if(t.operationFlow.push([F.FLOW_GROUP_END]),t.operationFlow.end(),n)throw n},set(e){Uo(this,"setData",e)}},replaceDataOnPath:{get(){return(e,t)=>Fo(this).replaceDataOnPath(e,t)},set(e){Uo(this,"replaceDataOnPath",e)}},mergeDataOnPath:{get(){return(e,t)=>Fo(this).mergeDataOnPath(e,t)},set(e){Uo(this,"mergeDataOnPath",e)}},applyDataUpdates:{get(){return()=>Fo(this).applyDataUpdates()},set(e){Uo(this,"applyDataUpdates",e)}},hasBehavior:{get(){return e=>Fo(this).hasBehavior(e)},set(e){Uo(this,"hasBehavior",e)}},triggerEvent:{get(){return(e,t,n)=>Fo(this).triggerEvent(e,t,n)},set(e){Uo(this,"triggerEvent",e)}},createSelectorQuery:{get(){return()=>t._createSelectorQuery({},Bo(Fo(this))).in(this)},set(e){Uo(this,"createSelectorQuery",e)}},createIntersectionObserver:{get(){return e=>t._createIntersectionObserver(this,e,Bo(Fo(this)))},set(e){Uo(this,"createIntersectionObserver",e)}},createMediaQueryObserver:{get(){return e=>t._createMediaQueryObserver(this,e,Bo(Fo(this)))},set(e){Uo(this,"createMediaQueryObserver",e)}},getOpenerEventChannel:{get(){return()=>this.__eventChannel},set(e){Uo(this,"getOpenerEventChannel",e)}},applyAnimation:{get(){return(e,t,n,r,o)=>{const i=Fo(this);!function(e,t,n,r,o,i,a,s){const c=`${Math.random()}-${+new Date}`;"function"==typeof a&&(t.applyAnimationCbMap[c]=a),t.operationFlow.push([F.FLOW_SET_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof a,reqId:c,nodeId:t.nodeId.getNodeId(e),webviewId:n,selector:r,options:o,type:i?"animeJS":void 0,isLastAnimation:s}])}(i,i.__treeManager__,this.__wxWebviewId__,e,t,n,r,o)}},set(e){Uo(this,"applyAnimation",e)}},clearAnimation:{get(){return(e,t,n)=>{const r=Fo(this);!function(e,t,n,r,o,i){const a=`${Math.random()}-${+new Date}`;"function"==typeof i?t.clearAnimationCbMap[a]=i:"function"==typeof o&&(t.clearAnimationCbMap[a]=o),t.operationFlow.push([F.FLOW_CLEAR_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof t.clearAnimationCbMap[a],reqId:a,nodeId:t.nodeId.getNodeId(e),webviewId:n,selector:r,options:o}])}(r,r.__treeManager__,this.__wxWebviewId__,e,t,n)}},set(e){Uo(this,"clearAnimation",e)}},animate:{get(){return(e,t,n,r,o)=>{if("function"==typeof r)o=r;else if(void 0!==r){const o=Fo(this),i=o.__treeManager__;return void i.operationFlow.push([F.FLOW_SET_NODE_ANIMATION_INFO,{type:"scrollTimeline",nodeId:i.nodeId.getNodeId(o),selector:e,options:t,duration:n,timeline:r}])}const i=mt(t,n);for(let t=0;t<i.length;++t){const n="animeJS"===i[t].type;delete i[t].type,t===i.length-1?this.applyAnimation(e,i[t],n,o,!0):this.applyAnimation(e,i[t],n)}}},set(e){Uo(this,"animate",e)}},selectOwnerComponent:{get(){return e=>{const t=Fo(this);return no.Component.getComponentOptions(t).writeOnly?null:(e=>{const t=Fo(e),n=no.Component.getComponentOptions(t).domain,r=t.ownerShadowRoot;if(!(r instanceof no.ShadowRoot))return null;const o=r.getHostNode();return o?Wo(n,o,e):null})(this)}},set(e){Uo(this,"selectOwnerComponent",e)}},selectComponent:{get(){return e=>{const t=Fo(this);return no.Component.getComponentOptions(t).writeOnly?null:jo(this,e,!1)}},set(e){Uo(this,"selectComponent",e)}},selectAllComponents:{get(){return e=>{const t=Fo(this);return no.Component.getComponentOptions(t).writeOnly?[]:jo(this,e,!0)}},set(e){Uo(this,"selectAllComponents",e)}},getRelationNodes:{get(){return e=>((e,t)=>{const n=Fo(e).getRelationNodes(t);return null===n?null:n.map((e=>no.Element.getMethodCaller(e)))})(this,e)},set(e){Uo(this,"getRelationNodes",e)}},getTabBar:{get:()=>function(){const e=Fo(this).__treeManager__;return e.tabDestroyed||!e.tabRoot?null:no.Element.getMethodCaller(e.tabRoot)},set(e){Uo(this,"getTabBar",e)}},exitState:{get(){return this.__exitState__},set(e){Uo(this,"exitState",e)}},setInitialRenderingCache:{get:()=>function(e){const t=Fo(this).__treeManager__;null===e?di(t):li(t,e)},set(e){Uo(this,"exitState",e)}},setUpdatePerformanceListener:{get:()=>function(e,t){const n=Fo(this),r=n.__treeManager__,o=r.nodeId.getNodeId(n);"function"==typeof t?(n.__updatePerformanceListener__=t,r.operationFlow.push([F.ENABLE_UPDATE_PERFORMANCE_STAT,o,e])):(n.__updatePerformanceListener__=null,r.operationFlow.push([F.DISABLE_UPDATE_PERFORMANCE_STAT,o]))},set(e){Uo(this,"exitState",e)}}}),$o=function(e,t,n){const r=t[n+".json"]||{};void 0!==r.styleIsolation&&(e.options||(e.options={}),e.options.styleIsolation=r.styleIsolation),void 0!==r.pureDataPattern&&(e.options||(e.options={}),e.options.pureDataPattern=new RegExp(r.pureDataPattern))},Ho=function(e,t){e.using=fo[e.is]=Ao(e.is,t),e.generics=go[e.is]=wo(e.is,t),e.placeholder=mo[e.is]=Co(e.is,t),Mo(e);const n=e.is+".wxml",r={path:n,func:Hn[n]||t[n]||null};e.template=r,po[e.is]=Ro(e,n);const o=no.registerElement(e),i=Object.create(Go,{constructor:{value:Vo,writable:!0,configurable:!0}});no.Behavior.prepare(o.behavior);const a=o.behavior.methods;for(const e in a)i[e]=a[e];return Zn(e.is+".js",(t=>{t(),(e=>{const t=po[e];xi.list().forEach((n=>{w(F.UPDATE_COMPONENT_DEF,[t],n.viewId),[n.root,n.tabRoot].forEach((t=>{t&&R(t,1,(t=>{if(t instanceof no.Component&&t.is===e){const e=t===n.root;e&&n.lifetimeListener&&n.lifetimeListener.call(n.root,"onUnload"),Kn(t,n),e&&n.lifetimeListener&&(n.lifetimeListener.call(n.root,"onLoad"),n.lifetimeListener.call(n.root,"onShow"))}}))}))}))})(e.is)})),i},Zo=function(e,n,r,o){const i=o||__wxAppCurrentFile__,a=r||__wxAppCode__,s=a[i+"on"];if(!i||!s)return console.error("Component constructors should be called while initialization. A constructor call has been ignored."),"";const c=i.slice(0,-3);if(s.component&&"simple"===s.component.type)return function(e,t,n,r,o){$o(e,o,t);const i={is:t,using:Ao(t,o),properties:e.properties,externalClasses:e.externalClasses,options:co},a=e.options||{};i.options=co,i.options.multipleSlots=a.multipleSlots||!1,i.options.writeOnly=!0,i.options.writeIdToDOM=!1,i.options.domain="simple://"+(r||"/"),i.options.styleIsolation=a.styleIsolation||"",i.options.addGlobalClass=a.addGlobalClass||!1,i.options.innerDataExclude=null,i.options.virtualHost=!1,po[t]=Ro(i,t+".wxml"),i.is}(e,c,0,n,a),c;$o(e,a,c);const l=no.Behavior.callDefinitionFilter(e),d={is:c,properties:e.properties,data:ao(e.data),methods:e.methods,behaviors:e.behaviors,lifetimes:e.lifetimes,pageLifetimes:e.pageLifetimes,created:e.created,attached:e.attached,ready:e.ready,moved:e.moved,detached:e.detached,saved:e.saved,restored:e.restored,relations:e.relations?bo(i,e.relations):void 0,externalClasses:e.externalClasses,observers:e.observers,definitionFilter:l,options:co,initiator(){this.__customConstructor__=Zo,this.__pageRouter__=t.createRouter(c,this.__treeManager__.viewId);const e=Object.create(p);uo.set(e,this),no.Element.setMethodCaller(this,e),Object.defineProperties(e,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},u=e.options||{};d.options=co,d.options.multipleSlots=u.multipleSlots||!1,d.options.writeOnly=u.writeOnly||!1,d.options.writeIdToDOM=!1,d.options.domain=(u.writeOnly?"wo://":"")+(n||"/"),d.options.styleIsolation=u.styleIsolation||"",d.options.addGlobalClass=u.addGlobalClass||!1,d.options.innerDataExclude=u.pureDataPattern||null,d.options.virtualHost=u.virtualHost||!1;const p=Ho(d,a);return d.is},Qo=function(e,n,r,o){const i=o||__wxAppCurrentFile__;if(!i)return console.error("Page constructors should be called while initialization. A constructor call has been ignored."),"";const a=r||"undefined"!=typeof __wxAppCode__&&__wxAppCode__||{},s=Object.create(null),c={methods:{}};for(const t in e)"data"===t?c.data=e.data:"function"==typeof e[t]?c.methods[t]=e[t]:"methods"===t?s.methods=e.methods:c[t]=e[t];const l=(e=>{if(!e)return!1;if(e instanceof Array){for(let t=0;t<e.length;t++){const n=String(e[t]);if("wx://"!==n.slice(0,5)&&!ho[n])return console.warn('"behaviors" list contains non-behavior items. The whole list is ignored.'),!1}return!0}return!1})(c.behaviors),d=i.slice(0,-3);$o(c,a,d),l&&no.Behavior.callDefinitionFilter(c);for(const e in c)"data"!==e&&"methods"!==e&&(s[e]=c[e]);const u={is:d,behaviors:l?c.behaviors:void 0,data:ao(c.data),methods:c.methods,properties:void 0===e.properties?c.properties:void 0,lifetimes:void 0===e.lifetimes?c.lifetimes:void 0,pageLifetimes:void 0===e.pageLifetimes?c.pageLifetimes:void 0,created:void 0===e.created?c.created:void 0,attached:void 0===e.attached?c.attached:void 0,ready:void 0===e.ready?c.ready:void 0,moved:void 0===e.moved?c.moved:void 0,detached:void 0===e.detached?c.detached:void 0,saved:void 0===e.saved?c.saved:void 0,restored:void 0===e.restored?c.restored:void 0,relations:void 0===e.relations&&c.relations?bo(i,c.relations):void 0,externalClasses:void 0===e.externalClasses?c.externalClasses:void 0,observers:void 0===e.observers?c.observers:void 0,options:co,initiator(){this.__customConstructor__=Qo,this.__pageRouter__=t.createRouter(d,this.__treeManager__.viewId);const e=Object.create(h);uo.set(e,this),no.Element.setMethodCaller(this,e),Object.defineProperties(e,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},p=c.options||{};u.options.multipleSlots=!1,u.options.writeOnly=!1,u.options.writeIdToDOM=!0,u.options.domain=n||"/",u.options.styleIsolation=p.styleIsolation||"shared",u.options.addGlobalClass=!1,u.options.innerDataExclude=p.pureDataPattern||null,u.options.virtualHost=p.virtualHost||!1;const h=Ho(u,a);return h.__freeData__=s,u.is};let Yo=!0;const zo=e=>{(e=>{const t=lr++;dr.push(t);try{e(t)}catch(e){throw dr.pop(),e}dr.pop()})((()=>{qo(e)}))},qo=e=>{an+=1;const t=Date.now(),n=e.operationFlow.iterator,r=n.expectStart(),o=n.nextStepType();if(o===F.FLOW_INITIAL_CREATION)Jo(e,F.FLOW_INITIAL_CREATION),ln(r,t,Date.now(),2);else if(o===F.FLOW_INITIAL_RENDERING_CACHE)Jo(e,F.FLOW_INITIAL_RENDERING_CACHE);else if(o===F.FLOW_CREATE_TAB)Jo(e,F.FLOW_CREATE_TAB),ln(r,t,Date.now(),3);else if(vo.call(Ei,n.nextStepType())){const t=Ei[n.nextStepType()],r=n.nextStep().slice(1);t(e.compManager,r)}else{const o=Date.now(),l=n.nextStep();if(l[0]===F.FLOW_UPDATE){const o=l[1],i=e.nodeId.getNodeById(o),a=l[2];if(i){if(a.length){const e=no.Component.getDataProxy(i);e.setChanges(a),e.doUpdates(void 0,!1),ur(o,(e=>({isMergedUpdate:!1,dataPaths:e.withDataPaths?a.map((e=>e[0])):void 0,pendingStartTimestamp:r,updateStartTimestamp:t,updateEndTimestamp:Date.now()})))}}else l[1],n.skipToEnd()}else if(l[0]===F.FLOW_GROUP){const e=n.nextStep();if(e[0]!==F.FLOW_GROUP_END)throw new Error(`Framework inner error (expect FLOW_GROUP_END but get ${j(e[0])})`)}else if(l[0]===F.FLOW_REPLACE_PLACEHOLDER){const t=e.compManager.getPlaceholderReplaceData();e.compManager.finishPlaceholderReplacement(),t.replacers.forEach((e=>{e()}))}else if(l[0]===F.FLOW_HOT_UPDATE){const t=e.nodeId.getNodeById(l[1]);t?t.__templateInstance._resetShadowChildren(t,t.data,e):n.skipToEnd()}else{if(l[0]!==F.FLOW_HOT_UPDATE_RESET)throw new Error(`Framework inner error (expect an update event but get ${j(l[0])})`);{const t=e.nodeId.getNodeById(l[1]);Kn(t,e)}}i="reRenderTime",a=o,s=Date.now(),Reporter.speedReport({key:i,timeMark:{startTime:a,endTime:s},force:"reRenderTime"!==i,data:c}),Yo&&5===((e,t,n)=>(dn+=an,un+=1,pn+=n-t,hn+=sn,fn+=cn,gn+=n-e,an=0,sn=0,cn=0,un))(r,t,Date.now())&&(Yo=!1,(e=>{const t=Math.ceil(pn/(un||1)),n=Math.ceil(fn/(hn||1)),r=Math.ceil(gn/(un||1)),o=[dn,un,t,hn,n,1,r,e].map(encodeURIComponent).join(",");void 0!==Reporter&&Reporter.reportKeyValue({key:"SetDataPerf",value:o,force:!0})})(1))}var i,a,s,c;n.expectEnd()},Jo=(e,t)=>{const n=t===F.FLOW_CREATE_TAB,r=t===F.FLOW_INITIAL_RENDERING_CACHE,o=e.operationFlow.iterator;let i=o.nextStep();const a=i[1],s=i[2];let c=null;if(n)e.tabNodeId=s,e.tabRoot=c=window.__TAB_BAR__=no.createElement("tab-bar",no.Component._list[a]);else if(r){if(!a)return void Kr(null);c=no.createElement("initial-rendering-cache",no.Component._list[a])}else{const t=i[3]||{};e.rootNodeId=s,e.root=c=window.__DOMTree__=no.Component.createWithGenerics("body",no.Component._list[a],t,e)}if(e.nodeId.allocNodeId(c,s),c.setAttribute("is",a),tn.restoring&&!n){const t=tn.idDataMap[e.nodeId.getNodeId(c)];no.Component.replaceWholeData(c,t,null),Mr(tn.restoring),tn.restoring=null,tn.idDataMap=null}if(i=o.nextStep(),i[0]!==t)throw new Error(`Framework inner error (expect ${j(t)} end but get ${j(i[0])})`);if(e.nodeId.addNode(c),n){const t=no.createElement("wx-tab-bar-wrapper",no.Component._list["wx://tab-bar-wrapper"]);t.appendChild(c),document.documentElement.insertBefore(t.$$,document.body),no.Element.pretendAttached(t),e.tabDestroyed&&t.removeChild(c)}else if(r){const t=document.createElement("wx-initial-rendering-cache-wrapper");if(t.setAttribute("style","height: 0; overflow: hidden"),t.appendChild(c.$$),document.documentElement.insertBefore(t,document.body),i=o.nextStep(),i[0]!==F.FLOW_INITIAL_RENDERING_CACHE)throw new Error("Framework inner error (expect initial rendering end but get another)");R(c,1,(e=>{e.triggerLifeTime("cacheAttached")})),Kr(c,i[1]),e.nodeId.removeNode(c),document.documentElement.removeChild(t)}else document.body=c.$$,R(c,1,(e=>{e.triggerLifeTime("cacheAttached")})),function(e){zr&&Date.now(),"static"===qr(window.__route__)&&Jr(e)}(c),no.Element.pretendAttached(c),l="initialRenderingDone",d=Date.now(),Qr[l]=d,setTimeout((()=>{w(F.PERFORMANCE_DATA,[Qr],void 0,!0)}),0);var l,d},Ko=()=>{qt.setStartOperation(zo),xi.instance=xi.create(0)},Xo={String:String,Number:Number,Boolean:Boolean,Object:Object,Array:Array,null:null},ei=(e,t,n)=>{for(const t in e.properties)e.properties[t].type=Xo[e.properties[t].type];let r="";t||(r=n.compManager.getComponentClassPrefix(e.is));const o=e.options,i=!(!o.writeIdToDOM&&!t);e.options=lo,e.options.multipleSlots=o.multipleSlots||!1,e.options.writeOnly=o.writeOnly||!1,e.options.writeIdToDOM=i,e.options.domain=o.domain,e.options.randomizeTagName=!1,e.options.innerDataExclude=(e=>{if(!e)return null;const t=e.lastIndexOf("/"),n=e.slice(1,t),r=e.slice(t+1);return new RegExp(n,r)})(o.innerDataExcludeString),e.options.virtualHost=o.virtualHost;let a=!1;if(o.styleIsolation){let t=o.styleIsolation;"page-"===t.slice(0,5)&&(a=!0,t=t.slice(5)),"isolated"===t?(r=n.compManager.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1):"strong-isolated"===t?(r=n.compManager.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1,e.options.randomizeTagName=!0):"apply-shared"===t?(r=n.compManager.getComponentClassPrefix(e.is),e.options.addGlobalClass=!0):"shared"===t&&"/"===o.domain?(r="",e.options.addGlobalClass=!1):a=!1}else e.options.addGlobalClass=o.addGlobalClass||!1;e.options.classPrefix=r,o.hasObservers&&(e.observers={"**":function(){}}),window.__customComponentMode__="undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template];let s=window.__generateFunc__;return"undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template]?s=__wxAppCode__[e.template]:e.template,e.template={path:e.is+".wxml",func:s},no.registerElement(e),{disableAppWxss:a,classPrefix:r}},ti=(e,t)=>{t||(window.__forceSaveStates__=Lr,"function"==typeof n.onWebViewWillManuallyTerminate&&n.onWebViewWillManuallyTerminate(Lr));const[r,o,i,a]=e,s=xi.instance;t||(s.rootCompName=i);for(let e=0;e<r.length;e++){const t=r[e];t.options.hasObservers&&(t.observers={"**":function(){}}),t.options=so,no.registerBehavior(t)}for(let e=0;e<o.length;e++){const n=o[e],r=n.is===i&&!t,{disableAppWxss:a,classPrefix:c}=ei(n,r,s);a&&n.is===i&&!t&&__webviewEngine__.disableStyleElement("app.wxss");const l=n.is+".wxss",d="undefined"==typeof __wxAppCode__?null:__wxAppCode__[l];d&&((n.is!==i||t)&&d(c&&c+"--",{allowIllegalSelector:!0}),Zn(l,(e=>{e?e(c&&c+"--",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./"+l,""),document.dispatchEvent(new CustomEvent("pageReRender",{}))})))}Zn("app.wxss",(e=>{e?e("",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./app.wxss",""),document.dispatchEvent(new CustomEvent("pageReRender",{}))}));for(const e in a)vo.call(no.Component._list,a[e])&&(no.Component._list[e]=no.Component._list[a[e]])};I(F.LOAD_COMPONENT_DEF,(function(e){if(__wxConfig.isFirstPage||!Eo())return;const t=e[0],n=xi.instance.compManager;n.setInitialSubPackage(t),n.injectComponentsRecursively([t],(()=>{hi.on("inject",(()=>{xo(t),To(t)}))}),!0)}),0);let ni=!1,ri=[],oi=[];I(F.COMPONENT_DEF,(function(e){ni?ti(e,!1):ri.push(e),xi.instance.compManager.setInitialSubPackage(e[2])}),0),I(F.COMPONENT_DEF_TAB,(function(e){ni||ro?hi.on("inject",(()=>{ti(e,!0)})):oi.push(e)}),0);const ii=()=>{ni=!0,pi(),ri.forEach((e=>{ti(e,!1)})),ri=[],oi.forEach((e=>{hi.on("inject",(()=>{ti(e,!0)}))})),oi=[]};let ai;const si=(e,t,n)=>{const r=[[],[],n=br(n),Vr];ai=Object.create(null),No(r,n,ai,"",t);const o=(e=>{const t=Gr[e];if(!t)return{};const n=t.match(/^plugin:\/\/(wx[0-9a-f]{16})\/(.+)$/);if(!n)return{};const r=n[1],o=n[2],i=N(__wxConfig.plugins).find((e=>e.provider===r));if(!i)return{};if(!i.genericsImplementation)return{};const a=i.genericsImplementation[o]||{},s={},c=Cr(r);return Object.keys(a).forEach((e=>{s["wx-"+e]=P(c,String(a[e]))})),s})(n);N(o).forEach((e=>{No(r,e,ai,"",t)})),w(F.COMPONENT_DEF,r,e),(e=>{q&&w(F.BANNING_MAP,[q],e)})(e),t.rootCompName=n,t.rootNodeId=O(),t.operationFlow.start(),t.operationFlow.push([F.FLOW_INITIAL_CREATION,n,t.rootNodeId,o]);const i=no.Component.createWithGenerics("body",no.Component._list[n],o,t);on(i,t),t.root=i,t.usedDef=r;return no.Element.getMethodCaller(i).__wxExparserNodeId__=t.nodeId.allocNodeId(i,t.rootNodeId),t.operationFlow.push([F.FLOW_INITIAL_CREATION]),t.nodeId.addNode(i),i};I(F.UPDATE_COMPONENT_DEF,(function(e){const[t]=e,n=xi.instance;no.Component._list[t.is]&&ei(t,n.rootCompName===t.is,n)}));const ci=(e,n)=>{n.listenerInited||(n.listenerInited=!0,((e,n)=>{I(F.WX_EVENT,(function(r){const o=r[2],a=r[1],s=n.nodeId.getNodeById(r[0]);if(!s)return;const c=no.Element.getMethodCaller(s),l=o._userTap;if(o._requireActive&&!i.isFramesetMode()){const t=i.getCurrentPagesByDomain("");if(t[t.length-1].__wxWebviewId__!==e)return;delete o._requireActive}o._relatedInfo&&(i.DisplayReporter.setEventRelatedInfo(o._relatedInfo),delete o._relatedInfo),"function"!=typeof c[a]?console.warn('Component "'+s.is+'" does not have a method "'+a+'" to handle event "'+o.type+'".'):l?Sn((()=>{t.setWxInterfaceIsInvokeInTap(o.type),no.safeCallback("Event Handler",c[a],c,[o],s),t.unsetWxInterfaceIsInvokeInTap()})):no.safeCallback("Event Handler",c[a],c,[o],s)}),e),I(F.MODEL_VALUE_CHANGE,((e,t,n)=>{const{data:r,modelValueName:o,nodeId:i}=e[0];Io(r,o,n,i)}),e)})(e,n),I(F.REQUEST_SAVE,(([t])=>{Wr(e,t)}),e),I(F.CALL_METHOD_FROM_WXS,(e=>{Nn(e)}),e),function(e,t){I(F.ANIMATION_TRANSITION_END,(e=>{if(e&&e[0]&&e[0].reqId){const n=t.applyAnimationCbMap[e[0].reqId];"function"==typeof n&&(delete t.applyAnimationCbMap[e[0].reqId],Xr.safeCallback("Animation",n,null,[]));const r=JSON.parse(e[0].args);t.operationFlow.push([F.FLOW_SET_NODE_NEXT_ANIMATION_INFO,r])}}),e),I(F.CLEAR_ANIMATION_COMPLETE,(e=>{if(e&&e[0]&&e[0].reqId){const n=t.clearAnimationCbMap[e[0].reqId];"function"==typeof n&&(delete t.clearAnimationCbMap[e[0].reqId],Xr.safeCallback("Clear Animation",n,null,[]))}}),e)}(e,n),function(e,t){I(F.RESPONSE_VIEW_INFO,(([e,n])=>{if(n){const r=t.viewInfoCbMap[n];r&&r(e)}}),e)}(e,n),((e,t)=>{I(F.UPDATE_PERFORMANCE_STAT,(function(e){const[n,r]=e,o=t.nodeId.getNodeById(n);if(o&&o.__updatePerformanceListener__){const e=sr.Element.getMethodCaller(o);sr.safeCallback("Update Performance Listener",o.__updatePerformanceListener__,e,[r],o)}}),e)})(e,n))},li=(e,t)=>{const n=br(e.rootCompName),r=O();e.operationFlow.start(),e.operationFlow.push([F.FLOW_INITIAL_RENDERING_CACHE,n,r]);const o=no.createElement("initial-rendering-cache",no.Component._list[n],e);return no.Element.getMethodCaller(o).__wxExparserNodeId__=e.nodeId.allocNodeId(o,r),e.operationFlow.push([F.FLOW_INITIAL_RENDERING_CACHE]),e.nodeId.addNode(o),o.setData(t),e.operationFlow.push([F.FLOW_INITIAL_RENDERING_CACHE,t]),e.operationFlow.end(),e.nodeId.removeNode(o),o},di=e=>{e.operationFlow.start(),e.operationFlow.push([F.FLOW_INITIAL_RENDERING_CACHE,"",null]),e.operationFlow.end()};let ui=!1;const pi=()=>{ui||(ui=!0,w(F.REQUEST_TAB,[]),xi.instance.compManager.setInitialSubPackage(ko))},hi=M(["inject"]);const fi=(e,t,n)=>{let r=!0;const o=__wxConfig.tabBar&&__wxConfig.tabBar.list;if(o instanceof Array){o.map((e=>e&&e.pagePath)).indexOf(t+".html")>=0&&(r=!1)}r&&(e.tabDestroyed=!0,w(F.DESTROY_TAB,[],n))};const gi=(e,t)=>{if(!(()=>{let e=!1;return __wxConfig.tabBar&&!0===__wxConfig.tabBar.custom&&(e=!0),mi(ko)||(e=!1),__wxConfig.appLaunchInfo&&"singlePage"===__wxConfig.appLaunchInfo.mode&&(e=!1),e})())return;const n=xi.get(e)||xi.create(e);ci(e,n),n.tabRoot||n.tabDestroyed||(n.compManager.injectComponentsRecursively([ko]),((e,t,n)=>{const r=[[],[],n=br(n),{}];No(r,n,Object.create(null),"",t),w(F.COMPONENT_DEF_TAB,r,e),t.tabCompName=n,t.tabNodeId=O(),t.operationFlow.start(),t.operationFlow.push([F.FLOW_CREATE_TAB,n,t.tabNodeId]);const o=no.createElement("tab-bar",no.Component._list[n],t);t.tabRoot=o,t.tabUsedDef=r,no.Element.getMethodCaller(o).__wxExparserNodeId__=t.nodeId.allocNodeId(o,t.tabNodeId),t.operationFlow.push([F.FLOW_CREATE_TAB]),t.nodeId.addNode(o)})(e,n,ko),no.Element.pretendAttached(n.tabRoot),n.operationFlow.end(),t&&w(F.FLUSH_BLOCKED,[],e),n.rootCompName&&fi(n,n.rootCompName,e))};let _i=[];__wxConfig.onReady((()=>{_i.forEach((e=>{gi(e,!0)})),_i=null})),I(F.REQUEST_TAB,((e,t,n)=>{null!==_i?_i.push(n):gi(n,!0)}),"$GLOBAL");const mi=e=>(e=br(e),vo.call(Vr,e)&&(e=Vr[e]),po[e]),yi=(e,t,n)=>{const r=xi.get(e)||xi.create(e);r.lifetimeListener=n,r.operationFlow.unblock();try{gi(e,!1)}catch(e){Reporter.thirdErrorReport({error:e})}r.compManager.setInitialSubPackage(t),fi(r,t,e),ci(e,r),t=br(t);const o=(__wxConfig.subPackages||[]).filter((e=>!!e.allExtendedComponents));w(F.LOAD_COMPONENT_DEF,[t,o],e),r.compManager.injectComponentsRecursively([t],null,!0),mi(t)||(t="wx://not-found");return si(e,r,t)},vi=(e,t)=>{const n=xi.get(e);if(!n)return;const r=n.root;let o=!1;const i={};Object.keys(t).forEach((e=>{no.Component.hasProperty(r,e)&&(i[e]=t[e],o=!0)})),o&&n.root.setData(i),Qn()&&(n.initialRootData=t),no.Element.pretendAttached(r),n.root.__treeManager__.operationFlow.end()},Ai=e=>{const t=xi.get(e);t&&(no.Element.pretendDetached(t.root),xi.destroy(e),(e=>{delete d[e]})(e))},bi=Object.prototype.hasOwnProperty,wi=()=>"devtools"===__wxConfig.platform||"devtool"===__wxConfig.serviceRuntime;let Ci=!0;class Ii{constructor(e,t){this.__viewId=e,this.__treeManager=t,this.__loadedSubPackage=new Set,this.__injectedSubPackage=new Set,this.__log=e=>{wxNativeConsole.info(`[CompMgr] [data] [${this.__viewId}] ${e}`)},this.__ensureComponentNotifier={},this.__placeholderReplacement=null,this.__injectedComponents=new Set([]),this.__classPrefixMap=new Map,this.__usedClassPrefix=new Set,this.__restoreInjectNotifier=null}getRestoredData(){return[Array.from(this.__loadedSubPackage),Array.from(this.__injectedSubPackage),Object.fromEntries(this.__classPrefixMap),Array.from(this.__injectedComponents),this.__treeManager.rootCompName]}getRestoreInjectNotifier(){return this.__restoreInjectNotifier||(this.__restoreInjectNotifier=M(["inject"])),this.__restoreInjectNotifier}restore(e){const[t,n,r,o,i]=e,a=()=>{xo(i),To(i),this.getRestoreInjectNotifier().notify("inject")};this.setSubPackageLoaded(t),this.batchInjectSubPackages(n,(()=>{Eo()?this.batchInjectComponents(o,a):a()})),this.__usedClassPrefix=new Set(Object.values(r)),this.__classPrefixMap=new Map(Object.entries(r))}onRestoreInjectDone(e){this.getRestoreInjectNotifier().on("inject",e)}recurseUsingComponents(e){if(!Eo())return e;const t=__wxAppCode__,n="undefined"!=typeof __WXML_DEP__&&__WXML_DEP__||{},r=new Set,o=e=>{if(r.has(e))return;r.add(e);const i=Ao(e,t),a=wo(e,t),s=Co(e,t);for(const e in i)bi.call(s,e)?bi.call(i,s[e])&&o(i[s[e]]):o(i[e]);for(const e in a){const t=a[e];"string"==typeof t.default&&o(t.default)}(n["./"+e+".wxml"]||[]).forEach((e=>{const n=e.substr(2,e.length-7);bi.call(t,n+".json")&&o(n)}))};e.forEach((e=>o(e)));const i=Array.from(r);return this.__log(`recurseUsingComponents(${JSON.stringify(e)}) => ${JSON.stringify(i)}`),i}batchLoadSubPackages(e,n){this.__log("loadSubPackages: "+e.join(", ")),Promise.all(e.map((e=>new Promise((n=>{((e,n)=>{const r=Date.now();t.loadSubpackage({name:e,success(){const e=Date.now();n(e-r)},complete(t){wxNativeConsole.info("[VD] loadSubpackage "+e+": ",t)}})})(e,n)}))))).then((()=>{this.setSubPackageLoaded(e),this.__treeManager.operationFlow.sendInIndividualFlow([F.FLOW_SET_SUBPACKAGE_LOADED,e]),n()}))}setSubPackageLoaded(e){this.__log("setSubPackageLoaded: "+e.join(", ")),e.forEach((e=>{this.__loadedSubPackage.add(e)}))}batchInjectSubPackages(e,t){this.__log("injectSubPackages: "+e.join(", "));const n=e.filter((e=>!this.__injectedSubPackage.has(e))).map((e=>"__APP__"===e||"/"===e.slice(-1)?e:e+"/"));if(wi())S(n),this.setSubPackageInjected(n);else{const e=[];n.forEach((t=>{e.push(...Pr(t,(e=>{this.__log(`getEntryFile ${t}: ${e}`)})))})),E(e),this.setSubPackageInjected(n)}}batchInjectComponents(e,t){if(!Eo())return-1;const n=e.map((e=>wr(e))).filter((e=>!this.__injectedComponents.has(e)));this.__log("injectComponents: "+n.join(", "));{const e=(()=>wi()?T(n):E(n.map((e=>`${e}.appservice.js`))))();return n.forEach((e=>{this.__injectedComponents.add(e)})),e}}setSubPackageInjected(e){this.__log("setSubPackageInjected: "+e.join(", ")),e.forEach((e=>{this.__injectedSubPackage.add(e)}))}setInitialSubPackage(e){const t=[Sr(e)];Tr(e)||t.push("__APP__"),this.setSubPackageLoaded(t),this.setSubPackageInjected(t)}shouldUsePlaceholder(e){const t=Sr(e);let n=this.__loadedSubPackage.has(t);return Eo()&&(n=n&&this.__injectedComponents.has(e)),!n}doLazyLoadReport(e,t){const n=_n(),r=Ci;Ci=!1;const o=Object.keys(__wxAppCode__).filter((e=>e.endsWith(".json"))).length;n.set("isFirstPage",r),n.set("totalComps",o),n.set("loadedComps",e),n.set("loadTime",t)}injectComponentsRecursively(e,t,n=!1){if(!Eo())return void 0;const r=this.recurseUsingComponents(e),o=this.batchInjectComponents(r,(e=>{0}));n&&this.doLazyLoadReport(r.length,o)}ensureComponents(e,t){const n=O();let r=e.map((e=>Sr(e)));var o;return o=r,r=Array.from(new Set(o)),r.some((e=>!Tr(e)))&&r.unshift("__APP__"),r=r.filter((e=>!this.__loadedSubPackage.has(e))),this.batchLoadSubPackages(r,(()=>{this.__treeManager.operationFlow.sendInIndividualFlow([F.FLOW_INJECT_SUBPACKAGE,n,r]),Eo()&&this.__treeManager.operationFlow.sendInIndividualFlow([F.FLOW_INJECT_COMPONENT,n,e]),this.batchInjectSubPackages(r),this.injectComponentsRecursively(e),t(n)})),n}getEnsureComponentsNotifier(e){if(!this.__ensureComponentNotifier[e]){const t=["inject","def"];Eo()&&t.push("inject-common"),this.__ensureComponentNotifier[e]=M(t)}return this.__ensureComponentNotifier[e]}destructEnsureComponentsNotifier(e){this.__ensureComponentNotifier[e]&&delete this.__ensureComponentNotifier[e]}injectSubPackageOnReady(e,t){this.batchInjectSubPackages(t,(()=>{const t=Eo()?"inject-common":"inject";this.getEnsureComponentsNotifier(e).notify(t)}))}injectComponentsOnReady(e,t){Eo()&&this.getEnsureComponentsNotifier(e).on("inject-common",(()=>{this.injectComponentsRecursively(t,(()=>{this.getEnsureComponentsNotifier(e).notify("inject")}))}))}appendComponentDef(e,t){this.getEnsureComponentsNotifier(e).on("inject",(()=>{ti(t,!1),this.getEnsureComponentsNotifier(e).notify("def")}))}waitComponentEnsuring(e,t){this.getEnsureComponentsNotifier(e).on("def",(()=>{t((()=>{this.destructEnsureComponentsNotifier(e)}))}))}arrangePlaceholderReplace(e,t){null===this.__placeholderReplacement?this.__placeholderReplacement={compNames:new Set,replacers:[]}:clearTimeout(this.__placeholderReplacement.timer),this.__placeholderReplacement.compNames.add(e),this.__placeholderReplacement.replacers.push(t),this.__placeholderReplacement.timer=setTimeout((()=>{Po(this.__treeManager)}),50)}getPlaceholderReplaceData(){return this.__placeholderReplacement}finishPlaceholderReplacement(){this.__placeholderReplacement=null}getComponentClassPrefix(e){if(this.__classPrefixMap.has(e))return this.__classPrefixMap.get(e);const t=e.split(/[^a-z0-9]+/i);let n="",r=0,o=0;do{r<t.length?r+=1:o+=1,n=t.slice(-r).join("-"),o>0&&(n+="-"+o),Number(n[0])>=0&&(n="x-"+n)}while(this.__usedClassPrefix.has(n));return this.__classPrefixMap.set(e,n),this.__usedClassPrefix.add(n),n}}const Ei={[F.FLOW_COMPONENT_DEF_ADD](e,t){const n=t[0],r=t[1];e.appendComponentDef(n,r)},[F.FLOW_INJECT_SUBPACKAGE](e,t){const n=t[0],r=t[1];e.injectSubPackageOnReady(n,r)},[F.FLOW_INJECT_COMPONENT](e,t){const n=t[0],r=t[1];e.injectComponentsOnReady(n,r)},[F.FLOW_SET_SUBPACKAGE_LOADED](e,t){const n=t[0];e.setSubPackageLoaded(n)},[F.FLOW_WAIT_COMPONENT](e,t){const n=t[0];e.__treeManager.operationFlow.block(),e.waitComponentEnsuring(n,(t=>{e.__treeManager.operationFlow.unblock(),t()}))}},Si={};class Ti{constructor(e){this.listenerInited=!1,this.root=null,this.tabRoot=null,this.tabDestroyed=!1,this.usedDef=null,this.tabUsedDef=null,this.statesData=null,this.operationFlow=new qt(e,this),this.nodeId=new B,this.compManager=new Ii(e,this),this.rootNodeId="",this.tabNodeId="",this.rootCompName="",this.tabCompName="",this.applyAnimationCbMap={},this.clearAnimationCbMap={},this.viewInfoCbMap={},this.initialRootData=null,this.lifetimeListener=null}static create(e){const t=new Ti(e);return t.viewId=e,Si[e]=t,t}static destroy(e){delete Si[e]}static get(e){return Si[e]}static listViewId(){const e=[];for(const t in Si)e.push(Si[t].viewId);return e}static list(){const e=[];for(const t in Si)e.push(Si[t]);return e}}const xi=Ti,ki=function(e,t){{const n=xi.get(t);return n?n.nodeId.getNodeById(e):null}},Pi=function(e,t){return xi.get(t).nodeId.getNodeId(e)},Di=function(e){{const t=xi.get(e);return t?t.rootNodeId:""}},Oi=function(){$n=!0},Ni=function(e,t){const n=Gn[e];if(n)return Hn[e]=t,n(t)},Ri=c(),Mi=e=>e;Ri.addGlobalErrorListener(((e,t)=>{const n=t.element&&t.element instanceof Vo?t.element:null,r=n?Do(n):"";return Reporter.thirdErrorReport({source:r,error:e,extend:t.message.replace(/^\[exparser\] \[(error|warning)\] /i,"")}),!1})),Ri.addGlobalWarningListener((e=>{console.warn(e.replace(/^\[exparser\] \[(error|warning)\] /i,""))})),Ri.globalOptions.createFakeDomElement=!1,Ri.globalOptions.inDocument=!1,Ri.globalOptions.documentBackend="none",Ri.updateDefaultComponent(),l.registerBehavior({is:"wx://form-field",properties:{name:{type:String,public:!0},value:{type:null,public:!0}}}),l.registerBehavior({is:"wx://form-field-group"}),l.registerBehavior({is:"wx://form-field-button"}),l.registerBehavior({is:"wx://style-filter"}),l.registerBehavior({is:"wx://request-filter"}),l.registerBehavior({is:"wx://request-sender"}),l.registerBehavior({is:"wx://component-export",definitionFilter(e){"function"==typeof e.export&&("object"==typeof e.methods?e.methods.__export__=e.export:e.methods={__export__:e.export})}}),(()=>{const e={domain:"//",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1};["not-found","functional-page","open-api-redirecting-page"].forEach((t=>{Zo({options:e,properties:{}},"//",{[`wx://${t}.json`]:{usingComponents:{}}},`wx://${t}.js`)}))})(),o=a})(),(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};e.r(a),e.d(a,{App:()=>Je,Behavior:()=>Dn,Component:()=>Pn,DisplayReporter:()=>q,Page:()=>kn,__createPluginGlobal:()=>xn,convertComponentAliasToRoute:()=>kt,forcePageReload:()=>mn,getApp:()=>Ke,getCurrentPageWithAdditionalInfo:()=>zt,getCurrentPages:()=>Xt,getCurrentPagesByDomain:()=>Kt,getCurrentRoute:()=>Gt,getPageByWebviewId:()=>qt,getPageMetaByWebviewId:()=>Jt,hasPageRoute:()=>rn,isFramesetMode:()=>Vt,setPrivateExtraData:()=>et,showShareTimelineMenuIfNeeded:()=>bn});const s=BabelRuntimeHelpers.objectSpread2;var c=e.n(s);const l=Object.prototype.toString;function d(e,t){const n=p(e);return null!==n?n:u(e,t)}function u(e,t){if("function"!=typeof t)throw new TypeError("customizer is must be a Function");if("function"==typeof e)return e;const n=l.call(e);if("[object Array]"===n)return[];if("[object Object]"===n&&e.constructor===Object)return{};if("[object Date]"===n)return new Date(e.getTime());if("[object RegExp]"===n){const t=String(e),n=t.lastIndexOf("/");return new RegExp(t.slice(1,n),t.slice(n+1))}const r=t(e);return void 0!==r?r:null}function p(e){const t=typeof e;return null!==e&&"object"!==t&&"function"!==t?e:null}const h=Object.prototype.toString,f="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){const t=typeof e;if(null===e||"function"!==t&&"object"!==t)throw new TypeError("obj must be an Object");let n,r=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(n);return r},g="function"==typeof Symbol?function(e){return Object.getOwnPropertySymbols(e)}:function(){return[]};function _(e,t){if("[object Array]"!==h.call(e))throw new TypeError("array must be an Array");let n,r,o;for(n=0,r=e.length;n<r;++n)if(o=e[n],o===t||o!=o&&t!=t)return n;return-1}function m(e){}function v(e,t,n,r,o){if(null===e)return null;const i=p(e);if(null!==i)return i;const a=f(e).concat(g(e));let s,c,l,u,h,m,y,A;for(s=0,c=a.length;s<c;++s)l=a[s],u=e[l],h=_(r,u),m=void 0,y=void 0,A=void 0,-1===h?(m=d(u,t),y=null!==m?m:u,null!==u&&/^(?:function|object)$/.test(typeof u)&&(r.push(u),o.push(y))):A=o[h],n[l]=A||v(u,t,y,r,o);return n}const A=function(e,t=m){if(null===e)return null;const n=p(e);if(null!==n)return n;const r=u(e,t),o=null!==r?r:e;return v(e,t,o,[e],[o])},b=(e,t)=>{const n=Object.keys(t);let r=n.length;for(;r--;)e[n[r]]=t[n[r]];return e},w=()=>{},C=e=>Object.prototype.toString.call(e).split(" ")[1].split("]")[0],I=e=>"Promise"===C(e),E=(Object.prototype.hasOwnProperty,Object.prototype.toString),S=e=>"[object Object]"===E.call(e),T=(e,t)=>{console.group(`${new Date} ${e}`),console.error(t),console.groupEnd()},x=(e,t)=>{console.group(`${new Date} ${e}`),console.warn(t),console.groupEnd()},k=e=>{__wxConfig&&__wxConfig.debug&&console.info(e)},P=(e,t)=>{if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceEngineKnownError"===e.type)throw e;Reporter.errorReport({key:"jsEnginScriptError",error:e,extend:t})}},D=(e,t)=>function(...n){try{return e.apply(e,n)}catch(e){return P(e,t),()=>{}}};class O extends Error{constructor(e){super(`APP-SERVICE-Engine:${e}`),this.type="AppServiceEngineKnownError"}}function N(...e){let t;const n=e[0];Reporter.__route__=this.__route__,Reporter.__method__=n,e=e.slice(1);try{const r=Date.now();t=this[n](...e);const o=Date.now()-r;o>1e3&&Reporter.slowReport({key:"pageInvoke",cost:o,extend:`at ${this.__route__} page ${n} function`})}catch(e){const t=o.getOwnerPluginAppId(this);Reporter.thirdErrorReport({source:t,error:e,extend:`at ${this.__route__} page ${n} function`})}return Reporter.__route__=Reporter.__method__="",t}const R=Object.assign,M=()=>!!("undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("appservice")>-1),L=e=>{if("string"!=typeof e)return e;let t=e.split("?")[0];const n=e.split("?")[1];return t+=".html",void 0!==n?`${t}?${n}`:t};let B=null;const F=()=>(B||(B=t.getSystemInfoSync()),B),W={};let j,U=!0,V=null,G={},$={},H=null,Z=null,Q=null,Y="";function z(e={}){let t=e.clickTimestamp;t&&(t=parseInt(t,10),t=t<1e12?1e3*t:t,t&&t>0&&(V=t),U=e.isLaunch)}class q{constructor(e,t){this.showOptions={},this.hideOptions={},this.route=e,this.pageType=t||0,this.query={},this.deferred=[],this.showTimeStamp=null,this.pageReadyTime=null,this.showReferpagepath="",this.isentrance=0,this.isInitialLoading=!0,this.orientationChangeCount=0,this.startCostTime=null,this.startType=null}static setOnLaunch(e={}){z(e),G=Object.assign(G,e),j=F(),G.publicLibVersion=j.SDKVersion,G.hostAppId=__wxConfig.host&&__wxConfig.host.appId||"",q._assignForClientOnShow(G,e)}static setOnAppShow(e={}){z(e),G=Object.assign(G,e),q._assignForClientOnShow(G,e)}static setOnAppHide(e={}){$=Object.assign($,e)}static setEventRelatedInfo(e){H=e}static _assignForClientOnShow(e,t){e.shortLink=t.shortLink||"",e.scene_note=t.scene_note||t.sceneNote||"",e.referpagepath=t.referpagepath||"",e.usedstate=t.usedstate||t.usedState,e.prescene=t.prescene,e.prescene_note=t.prescene_note||t.presceneNote||"",e.clickTimestamp=Date.now()}checkShowOptions(){const e=G,t=this.showOptions;t.scene=e.scene||0,t.scene_note=e.scene_note,t.sessionid=e.sessionid||e.sessionId,t.usedstate=e.usedstate,t.referpagepath=e.referpagepath,t.clickTimestamp=e.clickTimestamp,t.prescene=e.prescene,t.prescene_note=e.prescene_note,t.apptype=Reporter.getAppType(),t.publicLibVersion=e.publicLibVersion,t.hostAppId=e.hostAppId||"",t.shortLink=e.shortLink||"";const n=this.query,r=[];n&&"object"==typeof n&&Object.keys(n).forEach((e=>{r.push(`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)})),t.query=r.join("&")}checkHideOptions(){const e=$,t=this.hideOptions;t.targetAction=e.targetAction||0,t.targetPagePath=e.targetPagePath||"",void 0!==e.usedstate&&(t.usedstate=e.usedstate),void 0!==e.usedState&&(t.usedstate=e.usedState)}static _getNetworkType(e){t.getNetworkType({success:t=>{let n=t.networkType;"none"===n&&(n="offline"),e(n)},fail:()=>{e("")}})}_checkDeferred(){const e=this.deferred;for(;e.length;){e.pop()()}}_reportShowPage(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();const t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,0,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map(((e,t)=>-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e)).join(",");Reporter.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}_reportHidePage(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();const t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,e.orientationChangeCount,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map(((e,t)=>-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e)).join(",");Reporter.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}_submit(){Reporter.submit(),setTimeout((()=>{Reporter.submit()}),100)}_reportRealtime(e){if(M())return;let r="",o=2;if(__wxConfig){const e=__wxConfig.accountInfo,t=__wxConfig.envVersion;e&&(r=e.appId||""),"release"===t?o=1:"trial"===t&&(o=3)}if(Y||(Y=n&&n.version&&n.version.version||""),null==j)try{j=F()||{}}catch(e){j={}}const i={DeviceModel:j.model||"",DeviceBrand:j.brand||"",OsName:j.platform||"",OsVersion:j.system||"",LanguageVersion:j.language||"",appid:r,appversion:Y,appstate:o,event_id:e.event_id,scene:e.scene,scene_note:(e.scene_note||"").substr(0,1024),sessionid:e.sessionid,usedstate:e.usedstate,pagepath:e.pagepath,networktype:e.networktype,costtime:e.costtime,staytime:e.staytime,referpagepath:(e.referpagepath||"").substr(0,1024),targetAction:e.targetAction,targetPagePath:(e.targetPagePath||"").substr(0,1024),clickTimestamp:0,publicLibVersion:e.publicLibVersion,prescene:e.prescene,prescene_note:e.prescene_note,isentrance:e.isentrance,query:(e.query||"").substr(0,1024),apptype:e.apptype,pagetype:e.pagetype,anchorTargetText:e.anchorTargetText,clickTime:e.clickTimestamp,anchorTargetRelatedText:e.anchorRelatedText,orientationChangeCount:e.orientationChangeCount,startCostTime:e.startCostTime,startType:e.startType,reportTime:e.reportTime};try{t.operateRealtimeData(1e3,JSON.stringify(i),!0)}catch(e){}}setReadyTime(e){this.pageReadyTime=e,this._checkDeferred()}setQuery(e){this.query=e}addOrientationChangeCount(){this.orientationChangeCount+=1}reportShowPage(){this._checkDeferred(),this.checkShowOptions();const e=Date.now(),t=this.route,n=this.pageType,r=this.showOptions;let o=r.referpagepath||"",i=r.clickTimestamp,a=0,s=0,c=0;Z&&Z!==t&&(o=Z+".html",i=e);const l=H;H=null;const d={anchorTargetText:"",anchorRelatedText:""};this.isInitialLoading&&l&&l.anchorTapTime&&i-l.anchorTapTime<1e3&&(d.anchorTargetText=l.anchorTargetText,d.anchorRelatedText=l.anchorRelatedText),Z=t,this.showTimeStamp=e,this.showReferpagepath=o,this.orientationChangeCount=0,Q!==r.sessionid&&(Q=r.sessionid,a=1),1===a&&(s=e-V,c=U?1:2,this.startCostTime=s,this.startType=c),this.isInitialLoading=!1,this.isentrance=a,q._getNetworkType((e=>{const l=Object.assign({},r,d,{event_id:1,pagepath:t+".html",networktype:e,staytime:0,referpagepath:o,targetAction:0,targetPagePath:"",isentrance:a,pagetype:n,clickTimestamp:i,startCostTime:s,startType:c});this.pageReadyTime?this._reportShowPage(l):this.deferred.push((()=>{this._reportShowPage(l)}))}))}reportHidePage(e,t){this._checkDeferred(),this.checkShowOptions(),this.checkHideOptions();const n=Date.now(),r=this.route,o=this.pageType,i=this.showOptions,a=this.hideOptions,s=this.showReferpagepath||"",c=this.showTimeStamp?n-this.showTimeStamp:0,l=void 0!==a.usedstate?a.usedstate:i.usedstate;let d=a.targetAction,u=a.targetPagePath,p=0,h=0;e&&(d=t?1:2,u=e+".html"),1===this.isentrance&&(p=null!==this.startCostTime?this.startCostTime:p,h=null!==this.startType?this.startType:h,this.startCostTime=null,this.startType=null),this.showTimeStamp=null,q._getNetworkType((e=>{const t=Object.assign({},i,{event_id:2,pagepath:r+".html",usedstate:l,networktype:e,staytime:c,referpagepath:s,targetAction:d,targetPagePath:u,isentrance:this.isentrance||0,pagetype:o,anchorTargetText:"",anchorRelatedText:"",orientationChangeCount:this.orientationChangeCount||0,startCostTime:p,startType:h});this._reportHidePage(t)}))}}const J={kbone:0};let K=!0;t.onAppShow((n=>{if(K){K=!1,q.setOnLaunch(t.getLaunchOptionsSync());try{(t=>{const n=r.Component._list,o=t.pages||[],i=t.page||{},a=o.length;let s=0,c=0,l=0,d=0,u=9999,p=0;Object.keys(r.Component._list).forEach((e=>{e&&"wx://functional-page"!==e&&!i[e+".html"]&&(c++,/(^|\/)miniprogram_npm\//g.test(e)&&l++)})),o.forEach((e=>{if(((i[e+".html"]||{}).window||{}).usingComponents){s++;const t=n[e];if(!t)return;const r=t.behavior,o=r.using||{},i=r.generics||{},a=Object.keys(o).length+Object.keys(i).length;a>d&&(d=a),a<u&&(u=a),p+=a}})),p=s?p/s:0,u=9999===u?0:u;const h=[];try{Object.keys(e.g.__modules__||{}).forEach((e=>{if(e.indexOf("miniprogram-render/")>=0&&(J.kbone=1),0===e.indexOf("miniprogram_npm/")){let t=e.indexOf("/",16),n=e.substring(16,t);"@"===n[0]&&(t=e.indexOf("/",t+1),n=e.substring(16,t)),h.push(n)}}));for(let e=h.length;e>=0;e--)for(let t=0;t<e;t++)h[t]===h[e]&&h.splice(e,1)}catch(e){}const f=[a,s,c,l,d,u,p,JSON.stringify(J),h.join(";")].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"CustomComponent",value:f,force:!0})})(__wxConfig),(()=>{const e=r.Component._list,t=Object.keys(e),n=["miniprogram-recycle-view","miniprogram-barrage","wxml-to-canvas","weui-miniprogram","miniprogram-navigation-bar"],o=/^miniprogram_npm\/(.+$)/,i={};t.forEach((t=>{const r=e[t].is,a=o.exec(r);if(a){const e=a[1];let t=e.indexOf("/"),r=e.substring(0,t),o=e.substring(t+1);"@"===r[0]&&(t=e.indexOf("/",t+1),r=e.substring(0,t),o=e.substring(t+1)),(n.indexOf(r)>-1||/^@miniprogram-component-plus\//.test(r))&&(i[r]=i[r]||[],i[r].push(o))}})),Object.keys(i).forEach((e=>{Reporter.reportKeyValue({key:"NpmExtendedLib",value:[e,i[e].join(";")].map(encodeURIComponent).join(","),force:!0})}))})(),Reporter.submit()}catch(e){}}else q.setOnAppShow(n)})),t.onAppHide((e=>{q.setOnAppHide(e)}));const X=e=>{if("String"!==C(e))throw T("数据路径错误","Path must be a string"),new O("Path must be a string");const t=e.length,n=[];let r="",o=0,i=!1,a=!1;for(let s=0;s<t;s++){const c=e[s];if("\\"===c)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1])?(r+=e[s+1],s++):r+="\\";else if("."===c)r&&(n.push(r),r="");else if("["===c){if(r&&(n.push(r),r=""),0===n.length)throw T("数据路径错误","Path can not start with []: "+e),new O("Path can not start with []: "+e);a=!0,i=!1}else if("]"===c){if(!i)throw T("数据路径错误","Must have number in []: "+e),new O("Must have number in []: "+e);a=!1,n.push(o),o=0}else if(a){if(c<"0"||c>"9")throw T("数据路径错误","Only number 0-9 could inside []: "+e),new O("Only number 0-9 could inside []: "+e);i=!0,o=10*o+c.charCodeAt(0)-48}else r+=c}if(r&&n.push(r),0===n.length)throw T("数据路径错误","Path can not be empty"),new O("Path can not be empty");return n},ee=(e,t)=>{let n,r={},o=e;for(let e=0;e<t.length;e++)Number(t[e])===t[e]&&t[e]%1==0?Array.isArray(o)||(r[n]=[],o=r[n]):S(o)||(r[n]={},o=r[n]),n=t[e],r=o,o=o[t[e]];return{obj:r,key:n}},te=(e,t)=>{const n=X(t);let r,o,i=e;for(let e=0;e<n.length;e++)Number(n[e])===n[e]&&n[e]%1==0?Array.isArray(i)||(i=[]):S(i)||(i={}),o=n[e],r=i,i=i[n[e]];return{obj:r,key:o}},ne=["onLoad","onReady","onShow","onRouteEnd","onHide","onUnload","onResize"],re=e=>{for(let t=0;t<ne.length;++t)if(ne[t]===e)return!0;return"data"===e},oe=["__wxWebviewId__","__route__"],ie=["route"],ae=e=>-1!==oe.indexOf(e),se=t.getLogManager();class ce{static create(e,t){const n=new ce(e,t),r=n.__wxExparserNode__;return delete n.__wxExparserNode__,{page:n,node:r}}static destroy(e){o.removeView(e.__wxWebviewId__)}constructor(e,n){const i={__wxWebviewId__:e,__route__:n};oe.forEach((e=>{Object.defineProperty(this,e,{set(){x("关键字保护",`should not change the protected attribute ${e}`)},get:()=>i[e]})}));const a=o.addView(e,n),s=r.Element.getMethodCaller(a),c=o.getOwnerPluginAppId(s);this.__wxExparserNode__=a,this.__wxComponentInst__=s,r.Element.setMethodCaller(a,this);const l=In();let d={};hasOwnProperty.call(l,n)?d=l[n]:console.info(`Page "${n}" has not been registered yet.`),d.data=d.data||{},S(d.data)||T("Page data error","Page.data must be an object");const u=JSON.stringify(d.data);this.data=JSON.parse(u),this.__viewData__=JSON.parse(u),this.__displayReporter=new q(n,1);let p=t.getSystemInfoSync().deviceOrientation;this.__callPageLifeTime__=function(e,...n){const r=(this[e]||w).bind(this);if(Reporter.__route__=this.__route__,Reporter.__method__=e,"onLoad"===e&&this.__displayReporter.setQuery(...n),"onShow"===e)this.__displayReporter.reportShowPage();else if("onReady"===e)this.__displayReporter.setReadyTime(Date.now());else if("onHide"===e||"onUnload"===e){const e=this.__toRoute__,t=this.__isBack__,n=this.__notReportHide__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,n||this.__displayReporter.reportHidePage(e,t)}else if("onResize"===e){const e=n[0]||{};p!==e.deviceOrientation&&(p=e.deviceOrientation,this.__displayReporter.addOrientationChangeCount())}k(`${this.__route__}: ${e} have been invoked`),t.traceBeginEvent("LifeCycle",`Page.${e}`);const o=r.apply(this,n);return t.traceEndEvent(),Reporter.__route__=Reporter.__method__="",o},ne.forEach((e=>{this[e]=function(...n){const r=(d[e]||w).bind(this);let o;try{const i=Date.now();o=r.apply(this,n);const a=Date.now()-i;a>1e3&&Reporter.slowReport({key:"pageInvoke",cost:a,extend:`at ${this.__route__} page lifeCycleMethod ${e} function`}),se&&se.logApiInvoke&&se.log(`page ${this.__route__} ${e} have been invoked`),t.nativeConsole.info(`page ${this.__route__} ${e} have been invoked`)}catch(t){Reporter.thirdErrorReport({source:c,error:t,extend:`at ${this.__route__} page lifeCycleMethod ${e} function`})}return o}.bind(this)}));for(const e in d)ae(e)?x("关键字保护",`Page's ${e} is write-protected`):re(e)||("Function"===C(d[e])?this[e]=function(...n){let r;Reporter.__route__=this.__route__,Reporter.__method__=e,t.traceBeginEvent("User Script",`Page.${e}`);try{const t=Date.now();r=d[e].apply(this,n);const o=Date.now()-t;o>1e3&&Reporter.slowReport({key:"pageInvoke",cost:o,extend:`at ${this.__route__} page ${e} function`})}catch(t){Reporter.thirdErrorReport({source:c,error:t,extend:`at ${this.__route__} page ${e} function`})}return t.traceEndEvent(),Reporter.__route__=Reporter.__method__="",r}.bind(this):this[e]=A(d[e]));const h={route:n};ie.forEach((e=>{Object.prototype.hasOwnProperty.call(this,e)||(this[e]=h[e])}));const f="function"==typeof d.onShareAppMessage;f&&t.showShareMenu();const g="function"==typeof d.onShareTimeline;f&&g&&t.showShareTimelineMenu()}setData(e,n){try{const r=C(e);if("Object"!==r)return void T("类型错误",`setData accepts an Object rather than some ${r}`);Object.keys(e).forEach((t=>{void 0===e[t]&&T("Page setData warning",'Setting data field "'+t+'" to undefined is invalid.');const n=X(t),{obj:r,key:o}=ee(this.data,n);if(r&&(r[o]=A(e[t])),void 0!==e[t]){const{obj:r,key:o}=ee(this.__viewData__,n);r&&(r[o]=A(e[t]))}})),t.traceBeginEvent("Framework","DataEmitter::emit"),this.__wxComponentInst__.setData(JSON.parse(JSON.stringify(e)),n),t.traceEndEvent()}catch(e){P(e)}}pageScrollTo(e){t.publishPageScrollTo(e,[this.__wxWebviewId__])}}const le=ce,de=["onLoad","onReady","onShow","onRouteEnd","onHide","onUnload","onResize"],ue=t.getLogManager();const pe=class{static create(e,n){const i=o.addView(e,n),a=r.Element.getMethodCaller(i),s=o.getOwnerPluginAppId(a);if(a.__wxWebviewId__=e,a.__route__=n,a.route=n,a.__displayReporter=new q(n,2),i.__customConstructor__===o.Page){const e=i.getRootBehavior().methods,t=a.__freeData__;for(const t in e)a[t]=e[t].bind(a);for(const e in t)a[e]=A(t[e])}let c=t.getSystemInfoSync().deviceOrientation;a.__callPageLifeTime__=function(e,...n){const r=this[e]||w;if(Reporter.__route__=this.__route__,Reporter.__method__=e,"onLoad"===e&&a.__displayReporter.setQuery(...n),"onShow"===e)a.__displayReporter.reportShowPage();else if("onReady"===e)a.__displayReporter.setReadyTime(Date.now());else if("onHide"===e||"onUnload"===e){const e=this.__toRoute__,t=this.__isBack__,n=this.__notReportHide__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,n||a.__displayReporter.reportHidePage(e,t)}else if("onResize"===e){const e=n[0]||{};c!==e.deviceOrientation&&(c=e.deviceOrientation,a.__displayReporter.addOrientationChangeCount())}"onShow"===e?i.triggerPageLifeTime("show",n):"onHide"===e?i.triggerPageLifeTime("hide",n):"onResize"===e&&i.triggerPageLifeTime("resize",n),k(`${this.__route__}: ${e} have been invoked`),t.traceBeginEvent("LifeCycle",`Page.${e}`);const o=r.apply(this,n);return t.traceEndEvent(),Reporter.__route__=Reporter.__method__="",o},de.forEach((e=>{const n=a[e];a[e]=function(...r){const o=n||w;let i;try{const n=Date.now();i=o.apply(this,r);const a=Date.now()-n;a>1e3&&Reporter.slowReport({key:"pageInvoke",cost:a,extend:`at "${this.__route__}" page lifeCycleMethod ${e} function`}),ue&&ue.logApiInvoke&&ue.log(`page ${this.__route__} ${e} have been invoked`),t.nativeConsole.info(`component page ${this.__route__} ${e} have been invoked`)}catch(t){Reporter.thirdErrorReport({source:s,error:t,extend:`at "${this.__route__}" page lifeCycleMethod ${e} function`})}return i}.bind(a)}));const l="function"==typeof a.onShareAppMessage;l&&t.showShareMenu();const d="function"==typeof a.onShareTimeline;return l&&d&&t.showShareTimelineMenu(),{page:a,node:i}}static destroy(e){o.removeView(e.__wxWebviewId__)}};let he=null;const fe=Object.create(null),ge=(e,t,n)=>{he&&he.triggerLifeTime("route",[{method:e,url:t,args:n}])},_e=(e,t,n,r,o,i)=>{if("appLaunch"===i)a=()=>{ge("appLaunch",t,{tabBarConfig:__wxConfig.tabBar,entryPagePath:__wxConfig.entryPagePath})},__sclEngine__.initScl((e=>{he=e.mainRoot.append("frameset",{placeholderImage:"frameset/placeholder.png"}),he.setPageLifeTimeCallback(((e,t,...n)=>{const r=fe[e],o=qt(r);o&&__errorTracer__.surroundThirdByTryCatch((()=>{o.__callPageLifeTime__("on"+t,...n)}),`at ${t} callback function`)()})),a()}));else if("navigateTo"===i)ge("navigateTo",t);else if("redirectTo"===i)ge("redirectTo",t);else if("switchTab"===i)ge("switchTab",t);else if("reLaunch"===i||"autoReLaunch"===i)ge("reLaunch",t);else if("navigateBack"===i){const e=__sclEngine__.getExparserElementByViewId(o);e&&e.triggerEvent("navigateBack")}else"frameLoad"===i?(fe[o]=n,dn(e,t,n,r,{framesetViewId:o})):"frameUnload"===i&&(delete fe[o],pn(Jt(n),""));var a},me=0,ye=1,ve=2,Ae=3,be=4,we=5,Ce=6,Ie=7,Ee=8,Se=9,Te=10,xe=11,ke=12,Pe=[];let De=!0;function Oe(e,t){Pe[e]=t||Date.now()}function Ne(e,t){void 0===Pe[e]&&Oe(e,t)}let Re=!1;function Me(e){const n=t.isIsolatedSubpackage(e);!Re&&n?Ue():Re&&!n&&je(),Re=n}const Le=[];let Be=!0,Fe=!1,We={};function je(e){e=e||We,t.emitIsloatedAppShow(e),Le.forEach((t=>{t.preventOnShow||t.app.onShow(e),t.preventOnShow=!1})),We=e}function Ue(e){t.emitIsloatedAppHide(),Le.forEach((t=>{7===__wxConfig.appType?t.app.onHide(e):t.app.onHide()}))}t.onAppUnhang((()=>{Fe=!1})),t.onAppShow(((e={})=>{var n;if(e.isLaunch&&yt("launch"),$t(e.path),n=e.path,Re=t.isIsolatedSubpackage(n),Re||je(e.__public||e),yt("foreground"),Be||e.reLaunch)Be=!1;else{const e=Kt("");e.length&&(Vt()?he&&he.setGlobalShowStatus(!0):"function"==typeof e[e.length-1].__callPageLifeTime__&&e[e.length-1].__callPageLifeTime__("onShow"),yt("enterPage",e[e.length-1],!0))}})),t.onAppHide(((e={})=>{"hang"===e.mode&&(Fe=!0);const n=Kt("");if(n.length){Vt()?he&&he.setGlobalShowStatus(!1):"function"==typeof n[n.length-1].__callPageLifeTime__&&n[n.length-1].__callPageLifeTime__("onHide");const e=Yt(),r=e.page;yt("leavePage",r,!0);const o="function"==typeof r.onSaveExitState?N.call(r,"onSaveExitState"):void 0;t.saveExitState(e.route,e.rawPath,o)}Re||Ue(e),yt("background")}));const Ve=["onLaunch","onShow","onHide","onUnlaunch"];let Ge,$e,He;const Ze=e=>{for(let t=0;t<Ve.length;++t)if(Ve[t]===e)return!0;return!1},Qe=e=>"getCurrentPage"===e,Ye=t.getLogManager();class ze{constructor(e={}){Ve.forEach((n=>{this[n]=function(...r){const o=e[n]||w;Reporter.__route__="App",Reporter.__method__=n,k(`App: ${n} have been invoked`),t.traceBeginEvent("LifeCycle",`App.${n}`);try{o.apply(this,r),Ye&&Ye.logApiInvoke&&Ye.log(`App ${n} have been invoked`),t.nativeConsole.info(`App ${n} have been invoked`)}catch(e){Reporter.thirdErrorReport({error:e,extend:`at App lifeCycleMethod ${n} function`})}t.traceEndEvent(),Reporter.__route__=Reporter.__method__=""}.bind(this)}));for(const n in e)Qe(n)?x("关键字保护",`App's ${n} is write-protected`):Ze(n)||("function"==typeof e[n]?this[n]=function(...r){let o;Reporter.__route__="App",Reporter.__method__=n,t.traceBeginEvent("User Script",`App.${n}`);try{o=e[n].apply(this,r)}catch(e){Reporter.thirdErrorReport({error:e,extend:`at App ${n} function`})}return t.traceEndEvent(),o}.bind(this):this[n]=e[n]);"function"==typeof this.onError&&t.onError(this.onError),"function"==typeof this.onUnhandledRejection&&t.onUnhandledRejection(this.onUnhandledRejection),"function"==typeof this.onPageNotFound&&t.onPageNotFound(this.onPageNotFound),"function"==typeof this.onThemeChange&&t.onThemeChange(this.onThemeChange),function(e){const n=t.getLaunchOptionsSync();Ne(ve),e.onLaunch(n.__public),e.onShow(n.__public),Le.push({app:e,preventOnShow:!0})}(this)}}let qe={};const Je=D(((e={})=>{Object.assign(e,qe),qe={},Ge=new ze(e)}),"create app instance"),Ke=D(((e={})=>e.allowDefault?Ge||qe:Ge),"get app instance"),Xe=()=>$e,et=e=>{$e=e};t.onAppShow((e=>{const n=e.referrerInfo&&e.referrerInfo.privateExtraData;if(n){et(n);const e=en();n.functionalPage&&e&&t.publishFunctionalPage(n.functionalPage,[e])}e.referrerInfo&&e.referrerInfo.openapiInvokeData&&(He=e.referrerInfo.openapiInvokeData)}));let tt={},nt={},rt=[],ot=!1,it=[],at=!1,st=!1,ct=0,lt=0,dt=0,ut=0,pt=0,ht=0,ft=null,gt=null;const _t=(e,t)=>{Object.keys(e.data||{}).forEach((n=>{let i,a=e.data[n],s=t&&t.data||{},c=!1;var l;if("$"!==a.charAt(0)||(i=(e=>{let t=0;switch(e){case"PAGE_TIME":return t=dt?Date.now()-dt-ut:0,t>=0?t:null;case"APP_TIME":return t=ct?Date.now()-ct-lt:0,t>=0?t:null;case"CURRENT_PAGE":return gt||null;case"LAST_PAGE":return ft||null;default:return}})(a.substr(1)),void 0===i))if(0!==a.indexOf("$APP")){if(t&&(e.page===t.__route__||"ANY_PAGE"===e.page)){if(0===a.indexOf("$DATASET")){const t=a.replace("$DATASET.","");l=e.dataset||{},i=ee(l,X(t)),i.obj&&void 0!==i.obj[i.key]&&(nt[e.eventID].data[n]=i.obj[i.key],c=!0)}if(0===a.indexOf("$COMP")&&"number"==typeof e.nodeId){const t=o.getNodeById(e.nodeId,e.webviewId);if(!t)return void console.warn(`[自定义分析] 找不到自定义组件里的 "${e.element}" 节点`);const n=r.Element.getMethodCaller(t);n&&(a=a.replace("$COMP.",""),s=n.data)}if(a.indexOf("[]")>-1){if((e.index||[]).forEach((e=>{a=a.replace("[]","["+e+"]")})),a.indexOf("[-1]")>-1||a.indexOf("[]")>-1)return void console.warn(`[自定义分析] 取不到下标，请检查配置（${a}）`);const t=a.match(/\[(\d+)\]\.\$INDEX$/);t&&(nt[e.eventID].data[n]=Number(t[1]),c=!0)}if(i=te(s,a),void 0===i.obj||void 0===i.key||void 0===i.obj[i.key])return void(c||console.warn(`[自定义分析] 取不到该字段，请检查配置（${a}）`));nt[e.eventID].data[n]=i.obj[i.key]}}else((e,t)=>{const n=e.data[t],r=Ke()||{},o=n.replace("$APP.",""),i=te(r,o);if(i.obj&&void 0!==i.obj[i.key]){const n=i.obj[i.key];"number"!=typeof n&&"string"!=typeof n&&"boolean"!=typeof n||(nt[e.eventID].data[t]=n)}})(e,n);else null!==i&&(nt[e.eventID].data[n]=i)}))},mt=(e,n)=>{if("start"!==e.action&&"start_and_report"!==e.action||(nt[e.eventID]={eventID:e.eventID,data:{},extra:e.extra}),!nt[e.eventID])return;const r=n||Yt()&&Yt().page;_t(e,r),"report"!==e.action&&"start_and_report"!==e.action||((e,n)=>{const r=[];Object.keys(nt[e].data).forEach((t=>{r.push({id:t,value:nt[e].data[t]})})),nt[e].data=r,nt[e].page=n,nt[e].version=("undefined"!=typeof __libVersionInfo__?__libVersionInfo__.version:0)||0,nt[e].uid=Date.now().toString(16)+Math.random().toString(16).substr(2),nt[e].type=0,M()||(console.info("[自定义分析] 上报成功"),console.info(nt[e])),t.reportRealtimeAction({actionData:JSON.stringify(nt[e])}),nt[e]=null})(e.eventID,r&&r.__route__)},yt=(e,n,r)=>{if("pageReady"===e&&n)return void(e=>{if(!e)return;const n=e.__route__,r=tt.click,o=[];r&&(r.forEach((e=>{e.page!==n&&"ANY_PAGE"!==e.page||!e.element||o.push({eventID:e.eventID,page:e.page,element:e.element,action:e.action})})),0!==o.length&&t.publishAnalyticsConfig(o,[e.__wxWebviewId__]))})(n);if(st)return void rt.push(e);if("launch"===e&&!at)return ct=Date.now(),at=!0,st=!0,rt.push(e),void t.getAppConfig({type:1,complete:D((e=>{st=!1,e.data&&(console.info("[自定义分析] 配置拉取成功"),vt(e))}))});if(!ot)return void it.push([e,n,r]);r||("enterPage"===e?(dt=Date.now(),ut=0,gt=n&&n.__route__):"leavePage"===e?ft=n&&n.__route__:"background"===e?pt=Date.now():"foreground"===e&&(ht=Date.now(),pt&&ht>pt&&(ut+=ht-pt,lt+=ht-pt)));const o=tt[e];if(!o)return;if("enterPage"===e&&n&&"page/component/index"===n.__route__&&__wxConfig.accountInfo&&"wxe5f52902cf4de896"===__wxConfig.accountInfo.appId){let e=0;o.map((e=>e.eventID)).forEach((t=>{1007===t&&e++})),e>1&&Reporter.reportIDKey({key:"demoConfigRepeat"}),Reporter.reportIDKey({key:"demoEnterHomePage"})}const i=["enterPage","leavePage","pageLoad","pageUnload","pullDownRefresh","switchTab"];o.forEach((t=>{t&&(i.indexOf(e)>-1?(n&&t.page===(n&&n.__route__)||"ANY_PAGE"===t.page)&&mt(t,n):mt(t))}))},vt=(e,t)=>{let n={};try{n=JSON.parse(e.data)}catch(e){n={}}const r=Yt();tt=(e=>{const t={};return"[object Array]"!==Object.prototype.toString.call(e)||e.forEach((e=>{let n=e.eventTarget;"[object Object]"===Object.prototype.toString.call(n)&&(n=[n]),n.forEach((n=>{const r=n.trigger||"click";t[r]||(t[r]=[]),("click"!==r||/^([.#][a-zA-Z_][^.#]* ?)+$/.test(n.element&&n.element.trim()))&&t[r].push({eventID:e.eventID,page:n.page,element:n.element&&n.element.trim(),data:n.data,action:n.action,extra:e.extra})}))})),t})(n),nt={},t||(rt.forEach((e=>{yt(e,r&&r.page,!0)})),rt=[]),yt("pageReady",r&&r.page)};t.subscribeAnalyticsReport(((e,t)=>{const n=e,r=tt.click;let o,i;if(!r)return;if("start"!==n.action&&"start_and_report"!==n.action&&!nt[n.eventID])return;const a=Kt("");for(let e=0;e<a.length;e++){const n=a[e];if(n.__wxWebviewId__===t){i=n;break}}if(i){for(let e=0;e<r.length;e++){const t=r[e];if(n.eventID===t.eventID&&(n.page===t.page||"ANY_PAGE"===t.page)&&n.element===t.element){t.dataset=n.dataset||{},o=b({},t);break}}o&&(o.index=n.index,o.nodeId=n.nodeId,o.webviewId=t,mt(o,i))}})),t.onAppConfig(D((e=>{console.info("[自定义分析] 收到最新配置"),1===Number(e.type)&&vt(e,!0)}))),t.onAppRouteDone((()=>{ot=!0,it.forEach((e=>{yt(...e)})),it=[]}));const At=class{static emit(e,n,r){t.invokeWebviewMethod("appDataChange",e,[n],r)}},bt=Object.prototype.hasOwnProperty,wt=262144;let Ct=Date.now();const It=t.ShareInfoStorage,Et=t._getRealRoute,St=t._triggerBeforeUnloadPage,Tt=t._triggerBeforeShareAppMessage,xt=t.userShareMenuState;delete t.ShareInfoStorage;const kt=o.convertComponentAliasToRoute,Pt=o.convertRouteToComponentAlias;let Dt,Ot;const Nt={},Rt={},Mt={};let Lt,Bt=[];const Ft=[];let Wt="",jt=null,Ut=!1;const Vt=()=>Ut,Gt=()=>Wt,$t=e=>{Wt=e},Ht=(e,t,n)=>{let r;return n._userTap?o.wrapTapMark((()=>{r=N.call(e,t,n)})):r=N.call(e,t,n),r};__wxConfig.onReady((()=>{const e=__wxConfig.page||{},t=__wxConfig.global?__wxConfig.global.window:{};Object.keys(e).forEach((n=>{e[n].window=Object.assign({},t,e[n].window)})),__wxConfig.tabBar&&__wxConfig.tabBar.list&&"object"==typeof __wxConfig.tabBar.list&&"function"==typeof __wxConfig.tabBar.list.forEach&&__wxConfig.tabBar.list.forEach((e=>{Ft.push(e.pagePath)})),__wxConfig.appLaunchInfo&&"string"==typeof __wxConfig.appLaunchInfo.path&&$t(__wxConfig.appLaunchInfo.path),Ot=(__wxConfig.appLaunchInfo||{}).scene||0}));const Zt={appLaunchTime:0,appFgTime:0,appRouteTime:0,newPageTime:0,pageReadyTime:0},Qt=(e,t,n)=>{Reporter.speedReport({key:e,timeMark:{startTime:t,endTime:n}})},Yt=()=>Dt,zt=()=>Dt,qt=e=>bt.call(Nt,e)?Nt[e].page:null,Jt=e=>bt.call(Nt,e)?Nt[e]:null,Kt=e=>{const t=[];return Bt.forEach((n=>{e&&(e=>{if(/^__wx__\//.test(e=e||""))return"//";const t=e.match(/(?:^|\/)__plugin__\/(.*?)\//);return t?t[1]:"/"})(n.route)!==e?t.push(null):t.push(n.page)})),t},Xt=()=>Kt("/"),en=()=>{if(0!==Bt.length)return Bt[Bt.length-1].webviewId},tn=(e,t)=>e.__wxExparserNodeId__&&bt.call(Object.getPrototypeOf(e),t)||bt.call(e,t),nn=e=>{if(/(?:^|\/)__(wx|plugin)__\//.test(e))return!0;return!!("undefined"!=typeof __wxAppCode__&&__wxAppCode__[e+".json"]||{}).usingComponents},rn=e=>!!(e=>{for(let t=0;t<__wxConfig.pages.length;t++)if(__wxConfig.pages[t]===e)return!0;return!1})(e)||void 0!==Mt[e],on=(e,n,i,a,s={})=>{t.traceBeginEvent("User Script","Component constructor");let c=!1;(s.__wxRouteBegin||__wxRouteBegin)&&(c=!0),s.__wxRouteBegin?s.__wxRouteBegin=!1:__wxRouteBegin=!1;const l=o.Component(e,n,i,a),d=kt(l);return l&&(Rt[d]=r.Component._list[l]),Mt[d]=c,t.traceEndEvent(),String(l)},an=(n,i,a,s,c={})=>{t.traceBeginEvent("User Script","Page constructor");const l=c.__wxRoute||e.g.__wxRoute||s.replace(/\.js$/,"")||"";if(!c.__wxRouteBegin&&!__wxRouteBegin){if(!l)throw T("Page 注册错误",'Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json'),t.traceEndEvent(),new O('Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json');throw T("Page 注册错误",`Please do not register multiple Pages in ${l}.js`),t.traceEndEvent(),new O(`Please do not register multiple Pages in ${l}.js`)}c.__wxRouteBegin?c.__wxRouteBegin=!1:__wxRouteBegin=!1;const d=Pt(l),u=kt(d),p=nn(u);if("Object"!==C(n))throw T("Page 注册错误",`Options is not object: ${JSON.stringify(n)} in ${l}.js`),t.traceEndEvent(),new O(`Options is not object: ${JSON.stringify(n)} in ${l}.js`);k(`Register: ${d}`);const h=o.Page(n,i,a,p&&s?s:__wxRoute+".js");Rt[u]=p?r.Component._list[h]:n,Mt[u]=!0,t.traceEndEvent()},sn={isInit:!1};t.subscribeSubjectInfo((e=>{sn.isInit=e.isInit}));const cn=D(((e,n,r,o,i,a)=>{t.traceBeginEvent("Framework","publishInitData"),Oe(xe,r),k("Update view with init data");const s=e.page,c={};c.wechatLibVersion=("undefined"!=typeof __libVersionInfo__?__libVersionInfo__.version:"")||"",c.webviewId=n,c.enablePullUpRefresh=tn(s,"onReachBottom"),c.enablePageScroll=tn(s,"onPageScroll"),c.onReachBottomDistance=(e=>{try{if("number"==typeof __wxConfig.page[`${e}.html`].window.onReachBottomDistance)return __wxConfig.page[`${e}.html`].window.onReachBottomDistance}catch(e){return 50}return 50})(s.__route__),c.statesData=o,c.scene=Ot,c.route=s.__route__,c.query=s.options,c.lastRoute=e.lastRoute,c.lastQuery=e.lastQuery,c.wxConfig={accountInfo:__wxConfig&&__wxConfig.accountInfo||{},appContactInfo:__wxConfig&&__wxConfig.appContactInfo||{},appLaunchInfo:__wxConfig&&__wxConfig.appLaunchInfo||{},plugins:__wxConfig&&__wxConfig.plugins||{}},c.windowConfig=__wxConfig&&__wxConfig.page&&__wxConfig.page[s.__route__+".html"]&&__wxConfig.page[s.__route__+".html"].window||{},c.debug=__wxConfig&&__wxConfig.debug,c.appId=__wxConfig&&__wxConfig.accountInfo&&__wxConfig.accountInfo.appId,c.appLaunchTime=Zt.appLaunchTime,c.appFgTime=Zt.appFgTime,c.isTabBarPage=e.isTabBarPage,c.isMainTabBarPage=e.isMainTabBarPage,c.navigationStyle=__wxConfig&&__wxConfig.global&&__wxConfig.global.window&&__wxConfig.global.window.navigationStyle,c.packageType=(e=>{if(__wxConfig&&__wxConfig.subPackages&&__wxConfig.subPackages.length){for(let t=0;t<__wxConfig.subPackages.length;t++){const n=__wxConfig.subPackages[t];if(0===e.indexOf(n.root))return n.independent?"independent":"normal"}return"main"}return"none"})(s.__route__),c.needGetSubjectInfo=!sn.isInit,c.subPackages=__wxConfig.subPackages,c.perfData=(Pe[we]=Date.now(),Pe[me]=De?1:0,Pe[Ie]=__wxConfig.isSubContext?1:0,Pe[ye]=__wxConfig.onReadyStart,Pe[Ce]=__wxConfig.onReadyEnd||0,De=!1,Pe),c.isReload=i,c.adInfo={preloadVideoAdUnitIds:t.getPreloadVideoAdUnitIds(),preloadAdUnitIds:t.getPreloadAdUnitIds()},c.permissionBytes=t.getCachePermissionBytes(),c.fontFaceRecords=t.fontFaceRecords,c.fontSizeSetting=F().fontSizeSetting,c.prerender=a,c.extendedLibList=__wxConfig.extendedLibList;const l={ext:c,options:{firstRender:!0,timestamp:r,path:s.__route__}};if(o){const e=JSON.stringify(l),r=e.length;if(r>wt){const o=[];let i=0;for(;r>i;)o.push(e.substr(i,wt)),i+=wt;const a=++Ct;for(let e=0,t=o.length;e<t;e++)At.emit({isSplitData:!0,splitInfo:{id:a,index:e+1,total:t,data:o[e]}},n);return yt("pageReady",s),void t.traceEndEvent()}}At.emit(l,n),yt("pageReady",s),t.traceEndEvent()})),ln=e=>-1!==Ft.indexOf(e.route)||-1!==Ft.indexOf(e.route+".html"),dn=(e,n,r,i,a={})=>{t.traceBeginEvent("Framework","openNewPage"),Oe(be);const s=Lt;Lt=void 0;const c=nn(e);Zt.newPageTime=Date.now(),$t(e);const l=c?pe.create(r,e):le.create(r,e),d=l.page,u=A(i);Dt={page:d,webviewId:r,route:e,rawPath:n,lastRoute:Dt?Dt.route:"",lastQuery:Dt?Dt.page.options:{},node:l.node},Dt.isTabBarPage=ln(Dt),Dt.isMainTabBarPage=a.isMainTabBarPage||!1,Bt.push(Dt),d.__exitState__=s;const p={};if(Object.keys(u).forEach((e=>{const t=u[e];try{p[e]=decodeURIComponent(t)}catch(n){p[e]=t}})),o.attachView(r,p),/^__wx__\//.test(e)){let t={};if(/^__wx__\/open-api-redirecting-page/.test(e))t=He||{};else if(/^__wx__\/functional-page/.test(e)){const e=Xe();e&&e.functionalPage&&(t=Object.assign({},e.functionalPage,{accountInfo:__wxConfig.accountInfo}))}d.setData(t)}d.options=u,cn(Dt,r,Zt.newPageTime,void 0,!1,a.prerender||!1),M()&&(__wxAppData[e]=d.data,__wxAppData[e].__webviewId__=r,t.publishUpdateAppData()),a.initialRenderingCacheData&&d.setData(a.initialRenderingCacheData);const h=t._getOpenerEventChannel();h&&(d.__eventChannel=h),d.__callPageLifeTime__("onLoad",i),d.__callPageLifeTime__("onShow"),Nt[r]={page:d,route:e,rawPath:n,webviewId:r,statesData:null,framesetViewId:a.framesetViewId,node:c?l.node:void 0},yt("pageLoad",d),yt("enterPage",d),Qt("appRoute2newPage",Zt.appRouteTime,Zt.newPageTime),t.traceEndEvent()},un=(e,n)=>{t.traceBeginEvent("Framework","hidePage"),e.page.__toRoute__=n,Vt()||e.page.__callPageLifeTime__("onHide"),yt("leavePage",e.page),t.traceEndEvent(),t.uploadUserLogOnHide(e.route)},pn=(e,n,r,o)=>{t.traceBeginEvent("Framework","unloadPage"),St(e.webviewId),e.page.__toRoute__=n,e.page.__isBack__=r,e.page.__notReportHide__=o,e.page.__callPageLifeTime__("onUnload"),e.node&&pe.destroy(e.page),M()&&(delete __wxAppData[e.route],t.publishUpdateAppData()),delete Nt[e.webviewId];let i=Bt.length-1;for(;i>=0&&Bt[i].webviewId!==e.webviewId;i--);i>=0&&Bt.splice(i,1),Bt.length?$t(Bt[Bt.length-1].route):$t(""),yt("pageUnload",e.page),yt("leavePage",e.page),t.traceEndEvent(),t.uploadUserLogOnHide(e.route)},hn=e=>{t.traceBeginEvent("Framework","minimizePage"),un(e),Bt=Bt.slice(0,Bt.length-1),Bt.length?$t(Bt[Bt.length-1].route):$t(""),t.traceEndEvent()},fn=(e,n=!1)=>{t.traceBeginEvent("Framework","onNavigateBack");let r=!1;const o=Nt[e]&&Nt[e].route;for(let t=Bt.length-1;t>0;t--){const i=Bt[t];if(i.webviewId===e){r=!0,Dt=i;break}!n&&jt&&jt.webviewId===i.webviewId?Bt=Bt.slice(0,Bt.length-1):n&&jt&&jt.webviewId===i.webviewId?hn(i):pn(i,o,!0)}if(1===Bt.length&&!r){const t=Bt[0];if(t.webviewId===e)r=!0,Dt=t;else if(ln(t)&&bt.call(Nt,e)){r=!0;const{page:t,node:n}=Nt[e];Dt={webviewId:e,route:o,page:t,node:n}}}if(Me(o),r){Vt()||Dt.page.__callPageLifeTime__("onShow"),yt("enterPage",Dt.page);const n=Xe();et({}),n&&n.functionalPage&&e&&t.publishFunctionalPage(n.functionalPage,[e])}else T("Page route 错误(system error)",`navigateBack with an unexist webviewId ${e}`);t.traceEndEvent()},gn=(e,n,r,o,i,a,s,c)=>{const l=Object.keys(r).map((e=>encodeURIComponent(e)+"="+r[e])).join("&"),d="/"+e+(l?"?"+l:"");t.traceBeginEvent("Framework","onAppRoute"),k(`On app route: ${e}`),Zt.appRouteTime=Date.now();const u=s.qualityData;if(u){const{navId:e,isWebviewPreload:t,isPreloadPageFrame:n}=u;Oe(Ee,e),Oe(Se,t),Oe(Te,n),Oe(ke,o)}Ut?_e(e,d,n,r,c,o):"navigateTo"===o?i?((e,n,r,o,i)=>{t.traceBeginEvent("Framework","onNavigateToPip"),Dt&&un(Dt,e),Me(e),"min"===i?(jt=Bt[Bt.length-1],bt.call(Nt,r)?T("Page route 错误(system error)",`navigateTo with an already exist webviewId ${r}`):dn(e,n,r,o)):"max"===i?jt&&($t(e),Dt=jt,Bt.push(Dt),Dt.page.__callPageLifeTime__("onShow"),jt=null):T("Page route 错误(system error)","navigateTo with unexpected pipMode"),t.traceEndEvent()})(e,d,n,r,i):((e,n,r,o,i)=>{t.traceBeginEvent("Framework","onNavigateTo"),Dt&&un(Dt,e),Me(e),bt.call(Nt,r)?T("Page route 错误(system error)",`navigateTo with an already exist webviewId ${r}`):dn(e,n,r,o,{initialRenderingCacheData:i}),t.traceEndEvent()})(e,d,n,r,a):"redirectTo"===o?((e,n,r,o,i)=>{t.traceBeginEvent("Framework","onRedirectTo"),Dt&&pn(Dt,e),Me(e),bt.call(Nt,r)?T("Page route 错误(system error)",`redirectTo with an already exist webviewId ${r}`):dn(e,n,r,o,{initialRenderingCacheData:i}),t.traceEndEvent()})(e,d,n,r,a):"navigateBack"===o?i?((e,n)=>{t.traceBeginEvent("Framework","onNavigateBack"),"min"===n?(jt=Bt[Bt.length-1],fn(e,!0)):"max"===n&&(jt=null,fn(e))})(n,i):fn(n):"switchTab"===o?((e,n,r,o,i)=>{t.traceBeginEvent("Framework","onSwitchTab");let a=!0,s=!0;if(0===Bt.length)return dn(e,n,r,o,{initialRenderingCacheData:i}),void t.traceEndEvent();for(;Bt.length>1;)jt&&jt.webviewId===Bt[Bt.length-1].webviewId?(Bt=Bt.slice(0,Bt.length-1),Bt.length?$t(Bt[Bt.length-1].route):$t(""),a=!1):(pn(Bt[Bt.length-1],e),a=!1);if(Bt[0].webviewId===r)Dt=Bt[0],a||Vt()||Dt.page.__callPageLifeTime__("onShow");else if(ln(Bt[0])?(s=!1,a&&un(Bt[0],e)):jt&&jt.webviewId===Bt[0].webviewId?(Bt=Bt.slice(0,Bt.length-1),$t("")):pn(Bt[0],e),bt.call(Nt,r)){const{page:t,node:n}=Nt[r];Dt={webviewId:r,route:e,page:t,node:n},Bt=[Dt],Vt()||t.__callPageLifeTime__("onShow"),yt("enterPage",t),yt("switchTab",t)}else Bt=[],dn(e,n,r,o,{isMainTabBarPage:s,initialRenderingCacheData:i});t.traceEndEvent()})(e,d,n,r,a):"appLaunch"===o?((e,n,r,o,i,a)=>{t.traceBeginEvent("Framework","onAppLaunch"),Ne(Ae),Zt.appLaunchTime=Date.now(),Zt.appFgTime=Date.now(),bt.call(Nt,r)?T("Page route 错误(system error)",`appLaunch with an already exist webviewId ${r}`):dn(e,n,r,o,{isMainTabBarPage:ln({route:e}),initialRenderingCacheData:i,prerender:a}),t.traceEndEvent();const s=t.getLaunchOptionsSync().scene;[1001,1003,1019,1023,1038,1056,1080,1083,1089,1090,1103,1104,1112,1113,1114,1117,1127,1131,1134].indexOf(s)<0||t.loadExitState(((e,n,r)=>{"latestPage"===e?setTimeout((()=>{Lt=r,t.route.redirectTo({url:n})}),0):"homePageAndLatestPage"===e?setTimeout((()=>{Lt=r,t.route.navigateTo({url:n})}),0):Lt=r}))})(e,d,n,r,a,s.prerender):"reLaunch"===o||"autoReLaunch"===o?((e,n,r,o,i,a,s)=>{t.traceBeginEvent("Framework","onReLaunch");let c=!1;for("reLaunch"===i&&(c=!0);Bt.length>0;){let t=!0;c&&(t=!1,c=!1),pn(Bt[Bt.length-1],e,!1,t)}Object.keys(Nt).forEach((t=>{pn(Nt[t],e,!1,!0)})),Me(e),dn(e,n,r,o,{isMainTabBarPage:ln({route:e}),initialRenderingCacheData:a,prerender:s}),t.traceEndEvent()})(e,d,n,r,o,a,s.prerender):"dismissPip"===o?jt&&(()=>{t.traceBeginEvent("Framework","unloadPagePip");const e=jt;if(!e)return;Bt.findIndex((e=>e.webviewId===jt.webviewId))>=0?jt=null:(St(e.webviewId),e.page.__callPageLifeTime__("onUnload"),e.node&&pe.destroy(e.page),M()&&(delete __wxAppData[e.route],t.publishUpdateAppData()),delete Nt[e.webviewId],yt("pageUnload",e.page),yt("leavePage",e.page),t.traceEndEvent(),t.uploadUserLogOnHide(e.route))})():T("Page route 错误(system error)",`Illegal open type: ${o}`),t.traceEndEvent()},_n=(e,t)=>{if(k(`On page reload: ${e}`),!bt.call(Nt,t))return void T("Page reload(system error)",`Can not find webviewId ${t}`);const n=nn(e),r=Nt[t].statesData;Nt[t].statesData=void 0,o.restoreView(t),cn(Nt[t],t,Date.now(),r||{},!0),((e,{pageCount:t,pageType:n})=>{const r=W[e]||{},o=[t,n,r.rootCompCount||0,r.rootCustomCompCount||0,r.rootCustomCompRatio||0,r.rootInternalCompCount||0].map(encodeURIComponent).join(",");W[e]={},Reporter.reportKeyValue({key:"WebviewRestore",value:o}),Reporter.submit()})(t,{pageCount:Bt.length,pageType:n?2:1})},mn=()=>{const{route:e,webviewId:t}=Bt[Bt.length-1];_n(e,t)},yn=(e,n)=>{if(null==Nt[n])return;Tt(n);const{chatroomUsername:r,scene:o}=t.getInnerEnterOptionsSync(),{openType:i}=e.detail||{},a=e.origin||"weixin";((e,t)=>{const n=e,r=Nt[t],o=r.page;let i;if(tn(o,"onShareAppMessage")&&(i="onShareAppMessage"),i){k(`Invoke event ${i} in page: ${r.route}`);const t={from:e.fromShareButton?"button":"menu",target:e.target};e.webViewUrl&&(t.webViewUrl=e.webViewUrl);const a=3e3,s=N.call(o,i,t)||{};let c=s.promise;delete s.promise,I(c)||(c=Promise.resolve(s));const l=new Promise((e=>setTimeout(e,a,s)));return Promise.race([l,c]).then((t=>(n.title=t.title&&"string"==typeof t.title?t.title:e.title,n.desc=t.desc&&"string"==typeof t.desc?t.desc:e.desc,n.path=t.path&&"string"==typeof t.path?L(kt(t.path)):e.path,"string"==typeof t.imageUrl&&(t.imageUrl&&!/^(http|https|wxfile|cloud):\/\//.test(t.imageUrl)?n.imageUrl=Et(t.imageUrl,!1):n.imageUrl=t.imageUrl),n.toCurrentGroup=t.toCurrentGroup,t.cacheKey&&(n.cacheKey=t.cacheKey),t.webpageUrl&&(n.webpageUrl=t.webpageUrl),"wx60422b707e49ff2e"===__wxConfig.accountInfo.appId&&(t.bizSourceName&&(n.bizSourceName=t.bizSourceName),t.bizSourceIconUrl&&(n.bizSourceIconUrl=t.bizSourceIconUrl)),n.path.length>0&&"/"===n.path[0]&&(n.path=n.path.substr(1)),xt.isPrivateMessage?n.disableForward=!0:n.disableForward="boolean"==typeof t.disableForward&&t.disableForward,n.success=t.success,n.cancel=t.cancel,n.fail=t.fail,n.complete=t.complete,yt("share",o),n)))}return Promise.resolve(n)})(e,n).then((s=>{let c,l;if(1158===o&&void 0===s.toCurrentGroup&&(s.toCurrentGroup=!0),!0===e.fromShareButton){c="shareAppMessageDirectly";const e=t.getShareCookieString();if(e&&(s.messageExtraData=s.messageExtraData||{},s.messageExtraData.cookies=e),l=2,"shareToChatroom"===i&&s.toCurrentGroup){if(1156!==o||!r)return void console.warn(`shareToChatroom:fail scene ${o}, chatroomUsername ${r}`);s.chatroomUsername=r,s.bizType=1,c="shareAppMessageToSpecificContactForFakeNativeDirectly"}}else c="shareAppMessage",s.to=a,l=1;1158===o&&s.toCurrentGroup&&(c="shareAppMessageToSpecificContactDirectly",s.chatroomUsername=r);7===__wxConfig.appType&&"wxfe02ecfe70800f46"!==__wxConfig.accountInfo.appId&&(s.bizType=1,c="shareAppMessageForFakeNative",1156!==o&&1158!==o||!s.toCurrentGroup||(c="shareAppMessageToSpecificContactForFakeNativeDirectly")),s.useDefaultSnapshot=!0,s.webviewId=n,!M()&&t.checkAPIAvailable("share")||(s=R({},s),["success","fail","cancel","complete"].some((e=>"function"==typeof s[e]))&&t.reportRecycledAPI({name:c,strategy:1}),"shareToChatroom"!==i&&(delete s.success,delete s.fail,delete s.cancel,delete s.complete));const d=()=>{t[c](s,{beforeAll:e=>{const n=Yt();try{((e,t,n)=>{const r=e.page.__displayReporter;r.checkShowOptions();const o=r.showOptions,i=r.route+".html",a=t.errMsg;let s=0;const c=e.updateTitle&&e.updateTitle.trim(),l=(__wxConfig.global&&__wxConfig.global.window||{}).navigationBarTitleText||"",d=((__wxConfig.page[i]||{}).window||{}).navigationBarTitleText||"",u=__wxConfig.host&&__wxConfig.host.appId||"";a.indexOf(":ok")>=0?s=1:a.indexOf(":fail")>=0?s=2:a.indexOf(":cancel")>=0&&(s=3);const p=[o.scene,o.scene_note,o.sessionid,i,c||d||l,o.apptype,s,0,o.query,n,0,"","",u].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Share",value:p,force:!0}),Reporter.submit()})(n,e,l)}catch(e){}e.errMsg=e.errMsg.replace(/shareAppMessageDirectly|shareAppMessageToSpecificContactForFakeNativeDirectly|shareAppMessageForFakeNative|shareAppMessageToSpecificContactDirectly/,"shareAppMessage"),t.reportShareAppMessage("shareAppMessage",e),void 0!==e.shareInfos&&e.shareInfos.length>0&&(e.shareTickets=e.shareInfos.filter((e=>e.shareKey&&e.shareName)).map((e=>(t.showUpdatableMessageSubscribeButton({shareKey:e.shareKey}),It.set(e.shareKey,e.shareName))))),delete e.shareInfos}})};return"string"==typeof s.imageUrl?t.getCloudFileUrl([s.imageUrl],"image",(e=>{s.imageUrl=e.data[0].url,d()})):d(),null})).catch((e=>{console.warn("onShareAppMessage error ",e)}))},vn=e=>{t.shareTimeline(e,{beforeAll:e=>{t.reportShareAppMessage("shareTimeline",e)}})},An=(e={},n)=>{if(null==Nt[n])return;const r=Nt[n],o=r.page,i={from:e.fromShareTimeLineButton?"button":"menu",target:e.target},a=tn(o,"onShareTimeline")&&N.call(o,"onShareTimeline",i)||{},{title:s,query:c}=a,l={title:s||e.title,path:"string"==typeof c?`${r.route}.html?${c}`:r.rawPath.replace(/^\//,"").replace(/(\?|$)/,".html$1")};"string"==typeof a.imageUrl&&a.imageUrl?(/^(http|https|wxfile|cloud):\/\//.test(a.imageUrl)?l.imageUrl=a.imageUrl:l.imageUrl=Et(a.imageUrl,!1),t.getCloudFileUrl([l.imageUrl],"image",(e=>{l.imageUrl=e.data[0].url,vn(l)}))):vn(l)},bn=e=>{if(!Nt[e])return;const n=Nt[e].page;tn(n,"onShareTimeline")&&tn(n,"onShareAppMessage")&&t.showShareTimelineMenu()};let wn=null;t.onAppRoute(D((e=>{const t=e.path,n=e.webviewId,r=e.viewId,o=e.query||{},i=e.openType,a=e.pipMode;let s=e.initialRenderingCacheData;if("appLaunch"===i&&e.frameset&&(Ut=!0),!s&&e.appserviceData)try{s=JSON.parse(e.appserviceData)}catch(e){}wn&&wn(),e.resizing?wn=D((function(){wn=null,gn(t,n,o,i,a,s,e,r)}),"onAppRoute"):gn(t,n,o,i,a,s,e,r)}),"`onAppRoute`")),t.onAppRouteResized((()=>{wn&&wn()})),t.onPageReload(D((e=>{const t=e.path,n=e.webviewId;_n(t,n)}),"onPageReload")),t.onWebviewEvent(D((e=>{t.traceBeginEvent("Framework","onWebviewEvent");const{webviewId:n,eventName:i,data:a,nodeId:s}=e,c=((e,n,i,a)=>{if(!bt.call(Nt,e))return;const s=Nt[e],c=s.page;if("__DOMReady"===i)return Zt.pageReadyTime=Date.now(),k(`Invoke event onReady in page: ${s.route}`),c.__callPageLifeTime__("onReady"),void Qt("newPage2pageReady",Zt.newPageTime,Zt.pageReadyTime);if("telecontrol"!==i){if(a._requireActive){const t=Bt[Bt.length-1];if(!t||t.webviewId!==e)return}if(a._relatedInfo&&q.setEventRelatedInfo(a._relatedInfo),n){const t=o.getNodeById(n,e);if(!t)return;const s=r.Element.getMethodCaller(t);return k(`Invoke event ${i} in component: ${t.is}`),tn(s,i)?Ht(s,i,a):void x("事件警告",`Do not have ${i} handler in component: ${t.is}. Please make sure that ${i} handler has been defined in ${t.is}.`)}if(k(`Invoke event ${i} in page: ${s.route}`),tn(c,i))return Ht(c,i,a);x("事件警告",`Do not have ${i} handler in current page: ${s.route}. Please make sure that ${i} handler has been defined in ${s.route}, or ${s.route} has been added into app.json`)}else{const n=a.type,r="onTelecontrolSelect";if("start"===n)t.publishTelecontrol({type:n,custom:tn(c,r)},[e]);else if("next"===n){if(k(`Invoke event ${r} in page: ${s.route}`),!tn(c,r))return void x("事件警告",`Do not have ${r} handler in current page: ${s.route}. Please make sure that ${r} handler has been defined in ${s.route}, or ${s.route} has been added into app.json`);const o=Ht(c,r,{current:a.current,target:a.target,key:a.key});if(I(o)){const r=1e3,i=new Promise((e=>setTimeout(e,r,"")));Promise.race([o,i]).then((r=>{t.publishTelecontrol({seqId:a.seqId,type:n,res:r},[e])})).catch((()=>{}))}else t.publishTelecontrol({seqId:a.seqId,type:n,res:o},[e])}}})(n,s,i,a);return t.traceEndEvent(),c}),"onWebviewEvent")),t.onAppEnterForeground((e=>{Zt.appFgTime=Date.now(),0!==e.scene&&"0"!==e.scene&&(Ot=e.scene)})),t.onPullDownRefresh(D(((e,t)=>{(e=>{if(!bt.call(Nt,e))return void x("事件警告",`onPullDownRefresh WebviewId: ${e} not found`);const t=Nt[e],n=t.page;tn(n,"onPullDownRefresh")&&(k(`Invoke event onPullDownRefresh in page: ${t.route}`),N.call(n,"onPullDownRefresh"),yt("pullDownRefresh",n))})(t)}),"onPullDownRefresh")),t.onShareAppMessage(D(yn,"onShareAppMessage"));const Cn=(e,n)=>{if(e=e||{},null===Nt[n])return;const r=Nt[n],o=r.page,i={path:(e=>{if(null===Nt[e])return"";const t=Nt[e].page,n=t.options||{};let r=L(t.route);return Object.keys(n).length&&(r+="?"+Object.keys(n).map((e=>`${e}=${n[e]}`)).join("&")),r})(n),fromButton:!!e.fromButton};if(tn(o,"onHandoff")){k(`Invoke event onHandoff in page: ${r.route}`);const e=N.call(o,"onHandoff")||{};e.path&&"string"==typeof e.path&&(i.path=L(kt(e.path)))}t.startHandoff(i)};t.onAddToFavorites(D(((e,n)=>{if(null===Nt[n])return;const r=e,o="onAddToFavorites",i=Nt[n],a=i.page;if(tn(a,o)){k(`Invoke event onAddToFavorites in page: ${i.route}`);const e={webViewUrl:r.webViewUrl},t=N.call(a,o,e)||{};if(t.title&&"string"==typeof t.title&&(r.title=t.title),t.query&&"string"==typeof t.query){const e=r.path.split("?")[0];r.path=`${e}?${t.query}`}t.imageUrl&&"string"==typeof t.imageUrl&&(/^(https?|wxfile|cloud):\/\//.test(t.imageUrl)?r.imageUrl=t.imageUrl:r.imageUrl=Et(t.imageUrl,!1)),r.disableForward=t.disableForward||!1}t.getCloudFileUrl([r.imageUrl],"image",(e=>{r.imageUrl=e.data[0].url,t.addToFavorites(r,{})}))}),"onAddToFavorites")),t.onStartHandoff(D(Cn,"onStartHandoff")),t.subscribeTapHandoffButton(((e,t)=>{D(Cn,"onStartHandoff")({fromButton:!0},t)})),t.subscribeTapShareButton(((e,t)=>{if(!bt.call(Nt,t))return void x("事件警告",`tapShareButton WebviewId: ${t} not found`);const n=Nt[t].page;let r=L(n.route);Object.keys(n.options).length>0&&(r+="?"+Object.keys(n.options).map((e=>`${e}=${n.options[e]}`)).join("&")),D(yn,"onShareAppMessage")({path:r,title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareButton:!0},t)})),t.subscribeTapShareTimeLineButton(((e,t)=>{if(!bt.call(Nt,t))return void x("事件警告",`tapShareButton WebviewId: ${t} not found`);const n=Nt[t].page;tn(n,"onShareTimeline")&&tn(n,"onShareAppMessage")?D(An,"onShareTimeline")({title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareTimeLineButton:!0},t):x("事件警告","onShareTimeline and onShareAppMessage are both needed")})),t.onShareTimeline(D(An,"onShareTimeline")),t.subscribeSavePageState(D(((e,t)=>{if(!bt.call(Nt,t))return void x("事件警告",`onPageWillManuallyTerminate WebviewId: ${t} not found`);Nt[t].statesData=e}),"savePageState")),t.subscribeRecycleStatistics(D(((e,t)=>{if(!bt.call(Nt,t))return;const n=Nt[t];((e,{pageCount:t,pageType:n,rootCompCount:r=0,rootCustomCompCount:o=0,rootCustomCompRatio:i=0,rootInternalCompCount:a=0})=>{const s=[t,n].map(encodeURIComponent).join(",");W[e]={rootCompCount:r,rootCustomCompCount:o,rootCustomCompRatio:i,rootInternalCompCount:a},Reporter.reportKeyValue({key:"WebviewRecycle",value:s}),Reporter.submit()})(t,c()({pageCount:Bt.length,pageType:nn(n.route)?2:1},e))}),"recycleStatistics")),t.onTabItemTap(D(((e,n)=>{if(t._setWxIsInvokeInTapForNavToMiniProgram(),!bt.call(Nt,n))return;const r=Nt[n],i=r.page;if(void 0!==__wxConfig&&__wxConfig.tabBar&&__wxConfig.tabBar.list&&__wxConfig.tabBar.list[e.index]){const t={index:e.index,pagePath:(__wxConfig.tabBar.list[e.index].pagePath||"").replace(/\.html$/,""),text:__wxConfig.tabBar.list[e.index].text};if(t.pagePath!==r.route)return;tn(i,"onTabItemTap")&&(k(`Invoke event onTabItemTap in page: ${r.route}`),o.wrapTapMark((()=>{N.call(i,"onTabItemTap",t)})))}}),"tabItemTap"));const In=()=>Rt;t.onNavigationBarTitleUpdate((e=>{if(e.errMsg.indexOf(":ok")>=0&&e.title){const t=Yt();t&&(t.updateTitle=e.title)}}));const En=t.createPluginWX,Sn=t.createPluginConsole,Tn=t.createPluginWXWebAssembly,xn=function(e,n){const r=e+"/"+n,i={__wxAppCode__:{},__wxAppCurrentFile__:""};i.wx=En(e,n),i.console=Sn(),i.WXWebAssembly=Tn(e,n),i.Page=e=>{an(e,r,i.__wxAppCode__,i.__wxAppCurrentFile__,i)},i.getCurrentPages=()=>Kt(e),i.Component=e=>on(e,r,i.__wxAppCode__,i.__wxAppCurrentFile__,i),i.Behavior=e=>o.Behavior(e,r,i.__wxAppCode__,i.__wxAppCurrentFile__),i.publishDomainComponents=e=>o.publishDomainComponents(r,e);const a=(e=>{const t=[];__wxConfig.plugins&&Object.keys(__wxConfig.plugins).forEach((e=>{const n=__wxConfig.plugins[e];t.push({alias:e,plugin:n,prefix:""})})),__wxConfig.subpackages&&__wxConfig.subpackages.forEach((e=>{e.plugins&&Object.keys(e.plugins).forEach((n=>{const r=e.plugins[n];t.push({alias:n,plugin:r,prefix:e.root})}))}));const n=(()=>{const n=t.filter((t=>t.plugin.provider===e));if(0===n.length)return null;if(1===n.length){let e=n[0].plugin.subpackage||n[0].prefix;return"__APP__"===e&&(e=""),n[0].prefix=e,n[0]}return n.find((e=>""!==e.prefix))})();if(null===n)return null;if(void 0===n.plugin.export)return null;let r=n.prefix||"";return"/"===r[0]&&(r=r.slice(1)),r&&"/"!==r.slice(-1)&&(r+="/"),r+(n.plugin.export||"")})(e);let s;return i.requireMiniProgram=()=>(void 0===s&&(s=null===a?{}:y(a)),s),i.beforeFactory=n=>{const r=t.buildPluginPrivateApi(e);n("__wx__/plugin-private-api",((e,t)=>{t.exports=r}))},i};"function"==typeof logxx&&logxx("app-service-engine start");const kn=D((e=>{an(e,"/")}),"create page instance"),Pn=D((e=>on(e,"/")),"create component instance"),Dn=D((e=>o.Behavior(e)),"create behavior instance");i=a})();var a=i.Page,s=i.Component,c=i.Behavior,l=.02,d={delayedGwx:!0},u=i.App,p=i.getApp,h=i.getCurrentPages,f=null,g;"undefined"!=typeof __exportGlobal__&&(__exportGlobal__.Page=i.Page,__exportGlobal__.Component=i.Component,__exportGlobal__.Behavior=i.Behavior,__exportGlobal__.__webview_engine_version__=.02,__exportGlobal__.__vd_version_info__={delayedGwx:!0},__exportGlobal__.App=i.App,__exportGlobal__.getApp=i.getApp,__exportGlobal__.getCurrentPages=i.getCurrentPages,__exportGlobal__.__pageComponent=null),(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},n={};e.d(n,{default:()=>A});const r={},o=BabelRuntimeHelpers.typeof;var a=e.n(o),s=/^plugin:\/\/([A-Za-z0-9_-]+)[/]?(.*)/,c=function(e){var t=e.match(s);if(t&&3===t.length)return{pluginId:t[1],version:"0",modId:t[2].length>=1?t[2]:void 0}},l=function(e){return"".concat(e.pluginId,"/").concat(e.version)},d=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"],u=r,p=r,h=function(e){for(var t=[],n=e.split("/"),r=0,o=n.length;r<o;++r){var i=n[r];if(""!==i&&"."!==i)if(".."===i){if(0===t.length){t=null;break}t.pop()}else r+1<o&&".."===n[r+1]?r++:t.push(i)}return t},f=function(e,t){var n=p[e],r=h(t+"/index.js").join("/");return n&&n.mods&&n.mods[r]?r:(r=h(t).join("/"),/\.js$/.test(r)||(r+=".js"),n&&n.mods&&n.mods[r]?r:"")},_=function(e,t){var n=function(e){var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"}(t);return function(t){if("string"!=typeof t)throw new Error("require args must be a string.");var r=h(t.startsWith("/")?t:"".concat(n,"/").concat(t));if(!r)throw new Error("can't find module : "+t);var o=r.join("/");return o=function(e,t,n,r){var o=t,i=p[e];if(/\.js$/.test(o)||(o+=".js"),"string"==typeof o&&i&&i.mods&&i.mods[o])return o;var a=h(n);if(!a)throw new Error("can't find module : "+r);for(var s,c=t.substring(a.join("/").length);a.length;){var l=a.join("/")+"/miniprogram_npm"+c;if(s=f(e,l))break;a.pop()}return s||(c="/"===c[0]?c:"/"+c,s=f(e,"miniprogram_npm"+c)),s||t}(e,o,n,t),m(e,o)}},m=function(e,t){!function(e){if("string"!=typeof e)throw new Error("require args must be a string")}(t);var n=p[e];if(void 0===n)throw new Error('Plugin "'.concat(e,'" is not defined.'));var r=n.mods[t];if(void 0===r)throw new Error('Plugin module "'.concat(t,'" is not defined.'));if(1===r.status){var o;r.status=2;var i=r.factory,a={exports:{}};i&&(o=i(_(e,t),a,a.exports)),r.exports=void 0!==a.exports?a.exports:o}return r.exports},y=function(e,t){var n=t.factory,r=t.global,o={exports:{}};if(!n)return o.exports;var i=function(e){return function(t,n){var r=u[e];if(void 0===r)throw new Error('Sorry, plugin "'.concat(e,'" is not defined.'));r.mods[t]={status:1,factory:n}}}(e),a=function(e){return function(t){return m(e,t)}}(e),s=r.beforeFactory;delete r.beforeFactory;var c=r.afterFactory;delete r.afterFactory,"function"==typeof s&&s.apply(r,[i,a,o]);var l=n(i,a,o,o.exports,r,r.wx,void 0,r.Page,r.Component,r.Behavior,void 0,r.getCurrentPages,void 0,r.requireMiniProgram,r.WXWebAssembly);return"function"==typeof c&&c.apply(r,[i,a,o]),void 0!==o.exports?o.exports:l},v=function e(n,r){var o,i,s;!function(){if(void 0===__wxConfig||void 0===__wxConfig.plugins&&void 0===__wxConfig.gamePlugins)throw new Error("This application has not registered any plugins yet.")}(),function(e){if("string"!=typeof e)throw new Error("requirePlugin args must be a string.")}(n);var u=c(n),h=void 0===u;if(h||(o=u.pluginId,i=l(u),s=p[i]),void 0===s&&function(e){return null!==e.match(/^wx[0-9a-f]{16}$/)}(n)&&(o=n,i=l({pluginId:n,version:"0"}),s=p[i]),void 0===s){var f=function(e){var t=e.match(/([^/]*)\/?(.*)/);if(!t||t.length<2)throw new Error('Plugin "'.concat(e,'" has not registered.'));var n=t[1],r=t[2],o=(__wxConfig.plugins||__wxConfig.gamePlugins)[n];if(void 0===o)throw new Error('Plugin "'.concat(e,'" has not registered.'));return{pluginId:o.provider,version:"0",path:r}}(n);o=f.pluginId,i=l(f),s=p[i]}if("function"!=typeof r){if(void 0===s)throw new Error('Plugin "'.concat(i,'" is not defined.'));return 1===s.status&&(s.exports=y(i,s),s.status=2),h?"function"==typeof s.exports?s.exports():void 0:s.exports}void 0===s?function(e,n){var r="__APP__"===e;r||"/"===e.slice(-1)||(e+="/"),"devtools"===__wxConfig.platform?(wxNativeConsole.info("[WebNode] injectSubPackages: ".concat(e)),WeixinJSBridge.invoke("injectSubPackages",{subPackages:[e]},n)):(wxNativeConsole.info("[WebNode] loadSubpackage: ".concat(e)),t.loadSubpackage({name:e,success:function(){var t=Object.values(__wxConfig.plugins||{}).filter((function(t){return t.subpackage.includes(e)})).map((function(e){var t=e.provider,n="__plugin__/".concat(t);return{plugin_id:t,prefix_path:d.includes(t)?null:n}}));__subContextEngine__.injectEntryFile(r?"":e,t),n()}}))}(function(e){for(var t=__wxConfig.subPackages||[],n=function(n){if(!t[n].plugins)return"continue";if(Object.keys(t[n].plugins).find((function(r){return t[n].plugins[r].provider===e}))){var r=t[n].root||"";return r&&"/"!==r.slice(-1)&&(r+="/"),{v:r}}},r=0;r<t.length;++r){var o=n(r);if("continue"!==o&&"object"===a()(o))return o.v}return"__APP__"}(o),(function(){r(e(n))})):setTimeout((function(){r(e(n))}))};v.async=function(e){return new Promise((function(t,n){try{v(e,(function(e){t(e)}))}catch(e){n(e)}}))};const A={definePlugin:function(e,t){var n=c(e);if(!n||!n.pluginId||!n.version)throw new Error('schema must match "plugin://{name}/{version}"');var r=l(n),o=function(e){if(void 0===i||"function"!=typeof i.__createPluginGlobal)throw new Error("Create plugin global failed.");return i.__createPluginGlobal(e.pluginId,e.version)}(n);u[r]={status:1,factory:t,mods:{},global:o}},requirePlugin:v};g=n.default})();var _=g.definePlugin,m=g.requirePlugin;!function(e){var n={},r={};define=function(e,t){if(n[e]&&n[e].factory){var r=n[e],o=t.toString();r.factoryString||(r.factoryString=r.factory.toString()),o!==r.factoryString&&(n[e]={status:1,factory:t,factoryString:o})}else n[e]={status:1,factory:t}};var o=function(e){if(e&&__wxConfig.subPackages)for(var t=0,n=__wxConfig.subPackages.length;t<n;t++)if(0===e.indexOf(__wxConfig.subPackages[t].root))return __wxConfig.subPackages[t]},i=function(e){for(var t=[],n=e.split("/"),r=0,o=n.length;r<o;++r){var i=n[r];if(""!=i&&"."!=i)if(".."==i){if(0==t.length){t=null;break}t.pop()}else r+1<o&&".."==n[r+1]?r++:t.push(i)}return t},a=function(e){var t=i(e+"/index.js").join("/");return n[t]?t:(t=i(e).join("/"),/\.js$/.test(t)||(t+=".js"),n[t]?t:"")},s=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"];var c=function(e){var t=function(e){var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"}(e),r=function(r,s){if("string"!=typeof r)throw new Error("require args must be a string");var c=i(t+"/"+r);if("/__wx__/private-api"===r&&(c=i(r)),!c)throw new Error("can not find module : "+r);try{var l=c.join("/");l=function(e,t,r){var o=e;if(/\.js$/.test(o)||(o+=".js"),"string"==typeof o&&n[o])return o;var s=i(t);if(!s)throw new Error("can not find module : "+r);for(var c,l=e.substring(s.join("/").length);s.length;){var d=s.join("/")+"/miniprogram_npm"+l;if(c=a(d))break;s.pop()}return c||(l="/"===l[0]?l:"/"+l,c=a(d="miniprogram_npm"+l)),c||e}(l,t,r);var d=function(e){return"functional-pages"===i(e)[0]};if(d(l)!==d(e)&&Reporter.thirdErrorReport({error:new Error('should not require across "functional-pages" folder'),extend:'at require("'+r+'") in '+e}),"devtools"===__wxConfig.platform&&__wxConfig.subPackages&&void 0===s){var u=o(l),p=o(e);if(u&&u!==p)throw new Error("should not require "+r+" in "+e+" without a callback, because they are in diffrent subPackages")}return require(l,void 0,s)}catch(e){throw e}};return r.async=function(e){return new Promise((function(t,n){try{r(e,(function(e){t(e)}))}catch(e){n(e)}}))},r};require=function(o,i,a){if(void 0===i&&(i=!0),"string"!=typeof o)throw new Error("require args must be a string");var l=n[o];if(!l){var d=-1===o.indexOf("/")?o+"/index.js":o;/\.js$/.test(d="miniprogram_npm/"+d)||(d+=".js"),l=n[d]}if(o.endsWith(".js")||(o+=".js"),!l&&"devtools"!==__wxConfig.platform&&void 0!==__subContextEngine__){var u="/"+o.substr(0,o.length-3)+".appservice.js",p={__wxRoute:e.__wxRoute,__wxAppCurrentFile__:e.__wxAppCurrentFile__,__wxRouteBegin:e.__wxRouteBegin};__subContextEngine__.loadJsFiles([u]),function(t){e.__wxRoute=t.__wxRoute,e.__wxAppCurrentFile__=t.__wxAppCurrentFile__,e.__wxRouteBegin=t.__wxRouteBegin}(p),l=n[o]}if("function"!=typeof a){if(!l)throw new Error('module "'+o+'" is not defined');var h={exports:{}},f=l.factory;if(!i||r[o])return delete l.exports,l.status=1,r[o]=!0,f&&f(c(o),h,h.exports),h.exports;if(1===l.status){l.exports=h.exports,l.status=2;var g=void 0;try{f&&(g=f(c(o),h,h.exports))}catch(e){throw l.status=1,e}l.exports=void 0!==h.exports?h.exports:g}return l.exports}l?setTimeout((function(){a(require(o))})):function(e,n){var r="__APP__"===e;"/"!==e.slice(-1)&&(e+="/"),"devtools"===__wxConfig.platform?(wxNativeConsole.info("[WebNode] injectSubPackages: "+e),WeixinJSBridge.invoke("injectSubPackages",{subPackages:[e]},n)):(wxNativeConsole.info("[WebNode] loadSubpackage: "+e),t.loadSubpackage({name:e,success:function(){var t=__wxConfig.subPackages.find((function(t){return t.root===e})),o=Object.keys(t.plugins||{}).map((function(e){var n=t.plugins[e].provider,r="__plugin__/"+n;return{plugin_id:n,prefix_path:s.includes(n)?null:r}}));__subContextEngine__.injectEntryFile(r?"":e,o),n()}}))}(function(e){var t=__wxConfig&&__wxConfig.subPackages;t||(t=[]);for(var n=0;n<t.length;++n){var r=t[n].root||"";if(r&&"/"!==r.slice(-1)&&(r+="/"),e.slice(0,r.length)===r)return r}return"__APP__"}(o),(function(){a(require(o))}))},requireOnce=function(e){return require(e,!1)},e.__modules__=n}(this);var y=require,v=define;if(__exportGlobal__.definePlugin=g.definePlugin,__exportGlobal__.requirePlugin=g.requirePlugin,"function"==typeof __passWAServiceGlobal__){var A={};A.__appServiceEngine__=i,A.__appServiceSDK__=t,A.__virtualDOM__=o,A.__subContextEngine__=__subContextEngine__,A.__sclEngine__=__sclEngine__,A.Reporter=Reporter,A.exparser=r,A.WeixinJSBridge=WeixinJSBridge,A.Protect=Protect,__passWAServiceGlobal__(A)}};function __doWAServiceInit__(){var e;"undefined"!=typeof wx&&wx.version&&(e=wx.version),__waServiceInit__(),e&&"undefined"!=typeof __exportGlobal__&&__exportGlobal__.wx&&(__exportGlobal__.wx.version=e)}__subContextEngine__.isIsolateContext(),__subContextEngine__.isIsolateContext()||__doWAServiceInit__();;if(__wxConfig.platform!=="devtools"){var r={};Object.keys(regeneratorRuntime).forEach((function(e){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){return regeneratorRuntime[e]},set:function(t){return delete r[e],r[e]=t}})})),__exportGlobal__.regeneratorRuntime=r;};;__subContextEngine__.initAppRelatedContexts(__exportGlobal__);})(this);var __WAServiceEndTime__ = Date.now();
typeof __wxLibrary.onEnd === 'function' && __wxLibrary.onEnd(); __wxLibrary = undefined;
